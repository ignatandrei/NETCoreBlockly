var nS=Object.defineProperty,rS=Object.defineProperties,oS=Object.getOwnPropertyDescriptors,$b=Object.getOwnPropertySymbols,sS=Object.prototype.hasOwnProperty,aS=Object.prototype.propertyIsEnumerable,Zb=(U,$,m)=>$ in U?nS(U,$,{enumerable:!0,configurable:!0,writable:!0,value:m}):U[$]=m,Fm=(U,$)=>{for(var m in $||($={}))sS.call($,m)&&Zb(U,m,$[m]);if($b)for(var m of $b($))aS.call($,m)&&Zb(U,m,$[m]);return U},Bm=(U,$)=>rS(U,oS($));(self.webpackChunkAutoBlocklyApp=self.webpackChunkAutoBlocklyApp||[]).push([[179],{28017:(U,$,m)=>{"use strict";m.d($,{d:()=>ot});var C=m(68306),_=m(38421);const{isArray:e}=Array;var n=m(60515),r=m(25403),s=m(63269);var y=m(39646),x=m(4128),B=m(32076),Q=m(91005),at=m(18505),rt=m(63900),St=m(70262),Ht=m(54004),vt=m(43014),xt=m(51707);class Wt{constructor(lt,Ut){this.urL=lt,this.http=Ut,this.WasAlive=!1}download(){window.location.href="https://github.com/ignatandrei/BlocklyAutomation/releases/latest/download/releaseLocalAPI.zip"}IsAlive(){this.WasAlive=!1;var lt=this,Ut=(new Date).toISOString();return this.http.get(this.urL+`api/v1/Management/CurrentDate?${Ut}`,{responseType:"text"}).pipe((0,St.K)(Rt=>(0,y.of)("")),(0,Ht.U)(Rt=>(null==Rt?void 0:Rt.length)>0&&(Date.parse(Rt),lt.WasAlive=!0,!0)))}LoadBlockContent(lt){return(new Date).toISOString(),this.http.post(this.urL+"api/v1/BASave/GetBlocksContent",{id:lt},{responseType:"text"}).pipe((0,Ht.U)(Rt=>null==Rt?void 0:Rt.toString()))}LoadBlocks(){return(new Date).toISOString(),this.http.post(this.urL+"api/v1/BASave/GetBlocks",null).pipe((0,Ht.U)(Ut=>Ut.map(Et=>{var ht=new vt.q(Et);return ht.Source="LocalAPI",ht})))}SaveBlock(lt,Ut){return this.http.post(this.urL+"api/v1/BASave/SaveNewBlock",{b:lt,content:Ut},{responseType:"text"}).pipe((0,Ht.U)(Rt=>Number.parseInt(null==Rt?void 0:Rt.toString(),10)))}}var Jt=m(5e3),Ct=m(40520),yt=m(92590);let ot=(()=>{class mt{constructor(Ut,Rt){this.http=Ut,this.loadShowUsageService=Rt,this.settings=null,this.linksSwagger=[],this.demoBlocks=[],this.swaggersDict=new Map,this.customCategories="",this.LocalAPI=null,this.Init()}CreateLocalApis(Ut,Rt){return new Wt(Rt,Ut)}Init(){return function(...mt){const lt=(0,s.jO)(mt),Ut=function(mt){return 1===mt.length&&e(mt[0])?mt[0]:mt}(mt);return Ut.length?new C.y(Rt=>{let Et=Ut.map(()=>[]),ht=Ut.map(()=>!1);Rt.add(()=>{Et=ht=null});for(let nt=0;!Rt.closed&&nt<Ut.length;nt++)(0,_.Xf)(Ut[nt]).subscribe(new r.Q(Rt,he=>{if(Et[nt].push(he),Et.every(Mt=>Mt.length)){const Mt=Et.map(Nt=>Nt.shift());Rt.next(lt?lt(...Mt):Mt),Et.some((Nt,de)=>!Nt.length&&ht[de])&&Rt.complete()}},()=>{ht[nt]=!0,!Et[nt].length&&Rt.complete()}));return()=>{Et=ht=null}}):n.E}(this.getSettings(),this.loadShowUsageService.getSwaggerLinks(),this.loadShowUsageService.getDemoBlocks(),this.loadShowUsageService.getCustomCategories(),this.getLatestVersion()).pipe((0,Q.g)(1e3),(0,at.b)(([Ut,Rt,Et,ht,nt])=>{this.settings=Ut,this.settings.latestVersion=nt,this.linksSwagger=Rt,this.demoBlocks=Et.map(he=>{var Mt=new vt.q(he);return Mt.Source="Demos",Mt}),this.customCategories=ht,this.LocalAPI=this.CreateLocalApis(this.http,this.settings.localAPI),this.LocalAPI.IsAlive().subscribe(he=>{console.log("LocalAPI is alive",he)})}),(0,rt.w)(()=>this.obtainSwaggers(this.linksSwagger)),(0,rt.w)(()=>(0,y.of)("")))}obtainSwaggers(Ut){var Rt=Ut.map(ht=>this.LoadSwaggersFromUrl(ht));return(0,x.D)(Rt)}LoadSwaggersFromUrl(Ut){var Rt=Ut.link,Et=Ut.id||Ut.link,ht=new xt.L(Rt);return(0,B.D)(ht.ParseSwagger()).pipe((0,at.b)(he=>{console.log("swagger loaded:"+Rt,he),he.name=Et,this.swaggersDict.set(Rt,he)},he=>{console.error("swagger error:"+Rt,he)}))}getLatestVersion(){return this.http.get("https://ignatandrei.github.io/BlocklyAutomation/version.txt",{responseType:"text"}).pipe((0,St.K)(Ut=>(console.error("error getting latest version",Ut),(0,y.of)("vcannot get latest version"))),(0,Ht.U)(Ut=>Ut.toString().trim().substr(1)))}getSettings(){var Ut=(new Date).toISOString();return this.http.get(`assets/settings.json?${Ut}`,{responseType:"text"}).pipe((0,Ht.U)(Rt=>JSON.parse(Rt)))}}return mt.\u0275fac=function(Ut){return new(Ut||mt)(Jt.LFG(Ct.eN),Jt.LFG(yt.F))},mt.\u0275prov=Jt.Yz7({token:mt,factory:mt.\u0275fac}),mt})()},43014:(U,$,m)=>{"use strict";m.d($,{q:()=>C});class C{constructor(e={}){this.id="",this.description="",this.categories="",this.blocks="",this.Source="None",Object.assign(this,e)}}},80926:(U,$,m)=>{"use strict";m.d($,{v:()=>e});var C=m(77579),_=m(5e3);let e=(()=>{class t{constructor(){this.sendData=new C.x}receiveData(){return this.sendData.asObservable()}sendDataToServer(r,s){this.sendData.next([r,s])}}return t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=_.Yz7({token:t,factory:t.\u0275fac}),t})()},27392:(U,$,m)=>{"use strict";m.r($),m.d($,{DisplayBlocklyComponent:()=>vp});var C=m(15861),e=(m(64166),m(76279)),t=m(30069);const n=[e.Events.VIEWPORT_CHANGE,e.Events.BLOCK_MOVE,e.Events.BLOCK_DELETE];class u{constructor(l){this.workspace_=l,this.width_=0,this.height_=0,this.top_=0,this.left_=0,this.lastScale_=1,this.cachedContentMetrics_=void 0}init(l){l=Number(l),this.padding_=isNaN(l)?10:l,this.svgGroup_=e.utils.dom.createSvgElement(e.utils.Svg.G,{class:"contentAreaHighlight"},null);const o=String(Math.random()).substring(2),a=e.utils.dom.createSvgElement(new e.utils.Svg("mask"),{id:"contentAreaHighlightMask"+o},this.svgGroup_);e.utils.dom.createSvgElement(e.utils.Svg.RECT,{x:0,y:0,width:"100%",height:"100%",fill:"white"},a),this.rect_=e.utils.dom.createSvgElement(e.utils.Svg.RECT,{x:0,y:0,rx:e.Bubble.BORDER_WIDTH,ry:e.Bubble.BORDER_WIDTH,fill:"black"},a),this.background_=e.utils.dom.createSvgElement(e.utils.Svg.RECT,{x:0,y:0,width:"100%",height:"100%",mask:"url(#contentAreaHighlightMask"+o+")"},this.svgGroup_),this.applyColor_();const c=this.workspace_.getMetricsManager();this.cachedContentMetrics_=c.getContentMetrics(!0),this.resize_(this.cachedContentMetrics_);const f=c.getAbsoluteMetrics();this.position_(this.cachedContentMetrics_,f),this.svgGroup_.style.transition="opacity 0.25s";const E=this.workspace_.getParentSvg();E.firstChild?E.insertBefore(this.svgGroup_,E.firstChild):E.appendChild(this.svgGroup_),this.onChangeWrapper_=this.onChange_.bind(this),this.workspace_.addChangeListener(this.onChangeWrapper_)}dispose(){this.svgGroup_&&e.utils.dom.removeNode(this.svgGroup_),this.onChangeWrapper_&&e.unbindEvent_(this.onChangeWrapper_)}onChange_(l){if(l.type===e.Events.THEME_CHANGE)this.applyColor_();else if(-1!==n.indexOf(l.type)){const o=this.workspace_.getMetricsManager();l.type!==e.Events.VIEWPORT_CHANGE&&(this.cachedContentMetrics_=o.getContentMetrics(!0),this.resize_(this.cachedContentMetrics_));const a=o.getAbsoluteMetrics();this.position_(this.cachedContentMetrics_,a)}else l.type===e.Events.BLOCK_DRAG&&this.handleBlockDrag_(l)}handleBlockDrag_(l){this.svgGroup_.setAttribute("opacity",l.isStart?"0":"1")}applyColor_(){const o=this.workspace_.getTheme().getComponentStyle("workspaceBackgroundColour")||"#ffffff",a=e.utils.colour.blend("#000",o,.1),c=e.utils.colour.blend("#fff",o,.1);this.background_.setAttribute("fill","#ffffff"===o||"#fff"===o?a:c)}resize_(l){const o=l.width?l.width+2*this.padding_:0,a=l.height?l.height+2*this.padding_:0;o!==this.width_&&(this.width_=o,this.rect_.setAttribute("width",o)),a!==this.height_&&(this.height_=a,this.rect_.setAttribute("height",a))}position_(l,o){const f=this.workspace_.scale,E=o.top+l.top*f- -this.workspace_.scrollY-this.padding_*f,R=o.left+l.left*f- -this.workspace_.scrollX-this.padding_*f;(E!==this.top_||R!==this.left_||this.lastScale_!==f)&&(this.top_=E,this.left_=R,this.lastScale_=f,this.rect_.setAttribute("transform","translate("+R+","+E+") scale("+f+")"))}}var y=m(43014),x=m(51707),B=m(70697);const at="undefined"==typeof window?function(g){return g()}:window.requestAnimationFrame;function rt(g,l,o){const a=o||(E=>Array.prototype.slice.call(E));let c=!1,f=[];return function(...E){f=a(E),c||(c=!0,at.call(window,()=>{c=!1,g.apply(l,f)}))}}const Ht=g=>"start"===g?"left":"end"===g?"right":"center",vt=(g,l,o)=>"start"===g?l:"end"===g?o:(l+o)/2;function Wt(){}const Jt=function(){let g=0;return function(){return g++}}();function Ct(g){return null==g}function yt(g){if(Array.isArray&&Array.isArray(g))return!0;const l=Object.prototype.toString.call(g);return"[object"===l.substr(0,7)&&"Array]"===l.substr(-6)}function ot(g){return null!==g&&"[object Object]"===Object.prototype.toString.call(g)}const mt=g=>("number"==typeof g||g instanceof Number)&&isFinite(+g);function lt(g,l){return mt(g)?g:l}function Ut(g,l){return void 0===g?l:g}const Et=(g,l)=>"string"==typeof g&&g.endsWith("%")?parseFloat(g)/100*l:+g;function ht(g,l,o){if(g&&"function"==typeof g.call)return g.apply(o,l)}function nt(g,l,o,a){let c,f,E;if(yt(g))if(f=g.length,a)for(c=f-1;c>=0;c--)l.call(o,g[c],c);else for(c=0;c<f;c++)l.call(o,g[c],c);else if(ot(g))for(E=Object.keys(g),f=E.length,c=0;c<f;c++)l.call(o,g[E[c]],E[c])}function he(g,l){let o,a,c,f;if(!g||!l||g.length!==l.length)return!1;for(o=0,a=g.length;o<a;++o)if(c=g[o],f=l[o],c.datasetIndex!==f.datasetIndex||c.index!==f.index)return!1;return!0}function Mt(g){if(yt(g))return g.map(Mt);if(ot(g)){const l=Object.create(null),o=Object.keys(g),a=o.length;let c=0;for(;c<a;++c)l[o[c]]=Mt(g[o[c]]);return l}return g}function Nt(g){return-1===["__proto__","prototype","constructor"].indexOf(g)}function de(g,l,o,a){if(!Nt(g))return;const c=l[g],f=o[g];ot(c)&&ot(f)?ve(c,f,a):l[g]=Mt(f)}function ve(g,l,o){const a=yt(l)?l:[l],c=a.length;if(!ot(g))return g;const f=(o=o||{}).merger||de;for(let E=0;E<c;++E){if(!ot(l=a[E]))continue;const R=Object.keys(l);for(let O=0,F=R.length;O<F;++O)f(R[O],g,l,o)}return g}function ue(g,l){return ve(g,l,{merger:Be})}function Be(g,l,o){if(!Nt(g))return;const a=l[g],c=o[g];ot(a)&&ot(c)?ue(a,c):Object.prototype.hasOwnProperty.call(l,g)||(l[g]=Mt(c))}function Ze(g,l){const o=g.indexOf(".",l);return-1===o?g.length:o}function Le(g,l){if(""===l)return g;let o=0,a=Ze(l,o);for(;g&&a>o;)g=g[l.substr(o,a-o)],o=a+1,a=Ze(l,o);return g}function gi(g){return g.charAt(0).toUpperCase()+g.slice(1)}const Bt=g=>void 0!==g,Te=g=>"function"==typeof g,$t=(g,l)=>{if(g.size!==l.size)return!1;for(const o of g)if(!l.has(o))return!1;return!0},At=Math.PI,pe=2*At,ze=pe+At,hi=Number.POSITIVE_INFINITY,Ie=At/180,te=At/2,ee=At/4,ke=2*At/3,ne=Math.log10,me=Math.sign;function ye(g){const l=Math.round(g);g=ei(g,l,g/1e3)?l:g;const o=Math.pow(10,Math.floor(ne(g))),a=g/o;return(a<=1?1:a<=2?2:a<=5?5:10)*o}function ce(g){return!isNaN(parseFloat(g))&&isFinite(g)}function ei(g,l,o){return Math.abs(g-l)<o}function Fi(g,l,o){let a,c,f;for(a=0,c=g.length;a<c;a++)f=g[a][o],isNaN(f)||(l.min=Math.min(l.min,f),l.max=Math.max(l.max,f))}function wi(g){return g*(At/180)}function yi(g){return g*(180/At)}function pn(g){if(!mt(g))return;let l=1,o=0;for(;Math.round(g*l)/l!==g;)l*=10,o++;return o}function mi(g,l){const o=l.x-g.x,a=l.y-g.y,c=Math.sqrt(o*o+a*a);let f=Math.atan2(a,o);return f<-.5*At&&(f+=pe),{angle:f,distance:c}}function Zi(g,l){return Math.sqrt(Math.pow(l.x-g.x,2)+Math.pow(l.y-g.y,2))}function Ce(g,l){return(g-l+ze)%pe-At}function Oe(g){return(g%pe+pe)%pe}function Ci(g,l,o,a){const c=Oe(g),f=Oe(l),E=Oe(o),R=Oe(f-c),O=Oe(E-c),F=Oe(c-f),J=Oe(c-E);return c===f||c===E||a&&f===E||R>O&&F<J}function je(g,l,o){return Math.max(l,Math.min(o,g))}function _i(g,l,o,a=1e-6){return g>=Math.min(l,o)-a&&g<=Math.max(l,o)+a}const Ui=g=>0===g||1===g,$e=(g,l,o)=>-Math.pow(2,10*(g-=1))*Math.sin((g-l)*pe/o),fe=(g,l,o)=>Math.pow(2,-10*g)*Math.sin((g-l)*pe/o)+1,kt={linear:g=>g,easeInQuad:g=>g*g,easeOutQuad:g=>-g*(g-2),easeInOutQuad:g=>(g/=.5)<1?.5*g*g:-.5*(--g*(g-2)-1),easeInCubic:g=>g*g*g,easeOutCubic:g=>(g-=1)*g*g+1,easeInOutCubic:g=>(g/=.5)<1?.5*g*g*g:.5*((g-=2)*g*g+2),easeInQuart:g=>g*g*g*g,easeOutQuart:g=>-((g-=1)*g*g*g-1),easeInOutQuart:g=>(g/=.5)<1?.5*g*g*g*g:-.5*((g-=2)*g*g*g-2),easeInQuint:g=>g*g*g*g*g,easeOutQuint:g=>(g-=1)*g*g*g*g+1,easeInOutQuint:g=>(g/=.5)<1?.5*g*g*g*g*g:.5*((g-=2)*g*g*g*g+2),easeInSine:g=>1-Math.cos(g*te),easeOutSine:g=>Math.sin(g*te),easeInOutSine:g=>-.5*(Math.cos(At*g)-1),easeInExpo:g=>0===g?0:Math.pow(2,10*(g-1)),easeOutExpo:g=>1===g?1:1-Math.pow(2,-10*g),easeInOutExpo:g=>Ui(g)?g:g<.5?.5*Math.pow(2,10*(2*g-1)):.5*(2-Math.pow(2,-10*(2*g-1))),easeInCirc:g=>g>=1?g:-(Math.sqrt(1-g*g)-1),easeOutCirc:g=>Math.sqrt(1-(g-=1)*g),easeInOutCirc:g=>(g/=.5)<1?-.5*(Math.sqrt(1-g*g)-1):.5*(Math.sqrt(1-(g-=2)*g)+1),easeInElastic:g=>Ui(g)?g:$e(g,.075,.3),easeOutElastic:g=>Ui(g)?g:fe(g,.075,.3),easeInOutElastic(g){const l=.1125;return Ui(g)?g:g<.5?.5*$e(2*g,l,.45):.5+.5*fe(2*g-1,l,.45)},easeInBack(g){const l=1.70158;return g*g*((l+1)*g-l)},easeOutBack(g){const l=1.70158;return(g-=1)*g*((l+1)*g+l)+1},easeInOutBack(g){let l=1.70158;return(g/=.5)<1?g*g*((1+(l*=1.525))*g-l)*.5:.5*((g-=2)*g*((1+(l*=1.525))*g+l)+2)},easeInBounce:g=>1-kt.easeOutBounce(1-g),easeOutBounce(g){const l=7.5625,o=2.75;return g<1/o?l*g*g:g<2/o?l*(g-=1.5/o)*g+.75:g<2.5/o?l*(g-=2.25/o)*g+.9375:l*(g-=2.625/o)*g+.984375},easeInOutBounce:g=>g<.5?.5*kt.easeInBounce(2*g):.5*kt.easeOutBounce(2*g-1)+.5},ct={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Lt="0123456789ABCDEF",ae=g=>Lt[15&g],Ae=g=>Lt[(240&g)>>4]+Lt[15&g],Wi=g=>(240&g)>>4==(15&g);function li(g){return g+.5|0}const Je=(g,l,o)=>Math.max(Math.min(g,o),l);function xe(g){return Je(li(2.55*g),0,255)}function ui(g){return Je(li(255*g),0,255)}function ki(g){return Je(li(g/2.55)/100,0,1)}function fn(g){return Je(li(100*g),0,100)}const An=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/,eo=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function no(g,l,o){const a=l*Math.min(o,1-o),c=(f,E=(f+g/30)%12)=>o-a*Math.max(Math.min(E-3,9-E,1),-1);return[c(0),c(8),c(4)]}function mo(g,l,o){const a=(c,f=(c+g/60)%6)=>o-o*l*Math.max(Math.min(f,4-f,1),0);return[a(5),a(3),a(1)]}function kr(g,l,o){const a=no(g,1,.5);let c;for(l+o>1&&(c=1/(l+o),l*=c,o*=c),c=0;c<3;c++)a[c]*=1-l-o,a[c]+=l;return a}function ur(g){const o=g.r/255,a=g.g/255,c=g.b/255,f=Math.max(o,a,c),E=Math.min(o,a,c),R=(f+E)/2;let O,F,J;return f!==E&&(J=f-E,F=R>.5?J/(2-f-E):J/(f+E),O=f===o?(a-c)/J+(a<c?6:0):f===a?(c-o)/J+2:(o-a)/J+4,O=60*O+.5),[0|O,F||0,R]}function Mo(g,l,o,a){return(Array.isArray(l)?g(l[0],l[1],l[2]):g(l,o,a)).map(ui)}function sr(g,l,o){return Mo(no,g,l,o)}function gr(g){return(g%360+360)%360}const Qr={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},Ir={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};let Sn;function oe(g,l,o){if(g){let a=ur(g);a[l]=Math.max(0,Math.min(a[l]+a[l]*o,0===l?360:1)),a=sr(a),g.r=a[0],g.g=a[1],g.b=a[2]}}function He(g,l){return g&&Object.assign(l||{},g)}function Oi(g){var l={r:0,g:0,b:0,a:255};return Array.isArray(g)?g.length>=3&&(l={r:g[0],g:g[1],b:g[2],a:255},g.length>3&&(l.a=ui(g[3]))):(l=He(g,{r:0,g:0,b:0,a:1})).a=ui(l.a),l}function Ji(g){return"r"===g.charAt(0)?function(g){const l=An.exec(g);let a,c,f,o=255;if(l){if(l[7]!==a){const E=+l[7];o=255&(l[8]?xe(E):255*E)}return a=+l[1],c=+l[3],f=+l[5],a=255&(l[2]?xe(a):a),c=255&(l[4]?xe(c):c),f=255&(l[6]?xe(f):f),{r:a,g:c,b:f,a:o}}}(g):function(g){const l=eo.exec(g);let a,o=255;if(!l)return;l[5]!==a&&(o=l[6]?xe(+l[5]):ui(+l[5]));const c=gr(+l[2]),f=+l[3]/100,E=+l[4]/100;return a="hwb"===l[1]?function(g,l,o){return Mo(kr,g,l,o)}(c,f,E):"hsv"===l[1]?function(g,l,o){return Mo(mo,g,l,o)}(c,f,E):sr(c,f,E),{r:a[0],g:a[1],b:a[2],a:o}}(g)}class Yi{constructor(l){if(l instanceof Yi)return l;const o=typeof l;let a;"object"===o?a=Oi(l):"string"===o&&(a=function(g){var o,l=g.length;return"#"===g[0]&&(4===l||5===l?o={r:255&17*ct[g[1]],g:255&17*ct[g[2]],b:255&17*ct[g[3]],a:5===l?17*ct[g[4]]:255}:(7===l||9===l)&&(o={r:ct[g[1]]<<4|ct[g[2]],g:ct[g[3]]<<4|ct[g[4]],b:ct[g[5]]<<4|ct[g[6]],a:9===l?ct[g[7]]<<4|ct[g[8]]:255})),o}(l)||function(g){Sn||(Sn=function(){const g={},l=Object.keys(Ir),o=Object.keys(Qr);let a,c,f,E,R;for(a=0;a<l.length;a++){for(E=R=l[a],c=0;c<o.length;c++)f=o[c],R=R.replace(f,Qr[f]);f=parseInt(Ir[E],16),g[R]=[f>>16&255,f>>8&255,255&f]}return g}(),Sn.transparent=[0,0,0,0]);const l=Sn[g.toLowerCase()];return l&&{r:l[0],g:l[1],b:l[2],a:4===l.length?l[3]:255}}(l)||Ji(l)),this._rgb=a,this._valid=!!a}get valid(){return this._valid}get rgb(){var l=He(this._rgb);return l&&(l.a=ki(l.a)),l}set rgb(l){this._rgb=Oi(l)}rgbString(){return this._valid?(g=this._rgb)&&(g.a<255?`rgba(${g.r}, ${g.g}, ${g.b}, ${ki(g.a)})`:`rgb(${g.r}, ${g.g}, ${g.b})`):this._rgb;var g}hexString(){return this._valid?(l=function(g){return Wi(g.r)&&Wi(g.g)&&Wi(g.b)&&Wi(g.a)}(g=this._rgb)?ae:Ae,g&&"#"+l(g.r)+l(g.g)+l(g.b)+(g.a<255?l(g.a):"")):this._rgb;var g,l}hslString(){return this._valid?function(g){if(!g)return;const l=ur(g),o=l[0],a=fn(l[1]),c=fn(l[2]);return g.a<255?`hsla(${o}, ${a}%, ${c}%, ${ki(g.a)})`:`hsl(${o}, ${a}%, ${c}%)`}(this._rgb):this._rgb}mix(l,o){const a=this;if(l){const c=a.rgb,f=l.rgb;let E;const R=o===E?.5:o,O=2*R-1,F=c.a-f.a,J=((O*F==-1?O:(O+F)/(1+O*F))+1)/2;E=1-J,c.r=255&J*c.r+E*f.r+.5,c.g=255&J*c.g+E*f.g+.5,c.b=255&J*c.b+E*f.b+.5,c.a=R*c.a+(1-R)*f.a,a.rgb=c}return a}clone(){return new Yi(this.rgb)}alpha(l){return this._rgb.a=ui(l),this}clearer(l){return this._rgb.a*=1-l,this}greyscale(){const l=this._rgb,o=li(.3*l.r+.59*l.g+.11*l.b);return l.r=l.g=l.b=o,this}opaquer(l){return this._rgb.a*=1+l,this}negate(){const l=this._rgb;return l.r=255-l.r,l.g=255-l.g,l.b=255-l.b,this}lighten(l){return oe(this._rgb,2,l),this}darken(l){return oe(this._rgb,2,-l),this}saturate(l){return oe(this._rgb,1,l),this}desaturate(l){return oe(this._rgb,1,-l),this}rotate(l){return function(g,l){var o=ur(g);o[0]=gr(o[0]+l),o=sr(o),g.r=o[0],g.g=o[1],g.b=o[2]}(this._rgb,l),this}}function Kn(g){return new Yi(g)}const zn=g=>g instanceof CanvasGradient||g instanceof CanvasPattern;function nr(g){return zn(g)?g:Kn(g)}function Fn(g){return zn(g)?g:Kn(g).saturate(.5).darken(.1).hexString()}const Ao=Object.create(null),jo=Object.create(null);function ro(g,l){if(!l)return g;const o=l.split(".");for(let a=0,c=o.length;a<c;++a){const f=o[a];g=g[f]||(g[f]=Object.create(null))}return g}function _o(g,l,o){return"string"==typeof l?ve(ro(g,l),o):ve(ro(g,""),l)}var lr=new class{constructor(l){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=o=>o.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(o,a)=>Fn(a.backgroundColor),this.hoverBorderColor=(o,a)=>Fn(a.borderColor),this.hoverColor=(o,a)=>Fn(a.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(l)}set(l,o){return _o(this,l,o)}get(l){return ro(this,l)}describe(l,o){return _o(jo,l,o)}override(l,o){return _o(Ao,l,o)}route(l,o,a,c){const f=ro(this,l),E=ro(this,a),R="_"+o;Object.defineProperties(f,{[R]:{value:f[o],writable:!0},[o]:{enumerable:!0,get(){const O=this[R],F=E[c];return ot(O)?Object.assign({},F,O):Ut(O,F)},set(O){this[R]=O}}})}}({_scriptable:g=>!g.startsWith("on"),_indexable:g=>"events"!==g,hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}});function Jr(g,l,o,a,c){let f=l[c];return f||(f=l[c]=g.measureText(c).width,o.push(c)),f>a&&(a=f),a}function Ss(g,l,o,a){let c=(a=a||{}).data=a.data||{},f=a.garbageCollect=a.garbageCollect||[];a.font!==l&&(c=a.data={},f=a.garbageCollect=[],a.font=l),g.save(),g.font=l;let E=0;const R=o.length;let O,F,J,dt,Ft;for(O=0;O<R;O++)if(dt=o[O],null!=dt&&!0!==yt(dt))E=Jr(g,c,f,E,dt);else if(yt(dt))for(F=0,J=dt.length;F<J;F++)Ft=dt[F],null!=Ft&&!yt(Ft)&&(E=Jr(g,c,f,E,Ft));g.restore();const qt=f.length/2;if(qt>o.length){for(O=0;O<qt;O++)delete c[f[O]];f.splice(0,qt)}return E}function ws(g,l,o){const a=g.currentDevicePixelRatio,c=0!==o?Math.max(o/2,.5):0;return Math.round((l-c)*a)/a+c}function Bo(g,l){(l=l||g.getContext("2d")).save(),l.resetTransform(),l.clearRect(0,0,g.width,g.height),l.restore()}function Ro(g,l,o,a){let c,f,E,R,O;const F=l.pointStyle,J=l.rotation,dt=l.radius;let Ft=(J||0)*Ie;if(F&&"object"==typeof F&&(c=F.toString(),"[object HTMLImageElement]"===c||"[object HTMLCanvasElement]"===c))return g.save(),g.translate(o,a),g.rotate(Ft),g.drawImage(F,-F.width/2,-F.height/2,F.width,F.height),void g.restore();if(!(isNaN(dt)||dt<=0)){switch(g.beginPath(),F){default:g.arc(o,a,dt,0,pe),g.closePath();break;case"triangle":g.moveTo(o+Math.sin(Ft)*dt,a-Math.cos(Ft)*dt),Ft+=ke,g.lineTo(o+Math.sin(Ft)*dt,a-Math.cos(Ft)*dt),Ft+=ke,g.lineTo(o+Math.sin(Ft)*dt,a-Math.cos(Ft)*dt),g.closePath();break;case"rectRounded":O=.516*dt,R=dt-O,f=Math.cos(Ft+ee)*R,E=Math.sin(Ft+ee)*R,g.arc(o-f,a-E,O,Ft-At,Ft-te),g.arc(o+E,a-f,O,Ft-te,Ft),g.arc(o+f,a+E,O,Ft,Ft+te),g.arc(o-E,a+f,O,Ft+te,Ft+At),g.closePath();break;case"rect":if(!J){R=Math.SQRT1_2*dt,g.rect(o-R,a-R,2*R,2*R);break}Ft+=ee;case"rectRot":f=Math.cos(Ft)*dt,E=Math.sin(Ft)*dt,g.moveTo(o-f,a-E),g.lineTo(o+E,a-f),g.lineTo(o+f,a+E),g.lineTo(o-E,a+f),g.closePath();break;case"crossRot":Ft+=ee;case"cross":f=Math.cos(Ft)*dt,E=Math.sin(Ft)*dt,g.moveTo(o-f,a-E),g.lineTo(o+f,a+E),g.moveTo(o+E,a-f),g.lineTo(o-E,a+f);break;case"star":f=Math.cos(Ft)*dt,E=Math.sin(Ft)*dt,g.moveTo(o-f,a-E),g.lineTo(o+f,a+E),g.moveTo(o+E,a-f),g.lineTo(o-E,a+f),Ft+=ee,f=Math.cos(Ft)*dt,E=Math.sin(Ft)*dt,g.moveTo(o-f,a-E),g.lineTo(o+f,a+E),g.moveTo(o+E,a-f),g.lineTo(o-E,a+f);break;case"line":f=Math.cos(Ft)*dt,E=Math.sin(Ft)*dt,g.moveTo(o-f,a-E),g.lineTo(o+f,a+E);break;case"dash":g.moveTo(o,a),g.lineTo(o+Math.cos(Ft)*dt,a+Math.sin(Ft)*dt)}g.fill(),l.borderWidth>0&&g.stroke()}}function ns(g,l,o){return o=o||.5,!l||g&&g.x>l.left-o&&g.x<l.right+o&&g.y>l.top-o&&g.y<l.bottom+o}function Ho(g,l){g.save(),g.beginPath(),g.rect(l.left,l.top,l.right-l.left,l.bottom-l.top),g.clip()}function Ya(g){g.restore()}function Xa(g,l,o,a,c){if(!l)return g.lineTo(o.x,o.y);if("middle"===c){const f=(l.x+o.x)/2;g.lineTo(f,l.y),g.lineTo(f,o.y)}else"after"===c!=!!a?g.lineTo(l.x,o.y):g.lineTo(o.x,l.y);g.lineTo(o.x,o.y)}function Ka(g,l,o,a){if(!l)return g.lineTo(o.x,o.y);g.bezierCurveTo(a?l.cp1x:l.cp2x,a?l.cp1y:l.cp2y,a?o.cp2x:o.cp1x,a?o.cp2y:o.cp1y,o.x,o.y)}function Qo(g,l,o,a,c,f={}){const E=yt(l)?l:[l],R=f.strokeWidth>0&&""!==f.strokeColor;let O,F;for(g.save(),g.font=c.string,function(g,l){l.translation&&g.translate(l.translation[0],l.translation[1]),Ct(l.rotation)||g.rotate(l.rotation),l.color&&(g.fillStyle=l.color),l.textAlign&&(g.textAlign=l.textAlign),l.textBaseline&&(g.textBaseline=l.textBaseline)}(g,f),O=0;O<E.length;++O)F=E[O],R&&(f.strokeColor&&(g.strokeStyle=f.strokeColor),Ct(f.strokeWidth)||(g.lineWidth=f.strokeWidth),g.strokeText(F,o,a,f.maxWidth)),g.fillText(F,o,a,f.maxWidth),_l(g,o,a,F,f),a+=c.lineHeight;g.restore()}function _l(g,l,o,a,c){if(c.strikethrough||c.underline){const f=g.measureText(a),E=l-f.actualBoundingBoxLeft,R=l+f.actualBoundingBoxRight,O=o-f.actualBoundingBoxAscent,F=o+f.actualBoundingBoxDescent,J=c.strikethrough?(O+F)/2:F;g.strokeStyle=g.fillStyle,g.beginPath(),g.lineWidth=c.decorationWidth||2,g.moveTo(E,J),g.lineTo(R,J),g.stroke()}}function Fs(g,l){const{x:o,y:a,w:c,h:f,radius:E}=l;g.arc(o+E.topLeft,a+E.topLeft,E.topLeft,-te,At,!0),g.lineTo(o,a+f-E.bottomLeft),g.arc(o+E.bottomLeft,a+f-E.bottomLeft,E.bottomLeft,At,te,!0),g.lineTo(o+c-E.bottomRight,a+f),g.arc(o+c-E.bottomRight,a+f-E.bottomRight,E.bottomRight,te,0,!0),g.lineTo(o+c,a+E.topRight),g.arc(o+c-E.topRight,a+E.topRight,E.topRight,0,-te,!0),g.lineTo(o+E.topLeft,a)}const Pa=new RegExp(/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/),Bs=new RegExp(/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/);function fs(g,l){const o=(""+g).match(Pa);if(!o||"normal"===o[1])return 1.2*l;switch(g=+o[2],o[3]){case"px":return g;case"%":g/=100}return l*g}const al=g=>+g||0;function ma(g,l){const o={},a=ot(l),c=a?Object.keys(l):l,f=ot(g)?a?E=>Ut(g[E],g[l[E]]):E=>g[E]:()=>g;for(const E of c)o[E]=al(f(E));return o}function Qs(g){return ma(g,{top:"y",right:"x",bottom:"y",left:"x"})}function Oo(g){return ma(g,["topLeft","topRight","bottomLeft","bottomRight"])}function zr(g){const l=Qs(g);return l.width=l.left+l.right,l.height=l.top+l.bottom,l}function ao(g,l){let o=Ut((g=g||{}).size,(l=l||lr.font).size);"string"==typeof o&&(o=parseInt(o,10));let a=Ut(g.style,l.style);a&&!(""+a).match(Bs)&&(console.warn('Invalid font style specified: "'+a+'"'),a="");const c={family:Ut(g.family,l.family),lineHeight:fs(Ut(g.lineHeight,l.lineHeight),o),size:o,style:a,weight:Ut(g.weight,l.weight),string:""};return c.string=function(g){return!g||Ct(g.size)||Ct(g.family)?null:(g.style?g.style+" ":"")+(g.weight?g.weight+" ":"")+g.size+"px "+g.family}(c),c}function yo(g,l,o,a){let f,E,R,c=!0;for(f=0,E=g.length;f<E;++f)if(R=g[f],void 0!==R&&(void 0!==l&&"function"==typeof R&&(R=R(l),c=!1),void 0!==o&&yt(R)&&(R=R[o%R.length],c=!1),void 0!==R))return a&&!c&&(a.cacheable=!1),R}function Xo(g,l){return Object.assign(Object.create(g),l)}function Rs(g,l,o){o=o||(E=>g[E]<l);let f,a=g.length-1,c=0;for(;a-c>1;)f=c+a>>1,o(f)?c=f:a=f;return{lo:c,hi:a}}const zo=(g,l,o)=>Rs(g,o,a=>g[a][l]<o),xo=(g,l,o)=>Rs(g,o,a=>g[a][l]>=o),Ds=["push","pop","shift","splice","unshift"];function gs(g,l){const o=g._chartjs;if(!o)return;const a=o.listeners,c=a.indexOf(l);-1!==c&&a.splice(c,1),!(a.length>0)&&(Ds.forEach(f=>{delete g[f]}),delete g._chartjs)}function Lr(g){const l=new Set;let o,a;for(o=0,a=g.length;o<a;++o)l.add(g[o]);return l.size===a?g:Array.from(l)}function aa(g,l=[""],o=g,a,c=(()=>g[0])){Bt(a)||(a=Fe("_fallback",g));const f={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:g,_rootScopes:o,_fallback:a,_getTarget:c,override:E=>aa([E,...g],l,o,a)};return new Proxy(f,{deleteProperty:(E,R)=>(delete E[R],delete E._keys,delete g[0][R],!0),get:(E,R)=>Ko(E,R,()=>function(g,l,o,a){let c;for(const f of l)if(c=Fe(vl(f,g),o),Bt(c))return us(g,c)?Z(o,a,g,c):c}(R,l,g,E)),getOwnPropertyDescriptor:(E,R)=>Reflect.getOwnPropertyDescriptor(E._scopes[0],R),getPrototypeOf:()=>Reflect.getPrototypeOf(g[0]),has:(E,R)=>bi(E).includes(R),ownKeys:E=>bi(E),set(E,R,O){const F=E._storage||(E._storage=c());return E[R]=F[R]=O,delete E._keys,!0}})}function jr(g,l,o,a){const c={_cacheable:!1,_proxy:g,_context:l,_subProxy:o,_stack:new Set,_descriptors:la(g,a),setContext:f=>jr(g,f,o,a),override:f=>jr(g.override(f),l,o,a)};return new Proxy(c,{deleteProperty:(f,E)=>(delete f[E],delete g[E],!0),get:(f,E,R)=>Ko(f,E,()=>function(g,l,o){const{_proxy:a,_context:c,_subProxy:f,_descriptors:E}=g;let R=a[l];return Te(R)&&E.isScriptable(l)&&(R=function(g,l,o,a){const{_proxy:c,_context:f,_subProxy:E,_stack:R}=o;if(R.has(g))throw new Error("Recursion detected: "+Array.from(R).join("->")+"->"+g);return R.add(g),l=l(f,E||a),R.delete(g),us(g,l)&&(l=Z(c._scopes,c,g,l)),l}(l,R,g,o)),yt(R)&&R.length&&(R=function(g,l,o,a){const{_proxy:c,_context:f,_subProxy:E,_descriptors:R}=o;if(Bt(f.index)&&a(g))l=l[f.index%l.length];else if(ot(l[0])){const O=l,F=c._scopes.filter(J=>J!==O);l=[];for(const J of O){const dt=Z(F,c,g,J);l.push(jr(dt,f,E&&E[g],R))}}return l}(l,R,g,E.isIndexable)),us(l,R)&&(R=jr(R,c,f&&f[l],E)),R}(f,E,R)),getOwnPropertyDescriptor:(f,E)=>f._descriptors.allKeys?Reflect.has(g,E)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(g,E),getPrototypeOf:()=>Reflect.getPrototypeOf(g),has:(f,E)=>Reflect.has(g,E),ownKeys:()=>Reflect.ownKeys(g),set:(f,E,R)=>(g[E]=R,delete f[E],!0)})}function la(g,l={scriptable:!0,indexable:!0}){const{_scriptable:o=l.scriptable,_indexable:a=l.indexable,_allKeys:c=l.allKeys}=g;return{allKeys:c,scriptable:o,indexable:a,isScriptable:Te(o)?o:()=>o,isIndexable:Te(a)?a:()=>a}}const vl=(g,l)=>g?g+gi(l):l,us=(g,l)=>ot(l)&&"adapters"!==g&&(null===Object.getPrototypeOf(l)||l.constructor===Object);function Ko(g,l,o){if(Object.prototype.hasOwnProperty.call(g,l))return g[l];const a=o();return g[l]=a,a}function xn(g,l,o){return Te(g)?g(l,o):g}const _a=(g,l)=>!0===g?l:"string"==typeof g?Le(l,g):void 0;function Ot(g,l,o,a,c){for(const f of l){const E=_a(o,f);if(E){g.add(E);const R=xn(E._fallback,o,c);if(Bt(R)&&R!==o&&R!==a)return R}else if(!1===E&&Bt(a)&&o!==a)return null}return!1}function Z(g,l,o,a){const c=l._rootScopes,f=xn(l._fallback,o,a),E=[...g,...c],R=new Set;R.add(a);let O=V(R,E,o,f||o,a);return!(null===O||Bt(f)&&f!==o&&(O=V(R,E,f,O,a),null===O))&&aa(Array.from(R),[""],c,f,()=>function(g,l,o){const a=g._getTarget();l in a||(a[l]={});const c=a[l];return yt(c)&&ot(o)?o:c}(l,o,a))}function V(g,l,o,a,c){for(;o;)o=Ot(g,l,o,a,c);return o}function Fe(g,l){for(const o of l){if(!o)continue;const a=o[g];if(Bt(a))return a}}function bi(g){let l=g._keys;return l||(l=g._keys=function(g){const l=new Set;for(const o of g)for(const a of Object.keys(o).filter(c=>!c.startsWith("_")))l.add(a);return Array.from(l)}(g._scopes)),l}const jn=Number.EPSILON||1e-14,Cr=(g,l)=>l<g.length&&!g[l].skip&&g[l],Hr=g=>"x"===g?"y":"x";function Pr(g,l,o,a){const c=g.skip?l:g,f=l,E=o.skip?l:o,R=Zi(f,c),O=Zi(E,f);let F=R/(R+O),J=O/(R+O);F=isNaN(F)?0:F,J=isNaN(J)?0:J;const dt=a*F,Ft=a*J;return{previous:{x:f.x-dt*(E.x-c.x),y:f.y-dt*(E.y-c.y)},next:{x:f.x+Ft*(E.x-c.x),y:f.y+Ft*(E.y-c.y)}}}function Hn(g,l,o){return Math.max(Math.min(g,o),l)}function Fa(g,l,o,a,c){let f,E,R,O;if(l.spanGaps&&(g=g.filter(F=>!F.skip)),"monotone"===l.cubicInterpolationMode)!function(g,l="x"){const o=Hr(l),a=g.length,c=Array(a).fill(0),f=Array(a);let E,R,O,F=Cr(g,0);for(E=0;E<a;++E)if(R=O,O=F,F=Cr(g,E+1),O){if(F){const J=F[l]-O[l];c[E]=0!==J?(F[o]-O[o])/J:0}f[E]=R?F?me(c[E-1])!==me(c[E])?0:(c[E-1]+c[E])/2:c[E-1]:c[E]}(function(g,l,o){const a=g.length;let c,f,E,R,O,F=Cr(g,0);for(let J=0;J<a-1;++J)if(O=F,F=Cr(g,J+1),O&&F){if(ei(l[J],0,jn)){o[J]=o[J+1]=0;continue}c=o[J]/l[J],f=o[J+1]/l[J],R=Math.pow(c,2)+Math.pow(f,2),!(R<=9)&&(E=3/Math.sqrt(R),o[J]=c*E*l[J],o[J+1]=f*E*l[J])}})(g,c,f),function(g,l,o="x"){const a=Hr(o),c=g.length;let f,E,R,O=Cr(g,0);for(let F=0;F<c;++F){if(E=R,R=O,O=Cr(g,F+1),!R)continue;const J=R[o],dt=R[a];E&&(f=(J-E[o])/3,R[`cp1${o}`]=J-f,R[`cp1${a}`]=dt-f*l[F]),O&&(f=(O[o]-J)/3,R[`cp2${o}`]=J+f,R[`cp2${a}`]=dt+f*l[F])}}(g,f,l)}(g,c);else{let F=a?g[g.length-1]:g[0];for(f=0,E=g.length;f<E;++f)R=g[f],O=Pr(F,R,g[Math.min(f+1,E-(a?0:1))%E],l.tension),R.cp1x=O.previous.x,R.cp1y=O.previous.y,R.cp2x=O.next.x,R.cp2y=O.next.y,F=R}l.capBezierPoints&&function(g,l){let o,a,c,f,E,R=ns(g[0],l);for(o=0,a=g.length;o<a;++o)E=f,f=R,R=o<a-1&&ns(g[o+1],l),f&&(c=g[o],E&&(c.cp1x=Hn(c.cp1x,l.left,l.right),c.cp1y=Hn(c.cp1y,l.top,l.bottom)),R&&(c.cp2x=Hn(c.cp2x,l.left,l.right),c.cp2y=Hn(c.cp2y,l.top,l.bottom)))}(g,o)}function ts(){return"undefined"!=typeof window&&"undefined"!=typeof document}function ll(g){let l=g.parentNode;return l&&"[object ShadowRoot]"===l.toString()&&(l=l.host),l}function Vs(g,l,o){let a;return"string"==typeof g?(a=parseInt(g,10),-1!==g.indexOf("%")&&(a=a/100*l.parentNode[o])):a=g,a}const qs=g=>window.getComputedStyle(g,null),Gt=["top","right","bottom","left"];function W(g,l,o){const a={};o=o?"-"+o:"";for(let c=0;c<4;c++){const f=Gt[c];a[f]=parseFloat(g[l+"-"+f+o])||0}return a.width=a.left+a.right,a.height=a.top+a.bottom,a}function Qt(g,l){const{canvas:o,currentDevicePixelRatio:a}=l,c=qs(o),f="border-box"===c.boxSizing,E=W(c,"padding"),R=W(c,"border","width"),{x:O,y:F,box:J}=function(g,l){const o=g.native||g,a=o.touches,c=a&&a.length?a[0]:o,{offsetX:f,offsetY:E}=c;let O,F,R=!1;if(((g,l,o)=>(g>0||l>0)&&(!o||!o.shadowRoot))(f,E,o.target))O=f,F=E;else{const J=l.getBoundingClientRect();O=c.clientX-J.left,F=c.clientY-J.top,R=!0}return{x:O,y:F,box:R}}(g,o),dt=E.left+(J&&R.left),Ft=E.top+(J&&R.top);let{width:qt,height:Ee}=l;return f&&(qt-=E.width+R.width,Ee-=E.height+R.height),{x:Math.round((O-dt)/qt*o.width/a),y:Math.round((F-Ft)/Ee*o.height/a)}}const Ye=g=>Math.round(10*g)/10;function vi(g,l,o){const a=l||1,c=Math.floor(g.height*a),f=Math.floor(g.width*a);g.height=c/a,g.width=f/a;const E=g.canvas;return E.style&&(o||!E.style.height&&!E.style.width)&&(E.style.height=`${g.height}px`,E.style.width=`${g.width}px`),(g.currentDevicePixelRatio!==a||E.height!==c||E.width!==f)&&(g.currentDevicePixelRatio=a,E.height=c,E.width=f,g.ctx.setTransform(a,0,0,a,0,0),!0)}const Bi=function(){let g=!1;try{const l={get passive(){return g=!0,!1}};window.addEventListener("test",null,l),window.removeEventListener("test",null,l)}catch(l){}return g}();function un(g,l){const o=function(g,l){return qs(g).getPropertyValue(l)}(g,l),a=o&&o.match(/^(\d+)(\.\d+)?px$/);return a?+a[1]:void 0}function En(g,l,o,a){return{x:g.x+o*(l.x-g.x),y:g.y+o*(l.y-g.y)}}function Zn(g,l,o,a){return{x:g.x+o*(l.x-g.x),y:"middle"===a?o<.5?g.y:l.y:"after"===a?o<1?g.y:l.y:o>0?l.y:g.y}}function Qn(g,l,o,a){const c={x:g.cp2x,y:g.cp2y},f={x:l.cp1x,y:l.cp1y},E=En(g,c,o),R=En(c,f,o),O=En(f,l,o),F=En(E,R,o),J=En(R,O,o);return En(F,J,o)}const Ln=new Map;function rr(g,l,o){return function(g,l){l=l||{};const o=g+JSON.stringify(l);let a=Ln.get(o);return a||(a=new Intl.NumberFormat(g,l),Ln.set(o,a)),a}(l,o).format(g)}function oo(g,l,o){return g?function(g,l){return{x:o=>g+g+l-o,setWidth(o){l=o},textAlign:o=>"center"===o?o:"right"===o?"left":"right",xPlus:(o,a)=>o-a,leftForLtr:(o,a)=>o-a}}(l,o):{x:g=>g,setWidth(g){},textAlign:g=>g,xPlus:(g,l)=>g+l,leftForLtr:(g,l)=>g}}function ko(g,l){let o,a;("ltr"===l||"rtl"===l)&&(o=g.canvas.style,a=[o.getPropertyValue("direction"),o.getPropertyPriority("direction")],o.setProperty("direction",l,"important"),g.prevTextDirection=a)}function Ba(g,l){void 0!==l&&(delete g.prevTextDirection,g.canvas.style.setProperty("direction",l[0],l[1]))}function Gs(g){return"angle"===g?{between:Ci,compare:Ce,normalize:Oe}:{between:_i,compare:(l,o)=>l-o,normalize:l=>l}}function To({start:g,end:l,count:o,loop:a,style:c}){return{start:g%o,end:l%o,loop:a&&(l-g+1)%o==0,style:c}}function rs(g,l,o){if(!o)return[g];const{property:a,start:c,end:f}=o,E=l.length,{compare:R,between:O,normalize:F}=Gs(a),{start:J,end:dt,loop:Ft,style:qt}=function(g,l,o){const{property:a,start:c,end:f}=o,{between:E,normalize:R}=Gs(a),O=l.length;let Ft,qt,{start:F,end:J,loop:dt}=g;if(dt){for(F+=O,J+=O,Ft=0,qt=O;Ft<qt&&E(R(l[F%O][a]),c,f);++Ft)F--,J--;F%=O,J%=O}return J<F&&(J+=O),{start:F,end:J,loop:dt,style:g.style}}(g,l,o),Ee=[];let We,Si,ln,De=!1,Ge=null;for(let wn=J,Pn=J;wn<=dt;++wn)Si=l[wn%E],!Si.skip&&(We=F(Si[a]),We!==ln&&(De=O(We,c,f),null===Ge&&(De||O(c,ln,We)&&0!==R(c,ln))&&(Ge=0===R(We,c)?wn:Pn),null!==Ge&&(!De||0===R(f,We)||O(f,ln,We))&&(Ee.push(To({start:Ge,end:wn,loop:Ft,count:E,style:qt})),Ge=null),Pn=wn,ln=We));return null!==Ge&&Ee.push(To({start:Ge,end:dt,loop:Ft,count:E,style:qt})),Ee}function Ms(g,l){const o=[],a=g.segments;for(let c=0;c<a.length;c++){const f=rs(a[c],g.points,l);f.length&&o.push(...f)}return o}function Dn(g){return{backgroundColor:g.backgroundColor,borderCapStyle:g.borderCapStyle,borderDash:g.borderDash,borderDashOffset:g.borderDashOffset,borderJoinStyle:g.borderJoinStyle,borderWidth:g.borderWidth,borderColor:g.borderColor}}function On(g,l){return l&&JSON.stringify(g)!==JSON.stringify(l)}var cr=new class{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(l,o,a,c){const E=o.duration;o.listeners[c].forEach(R=>R({chart:l,initial:o.initial,numSteps:E,currentStep:Math.min(a-o.start,E)}))}_refresh(){this._request||(this._running=!0,this._request=at.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(l=Date.now()){let o=0;this._charts.forEach((a,c)=>{if(!a.running||!a.items.length)return;const f=a.items;let O,E=f.length-1,R=!1;for(;E>=0;--E)O=f[E],O._active?(O._total>a.duration&&(a.duration=O._total),O.tick(l),R=!0):(f[E]=f[f.length-1],f.pop());R&&(c.draw(),this._notify(c,a,l,"progress")),f.length||(a.running=!1,this._notify(c,a,l,"complete"),a.initial=!1),o+=f.length}),this._lastDate=l,0===o&&(this._running=!1)}_getAnims(l){const o=this._charts;let a=o.get(l);return a||(a={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},o.set(l,a)),a}listen(l,o,a){this._getAnims(l).listeners[o].push(a)}add(l,o){!o||!o.length||this._getAnims(l).items.push(...o)}has(l){return this._getAnims(l).items.length>0}start(l){const o=this._charts.get(l);!o||(o.running=!0,o.start=Date.now(),o.duration=o.items.reduce((a,c)=>Math.max(a,c._duration),0),this._refresh())}running(l){if(!this._running)return!1;const o=this._charts.get(l);return!(!o||!o.running||!o.items.length)}stop(l){const o=this._charts.get(l);if(!o||!o.items.length)return;const a=o.items;let c=a.length-1;for(;c>=0;--c)a[c].cancel();o.items=[],this._notify(l,o,Date.now(),"complete")}remove(l){return this._charts.delete(l)}};const Er="transparent",es={boolean:(g,l,o)=>o>.5?l:g,color(g,l,o){const a=nr(g||Er),c=a.valid&&nr(l||Er);return c&&c.valid?c.mix(a,o).hexString():l},number:(g,l,o)=>g+(l-g)*o};class Mr{constructor(l,o,a,c){const f=o[a];c=yo([l.to,c,f,l.from]);const E=yo([l.from,f,c]);this._active=!0,this._fn=l.fn||es[l.type||typeof E],this._easing=kt[l.easing]||kt.linear,this._start=Math.floor(Date.now()+(l.delay||0)),this._duration=this._total=Math.floor(l.duration),this._loop=!!l.loop,this._target=o,this._prop=a,this._from=E,this._to=c,this._promises=void 0}active(){return this._active}update(l,o,a){if(this._active){this._notify(!1);const c=this._target[this._prop],f=a-this._start,E=this._duration-f;this._start=a,this._duration=Math.floor(Math.max(E,l.duration)),this._total+=f,this._loop=!!l.loop,this._to=yo([l.to,o,c,l.from]),this._from=yo([l.from,c,o])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(l){const o=l-this._start,a=this._duration,c=this._prop,f=this._from,E=this._loop,R=this._to;let O;if(this._active=f!==R&&(E||o<a),!this._active)return this._target[c]=R,void this._notify(!0);o<0?this._target[c]=f:(O=o/a%2,O=E&&O>1?2-O:O,O=this._easing(Math.min(1,Math.max(0,O))),this._target[c]=this._fn(f,R,O))}wait(){const l=this._promises||(this._promises=[]);return new Promise((o,a)=>{l.push({res:o,rej:a})})}_notify(l){const o=l?"res":"rej",a=this._promises||[];for(let c=0;c<a.length;c++)a[c][o]()}}lr.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0});const yl=Object.keys(lr.animation);lr.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:g=>"onProgress"!==g&&"onComplete"!==g&&"fn"!==g}),lr.set("animations",{colors:{type:"color",properties:["color","borderColor","backgroundColor"]},numbers:{type:"number",properties:["x","y","borderWidth","radius","tension"]}}),lr.describe("animations",{_fallback:"animation"}),lr.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:g=>0|g}}}});class $a{constructor(l,o){this._chart=l,this._properties=new Map,this.configure(o)}configure(l){if(!ot(l))return;const o=this._properties;Object.getOwnPropertyNames(l).forEach(a=>{const c=l[a];if(!ot(c))return;const f={};for(const E of yl)f[E]=c[E];(yt(c.properties)&&c.properties||[a]).forEach(E=>{(E===a||!o.has(E))&&o.set(E,f)})})}_animateOptions(l,o){const a=o.options,c=function(g,l){if(!l)return;let o=g.options;if(o)return o.$shared&&(g.options=o=Object.assign({},o,{$shared:!1,$animations:{}})),o;g.options=l}(l,a);if(!c)return[];const f=this._createAnimations(c,a);return a.$shared&&function(g,l){const o=[],a=Object.keys(l);for(let c=0;c<a.length;c++){const f=g[a[c]];f&&f.active()&&o.push(f.wait())}return Promise.all(o)}(l.options.$animations,a).then(()=>{l.options=a},()=>{}),f}_createAnimations(l,o){const a=this._properties,c=[],f=l.$animations||(l.$animations={}),E=Object.keys(o),R=Date.now();let O;for(O=E.length-1;O>=0;--O){const F=E[O];if("$"===F.charAt(0))continue;if("options"===F){c.push(...this._animateOptions(l,o));continue}const J=o[F];let dt=f[F];const Ft=a.get(F);if(dt){if(Ft&&dt.active()){dt.update(Ft,J,R);continue}dt.cancel()}Ft&&Ft.duration?(f[F]=dt=new Mr(Ft,l,F,J),c.push(dt)):l[F]=J}return c}update(l,o){if(0===this._properties.size)return void Object.assign(l,o);const a=this._createAnimations(l,o);return a.length?(cr.add(this._chart,a),!0):void 0}}function _s(g,l){const o=g&&g.options||{},a=o.reverse,c=void 0===o.min?l:0,f=void 0===o.max?l:0;return{start:a?f:c,end:a?c:f}}function va(g,l){const o=[],a=g._getSortedDatasetMetas(l);let c,f;for(c=0,f=a.length;c<f;++c)o.push(a[c].index);return o}function Al(g,l,o,a={}){const c=g.keys,f="single"===a.mode;let E,R,O,F;if(null!==l){for(E=0,R=c.length;E<R;++E){if(O=+c[E],O===o){if(a.all)continue;break}F=g.values[O],mt(F)&&(f||0===l||me(l)===me(F))&&(l+=F)}return l}}function vs(g,l){const o=g&&g.options.stacked;return o||void 0===o&&void 0!==l.stack}function Za(g,l,o){const a=g[l]||(g[l]={});return a[o]||(a[o]={})}function Ia(g,l,o,a){for(const c of l.getMatchingVisibleMetas(a).reverse()){const f=g[c.index];if(o&&f>0||!o&&f<0)return c.index}return null}function Zl(g,l){const{chart:o,_cachedMeta:a}=g,c=o._stacks||(o._stacks={}),{iScale:f,vScale:E,index:R}=a,O=f.axis,F=E.axis,J=function(g,l,o){return`${g.id}.${l.id}.${o.stack||o.type}`}(f,E,a),dt=l.length;let Ft;for(let qt=0;qt<dt;++qt){const Ee=l[qt],{[O]:De,[F]:Ge}=Ee;Ft=(Ee._stacks||(Ee._stacks={}))[F]=Za(c,J,De),Ft[R]=Ge,Ft._top=Ia(Ft,E,!0,a.type),Ft._bottom=Ia(Ft,E,!1,a.type)}}function Ma(g,l){const o=g.scales;return Object.keys(o).filter(a=>o[a].axis===l).shift()}function Ha(g,l){const o=g.controller.index,a=g.vScale&&g.vScale.axis;if(a){l=l||g._parsed;for(const c of l){const f=c._stacks;if(!f||void 0===f[a]||void 0===f[a][o])return;delete f[a][o]}}}const Qa=g=>"reset"===g||"none"===g,mc=(g,l)=>l?g:Object.assign({},g);let ua=(()=>{class g{constructor(o,a){this.chart=o,this._ctx=o.ctx,this.index=a,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.$context=void 0,this._syncList=[],this.initialize()}initialize(){const o=this._cachedMeta;this.configure(),this.linkScales(),o._stacked=vs(o.vScale,o),this.addElements()}updateIndex(o){this.index!==o&&Ha(this._cachedMeta),this.index=o}linkScales(){const o=this.chart,a=this._cachedMeta,c=this.getDataset(),f=(Ft,qt,Ee,De)=>"x"===Ft?qt:"r"===Ft?De:Ee,E=a.xAxisID=Ut(c.xAxisID,Ma(o,"x")),R=a.yAxisID=Ut(c.yAxisID,Ma(o,"y")),O=a.rAxisID=Ut(c.rAxisID,Ma(o,"r")),F=a.indexAxis,J=a.iAxisID=f(F,E,R,O),dt=a.vAxisID=f(F,R,E,O);a.xScale=this.getScaleForId(E),a.yScale=this.getScaleForId(R),a.rScale=this.getScaleForId(O),a.iScale=this.getScaleForId(J),a.vScale=this.getScaleForId(dt)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(o){return this.chart.scales[o]}_getOtherScale(o){const a=this._cachedMeta;return o===a.iScale?a.vScale:a.iScale}reset(){this._update("reset")}_destroy(){const o=this._cachedMeta;this._data&&gs(this._data,this),o._stacked&&Ha(o)}_dataCheck(){const o=this.getDataset(),a=o.data||(o.data=[]),c=this._data;if(ot(a))this._data=function(g){const l=Object.keys(g),o=new Array(l.length);let a,c,f;for(a=0,c=l.length;a<c;++a)f=l[a],o[a]={x:f,y:g[f]};return o}(a);else if(c!==a){if(c){gs(c,this);const f=this._cachedMeta;Ha(f),f._parsed=[]}a&&Object.isExtensible(a)&&function(g,l){g._chartjs?g._chartjs.listeners.push(l):(Object.defineProperty(g,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[l]}}),Ds.forEach(o=>{const a="_onData"+gi(o),c=g[o];Object.defineProperty(g,o,{configurable:!0,enumerable:!1,value(...f){const E=c.apply(this,f);return g._chartjs.listeners.forEach(R=>{"function"==typeof R[a]&&R[a](...f)}),E}})}))}(a,this),this._syncList=[],this._data=a}}addElements(){const o=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(o.dataset=new this.datasetElementType)}buildOrUpdateElements(o){const a=this._cachedMeta,c=this.getDataset();let f=!1;this._dataCheck();const E=a._stacked;a._stacked=vs(a.vScale,a),a.stack!==c.stack&&(f=!0,Ha(a),a.stack=c.stack),this._resyncElements(o),(f||E!==a._stacked)&&Zl(this,a._parsed)}configure(){const o=this.chart.config,a=o.datasetScopeKeys(this._type),c=o.getOptionScopes(this.getDataset(),a,!0);this.options=o.createResolver(c,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(o,a){const{_cachedMeta:c,_data:f}=this,{iScale:E,_stacked:R}=c,O=E.axis;let dt,Ft,qt,F=0===o&&a===f.length||c._sorted,J=o>0&&c._parsed[o-1];if(!1===this._parsing)c._parsed=f,c._sorted=!0,qt=f;else{qt=yt(f[o])?this.parseArrayData(c,f,o,a):ot(f[o])?this.parseObjectData(c,f,o,a):this.parsePrimitiveData(c,f,o,a);const Ee=()=>null===Ft[O]||J&&Ft[O]<J[O];for(dt=0;dt<a;++dt)c._parsed[dt+o]=Ft=qt[dt],F&&(Ee()&&(F=!1),J=Ft);c._sorted=F}R&&Zl(this,qt)}parsePrimitiveData(o,a,c,f){const{iScale:E,vScale:R}=o,O=E.axis,F=R.axis,J=E.getLabels(),dt=E===R,Ft=new Array(f);let qt,Ee,De;for(qt=0,Ee=f;qt<Ee;++qt)De=qt+c,Ft[qt]={[O]:dt||E.parse(J[De],De),[F]:R.parse(a[De],De)};return Ft}parseArrayData(o,a,c,f){const{xScale:E,yScale:R}=o,O=new Array(f);let F,J,dt,Ft;for(F=0,J=f;F<J;++F)dt=F+c,Ft=a[dt],O[F]={x:E.parse(Ft[0],dt),y:R.parse(Ft[1],dt)};return O}parseObjectData(o,a,c,f){const{xScale:E,yScale:R}=o,{xAxisKey:O="x",yAxisKey:F="y"}=this._parsing,J=new Array(f);let dt,Ft,qt,Ee;for(dt=0,Ft=f;dt<Ft;++dt)qt=dt+c,Ee=a[qt],J[dt]={x:E.parse(Le(Ee,O),qt),y:R.parse(Le(Ee,F),qt)};return J}getParsed(o){return this._cachedMeta._parsed[o]}getDataElement(o){return this._cachedMeta.data[o]}applyStack(o,a,c){const E=this._cachedMeta,R=a[o.axis];return Al({keys:va(this.chart,!0),values:a._stacks[o.axis]},R,E.index,{mode:c})}updateRangeFromParsed(o,a,c,f){const E=c[a.axis];let R=null===E?NaN:E;const O=f&&c._stacks[a.axis];f&&O&&(f.values=O,R=Al(f,E,this._cachedMeta.index)),o.min=Math.min(o.min,R),o.max=Math.max(o.max,R)}getMinMax(o,a){const c=this._cachedMeta,f=c._parsed,E=c._sorted&&o===c.iScale,R=f.length,O=this._getOtherScale(o),F=((g,l,o)=>g&&!l.hidden&&l._stacked&&{keys:va(this.chart,!0),values:null})(a,c),J={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:dt,max:Ft}=function(g){const{min:l,max:o,minDefined:a,maxDefined:c}=g.getUserBounds();return{min:a?l:Number.NEGATIVE_INFINITY,max:c?o:Number.POSITIVE_INFINITY}}(O);let qt,Ee;function De(){Ee=f[qt];const Ge=Ee[O.axis];return!mt(Ee[o.axis])||dt>Ge||Ft<Ge}for(qt=0;qt<R&&(De()||(this.updateRangeFromParsed(J,o,Ee,F),!E));++qt);if(E)for(qt=R-1;qt>=0;--qt)if(!De()){this.updateRangeFromParsed(J,o,Ee,F);break}return J}getAllParsedValues(o){const a=this._cachedMeta._parsed,c=[];let f,E,R;for(f=0,E=a.length;f<E;++f)R=a[f][o.axis],mt(R)&&c.push(R);return c}getMaxOverflow(){return!1}getLabelAndValue(o){const a=this._cachedMeta,c=a.iScale,f=a.vScale,E=this.getParsed(o);return{label:c?""+c.getLabelForValue(E[c.axis]):"",value:f?""+f.getLabelForValue(E[f.axis]):""}}_update(o){const a=this._cachedMeta;this.update(o||"default"),a._clip=function(g){let l,o,a,c;return ot(g)?(l=g.top,o=g.right,a=g.bottom,c=g.left):l=o=a=c=g,{top:l,right:o,bottom:a,left:c,disabled:!1===g}}(Ut(this.options.clip,function(g,l,o){if(!1===o)return!1;const a=_s(g,o),c=_s(l,o);return{top:c.end,right:a.end,bottom:c.start,left:a.start}}(a.xScale,a.yScale,this.getMaxOverflow())))}update(o){}draw(){const o=this._ctx,c=this._cachedMeta,f=c.data||[],E=this.chart.chartArea,R=[],O=this._drawStart||0,F=this._drawCount||f.length-O,J=this.options.drawActiveElementsOnTop;let dt;for(c.dataset&&c.dataset.draw(o,E,O,F),dt=O;dt<O+F;++dt){const Ft=f[dt];Ft.hidden||(Ft.active&&J?R.push(Ft):Ft.draw(o,E))}for(dt=0;dt<R.length;++dt)R[dt].draw(o,E)}getStyle(o,a){const c=a?"active":"default";return void 0===o&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(c):this.resolveDataElementOptions(o||0,c)}getContext(o,a,c){const f=this.getDataset();let E;if(o>=0&&o<this._cachedMeta.data.length){const R=this._cachedMeta.data[o];E=R.$context||(R.$context=function(g,l,o){return Xo(g,{active:!1,dataIndex:l,parsed:void 0,raw:void 0,element:o,index:l,mode:"default",type:"data"})}(this.getContext(),o,R)),E.parsed=this.getParsed(o),E.raw=f.data[o],E.index=E.dataIndex=o}else E=this.$context||(this.$context=function(g,l){return Xo(g,{active:!1,dataset:void 0,datasetIndex:l,index:l,mode:"default",type:"dataset"})}(this.chart.getContext(),this.index)),E.dataset=f,E.index=E.datasetIndex=this.index;return E.active=!!a,E.mode=c,E}resolveDatasetElementOptions(o){return this._resolveElementOptions(this.datasetElementType.id,o)}resolveDataElementOptions(o,a){return this._resolveElementOptions(this.dataElementType.id,a,o)}_resolveElementOptions(o,a="default",c){const f="active"===a,E=this._cachedDataOpts,R=o+"-"+a,O=E[R],F=this.enableOptionSharing&&Bt(c);if(O)return mc(O,F);const J=this.chart.config,dt=J.datasetElementScopeKeys(this._type,o),Ft=f?[`${o}Hover`,"hover",o,""]:[o,""],qt=J.getOptionScopes(this.getDataset(),dt),Ee=Object.keys(lr.elements[o]),Ge=J.resolveNamedOptions(qt,Ee,()=>this.getContext(c,f),Ft);return Ge.$shared&&(Ge.$shared=F,E[R]=Object.freeze(mc(Ge,F))),Ge}_resolveAnimations(o,a,c){const f=this.chart,E=this._cachedDataOpts,R=`animation-${a}`,O=E[R];if(O)return O;let F;if(!1!==f.options.animation){const dt=this.chart.config,Ft=dt.datasetAnimationScopeKeys(this._type,a),qt=dt.getOptionScopes(this.getDataset(),Ft);F=dt.createResolver(qt,this.getContext(o,c,a))}const J=new $a(f,F&&F.animations);return F&&F._cacheable&&(E[R]=Object.freeze(J)),J}getSharedOptions(o){if(o.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},o))}includeOptions(o,a){return!a||Qa(o)||this.chart._animationsDisabled}updateElement(o,a,c,f){Qa(f)?Object.assign(o,c):this._resolveAnimations(a,f).update(o,c)}updateSharedOptions(o,a,c){o&&!Qa(a)&&this._resolveAnimations(void 0,a).update(o,c)}_setStyle(o,a,c,f){o.active=f;const E=this.getStyle(a,f);this._resolveAnimations(a,c,f).update(o,{options:!f&&this.getSharedOptions(E)||E})}removeHoverStyle(o,a,c){this._setStyle(o,c,"active",!1)}setHoverStyle(o,a,c){this._setStyle(o,c,"active",!0)}_removeDatasetHoverStyle(){const o=this._cachedMeta.dataset;o&&this._setStyle(o,void 0,"active",!1)}_setDatasetHoverStyle(){const o=this._cachedMeta.dataset;o&&this._setStyle(o,void 0,"active",!0)}_resyncElements(o){const a=this._data,c=this._cachedMeta.data;for(const[O,F,J]of this._syncList)this[O](F,J);this._syncList=[];const f=c.length,E=a.length,R=Math.min(E,f);R&&this.parse(0,R),E>f?this._insertElements(f,E-f,o):E<f&&this._removeElements(E,f-E)}_insertElements(o,a,c=!0){const f=this._cachedMeta,E=f.data,R=o+a;let O;const F=J=>{for(J.length+=a,O=J.length-1;O>=R;O--)J[O]=J[O-a]};for(F(E),O=o;O<R;++O)E[O]=new this.dataElementType;this._parsing&&F(f._parsed),this.parse(o,a),c&&this.updateElements(E,o,a,"reset")}updateElements(o,a,c,f){}_removeElements(o,a){const c=this._cachedMeta;if(this._parsing){const f=c._parsed.splice(o,a);c._stacked&&Ha(c,f)}c.data.splice(o,a)}_sync(o){if(this._parsing)this._syncList.push(o);else{const[a,c,f]=o;this[a](c,f)}this.chart._dataChanges.push([this.index,...o])}_onDataPush(){const o=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-o,o])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(o,a){a&&this._sync(["_removeElements",o,a]);const c=arguments.length-2;c&&this._sync(["_insertElements",o,c])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}return g.defaults={},g})();function js(g){const l=g.iScale,o=function(g,l){if(!g._cache.$bar){const o=g.getMatchingVisibleMetas(l);let a=[];for(let c=0,f=o.length;c<f;c++)a=a.concat(o[c].controller.getAllParsedValues(g));g._cache.$bar=Lr(a.sort((c,f)=>c-f))}return g._cache.$bar}(l,g.type);let c,f,E,R,a=l._length;const O=()=>{32767===E||-32768===E||(Bt(R)&&(a=Math.min(a,Math.abs(E-R)||a)),R=E)};for(c=0,f=o.length;c<f;++c)E=l.getPixelForValue(o[c]),O();for(R=void 0,c=0,f=l.ticks.length;c<f;++c)E=l.getPixelForTick(c),O();return a}function El(g,l,o,a){return yt(g)?function(g,l,o,a){const c=o.parse(g[0],a),f=o.parse(g[1],a),E=Math.min(c,f),R=Math.max(c,f);let O=E,F=R;Math.abs(E)>Math.abs(R)&&(O=R,F=E),l[o.axis]=F,l._custom={barStart:O,barEnd:F,start:c,end:f,min:E,max:R}}(g,l,o,a):l[o.axis]=o.parse(g,a),l}function Ql(g,l,o,a){const c=g.iScale,f=g.vScale,E=c.getLabels(),R=c===f,O=[];let F,J,dt,Ft;for(F=o,J=o+a;F<J;++F)Ft=l[F],dt={},dt[c.axis]=R||c.parse(E[F],F),O.push(El(Ft,dt,f,F));return O}function xl(g){return g&&void 0!==g.barStart&&void 0!==g.barEnd}function pt(g,l,o,a){let c=l.borderSkipped;const f={};if(!c)return void(g.borderSkipped=f);const{start:E,end:R,reverse:O,top:F,bottom:J}=function(g){let l,o,a,c,f;return g.horizontal?(l=g.base>g.x,o="left",a="right"):(l=g.base<g.y,o="bottom",a="top"),l?(c="end",f="start"):(c="start",f="end"),{start:o,end:a,reverse:l,top:c,bottom:f}}(g);"middle"===c&&o&&(g.enableBorderRadius=!0,(o._top||0)===a?c=F:(o._bottom||0)===a?c=J:(f[it(J,E,R,O)]=!0,c=F)),f[it(c,E,R,O)]=!0,g.borderSkipped=f}function it(g,l,o,a){return a?(g=function(g,l,o){return g===l?o:g===o?l:g}(g,l,o),g=Dt(g,o,l)):g=Dt(g,l,o),g}function Dt(g,l,o){return"start"===g?l:"end"===g?o:g}function zt(g,{inflateAmount:l},o){g.inflateAmount="auto"===l?1===o?.33:0:l}ua.prototype.datasetElementType=null,ua.prototype.dataElementType=null;let ge=(()=>{class g extends ua{parsePrimitiveData(o,a,c,f){return Ql(o,a,c,f)}parseArrayData(o,a,c,f){return Ql(o,a,c,f)}parseObjectData(o,a,c,f){const{iScale:E,vScale:R}=o,{xAxisKey:O="x",yAxisKey:F="y"}=this._parsing,J="x"===E.axis?O:F,dt="x"===R.axis?O:F,Ft=[];let qt,Ee,De,Ge;for(qt=c,Ee=c+f;qt<Ee;++qt)Ge=a[qt],De={},De[E.axis]=E.parse(Le(Ge,J),qt),Ft.push(El(Le(Ge,dt),De,R,qt));return Ft}updateRangeFromParsed(o,a,c,f){super.updateRangeFromParsed(o,a,c,f);const E=c._custom;E&&a===this._cachedMeta.vScale&&(o.min=Math.min(o.min,E.min),o.max=Math.max(o.max,E.max))}getMaxOverflow(){return 0}getLabelAndValue(o){const a=this._cachedMeta,{iScale:c,vScale:f}=a,E=this.getParsed(o),R=E._custom,O=xl(R)?"["+R.start+", "+R.end+"]":""+f.getLabelForValue(E[f.axis]);return{label:""+c.getLabelForValue(E[c.axis]),value:O}}initialize(){this.enableOptionSharing=!0,super.initialize(),this._cachedMeta.stack=this.getDataset().stack}update(o){const a=this._cachedMeta;this.updateElements(a.data,0,a.data.length,o)}updateElements(o,a,c,f){const E="reset"===f,{index:R,_cachedMeta:{vScale:O}}=this,F=O.getBasePixel(),J=O.isHorizontal(),dt=this._getRuler(),Ft=this.resolveDataElementOptions(a,f),qt=this.getSharedOptions(Ft),Ee=this.includeOptions(f,qt);this.updateSharedOptions(qt,f,Ft);for(let De=a;De<a+c;De++){const Ge=this.getParsed(De),We=E||Ct(Ge[O.axis])?{base:F,head:F}:this._calculateBarValuePixels(De),Si=this._calculateBarIndexPixels(De,dt),ln=(Ge._stacks||{})[O.axis],Gi={horizontal:J,base:We.base,enableBorderRadius:!ln||xl(Ge._custom)||R===ln._top||R===ln._bottom,x:J?We.head:Si.center,y:J?Si.center:We.head,height:J?Si.size:Math.abs(We.size),width:J?Math.abs(We.size):Si.size};Ee&&(Gi.options=qt||this.resolveDataElementOptions(De,o[De].active?"active":f));const Xi=Gi.options||o[De].options;pt(Gi,Xi,ln,R),zt(Gi,Xi,dt.ratio),this.updateElement(o[De],De,Gi,f)}}_getStacks(o,a){const f=this._cachedMeta.iScale,E=f.getMatchingVisibleMetas(this._type),R=f.options.stacked,O=E.length,F=[];let J,dt;for(J=0;J<O;++J)if(dt=E[J],dt.controller.options.grouped){if(void 0!==a){const Ft=dt.controller.getParsed(a)[dt.controller._cachedMeta.vScale.axis];if(Ct(Ft)||isNaN(Ft))continue}if((!1===R||-1===F.indexOf(dt.stack)||void 0===R&&void 0===dt.stack)&&F.push(dt.stack),dt.index===o)break}return F.length||F.push(void 0),F}_getStackCount(o){return this._getStacks(void 0,o).length}_getStackIndex(o,a,c){const f=this._getStacks(o,c),E=void 0!==a?f.indexOf(a):-1;return-1===E?f.length-1:E}_getRuler(){const o=this.options,a=this._cachedMeta,c=a.iScale,f=[];let E,R;for(E=0,R=a.data.length;E<R;++E)f.push(c.getPixelForValue(this.getParsed(E)[c.axis],E));const O=o.barThickness;return{min:O||js(a),pixels:f,start:c._startPixel,end:c._endPixel,stackCount:this._getStackCount(),scale:c,grouped:o.grouped,ratio:O?1:o.categoryPercentage*o.barPercentage}}_calculateBarValuePixels(o){const{_cachedMeta:{vScale:a,_stacked:c},options:{base:f,minBarLength:E}}=this,R=f||0,O=this.getParsed(o),F=O._custom,J=xl(F);let Ee,De,dt=O[a.axis],Ft=0,qt=c?this.applyStack(a,O,c):dt;qt!==dt&&(Ft=qt-dt,qt=dt),J&&(dt=F.barStart,qt=F.barEnd-F.barStart,0!==dt&&me(dt)!==me(F.barEnd)&&(Ft=0),Ft+=dt);const Ge=Ct(f)||J?Ft:f;let We=a.getPixelForValue(Ge);if(Ee=this.chart.getDataVisibility(o)?a.getPixelForValue(Ft+qt):We,De=Ee-We,Math.abs(De)<E&&(De=function(g,l,o){return 0!==g?me(g):(l.isHorizontal()?1:-1)*(l.min>=o?1:-1)}(De,a,R)*E,dt===R&&(We-=De/2),Ee=We+De),We===a.getPixelForValue(R)){const Si=me(De)*a.getLineWidthForValue(R)/2;We+=Si,De-=Si}return{size:De,base:We,head:Ee,center:Ee+De/2}}_calculateBarIndexPixels(o,a){const c=a.scale,f=this.options,E=f.skipNull,R=Ut(f.maxBarThickness,1/0);let O,F;if(a.grouped){const J=E?this._getStackCount(o):a.stackCount,dt="flex"===f.barThickness?function(g,l,o,a){const c=l.pixels,f=c[g];let E=g>0?c[g-1]:null,R=g<c.length-1?c[g+1]:null;const O=o.categoryPercentage;null===E&&(E=f-(null===R?l.end-l.start:R-f)),null===R&&(R=f+f-E);const F=f-(f-Math.min(E,R))/2*O;return{chunk:Math.abs(R-E)/2*O/a,ratio:o.barPercentage,start:F}}(o,a,f,J):function(g,l,o,a){const c=o.barThickness;let f,E;return Ct(c)?(f=l.min*o.categoryPercentage,E=o.barPercentage):(f=c*a,E=1),{chunk:f/a,ratio:E,start:l.pixels[g]-f/2}}(o,a,f,J),Ft=this._getStackIndex(this.index,this._cachedMeta.stack,E?o:void 0);O=dt.start+dt.chunk*Ft+dt.chunk/2,F=Math.min(R,dt.chunk*dt.ratio)}else O=c.getPixelForValue(this.getParsed(o)[c.axis],o),F=Math.min(R,a.min*a.ratio);return{base:O-F/2,head:O+F/2,center:O,size:F}}draw(){const o=this._cachedMeta,a=o.vScale,c=o.data,f=c.length;let E=0;for(;E<f;++E)null!==this.getParsed(E)[a.axis]&&c[E].draw(this._ctx)}}return g.id="bar",g.defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}},g.overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}},g})(),Ve=(()=>{class g extends ua{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(o,a,c,f){const E=super.parsePrimitiveData(o,a,c,f);for(let R=0;R<E.length;R++)E[R]._custom=this.resolveDataElementOptions(R+c).radius;return E}parseArrayData(o,a,c,f){const E=super.parseArrayData(o,a,c,f);for(let R=0;R<E.length;R++)E[R]._custom=Ut(a[c+R][2],this.resolveDataElementOptions(R+c).radius);return E}parseObjectData(o,a,c,f){const E=super.parseObjectData(o,a,c,f);for(let R=0;R<E.length;R++){const O=a[c+R];E[R]._custom=Ut(O&&O.r&&+O.r,this.resolveDataElementOptions(R+c).radius)}return E}getMaxOverflow(){const o=this._cachedMeta.data;let a=0;for(let c=o.length-1;c>=0;--c)a=Math.max(a,o[c].size(this.resolveDataElementOptions(c))/2);return a>0&&a}getLabelAndValue(o){const a=this._cachedMeta,{xScale:c,yScale:f}=a,E=this.getParsed(o),R=c.getLabelForValue(E.x),O=f.getLabelForValue(E.y),F=E._custom;return{label:a.label,value:"("+R+", "+O+(F?", "+F:"")+")"}}update(o){const a=this._cachedMeta.data;this.updateElements(a,0,a.length,o)}updateElements(o,a,c,f){const E="reset"===f,{iScale:R,vScale:O}=this._cachedMeta,F=this.resolveDataElementOptions(a,f),J=this.getSharedOptions(F),dt=this.includeOptions(f,J),Ft=R.axis,qt=O.axis;for(let Ee=a;Ee<a+c;Ee++){const De=o[Ee],Ge=!E&&this.getParsed(Ee),We={},Si=We[Ft]=E?R.getPixelForDecimal(.5):R.getPixelForValue(Ge[Ft]),ln=We[qt]=E?O.getBasePixel():O.getPixelForValue(Ge[qt]);We.skip=isNaN(Si)||isNaN(ln),dt&&(We.options=this.resolveDataElementOptions(Ee,De.active?"active":f),E&&(We.options.radius=0)),this.updateElement(De,Ee,We,f)}this.updateSharedOptions(J,f,F)}resolveDataElementOptions(o,a){const c=this.getParsed(o);let f=super.resolveDataElementOptions(o,a);f.$shared&&(f=Object.assign({},f,{$shared:!1}));const E=f.radius;return"active"!==a&&(f.radius=0),f.radius+=Ut(c&&c._custom,E),f}}return g.id="bubble",g.defaults={datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}},g.overrides={scales:{x:{type:"linear"},y:{type:"linear"}},plugins:{tooltip:{callbacks:{title:()=>""}}}},g})(),Ni=(()=>{class g extends ua{constructor(o,a){super(o,a),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(o,a){const c=this.getDataset().data,f=this._cachedMeta;if(!1===this._parsing)f._parsed=c;else{let R,O,E=F=>+c[F];if(ot(c[o])){const{key:F="value"}=this._parsing;E=J=>+Le(c[J],F)}for(R=o,O=o+a;R<O;++R)f._parsed[R]=E(R)}}_getRotation(){return wi(this.options.rotation-90)}_getCircumference(){return wi(this.options.circumference)}_getRotationExtents(){let o=pe,a=-pe;for(let c=0;c<this.chart.data.datasets.length;++c)if(this.chart.isDatasetVisible(c)){const f=this.chart.getDatasetMeta(c).controller,E=f._getRotation(),R=f._getCircumference();o=Math.min(o,E),a=Math.max(a,E+R)}return{rotation:o,circumference:a-o}}update(o){const a=this.chart,{chartArea:c}=a,f=this._cachedMeta,E=f.data,R=this.getMaxBorderWidth()+this.getMaxOffset(E)+this.options.spacing,O=Math.max((Math.min(c.width,c.height)-R)/2,0),F=Math.min(((g,l)=>"string"==typeof g&&g.endsWith("%")?parseFloat(g)/100:g/l)(this.options.cutout,O),1),J=this._getRingWeight(this.index),{circumference:dt,rotation:Ft}=this._getRotationExtents(),{ratioX:qt,ratioY:Ee,offsetX:De,offsetY:Ge}=function(g,l,o){let a=1,c=1,f=0,E=0;if(l<pe){const R=g,O=R+l,F=Math.cos(R),J=Math.sin(R),dt=Math.cos(O),Ft=Math.sin(O),qt=(ln,Gi,Xi)=>Ci(ln,R,O,!0)?1:Math.max(Gi,Gi*o,Xi,Xi*o),Ee=(ln,Gi,Xi)=>Ci(ln,R,O,!0)?-1:Math.min(Gi,Gi*o,Xi,Xi*o),De=qt(0,F,dt),Ge=qt(te,J,Ft),We=Ee(At,F,dt),Si=Ee(At+te,J,Ft);a=(De-We)/2,c=(Ge-Si)/2,f=-(De+We)/2,E=-(Ge+Si)/2}return{ratioX:a,ratioY:c,offsetX:f,offsetY:E}}(Ft,dt,F),ln=Math.max(Math.min((c.width-R)/qt,(c.height-R)/Ee)/2,0),Gi=Et(this.options.radius,ln),gn=(Gi-Math.max(Gi*F,0))/this._getVisibleDatasetWeightTotal();this.offsetX=De*Gi,this.offsetY=Ge*Gi,f.total=this.calculateTotal(),this.outerRadius=Gi-gn*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-gn*J,0),this.updateElements(E,0,E.length,o)}_circumference(o,a){const c=this.options,f=this._cachedMeta,E=this._getCircumference();return a&&c.animation.animateRotate||!this.chart.getDataVisibility(o)||null===f._parsed[o]||f.data[o].hidden?0:this.calculateCircumference(f._parsed[o]*E/pe)}updateElements(o,a,c,f){const E="reset"===f,R=this.chart,O=R.chartArea,dt=(O.left+O.right)/2,Ft=(O.top+O.bottom)/2,qt=E&&R.options.animation.animateScale,Ee=qt?0:this.innerRadius,De=qt?0:this.outerRadius,Ge=this.resolveDataElementOptions(a,f),We=this.getSharedOptions(Ge),Si=this.includeOptions(f,We);let Gi,ln=this._getRotation();for(Gi=0;Gi<a;++Gi)ln+=this._circumference(Gi,E);for(Gi=a;Gi<a+c;++Gi){const Xi=this._circumference(Gi,E),gn=o[Gi],_n={x:dt+this.offsetX,y:Ft+this.offsetY,startAngle:ln,endAngle:ln+Xi,circumference:Xi,outerRadius:De,innerRadius:Ee};Si&&(_n.options=We||this.resolveDataElementOptions(Gi,gn.active?"active":f)),ln+=Xi,this.updateElement(gn,Gi,_n,f)}this.updateSharedOptions(We,f,Ge)}calculateTotal(){const o=this._cachedMeta,a=o.data;let f,c=0;for(f=0;f<a.length;f++){const E=o._parsed[f];null!==E&&!isNaN(E)&&this.chart.getDataVisibility(f)&&!a[f].hidden&&(c+=Math.abs(E))}return c}calculateCircumference(o){const a=this._cachedMeta.total;return a>0&&!isNaN(o)?pe*(Math.abs(o)/a):0}getLabelAndValue(o){const c=this.chart,f=c.data.labels||[],E=rr(this._cachedMeta._parsed[o],c.options.locale);return{label:f[o]||"",value:E}}getMaxBorderWidth(o){let a=0;const c=this.chart;let f,E,R,O,F;if(!o)for(f=0,E=c.data.datasets.length;f<E;++f)if(c.isDatasetVisible(f)){R=c.getDatasetMeta(f),o=R.data,O=R.controller;break}if(!o)return 0;for(f=0,E=o.length;f<E;++f)F=O.resolveDataElementOptions(f),"inner"!==F.borderAlign&&(a=Math.max(a,F.borderWidth||0,F.hoverBorderWidth||0));return a}getMaxOffset(o){let a=0;for(let c=0,f=o.length;c<f;++c){const E=this.resolveDataElementOptions(c);a=Math.max(a,E.offset||0,E.hoverOffset||0)}return a}_getRingWeightOffset(o){let a=0;for(let c=0;c<o;++c)this.chart.isDatasetVisible(c)&&(a+=this._getRingWeight(c));return a}_getRingWeight(o){return Math.max(Ut(this.chart.data.datasets[o].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}return g.id="doughnut",g.defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"},g.descriptors={_scriptable:l=>"spacing"!==l,_indexable:l=>"spacing"!==l},g.overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(l){const o=l.data;if(o.labels.length&&o.datasets.length){const{labels:{pointStyle:a}}=l.legend.options;return o.labels.map((c,f)=>{const R=l.getDatasetMeta(0).controller.getStyle(f);return{text:c,fillStyle:R.backgroundColor,strokeStyle:R.borderColor,lineWidth:R.borderWidth,pointStyle:a,hidden:!l.getDataVisibility(f),index:f}})}return[]}},onClick(l,o,a){a.chart.toggleDataVisibility(o.index),a.chart.update()}},tooltip:{callbacks:{title:()=>"",label(l){let o=l.label;const a=": "+l.formattedValue;return yt(o)?(o=o.slice(),o[0]+=a):o+=a,o}}}}},g})(),Tn=(()=>{class g extends ua{initialize(){this.enableOptionSharing=!0,super.initialize()}update(o){const a=this._cachedMeta,{dataset:c,data:f=[],_dataset:E}=a,R=this.chart._animationsDisabled;let{start:O,count:F}=function(g,l,o){const a=l.length;let c=0,f=a;if(g._sorted){const{iScale:E,_parsed:R}=g,O=E.axis,{min:F,max:J,minDefined:dt,maxDefined:Ft}=E.getUserBounds();dt&&(c=je(Math.min(zo(R,E.axis,F).lo,o?a:zo(l,O,E.getPixelForValue(F)).lo),0,a-1)),f=Ft?je(Math.max(zo(R,E.axis,J).hi+1,o?0:zo(l,O,E.getPixelForValue(J)).hi+1),c,a)-c:a-c}return{start:c,count:f}}(a,f,R);this._drawStart=O,this._drawCount=F,function(g){const{xScale:l,yScale:o,_scaleRanges:a}=g,c={xmin:l.min,xmax:l.max,ymin:o.min,ymax:o.max};if(!a)return g._scaleRanges=c,!0;const f=a.xmin!==l.min||a.xmax!==l.max||a.ymin!==o.min||a.ymax!==o.max;return Object.assign(a,c),f}(a)&&(O=0,F=f.length),c._chart=this.chart,c._datasetIndex=this.index,c._decimated=!!E._decimated,c.points=f;const J=this.resolveDatasetElementOptions(o);this.options.showLine||(J.borderWidth=0),J.segment=this.options.segment,this.updateElement(c,void 0,{animated:!R,options:J},o),this.updateElements(f,O,F,o)}updateElements(o,a,c,f){const E="reset"===f,{iScale:R,vScale:O,_stacked:F,_dataset:J}=this._cachedMeta,dt=this.resolveDataElementOptions(a,f),Ft=this.getSharedOptions(dt),qt=this.includeOptions(f,Ft),Ee=R.axis,De=O.axis,{spanGaps:Ge,segment:We}=this.options,Si=ce(Ge)?Ge:Number.POSITIVE_INFINITY,ln=this.chart._animationsDisabled||E||"none"===f;let Gi=a>0&&this.getParsed(a-1);for(let Xi=a;Xi<a+c;++Xi){const gn=o[Xi],_n=this.getParsed(Xi),wn=ln?gn:{},Pn=Ct(_n[De]),bn=wn[Ee]=R.getPixelForValue(_n[Ee],Xi),qi=wn[De]=E||Pn?O.getBasePixel():O.getPixelForValue(F?this.applyStack(O,_n,F):_n[De],Xi);wn.skip=isNaN(bn)||isNaN(qi)||Pn,wn.stop=Xi>0&&_n[Ee]-Gi[Ee]>Si,We&&(wn.parsed=_n,wn.raw=J.data[Xi]),qt&&(wn.options=Ft||this.resolveDataElementOptions(Xi,gn.active?"active":f)),ln||this.updateElement(gn,Xi,wn,f),Gi=_n}this.updateSharedOptions(Ft,f,dt)}getMaxOverflow(){const o=this._cachedMeta,a=o.dataset,c=a.options&&a.options.borderWidth||0,f=o.data||[];if(!f.length)return c;const E=f[0].size(this.resolveDataElementOptions(0)),R=f[f.length-1].size(this.resolveDataElementOptions(f.length-1));return Math.max(c,E,R)/2}draw(){const o=this._cachedMeta;o.dataset.updateControlPoints(this.chart.chartArea,o.iScale.axis),super.draw()}}return g.id="line",g.defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1},g.overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}},g})();var ba=Object.freeze({__proto__:null,BarController:ge,BubbleController:Ve,DoughnutController:Ni,LineController:Tn,PolarAreaController:(()=>{class g extends ua{constructor(o,a){super(o,a),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(o){const c=this.chart,f=c.data.labels||[],E=rr(this._cachedMeta._parsed[o].r,c.options.locale);return{label:f[o]||"",value:E}}update(o){const a=this._cachedMeta.data;this._updateRadius(),this.updateElements(a,0,a.length,o)}_updateRadius(){const o=this.chart,a=o.chartArea,c=o.options,f=Math.min(a.right-a.left,a.bottom-a.top),E=Math.max(f/2,0),O=(E-Math.max(c.cutoutPercentage?E/100*c.cutoutPercentage:1,0))/o.getVisibleDatasetCount();this.outerRadius=E-O*this.index,this.innerRadius=this.outerRadius-O}updateElements(o,a,c,f){const E="reset"===f,R=this.chart,O=this.getDataset(),J=R.options.animation,dt=this._cachedMeta.rScale,Ft=dt.xCenter,qt=dt.yCenter,Ee=dt.getIndexAngle(0)-.5*At;let Ge,De=Ee;const We=360/this.countVisibleElements();for(Ge=0;Ge<a;++Ge)De+=this._computeAngle(Ge,f,We);for(Ge=a;Ge<a+c;Ge++){const Si=o[Ge];let ln=De,Gi=De+this._computeAngle(Ge,f,We),Xi=R.getDataVisibility(Ge)?dt.getDistanceFromCenterForValue(O.data[Ge]):0;De=Gi,E&&(J.animateScale&&(Xi=0),J.animateRotate&&(ln=Gi=Ee));const gn={x:Ft,y:qt,innerRadius:0,outerRadius:Xi,startAngle:ln,endAngle:Gi,options:this.resolveDataElementOptions(Ge,Si.active?"active":f)};this.updateElement(Si,Ge,gn,f)}}countVisibleElements(){const o=this.getDataset();let c=0;return this._cachedMeta.data.forEach((f,E)=>{!isNaN(o.data[E])&&this.chart.getDataVisibility(E)&&c++}),c}_computeAngle(o,a,c){return this.chart.getDataVisibility(o)?wi(this.resolveDataElementOptions(o,a).angle||c):0}}return g.id="polarArea",g.defaults={dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0},g.overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(l){const o=l.data;if(o.labels.length&&o.datasets.length){const{labels:{pointStyle:a}}=l.legend.options;return o.labels.map((c,f)=>{const R=l.getDatasetMeta(0).controller.getStyle(f);return{text:c,fillStyle:R.backgroundColor,strokeStyle:R.borderColor,lineWidth:R.borderWidth,pointStyle:a,hidden:!l.getDataVisibility(f),index:f}})}return[]}},onClick(l,o,a){a.chart.toggleDataVisibility(o.index),a.chart.update()}},tooltip:{callbacks:{title:()=>"",label:l=>l.chart.data.labels[l.dataIndex]+": "+l.formattedValue}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}},g})(),PieController:(()=>{class g extends Ni{}return g.id="pie",g.defaults={cutout:0,rotation:0,circumference:360,radius:"100%"},g})(),RadarController:(()=>{class g extends ua{getLabelAndValue(o){const a=this._cachedMeta.vScale,c=this.getParsed(o);return{label:a.getLabels()[o],value:""+a.getLabelForValue(c[a.axis])}}update(o){const a=this._cachedMeta,c=a.dataset,f=a.data||[],E=a.iScale.getLabels();if(c.points=f,"resize"!==o){const R=this.resolveDatasetElementOptions(o);this.options.showLine||(R.borderWidth=0),this.updateElement(c,void 0,{_loop:!0,_fullLoop:E.length===f.length,options:R},o)}this.updateElements(f,0,f.length,o)}updateElements(o,a,c,f){const E=this.getDataset(),R=this._cachedMeta.rScale,O="reset"===f;for(let F=a;F<a+c;F++){const J=o[F],dt=this.resolveDataElementOptions(F,J.active?"active":f),Ft=R.getPointPositionForValue(F,E.data[F]),qt=O?R.xCenter:Ft.x,Ee=O?R.yCenter:Ft.y,De={x:qt,y:Ee,angle:Ft.angle,skip:isNaN(qt)||isNaN(Ee),options:dt};this.updateElement(J,F,De,f)}}}return g.id="radar",g.defaults={datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}},g.overrides={aspectRatio:1,scales:{r:{type:"radialLinear"}}},g})(),ScatterController:(()=>{class g extends Tn{}return g.id="scatter",g.defaults={showLine:!1,fill:!1},g.overrides={interaction:{mode:"point"},plugins:{tooltip:{callbacks:{title:()=>"",label:l=>"("+l.label+", "+l.formattedValue+")"}}},scales:{x:{type:"linear"},y:{type:"linear"}}},g})()});function Uo(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}var Xs={_date:(()=>{class g{constructor(o){this.options=o||{}}formats(){return Uo()}parse(o,a){return Uo()}format(o,a){return Uo()}add(o,a,c){return Uo()}diff(o,a,c){return Uo()}startOf(o,a,c){return Uo()}endOf(o,a){return Uo()}}return g.override=function(l){Object.assign(g.prototype,l)},g})()};function ya(g,l){return"native"in g?{x:g.x,y:g.y}:Qt(g,l)}function Tu(g,l,o,a){const{controller:c,data:f,_sorted:E}=g,R=c._cachedMeta.iScale;if(R&&l===R.axis&&"r"!==l&&E&&f.length){const O=R._reversePixels?xo:zo;if(!a)return O(f,l,o);if(c._sharedOptions){const F=f[0],J="function"==typeof F.getRange&&F.getRange(l);if(J){const dt=O(f,l,o-J),Ft=O(f,l,o+J);return{lo:dt.lo,hi:Ft.hi}}}}return{lo:0,hi:f.length-1}}function Ks(g,l,o,a,c){const f=g.getSortedVisibleDatasetMetas(),E=o[l];for(let R=0,O=f.length;R<O;++R){const{index:F,data:J}=f[R],{lo:dt,hi:Ft}=Tu(f[R],l,E,c);for(let qt=dt;qt<=Ft;++qt){const Ee=J[qt];Ee.skip||a(Ee,F,qt)}}}function hs(g,l,o,a){const c=[];return ns(l,g.chartArea,g._minPadding)&&Ks(g,o,l,function(E,R,O){E.inRange(l.x,l.y,a)&&c.push({element:E,datasetIndex:R,index:O})},!0),c}function qr(g,l,o,a,c){return ns(l,g.chartArea,g._minPadding)?"r"!==o||a?function(g,l,o,a,c){let f=[];const E=function(g){const l=-1!==g.indexOf("x"),o=-1!==g.indexOf("y");return function(a,c){const f=l?Math.abs(a.x-c.x):0,E=o?Math.abs(a.y-c.y):0;return Math.sqrt(Math.pow(f,2)+Math.pow(E,2))}}(o);let R=Number.POSITIVE_INFINITY;return Ks(g,o,l,function(F,J,dt){const Ft=F.inRange(l.x,l.y,c);if(a&&!Ft)return;const qt=F.getCenterPoint(c);if(!ns(qt,g.chartArea,g._minPadding)&&!Ft)return;const De=E(l,qt);De<R?(f=[{element:F,datasetIndex:J,index:dt}],R=De):De===R&&f.push({element:F,datasetIndex:J,index:dt})}),f}(g,l,o,a,c):function(g,l,o,a){let c=[];return Ks(g,o,l,function(E,R,O){const{startAngle:F,endAngle:J}=E.getProps(["startAngle","endAngle"],a),{angle:dt}=mi(E,{x:l.x,y:l.y});Ci(dt,F,J)&&c.push({element:E,datasetIndex:R,index:O})}),c}(g,l,o,c):[]}function tc(g,l,o,a){const c=ya(l,g),f=[],E=o.axis,R="x"===E?"inXRange":"inYRange";let O=!1;return function(g,l){const o=g.getSortedVisibleDatasetMetas();let a,c,f;for(let E=0,R=o.length;E<R;++E){({index:a,data:c}=o[E]);for(let O=0,F=c.length;O<F;++O)f=c[O],f.skip||l(f,a,O)}}(g,(F,J,dt)=>{F[R](c[E],a)&&f.push({element:F,datasetIndex:J,index:dt}),F.inRange(c.x,c.y,a)&&(O=!0)}),o.intersect&&!O?[]:f}var Cu={modes:{index(g,l,o,a){const c=ya(l,g),f=o.axis||"x",E=o.intersect?hs(g,c,f,a):qr(g,c,f,!1,a),R=[];return E.length?(g.getSortedVisibleDatasetMetas().forEach(O=>{const F=E[0].index,J=O.data[F];J&&!J.skip&&R.push({element:J,datasetIndex:O.index,index:F})}),R):[]},dataset(g,l,o,a){const c=ya(l,g),f=o.axis||"xy";let E=o.intersect?hs(g,c,f,a):qr(g,c,f,!1,a);if(E.length>0){const R=E[0].datasetIndex,O=g.getDatasetMeta(R).data;E=[];for(let F=0;F<O.length;++F)E.push({element:O[F],datasetIndex:R,index:F})}return E},point:(g,l,o,a)=>hs(g,ya(l,g),o.axis||"xy",a),nearest:(g,l,o,a)=>qr(g,ya(l,g),o.axis||"xy",o.intersect,a),x:(g,l,o,a)=>tc(g,l,{axis:"x",intersect:o.intersect},a),y:(g,l,o,a)=>tc(g,l,{axis:"y",intersect:o.intersect},a)}};const Vo=["left","top","right","bottom"];function Uc(g,l){return g.filter(o=>o.pos===l)}function Su(g,l){return g.filter(o=>-1===Vo.indexOf(o.pos)&&o.box.axis===l)}function ec(g,l){return g.sort((o,a)=>{const c=l?a:o,f=l?o:a;return c.weight===f.weight?c.index-f.index:c.weight-f.weight})}function zl(g,l,o,a){return Math.max(g[o],l[o])+Math.max(g[a],l[a])}function eu(g,l){g.top=Math.max(g.top,l.top),g.left=Math.max(g.left,l.left),g.bottom=Math.max(g.bottom,l.bottom),g.right=Math.max(g.right,l.right)}function os(g,l,o,a){const{pos:c,box:f}=o,E=g.maxPadding;if(!ot(c)){o.size&&(g[c]-=o.size);const dt=a[o.stack]||{size:0,count:1};dt.size=Math.max(dt.size,o.horizontal?f.height:f.width),o.size=dt.size/dt.count,g[c]+=o.size}f.getPadding&&eu(E,f.getPadding());const R=Math.max(0,l.outerWidth-zl(E,g,"left","right")),O=Math.max(0,l.outerHeight-zl(E,g,"top","bottom")),F=R!==g.w,J=O!==g.h;return g.w=R,g.h=O,o.horizontal?{same:F,other:J}:{same:J,other:F}}function ic(g,l){const o=l.maxPadding;return function(c){const f={left:0,top:0,right:0,bottom:0};return c.forEach(E=>{f[E]=Math.max(l[E],o[E])}),f}(g?["left","right"]:["top","bottom"])}function kl(g,l,o,a){const c=[];let f,E,R,O,F,J;for(f=0,E=g.length,F=0;f<E;++f){R=g[f],O=R.box,O.update(R.width||l.w,R.height||l.h,ic(R.horizontal,l));const{same:dt,other:Ft}=os(l,o,R,a);F|=dt&&c.length,J=J||Ft,O.fullSize||c.push(R)}return F&&kl(c,l,o,a)||J}function Ea(g,l,o,a,c){g.top=o,g.left=l,g.right=l+a,g.bottom=o+c,g.width=a,g.height=c}function ha(g,l,o,a){const c=o.padding;let{x:f,y:E}=l;for(const R of g){const O=R.box,F=a[R.stack]||{count:1,placed:0,weight:1},J=R.stackWeight/F.weight||1;if(R.horizontal){const dt=l.w*J,Ft=F.size||O.height;Bt(F.start)&&(E=F.start),O.fullSize?Ea(O,c.left,E,o.outerWidth-c.right-c.left,Ft):Ea(O,l.left+F.placed,E,dt,Ft),F.start=E,F.placed+=dt,E=O.bottom}else{const dt=l.h*J,Ft=F.size||O.width;Bt(F.start)&&(f=F.start),O.fullSize?Ea(O,f,c.top,Ft,o.outerHeight-c.bottom-c.top):Ea(O,f,l.top+F.placed,Ft,dt),F.start=f,F.placed+=dt,f=O.right}}l.x=f,l.y=E}lr.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}});var So={addBox(g,l){g.boxes||(g.boxes=[]),l.fullSize=l.fullSize||!1,l.position=l.position||"top",l.weight=l.weight||0,l._layers=l._layers||function(){return[{z:0,draw(o){l.draw(o)}}]},g.boxes.push(l)},removeBox(g,l){const o=g.boxes?g.boxes.indexOf(l):-1;-1!==o&&g.boxes.splice(o,1)},configure(g,l,o){l.fullSize=o.fullSize,l.position=o.position,l.weight=o.weight},update(g,l,o,a){if(!g)return;const c=zr(g.options.layout.padding),f=Math.max(l-c.width,0),E=Math.max(o-c.height,0),R=function(g){const l=function(g){const l=[];let o,a,c,f,E,R;for(o=0,a=(g||[]).length;o<a;++o)c=g[o],({position:f,options:{stack:E,stackWeight:R=1}}=c),l.push({index:o,box:c,pos:f,horizontal:c.isHorizontal(),weight:c.weight,stack:E&&f+E,stackWeight:R});return l}(g),o=ec(l.filter(F=>F.box.fullSize),!0),a=ec(Uc(l,"left"),!0),c=ec(Uc(l,"right")),f=ec(Uc(l,"top"),!0),E=ec(Uc(l,"bottom")),R=Su(l,"x"),O=Su(l,"y");return{fullSize:o,leftAndTop:a.concat(f),rightAndBottom:c.concat(O).concat(E).concat(R),chartArea:Uc(l,"chartArea"),vertical:a.concat(c).concat(O),horizontal:f.concat(E).concat(R)}}(g.boxes),O=R.vertical,F=R.horizontal;nt(g.boxes,De=>{"function"==typeof De.beforeLayout&&De.beforeLayout()});const J=O.reduce((De,Ge)=>Ge.box.options&&!1===Ge.box.options.display?De:De+1,0)||1,dt=Object.freeze({outerWidth:l,outerHeight:o,padding:c,availableWidth:f,availableHeight:E,vBoxMaxWidth:f/2/J,hBoxMaxHeight:E/2}),Ft=Object.assign({},c);eu(Ft,zr(a));const qt=Object.assign({maxPadding:Ft,w:f,h:E,x:c.left,y:c.top},c),Ee=function(g,l){const o=function(g){const l={};for(const o of g){const{stack:a,pos:c,stackWeight:f}=o;if(!a||!Vo.includes(c))continue;const E=l[a]||(l[a]={count:0,placed:0,weight:0,size:0});E.count++,E.weight+=f}return l}(g),{vBoxMaxWidth:a,hBoxMaxHeight:c}=l;let f,E,R;for(f=0,E=g.length;f<E;++f){R=g[f];const{fullSize:O}=R.box,F=o[R.stack],J=F&&R.stackWeight/F.weight;R.horizontal?(R.width=J?J*a:O&&l.availableWidth,R.height=c):(R.width=a,R.height=J?J*c:O&&l.availableHeight)}return o}(O.concat(F),dt);kl(R.fullSize,qt,dt,Ee),kl(O,qt,dt,Ee),kl(F,qt,dt,Ee)&&kl(O,qt,dt,Ee),function(g){const l=g.maxPadding;function o(a){const c=Math.max(l[a]-g[a],0);return g[a]+=c,c}g.y+=o("top"),g.x+=o("left"),o("right"),o("bottom")}(qt),ha(R.leftAndTop,qt,dt,Ee),qt.x+=qt.w,qt.y+=qt.h,ha(R.rightAndBottom,qt,dt,Ee),g.chartArea={left:qt.left,top:qt.top,right:qt.left+qt.w,bottom:qt.top+qt.h,height:qt.h,width:qt.w},nt(R.chartArea,De=>{const Ge=De.box;Object.assign(Ge,g.chartArea),Ge.update(qt.w,qt.h,{left:0,top:0,right:0,bottom:0})})}};class xa{acquireContext(l,o){}releaseContext(l){return!1}addEventListener(l,o,a){}removeEventListener(l,o,a){}getDevicePixelRatio(){return 1}getMaximumSize(l,o,a,c){return o=Math.max(0,o||l.width),a=a||l.height,{width:o,height:Math.max(0,c?Math.floor(o/c):a)}}isAttached(l){return!0}updateConfig(l){}}class Ga extends xa{acquireContext(l){return l&&l.getContext&&l.getContext("2d")||null}updateConfig(l){l.options.animation=!1}}const Ll="$chartjs",iu={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},ia=g=>null===g||""===g,Ta=!!Bi&&{passive:!0};function Nl(g,l,o){g.canvas.removeEventListener(l,o,Ta)}function tl(g,l){for(const o of g)if(o===l||o.contains(l))return!0}function rc(g,l,o){const a=g.canvas,c=new MutationObserver(f=>{let E=!1;for(const R of f)E=E||tl(R.addedNodes,a),E=E&&!tl(R.removedNodes,a);E&&o()});return c.observe(document,{childList:!0,subtree:!0}),c}function Th(g,l,o){const a=g.canvas,c=new MutationObserver(f=>{let E=!1;for(const R of f)E=E||tl(R.removedNodes,a),E=E&&!tl(R.addedNodes,a);E&&o()});return c.observe(document,{childList:!0,subtree:!0}),c}const ka=new Map;let Pl=0;function oc(){const g=window.devicePixelRatio;g!==Pl&&(Pl=g,ka.forEach((l,o)=>{o.currentDevicePixelRatio!==g&&l()}))}function Ar(g,l,o){const a=g.canvas,c=a&&ll(a);if(!c)return;const f=rt((R,O)=>{const F=c.clientWidth;o(R,O),F<c.clientWidth&&o()},window),E=new ResizeObserver(R=>{const O=R[0],F=O.contentRect.width,J=O.contentRect.height;0===F&&0===J||f(F,J)});return E.observe(c),function(g,l){ka.size||window.addEventListener("resize",oc),ka.set(g,l)}(g,f),E}function sc(g,l,o){o&&o.disconnect(),"resize"===l&&function(g){ka.delete(g),ka.size||window.removeEventListener("resize",oc)}(g)}function ac(g,l,o){const a=g.canvas,c=rt(f=>{null!==g.ctx&&o(function(g,l){const o=iu[g.type]||g.type,{x:a,y:c}=Qt(g,l);return{type:o,chart:l,native:g,x:void 0!==a?a:null,y:void 0!==c?c:null}}(f,g))},g,f=>{const E=f[0];return[E,E.offsetX,E.offsetY]});return function(g,l,o){g.addEventListener(l,o,Ta)}(a,l,c),c}class yc extends xa{acquireContext(l,o){const a=l&&l.getContext&&l.getContext("2d");return a&&a.canvas===l?(function(g,l){const o=g.style,a=g.getAttribute("height"),c=g.getAttribute("width");if(g[Ll]={initial:{height:a,width:c,style:{display:o.display,height:o.height,width:o.width}}},o.display=o.display||"block",o.boxSizing=o.boxSizing||"border-box",ia(c)){const f=un(g,"width");void 0!==f&&(g.width=f)}if(ia(a))if(""===g.style.height)g.height=g.width/(l||2);else{const f=un(g,"height");void 0!==f&&(g.height=f)}}(l,o),a):null}releaseContext(l){const o=l.canvas;if(!o[Ll])return!1;const a=o[Ll].initial;["height","width"].forEach(f=>{const E=a[f];Ct(E)?o.removeAttribute(f):o.setAttribute(f,E)});const c=a.style||{};return Object.keys(c).forEach(f=>{o.style[f]=c[f]}),o.width=o.width,delete o[Ll],!0}addEventListener(l,o,a){this.removeEventListener(l,o),(l.$proxies||(l.$proxies={}))[o]=({attach:rc,detach:Th,resize:Ar}[o]||ac)(l,o,a)}removeEventListener(l,o){const a=l.$proxies||(l.$proxies={}),c=a[o];c&&(({attach:sc,detach:sc,resize:sc}[o]||Nl)(l,o,c),a[o]=void 0)}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(l,o,a,c){return function(g,l,o,a){const c=qs(g),f=W(c,"margin"),E=Vs(c.maxWidth,g,"clientWidth")||hi,R=Vs(c.maxHeight,g,"clientHeight")||hi,O=function(g,l,o){let a,c;if(void 0===l||void 0===o){const f=ll(g);if(f){const E=f.getBoundingClientRect(),R=qs(f),O=W(R,"border","width"),F=W(R,"padding");l=E.width-F.width-O.width,o=E.height-F.height-O.height,a=Vs(R.maxWidth,f,"clientWidth"),c=Vs(R.maxHeight,f,"clientHeight")}else l=g.clientWidth,o=g.clientHeight}return{width:l,height:o,maxWidth:a||hi,maxHeight:c||hi}}(g,l,o);let{width:F,height:J}=O;if("content-box"===c.boxSizing){const dt=W(c,"border","width"),Ft=W(c,"padding");F-=Ft.width+dt.width,J-=Ft.height+dt.height}return F=Math.max(0,F-f.width),J=Math.max(0,a?Math.floor(F/a):J-f.height),F=Ye(Math.min(F,E,O.maxWidth)),J=Ye(Math.min(J,R,O.maxHeight)),F&&!J&&(J=Ye(F/2)),{width:F,height:J}}(l,o,a,c)}isAttached(l){const o=ll(l);return!(!o||!o.isConnected)}}class na{constructor(){this.x=void 0,this.y=void 0,this.active=!1,this.options=void 0,this.$animations=void 0}tooltipPosition(l){const{x:o,y:a}=this.getProps(["x","y"],l);return{x:o,y:a}}hasValue(){return ce(this.x)&&ce(this.y)}getProps(l,o){const a=this.$animations;if(!o||!a)return this;const c={};return l.forEach(f=>{c[f]=a[f]&&a[f].active()?a[f]._to:this[f]}),c}}na.defaults={},na.defaultRoutes=void 0;const Ec={values:g=>yt(g)?g:""+g,numeric(g,l,o){if(0===g)return"0";const a=this.chart.options.locale;let c,f=g;if(o.length>1){const F=Math.max(Math.abs(o[0].value),Math.abs(o[o.length-1].value));(F<1e-4||F>1e15)&&(c="scientific"),f=function(g,l){let o=l.length>3?l[2].value-l[1].value:l[1].value-l[0].value;return Math.abs(o)>=1&&g!==Math.floor(g)&&(o=g-Math.floor(g)),o}(g,o)}const E=ne(Math.abs(f)),R=Math.max(Math.min(-1*Math.floor(E),20),0),O={notation:c,minimumFractionDigits:R,maximumFractionDigits:R};return Object.assign(O,this.options.ticks.format),rr(g,a,O)},logarithmic(g,l,o){if(0===g)return"0";const a=g/Math.pow(10,Math.floor(ne(g)));return 1===a||2===a||5===a?Ec.numeric.call(this,g,l,o):""}};var Tc={formatters:Ec};function uc(g,l,o,a,c){const f=Ut(a,0),E=Math.min(Ut(c,g.length),g.length);let O,F,J,R=0;for(o=Math.ceil(o),c&&(O=c-a,o=O/Math.floor(O/o)),J=f;J<0;)R++,J=Math.round(f+R*o);for(F=Math.max(f,0);F<E;F++)F===J&&(l.push(g[F]),R++,J=Math.round(f+R*o))}lr.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",grace:0,grid:{display:!0,lineWidth:1,drawBorder:!0,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(g,l)=>l.lineWidth,tickColor:(g,l)=>l.color,offset:!1,borderDash:[],borderDashOffset:0,borderWidth:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:Tc.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),lr.route("scale.ticks","color","","color"),lr.route("scale.grid","color","","borderColor"),lr.route("scale.grid","borderColor","","borderColor"),lr.route("scale.title","color","","color"),lr.describe("scale",{_fallback:!1,_scriptable:g=>!g.startsWith("before")&&!g.startsWith("after")&&"callback"!==g&&"parser"!==g,_indexable:g=>"borderDash"!==g&&"tickBorderDash"!==g}),lr.describe("scales",{_fallback:"scale"}),lr.describe("scale.ticks",{_scriptable:g=>"backdropPadding"!==g&&"callback"!==g,_indexable:g=>"backdropPadding"!==g});const pl=(g,l,o)=>"top"===l||"left"===l?g[l]+o:g[l]-o;function el(g,l){const o=[],a=g.length/l,c=g.length;let f=0;for(;f<c;f+=a)o.push(g[Math.floor(f)]);return o}function hc(g,l,o){const a=g.ticks.length,c=Math.min(l,a-1),f=g._startPixel,E=g._endPixel,R=1e-6;let F,O=g.getPixelForTick(c);if(!(o&&(F=1===a?Math.max(O-f,E-O):0===l?(g.getPixelForTick(1)-O)/2:(O-g.getPixelForTick(c-1))/2,O+=c<l?F:-F,O<f-R||O>E+R)))return O}function Gc(g){return g.drawTicks?g.tickLength:0}function ru(g,l){if(!g.display)return 0;const o=ao(g.font,l),a=zr(g.padding);return(yt(g.text)?g.text.length:1)*o.lineHeight+a.height}function jl(g,l,o){let a=Ht(g);return(o&&"right"!==l||!o&&"right"===l)&&(a=(g=>"left"===g?"right":"right"===g?"left":g)(a)),a}class da extends na{constructor(l){super(),this.id=l.id,this.type=l.type,this.options=void 0,this.ctx=l.ctx,this.chart=l.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(l){this.options=l.setContext(this.getContext()),this.axis=l.axis,this._userMin=this.parse(l.min),this._userMax=this.parse(l.max),this._suggestedMin=this.parse(l.suggestedMin),this._suggestedMax=this.parse(l.suggestedMax)}parse(l,o){return l}getUserBounds(){let{_userMin:l,_userMax:o,_suggestedMin:a,_suggestedMax:c}=this;return l=lt(l,Number.POSITIVE_INFINITY),o=lt(o,Number.NEGATIVE_INFINITY),a=lt(a,Number.POSITIVE_INFINITY),c=lt(c,Number.NEGATIVE_INFINITY),{min:lt(l,a),max:lt(o,c),minDefined:mt(l),maxDefined:mt(o)}}getMinMax(l){let E,{min:o,max:a,minDefined:c,maxDefined:f}=this.getUserBounds();if(c&&f)return{min:o,max:a};const R=this.getMatchingVisibleMetas();for(let O=0,F=R.length;O<F;++O)E=R[O].controller.getMinMax(this,l),c||(o=Math.min(o,E.min)),f||(a=Math.max(a,E.max));return o=f&&o>a?a:o,a=c&&o>a?o:a,{min:lt(o,lt(a,o)),max:lt(a,lt(o,a))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const l=this.chart.data;return this.options.labels||(this.isHorizontal()?l.xLabels:l.yLabels)||l.labels||[]}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){ht(this.options.beforeUpdate,[this])}update(l,o,a){const{beginAtZero:c,grace:f,ticks:E}=this.options,R=E.sampleSize;this.beforeUpdate(),this.maxWidth=l,this.maxHeight=o,this._margins=a=Object.assign({left:0,right:0,top:0,bottom:0},a),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+a.left+a.right:this.height+a.top+a.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=function(g,l,o){const{min:a,max:c}=g,f=Et(l,(c-a)/2),E=(R,O)=>o&&0===R?0:R+O;return{min:E(a,-Math.abs(f)),max:E(c,f)}}(this,f,c),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const O=R<this.ticks.length;this._convertTicksToLabels(O?el(this.ticks,R):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),E.display&&(E.autoSkip||"auto"===E.source)&&(this.ticks=function(g,l){const o=g.options.ticks,a=o.maxTicksLimit||function(g){const l=g.options.offset,o=g._tickSize();return Math.floor(Math.min(g._length/o+(l?0:1),g._maxLength/o))}(g),c=o.major.enabled?function(g){const l=[];let o,a;for(o=0,a=g.length;o<a;o++)g[o].major&&l.push(o);return l}(l):[],f=c.length,E=c[0],R=c[f-1],O=[];if(f>a)return function(g,l,o,a){let E,c=0,f=o[0];for(a=Math.ceil(a),E=0;E<g.length;E++)E===f&&(l.push(g[E]),c++,f=o[c*a])}(l,O,c,f/a),O;const F=function(g,l,o){const a=function(g){const l=g.length;let o,a;if(l<2)return!1;for(a=g[0],o=1;o<l;++o)if(g[o]-g[o-1]!==a)return!1;return a}(g),c=l.length/o;if(!a)return Math.max(c,1);const f=function(g){const l=[],o=Math.sqrt(g);let a;for(a=1;a<o;a++)g%a==0&&(l.push(a),l.push(g/a));return o===(0|o)&&l.push(o),l.sort((c,f)=>c-f).pop(),l}(a);for(let E=0,R=f.length-1;E<R;E++){const O=f[E];if(O>c)return O}return Math.max(c,1)}(c,l,a);if(f>0){let J,dt;const Ft=f>1?Math.round((R-E)/(f-1)):null;for(uc(l,O,F,Ct(Ft)?0:E-Ft,E),J=0,dt=f-1;J<dt;J++)uc(l,O,F,c[J],c[J+1]);return uc(l,O,F,R,Ct(Ft)?l.length:R+Ft),O}return uc(l,O,F),O}(this,this.ticks),this._labelSizes=null),O&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let o,a,l=this.options.reverse;this.isHorizontal()?(o=this.left,a=this.right):(o=this.top,a=this.bottom,l=!l),this._startPixel=o,this._endPixel=a,this._reversePixels=l,this._length=a-o,this._alignToPixels=this.options.alignToPixels}afterUpdate(){ht(this.options.afterUpdate,[this])}beforeSetDimensions(){ht(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){ht(this.options.afterSetDimensions,[this])}_callHooks(l){this.chart.notifyPlugins(l,this.getContext()),ht(this.options[l],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){ht(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(l){const o=this.options.ticks;let a,c,f;for(a=0,c=l.length;a<c;a++)f=l[a],f.label=ht(o.callback,[f.value,a,l],this)}afterTickToLabelConversion(){ht(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){ht(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const l=this.options,o=l.ticks,a=this.ticks.length,c=o.minRotation||0,f=o.maxRotation;let R,O,F,E=c;if(!this._isVisible()||!o.display||c>=f||a<=1||!this.isHorizontal())return void(this.labelRotation=c);const J=this._getLabelSizes(),dt=J.widest.width,Ft=J.highest.height,qt=je(this.chart.width-dt,0,this.maxWidth);R=l.offset?this.maxWidth/a:qt/(a-1),dt+6>R&&(R=qt/(a-(l.offset?.5:1)),O=this.maxHeight-Gc(l.grid)-o.padding-ru(l.title,this.chart.options.font),F=Math.sqrt(dt*dt+Ft*Ft),E=yi(Math.min(Math.asin(je((J.highest.height+6)/R,-1,1)),Math.asin(je(O/F,-1,1))-Math.asin(je(Ft/F,-1,1)))),E=Math.max(c,Math.min(f,E))),this.labelRotation=E}afterCalculateLabelRotation(){ht(this.options.afterCalculateLabelRotation,[this])}beforeFit(){ht(this.options.beforeFit,[this])}fit(){const l={width:0,height:0},{chart:o,options:{ticks:a,title:c,grid:f}}=this,E=this._isVisible(),R=this.isHorizontal();if(E){const O=ru(c,o.options.font);if(R?(l.width=this.maxWidth,l.height=Gc(f)+O):(l.height=this.maxHeight,l.width=Gc(f)+O),a.display&&this.ticks.length){const{first:F,last:J,widest:dt,highest:Ft}=this._getLabelSizes(),qt=2*a.padding,Ee=wi(this.labelRotation),De=Math.cos(Ee),Ge=Math.sin(Ee);R?l.height=Math.min(this.maxHeight,l.height+(a.mirror?0:Ge*dt.width+De*Ft.height)+qt):l.width=Math.min(this.maxWidth,l.width+(a.mirror?0:De*dt.width+Ge*Ft.height)+qt),this._calculatePadding(F,J,Ge,De)}}this._handleMargins(),R?(this.width=this._length=o.width-this._margins.left-this._margins.right,this.height=l.height):(this.width=l.width,this.height=this._length=o.height-this._margins.top-this._margins.bottom)}_calculatePadding(l,o,a,c){const{ticks:{align:f,padding:E},position:R}=this.options,O=0!==this.labelRotation,F="top"!==R&&"x"===this.axis;if(this.isHorizontal()){const J=this.getPixelForTick(0)-this.left,dt=this.right-this.getPixelForTick(this.ticks.length-1);let Ft=0,qt=0;O?F?(Ft=c*l.width,qt=a*o.height):(Ft=a*l.height,qt=c*o.width):"start"===f?qt=o.width:"end"===f?Ft=l.width:(Ft=l.width/2,qt=o.width/2),this.paddingLeft=Math.max((Ft-J+E)*this.width/(this.width-J),0),this.paddingRight=Math.max((qt-dt+E)*this.width/(this.width-dt),0)}else{let J=o.height/2,dt=l.height/2;"start"===f?(J=0,dt=l.height):"end"===f&&(J=o.height,dt=0),this.paddingTop=J+E,this.paddingBottom=dt+E}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){ht(this.options.afterFit,[this])}isHorizontal(){const{axis:l,position:o}=this.options;return"top"===o||"bottom"===o||"x"===l}isFullSize(){return this.options.fullSize}_convertTicksToLabels(l){let o,a;for(this.beforeTickToLabelConversion(),this.generateTickLabels(l),o=0,a=l.length;o<a;o++)Ct(l[o].label)&&(l.splice(o,1),a--,o--);this.afterTickToLabelConversion()}_getLabelSizes(){let l=this._labelSizes;if(!l){const o=this.options.ticks.sampleSize;let a=this.ticks;o<a.length&&(a=el(a,o)),this._labelSizes=l=this._computeLabelSizes(a,a.length)}return l}_computeLabelSizes(l,o){const{ctx:a,_longestTextCache:c}=this,f=[],E=[];let F,J,dt,Ft,qt,Ee,De,Ge,We,Si,ln,R=0,O=0;for(F=0;F<o;++F){if(Ft=l[F].label,qt=this._resolveTickFontOptions(F),a.font=Ee=qt.string,De=c[Ee]=c[Ee]||{data:{},gc:[]},Ge=qt.lineHeight,We=Si=0,Ct(Ft)||yt(Ft)){if(yt(Ft))for(J=0,dt=Ft.length;J<dt;++J)ln=Ft[J],!Ct(ln)&&!yt(ln)&&(We=Jr(a,De.data,De.gc,We,ln),Si+=Ge)}else We=Jr(a,De.data,De.gc,We,Ft),Si=Ge;f.push(We),E.push(Si),R=Math.max(We,R),O=Math.max(Si,O)}!function(g,l){nt(g,o=>{const a=o.gc,c=a.length/2;let f;if(c>l){for(f=0;f<c;++f)delete o.data[a[f]];a.splice(0,c)}})}(c,o);const Gi=f.indexOf(R),Xi=E.indexOf(O),gn=_n=>({width:f[_n]||0,height:E[_n]||0});return{first:gn(0),last:gn(o-1),widest:gn(Gi),highest:gn(Xi),widths:f,heights:E}}getLabelForValue(l){return l}getPixelForValue(l,o){return NaN}getValueForPixel(l){}getPixelForTick(l){const o=this.ticks;return l<0||l>o.length-1?null:this.getPixelForValue(o[l].value)}getPixelForDecimal(l){this._reversePixels&&(l=1-l);const o=this._startPixel+l*this._length;return je(this._alignToPixels?ws(this.chart,o,0):o,-32768,32767)}getDecimalForPixel(l){const o=(l-this._startPixel)/this._length;return this._reversePixels?1-o:o}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:l,max:o}=this;return l<0&&o<0?o:l>0&&o>0?l:0}getContext(l){const o=this.ticks||[];if(l>=0&&l<o.length){const a=o[l];return a.$context||(a.$context=function(g,l,o){return Xo(g,{tick:o,index:l,type:"tick"})}(this.getContext(),l,a))}return this.$context||(this.$context=function(g,l){return Xo(g,{scale:l,type:"scale"})}(this.chart.getContext(),this))}_tickSize(){const l=this.options.ticks,o=wi(this.labelRotation),a=Math.abs(Math.cos(o)),c=Math.abs(Math.sin(o)),f=this._getLabelSizes(),E=l.autoSkipPadding||0,R=f?f.widest.width+E:0,O=f?f.highest.height+E:0;return this.isHorizontal()?O*a>R*c?R/a:O/c:O*c<R*a?O/a:R/c}_isVisible(){const l=this.options.display;return"auto"!==l?!!l:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(l){const o=this.axis,a=this.chart,c=this.options,{grid:f,position:E}=c,R=f.offset,O=this.isHorizontal(),J=this.ticks.length+(R?1:0),dt=Gc(f),Ft=[],qt=f.setContext(this.getContext()),Ee=qt.drawBorder?qt.borderWidth:0,De=Ee/2,Ge=function(Hi){return ws(a,Hi,Ee)};let We,Si,ln,Gi,Xi,gn,_n,wn,Pn,bn,qi,Bn;if("top"===E)We=Ge(this.bottom),gn=this.bottom-dt,wn=We-De,bn=Ge(l.top)+De,Bn=l.bottom;else if("bottom"===E)We=Ge(this.top),bn=l.top,Bn=Ge(l.bottom)-De,gn=We+De,wn=this.top+dt;else if("left"===E)We=Ge(this.right),Xi=this.right-dt,_n=We-De,Pn=Ge(l.left)+De,qi=l.right;else if("right"===E)We=Ge(this.left),Pn=l.left,qi=Ge(l.right)-De,Xi=We+De,_n=this.left+dt;else if("x"===o){if("center"===E)We=Ge((l.top+l.bottom)/2+.5);else if(ot(E)){const Hi=Object.keys(E)[0];We=Ge(this.chart.scales[Hi].getPixelForValue(E[Hi]))}bn=l.top,Bn=l.bottom,gn=We+De,wn=gn+dt}else if("y"===o){if("center"===E)We=Ge((l.left+l.right)/2);else if(ot(E)){const Hi=Object.keys(E)[0];We=Ge(this.chart.scales[Hi].getPixelForValue(E[Hi]))}Xi=We-De,_n=Xi-dt,Pn=l.left,qi=l.right}const dr=Ut(c.ticks.maxTicksLimit,J),Ei=Math.max(1,Math.ceil(J/dr));for(Si=0;Si<J;Si+=Ei){const Hi=f.setContext(this.getContext(Si)),Rn=Hi.lineWidth,fr=Hi.color,vr=f.borderDash||[],to=Hi.borderDashOffset,tu=Hi.tickWidth,en=Hi.tickColor,ir=Hi.tickBorderDash||[],cs=Hi.tickBorderDashOffset;ln=hc(this,Si,R),void 0!==ln&&(Gi=ws(a,ln,Rn),O?Xi=_n=Pn=qi=Gi:gn=wn=bn=Bn=Gi,Ft.push({tx1:Xi,ty1:gn,tx2:_n,ty2:wn,x1:Pn,y1:bn,x2:qi,y2:Bn,width:Rn,color:fr,borderDash:vr,borderDashOffset:to,tickWidth:tu,tickColor:en,tickBorderDash:ir,tickBorderDashOffset:cs}))}return this._ticksLength=J,this._borderValue=We,Ft}_computeLabelItems(l){const o=this.axis,a=this.options,{position:c,ticks:f}=a,E=this.isHorizontal(),R=this.ticks,{align:O,crossAlign:F,padding:J,mirror:dt}=f,Ft=Gc(a.grid),qt=Ft+J,Ee=dt?-J:qt,De=-wi(this.labelRotation),Ge=[];let We,Si,ln,Gi,Xi,gn,_n,wn,Pn,bn,qi,Bn,dr="middle";if("top"===c)gn=this.bottom-Ee,_n=this._getXAxisLabelAlignment();else if("bottom"===c)gn=this.top+Ee,_n=this._getXAxisLabelAlignment();else if("left"===c){const Hi=this._getYAxisLabelAlignment(Ft);_n=Hi.textAlign,Xi=Hi.x}else if("right"===c){const Hi=this._getYAxisLabelAlignment(Ft);_n=Hi.textAlign,Xi=Hi.x}else if("x"===o){if("center"===c)gn=(l.top+l.bottom)/2+qt;else if(ot(c)){const Hi=Object.keys(c)[0];gn=this.chart.scales[Hi].getPixelForValue(c[Hi])+qt}_n=this._getXAxisLabelAlignment()}else if("y"===o){if("center"===c)Xi=(l.left+l.right)/2-qt;else if(ot(c)){const Hi=Object.keys(c)[0];Xi=this.chart.scales[Hi].getPixelForValue(c[Hi])}_n=this._getYAxisLabelAlignment(Ft).textAlign}"y"===o&&("start"===O?dr="top":"end"===O&&(dr="bottom"));const Ei=this._getLabelSizes();for(We=0,Si=R.length;We<Si;++We){ln=R[We],Gi=ln.label;const Hi=f.setContext(this.getContext(We));wn=this.getPixelForTick(We)+f.labelOffset,Pn=this._resolveTickFontOptions(We),bn=Pn.lineHeight,qi=yt(Gi)?Gi.length:1;const Rn=qi/2,fr=Hi.color,vr=Hi.textStrokeColor,to=Hi.textStrokeWidth;let tu;if(E?(Xi=wn,Bn="top"===c?"near"===F||0!==De?-qi*bn+bn/2:"center"===F?-Ei.highest.height/2-Rn*bn+bn:bn/2-Ei.highest.height:"near"===F||0!==De?bn/2:"center"===F?Ei.highest.height/2-Rn*bn:Ei.highest.height-qi*bn,dt&&(Bn*=-1)):(gn=wn,Bn=(1-qi)*bn/2),Hi.showLabelBackdrop){const en=zr(Hi.backdropPadding),ir=Ei.heights[We],cs=Ei.widths[We];let sl=gn+Bn-en.top,ih=Xi-en.left;switch(dr){case"middle":sl-=ir/2;break;case"bottom":sl-=ir}switch(_n){case"center":ih-=cs/2;break;case"right":ih-=cs}tu={left:ih,top:sl,width:cs+en.width,height:ir+en.height,color:Hi.backdropColor}}Ge.push({rotation:De,label:Gi,font:Pn,color:fr,strokeColor:vr,strokeWidth:to,textOffset:Bn,textAlign:_n,textBaseline:dr,translation:[Xi,gn],backdrop:tu})}return Ge}_getXAxisLabelAlignment(){const{position:l,ticks:o}=this.options;if(-wi(this.labelRotation))return"top"===l?"left":"right";let c="center";return"start"===o.align?c="left":"end"===o.align&&(c="right"),c}_getYAxisLabelAlignment(l){const{position:o,ticks:{crossAlign:a,mirror:c,padding:f}}=this.options,R=l+f,O=this._getLabelSizes().widest.width;let F,J;return"left"===o?c?(J=this.right+f,"near"===a?F="left":"center"===a?(F="center",J+=O/2):(F="right",J+=O)):(J=this.right-R,"near"===a?F="right":"center"===a?(F="center",J-=O/2):(F="left",J=this.left)):"right"===o?c?(J=this.left+f,"near"===a?F="right":"center"===a?(F="center",J-=O/2):(F="left",J-=O)):(J=this.left+R,"near"===a?F="left":"center"===a?(F="center",J+=O/2):(F="right",J=this.right)):F="right",{textAlign:F,x:J}}_computeLabelArea(){if(this.options.ticks.mirror)return;const l=this.chart,o=this.options.position;return"left"===o||"right"===o?{top:0,left:this.left,bottom:l.height,right:this.right}:"top"===o||"bottom"===o?{top:this.top,left:0,bottom:this.bottom,right:l.width}:void 0}drawBackground(){const{ctx:l,options:{backgroundColor:o},left:a,top:c,width:f,height:E}=this;o&&(l.save(),l.fillStyle=o,l.fillRect(a,c,f,E),l.restore())}getLineWidthForValue(l){const o=this.options.grid;if(!this._isVisible()||!o.display)return 0;const c=this.ticks.findIndex(f=>f.value===l);return c>=0?o.setContext(this.getContext(c)).lineWidth:0}drawGrid(l){const o=this.options.grid,a=this.ctx,c=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(l));let f,E;const R=(O,F,J)=>{!J.width||!J.color||(a.save(),a.lineWidth=J.width,a.strokeStyle=J.color,a.setLineDash(J.borderDash||[]),a.lineDashOffset=J.borderDashOffset,a.beginPath(),a.moveTo(O.x,O.y),a.lineTo(F.x,F.y),a.stroke(),a.restore())};if(o.display)for(f=0,E=c.length;f<E;++f){const O=c[f];o.drawOnChartArea&&R({x:O.x1,y:O.y1},{x:O.x2,y:O.y2},O),o.drawTicks&&R({x:O.tx1,y:O.ty1},{x:O.tx2,y:O.ty2},{color:O.tickColor,width:O.tickWidth,borderDash:O.tickBorderDash,borderDashOffset:O.tickBorderDashOffset})}}drawBorder(){const{chart:l,ctx:o,options:{grid:a}}=this,c=a.setContext(this.getContext()),f=a.drawBorder?c.borderWidth:0;if(!f)return;const E=a.setContext(this.getContext(0)).lineWidth,R=this._borderValue;let O,F,J,dt;this.isHorizontal()?(O=ws(l,this.left,f)-f/2,F=ws(l,this.right,E)+E/2,J=dt=R):(J=ws(l,this.top,f)-f/2,dt=ws(l,this.bottom,E)+E/2,O=F=R),o.save(),o.lineWidth=c.borderWidth,o.strokeStyle=c.borderColor,o.beginPath(),o.moveTo(O,J),o.lineTo(F,dt),o.stroke(),o.restore()}drawLabels(l){if(!this.options.ticks.display)return;const a=this.ctx,c=this._computeLabelArea();c&&Ho(a,c);const f=this._labelItems||(this._labelItems=this._computeLabelItems(l));let E,R;for(E=0,R=f.length;E<R;++E){const O=f[E],F=O.font,J=O.label;O.backdrop&&(a.fillStyle=O.backdrop.color,a.fillRect(O.backdrop.left,O.backdrop.top,O.backdrop.width,O.backdrop.height)),Qo(a,J,0,O.textOffset,F,O)}c&&Ya(a)}drawTitle(){const{ctx:l,options:{position:o,title:a,reverse:c}}=this;if(!a.display)return;const f=ao(a.font),E=zr(a.padding),R=a.align;let O=f.lineHeight/2;"bottom"===o||"center"===o||ot(o)?(O+=E.bottom,yt(a.text)&&(O+=f.lineHeight*(a.text.length-1))):O+=E.top;const{titleX:F,titleY:J,maxWidth:dt,rotation:Ft}=function(g,l,o,a){const{top:c,left:f,bottom:E,right:R,chart:O}=g,{chartArea:F,scales:J}=O;let Ft,qt,Ee,dt=0;const De=E-c,Ge=R-f;if(g.isHorizontal()){if(qt=vt(a,f,R),ot(o)){const We=Object.keys(o)[0];Ee=J[We].getPixelForValue(o[We])+De-l}else Ee="center"===o?(F.bottom+F.top)/2+De-l:pl(g,o,l);Ft=R-f}else{if(ot(o)){const We=Object.keys(o)[0];qt=J[We].getPixelForValue(o[We])-Ge+l}else qt="center"===o?(F.left+F.right)/2-Ge+l:pl(g,o,l);Ee=vt(a,E,c),dt="left"===o?-te:te}return{titleX:qt,titleY:Ee,maxWidth:Ft,rotation:dt}}(this,O,o,R);Qo(l,a.text,0,0,f,{color:a.color,maxWidth:dt,rotation:Ft,textAlign:jl(R,o,c),textBaseline:"middle",translation:[F,J]})}draw(l){!this._isVisible()||(this.drawBackground(),this.drawGrid(l),this.drawBorder(),this.drawTitle(),this.drawLabels(l))}_layers(){const l=this.options,o=l.ticks&&l.ticks.z||0,a=Ut(l.grid&&l.grid.z,-1);return this._isVisible()&&this.draw===da.prototype.draw?[{z:a,draw:c=>{this.drawBackground(),this.drawGrid(c),this.drawTitle()}},{z:a+1,draw:()=>{this.drawBorder()}},{z:o,draw:c=>{this.drawLabels(c)}}]:[{z:o,draw:c=>{this.draw(c)}}]}getMatchingVisibleMetas(l){const o=this.chart.getSortedVisibleDatasetMetas(),a=this.axis+"AxisID",c=[];let f,E;for(f=0,E=o.length;f<E;++f){const R=o[f];R[a]===this.id&&(!l||R.type===l)&&c.push(R)}return c}_resolveTickFontOptions(l){return ao(this.options.ticks.setContext(this.getContext(l)).font)}_maxDigits(){const l=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/l}}class il{constructor(l,o,a){this.type=l,this.scope=o,this.override=a,this.items=Object.create(null)}isForType(l){return Object.prototype.isPrototypeOf.call(this.type.prototype,l.prototype)}register(l){const o=Object.getPrototypeOf(l);let a;var g;"id"in(g=o)&&"defaults"in g&&(a=this.register(o));const c=this.items,f=l.id,E=this.scope+"."+f;if(!f)throw new Error("class does not have id: "+l);return f in c||(c[f]=l,function(g,l,o){const a=ve(Object.create(null),[o?lr.get(o):{},lr.get(l),g.defaults]);lr.set(l,a),g.defaultRoutes&&function(g,l){Object.keys(l).forEach(o=>{const a=o.split("."),c=a.pop(),f=[g].concat(a).join("."),E=l[o].split("."),R=E.pop(),O=E.join(".");lr.route(f,c,O,R)})}(l,g.defaultRoutes),g.descriptors&&lr.describe(l,g.descriptors)}(l,E,a),this.override&&lr.override(l.id,l.overrides)),E}get(l){return this.items[l]}unregister(l){const o=this.items,a=l.id,c=this.scope;a in o&&delete o[a],c&&a in lr[c]&&(delete lr[c][a],this.override&&delete Ao[a])}}var Ca=new class{constructor(){this.controllers=new il(ua,"datasets",!0),this.elements=new il(na,"elements"),this.plugins=new il(Object,"plugins"),this.scales=new il(da,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...l){this._each("register",l)}remove(...l){this._each("unregister",l)}addControllers(...l){this._each("register",l,this.controllers)}addElements(...l){this._each("register",l,this.elements)}addPlugins(...l){this._each("register",l,this.plugins)}addScales(...l){this._each("register",l,this.scales)}getController(l){return this._get(l,this.controllers,"controller")}getElement(l){return this._get(l,this.elements,"element")}getPlugin(l){return this._get(l,this.plugins,"plugin")}getScale(l){return this._get(l,this.scales,"scale")}removeControllers(...l){this._each("unregister",l,this.controllers)}removeElements(...l){this._each("unregister",l,this.elements)}removePlugins(...l){this._each("unregister",l,this.plugins)}removeScales(...l){this._each("unregister",l,this.scales)}_each(l,o,a){[...o].forEach(c=>{const f=a||this._getRegistryForType(c);a||f.isForType(c)||f===this.plugins&&c.id?this._exec(l,f,c):nt(c,E=>{const R=a||this._getRegistryForType(E);this._exec(l,R,E)})})}_exec(l,o,a){const c=gi(l);ht(a["before"+c],[],a),o[l](a),ht(a["after"+c],[],a)}_getRegistryForType(l){for(let o=0;o<this._typedRegistries.length;o++){const a=this._typedRegistries[o];if(a.isForType(l))return a}return this.plugins}_get(l,o,a){const c=o.get(l);if(void 0===c)throw new Error('"'+l+'" is not a registered '+a+".");return c}};class so{constructor(){this._init=[]}notify(l,o,a,c){"beforeInit"===o&&(this._init=this._createDescriptors(l,!0),this._notify(this._init,l,"install"));const f=c?this._descriptors(l).filter(c):this._descriptors(l),E=this._notify(f,l,o,a);return"afterDestroy"===o&&(this._notify(f,l,"stop"),this._notify(this._init,l,"uninstall")),E}_notify(l,o,a,c){c=c||{};for(const f of l){const E=f.plugin;if(!1===ht(E[a],[o,c,f.options],E)&&c.cancelable)return!1}return!0}invalidate(){Ct(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(l){if(this._cache)return this._cache;const o=this._cache=this._createDescriptors(l);return this._notifyStateChanges(l),o}_createDescriptors(l,o){const a=l&&l.config,c=Ut(a.options&&a.options.plugins,{}),f=function(g){const l=[],o=Object.keys(Ca.plugins.items);for(let c=0;c<o.length;c++)l.push(Ca.getPlugin(o[c]));const a=g.plugins||[];for(let c=0;c<a.length;c++){const f=a[c];-1===l.indexOf(f)&&l.push(f)}return l}(a);return!1!==c||o?function(g,l,o,a){const c=[],f=g.getContext();for(let E=0;E<l.length;E++){const R=l[E],F=Yl(o[R.id],a);null!==F&&c.push({plugin:R,options:wu(g.config,R,F,f)})}return c}(l,f,c,o):[]}_notifyStateChanges(l){const o=this._oldCache||[],a=this._cache,c=(f,E)=>f.filter(R=>!E.some(O=>R.plugin.id===O.plugin.id));this._notify(c(o,a),l,"stop"),this._notify(c(a,o),l,"start")}}function Yl(g,l){return l||!1!==g?!0===g?{}:g:null}function wu(g,l,o,a){const c=g.pluginScopeKeys(l),f=g.getOptionScopes(o,c);return g.createResolver(f,a,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function fl(g,l){return((l.datasets||{})[g]||{}).indexAxis||l.indexAxis||(lr.datasets[g]||{}).indexAxis||"x"}function pc(g,l){return"x"===g||"y"===g?g:l.axis||function(g){return"top"===g||"bottom"===g?"x":"left"===g||"right"===g?"y":void 0}(l.position)||g.charAt(0).toLowerCase()}function Cl(g){const l=g.options||(g.options={});l.plugins=Ut(l.plugins,{}),l.scales=function(g,l){const o=Ao[g.type]||{scales:{}},a=l.scales||{},c=fl(g.type,l),f=Object.create(null),E=Object.create(null);return Object.keys(a).forEach(R=>{const O=a[R];if(!ot(O))return console.error(`Invalid scale configuration for scale: ${R}`);if(O._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${R}`);const F=pc(R,O),J=function(g,l){return g===l?"_index_":"_value_"}(F,c),dt=o.scales||{};f[F]=f[F]||R,E[R]=ue(Object.create(null),[{axis:F},O,dt[F],dt[J]])}),g.data.datasets.forEach(R=>{const O=R.type||g.type,F=R.indexAxis||fl(O,l),dt=(Ao[O]||{}).scales||{};Object.keys(dt).forEach(Ft=>{const qt=function(g,l){let o=g;return"_index_"===g?o=l:"_value_"===g&&(o="x"===l?"y":"x"),o}(Ft,F),Ee=R[qt+"AxisID"]||f[qt]||qt;E[Ee]=E[Ee]||Object.create(null),ue(E[Ee],[{axis:qt},a[Ee],dt[Ft]])})}),Object.keys(E).forEach(R=>{const O=E[R];ue(O,[lr.scales[O.type],lr.scale])}),E}(g,l)}function Sl(g){return(g=g||{}).datasets=g.datasets||[],g.labels=g.labels||[],g}const Wu=new Map,Iu=new Set;function za(g,l){let o=Wu.get(g);return o||(o=l(),Wu.set(g,o),Iu.add(o)),o}const Sa=(g,l,o)=>{const a=Le(l,o);void 0!==a&&g.add(a)};class nl{constructor(l){var g;this._config=((g=(g=l)||{}).data=Sl(g.data),Cl(g),g),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(l){this._config.type=l}get data(){return this._config.data}set data(l){this._config.data=Sl(l)}get options(){return this._config.options}set options(l){this._config.options=l}get plugins(){return this._config.plugins}update(){const l=this._config;this.clearCache(),Cl(l)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(l){return za(l,()=>[[`datasets.${l}`,""]])}datasetAnimationScopeKeys(l,o){return za(`${l}.transition.${o}`,()=>[[`datasets.${l}.transitions.${o}`,`transitions.${o}`],[`datasets.${l}`,""]])}datasetElementScopeKeys(l,o){return za(`${l}-${o}`,()=>[[`datasets.${l}.elements.${o}`,`datasets.${l}`,`elements.${o}`,""]])}pluginScopeKeys(l){const o=l.id;return za(`${this.type}-plugin-${o}`,()=>[[`plugins.${o}`,...l.additionalOptionScopes||[]]])}_cachedScopes(l,o){const a=this._scopeCache;let c=a.get(l);return(!c||o)&&(c=new Map,a.set(l,c)),c}getOptionScopes(l,o,a){const{options:c,type:f}=this,E=this._cachedScopes(l,a),R=E.get(o);if(R)return R;const O=new Set;o.forEach(J=>{l&&(O.add(l),J.forEach(dt=>Sa(O,l,dt))),J.forEach(dt=>Sa(O,c,dt)),J.forEach(dt=>Sa(O,Ao[f]||{},dt)),J.forEach(dt=>Sa(O,lr,dt)),J.forEach(dt=>Sa(O,jo,dt))});const F=Array.from(O);return 0===F.length&&F.push(Object.create(null)),Iu.has(o)&&E.set(o,F),F}chartOptionScopes(){const{options:l,type:o}=this;return[l,Ao[o]||{},lr.datasets[o]||{},{type:o},lr,jo]}resolveNamedOptions(l,o,a,c=[""]){const f={$shared:!0},{resolver:E,subPrefixes:R}=Kl(this._resolverCache,l,c);let O=E;(function(g,l){const{isScriptable:o,isIndexable:a}=la(g);for(const c of l){const f=o(c),E=a(c),R=(E||f)&&g[c];if(f&&(Te(R)||pa(R))||E&&yt(R))return!0}return!1})(E,o)&&(f.$shared=!1,O=jr(E,a=Te(a)?a():a,this.createResolver(l,a,R)));for(const F of o)f[F]=O[F];return f}createResolver(l,o,a=[""],c){const{resolver:f}=Kl(this._resolverCache,l,a);return ot(o)?jr(f,o,void 0,c):f}}function Kl(g,l,o){let a=g.get(l);a||(a=new Map,g.set(l,a));const c=o.join();let f=a.get(c);return f||(f={resolver:aa(l,o),subPrefixes:o.filter(R=>!R.toLowerCase().includes("hover"))},a.set(c,f)),f}const pa=g=>ot(g)&&Object.getOwnPropertyNames(g).reduce((l,o)=>l||Te(g[o]),!1),lh=["top","bottom","left","right","chartArea"];function ss(g,l){return"top"===g||"bottom"===g||-1===lh.indexOf(g)&&"x"===l}function Dc(g,l){return function(o,a){return o[g]===a[g]?o[l]-a[l]:o[g]-a[g]}}function _t(g){const l=g.chart,o=l.options.animation;l.notifyPlugins("afterRender"),ht(o&&o.onComplete,[g],l)}function wt(g){const l=g.chart,o=l.options.animation;ht(o&&o.onProgress,[g],l)}function ie(g){return ts()&&"string"==typeof g?g=document.getElementById(g):g&&g.length&&(g=g[0]),g&&g.canvas&&(g=g.canvas),g}const we={},Ue=g=>{const l=ie(g);return Object.values(we).filter(o=>o.canvas===l).pop()};function di(g,l,o){const a=Object.keys(g);for(const c of a){const f=+c;if(f>=l){const E=g[c];delete g[c],(o>0||f>l)&&(g[f+o]=E)}}}class si{constructor(l,o){const a=this.config=new nl(o),c=ie(l),f=Ue(c);if(f)throw new Error("Canvas is already in use. Chart with ID '"+f.id+"' must be destroyed before the canvas can be reused.");const E=a.createResolver(a.chartOptionScopes(),this.getContext());var g;this.platform=new(a.platform||(g=c,!ts()||"undefined"!=typeof OffscreenCanvas&&g instanceof OffscreenCanvas?Ga:yc)),this.platform.updateConfig(a);const R=this.platform.acquireContext(c,E.aspectRatio),O=R&&R.canvas,F=O&&O.height,J=O&&O.width;this.id=Jt(),this.ctx=R,this.canvas=O,this.width=J,this.height=F,this._options=E,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new so,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=function(g,l){let o;return function(...a){return l?(clearTimeout(o),o=setTimeout(g,l,a)):g.apply(this,a),l}}(dt=>this.update(dt),E.resizeDelay||0),this._dataChanges=[],we[this.id]=this,R&&O?(cr.listen(this,"complete",_t),cr.listen(this,"progress",wt),this._initialize(),this.attached&&this.update()):console.error("Failed to create chart: can't acquire context from the given item")}get aspectRatio(){const{options:{aspectRatio:l,maintainAspectRatio:o},width:a,height:c,_aspectRatio:f}=this;return Ct(l)?o&&f?f:c?a/c:null:l}get data(){return this.config.data}set data(l){this.config.data=l}get options(){return this._options}set options(l){this.config.options=l}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():vi(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return Bo(this.canvas,this.ctx),this}stop(){return cr.stop(this),this}resize(l,o){cr.running(this)?this._resizeBeforeDraw={width:l,height:o}:this._resize(l,o)}_resize(l,o){const a=this.options,E=this.platform.getMaximumSize(this.canvas,l,o,a.maintainAspectRatio&&this.aspectRatio),R=a.devicePixelRatio||this.platform.getDevicePixelRatio(),O=this.width?"resize":"attach";this.width=E.width,this.height=E.height,this._aspectRatio=this.aspectRatio,vi(this,R,!0)&&(this.notifyPlugins("resize",{size:E}),ht(a.onResize,[this,E],this),this.attached&&this._doResize(O)&&this.render())}ensureScalesHaveIDs(){nt(this.options.scales||{},(a,c)=>{a.id=c})}buildOrUpdateScales(){const l=this.options,o=l.scales,a=this.scales,c=Object.keys(a).reduce((E,R)=>(E[R]=!1,E),{});let f=[];o&&(f=f.concat(Object.keys(o).map(E=>{const R=o[E],O=pc(E,R),F="r"===O,J="x"===O;return{options:R,dposition:F?"chartArea":J?"bottom":"left",dtype:F?"radialLinear":J?"category":"linear"}}))),nt(f,E=>{const R=E.options,O=R.id,F=pc(O,R),J=Ut(R.type,E.dtype);(void 0===R.position||ss(R.position,F)!==ss(E.dposition))&&(R.position=E.dposition),c[O]=!0;let dt=null;O in a&&a[O].type===J?dt=a[O]:(dt=new(Ca.getScale(J))({id:O,type:J,ctx:this.ctx,chart:this}),a[dt.id]=dt),dt.init(R,l)}),nt(c,(E,R)=>{E||delete a[R]}),nt(a,E=>{So.configure(this,E,E.options),So.addBox(this,E)})}_updateMetasets(){const l=this._metasets,o=this.data.datasets.length,a=l.length;if(l.sort((c,f)=>c.index-f.index),a>o){for(let c=o;c<a;++c)this._destroyDatasetMeta(c);l.splice(o,a-o)}this._sortedMetasets=l.slice(0).sort(Dc("order","index"))}_removeUnreferencedMetasets(){const{_metasets:l,data:{datasets:o}}=this;l.length>o.length&&delete this._stacks,l.forEach((a,c)=>{0===o.filter(f=>f===a._dataset).length&&this._destroyDatasetMeta(c)})}buildOrUpdateControllers(){const l=[],o=this.data.datasets;let a,c;for(this._removeUnreferencedMetasets(),a=0,c=o.length;a<c;a++){const f=o[a];let E=this.getDatasetMeta(a);const R=f.type||this.config.type;if(E.type&&E.type!==R&&(this._destroyDatasetMeta(a),E=this.getDatasetMeta(a)),E.type=R,E.indexAxis=f.indexAxis||fl(R,this.options),E.order=f.order||0,E.index=a,E.label=""+f.label,E.visible=this.isDatasetVisible(a),E.controller)E.controller.updateIndex(a),E.controller.linkScales();else{const O=Ca.getController(R),{datasetElementType:F,dataElementType:J}=lr.datasets[R];Object.assign(O.prototype,{dataElementType:Ca.getElement(J),datasetElementType:F&&Ca.getElement(F)}),E.controller=new O(this,a),l.push(E.controller)}}return this._updateMetasets(),l}_resetElements(){nt(this.data.datasets,(l,o)=>{this.getDatasetMeta(o).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(l){const o=this.config;o.update();const a=this._options=o.createResolver(o.chartOptionScopes(),this.getContext()),c=this._animationsDisabled=!a.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),!1===this.notifyPlugins("beforeUpdate",{mode:l,cancelable:!0}))return;const f=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let E=0;for(let F=0,J=this.data.datasets.length;F<J;F++){const{controller:dt}=this.getDatasetMeta(F),Ft=!c&&-1===f.indexOf(dt);dt.buildOrUpdateElements(Ft),E=Math.max(+dt.getMaxOverflow(),E)}E=this._minPadding=a.layout.autoPadding?E:0,this._updateLayout(E),c||nt(f,F=>{F.reset()}),this._updateDatasets(l),this.notifyPlugins("afterUpdate",{mode:l}),this._layers.sort(Dc("z","_idx"));const{_active:R,_lastEvent:O}=this;O?this._eventHandler(O,!0):R.length&&this._updateHoverStyles(R,R,!0),this.render()}_updateScales(){nt(this.scales,l=>{So.removeBox(this,l)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const l=this.options,o=new Set(Object.keys(this._listeners)),a=new Set(l.events);(!$t(o,a)||!!this._responsiveListeners!==l.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:l}=this,o=this._getUniformDataChanges()||[];for(const{method:a,start:c,count:f}of o)di(l,c,"_removeElements"===a?-f:f)}_getUniformDataChanges(){const l=this._dataChanges;if(!l||!l.length)return;this._dataChanges=[];const o=this.data.datasets.length,a=f=>new Set(l.filter(E=>E[0]===f).map((E,R)=>R+","+E.splice(1).join(","))),c=a(0);for(let f=1;f<o;f++)if(!$t(c,a(f)))return;return Array.from(c).map(f=>f.split(",")).map(f=>({method:f[1],start:+f[2],count:+f[3]}))}_updateLayout(l){if(!1===this.notifyPlugins("beforeLayout",{cancelable:!0}))return;So.update(this,this.width,this.height,l);const o=this.chartArea,a=o.width<=0||o.height<=0;this._layers=[],nt(this.boxes,c=>{a&&"chartArea"===c.position||(c.configure&&c.configure(),this._layers.push(...c._layers()))},this),this._layers.forEach((c,f)=>{c._idx=f}),this.notifyPlugins("afterLayout")}_updateDatasets(l){if(!1!==this.notifyPlugins("beforeDatasetsUpdate",{mode:l,cancelable:!0})){for(let o=0,a=this.data.datasets.length;o<a;++o)this.getDatasetMeta(o).controller.configure();for(let o=0,a=this.data.datasets.length;o<a;++o)this._updateDataset(o,Te(l)?l({datasetIndex:o}):l);this.notifyPlugins("afterDatasetsUpdate",{mode:l})}}_updateDataset(l,o){const a=this.getDatasetMeta(l),c={meta:a,index:l,mode:o,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetUpdate",c)&&(a.controller._update(o),c.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",c))}render(){!1!==this.notifyPlugins("beforeRender",{cancelable:!0})&&(cr.has(this)?this.attached&&!cr.running(this)&&cr.start(this):(this.draw(),_t({chart:this})))}draw(){let l;if(this._resizeBeforeDraw){const{width:a,height:c}=this._resizeBeforeDraw;this._resize(a,c),this._resizeBeforeDraw=null}if(this.clear(),this.width<=0||this.height<=0||!1===this.notifyPlugins("beforeDraw",{cancelable:!0}))return;const o=this._layers;for(l=0;l<o.length&&o[l].z<=0;++l)o[l].draw(this.chartArea);for(this._drawDatasets();l<o.length;++l)o[l].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(l){const o=this._sortedMetasets,a=[];let c,f;for(c=0,f=o.length;c<f;++c){const E=o[c];(!l||E.visible)&&a.push(E)}return a}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(!1===this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0}))return;const l=this.getSortedVisibleDatasetMetas();for(let o=l.length-1;o>=0;--o)this._drawDataset(l[o]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(l){const o=this.ctx,a=l._clip,c=!a.disabled,f=this.chartArea,E={meta:l,index:l.index,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetDraw",E)&&(c&&Ho(o,{left:!1===a.left?0:f.left-a.left,right:!1===a.right?this.width:f.right+a.right,top:!1===a.top?0:f.top-a.top,bottom:!1===a.bottom?this.height:f.bottom+a.bottom}),l.controller.draw(),c&&Ya(o),E.cancelable=!1,this.notifyPlugins("afterDatasetDraw",E))}getElementsAtEventForMode(l,o,a,c){const f=Cu.modes[o];return"function"==typeof f?f(this,l,a,c):[]}getDatasetMeta(l){const o=this.data.datasets[l],a=this._metasets;let c=a.filter(f=>f&&f._dataset===o).pop();return c||(c={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:o&&o.order||0,index:l,_dataset:o,_parsed:[],_sorted:!1},a.push(c)),c}getContext(){return this.$context||(this.$context=Xo(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(l){const o=this.data.datasets[l];if(!o)return!1;const a=this.getDatasetMeta(l);return"boolean"==typeof a.hidden?!a.hidden:!o.hidden}setDatasetVisibility(l,o){this.getDatasetMeta(l).hidden=!o}toggleDataVisibility(l){this._hiddenIndices[l]=!this._hiddenIndices[l]}getDataVisibility(l){return!this._hiddenIndices[l]}_updateVisibility(l,o,a){const c=a?"show":"hide",f=this.getDatasetMeta(l),E=f.controller._resolveAnimations(void 0,c);Bt(o)?(f.data[o].hidden=!a,this.update()):(this.setDatasetVisibility(l,a),E.update(f,{visible:a}),this.update(R=>R.datasetIndex===l?c:void 0))}hide(l,o){this._updateVisibility(l,o,!1)}show(l,o){this._updateVisibility(l,o,!0)}_destroyDatasetMeta(l){const o=this._metasets[l];o&&o.controller&&o.controller._destroy(),delete this._metasets[l]}_stop(){let l,o;for(this.stop(),cr.remove(this),l=0,o=this.data.datasets.length;l<o;++l)this._destroyDatasetMeta(l)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:l,ctx:o}=this;this._stop(),this.config.clearCache(),l&&(this.unbindEvents(),Bo(l,o),this.platform.releaseContext(o),this.canvas=null,this.ctx=null),this.notifyPlugins("destroy"),delete we[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...l){return this.canvas.toDataURL(...l)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const l=this._listeners,o=this.platform,a=(f,E)=>{o.addEventListener(this,f,E),l[f]=E},c=(f,E,R)=>{f.offsetX=E,f.offsetY=R,this._eventHandler(f)};nt(this.options.events,f=>a(f,c))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const l=this._responsiveListeners,o=this.platform,a=(O,F)=>{o.addEventListener(this,O,F),l[O]=F},c=(O,F)=>{l[O]&&(o.removeEventListener(this,O,F),delete l[O])},f=(O,F)=>{this.canvas&&this.resize(O,F)};let E;const R=()=>{c("attach",R),this.attached=!0,this.resize(),a("resize",f),a("detach",E)};E=()=>{this.attached=!1,c("resize",f),this._stop(),this._resize(0,0),a("attach",R)},o.isAttached(this.canvas)?R():E()}unbindEvents(){nt(this._listeners,(l,o)=>{this.platform.removeEventListener(this,o,l)}),this._listeners={},nt(this._responsiveListeners,(l,o)=>{this.platform.removeEventListener(this,o,l)}),this._responsiveListeners=void 0}updateHoverStyle(l,o,a){const c=a?"set":"remove";let f,E,R,O;for("dataset"===o&&(f=this.getDatasetMeta(l[0].datasetIndex),f.controller["_"+c+"DatasetHoverStyle"]()),R=0,O=l.length;R<O;++R){E=l[R];const F=E&&this.getDatasetMeta(E.datasetIndex).controller;F&&F[c+"HoverStyle"](E.element,E.datasetIndex,E.index)}}getActiveElements(){return this._active||[]}setActiveElements(l){const o=this._active||[],a=l.map(({datasetIndex:f,index:E})=>{const R=this.getDatasetMeta(f);if(!R)throw new Error("No dataset found at index "+f);return{datasetIndex:f,element:R.data[E],index:E}});!he(a,o)&&(this._active=a,this._lastEvent=null,this._updateHoverStyles(a,o))}notifyPlugins(l,o,a){return this._plugins.notify(this,l,o,a)}_updateHoverStyles(l,o,a){const c=this.options.hover,f=(O,F)=>O.filter(J=>!F.some(dt=>J.datasetIndex===dt.datasetIndex&&J.index===dt.index)),E=f(o,l),R=a?l:f(l,o);E.length&&this.updateHoverStyle(E,c.mode,!1),R.length&&c.mode&&this.updateHoverStyle(R,c.mode,!0)}_eventHandler(l,o){const a={event:l,replay:o,cancelable:!0,inChartArea:ns(l,this.chartArea,this._minPadding)},c=E=>(E.options.events||this.options.events).includes(l.native.type);if(!1===this.notifyPlugins("beforeEvent",a,c))return;const f=this._handleEvent(l,o,a.inChartArea);return a.cancelable=!1,this.notifyPlugins("afterEvent",a,c),(f||a.changed)&&this.render(),this}_handleEvent(l,o,a){const{_active:c=[],options:f}=this,R=this._getActiveElements(l,c,a,o),O="mouseup"===(g=l).type||"click"===g.type||"contextmenu"===g.type,F=function(g,l,o,a){return o&&"mouseout"!==g.type?a?l:g:null}(l,this._lastEvent,a,O);var g;a&&(this._lastEvent=null,ht(f.onHover,[l,R,this],this),O&&ht(f.onClick,[l,R,this],this));const J=!he(R,c);return(J||o)&&(this._active=R,this._updateHoverStyles(R,c,o)),this._lastEvent=F,J}_getActiveElements(l,o,a,c){if("mouseout"===l.type)return[];if(!a)return o;const f=this.options.hover;return this.getElementsAtEventForMode(l,f.mode,f,c)}}const Li=()=>nt(si.instances,g=>g._plugins.invalidate()),xi=!0;function zi(g,l,o){const{startAngle:a,pixelMargin:c,x:f,y:E,outerRadius:R,innerRadius:O}=l;let F=c/R;g.beginPath(),g.arc(f,E,R,a-F,o+F),O>c?(F=c/O,g.arc(f,E,O,o+F,a-F,!0)):g.arc(f,E,c,o+te,a-te),g.closePath(),g.clip()}function qn(g,l,o,a){return{x:o+g*Math.cos(l),y:a+g*Math.sin(l)}}function $o(g,l,o,a,c){const{x:f,y:E,startAngle:R,pixelMargin:O,innerRadius:F}=l,J=Math.max(l.outerRadius+a+o-O,0),dt=F>0?F+a+o+O:0;let Ft=0;const qt=c-R;if(a){const vr=((F>0?F-a:0)+(J>0?J-a:0))/2;Ft=(qt-(0!==vr?qt*vr/(vr+a):qt))/2}const De=(qt-Math.max(.001,qt*J-o/At)/J)/2,Ge=R+De+Ft,We=c-De-Ft,{outerStart:Si,outerEnd:ln,innerStart:Gi,innerEnd:Xi}=function(g,l,o,a){const c=function(g){return ma(g,["outerStart","outerEnd","innerStart","innerEnd"])}(g.options.borderRadius),f=(o-l)/2,E=Math.min(f,a*l/2),R=O=>{const F=(o-Math.min(f,O))*a/2;return je(O,0,Math.min(f,F))};return{outerStart:R(c.outerStart),outerEnd:R(c.outerEnd),innerStart:je(c.innerStart,0,E),innerEnd:je(c.innerEnd,0,E)}}(l,dt,J,We-Ge),gn=J-Si,_n=J-ln,wn=Ge+Si/gn,Pn=We-ln/_n,bn=dt+Gi,qi=dt+Xi,Bn=Ge+Gi/bn,dr=We-Xi/qi;if(g.beginPath(),g.arc(f,E,J,wn,Pn),ln>0){const Rn=qn(_n,Pn,f,E);g.arc(Rn.x,Rn.y,ln,Pn,We+te)}const Ei=qn(qi,We,f,E);if(g.lineTo(Ei.x,Ei.y),Xi>0){const Rn=qn(qi,dr,f,E);g.arc(Rn.x,Rn.y,Xi,We+te,dr+Math.PI)}if(g.arc(f,E,dt,We-Xi/dt,Ge+Gi/dt,!0),Gi>0){const Rn=qn(bn,Bn,f,E);g.arc(Rn.x,Rn.y,Gi,Bn+Math.PI,Ge-te)}const Hi=qn(gn,Ge,f,E);if(g.lineTo(Hi.x,Hi.y),Si>0){const Rn=qn(gn,wn,f,E);g.arc(Rn.x,Rn.y,Si,Ge-te,wn)}g.closePath()}Object.defineProperties(si,{defaults:{enumerable:xi,value:lr},instances:{enumerable:xi,value:we},overrides:{enumerable:xi,value:Ao},registry:{enumerable:xi,value:Ca},version:{enumerable:xi,value:"3.7.0"},getChart:{enumerable:xi,value:Ue},register:{enumerable:xi,value:(...g)=>{Ca.add(...g),Li()}},unregister:{enumerable:xi,value:(...g)=>{Ca.remove(...g),Li()}}});class Go extends na{constructor(l){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,l&&Object.assign(this,l)}inRange(l,o,a){const c=this.getProps(["x","y"],a),{angle:f,distance:E}=mi(c,{x:l,y:o}),{startAngle:R,endAngle:O,innerRadius:F,outerRadius:J,circumference:dt}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],a),Ft=this.options.spacing/2,Ee=Ut(dt,O-R)>=pe||Ci(f,R,O),De=_i(E,F+Ft,J+Ft);return Ee&&De}getCenterPoint(l){const{x:o,y:a,startAngle:c,endAngle:f,innerRadius:E,outerRadius:R}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius","circumference"],l),{offset:O,spacing:F}=this.options,J=(c+f)/2,dt=(E+R+F+O)/2;return{x:o+Math.cos(J)*dt,y:a+Math.sin(J)*dt}}tooltipPosition(l){return this.getCenterPoint(l)}draw(l){const{options:o,circumference:a}=this,c=(o.offset||0)/2,f=(o.spacing||0)/2;if(this.pixelMargin="inner"===o.borderAlign?.33:0,this.fullCircles=a>pe?Math.floor(a/pe):0,0===a||this.innerRadius<0||this.outerRadius<0)return;l.save();let E=0;if(c){E=c/2;const O=(this.startAngle+this.endAngle)/2;l.translate(Math.cos(O)*E,Math.sin(O)*E),this.circumference>=At&&(E=c)}l.fillStyle=o.backgroundColor,l.strokeStyle=o.borderColor;const R=function(g,l,o,a){const{fullCircles:c,startAngle:f,circumference:E}=l;let R=l.endAngle;if(c){$o(g,l,o,a,f+pe);for(let O=0;O<c;++O)g.fill();isNaN(E)||(R=f+E%pe,E%pe==0&&(R+=pe))}return $o(g,l,o,a,R),g.fill(),R}(l,this,E,f);(function(g,l,o,a,c){const{options:f}=l,{borderWidth:E,borderJoinStyle:R}=f,O="inner"===f.borderAlign;!E||(O?(g.lineWidth=2*E,g.lineJoin=R||"round"):(g.lineWidth=E,g.lineJoin=R||"bevel"),l.fullCircles&&function(g,l,o){const{x:a,y:c,startAngle:f,pixelMargin:E,fullCircles:R}=l,O=Math.max(l.outerRadius-E,0),F=l.innerRadius+E;let J;for(o&&zi(g,l,f+pe),g.beginPath(),g.arc(a,c,F,f+pe,f,!0),J=0;J<R;++J)g.stroke();for(g.beginPath(),g.arc(a,c,O,f,f+pe),J=0;J<R;++J)g.stroke()}(g,l,O),O&&zi(g,l,c),$o(g,l,o,a,c),g.stroke())})(l,this,E,f,R),l.restore()}}function po(g,l,o=l){g.lineCap=Ut(o.borderCapStyle,l.borderCapStyle),g.setLineDash(Ut(o.borderDash,l.borderDash)),g.lineDashOffset=Ut(o.borderDashOffset,l.borderDashOffset),g.lineJoin=Ut(o.borderJoinStyle,l.borderJoinStyle),g.lineWidth=Ut(o.borderWidth,l.borderWidth),g.strokeStyle=Ut(o.borderColor,l.borderColor)}function oa(g,l,o){g.lineTo(o.x,o.y)}function ds(g,l,o={}){const a=g.length,{start:c=0,end:f=a-1}=o,{start:E,end:R}=l,O=Math.max(c,E),F=Math.min(f,R);return{count:a,start:O,loop:l.loop,ilen:F<O&&!(c<E&&f<E||c>R&&f>R)?a+F-O:F-O}}function gl(g,l,o,a){const{points:c,options:f}=l,{count:E,start:R,loop:O,ilen:F}=ds(c,o,a),J=function(g){return g.stepped?Xa:g.tension||"monotone"===g.cubicInterpolationMode?Ka:oa}(f);let qt,Ee,De,{move:dt=!0,reverse:Ft}=a||{};for(qt=0;qt<=F;++qt)Ee=c[(R+(Ft?F-qt:qt))%E],!Ee.skip&&(dt?(g.moveTo(Ee.x,Ee.y),dt=!1):J(g,De,Ee,Ft,f.stepped),De=Ee);return O&&(Ee=c[(R+(Ft?F:0))%E],J(g,De,Ee,Ft,f.stepped)),!!O}function ou(g,l,o,a){const c=l.points,{count:f,start:E,ilen:R}=ds(c,o,a),{move:O=!0,reverse:F}=a||{};let Ft,qt,Ee,De,Ge,We,J=0,dt=0;const Si=Gi=>(E+(F?R-Gi:Gi))%f,ln=()=>{De!==Ge&&(g.lineTo(J,Ge),g.lineTo(J,De),g.lineTo(J,We))};for(O&&(qt=c[Si(0)],g.moveTo(qt.x,qt.y)),Ft=0;Ft<=R;++Ft){if(qt=c[Si(Ft)],qt.skip)continue;const Gi=qt.x,Xi=qt.y,gn=0|Gi;gn===Ee?(Xi<De?De=Xi:Xi>Ge&&(Ge=Xi),J=(dt*J+Gi)/++dt):(ln(),g.lineTo(Gi,Xi),Ee=gn,dt=0,De=Ge=Xi),We=Xi}ln()}function ch(g){const l=g.options;return g._decimated||g._loop||l.tension||"monotone"===l.cubicInterpolationMode||l.stepped||l.borderDash&&l.borderDash.length?gl:ou}Go.id="arc",Go.defaults={borderAlign:"center",borderColor:"#fff",borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0},Go.defaultRoutes={backgroundColor:"backgroundColor"};const Ic="function"==typeof Path2D;let Ou=(()=>{class g extends na{constructor(o){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,o&&Object.assign(this,o)}updateControlPoints(o,a){const c=this.options;!c.tension&&"monotone"!==c.cubicInterpolationMode||c.stepped||this._pointsUpdated||(Fa(this._points,c,o,c.spanGaps?this._loop:this._fullLoop,a),this._pointsUpdated=!0)}set points(o){this._points=o,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=function(g,l){const o=g.points,a=g.options.spanGaps,c=o.length;if(!c)return[];const f=!!g._loop,{start:E,end:R}=function(g,l,o,a){let c=0,f=l-1;if(o&&!a)for(;c<l&&!g[c].skip;)c++;for(;c<l&&g[c].skip;)c++;for(c%=l,o&&(f+=c);f>c&&g[f%l].skip;)f--;return f%=l,{start:c,end:f}}(o,c,f,a);return function(g,l,o,a){return a&&a.setContext&&o?function(g,l,o,a){const c=g._chart.getContext(),f=Dn(g.options),{_datasetIndex:E,options:{spanGaps:R}}=g,O=o.length,F=[];let J=f,dt=l[0].start,Ft=dt;function qt(Ee,De,Ge,We){const Si=R?-1:1;if(Ee!==De){for(Ee+=O;o[Ee%O].skip;)Ee-=Si;for(;o[De%O].skip;)De+=Si;Ee%O!=De%O&&(F.push({start:Ee%O,end:De%O,loop:Ge,style:We}),J=We,dt=De%O)}}for(const Ee of l){dt=R?dt:Ee.start;let Ge,De=o[dt%O];for(Ft=dt+1;Ft<=Ee.end;Ft++){const We=o[Ft%O];Ge=Dn(a.setContext(Xo(c,{type:"segment",p0:De,p1:We,p0DataIndex:(Ft-1)%O,p1DataIndex:Ft%O,datasetIndex:E}))),On(Ge,J)&&qt(dt,Ft-1,Ee.loop,J),De=We,J=Ge}dt<Ft-1&&qt(dt,Ft-1,Ee.loop,J)}return F}(g,l,o,a):l}(g,!0===a?[{start:E,end:R,loop:f}]:function(g,l,o,a){const c=g.length,f=[];let O,E=l,R=g[l];for(O=l+1;O<=o;++O){const F=g[O%c];F.skip||F.stop?R.skip||(f.push({start:l%c,end:(O-1)%c,loop:a=!1}),l=E=F.stop?O:null):(E=O,R.skip&&(l=O)),R=F}return null!==E&&f.push({start:l%c,end:E%c,loop:a}),f}(o,E,R<E?R+c:R,!!g._fullLoop&&0===E&&R===c-1),o,l)}(this,this.options.segment))}first(){const o=this.segments;return o.length&&this.points[o[0].start]}last(){const o=this.segments,c=o.length;return c&&this.points[o[c-1].end]}interpolate(o,a){const c=this.options,f=o[a],E=this.points,R=Ms(this,{property:a,start:f,end:f});if(!R.length)return;const O=[],F=function(g){return g.stepped?Zn:g.tension||"monotone"===g.cubicInterpolationMode?Qn:En}(c);let J,dt;for(J=0,dt=R.length;J<dt;++J){const{start:Ft,end:qt}=R[J],Ee=E[Ft],De=E[qt];if(Ee===De){O.push(Ee);continue}const We=F(Ee,De,Math.abs((f-Ee[a])/(De[a]-Ee[a])),c.stepped);We[a]=o[a],O.push(We)}return 1===O.length?O[0]:O}pathSegment(o,a,c){return ch(this)(o,this,a,c)}path(o,a,c){const f=this.segments,E=ch(this);let R=this._loop;a=a||0,c=c||this.points.length-a;for(const O of f)R&=E(o,this,O,{start:a,end:a+c-1});return!!R}draw(o,a,c,f){(this.points||[]).length&&(this.options||{}).borderWidth&&(o.save(),function(g,l,o,a){Ic&&!l.options.segment?function(g,l,o,a){let c=l._path;c||(c=l._path=new Path2D,l.path(c,o,a)&&c.closePath()),po(g,l.options),g.stroke(c)}(g,l,o,a):function(g,l,o,a){const{segments:c,options:f}=l,E=ch(l);for(const R of c)po(g,f,R.style),g.beginPath(),E(g,l,R,{start:o,end:o+a-1})&&g.closePath(),g.stroke()}(g,l,o,a)}(o,this,c,f),o.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}return g.id="line",g.defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0},g.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"},g.descriptors={_scriptable:!0,_indexable:l=>"borderDash"!==l&&"fill"!==l},g})();function ju(g,l,o,a){const c=g.options,{[o]:f}=g.getProps([o],a);return Math.abs(l-f)<c.radius+c.hitRadius}let xu=(()=>{class g extends na{constructor(o){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,o&&Object.assign(this,o)}inRange(o,a,c){const f=this.options,{x:E,y:R}=this.getProps(["x","y"],c);return Math.pow(o-E,2)+Math.pow(a-R,2)<Math.pow(f.hitRadius+f.radius,2)}inXRange(o,a){return ju(this,o,"x",a)}inYRange(o,a){return ju(this,o,"y",a)}getCenterPoint(o){const{x:a,y:c}=this.getProps(["x","y"],o);return{x:a,y:c}}size(o){let a=(o=o||this.options||{}).radius||0;return a=Math.max(a,a&&o.hoverRadius||0),2*(a+(a&&o.borderWidth||0))}draw(o,a){const c=this.options;this.skip||c.radius<.1||!ns(this,a,this.size(c)/2)||(o.strokeStyle=c.borderColor,o.lineWidth=c.borderWidth,o.fillStyle=c.backgroundColor,Ro(o,c,this.x,this.y))}getRange(){const o=this.options||{};return o.radius+o.hitRadius}}return g.id="point",g.defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0},g.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"},g})();function Yu(g,l){const{x:o,y:a,base:c,width:f,height:E}=g.getProps(["x","y","base","width","height"],l);let R,O,F,J,dt;return g.horizontal?(dt=E/2,R=Math.min(o,c),O=Math.max(o,c),F=a-dt,J=a+dt):(dt=f/2,R=o-dt,O=o+dt,F=Math.min(a,c),J=Math.max(a,c)),{left:R,top:F,right:O,bottom:J}}function fc(g,l,o,a){return g?0:je(l,o,a)}function ku(g,l,o,a){const c=null===l,f=null===o,R=g&&!(c&&f)&&Yu(g,a);return R&&(c||_i(l,R.left,R.right))&&(f||_i(o,R.top,R.bottom))}function Ch(g,l){g.rect(l.x,l.y,l.w,l.h)}function Zo(g,l,o={}){const a=g.x!==o.x?-l:0,c=g.y!==o.y?-l:0;return{x:g.x+a,y:g.y+c,w:g.w+((g.x+g.w!==o.x+o.w?l:0)-a),h:g.h+((g.y+g.h!==o.y+o.h?l:0)-c),radius:g.radius}}class lu extends na{constructor(l){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,l&&Object.assign(this,l)}draw(l){const{inflateAmount:o,options:{borderColor:a,backgroundColor:c}}=this,{inner:f,outer:E}=function(g){const l=Yu(g),o=l.right-l.left,a=l.bottom-l.top,c=function(g,l,o){const c=g.borderSkipped,f=Qs(g.options.borderWidth);return{t:fc(c.top,f.top,0,o),r:fc(c.right,f.right,0,l),b:fc(c.bottom,f.bottom,0,o),l:fc(c.left,f.left,0,l)}}(g,o/2,a/2),f=function(g,l,o){const{enableBorderRadius:a}=g.getProps(["enableBorderRadius"]),c=g.options.borderRadius,f=Oo(c),E=Math.min(l,o),R=g.borderSkipped,O=a||ot(c);return{topLeft:fc(!O||R.top||R.left,f.topLeft,0,E),topRight:fc(!O||R.top||R.right,f.topRight,0,E),bottomLeft:fc(!O||R.bottom||R.left,f.bottomLeft,0,E),bottomRight:fc(!O||R.bottom||R.right,f.bottomRight,0,E)}}(g,o/2,a/2);return{outer:{x:l.left,y:l.top,w:o,h:a,radius:f},inner:{x:l.left+c.l,y:l.top+c.t,w:o-c.l-c.r,h:a-c.t-c.b,radius:{topLeft:Math.max(0,f.topLeft-Math.max(c.t,c.l)),topRight:Math.max(0,f.topRight-Math.max(c.t,c.r)),bottomLeft:Math.max(0,f.bottomLeft-Math.max(c.b,c.l)),bottomRight:Math.max(0,f.bottomRight-Math.max(c.b,c.r))}}}}(this),R=(g=E.radius).topLeft||g.topRight||g.bottomLeft||g.bottomRight?Fs:Ch;var g;l.save(),(E.w!==f.w||E.h!==f.h)&&(l.beginPath(),R(l,Zo(E,o,f)),l.clip(),R(l,Zo(f,-o,E)),l.fillStyle=a,l.fill("evenodd")),l.beginPath(),R(l,Zo(f,o)),l.fillStyle=c,l.fill(),l.restore()}inRange(l,o,a){return ku(this,l,o,a)}inXRange(l,o){return ku(this,l,null,o)}inYRange(l,o){return ku(this,null,l,o)}getCenterPoint(l){const{x:o,y:a,base:c,horizontal:f}=this.getProps(["x","y","base","horizontal"],l);return{x:f?(o+c)/2:o,y:f?a:(a+c)/2}}getRange(l){return"x"===l?this.width/2:this.height/2}}lu.id="bar",lu.defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0},lu.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};var Lu=Object.freeze({__proto__:null,ArcElement:Go,LineElement:Ou,PointElement:xu,BarElement:lu});function Ku(g){if(g._decimated){const l=g._data;delete g._decimated,delete g._data,Object.defineProperty(g,"data",{value:l})}}function dh(g){g.data.datasets.forEach(l=>{Ku(l)})}var Rh={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(g,l,o)=>{if(!o.enabled)return void dh(g);const a=g.width;g.data.datasets.forEach((c,f)=>{const{_data:E,indexAxis:R}=c,O=g.getDatasetMeta(f),F=E||c.data;if("y"===yo([R,g.options.indexAxis])||"line"!==O.type)return;const J=g.scales[O.xAxisID];if("linear"!==J.type&&"time"!==J.type||g.options.parsing)return;let Ee,{start:dt,count:Ft}=function(g,l){const o=l.length;let c,a=0;const{iScale:f}=g,{min:E,max:R,minDefined:O,maxDefined:F}=f.getUserBounds();return O&&(a=je(zo(l,f.axis,E).lo,0,o-1)),c=F?je(zo(l,f.axis,R).hi+1,a,o)-a:o-a,{start:a,count:c}}(O,F);if(Ft<=(o.threshold||4*a))Ku(c);else{switch(Ct(E)&&(c._data=F,delete c.data,Object.defineProperty(c,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(De){this._data=De}})),o.algorithm){case"lttb":Ee=function(g,l,o,a,c){const f=c.samples||a;if(f>=o)return g.slice(l,l+o);const E=[],R=(o-2)/(f-2);let O=0;const F=l+o-1;let dt,Ft,qt,Ee,De,J=l;for(E[O++]=g[J],dt=0;dt<f-2;dt++){let Si,Ge=0,We=0;const ln=Math.floor((dt+1)*R)+1+l,Gi=Math.min(Math.floor((dt+2)*R)+1,o)+l,Xi=Gi-ln;for(Si=ln;Si<Gi;Si++)Ge+=g[Si].x,We+=g[Si].y;Ge/=Xi,We/=Xi;const gn=Math.floor(dt*R)+1+l,_n=Math.min(Math.floor((dt+1)*R)+1,o)+l,{x:wn,y:Pn}=g[J];for(qt=Ee=-1,Si=gn;Si<_n;Si++)Ee=.5*Math.abs((wn-Ge)*(g[Si].y-Pn)-(wn-g[Si].x)*(We-Pn)),Ee>qt&&(qt=Ee,Ft=g[Si],De=Si);E[O++]=Ft,J=De}return E[O++]=g[F],E}(F,dt,Ft,a,o);break;case"min-max":Ee=function(g,l,o,a){let E,R,O,F,J,dt,Ft,qt,Ee,De,c=0,f=0;const Ge=[],Si=g[l].x,Gi=g[l+o-1].x-Si;for(E=l;E<l+o;++E){R=g[E],O=(R.x-Si)/Gi*a,F=R.y;const Xi=0|O;if(Xi===J)F<Ee?(Ee=F,dt=E):F>De&&(De=F,Ft=E),c=(f*c+R.x)/++f;else{const gn=E-1;if(!Ct(dt)&&!Ct(Ft)){const _n=Math.min(dt,Ft),wn=Math.max(dt,Ft);_n!==qt&&_n!==gn&&Ge.push(Bm(Fm({},g[_n]),{x:c})),wn!==qt&&wn!==gn&&Ge.push(Bm(Fm({},g[wn]),{x:c}))}E>0&&gn!==qt&&Ge.push(g[gn]),Ge.push(R),J=Xi,f=0,Ee=De=F,dt=Ft=qt=E}}return Ge}(F,dt,Ft,a);break;default:throw new Error(`Unsupported decimation algorithm '${o.algorithm}'`)}c._decimated=Ee}})},destroy(g){dh(g)}};function Dh(g,l,o){const a=function(g){const l=g.options,o=l.fill;let a=Ut(o&&o.target,o);return void 0===a&&(a=!!l.backgroundColor),!1!==a&&null!==a&&(!0===a?"origin":a)}(g);if(ot(a))return!isNaN(a.value)&&a;let c=parseFloat(a);return mt(c)&&Math.floor(c)===c?(("-"===a[0]||"+"===a[0])&&(c=l+c),!(c===l||c<0||c>=o)&&c):["origin","start","end","stack","shape"].indexOf(a)>=0&&a}class fa{constructor(l){this.x=l.x,this.y=l.y,this.radius=l.radius}pathSegment(l,o,a){const{x:c,y:f,radius:E}=this;return l.arc(c,f,E,(o=o||{start:0,end:pe}).end,o.start,!0),!a.bounds}interpolate(l){const{x:o,y:a,radius:c}=this,f=l.angle;return{x:o+Math.cos(f)*c,y:a+Math.sin(f)*c,angle:f}}}function $u(g,l,o){for(;l>g;l--){const a=o[l];if(!isNaN(a.x)&&!isNaN(a.y))break}return l}function uu(g,l,o){const a=[];for(let c=0;c<o.length;c++){const f=o[c],{first:E,last:R,point:O}=zh(f,l,"x");if(!(!O||E&&R))if(E)a.unshift(O);else if(g.push(O),!R)break}g.push(...a)}function zh(g,l,o){const a=g.interpolate(l,o);if(!a)return{};const c=a[o],f=g.segments,E=g.points;let R=!1,O=!1;for(let F=0;F<f.length;F++){const J=f[F],dt=E[J.start][o],Ft=E[J.end][o];if(_i(c,dt,Ft)){R=c===dt,O=c===Ft;break}}return{first:R,last:O,point:a}}function hu(g){const{chart:l,fill:o,line:a}=g;if(mt(o))return function(g,l){const o=g.getDatasetMeta(l);return o&&g.isDatasetVisible(l)?o.dataset:null}(l,o);if("stack"===o)return function(g){const{scale:l,index:o,line:a}=g,c=[],f=a.segments,E=a.points,R=function(g,l){const o=[],a=g.getMatchingVisibleMetas("line");for(let c=0;c<a.length;c++){const f=a[c];if(f.index===l)break;f.hidden||o.unshift(f.dataset)}return o}(l,o);R.push(ph({x:null,y:l.bottom},a));for(let O=0;O<f.length;O++){const F=f[O];for(let J=F.start;J<=F.end;J++)uu(c,E[J],R)}return new Ou({points:c,options:{}})}(g);if("shape"===o)return!0;const c=function(g){return(g.scale||{}).getPointPositionForValue?function(g){const{scale:l,fill:o}=g,a=l.options,c=l.getLabels().length,f=[],E=a.reverse?l.max:l.min;let O,F,J;if(J="start"===o?E:"end"===o?a.reverse?l.min:l.max:ot(o)?o.value:l.getBaseValue(),a.grid.circular)return F=l.getPointPositionForValue(0,E),new fa({x:F.x,y:F.y,radius:l.getDistanceFromCenterForValue(J)});for(O=0;O<c;++O)f.push(l.getPointPositionForValue(O,J));return f}(g):function(g){const{scale:l={},fill:o}=g;let c,a=null;return"start"===o?a=l.bottom:"end"===o?a=l.top:ot(o)?a=l.getPixelForValue(o.value):l.getBasePixel&&(a=l.getBasePixel()),mt(a)?(c=l.isHorizontal(),{x:c?a:null,y:c?null:a}):null}(g)}(g);return c instanceof fa?c:ph(c,a)}function ph(g,l){let o=[],a=!1;return yt(g)?(a=!0,o=g):o=function(g,l){const{x:o=null,y:a=null}=g||{},c=l.points,f=[];return l.segments.forEach(({start:E,end:R})=>{R=$u(E,R,c);const O=c[E],F=c[R];null!==a?(f.push({x:O.x,y:a}),f.push({x:F.x,y:a})):null!==o&&(f.push({x:o,y:O.y}),f.push({x:o,y:F.y}))}),f}(g,l),o.length?new Ou({points:o,options:{tension:0},_loop:a,_fullLoop:a}):null}function Gr(g,l,o){let c=g[l].fill;const f=[l];let E;if(!o)return c;for(;!1!==c&&-1===f.indexOf(c);){if(!mt(c))return c;if(E=g[c],!E)return!1;if(E.visible)return c;f.push(c),c=E.fill}return!1}function fh(g,l,o){g.beginPath(),l.path(g),g.lineTo(l.last().x,o),g.lineTo(l.first().x,o),g.closePath(),g.clip()}function Jc(g,l,o,a){if(a)return;let c=l[g],f=o[g];return"angle"===g&&(c=Oe(c),f=Oe(f)),{property:g,start:c,end:f}}function Ac(g,l,o,a){return g&&l?a(g[o],l[o]):g?g[o]:l?l[o]:0}function du(g,l,o){const{top:a,bottom:c}=l.chart.chartArea,{property:f,start:E,end:R}=o||{};"x"===f&&(g.beginPath(),g.rect(E,a,R-E,c-a),g.clip())}function $c(g,l,o,a){const c=l.interpolate(o,a);c&&g.lineTo(c.x,c.y)}function Pu(g,l){const{line:o,target:a,property:c,color:f,scale:E}=l,R=function(g,l,o){const a=g.segments,c=g.points,f=l.points,E=[];for(const R of a){let{start:O,end:F}=R;F=$u(O,F,c);const J=Jc(o,c[O],c[F],R.loop);if(!l.segments){E.push({source:R,target:J,start:c[O],end:c[F]});continue}const dt=Ms(l,J);for(const Ft of dt){const qt=Jc(o,f[Ft.start],f[Ft.end],Ft.loop),Ee=rs(R,c,qt);for(const De of Ee)E.push({source:De,target:Ft,start:{[o]:Ac(J,qt,"start",Math.max)},end:{[o]:Ac(J,qt,"end",Math.min)}})}}return E}(o,a,c);for(const{source:O,target:F,start:J,end:dt}of R){const{style:{backgroundColor:Ft=f}={}}=O,qt=!0!==a;g.save(),g.fillStyle=Ft,du(g,E,qt&&Jc(c,J,dt)),g.beginPath();const Ee=!!o.pathSegment(g,O);let De;if(qt){Ee?g.closePath():$c(g,a,dt,c);const Ge=!!a.pathSegment(g,F,{move:Ee,reverse:!0});De=Ee&&Ge,De||$c(g,a,J,c)}g.closePath(),g.fill(De?"evenodd":"nonzero"),g.restore()}}function Dl(g,l,o){const a=hu(l),{line:c,scale:f,axis:E}=l,R=c.options,O=R.fill,F=R.backgroundColor,{above:J=F,below:dt=F}=O||{};a&&c.points.length&&(Ho(g,o),function(g,l){const{line:o,target:a,above:c,below:f,area:E,scale:R}=l,O=o._loop?"angle":l.axis;g.save(),"x"===O&&f!==c&&(fh(g,a,E.top),Pu(g,{line:o,target:a,color:c,scale:R,property:O}),g.restore(),g.save(),fh(g,a,E.bottom)),Pu(g,{line:o,target:a,color:f,scale:R,property:O}),g.restore()}(g,{line:c,target:a,above:J,below:dt,area:o,scale:f,axis:E}),Ya(g))}var pu={id:"filler",afterDatasetsUpdate(g,l,o){const a=(g.data.datasets||[]).length,c=[];let f,E,R,O;for(E=0;E<a;++E)f=g.getDatasetMeta(E),R=f.dataset,O=null,R&&R.options&&R instanceof Ou&&(O={visible:g.isDatasetVisible(E),index:E,fill:Dh(R,E,a),chart:g,axis:f.controller.options.indexAxis,scale:f.vScale,line:R}),f.$filler=O,c.push(O);for(E=0;E<a;++E)O=c[E],O&&!1!==O.fill&&(O.fill=Gr(c,E,o.propagate))},beforeDraw(g,l,o){const a="beforeDraw"===o.drawTime,c=g.getSortedVisibleDatasetMetas(),f=g.chartArea;for(let E=c.length-1;E>=0;--E){const R=c[E].$filler;!R||(R.line.updateControlPoints(f,R.axis),a&&Dl(g.ctx,R,f))}},beforeDatasetsDraw(g,l,o){if("beforeDatasetsDraw"!==o.drawTime)return;const a=g.getSortedVisibleDatasetMetas();for(let c=a.length-1;c>=0;--c){const f=a[c].$filler;f&&Dl(g.ctx,f,g.chartArea)}},beforeDatasetDraw(g,l,o){const a=l.meta.$filler;!a||!1===a.fill||"beforeDatasetDraw"!==o.drawTime||Dl(g.ctx,a,g.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const Oc=(g,l)=>{let{boxHeight:o=l,boxWidth:a=l}=g;return g.usePointStyle&&(o=Math.min(o,l),a=Math.min(a,l)),{boxWidth:a,boxHeight:o,itemHeight:Math.max(l,o)}};class Jl extends na{constructor(l){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=l.chart,this.options=l.options,this.ctx=l.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(l,o,a){this.maxWidth=l,this.maxHeight=o,this._margins=a,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const l=this.options.labels||{};let o=ht(l.generateLabels,[this.chart],this)||[];l.filter&&(o=o.filter(a=>l.filter(a,this.chart.data))),l.sort&&(o=o.sort((a,c)=>l.sort(a,c,this.chart.data))),this.options.reverse&&o.reverse(),this.legendItems=o}fit(){const{options:l,ctx:o}=this;if(!l.display)return void(this.width=this.height=0);const a=l.labels,c=ao(a.font),f=c.size,E=this._computeTitleHeight(),{boxWidth:R,itemHeight:O}=Oc(a,f);let F,J;o.font=c.string,this.isHorizontal()?(F=this.maxWidth,J=this._fitRows(E,f,R,O)+10):(J=this.maxHeight,F=this._fitCols(E,f,R,O)+10),this.width=Math.min(F,l.maxWidth||this.maxWidth),this.height=Math.min(J,l.maxHeight||this.maxHeight)}_fitRows(l,o,a,c){const{ctx:f,maxWidth:E,options:{labels:{padding:R}}}=this,O=this.legendHitBoxes=[],F=this.lineWidths=[0],J=c+R;let dt=l;f.textAlign="left",f.textBaseline="middle";let Ft=-1,qt=-J;return this.legendItems.forEach((Ee,De)=>{const Ge=a+o/2+f.measureText(Ee.text).width;(0===De||F[F.length-1]+Ge+2*R>E)&&(dt+=J,F[F.length-(De>0?0:1)]=0,qt+=J,Ft++),O[De]={left:0,top:qt,row:Ft,width:Ge,height:c},F[F.length-1]+=Ge+R}),dt}_fitCols(l,o,a,c){const{ctx:f,maxHeight:E,options:{labels:{padding:R}}}=this,O=this.legendHitBoxes=[],F=this.columnSizes=[],J=E-l;let dt=R,Ft=0,qt=0,Ee=0,De=0;return this.legendItems.forEach((Ge,We)=>{const Si=a+o/2+f.measureText(Ge.text).width;We>0&&qt+c+2*R>J&&(dt+=Ft+R,F.push({width:Ft,height:qt}),Ee+=Ft+R,De++,Ft=qt=0),O[We]={left:Ee,top:qt,col:De,width:Si,height:c},Ft=Math.max(Ft,Si),qt+=c+R}),dt+=Ft,F.push({width:Ft,height:qt}),dt}adjustHitBoxes(){if(!this.options.display)return;const l=this._computeTitleHeight(),{legendHitBoxes:o,options:{align:a,labels:{padding:c},rtl:f}}=this,E=oo(f,this.left,this.width);if(this.isHorizontal()){let R=0,O=vt(a,this.left+c,this.right-this.lineWidths[R]);for(const F of o)R!==F.row&&(R=F.row,O=vt(a,this.left+c,this.right-this.lineWidths[R])),F.top+=this.top+l+c,F.left=E.leftForLtr(E.x(O),F.width),O+=F.width+c}else{let R=0,O=vt(a,this.top+l+c,this.bottom-this.columnSizes[R].height);for(const F of o)F.col!==R&&(R=F.col,O=vt(a,this.top+l+c,this.bottom-this.columnSizes[R].height)),F.top=O,F.left+=this.left+c,F.left=E.leftForLtr(E.x(F.left),F.width),O+=F.height+c}}isHorizontal(){return"top"===this.options.position||"bottom"===this.options.position}draw(){if(this.options.display){const l=this.ctx;Ho(l,this),this._draw(),Ya(l)}}_draw(){const{options:l,columnSizes:o,lineWidths:a,ctx:c}=this,{align:f,labels:E}=l,R=lr.color,O=oo(l.rtl,this.left,this.width),F=ao(E.font),{color:J,padding:dt}=E,Ft=F.size,qt=Ft/2;let Ee;this.drawTitle(),c.textAlign=O.textAlign("left"),c.textBaseline="middle",c.lineWidth=.5,c.font=F.string;const{boxWidth:De,boxHeight:Ge,itemHeight:We}=Oc(E,Ft),Gi=this.isHorizontal(),Xi=this._computeTitleHeight();Ee=Gi?{x:vt(f,this.left+dt,this.right-a[0]),y:this.top+dt+Xi,line:0}:{x:this.left+dt,y:vt(f,this.top+Xi+dt,this.bottom-o[0].height),line:0},ko(this.ctx,l.textDirection);const gn=We+dt;this.legendItems.forEach((_n,wn)=>{c.strokeStyle=_n.fontColor||J,c.fillStyle=_n.fontColor||J;const Pn=c.measureText(_n.text).width,bn=O.textAlign(_n.textAlign||(_n.textAlign=E.textAlign)),qi=De+qt+Pn;let Bn=Ee.x,dr=Ee.y;O.setWidth(this.width),Gi?wn>0&&Bn+qi+dt>this.right&&(dr=Ee.y+=gn,Ee.line++,Bn=Ee.x=vt(f,this.left+dt,this.right-a[Ee.line])):wn>0&&dr+gn>this.bottom&&(Bn=Ee.x=Bn+o[Ee.line].width+dt,Ee.line++,dr=Ee.y=vt(f,this.top+Xi+dt,this.bottom-o[Ee.line].height)),function(_n,wn,Pn){if(isNaN(De)||De<=0||isNaN(Ge)||Ge<0)return;c.save();const bn=Ut(Pn.lineWidth,1);if(c.fillStyle=Ut(Pn.fillStyle,R),c.lineCap=Ut(Pn.lineCap,"butt"),c.lineDashOffset=Ut(Pn.lineDashOffset,0),c.lineJoin=Ut(Pn.lineJoin,"miter"),c.lineWidth=bn,c.strokeStyle=Ut(Pn.strokeStyle,R),c.setLineDash(Ut(Pn.lineDash,[])),E.usePointStyle){const qi={radius:De*Math.SQRT2/2,pointStyle:Pn.pointStyle,rotation:Pn.rotation,borderWidth:bn},Bn=O.xPlus(_n,De/2);Ro(c,qi,Bn,wn+qt)}else{const qi=wn+Math.max((Ft-Ge)/2,0),Bn=O.leftForLtr(_n,De),dr=Oo(Pn.borderRadius);c.beginPath(),Object.values(dr).some(Ei=>0!==Ei)?Fs(c,{x:Bn,y:qi,w:De,h:Ge,radius:dr}):c.rect(Bn,qi,De,Ge),c.fill(),0!==bn&&c.stroke()}c.restore()}(O.x(Bn),dr,_n),Bn=((g,l,o,a)=>g===(a?"left":"right")?o:"center"===g?(l+o)/2:l)(bn,Bn+De+qt,Gi?Bn+qi:this.right,l.rtl),function(_n,wn,Pn){Qo(c,Pn.text,_n,wn+We/2,F,{strikethrough:Pn.hidden,textAlign:O.textAlign(Pn.textAlign)})}(O.x(Bn),dr,_n),Gi?Ee.x+=qi+dt:Ee.y+=gn}),Ba(this.ctx,l.textDirection)}drawTitle(){const l=this.options,o=l.title,a=ao(o.font),c=zr(o.padding);if(!o.display)return;const f=oo(l.rtl,this.left,this.width),E=this.ctx,R=o.position,F=c.top+a.size/2;let J,dt=this.left,Ft=this.width;if(this.isHorizontal())Ft=Math.max(...this.lineWidths),J=this.top+F,dt=vt(l.align,dt,this.right-Ft);else{const Ee=this.columnSizes.reduce((De,Ge)=>Math.max(De,Ge.height),0);J=F+vt(l.align,this.top,this.bottom-Ee-l.labels.padding-this._computeTitleHeight())}const qt=vt(R,dt,dt+Ft);E.textAlign=f.textAlign(Ht(R)),E.textBaseline="middle",E.strokeStyle=o.color,E.fillStyle=o.color,E.font=a.string,Qo(E,o.text,qt,J,a)}_computeTitleHeight(){const l=this.options.title,o=ao(l.font),a=zr(l.padding);return l.display?o.lineHeight+a.height:0}_getLegendItemAt(l,o){let a,c,f;if(_i(l,this.left,this.right)&&_i(o,this.top,this.bottom))for(f=this.legendHitBoxes,a=0;a<f.length;++a)if(c=f[a],_i(l,c.left,c.left+c.width)&&_i(o,c.top,c.top+c.height))return this.legendItems[a];return null}handleEvent(l){const o=this.options;if(!function(g,l){return!!("mousemove"===g&&(l.onHover||l.onLeave)||l.onClick&&("click"===g||"mouseup"===g))}(l.type,o))return;const a=this._getLegendItemAt(l.x,l.y);if("mousemove"===l.type){const c=this._hoveredItem,f=((g,l)=>null!==g&&null!==l&&g.datasetIndex===l.datasetIndex&&g.index===l.index)(c,a);c&&!f&&ht(o.onLeave,[l,c,this],this),this._hoveredItem=a,a&&!f&&ht(o.onHover,[l,a,this],this)}else a&&ht(o.onClick,[l,a,this],this)}}var wo={id:"legend",_element:Jl,start(g,l,o){const a=g.legend=new Jl({ctx:g.ctx,options:o,chart:g});So.configure(g,a,o),So.addBox(g,a)},stop(g){So.removeBox(g,g.legend),delete g.legend},beforeUpdate(g,l,o){const a=g.legend;So.configure(g,a,o),a.options=o},afterUpdate(g){const l=g.legend;l.buildLabels(),l.adjustHitBoxes()},afterEvent(g,l){l.replay||g.legend.handleEvent(l.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(g,l,o){const a=l.datasetIndex,c=o.chart;c.isDatasetVisible(a)?(c.hide(a),l.hidden=!0):(c.show(a),l.hidden=!1)},onHover:null,onLeave:null,labels:{color:g=>g.chart.options.color,boxWidth:40,padding:10,generateLabels(g){const l=g.data.datasets,{labels:{usePointStyle:o,pointStyle:a,textAlign:c,color:f}}=g.legend.options;return g._getSortedDatasetMetas().map(E=>{const R=E.controller.getStyle(o?0:void 0),O=zr(R.borderWidth);return{text:l[E.index].label,fillStyle:R.backgroundColor,fontColor:f,hidden:!E.visible,lineCap:R.borderCapStyle,lineDash:R.borderDash,lineDashOffset:R.borderDashOffset,lineJoin:R.borderJoinStyle,lineWidth:(O.width+O.height)/4,strokeStyle:R.borderColor,pointStyle:a||R.pointStyle,rotation:R.rotation,textAlign:c||R.textAlign,borderRadius:0,datasetIndex:E.index}},this)}},title:{color:g=>g.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:g=>!g.startsWith("on"),labels:{_scriptable:g=>!["generateLabels","filter","sort"].includes(g)}}};class Zu extends na{constructor(l){super(),this.chart=l.chart,this.options=l.options,this.ctx=l.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(l,o){const a=this.options;if(this.left=0,this.top=0,!a.display)return void(this.width=this.height=this.right=this.bottom=0);this.width=this.right=l,this.height=this.bottom=o;const c=yt(a.text)?a.text.length:1;this._padding=zr(a.padding);const f=c*ao(a.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=f:this.width=f}isHorizontal(){const l=this.options.position;return"top"===l||"bottom"===l}_drawArgs(l){const{top:o,left:a,bottom:c,right:f,options:E}=this,R=E.align;let F,J,dt,O=0;return this.isHorizontal()?(J=vt(R,a,f),dt=o+l,F=f-a):("left"===E.position?(J=a+l,dt=vt(R,c,o),O=-.5*At):(J=f-l,dt=vt(R,o,c),O=.5*At),F=c-o),{titleX:J,titleY:dt,maxWidth:F,rotation:O}}draw(){const l=this.ctx,o=this.options;if(!o.display)return;const a=ao(o.font),f=a.lineHeight/2+this._padding.top,{titleX:E,titleY:R,maxWidth:O,rotation:F}=this._drawArgs(f);Qo(l,o.text,0,0,a,{color:o.color,maxWidth:O,rotation:F,textAlign:Ht(o.align),textBaseline:"middle",translation:[E,R]})}}var Zc={id:"title",_element:Zu,start(g,l,o){!function(g,l){const o=new Zu({ctx:g.ctx,options:l,chart:g});So.configure(g,o,l),So.addBox(g,o),g.titleBlock=o}(g,o)},stop(g){So.removeBox(g,g.titleBlock),delete g.titleBlock},beforeUpdate(g,l,o){const a=g.titleBlock;So.configure(g,a,o),a.options=o},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Qc=new WeakMap;var Fu={id:"subtitle",start(g,l,o){const a=new Zu({ctx:g.ctx,options:o,chart:g});So.configure(g,a,o),So.addBox(g,a),Qc.set(g,a)},stop(g){So.removeBox(g,Qc.get(g)),Qc.delete(g)},beforeUpdate(g,l,o){const a=Qc.get(g);So.configure(g,a,o),a.options=o},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const gu={average(g){if(!g.length)return!1;let l,o,a=0,c=0,f=0;for(l=0,o=g.length;l<o;++l){const E=g[l].element;if(E&&E.hasValue()){const R=E.tooltipPosition();a+=R.x,c+=R.y,++f}}return{x:a/f,y:c/f}},nearest(g,l){if(!g.length)return!1;let f,E,R,o=l.x,a=l.y,c=Number.POSITIVE_INFINITY;for(f=0,E=g.length;f<E;++f){const O=g[f].element;if(O&&O.hasValue()){const J=Zi(l,O.getCenterPoint());J<c&&(c=J,R=O)}}if(R){const O=R.tooltipPosition();o=O.x,a=O.y}return{x:o,y:a}}};function vo(g,l){return l&&(yt(l)?Array.prototype.push.apply(g,l):g.push(l)),g}function Vl(g){return("string"==typeof g||g instanceof String)&&g.indexOf("\n")>-1?g.split("\n"):g}function mh(g,l){const{element:o,datasetIndex:a,index:c}=l,f=g.getDatasetMeta(a).controller,{label:E,value:R}=f.getLabelAndValue(c);return{chart:g,label:E,parsed:f.getParsed(c),raw:g.data.datasets[a].data[c],formattedValue:R,dataset:f.getDataset(),dataIndex:c,datasetIndex:a,element:o}}function _h(g,l){const o=g.chart.ctx,{body:a,footer:c,title:f}=g,{boxWidth:E,boxHeight:R}=l,O=ao(l.bodyFont),F=ao(l.titleFont),J=ao(l.footerFont),dt=f.length,Ft=c.length,qt=a.length,Ee=zr(l.padding);let De=Ee.height,Ge=0,We=a.reduce((Gi,Xi)=>Gi+Xi.before.length+Xi.lines.length+Xi.after.length,0);We+=g.beforeBody.length+g.afterBody.length,dt&&(De+=dt*F.lineHeight+(dt-1)*l.titleSpacing+l.titleMarginBottom),We&&(De+=qt*(l.displayColors?Math.max(R,O.lineHeight):O.lineHeight)+(We-qt)*O.lineHeight+(We-1)*l.bodySpacing),Ft&&(De+=l.footerMarginTop+Ft*J.lineHeight+(Ft-1)*l.footerSpacing);let Si=0;const ln=function(Gi){Ge=Math.max(Ge,o.measureText(Gi).width+Si)};return o.save(),o.font=F.string,nt(g.title,ln),o.font=O.string,nt(g.beforeBody.concat(g.afterBody),ln),Si=l.displayColors?E+2+l.boxPadding:0,nt(a,Gi=>{nt(Gi.before,ln),nt(Gi.lines,ln),nt(Gi.after,ln)}),Si=0,o.font=J.string,nt(g.footer,ln),o.restore(),Ge+=Ee.width,{width:Ge,height:De}}function T(g,l,o,a){const{x:c,width:f}=o,{width:E,chartArea:{left:R,right:O}}=g;let F="center";return"center"===a?F=c<=(R+O)/2?"left":"right":c<=f/2?F="left":c>=E-f/2&&(F="right"),function(g,l,o,a){const{x:c,width:f}=a,E=o.caretSize+o.caretPadding;if("left"===g&&c+f+E>l.width||"right"===g&&c-f-E<0)return!0}(F,g,l,o)&&(F="center"),F}function I(g,l,o){const a=o.yAlign||l.yAlign||function(g,l){const{y:o,height:a}=l;return o<a/2?"top":o>g.height-a/2?"bottom":"center"}(g,o);return{xAlign:o.xAlign||l.xAlign||T(g,l,o,a),yAlign:a}}function Y(g,l,o,a){const{caretSize:c,caretPadding:f,cornerRadius:E}=g,{xAlign:R,yAlign:O}=o,F=c+f,{topLeft:J,topRight:dt,bottomLeft:Ft,bottomRight:qt}=Oo(E);let Ee=function(g,l){let{x:o,width:a}=g;return"right"===l?o-=a:"center"===l&&(o-=a/2),o}(l,R);const De=function(g,l,o){let{y:a,height:c}=g;return"top"===l?a+=o:a-="bottom"===l?c+o:c/2,a}(l,O,F);return"center"===O?"left"===R?Ee+=F:"right"===R&&(Ee-=F):"left"===R?Ee-=Math.max(J,Ft)+c:"right"===R&&(Ee+=Math.max(dt,qt)+c),{x:je(Ee,0,a.width-l.width),y:je(De,0,a.height-l.height)}}function ut(g,l,o){const a=zr(o.padding);return"center"===l?g.x+g.width/2:"right"===l?g.x+g.width-a.right:g.x+a.left}function Tt(g){return vo([],Vl(g))}function Kt(g,l){const o=l&&l.dataset&&l.dataset.tooltip&&l.dataset.tooltip.callbacks;return o?g.override(o):g}let Me=(()=>{class g extends na{constructor(o){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=o.chart||o._chart,this._chart=this.chart,this.options=o.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(o){this.options=o,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const o=this._cachedAnimations;if(o)return o;const a=this.chart,c=this.options.setContext(this.getContext()),f=c.enabled&&a.options.animation&&c.animations,E=new $a(this.chart,f);return f._cacheable&&(this._cachedAnimations=Object.freeze(E)),E}getContext(){return this.$context||(this.$context=function(g,l,o){return Xo(g,{tooltip:l,tooltipItems:o,type:"tooltip"})}(this.chart.getContext(),this,this._tooltipItems))}getTitle(o,a){const{callbacks:c}=a,f=c.beforeTitle.apply(this,[o]),E=c.title.apply(this,[o]),R=c.afterTitle.apply(this,[o]);let O=[];return O=vo(O,Vl(f)),O=vo(O,Vl(E)),O=vo(O,Vl(R)),O}getBeforeBody(o,a){return Tt(a.callbacks.beforeBody.apply(this,[o]))}getBody(o,a){const{callbacks:c}=a,f=[];return nt(o,E=>{const R={before:[],lines:[],after:[]},O=Kt(c,E);vo(R.before,Vl(O.beforeLabel.call(this,E))),vo(R.lines,O.label.call(this,E)),vo(R.after,Vl(O.afterLabel.call(this,E))),f.push(R)}),f}getAfterBody(o,a){return Tt(a.callbacks.afterBody.apply(this,[o]))}getFooter(o,a){const{callbacks:c}=a,f=c.beforeFooter.apply(this,[o]),E=c.footer.apply(this,[o]),R=c.afterFooter.apply(this,[o]);let O=[];return O=vo(O,Vl(f)),O=vo(O,Vl(E)),O=vo(O,Vl(R)),O}_createItems(o){const a=this._active,c=this.chart.data,f=[],E=[],R=[];let F,J,O=[];for(F=0,J=a.length;F<J;++F)O.push(mh(this.chart,a[F]));return o.filter&&(O=O.filter((dt,Ft,qt)=>o.filter(dt,Ft,qt,c))),o.itemSort&&(O=O.sort((dt,Ft)=>o.itemSort(dt,Ft,c))),nt(O,dt=>{const Ft=Kt(o.callbacks,dt);f.push(Ft.labelColor.call(this,dt)),E.push(Ft.labelPointStyle.call(this,dt)),R.push(Ft.labelTextColor.call(this,dt))}),this.labelColors=f,this.labelPointStyles=E,this.labelTextColors=R,this.dataPoints=O,O}update(o,a){const c=this.options.setContext(this.getContext()),f=this._active;let E,R=[];if(f.length){const O=gu[c.position].call(this,f,this._eventPosition);R=this._createItems(c),this.title=this.getTitle(R,c),this.beforeBody=this.getBeforeBody(R,c),this.body=this.getBody(R,c),this.afterBody=this.getAfterBody(R,c),this.footer=this.getFooter(R,c);const F=this._size=_h(this,c),J=Object.assign({},O,F),dt=I(this.chart,c,J),Ft=Y(c,J,dt,this.chart);this.xAlign=dt.xAlign,this.yAlign=dt.yAlign,E={opacity:1,x:Ft.x,y:Ft.y,width:F.width,height:F.height,caretX:O.x,caretY:O.y}}else 0!==this.opacity&&(E={opacity:0});this._tooltipItems=R,this.$context=void 0,E&&this._resolveAnimations().update(this,E),o&&c.external&&c.external.call(this,{chart:this.chart,tooltip:this,replay:a})}drawCaret(o,a,c,f){const E=this.getCaretPosition(o,c,f);a.lineTo(E.x1,E.y1),a.lineTo(E.x2,E.y2),a.lineTo(E.x3,E.y3)}getCaretPosition(o,a,c){const{xAlign:f,yAlign:E}=this,{caretSize:R,cornerRadius:O}=c,{topLeft:F,topRight:J,bottomLeft:dt,bottomRight:Ft}=Oo(O),{x:qt,y:Ee}=o,{width:De,height:Ge}=a;let We,Si,ln,Gi,Xi,gn;return"center"===E?(Xi=Ee+Ge/2,"left"===f?(We=qt,Si=We-R,Gi=Xi+R,gn=Xi-R):(We=qt+De,Si=We+R,Gi=Xi-R,gn=Xi+R),ln=We):(Si="left"===f?qt+Math.max(F,dt)+R:"right"===f?qt+De-Math.max(J,Ft)-R:this.caretX,"top"===E?(Gi=Ee,Xi=Gi-R,We=Si-R,ln=Si+R):(Gi=Ee+Ge,Xi=Gi+R,We=Si+R,ln=Si-R),gn=Gi),{x1:We,x2:Si,x3:ln,y1:Gi,y2:Xi,y3:gn}}drawTitle(o,a,c){const f=this.title,E=f.length;let R,O,F;if(E){const J=oo(c.rtl,this.x,this.width);for(o.x=ut(this,c.titleAlign,c),a.textAlign=J.textAlign(c.titleAlign),a.textBaseline="middle",R=ao(c.titleFont),O=c.titleSpacing,a.fillStyle=c.titleColor,a.font=R.string,F=0;F<E;++F)a.fillText(f[F],J.x(o.x),o.y+R.lineHeight/2),o.y+=R.lineHeight+O,F+1===E&&(o.y+=c.titleMarginBottom-O)}}_drawColorBox(o,a,c,f,E){const R=this.labelColors[c],O=this.labelPointStyles[c],{boxHeight:F,boxWidth:J,boxPadding:dt}=E,Ft=ao(E.bodyFont),qt=ut(this,"left",E),Ee=f.x(qt),Ge=a.y+(F<Ft.lineHeight?(Ft.lineHeight-F)/2:0);if(E.usePointStyle){const We={radius:Math.min(J,F)/2,pointStyle:O.pointStyle,rotation:O.rotation,borderWidth:1},Si=f.leftForLtr(Ee,J)+J/2,ln=Ge+F/2;o.strokeStyle=E.multiKeyBackground,o.fillStyle=E.multiKeyBackground,Ro(o,We,Si,ln),o.strokeStyle=R.borderColor,o.fillStyle=R.backgroundColor,Ro(o,We,Si,ln)}else{o.lineWidth=R.borderWidth||1,o.strokeStyle=R.borderColor,o.setLineDash(R.borderDash||[]),o.lineDashOffset=R.borderDashOffset||0;const We=f.leftForLtr(Ee,J-dt),Si=f.leftForLtr(f.xPlus(Ee,1),J-dt-2),ln=Oo(R.borderRadius);Object.values(ln).some(Gi=>0!==Gi)?(o.beginPath(),o.fillStyle=E.multiKeyBackground,Fs(o,{x:We,y:Ge,w:J,h:F,radius:ln}),o.fill(),o.stroke(),o.fillStyle=R.backgroundColor,o.beginPath(),Fs(o,{x:Si,y:Ge+1,w:J-2,h:F-2,radius:ln}),o.fill()):(o.fillStyle=E.multiKeyBackground,o.fillRect(We,Ge,J,F),o.strokeRect(We,Ge,J,F),o.fillStyle=R.backgroundColor,o.fillRect(Si,Ge+1,J-2,F-2))}o.fillStyle=this.labelTextColors[c]}drawBody(o,a,c){const{body:f}=this,{bodySpacing:E,bodyAlign:R,displayColors:O,boxHeight:F,boxWidth:J,boxPadding:dt}=c,Ft=ao(c.bodyFont);let qt=Ft.lineHeight,Ee=0;const De=oo(c.rtl,this.x,this.width),Ge=function(Pn){a.fillText(Pn,De.x(o.x+Ee),o.y+qt/2),o.y+=qt+E},We=De.textAlign(R);let Si,ln,Gi,Xi,gn,_n,wn;for(a.textAlign=R,a.textBaseline="middle",a.font=Ft.string,o.x=ut(this,We,c),a.fillStyle=c.bodyColor,nt(this.beforeBody,Ge),Ee=O&&"right"!==We?"center"===R?J/2+dt:J+2+dt:0,Xi=0,_n=f.length;Xi<_n;++Xi){for(Si=f[Xi],ln=this.labelTextColors[Xi],a.fillStyle=ln,nt(Si.before,Ge),Gi=Si.lines,O&&Gi.length&&(this._drawColorBox(a,o,Xi,De,c),qt=Math.max(Ft.lineHeight,F)),gn=0,wn=Gi.length;gn<wn;++gn)Ge(Gi[gn]),qt=Ft.lineHeight;nt(Si.after,Ge)}Ee=0,qt=Ft.lineHeight,nt(this.afterBody,Ge),o.y-=E}drawFooter(o,a,c){const f=this.footer,E=f.length;let R,O;if(E){const F=oo(c.rtl,this.x,this.width);for(o.x=ut(this,c.footerAlign,c),o.y+=c.footerMarginTop,a.textAlign=F.textAlign(c.footerAlign),a.textBaseline="middle",R=ao(c.footerFont),a.fillStyle=c.footerColor,a.font=R.string,O=0;O<E;++O)a.fillText(f[O],F.x(o.x),o.y+R.lineHeight/2),o.y+=R.lineHeight+c.footerSpacing}}drawBackground(o,a,c,f){const{xAlign:E,yAlign:R}=this,{x:O,y:F}=o,{width:J,height:dt}=c,{topLeft:Ft,topRight:qt,bottomLeft:Ee,bottomRight:De}=Oo(f.cornerRadius);a.fillStyle=f.backgroundColor,a.strokeStyle=f.borderColor,a.lineWidth=f.borderWidth,a.beginPath(),a.moveTo(O+Ft,F),"top"===R&&this.drawCaret(o,a,c,f),a.lineTo(O+J-qt,F),a.quadraticCurveTo(O+J,F,O+J,F+qt),"center"===R&&"right"===E&&this.drawCaret(o,a,c,f),a.lineTo(O+J,F+dt-De),a.quadraticCurveTo(O+J,F+dt,O+J-De,F+dt),"bottom"===R&&this.drawCaret(o,a,c,f),a.lineTo(O+Ee,F+dt),a.quadraticCurveTo(O,F+dt,O,F+dt-Ee),"center"===R&&"left"===E&&this.drawCaret(o,a,c,f),a.lineTo(O,F+Ft),a.quadraticCurveTo(O,F,O+Ft,F),a.closePath(),a.fill(),f.borderWidth>0&&a.stroke()}_updateAnimationTarget(o){const a=this.chart,c=this.$animations,f=c&&c.x,E=c&&c.y;if(f||E){const R=gu[o.position].call(this,this._active,this._eventPosition);if(!R)return;const O=this._size=_h(this,o),F=Object.assign({},R,this._size),J=I(a,o,F),dt=Y(o,F,J,a);(f._to!==dt.x||E._to!==dt.y)&&(this.xAlign=J.xAlign,this.yAlign=J.yAlign,this.width=O.width,this.height=O.height,this.caretX=R.x,this.caretY=R.y,this._resolveAnimations().update(this,dt))}}draw(o){const a=this.options.setContext(this.getContext());let c=this.opacity;if(!c)return;this._updateAnimationTarget(a);const f={width:this.width,height:this.height},E={x:this.x,y:this.y};c=Math.abs(c)<.001?0:c;const R=zr(a.padding);a.enabled&&(this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length)&&(o.save(),o.globalAlpha=c,this.drawBackground(E,o,f,a),ko(o,a.textDirection),E.y+=R.top,this.drawTitle(E,o,a),this.drawBody(E,o,a),this.drawFooter(E,o,a),Ba(o,a.textDirection),o.restore())}getActiveElements(){return this._active||[]}setActiveElements(o,a){const c=this._active,f=o.map(({datasetIndex:O,index:F})=>{const J=this.chart.getDatasetMeta(O);if(!J)throw new Error("Cannot find a dataset at index "+O);return{datasetIndex:O,element:J.data[F],index:F}}),E=!he(c,f),R=this._positionChanged(f,a);(E||R)&&(this._active=f,this._eventPosition=a,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(o,a,c=!0){if(a&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const f=this.options,E=this._active||[],R=this._getActiveElements(o,E,a,c),O=this._positionChanged(R,o),F=a||!he(R,E)||O;return F&&(this._active=R,(f.enabled||f.external)&&(this._eventPosition={x:o.x,y:o.y},this.update(!0,a))),F}_getActiveElements(o,a,c,f){const E=this.options;if("mouseout"===o.type)return[];if(!f)return a;const R=this.chart.getElementsAtEventForMode(o,E.mode,E,c);return E.reverse&&R.reverse(),R}_positionChanged(o,a){const{caretX:c,caretY:f,options:E}=this,R=gu[E.position].call(this,o,a);return!1!==R&&(c!==R.x||f!==R.y)}}return g.positioners=gu,g})();var fi=Object.freeze({__proto__:null,Decimation:Rh,Filler:pu,Legend:wo,SubTitle:Fu,Title:Zc,Tooltip:{id:"tooltip",_element:Me,positioners:gu,afterInit(g,l,o){o&&(g.tooltip=new Me({chart:g,options:o}))},beforeUpdate(g,l,o){g.tooltip&&g.tooltip.initialize(o)},reset(g,l,o){g.tooltip&&g.tooltip.initialize(o)},afterDraw(g){const l=g.tooltip,o={tooltip:l};!1!==g.notifyPlugins("beforeTooltipDraw",o)&&(l&&l.draw(g.ctx),g.notifyPlugins("afterTooltipDraw",o))},afterEvent(g,l){g.tooltip&&g.tooltip.handleEvent(l.event,l.replay,l.inChartArea)&&(l.changed=!0)},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(g,l)=>l.bodyFont.size,boxWidth:(g,l)=>l.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:{beforeTitle:Wt,title(g){if(g.length>0){const l=g[0],o=l.chart.data.labels,a=o?o.length:0;if(this&&this.options&&"dataset"===this.options.mode)return l.dataset.label||"";if(l.label)return l.label;if(a>0&&l.dataIndex<a)return o[l.dataIndex]}return""},afterTitle:Wt,beforeBody:Wt,beforeLabel:Wt,label(g){if(this&&this.options&&"dataset"===this.options.mode)return g.label+": "+g.formattedValue||g.formattedValue;let l=g.dataset.label||"";l&&(l+=": ");const o=g.formattedValue;return Ct(o)||(l+=o),l},labelColor(g){const o=g.chart.getDatasetMeta(g.datasetIndex).controller.getStyle(g.dataIndex);return{borderColor:o.borderColor,backgroundColor:o.backgroundColor,borderWidth:o.borderWidth,borderDash:o.borderDash,borderDashOffset:o.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(g){const o=g.chart.getDatasetMeta(g.datasetIndex).controller.getStyle(g.dataIndex);return{pointStyle:o.pointStyle,rotation:o.rotation}},afterLabel:Wt,afterBody:Wt,beforeFooter:Wt,footer:Wt,afterFooter:Wt}},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:g=>"filter"!==g&&"itemSort"!==g&&"external"!==g,_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]}});class an extends da{constructor(l){super(l),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(l){const o=this._addedLabels;if(o.length){const a=this.getLabels();for(const{index:c,label:f}of o)a[c]===f&&a.splice(c,1);this._addedLabels=[]}super.init(l)}parse(l,o){if(Ct(l))return null;const a=this.getLabels();return((g,l)=>null===g?null:je(Math.round(g),0,l))(o=isFinite(o)&&a[o]===l?o:function(g,l,o,a){const c=g.indexOf(l);return-1===c?((g,l,o,a)=>("string"==typeof l?(o=g.push(l)-1,a.unshift({index:o,label:l})):isNaN(l)&&(o=null),o))(g,l,o,a):c!==g.lastIndexOf(l)?o:c}(a,l,Ut(o,l),this._addedLabels),a.length-1)}determineDataLimits(){const{minDefined:l,maxDefined:o}=this.getUserBounds();let{min:a,max:c}=this.getMinMax(!0);"ticks"===this.options.bounds&&(l||(a=0),o||(c=this.getLabels().length-1)),this.min=a,this.max=c}buildTicks(){const l=this.min,o=this.max,a=this.options.offset,c=[];let f=this.getLabels();f=0===l&&o===f.length-1?f:f.slice(l,o+1),this._valueRange=Math.max(f.length-(a?0:1),1),this._startValue=this.min-(a?.5:0);for(let E=l;E<=o;E++)c.push({value:E});return c}getLabelForValue(l){const o=this.getLabels();return l>=0&&l<o.length?o[l]:l}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(l){return"number"!=typeof l&&(l=this.parse(l)),null===l?NaN:this.getPixelForDecimal((l-this._startValue)/this._valueRange)}getPixelForTick(l){const o=this.ticks;return l<0||l>o.length-1?null:this.getPixelForValue(o[l].value)}getValueForPixel(l){return Math.round(this._startValue+this.getDecimalForPixel(l)*this._valueRange)}getBasePixel(){return this.bottom}}function Cn(g,l,{horizontal:o,minRotation:a}){const c=wi(a),f=(o?Math.sin(c):Math.cos(c))||.001;return Math.min(l/f,.75*l*(""+g).length)}an.id="category",an.defaults={ticks:{callback:an.prototype.getLabelForValue}};class dn extends da{constructor(l){super(l),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(l,o){return Ct(l)||("number"==typeof l||l instanceof Number)&&!isFinite(+l)?null:+l}handleTickRangeOptions(){const{beginAtZero:l}=this.options,{minDefined:o,maxDefined:a}=this.getUserBounds();let{min:c,max:f}=this;const E=O=>c=o?c:O,R=O=>f=a?f:O;if(l){const O=me(c),F=me(f);O<0&&F<0?R(0):O>0&&F>0&&E(0)}if(c===f){let O=1;(f>=Number.MAX_SAFE_INTEGER||c<=Number.MIN_SAFE_INTEGER)&&(O=Math.abs(.05*f)),R(f+O),l||E(c-O)}this.min=c,this.max=f}getTickLimit(){const l=this.options.ticks;let c,{maxTicksLimit:o,stepSize:a}=l;return a?(c=Math.ceil(this.max/a)-Math.floor(this.min/a)+1,c>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${a} would result generating up to ${c} ticks. Limiting to 1000.`),c=1e3)):(c=this.computeTickLimit(),o=o||11),o&&(c=Math.min(o,c)),c}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const l=this.options,o=l.ticks;let a=this.getTickLimit();a=Math.max(2,a);const E=function(g,l){const o=[],{bounds:c,step:f,min:E,max:R,precision:O,count:F,maxTicks:J,maxDigits:dt,includeBounds:Ft}=g,qt=f||1,Ee=J-1,{min:De,max:Ge}=l,We=!Ct(E),Si=!Ct(R),ln=!Ct(F),Gi=(Ge-De)/(dt+1);let gn,_n,wn,Pn,Xi=ye((Ge-De)/Ee/qt)*qt;if(Xi<1e-14&&!We&&!Si)return[{value:De},{value:Ge}];Pn=Math.ceil(Ge/Xi)-Math.floor(De/Xi),Pn>Ee&&(Xi=ye(Pn*Xi/Ee/qt)*qt),Ct(O)||(gn=Math.pow(10,O),Xi=Math.ceil(Xi*gn)/gn),"ticks"===c?(_n=Math.floor(De/Xi)*Xi,wn=Math.ceil(Ge/Xi)*Xi):(_n=De,wn=Ge),We&&Si&&f&&function(g,l){const o=Math.round(g);return o-l<=g&&o+l>=g}((R-E)/f,Xi/1e3)?(Pn=Math.round(Math.min((R-E)/Xi,J)),Xi=(R-E)/Pn,_n=E,wn=R):ln?(_n=We?E:_n,wn=Si?R:wn,Pn=F-1,Xi=(wn-_n)/Pn):(Pn=(wn-_n)/Xi,Pn=ei(Pn,Math.round(Pn),Xi/1e3)?Math.round(Pn):Math.ceil(Pn));const bn=Math.max(pn(Xi),pn(_n));gn=Math.pow(10,Ct(O)?bn:O),_n=Math.round(_n*gn)/gn,wn=Math.round(wn*gn)/gn;let qi=0;for(We&&(Ft&&_n!==E?(o.push({value:E}),_n<E&&qi++,ei(Math.round((_n+qi*Xi)*gn)/gn,E,Cn(E,Gi,g))&&qi++):_n<E&&qi++);qi<Pn;++qi)o.push({value:Math.round((_n+qi*Xi)*gn)/gn});return Si&&Ft&&wn!==R?o.length&&ei(o[o.length-1].value,R,Cn(R,Gi,g))?o[o.length-1].value=R:o.push({value:R}):(!Si||wn===R)&&o.push({value:wn}),o}({maxTicks:a,bounds:l.bounds,min:l.min,max:l.max,precision:o.precision,step:o.stepSize,count:o.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:o.minRotation||0,includeBounds:!1!==o.includeBounds},this._range||this);return"ticks"===l.bounds&&Fi(E,this,"value"),l.reverse?(E.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),E}configure(){const l=this.ticks;let o=this.min,a=this.max;if(super.configure(),this.options.offset&&l.length){const c=(a-o)/Math.max(l.length-1,1)/2;o-=c,a+=c}this._startValue=o,this._endValue=a,this._valueRange=a-o}getLabelForValue(l){return rr(l,this.chart.options.locale,this.options.ticks.format)}}class In extends dn{determineDataLimits(){const{min:l,max:o}=this.getMinMax(!0);this.min=mt(l)?l:0,this.max=mt(o)?o:1,this.handleTickRangeOptions()}computeTickLimit(){const l=this.isHorizontal(),o=l?this.width:this.height,a=wi(this.options.ticks.minRotation),c=(l?Math.sin(a):Math.cos(a))||.001,f=this._resolveTickFontOptions(0);return Math.ceil(o/Math.min(40,f.lineHeight/c))}getPixelForValue(l){return null===l?NaN:this.getPixelForDecimal((l-this._startValue)/this._valueRange)}getValueForPixel(l){return this._startValue+this.getDecimalForPixel(l)*this._valueRange}}function Xn(g){return g/Math.pow(10,Math.floor(ne(g)))==1}In.id="linear",In.defaults={ticks:{callback:Tc.formatters.numeric}};class mr extends da{constructor(l){super(l),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(l,o){const a=dn.prototype.parse.apply(this,[l,o]);if(0!==a)return mt(a)&&a>0?a:null;this._zero=!0}determineDataLimits(){const{min:l,max:o}=this.getMinMax(!0);this.min=mt(l)?Math.max(0,l):null,this.max=mt(o)?Math.max(0,o):null,this.options.beginAtZero&&(this._zero=!0),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:l,maxDefined:o}=this.getUserBounds();let a=this.min,c=this.max;const f=O=>a=l?a:O,E=O=>c=o?c:O,R=(O,F)=>Math.pow(10,Math.floor(ne(O))+F);a===c&&(a<=0?(f(1),E(10)):(f(R(a,-1)),E(R(c,1)))),a<=0&&f(R(c,-1)),c<=0&&E(R(a,1)),this._zero&&this.min!==this._suggestedMin&&a===R(this.min,0)&&f(R(a,-1)),this.min=a,this.max=c}buildTicks(){const l=this.options,a=function(g,l){const o=Math.floor(ne(l.max)),a=Math.ceil(l.max/Math.pow(10,o)),c=[];let f=lt(g.min,Math.pow(10,Math.floor(ne(l.min)))),E=Math.floor(ne(f)),R=Math.floor(f/Math.pow(10,E)),O=E<0?Math.pow(10,Math.abs(E)):1;do{c.push({value:f,major:Xn(f)}),++R,10===R&&(R=1,++E,O=E>=0?1:O),f=Math.round(R*Math.pow(10,E)*O)/O}while(E<o||E===o&&R<a);const F=lt(g.max,f);return c.push({value:F,major:Xn(f)}),c}({min:this._userMin,max:this._userMax},this);return"ticks"===l.bounds&&Fi(a,this,"value"),l.reverse?(a.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),a}getLabelForValue(l){return void 0===l?"0":rr(l,this.chart.options.locale,this.options.ticks.format)}configure(){const l=this.min;super.configure(),this._startValue=ne(l),this._valueRange=ne(this.max)-ne(l)}getPixelForValue(l){return(void 0===l||0===l)&&(l=this.min),null===l||isNaN(l)?NaN:this.getPixelForDecimal(l===this.min?0:(ne(l)-this._startValue)/this._valueRange)}getValueForPixel(l){const o=this.getDecimalForPixel(l);return Math.pow(10,this._startValue+o*this._valueRange)}}function fo(g){const l=g.ticks;if(l.display&&g.display){const o=zr(l.backdropPadding);return Ut(l.font&&l.font.size,lr.font.size)+o.height}return 0}function Es(g,l,o){return o=yt(o)?o:[o],{w:Ss(g,l.string,o),h:o.length*l.lineHeight}}function Wo(g,l,o,a,c){return g===a||g===c?{start:l-o/2,end:l+o/2}:g<a||g>c?{start:l-o,end:l}:{start:l,end:l+o}}function La(g,l,o,a,c){const f=Math.abs(Math.sin(o)),E=Math.abs(Math.cos(o));let R=0,O=0;a.start<l.l?(R=(l.l-a.start)/f,g.l=Math.min(g.l,l.l-R)):a.end>l.r&&(R=(a.end-l.r)/f,g.r=Math.max(g.r,l.r+R)),c.start<l.t?(O=(l.t-c.start)/E,g.t=Math.min(g.t,l.t-O)):c.end>l.b&&(O=(c.end-l.b)/E,g.b=Math.max(g.b,l.b+O))}function Xr(g){return 0===g||180===g?"center":g<180?"left":"right"}function ks(g,l,o){return"right"===o?g-=l:"center"===o&&(g-=l/2),g}function as(g,l,o){return 90===o||270===o?g-=l/2:(o>270||o<90)&&(g-=l),g}function H(g,l,o,a){const{ctx:c}=g;if(o)c.arc(g.xCenter,g.yCenter,l,0,pe);else{let f=g.getPointPosition(0,l);c.moveTo(f.x,f.y);for(let E=1;E<a;E++)f=g.getPointPosition(E,l),c.lineTo(f.x,f.y)}}mr.id="logarithmic",mr.defaults={ticks:{callback:Tc.formatters.logarithmic,major:{enabled:!0}}};class ft extends dn{constructor(l){super(l),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const l=this._padding=zr(fo(this.options)/2),o=this.width=this.maxWidth-l.width,a=this.height=this.maxHeight-l.height;this.xCenter=Math.floor(this.left+o/2+l.left),this.yCenter=Math.floor(this.top+a/2+l.top),this.drawingArea=Math.floor(Math.min(o,a)/2)}determineDataLimits(){const{min:l,max:o}=this.getMinMax(!1);this.min=mt(l)&&!isNaN(l)?l:0,this.max=mt(o)&&!isNaN(o)?o:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/fo(this.options))}generateTickLabels(l){dn.prototype.generateTickLabels.call(this,l),this._pointLabels=this.getLabels().map((o,a)=>{const c=ht(this.options.pointLabels.callback,[o,a],this);return c||0===c?c:""}).filter((o,a)=>this.chart.getDataVisibility(a))}fit(){const l=this.options;l.display&&l.pointLabels.display?function(g){const l={l:g.left+g._padding.left,r:g.right-g._padding.right,t:g.top+g._padding.top,b:g.bottom-g._padding.bottom},o=Object.assign({},l),a=[],c=[],f=g._pointLabels.length,E=g.options.pointLabels,R=E.centerPointLabels?At/f:0;for(let O=0;O<f;O++){const F=E.setContext(g.getPointLabelContext(O));c[O]=F.padding;const J=g.getPointPosition(O,g.drawingArea+c[O],R),dt=ao(F.font),Ft=Es(g.ctx,dt,g._pointLabels[O]);a[O]=Ft;const qt=Oe(g.getIndexAngle(O)+R),Ee=Math.round(yi(qt));La(o,l,qt,Wo(Ee,J.x,Ft.w,0,180),Wo(Ee,J.y,Ft.h,90,270))}g.setCenterPoint(l.l-o.l,o.r-l.r,l.t-o.t,o.b-l.b),g._pointLabelItems=function(g,l,o){const a=[],c=g._pointLabels.length,f=g.options,E=fo(f)/2,R=g.drawingArea,O=f.pointLabels.centerPointLabels?At/c:0;for(let F=0;F<c;F++){const J=g.getPointPosition(F,R+E+o[F],O),dt=Math.round(yi(Oe(J.angle+te))),Ft=l[F],qt=as(J.y,Ft.h,dt),Ee=Xr(dt),De=ks(J.x,Ft.w,Ee);a.push({x:J.x,y:qt,textAlign:Ee,left:De,top:qt,right:De+Ft.w,bottom:qt+Ft.h})}return a}(g,a,c)}(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(l,o,a,c){this.xCenter+=Math.floor((l-o)/2),this.yCenter+=Math.floor((a-c)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(l,o,a,c))}getIndexAngle(l){return Oe(l*(pe/(this._pointLabels.length||1))+wi(this.options.startAngle||0))}getDistanceFromCenterForValue(l){if(Ct(l))return NaN;const o=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-l)*o:(l-this.min)*o}getValueForDistanceFromCenter(l){if(Ct(l))return NaN;const o=l/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-o:this.min+o}getPointLabelContext(l){const o=this._pointLabels||[];if(l>=0&&l<o.length){const a=o[l];return function(g,l,o){return Xo(g,{label:o,index:l,type:"pointLabel"})}(this.getContext(),l,a)}}getPointPosition(l,o,a=0){const c=this.getIndexAngle(l)-te+a;return{x:Math.cos(c)*o+this.xCenter,y:Math.sin(c)*o+this.yCenter,angle:c}}getPointPositionForValue(l,o){return this.getPointPosition(l,this.getDistanceFromCenterForValue(o))}getBasePosition(l){return this.getPointPositionForValue(l||0,this.getBaseValue())}getPointLabelPosition(l){const{left:o,top:a,right:c,bottom:f}=this._pointLabelItems[l];return{left:o,top:a,right:c,bottom:f}}drawBackground(){const{backgroundColor:l,grid:{circular:o}}=this.options;if(l){const a=this.ctx;a.save(),a.beginPath(),H(this,this.getDistanceFromCenterForValue(this._endValue),o,this._pointLabels.length),a.closePath(),a.fillStyle=l,a.fill(),a.restore()}}drawGrid(){const l=this.ctx,o=this.options,{angleLines:a,grid:c}=o,f=this._pointLabels.length;let E,R,O;if(o.pointLabels.display&&function(g,l){const{ctx:o,options:{pointLabels:a}}=g;for(let c=l-1;c>=0;c--){const f=a.setContext(g.getPointLabelContext(c)),E=ao(f.font),{x:R,y:O,textAlign:F,left:J,top:dt,right:Ft,bottom:qt}=g._pointLabelItems[c],{backdropColor:Ee}=f;if(!Ct(Ee)){const De=zr(f.backdropPadding);o.fillStyle=Ee,o.fillRect(J-De.left,dt-De.top,Ft-J+De.width,qt-dt+De.height)}Qo(o,g._pointLabels[c],R,O+E.lineHeight/2,E,{color:f.color,textAlign:F,textBaseline:"middle"})}}(this,f),c.display&&this.ticks.forEach((F,J)=>{0!==J&&(R=this.getDistanceFromCenterForValue(F.value),function(g,l,o,a){const c=g.ctx,f=l.circular,{color:E,lineWidth:R}=l;!f&&!a||!E||!R||o<0||(c.save(),c.strokeStyle=E,c.lineWidth=R,c.setLineDash(l.borderDash),c.lineDashOffset=l.borderDashOffset,c.beginPath(),H(g,o,f,a),c.closePath(),c.stroke(),c.restore())}(this,c.setContext(this.getContext(J-1)),R,f))}),a.display){for(l.save(),E=f-1;E>=0;E--){const F=a.setContext(this.getPointLabelContext(E)),{color:J,lineWidth:dt}=F;!dt||!J||(l.lineWidth=dt,l.strokeStyle=J,l.setLineDash(F.borderDash),l.lineDashOffset=F.borderDashOffset,R=this.getDistanceFromCenterForValue(o.ticks.reverse?this.min:this.max),O=this.getPointPosition(E,R),l.beginPath(),l.moveTo(this.xCenter,this.yCenter),l.lineTo(O.x,O.y),l.stroke())}l.restore()}}drawBorder(){}drawLabels(){const l=this.ctx,o=this.options,a=o.ticks;if(!a.display)return;const c=this.getIndexAngle(0);let f,E;l.save(),l.translate(this.xCenter,this.yCenter),l.rotate(c),l.textAlign="center",l.textBaseline="middle",this.ticks.forEach((R,O)=>{if(0===O&&!o.reverse)return;const F=a.setContext(this.getContext(O)),J=ao(F.font);if(f=this.getDistanceFromCenterForValue(this.ticks[O].value),F.showLabelBackdrop){l.font=J.string,E=l.measureText(R.label).width,l.fillStyle=F.backdropColor;const dt=zr(F.backdropPadding);l.fillRect(-E/2-dt.left,-f-J.size/2-dt.top,E+dt.width,J.size+dt.height)}Qo(l,R.label,0,-f,J,{color:F.color})}),l.restore()}drawTitle(){}}ft.id="radialLinear",ft.defaults={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:Tc.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback:g=>g,padding:5,centerPointLabels:!1}},ft.defaultRoutes={"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"},ft.descriptors={angleLines:{_fallback:"grid"}};const Yt={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},jt=Object.keys(Yt);function re(g,l){return g-l}function Se(g,l){if(Ct(l))return null;const o=g._adapter,{parser:a,round:c,isoWeekday:f}=g._parseOpts;let E=l;return"function"==typeof a&&(E=a(E)),mt(E)||(E="string"==typeof a?o.parse(E,a):o.parse(E)),null===E?null:(c&&(E="week"!==c||!ce(f)&&!0!==f?o.startOf(E,c):o.startOf(E,"isoWeek",f)),+E)}function Re(g,l,o,a){const c=jt.length;for(let f=jt.indexOf(g);f<c-1;++f){const E=Yt[jt[f]],R=E.steps?E.steps:Number.MAX_SAFE_INTEGER;if(E.common&&Math.ceil((o-l)/(R*E.size))<=a)return jt[f]}return jt[c-1]}function pi(g,l,o){if(o){if(o.length){const{lo:a,hi:c}=Rs(o,l);g[o[a]>=l?o[a]:o[c]]=!0}}else g[l]=!0}function ji(g,l,o){const a=[],c={},f=l.length;let E,R;for(E=0;E<f;++E)R=l[E],c[R]=E,a.push({value:R,major:!1});return 0!==f&&o?function(g,l,o,a){const c=g._adapter,f=+c.startOf(l[0].value,a),E=l[l.length-1].value;let R,O;for(R=f;R<=E;R=+c.add(R,1,a))O=o[R],O>=0&&(l[O].major=!0);return l}(g,a,c,o):a}let nn=(()=>{class g extends da{constructor(o){super(o),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(o,a){const c=o.time||(o.time={}),f=this._adapter=new Xs._date(o.adapters.date);ue(c.displayFormats,f.formats()),this._parseOpts={parser:c.parser,round:c.round,isoWeekday:c.isoWeekday},super.init(o),this._normalized=a.normalized}parse(o,a){return void 0===o?null:Se(this,o)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const o=this.options,a=this._adapter,c=o.time.unit||"day";let{min:f,max:E,minDefined:R,maxDefined:O}=this.getUserBounds();function F(J){!R&&!isNaN(J.min)&&(f=Math.min(f,J.min)),!O&&!isNaN(J.max)&&(E=Math.max(E,J.max))}(!R||!O)&&(F(this._getLabelBounds()),("ticks"!==o.bounds||"labels"!==o.ticks.source)&&F(this.getMinMax(!1))),f=mt(f)&&!isNaN(f)?f:+a.startOf(Date.now(),c),E=mt(E)&&!isNaN(E)?E:+a.endOf(Date.now(),c)+1,this.min=Math.min(f,E-1),this.max=Math.max(f+1,E)}_getLabelBounds(){const o=this.getLabelTimestamps();let a=Number.POSITIVE_INFINITY,c=Number.NEGATIVE_INFINITY;return o.length&&(a=o[0],c=o[o.length-1]),{min:a,max:c}}buildTicks(){const o=this.options,a=o.time,c=o.ticks,f="labels"===c.source?this.getLabelTimestamps():this._generate();"ticks"===o.bounds&&f.length&&(this.min=this._userMin||f[0],this.max=this._userMax||f[f.length-1]);const E=this.min,O=function(g,l,o){let a=0,c=g.length;for(;a<c&&g[a]<l;)a++;for(;c>a&&g[c-1]>o;)c--;return a>0||c<g.length?g.slice(a,c):g}(f,E,this.max);return this._unit=a.unit||(c.autoSkip?Re(a.minUnit,this.min,this.max,this._getLabelCapacity(E)):function(g,l,o,a,c){for(let f=jt.length-1;f>=jt.indexOf(o);f--){const E=jt[f];if(Yt[E].common&&g._adapter.diff(c,a,E)>=l-1)return E}return jt[o?jt.indexOf(o):0]}(this,O.length,a.minUnit,this.min,this.max)),this._majorUnit=c.major.enabled&&"year"!==this._unit?function(g){for(let l=jt.indexOf(g)+1,o=jt.length;l<o;++l)if(Yt[jt[l]].common)return jt[l]}(this._unit):void 0,this.initOffsets(f),o.reverse&&O.reverse(),ji(this,O,this._majorUnit)}initOffsets(o){let f,E,a=0,c=0;this.options.offset&&o.length&&(f=this.getDecimalForValue(o[0]),a=1===o.length?1-f:(this.getDecimalForValue(o[1])-f)/2,E=this.getDecimalForValue(o[o.length-1]),c=1===o.length?E:(E-this.getDecimalForValue(o[o.length-2]))/2);const R=o.length<3?.5:.25;a=je(a,0,R),c=je(c,0,R),this._offsets={start:a,end:c,factor:1/(a+1+c)}}_generate(){const o=this._adapter,a=this.min,c=this.max,f=this.options,E=f.time,R=E.unit||Re(E.minUnit,a,c,this._getLabelCapacity(a)),O=Ut(E.stepSize,1),F="week"===R&&E.isoWeekday,J=ce(F)||!0===F,dt={};let qt,Ee,Ft=a;if(J&&(Ft=+o.startOf(Ft,"isoWeek",F)),Ft=+o.startOf(Ft,J?"day":R),o.diff(c,a,R)>1e5*O)throw new Error(a+" and "+c+" are too far apart with stepSize of "+O+" "+R);const De="data"===f.ticks.source&&this.getDataTimestamps();for(qt=Ft,Ee=0;qt<c;qt=+o.add(qt,O,R),Ee++)pi(dt,qt,De);return(qt===c||"ticks"===f.bounds||1===Ee)&&pi(dt,qt,De),Object.keys(dt).sort((Ge,We)=>Ge-We).map(Ge=>+Ge)}getLabelForValue(o){const c=this.options.time;return this._adapter.format(o,c.tooltipFormat?c.tooltipFormat:c.displayFormats.datetime)}_tickFormatFunction(o,a,c,f){const E=this.options,R=E.time.displayFormats,O=this._unit,F=this._majorUnit,dt=F&&R[F],Ft=c[a],Ee=this._adapter.format(o,f||(F&&dt&&Ft&&Ft.major?dt:O&&R[O])),De=E.ticks.callback;return De?ht(De,[Ee,a,c],this):Ee}generateTickLabels(o){let a,c,f;for(a=0,c=o.length;a<c;++a)f=o[a],f.label=this._tickFormatFunction(f.value,a,o)}getDecimalForValue(o){return null===o?NaN:(o-this.min)/(this.max-this.min)}getPixelForValue(o){const a=this._offsets,c=this.getDecimalForValue(o);return this.getPixelForDecimal((a.start+c)*a.factor)}getValueForPixel(o){const a=this._offsets,c=this.getDecimalForPixel(o)/a.factor-a.end;return this.min+c*(this.max-this.min)}_getLabelSize(o){const a=this.options.ticks,c=this.ctx.measureText(o).width,f=wi(this.isHorizontal()?a.maxRotation:a.minRotation),E=Math.cos(f),R=Math.sin(f),O=this._resolveTickFontOptions(0).size;return{w:c*E+O*R,h:c*R+O*E}}_getLabelCapacity(o){const a=this.options.time,c=a.displayFormats,f=c[a.unit]||c.millisecond,E=this._tickFormatFunction(o,0,ji(this,[o],this._majorUnit),f),R=this._getLabelSize(E),O=Math.floor(this.isHorizontal()?this.width/R.w:this.height/R.h)-1;return O>0?O:1}getDataTimestamps(){let a,c,o=this._cache.data||[];if(o.length)return o;const f=this.getMatchingVisibleMetas();if(this._normalized&&f.length)return this._cache.data=f[0].controller.getAllParsedValues(this);for(a=0,c=f.length;a<c;++a)o=o.concat(f[a].controller.getAllParsedValues(this));return this._cache.data=this.normalize(o)}getLabelTimestamps(){const o=this._cache.labels||[];let a,c;if(o.length)return o;const f=this.getLabels();for(a=0,c=f.length;a<c;++a)o.push(Se(this,f[a]));return this._cache.labels=this._normalized?o:this.normalize(o)}normalize(o){return Lr(o.sort(re))}}return g.id="time",g.defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",major:{enabled:!1}}},g})();function rn(g,l,o){let f,E,R,O,a=0,c=g.length-1;o?(l>=g[a].pos&&l<=g[c].pos&&({lo:a,hi:c}=zo(g,"pos",l)),({pos:f,time:R}=g[a]),({pos:E,time:O}=g[c])):(l>=g[a].time&&l<=g[c].time&&({lo:a,hi:c}=zo(g,"time",l)),({time:f,pos:R}=g[a]),({time:E,pos:O}=g[c]));const F=E-f;return F?R+(O-R)*(l-f)/F:R}class Mn extends nn{constructor(l){super(l),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const l=this._getTimestampsForTable(),o=this._table=this.buildLookupTable(l);this._minPos=rn(o,this.min),this._tableRange=rn(o,this.max)-this._minPos,super.initOffsets(l)}buildLookupTable(l){const{min:o,max:a}=this,c=[],f=[];let E,R,O,F,J;for(E=0,R=l.length;E<R;++E)F=l[E],F>=o&&F<=a&&c.push(F);if(c.length<2)return[{time:o,pos:0},{time:a,pos:1}];for(E=0,R=c.length;E<R;++E)J=c[E+1],O=c[E-1],F=c[E],Math.round((J+O)/2)!==F&&f.push({time:F,pos:E/(R-1)});return f}_getTimestampsForTable(){let l=this._cache.all||[];if(l.length)return l;const o=this.getDataTimestamps(),a=this.getLabelTimestamps();return l=o.length&&a.length?this.normalize(o.concat(a)):o.length?o:a,l=this._cache.all=l,l}getDecimalForValue(l){return(rn(this._table,l)-this._minPos)/this._tableRange}getValueForPixel(l){const o=this._offsets,a=this.getDecimalForPixel(l)/o.factor-o.end;return rn(this._table,a*this._tableRange+this._minPos,!0)}}Mn.id="timeseries",Mn.defaults=nn.defaults,si.register(ba,Lu,fi,Object.freeze({__proto__:null,CategoryScale:an,LinearScale:In,LogarithmicScale:mr,RadialLinearScale:ft,TimeScale:nn,TimeSeriesScale:Mn}));const Kr=si;var ls=m(54968),go=m(70262),xr=m(93075),Fo=m(68675),Ra=m(54004),Ls=m(39841),se=m(5e3),Fr=m(48966),Ns=m(28017),$s=m(53251),xc=m(67322),kc=m(77531),Hu=m(91079),Qu=m(69808),Ah=m(47423),Il=m(63874),od=m(90508);function Id(g,l){if(1&g&&(se.TgZ(0,"mat-option",14),se._uU(1),se.qZA()),2&g){const o=l.$implicit;se.Q6J("value",o),se.xp6(1),se.hij(" ",o," ")}}function Na(g,l){if(1&g&&(se.TgZ(0,"mat-option",14),se._uU(1),se.qZA()),2&g){const o=l.$implicit;se.Q6J("value",o),se.xp6(1),se.hij(" ",o," ")}}function Qd(g,l){if(1&g){const o=se.EpF();se.TgZ(0,"tr"),se.TgZ(1,"td"),se._uU(2),se.qZA(),se.TgZ(3,"td"),se.TgZ(4,"button",15),se.NdJ("click",function(){const f=se.CHM(o).$implicit;return se.oxw().chooseDemo(f)}),se._uU(5),se.qZA(),se.qZA(),se.TgZ(6,"td"),se.TgZ(7,"b"),se._uU(8),se.qZA(),se._uU(9),se.qZA(),se.qZA()}if(2&g){const o=l.$implicit,a=l.index;let c,f;se.xp6(2),se.hij(" ",a+1," "),se.xp6(3),se.hij(" ",o.description," "),se.xp6(3),se.Oqu(null==o.categories||null==(c=o.categories.split(";"))?null:c.join(", ")),se.xp6(1),se.hij(" ",null==o.blocks||null==(f=o.blocks.split(";"))?null:f.join(", ")," ")}}function jh(g,l){if(1&g){const o=se.EpF();se.TgZ(0,"button",15),se.NdJ("click",function(){return se.CHM(o),se.oxw().Verify()}),se.TgZ(1,"mat-icon"),se._uU(2,"save"),se.qZA(),se._uU(3," Verify LocalAPI "),se.qZA()}}function Yh(g,l){if(1&g){const o=se.EpF();se.TgZ(0,"tr"),se.TgZ(1,"td"),se._uU(2),se.qZA(),se.TgZ(3,"td"),se.TgZ(4,"button",15),se.NdJ("click",function(){const f=se.CHM(o).$implicit;return se.oxw().chooseDemo(f)}),se._uU(5),se.qZA(),se.qZA(),se.TgZ(6,"td"),se.TgZ(7,"b"),se._uU(8),se.qZA(),se._uU(9),se.qZA(),se.qZA()}if(2&g){const o=l.$implicit,a=l.index;let c,f;se.xp6(2),se.hij(" ",a+1," "),se.xp6(3),se.hij(" ",o.description||o.id," "),se.xp6(3),se.Oqu(null==o.categories||null==(c=o.categories.split(";"))?null:c.join(", ")),se.xp6(1),se.hij(" ",null==o.blocks||null==(f=o.blocks.split(";"))?null:f.join(", ")," ")}}let Oh=(()=>{class g{constructor(o,a){this.dialogRef=o,this.DetailsApp=a,this.BlocksLocal=[],this.demos=[],this.demosCategories=new Map,this.demosBlocks=new Map,this.demosArray=null,this.myBlocks=new xr.NI,this.optionsBlocks=[],this.filteredOptionsBlocks=null,this.myCategories=new xr.NI,this.mySearchText=new xr.NI,this.optionsCategories=[],this.filteredOptionsCategories=null,this.InitiateDemos(),this.loadFromLocalAPI()}loadFromLocalAPI(){var o,a;(null===(o=this.DetailsApp.LocalAPI)||void 0===o?void 0:o.WasAlive)&&(null===(a=this.DetailsApp.LocalAPI)||void 0===a||a.LoadBlocks().subscribe(c=>{this.BlocksLocal=c}))}Verify(){var o;null===(o=this.DetailsApp.LocalAPI)||void 0===o||o.IsAlive().subscribe(a=>{a&&this.loadFromLocalAPI()})}InitiateDemos(){var o=this.DetailsApp.demoBlocks;this.demos=o.sort((a,c)=>a.description.localeCompare(c.description)),this.optionsCategories=[...new Set(o.map(a=>a.categories).filter(a=>(null==a?void 0:a.length)>0).flatMap(a=>a.split(";")).filter(a=>(null==a?void 0:a.length)>0).sort((a,c)=>a.toLocaleLowerCase().localeCompare(c.toLocaleLowerCase())))],this.optionsBlocks=[...new Set(o.map(a=>a.blocks).filter(a=>(null==a?void 0:a.length)>0).flatMap(a=>a.split(";")).filter(a=>(null==a?void 0:a.length)>0).sort((a,c)=>a.toLowerCase().localeCompare(c.toLowerCase())))],this.filteredOptionsBlocks=this.myBlocks.valueChanges.pipe((0,Fo.O)(""),(0,Ra.U)(a=>{var c=(a||"").trim();return this._filter(c,this.optionsBlocks)})),this.filteredOptionsCategories=this.myCategories.valueChanges.pipe((0,Fo.O)(""),(0,Ra.U)(a=>{var c=(a||"").trim();return this._filter(c,this.optionsCategories)})),this.demosArray=(0,Ls.a)([this.myBlocks.valueChanges.pipe((0,Fo.O)("")),this.myCategories.valueChanges.pipe((0,Fo.O)("")),this.mySearchText.valueChanges.pipe((0,Fo.O)(""))]).pipe((0,Fo.O)(this.demos),(0,Ra.U)(([a,c,f])=>((Array.isArray(a)||"object"==typeof a)&&(a=""),(Array.isArray(c)||"object"==typeof c)&&(c=""),(Array.isArray(f)||"object"==typeof f)&&(f=""),a=(a||"").trim().toLowerCase(),c=(c||"").trim().toLowerCase(),f=(null==f?void 0:f.trim().toLowerCase())||"",this.demos.filter(R=>{var O,F,J,dt,Ft,qt;return(0==a.length||(null===(O=R.blocks)||void 0===O?void 0:O.toLowerCase().indexOf(a))>-1)&&(0==c.length||(null===(F=R.categories)||void 0===F?void 0:F.toLowerCase().indexOf(c))>-1)&&(0==f.length||(null===(J=R.description)||void 0===J?void 0:J.toLowerCase().indexOf(f))>-1||(null===(dt=R.blocks)||void 0===dt?void 0:dt.toLowerCase().indexOf(f))>-1||(null===(Ft=R.categories)||void 0===Ft?void 0:Ft.toLowerCase().indexOf(f))>-1||(null===(qt=R.id)||void 0===qt?void 0:qt.toLowerCase().indexOf(f))>-1)}))))}ngOnInit(){}_filter(o,a){const c=o.toLowerCase();return 0==c.length?a:a.filter(f=>f.toLowerCase().includes(c))}chooseDemo(o){return this.dialogRef.close(o)}Close(){this.dialogRef.close()}}return g.\u0275fac=function(o){return new(o||g)(se.Y36(Fr.so),se.Y36(Ns.d))},g.\u0275cmp=se.Xpm({type:g,selectors:[["app-find-saved-blocks"]],decls:52,vars:16,consts:[["label","Demos"],[1,"example-form"],["appearance","fill",1,"example-full-width"],["type","text","placeholder","Pick one","aria-label","Categories","matInput","",3,"formControl","matAutocomplete"],["autoCategories","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],["type","text","placeholder","Pick one","aria-label","Blocks","matInput","",3,"formControl","matAutocomplete"],["autoBlocks","matAutocomplete"],["type","text","placeholder","enter text to search","matInput","",3,"formControl"],[4,"ngFor","ngForOf"],["label","Saved on local"],["mat-raised-button","","color","primary",3,"click",4,"ngIf"],["label","CLOUD","disabled","disabled"],["mat-raised-button","","id","blocks","color","accent",3,"click"],[3,"value"],["mat-raised-button","","color","primary",3,"click"]],template:function(o,a){if(1&o&&(se.TgZ(0,"mat-tab-group"),se.TgZ(1,"mat-tab",0),se.TgZ(2,"form",1),se.TgZ(3,"mat-form-field",2),se.TgZ(4,"mat-label"),se._uU(5,"Categories"),se.qZA(),se._UZ(6,"input",3),se.TgZ(7,"mat-autocomplete",null,4),se.YNc(9,Id,2,2,"mat-option",5),se.ALo(10,"async"),se.qZA(),se.qZA(),se.TgZ(11,"mat-form-field",2),se.TgZ(12,"mat-label"),se._uU(13,"Blocks"),se.qZA(),se._UZ(14,"input",6),se.TgZ(15,"mat-autocomplete",null,7),se.YNc(17,Na,2,2,"mat-option",5),se.ALo(18,"async"),se.qZA(),se.qZA(),se.TgZ(19,"mat-form-field",2),se.TgZ(20,"mat-label"),se._uU(21,"Search"),se.qZA(),se._UZ(22,"input",8),se.qZA(),se.qZA(),se.TgZ(23,"table"),se.TgZ(24,"thead"),se.TgZ(25,"tr"),se.TgZ(26,"th"),se._uU(27,"Number"),se.qZA(),se.TgZ(28,"th"),se._uU(29,"Name"),se.qZA(),se.TgZ(30,"th"),se._uU(31,"Details"),se.qZA(),se.qZA(),se.qZA(),se.YNc(32,Qd,10,4,"tr",9),se.ALo(33,"async"),se.qZA(),se.qZA(),se.TgZ(34,"mat-tab",10),se.YNc(35,jh,4,0,"button",11),se.TgZ(36,"table"),se.TgZ(37,"thead"),se.TgZ(38,"tr"),se.TgZ(39,"th"),se._uU(40,"Number"),se.qZA(),se.TgZ(41,"th"),se._uU(42,"Name"),se.qZA(),se.TgZ(43,"th"),se._uU(44,"Details"),se.qZA(),se.qZA(),se.qZA(),se.YNc(45,Yh,10,4,"tr",9),se.qZA(),se.qZA(),se.TgZ(46,"mat-tab",12),se._uU(47," Saved on Cloud "),se.qZA(),se.qZA(),se.TgZ(48,"button",13),se.NdJ("click",function(){return a.Close()}),se.TgZ(49,"mat-icon"),se._uU(50,"close"),se.qZA(),se._uU(51," Close\n"),se.qZA()),2&o){const c=se.MAs(8),f=se.MAs(16);se.xp6(6),se.Q6J("formControl",a.myCategories)("matAutocomplete",c),se.xp6(3),se.Q6J("ngForOf",se.lcZ(10,10,a.filteredOptionsCategories)),se.xp6(5),se.Q6J("formControl",a.myBlocks)("matAutocomplete",f),se.xp6(3),se.Q6J("ngForOf",se.lcZ(18,12,a.filteredOptionsBlocks)),se.xp6(5),se.Q6J("formControl",a.mySearchText),se.xp6(10),se.Q6J("ngForOf",se.lcZ(33,14,a.demosArray)),se.xp6(3),se.Q6J("ngIf",!(null!=a.DetailsApp.LocalAPI&&a.DetailsApp.LocalAPI.WasAlive)),se.xp6(10),se.Q6J("ngForOf",a.BlocksLocal)}},directives:[$s.SP,$s.uX,xr._Y,xr.JL,xr.F,xc.KE,xc.hX,kc.Nt,xr.Fj,Hu.ZL,xr.JJ,xr.oH,Hu.XC,Qu.sg,Qu.O5,Ah.lW,Il.Hw,od.ey],pipes:[Qu.Ov],styles:["table[_ngcontent-%COMP%], th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{border:1px solid}table[_ngcontent-%COMP%]{width:100%;height:480px;margin:0 auto;display:block;overflow-x:auto;border-spacing:0}tbody[_ngcontent-%COMP%]{white-space:nowrap}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{padding:5px 10px;border-top-width:0;border-left-width:0}th[_ngcontent-%COMP%]{position:sticky;top:0;background:#fff;vertical-align:bottom}th[_ngcontent-%COMP%]:last-child, td[_ngcontent-%COMP%]:last-child{border-right-width:0}tr[_ngcontent-%COMP%]:last-child   td[_ngcontent-%COMP%]{border-bottom-width:0}"]}),g})();class Xh{constructor(){}definitionBlocks(l,o){l.headersbeforehttp={init:function(){this.appendDummyInput().appendField("Add Headers"),this.appendValueInput("HttpDomain").setCheck("String").appendField("Domain"),this.appendValueInput("HeaderName").setCheck("String").appendField("Header Name"),this.appendValueInput("HeaderValue").setCheck("String").appendField("Header Value"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip("at domain put (localSite) or *")}},o.headersbeforehttp=function(f){var E=o.valueToCode(f,"HttpDomain",0)||"(localSite)",F="\n";return F+="{\n",F+="if(!("+E+" in headersForDomain))\n",F+="{\n",F+="headersForDomain["+E+"]=[];\n",F+="};\n",F+="var arr = headersForDomain["+E+"];\n",F+="arr.push({name:"+o.valueToCode(f,"HeaderName",0)+", value:"+o.valueToCode(f,"HeaderValue",0)+"});\n",F+='//alert("a" + JSON.stringify(arr)+"a");\n',(F+='//alert("a" + JSON.stringify(headersForDomain['+E+'])+"a");\n')+"};\n"},l.httprequest={init:function(){this.appendDummyInput().appendField(new e.FieldDropdown([["JSON","JSON"],["Text","Text"]]),"TypeOutput").appendField("HttpRequest"),this.appendValueInput("TheUrl").setCheck(null).appendField(new e.FieldDropdown([["GET","GET"],["POST","POST"],["PUT","PUT"],["DELETE","DELETE"]]),"TypeRequest").appendField("URL"),this.appendValueInput("Data").setCheck(null).appendField("Data"),this.setOutput(!0,null)}},o.httprequest=function(f){var E=f.getFieldValue("TypeOutput"),R=f.getFieldValue("TypeRequest"),O=o.valueToCode(f,"TheUrl",0),F=o.valueToCode(f,"Data",0),J="";switch(R.toString()){case"GET":J="(function(url){ var res=JSON.parse(getXhr(url)); if(res.statusOK) return res.text;errHandler(JSON.stringify(res)); throw res;}("+O+") )";break;case"POST":J="(function(url,data){ var res=JSON.parse(postXhr(url,JSON.stringify(data))); if(res.statusOK) return res.text;errHandler(JSON.stringify(res)); throw res;}("+O,F&&(J+=","+F),J+=") )";break;case"DELETE":J="(function(url,data){ var res=JSON.parse(deleteXhr(url,JSON.stringify(data))); if(res.statusOK) return res.text;errHandler(JSON.stringify(res)); throw res;}("+O,F&&(J+=","+F),J+=") )";break;case"PUT":J="(function(url,data){ var res=JSON.parse(putXhr(url,JSON.stringify(data))); if(res.statusOK) return res.text;errHandler(JSON.stringify(res)); throw res;}("+O,F&&(J+=","+F),J+=") )";break;default:alert("Do not understand : "+R.toString())}var dt=J;return"JSON"===E&&(dt="JSON.parse("+dt+")"),[dt,99]}}fieldXML(){return'\n    \n    <block type="headersbeforehttp">\n    <value name="HttpDomain">\n        <shadow type="text">\n            <field name="TEXT">(localSite)</field>\n        </shadow>\n    </value>\n    <value name="HeaderName">\n        <shadow type="text">\n            <field name="TEXT">Authorization</field>\n        </shadow>\n    </value>\n    <value name="HeaderValue">\n        <shadow type="text_join">\n\n        </shadow>\n    </value>\n</block>\n<block type="text_print">\n<value name="TEXT">\n\n    <block type="httprequest">\n    <value name="TheUrl">\n        <shadow type="text">\n            <field name="TEXT">https://httpbin.org/get</field>\n        </shadow>\n    </value>\n</block>\n</value>\n</block>  \n  }\n}\n'}}class kp{fieldXML(){return'\n    \n    <category name="Blockly Core">\n\n    <category id="catLogic" colour="210" name="Logic">\n        <block type="controls_if"></block>\n        <block type="logic_compare"></block>\n        <block type="logic_operation"></block>\n        <block type="logic_negate"></block>\n        <block type="logic_boolean"></block>\n        <block type="logic_null"></block>\n        <block type="logic_ternary"></block>\n    </category>\n    <category id="catLoops" colour="120" name="Loops">\n        <block type="controls_repeat_ext">\n            <value name="TIMES">\n                <shadow type="math_number">\n                    <field name="NUM">10</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="controls_whileUntil"></block>\n        <block type="controls_for">\n            <value name="FROM">\n                <shadow type="math_number">\n                    <field name="NUM">1</field>\n                </shadow>\n            </value>\n            <value name="TO">\n                <shadow type="math_number">\n                    <field name="NUM">10</field>\n                </shadow>\n            </value>\n            <value name="BY">\n                <shadow type="math_number">\n                    <field name="NUM">1</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="controls_forEach"></block>\n        <block type="controls_flow_statements"></block>\n    </category>\n    <category id="catMath" colour="230" name="Math">\n        <block type="math_number"></block>\n        <block type="math_arithmetic">\n            <value name="A">\n                <shadow type="math_number">\n                    <field name="NUM">1</field>\n                </shadow>\n            </value>\n            <value name="B">\n                <shadow type="math_number">\n                    <field name="NUM">1</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="math_single">\n            <value name="NUM">\n                <shadow type="math_number">\n                    <field name="NUM">9</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="math_trig">\n            <value name="NUM">\n                <shadow type="math_number">\n                    <field name="NUM">45</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="math_constant"></block>\n        <block type="math_number_property">\n            <value name="NUMBER_TO_CHECK">\n                <shadow type="math_number">\n                    <field name="NUM">0</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="math_change">\n            <value name="DELTA">\n                <shadow type="math_number">\n                    <field name="NUM">1</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="math_round">\n            <value name="NUM">\n                <shadow type="math_number">\n                    <field name="NUM">3.1</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="math_on_list"></block>\n        <block type="math_modulo">\n            <value name="DIVIDEND">\n                <shadow type="math_number">\n                    <field name="NUM">64</field>\n                </shadow>\n            </value>\n            <value name="DIVISOR">\n                <shadow type="math_number">\n                    <field name="NUM">10</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="math_constrain">\n            <value name="VALUE">\n                <shadow type="math_number">\n                    <field name="NUM">50</field>\n                </shadow>\n            </value>\n            <value name="LOW">\n                <shadow type="math_number">\n                    <field name="NUM">1</field>\n                </shadow>\n            </value>\n            <value name="HIGH">\n                <shadow type="math_number">\n                    <field name="NUM">100</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="math_random_int">\n            <value name="FROM">\n                <shadow type="math_number">\n                    <field name="NUM">1</field>\n                </shadow>\n            </value>\n            <value name="TO">\n                <shadow type="math_number">\n                    <field name="NUM">100</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="math_random_float"></block>\n    </category>\n    <category id="catText" colour="160" name="Text">\n        <block type="text"></block>\n        <block type="text_join"></block>\n        <block type="text_append">\n            <value name="TEXT">\n                <shadow type="text"></shadow>\n            </value>\n        </block>\n        <block type="text_length">\n            <value name="VALUE">\n                <shadow type="text">\n                    <field name="TEXT">abc</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="text_isEmpty">\n            <value name="VALUE">\n                <shadow type="text">\n                    <field name="TEXT"></field>\n                </shadow>\n            </value>\n        </block>\n        <block type="text_indexOf">\n            <value name="VALUE">\n                <block type="variables_get">\n                    <field name="VAR">text</field>\n                </block>\n            </value>\n            <value name="FIND">\n                <shadow type="text">\n                    <field name="TEXT">abc</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="text_charAt">\n            <value name="VALUE">\n                <block type="variables_get">\n                    <field name="VAR">text</field>\n                </block>\n            </value>\n        </block>\n        <block type="text_getSubstring">\n            <value name="STRING">\n                <block type="variables_get">\n                    <field name="VAR">text</field>\n                </block>\n            </value>\n        </block>\n        <block type="text_changeCase">\n            <value name="TEXT">\n                <shadow type="text">\n                    <field name="TEXT">abc</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="text_trim">\n            <value name="TEXT">\n                <shadow type="text">\n                    <field name="TEXT">abc</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="text_print">\n            <value name="TEXT">\n                <shadow type="text">\n                    <field name="TEXT">abc</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="text_prompt_ext">\n            <value name="TEXT">\n                <shadow type="text">\n                    <field name="TEXT">abc</field>\n                </shadow>\n            </value>\n        </block>\n    </category>\n    <category id="catLists" colour="260" name="Lists">\n        <block type="lists_create_with">\n            <mutation items="0"></mutation>\n        </block>\n        <block type="lists_create_with"></block>\n        <block type="lists_repeat">\n            <value name="NUM">\n                <shadow type="math_number">\n                    <field name="NUM">5</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="lists_length"></block>\n        <block type="lists_isEmpty"></block>\n        <block type="lists_indexOf">\n            <value name="VALUE">\n                <block type="variables_get">\n                    <field name="VAR">list</field>\n                </block>\n            </value>\n        </block>\n        <block type="lists_getIndex">\n            <value name="VALUE">\n                <block type="variables_get">\n                    <field name="VAR">list</field>\n                </block>\n            </value>\n        </block>\n        <block type="lists_setIndex">\n            <value name="LIST">\n                <block type="variables_get">\n                    <field name="VAR">list</field>\n                </block>\n            </value>\n        </block>\n        <block type="lists_getSublist">\n            <value name="LIST">\n                <block type="variables_get">\n                    <field name="VAR">list</field>\n                </block>\n            </value>\n        </block>\n        <block type="lists_split">\n            <value name="DELIM">\n                <shadow type="text">\n                    <field name="TEXT">,</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="lists_sort"></block>\n    </category>\n    <category id="catColour" colour="20" name="Color">\n        <block type="colour_picker"></block>\n        <block type="colour_random"></block>\n        <block type="colour_rgb">\n            <value name="RED">\n                <shadow type="math_number">\n                    <field name="NUM">100</field>\n                </shadow>\n            </value>\n            <value name="GREEN">\n                <shadow type="math_number">\n                    <field name="NUM">50</field>\n                </shadow>\n            </value>\n            <value name="BLUE">\n                <shadow type="math_number">\n                    <field name="NUM">0</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="colour_blend">\n            <value name="COLOUR1">\n                <shadow type="colour_picker">\n                    <field name="COLOUR">#ff0000</field>\n                </shadow>\n            </value>\n            <value name="COLOUR2">\n                <shadow type="colour_picker">\n                    <field name="COLOUR">#3333ff</field>\n                </shadow>\n            </value>\n            <value name="RATIO">\n                <shadow type="math_number">\n                    <field name="NUM">0.5</field>\n                </shadow>\n            </value>\n        </block>\n    </category>\n    <category id="catVariables" colour="330" custom="VARIABLE" name="Variables"></category>\n    <category id="catFunctions" colour="290" custom="PROCEDURE" name="Functions"></category>\n</category>\n\n      '}}class Lp{definitionBlocks(l,o){l.trycatchfinally={init:function(){this.appendStatementInput("TRY").appendField("try"),this.appendStatementInput("CATCH").appendField("catch"),this.appendStatementInput("FINALLY").appendField("finally"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null)}},o.trycatchfinally=function(f){var F="try {\n"+o.statementToCode(f,"TRY")+"}\n";return(F+="catch(err){\n errHandler(JSON.stringify(err));\n"+o.statementToCode(f,"CATCH")+"\n}")+"finally{\n "+o.statementToCode(f,"FINALLY")+"\n}\n"}}fieldXML(){return'\n    \n    <block type="trycatchfinally">\n    \n</block>\n'}}class Rr{definitionBlocks(l,o){l.ttsBlock={init:function(){this.appendValueInput("NAME").setCheck(null).appendField("Voice").appendField(new e.FieldDropdown(this.generateOptions),"voiceSelected"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(230),this.setTooltip(""),this.setHelpUrl("")},generateOptions:function(){if(window.speechSynthesis){var c=window.speechSynthesis.getVoices().map((f,E)=>[f.name,"voice"+E]);if(c.length>0)return c}return[["no voice","NoVoice"]]}},o.ttsBlock=function(a){var c=a.getFieldValue("voiceSelected");return"NoVoice"==(c=c.replace("voice",""))&&(c="-1"),"speakDefault("+o.valueToCode(a,"NAME",o.ORDER_ATOMIC)+","+c+");\n"}}fieldXML(){return'<block type="ttsBlock">\n        <value name="NAME">\n            <shadow type="text">\n            <field name="TEXT">Hello</field></shadow>\n        </value>       \n        </block>\n'}}class xh{definitionBlocks(l,o){l.pianoBlock={init:function(){this.appendValueInput("Note").setCheck("String").appendField("Note(A-G)"),this.appendValueInput("Sharp").setCheck("Boolean").appendField("#"),this.appendValueInput("Octave").setCheck("Number").appendField("Octave"),this.appendValueInput("Duration").setCheck("Number").appendField("Duration"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(230),this.setTooltip(""),this.setHelpUrl("https://github.com/keithwhor/audiosynth")}},o.pianoBlock=function(a){var c=o.valueToCode(a,"Note",o.ORDER_ATOMIC),O="";return"true"==(o.valueToCode(a,"Sharp",o.ORDER_ATOMIC)||!1)&&(O="#"),"playPiano("+c+O+","+o.valueToCode(a,"Octave",o.ORDER_ATOMIC)+","+(o.valueToCode(a,"Duration",o.ORDER_ATOMIC)||2)+");\n"},l.cmajor={init:function(){this.appendDummyInput().appendField("CMajor "),this.setOutput(!0,"Array"),this.setColour(230),this.setTooltip(""),this.setHelpUrl("")}},o.cmajor=function(a){return['["C","D","E","F","G","A","B"]',o.ORDER_NONE]}}fieldXML(){return'<block type="pianoBlock">\n        <value name="Note">\n            <shadow type="text">\n            <field name="TEXT">C</field></shadow>\n        </value>       \n        <value name="Octave">\n            <shadow type="math_number">\n            <field name="NUM">4</field></shadow>\n        </value>       \n        <value name="Sharp">\n            <shadow type="logic_boolean">\n            <field name="BOOL">FALSE</field></shadow>\n        </value>       \n        \n        <value name="Duration">\n            <shadow type="math_number">\n            <field name="NUM">2</field></shadow>\n        </value>       \n        </block>\n        <block type="cmajor"></block>\n\n'}}class sd{constructor(){this.definitionBlocks=function(l,o){l.concatList={init:function(){this.appendDummyInput().appendField("concatArray"),this.appendValueInput("LIST1").setCheck("Array"),this.appendValueInput("LIST2").setCheck("Array"),this.setInputsInline(!1),this.setOutput(!0,null),this.setColour(230),this.setTooltip(""),this.setHelpUrl("")}},o.concatList=function(a){var E="";return E+="(function(a1,a2){ return [].concat(a1).concat(a2);})("+(o.valueToCode(a,"LIST1",o.ORDER_MEMBER)||"[]")+","+(o.valueToCode(a,"LIST2",o.ORDER_MEMBER)||"[]")+")",[E+="",o.ORDER_FUNCTION_CALL]},l.filterList={init:function(){this.appendDummyInput().appendField("filterList"),this.appendValueInput("LIST").setCheck("Array"),this.appendValueInput("Logic").setCheck("String").appendField("item=>"),this.setInputsInline(!0),this.setOutput(!0,"Array"),this.setColour(230),this.setTooltip(""),this.setHelpUrl("")}},o.filterList=function(a){var c=o.valueToCode(a,"LIST",o.ORDER_MEMBER)||"[]",f=o.valueToCode(a,"Logic",o.ORDER_ATOMIC);"string"==typeof f&&(f=f.substr(1,f.length-2));var E="";return E+='(function(t){ if (typeof t === "string") return JSON.parse(t);  return t;}('+c+")).filter(function (item){ return "+f+";})",[E+="",o.ORDER_FUNCTION_CALL]},l.mapList={init:function(){this.appendDummyInput().appendField("mapList"),this.appendValueInput("LIST").setCheck("Array"),this.appendValueInput("Logic").setCheck("String").appendField("item=>"),this.setInputsInline(!0),this.setOutput(!0,"Array"),this.setColour(230),this.setTooltip(""),this.setHelpUrl("")}},o.mapList=function(a){var c=o.valueToCode(a,"LIST",o.ORDER_MEMBER)||"[]",f=o.valueToCode(a,"Logic",o.ORDER_ATOMIC);"string"==typeof f&&(f=f.substr(1,f.length-2));var E="";return E+='(function(t){ if (typeof t === "string") return JSON.parse(t);  return t;}('+c+")).map(function (item){ return "+f+";})",[E+="",o.ORDER_FUNCTION_CALL]},l.reduceList={init:function(){this.appendDummyInput().appendField("reduceList"),this.appendValueInput("LIST").setCheck("Array"),this.appendValueInput("initValue").setCheck(null).appendField("initialValue"),this.appendValueInput("Logic").setCheck("String").appendField("callback(acc,curVal,index, array)=>"),this.setInputsInline(!0),this.setOutput(!0,null),this.setColour(230),this.setTooltip(""),this.setHelpUrl("")}},o.reduceList=function(a){var c=o.valueToCode(a,"LIST",o.ORDER_MEMBER)||"[]",f="";try{f=o.valueToCode(a,"initValue",o.ORDER_ATOMIC)}catch(O){window.alert(O)}var E=o.valueToCode(a,"Logic",o.ORDER_ATOMIC);"string"==typeof E&&(E=E.substr(1,E.length-2));var R="";return R+='(function(t){ if (typeof t === "string") return JSON.parse(t);  return t;}('+c+")).reduce(function (acc,curVal,index,array){ "+E+";}",f&&f.toString().length>0&&(R+=","+f),R+=")",[R+="",o.ORDER_FUNCTION_CALL]}}}fieldXML(){return'\n        <category id="catA" name="Array">\n            <block type="filterList">\n                <value name="LIST">\n                    <block type="variables_get">\n                        <field name="VAR">list</field>\n                    </block>\n                </value>\n                <value name="initValue">\n                    <shadow type="text">\n                        <field name="TEXT"> </field>\n                    </shadow>\n                </value>\n                <value name="Logic">\n                    <shadow type="text">\n                        <field name="TEXT">item.property == "value"</field>\n                    </shadow>\n                </value>\n            </block>\n            <block type="concatList"></block>\n            <block type="mapList">\n            <value name="LIST">\n                <block type="variables_get">\n                    <field name="VAR">list</field>\n                </block>\n            </value>\n            <value name="Logic">\n                <shadow type="text">\n                    <field name="TEXT">item.property</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="reduceList">\n        <value name="LIST">\n        <block type="variables_get">\n                <field name="VAR">list</field>\n            </block>\n            </value>\n            <value name="Logic">\n                <shadow type="text">\n                    <field name="TEXT">...</field>\n                </shadow>\n            </value>\n        </block>\n        </category>\n\n'}}class qd{definitionBlocks(l,o){l.auth0webapidata={init:function(){this.appendDummyInput().appendField("Auth0"),this.appendValueInput("client_id").setCheck(null).appendField("client_id"),this.appendValueInput("client_secret").setCheck(null).appendField("client_secret"),this.appendValueInput("audience").setCheck(null).appendField("audience"),this.appendValueInput("grant_type").setCheck(null).appendField("grant_type"),this.setOutput(!0,null),this.setColour(230),this.setTooltip(""),this.setHelpUrl("")}},o.auth0webapidata=function(f){var J='{"client_id":'+o.valueToCode(f,"client_id",0);return J+=',"client_secret":'+o.valueToCode(f,"client_secret",0),J+=',"audience":'+o.valueToCode(f,"audience",0),J+=',"grant_type":'+o.valueToCode(f,"grant_type",0),[J+="}",99]}}fieldXML(){return'<category id="Auth0" name="Auth0">\n    <block type="auth0webapidata">\n        <value name="client_id">\n            <shadow type="text">\n                <field name="TEXT">client_id?</field>\n            </shadow>\n\n        </value>\n        <value name="client_secret">\n            <shadow type="text">\n                <field name="TEXT">client_secret?</field>\n            </shadow>\n\n        </value>\n        <value name="audience">\n            <shadow type="text">\n                <field name="TEXT">audience</field>\n            </shadow>\n\n        </value>\n        <value name="grant_type">\n            <shadow type="text">\n                <field name="TEXT">grant_type?</field>\n            </shadow>\n\n        </value>\n    </block>\n</category>\n'}}class Kh{definitionBlocks(l,o){l.converttojson={init:function(){this.appendDummyInput().appendField("ConvertToJSON"),this.appendValueInput("ValueToConvert").setCheck(null),this.setInputsInline(!0),this.setOutput(!0,null),this.setTooltip("Convert to JSON"),this.setHelpUrl("")}},o.converttojson=function(f){return["JSON.parse("+o.valueToCode(f,"ValueToConvert",0)+")",99]},l.converttostring={init:function(){this.appendDummyInput().appendField("ConvertToString"),this.appendValueInput("ValueToConvert").setCheck(null),this.setInputsInline(!0),this.setOutput(!0,null),this.setTooltip("Convert to String"),this.setHelpUrl("")}},o.converttostring=function(f){return["JSON.stringify("+o.valueToCode(f,"ValueToConvert",0)+")",99]},l.convertcsv={init:function(){this.appendDummyInput().appendField("Convert To CSV"),this.appendValueInput("ArrayToConvert").setCheck(null).appendField("Array to convert"),this.setOutput(!0,null),this.setTooltip(""),this.setHelpUrl("")}},o.convertcsv=function(f){return["convertToCSV("+o.valueToCode(f,"ArrayToConvert",o.ORDER_ATOMIC)+")",99]}}fieldXML(){return'<block type="converttojson"></block>\n <block type="converttostring"></block>\n <block type="convertcsv"></block>\n'}}class Lc{definitionBlocks(l,o){l.displayCurrentDate={init:function(){this.appendDummyInput().appendField("Current Date"),this.appendDummyInput().appendField("Pick date format:").appendField(new e.FieldDropdown([["Unix format","unix"],["ISO format","iso"],["Human format","human"]]),"dateFormat"),this.setOutput(!0,null),this.setColour(100),this.setTooltip("Show current date."),this.setHelpUrl("https://www.w3schools.com/jsref/jsref_obj_date.asp")}};o.displayCurrentDate=f=>{let R="";switch(f.getFieldValue("dateFormat").toString()){case"human":R="displayDateFormatted('human')";break;case"iso":R="displayDateFormatted('iso')";break;case"unix":R="displayDateFormatted('unix')";break;default:console.log("Date time format not suported")}return[R,99]}}fieldXML(){return'<block type="displayCurrentDate"></block>'}}class Md{definitionBlocks(l,o){l.DateFromText={init:function(){this.appendValueInput("VALUE").appendField("Date from "),this.setOutput(!0,null),this.setHelpUrl("https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date/parse#Date_Time_String_Format")}},o.DateFromText=c=>["Date.parse("+(o.valueToCode(c,"VALUE",o.ORDER_ATOMIC)||"")+")",99]}fieldXML(){return'<block type="DateFromText">\n    <value name="VALUE">\n        <shadow type="text">\n            <field name="TEXT">1970-04-16T02:00:00</field>\n        </shadow>\n    </value>\n</block>\n'}}class tp{definitionBlocks(l,o){l.blockemail={init:function(){this.appendValueInput("from").setCheck(null).appendField("From:"),this.appendValueInput("to").setCheck(null).appendField("To:"),this.appendValueInput("cc").setCheck(null).appendField("CC:"),this.appendValueInput("bcc").setCheck(null).appendField("BCC:"),this.appendValueInput("subject").setCheck(null).appendField("Subject:"),this.appendValueInput("body").setCheck(null).appendField("Body:").appendField(new e.FieldDropdown([["HTML","Html"],["TEXT","Text"]]),"NAME"),this.setOutput(!0,null),this.setColour(230),this.setTooltip(""),this.setHelpUrl("")}},l.sendinblue={init:function(){this.appendDummyInput().appendField("SendInBlue"),this.appendValueInput("APIKey").setCheck(null).appendField("ApiKey"),this.appendValueInput("email").setCheck("blockemail").appendField("Email"),this.setColour(230),this.setTooltip("Please see https://account.sendinblue.com/advanced/api"),this.setHelpUrl("https://account.sendinblue.com/advanced/api"),this.setOutput(!0,null)}},o.sendinblue=function(c){var R='window.alert("SendInBlue");\n',O="api.sendinblue.com";return R=`(function(apiKey,email){if(!('${O}' in headersForDomain)){ headersForDomain['${O}']=[]; };\n`,R+=`headersForDomain['${O}'].push({"name":"api-key","value":apiKey});\n`,R+=`headersForDomain['${O}'].push({"name":"Content-Type","value":"application/json"});\n`,R+=`headersForDomain['${O}'].push({"name":"Accept","value":"application/json"});\n`,R+='var sendinblueData={"sender":{"email": email.from }, "to":[{"email":email.to }],"subject":email.subject,"htmlContent": email.body} ;\n',R+="\nwindow.alert(JSON.stringify(sendinblueData));\n",R+=`var res=JSON.parse(postXhr("https://${O}/v3/smtp/email",JSON.stringify(sendinblueData)));if(res.statusOK) return res.text;errHandler(JSON.stringify(res)); throw res;\n`,[R+="})("+o.valueToCode(c,"APIKey",o.ORDER_ATOMIC)+","+o.valueToCode(c,"email",o.ORDER_ATOMIC)+")",o.ORDER_NONE]},o.blockemail=function(c){var f=o.valueToCode(c,"from",o.ORDER_ATOMIC),E=o.valueToCode(c,"to",o.ORDER_ATOMIC),R=o.valueToCode(c,"cc",o.ORDER_ATOMIC),O=o.valueToCode(c,"bcc",o.ORDER_ATOMIC),F=o.valueToCode(c,"subject",o.ORDER_ATOMIC),J=c.getFieldValue("NAME"),Ft="{";return Ft+='"from":'+f+",",Ft+='"to":'+E+",",Ft+='"cc":'+R+",",Ft+='"bcc":'+O+",",Ft+='"subject":'+F+",",Ft+='"body":'+o.valueToCode(c,"body",o.ORDER_ATOMIC)+",",Ft+='"typeEmail":"'+J+'"',[""+(Ft+="}"),o.ORDER_NONE]}}fieldXML(){return'<block type="blockemail">\n        <value name="from">\n            <shadow type="text">\n                <field name="TEXT">test@test.com</field>\n            </shadow>\n        </value>\n        <value name="to">\n            <shadow type="text">\n                <field name="TEXT">ignatandrei@yahoo.com</field>\n            </shadow>\n        </value>\n        <value name="cc">\n            <shadow type="text">\n                <field name="TEXT"></field>\n            </shadow>\n        </value>\n        <value name="bcc">\n            <shadow type="text">\n                <field name="TEXT"></field>\n            </shadow>\n        </value>\n        <value name="subject">\n            <shadow type="text">\n                <field name="TEXT">My test email</field>\n            </shadow>\n        </value>\n        <value name="body">\n            <shadow type="text">\n                <field name="TEXT">This is the body</field>\n            </shadow>\n        </value>\n            </block>\n        <block type="sendinblue">\n        <value name="APIKey">\n            <shadow type="text">\n                <field name="TEXT">Please put here the API Key from SendInBlue</field>\n            </shadow>\n            \n        </value>\n        <value name="email">\n            <shadow type="blockemail">\n            </shadow>\n            \n        </value>\n        \n        </block>\n'}}class ad{definitionBlocks(l,o){l.exportfile={init:function(){this.appendDummyInput().appendField("ExportToFile"),this.appendValueInput("fileName").setCheck(null).appendField("FileName"),this.appendValueInput("contentFile").setCheck(null).appendField("Content"),this.appendValueInput("convertToByte").setCheck("Boolean").appendField("ConvertToByteFromBase64"),this.setInputsInline(!0),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(230),this.setTooltip(""),this.setHelpUrl("")}},o.exportfile=function(f){return"exportToFile("+o.valueToCode(f,"fileName",0)+","+o.valueToCode(f,"contentFile",0)+","+o.valueToCode(f,"convertToByte",0)+");\n"}}fieldXML(){return'<block type="exportfile">\n    <value name="fileName">\n        <shadow type="text">\n            <field name="TEXT">abc</field>\n        </shadow>\n    </value>\n    <value name="convertToByte">\n        <shadow type="logic_boolean">\n            <field name="BOOL">FALSE</field>\n        </shadow>\n    </value>\n</block>\n'}}class mu{constructor(){this.definitionBlocks=function(l,o){l.window_open={init:function(){this.jsonInit({message0:"Open %1",args0:[{type:"input_value",name:"TEXT"}],previousStatement:null,nextStatement:null,style:"text_blocks"})}},o.window_open=function(f){var E=o.valueToCode(f,"TEXT",99)||"''";return"if((typeof "+E+' == "object") && ("to" in '+E+')){open("mailto:'+E.to+'")}else{ open('+E+")};\n"},l.text_message={init:function(){this.jsonInit({message0:"alert %1",args0:[{type:"input_value",name:"TEXT"}],previousStatement:null,nextStatement:null,style:"text_blocks"})}},o.text_message=function(f){return"alert1("+(o.valueToCode(f,"TEXT",99)||"''")+");\n"},l.text_print_return={init:function(){this.appendValueInput("TEXT").setCheck(null).appendField("print return").appendField(new e.FieldLabelSerializable(""),"NAME"),this.setOutput(!0,null),this.setTooltip(""),this.setHelpUrl("")}},o.text_print_return=function(f){var E=o.valueToCode(f,"TEXT",0)||"''";return["(function(){window.alert("+E+");\n;return ("+E+");}())\n",99]},l.valuefromtext={init:function(){this.appendDummyInput().appendField("InputFromText"),this.appendValueInput("IdOfText").setCheck("String").appendField("Text id"),this.appendValueInput("ValueToObtain").setCheck("String").appendField("Property"),this.setOutput(!0,null),this.setColour(230),this.setTooltip(""),this.setHelpUrl("")}},o.valuefromtext=function(f){return["getIDProp("+o.valueToCode(f,"IdOfText",0)+","+(o.valueToCode(f,"ValueToObtain",0)||'"value"')+")",99]}}}fieldXML(){return'<block type="window_open"></block>\n    <block type="valuefromtext">\n        <value name="IdOfText">\n            <shadow type="text">\n                <field name="TEXT">output</field>\n            </shadow>\n        </value>\n        <value name="ValueToObtain">\n            <shadow type="text">\n                <field name="TEXT">value</field>\n            </shadow>\n        </value>\n    </block>\n    <block type="text_print"></block>\n    <block type="text_print_return"></block>  \n    <block type="text_prompt_ext"></block>\n    <block type="text_message"></block>\n    \n    '}}class ld{definitionBlocks(l,o){l.chart_js={init:function(){this.appendDummyInput().appendField("ChartType").appendField(new e.FieldDropdown([["HBar","HBar"],["VBar","VBar"]]),"ChartTypeValue"),this.appendValueInput("ChartTitleValue").setCheck(null).appendField(new e.FieldLabelSerializable("Title"),"ChartTitle"),this.appendValueInput("LabelsValue").setCheck("Array").appendField(new e.FieldLabelSerializable("Labels"),"ChartLabels"),this.appendValueInput("DataSet1Label").setCheck("String").appendField(new e.FieldLabelSerializable("DataSet1 Label"),"DataSetLabel1"),this.appendValueInput("DataSet1Data").setCheck("Array").appendField(new e.FieldLabelSerializable("DataSet1 Data"),"DataSetData1"),this.setOutput(!0,null),this.setColour(230),this.setTooltip(""),this.setHelpUrl("")}},o.chart_js=function(a){var c=a.getFieldValue("ChartTypeValue"),E=(o.valueToCode(a,"ChartTitleValue",o.ORDER_ATOMIC),o.valueToCode(a,"LabelsValue",o.ORDER_ATOMIC)),R=o.valueToCode(a,"DataSet1Label",o.ORDER_ATOMIC),O=o.valueToCode(a,"DataSet1Data",o.ORDER_ATOMIC),F="",J="x";switch(c){case"HBar":F="bar",J="y";break;case"VBar":F="bar";break;default:throw"Unknown chart type:"+c}return[`JSON.stringify({ 'type': '${F}', 'options':{ 'indexAxis':'${J}'},  'data': {  'labels': ${E}, 'datasets': [{ 'backgroundColor': ['green','blue'],'label': ${R}, 'data': ${O} }] } })`,o.ORDER_NONE]}}fieldXML(){return'<block type="chart_js"></block>'}}class cd{definitionBlocks(l,o){l.HTMLheaders={init:function(){this.appendValueInput("NAME").setCheck(null).appendField("Header").appendField(new e.FieldDropdown([["H1","H1"],["H2","H2"],["H3","H3"]]),"NAME"),this.setOutput(!0,null),this.setColour(240),this.setTooltip("string to Header "),this.setHelpUrl("")}},o.HTMLheaders=function(a){var c=a.getFieldValue("NAME");return[`'<${c}>'+ ${o.valueToCode(a,"NAME",o.ORDER_ATOMIC)} + '</${c}>'`,o.ORDER_NONE]},l.HTMLlist={init:function(){this.appendDummyInput().appendField("List ").appendField(new e.FieldDropdown([["OL","ol"],["UL","ul"]]),"listType"),this.appendStatementInput("Content").setCheck(null),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(240),this.setTooltip("list - please add li block "),this.setHelpUrl("")}},o.HTMLlist=function(a){var c=a.getFieldValue("listType");return o.valueToCode(a,"ListType",o.ORDER_ATOMIC),`window.alert('<${c}>');\n;${o.statementToCode(a,"Content")};\n;window.alert('</${c}>');\n`},l.HTMLli={init:function(){this.appendValueInput("NAME").setCheck(null).appendField("LI"),this.setOutput(!0,null),this.setColour(240),this.setTooltip("string to LI"),this.setHelpUrl("")}},o.HTMLli=function(a){return[`'<li>'+ ${o.valueToCode(a,"NAME",o.ORDER_ATOMIC)} + '</li>'`,o.ORDER_NONE]},l.HTMLliStart={init:function(){this.appendDummyInput().appendField("List").appendField(new e.FieldDropdown([["OL","OL"],["UL","UL"]]),"NAME"),this.setColour(240),this.setOutput(!0,null),this.setTooltip("LI start"),this.setHelpUrl("")}},o.HTMLliStart=function(a){return[`'<${a.getFieldValue("NAME")}>'`,o.ORDER_NONE]},l.HTMLliStop={init:function(){this.appendDummyInput().appendField("/List").appendField(new e.FieldDropdown([["OL","OL"],["UL","UL"]]),"NAME"),this.setColour(240),this.setOutput(!0,null),this.setTooltip("LI stop"),this.setHelpUrl("")}},o.HTMLliStop=function(a){return[`'</${a.getFieldValue("NAME")}>'`,o.ORDER_NONE]},l.HTMLlinkFromObject={init:function(){this.appendDummyInput().appendField("Object=>Link").appendField("target").appendField(new e.FieldDropdown([["_blank","_blank"],["_self","_self"],["_parent","_parent"],["_top","_top"]]),"targetDrop"),this.appendValueInput("objectProp").setCheck(null).appendField("objectProp"),this.appendValueInput("textProp").setCheck(null).appendField("textProp"),this.appendValueInput("hrefProp").setCheck(null).appendField("hrefProp"),this.setOutput(!0,null),this.setColour(230),this.setTooltip(""),this.setHelpUrl("")}},o.HTMLlinkFromObject=function(a){var c=a.getFieldValue("targetDrop"),f=o.valueToCode(a,"hrefProp",o.ORDER_MEMBER),E=o.valueToCode(a,"textProp",o.ORDER_ATOMIC),O="(function(obj,text,href){\n";return O+="return '<a href=\"'+ obj[href] ",O+=`+ '" target="${c}"'`,O+="+ '>'+ obj[text] + '</a>' ",[O+="}("+o.valueToCode(a,"objectProp",o.ORDER_ATOMIC)+","+(E=E||f)+","+f+"))",o.ORDER_FUNCTION_CALL]},l.HTMLlink={init:function(){this.appendDummyInput().appendField("A").appendField("target").appendField(new e.FieldDropdown([["_blank","_blank"],["_self","_self"],["_parent","_parent"],["_top","_top"]]),"targetDrop"),this.appendValueInput("HREF").setCheck(null).appendField("href"),this.appendValueInput("text").setCheck(null).appendField("text"),this.setOutput(!0,null),this.setColour(230),this.setTooltip(""),this.setHelpUrl("")}},o.HTMLlink=function(a){var c=a.getFieldValue("targetDrop"),f=o.valueToCode(a,"HREF",o.ORDER_ATOMIC),E=o.valueToCode(a,"text",o.ORDER_ATOMIC),R="'<a href=\"'+"+f;return R+=`+ '" target="${c}"'`,[R+="+ '>'+"+(E=E||f)+"+ '</a> '",o.ORDER_NONE]}}fieldXML(){return'\n    <block type=\'text_print\'>" \n               <value name=\'TEXT\'>" \n                 \n    <block type="HTMLheaders">\n        <value name="NAME">\n            <shadow type="text">\n                <field name="TEXT"></field>\n            </shadow>\n        </value>\n    </block>    \n      </value>\n\n\n      </block>\n        \n<block type="HTMLlist"></block>\n\n<block type=\'text_print\'>" \n<value name=\'TEXT\'>" \n  \n<block type="HTMLli">\n</block>    \n</value>\n</block>\n<block type=\'text_print\'>" \n<value name=\'TEXT\'>" \n\n<block type="HTMLliStart"></block>\n</value>\n</block>    \n<block type=\'text_print\'>" \n<value name=\'TEXT\'>" \n\n<block type="HTMLliStop"></block>\n\n</value>\n</block>    \n\n<block type=\'text_print\'>" \n<value name=\'TEXT\'>" \n\n<block type="HTMLlink">\n<value name="HREF">\n<shadow type="text">\n    <field name="TEXT">http://</field>\n</shadow>\n\n</value>\n<value name="text">\n<shadow type="text">\n    <field name="TEXT">My Text</field>\n</shadow>\n\n</value>\n\n</block>\n</value>\n</block>    \n\n\n<block type=\'text_print\'>" \n<value name=\'TEXT\'>" \n\n<block type="HTMLlinkFromObject">\n<value name="hrefProp">\n<shadow type="text">\n    <field name="TEXT">prop</field>\n</shadow>\n\n</value>\n<value name="textProp">\n<shadow type="text">\n    <field name="TEXT">prop</field>\n</shadow>\n\n</value>\n\n</block>\n</value>\n</block>    \n\n'}}class Jh{definitionBlocks(l,o){l.simpleHtmlparser={init:function(){this.appendValueInput("NAME").setCheck(null).appendField("Find ").appendField(new e.FieldDropdown([["Tables","table"],["Links","a"],["Images","img"],["List","ul,ol"],["Headers","h1,h2,h3,h4,h5,h6"]]),"To"),this.setOutput(!0,null),this.setColour(230),this.setTooltip(""),this.setHelpUrl("")}},o.simpleHtmlparser=function(a){var E="(function(value){ \n";return E+=`var doc  = parseDOMFromStringElements(value,"text/html","${a.getFieldValue("To")}");\n`,E+="return doc;\n",[E+="})("+o.valueToCode(a,"NAME",o.ORDER_ATOMIC)+")",o.ORDER_NONE]}}fieldXML(){return'\n    <block type=\'text_print\'>" \n               <value name=\'TEXT\'>" \n                 \n    <block type="simpleHtmlparser">\n        <value name="NAME">\n            <shadow type="text">\n                <field name="TEXT"></field>\n            </shadow>\n        </value>\n    </block>    \n      </value>\n\n\n      </block>\n        '}}class Np{definitionBlocks(l,o){l.modifyproperty={init:function(){this.appendDummyInput().appendField("Modify "),this.appendValueInput("ObjectToChange").setCheck(null).setAlign(0).appendField(new e.FieldLabelSerializable("object"),"objectName"),this.appendValueInput("PropertyName").setCheck(null).setAlign(1).appendField(new e.FieldLabelSerializable(",property"),"prop"),this.appendValueInput("NewValue").setCheck(null).setAlign(1).appendField(new e.FieldLabelSerializable("toValue"),"newValue"),this.setInputsInline(!0),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip(""),this.setHelpUrl("")}},o.modifyproperty=function(R){return o.valueToCode(R,"ObjectToChange",0)+"["+o.valueToCode(R,"PropertyName",0)+"]="+o.valueToCode(R,"NewValue",0)+";"},l.getproperty={init:function(){this.appendDummyInput().appendField("Get from"),this.appendValueInput("ObjectToChange").setCheck(null).setAlign(0).appendField(new e.FieldLabelSerializable("object"),"objectName"),this.appendValueInput("PropertyName").setCheck(null).setAlign(1).appendField(new e.FieldLabelSerializable("property"),"prop"),this.setInputsInline(!0),this.setOutput(!0,null)}},o.getproperty=function(R){return['(function(t){ if (typeof t === "string") return JSON.parse(t);  return t;}('+o.valueToCode(R,"ObjectToChange",0)+"))["+o.valueToCode(R,"PropertyName",0)+"]",99]}}fieldXML(){return'\n    \n    <block type="modifyproperty">\n        <value name="PropertyName">\n            <shadow type="text">\n                <field name="TEXT">enter property name</field>\n            </shadow>\n        </value>\n    </block>\n    <block type="getproperty">\n        <value name="PropertyName">\n            <shadow type="text">\n                <field name="TEXT">enter property name</field>\n            </shadow>\n        </value>\n\n    </block>    \n'}}class ud{definitionBlocks(l,o,a,c){o.object_from_json=function(bn){return[`JSON.parse(${o.valueToCode(bn,"JSON",0)})`,99]},o.object_to_json=function(bn){return[`JSON.stringify(${o.valueToCode(bn,"object",0)})`,99]},o.object_get=function(bn){const qi=bn.getFieldValue("field_name");return[`${o.valueToCode(bn,"object",0)}['${qi}']`,99]},o.object_set=function(bn){const qi=bn.getFieldValue("field_name");return`${o.valueToCode(bn,"object_field",0)}['${qi}'] = ${o.valueToCode(bn,"value_field",0)};\n`},o.object_create=function(bn){if(!bn.numFields)return["{}",99];let qi="";for(let dr=1;dr<=bn.numFields;dr++)qi+=`"${bn.getFieldValue("field"+dr)}": ${o.valueToCode(bn,"field_input"+dr,0)}, `;return[`{ ${qi} }`,99]};const Ee="object_field",De="object_create_mutator_top",Ge="#F99EA3",We=bn=>({object_from_json:"get object from JSON %1",object_from_json_tooltip:"Create object from JSON string.",object_to_json:"generate JSON from object %1",object_to_json_tooltip:"Save object as a JSON string.",object_get_json:"get property %1 %2 of object %3",object_get_json_tooltip:"Get a property of an object.",object_set_json:"set property %1 %2 of object %3 to %4",object_set_json_tooltip:"Set a property of an object.",object_create:"create object",object_create_tooltip:"Create a new object, optionally with some property values.",object_field_name:"property name"}[bn]),Si={type:"object_from_json",message0:We("object_from_json"),args0:[{type:"input_value",name:"JSON",check:"String"}],output:"Object",colour:Ge,tooltip:We("object_from_json_tooltip"),helpUrl:"http://www.json.org/"};l.object_from_json={init:function(){this.jsonInit(Si)}};const ln={type:"object_to_json",message0:We("object_to_json"),args0:[{type:"input_value",name:"object",check:"Object"}],output:null,colour:Ge,tooltip:We("object_to_json_tooltip"),helpUrl:"http://www.json.org/"};l.object_to_json={init:function(){this.jsonInit(ln)}};const Gi={type:"object_get",message0:We("object_get_json"),args0:[{type:"field_input",name:"field_name",text:"default"},{type:"input_dummy"},{type:"input_value",name:"object",check:"Object",align:"RIGHT"}],output:null,colour:Ge,tooltip:We("object_get_json_tooltip"),helpUrl:""};l.object_get={init:function(){this.jsonInit(Gi)}};const Xi={type:"object_set",message0:We("object_set_json"),args0:[{type:"field_input",name:"field_name",text:We("object_field_name")},{type:"input_dummy"},{type:"input_value",name:"object_field",check:"Object",align:"RIGHT"},{type:"input_value",name:"value_field",align:"RIGHT"}],previousStatement:null,nextStatement:null,colour:Ge,tooltip:We("object_set_json_tooltip"),helpUrl:""};l.object_set={init:function(){this.jsonInit(Xi)}};const gn={type:"object_create",message0:We("object_create"),output:"Object",mutator:"controls_create_mutator",colour:15,tooltip:We("object_create_tooltip"),helpUrl:""};l.object_create={init:function(){this.jsonInit(gn)}};const _n={type:"object_field",message0:"%1 %2",args0:[{type:"field_input",name:"field_name",text:We("object_field_name")},{type:"input_value",name:"field_value"}],previousStatement:null,nextStatement:null,colour:15,tooltip:"",helpUrl:""};l[Ee]={init:function(){this.jsonInit(_n)}};const wn={type:"object_create_mutator",message0:We("object_create"),nextStatement:null,colour:15,tooltip:We("object_create_tooltip"),helpUrl:""};l[De]={init:function(){this.jsonInit(wn)}};const Pn={numFields:0,fields:new Array,domToMutation:function(bn){this.fields=[];for(let Bn,qi=0;Bn=bn.childNodes[qi];qi++)"field"==Bn.nodeName.toLowerCase()&&this.fields.push(Bn.getAttribute("name"));this.numFields=this.fields.length,this.updateShape()},mutationToDom:function(){if(!this.numFields)return null;const bn=document.createElement("mutation");bn.setAttribute("num_fields",""+this.numFields);for(let qi=0;qi<this.fields.length;qi++){const Bn=document.createElement("field");Bn.setAttribute("name",this.fields[qi]),bn.appendChild(Bn)}return bn},compose:function(bn){let qi=bn.nextConnection&&bn.nextConnection.targetBlock();this.numFields=0,this.fields=[];let Bn=[null];for(;qi;)this.fields.push(qi.getFieldValue("field_name")),this.numFields++,Bn.push(qi.savedConnection),qi=qi.nextConnection&&qi.nextConnection.targetBlock();this.updateShape();for(let dr=1;dr<=this.numFields;dr++)c.reconnect(Bn[dr],this,"field_input"+dr)},decompose:function(bn){const qi=bn.newBlock(De);qi.initSvg();let Bn=qi.nextConnection;for(let dr=0;dr<this.fields.length;dr++){const Ei=bn.newBlock(Ee);Ei.initSvg(),Ei.setFieldValue(this.fields[dr],"field_name"),Bn.connect(Ei.previousConnection),Bn=Ei.nextConnection}return qi},saveConnections:function(bn){let qi=bn.nextConnection&&bn.nextConnection.targetBlock(),Bn=1;for(;qi;){const dr=this.getInput("field_input"+Bn);qi.savedConnection=dr&&dr.connection.targetConnection,qi.setFieldValue(this.getFieldValue("field"+Bn),"field_name"),Bn++,qi=qi.nextConnection&&qi.nextConnection.targetBlock()}},updateShape:function(){this.getInput("with")&&this.removeInput("with");let bn=1;for(;this.getInput("field_input"+bn);)this.removeInput("field_input"+bn),bn++;this.numFields>0&&this.appendDummyInput("with").setAlign(1).appendField("with fields");for(let qi=1;qi<=this.numFields;qi++){const Bn=this.fields[qi-1];this.appendValueInput("field_input"+qi).setCheck(null).setAlign(1).appendField(new e.FieldTextInput(Bn),"field"+qi)}}};try{a.registerMutator("controls_create_mutator",Pn,null,["object_field"])}catch(bn){}}fieldXML(){return'    \n    <block type="modifyproperty"></block>\n    <block type="getproperty"></block>\n    <block type="object_create"></block>\n    \x3c!--<block type="object_from_json"></block>\n<block type="object_to_json"></block>\n<block type="object_get"></block>\n<block type="object_set"></block>--\x3e\n\n'}}class ep{definitionBlocks(l,o){l.credsforhttp={init:function(){this.appendDummyInput().appendField("Http with Creds"),this.appendValueInput("HttpDomain").setCheck("String").appendField("Domain"),this.appendValueInput("WithCreds").setCheck("Boolean").appendField("With Creds ?"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null)}},o.credsforhttp=function(f){return"withCredsForDomain["+(o.valueToCode(f,"HttpDomain",0)||"(localSite)")+"]="+o.valueToCode(f,"WithCreds",0)+";\n"}}fieldXML(){return'<block type="credsforhttp">\n    <value name="HttpDomain">\n        <shadow type="text">\n            <field name="TEXT">(localSite)</field>\n        </shadow>\n    </value>\n    <value name="WithCreds">\n        <shadow type="logic_boolean">\n            <field name="BOOL">FALSE</field>\n        </shadow>\n    </value>\n</block>\n'}}class $h{definitionBlocks(l,o){l.wait={init:function(){this.appendValueInput("VALUE").appendField("wait secs"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null)}},o.wait=function(c){return"waitTime("+(o.valueToCode(c,"VALUE",o.ORDER_ATOMIC)||"")+");"},l.wait_until={init:function(){this.appendValueInput("VALUE").appendField("wait until date"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null)}},o.wait_until=function(c){return"waitTime(("+(o.valueToCode(c,"VALUE",0)||"")+"-new Date())/1000);"}}fieldXML(){return'\n    <block type="wait">\n\n    <value name="VALUE">\n        <shadow type="math_number">\n            <field name="NUM">10</field>\n        </shadow>\n    </value>\n\n</block>\n<block type="wait_until">\n\n</block>'}}class kh{definitionBlocks(l,o){l([{type:"wait_seconds",message0:" wait %1 seconds",args0:[{type:"field_number",name:"SECONDS",min:0,max:600,value:1}],previousStatement:null,nextStatement:null,colour:"%{BKY_LOOPS_HUE}"}]),o.wait_seconds=function(a){return"waitForSeconds("+Number(a.getFieldValue("SECONDS"))+");\n"}}fieldXML(){return'\n  <block type="wait_seconds"></block>\n'}}class hd{definitionBlocks(l,o){l.comment={init:function(){this.appendValueInput("TEXT").setCheck(null).appendField("comment /* */").appendField(new e.FieldLabelSerializable(""),"NAME"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip(""),this.setHelpUrl("")}},o.comment=function(c){return"/*\n"+(o.valueToCode(c,"TEXT",0)||"''")+"\n*/;\n"},l.debugger={init:function(){this.appendValueInput("TEXT").setCheck(null).appendField("debugger").appendField(new e.FieldLabelSerializable(""),"NAME"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip(""),this.setHelpUrl("")}},o.debugger=function(c){return"startDebugger("+(o.valueToCode(c,"TEXT",0)||"''")+",'"+c.id+"',this);\n"}}fieldXML(){return'<block type="comment">\n    <value name="TEXT">\n        <shadow type="text">\n            <field name="TEXT">Put here comments</field>\n        </shadow>\n    </value>\n</block>\n<block type="debugger">\n    <value name="TEXT">\n        <shadow type="text">\n            <field name="TEXT">my message for debug</field>\n        </shadow>\n    </value>\n</block>\n'}}class dd{constructor(){this.xhrBlocks=new Xh,this.defaultBlocks=new kp,this.trycatchFinBlock=new Lp,this.ttsBlock=new Rr,this.pianoBlock=new xh,this.filterBlocks=new sd,this.auth0Blocks=new qd,this.convertersBlocks=new Kh,this.currentDateBlock=new Lc,this.dateFromTextBlock=new Md,this.emailBlocks=new tp,this.exportFileBlock=new ad,this.guiBlocks=new mu,this.chartBlock=new ld,this.htmlblocks=new cd,this.HTMLParserBlocks=new Jh,this.propBlocks=new Np,this.createObjectBlocks=new ud,this.windowsCreds=new ep,this.waitBlocks1=new $h,this.waitBlocks2=new kh,this.commentBlock=new hd}}var Zh=m(82734);class Pp{constructor(){}DownloadBlocks(l,o,a){var c=l.workspaceToDom(o,!0),f=l.domToPrettyText(c),E=new Blob([f],{type:"text/plain;charset=utf-16"});Zh.saveAs(E,a)}A(){return 1}LoadFile(l,o,a){o.clear();var c=l.textToDom(a);l.domToWorkspace(c,o)}formatInt(l){return l<10?"0"+l:l.toString(10)}formatDate(l){return`${this.formatInt(l.getFullYear())}${this.formatInt(l.getMonth()+1)}${this.formatInt(l.getDate())}${this.formatInt(l.getHours())}${this.formatInt(l.getMinutes())}${this.formatInt(l.getSeconds())}`}saveState(l,o,a){var c="BlocklyState"+(a||""),f=l.workspaceToDom(o,!0),E=l.domToPrettyText(f);window.localStorage.setItem(c,E)}restoreState(l,o,a){var f=window.localStorage.getItem("BlocklyState"+(a||""));if(((null==f?void 0:f.length)||0)>62){var E=l.textToDom(f);l.clearWorkspaceAndLoadFromXml(E,o)}return""}}const ip=m(86942);class Ad{constructor(l,o){this.workspace=l,this.BlocklyJavaScript=o,this.latestCode="",this.step=0,this.highlightPause=!1,this.myInterpreter=null,this.runner=null}generateCodeAndLoadIntoInterpreter(){this.BlocklyJavaScript.STATEMENT_PREFIX="highlightBlock(%1);\n",this.BlocklyJavaScript.addReservedWords("highlightBlock"),this.latestCode=this.BlocklyJavaScript.workspaceToCode(this.workspace),this.resetStepUi(!0)}resetStepUi(l){this.step=0,this.workspace.highlightBlock(null),this.highlightPause=!1}resetInterpreter(){this.myInterpreter=null,this.runner&&(window.clearTimeout(this.runner),this.runner=null)}highlightBlock(l){this.workspace.highlightBlock(l),this.highlightPause=!0}nextStep(l,o){console.log("next step"),l.myInterpreter.step()?setTimeout((a,c)=>{a.nextStep(a,c)},10,l,o):(o?o():console.log("\n\n<< Program complete >>"),l.resetInterpreter(),l.resetStepUi(!1))}runCode(l,o,a,c){""==c&&(c=this.latestCode),this.myInterpreter||this.resetStepUi(!0),this.generateCodeAndLoadIntoInterpreter();var f=this;f.myInterpreter=l(c,(E,R)=>f.initApiJS(E,R,f,o,a)),1!=window.runOneByOne?setTimeout(function(){f.highlightPause=!1,f.runner=function(){f.myInterpreter&&(f.myInterpreter.run()?setTimeout(f.runner,10):(a?a():console.log("\n\n<< Program complete >>"),f.resetInterpreter(),f.resetStepUi(!1)))},f.runner&&f.runner()},100):this.nextStep(f,a)}initInterpreterWaitForSeconds(l,o){this.BlocklyJavaScript.addReservedWords("waitForSeconds");var a=l.createAsyncFunction(function(c,f){setTimeout(f,1e3*c)});l.setProperty(o,"waitForSeconds",a)}getCreds(l,o,a){var c=l.pseudoToNative(o),f="(localSite)";(a.startsWith("http://")||a.startsWith("https://"))&&(f=new URL(a).hostname);var E=!1;return f in c?E=c[f]:"*"in c&&(E=c["*"]),E}getHeaders(l,o,a){var c=l.pseudoToNative(o),f="(localSite)";(a.startsWith("http://")||a.startsWith("https://"))&&(f=new URL(a).hostname);var E=[];return f in c?E=c[f]:"*"in c&&(E=c["*"]),E}doGet(l,o,a,c){let f=new XMLHttpRequest;f.open("GET",l,!0),this.generateDataAndCreds(f,a,c,!1),f.onreadystatechange=function(){if(4==f.readyState){if(f.status>=200&&f.status<300){var E=JSON.stringify({origHref:l,objectToSend:"",status:f.status,statusOK:!0,text:f.responseText});return o(E)}return E=JSON.stringify({origHref:l,objectToSend:"",status:f.status,statusOK:!1,text:f.responseText,headers:f.getAllResponseHeaders()}),o(E)}},f.send(null)}exportToFile(l,o,a){var c;return c=1==a?this.b64toBlob1(o,"",512):new Blob([o],{type:"text/plain;charset=utf-8"}),Zh.saveAs(c,l),l}b64toBlob1(l,o="",a=512){const c=atob(l),f=[];for(let R=0;R<c.length;R+=a){const O=c.slice(R,R+a),F=new Array(O.length);for(let dt=0;dt<O.length;dt++)F[dt]=O.charCodeAt(dt);const J=new Uint8Array(F);f.push(J)}return new Blob(f,{type:o})}displayDateCurrentAsHuman(){return(new Date).toLocaleDateString(void 0,{day:"numeric",month:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"})}displayDateCurrentAsIso(){return(new Date).toISOString()}displayDateCurrentAsUnix(){return Date.now()}displayDateFormatted(l){switch(l){case"human":return this.displayDateCurrentAsHuman();case"iso":return this.displayDateCurrentAsIso();case"unix":return this.displayDateCurrentAsUnix();default:return console.log("Date time format not suported"),""}}generateDataAndCreds(l,o,a,c){a&&(l.withCredentials=a);var f=!1;if(o&&o.length>0)for(var E=0;E<o.length;E++){var R=o[E];"Content-Type"==R.name&&(f=!0),l.setRequestHeader(R.name,R.value)}c&&!f&&l.setRequestHeader("Content-Type","application/json;charset=UTF-8")}doPut(l,o,a,c,f){let E=o,R=new XMLHttpRequest;R.open("PUT",l,!0),this.generateDataAndCreds(R,c,f,!!o),R.onreadystatechange=function(){if(4==R.readyState){if(R.status>=200&&R.status<300){var O=JSON.stringify({origHref:l,objectToSend:o,status:R.status,statusOK:!0,text:R.responseText});return a(O)}return O=JSON.stringify({origHref:l,objectToSend:o,status:R.status,statusOK:!1,text:R.responseText,headers:R.getAllResponseHeaders()}),a(O)}},R.send(E)}doDelete(l,o,a,c,f){let E=o;var R=new XMLHttpRequest;R.open("DELETE",l,!0),this.generateDataAndCreds(R,c,f,!!o),R.onreadystatechange=function(){if(4==R.readyState){if(R.status>=200&&R.status<300){var O=JSON.stringify({origHref:l,objectToSend:"",status:R.status,statusOK:!0,text:R.responseText});return a(O)}return O=JSON.stringify({origHref:l,status:R.status,statusOK:!1,text:R.responseText,objectToSend:o,headers:R.getAllResponseHeaders()}),a(O)}},R.send(E)}doPost(l,o,a,c,f){let E=o,R=new XMLHttpRequest;R.open("POST",l,!0),this.generateDataAndCreds(R,c,f,!!o),R.onreadystatechange=function(){if(4==R.readyState){if(R.status>=200&&R.status<300){var O=JSON.stringify({origHref:l,objectToSend:o,status:R.status,statusOK:!0,text:R.responseText});return a(O)}return O=JSON.stringify({origHref:l,objectToSend:o,status:R.status,statusOK:!1,text:R.responseText,headers:R.getAllResponseHeaders()}),a(O)}},R.send(E)}table2array(l){var o=l.rows,a=[];if(!o)return[];if(0==o.length)return[];for(var c=Array.from(o[0].children).map(F=>F.innerText),f=1;f<o.length;f++){for(var E=o[f].children,R={},O=0;O<E.length;O++)R[c[O]]=E[O].innerText;a.push(R)}return a}list2array(l){var o=l.getElementsByTagName("li"),a=[];if(0==o.length)return[];for(var c=0;c<o.length;c++)a.push({li:o[c].innerText});return a}parseDOMFromStringElements(l,o,a){var c,f=(new DOMParser).parseFromString(l,o),E=[];if(a.toString().indexOf(",")>-1)for(var R=a.split(","),O=0;O<R.length;O++)E=E.concat(Array.from(f.getElementsByTagName(R[O])));else E=(E=E.concat(f.getElementsByTagName(a)))[0];var F={};if(0==E.length)return F;switch(a){case"table":for(F={},O=0;O<E.length;O++)F["table"+O]=this.table2array(E[O]);break;case"a":F=[];var J=(null===(c=null==window?void 0:window.location)||void 0===c?void 0:c.host)||"";for(J.length>0&&(J=window.location.protocol+"//"+J),O=0;O<E.length;O++){var dt=E[O].href;J.length>0&&dt.startsWith(J)&&(dt=dt.substring(J.length)),F.push({href:dt,text:E[O].innerText})}break;case"img":for(F=[],O=0;O<E.length;O++)F.push({src:E[O].src});break;case"ul,ol":for(F={},O=0;O<E.length;O++)F["list"+O]=this.list2array(E[O]);break;case"h1,h2,h3,h4,h5,h6":for(F=[],O=0;O<E.length;O++)F.push({header:E[O].innerText});break;default:throw new Error(`tag !${a}! not supported`)}return JSON.stringify(F)}consoleLog(l,o){return console.log(l,o)}initApiJS(l,o,a,c,f){var E=Ei=>{c?c("\n error --\n"+Ei+"\n error --"):console.log(Ei)};l.setProperty(o,"errHandler",l.createNativeFunction(E)),l.setProperty(o,"consoleLog",l.createNativeFunction(function(Ei,Hi){return l.createPrimitive(a.consoleLog(Ei,Hi))})),l.setProperty(o,"parseDOMFromStringElements",l.createNativeFunction(function(Ei,Hi,Rn){return Ei=Ei?Ei.toString():"",l.createPrimitive(a.parseDOMFromStringElements(Ei,Hi,Rn))})),l.setProperty(o,"parseDomNative",l.createNativeFunction(E));var F=l.nativeToPseudo({"(localSite)":!1});l.setProperty(o,"withCredsForDomain",F);var J=l.nativeToPseudo({"(localSite)":[]});l.setProperty(o,"headersForDomain",J),l.setProperty(o,"alert1",l.createNativeFunction(function(Ei){Ei=Ei?Ei.toString():"",window.alert(Ei)})),l.setProperty(o,"playPiano",l.createNativeFunction(function(Ei,Hi,Rn){ip.Synth.createInstrument("piano").play(Ei,Hi,Rn)})),l.setProperty(o,"startDebugger",l.createNativeFunction(function(Ei,Hi,Rn){a.highlightBlock(Hi),console.log(Ei,Hi,Rn)})),l.setProperty(o,"alert",l.createNativeFunction(function(Ei){Ei=Ei?Ei.toString():"",c?c(Ei):console.log(Ei)})),l.setProperty(o,"waitTime",l.createAsyncFunction((Ei,Hi)=>{console.log(`waiting seconds ${Ei}`),setTimeout(Hi,1e3*Ei)})),l.setProperty(o,"displayDateFormatted",l.createNativeFunction(Ei=>a.displayDateFormatted(Ei))),l.setProperty(o,"exportToFile",l.createNativeFunction((Ei,Hi,Rn)=>a.exportToFile(Ei,Hi,Rn))),l.setProperty(o,"convertToCSV",l.createNativeFunction(Ei=>{var Hi=null;return Array.isArray(Ei)?Hi=Ei:((Hi="object"!=typeof Ei?JSON.parse(Ei):{})&&Hi.table0&&(Hi=Hi.table0),Hi&&Hi.list0&&(Hi=Hi.list0)),0==Hi.length?"":(Hi=[Object.keys(Hi[0])].concat(Hi)).map(fr=>Object.values(fr).toString()).join("\n")})),l.setProperty(o,"open",l.createNativeFunction(function(Ei){window.open(Ei,"_blank")})),l.setProperty(o,"changeHost",l.createNativeFunction(function(Ei,Hi){if(0==(Hi=(Hi=Hi?Hi.toString():"").trim()).length)return Ei;if(0==(Ei=(Ei=Ei||"").trim()).length&&!(Ei=Hi).startsWith("http"))throw`please put in front of ${Hi} http:// or https://`;var Rn=new URL(Ei);if(Hi.startsWith("http")){var fr=new URL(Hi);Rn.hostname=fr.hostname,Rn.protocol=fr.protocol}else Rn.hostname=Hi.replace("https://","").replace("http://","");var vr=Rn.href;return vr.endsWith("/")&&(vr=vr.substring(0,vr.length-1)),vr})),l.setProperty(o,"changePort",l.createNativeFunction(function(Ei,Hi){var Rn=new URL(Ei);console.log(`url ${Rn.href}`),Rn.port=Hi,console.log(`url ${Rn.href}`);var fr=Rn.href;return fr.endsWith("/")&&(fr=fr.substring(0,fr.length-1)),fr})),l.setProperty(o,"speakDefault",l.createNativeFunction(function(Ei,Hi,Rn,fr,vr){var to=new SpeechSynthesisUtterance(Ei),tu=parseInt(Hi);if(tu<0)console.log(" no voice selected");else{var en=window.speechSynthesis.getVoices()[tu];to.voice=en,window.speechSynthesis.speak(to)}})),l.setProperty(o,"prompt",l.createAsyncFunction(function(Ei,Hi,Rn){Ei=Ei?Ei.toString():"",Hi=Hi?Hi.toString():"",Rn(window.prompt(Ei,Hi))})),a.BlocklyJavaScript.addReservedWords("waitForSeconds");var wn=l.createAsyncFunction(function(Ei,Hi){setTimeout(Hi,1e3*Ei)});l.setProperty(o,"waitForSeconds",wn),l.setProperty(o,"getXhr",l.createAsyncFunction((Ei,Hi)=>{var Rn=a.getHeaders(l,J,Ei),fr=a.getCreds(l,F,Ei);return a.doGet(Ei,Hi,Rn,fr)})),l.setProperty(o,"postXhr",l.createAsyncFunction((Ei,Hi,Rn)=>{try{var fr=a.getHeaders(l,J,Ei),vr=a.getCreds(l,F,Ei);a.doPost(Ei,Hi,Rn,fr,vr)}catch(to){alert("is an error"+to)}})),l.setProperty(o,"deleteXhr",l.createAsyncFunction((Ei,Hi,Rn)=>{try{var fr=a.getHeaders(l,J,Ei),vr=a.getCreds(l,F,Ei);a.doDelete(Ei,Hi,Rn,fr,vr)}catch(to){alert("is an error"+to)}})),l.setProperty(o,"putXhr",l.createAsyncFunction((Ei,Hi,Rn)=>{try{var fr=l.pseudoToNative(J),vr="(localSite)";(Ei.startsWith("http://")||Ei.startsWith("https://"))&&(vr=new URL(Ei).hostname);var to=[];vr in fr&&(to=fr[vr]),a.doPut(Ei,Hi,Rn,to,!1)}catch(en){alert("is an error"+en)}})),l.setProperty(o,"highlightBlock",l.createNativeFunction(function(Ei){return Ei=Ei?Ei.toString():"",l.createPrimitive(a.highlightBlock(Ei))}))}}class Nc{constructor(l){this.table=l}reloadData(l,o){return this.table.dataLoader.load(l,void 0,void 0,void 0,o)}langText(){return this.table.modules.localize.getText(...arguments)}langBind(){return this.table.modules.localize.bind(...arguments)}langLocale(){return this.table.modules.localize.getLocale(...arguments)}commsConnections(){return this.table.modules.comms.getConnections(...arguments)}commsSend(){return this.table.modules.comms.send(...arguments)}layoutMode(){return this.table.modules.layout.getMode()}layoutRefresh(){return this.table.modules.layout.layout()}subscribe(){return this.table.eventBus.subscribe(...arguments)}unsubscribe(){return this.table.eventBus.unsubscribe(...arguments)}subscribed(l){return this.table.eventBus.subscribed(l)}subscriptionChange(){return this.table.eventBus.subscriptionChange(...arguments)}dispatch(){return this.table.eventBus.dispatch(...arguments)}chain(){return this.table.eventBus.chain(...arguments)}confirm(){return this.table.eventBus.confirm(...arguments)}dispatchExternal(){return this.table.externalEvents.dispatch(...arguments)}subscribedExternal(l){return this.table.externalEvents.subscribed(l)}subscriptionChangeExternal(){return this.table.externalEvents.subscriptionChange(...arguments)}options(l,o){return void 0!==o&&(this.table.options[l]=o),this.table.options[l]}setOption(l,o){return void 0!==o&&(this.table.options[l]=o),this.table.options[l]}module(l){return this.table.module(l)}}class bo extends Nc{constructor(l,o){super(l),this._handler=null}initialize(){}registerTableOption(l,o){this.table.optionsList.register(l,o)}registerColumnOption(l,o){this.table.columnManager.optionsList.register(l,o)}registerTableFunction(l,o){void 0===this.table[l]?this.table[l]=o:console.warn("Unable to bind table function, name already in use",l)}registerComponentFunction(l,o,a){return this.table.componentFunctionBinder.bind(l,o,a)}registerDataHandler(l,o){this.table.rowManager.registerDataPipelineHandler(l,o),this._handler=l}registerDisplayHandler(l,o){this.table.rowManager.registerDisplayPipelineHandler(l,o),this._handler=l}refreshData(l,o){o||(o=this._handler),o&&this.table.rowManager.refreshActiveData(o,!1,l)}}class Ps{static elVisible(l){return!(l.offsetWidth<=0&&l.offsetHeight<=0)}static elOffset(l){var o=l.getBoundingClientRect();return{top:o.top+window.pageYOffset-document.documentElement.clientTop,left:o.left+window.pageXOffset-document.documentElement.clientLeft}}static deepClone(l,o,a=[]){var c={}.__proto__,f=[].__proto__;for(var E in o||(o=Object.assign(Array.isArray(l)?[]:{},l)),l){let O,F,R=l[E];null!=R&&"object"==typeof R&&(R.__proto__===c||R.__proto__===f)&&(O=a.findIndex(J=>J.subject===R),O>-1?o[E]=a[O].copy:(F=Object.assign(Array.isArray(R)?[]:{},R),a.unshift({subject:R,copy:F}),o[E]=this.deepClone(R,F,a)))}return o}}var Fp={};let np=(()=>{class g extends bo{constructor(o){super(o),this.allowedTypes=["","data","download","clipboard","print","htmlOutput"],this.registerColumnOption("accessor"),this.registerColumnOption("accessorParams"),this.registerColumnOption("accessorData"),this.registerColumnOption("accessorDataParams"),this.registerColumnOption("accessorDownload"),this.registerColumnOption("accessorDownloadParams"),this.registerColumnOption("accessorClipboard"),this.registerColumnOption("accessorClipboardParams"),this.registerColumnOption("accessorPrint"),this.registerColumnOption("accessorPrintParams"),this.registerColumnOption("accessorHtmlOutput"),this.registerColumnOption("accessorHtmlOutputParams")}initialize(){this.subscribe("column-layout",this.initializeColumn.bind(this)),this.subscribe("row-data-retrieve",this.transformRow.bind(this))}initializeColumn(o){var a=!1,c={};this.allowedTypes.forEach(f=>{var R,E="accessor"+(f.charAt(0).toUpperCase()+f.slice(1));o.definition[E]&&(R=this.lookupAccessor(o.definition[E]))&&(a=!0,c[E]={accessor:R,params:o.definition[E+"Params"]||{}})}),a&&(o.modules.accessor=c)}lookupAccessor(o){var a=!1;switch(typeof o){case"string":g.accessors[o]?a=g.accessors[o]:console.warn("Accessor Error - No such accessor found, ignoring: ",o);break;case"function":a=o}return a}transformRow(o,a){var c="accessor"+(a.charAt(0).toUpperCase()+a.slice(1)),f=o.getComponent(),E=Ps.deepClone(o.data||{});return this.table.columnManager.traverse(function(R){var O,F,J,dt;R.modules.accessor&&(F=R.modules.accessor[c]||R.modules.accessor.accessor||!1)&&"undefined"!=(O=R.getFieldValue(E))&&(dt=R.getComponent(),J="function"==typeof F.params?F.params(O,E,a,dt,f):F.params,R.setFieldValue(E,F.accessor(O,E,a,J,dt,f)))}),E}}return g.moduleName="accessor",g.accessors=Fp,g})();var Hf={method:"GET"};function pd(g,l){var o=[];if(l=l||"",Array.isArray(g))g.forEach((c,f)=>{o=o.concat(pd(c,l?l+"["+f+"]":f))});else if("object"==typeof g)for(var a in g)o=o.concat(pd(g[a],l?l+"["+a+"]":a));else o.push({key:l,value:g});return o}function rp(g){var l=pd(g),o=[];return l.forEach(function(a){o.push(encodeURIComponent(a.key)+"="+encodeURIComponent(a.value))}),o.join("&")}function Bp(g,l,o){return g&&o&&Object.keys(o).length&&(!l.method||"get"==l.method.toLowerCase())&&(l.method="get",g+=(g.includes("?")?"&":"?")+rp(o)),g}function Od(g,l,o){var a;return new Promise((c,f)=>{if(g=this.urlGenerator.call(this.table,g,l,o),"GET"!=l.method.toUpperCase())if(a="object"==typeof this.table.options.ajaxContentType?this.table.options.ajaxContentType:this.contentTypeFormatters[this.table.options.ajaxContentType]){for(var E in a.headers)l.headers||(l.headers={}),void 0===l.headers[E]&&(l.headers[E]=a.headers[E]);l.body=a.body.call(this,g,l,o)}else console.warn("Ajax Error - Invalid ajaxContentType value:",this.table.options.ajaxContentType);g?(void 0===l.headers&&(l.headers={}),void 0===l.headers.Accept&&(l.headers.Accept="application/json"),void 0===l.headers["X-Requested-With"]&&(l.headers["X-Requested-With"]="XMLHttpRequest"),void 0===l.mode&&(l.mode="cors"),"cors"==l.mode?(void 0===l.headers.Origin&&(l.headers.Origin=window.location.origin),void 0===l.credentials&&(l.credentials="same-origin")):void 0===l.credentials&&(l.credentials="include"),fetch(g,l).then(R=>{R.ok?R.json().then(O=>{c(O)}).catch(O=>{f(O),console.warn("Ajax Load Error - Invalid JSON returned",O)}):(console.error("Ajax Load Error - Connection Error: "+R.status,R.statusText),f(R))}).catch(R=>{console.error("Ajax Load Error - Connection Error: ",R),f(R)})):(console.warn("Ajax Load Error - No URL Set"),c([]))})}function Lh(g,l){var o=[];if(l=l||"",Array.isArray(g))g.forEach((c,f)=>{o=o.concat(Lh(c,l?l+"["+f+"]":f))});else if("object"==typeof g)for(var a in g)o=o.concat(Lh(g[a],l?l+"["+a+"]":a));else o.push({key:l,value:g});return o}var Qh={json:{headers:{"Content-Type":"application/json"},body:function(g,l,o){return JSON.stringify(o)}},form:{headers:{},body:function(g,l,o){var a=Lh(o),c=new FormData;return a.forEach(function(f){c.append(f.key,f.value)}),c}}};let Hp=(()=>{class g extends bo{constructor(o){super(o),this.config=!1,this.url="",this.urlGenerator=!1,this.params=!1,this.loaderPromise=!1,this.registerTableOption("ajaxURL",!1),this.registerTableOption("ajaxURLGenerator",!1),this.registerTableOption("ajaxParams",{}),this.registerTableOption("ajaxConfig","get"),this.registerTableOption("ajaxContentType","form"),this.registerTableOption("ajaxRequestFunc",!1),this.registerTableOption("ajaxRequesting",function(){}),this.registerTableOption("ajaxResponse",!1),this.contentTypeFormatters=g.contentTypeFormatters}initialize(){this.loaderPromise=this.table.options.ajaxRequestFunc||g.defaultLoaderPromise,this.urlGenerator=this.table.options.ajaxURLGenerator||g.defaultURLGenerator,this.table.options.ajaxParams&&this.setParams(this.table.options.ajaxParams),this.table.options.ajaxConfig&&this.setConfig(this.table.options.ajaxConfig),this.table.options.ajaxURL&&this.setUrl(this.table.options.ajaxURL),this.registerTableFunction("getAjaxUrl",this.getUrl.bind(this)),this.subscribe("data-loading",this.requestDataCheck.bind(this)),this.subscribe("data-load",this.requestData.bind(this))}requestDataCheck(o,a,c,f){return!((o||!this.url)&&"string"!=typeof o)}requestData(o,a,c,f,E){return this.requestDataCheck(o)?(o&&this.setUrl(o),a&&this.setParams(a,!0),c&&this.setConfig(c),this.sendRequest()):E}setParams(o,a){if(a){this.params=this.params||{};for(let c in o)this.params[c]=o[c]}else this.params=o}getParams(){return this.params||{}}setConfig(o){if(this._loadDefaultConfig(),"string"==typeof o)this.config.method=o;else for(let a in o)this.config[a]=o[a]}_loadDefaultConfig(o){if(!this.config||o){this.config={};for(let a in g.defaultConfig)this.config[a]=g.defaultConfig[a]}}setUrl(o){this.url=o}getUrl(){return this.url}sendRequest(o){var a=this.url;return this._loadDefaultConfig(),!1!==this.table.options.ajaxRequesting.call(this.table,this.url,this.params)?this.loaderPromise(a,this.config,this.params).then(c=>(this.table.options.ajaxResponse&&(c=this.table.options.ajaxResponse.call(this.table,this.url,this.params,c)),c)):Promise.reject()}}return g.moduleName="ajax",g.defaultConfig=Hf,g.defaultURLGenerator=Bp,g.defaultLoaderPromise=Od,g.contentTypeFormatters=Qh,g})();var fd={replace:function(g){return this.table.setData(g)},update:function(g){return this.table.updateOrAddData(g)},insert:function(g){return this.table.addData(g)}},Uf={table:function(g){var l=[],o=!0,a=this.table.columnManager.columns,c=[],f=[];return(g=g.split("\n")).forEach(function(E){l.push(E.split("\t"))}),!(!l.length||1===l.length&&l[0].length<2)&&(l[0].forEach(function(E){var R=a.find(function(O){return E&&O.definition.title&&E.trim()&&O.definition.title.trim()===E.trim()});R?c.push(R):o=!1}),o||(o=!0,c=[],l[0].forEach(function(E){var R=a.find(function(O){return E&&O.field&&E.trim()&&O.field.trim()===E.trim()});R?c.push(R):o=!1}),o||(c=this.table.columnManager.columnsByIndex)),o&&l.shift(),l.forEach(function(E){var R={};E.forEach(function(O,F){c[F]&&(R[c[F].field]=O)}),f.push(R)}),f)}};let Up=(()=>{class g extends bo{constructor(o){super(o),this.mode=!0,this.pasteParser=function(){},this.pasteAction=function(){},this.customSelection=!1,this.rowRange=!1,this.blocked=!0,this.registerTableOption("clipboard",!1),this.registerTableOption("clipboardCopyStyled",!0),this.registerTableOption("clipboardCopyConfig",!1),this.registerTableOption("clipboardCopyFormatter",!1),this.registerTableOption("clipboardCopyRowRange","active"),this.registerTableOption("clipboardPasteParser","table"),this.registerTableOption("clipboardPasteAction","insert"),this.registerColumnOption("clipboard"),this.registerColumnOption("titleClipboard")}initialize(){this.mode=this.table.options.clipboard,this.rowRange=this.table.options.clipboardCopyRowRange,(!0===this.mode||"copy"===this.mode)&&this.table.element.addEventListener("copy",o=>{var a,c;if(!this.blocked){if(o.preventDefault(),this.customSelection)a=this.customSelection,this.table.options.clipboardCopyFormatter&&(a=this.table.options.clipboardCopyFormatter("plain",a));else{var f=this.table.modules.export.generateExportList(this.table.options.clipboardCopyConfig,this.table.options.clipboardCopyStyled,this.rowRange,"clipboard");a=(c=this.table.modules.export.genereateHTMLTable(f))?this.generatePlainContent(f):"",this.table.options.clipboardCopyFormatter&&(a=this.table.options.clipboardCopyFormatter("plain",a),c=this.table.options.clipboardCopyFormatter("html",c))}window.clipboardData&&window.clipboardData.setData?window.clipboardData.setData("Text",a):o.clipboardData&&o.clipboardData.setData?(o.clipboardData.setData("text/plain",a),c&&o.clipboardData.setData("text/html",c)):o.originalEvent&&o.originalEvent.clipboardData.setData&&(o.originalEvent.clipboardData.setData("text/plain",a),c&&o.originalEvent.clipboardData.setData("text/html",c)),this.dispatchExternal("clipboardCopied",a,c),this.reset()}}),(!0===this.mode||"paste"===this.mode)&&this.table.element.addEventListener("paste",o=>{this.paste(o)}),this.setPasteParser(this.table.options.clipboardPasteParser),this.setPasteAction(this.table.options.clipboardPasteAction),this.registerTableFunction("copyToClipboard",this.copy.bind(this))}reset(){this.blocked=!0,this.customSelection=!1}generatePlainContent(o){var a=[];return o.forEach(c=>{var f=[];c.columns.forEach(E=>{var R="";if(E)if("group"===c.type&&(E.value=E.component.getKey()),null===E.value)R="";else switch(typeof E.value){case"object":R=JSON.stringify(E.value);break;case"undefined":R="";break;default:R=E.value}f.push(R)}),a.push(f.join("\t"))}),a.join("\n")}copy(o,a){var c,f;this.blocked=!1,this.customSelection=!1,(!0===this.mode||"copy"===this.mode)&&(this.rowRange=o||this.table.options.clipboardCopyRowRange,void 0!==window.getSelection&&void 0!==document.createRange?((o=document.createRange()).selectNodeContents(this.table.element),(c=window.getSelection()).toString()&&a&&(this.customSelection=c.toString()),c.removeAllRanges(),c.addRange(o)):void 0!==document.selection&&void 0!==document.body.createTextRange&&((f=document.body.createTextRange()).moveToElementText(this.table.element),f.select()),document.execCommand("copy"),c&&c.removeAllRanges())}setPasteAction(o){switch(typeof o){case"string":this.pasteAction=g.pasteActions[o],this.pasteAction||console.warn("Clipboard Error - No such paste action found:",o);break;case"function":this.pasteAction=o}}setPasteParser(o){switch(typeof o){case"string":this.pasteParser=g.pasteParsers[o],this.pasteParser||console.warn("Clipboard Error - No such paste parser found:",o);break;case"function":this.pasteParser=o}}paste(o){var a,c,f;this.checkPaseOrigin(o)&&(a=this.getPasteData(o),(c=this.pasteParser.call(this,a))?(o.preventDefault(),this.table.modExists("mutator")&&(c=this.mutateData(c)),f=this.pasteAction.call(this,c),this.dispatchExternal("clipboardPasted",a,c,f)):this.dispatchExternal("clipboardPasteError",a))}mutateData(o){var a=[];return Array.isArray(o)?o.forEach(c=>{a.push(this.table.modules.mutator.transformRow(c,"clipboard"))}):a=o,a}checkPaseOrigin(o){var a=!0;return("DIV"!=o.target.tagName||this.table.modules.edit.currentCell)&&(a=!1),a}getPasteData(o){var a;return window.clipboardData&&window.clipboardData.getData?a=window.clipboardData.getData("Text"):o.clipboardData&&o.clipboardData.getData?a=o.clipboardData.getData("text/plain"):o.originalEvent&&o.originalEvent.clipboardData.getData&&(a=o.originalEvent.clipboardData.getData("text/plain")),a}}return g.moduleName="clipboard",g.pasteActions=fd,g.pasteParsers=Uf,g})();class Vf{constructor(l){return this._row=l,new Proxy(this,{get:function(o,a,c){return void 0!==o[a]?o[a]:o._row.table.componentFunctionBinder.handle("row",o._row,a)}})}getData(l){return this._row.getData(l)}getElement(){return this._row.getElement()}getTable(){return this._row.table}getCells(){var l=[];return this._row.getCells().forEach(function(o){l.push(o.getComponent())}),l}getCell(l){var o=this._row.getCell(l);return!!o&&o.getComponent()}_getSelf(){return this._row}}class Vp{constructor(l){return this._cell=l,new Proxy(this,{get:function(o,a,c){return void 0!==o[a]?o[a]:o._cell.table.componentFunctionBinder.handle("cell",o._cell,a)}})}getValue(){return this._cell.getValue()}getOldValue(){return this._cell.getOldValue()}getInitialValue(){return this._cell.initialValue}getElement(){return this._cell.getElement()}getRow(){return this._cell.row.getComponent()}getData(){return this._cell.row.getData()}getField(){return this._cell.column.getField()}getColumn(){return this._cell.column.getComponent()}setValue(l,o){void 0===o&&(o=!0),this._cell.setValue(l,o)}restoreOldValue(){this._cell.setValueActual(this._cell.getOldValue())}restoreInitialValue(){this._cell.setValueActual(this._cell.initialValue)}checkHeight(){this._cell.checkHeight()}getTable(){return this._cell.table}_getSelf(){return this._cell}}class xd extends Nc{constructor(l,o){super(l.table),this.table=l.table,this.column=l,this.row=o,this.element=null,this.value=null,this.oldValue=null,this.modules={},this.height=null,this.width=null,this.minWidth=null,this.component=null,this.loaded=!1,this.build()}build(){this.generateElement(),this.setWidth(),this._configureCell(),this.setValueActual(this.column.getFieldValue(this.row.data)),this.initialValue=this.value}generateElement(){this.element=document.createElement("div"),this.element.className="tabulator-cell",this.element.setAttribute("role","gridcell"),this.element=this.element}_configureCell(){var l=this.element,o=this.column.getField();l.style.textAlign=this.column.hozAlign,this.column.vertAlign&&(l.style.display="inline-flex",l.style.alignItems={top:"flex-start",bottom:"flex-end",middle:"center"}[this.column.vertAlign]||"",this.column.hozAlign&&(l.style.justifyContent={left:"flex-start",right:"flex-end",center:"center"}[this.column.hozAlign]||"")),o&&l.setAttribute("tabulator-field",o),this.column.definition.cssClass&&this.column.definition.cssClass.split(" ").forEach(E=>{l.classList.add(E)}),"hover"===this.table.options.tooltipGenerationMode&&l.addEventListener("mouseenter",E=>{this._generateTooltip()}),this.dispatch("cell-init",this),this.column.visible||this.hide()}_generateContents(){var l;switch(typeof(l=this.chain("cell-format",this,null,()=>this.element.innerHTML=this.value))){case"object":if(l instanceof Node){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.element.appendChild(l)}else this.element.innerHTML="",null!=l&&console.warn("Format Error - Formatter has returned a type of object, the only valid formatter object return is an instance of Node, the formatter returned:",l);break;case"undefined":case"null":this.element.innerHTML="";break;default:this.element.innerHTML=l}}cellRendered(){this.dispatch("cell-rendered",this)}_generateTooltip(){var l=this.column.tooltip;l?(!0===l?l=this.value:"function"==typeof l&&!1===(l=l(this.getComponent()))&&(l=""),void 0===l&&(l=""),this.element.setAttribute("title",l)):this.element.setAttribute("title","")}getElement(l){return this.loaded||(this.loaded=!0,l||this.layoutElement()),this.element}getValue(){return this.value}getOldValue(){return this.oldValue}setValue(l,o){this.setValueProcessData(l,o)&&(this.dispatch("cell-value-updated",this),this.cellRendered(),this.dispatchExternal("cellEdited",this.getComponent()),this.subscribedExternal("dataChanged")&&this.dispatchExternal("dataChanged",this.table.rowManager.getData()))}setValueProcessData(l,o){var a=!1;return this.value!=l&&(a=!0,o&&(l=this.chain("cell-value-changing",[this,l],null,l))),this.setValueActual(l),a&&this.dispatch("cell-value-changed",this),a}setValueActual(l){this.oldValue=this.value,this.value=l,this.dispatch("cell-value-save-before",this),this.column.setFieldValue(this.row.data,l),this.dispatch("cell-value-save-after",this),this.loaded&&this.layoutElement()}layoutElement(){this._generateContents(),this._generateTooltip(),this.dispatch("cell-layout",this)}setWidth(){this.width=this.column.width,this.element.style.width=this.column.widthStyled}clearWidth(){this.width="",this.element.style.width=""}getWidth(){return this.width||this.element.offsetWidth}setMinWidth(){this.minWidth=this.column.minWidth,this.element.style.minWidth=this.column.minWidthStyled}setMaxWidth(){this.maxWidth=this.column.maxWidth,this.element.style.maxWidth=this.column.maxWidthStyled}checkHeight(){this.row.reinitializeHeight()}clearHeight(){this.element.style.height="",this.height=null}setHeight(){this.height=this.row.height,this.element.style.height=this.row.heightStyled}getHeight(){return this.height||this.element.offsetHeight}show(){this.element.style.display=this.column.vertAlign?"inline-flex":""}hide(){this.element.style.display="none"}delete(){this.dispatch("cell-delete",this),!this.table.rowManager.redrawBlock&&this.element.parentNode&&this.element.parentNode.removeChild(this.element),this.element=!1,this.column.deleteCell(this),this.row.deleteCell(this),this.calcs={}}getIndex(){return this.row.getCellIndex(this)}getComponent(){return this.component||(this.component=new Vp(this)),this.component}}class _u{constructor(l){return this._column=l,this.type="ColumnComponent",new Proxy(this,{get:function(o,a,c){return void 0!==o[a]?o[a]:o._column.table.componentFunctionBinder.handle("column",o._column,a)}})}getElement(){return this._column.getElement()}getDefinition(){return this._column.getDefinition()}getField(){return this._column.getField()}getCells(){var l=[];return this._column.cells.forEach(function(o){l.push(o.getComponent())}),l}isVisible(){return this._column.visible}show(){this._column.isGroup?this._column.columns.forEach(function(l){l.show()}):this._column.show()}hide(){this._column.isGroup?this._column.columns.forEach(function(l){l.hide()}):this._column.hide()}toggle(){this._column.visible?this.hide():this.show()}delete(){return this._column.delete()}getSubColumns(){var l=[];return this._column.columns.length&&this._column.columns.forEach(function(o){l.push(o.getComponent())}),l}getParentColumn(){return this._column.parent instanceof Column&&this._column.parent.getComponent()}_getSelf(){return this._column}scrollTo(){return this._column.table.columnManager.scrollToColumn(this._column)}getTable(){return this._column.table}move(l,o){var a=this._column.table.columnManager.findColumn(l);a?this._column.table.columnManager.moveColumn(this._column,a,o):console.warn("Move Error - No matching column found:",a)}getNextColumn(){var l=this._column.nextColumn();return!!l&&l.getComponent()}getPrevColumn(){var l=this._column.prevColumn();return!!l&&l.getComponent()}updateDefinition(l){return this._column.updateDefinition(l)}getWidth(){return this._column.getWidth()}setWidth(l){var o;return o=!0===l?this._column.reinitializeWidth(!0):this._column.setWidth(l),this._column.table.columnManager.renderer.rerenderColumns(!0),o}}var rl={title:void 0,field:void 0,columns:void 0,visible:void 0,hozAlign:void 0,vertAlign:void 0,width:void 0,minWidth:40,maxWidth:void 0,tooltip:void 0,cssClass:void 0,variableHeight:void 0,headerTooltip:void 0,headerVertical:void 0,headerHozAlign:void 0,editableTitle:void 0};let qu=(()=>{class g extends Nc{constructor(o,a){super(a.table),this.definition=o,this.parent=a,this.type="column",this.columns=[],this.cells=[],this.element=this.createElement(),this.contentElement=!1,this.titleHolderElement=!1,this.titleElement=!1,this.groupElement=this.createGroupElement(),this.isGroup=!1,this.tooltip=!1,this.hozAlign="",this.vertAlign="",this.field="",this.fieldStructure="",this.getFieldValue="",this.setFieldValue="",this.titleFormatterRendered=!1,this.mapDefinitions(),this.setField(this.definition.field),this.modules={},this.width=null,this.widthStyled="",this.maxWidth=null,this.maxWidthStyled="",this.minWidth=null,this.minWidthStyled="",this.widthFixed=!1,this.visible=!0,this.component=null,this.definition.columns?(this.isGroup=!0,this.definition.columns.forEach((c,f)=>{var E=new g(c,this);this.attachColumn(E)}),this.checkColumnVisibility()):a.registerColumnField(this),this._initialize(),this.bindModuleColumns()}createElement(){var o=document.createElement("div");return o.classList.add("tabulator-col"),o.setAttribute("role","columnheader"),o.setAttribute("aria-sort","none"),o}createGroupElement(){var o=document.createElement("div");return o.classList.add("tabulator-col-group-cols"),o}mapDefinitions(){var o=this.table.options.columnDefaults;if(o)for(let a in o)void 0===this.definition[a]&&(this.definition[a]=o[a]);this.definition=this.table.columnManager.optionsList.generate(g.defaultOptionList,this.definition)}checkDefinition(){Object.keys(this.definition).forEach(o=>{-1===g.defaultOptionList.indexOf(o)&&console.warn("Invalid column definition option in '"+(this.field||this.definition.title)+"' column:",o)})}setField(o){this.field=o,this.fieldStructure=o?this.table.options.nestedFieldSeparator?o.split(this.table.options.nestedFieldSeparator):[o]:[],this.getFieldValue=this.fieldStructure.length>1?this._getNestedData:this._getFlatData,this.setFieldValue=this.fieldStructure.length>1?this._setNestedData:this._setFlatData}registerColumnPosition(o){this.parent.registerColumnPosition(o)}registerColumnField(o){this.parent.registerColumnField(o)}reRegisterPosition(){this.isGroup?this.columns.forEach(function(o){o.reRegisterPosition()}):this.registerColumnPosition(this)}_mapDepricatedFunctionality(){}setTooltip(){var o=this.definition,a=void 0===o.headerTooltip?o.tooltip:o.headerTooltip;a?!0===a?o.field?this.langBind("columns|"+o.field,c=>{this.element.setAttribute("title",c||o.title)}):this.element.setAttribute("title",o.title):("function"==typeof a&&!1===(a=a(this.getComponent()))&&(a=""),this.element.setAttribute("title",a)):this.element.setAttribute("title","")}_initialize(){for(var o=this.definition;this.element.firstChild;)this.element.removeChild(this.element.firstChild);o.headerVertical&&(this.element.classList.add("tabulator-col-vertical"),"flip"===o.headerVertical&&this.element.classList.add("tabulator-col-vertical-flip")),this.contentElement=this._bindEvents(),this.contentElement=this._buildColumnHeaderContent(),this.element.appendChild(this.contentElement),this.isGroup?this._buildGroupHeader():this._buildColumnHeader(),this.setTooltip(),this.dispatch("column-init",this),this.element.addEventListener("mouseenter",a=>{this.setTooltip()})}_bindEvents(){var a,c,f,o=this.definition;"function"==typeof o.headerClick&&this.element.addEventListener("click",E=>{o.headerClick(E,this.getComponent())}),"function"==typeof o.headerDblClick&&this.element.addEventListener("dblclick",E=>{o.headerDblClick(E,this.getComponent())}),"function"==typeof o.headerContext&&this.element.addEventListener("contextmenu",E=>{o.headerContext(E,this.getComponent())}),"function"==typeof o.headerTap&&(f=!1,this.element.addEventListener("touchstart",E=>{f=!0},{passive:!0}),this.element.addEventListener("touchend",E=>{f&&o.headerTap(E,this.getComponent()),f=!1})),"function"==typeof o.headerDblTap&&(a=null,this.element.addEventListener("touchend",E=>{a?(clearTimeout(a),a=null,o.headerDblTap(E,this.getComponent())):a=setTimeout(()=>{clearTimeout(a),a=null},300)})),"function"==typeof o.headerTapHold&&(c=null,this.element.addEventListener("touchstart",E=>{clearTimeout(c),c=setTimeout(function(){clearTimeout(c),c=null,f=!1,o.headerTapHold(E,this.getComponent())},1e3)},{passive:!0}),this.element.addEventListener("touchend",E=>{clearTimeout(c),c=null}))}_buildColumnHeader(){var o=this.definition;this.dispatch("column-layout",this),void 0!==o.visible&&(o.visible?this.show(!0):this.hide(!0)),o.cssClass&&o.cssClass.split(" ").forEach(f=>{this.element.classList.add(f)}),o.field&&this.element.setAttribute("tabulator-field",o.field),this.setMinWidth(parseInt(o.minWidth)),o.maxWidth&&this.setMaxWidth(parseInt(o.maxWidth)),this.reinitializeWidth(),this.tooltip=this.definition.tooltip,this.hozAlign=this.definition.hozAlign,this.vertAlign=this.definition.vertAlign,this.titleElement.style.textAlign=this.definition.headerHozAlign}_buildColumnHeaderContent(){var c=document.createElement("div");return c.classList.add("tabulator-col-content"),this.titleHolderElement=document.createElement("div"),this.titleHolderElement.classList.add("tabulator-col-title-holder"),c.appendChild(this.titleHolderElement),this.titleElement=this._buildColumnHeaderTitle(),this.titleHolderElement.appendChild(this.titleElement),c}_buildColumnHeaderTitle(){var o=this.definition,a=document.createElement("div");if(a.classList.add("tabulator-col-title"),o.editableTitle){var c=document.createElement("input");c.classList.add("tabulator-title-editor"),c.addEventListener("click",f=>{f.stopPropagation(),c.focus()}),c.addEventListener("change",()=>{o.title=c.value,this.dispatchExternal("columnTitleChanged",this.getComponent())}),a.appendChild(c),o.field?this.langBind("columns|"+o.field,f=>{c.value=f||o.title||"&nbsp;"}):c.value=o.title||"&nbsp;"}else o.field?this.langBind("columns|"+o.field,f=>{this._formatColumnHeaderTitle(a,f||o.title||"&nbsp;")}):this._formatColumnHeaderTitle(a,o.title||"&nbsp;");return a}_formatColumnHeaderTitle(o,a){var c=this.chain("column-format",[this,a,o],null,()=>a);switch(typeof c){case"object":c instanceof Node?o.appendChild(c):(o.innerHTML="",console.warn("Format Error - Title formatter has returned a type of object, the only valid formatter object return is an instance of Node, the formatter returned:",c));break;case"undefined":case"null":o.innerHTML="";break;default:o.innerHTML=c}}_buildGroupHeader(){this.element.classList.add("tabulator-col-group"),this.element.setAttribute("role","columngroup"),this.element.setAttribute("aria-title",this.definition.title),this.definition.cssClass&&this.definition.cssClass.split(" ").forEach(a=>{this.element.classList.add(a)}),this.titleElement.style.textAlign=this.definition.headerHozAlign,this.element.appendChild(this.groupElement)}_getFlatData(o){return o[this.field]}_getNestedData(o){var E,a=o,c=this.fieldStructure,f=c.length;for(let R=0;R<f&&(E=a=a[c[R]],a);R++);return E}_setFlatData(o,a){this.field&&(o[this.field]=a)}_setNestedData(o,a){var c=o,f=this.fieldStructure,E=f.length;for(let R=0;R<E;R++)if(R==E-1)c[f[R]]=a;else{if(!c[f[R]]){if(void 0===a)break;c[f[R]]={}}c=c[f[R]]}}attachColumn(o){this.groupElement?(this.columns.push(o),this.groupElement.appendChild(o.getElement())):console.warn("Column Warning - Column being attached to another column instead of column group")}verticalAlign(o,a){var c=this.parent.isGroup?this.parent.getGroupElement().clientHeight:a||this.parent.getHeadersElement().clientHeight;this.element.style.height=c+"px",this.isGroup&&(this.groupElement.style.minHeight=c-this.contentElement.offsetHeight+"px"),!this.isGroup&&"top"!==o&&(this.element.style.paddingTop="bottom"===o?this.element.clientHeight-this.contentElement.offsetHeight+"px":(this.element.clientHeight-this.contentElement.offsetHeight)/2+"px"),this.columns.forEach(function(f){f.verticalAlign(o)})}clearVerticalAlign(){this.element.style.paddingTop="",this.element.style.height="",this.element.style.minHeight="",this.groupElement.style.minHeight="",this.columns.forEach(function(o){o.clearVerticalAlign()})}bindModuleColumns(){"rownum"==this.definition.formatter&&(this.table.rowManager.rowNumColumn=this)}getElement(){return this.element}getGroupElement(){return this.groupElement}getField(){return this.field}getFirstColumn(){return this.isGroup?!!this.columns.length&&this.columns[0].getFirstColumn():this}getLastColumn(){return this.isGroup?!!this.columns.length&&this.columns[this.columns.length-1].getLastColumn():this}getColumns(){return this.columns}getCells(){return this.cells}getTopColumn(){return this.parent.isGroup?this.parent.getTopColumn():this}getDefinition(o){var a=[];return this.isGroup&&o&&(this.columns.forEach(function(c){a.push(c.getDefinition(!0))}),this.definition.columns=a),this.definition}checkColumnVisibility(){var o=!1;this.columns.forEach(function(a){a.visible&&(o=!0)}),o?(this.show(),this.dispatchExternal("columnVisibilityChanged",this.getComponent(),!1)):this.hide()}show(o,a){this.visible||(this.visible=!0,this.element.style.display="",this.parent.isGroup&&this.parent.checkColumnVisibility(),this.cells.forEach(function(c){c.show()}),!this.isGroup&&null===this.width&&this.reinitializeWidth(),this.table.columnManager.verticalAlignHeaders(),this.dispatch("column-show",this,a),o||this.dispatchExternal("columnVisibilityChanged",this.getComponent(),!0),this.parent.isGroup&&this.parent.matchChildWidths(),this.silent||this.table.columnManager.renderer.rerenderColumns())}hide(o,a){this.visible&&(this.visible=!1,this.element.style.display="none",this.table.columnManager.verticalAlignHeaders(),this.parent.isGroup&&this.parent.checkColumnVisibility(),this.cells.forEach(function(c){c.hide()}),this.dispatch("column-hide",this),o||this.dispatchExternal("columnVisibilityChanged",this.getComponent(),!1),this.parent.isGroup&&this.parent.matchChildWidths(),this.silent||this.table.columnManager.renderer.rerenderColumns())}matchChildWidths(){var o=0;this.contentElement&&this.columns.length&&(this.columns.forEach(function(a){a.visible&&(o+=a.getWidth())}),this.contentElement.style.maxWidth=o-1+"px",this.parent.isGroup&&this.parent.matchChildWidths())}removeChild(o){var a=this.columns.indexOf(o);a>-1&&this.columns.splice(a,1),this.columns.length||this.delete()}setWidth(o){this.widthFixed=!0,this.setWidthActual(o)}setWidthActual(o){isNaN(o)&&(o=Math.floor(this.table.element.clientWidth/100*parseInt(o))),o=Math.max(this.minWidth,o),this.maxWidth&&(o=Math.min(this.maxWidth,o)),this.width=o,this.widthStyled=o?o+"px":"",this.element.style.width=this.widthStyled,this.isGroup||this.cells.forEach(function(a){a.setWidth()}),this.parent.isGroup&&this.parent.matchChildWidths(),this.dispatch("column-width",this)}checkCellHeights(){var o=[];this.cells.forEach(function(a){a.row.heightInitialized&&(null!==a.row.getElement().offsetParent?(o.push(a.row),a.row.clearCellHeight()):a.row.heightInitialized=!1)}),o.forEach(function(a){a.calcHeight()}),o.forEach(function(a){a.setCellHeight()})}getWidth(){var o=0;return this.isGroup?this.columns.forEach(function(a){a.visible&&(o+=a.getWidth())}):o=this.width,o}getHeight(){return this.element.offsetHeight}setMinWidth(o){this.minWidth=o,this.minWidthStyled=o?o+"px":"",this.element.style.minWidth=this.minWidthStyled,this.cells.forEach(function(a){a.setMinWidth()})}setMaxWidth(o){this.maxWidth=o,this.maxWidthStyled=o?o+"px":"",this.element.style.maxWidth=this.maxWidthStyled,this.cells.forEach(function(a){a.setMaxWidth()})}delete(){return new Promise((o,a)=>{this.isGroup&&this.columns.forEach(function(f){f.delete()}),this.dispatch("column-delete",this);var c=this.cells.length;for(let f=0;f<c;f++)this.cells[0].delete();this.element.parentNode&&this.element.parentNode.removeChild(this.element),this.element=!1,this.contentElement=!1,this.titleElement=!1,this.groupElement=!1,this.parent.isGroup&&this.parent.removeChild(this),this.table.columnManager.deregisterColumn(this),this.table.columnManager.renderer.rerenderColumns(!0),o()})}columnRendered(){this.titleFormatterRendered&&this.titleFormatterRendered()}generateCell(o){var a=new xd(this,o);return this.cells.push(a),a}nextColumn(){var o=this.table.columnManager.findColumnIndex(this);return o>-1&&this._nextVisibleColumn(o+1)}_nextVisibleColumn(o){var a=this.table.columnManager.getColumnByIndex(o);return!a||a.visible?a:this._nextVisibleColumn(o+1)}prevColumn(){var o=this.table.columnManager.findColumnIndex(this);return o>-1&&this._prevVisibleColumn(o-1)}_prevVisibleColumn(o){var a=this.table.columnManager.getColumnByIndex(o);return!a||a.visible?a:this._prevVisibleColumn(o-1)}reinitializeWidth(o){this.widthFixed=!1,void 0!==this.definition.width&&!o&&this.setWidth(this.definition.width),this.dispatch("column-width-fit-before",this),this.fitToData(),this.dispatch("column-width-fit-after",this)}fitToData(){if(!this.isGroup){this.widthFixed||(this.element.style.width="",this.cells.forEach(a=>{a.clearWidth()}));var o=this.element.offsetWidth;(!this.width||!this.widthFixed)&&(this.cells.forEach(a=>{var c=a.getWidth();c>o&&(o=c)}),o&&this.setWidthActual(o+1))}}updateDefinition(o){var a;return this.isGroup||this.parent.isGroup?(console.error("Column Update Error - The updateDefinition function is only available on ungrouped columns"),Promise.reject("Column Update Error - The updateDefinition function is only available on columns, not column groups")):(a=Object.assign({},this.getDefinition()),a=Object.assign(a,o),this.table.columnManager.addColumn(a,!1,this).then(c=>(a.field==this.field&&(this.field=!1),this.delete().then(()=>c.getComponent()))))}deleteCell(o){var a=this.cells.indexOf(o);a>-1&&this.cells.splice(a,1)}getComponent(){return this.component||(this.component=new _u(this)),this.component}}return g.defaultOptionList=rl,g})();class gd{constructor(l){return this._row=l,new Proxy(this,{get:function(o,a,c){return void 0!==o[a]?o[a]:o._row.table.componentFunctionBinder.handle("row",o._row,a)}})}getData(l){return this._row.getData(l)}getElement(){return this._row.getElement()}getCells(){var l=[];return this._row.getCells().forEach(function(o){l.push(o.getComponent())}),l}getCell(l){var o=this._row.getCell(l);return!!o&&o.getComponent()}getIndex(){return this._row.getData("data")[this._row.table.options.index]}getPosition(l){return this._row.table.rowManager.getRowPosition(this._row,l)}delete(){return this._row.delete()}scrollTo(){return this._row.table.rowManager.scrollToRow(this._row)}move(l,o){this._row.moveToRow(l,o)}update(l){return this._row.updateData(l)}normalizeHeight(){this._row.normalizeHeight(!0)}_getSelf(){return this._row}reformat(){return this._row.reinitialize()}getTable(){return this._row.table}getNextRow(){var l=this._row.nextRow();return l&&l.getComponent()}getPrevRow(){var l=this._row.prevRow();return l&&l.getComponent()}}class ol extends Nc{constructor(l,o,a="row"){super(o.table),this.parent=o,this.data={},this.type=a,this.element=!1,this.modules={},this.cells=[],this.height=0,this.heightStyled="",this.manualHeight=!1,this.outerHeight=0,this.initialized=!1,this.heightInitialized=!1,this.component=null,this.created=!1,this.setData(l)}create(){this.created||(this.created=!0,this.generateElement())}createElement(){var l=document.createElement("div");l.classList.add("tabulator-row"),l.setAttribute("role","row"),this.element=l}getElement(){return this.create(),this.element}detachElement(){this.element&&this.element.parentNode&&this.element.parentNode.removeChild(this.element)}generateElement(){this.createElement(),this.dispatch("row-init",this)}generateCells(){this.cells=this.table.columnManager.generateCells(this)}initialize(l){if(this.create(),!this.initialized||l){for(this.deleteCells();this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.dispatch("row-layout-before",this),this.generateCells(),this.table.columnManager.renderer.renderRowCells(this),l&&this.normalizeHeight(),this.dispatch("row-layout",this),this.table.options.rowFormatter&&this.table.options.rowFormatter(this.getComponent()),this.initialized=!0,this.dispatch("row-layout-after",this)}else this.table.columnManager.renderer.rerenderRowCells(this)}reinitializeHeight(){this.heightInitialized=!1,this.element&&null!==this.element.offsetParent&&this.normalizeHeight(!0)}deinitializeHeight(){this.heightInitialized=!1}reinitialize(l){this.initialized=!1,this.heightInitialized=!1,this.manualHeight||(this.height=0,this.heightStyled=""),this.element&&null!==this.element.offsetParent&&this.initialize(!0),this.dispatch("row-relayout",this)}calcHeight(l){var o=0,a=this.table.options.resizableRows?this.element.clientHeight:0;this.cells.forEach(function(c){var f=c.getHeight();f>o&&(o=f)}),this.height=l?Math.max(o,a):this.manualHeight?this.height:Math.max(o,a),this.heightStyled=this.height?this.height+"px":"",this.outerHeight=this.element.offsetHeight}setCellHeight(){this.cells.forEach(function(l){l.setHeight()}),this.heightInitialized=!0}clearCellHeight(){this.cells.forEach(function(l){l.clearHeight()})}normalizeHeight(l){l&&this.clearCellHeight(),this.calcHeight(l),this.setCellHeight()}setHeight(l,o){(this.height!=l||o)&&(this.manualHeight=!0,this.height=l,this.heightStyled=l?l+"px":"",this.setCellHeight(),this.outerHeight=this.element.offsetHeight)}getHeight(){return this.outerHeight}getWidth(){return this.element.offsetWidth}deleteCell(l){var o=this.cells.indexOf(l);o>-1&&this.cells.splice(o,1)}setData(l){this.data=this.chain("row-data-init-before",[this,l],void 0,l),this.dispatch("row-data-init-after",this)}updateData(l){var c,o=this.element&&Ps.elVisible(this.element),a={};return new Promise((f,E)=>{for(var R in"string"==typeof l&&(l=JSON.parse(l)),this.dispatch("row-data-save-before",this),this.subscribed("row-data-changing")&&(a=Object.assign(a,this.data),a=Object.assign(a,l)),c=this.chain("row-data-changing",[this,a,l],null,l))this.data[R]=c[R];for(var R in this.dispatch("row-data-save-after",this),l)this.table.columnManager.getColumnsByFieldRoot(R).forEach(J=>{let dt=this.getCell(J.getField());if(dt){let Ft=J.getFieldValue(c);dt.getValue()!=Ft&&(dt.setValueProcessData(Ft),o&&dt.cellRendered())}});o?(this.normalizeHeight(!0),this.table.options.rowFormatter&&this.table.options.rowFormatter(this.getComponent())):(this.initialized=!1,this.height=0,this.heightStyled=""),this.dispatch("row-data-changed",this,o,l),this.dispatchExternal("rowUpdated",this.getComponent()),this.subscribedExternal("dataChanged")&&this.dispatchExternal("dataChanged",this.table.rowManager.getData()),f()})}getData(l){return l?this.chain("row-data-retrieve",[this,l],null,this.data):this.data}getCell(l){return l=this.table.columnManager.findColumn(l),this.initialized||this.generateCells(),this.cells.find(function(a){return a.column===l})}getCellIndex(l){return this.cells.findIndex(function(o){return o===l})}findCell(l){return this.cells.find(o=>o.element===l)}getCells(){return this.initialized||this.generateCells(),this.cells}nextRow(){return this.table.rowManager.nextDisplayRow(this,!0)||!1}prevRow(){return this.table.rowManager.prevDisplayRow(this,!0)||!1}moveToRow(l,o){var a=this.table.rowManager.findRow(l);a?(this.table.rowManager.moveRowActual(this,a,!o),this.table.rowManager.refreshActiveData("display",!1,!0)):console.warn("Move Error - No matching row found:",l)}delete(){return this.dispatch("row-delete",this),this.deleteActual(),Promise.resolve()}deleteActual(l){this.table.rowManager.getRowIndex(this),this.detatchModules(),this.table.rowManager.deleteRow(this,l),this.deleteCells(),this.initialized=!1,this.heightInitialized=!1,this.element=!1,this.dispatch("row-deleted",this)}detatchModules(){this.dispatch("row-deleting",this)}deleteCells(){var l=this.cells.length;for(let o=0;o<l;o++)this.cells[0].delete()}wipe(){if(this.detatchModules(),this.deleteCells(),this.element){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.element.parentNode&&this.element.parentNode.removeChild(this.element)}this.element=!1,this.modules={}}getGroup(){return this.modules.group||!1}getComponent(){return this.component||(this.component=new gd(this)),this.component}}var md={avg:function(g,l,o){var a=0,c=void 0!==o.precision?o.precision:2;return g.length&&(a=g.reduce(function(f,E){return Number(f)+Number(E)}),a/=g.length,a=!1!==c?a.toFixed(c):a),parseFloat(a).toString()},max:function(g,l,o){var a=null,c=void 0!==o.precision&&o.precision;return g.forEach(function(f){((f=Number(f))>a||null===a)&&(a=f)}),null!==a?!1!==c?a.toFixed(c):a:""},min:function(g,l,o){var a=null,c=void 0!==o.precision&&o.precision;return g.forEach(function(f){((f=Number(f))<a||null===a)&&(a=f)}),null!==a?!1!==c?a.toFixed(c):a:""},sum:function(g,l,o){var a=0,c=void 0!==o.precision&&o.precision;return g.length&&g.forEach(function(f){f=Number(f),a+=isNaN(f)?0:Number(f)}),!1!==c?a.toFixed(c):a},concat:function(g,l,o){var a=0;return g.length&&(a=g.reduce(function(c,f){return String(c)+String(f)})),a},count:function(g,l,o){var a=0;return g.length&&g.forEach(function(c){c&&a++}),a}};let qh=(()=>{class g extends bo{constructor(o){super(o),this.topCalcs=[],this.botCalcs=[],this.genColumn=!1,this.topElement=this.createElement(),this.botElement=this.createElement(),this.topRow=!1,this.botRow=!1,this.topInitialized=!1,this.botInitialized=!1,this.registerTableOption("columnCalcs",!0),this.registerColumnOption("topCalc"),this.registerColumnOption("topCalcParams"),this.registerColumnOption("topCalcFormatter"),this.registerColumnOption("topCalcFormatterParams"),this.registerColumnOption("bottomCalc"),this.registerColumnOption("bottomCalcParams"),this.registerColumnOption("bottomCalcFormatter"),this.registerColumnOption("bottomCalcFormatterParams")}createElement(){var o=document.createElement("div");return o.classList.add("tabulator-calcs-holder"),o}initialize(){this.genColumn=new qu({field:"value"},this),this.subscribe("cell-value-changed",this.cellValueChanged.bind(this)),this.subscribe("column-init",this.initializeColumnCheck.bind(this)),this.subscribe("row-deleted",this.rowsUpdated.bind(this)),this.subscribe("scroll-horizontal",this.scrollHorizontal.bind(this)),this.subscribe("row-added",this.rowsUpdated.bind(this)),this.subscribe("column-moved",this.recalcActiveRows.bind(this)),this.subscribe("column-add",this.recalcActiveRows.bind(this)),this.subscribe("data-refeshed",this.recalcActiveRows.bind(this)),this.subscribe("table-redraw",this.tableRedraw.bind(this)),this.registerTableFunction("getCalcResults",this.getResults.bind(this)),this.registerTableFunction("recalc",this.userRecalc.bind(this))}tableRedraw(o){this.recalc(this.table.rowManager.activeRows),o&&this.redraw()}userRecalc(){this.recalc(this.table.rowManager.activeRows)}rowsUpdated(o){this.table.options.groupBy?this.recalcRowGroup(this):this.recalcActiveRows()}recalcActiveRows(){this.recalc(this.table.rowManager.activeRows)}cellValueChanged(o){(o.column.definition.topCalc||o.column.definition.bottomCalc)&&(this.table.options.groupBy?(("table"==this.table.options.columnCalcs||"both"==this.table.options.columnCalcs)&&this.recalcActiveRows(),"table"!=this.table.options.columnCalcs&&this.recalcRowGroup(o.row)):this.recalcActiveRows())}initializeColumnCheck(o){(o.definition.topCalc||o.definition.bottomCalc)&&this.initializeColumn(o)}initializeColumn(o){var a=o.definition,c={topCalcParams:a.topCalcParams||{},botCalcParams:a.bottomCalcParams||{}};if(a.topCalc){switch(typeof a.topCalc){case"string":g.calculations[a.topCalc]?c.topCalc=g.calculations[a.topCalc]:console.warn("Column Calc Error - No such calculation found, ignoring: ",a.topCalc);break;case"function":c.topCalc=a.topCalc}c.topCalc&&(o.modules.columnCalcs=c,this.topCalcs.push(o),"group"!=this.table.options.columnCalcs&&this.initializeTopRow())}if(a.bottomCalc){switch(typeof a.bottomCalc){case"string":g.calculations[a.bottomCalc]?c.botCalc=g.calculations[a.bottomCalc]:console.warn("Column Calc Error - No such calculation found, ignoring: ",a.bottomCalc);break;case"function":c.botCalc=a.bottomCalc}c.botCalc&&(o.modules.columnCalcs=c,this.botCalcs.push(o),"group"!=this.table.options.columnCalcs&&this.initializeBottomRow())}}registerColumnField(){}removeCalcs(){var o=!1;this.topInitialized&&(this.topInitialized=!1,this.topElement.parentNode.removeChild(this.topElement),o=!0),this.botInitialized&&(this.botInitialized=!1,this.table.footerManager.remove(this.botElement),o=!0),o&&this.table.rowManager.adjustTableSize()}initializeTopRow(){this.topInitialized||(this.table.columnManager.getElement().insertBefore(this.topElement,this.table.columnManager.headersElement.nextSibling),this.topInitialized=!0)}initializeBottomRow(){this.botInitialized||(this.table.footerManager.prepend(this.botElement),this.botInitialized=!0)}scrollHorizontal(o){this.botInitialized&&this.botRow&&(this.botRow.getElement().style.marginLeft=-o+"px")}recalc(o){var a;if(this.topInitialized||this.botInitialized){if(this.rowsToData(o),this.topInitialized){for(this.topRow&&this.topRow.deleteCells(),a=this.generateRow("top",this.rowsToData(o)),this.topRow=a;this.topElement.firstChild;)this.topElement.removeChild(this.topElement.firstChild);this.topElement.appendChild(a.getElement()),a.initialize(!0)}if(this.botInitialized){for(this.botRow&&this.botRow.deleteCells(),a=this.generateRow("bottom",this.rowsToData(o)),this.botRow=a;this.botElement.firstChild;)this.botElement.removeChild(this.botElement.firstChild);this.botElement.appendChild(a.getElement()),a.initialize(!0)}this.table.rowManager.adjustTableSize(),this.table.modExists("frozenColumns")&&this.table.modules.frozenColumns.layout()}}recalcRowGroup(o){this.recalcGroup(this.table.modules.groupRows.getRowGroup(o))}recalcAll(){(this.topCalcs.length||this.botCalcs.length)&&("group"!==this.table.options.columnCalcs&&this.recalcActiveRows(),this.table.options.groupBy&&"table"!==this.table.options.columnCalcs)&&this.table.modules.groupRows.getChildGroups().forEach(a=>{this.recalcGroup(a)})}recalcGroup(o){var a,c;o&&o.calcs&&(o.calcs.bottom&&(a=this.rowsToData(o.rows),c=this.generateRowData("bottom",a),o.calcs.bottom.updateData(c),o.calcs.bottom.reinitialize()),o.calcs.top&&(a=this.rowsToData(o.rows),c=this.generateRowData("top",a),o.calcs.top.updateData(c),o.calcs.top.reinitialize()))}generateTopRow(o){return this.generateRow("top",this.rowsToData(o))}generateBottomRow(o){return this.generateRow("bottom",this.rowsToData(o))}rowsToData(o){var a=[];return o.forEach(c=>{if(a.push(c.getData()),this.table.options.dataTree&&this.table.options.dataTreeChildColumnCalcs&&c.modules.dataTree.open){var f=this.rowsToData(this.table.modules.dataTree.getFilteredTreeChildren(c));a=a.concat(f)}}),a}generateRow(o,a){var f,c=this.generateRowData(o,a);return this.table.modExists("mutator")&&this.table.modules.mutator.disable(),f=new ol(c,this,"calc"),this.table.modExists("mutator")&&this.table.modules.mutator.enable(),f.getElement().classList.add("tabulator-calcs","tabulator-calcs-"+o),f.component=!1,f.getComponent=()=>(f.component||(f.component=new Vf(this)),f.component),f.generateCells=()=>{var E=[];this.table.columnManager.columnsByIndex.forEach(R=>{this.genColumn.setField(R.getField()),this.genColumn.hozAlign=R.hozAlign,this.genColumn.modules.format=R.definition[o+"CalcFormatter"]&&this.table.modExists("format")?{formatter:this.table.modules.format.getFormatter(R.definition[o+"CalcFormatter"]),params:R.definition[o+"CalcFormatterParams"]||{}}:{formatter:this.table.modules.format.getFormatter("plaintext"),params:{}},this.genColumn.definition.cssClass=R.definition.cssClass;var O=new xd(this.genColumn,f);O.getElement(),O.column=R,O.setWidth(),R.cells.push(O),E.push(O),R.visible||O.hide()}),f.cells=E},f}generateRowData(o,a){var R,O,c={},E="top"==o?"topCalc":"botCalc";return("top"==o?this.topCalcs:this.botCalcs).forEach(function(F){var J=[];F.modules.columnCalcs&&F.modules.columnCalcs[E]&&(a.forEach(function(dt){J.push(F.getFieldValue(dt))}),R="function"==typeof F.modules.columnCalcs[O=E+"Params"]?F.modules.columnCalcs[O](J,a):F.modules.columnCalcs[O],F.setFieldValue(c,F.modules.columnCalcs[E](J,a,R)))}),c}hasTopCalcs(){return!!this.topCalcs.length}hasBottomCalcs(){return!!this.botCalcs.length}redraw(){this.topRow&&this.topRow.normalizeHeight(!0),this.botRow&&this.botRow.normalizeHeight(!0)}getResults(){var o={};return this.table.options.groupBy&&this.table.modExists("groupRows")?this.table.modules.groupRows.getGroups(!0).forEach(c=>{o[c.getKey()]=this.getGroupResults(c)}):o={top:this.topRow?this.topRow.getData():{},bottom:this.botRow?this.botRow.getData():{}},o}getGroupResults(o){var a=o._getSelf(),c=o.getSubGroups(),f={};return c.forEach(R=>{f[R.getKey()]=this.getGroupResults(R)}),{top:a.calcs.top?a.calcs.top.getData():{},bottom:a.calcs.bottom?a.calcs.bottom.getData():{},groups:f}}}return g.moduleName="columnCalcs",g.calculations=md,g})(),Nh=(()=>{class g extends bo{constructor(o){super(o),this.indent=10,this.field="",this.collapseEl=null,this.expandEl=null,this.branchEl=null,this.elementField=!1,this.startOpen=function(){},this.displayIndex=0,this.registerTableOption("dataTree",!1),this.registerTableOption("dataTreeFilter",!0),this.registerTableOption("dataTreeSort",!0),this.registerTableOption("dataTreeElementColumn",!1),this.registerTableOption("dataTreeBranchElement",!0),this.registerTableOption("dataTreeChildIndent",9),this.registerTableOption("dataTreeChildField","_children"),this.registerTableOption("dataTreeCollapseElement",!1),this.registerTableOption("dataTreeExpandElement",!1),this.registerTableOption("dataTreeStartExpanded",!1),this.registerTableOption("dataTreeChildColumnCalcs",!1),this.registerTableOption("dataTreeSelectPropagate",!1),this.registerComponentFunction("row","treeCollapse",this.collapseRow.bind(this)),this.registerComponentFunction("row","treeExpand",this.expandRow.bind(this)),this.registerComponentFunction("row","treeToggle",this.toggleRow.bind(this)),this.registerComponentFunction("row","getTreeParent",this.getTreeParent.bind(this)),this.registerComponentFunction("row","getTreeChildren",this.getRowChildren.bind(this)),this.registerComponentFunction("row","addTreeChild",this.addTreeChildRow.bind(this))}initialize(){if(this.table.options.dataTree){var o=null,a=this.table.columnManager.getFirstVisibileColumn(),c=this.table.options;switch(this.field=c.dataTreeChildField,this.indent=c.dataTreeChildIndent,this.elementField=c.dataTreeElementColumn||!!a&&a.field,c.dataTreeBranchElement&&(!0===c.dataTreeBranchElement?(this.branchEl=document.createElement("div"),this.branchEl.classList.add("tabulator-data-tree-branch")):"string"==typeof c.dataTreeBranchElement?((o=document.createElement("div")).innerHTML=c.dataTreeBranchElement,this.branchEl=o.firstChild):this.branchEl=c.dataTreeBranchElement),c.dataTreeCollapseElement?"string"==typeof c.dataTreeCollapseElement?((o=document.createElement("div")).innerHTML=c.dataTreeCollapseElement,this.collapseEl=o.firstChild):this.collapseEl=c.dataTreeCollapseElement:(this.collapseEl=document.createElement("div"),this.collapseEl.classList.add("tabulator-data-tree-control"),this.collapseEl.tabIndex=0,this.collapseEl.innerHTML="<div class='tabulator-data-tree-control-collapse'></div>"),c.dataTreeExpandElement?"string"==typeof c.dataTreeExpandElement?((o=document.createElement("div")).innerHTML=c.dataTreeExpandElement,this.expandEl=o.firstChild):this.expandEl=c.dataTreeExpandElement:(this.expandEl=document.createElement("div"),this.expandEl.classList.add("tabulator-data-tree-control"),this.expandEl.tabIndex=0,this.expandEl.innerHTML="<div class='tabulator-data-tree-control-expand'></div>"),typeof c.dataTreeStartExpanded){case"boolean":this.startOpen=function(f,E){return c.dataTreeStartExpanded};break;case"function":this.startOpen=c.dataTreeStartExpanded;break;default:this.startOpen=function(f,E){return c.dataTreeStartExpanded[E]}}this.subscribe("row-init",this.initializeRow.bind(this)),this.subscribe("row-layout-after",this.layoutRow.bind(this)),this.subscribe("row-relayout",this.layoutRow.bind(this)),this.subscribe("row-deleted",this.rowDelete.bind(this),0),this.subscribe("row-data-changed",this.rowDataChanged.bind(this),10),this.subscribe("column-moving-rows",this.columnMoving.bind(this)),this.registerDisplayHandler(this.getRows.bind(this),30)}}getRowChildren(o){return this.getTreeChildren(o,!0)}columnMoving(){var o=[];return this.table.rowManager.rows.forEach(a=>{o=o.concat(this.getTreeChildren(a,!1,!0))}),o}rowDataChanged(o,a,c){this.redrawNeeded(c)&&(this.initializeRow(o),a&&(this.layoutRow(o),this.refreshData(!0)))}initializeRow(o){var a=o.getData()[this.field],c=Array.isArray(a),f=c||!c&&"object"==typeof a&&null!==a;!f&&o.modules.dataTree&&o.modules.dataTree.branchEl&&o.modules.dataTree.branchEl.parentNode.removeChild(o.modules.dataTree.branchEl),!f&&o.modules.dataTree&&o.modules.dataTree.controlEl&&o.modules.dataTree.controlEl.parentNode.removeChild(o.modules.dataTree.controlEl),o.modules.dataTree={index:o.modules.dataTree?o.modules.dataTree.index:0,open:!!f&&(o.modules.dataTree?o.modules.dataTree.open:this.startOpen(o.getComponent(),0)),controlEl:!(!o.modules.dataTree||!f)&&o.modules.dataTree.controlEl,branchEl:!(!o.modules.dataTree||!f)&&o.modules.dataTree.branchEl,parent:!!o.modules.dataTree&&o.modules.dataTree.parent,children:f}}reinitializeRowChildren(o){this.getTreeChildren(o,!1,!0).forEach(function(c){c.reinitialize(!0)})}layoutRow(o){var c=(this.elementField?o.getCell(this.elementField):o.getCells()[0]).getElement(),f=o.modules.dataTree;f.branchEl&&(f.branchEl.parentNode&&f.branchEl.parentNode.removeChild(f.branchEl),f.branchEl=!1),f.controlEl&&(f.controlEl.parentNode&&f.controlEl.parentNode.removeChild(f.controlEl),f.controlEl=!1),this.generateControlElement(o,c),o.getElement().classList.add("tabulator-tree-level-"+f.index),f.index&&(this.branchEl?(f.branchEl=this.branchEl.cloneNode(!0),c.insertBefore(f.branchEl,c.firstChild),this.table.rtl?f.branchEl.style.marginRight=(f.branchEl.offsetWidth+f.branchEl.style.marginLeft)*(f.index-1)+f.index*this.indent+"px":f.branchEl.style.marginLeft=(f.branchEl.offsetWidth+f.branchEl.style.marginRight)*(f.index-1)+f.index*this.indent+"px"):this.table.rtl?c.style.paddingRight=parseInt(window.getComputedStyle(c,null).getPropertyValue("padding-right"))+f.index*this.indent+"px":c.style.paddingLeft=parseInt(window.getComputedStyle(c,null).getPropertyValue("padding-left"))+f.index*this.indent+"px")}generateControlElement(o,a){var c=o.modules.dataTree,f=(a=a||o.getCells()[0].getElement(),c.controlEl);!1!==c.children&&(c.open?(c.controlEl=this.collapseEl.cloneNode(!0),c.controlEl.addEventListener("click",E=>{E.stopPropagation(),this.collapseRow(o)})):(c.controlEl=this.expandEl.cloneNode(!0),c.controlEl.addEventListener("click",E=>{E.stopPropagation(),this.expandRow(o)})),c.controlEl.addEventListener("mousedown",E=>{E.stopPropagation()}),f&&f.parentNode===a?f.parentNode.replaceChild(c.controlEl,f):a.insertBefore(c.controlEl,a.firstChild))}setDisplayIndex(o){this.displayIndex=o}getDisplayIndex(){return this.displayIndex}getRows(o){var a=[];return o.forEach((c,f)=>{var E;a.push(c),c instanceof ol&&(c.create(),!(E=c.modules.dataTree.children).index&&!1!==E.children&&this.getChildren(c).forEach(O=>{O.create(),a.push(O)}))}),a}getChildren(o,a){var c=o.modules.dataTree,f=[],E=[];return!1!==c.children&&(c.open||a)&&(Array.isArray(c.children)||(c.children=this.generateChildren(o)),f=this.table.modExists("filter")&&this.table.options.dataTreeFilter?this.table.modules.filter.filter(c.children):c.children,this.table.modExists("sort")&&this.table.options.dataTreeSort&&this.table.modules.sort.sort(f),f.forEach(R=>{E.push(R),this.getChildren(R).forEach(F=>{E.push(F)})})),E}generateChildren(o){var a=[],c=o.getData()[this.field];return Array.isArray(c)||(c=[c]),c.forEach(f=>{var E=new ol(f||{},this.table.rowManager);E.create(),E.modules.dataTree.index=o.modules.dataTree.index+1,E.modules.dataTree.parent=o,E.modules.dataTree.children&&(E.modules.dataTree.open=this.startOpen(E.getComponent(),E.modules.dataTree.index)),a.push(E)}),a}expandRow(o,a){var c=o.modules.dataTree;!1!==c.children&&(c.open=!0,o.reinitialize(),this.refreshData(!0),this.dispatchExternal("dataTreeRowExpanded",o.getComponent(),o.modules.dataTree.index))}collapseRow(o){var a=o.modules.dataTree;!1!==a.children&&(a.open=!1,o.reinitialize(),this.refreshData(!0),this.dispatchExternal("dataTreeRowCollapsed",o.getComponent(),o.modules.dataTree.index))}toggleRow(o){var a=o.modules.dataTree;!1!==a.children&&(a.open?this.collapseRow(o):this.expandRow(o))}getTreeParent(o){return!!o.modules.dataTree.parent&&o.modules.dataTree.parent.getComponent()}getFilteredTreeChildren(o){var a=o.modules.dataTree,c=[];return a.children&&(Array.isArray(a.children)||(a.children=this.generateChildren(o)),(this.table.modExists("filter")&&this.table.options.dataTreeFilter?this.table.modules.filter.filter(a.children):a.children).forEach(E=>{E instanceof ol&&c.push(E)})),c}rowDelete(o){var c,a=o.modules.dataTree.parent;a&&(!1!==(c=this.findChildIndex(o,a))&&a.data[this.field].splice(c,1),a.data[this.field].length||delete a.data[this.field],this.initializeRow(a),this.layoutRow(a)),this.refreshData(!0)}addTreeChildRow(o,a,c,f){var E=!1;"string"==typeof a&&(a=JSON.parse(a)),Array.isArray(o.data[this.field])||(o.data[this.field]=[],o.modules.dataTree.open=this.startOpen(o.getComponent(),o.modules.dataTree.index)),void 0!==f&&!1!==(E=this.findChildIndex(f,o))&&o.data[this.field].splice(c?E:E+1,0,a),!1===E&&(c?o.data[this.field].unshift(a):o.data[this.field].push(a)),this.initializeRow(o),this.layoutRow(o),this.refreshData(!0)}findChildIndex(o,a){var c=!1;return"object"==typeof o?o instanceof ol?c=o.data:o instanceof RowComponent?c=o._getSelf().data:"undefined"!=typeof HTMLElement&&o instanceof HTMLElement&&a.modules.dataTree&&(c=a.modules.dataTree.children.find(f=>f instanceof ol&&f.element===o))&&(c=c.data):c=null!=o&&a.data[this.field].find(f=>f.data[this.table.options.index]==o),c&&(Array.isArray(a.data[this.field])&&(c=a.data[this.field].indexOf(c)),-1==c&&(c=!1)),c}getTreeChildren(o,a,c){var f=o.modules.dataTree,E=[];return f.children&&(Array.isArray(f.children)||(f.children=this.generateChildren(o)),f.children.forEach(R=>{R instanceof ol&&(E.push(a?R.getComponent():R),c&&(E=E.concat(this.getTreeChildren(R,a,c))))})),E}checkForRestyle(o){o.row.cells.indexOf(o)||this.layoutRow(o.row)}getChildField(){return this.field}redrawNeeded(o){return!!this.field&&void 0!==o[this.field]||!!this.elementField&&void 0!==o[this.elementField]}}return g.moduleName="dataTree",g})();var sp={csv:function(g,l,o){var a=l&&l.delimiter?l.delimiter:",",c=[],f=[];g.forEach(E=>{var R=[];switch(E.type){case"group":console.warn("Download Warning - CSV downloader cannot process row groups");break;case"calc":console.warn("Download Warning - CSV downloader cannot process column calculations");break;case"header":E.columns.forEach((O,F)=>{O&&1===O.depth&&(f[F]=null==O.value?"":'"'+String(O.value).split('"').join('""')+'"')});break;case"row":E.columns.forEach(O=>{if(O){switch(typeof O.value){case"object":O.value=JSON.stringify(O.value);break;case"undefined":case"null":O.value=""}R.push('"'+String(O.value).split('"').join('""')+'"')}}),c.push(R.join(a))}}),f.length&&c.unshift(f.join(a)),c=c.join("\n"),l.bom&&(c="\ufeff"+c),o(c,"text/csv")},json:function(g,l,o){var a=[];g.forEach(c=>{var f={};switch(c.type){case"header":break;case"group":console.warn("Download Warning - JSON downloader cannot process row groups");break;case"calc":console.warn("Download Warning - JSON downloader cannot process column calculations");break;case"row":c.columns.forEach(E=>{E&&(f[E.component.getField()]=E.value)}),a.push(f)}}),o(a=JSON.stringify(a,null,"\t"),"application/json")},pdf:function(g,l,o){var a=[],c=[],f={},E=l.rowGroupStyles||{fontStyle:"bold",fontSize:12,cellPadding:6,fillColor:220},R=l.rowCalcStyles||{fontStyle:"bold",fontSize:10,cellPadding:4,fillColor:232},O=l.jsPDF||{},F=l&&l.title?l.title:"";function J(Ft,qt){var Ee=[];return Ft.columns.forEach(De=>{var Ge;if(De){switch(typeof De.value){case"object":De.value=JSON.stringify(De.value);break;case"undefined":case"null":De.value=""}Ge={content:De.value,colSpan:De.width,rowSpan:De.height},qt&&(Ge.styles=qt),Ee.push(Ge)}else Ee.push("")}),Ee}O.orientation||(O.orientation=l.orientation||"landscape"),O.unit||(O.unit="pt"),g.forEach(Ft=>{switch(Ft.type){case"header":a.push(J(Ft));break;case"group":c.push(J(Ft,E));break;case"calc":c.push(J(Ft,R));break;case"row":c.push(J(Ft))}});var dt=new jspdf.jsPDF(O);l&&l.autoTable&&(f="function"==typeof l.autoTable?l.autoTable(dt)||{}:l.autoTable),F&&(f.didDrawPage=function(Ft){dt.text(F,40,30)}),f.head=a,f.body=c,dt.autoTable(f),l&&l.documentProcessing&&l.documentProcessing(dt),o(dt.output("arraybuffer"),"application/pdf")},xlsx:function(g,l,o){var c=l.sheetName||"Sheet1",f=XLSX.utils.book_new(),E=new Nc(this);function O(){var dt=[],Ft=[],qt={},Ee={s:{c:0,r:0},e:{c:g[0]?g[0].columns.reduce((De,Ge)=>De+(Ge&&Ge.width?Ge.width:1),0):0,r:g.length}};return g.forEach((De,Ge)=>{var We=[];De.columns.forEach(function(Si,ln){Si?(We.push(Si.value instanceof Date||"object"!=typeof Si.value?Si.value:JSON.stringify(Si.value)),(Si.width>1||Si.height>-1)&&Ft.push({s:{r:Ge,c:ln},e:{r:Ge+Si.height-1,c:ln+Si.width-1}})):We.push("")}),dt.push(We)}),XLSX.utils.sheet_add_aoa(qt,dt),qt["!ref"]=XLSX.utils.encode_range(Ee),Ft.length&&(qt["!merges"]=Ft),qt}if(f.SheetNames=[],f.Sheets={},l.sheetOnly)o(O());else{if(l.sheets)for(var F in l.sheets)!0===l.sheets[F]?(f.SheetNames.push(F),f.Sheets[F]=O()):(f.SheetNames.push(F),E.commsSend(l.sheets[F],"download","intercept",{type:"xlsx",options:{sheetOnly:!0},active:this.active,intercept:function(dt){f.Sheets[F]=dt}}));else f.SheetNames.push(c),f.Sheets[c]=O();l.documentProcessing&&(f=l.documentProcessing(f)),o(function(dt){for(var Ft=new ArrayBuffer(dt.length),qt=new Uint8Array(Ft),Ee=0;Ee!=dt.length;++Ee)qt[Ee]=255&dt.charCodeAt(Ee);return Ft}(XLSX.write(f,{bookType:"xlsx",bookSST:!0,type:"binary"})),"application/octet-stream")}},html:function(g,l,o){this.modExists("export",!0)&&o(this.modules.export.genereateHTMLTable(g),"text/html")}};let vd=(()=>{class g extends bo{constructor(o){super(o),this.registerTableOption("downloadReady",function(a,c){return c}),this.registerTableOption("downloadConfig",{}),this.registerTableOption("downloadRowRange","active"),this.registerColumnOption("download"),this.registerColumnOption("titleDownload")}initialize(){this.registerTableFunction("download",this.download.bind(this)),this.registerTableFunction("downloadToTab",this.downloadToTab.bind(this))}downloadToTab(o,a,c,f){this.download(o,a,c,f,!0)}download(o,a,c,f,E){var R=!1;if("function"==typeof o?R=o:g.downloaders[o]?R=g.downloaders[o]:console.warn("Download Error - No such download type found: ",o),R){var F=this.generateExportList(f);R.call(this.table,F,c||{},function(J,dt){E?!0===E?this.triggerDownload(J,dt,o,a,!0):E(J):this.triggerDownload(J,dt,o,a)}.bind(this))}}generateExportList(o){var a=this.table.modules.export.generateExportList(this.table.options.downloadConfig,!1,o||this.table.options.downloadRowRange,"download"),c=this.table.options.groupHeaderDownload;return c&&!Array.isArray(c)&&(c=[c]),a.forEach(f=>{var E;"group"===f.type&&(E=f.columns[0],c&&c[f.indent]&&(E.value=c[f.indent](E.value,f.component._group.getRowCount(),f.component._group.getData(),f.component)))}),a}triggerDownload(o,a,c,f,E){var R=document.createElement("a"),O=new Blob([o],{type:a});f=f||"Tabulator."+("function"==typeof c?"txt":c),(O=this.table.options.downloadReady(o,O))&&(E?window.open(window.URL.createObjectURL(O)):navigator.msSaveOrOpenBlob?navigator.msSaveOrOpenBlob(O,f):(R.setAttribute("href",window.URL.createObjectURL(O)),R.setAttribute("download",f),R.style.display="none",document.body.appendChild(R),R.click(),document.body.removeChild(R)),this.dispatchExternal("downloadComplete"))}commsReceived(o,a,c){"intercept"===a&&this.download(c.type,"",c.options,c.active,c.intercept)}}return g.moduleName="download",g.downloaders=sp,g})();function vh(g,l){var o=l.mask,a=void 0!==l.maskLetterChar?l.maskLetterChar:"A",c=void 0!==l.maskNumberChar?l.maskNumberChar:"9",f=void 0!==l.maskWildcardChar?l.maskWildcardChar:"*";function E(R){var O=o[R];void 0!==O&&O!==f&&O!==a&&O!==c&&(g.value=g.value+""+O,E(R+1))}g.addEventListener("keydown",R=>{var O=g.value.length,F=R.key;if(R.keyCode>46){if(O>=o.length)return R.preventDefault(),R.stopPropagation(),!1;switch(o[O]){case a:if(F.toUpperCase()==F.toLowerCase())return R.preventDefault(),R.stopPropagation(),!1;break;case c:if(isNaN(F))return R.preventDefault(),R.stopPropagation(),!1;break;case f:break;default:if(F!==o[O])return R.preventDefault(),R.stopPropagation(),!1}}}),g.addEventListener("keyup",R=>{R.keyCode>46&&l.maskAutoFill&&E(g.value.length)}),g.placeholder||(g.placeholder=o),l.maskAutoFill&&E(g.value.length)}var Nd={input:function(g,l,o,a,c){var f=g.getValue(),E=document.createElement("input");if(E.setAttribute("type",c.search?"search":"text"),E.style.padding="4px",E.style.width="100%",E.style.boxSizing="border-box",c.elementAttributes&&"object"==typeof c.elementAttributes)for(let O in c.elementAttributes)"+"==O.charAt(0)?(O=O.slice(1),E.setAttribute(O,E.getAttribute(O)+c.elementAttributes["+"+O])):E.setAttribute(O,c.elementAttributes[O]);function R(O){null==f&&""!==E.value||E.value!==f?o(E.value)&&(f=E.value):a()}return E.value=void 0!==f?f:"",l(function(){E.focus({preventScroll:!0}),E.style.height="100%"}),E.addEventListener("change",R),E.addEventListener("blur",R),E.addEventListener("keydown",function(O){switch(O.keyCode){case 13:R();break;case 27:a();break;case 35:case 36:O.stopPropagation()}}),c.mask&&vh(E,c),E},textarea:function(g,l,o,a,c){var f=g.getValue(),E=c.verticalNavigation||"hybrid",R=String(null!=f?f:""),F=(R.match(/(?:\r\n|\r|\n)/g),document.createElement("textarea")),J=0;if(F.style.display="block",F.style.padding="2px",F.style.height="100%",F.style.width="100%",F.style.boxSizing="border-box",F.style.whiteSpace="pre-wrap",F.style.resize="none",c.elementAttributes&&"object"==typeof c.elementAttributes)for(let Ft in c.elementAttributes)"+"==Ft.charAt(0)?(Ft=Ft.slice(1),F.setAttribute(Ft,F.getAttribute(Ft)+c.elementAttributes["+"+Ft])):F.setAttribute(Ft,c.elementAttributes[Ft]);function dt(Ft){null==f&&""!==F.value||F.value!==f?(o(F.value)&&(f=F.value),setTimeout(function(){g.getRow().normalizeHeight()},300)):a()}return F.value=R,l(function(){F.focus({preventScroll:!0}),F.style.height="100%",F.style.height=F.scrollHeight+"px",g.getRow().normalizeHeight()}),F.addEventListener("change",dt),F.addEventListener("blur",dt),F.addEventListener("keyup",function(){F.style.height="";var Ft=F.scrollHeight;F.style.height=Ft+"px",Ft!=J&&(J=Ft,g.getRow().normalizeHeight())}),F.addEventListener("keydown",function(Ft){switch(Ft.keyCode){case 27:a();break;case 38:("editor"==E||"hybrid"==E&&F.selectionStart)&&(Ft.stopImmediatePropagation(),Ft.stopPropagation());break;case 40:("editor"==E||"hybrid"==E&&F.selectionStart!==F.value.length)&&(Ft.stopImmediatePropagation(),Ft.stopPropagation());break;case 35:case 36:Ft.stopPropagation()}}),c.mask&&vh(F,c),F},number:function(g,l,o,a,c){var f=g.getValue(),E=c.verticalNavigation||"editor",R=document.createElement("input");if(R.setAttribute("type","number"),void 0!==c.max&&R.setAttribute("max",c.max),void 0!==c.min&&R.setAttribute("min",c.min),void 0!==c.step&&R.setAttribute("step",c.step),R.style.padding="4px",R.style.width="100%",R.style.boxSizing="border-box",c.elementAttributes&&"object"==typeof c.elementAttributes)for(let J in c.elementAttributes)"+"==J.charAt(0)?(J=J.slice(1),R.setAttribute(J,R.getAttribute(J)+c.elementAttributes["+"+J])):R.setAttribute(J,c.elementAttributes[J]);R.value=f;var O=function(J){F()};function F(){var J=R.value;!isNaN(J)&&""!==J&&(J=Number(J)),J!==f?o(J)&&(f=J):a()}return l(function(){R.removeEventListener("blur",O),R.focus({preventScroll:!0}),R.style.height="100%",R.addEventListener("blur",O)}),R.addEventListener("keydown",function(J){switch(J.keyCode){case 13:F();break;case 27:a();break;case 38:case 40:"editor"==E&&(J.stopImmediatePropagation(),J.stopPropagation());break;case 35:case 36:J.stopPropagation()}}),c.mask&&vh(R,c),R},range:function(g,l,o,a,c){var f=g.getValue(),E=document.createElement("input");if(E.setAttribute("type","range"),void 0!==c.max&&E.setAttribute("max",c.max),void 0!==c.min&&E.setAttribute("min",c.min),void 0!==c.step&&E.setAttribute("step",c.step),E.style.padding="4px",E.style.width="100%",E.style.boxSizing="border-box",c.elementAttributes&&"object"==typeof c.elementAttributes)for(let O in c.elementAttributes)"+"==O.charAt(0)?(O=O.slice(1),E.setAttribute(O,E.getAttribute(O)+c.elementAttributes["+"+O])):E.setAttribute(O,c.elementAttributes[O]);function R(){var O=E.value;!isNaN(O)&&""!==O&&(O=Number(O)),O!=f?o(O)&&(f=O):a()}return E.value=f,l(function(){E.focus({preventScroll:!0}),E.style.height="100%"}),E.addEventListener("blur",function(O){R()}),E.addEventListener("keydown",function(O){switch(O.keyCode){case 13:R();break;case 27:a()}}),E},select:function(g,l,o,a,c){var f=this,E=g.getElement(),R=g.getValue(),O=c.verticalNavigation||"editor",F=void 0!==R||null===R?Array.isArray(R)?R:[R]:void 0!==c.defaultValue?c.defaultValue:[],J=document.createElement("input"),dt=document.createElement("div"),Ft=c.multiselect,qt=[],Ee={},De=[],Ge=[],We=!0,Si=!1,ln="",Gi=null;function Xi(en){var sl,ir={},cs=f.table.getData();return(sl=en?f.table.columnManager.getColumnByField(en):g.getColumn()._getSelf())?cs.forEach(function(ih){var Wh=sl.getFieldValue(ih);null!=Wh&&""!==Wh&&(ir[Wh]=!0)}):console.warn("unable to find matching column to create select lookup list:",en),Object.keys(ir)}function wn(en,ir){!Ft&&Ee&&Ee.element&&Ee.element.classList.remove("active"),Ee&&Ee.element&&Ee.element.classList.remove("focused"),Ee=en,en.element&&(en.element.classList.add("focused"),ir&&en.element.classList.add("active")),en&&en.element&&en.element.scrollIntoView&&en.element.scrollIntoView({behavior:"smooth",block:"nearest",inline:"start"})}function Pn(en){-1==Ge.indexOf(en)&&(Ge.push(en),wn(en,!0)),Ei()}function bn(en){var ir=Ge[en];en>-1&&(Ge.splice(en,1),ir.element&&ir.element.classList.remove("active"))}function qi(en){en||(en=Ee);var ir=Ge.indexOf(en);ir>-1?bn(ir):(!0!==Ft&&Ge.length>=Ft&&bn(0),Pn(en)),Ei()}function Bn(en){vr(),en||(en=Ee),en&&(J.value=en.label,o(en.value)),F=[en.value]}function dr(en){en||vr();var ir=[];Ge.forEach(cs=>{ir.push(cs.value)}),F=ir,o(ir)}function Ei(){var en=[];Ge.forEach(ir=>{en.push(ir.label)}),J.value=en.join(", "),!1===f.currentCell&&dr(!0)}function Rn(){vr(),a()}function vr(){dt.parentNode&&dt.parentNode.removeChild(dt),f.table.rowManager.element.removeEventListener("scroll",Rn)}if((Array.isArray(c)||!Array.isArray(c)&&"object"==typeof c&&!c.values)&&(console.warn("DEPRECATION WARNING - values for the select editor must now be passed into the values property of the editorParams object, not as the editorParams object"),c={values:c}),J.setAttribute("type","text"),J.style.padding="4px",J.style.width="100%",J.style.boxSizing="border-box",J.style.cursor="default",J.readOnly=0!=this.currentCell,c.elementAttributes&&"object"==typeof c.elementAttributes)for(let en in c.elementAttributes)"+"==en.charAt(0)?(en=en.slice(1),J.setAttribute(en,J.getAttribute(en)+c.elementAttributes["+"+en])):J.setAttribute(en,c.elementAttributes[en]);return J.value=void 0!==R||null===R?R:"",J.addEventListener("search",function(en){J.value||(function(){var en=Ge.length;for(let ir=0;ir<en;ir++)bn(0)}(),dr())}),J.addEventListener("keydown",function(en){var ir;switch(en.keyCode){case 38:ir=qt.indexOf(Ee),("editor"==O||"hybrid"==O&&ir)&&(en.stopImmediatePropagation(),en.stopPropagation(),en.preventDefault(),ir>0&&wn(qt[ir-1],!Ft));break;case 40:ir=qt.indexOf(Ee),("editor"==O||"hybrid"==O&&ir<qt.length-1)&&(en.stopImmediatePropagation(),en.stopPropagation(),en.preventDefault(),ir<qt.length-1&&wn(-1==ir?qt[0]:qt[ir+1],!Ft));break;case 37:case 39:en.stopImmediatePropagation(),en.stopPropagation(),en.preventDefault();break;case 13:Ft?qi():Bn();break;case 27:Rn();break;case 9:break;default:!1===f.currentCell&&en.preventDefault(),en.keyCode>=38&&en.keyCode<=90&&function(en){clearTimeout(Gi);var ir=String.fromCharCode(event.keyCode).toLowerCase();ln+=ir.toLowerCase();var cs=qt.find(sl=>void 0!==sl.label&&sl.label.toLowerCase().startsWith(ln));cs&&wn(cs,!Ft),Gi=setTimeout(()=>{ln=""},800)}()}}),J.addEventListener("blur",function(en){We&&(Ft?dr():Rn())}),J.addEventListener("focus",function(en){Si||function(){if(Ge=[],!dt.parentNode){!function(en,ir){var cs=[],sl=[];function ih(Cs){return ir.indexOf((Cs={label:Cs.label,value:Cs.value,itemParams:Cs.itemParams,elementAttributes:Cs.elementAttributes,element:!1}).value)>-1&&Pn(Cs),cs.push(Cs),sl.push(Cs),Cs}if("function"==typeof en&&(en=en(g)),Array.isArray(en))en.forEach(function(Cs){var Pc;"object"==typeof Cs?Cs.options?(sl.push(Pc={label:Cs.label,group:!0,itemParams:Cs.itemParams,elementAttributes:Cs.elementAttributes,element:!1}),Cs.options.forEach(function(Cg){ih(Cg)})):ih(Cs):(ir.indexOf((Pc={label:Cs,value:Cs,element:!1}).value)>-1&&Pn(Pc),cs.push(Pc),sl.push(Pc))});else for(var Wh in en){var Sd={label:en[Wh],value:Wh,element:!1};ir.indexOf(Sd.value)>-1&&Pn(Sd),cs.push(Sd),sl.push(Sd)}c.sortValuesList&&(cs.sort((Cs,Pc)=>Cs.label<Pc.label?-1:Cs.label>Pc.label?1:0),sl.sort((Cs,Pc)=>Cs.label<Pc.label?-1:Cs.label>Pc.label?1:0),"asc"!==c.sortValuesList&&(cs.reverse(),sl.reverse())),qt=cs,De=sl,function(){for(;dt.firstChild;)dt.removeChild(dt.firstChild);De.forEach(function(en){var ir=en.element;if(!ir){if(ir=document.createElement("div"),en.label=c.listItemFormatter?c.listItemFormatter(en.value,en.label,g,ir,en.itemParams):en.label,en.group?(ir.classList.add("tabulator-edit-select-list-group"),ir.tabIndex=0,ir.innerHTML=""===en.label?"&nbsp;":en.label):(ir.classList.add("tabulator-edit-select-list-item"),ir.tabIndex=0,ir.innerHTML=""===en.label?"&nbsp;":en.label,ir.addEventListener("click",function(){Si=!0,setTimeout(()=>{Si=!1},10),Ft?(qi(en),J.focus()):Bn(en)}),Ge.indexOf(en)>-1&&ir.classList.add("active")),en.elementAttributes&&"object"==typeof en.elementAttributes)for(let cs in en.elementAttributes)"+"==cs.charAt(0)?(cs=cs.slice(1),ir.setAttribute(cs,J.getAttribute(cs)+en.elementAttributes["+"+cs])):ir.setAttribute(cs,en.elementAttributes[cs]);ir.addEventListener("mousedown",function(){We=!1,setTimeout(function(){We=!0},10)}),en.element=ir}dt.appendChild(ir)})}()}(!0===c.values?Xi():"string"==typeof c.values?Xi(c.values):c.values||[],F);var en=Ps.elOffset(E);dt.style.minWidth=E.offsetWidth+"px",dt.style.top=en.top+E.offsetHeight+"px",dt.style.left=en.left+"px",dt.addEventListener("mousedown",function(ir){We=!1,setTimeout(function(){We=!0},10)}),document.body.appendChild(dt)}}()}),(dt=document.createElement("div")).classList.add("tabulator-edit-select-list"),l(function(){J.style.height="100%",J.focus({preventScroll:!0})}),setTimeout(()=>{this.table.rowManager.element.addEventListener("scroll",Rn)},10),J},autocomplete:function(g,l,o,a,c){var f=this,E=g.getElement(),R=g.getValue(),O=c.verticalNavigation||"editor",F=void 0!==R||null===R?R:void 0!==c.defaultValue?c.defaultValue:"",J=document.createElement("input"),dt=document.createElement("div"),Ft=[],qt=!1,Ee=!0,De=!1;if(J.setAttribute("type","search"),J.style.padding="4px",J.style.width="100%",J.style.boxSizing="border-box",c.elementAttributes&&"object"==typeof c.elementAttributes)for(let Ei in c.elementAttributes)"+"==Ei.charAt(0)?(Ei=Ei.slice(1),J.setAttribute(Ei,J.getAttribute(Ei)+c.elementAttributes["+"+Ei])):J.setAttribute(Ei,c.elementAttributes[Ei]);function Ge(){!0===c.values?De=We():"string"==typeof c.values&&(De=We(c.values))}function We(Ei){var fr,Hi={},Rn=f.table.getData();return(fr=Ei?f.table.columnManager.getColumnByField(Ei):g.getColumn()._getSelf())?(Rn.forEach(function(vr){var to=fr.getFieldValue(vr);null!=to&&""!==to&&(Hi[to]=!0)}),Hi=c.sortValuesList?"asc"==c.sortValuesList?Object.keys(Hi).sort():Object.keys(Hi).sort().reverse():Object.keys(Hi)):console.warn("unable to find matching column to create autocomplete lookup list:",Ei),Hi}function Si(Ei,Hi){var fr,vr,Rn=[];fr=De||c.values||[],c.searchFunc?(Rn=c.searchFunc(Ei,fr))instanceof Promise?(ln(void 0!==c.searchingPlaceholder?c.searchingPlaceholder:"Searching..."),Rn.then(to=>{gn(Gi(to),Hi)}).catch(to=>{console.err("error in autocomplete search promise:",to)})):gn(Gi(Rn),Hi):(vr=Gi(fr),""===Ei?c.showListOnEmpty&&(Rn=vr):vr.forEach(function(to){(null!==to.value||void 0!==to.value)&&(String(to.value).toLowerCase().indexOf(String(Ei).toLowerCase())>-1||String(to.title).toLowerCase().indexOf(String(Ei).toLowerCase())>-1)&&Rn.push(to)}),gn(Rn,Hi))}function ln(Ei){var Hi=document.createElement("div");Xi(),!1!==Ei&&(Hi.classList.add("tabulator-edit-select-list-notice"),Hi.tabIndex=0,Ei instanceof Node?Hi.appendChild(Ei):Hi.innerHTML=Ei,dt.appendChild(Hi))}function Gi(Ei){var Hi=[];if(Array.isArray(Ei))Ei.forEach(function(vr){var to={};"object"==typeof vr?(to.title=c.listItemFormatter?c.listItemFormatter(vr.value,vr.label):vr.label,to.value=vr.value):(to.title=c.listItemFormatter?c.listItemFormatter(vr,vr):vr,to.value=vr),Hi.push(to)});else for(var Rn in Ei){var fr={title:c.listItemFormatter?c.listItemFormatter(Rn,Ei[Rn]):Ei[Rn],value:Rn};Hi.push(fr)}return Hi}function Xi(){for(;dt.firstChild;)dt.removeChild(dt.firstChild)}function gn(Ei,Hi){Ei.length?function(Ei,Hi){var Rn=!1;Xi(),(Ft=Ei).forEach(function(fr){var vr=fr.element;vr||((vr=document.createElement("div")).classList.add("tabulator-edit-select-list-item"),vr.tabIndex=0,vr.innerHTML=fr.title,vr.addEventListener("click",function(to){bn(fr),wn()}),vr.addEventListener("mousedown",function(to){Ee=!1,setTimeout(function(){Ee=!0},10)}),fr.element=vr,Hi&&fr.value==R&&(J.value=fr.title,fr.element.classList.add("active"),Rn=!0),fr===qt&&(fr.element.classList.add("active"),Rn=!0)),dt.appendChild(vr)}),Rn||bn(!1)}(Ei,Hi):c.emptyPlaceholder&&ln(c.emptyPlaceholder)}function wn(){qi(),qt?R!==qt.value?(R=qt.value,J.value=qt.title,o(qt.value)):a():c.freetext||c.allowEmpty&&""===J.value?(R=J.value,o(J.value)):a()}function bn(Ei,Hi){qt&&qt.element&&qt.element.classList.remove("active"),qt=Ei,Ei&&Ei.element&&Ei.element.classList.add("active"),Ei&&Ei.element&&Ei.element.scrollIntoView&&Ei.element.scrollIntoView({behavior:"smooth",block:"nearest",inline:"start"})}function qi(){dt.parentNode&&dt.parentNode.removeChild(dt),f.table.rowManager.element.removeEventListener("scroll",Bn)}function Bn(){qi(),a()}return dt.classList.add("tabulator-edit-select-list"),dt.addEventListener("mousedown",function(Ei){Ee=!1,setTimeout(function(){Ee=!0},10)}),J.addEventListener("keydown",function(Ei){var Hi;switch(Ei.keyCode){case 38:Hi=Ft.indexOf(qt),("editor"==O||"hybrid"==O&&Hi)&&(Ei.stopImmediatePropagation(),Ei.stopPropagation(),Ei.preventDefault(),bn(Hi>0&&Ft[Hi-1]));break;case 40:Hi=Ft.indexOf(qt),("editor"==O||"hybrid"==O&&Hi<Ft.length-1)&&(Ei.stopImmediatePropagation(),Ei.stopPropagation(),Ei.preventDefault(),Hi<Ft.length-1&&bn(-1==Hi?Ft[0]:Ft[Hi+1]));break;case 37:case 39:Ei.stopImmediatePropagation(),Ei.stopPropagation();break;case 13:wn();break;case 27:Bn();break;case 36:case 35:Ei.stopImmediatePropagation()}}),J.addEventListener("keyup",function(Ei){switch(Ei.keyCode){case 38:case 37:case 39:case 40:case 13:case 27:break;default:Si(J.value)}}),J.addEventListener("search",function(Ei){Si(J.value)}),J.addEventListener("blur",function(Ei){Ee&&wn()}),J.addEventListener("focus",function(Ei){var Hi=F;Ge(),function(){if(!dt.parentNode){for(;dt.firstChild;)dt.removeChild(dt.firstChild);var Ei=Ps.elOffset(E);dt.style.minWidth=E.offsetWidth+"px",dt.style.top=Ei.top+E.offsetHeight+"px",dt.style.left=Ei.left+"px",document.body.appendChild(dt)}}(),J.value=Hi,Si(Hi,!0)}),l(function(){J.style.height="100%",J.focus({preventScroll:!0})}),c.mask&&vh(J,c),setTimeout(()=>{this.table.rowManager.element.addEventListener("scroll",Bn)},10),Ge(),J.value=F,Si(F,!0),J},star:function(g,l,o,a,c){var f=this,E=g.getElement(),R=g.getValue(),O=E.getElementsByTagName("svg").length||5,F=E.getElementsByTagName("svg")[0]?E.getElementsByTagName("svg")[0].getAttribute("width"):14,J=[],dt=document.createElement("div"),Ft=document.createElementNS("http://www.w3.org/2000/svg","svg");function qt(We){J.forEach(function(Si,ln){ln<We?("ie"==f.table.browser?Si.setAttribute("class","tabulator-star-active"):Si.classList.replace("tabulator-star-inactive","tabulator-star-active"),Si.innerHTML='<polygon fill="#488CE9" stroke="#014AAE" stroke-width="37.6152" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" points="259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 "/>'):("ie"==f.table.browser?Si.setAttribute("class","tabulator-star-inactive"):Si.classList.replace("tabulator-star-active","tabulator-star-inactive"),Si.innerHTML='<polygon fill="#010155" stroke="#686868" stroke-width="37.6152" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" points="259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 "/>')})}function Ee(We){var Si=document.createElement("span"),ln=Ft.cloneNode(!0);J.push(ln),Si.addEventListener("mouseenter",function(Gi){Gi.stopPropagation(),Gi.stopImmediatePropagation(),qt(We)}),Si.addEventListener("mousemove",function(Gi){Gi.stopPropagation(),Gi.stopImmediatePropagation()}),Si.addEventListener("click",function(Gi){Gi.stopPropagation(),Gi.stopImmediatePropagation(),o(We),E.blur()}),Si.appendChild(ln),dt.appendChild(Si)}function De(We){R=We,qt(We)}if(E.style.whiteSpace="nowrap",E.style.overflow="hidden",E.style.textOverflow="ellipsis",dt.style.verticalAlign="middle",dt.style.display="inline-block",dt.style.padding="4px",Ft.setAttribute("width",F),Ft.setAttribute("height",F),Ft.setAttribute("viewBox","0 0 512 512"),Ft.setAttribute("xml:space","preserve"),Ft.style.padding="0 1px",c.elementAttributes&&"object"==typeof c.elementAttributes)for(let We in c.elementAttributes)"+"==We.charAt(0)?(We=We.slice(1),dt.setAttribute(We,dt.getAttribute(We)+c.elementAttributes["+"+We])):dt.setAttribute(We,c.elementAttributes[We]);for(var Ge=1;Ge<=O;Ge++)Ee(Ge);return qt(R=Math.min(parseInt(R),O)),dt.addEventListener("mousemove",function(We){qt(0)}),dt.addEventListener("click",function(We){o(0)}),E.addEventListener("blur",function(We){a()}),E.addEventListener("keydown",function(We){switch(We.keyCode){case 39:De(R+1);break;case 37:De(R-1);break;case 13:o(R);break;case 27:a()}}),dt},progress:function(g,l,o,a,c){var De,Ge,Ft,qt,f=g.getElement(),E=void 0===c.max?(null==(De=f.getElementsByTagName("div")[0])?void 0:De.getAttribute("max"))||100:c.max,R=void 0===c.min?(null==(Ge=f.getElementsByTagName("div")[0])?void 0:Ge.getAttribute("min"))||0:c.min,O=(E-R)/100,F=g.getValue()||0,J=document.createElement("div"),dt=document.createElement("div");function Ee(){var We=window.getComputedStyle(f,null),Si=O*Math.round(dt.offsetWidth/((f.clientWidth-parseInt(We.getPropertyValue("padding-left"))-parseInt(We.getPropertyValue("padding-right")))/100))+R;o(Si),f.setAttribute("aria-valuenow",Si),f.setAttribute("aria-label",F)}if(J.style.position="absolute",J.style.right="0",J.style.top="0",J.style.bottom="0",J.style.width="5px",J.classList.add("tabulator-progress-handle"),dt.style.display="inline-block",dt.style.position="relative",dt.style.height="100%",dt.style.backgroundColor="#488CE9",dt.style.maxWidth="100%",dt.style.minWidth="0%",c.elementAttributes&&"object"==typeof c.elementAttributes)for(let We in c.elementAttributes)"+"==We.charAt(0)?(We=We.slice(1),dt.setAttribute(We,dt.getAttribute(We)+c.elementAttributes["+"+We])):dt.setAttribute(We,c.elementAttributes[We]);return f.style.padding="4px 4px",F=Math.min(parseFloat(F),E),F=Math.max(parseFloat(F),R),F=Math.round((F-R)/O),dt.style.width=F+"%",f.setAttribute("aria-valuemin",R),f.setAttribute("aria-valuemax",E),dt.appendChild(J),J.addEventListener("mousedown",function(We){Ft=We.screenX,qt=dt.offsetWidth}),J.addEventListener("mouseover",function(){J.style.cursor="ew-resize"}),f.addEventListener("mousemove",function(We){Ft&&(dt.style.width=qt+We.screenX-Ft+"px")}),f.addEventListener("mouseup",function(We){Ft&&(We.stopPropagation(),We.stopImmediatePropagation(),Ft=!1,qt=!1,Ee())}),f.addEventListener("keydown",function(We){switch(We.keyCode){case 39:We.preventDefault(),dt.style.width=dt.clientWidth+f.clientWidth/100+"px";break;case 37:We.preventDefault(),dt.style.width=dt.clientWidth-f.clientWidth/100+"px";break;case 9:case 13:Ee();break;case 27:a()}}),f.addEventListener("blur",function(){a()}),dt},tickCross:function(g,l,o,a,c){var f=g.getValue(),E=document.createElement("input"),R=c.tristate,O=void 0===c.indeterminateValue?null:c.indeterminateValue,F=!1;if(E.setAttribute("type","checkbox"),E.style.marginTop="5px",E.style.boxSizing="border-box",c.elementAttributes&&"object"==typeof c.elementAttributes)for(let dt in c.elementAttributes)"+"==dt.charAt(0)?(dt=dt.slice(1),E.setAttribute(dt,E.getAttribute(dt)+c.elementAttributes["+"+dt])):E.setAttribute(dt,c.elementAttributes[dt]);function J(dt){return R?dt?F?O:E.checked:E.checked&&!F?(E.checked=!1,E.indeterminate=!0,F=!0,O):(F=!1,E.checked):E.checked}return E.value=f,R&&(void 0===f||f===O||""===f)&&(F=!0,E.indeterminate=!0),"firefox"!=this.table.browser&&l(function(){E.focus({preventScroll:!0})}),E.checked=!0===f||"true"===f||"True"===f||1===f,l(function(){E.focus()}),E.addEventListener("change",function(dt){o(J())}),E.addEventListener("blur",function(dt){o(J(!0))}),E.addEventListener("keydown",function(dt){13==dt.keyCode&&o(J()),27==dt.keyCode&&a()}),E}};let Pd=(()=>{class g extends bo{constructor(o){super(o),this.currentCell=!1,this.mouseClick=!1,this.recursionBlock=!1,this.invalidEdit=!1,this.editedCells=[],this.editors=g.editors,this.registerColumnOption("editable"),this.registerColumnOption("editor"),this.registerColumnOption("editorParams"),this.registerColumnOption("cellEditing"),this.registerColumnOption("cellEdited"),this.registerColumnOption("cellEditCancelled"),this.registerTableFunction("getEditedCells",this.getEditedCells.bind(this)),this.registerTableFunction("clearCellEdited",this.clearCellEdited.bind(this)),this.registerTableFunction("navigatePrev",this.navigatePrev.bind(this)),this.registerTableFunction("navigateNext",this.navigateNext.bind(this)),this.registerTableFunction("navigateLeft",this.navigateLeft.bind(this)),this.registerTableFunction("navigateRight",this.navigateRight.bind(this)),this.registerTableFunction("navigateUp",this.navigateUp.bind(this)),this.registerTableFunction("navigateDown",this.navigateDown.bind(this)),this.registerComponentFunction("cell","isEdited",this.cellisEdited.bind(this)),this.registerComponentFunction("cell","clearEdited",this.clearEdited.bind(this)),this.registerComponentFunction("cell","edit",this.editCell.bind(this)),this.registerComponentFunction("cell","cancelEdit",this.cellCancelEdit.bind(this)),this.registerComponentFunction("cell","navigatePrev",this.navigatePrev.bind(this)),this.registerComponentFunction("cell","navigateNext",this.navigateNext.bind(this)),this.registerComponentFunction("cell","navigateLeft",this.navigateLeft.bind(this)),this.registerComponentFunction("cell","navigateRight",this.navigateRight.bind(this)),this.registerComponentFunction("cell","navigateUp",this.navigateUp.bind(this)),this.registerComponentFunction("cell","navigateDown",this.navigateDown.bind(this))}initialize(){this.subscribe("cell-init",this.bindEditor.bind(this)),this.subscribe("cell-delete",this.clearEdited.bind(this)),this.subscribe("column-layout",this.initializeColumnCheck.bind(this)),this.subscribe("column-delete",this.columnDeleteCheck.bind(this)),this.subscribe("row-deleting",this.rowDeleteCheck.bind(this)),this.subscribe("data-refeshing",this.cancelEdit.bind(this)),this.subscribe("keybinding-nav-prev",this.navigatePrev.bind(this)),this.subscribe("keybinding-nav-next",this.keybindingNavigateNext.bind(this)),this.subscribe("keybinding-nav-left",this.navigateLeft.bind(this)),this.subscribe("keybinding-nav-right",this.navigateRight.bind(this)),this.subscribe("keybinding-nav-up",this.navigateUp.bind(this)),this.subscribe("keybinding-nav-down",this.navigateDown.bind(this))}keybindingNavigateNext(o){var a=this.currentCell,c=this.options("tabEndNewRow");a&&(this.navigateNext(o)||c&&(a.getElement().firstChild.blur(),(c=this.table.addRow(!0===c?{}:"function"==typeof c?c(a.row.getComponent()):Object.assign({},c))).then(()=>{setTimeout(()=>{nav.next()})})))}cellisEdited(o){return!!o.modules.edit&&o.modules.edit.edited}cellCancelEdit(o){o===this.currentCell?this.table.modules.edit.cancelEdit():console.warn("Cancel Editor Error - This cell is not currently being edited ")}clearCellEdited(o){o||(o=this.modules.edit.getEditedCells()),Array.isArray(o)||(o=[o]),o.forEach(a=>{this.modules.edit.clearEdited(a._getSelf())})}navigatePrev(o){var c,f,a=this.currentCell;if(a){if(o&&o.preventDefault(),c=this.navigateLeft())return!0;if((f=this.table.rowManager.prevDisplayRow(a.row,!0))&&(c=this.findNextEditableCell(f,f.cells.length)))return c.getComponent().edit(),!0}return!1}navigateNext(o){var c,f,a=this.currentCell;if(a){if(o&&o.preventDefault(),c=this.navigateRight())return!0;if((f=this.table.rowManager.nextDisplayRow(a.row,!0))&&(c=this.findNextEditableCell(f,-1)))return c.getComponent().edit(),!0}return!1}navigateLeft(o){var c,f,a=this.currentCell;return!(!a||(o&&o.preventDefault(),c=a.getIndex(),f=this.findPrevEditableCell(a.row,c),!f)||(f.getComponent().edit(),0))}navigateRight(o){var c,f,a=this.currentCell;return!(!a||(o&&o.preventDefault(),c=a.getIndex(),f=this.findNextEditableCell(a.row,c),!f)||(f.getComponent().edit(),0))}navigateUp(o){var c,f,a=this.currentCell;return!(!a||(o&&o.preventDefault(),c=a.getIndex(),f=this.table.rowManager.prevDisplayRow(a.row,!0),!f)||(f.cells[c].getComponent().edit(),0))}navigateDown(o){var c,f,a=this.currentCell;return!(!a||(o&&o.preventDefault(),c=a.getIndex(),f=this.table.rowManager.nextDisplayRow(a.row,!0),!f)||(f.cells[c].getComponent().edit(),0))}findNextEditableCell(o,a){var c=!1;if(a<o.cells.length-1)for(var f=a+1;f<o.cells.length;f++){let E=o.cells[f];if(E.column.modules.edit&&Ps.elVisible(E.getElement())){let R=!0;if("function"==typeof E.column.modules.edit.check&&(R=E.column.modules.edit.check(E.getComponent())),R){c=E;break}}}return c}findPrevEditableCell(o,a){var c=!1;if(a>0)for(var f=a-1;f>=0;f--){let E=o.cells[f],R=!0;if(E.column.modules.edit&&Ps.elVisible(E.getElement())&&("function"==typeof E.column.modules.edit.check&&(R=E.column.modules.edit.check(E.getComponent())),R)){c=E;break}}return c}initializeColumnCheck(o){void 0!==o.definition.editor&&this.initializeColumn(o)}columnDeleteCheck(o){this.currentCell&&this.currentCell.column===o&&this.cancelEdit()}rowDeleteCheck(o){this.currentCell&&this.currentCell.row===o&&this.cancelEdit()}initializeColumn(o){var a={editor:!1,blocked:!1,check:o.definition.editable,params:o.definition.editorParams||{}};switch(typeof o.definition.editor){case"string":this.editors[o.definition.editor]?a.editor=this.editors[o.definition.editor]:console.warn("Editor Error - No such editor found: ",o.definition.editor);break;case"function":a.editor=o.definition.editor;break;case"boolean":!0===o.definition.editor&&("function"!=typeof o.definition.formatter?a.editor=this.editors[o.definition.formatter]?this.editors[o.definition.formatter]:this.editors.input:console.warn("Editor Error - Cannot auto lookup editor for a custom formatter: ",o.definition.formatter))}a.editor&&(o.modules.edit=a)}getCurrentCell(){return!!this.currentCell&&this.currentCell.getComponent()}clearEditor(o){var c,a=this.currentCell;if(this.invalidEdit=!1,a){for(this.currentCell=!1,c=a.getElement(),o?a.validate&&a.validate():c.classList.remove("tabulator-validation-fail"),c.classList.remove("tabulator-editing");c.firstChild;)c.removeChild(c.firstChild);a.row.getElement().classList.remove("tabulator-row-editing")}}cancelEdit(){if(this.currentCell){var o=this.currentCell,a=this.currentCell.getComponent();this.clearEditor(!0),o.setValueActual(o.getValue()),o.cellRendered(),("textarea"==o.column.definition.editor||o.column.definition.variableHeight)&&o.row.normalizeHeight(!0),o.column.definition.cellEditCancelled&&o.column.definition.cellEditCancelled.call(this.table,a),this.dispatchExternal("cellEditCancelled",a)}}bindEditor(o){if(o.column.modules.edit){var a=this,c=o.getElement(!0);c.setAttribute("tabindex",0),c.addEventListener("click",function(f){c.classList.contains("tabulator-editing")||c.focus({preventScroll:!0})}),c.addEventListener("mousedown",function(f){2===f.button?f.preventDefault():a.mouseClick=!0}),c.addEventListener("focus",function(f){a.recursionBlock||a.edit(o,f,!1)})}}focusCellNoEvent(o,a){this.recursionBlock=!0,a&&"ie"===this.table.browser||o.getElement().focus({preventScroll:!0}),this.recursionBlock=!1}editCell(o,a){this.focusCellNoEvent(o),this.edit(o,!1,a)}focusScrollAdjust(o){if("virtual"==this.table.rowManager.getRenderMode()){var a=this.table.rowManager.element.scrollTop,c=this.table.rowManager.element.clientHeight+this.table.rowManager.element.scrollTop,f=o.row.getElement();f.offsetTop<a?this.table.rowManager.element.scrollTop-=a-f.offsetTop:f.offsetTop+f.offsetHeight>c&&(this.table.rowManager.element.scrollTop+=f.offsetTop+f.offsetHeight-c);var R=this.table.rowManager.element.scrollLeft,O=this.table.rowManager.element.clientWidth+this.table.rowManager.element.scrollLeft,F=o.getElement();this.table.modExists("frozenColumns")&&(R+=parseInt(this.table.modules.frozenColumns.leftMargin),O-=parseInt(this.table.modules.frozenColumns.rightMargin)),"virtual"===this.table.options.renderHorizontal&&(R-=parseInt(this.table.columnManager.renderer.vDomPadLeft),O-=parseInt(this.table.columnManager.renderer.vDomPadLeft)),F.offsetLeft<R?this.table.rowManager.element.scrollLeft-=R-F.offsetLeft:F.offsetLeft+F.offsetWidth>O&&(this.table.rowManager.element.scrollLeft+=F.offsetLeft+F.offsetWidth-O)}}edit(o,a,c){var F,J,dt,f=this,E=!0,R=function(){},O=o.getElement();if(!this.currentCell){if(o.column.modules.edit.blocked)return this.mouseClick=!1,O.blur(),!1;switch(a&&a.stopPropagation(),typeof o.column.modules.edit.check){case"function":E=o.column.modules.edit.check(o.getComponent());break;case"boolean":E=o.column.modules.edit.check}if(E||c){if(f.cancelEdit(),f.currentCell=o,this.focusScrollAdjust(o),J=o.getComponent(),this.mouseClick&&(this.mouseClick=!1,o.column.definition.cellClick&&o.column.definition.cellClick.call(this.table,a,J)),o.column.definition.cellEditing&&o.column.definition.cellEditing.call(this.table,J),this.dispatchExternal("cellEditing",J),dt="function"==typeof o.column.modules.edit.params?o.column.modules.edit.params(J):o.column.modules.edit.params,!1===(F=o.column.modules.edit.editor.call(f,J,function(We){R=We},function(We){if(f.currentCell===o){var Si=!0;return o.column.modules.validate&&f.table.modExists("validate")&&"manual"!=f.table.options.validationMode&&(Si=f.table.modules.validate.validate(o.column.modules.validate,o,We)),!0===Si||"highlight"===f.table.options.validationMode?(f.clearEditor(),o.modules.edit||(o.modules.edit={}),o.modules.edit.edited=!0,-1==f.editedCells.indexOf(o)&&f.editedCells.push(o),o.setValue(We,!0),f.table.options.dataTree&&f.table.modExists("dataTree")&&f.table.modules.dataTree.checkForRestyle(o),!0===Si||(O.classList.add("tabulator-validation-fail"),f.table.externalEvents.dispatch("validationFailed",o.getComponent(),We,Si),!1)):(f.invalidEdit=!0,O.classList.add("tabulator-validation-fail"),f.focusCellNoEvent(o,!0),R(),f.table.externalEvents.dispatch("validationFailed",o.getComponent(),We,Si),!1)}},function(){f.currentCell===o&&(f.cancelEdit(),f.table.options.dataTree&&f.table.modExists("dataTree")&&f.table.modules.dataTree.checkForRestyle(o))},dt)))return O.blur(),!1;if(!(F instanceof Node))return console.warn("Edit Error - Editor should return an instance of Node, the editor returned:",F),O.blur(),!1;for(O.classList.add("tabulator-editing"),o.row.getElement().classList.add("tabulator-row-editing");O.firstChild;)O.removeChild(O.firstChild);O.appendChild(F),R();for(var De=O.children,Ge=0;Ge<De.length;Ge++)De[Ge].addEventListener("click",function(We){We.stopPropagation()});return!0}return this.mouseClick=!1,O.blur(),!1}this.invalidEdit||this.cancelEdit()}getEditedCells(){var o=[];return this.editedCells.forEach(a=>{o.push(a.getComponent())}),o}clearEdited(o){var a;o.modules.edit&&o.modules.edit.edited&&(o.modules.edit.edited=!1,o.modules.validate&&(o.modules.validate.invalid=!1)),(a=this.editedCells.indexOf(o))>-1&&this.editedCells.splice(a,1)}}return g.moduleName="edit",g.editors=Nd,g})();class L{constructor(l,o,a,c){this.type=l,this.columns=o,this.component=a||!1,this.indent=c||0}}class G{constructor(l,o,a,c,f){this.value=l,this.component=o||!1,this.width=a,this.height=c,this.depth=f}}let b=(()=>{class g extends bo{constructor(o){super(o),this.config={},this.cloneTableStyle=!0,this.colVisProp="",this.registerTableOption("htmlOutputConfig",!1),this.registerColumnOption("htmlOutput"),this.registerColumnOption("titleHtmlOutput")}initialize(){this.registerTableFunction("getHtml",this.getHtml.bind(this))}generateExportList(o,a,c,f){this.cloneTableStyle=a,this.config=o||{},this.colVisProp=f;var E=!1!==this.config.columnHeaders?this.headersToExportRows(this.generateColumnGroupHeaders()):[],R=this.bodyToExportRows(this.rowLookup(c));return E.concat(R)}genereateTable(o,a,c,f){var E=this.generateExportList(o,a,c,f);return this.genereateTableElement(E)}rowLookup(o){var a=[];if("function"==typeof o)o.call(this.table).forEach(c=>{(c=this.table.rowManager.findRow(c))&&a.push(c)});else switch(o){case!0:case"visible":a=this.table.rowManager.getVisibleRows(!0);break;case"all":a=this.table.rowManager.rows;break;case"selected":a=this.table.modules.selectRow.selectedRows;break;default:a=this.table.options.pagination?this.table.rowManager.getDisplayRows(this.table.rowManager.displayRows.length-2):this.table.rowManager.getDisplayRows()}return Object.assign([],a)}generateColumnGroupHeaders(){var o=[];return(!1!==this.config.columnGroups?this.table.columnManager.columns:this.table.columnManager.columnsByIndex).forEach(c=>{var f=this.processColumnGroup(c);f&&o.push(f)}),o}processColumnGroup(o){var a=o.columns,c=0,E={title:o.definition["title"+(this.colVisProp.charAt(0).toUpperCase()+this.colVisProp.slice(1))]||o.definition.title,column:o,depth:1};if(a.length){if(E.subGroups=[],E.width=0,a.forEach(R=>{var O=this.processColumnGroup(R);O&&(E.width+=O.width,E.subGroups.push(O),O.depth>c&&(c=O.depth))}),E.depth+=c,!E.width)return!1}else{if(!this.columnVisCheck(o))return!1;E.width=1}return E}columnVisCheck(o){return!1!==o.definition[this.colVisProp]&&(o.visible||!o.visible&&o.definition[this.colVisProp])}headersToExportRows(o){var a=[],c=0,f=[];function E(R,O){var F=c-O;if(void 0===a[O]&&(a[O]=[]),R.height=R.subGroups?1:F-R.depth+1,a[O].push(R),R.height>1)for(let J=1;J<R.height;J++)void 0===a[O+J]&&(a[O+J]=[]),a[O+J].push(!1);if(R.width>1)for(let J=1;J<R.width;J++)a[O].push(!1);R.subGroups&&R.subGroups.forEach(function(J){E(J,O+1)})}return o.forEach(function(R){R.depth>c&&(c=R.depth)}),o.forEach(function(R){E(R,0)}),a.forEach(R=>{var O=[];R.forEach(F=>{O.push(F?new G(F.title,F.column.getComponent(),F.width,F.height,F.depth):null)}),f.push(new L("header",O))}),f}bodyToExportRows(o){var a=[],c=[];return this.table.columnManager.columnsByIndex.forEach(f=>{this.columnVisCheck(f)&&a.push(f.getComponent())}),!1!==this.config.columnCalcs&&this.table.modExists("columnCalcs")&&(this.table.modules.columnCalcs.topInitialized&&o.unshift(this.table.modules.columnCalcs.topRow),this.table.modules.columnCalcs.botInitialized&&o.push(this.table.modules.columnCalcs.botRow)),(o=o.filter(f=>{switch(f.type){case"group":return!1!==this.config.rowGroups;case"calc":return!1!==this.config.columnCalcs;case"row":return!(this.table.options.dataTree&&!1===this.config.dataTree&&f.modules.dataTree.parent)}return!0})).forEach((f,E)=>{var R=f.getData(this.colVisProp),O=[],F=0;switch(f.type){case"group":F=f.level,O.push(new G(f.key,f.getComponent(),a.length,1));break;case"calc":case"row":a.forEach(J=>{O.push(new G(J._column.getFieldValue(R),J,1,1))}),this.table.options.dataTree&&!1!==this.config.dataTree&&(F=f.modules.dataTree.index)}c.push(new L(f.type,O,f.getComponent(),F))}),c}genereateTableElement(o){var a=document.createElement("table"),c=document.createElement("thead"),f=document.createElement("tbody"),E=this.lookupTableStyles(),R=this.table.options["rowFormatter"+(this.colVisProp.charAt(0).toUpperCase()+this.colVisProp.slice(1))],O={};return O.rowFormatter=null!==R?R:this.table.options.rowFormatter,this.table.options.dataTree&&!1!==this.config.dataTree&&this.table.modExists("columnCalcs")&&(O.treeElementField=this.table.modules.dataTree.elementField),O.groupHeader=this.table.options["groupHeader"+(this.colVisProp.charAt(0).toUpperCase()+this.colVisProp.slice(1))],O.groupHeader&&!Array.isArray(O.groupHeader)&&(O.groupHeader=[O.groupHeader]),a.classList.add("tabulator-print-table"),this.mapElementStyles(this.table.columnManager.getHeadersElement(),c,["border-top","border-left","border-right","border-bottom","background-color","color","font-weight","font-family","font-size"]),o.length>1e3&&console.warn("It may take a long time to render an HTML table with more than 1000 rows"),o.forEach((F,J)=>{switch(F.type){case"header":c.appendChild(this.genereateHeaderElement(F,O,E));break;case"group":f.appendChild(this.genereateGroupElement(F,O,E));break;case"calc":f.appendChild(this.genereateCalcElement(F,O,E));break;case"row":let dt=this.genereateRowElement(F,O,E);this.mapElementStyles(J%2&&E.evenRow?E.evenRow:E.oddRow,dt,["border-top","border-left","border-right","border-bottom","color","font-weight","font-family","font-size","background-color"]),f.appendChild(dt)}}),c.innerHTML&&a.appendChild(c),a.appendChild(f),this.mapElementStyles(this.table.element,a,["border-top","border-left","border-right","border-bottom"]),a}lookupTableStyles(){var o={};return this.cloneTableStyle&&window.getComputedStyle&&(o.oddRow=this.table.element.querySelector(".tabulator-row-odd:not(.tabulator-group):not(.tabulator-calcs)"),o.evenRow=this.table.element.querySelector(".tabulator-row-even:not(.tabulator-group):not(.tabulator-calcs)"),o.calcRow=this.table.element.querySelector(".tabulator-row.tabulator-calcs"),o.firstRow=this.table.element.querySelector(".tabulator-row:not(.tabulator-group):not(.tabulator-calcs)"),o.firstGroup=this.table.element.getElementsByClassName("tabulator-group")[0],o.firstRow&&(o.styleCells=o.firstRow.getElementsByClassName("tabulator-cell"),o.firstCell=o.styleCells[0],o.lastCell=o.styleCells[o.styleCells.length-1])),o}genereateHeaderElement(o,a,c){var f=document.createElement("tr");return o.columns.forEach(E=>{if(E){var R=document.createElement("th"),O=E.component._column.definition.cssClass?E.component._column.definition.cssClass.split(" "):[];R.colSpan=E.width,R.rowSpan=E.height,R.innerHTML=E.value,this.cloneTableStyle&&(R.style.boxSizing="border-box"),O.forEach(function(F){R.classList.add(F)}),this.mapElementStyles(E.component.getElement(),R,["text-align","border-top","border-left","border-right","border-bottom","background-color","color","font-weight","font-family","font-size"]),this.mapElementStyles(E.component._column.contentElement,R,["padding-top","padding-left","padding-right","padding-bottom"]),E.component._column.visible?this.mapElementStyles(E.component.getElement(),R,["width"]):E.component._column.definition.width&&(R.style.width=E.component._column.definition.width+"px"),E.component._column.parent&&this.mapElementStyles(E.component._column.parent.groupElement,R,["border-top"]),f.appendChild(R)}}),f}genereateGroupElement(o,a,c){var f=document.createElement("tr"),E=document.createElement("td"),R=o.columns[0];return f.classList.add("tabulator-print-table-row"),R.value=a.groupHeader&&a.groupHeader[o.indent]?a.groupHeader[o.indent](R.value,o.component._group.getRowCount(),o.component._group.getData(),o.component):!1===a.groupHeader?R.value:o.component._group.generator(R.value,o.component._group.getRowCount(),o.component._group.getData(),o.component),E.colSpan=R.width,E.innerHTML=R.value,f.classList.add("tabulator-print-table-group"),f.classList.add("tabulator-group-level-"+o.indent),R.component.isVisible()&&f.classList.add("tabulator-group-visible"),this.mapElementStyles(c.firstGroup,f,["border-top","border-left","border-right","border-bottom","color","font-weight","font-family","font-size","background-color"]),this.mapElementStyles(c.firstGroup,E,["padding-top","padding-left","padding-right","padding-bottom"]),f.appendChild(E),f}genereateCalcElement(o,a,c){var f=this.genereateRowElement(o,a,c);return f.classList.add("tabulator-print-table-calcs"),this.mapElementStyles(c.calcRow,f,["border-top","border-left","border-right","border-bottom","color","font-weight","font-family","font-size","background-color"]),f}genereateRowElement(o,a,c){var f=document.createElement("tr");return f.classList.add("tabulator-print-table-row"),o.columns.forEach(E=>{if(E){var R=document.createElement("td"),O=E.component._column,F=E.value,J={modules:{},getValue:function(){return F},getField:function(){return O.definition.field},getElement:function(){return R},getColumn:function(){return O.getComponent()},getData:function(){return o.component.getData()},getRow:function(){return o.component},getComponent:function(){return J},column:O};if((O.definition.cssClass?O.definition.cssClass.split(" "):[]).forEach(function(Ft){R.classList.add(Ft)}),this.table.modExists("format")&&!1!==this.config.formatCells)F=this.table.modules.format.formatExportValue(J,this.colVisProp);else switch(typeof F){case"object":F=JSON.stringify(F);break;case"undefined":case"null":F="";break;default:F=F}F instanceof Node?R.appendChild(F):R.innerHTML=F,c.firstCell&&(this.mapElementStyles(c.firstCell,R,["padding-top","padding-left","padding-right","padding-bottom","border-top","border-left","border-right","border-bottom","color","font-weight","font-family","font-size"]),O.definition.align&&(R.style.textAlign=O.definition.align)),this.table.options.dataTree&&!1!==this.config.dataTree&&(a.treeElementField&&a.treeElementField==O.field||!a.treeElementField&&0==i)&&(o.component._row.modules.dataTree.controlEl&&R.insertBefore(o.component._row.modules.dataTree.controlEl.cloneNode(!0),R.firstChild),o.component._row.modules.dataTree.branchEl&&R.insertBefore(o.component._row.modules.dataTree.branchEl.cloneNode(!0),R.firstChild)),f.appendChild(R),J.modules.format&&J.modules.format.renderedCallback&&J.modules.format.renderedCallback(),a.rowFormatter&&!1!==this.config.formatCells&&a.rowFormatter(o.component)}}),f}genereateHTMLTable(o){var a=document.createElement("div");return a.appendChild(this.genereateTableElement(o)),a.innerHTML}getHtml(o,a,c,f){var E=this.generateExportList(c||this.table.options.htmlOutputConfig,a,o,f||"htmlOutput");return this.genereateHTMLTable(E)}mapElementStyles(o,a,c){if(this.cloneTableStyle&&o&&a){var f={"background-color":"backgroundColor",color:"fontColor",width:"width","font-weight":"fontWeight","font-family":"fontFamily","font-size":"fontSize","text-align":"textAlign","border-top":"borderTop","border-left":"borderLeft","border-right":"borderRight","border-bottom":"borderBottom","padding-top":"paddingTop","padding-left":"paddingLeft","padding-right":"paddingRight","padding-bottom":"paddingBottom"};if(window.getComputedStyle){var E=window.getComputedStyle(o);c.forEach(function(R){a.style[f[R]]=E.getPropertyValue(R)})}}}}return g.moduleName="export",g})();var k={"=":function(g,l,o,a){return l==g},"<":function(g,l,o,a){return l<g},"<=":function(g,l,o,a){return l<=g},">":function(g,l,o,a){return l>g},">=":function(g,l,o,a){return l>=g},"!=":function(g,l,o,a){return l!=g},regex:function(g,l,o,a){return"string"==typeof g&&(g=new RegExp(g)),g.test(l)},like:function(g,l,o,a){return null==g?l===g:null!=l&&String(l).toLowerCase().indexOf(g.toLowerCase())>-1},keywords:function(g,l,o,a){var c=g.toLowerCase().split(void 0===a.separator?" ":a.separator),f=String(null==l?"":l).toLowerCase(),E=[];return c.forEach(R=>{f.includes(R)&&E.push(!0)}),a.matchAll?E.length===c.length:!!E.length},starts:function(g,l,o,a){return null==g?l===g:null!=l&&String(l).toLowerCase().startsWith(g.toLowerCase())},ends:function(g,l,o,a){return null==g?l===g:null!=l&&String(l).toLowerCase().endsWith(g.toLowerCase())},in:function(g,l,o,a){return Array.isArray(g)?!g.length||g.indexOf(l)>-1:(console.warn("Filter Error - filter value is not an array:",g),!1)}};let tt=(()=>{class g extends bo{constructor(o){super(o),this.filterList=[],this.headerFilters={},this.headerFilterColumns=[],this.prevHeaderFilterChangeCheck="",this.prevHeaderFilterChangeCheck="{}",this.changed=!1,this.tableInitialized=!1,this.registerTableOption("filterMode","local"),this.registerTableOption("initialFilter",!1),this.registerTableOption("initialHeaderFilter",!1),this.registerTableOption("headerFilterLiveFilterDelay",300),this.registerColumnOption("headerFilter"),this.registerColumnOption("headerFilterPlaceholder"),this.registerColumnOption("headerFilterParams"),this.registerColumnOption("headerFilterEmptyCheck"),this.registerColumnOption("headerFilterFunc"),this.registerColumnOption("headerFilterFuncParams"),this.registerColumnOption("headerFilterLiveFilter"),this.registerTableFunction("searchRows",this.searchRows.bind(this)),this.registerTableFunction("searchData",this.searchData.bind(this)),this.registerTableFunction("setFilter",this.userSetFilter.bind(this)),this.registerTableFunction("refreshFilter",this.userRefreshFilter.bind(this)),this.registerTableFunction("addFilter",this.userAddFilter.bind(this)),this.registerTableFunction("getFilters",this.getFilters.bind(this)),this.registerTableFunction("setHeaderFilterFocus",this.userSetHeaderFilterFocus.bind(this)),this.registerTableFunction("getHeaderFilterValue",this.userGetHeaderFilterValue.bind(this)),this.registerTableFunction("setHeaderFilterValue",this.userSetHeaderFilterValue.bind(this)),this.registerTableFunction("getHeaderFilters",this.getHeaderFilters.bind(this)),this.registerTableFunction("removeFilter",this.userRemoveFilter.bind(this)),this.registerTableFunction("clearFilter",this.userClearFilter.bind(this)),this.registerTableFunction("clearHeaderFilter",this.userClearHeaderFilter.bind(this)),this.registerComponentFunction("column","headerFilterFocus",this.setHeaderFilterFocus.bind(this)),this.registerComponentFunction("column","reloadHeaderFilter",this.reloadHeaderFilter.bind(this)),this.registerComponentFunction("column","getHeaderFilterValue",this.getHeaderFilterValue.bind(this)),this.registerComponentFunction("column","setHeaderFilterValue",this.setHeaderFilterValue.bind(this))}initialize(){this.subscribe("column-init",this.initializeColumnHeaderFilter.bind(this)),this.subscribe("column-width-fit-before",this.hideHeaderFilterElements.bind(this)),this.subscribe("column-width-fit-after",this.showHeaderFilterElements.bind(this)),this.subscribe("table-built",this.tableBuilt.bind(this)),"remote"===this.table.options.filterMode&&this.subscribe("data-params",this.remoteFilterParams.bind(this)),this.registerDataHandler(this.filter.bind(this),10)}tableBuilt(){this.table.options.initialFilter&&this.setFilter(this.table.options.initialFilter),this.table.options.initialHeaderFilter&&this.table.options.initialHeaderFilter.forEach(o=>{var a=this.table.columnManager.findColumn(o.field);if(!a)return console.warn("Column Filter Error - No matching column found:",o.field),!1;this.setHeaderFilterValue(a,o.value)}),this.tableInitialized=!0}remoteFilterParams(o,a,c,f){return f.filter=this.getFilters(!0,!0),f}userSetFilter(o,a,c,f){this.setFilter(o,a,c,f),this.refreshFilter()}userRefreshFilter(){this.refreshFilter()}userAddFilter(o,a,c,f){this.addFilter(o,a,c,f),this.refreshFilter()}userSetHeaderFilterFocus(o){var a=this.table.columnManager.findColumn(o);if(!a)return console.warn("Column Filter Focus Error - No matching column found:",o),!1;this.setHeaderFilterFocus(a)}userGetHeaderFilterValue(o){var a=this.table.columnManager.findColumn(o);if(a)return this.getHeaderFilterValue(a);console.warn("Column Filter Error - No matching column found:",o)}userSetHeaderFilterValue(o,a){var c=this.table.columnManager.findColumn(o);if(!c)return console.warn("Column Filter Error - No matching column found:",o),!1;this.setHeaderFilterValue(c,a)}userRemoveFilter(o,a,c){this.removeFilter(o,a,c),this.refreshFilter()}userClearFilter(o){this.clearFilter(o),this.refreshFilter()}userClearHeaderFilter(){this.clearHeaderFilter(),this.refreshFilter()}searchRows(o,a,c){return this.search("rows",o,a,c)}searchData(o,a,c){return this.search("data",o,a,c)}initializeColumnHeaderFilter(o){var a=o.definition;a.headerFilter&&(void 0!==a.headerFilterPlaceholder&&a.field&&this.module("localize").setHeaderFilterColumnPlaceholder(a.field,a.headerFilterPlaceholder),this.initializeColumn(o))}initializeColumn(o,a){var c=this,f=o.getField();o.modules.filter={success:function(R){var dt,O="input"==o.modules.filter.tagType&&"text"==o.modules.filter.attrType||"textarea"==o.modules.filter.tagType?"partial":"match",F="",J="";if(void 0===o.modules.filter.prevSuccess||o.modules.filter.prevSuccess!==R){if(o.modules.filter.prevSuccess=R,o.modules.filter.emptyFunc(R))delete c.headerFilters[f];else{switch(o.modules.filter.value=R,typeof o.definition.headerFilterFunc){case"string":g.filters[o.definition.headerFilterFunc]?(F=o.definition.headerFilterFunc,dt=function(Ft){var qt=o.definition.headerFilterFuncParams||{},Ee=o.getFieldValue(Ft);return qt="function"==typeof qt?qt(R,Ee,Ft):qt,g.filters[o.definition.headerFilterFunc](R,Ee,Ft,qt)}):console.warn("Header Filter Error - Matching filter function not found: ",o.definition.headerFilterFunc);break;case"function":F=dt=function(Ft){var qt=o.definition.headerFilterFuncParams||{},Ee=o.getFieldValue(Ft);return qt="function"==typeof qt?qt(R,Ee,Ft):qt,o.definition.headerFilterFunc(R,Ee,Ft,qt)}}dt||("partial"===O?(dt=function(Ft){var qt=o.getFieldValue(Ft);return null!=qt&&String(qt).toLowerCase().indexOf(String(R).toLowerCase())>-1},F="like"):(dt=function(Ft){return o.getFieldValue(Ft)==R},F="=")),c.headerFilters[f]={value:R,func:dt,type:F,params:{}}}J=JSON.stringify(c.headerFilters),c.prevHeaderFilterChangeCheck!==J&&(c.prevHeaderFilterChangeCheck=J,c.trackChanges(),c.refreshFilter())}return!0},attrType:!1,tagType:!1,emptyFunc:!1},this.generateHeaderFilterElement(o)}generateHeaderFilterElement(o,a,c){var O,F,J,dt,Ft,qt,Ee,f=this,E=o.modules.filter.success,R=o.getField();if(o.modules.filter.headerElement&&o.modules.filter.headerElement.parentNode&&o.contentElement.removeChild(o.modules.filter.headerElement.parentNode),R){switch(o.modules.filter.emptyFunc=o.definition.headerFilterEmptyCheck||function(Ge){return!Ge&&"0"!==Ge&&0!==Ge},(O=document.createElement("div")).classList.add("tabulator-header-filter"),typeof o.definition.headerFilter){case"string":f.table.modules.edit.editors[o.definition.headerFilter]?(F=f.table.modules.edit.editors[o.definition.headerFilter],("tick"===o.definition.headerFilter||"tickCross"===o.definition.headerFilter)&&!o.definition.headerFilterEmptyCheck&&(o.modules.filter.emptyFunc=function(Ge){return!0!==Ge&&!1!==Ge})):console.warn("Filter Error - Cannot build header filter, No such editor found: ",o.definition.editor);break;case"function":F=o.definition.headerFilter;break;case"boolean":o.modules.edit&&o.modules.edit.editor?F=o.modules.edit.editor:o.definition.formatter&&f.table.modules.edit.editors[o.definition.formatter]?(F=f.table.modules.edit.editors[o.definition.formatter],("tick"===o.definition.formatter||"tickCross"===o.definition.formatter)&&!o.definition.headerFilterEmptyCheck&&(o.modules.filter.emptyFunc=function(Ge){return!0!==Ge&&!1!==Ge})):F=f.table.modules.edit.editors.input}if(F){if(dt={getValue:function(){return void 0!==a?a:""},getField:function(){return o.definition.field},getElement:function(){return O},getColumn:function(){return o.getComponent()},getRow:function(){return{normalizeHeight:function(){}}}},Ee="function"==typeof(Ee=o.definition.headerFilterParams||{})?Ee.call(f.table):Ee,!(J=F.call(this.table.modules.edit,dt,function(){},E,function(){},Ee)))return void console.warn("Filter Error - Cannot add filter to "+R+" column, editor returned a value of false");if(!(J instanceof Node))return void console.warn("Filter Error - Cannot add filter to "+R+" column, editor should return an instance of Node, the editor returned:",J);R?f.langBind("headerFilters|columns|"+o.definition.field,function(Ge){J.setAttribute("placeholder",void 0!==Ge&&Ge?Ge:f.langText("headerFilters|default"))}):f.langBind("headerFilters|default",function(Ge){J.setAttribute("placeholder",Ge)}),J.addEventListener("click",function(Ge){Ge.stopPropagation(),J.focus()}),J.addEventListener("focus",Ge=>{var We=this.table.columnManager.element.scrollLeft;We!==this.table.rowManager.element.scrollLeft&&(this.table.rowManager.scrollHorizontal(We),this.table.columnManager.scrollHorizontal(We))}),Ft=!1,qt=function(Ge){Ft&&clearTimeout(Ft),Ft=setTimeout(function(){E(J.value)},f.table.options.headerFilterLiveFilterDelay)},o.modules.filter.headerElement=J,o.modules.filter.attrType=J.hasAttribute("type")?J.getAttribute("type").toLowerCase():"",o.modules.filter.tagType=J.tagName.toLowerCase(),!1!==o.definition.headerFilterLiveFilter&&("autocomplete"===o.definition.headerFilter||"tickCross"===o.definition.headerFilter||("autocomplete"===o.definition.editor||"tickCross"===o.definition.editor)&&!0===o.definition.headerFilter||(J.addEventListener("keyup",qt),J.addEventListener("search",qt),"number"==o.modules.filter.attrType&&J.addEventListener("change",function(Ge){E(J.value)}),"text"==o.modules.filter.attrType&&"ie"!==this.table.browser&&J.setAttribute("type","search")),("input"==o.modules.filter.tagType||"select"==o.modules.filter.tagType||"textarea"==o.modules.filter.tagType)&&J.addEventListener("mousedown",function(Ge){Ge.stopPropagation()})),O.appendChild(J),o.contentElement.appendChild(O),c||f.headerFilterColumns.push(o)}}else console.warn("Filter Error - Cannot add header filter, column has no field set:",o.definition.title)}hideHeaderFilterElements(){this.headerFilterColumns.forEach(function(o){o.modules.filter&&o.modules.filter.headerElement&&(o.modules.filter.headerElement.style.display="none")})}showHeaderFilterElements(){this.headerFilterColumns.forEach(function(o){o.modules.filter&&o.modules.filter.headerElement&&(o.modules.filter.headerElement.style.display="")})}setHeaderFilterFocus(o){o.modules.filter&&o.modules.filter.headerElement?o.modules.filter.headerElement.focus():console.warn("Column Filter Focus Error - No header filter set on column:",o.getField())}getHeaderFilterValue(o){if(o.modules.filter&&o.modules.filter.headerElement)return o.modules.filter.headerElement.value;console.warn("Column Filter Error - No header filter set on column:",o.getField())}setHeaderFilterValue(o,a){o&&(o.modules.filter&&o.modules.filter.headerElement?(this.generateHeaderFilterElement(o,a,!0),o.modules.filter.success(a)):console.warn("Column Filter Error - No header filter set on column:",o.getField()))}reloadHeaderFilter(o){o&&(o.modules.filter&&o.modules.filter.headerElement?this.generateHeaderFilterElement(o,o.modules.filter.value,!0):console.warn("Column Filter Error - No header filter set on column:",o.getField()))}refreshFilter(){this.tableInitialized&&("remote"===this.table.options.filterMode?this.reloadData():this.refreshData())}trackChanges(){this.changed=!0,this.dispatch("filter-changed")}hasChanged(){var o=this.changed;return this.changed=!1,o}setFilter(o,a,c,f){this.filterList=[],Array.isArray(o)||(o=[{field:o,type:a,value:c,params:f}]),this.addFilter(o)}addFilter(o,a,c,f){Array.isArray(o)||(o=[{field:o,type:a,value:c,params:f}]),o.forEach(E=>{(E=this.findFilter(E))&&(this.filterList.push(E),this.changed=!0)})}findFilter(o){var a;if(Array.isArray(o))return this.findSubFilters(o);var c=!1;return"function"==typeof o.field?c=function(f){return o.field(f,o.type||{})}:g.filters[o.type]?c=(a=this.table.columnManager.getColumnByField(o.field))?function(f){return g.filters[o.type](o.value,a.getFieldValue(f),f,o.params||{})}:function(f){return g.filters[o.type](o.value,f[o.field],f,o.params||{})}:console.warn("Filter Error - No such filter type found, ignoring: ",o.type),o.func=c,!!o.func&&o}findSubFilters(o){var a=[];return o.forEach(c=>{(c=this.findFilter(c))&&a.push(c)}),!!a.length&&a}getFilters(o,a){var c=[];return o&&(c=this.getHeaderFilters()),a&&c.forEach(function(f){"function"==typeof f.type&&(f.type="function")}),c.concat(this.filtersToArray(this.filterList,a))}filtersToArray(o,a){var c=[];return o.forEach(f=>{var E;Array.isArray(f)?c.push(this.filtersToArray(f,a)):(E={field:f.field,type:f.type,value:f.value},a&&"function"==typeof E.type&&(E.type="function"),c.push(E))}),c}getHeaderFilters(){var o=[];for(var a in this.headerFilters)o.push({field:a,type:this.headerFilters[a].type,value:this.headerFilters[a].value});return o}removeFilter(o,a,c){Array.isArray(o)||(o=[{field:o,type:a,value:c}]),o.forEach(f=>{var E;(E=this.filterList.findIndex("object"==typeof f.field?R=>f===R:R=>f.field===R.field&&f.type===R.type&&f.value===R.value))>-1?this.filterList.splice(E,1):console.warn("Filter Error - No matching filter type found, ignoring: ",f.type)}),this.trackChanges()}clearFilter(o){this.filterList=[],o&&this.clearHeaderFilter(),this.trackChanges()}clearHeaderFilter(){this.headerFilters={},this.prevHeaderFilterChangeCheck="{}",this.headerFilterColumns.forEach(o=>{void 0!==o.modules.filter.value&&delete o.modules.filter.value,o.modules.filter.prevSuccess=void 0,this.reloadHeaderFilter(o)}),this.trackChanges()}search(o,a,c,f){var E=[],R=[];return Array.isArray(a)||(a=[{field:a,type:c,value:f}]),a.forEach(O=>{(O=this.findFilter(O))&&R.push(O)}),this.table.rowManager.rows.forEach(O=>{var F=!0;R.forEach(J=>{this.filterRecurse(J,O.getData())||(F=!1)}),F&&E.push("data"===o?O.getData("data"):O.getComponent())}),E}filter(o,a){var c=[],f=[];return this.subscribedExternal("dataFiltering")&&this.dispatchExternal("dataFiltering",this.getFilters()),"remote"!==this.table.options.filterMode&&(this.filterList.length||Object.keys(this.headerFilters).length)?o.forEach(E=>{this.filterRow(E)&&c.push(E)}):c=o.slice(0),this.subscribedExternal("dataFiltered")&&(c.forEach(E=>{f.push(E.getComponent())}),this.dispatchExternal("dataFiltered",this.getFilters(),f)),c}filterRow(o,a){var c=!0,f=o.getData();for(var E in this.filterList.forEach(R=>{this.filterRecurse(R,f)||(c=!1)}),this.headerFilters)this.headerFilters[E].func(f)||(c=!1);return c}filterRecurse(o,a){var c=!1;return Array.isArray(o)?o.forEach(f=>{this.filterRecurse(f,a)&&(c=!0)}):c=o.func(a),c}}return g.moduleName="filter",g.filters=k,g})();var zp={plaintext:function(g,l,o){return this.emptyToSpace(this.sanitizeHTML(g.getValue()))},html:function(g,l,o){return g.getValue()},textarea:function(g,l,o){return g.getElement().style.whiteSpace="pre-wrap",this.emptyToSpace(this.sanitizeHTML(g.getValue()))},money:function(g,l,o){var f,E,R,O,a=parseFloat(g.getValue()),c="",F=l.decimal||".",J=l.thousand||",",dt=l.negativeSign||"-",Ft=l.symbol||"",qt=!!l.symbolAfter,Ee=void 0!==l.precision?l.precision:2;if(isNaN(a))return this.emptyToSpace(this.sanitizeHTML(g.getValue()));for(a<0&&(a=Math.abs(a),c=dt),f=!1!==Ee?a.toFixed(Ee):a,E=(f=String(f).split("."))[0],R=f.length>1?F+f[1]:"",O=/(\d+)(\d{3})/;O.test(E);)E=E.replace(O,"$1"+J+"$2");return qt?c+E+R+Ft:c+Ft+E+R},link:function(g,l,o){var a=g.getValue(),c=l.urlPrefix||"",f=l.download,E=a,R=document.createElement("a");if(l.labelField&&(E=g.getData()[l.labelField]),l.label)switch(typeof l.label){case"string":E=l.label;break;case"function":E=l.label(g)}if(E){if(l.urlField&&(a=g.getData()[l.urlField]),l.url)switch(typeof l.url){case"string":a=l.url;break;case"function":a=l.url(g)}return R.setAttribute("href",c+a),l.target&&R.setAttribute("target",l.target),l.download&&(f="function"==typeof f?f(g):!0===f?"":f,R.setAttribute("download",f)),R.innerHTML=this.emptyToSpace(this.sanitizeHTML(E)),R}return"&nbsp;"},image:function(g,l,o){var a=document.createElement("img"),c=g.getValue();switch(l.urlPrefix&&(c=l.urlPrefix+g.getValue()),l.urlSuffix&&(c+=l.urlSuffix),a.setAttribute("src",c),typeof l.height){case"number":a.style.height=l.height+"px";break;case"string":a.style.height=l.height}switch(typeof l.width){case"number":a.style.width=l.width+"px";break;case"string":a.style.width=l.width}return a.addEventListener("load",function(){g.getRow().normalizeHeight()}),a},tickCross:function(g,l,o){var a=g.getValue(),c=g.getElement(),f=l.allowEmpty,R=void 0!==l.tickElement?l.tickElement:'<svg enable-background="new 0 0 24 24" height="14" width="14" viewBox="0 0 24 24" xml:space="preserve" ><path fill="#2DC214" clip-rule="evenodd" d="M21.652,3.211c-0.293-0.295-0.77-0.295-1.061,0L9.41,14.34  c-0.293,0.297-0.771,0.297-1.062,0L3.449,9.351C3.304,9.203,3.114,9.13,2.923,9.129C2.73,9.128,2.534,9.201,2.387,9.351  l-2.165,1.946C0.078,11.445,0,11.63,0,11.823c0,0.194,0.078,0.397,0.223,0.544l4.94,5.184c0.292,0.296,0.771,0.776,1.062,1.07  l2.124,2.141c0.292,0.293,0.769,0.293,1.062,0l14.366-14.34c0.293-0.294,0.293-0.777,0-1.071L21.652,3.211z" fill-rule="evenodd"/></svg>',O=void 0!==l.crossElement?l.crossElement:'<svg enable-background="new 0 0 24 24" height="14" width="14"  viewBox="0 0 24 24" xml:space="preserve" ><path fill="#CE1515" d="M22.245,4.015c0.313,0.313,0.313,0.826,0,1.139l-6.276,6.27c-0.313,0.312-0.313,0.826,0,1.14l6.273,6.272  c0.313,0.313,0.313,0.826,0,1.14l-2.285,2.277c-0.314,0.312-0.828,0.312-1.142,0l-6.271-6.271c-0.313-0.313-0.828-0.313-1.141,0  l-6.276,6.267c-0.313,0.313-0.828,0.313-1.141,0l-2.282-2.28c-0.313-0.313-0.313-0.826,0-1.14l6.278-6.269  c0.313-0.312,0.313-0.826,0-1.14L1.709,5.147c-0.314-0.313-0.314-0.827,0-1.14l2.284-2.278C4.308,1.417,4.821,1.417,5.135,1.73  L11.405,8c0.314,0.314,0.828,0.314,1.141,0.001l6.276-6.267c0.312-0.312,0.826-0.312,1.141,0L22.245,4.015z"/></svg>';return l.allowTruthy&&a||!0===a||"true"===a||"True"===a||1===a||"1"===a?(c.setAttribute("aria-checked",!0),R||""):!f||"null"!==a&&""!==a&&null!=a?(c.setAttribute("aria-checked",!1),O||""):(c.setAttribute("aria-checked","mixed"),"")},datetime:function(g,l,o){var a=window.DateTime||luxon.DateTime,c=l.inputFormat||"yyyy-MM-dd HH:mm:ss",f=l.outputFormat||"dd/MM/yyyy HH:mm:ss",E=void 0!==l.invalidPlaceholder?l.invalidPlaceholder:"",R=g.getValue();if(void 0!==a){var O=(window.DateTime||luxon.DateTime).fromFormat(R,c);return O.isValid?(l.timezone&&(O=O.shiftTimezone(l.timezone)),O.toFormat(f)):!0===E?R:"function"==typeof E?E(R):E}console.error("Format Error - 'datetime' formatter is dependant on luxon.js")},datetimediff:function(g,l,o){var a=window.DateTime||luxon.DateTime,c=l.inputFormat||"yyyy-MM-dd HH:mm:ss",f=void 0!==l.invalidPlaceholder?l.invalidPlaceholder:"",E=void 0!==l.suffix&&l.suffix,R=void 0!==l.unit?l.unit:"days",O=void 0!==l.humanize&&l.humanize,F=void 0!==l.date?l.date:a.now(),J=g.getValue();if(void 0!==a){var dt=a.fromFormat(J,c);if(!dt.isValid)return!0===f?J:"function"==typeof f?f(J):f;if(!O)return parseInt(dt.diff(F,R)[R])+(E?" "+E:"")}else console.error("Format Error - 'datetimediff' formatter is dependant on luxon.js")},lookup:function(g,l,o){var a=g.getValue();return void 0===l[a]?(console.warn("Missing display value for "+a),a):l[a]},star:function(g,l,o){var a=g.getValue(),c=g.getElement(),f=l&&l.stars?l.stars:5,E=document.createElement("span"),R=document.createElementNS("http://www.w3.org/2000/svg","svg");E.style.verticalAlign="middle",R.setAttribute("width","14"),R.setAttribute("height","14"),R.setAttribute("viewBox","0 0 512 512"),R.setAttribute("xml:space","preserve"),R.style.padding="0 1px",a=a&&!isNaN(a)?parseInt(a):0,a=Math.max(0,Math.min(a,f));for(var J=1;J<=f;J++){var dt=R.cloneNode(!0);dt.innerHTML=J<=a?'<polygon fill="#FFEA00" stroke="#C1AB60" stroke-width="37.6152" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" points="259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 "/>':'<polygon fill="#D2D2D2" stroke="#686868" stroke-width="37.6152" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" points="259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 "/>',E.appendChild(dt)}return c.style.whiteSpace="nowrap",c.style.overflow="hidden",c.style.textOverflow="ellipsis",c.setAttribute("aria-label",a),E},traffic:function(g,l,o){var J,a=this.sanitizeHTML(g.getValue())||0,c=document.createElement("span"),f=l&&l.max?l.max:100,E=l&&l.min?l.min:0,R=l&&void 0!==l.color?l.color:["red","orange","green"],O="#666666";if(!isNaN(a)&&void 0!==g.getValue()){switch(c.classList.add("tabulator-traffic-light"),J=parseFloat(a)<=f?parseFloat(a):f,J=parseFloat(J)>=E?parseFloat(J):E,J=Math.round((J-E)/((f-E)/100)),typeof R){case"string":O=R;break;case"function":O=R(a);break;case"object":if(Array.isArray(R)){var Ft=Math.floor(J/(100/R.length));Ft=Math.min(Ft,R.length-1),O=R[Ft=Math.max(Ft,0)];break}}return c.style.backgroundColor=O,c}},progress:function(g,l,o){var F,J,dt,Ft,a=this.sanitizeHTML(g.getValue())||0,c=g.getElement(),f=l&&l.max?l.max:100,E=l&&l.min?l.min:0,R=l&&l.legendAlign?l.legendAlign:"center";switch(F=parseFloat(a)<=f?parseFloat(a):f,F=parseFloat(F)>=E?parseFloat(F):E,F=Math.round((F-E)/((f-E)/100)),typeof l.color){case"string":J=l.color;break;case"function":J=l.color(a);break;case"object":if(Array.isArray(l.color)){var qt=100/l.color.length,Ee=Math.floor(F/qt);Ee=Math.min(Ee,l.color.length-1),Ee=Math.max(Ee,0),J=l.color[Ee];break}default:J="#2DC214"}switch(typeof l.legend){case"string":dt=l.legend;break;case"function":dt=l.legend(a);break;case"boolean":dt=a;break;default:dt=!1}switch(typeof l.legendColor){case"string":Ft=l.legendColor;break;case"function":Ft=l.legendColor(a);break;case"object":Array.isArray(l.legendColor)&&(qt=100/l.legendColor.length,Ee=Math.floor(F/qt),Ee=Math.min(Ee,l.legendColor.length-1),Ee=Math.max(Ee,0),Ft=l.legendColor[Ee]);break;default:Ft="#000"}c.style.minWidth="30px",c.style.position="relative",c.setAttribute("aria-label",F);var De=document.createElement("div");De.style.display="inline-block",De.style.position="absolute",De.style.width=F+"%",De.style.backgroundColor=J,De.style.height="100%",De.setAttribute("data-max",f),De.setAttribute("data-min",E);var Ge=document.createElement("div");if(Ge.style.position="relative",Ge.style.width="100%",Ge.style.height="100%",dt){var We=document.createElement("div");We.style.position="absolute",We.style.top=0,We.style.left=0,We.style.textAlign=R,We.style.width="100%",We.style.color=Ft,We.innerHTML=dt}return o(function(){if(!(g instanceof Vp)){var Si=document.createElement("div");Si.style.position="absolute",Si.style.top="4px",Si.style.bottom="4px",Si.style.left="4px",Si.style.right="4px",c.appendChild(Si),c=Si}c.appendChild(Ge),Ge.appendChild(De),dt&&Ge.appendChild(We)}),""},color:function(g,l,o){return g.getElement().style.backgroundColor=this.sanitizeHTML(g.getValue()),""},buttonTick:function(g,l,o){return'<svg enable-background="new 0 0 24 24" height="14" width="14" viewBox="0 0 24 24" xml:space="preserve" ><path fill="#2DC214" clip-rule="evenodd" d="M21.652,3.211c-0.293-0.295-0.77-0.295-1.061,0L9.41,14.34  c-0.293,0.297-0.771,0.297-1.062,0L3.449,9.351C3.304,9.203,3.114,9.13,2.923,9.129C2.73,9.128,2.534,9.201,2.387,9.351  l-2.165,1.946C0.078,11.445,0,11.63,0,11.823c0,0.194,0.078,0.397,0.223,0.544l4.94,5.184c0.292,0.296,0.771,0.776,1.062,1.07  l2.124,2.141c0.292,0.293,0.769,0.293,1.062,0l14.366-14.34c0.293-0.294,0.293-0.777,0-1.071L21.652,3.211z" fill-rule="evenodd"/></svg>'},buttonCross:function(g,l,o){return'<svg enable-background="new 0 0 24 24" height="14" width="14" viewBox="0 0 24 24" xml:space="preserve" ><path fill="#CE1515" d="M22.245,4.015c0.313,0.313,0.313,0.826,0,1.139l-6.276,6.27c-0.313,0.312-0.313,0.826,0,1.14l6.273,6.272  c0.313,0.313,0.313,0.826,0,1.14l-2.285,2.277c-0.314,0.312-0.828,0.312-1.142,0l-6.271-6.271c-0.313-0.313-0.828-0.313-1.141,0  l-6.276,6.267c-0.313,0.313-0.828,0.313-1.141,0l-2.282-2.28c-0.313-0.313-0.313-0.826,0-1.14l6.278-6.269  c0.313-0.312,0.313-0.826,0-1.14L1.709,5.147c-0.314-0.313-0.314-0.827,0-1.14l2.284-2.278C4.308,1.417,4.821,1.417,5.135,1.73  L11.405,8c0.314,0.314,0.828,0.314,1.141,0.001l6.276-6.267c0.312-0.312,0.826-0.312,1.141,0L22.245,4.015z"/></svg>'},rownum:function(g,l,o){return this.table.rowManager.activeRows.indexOf(g.getRow()._getSelf())+1},handle:function(g,l,o){return g.getElement().classList.add("tabulator-row-handle"),"<div class='tabulator-row-handle-box'><div class='tabulator-row-handle-bar'></div><div class='tabulator-row-handle-bar'></div><div class='tabulator-row-handle-bar'></div></div>"},responsiveCollapse:function(g,l,o){var a=document.createElement("div"),c=g.getRow()._row.modules.responsiveLayout;function f(E){var R=c.element;c.open=E,R&&(c.open?(a.classList.add("open"),R.style.display=""):(a.classList.remove("open"),R.style.display="none"))}return a.classList.add("tabulator-responsive-collapse-toggle"),a.innerHTML="<span class='tabulator-responsive-collapse-toggle-open'>+</span><span class='tabulator-responsive-collapse-toggle-close'>-</span>",g.getElement().classList.add("tabulator-row-handle"),a.addEventListener("click",function(E){E.stopImmediatePropagation(),f(!c.open)}),f(c.open),a},rowSelection:function(g,l,o){var a=document.createElement("input");if(a.type="checkbox",this.table.modExists("selectRow",!0))if(a.addEventListener("click",f=>{f.stopPropagation()}),"function"==typeof g.getRow){var c=g.getRow();c instanceof gd?(a.addEventListener("change",f=>{c.toggleSelect()}),a.checked=c.isSelected&&c.isSelected(),this.table.modules.selectRow.registerRowSelectCheckbox(c,a)):a=""}else a.addEventListener("change",f=>{this.table.modules.selectRow.selectedRows.length?this.table.deselectRow():this.table.selectRow(l.rowRange)}),this.table.modules.selectRow.registerHeaderSelectCheckbox(a);return a}};let jp=(()=>{class g extends bo{constructor(o){super(o),this.registerColumnOption("formatter"),this.registerColumnOption("formatterParams"),this.registerColumnOption("formatterPrint"),this.registerColumnOption("formatterPrintParams"),this.registerColumnOption("formatterClipboard"),this.registerColumnOption("formatterClipboardParams"),this.registerColumnOption("formatterHtmlOutput"),this.registerColumnOption("formatterHtmlOutputParams"),this.registerColumnOption("titleFormatter"),this.registerColumnOption("titleFormatterParams")}initialize(){this.subscribe("cell-format",this.formatValue.bind(this)),this.subscribe("cell-rendered",this.cellRendered.bind(this)),this.subscribe("column-layout",this.initializeColumn.bind(this)),this.subscribe("column-format",this.formatHeader.bind(this))}initializeColumn(o){o.modules.format=this.lookupFormatter(o,""),void 0!==o.definition.formatterPrint&&(o.modules.format.print=this.lookupFormatter(o,"Print")),void 0!==o.definition.formatterClipboard&&(o.modules.format.clipboard=this.lookupFormatter(o,"Clipboard")),void 0!==o.definition.formatterHtmlOutput&&(o.modules.format.htmlOutput=this.lookupFormatter(o,"HtmlOutput"))}lookupFormatter(o,a){var c={params:o.definition["formatter"+a+"Params"]||{}},f=o.definition["formatter"+a];switch(typeof f){case"string":g.formatters[f]?c.formatter=g.formatters[f]:(console.warn("Formatter Error - No such formatter found: ",f),c.formatter=g.formatters.plaintext);break;case"function":c.formatter=f;break;default:c.formatter=g.formatters.plaintext}return c}cellRendered(o){o.modules.format&&o.modules.format.renderedCallback&&!o.modules.format.rendered&&(o.modules.format.renderedCallback(),o.modules.format.rendered=!0)}formatHeader(o,a,c){var f,E,R,O;return o.definition.titleFormatter?(f=this.getFormatter(o.definition.titleFormatter),R=F=>{o.titleFormatterRendered=F},O={getValue:function(){return a},getElement:function(){return c}},E="function"==typeof(E=o.definition.titleFormatterParams||{})?E():E,f.call(this,O,E,R)):a}formatValue(o){var a=o.getComponent(),c="function"==typeof o.column.modules.format.params?o.column.modules.format.params(a):o.column.modules.format.params;return o.column.modules.format.formatter.call(this,a,c,function(E){o.modules.format||(o.modules.format={}),o.modules.format.renderedCallback=E,o.modules.format.rendered=!1})}formatExportValue(o,a){var f,c=o.column.modules.format[a];if(c){let E=function(R){o.modules.format||(o.modules.format={}),o.modules.format.renderedCallback=R,o.modules.format.rendered=!1};return f="function"==typeof c.params?c.params(component):c.params,c.formatter.call(this,o.getComponent(),f,E)}return this.formatValue(o)}sanitizeHTML(o){if(o){var a={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};return String(o).replace(/[&<>"'`=\/]/g,function(c){return a[c]})}return o}emptyToSpace(o){return null==o||""===o?"&nbsp;":o}getFormatter(o){switch(typeof o){case"string":g.formatters[o]?o=g.formatters[o]:(console.warn("Formatter Error - No such formatter found: ",o),o=g.formatters.plaintext);break;case"function":o=o;break;default:o=g.formatters.plaintext}return o}}return g.moduleName="format",g.formatters=zp,g})(),Yp=(()=>{class g extends bo{constructor(o){super(o),this.leftColumns=[],this.rightColumns=[],this.leftMargin=0,this.rightMargin=0,this.rightPadding=0,this.initializationMode="left",this.active=!1,this.scrollEndTimer=!1,this.registerColumnOption("frozen")}reset(){this.initializationMode="left",this.leftColumns=[],this.rightColumns=[],this.leftMargin=0,this.rightMargin=0,this.rightMargin=0,this.active=!1,this.table.columnManager.headersElement.style.marginLeft=0,this.table.columnManager.element.style.paddingRight=0}initialize(){this.subscribe("cell-layout",this.layoutCell.bind(this)),this.subscribe("column-init",this.initializeColumn.bind(this)),this.subscribe("column-width",this.layout.bind(this)),this.subscribe("row-layout-before",this.layoutRow.bind(this)),this.subscribe("table-layout",this.layout.bind(this)),this.subscribe("scroll-horizontal",this.scrollHorizontal.bind(this)),this.subscribe("columns-loading",this.reset.bind(this)),this.subscribe("table-redraw",this.layout.bind(this))}layoutCell(o){this.layoutElement(o.element,o.column)}initializeColumn(o){var a={margin:0,edge:!1};o.isGroup||(this.frozenCheck(o)?(a.position=this.initializationMode,"left"==this.initializationMode?this.leftColumns.push(o):this.rightColumns.unshift(o),this.active=!0,o.modules.frozen=a):this.initializationMode="right")}frozenCheck(o){return o.parent.isGroup&&o.definition.frozen&&console.warn("Frozen Column Error - Parent column group must be frozen, not individual columns or sub column groups"),o.parent.isGroup?this.frozenCheck(o.parent):o.definition.frozen}scrollHorizontal(){var o;this.active&&(clearTimeout(this.scrollEndTimer),this.scrollEndTimer=setTimeout(()=>{this.layout()},100),o=this.table.rowManager.getVisibleRows(),this.calcMargins(),this.layoutColumnPosition(),this.layoutCalcRows(),o.forEach(a=>{"row"===a.type&&this.layoutRow(a)}),this.table.rowManager.tableElement.style.marginRight=this.rightMargin)}calcMargins(){this.leftMargin=this._calcSpace(this.leftColumns,this.leftColumns.length)+"px",this.table.columnManager.headersElement.style.marginLeft=this.leftMargin,this.rightMargin=this._calcSpace(this.rightColumns,this.rightColumns.length)+"px",this.table.columnManager.element.style.paddingRight=this.rightMargin,this.rightPadding=this.table.rowManager.element.clientWidth+this.table.columnManager.scrollLeft}layoutCalcRows(){this.table.modExists("columnCalcs")&&(this.table.modules.columnCalcs.topInitialized&&this.table.modules.columnCalcs.topRow&&this.layoutRow(this.table.modules.columnCalcs.topRow),this.table.modules.columnCalcs.botInitialized&&this.table.modules.columnCalcs.botRow&&this.layoutRow(this.table.modules.columnCalcs.botRow),this.table.modExists("groupRows")&&this.layoutGroupCalcs(this.table.modules.groupRows.getGroups()))}layoutGroupCalcs(o){o.forEach(a=>{a.calcs.top&&this.layoutRow(a.calcs.top),a.calcs.bottom&&this.layoutRow(a.calcs.bottom),a.groupList&&a.groupList.length&&this.layoutGroupCalcs(a.groupList&&a.groupList)})}layoutColumnPosition(o){var a=[];this.leftColumns.forEach((c,f)=>{if(c.modules.frozen.margin=this._calcSpace(this.leftColumns,f)+this.table.columnManager.scrollLeft+"px",c.modules.frozen.edge=f==this.leftColumns.length-1,c.parent.isGroup){var E=this.getColGroupParentElement(c);a.includes(E)||(this.layoutElement(E,c),a.push(E)),c.modules.frozen.edge&&E.classList.add("tabulator-frozen-"+c.modules.frozen.position)}else this.layoutElement(c.getElement(),c);o&&c.cells.forEach(R=>{this.layoutElement(R.getElement(!0),c)})}),this.rightColumns.forEach((c,f)=>{c.modules.frozen.margin=this.rightPadding-this._calcSpace(this.rightColumns,f+1)+"px",c.modules.frozen.edge=f==this.rightColumns.length-1,this.layoutElement(c.parent.isGroup?this.getColGroupParentElement(c):c.getElement(),c),o&&c.cells.forEach(E=>{this.layoutElement(E.getElement(!0),c)})})}getColGroupParentElement(o){return o.parent.isGroup?this.getColGroupParentElement(o.parent):o.getElement()}layout(){this.active&&(this.calcMargins(),this.table.rowManager.getDisplayRows().forEach(o=>{"row"===o.type&&this.layoutRow(o)}),this.layoutCalcRows(),this.layoutColumnPosition(!0),this.table.rowManager.tableElement.style.marginRight=this.rightMargin)}layoutRow(o){o.getElement().style.paddingLeft=this.leftMargin,this.leftColumns.forEach(c=>{var f=o.getCell(c);f&&this.layoutElement(f.getElement(!0),c)}),this.rightColumns.forEach(c=>{var f=o.getCell(c);f&&this.layoutElement(f.getElement(!0),c)})}layoutElement(o,a){a.modules.frozen&&(o.style.position="absolute",o.style.left=a.modules.frozen.margin,o.classList.add("tabulator-frozen"),a.modules.frozen.edge&&o.classList.add("tabulator-frozen-"+a.modules.frozen.position))}_calcSpace(o,a){var c=0;for(let f=0;f<a;f++)o[f].visible&&(c+=o[f].getWidth());return c}}return g.moduleName="frozenColumns",g})(),Yf=(()=>{class g extends bo{constructor(o){super(o),this.topElement=document.createElement("div"),this.rows=[],this.registerComponentFunction("row","freeze",this.freezeRow.bind(this)),this.registerComponentFunction("row","unfreeze",this.unfreezeRow.bind(this)),this.registerComponentFunction("row","isFrozen",this.isRowFrozen.bind(this))}initialize(){this.rows=[],this.topElement.classList.add("tabulator-frozen-rows-holder"),this.table.columnManager.getElement().insertBefore(this.topElement,this.table.columnManager.headersElement.nextSibling),this.subscribe("row-deleting",this.detachRow.bind(this)),this.registerDisplayHandler(this.getRows.bind(this),10)}isRowFrozen(o){return this.rows.indexOf(o)>-1}isFrozen(){return!!this.rows.length}getRows(o){var a=o.slice(0);return this.rows.forEach(function(c){var f=a.indexOf(c);f>-1&&a.splice(f,1)}),a}freezeRow(o){o.modules.frozen?console.warn("Freeze Error - Row is already frozen"):(o.modules.frozen=!0,this.topElement.appendChild(o.getElement()),o.initialize(),o.normalizeHeight(),this.table.rowManager.adjustTableSize(),this.rows.push(o),this.refreshData(!1,"display"),this.styleRows())}unfreezeRow(o){this.rows.indexOf(o),o.modules.frozen?(o.modules.frozen=!1,this.detachRow(o),this.table.rowManager.adjustTableSize(),this.refreshData(!1,"display"),this.rows.length&&this.styleRows()):console.warn("Freeze Error - Row is already unfrozen")}detachRow(o){var a=this.rows.indexOf(o);if(a>-1){var c=o.getElement();c.parentNode&&c.parentNode.removeChild(c),this.rows.splice(a,1)}}styleRows(o){this.rows.forEach((a,c)=>{this.table.rowManager.styleRow(a,c)})}}return g.moduleName="frozenRows",g})();class Xf{constructor(l){return this._group=l,this.type="GroupComponent",new Proxy(this,{get:function(o,a,c){return void 0!==o[a]?o[a]:o._group.table.componentFunctionBinder.handle("row",o._group,a)}})}getKey(){return this._group.key}getField(){return this._group.field}getElement(){return this._group.element}getRows(){return this._group.getRows(!0)}getSubGroups(){return this._group.getSubGroups(!0)}getParentGroup(){return!!this._group.parent&&this._group.parent.getComponent()}isVisible(){return this._group.visible}show(){this._group.show()}hide(){this._group.hide()}toggle(){this._group.toggleVisibility()}_getSelf(){return this._group}getTable(){return this._group.groupManager.table}}class Vh{constructor(l,o,a,c,f,E,R){this.groupManager=l,this.parent=o,this.key=c,this.level=a,this.field=f,this.hasSubGroups=a<l.groupIDLookups.length-1,this.addRow=this.hasSubGroups?this._addRowToGroup:this._addRow,this.type="group",this.old=R,this.rows=[],this.groups=[],this.groupList=[],this.generator=E,this.elementContents=!1,this.height=0,this.outerHeight=0,this.initialized=!1,this.calcs={},this.initialized=!1,this.modules={},this.arrowElement=!1,this.visible=R?R.visible:void 0!==l.startOpen[a]?l.startOpen[a]:l.startOpen[0],this.component=null,this.createElements(),this.addBindings(),this.createValueGroups()}wipe(){this.groupList.length?this.groupList.forEach(function(l){l.wipe()}):(this.element=!1,this.arrowElement=!1,this.elementContents=!1)}createElements(){var l=document.createElement("div");l.classList.add("tabulator-arrow"),this.element=document.createElement("div"),this.element.classList.add("tabulator-row"),this.element.classList.add("tabulator-group"),this.element.classList.add("tabulator-group-level-"+this.level),this.element.setAttribute("role","rowgroup"),this.arrowElement=document.createElement("div"),this.arrowElement.classList.add("tabulator-group-toggle"),this.arrowElement.appendChild(l),!1!==this.groupManager.table.options.movableRows&&this.groupManager.table.modExists("moveRow")&&this.groupManager.table.modules.moveRow.initializeGroupHeader(this)}createValueGroups(){var l=this.level+1;this.groupManager.allowedValues&&this.groupManager.allowedValues[l]&&this.groupManager.allowedValues[l].forEach(o=>{this._createGroup(o,l)})}addBindings(){var l,o,a;(this.groupManager.table.options.groupContextMenu||this.groupManager.table.options.groupClickMenu)&&this.groupManager.table.modExists("menu")&&this.groupManager.table.modules.menu.initializeGroup.call(this.groupManager.table.modules.menu,this),this.groupManager.table.options.groupTap&&(a=!1,this.element.addEventListener("touchstart",f=>{a=!0},{passive:!0}),this.element.addEventListener("touchend",f=>{a&&this.groupManager.table.options.groupTap(f,this.getComponent()),a=!1})),this.groupManager.table.options.groupDblTap&&(l=null,this.element.addEventListener("touchend",f=>{l?(clearTimeout(l),l=null,this.groupManager.table.options.groupDblTap(f,this.getComponent())):l=setTimeout(()=>{clearTimeout(l),l=null},300)})),this.groupManager.table.options.groupTapHold&&(o=null,this.element.addEventListener("touchstart",f=>{clearTimeout(o),o=setTimeout(()=>{clearTimeout(o),o=null,a=!1,this.groupManager.table.options.groupTapHold(f,this.getComponent())},1e3)},{passive:!0}),this.element.addEventListener("touchend",f=>{clearTimeout(o),o=null})),this.groupManager.table.options.groupToggleElement&&("arrow"==this.groupManager.table.options.groupToggleElement?this.arrowElement:this.element).addEventListener("click",f=>{f.stopPropagation(),f.stopImmediatePropagation(),this.toggleVisibility()})}_createGroup(l,o){var a=o+"_"+l,c=new Vh(this.groupManager,this,o,l,this.groupManager.groupIDLookups[o].field,this.groupManager.headerGenerator[o]||this.groupManager.headerGenerator[0],!!this.old&&this.old.groups[a]);this.groups[a]=c,this.groupList.push(c)}_addRowToGroup(l){var o=this.level+1;if(this.hasSubGroups){var a=this.groupManager.groupIDLookups[o].func(l.getData()),c=o+"_"+a;this.groupManager.allowedValues&&this.groupManager.allowedValues[o]?this.groups[c]&&this.groups[c].addRow(l):(this.groups[c]||this._createGroup(a,o),this.groups[c].addRow(l))}}_addRow(l){this.rows.push(l),l.modules.group=this}insertRow(l,o,a){var c=this.conformRowData({});l.updateData(c);var f=this.rows.indexOf(o);f>-1?this.rows.splice(a?f+1:f,0,l):a?this.rows.push(l):this.rows.unshift(l),l.modules.group=this,this.generateGroupHeaderContents(),this.groupManager.table.modExists("columnCalcs")&&"table"!=this.groupManager.table.options.columnCalcs&&this.groupManager.table.modules.columnCalcs.recalcGroup(this),this.groupManager.updateGroupRows(!0)}scrollHeader(l){this.arrowElement.style.marginLeft=l,this.groupList.forEach(function(o){o.scrollHeader(l)})}getRowIndex(l){}conformRowData(l){return this.field?l[this.field]=this.key:console.warn("Data Conforming Error - Cannot conform row data to match new group as groupBy is a function"),this.parent&&(l=this.parent.conformRowData(l)),l}removeRow(l){var o=this.rows.indexOf(l),a=l.getElement();o>-1&&this.rows.splice(o,1),this.groupManager.table.options.groupValues||this.rows.length?(a.parentNode&&a.parentNode.removeChild(a),this.generateGroupHeaderContents(),this.groupManager.table.modExists("columnCalcs")&&"table"!=this.groupManager.table.options.columnCalcs&&this.groupManager.table.modules.columnCalcs.recalcGroup(this)):(this.parent?this.parent.removeGroup(this):this.groupManager.removeGroup(this),this.groupManager.updateGroupRows(!0))}removeGroup(l){var a,o=l.level+"_"+l.key;this.groups[o]&&(delete this.groups[o],(a=this.groupList.indexOf(l))>-1&&this.groupList.splice(a,1),this.groupList.length||(this.parent?this.parent.removeGroup(this):this.groupManager.removeGroup(this)))}getHeadersAndRows(l){var o=[];return o.push(this),this._visSet(),this.visible?this.groupList.length?this.groupList.forEach(function(a){o=o.concat(a.getHeadersAndRows(l))}):(!l&&"table"!=this.groupManager.table.options.columnCalcs&&this.groupManager.table.modExists("columnCalcs")&&this.groupManager.table.modules.columnCalcs.hasTopCalcs()&&(this.calcs.top&&(this.calcs.top.detachElement(),this.calcs.top.deleteCells()),this.calcs.top=this.groupManager.table.modules.columnCalcs.generateTopRow(this.rows),o.push(this.calcs.top)),o=o.concat(this.rows),!l&&"table"!=this.groupManager.table.options.columnCalcs&&this.groupManager.table.modExists("columnCalcs")&&this.groupManager.table.modules.columnCalcs.hasBottomCalcs()&&(this.calcs.bottom&&(this.calcs.bottom.detachElement(),this.calcs.bottom.deleteCells()),this.calcs.bottom=this.groupManager.table.modules.columnCalcs.generateBottomRow(this.rows),o.push(this.calcs.bottom))):!this.groupList.length&&"table"!=this.groupManager.table.options.columnCalcs&&this.groupManager.table.modExists("columnCalcs")&&(!l&&this.groupManager.table.modules.columnCalcs.hasTopCalcs()&&(this.calcs.top&&(this.calcs.top.detachElement(),this.calcs.top.deleteCells()),this.groupManager.table.options.groupClosedShowCalcs&&(this.calcs.top=this.groupManager.table.modules.columnCalcs.generateTopRow(this.rows),o.push(this.calcs.top))),!l&&this.groupManager.table.modules.columnCalcs.hasBottomCalcs()&&(this.calcs.bottom&&(this.calcs.bottom.detachElement(),this.calcs.bottom.deleteCells()),this.groupManager.table.options.groupClosedShowCalcs&&(this.calcs.bottom=this.groupManager.table.modules.columnCalcs.generateBottomRow(this.rows),o.push(this.calcs.bottom)))),o}getData(l,o){var a=[];return this._visSet(),(!l||l&&this.visible)&&this.rows.forEach(c=>{a.push(c.getData(o||"data"))}),a}getRowCount(){var l=0;return this.groupList.length?this.groupList.forEach(o=>{l+=o.getRowCount()}):l=this.rows.length,l}toggleVisibility(){this.visible?this.hide():this.show()}hide(){this.visible=!1,"classic"!=this.groupManager.table.rowManager.getRenderMode()||this.groupManager.table.options.pagination?this.groupManager.updateGroupRows(!0):(this.element.classList.remove("tabulator-group-visible"),this.groupList.length?this.groupList.forEach(l=>{l.getHeadersAndRows().forEach(a=>{a.detachElement()})}):this.rows.forEach(l=>{var o=l.getElement();o.parentNode.removeChild(o)}),this.groupManager.table.rowManager.setDisplayRows(this.groupManager.updateGroupRows(),this.groupManager.getDisplayIndex()),this.groupManager.table.rowManager.checkClassicModeGroupHeaderWidth()),this.groupManager.table.externalEvents.dispatch("groupVisibilityChanged",this.getComponent(),!1)}show(){if(this.visible=!0,"classic"!=this.groupManager.table.rowManager.getRenderMode()||this.groupManager.table.options.pagination)this.groupManager.updateGroupRows(!0);else{this.element.classList.add("tabulator-group-visible");var l=this.getElement();this.groupList.length?this.groupList.forEach(o=>{o.getHeadersAndRows().forEach(c=>{var f=c.getElement();l.parentNode.insertBefore(f,l.nextSibling),c.initialize(),l=f})}):this.rows.forEach(o=>{var a=o.getElement();l.parentNode.insertBefore(a,l.nextSibling),o.initialize(),l=a}),this.groupManager.table.rowManager.setDisplayRows(this.groupManager.updateGroupRows(),this.groupManager.getDisplayIndex()),this.groupManager.table.rowManager.checkClassicModeGroupHeaderWidth()}this.groupManager.table.externalEvents.dispatch("groupVisibilityChanged",this.getComponent(),!0)}_visSet(){var l=[];"function"==typeof this.visible&&(this.rows.forEach(function(o){l.push(o.getData())}),this.visible=this.visible(this.key,this.getRowCount(),l,this.getComponent()))}getRowGroup(l){var o=!1;return this.groupList.length?this.groupList.forEach(function(a){var c=a.getRowGroup(l);c&&(o=c)}):this.rows.find(function(a){return a===l})&&(o=this),o}getSubGroups(l){var o=[];return this.groupList.forEach(function(a){o.push(l?a.getComponent():a)}),o}getRows(l){var o=[];return this.rows.forEach(function(a){o.push(l?a.getComponent():a)}),o}generateGroupHeaderContents(){var l=[];for(this.rows.forEach(function(o){l.push(o.getData())}),this.elementContents=this.generator(this.key,this.getRowCount(),l,this.getComponent());this.element.firstChild;)this.element.removeChild(this.element.firstChild);"string"==typeof this.elementContents?this.element.innerHTML=this.elementContents:this.element.appendChild(this.elementContents),this.element.insertBefore(this.arrowElement,this.element.firstChild)}getPath(l=[]){return l.unshift(this.key),this.parent&&this.parent.getPath(l),l}getElement(){this.addBindingsd=!1,this._visSet(),this.visible?this.element.classList.add("tabulator-group-visible"):this.element.classList.remove("tabulator-group-visible");for(var l=0;l<this.element.childNodes.length;++l)this.element.childNodes[l].parentNode.removeChild(this.element.childNodes[l]);return this.generateGroupHeaderContents(),this.element}detachElement(){this.element&&this.element.parentNode&&this.element.parentNode.removeChild(this.element)}normalizeHeight(){this.setHeight(this.element.clientHeight)}initialize(l){(!this.initialized||l)&&(this.normalizeHeight(),this.initialized=!0)}reinitialize(){this.initialized=!1,this.height=0,Ps.elVisible(this.element)&&this.initialize(!0)}setHeight(l){this.height!=l&&(this.height=l,this.outerHeight=this.element.offsetHeight)}getHeight(){return this.outerHeight}getGroup(){return this}reinitializeHeight(){}calcHeight(){}setCellHeight(){}clearCellHeight(){}deinitializeHeight(){}getComponent(){return this.component||(this.component=new Xf(this)),this.component}}let Xp=(()=>{class g extends bo{constructor(o){super(o),this.groupIDLookups=!1,this.startOpen=[function(){return!1}],this.headerGenerator=[function(){return""}],this.groupList=[],this.allowedValues=!1,this.groups={},this.displayIndex=0,this.displayHandler=this.getRows.bind(this),this.registerTableOption("groupBy",!1),this.registerTableOption("groupStartOpen",!0),this.registerTableOption("groupValues",!1),this.registerTableOption("groupUpdateOnCellEdit",!1),this.registerTableOption("groupHeader",!1),this.registerTableOption("groupHeaderPrint",null),this.registerTableOption("groupHeaderClipboard",null),this.registerTableOption("groupHeaderHtmlOutput",null),this.registerTableOption("groupHeaderDownload",null),this.registerTableOption("groupToggleElement","arrow"),this.registerTableOption("groupClosedShowCalcs",!1),this.registerTableFunction("setGroupBy",this.setGroupBy.bind(this)),this.registerTableFunction("setGroupValues",this.setGroupValues.bind(this)),this.registerTableFunction("setGroupStartOpen",this.setGroupStartOpen.bind(this)),this.registerTableFunction("setGroupHeader",this.setGroupHeader.bind(this)),this.registerTableFunction("getGroups",this.userGetGroups.bind(this)),this.registerTableFunction("getGroupedData",this.userGetGroupedData.bind(this)),this.registerComponentFunction("row","getGroup",this.rowGetGroup.bind(this))}initialize(){this.table.options.groupBy&&(this.configureGroupSetup(),this.table.options.groupUpdateOnCellEdit&&(this.subscribe("cell-value-updated",this.cellUpdated.bind(this)),this.subscribe("row-data-changed",this.reassignRowToGroup.bind(this),0)),this.subscribe("row-deleting",this.rowDeleting.bind(this)),this.subscribe("row-deleted",this.rowsUpdated.bind(this)),this.subscribe("scroll-horizontal",this.scrollHeaders.bind(this)),this.subscribe("rows-wipe",this.wipe.bind(this)),this.subscribe("rows-added",this.rowsUpdated.bind(this)),this.subscribe("row-moving",this.rowMoving.bind(this)),this.subscribe("row-adding-index",this.rowAddingIndex.bind(this)),this.subscribe("rows-sample",this.rowSample.bind(this)),this.subscribe("render-virtual-fill",this.virtualRenderFill.bind(this)),this.registerDisplayHandler(this.displayHandler,20),this.initialized=!0)}configureGroupSetup(){if(this.table.options.groupBy){var o=this.table.options.groupBy,a=this.table.options.groupStartOpen,c=this.table.options.groupHeader;this.allowedValues=this.table.options.groupValues,Array.isArray(o)&&Array.isArray(c)&&o.length>c.length&&console.warn("Error creating group headers, groupHeader array is shorter than groupBy array"),this.headerGenerator=[function(){return""}],this.startOpen=[function(){return!1}],this.langBind("groups|item",(E,R)=>{this.headerGenerator[0]=(O,F,J)=>(void 0===O?"":O)+"<span>("+F+" "+(1===F?E:R.groups.items)+")</span>"}),this.groupIDLookups=[],Array.isArray(o)||o?this.table.modExists("columnCalcs")&&"table"!=this.table.options.columnCalcs&&"both"!=this.table.options.columnCalcs&&this.table.modules.columnCalcs.removeCalcs():this.table.modExists("columnCalcs")&&"group"!=this.table.options.columnCalcs&&this.table.columnManager.getRealColumns().forEach(E=>{E.definition.topCalc&&this.table.modules.columnCalcs.initializeTopRow(),E.definition.bottomCalc&&this.table.modules.columnCalcs.initializeBottomRow()}),Array.isArray(o)||(o=[o]),o.forEach((E,R)=>{var O,F;O="function"==typeof E?E:(F=this.table.columnManager.getColumnByField(E))?function(J){return F.getFieldValue(J)}:function(J){return J[E]},this.groupIDLookups.push({field:"function"!=typeof E&&E,func:O,values:!!this.allowedValues&&this.allowedValues[R]})}),a&&(Array.isArray(a)||(a=[a]),a.forEach(E=>{}),this.startOpen=a),c&&(this.headerGenerator=Array.isArray(c)?c:[c])}}rowSample(o,a){var c=this.getGroups(!1)[0];return a.push(c.getRows(!1)[0]),a}virtualRenderFill(){var o=this.table.rowManager.tableElement,a=this.table.rowManager.getVisibleRows();a=a.filter(c=>"group"!==c.type),o.style.minWidth=a.length?"":this.table.columnManager.getWidth()+"px"}rowAddingIndex(o,a,c){this.assignRowToGroup(o);var f=o.modules.group.rows;return f.length>1&&(!a||a&&-1==f.indexOf(a)?c?f[0]!==o&&this.table.rowManager.moveRowInArray(o.modules.group.rows,o,a=f[0],!c):f[f.length-1]!==o&&this.table.rowManager.moveRowInArray(o.modules.group.rows,o,a=f[f.length-1],!c):this.table.rowManager.moveRowInArray(o.modules.group.rows,o,a,!c)),a}trackChanges(){this.dispatch("group-changed")}setGroupBy(o){this.table.options.groupBy=o,this.configureGroupSetup(),this.refreshData(),this.trackChanges()}setGroupValues(o){this.table.options.groupValues=o,this.configureGroupSetup(),this.refreshData(),this.trackChanges()}setGroupStartOpen(o){this.table.options.groupStartOpen=o,this.configureGroupSetup(),this.table.options.groupBy?(this.refreshData(),this.trackChanges()):console.warn("Grouping Update - cant refresh view, no groups have been set")}setGroupHeader(o){this.table.options.groupHeader=o,this.configureGroupSetup(),this.table.options.groupBy?(this.refreshData(),this.trackChanges()):console.warn("Grouping Update - cant refresh view, no groups have been set")}userGetGroups(o){return this.getGroups(!0)}userGetGroupedData(){return this.table.options.groupBy?this.getGroupedData():this.getData()}rowGetGroup(o){return!!o.modules.group&&o.modules.group.getComponent()}rowMoving(o,a,c){!c&&a instanceof Vh&&(a=this.table.rowManager.prevDisplayRow(o)||a);var f=a instanceof Vh?a:a.modules.group,E=o instanceof Vh?o:o.modules.group;f===E?this.table.rowManager.moveRowInArray(f.rows,o,a,c):(E&&E.removeRow(o),f.insertRow(o,a,c))}rowDeleting(o){o.modules.group&&o.modules.group.removeRow(o)}rowsUpdated(o){this.updateGroupRows(!0)}cellUpdated(o){this.reassignRowToGroup(o.row)}setDisplayIndex(o){this.displayIndex=o}getDisplayIndex(){return this.displayIndex}getRows(o){return this.table.options.groupBy&&this.groupIDLookups.length?(this.dispatchExternal("dataGrouping"),this.generateGroups(o),this.subscribedExternal("dataGrouped")&&this.dispatchExternal("dataGrouped",this.getGroups(!0)),this.updateGroupRows()):o.slice(0)}getGroups(o){var a=[];return this.groupList.forEach(function(c){a.push(o?c.getComponent():c)}),a}getChildGroups(o){var a=[];return o||(o=this),o.groupList.forEach(c=>{c.groupList.length?a=a.concat(this.getChildGroups(c)):a.push(c)}),a}wipe(){this.groupList.forEach(function(o){o.wipe()})}pullGroupListData(o){var a=[];return o.forEach(c=>{var f={level:0,rowCount:0,headerContent:""},E=[];c.hasSubGroups?(E=this.pullGroupListData(c.groupList),f.level=c.level,f.rowCount=E.length-c.groupList.length,f.headerContent=c.generator(c.key,f.rowCount,c.rows,c),a.push(f),a=a.concat(E)):(f.level=c.level,f.headerContent=c.generator(c.key,c.rows.length,c.rows,c),f.rowCount=c.getRows().length,a.push(f),c.getRows().forEach(R=>{a.push(R.getData("data"))}))}),a}getGroupedData(){return this.pullGroupListData(this.groupList)}getRowGroup(o){var a=!1;return this.groupList.forEach(c=>{var f=c.getRowGroup(o);f&&(a=f)}),a}countGroups(){return this.groupList.length}generateGroups(o){var a=this.groups;this.groups={},this.groupList=[],this.allowedValues&&this.allowedValues[0]?(this.allowedValues[0].forEach(c=>{this.createGroup(c,0,a)}),o.forEach(c=>{this.assignRowToExistingGroup(c,a)})):o.forEach(c=>{this.assignRowToGroup(c,a)})}createGroup(o,a,c){var E,f=a+"_"+o;E=new Vh(this,!1,a,o,this.groupIDLookups[0].field,this.headerGenerator[0],(c=c||[])[f]),this.groups[f]=E,this.groupList.push(E)}assignRowToExistingGroup(o,a){var f="0_"+this.groupIDLookups[0].func(o.getData());this.groups[f]&&this.groups[f].addRow(o)}assignRowToGroup(o,a){var c=this.groupIDLookups[0].func(o.getData()),f=!this.groups["0_"+c];return f&&this.createGroup(c,0,a),this.groups["0_"+c].addRow(o),!f}reassignRowToGroup(o){if("row"===o.type){var a=o.modules.group,c=a.getPath(),f=this.getExpectedPath(o);c.length==f.length&&c.every((R,O)=>R===f[O])||(a.removeRow(o),this.assignRowToGroup(o,this.groups),this.refreshData(!0))}}getExpectedPath(o){var a=[],c=o.getData();return this.groupIDLookups.forEach(f=>{a.push(f.func(c))}),a}updateGroupRows(o){var a=[];return this.groupList.forEach(c=>{a=a.concat(c.getHeadersAndRows())}),o&&this.refreshData(!0,this.displayHandler),a}scrollHeaders(o){"virtual"===this.table.options.renderHorizontal&&(o-=this.table.columnManager.renderer.vDomPadLeft),o+="px",this.groupList.forEach(a=>{a.scrollHeader(o)})}removeGroup(o){var c,a=o.level+"_"+o.key;this.groups[a]&&(delete this.groups[a],(c=this.groupList.indexOf(o))>-1&&this.groupList.splice(c,1))}}return g.moduleName="groupRows",g})();var Kf={cellEdit:function(g){g.component.setValueProcessData(g.data.oldValue),g.component.cellRendered()},rowAdd:function(g){g.component.deleteActual()},rowDelete:function(g){var l=this.table.rowManager.addRowActual(g.data.data,g.data.pos,g.data.index);this.table.options.groupBy&&this.table.modExists("groupRows")&&this.table.modules.groupRows.updateGroupRows(!0),this._rebindRow(g.component,l)},rowMove:function(g){this.table.rowManager.moveRowActual(g.component,this.table.rowManager.rows[g.data.posFrom],!g.data.after),this.table.rowManager.redraw()}},Vu={cellEdit:function(g){g.component.setValueProcessData(g.data.newValue),g.component.cellRendered()},rowAdd:function(g){var l=this.table.rowManager.addRowActual(g.data.data,g.data.pos,g.data.index);this.table.options.groupBy&&this.table.modExists("groupRows")&&this.table.modules.groupRows.updateGroupRows(!0),this._rebindRow(g.component,l)},rowDelete:function(g){g.component.deleteActual()},rowMove:function(g){this.table.rowManager.moveRowActual(g.component,this.table.rowManager.rows[g.data.posTo],g.data.after),this.table.rowManager.redraw()}};let cp=(()=>{class g extends bo{constructor(o){super(o),this.history=[],this.index=-1,this.registerTableOption("history",!1)}initialize(){this.table.options.history&&(this.subscribe("cell-value-updated",this.cellUpdated.bind(this)),this.subscribe("cell-delete",this.clearComponentHistory.bind(this)),this.subscribe("row-delete",this.rowDeleted.bind(this)),this.subscribe("rows-wipe",this.clear.bind(this)),this.subscribe("row-added",this.rowAdded.bind(this)),this.subscribe("row-move",this.rowMoved.bind(this))),this.registerTableFunction("undo",this.undo.bind(this)),this.registerTableFunction("redo",this.redo.bind(this)),this.registerTableFunction("getHistoryUndoSize",this.getHistoryUndoSize.bind(this)),this.registerTableFunction("getHistoryRedoSize",this.getHistoryRedoSize.bind(this)),this.registerTableFunction("clearHistory",this.clear.bind(this))}rowMoved(o,a,c){this.action("rowMove",o,{posFrom:this.table.rowManager.getRowPosition(o),posTo:this.table.rowManager.getRowPosition(a),to:a,after:c})}rowAdded(o,a,c,f){this.action("rowAdd",o,{data:a,pos:c,index:f})}rowDeleted(o){var a,c;this.table.options.groupBy?(a=(c=o.getComponent().getGroup().rows).indexOf(o))&&(a=c[a-1]):(a=o.table.rowManager.getRowIndex(o))&&(a=o.table.rowManager.rows[a-1]),this.action("rowDelete",o,{data:o.getData(),pos:!a,index:a})}cellUpdated(o){this.action("cellEdit",o,{oldValue:o.oldValue,newValue:o.value})}clear(){this.history=[],this.index=-1}action(o,a,c){this.history=this.history.slice(0,this.index+1),this.history.push({type:o,component:a,data:c}),this.index++}getHistoryUndoSize(){return this.index+1}getHistoryRedoSize(){return this.history.length-(this.index+1)}clearComponentHistory(o){var a=this.history.findIndex(function(c){return c.component===o});a>-1&&(this.history.splice(a,1),a<=this.index&&this.index--,this.clearComponentHistory(o))}undo(){if(this.index>-1){let o=this.history[this.index];return g.undoers[o.type].call(this,o),this.index--,this.dispatchExternal("historyUndo",o.type,o.component.getComponent(),o.data),!0}return console.warn("History Undo Error - No more history to undo"),!1}redo(){if(this.history.length-1>this.index){this.index++;let o=this.history[this.index];return g.redoers[o.type].call(this,o),this.dispatchExternal("historyRedo",o.type,o.component.getComponent(),o.data),!0}return console.warn("History Redo Error - No more history to redo"),!1}_rebindRow(o,a){this.history.forEach(function(c){if(c.component instanceof ol)c.component===o&&(c.component=a);else if(c.component instanceof xd&&c.component.row===o){var f=c.component.column.getField();f&&(c.component=a.getCell(f))}})}}return g.moduleName="history",g.undoers=Kf,g.redoers=Vu,g})(),Jf=(()=>{class g extends bo{constructor(o){super(o),this.fieldIndex=[],this.hasIndex=!1}initialize(){this.tableElementCheck()}tableElementCheck(){this.table.originalElement&&"TABLE"===this.table.originalElement.tagName&&this.parseTable()}parseTable(){var o=this.table.originalElement,a=this.table.options,f=o.getElementsByTagName("th"),E=o.getElementsByTagName("tbody")[0],R=[];this.hasIndex=!1,this.dispatchExternal("htmlImporting"),E=E?E.getElementsByTagName("tr"):[],this._extractOptions(o,a),f.length?this._extractHeaders(f,E):this._generateBlankHeaders(f,E);for(var O=0;O<E.length;O++){var J=E[O].getElementsByTagName("td"),dt={};this.hasIndex||(dt[a.index]=O);for(var Ft=0;Ft<J.length;Ft++)void 0!==this.fieldIndex[Ft]&&(dt[this.fieldIndex[Ft]]=J[Ft].innerHTML);R.push(dt)}a.data=R,this.dispatchExternal("htmlImported")}_extractOptions(o,a,c){var f=o.attributes,E=c?Object.assign([],c):Object.keys(a),R={};for(var O in E.forEach(dt=>{R[dt.toLowerCase()]=dt}),f){var J,F=f[O];F&&"object"==typeof F&&F.name&&0===F.name.indexOf("tabulator-")&&(J=F.name.replace("tabulator-",""),void 0!==R[J]&&(a[R[J]]=this._attribValue(F.value)))}}_attribValue(o){return"true"===o||"false"!==o&&o}_findCol(o){return this.table.options.columns.find(c=>c.title===o)||!1}_extractHeaders(o,a){for(var c=0;c<o.length;c++){var O,f=o[c],E=!1,R=this._findCol(f.textContent);R?E=!0:R={title:f.textContent.trim()},R.field||(R.field=f.textContent.trim().toLowerCase().replace(" ","_")),(O=f.getAttribute("width"))&&!R.width&&(R.width=O),this._extractOptions(f,R,qu.prototype.defaultOptionList),this.fieldIndex[c]=R.field,R.field==this.table.options.index&&(this.hasIndex=!0),E||this.table.options.columns.push(R)}}_generateBlankHeaders(o,a){for(var c=0;c<o.length;c++){var f=o[c],E={title:"",field:"col"+c};this.fieldIndex[c]=E.field;var R=f.getAttribute("width");R&&(E.width=R),this.table.options.columns.push(E)}}}return g.moduleName="htmlTableImport",g})(),$f=(()=>{class g extends bo{constructor(o){super(o),this.eventMap={rowClick:"row-click",rowDblClick:"row-dblclick",rowContext:"row-contextmenu",rowMouseEnter:"row-mouseenter",rowMouseLeave:"row-mouseleave",rowMouseOver:"row-mouseover",rowMouseOut:"row-mouseout",rowMouseMove:"row-mousemove",rowTap:"row",rowDblTap:"row",rowTapHold:"row",cellClick:"cell-click",cellDblClick:"cell-dblclick",cellContext:"cell-contextmenu",cellMouseEnter:"cell-mouseenter",cellMouseLeave:"cell-mouseleave",cellMouseOver:"cell-mouseover",cellMouseOut:"cell-mouseout",cellMouseMove:"cell-mousemove",cellTap:"cell",cellDblTap:"cell",cellTapHold:"cell",headerClick:"column-click",headerDblClick:"column-dblclick",headerContext:"column-contextmenu",headerMouseEnter:"column-mouseenter",headerMouseLeave:"column-mouseleave",headerMouseOver:"column-mouseover",headerMouseOut:"column-mouseout",headerMouseMove:"column-mousemove",headerTap:"column",headerDblTap:"column",headerTapHold:"column",groupClick:"group-click",groupDblClick:"group-dblclick",groupContext:"group-contextmenu",groupMouseEnter:"group-mouseenter",groupMouseLeave:"group-mouseleave",groupMouseOver:"group-mouseover",groupMouseOut:"group-mouseout",groupMouseMove:"group-mousemove",groupTap:"group",groupDblTap:"group",groupTapHold:"group"},this.subscribers={},this.touchSubscribers={},this.columnSubscribers={},this.touchWatchers={row:{tap:null,tapDbl:null,tapHold:null},cell:{tap:null,tapDbl:null,tapHold:null},column:{tap:null,tapDbl:null,tapHold:null}},this.registerColumnOption("headerClick"),this.registerColumnOption("headerDblClick"),this.registerColumnOption("headerContext"),this.registerColumnOption("headerMouseEnter"),this.registerColumnOption("headerMouseLeave"),this.registerColumnOption("headerMouseOver"),this.registerColumnOption("headerMouseOut"),this.registerColumnOption("headerMouseMove"),this.registerColumnOption("headerTap"),this.registerColumnOption("headerDblTap"),this.registerColumnOption("headerTapHold"),this.registerColumnOption("cellClick"),this.registerColumnOption("cellDblClick"),this.registerColumnOption("cellContext"),this.registerColumnOption("cellMouseEnter"),this.registerColumnOption("cellMouseLeave"),this.registerColumnOption("cellMouseOver"),this.registerColumnOption("cellMouseOut"),this.registerColumnOption("cellMouseMove"),this.registerColumnOption("cellTap"),this.registerColumnOption("cellDblTap"),this.registerColumnOption("cellTapHold")}initialize(){this.initializeExternalEvents(),this.subscribe("column-init",this.initializeColumn.bind(this)),this.subscribe("cell-dblclick",this.cellContentsSelectionFixer.bind(this))}cellContentsSelectionFixer(o,a){if(!this.table.modExists("edit")||this.table.modules.edit.currentCell!==this){o.preventDefault();try{if(document.selection)(c=document.body.createTextRange()).moveToElementText(this.element),c.select();else if(window.getSelection){var c;(c=document.createRange()).selectNode(this.element),window.getSelection().removeAllRanges(),window.getSelection().addRange(c)}}catch(f){}}}initializeExternalEvents(){for(let o in this.eventMap)this.subscriptionChangeExternal(o,this.subscriptionChanged.bind(this,o))}subscriptionChanged(o,a){a?this.subscribers[o]||(this.eventMap[o].includes("-")?(this.subscribers[o]=this.handle.bind(this,o),this.subscribe(this.eventMap[o],this.subscribers[o])):this.subscribeTouchEvents(o)):this.eventMap[o].includes("-")?this.subscribers[o]&&!this.columnSubscribers[o]&&!this.subscribedExternal(o)&&(this.unsubscribe(this.eventMap[o],this.subscribers[o]),delete this.subscribers[o]):this.unsubscribeTouchEvents(o)}subscribeTouchEvents(o){var a=this.eventMap[o];this.touchSubscribers[a+"-touchstart"]||(this.touchSubscribers[a+"-touchstart"]=this.handleTouch.bind(this,a,"start"),this.touchSubscribers[a+"-touchend"]=this.handleTouch.bind(this,a,"end"),this.subscribe(a+"-touchstart",this.touchSubscribers[a+"-touchstart"]),this.subscribe(a+"-touchend",this.touchSubscribers[a+"-touchend"])),this.subscribers[o]=!0}unsubscribeTouchEvents(o){var a=!0,c=this.eventMap[o];if(this.subscribers[o]&&!this.subscribedExternal(o)){delete this.subscribers[o];for(let f in this.eventMap)this.eventMap[f]===c&&this.subscribers[f]&&(a=!1);a&&(this.unsubscribe(c+"-touchstart",this.touchSubscribers[c+"-touchstart"]),this.unsubscribe(c+"-touchend",this.touchSubscribers[c+"-touchend"]),delete this.touchSubscribers[c+"-touchstart"],delete this.touchSubscribers[c+"-touchend"])}}initializeColumn(o){var a=o.definition;for(let c in this.eventMap)a[c]&&(this.subscriptionChanged(c,!0),this.columnSubscribers[c]||(this.columnSubscribers[c]=[]),this.columnSubscribers[c].push(o))}handle(o,a,c){this.dispatchEvent(o,a,c)}handleTouch(o,a,c,f){var E=this.touchWatchers[o];switch("column"===o&&(o="header"),a){case"start":E.tap=!0,clearTimeout(E.tapHold),E.tapHold=setTimeout(()=>{clearTimeout(E.tapHold),E.tapHold=null,E.tap=null,clearTimeout(E.tapDbl),E.tapDbl=null,this.dispatchEvent(o+"TapHold",c,f)},1e3);break;case"end":E.tap&&(E.tap=null,this.dispatchEvent(o+"Tap",c,f)),E.tapDbl?(clearTimeout(E.tapDbl),E.tapDbl=null,this.dispatchEvent(o+"DblTap",c,f)):E.tapDbl=setTimeout(()=>{clearTimeout(E.tapDbl),E.tapDbl=null},300),clearTimeout(E.tapHold),E.tapHold=null}}dispatchEvent(o,a,c){var E,f=c.getComponent();this.columnSubscribers[o]&&(c instanceof xd?E=c.column.definition[o]:c instanceof qu&&(E=c.definition[o]),E&&E(a,f)),this.dispatchExternal(o,a,f)}}return g.moduleName="interaction",g})();var Hm={navPrev:"shift + 9",navNext:9,navUp:38,navDown:40,scrollPageUp:33,scrollPageDown:34,scrollToStart:36,scrollToEnd:35,undo:"ctrl + 90",redo:"ctrl + 89",copyToClipboard:"ctrl + 67"},Kp={keyBlock:function(g){g.stopPropagation(),g.preventDefault()},scrollPageUp:function(g){var l=this.table.rowManager,o=l.scrollTop-l.element.clientHeight;g.preventDefault(),l.displayRowsCount&&(o>=0?l.element.scrollTop=o:l.scrollToRow(l.getDisplayRows()[0])),this.table.element.focus()},scrollPageDown:function(g){var l=this.table.rowManager,o=l.scrollTop+l.element.clientHeight,a=l.element.scrollHeight;g.preventDefault(),l.displayRowsCount&&(o<=a?l.element.scrollTop=o:l.scrollToRow(l.getDisplayRows()[l.displayRowsCount-1])),this.table.element.focus()},scrollToStart:function(g){var l=this.table.rowManager;g.preventDefault(),l.displayRowsCount&&l.scrollToRow(l.getDisplayRows()[0]),this.table.element.focus()},scrollToEnd:function(g){var l=this.table.rowManager;g.preventDefault(),l.displayRowsCount&&l.scrollToRow(l.getDisplayRows()[l.displayRowsCount-1]),this.table.element.focus()},navPrev:function(g){this.dispatch("keybinding-nav-prev",g)},navNext:function(g){this.dispatch("keybinding-nav-next",g)},navLeft:function(g){this.dispatch("keybinding-nav-left",g)},navRight:function(g){this.dispatch("keybinding-nav-right",g)},navUp:function(g){this.dispatch("keybinding-nav-up",g)},navDown:function(g){this.dispatch("keybinding-nav-down",g)},undo:function(g){this.table.options.history&&this.table.modExists("history")&&this.table.modExists("edit")&&(this.table.modules.edit.currentCell||(g.preventDefault(),this.table.modules.history.undo()))},redo:function(g){this.table.options.history&&this.table.modExists("history")&&this.table.modExists("edit")&&(this.table.modules.edit.currentCell||(g.preventDefault(),this.table.modules.history.redo()))},copyToClipboard:function(g){this.table.modules.edit.currentCell||this.table.modExists("clipboard",!0)&&this.table.modules.clipboard.copy(!1,!0)}};let Zf=(()=>{class g extends bo{constructor(o){super(o),this.watchKeys=null,this.pressedKeys=null,this.keyupBinding=!1,this.keydownBinding=!1,this.registerTableOption("keybindings",[]),this.registerTableOption("tabEndNewRow",!1)}initialize(){var o=this.table.options.keybindings,a={};if(this.watchKeys={},this.pressedKeys=[],!1!==o){for(let c in g.bindings)a[c]=g.bindings[c];if(Object.keys(o).length)for(let c in o)a[c]=o[c];this.mapBindings(a),this.bindEvents()}this.subscribe("table-destroy",this.clearBindings.bind(this))}mapBindings(o){for(let a in o)g.actions[a]?o[a]&&("object"!=typeof o[a]&&(o[a]=[o[a]]),o[a].forEach(c=>{this.mapBinding(a,c)})):console.warn("Key Binding Error - no such action:",a)}mapBinding(o,a){var c={action:g.actions[o],keys:[],ctrl:!1,shift:!1,meta:!1};a.toString().toLowerCase().split(" ").join("").split("+").forEach(E=>{switch(E){case"ctrl":c.ctrl=!0;break;case"shift":c.shift=!0;break;case"meta":c.meta=!0;break;default:E=parseInt(E),c.keys.push(E),this.watchKeys[E]||(this.watchKeys[E]=[]),this.watchKeys[E].push(c)}})}bindEvents(){var o=this;this.keyupBinding=function(a){var c=a.keyCode,f=o.watchKeys[c];f&&(o.pressedKeys.push(c),f.forEach(function(E){o.checkBinding(a,E)}))},this.keydownBinding=function(a){var c=a.keyCode;if(o.watchKeys[c]){var E=o.pressedKeys.indexOf(c);E>-1&&o.pressedKeys.splice(E,1)}},this.table.element.addEventListener("keydown",this.keyupBinding),this.table.element.addEventListener("keyup",this.keydownBinding)}clearBindings(){this.keyupBinding&&this.table.element.removeEventListener("keydown",this.keyupBinding),this.keydownBinding&&this.table.element.removeEventListener("keyup",this.keydownBinding)}checkBinding(o,a){var c=!0;return o.ctrlKey==a.ctrl&&o.shiftKey==a.shift&&o.metaKey==a.meta&&(a.keys.forEach(f=>{-1==this.pressedKeys.indexOf(f)&&(c=!1)}),c&&a.action.call(this,o),!0)}}return g.moduleName="keybindings",g.bindings=Hm,g.actions=Kp,g})(),Qf=(()=>{class g extends bo{constructor(o){super(o),this.menuElements=[],this.blurEvent=this.hideMenu.bind(this),this.escEvent=this.escMenu.bind(this),this.nestedMenuBlock=!1,this.positionReversedX=!1,this.registerTableOption("rowContextMenu",!1),this.registerTableOption("rowClickMenu",!1),this.registerTableOption("groupContextMenu",!1),this.registerTableOption("groupClickMenu",!1),this.registerColumnOption("headerContextMenu"),this.registerColumnOption("headerMenu"),this.registerColumnOption("contextMenu"),this.registerColumnOption("clickMenu")}initialize(){this.subscribe("cell-layout",this.layoutCell.bind(this)),this.subscribe("column-init",this.initializeColumn.bind(this)),this.subscribe("row-init",this.initializeRow.bind(this))}layoutCell(o){(o.column.definition.contextMenu||o.column.definition.clickMenu)&&this.initializeCell(o)}initializeColumn(o){var a=o.definition;(a.headerContextMenu||a.headerClickMenu||a.headerMenu)&&this.initializeColumnHeader(o)}initializeColumnHeader(o){var a;o.definition.headerContextMenu&&(o.getElement().addEventListener("contextmenu",this.LoadMenuEvent.bind(this,o,o.definition.headerContextMenu)),this.tapHold(o,o.definition.headerContextMenu)),o.definition.headerMenu&&((a=document.createElement("span")).classList.add("tabulator-header-menu-button"),a.innerHTML="&vellip;",a.addEventListener("click",c=>{c.stopPropagation(),c.preventDefault(),this.LoadMenuEvent(o,o.definition.headerMenu,c)}),o.titleElement.insertBefore(a,o.titleElement.firstChild))}LoadMenuEvent(o,a,c){a="function"==typeof a?a.call(this.table,o.getComponent(),c):a,this.loadMenu(c,o,a)}tapHold(o,a){var c=o.getElement(),f=null,E=!1;c.addEventListener("touchstart",R=>{clearTimeout(f),E=!1,f=setTimeout(()=>{clearTimeout(f),f=null,E=!0,this.LoadMenuEvent(o,a,R)},1e3)},{passive:!0}),c.addEventListener("touchend",R=>{clearTimeout(f),f=null,E&&R.preventDefault()})}initializeCell(o){o.column.definition.contextMenu&&(o.getElement(!0).addEventListener("contextmenu",this.LoadMenuEvent.bind(this,o,o.column.definition.contextMenu)),this.tapHold(o,o.column.definition.contextMenu)),o.column.definition.clickMenu&&o.getElement(!0).addEventListener("click",this.LoadMenuEvent.bind(this,o,o.column.definition.clickMenu))}initializeRow(o){this.table.options.rowContextMenu&&(o.getElement().addEventListener("contextmenu",this.LoadMenuEvent.bind(this,o,this.table.options.rowContextMenu)),this.tapHold(o,this.table.options.rowContextMenu)),this.table.options.rowClickMenu&&o.getElement().addEventListener("click",this.LoadMenuEvent.bind(this,o,this.table.options.rowClickMenu))}initializeGroup(o){this.table.options.groupContextMenu&&(o.getElement().addEventListener("contextmenu",this.LoadMenuEvent.bind(this,o,this.table.options.groupContextMenu)),this.tapHold(o,this.table.options.groupContextMenu)),this.table.options.groupClickMenu&&o.getElement().addEventListener("click",this.LoadMenuEvent.bind(this,o,this.table.options.groupClickMenu))}loadMenu(o,a,c,f){var E=!(o instanceof MouseEvent),R=document.createElement("div");if(R.classList.add("tabulator-menu"),E||o.preventDefault(),c&&c.length){if(!f){if(this.nestedMenuBlock){if(this.isOpen())return}else this.nestedMenuBlock=setTimeout(()=>{this.nestedMenuBlock=!1},100);this.hideMenu(),this.menuElements=[]}c.forEach(O=>{var F=document.createElement("div"),J=O.label,dt=O.disabled;O.separator?F.classList.add("tabulator-menu-separator"):(F.classList.add("tabulator-menu-item"),"function"==typeof J&&(J=J.call(this.table,a.getComponent())),J instanceof Node?F.appendChild(J):F.innerHTML=J,"function"==typeof dt&&(dt=dt.call(this.table,a.getComponent())),dt?(F.classList.add("tabulator-menu-item-disabled"),F.addEventListener("click",Ft=>{Ft.stopPropagation()})):O.menu&&O.menu.length?F.addEventListener("click",Ft=>{Ft.stopPropagation(),this.hideOldSubMenus(R),this.loadMenu(Ft,a,O.menu,F)}):O.action&&F.addEventListener("click",Ft=>{O.action(Ft,a.getComponent())}),O.menu&&O.menu.length&&F.classList.add("tabulator-menu-item-submenu")),R.appendChild(F)}),R.addEventListener("click",O=>{this.hideMenu()}),this.menuElements.push(R),this.positionMenu(R,f,E,o)}}hideOldSubMenus(o){var a=this.menuElements.indexOf(o);if(a>-1)for(let f=this.menuElements.length-1;f>a;f--){var c=this.menuElements[f];c.parentNode&&c.parentNode.removeChild(c),this.menuElements.pop()}}positionMenu(o,a,c,f){var R,O,F,E=Math.max(document.body.offsetHeight,window.innerHeight);a?(R=(F=Ps.elOffset(a)).left+a.offsetWidth,O=F.top-1):(R=c?f.touches[0].pageX:f.pageX,O=c?f.touches[0].pageY:f.pageY,this.positionReversedX=!1),o.style.top=O+"px",o.style.left=R+"px",setTimeout(()=>{this.table.rowManager.element.addEventListener("scroll",this.blurEvent),document.body.addEventListener("click",this.blurEvent),document.body.addEventListener("contextmenu",this.blurEvent),window.addEventListener("resize",this.blurEvent),document.body.addEventListener("keydown",this.escEvent)},100),document.body.appendChild(o),O+o.offsetHeight>=E&&(o.style.top="",o.style.bottom=a?E-F.top-a.offsetHeight-1+"px":E-O+"px"),(R+o.offsetWidth>=document.body.offsetWidth||this.positionReversedX)&&(o.style.left="",o.style.right=a?document.documentElement.offsetWidth-F.left+"px":document.documentElement.offsetWidth-R+"px",this.positionReversedX=!0)}isOpen(){return!!this.menuElements.length}escMenu(o){27==o.keyCode&&this.hideMenu()}hideMenu(){this.menuElements.forEach(o=>{o.parentNode&&o.parentNode.removeChild(o)}),document.body.removeEventListener("keydown",this.escEvent),document.body.removeEventListener("click",this.blurEvent),document.body.removeEventListener("contextmenu",this.blurEvent),window.removeEventListener("resize",this.blurEvent),this.table.rowManager.element.removeEventListener("scroll",this.blurEvent)}}return g.moduleName="menu",g})(),qf=(()=>{class g extends bo{constructor(o){super(o),this.placeholderElement=this.createPlaceholderElement(),this.hoverElement=!1,this.checkTimeout=!1,this.checkPeriod=250,this.moving=!1,this.toCol=!1,this.toColAfter=!1,this.startX=0,this.autoScrollMargin=40,this.autoScrollStep=5,this.autoScrollTimeout=!1,this.touchMove=!1,this.moveHover=this.moveHover.bind(this),this.endMove=this.endMove.bind(this),this.registerTableOption("movableColumns",!1)}createPlaceholderElement(){var o=document.createElement("div");return o.classList.add("tabulator-col"),o.classList.add("tabulator-col-placeholder"),o}initialize(){this.subscribe("column-init",this.initializeColumn.bind(this))}initializeColumn(o){var f,a=this,c={};o.modules.frozen||(f=o.getElement(),c.mousemove=function(E){o.parent===a.moving.parent&&((a.touchMove?E.touches[0].pageX:E.pageX)-Ps.elOffset(f).left+a.table.columnManager.element.scrollLeft>o.getWidth()/2?(a.toCol!==o||!a.toColAfter)&&(f.parentNode.insertBefore(a.placeholderElement,f.nextSibling),a.moveColumn(o,!0)):(a.toCol!==o||a.toColAfter)&&(f.parentNode.insertBefore(a.placeholderElement,f),a.moveColumn(o,!1)))}.bind(a),f.addEventListener("mousedown",function(E){a.touchMove=!1,1===E.which&&(a.checkTimeout=setTimeout(function(){a.startMove(E,o)},a.checkPeriod))}),f.addEventListener("mouseup",function(E){1===E.which&&a.checkTimeout&&clearTimeout(a.checkTimeout)}),a.bindTouchEvents(o)),o.modules.moveColumn=c}bindTouchEvents(o){var f,E,R,O,F,J,a=o.getElement(),c=!1;a.addEventListener("touchstart",dt=>{this.checkTimeout=setTimeout(()=>{this.touchMove=!0,f=o.nextColumn(),R=f?f.getWidth()/2:0,E=o.prevColumn(),O=E?E.getWidth()/2:0,F=0,J=0,c=!1,this.startMove(dt,o)},this.checkPeriod)},{passive:!0}),a.addEventListener("touchmove",dt=>{var Ft,qt;this.moving&&(this.moveHover(dt),c||(c=dt.touches[0].pageX),(Ft=dt.touches[0].pageX-c)>0?f&&Ft-F>R&&(qt=f)!==o&&(c=dt.touches[0].pageX,qt.getElement().parentNode.insertBefore(this.placeholderElement,qt.getElement().nextSibling),this.moveColumn(qt,!0)):E&&-Ft-J>O&&(qt=E)!==o&&(c=dt.touches[0].pageX,qt.getElement().parentNode.insertBefore(this.placeholderElement,qt.getElement()),this.moveColumn(qt,!1)),qt&&(f=qt.nextColumn(),F=R,R=f?f.getWidth()/2:0,E=qt.prevColumn(),J=O,O=E?E.getWidth()/2:0))},{passive:!0}),a.addEventListener("touchend",dt=>{this.checkTimeout&&clearTimeout(this.checkTimeout),this.moving&&this.endMove(dt)})}startMove(o,a){var c=a.getElement(),f=this.table.columnManager.getElement(),E=this.table.columnManager.getHeadersElement();this.moving=a,this.startX=(this.touchMove?o.touches[0].pageX:o.pageX)-Ps.elOffset(c).left,this.table.element.classList.add("tabulator-block-select"),this.placeholderElement.style.width=a.getWidth()+"px",this.placeholderElement.style.height=a.getHeight()+"px",c.parentNode.insertBefore(this.placeholderElement,c),c.parentNode.removeChild(c),this.hoverElement=c.cloneNode(!0),this.hoverElement.classList.add("tabulator-moving"),this.table.columnManager.getElement().appendChild(this.hoverElement),this.hoverElement.style.left="0",this.hoverElement.style.bottom=f.clientHeight-E.offsetHeight+"px",this.touchMove||(this._bindMouseMove(),document.body.addEventListener("mousemove",this.moveHover),document.body.addEventListener("mouseup",this.endMove)),this.moveHover(o)}_bindMouseMove(){this.table.columnManager.columnsByIndex.forEach(function(o){o.modules.moveColumn.mousemove&&o.getElement().addEventListener("mousemove",o.modules.moveColumn.mousemove)})}_unbindMouseMove(){this.table.columnManager.columnsByIndex.forEach(function(o){o.modules.moveColumn.mousemove&&o.getElement().removeEventListener("mousemove",o.modules.moveColumn.mousemove)})}moveColumn(o,a){var c=this.moving.getCells();this.toCol=o,this.toColAfter=a,a?o.getCells().forEach(function(f,E){var R=f.getElement(!0);R.parentNode&&c[E]&&R.parentNode.insertBefore(c[E].getElement(),R.nextSibling)}):o.getCells().forEach(function(f,E){var R=f.getElement(!0);R.parentNode&&c[E]&&R.parentNode.insertBefore(c[E].getElement(),R)})}endMove(o){(1===o.which||this.touchMove)&&(this._unbindMouseMove(),this.placeholderElement.parentNode.insertBefore(this.moving.getElement(),this.placeholderElement.nextSibling),this.placeholderElement.parentNode.removeChild(this.placeholderElement),this.hoverElement.parentNode.removeChild(this.hoverElement),this.table.element.classList.remove("tabulator-block-select"),this.toCol&&this.table.columnManager.moveColumnActual(this.moving,this.toCol,this.toColAfter),this.moving=!1,this.toCol=!1,this.toColAfter=!1,this.touchMove||(document.body.removeEventListener("mousemove",this.moveHover),document.body.removeEventListener("mouseup",this.endMove)))}moveHover(o){var E,a=this.table.columnManager.getElement(),c=a.scrollLeft,f=(this.touchMove?o.touches[0].pageX:o.pageX)-Ps.elOffset(a).left+c;this.hoverElement.style.left=f-this.startX+"px",f-c<this.autoScrollMargin&&(this.autoScrollTimeout||(this.autoScrollTimeout=setTimeout(()=>{E=Math.max(0,c-5),this.table.rowManager.getElement().scrollLeft=E,this.autoScrollTimeout=!1},1))),c+a.clientWidth-f<this.autoScrollMargin&&(this.autoScrollTimeout||(this.autoScrollTimeout=setTimeout(()=>{E=Math.min(a.clientWidth,c+5),this.table.rowManager.getElement().scrollLeft=E,this.autoScrollTimeout=!1},1)))}}return g.moduleName="moveColumn",g})();class id extends bo{constructor(l){super(l),this.placeholderElement=this.createPlaceholderElement(),this.hoverElement=!1,this.checkTimeout=!1,this.checkPeriod=150,this.moving=!1,this.toRow=!1,this.toRowAfter=!1,this.hasHandle=!1,this.startY=0,this.startX=0,this.moveHover=this.moveHover.bind(this),this.endMove=this.endMove.bind(this),this.tableRowDropEvent=!1,this.touchMove=!1,this.connection=!1,this.connectionSelectorsTables=!1,this.connectionSelectorsElements=!1,this.connectionElements=[],this.connections=[],this.connectedTable=!1,this.connectedRow=!1,this.registerTableOption("movableRows",!1),this.registerTableOption("movableRowsConnectedTables",!1),this.registerTableOption("movableRowsConnectedElements",!1),this.registerTableOption("movableRowsSender",!1),this.registerTableOption("movableRowsReceiver","insert"),this.registerColumnOption("rowHandle")}createPlaceholderElement(){var l=document.createElement("div");return l.classList.add("tabulator-row"),l.classList.add("tabulator-row-placeholder"),l}initialize(){this.table.options.movableRows&&(this.connectionSelectorsTables=this.table.options.movableRowsConnectedTables,this.connectionSelectorsElements=this.table.options.movableRowsConnectedElements,this.connection=this.connectionSelectorsTables||this.connectionSelectorsElements,this.subscribe("cell-init",this.initializeCell.bind(this)),this.subscribe("column-init",this.initializeColumn.bind(this)),this.subscribe("row-init",this.initializeRow.bind(this)))}initializeGroupHeader(l){var o=this,a={};a.mouseup=function(c){o.tableRowDrop(c,row)}.bind(o),a.mousemove=function(c){if(c.pageY-Ps.elOffset(l.element).top+o.table.rowManager.element.scrollTop>l.getHeight()/2)o.toRow===l&&o.toRowAfter||((f=l.getElement()).parentNode.insertBefore(o.placeholderElement,f.nextSibling),o.moveRow(l,!0));else if(o.toRow!==l||o.toRowAfter){var f;(f=l.getElement()).previousSibling&&(f.parentNode.insertBefore(o.placeholderElement,f),o.moveRow(l,!1))}}.bind(o),l.modules.moveRow=a}initializeRow(l){var c,o=this,a={};a.mouseup=function(f){o.tableRowDrop(f,l)}.bind(o),a.mousemove=function(f){var E=l.getElement();f.pageY-Ps.elOffset(E).top+o.table.rowManager.element.scrollTop>l.getHeight()/2?(o.toRow!==l||!o.toRowAfter)&&(E.parentNode.insertBefore(o.placeholderElement,E.nextSibling),o.moveRow(l,!0)):(o.toRow!==l||o.toRowAfter)&&(E.parentNode.insertBefore(o.placeholderElement,E),o.moveRow(l,!1))}.bind(o),this.hasHandle||((c=l.getElement()).addEventListener("mousedown",function(f){1===f.which&&(o.checkTimeout=setTimeout(function(){o.startMove(f,l)},o.checkPeriod))}),c.addEventListener("mouseup",function(f){1===f.which&&o.checkTimeout&&clearTimeout(o.checkTimeout)}),this.bindTouchEvents(l,l.getElement())),l.modules.moveRow=a}initializeColumn(l){l.definition.rowHandle&&!1!==this.table.options.movableRows&&(this.hasHandle=!0)}initializeCell(l){if(l.column.definition.rowHandle&&!1!==this.table.options.movableRows){var o=this,a=l.getElement(!0);a.addEventListener("mousedown",function(c){1===c.which&&(o.checkTimeout=setTimeout(function(){o.startMove(c,l.row)},o.checkPeriod))}),a.addEventListener("mouseup",function(c){1===c.which&&o.checkTimeout&&clearTimeout(o.checkTimeout)}),this.bindTouchEvents(l.row,a)}}bindTouchEvents(l,o){var c,f,E,R,O,F,a=!1;o.addEventListener("touchstart",J=>{this.checkTimeout=setTimeout(()=>{this.touchMove=!0,c=l.nextRow(),E=c?c.getHeight()/2:0,f=l.prevRow(),R=f?f.getHeight()/2:0,O=0,F=0,a=!1,this.startMove(J,l)},this.checkPeriod)},{passive:!0}),o.addEventListener("touchmove",J=>{var dt,Ft;this.moving&&(J.preventDefault(),this.moveHover(J),a||(a=J.touches[0].pageY),(dt=J.touches[0].pageY-a)>0?c&&dt-O>E&&(Ft=c)!==l&&(a=J.touches[0].pageY,Ft.getElement().parentNode.insertBefore(this.placeholderElement,Ft.getElement().nextSibling),this.moveRow(Ft,!0)):f&&-dt-F>R&&(Ft=f)!==l&&(a=J.touches[0].pageY,Ft.getElement().parentNode.insertBefore(this.placeholderElement,Ft.getElement()),this.moveRow(Ft,!1)),Ft&&(c=Ft.nextRow(),O=E,E=c?c.getHeight()/2:0,f=Ft.prevRow(),F=R,R=f?f.getHeight()/2:0))}),o.addEventListener("touchend",J=>{this.checkTimeout&&clearTimeout(this.checkTimeout),this.moving&&(this.endMove(J),this.touchMove=!1)})}_bindMouseMove(){this.table.rowManager.getDisplayRows().forEach(l=>{("row"===l.type||"group"===l.type)&&l.modules.moveRow&&l.modules.moveRow.mousemove&&l.getElement().addEventListener("mousemove",l.modules.moveRow.mousemove)})}_unbindMouseMove(){this.table.rowManager.getDisplayRows().forEach(l=>{("row"===l.type||"group"===l.type)&&l.modules.moveRow&&l.modules.moveRow.mousemove&&l.getElement().removeEventListener("mousemove",l.modules.moveRow.mousemove)})}startMove(l,o){var a=o.getElement();this.setStartPosition(l,o),this.moving=o,this.table.element.classList.add("tabulator-block-select"),this.placeholderElement.style.width=o.getWidth()+"px",this.placeholderElement.style.height=o.getHeight()+"px",this.connection?(this.table.element.classList.add("tabulator-movingrow-sending"),this.connectToTables(o)):(a.parentNode.insertBefore(this.placeholderElement,a),a.parentNode.removeChild(a)),this.hoverElement=a.cloneNode(!0),this.hoverElement.classList.add("tabulator-moving"),this.connection?(document.body.appendChild(this.hoverElement),this.hoverElement.style.left="0",this.hoverElement.style.top="0",this.hoverElement.style.width=this.table.element.clientWidth+"px",this.hoverElement.style.whiteSpace="nowrap",this.hoverElement.style.overflow="hidden",this.hoverElement.style.pointerEvents="none"):(this.table.rowManager.getTableElement().appendChild(this.hoverElement),this.hoverElement.style.left="0",this.hoverElement.style.top="0",this._bindMouseMove()),document.body.addEventListener("mousemove",this.moveHover),document.body.addEventListener("mouseup",this.endMove),this.moveHover(l)}setStartPosition(l,o){var f,E,a=this.touchMove?l.touches[0].pageX:l.pageX,c=this.touchMove?l.touches[0].pageY:l.pageY;f=o.getElement(),this.connection?(E=f.getBoundingClientRect(),this.startX=E.left-a+window.pageXOffset,this.startY=E.top-c+window.pageYOffset):this.startY=c-f.getBoundingClientRect().top}endMove(l){(!l||1===l.which||this.touchMove)&&(this._unbindMouseMove(),this.connection||(this.placeholderElement.parentNode.insertBefore(this.moving.getElement(),this.placeholderElement.nextSibling),this.placeholderElement.parentNode.removeChild(this.placeholderElement)),this.hoverElement.parentNode.removeChild(this.hoverElement),this.table.element.classList.remove("tabulator-block-select"),this.toRow&&this.table.rowManager.moveRow(this.moving,this.toRow,this.toRowAfter),this.moving=!1,this.toRow=!1,this.toRowAfter=!1,document.body.removeEventListener("mousemove",this.moveHover),document.body.removeEventListener("mouseup",this.endMove),this.connection&&(this.table.element.classList.remove("tabulator-movingrow-sending"),this.disconnectFromTables()))}moveRow(l,o){this.toRow=l,this.toRowAfter=o}moveHover(l){this.connection?this.moveHoverConnections.call(this,l):this.moveHoverTable.call(this,l)}moveHoverTable(l){var o=this.table.rowManager.getElement(),a=o.scrollTop,c=(this.touchMove?l.touches[0].pageY:l.pageY)-o.getBoundingClientRect().top+a;this.hoverElement.style.top=c-this.startY+"px"}moveHoverConnections(l){this.hoverElement.style.left=this.startX+(this.touchMove?l.touches[0].pageX:l.pageX)+"px",this.hoverElement.style.top=this.startY+(this.touchMove?l.touches[0].pageY:l.pageY)+"px"}elementRowDrop(l,o,a){this.dispatchExternal("movableRowsElementDrop",l,o,!!a&&a.getComponent())}connectToTables(l){var o;this.connectionSelectorsTables&&(o=this.commsConnections(this.connectionSelectorsTables),this.dispatchExternal("movableRowsSendingStart",o),this.commsSend(this.connectionSelectorsTables,"moveRow","connect",{row:l})),this.connectionSelectorsElements&&(this.connectionElements=[],Array.isArray(this.connectionSelectorsElements)||(this.connectionSelectorsElements=[this.connectionSelectorsElements]),this.connectionSelectorsElements.forEach(a=>{"string"==typeof a?this.connectionElements=this.connectionElements.concat(Array.prototype.slice.call(document.querySelectorAll(a))):this.connectionElements.push(a)}),this.connectionElements.forEach(a=>{var c=f=>{this.elementRowDrop(f,a,this.moving)};a.addEventListener("mouseup",c),a.tabulatorElementDropEvent=c,a.classList.add("tabulator-movingrow-receiving")}))}disconnectFromTables(){var l;this.connectionSelectorsTables&&(l=this.commsConnections(this.connectionSelectorsTables),this.dispatchExternal("movableRowsSendingStop",l),this.commsSend(this.connectionSelectorsTables,"moveRow","disconnect")),this.connectionElements.forEach(o=>{o.classList.remove("tabulator-movingrow-receiving"),o.removeEventListener("mouseup",o.tabulatorElementDropEvent),delete o.tabulatorElementDropEvent})}connect(l,o){return this.connectedTable?(console.warn("Move Row Error - Table cannot accept connection, already connected to table:",this.connectedTable),!1):(this.connectedTable=l,this.connectedRow=o,this.table.element.classList.add("tabulator-movingrow-receiving"),this.table.rowManager.getDisplayRows().forEach(a=>{"row"===a.type&&a.modules.moveRow&&a.modules.moveRow.mouseup&&a.getElement().addEventListener("mouseup",a.modules.moveRow.mouseup)}),this.tableRowDropEvent=this.tableRowDrop.bind(this),this.table.element.addEventListener("mouseup",this.tableRowDropEvent),this.dispatchExternal("movableRowsReceivingStart",o,l),!0)}disconnect(l){l===this.connectedTable?(this.connectedTable=!1,this.connectedRow=!1,this.table.element.classList.remove("tabulator-movingrow-receiving"),this.table.rowManager.getDisplayRows().forEach(o=>{"row"===o.type&&o.modules.moveRow&&o.modules.moveRow.mouseup&&o.getElement().removeEventListener("mouseup",o.modules.moveRow.mouseup)}),this.table.element.removeEventListener("mouseup",this.tableRowDropEvent),this.dispatchExternal("movableRowsReceivingStop",l)):console.warn("Move Row Error - trying to disconnect from non connected table")}dropComplete(l,o,a){var c=!1;if(a){switch(typeof this.table.options.movableRowsSender){case"string":c=this.senders[this.table.options.movableRowsSender];break;case"function":c=this.table.options.movableRowsSender}c?c.call(this,this.moving.getComponent(),o?o.getComponent():void 0,l):this.table.options.movableRowsSender&&console.warn("Mover Row Error - no matching sender found:",this.table.options.movableRowsSender),this.dispatchExternal("movableRowsSent",this.moving.getComponent(),o?o.getComponent():void 0,l)}else this.dispatchExternal("movableRowsSentFailed",this.moving.getComponent(),o?o.getComponent():void 0,l);this.endMove()}tableRowDrop(l,o){var a=!1,c=!1;switch(l.stopImmediatePropagation(),typeof this.table.options.movableRowsReceiver){case"string":a=this.receivers[this.table.options.movableRowsReceiver];break;case"function":a=this.table.options.movableRowsReceiver}a?c=a.call(this,this.connectedRow.getComponent(),o?o.getComponent():void 0,this.connectedTable):console.warn("Mover Row Error - no matching receiver found:",this.table.options.movableRowsReceiver),this.dispatchExternal(c?"movableRowsReceived":"movableRowsReceivedFailed",this.connectedRow.getComponent(),o?o.getComponent():void 0,this.connectedTable),this.commsSend(this.connectedTable,"moveRow","dropcomplete",{row:o,success:c})}commsReceived(l,o,a){switch(o){case"connect":return this.connect(l,a.row);case"disconnect":return this.disconnect(l);case"dropcomplete":return this.dropComplete(l,a.row,a.success)}}}id.prototype.receivers={insert:function(g,l,o){return this.table.addRow(g.getData(),void 0,l),!0},add:function(g,l,o){return this.table.addRow(g.getData()),!0},update:function(g,l,o){return!!l&&(l.update(g.getData()),!0)},replace:function(g,l,o){return!!l&&(this.table.addRow(g.getData(),void 0,l),l.delete(),!0)}},id.prototype.senders={delete:function(g,l,o){g.delete()}},id.moduleName="moveRow";var tg={};let eg=(()=>{class g extends bo{constructor(o){super(o),this.allowedTypes=["","data","edit","clipboard"],this.enabled=!0,this.registerColumnOption("mutator"),this.registerColumnOption("mutatorParams"),this.registerColumnOption("mutatorData"),this.registerColumnOption("mutatorDataParams"),this.registerColumnOption("mutatorEdit"),this.registerColumnOption("mutatorEditParams"),this.registerColumnOption("mutatorClipboard"),this.registerColumnOption("mutatorClipboardParams")}initialize(){this.subscribe("cell-value-changing",this.transformCell.bind(this)),this.subscribe("column-layout",this.initializeColumn.bind(this)),this.subscribe("row-data-init-before",this.rowDataChanged.bind(this)),this.subscribe("row-data-changing",this.rowDataChanged.bind(this))}rowDataChanged(o,a,c){return this.transformRow(a,"data",c)}initializeColumn(o){var a=!1,c={};this.allowedTypes.forEach(f=>{var R,E="mutator"+(f.charAt(0).toUpperCase()+f.slice(1));o.definition[E]&&(R=this.lookupMutator(o.definition[E]))&&(a=!0,c[E]={mutator:R,params:o.definition[E+"Params"]||{}})}),a&&(o.modules.mutate=c)}lookupMutator(o){var a=!1;switch(typeof o){case"string":g.mutators[o]?a=g.mutators[o]:console.warn("Mutator Error - No such mutator found, ignoring: ",o);break;case"function":a=o}return a}transformRow(o,a,c){var E,f="mutator"+(a.charAt(0).toUpperCase()+a.slice(1));return this.enabled&&this.table.columnManager.traverse(R=>{var O,F,J;R.modules.mutate&&(O=R.modules.mutate[f]||R.modules.mutate.mutator||!1)&&(E=R.getFieldValue(void 0!==c?c:o),("data"==a||void 0!==E)&&(J=R.getComponent(),F="function"==typeof O.params?O.params(E,o,a,J):O.params,R.setFieldValue(o,O.mutator(E,o,a,F,J))))}),o}transformCell(o,a){if(o.column.modules.mutate){var c=o.column.modules.mutate.mutatorEdit||o.column.modules.mutate.mutator||!1,f={};if(c)return f=Object.assign(f,o.row.getData()),o.column.setFieldValue(f,a),c.mutator(a,f,"edit",c.params,o.getComponent())}return a}enable(){this.enabled=!0}disable(){this.enabled=!1}}return g.moduleName="mutator",g.mutators=tg,g})(),Fd=(()=>{class g extends bo{constructor(o){super(o),this.mode="local",this.progressiveLoad=!1,this.size=0,this.page=1,this.count=5,this.max=1,this.displayIndex=0,this.initialLoad=!0,this.dataChanging=!1,this.pageSizes=[],this.dataReceivedNames={},this.dataSentNames={},this.registerTableOption("pagination",!1),this.registerTableOption("paginationMode","local"),this.registerTableOption("paginationSize",!1),this.registerTableOption("paginationInitialPage",1),this.registerTableOption("paginationButtonCount",5),this.registerTableOption("paginationSizeSelector",!1),this.registerTableOption("paginationElement",!1),this.registerTableOption("paginationAddRow","page"),this.registerTableOption("progressiveLoad",!1),this.registerTableOption("progressiveLoadDelay",0),this.registerTableOption("progressiveLoadScrollMargin",0),this.registerTableFunction("setMaxPage",this.setMaxPage.bind(this)),this.registerTableFunction("setPage",this.setPage.bind(this)),this.registerTableFunction("setPageToRow",this.userSetPageToRow.bind(this)),this.registerTableFunction("setPageSize",this.userSetPageSize.bind(this)),this.registerTableFunction("getPageSize",this.getPageSize.bind(this)),this.registerTableFunction("previousPage",this.previousPage.bind(this)),this.registerTableFunction("nextPage",this.nextPage.bind(this)),this.registerTableFunction("getPage",this.getPage.bind(this)),this.registerTableFunction("getPageMax",this.getPageMax.bind(this)),this.registerComponentFunction("row","pageTo",this.setPageToRow.bind(this))}initialize(){this.table.options.pagination?(this.subscribe("row-deleted",this.rowsUpdated.bind(this)),this.subscribe("row-adding-position",this.rowAddingPosition.bind(this)),this.subscribe("row-added",this.rowsUpdated.bind(this)),this.subscribe("data-processed",this.initialLoadComplete.bind(this)),this.subscribe("table-built",this.calculatePageSizes.bind(this)),"remote"===this.table.options.paginationMode&&(this.subscribe("data-params",this.remotePageParams.bind(this)),this.subscribe("data-loaded",this._parseRemoteData.bind(this))),this.table.options.progressiveLoad&&console.error("Progressive Load Error - Pagination and progressive load cannot be used at the same time"),this.registerDisplayHandler(this.restOnRenderBefore.bind(this),40),this.registerDisplayHandler(this.getRows.bind(this),50),this.createElements(),this.initializePaginator()):this.table.options.progressiveLoad&&(this.subscribe("data-params",this.remotePageParams.bind(this)),this.subscribe("data-loaded",this._parseRemoteData.bind(this)),this.subscribe("table-built",this.calculatePageSizes.bind(this)),this.initializeProgressive(this.table.options.progressiveLoad),"scroll"===this.table.options.progressiveLoad&&this.subscribe("scroll-vertical",this.scrollVertical.bind(this)))}rowAddingPosition(o,a){var E,c=this.table.rowManager,f=c.getDisplayRows();return a?f.length?E=f[0]:c.activeRows.length&&(E=c.activeRows[c.activeRows.length-1],a=!1):f.length&&(E=f[f.length-1],a=!(f.length<this.size)),{index:E,top:a}}calculatePageSizes(){var o,a;this.table.options.paginationSize?this.size=this.table.options.paginationSize:((o=document.createElement("div")).classList.add("tabulator-row"),o.style.visibility="hidden",(a=document.createElement("div")).classList.add("tabulator-cell"),a.innerHTML="Page Row Test",o.appendChild(a),this.table.rowManager.getTableElement().appendChild(o),this.size=Math.floor(this.table.rowManager.getElement().clientHeight/o.offsetHeight),this.table.rowManager.getTableElement().removeChild(o)),this.generatePageSizeSelectList()}initialLoadComplete(){this.initialLoad=!1}remotePageParams(o,a,c,f){return this.initialLoad||(this.progressiveLoad&&!c||!this.progressiveLoad&&!this.dataChanging)&&this.reset(!0),f.page=this.page,this.size&&(f.size=this.size),f}userSetPageToRow(o){return this.table.options.pagination&&(o=this.rowManager.findRow(o))?this.setPageToRow(o):Promise.reject()}userSetPageSize(o){return!!this.table.options.pagination&&(this.setPageSize(o),this.setPage(1))}scrollVertical(o,a){var c;!a&&!this.table.dataLoader.loading&&(c=this.table.rowManager.getElement()).scrollHeight-c.clientHeight-o<(this.table.options.progressiveLoadScrollMargin||2*c.clientHeight)&&this.nextPage()}restOnRenderBefore(o,a){return a||"local"===this.mode&&this.reset(),o}rowsUpdated(){this.refreshData(!0,"all")}createElements(){var o;this.element=document.createElement("span"),this.element.classList.add("tabulator-paginator"),this.pagesElement=document.createElement("span"),this.pagesElement.classList.add("tabulator-pages"),(o=document.createElement("button")).classList.add("tabulator-page"),o.setAttribute("type","button"),o.setAttribute("role","button"),o.setAttribute("aria-label",""),o.setAttribute("title",""),this.firstBut=o.cloneNode(!0),this.firstBut.setAttribute("data-page","first"),this.prevBut=o.cloneNode(!0),this.prevBut.setAttribute("data-page","prev"),this.nextBut=o.cloneNode(!0),this.nextBut.setAttribute("data-page","next"),this.lastBut=o.cloneNode(!0),this.lastBut.setAttribute("data-page","last"),this.table.options.paginationSizeSelector&&(this.pageSizeSelect=document.createElement("select"),this.pageSizeSelect.classList.add("tabulator-page-size"))}generatePageSizeSelectList(){var o=[];if(this.pageSizeSelect){if(Array.isArray(this.table.options.paginationSizeSelector))this.pageSizes=o=this.table.options.paginationSizeSelector,-1==this.pageSizes.indexOf(this.size)&&o.unshift(this.size);else if(-1==this.pageSizes.indexOf(this.size)){o=[];for(let a=1;a<5;a++)o.push(this.size*a);this.pageSizes=o}else o=this.pageSizes;for(;this.pageSizeSelect.firstChild;)this.pageSizeSelect.removeChild(this.pageSizeSelect.firstChild);o.forEach(a=>{var c=document.createElement("option");c.value=a,!0===a?this.langBind("pagination|all",function(f){c.innerHTML=f}):c.innerHTML=a,this.pageSizeSelect.appendChild(c)}),this.pageSizeSelect.value=this.size}}initializePaginator(o){var a;o||(this.langBind("pagination|first",c=>{this.firstBut.innerHTML=c}),this.langBind("pagination|first_title",c=>{this.firstBut.setAttribute("aria-label",c),this.firstBut.setAttribute("title",c)}),this.langBind("pagination|prev",c=>{this.prevBut.innerHTML=c}),this.langBind("pagination|prev_title",c=>{this.prevBut.setAttribute("aria-label",c),this.prevBut.setAttribute("title",c)}),this.langBind("pagination|next",c=>{this.nextBut.innerHTML=c}),this.langBind("pagination|next_title",c=>{this.nextBut.setAttribute("aria-label",c),this.nextBut.setAttribute("title",c)}),this.langBind("pagination|last",c=>{this.lastBut.innerHTML=c}),this.langBind("pagination|last_title",c=>{this.lastBut.setAttribute("aria-label",c),this.lastBut.setAttribute("title",c)}),this.firstBut.addEventListener("click",()=>{this.setPage(1)}),this.prevBut.addEventListener("click",()=>{this.previousPage()}),this.nextBut.addEventListener("click",()=>{this.nextPage()}),this.lastBut.addEventListener("click",()=>{this.setPage(this.max)}),this.table.options.paginationElement&&(this.element=this.table.options.paginationElement),this.pageSizeSelect&&(a=document.createElement("label"),this.langBind("pagination|page_size",c=>{this.pageSizeSelect.setAttribute("aria-label",c),this.pageSizeSelect.setAttribute("title",c),a.innerHTML=c}),this.element.appendChild(a),this.element.appendChild(this.pageSizeSelect),this.pageSizeSelect.addEventListener("change",c=>{this.setPageSize("true"==this.pageSizeSelect.value||this.pageSizeSelect.value),this.setPage(1)})),this.element.appendChild(this.firstBut),this.element.appendChild(this.prevBut),this.element.appendChild(this.pagesElement),this.element.appendChild(this.nextBut),this.element.appendChild(this.lastBut),!this.table.options.paginationElement&&!o&&this.table.footerManager.append(this.element,this),this.page=this.table.options.paginationInitialPage,this.count=this.table.options.paginationButtonCount),this.mode=this.table.options.paginationMode}initializeProgressive(o){this.initializePaginator(!0),this.mode="progressive_"+o,this.progressiveLoad=!0}trackChanges(){this.dispatch("page-changed")}setDisplayIndex(o){this.displayIndex=o}getDisplayIndex(){return this.displayIndex}setMaxRows(o){this.max=o?!0===this.size?1:Math.ceil(o/this.size):1,this.page>this.max&&(this.page=this.max)}reset(o){this.initialLoad||("local"==this.mode||o)&&(this.page=1)}setMaxPage(o){o=parseInt(o),this.max=o||1,this.page>this.max&&(this.page=this.max,this.trigger())}setPage(o){switch(o){case"first":return this.setPage(1);case"prev":return this.previousPage();case"next":return this.nextPage();case"last":return this.setPage(this.max)}return(o=parseInt(o))>0&&o<=this.max||"local"!==this.mode?(this.page=o,this.trackChanges(),this.trigger()):(console.warn("Pagination Error - Requested page is out of range of 1 - "+this.max+":",o),Promise.reject())}setPageToRow(o){var c=this.table.rowManager.getDisplayRows(this.displayIndex-1).indexOf(o);if(c>-1){var f=!0===this.size?1:Math.ceil((c+1)/this.size);return this.setPage(f)}return console.warn("Pagination Error - Requested row is not visible"),Promise.reject()}setPageSize(o){!0!==o&&(o=parseInt(o)),o>0&&(this.size=o),this.pageSizeSelect&&this.generatePageSizeSelectList(),this.trackChanges()}_setPageButtons(){let o=Math.floor((this.count-1)/2),a=Math.ceil((this.count-1)/2),c=this.max-this.page+o+1<this.count?this.max-this.count+1:Math.max(this.page-o,1),f=this.page<=a?Math.min(this.count,this.max):Math.min(this.page+a,this.max);for(;this.pagesElement.firstChild;)this.pagesElement.removeChild(this.pagesElement.firstChild);1==this.page?(this.firstBut.disabled=!0,this.prevBut.disabled=!0):(this.firstBut.disabled=!1,this.prevBut.disabled=!1),this.page==this.max?(this.lastBut.disabled=!0,this.nextBut.disabled=!0):(this.lastBut.disabled=!1,this.nextBut.disabled=!1);for(let E=c;E<=f;E++)E>0&&E<=this.max&&this.pagesElement.appendChild(this._generatePageButton(E));this.footerRedraw()}_generatePageButton(o){var a=document.createElement("button");return a.classList.add("tabulator-page"),o==this.page&&a.classList.add("active"),a.setAttribute("type","button"),a.setAttribute("role","button"),this.langBind("pagination|page_title",c=>{a.setAttribute("aria-label",c+" "+o),a.setAttribute("title",c+" "+o)}),a.setAttribute("data-page",o),a.textContent=o,a.addEventListener("click",c=>{this.setPage(o)}),a}previousPage(){return this.page>1?(this.page--,this.trackChanges(),this.trigger()):(console.warn("Pagination Error - Previous page would be less than page 1:",0),Promise.reject())}nextPage(){return this.page<this.max?(this.page++,this.trackChanges(),this.trigger()):(this.progressiveLoad||console.warn("Pagination Error - Next page would be greater than maximum page of "+this.max+":",this.max+1),Promise.reject())}getPage(){return this.page}getPageMax(){return this.max}getPageSize(o){return this.size}getMode(){return this.mode}getRows(o){var a,c,f;if("local"==this.mode){a=[],this.setMaxRows(o.length),!0===this.size?(c=0,f=o.length):f=(c=this.size*(this.page-1))+parseInt(this.size),this._setPageButtons();for(let E=c;E<f;E++)o[E]&&a.push(o[E]);return a}return this._setPageButtons(),o.slice(0)}trigger(){var o;switch(this.mode){case"local":return o=this.table.rowManager.scrollLeft,this.refreshData(),this.table.rowManager.scrollHorizontal(o),this.dispatchExternal("pageLoaded",this.getPage()),Promise.resolve();case"remote":return this.dataChanging=!0,this.reloadData(null).finally(()=>{this.dataChanging=!1});case"progressive_load":case"progressive_scroll":return this.reloadData(null,!0);default:return console.warn("Pagination Error - no such pagination mode:",this.mode),Promise.reject()}}_parseRemoteData(o){if(void 0===o.last_page&&console.warn("Remote Pagination Error - Server response missing '"+this.dataReceivedNames.last_page+"' property"),o.data){if(this.max=parseInt(o.last_page)||1,this.progressiveLoad){switch(this.mode){case"progressive_load":1==this.page?this.table.rowManager.setData(o.data,!1,1==this.page):this.table.rowManager.addRows(o.data),this.page<this.max&&setTimeout(()=>{this.nextPage()},this.table.options.progressiveLoadDelay);break;case"progressive_scroll":o=this.table.rowManager.getData().concat(o.data),this.table.rowManager.setData(o,1!==this.page,1==this.page),this.table.rowManager.element.scrollHeight<=this.table.rowManager.element.clientHeight+(this.table.options.progressiveLoadScrollMargin||2*this.table.rowManager.element.clientHeight)&&setTimeout(()=>{this.nextPage()})}return!1}this.dispatchExternal("pageLoaded",this.getPage())}else console.warn("Remote Pagination Error - Server response missing '"+this.dataReceivedNames.data+"' property");return o.data}footerRedraw(){var o=this.table.footerManager.element;Math.ceil(o.clientWidth)-o.scrollWidth<0?this.pagesElement.style.display="none":(this.pagesElement.style.display="",Math.ceil(o.clientWidth)-o.scrollWidth<0&&(this.pagesElement.style.display="none"))}}return g.moduleName="page",g})();var up={local:function(g,l){var o=localStorage.getItem(g+"-"+l);return!!o&&JSON.parse(o)},cookie:function(g,l){var f,E,o=document.cookie,a=g+"-"+l,c=o.indexOf(a+"=");return c>-1&&((f=(o=o.substr(c)).indexOf(";"))>-1&&(o=o.substr(0,f)),E=o.replace(a+"=","")),!!E&&JSON.parse(E)}},ig={local:function(g,l,o){localStorage.setItem(g+"-"+l,JSON.stringify(o))},cookie:function(g,l,o){var a=new Date;a.setDate(a.getDate()+1e4),document.cookie=g+"-"+l+"="+JSON.stringify(o)+"; expires="+a.toUTCString()}};let hp=(()=>{class g extends bo{constructor(o){super(o),this.mode="",this.id="",this.defWatcherBlock=!1,this.config={},this.readFunc=!1,this.writeFunc=!1,this.registerTableOption("persistence",!1),this.registerTableOption("persistenceID",""),this.registerTableOption("persistenceMode",!0),this.registerTableOption("persistenceReaderFunc",!1),this.registerTableOption("persistenceWriterFunc",!1)}localStorageTest(){var o="_tabulator_test";try{return window.localStorage.setItem(o,o),window.localStorage.removeItem(o),!0}catch(a){return!1}}initialize(){if(this.table.options.persistence){var c,o=this.table.options.persistenceMode,a=this.table.options.persistenceID;this.mode=!0!==o?o:this.localStorageTest()?"local":"cookie",this.table.options.persistenceReaderFunc?"function"==typeof this.table.options.persistenceReaderFunc?this.readFunc=this.table.options.persistenceReaderFunc:g.readers[this.table.options.persistenceReaderFunc]?this.readFunc=g.readers[this.table.options.persistenceReaderFunc]:console.warn("Persistence Read Error - invalid reader set",this.table.options.persistenceReaderFunc):g.readers[this.mode]?this.readFunc=g.readers[this.mode]:console.warn("Persistence Read Error - invalid reader set",this.mode),this.table.options.persistenceWriterFunc?"function"==typeof this.table.options.persistenceWriterFunc?this.writeFunc=this.table.options.persistenceWriterFunc:g.writers[this.table.options.persistenceWriterFunc]?this.writeFunc=g.writers[this.table.options.persistenceWriterFunc]:console.warn("Persistence Write Error - invalid reader set",this.table.options.persistenceWriterFunc):g.writers[this.mode]?this.writeFunc=g.writers[this.mode]:console.warn("Persistence Write Error - invalid writer set",this.mode),this.id="tabulator-"+(a||this.table.element.getAttribute("id")||""),this.config={sort:!0===this.table.options.persistence||this.table.options.persistence.sort,filter:!0===this.table.options.persistence||this.table.options.persistence.filter,group:!0===this.table.options.persistence||this.table.options.persistence.group,page:!0===this.table.options.persistence||this.table.options.persistence.page,columns:!0===this.table.options.persistence?["title","width","visible"]:this.table.options.persistence.columns},this.config.page&&(c=this.retreiveData("page"))&&(void 0!==c.paginationSize&&(!0===this.config.page||this.config.page.size)&&(this.table.options.paginationSize=c.paginationSize),void 0!==c.paginationInitialPage&&(!0===this.config.page||this.config.page.page)&&(this.table.options.paginationInitialPage=c.paginationInitialPage)),this.config.group&&(c=this.retreiveData("group"))&&(void 0!==c.groupBy&&(!0===this.config.group||this.config.group.groupBy)&&(this.table.options.groupBy=c.groupBy),void 0!==c.groupStartOpen&&(!0===this.config.group||this.config.group.groupStartOpen)&&(this.table.options.groupStartOpen=c.groupStartOpen),void 0!==c.groupHeader&&(!0===this.config.group||this.config.group.groupHeader)&&(this.table.options.groupHeader=c.groupHeader)),this.config.columns&&(this.table.options.columns=this.load("columns",this.table.options.columns),this.subscribe("column-init",this.initializeColumn.bind(this)),this.subscribe("column-show",this.save.bind(this,"columns")),this.subscribe("column-hide",this.save.bind(this,"columns")),this.subscribe("column-moved",this.save.bind(this,"columns")),this.subscribe("table-built",this.tableBuilt.bind(this),0)),this.subscribe("table-redraw",this.tableRedraw.bind(this)),this.subscribe("filter-changed",this.eventSave.bind(this,"filter")),this.subscribe("sort-changed",this.eventSave.bind(this,"sort")),this.subscribe("group-changed",this.eventSave.bind(this,"group")),this.subscribe("page-changed",this.eventSave.bind(this,"page")),this.subscribe("column-resized",this.eventSave.bind(this,"columns")),this.subscribe("layout-refreshed",this.eventSave.bind(this,"columns"))}this.registerTableFunction("getColumnLayout",this.getColumnLayout.bind(this)),this.registerTableFunction("setColumnLayout",this.setColumnLayout.bind(this))}eventSave(o){this.config[o]&&this.save(o)}tableBuilt(){var a,c;this.config.sort&&(a=this.load("sort"))&&(this.table.initialSort=a),this.config.filter&&(c=this.load("filter"))&&(this.table.initialFilter=c)}tableRedraw(o){o&&this.config.columns&&this.save("columns")}getColumnLayout(){return this.parseColumns(this.table.columnManager.getColumns())}setColumnLayout(o){return this.table.columnManager.setColumns(this.mergeDefinition(this.table.options.columns,o)),!0}initializeColumn(o){var a;this.config.columns&&(this.defWatcherBlock=!0,a=o.getDefinition(),(!0===this.config.columns?Object.keys(a):this.config.columns).forEach(f=>{var E=Object.getOwnPropertyDescriptor(a,f),R=a[f];E&&Object.defineProperty(a,f,{set:function(O){R=O,this.defWatcherBlock||this.save("columns"),E.set&&E.set(O)},get:function(){return E.get&&E.get(),R}})}),this.defWatcherBlock=!1)}load(o,a){var c=this.retreiveData(o);return a&&(c=c?this.mergeDefinition(a,c):a),c}retreiveData(o){return!!this.readFunc&&this.readFunc(this.id,o)}mergeDefinition(o,a){var c=[];return(a=a||[]).forEach((f,E)=>{var O,R=this._findColumn(o,f);R&&(!0===this.config.columns||null==this.config.columns?(O=Object.keys(R)).push("width"):O=this.config.columns,O.forEach(F=>{"columns"!==F&&void 0!==f[F]&&(R[F]=f[F])}),R.columns&&(R.columns=this.mergeDefinition(R.columns,f.columns)),c.push(R))}),o.forEach((f,E)=>{this._findColumn(a,f)||(c.length>E?c.splice(E,0,f):c.push(f))}),c}_findColumn(o,a){var c=a.columns?"group":a.field?"field":"object";return o.find(function(f){switch(c){case"group":return f.title===a.title&&f.columns.length===a.columns.length;case"field":return f.field===a.field;case"object":return f===a}})}save(o){var a={};switch(o){case"columns":a=this.parseColumns(this.table.columnManager.getColumns());break;case"filter":a=this.table.modules.filter.getFilters();break;case"sort":a=this.validateSorters(this.table.modules.sort.getSort());break;case"group":a=this.getGroupConfig();break;case"page":a=this.getPageConfig()}this.writeFunc&&this.writeFunc(this.id,o,a)}validateSorters(o){return o.forEach(function(a){a.column=a.field,delete a.field}),o}getGroupConfig(){var o={};return this.config.group&&((!0===this.config.group||this.config.group.groupBy)&&(o.groupBy=this.table.options.groupBy),(!0===this.config.group||this.config.group.groupStartOpen)&&(o.groupStartOpen=this.table.options.groupStartOpen),(!0===this.config.group||this.config.group.groupHeader)&&(o.groupHeader=this.table.options.groupHeader)),o}getPageConfig(){var o={};return this.config.page&&((!0===this.config.page||this.config.page.size)&&(o.paginationSize=this.table.modules.page.getPageSize()),(!0===this.config.page||this.config.page.page)&&(o.paginationInitialPage=this.table.modules.page.getPage())),o}parseColumns(o){var a=[],c=["headerContextMenu","headerMenu","contextMenu","clickMenu"];return o.forEach(f=>{var O,E={},R=f.getDefinition();f.isGroup?(E.title=R.title,E.columns=this.parseColumns(f.getColumns())):(E.field=f.getField(),!0===this.config.columns||null==this.config.columns?(O=Object.keys(R)).push("width"):O=this.config.columns,O.forEach(F=>{switch(F){case"width":E.width=f.getWidth();break;case"visible":E.visible=f.visible;break;default:"function"!=typeof R[F]&&-1===c.indexOf(F)&&(E[F]=R[F])}})),a.push(E)}),a}}return g.moduleName="persistence",g.readers=up,g.writers=ig,g})(),dp=(()=>{class g extends bo{constructor(o){super(o),this.element=!1,this.manualBlock=!1,this.registerTableOption("printAsHtml",!1),this.registerTableOption("printFormatter",!1),this.registerTableOption("printHeader",!1),this.registerTableOption("printFooter",!1),this.registerTableOption("printStyled",!0),this.registerTableOption("printRowRange","visible"),this.registerTableOption("printConfig",{}),this.registerColumnOption("print"),this.registerColumnOption("titlePrint")}initialize(){this.table.options.printAsHtml&&(window.addEventListener("beforeprint",this.replaceTable.bind(this)),window.addEventListener("afterprint",this.cleanup.bind(this))),this.registerTableFunction("print",this.printFullscreen.bind(this))}replaceTable(){this.manualBlock||(this.element=document.createElement("div"),this.element.classList.add("tabulator-print-table"),this.element.appendChild(this.table.modules.export.genereateTable(this.table.options.printConfig,this.table.options.printStyled,this.table.options.printRowRange,"print")),this.table.element.style.display="none",this.table.element.parentNode.insertBefore(this.element,this.table.element))}cleanup(){document.body.classList.remove("tabulator-print-fullscreen-hide"),this.element&&this.element.parentNode&&(this.element.parentNode.removeChild(this.element),this.table.element.style.display="")}printFullscreen(o,a,c){var J,dt,f=window.scrollX,E=window.scrollY,R=document.createElement("div"),O=document.createElement("div"),F=this.table.modules.export.genereateTable(void 0!==c?c:this.table.options.printConfig,void 0!==a?a:this.table.options.printStyled,o||this.table.options.printRowRange,"print");this.manualBlock=!0,this.element=document.createElement("div"),this.element.classList.add("tabulator-print-fullscreen"),this.table.options.printHeader&&(R.classList.add("tabulator-print-header"),"string"==typeof(J="function"==typeof this.table.options.printHeader?this.table.options.printHeader.call(this.table):this.table.options.printHeader)?R.innerHTML=J:R.appendChild(J),this.element.appendChild(R)),this.element.appendChild(F),this.table.options.printFooter&&(O.classList.add("tabulator-print-footer"),"string"==typeof(dt="function"==typeof this.table.options.printFooter?this.table.options.printFooter.call(this.table):this.table.options.printFooter)?O.innerHTML=dt:O.appendChild(dt),this.element.appendChild(O)),document.body.classList.add("tabulator-print-fullscreen-hide"),document.body.appendChild(this.element),this.table.options.printFormatter&&this.table.options.printFormatter(this.element,F),window.print(),this.cleanup(),window.scrollTo(f,E),this.manualBlock=!1}}return g.moduleName="print",g})(),Jp=(()=>{class g extends bo{constructor(o){super(o),this.data=!1,this.blocked=!1,this.origFuncs={},this.currentVersion=0,this.registerTableOption("reactiveData",!1)}initialize(){this.table.options.reactiveData&&(this.subscribe("cell-value-save-before",this.block.bind(this)),this.subscribe("cell-value-save-after",this.unblock.bind(this)),this.subscribe("row-data-save-before",this.block.bind(this)),this.subscribe("row-data-save-after",this.unblock.bind(this)),this.subscribe("row-data-init-after",this.watchRow.bind(this)),this.subscribe("data-processing",this.watchData.bind(this)),this.subscribe("table-destroy",this.unwatchData.bind(this)))}watchData(o){var c,a=this;this.currentVersion++,c=this.currentVersion,this.unwatchData(),this.data=o,this.origFuncs.push=o.push,Object.defineProperty(this.data,"push",{enumerable:!1,configurable:!0,value:function(){var f=Array.from(arguments);return!a.blocked&&c===a.currentVersion&&f.forEach(E=>{a.table.rowManager.addRowActual(E,!1)}),a.origFuncs.push.apply(o,arguments)}}),this.origFuncs.unshift=o.unshift,Object.defineProperty(this.data,"unshift",{enumerable:!1,configurable:!0,value:function(){var f=Array.from(arguments);return!a.blocked&&c===a.currentVersion&&f.forEach(E=>{a.table.rowManager.addRowActual(E,!0)}),a.origFuncs.unshift.apply(o,arguments)}}),this.origFuncs.shift=o.shift,Object.defineProperty(this.data,"shift",{enumerable:!1,configurable:!0,value:function(){var f;return!a.blocked&&c===a.currentVersion&&a.data.length&&(f=a.table.rowManager.getRowFromDataObject(a.data[0]))&&f.deleteActual(),a.origFuncs.shift.call(o)}}),this.origFuncs.pop=o.pop,Object.defineProperty(this.data,"pop",{enumerable:!1,configurable:!0,value:function(){var f;return!a.blocked&&c===a.currentVersion&&a.data.length&&(f=a.table.rowManager.getRowFromDataObject(a.data[a.data.length-1]))&&f.deleteActual(),a.origFuncs.pop.call(o)}}),this.origFuncs.splice=o.splice,Object.defineProperty(this.data,"splice",{enumerable:!1,configurable:!0,value:function(){var F,f=Array.from(arguments),E=f[0]<0?o.length+f[0]:f[0],R=f[1],O=!!f[2]&&f.slice(2);if(!a.blocked&&c===a.currentVersion){if(O&&((F=!!o[E]&&a.table.rowManager.getRowFromDataObject(o[E]))?O.forEach(dt=>{a.table.rowManager.addRowActual(dt,!0,F,!0)}):(O=O.slice().reverse()).forEach(dt=>{a.table.rowManager.addRowActual(dt,!0,!1,!0)})),0!==R){var J=o.slice(E,void 0===f[1]?f[1]:E+R);J.forEach((dt,Ft)=>{var qt=a.table.rowManager.getRowFromDataObject(dt);qt&&qt.deleteActual(Ft!==J.length-1)})}(O||0!==R)&&a.table.rowManager.reRenderInPosition()}return a.origFuncs.splice.apply(o,arguments)}})}unwatchData(){if(!1!==this.data)for(var o in this.origFuncs)Object.defineProperty(this.data,o,{enumerable:!0,configurable:!0,writable:!0,value:this.origFuncs.key})}watchRow(o){var a=o.getData();for(var c in this.blocked=!0,a)this.watchKey(o,a,c);this.table.options.dataTree&&this.watchTreeChildren(o),this.blocked=!1}watchTreeChildren(o){var a=o.getData()[this.table.options.dataTreeChildField],c={};function f(){this.table.modules.dataTree.initializeRow(o),this.table.modules.dataTree.layoutRow(o),this.table.rowManager.refreshActiveData("tree",!1,!0)}a&&(c.push=a.push,Object.defineProperty(a,"push",{enumerable:!1,configurable:!0,value:()=>{var E=c.push.apply(a,arguments);return f(),E}}),c.unshift=a.unshift,Object.defineProperty(a,"unshift",{enumerable:!1,configurable:!0,value:()=>{var E=c.unshift.apply(a,arguments);return f(),E}}),c.shift=a.shift,Object.defineProperty(a,"shift",{enumerable:!1,configurable:!0,value:()=>{var E=c.shift.call(a);return f(),E}}),c.pop=a.pop,Object.defineProperty(a,"pop",{enumerable:!1,configurable:!0,value:()=>{var E=c.pop.call(a);return f(),E}}),c.splice=a.splice,Object.defineProperty(a,"splice",{enumerable:!1,configurable:!0,value:()=>{var E=c.splice.apply(a,arguments);return f(),E}}))}watchKey(o,a,c){var f=Object.getOwnPropertyDescriptor(a,c),E=a[c],R=this.currentVersion;Object.defineProperty(a,c,{set:O=>{if(E=O,!this.blocked&&R===this.currentVersion){var F={};F[c]=O,o.updateData(F)}f.set&&f.set(O)},get:()=>(f.get&&f.get(),E)})}unwatchRow(o){var a=o.getData();for(var c in a)Object.defineProperty(a,c,{value:a[c]})}block(){this.blocked=!0}unblock(){this.blocked=!1}}return g.moduleName="reactiveData",g})(),ng=(()=>{class g extends bo{constructor(o){super(o),this.startColumn=!1,this.startX=!1,this.startWidth=!1,this.handle=null,this.prevHandle=null,this.registerColumnOption("resizable",!0)}initialize(){this.subscribe("cell-layout",this.layoutCellHandles.bind(this)),this.subscribe("column-init",this.layoutColumnHeader.bind(this))}layoutCellHandles(o){"row"===o.row.type&&this.initializeColumn("cell",o.column,o.element)}layoutColumnHeader(o){this.initializeColumn("header",o,o.element)}initializeColumn(o,a,c){var f=this,R=a.definition.resizable;if("header"===o&&(a.modules.resize={variableHeight:"textarea"==a.definition.formatter||a.definition.variableHeight}),!0===R||R==o){var O=document.createElement("div");O.className="tabulator-col-resize-handle";var F=document.createElement("div");F.className="tabulator-col-resize-handle prev",O.addEventListener("click",function(Ft){Ft.stopPropagation()});var J=function(Ft){var qt=a.getLastColumn();qt&&f._checkResizability(qt)&&(f.startColumn=a,f._mouseDown(Ft,qt,O))};O.addEventListener("mousedown",J),O.addEventListener("touchstart",J,{passive:!0}),O.addEventListener("dblclick",function(Ft){var qt=a.getLastColumn();qt&&f._checkResizability(qt)&&(Ft.stopPropagation(),qt.reinitializeWidth(!0))}),F.addEventListener("click",function(Ft){Ft.stopPropagation()});var dt=function(Ft){var qt,Ee,De;(qt=a.getFirstColumn())&&(De=(Ee=f.table.columnManager.findColumnIndex(qt))>0&&f.table.columnManager.getColumnByIndex(Ee-1))&&f._checkResizability(De)&&(f.startColumn=a,f._mouseDown(Ft,De,F))};F.addEventListener("mousedown",dt),F.addEventListener("touchstart",dt,{passive:!0}),F.addEventListener("dblclick",function(Ft){var qt,Ee,De;(qt=a.getFirstColumn())&&(De=(Ee=f.table.columnManager.findColumnIndex(qt))>0&&f.table.columnManager.getColumnByIndex(Ee-1))&&f._checkResizability(De)&&(Ft.stopPropagation(),De.reinitializeWidth(!0))}),c.appendChild(O),c.appendChild(F)}}_checkResizability(o){return o.definition.resizable}_mouseDown(o,a,c){var f=this;function E(O){a.setWidth(f.table.rtl?f.startWidth-((void 0===O.screenX?O.touches[0].screenX:O.screenX)-f.startX):f.startWidth+((void 0===O.screenX?O.touches[0].screenX:O.screenX)-f.startX)),f.table.columnManager.renderer.rerenderColumns(!0),!f.table.browserSlow&&a.modules.resize&&a.modules.resize.variableHeight&&a.checkCellHeights()}function R(O){f.startColumn.modules.edit&&(f.startColumn.modules.edit.blocked=!1),f.table.browserSlow&&a.modules.resize&&a.modules.resize.variableHeight&&a.checkCellHeights(),document.body.removeEventListener("mouseup",R),document.body.removeEventListener("mousemove",E),c.removeEventListener("touchmove",E),c.removeEventListener("touchend",R),f.table.element.classList.remove("tabulator-block-select"),f.dispatch("column-resized",a),f.table.externalEvents.dispatch("columnResized",a.getComponent())}f.table.element.classList.add("tabulator-block-select"),o.stopPropagation(),f.startColumn.modules.edit&&(f.startColumn.modules.edit.blocked=!0),f.startX=void 0===o.screenX?o.touches[0].screenX:o.screenX,f.startWidth=a.getWidth(),document.body.addEventListener("mousemove",E),document.body.addEventListener("mouseup",R),c.addEventListener("touchmove",E,{passive:!0}),c.addEventListener("touchend",R)}}return g.moduleName="resizeColumns",g})(),rg=(()=>{class g extends bo{constructor(o){super(o),this.startColumn=!1,this.startY=!1,this.startHeight=!1,this.handle=null,this.prevHandle=null,this.registerTableOption("resizableRows",!1)}initialize(){this.table.options.resizableRows&&this.subscribe("row-layout-after",this.initializeRow.bind(this))}initializeRow(o){var a=this,c=o.getElement(),f=document.createElement("div");f.className="tabulator-row-resize-handle";var E=document.createElement("div");E.className="tabulator-row-resize-handle prev",f.addEventListener("click",function(F){F.stopPropagation()});var R=function(F){a.startRow=o,a._mouseDown(F,o,f)};f.addEventListener("mousedown",R),f.addEventListener("touchstart",R,{passive:!0}),E.addEventListener("click",function(F){F.stopPropagation()});var O=function(F){var J=a.table.rowManager.prevDisplayRow(o);J&&(a.startRow=J,a._mouseDown(F,J,E))};E.addEventListener("mousedown",O),E.addEventListener("touchstart",O,{passive:!0}),c.appendChild(f),c.appendChild(E)}_mouseDown(o,a,c){var f=this;function E(O){a.setHeight(f.startHeight+((void 0===O.screenY?O.touches[0].screenY:O.screenY)-f.startY))}function R(O){document.body.removeEventListener("mouseup",E),document.body.removeEventListener("mousemove",E),c.removeEventListener("touchmove",E),c.removeEventListener("touchend",R),f.table.element.classList.remove("tabulator-block-select"),this.dispatchExternal("rowResized",a.getComponent())}f.table.element.classList.add("tabulator-block-select"),o.stopPropagation(),f.startY=void 0===o.screenY?o.touches[0].screenY:o.screenY,f.startHeight=a.getHeight(),document.body.addEventListener("mousemove",E),document.body.addEventListener("mouseup",R),c.addEventListener("touchmove",E,{passive:!0}),c.addEventListener("touchend",R)}}return g.moduleName="resizeRows",g})(),pp=(()=>{class g extends bo{constructor(o){super(o),this.binding=!1,this.observer=!1,this.containerObserver=!1,this.tableHeight=0,this.tableWidth=0,this.containerHeight=0,this.containerWidth=0,this.autoResize=!1,this.registerTableOption("autoResize",!0)}initialize(){if(this.table.options.autoResize){var a,o=this.table;this.tableHeight=o.element.clientHeight,this.tableWidth=o.element.clientWidth,o.element.parentNode&&(this.containerHeight=o.element.parentNode.clientHeight,this.containerWidth=o.element.parentNode.clientWidth),"undefined"!=typeof ResizeObserver&&"virtual"===o.rowManager.getRenderMode()?(this.autoResize=!0,this.observer=new ResizeObserver(c=>{if(!o.browserMobile||o.browserMobile&&!o.modules.edit.currentCell){var f=Math.floor(c[0].contentRect.height),E=Math.floor(c[0].contentRect.width);(this.tableHeight!=f||this.tableWidth!=E)&&(this.tableHeight=f,this.tableWidth=E,o.element.parentNode&&(this.containerHeight=o.element.parentNode.clientHeight,this.containerWidth=o.element.parentNode.clientWidth),this.table.columnManager.renderer.rerenderColumns(!0),o.redraw())}}),this.observer.observe(o.element),a=window.getComputedStyle(o.element),this.table.element.parentNode&&!this.table.rowManager.fixedHeight&&(a.getPropertyValue("max-height")||a.getPropertyValue("min-height"))&&(this.containerObserver=new ResizeObserver(c=>{if(!o.browserMobile||o.browserMobile&&!o.modules.edit.currentCell){var f=Math.floor(c[0].contentRect.height),E=Math.floor(c[0].contentRect.width);(this.containerHeight!=f||this.containerWidth!=E)&&(this.containerHeight=f,this.containerWidth=E,this.tableHeight=o.element.clientHeight,this.tableWidth=o.element.clientWidth),o.columnManager.renderer.rerenderColumns(!0),o.redraw()}}),this.containerObserver.observe(this.table.element.parentNode)),this.subscribe("table-resize",this.tableResized.bind(this))):(this.binding=function(){(!o.browserMobile||o.browserMobile&&!o.modules.edit.currentCell)&&(o.columnManager.renderer.rerenderColumns(!0),o.redraw())},window.addEventListener("resize",this.binding)),this.subscribe("table-destroy",this.clearBindings.bind(this))}}tableResized(){this.table.rowManager.redraw()}clearBindings(){this.binding&&window.removeEventListener("resize",this.binding),this.observer&&this.observer.unobserve(this.table.element),this.containerObserver&&this.containerObserver.unobserve(this.table.element.parentNode)}}return g.moduleName="resizeTable",g})(),Um=(()=>{class g extends bo{constructor(o){super(o),this.columns=[],this.hiddenColumns=[],this.mode="",this.index=0,this.collapseFormatter=[],this.collapseStartOpen=!0,this.collapseHandleColumn=!1,this.registerTableOption("responsiveLayout",!1),this.registerTableOption("responsiveLayoutCollapseStartOpen",!0),this.registerTableOption("responsiveLayoutCollapseUseFormatters",!0),this.registerTableOption("responsiveLayoutCollapseFormatter",!1),this.registerColumnOption("responsive")}initialize(){this.table.options.responsiveLayout&&(this.subscribe("column-layout",this.initializeColumn.bind(this)),this.subscribe("column-show",this.updateColumnVisibility.bind(this)),this.subscribe("column-hide",this.updateColumnVisibility.bind(this)),this.subscribe("columns-loaded",this.initializeResponsivity.bind(this)),this.subscribe("column-moved",this.initializeResponsivity.bind(this)),this.subscribe("column-add",this.initializeResponsivity.bind(this)),this.subscribe("column-delete",this.initializeResponsivity.bind(this)),this.subscribe("table-redrawing",this.tableRedraw.bind(this)),"collapse"===this.table.options.responsiveLayout&&(this.subscribe("row-init",this.initializeRow.bind(this)),this.subscribe("row-layout",this.layoutRow.bind(this))))}tableRedraw(o){-1===["fitColumns","fitDataStretch"].indexOf(this.layoutMode())&&(o||this.update())}initializeResponsivity(){var o=[];this.mode=this.table.options.responsiveLayout,this.collapseFormatter=this.table.options.responsiveLayoutCollapseFormatter||this.formatCollapsedData,this.collapseStartOpen=this.table.options.responsiveLayoutCollapseStartOpen,this.hiddenColumns=[],this.table.columnManager.columnsByIndex.forEach(function(a,c){a.modules.responsive&&a.modules.responsive.order&&a.modules.responsive.visible&&(a.modules.responsive.index=c,o.push(a),!a.visible&&"collapse"===self.mode&&self.hiddenColumns.push(a))}),o=(o=o.reverse()).sort(function(a,c){return c.modules.responsive.order-a.modules.responsive.order||c.modules.responsive.index-a.modules.responsive.index}),this.columns=o,"collapse"===this.mode&&this.generateCollapsedContent();for(let a of this.table.columnManager.columnsByIndex)if("responsiveCollapse"==a.definition.formatter){this.collapseHandleColumn=a;break}this.collapseHandleColumn&&(this.hiddenColumns.length?this.collapseHandleColumn.show():this.collapseHandleColumn.hide())}initializeColumn(o){var a=o.getDefinition();o.modules.responsive={order:void 0===a.responsive?1:a.responsive,visible:!1!==a.visible}}initializeRow(o){var a;"calc"!==o.type&&((a=document.createElement("div")).classList.add("tabulator-responsive-collapse"),o.modules.responsiveLayout={element:a,open:this.collapseStartOpen},this.collapseStartOpen||(a.style.display="none"))}layoutRow(o){var a=o.getElement();o.modules.responsiveLayout&&(a.appendChild(o.modules.responsiveLayout.element),this.generateCollapsedRowContent(o))}updateColumnVisibility(o,a){!a&&o.modules.responsive&&(o.modules.responsive.visible=o.visible,this.initialize())}hideColumn(o){var a=this.hiddenColumns.length;o.hide(!1,!0),"collapse"===this.mode&&(this.hiddenColumns.unshift(o),this.generateCollapsedContent(),this.collapseHandleColumn&&!a&&this.collapseHandleColumn.show())}showColumn(o){var a;o.show(!1,!0),o.setWidth(o.getWidth()),"collapse"===this.mode&&((a=this.hiddenColumns.indexOf(o))>-1&&this.hiddenColumns.splice(a,1),this.generateCollapsedContent(),this.collapseHandleColumn&&!this.hiddenColumns.length&&this.collapseHandleColumn.hide())}update(){for(var o=this,a=!0;a;){let c="fitColumns"==o.table.modules.layout.getMode()?o.table.columnManager.getFlexBaseWidth():o.table.columnManager.getWidth(),f=(o.table.options.headerVisible?o.table.columnManager.element.clientWidth:o.table.element.clientWidth)-c;if(f<0){let E=o.columns[o.index];E?(o.hideColumn(E),o.index++):a=!1}else{let E=o.columns[o.index-1];E&&f>0&&f>=E.getWidth()?(o.showColumn(E),o.index--):a=!1}o.table.rowManager.activeRowsCount||o.table.rowManager.renderEmptyScroll()}}generateCollapsedContent(){var o=this;this.table.rowManager.getDisplayRows().forEach(function(c){o.generateCollapsedRowContent(c)})}generateCollapsedRowContent(o){var a,c;if(o.modules.responsiveLayout){for(a=o.modules.responsiveLayout.element;a.firstChild;)a.removeChild(a.firstChild);(c=this.collapseFormatter(this.generateCollapsedRowData(o)))&&a.appendChild(c)}}generateCollapsedRowData(o){var E,a=this,c=o.getData(),f=[];return this.hiddenColumns.forEach(function(R){var O=R.getFieldValue(c);R.definition.title&&R.field&&(R.modules.format&&a.table.options.responsiveLayoutCollapseUseFormatters?(E={value:!1,data:{},getValue:function(){return O},getData:function(){return c},getElement:function(){return document.createElement("div")},getRow:function(){return o.getComponent()},getColumn:function(){return R.getComponent()}},f.push({field:R.field,title:R.definition.title,value:R.modules.format.formatter.call(a.table.modules.format,E,R.modules.format.params,function(J){J()})})):f.push({field:R.field,title:R.definition.title,value:O}))}),f}formatCollapsedData(o){var a=document.createElement("table");return o.forEach(function(c){var O,f=document.createElement("tr"),E=document.createElement("td"),R=document.createElement("td"),F=document.createElement("strong");E.appendChild(F),this.langBind("columns|"+c.field,function(J){F.innerText=J||c.title}),c.value instanceof Node?((O=document.createElement("div")).appendChild(c.value),R.appendChild(O)):R.innerHTML=c.value,f.appendChild(E),f.appendChild(R),a.appendChild(f)},this),Object.keys(o).length?a:""}}return g.moduleName="responsiveLayout",g})(),$p=(()=>{class g extends bo{constructor(o){super(o),this.selecting=!1,this.lastClickedRow=!1,this.selectPrev=[],this.selectedRows=[],this.headerCheckboxElement=null,this.registerTableOption("selectable","highlight"),this.registerTableOption("selectableRangeMode","drag"),this.registerTableOption("selectableRollingSelection",!0),this.registerTableOption("selectablePersistence",!0),this.registerTableOption("selectableCheck",function(a,c){return!0}),this.registerTableFunction("selectRow",this.selectRows.bind(this)),this.registerTableFunction("deselectRow",this.deselectRows.bind(this)),this.registerTableFunction("toggleSelectRow",this.toggleRow.bind(this)),this.registerTableFunction("getSelectedRows",this.getSelectedRows.bind(this)),this.registerTableFunction("getSelectedData",this.getSelectedData.bind(this)),this.registerComponentFunction("row","select",this.selectRows.bind(this)),this.registerComponentFunction("row","deselect",this.deselectRows.bind(this)),this.registerComponentFunction("row","toggleSelect",this.toggleRow.bind(this)),this.registerComponentFunction("row","isSelected",this.isRowSelected.bind(this))}initialize(){!1!==this.table.options.selectable&&(this.subscribe("row-init",this.initializeRow.bind(this)),this.subscribe("row-deleting",this.rowDeleted.bind(this)),this.subscribe("rows-wipe",this.clearSelectionData.bind(this)),this.subscribe("rows-retrieve",this.rowRetrieve.bind(this)),this.table.options.selectable&&this.table.options.selectablePersistence&&this.subscribe("data-refeshing",this.deselectRows.bind(this)))}rowRetrieve(o,a){return"selected"===o?this.selectedRows:a}rowDeleted(o){this._deselectRow(o,!0)}clearSelectionData(o){this.selecting=!1,this.lastClickedRow=!1,this.selectPrev=[],this.selectedRows=[],!0!==o&&this._rowSelectionChanged()}initializeRow(o){var a=this,c=o.getElement(),f=function(){setTimeout(function(){a.selecting=!1},50),document.body.removeEventListener("mouseup",f)};o.modules.select={selected:!1},a.table.options.selectableCheck.call(this.table,o.getComponent())?(c.classList.add("tabulator-selectable"),c.classList.remove("tabulator-unselectable"),a.table.options.selectable&&"highlight"!=a.table.options.selectable&&("click"===a.table.options.selectableRangeMode?c.addEventListener("click",function(E){if(E.shiftKey){a.table._clearSelection(),a.lastClickedRow=a.lastClickedRow||o;var R=a.table.rowManager.getDisplayRowIndex(a.lastClickedRow),O=a.table.rowManager.getDisplayRowIndex(o),F=R<=O?R:O,J=R>=O?R:O,Ft=a.table.rowManager.getDisplayRows().slice(0).splice(F,J-F+1);E.ctrlKey||E.metaKey?(Ft.forEach(function(qt){qt!==a.lastClickedRow&&(!0===a.table.options.selectable||a.isRowSelected(o)||a.selectedRows.length<a.table.options.selectable)&&a.toggleRow(qt)}),a.lastClickedRow=o):(a.deselectRows(void 0,!0),!0!==a.table.options.selectable&&Ft.length>a.table.options.selectable&&(Ft=Ft.slice(0,a.table.options.selectable)),a.selectRows(Ft)),a.table._clearSelection()}else E.ctrlKey||E.metaKey?(a.toggleRow(o),a.lastClickedRow=o):(a.deselectRows(void 0,!0),a.selectRows(o),a.lastClickedRow=o)}):(c.addEventListener("click",function(E){(!a.table.modExists("edit")||!a.table.modules.edit.getCurrentCell())&&a.table._clearSelection(),a.selecting||a.toggleRow(o)}),c.addEventListener("mousedown",function(E){if(E.shiftKey)return a.table._clearSelection(),a.selecting=!0,a.selectPrev=[],document.body.addEventListener("mouseup",f),document.body.addEventListener("keyup",f),a.toggleRow(o),!1}),c.addEventListener("mouseenter",function(E){a.selecting&&(a.table._clearSelection(),a.toggleRow(o),a.selectPrev[1]==o&&a.toggleRow(a.selectPrev[0]))}),c.addEventListener("mouseout",function(E){a.selecting&&(a.table._clearSelection(),a.selectPrev.unshift(o))})))):(c.classList.add("tabulator-unselectable"),c.classList.remove("tabulator-selectable"))}toggleRow(o){this.table.options.selectableCheck.call(this.table,o.getComponent())&&(o.modules.select&&o.modules.select.selected?this._deselectRow(o):this._selectRow(o))}selectRows(o){var a;switch(typeof o){case"undefined":this.table.rowManager.rows.forEach(c=>{this._selectRow(c,!0,!0)}),this._rowSelectionChanged();break;case"string":(a=this.table.rowManager.findRow(o))?this._selectRow(a,!0,!0):this.table.rowManager.getRows(o).forEach(c=>{this._selectRow(c,!0,!0)}),this._rowSelectionChanged();break;default:Array.isArray(o)?(o.forEach(c=>{this._selectRow(c,!0,!0)}),this._rowSelectionChanged()):this._selectRow(o,!1,!0)}}_selectRow(o,a,c){if(!isNaN(this.table.options.selectable)&&!0!==this.table.options.selectable&&!c&&this.selectedRows.length>=this.table.options.selectable){if(!this.table.options.selectableRollingSelection)return!1;this._deselectRow(this.selectedRows[0])}var f=this.table.rowManager.findRow(o);f?-1==this.selectedRows.indexOf(f)&&(f.getElement().classList.add("tabulator-selected"),f.modules.select||(f.modules.select={}),f.modules.select.selected=!0,f.modules.select.checkboxEl&&(f.modules.select.checkboxEl.checked=!0),this.selectedRows.push(f),this.table.options.dataTreeSelectPropagate&&this.childRowSelection(f,!0),a||this.dispatchExternal("rowSelected",f.getComponent()),this._rowSelectionChanged(a)):a||console.warn("Selection Error - No such row found, ignoring selection:"+o)}isRowSelected(o){return-1!==this.selectedRows.indexOf(o)}deselectRows(o,a){var f,c=this;if(void 0===o){f=c.selectedRows.length;for(let E=0;E<f;E++)c._deselectRow(c.selectedRows[0],!0);c._rowSelectionChanged(a)}else Array.isArray(o)?(o.forEach(function(E){c._deselectRow(E,!0)}),c._rowSelectionChanged(a)):c._deselectRow(o,a)}_deselectRow(o,a){var E,c=this,f=c.table.rowManager.findRow(o);f?(E=c.selectedRows.findIndex(function(R){return R==f}))>-1&&(f.getElement().classList.remove("tabulator-selected"),f.modules.select||(f.modules.select={}),f.modules.select.selected=!1,f.modules.select.checkboxEl&&(f.modules.select.checkboxEl.checked=!1),c.selectedRows.splice(E,1),this.table.options.dataTreeSelectPropagate&&this.childRowSelection(f,!1),a||this.dispatchExternal("rowDeselected",f.getComponent()),c._rowSelectionChanged(a)):a||console.warn("Deselection Error - No such row found, ignoring selection:"+o)}getSelectedData(){var o=[];return this.selectedRows.forEach(function(a){o.push(a.getData())}),o}getSelectedRows(){var o=[];return this.selectedRows.forEach(function(a){o.push(a.getComponent())}),o}_rowSelectionChanged(o){this.headerCheckboxElement&&(0===this.selectedRows.length?(this.headerCheckboxElement.checked=!1,this.headerCheckboxElement.indeterminate=!1):this.table.rowManager.rows.length===this.selectedRows.length?(this.headerCheckboxElement.checked=!0,this.headerCheckboxElement.indeterminate=!1):(this.headerCheckboxElement.indeterminate=!0,this.headerCheckboxElement.checked=!1)),o||this.dispatchExternal("rowSelectionChanged",this.getSelectedData(),this.getSelectedRows())}registerRowSelectCheckbox(o,a){o._row.modules.select||(o._row.modules.select={}),o._row.modules.select.checkboxEl=a}registerHeaderSelectCheckbox(o){this.headerCheckboxElement=o}childRowSelection(o,a){var c=this.table.modules.dataTree.getChildren(o,!0);if(a)for(let f of c)this._selectRow(f,!0);else for(let f of c)this._deselectRow(f,!0)}}return g.moduleName="selectRow",g})();function Bd(g,l,o,a,c,f,E){var R=window.DateTime||luxon.DateTime,O=E.format||"dd/MM/yyyy HH:mm:ss",F=E.alignEmptyValues,J=0;if(void 0!==R){if(g=R.fromFormat(g,O),l=R.fromFormat(l,O),g.isValid){if(l.isValid)return g-l;J=1}else J=l.isValid?-1:0;return("top"===F&&"desc"===f||"bottom"===F&&"asc"===f)&&(J*=-1),J}console.error("Sort Error - 'datetime' sorter is dependant on luxon.js")}var Vm={number:function(g,l,o,a,c,f,E){var R=E.alignEmptyValues,O=E.decimalSeparator,F=E.thousandSeparator,J=0;if(g=String(g),l=String(l),F&&(g=g.split(F).join(""),l=l.split(F).join("")),O&&(g=g.split(O).join("."),l=l.split(O).join(".")),g=parseFloat(g),l=parseFloat(l),isNaN(g))J=isNaN(l)?0:-1;else{if(!isNaN(l))return g-l;J=1}return("top"===R&&"desc"===f||"bottom"===R&&"asc"===f)&&(J*=-1),J},string:function(g,l,o,a,c,f,E){var F,R=E.alignEmptyValues,O=0;if(g){if(l){switch(typeof E.locale){case"boolean":E.locale&&(F=this.langLocale());break;case"string":F=E.locale}return String(g).toLowerCase().localeCompare(String(l).toLowerCase(),F)}O=1}else O=l?-1:0;return("top"===R&&"desc"===f||"bottom"===R&&"asc"===f)&&(O*=-1),O},date:function(g,l,o,a,c,f,E){return E.format||(E.format="dd/MM/yyyy"),Bd.call(this,g,l,o,a,c,f,E)},time:function(g,l,o,a,c,f,E){return E.format||(E.format="HH:mm"),Bd.call(this,g,l,o,a,c,f,E)},datetime:Bd,boolean:function(g,l,o,a,c,f,E){return(!0===g||"true"===g||"True"===g||1===g?1:0)-(!0===l||"true"===l||"True"===l||1===l?1:0)},array:function(g,l,o,a,c,f,E){var F=E.type||"length",J=E.alignEmptyValues,dt=0;function Ft(qt){switch(F){case"length":return qt.length;case"sum":return qt.reduce(function(Ee,De){return Ee+De});case"max":return Math.max.apply(null,qt);case"min":return Math.min.apply(null,qt);case"avg":return qt.reduce(function(Ee,De){return Ee+De})/qt.length}}if(Array.isArray(g)){if(Array.isArray(l))return(g?Ft(g):0)-(l?Ft(l):0);J=1}else J=Array.isArray(l)?-1:0;return("top"===J&&"desc"===f||"bottom"===J&&"asc"===f)&&(dt*=-1),dt},exists:function(g,l,o,a,c,f,E){return(void 0===g?0:1)-(void 0===l?0:1)},alphanum:function(g,l,o,a,c,f,E){var R,O,F,J,Ft,dt=0,qt=/(\d+)|(\D+)/g,Ee=/\d/,De=E.alignEmptyValues,Ge=0;if(g||0===g){if(l||0===l){if(isFinite(g)&&isFinite(l))return g-l;if((R=String(g).toLowerCase())===(O=String(l).toLowerCase()))return 0;if(!Ee.test(R)||!Ee.test(O))return R>O?1:-1;for(R=R.match(qt),O=O.match(qt),Ft=R.length>O.length?O.length:R.length;dt<Ft;)if((F=R[dt])!==(J=O[dt++]))return isFinite(F)&&isFinite(J)?("0"===F.charAt(0)&&(F="."+F),"0"===J.charAt(0)&&(J="."+J),F-J):F>J?1:-1;return R.length>O.length}Ge=1}else Ge=l||0===l?-1:0;return("top"===De&&"desc"===f||"bottom"===De&&"asc"===f)&&(Ge*=-1),Ge}},ef={integer:function(g,l,o){return""===l||null==l||"number"==typeof(l=Number(l))&&isFinite(l)&&Math.floor(l)===l},float:function(g,l,o){return""===l||null==l||"number"==typeof(l=Number(l))&&isFinite(l)&&l%1!=0},numeric:function(g,l,o){return""===l||null==l||!isNaN(l)},string:function(g,l,o){return""===l||null==l||isNaN(l)},max:function(g,l,o){return""===l||null==l||parseFloat(l)<=o},min:function(g,l,o){return""===l||null==l||parseFloat(l)>=o},starts:function(g,l,o){return""===l||null==l||String(l).toLowerCase().startsWith(String(o).toLowerCase())},ends:function(g,l,o){return""===l||null==l||String(l).toLowerCase().endsWith(String(o).toLowerCase())},minLength:function(g,l,o){return""===l||null==l||String(l).length>=o},maxLength:function(g,l,o){return""===l||null==l||String(l).length<=o},in:function(g,l,o){return""===l||null==l||("string"==typeof o&&(o=o.split("|")),""===l||o.indexOf(l)>-1)},regex:function(g,l,o){return""===l||null==l||new RegExp(o).test(l)},unique:function(g,l,o){if(""===l||null==l)return!0;var a=!0,c=g.getData(),f=g.getColumn()._getSelf();return this.table.rowManager.rows.forEach(function(E){var R=E.getData();R!==c&&l==f.getFieldValue(R)&&(a=!1)}),a},required:function(g,l,o){return""!==l&&null!=l}},Td=Object.freeze({__proto__:null,AccessorModule:np,AjaxModule:Hp,ClipboardModule:Up,ColumnCalcsModule:qh,DataTreeModule:Nh,DownloadModule:vd,EditModule:Pd,ExportModule:b,FilterModule:tt,FormatModule:jp,FrozenColumnsModule:Yp,FrozenRowsModule:Yf,GroupRowsModule:Xp,HistoryModule:cp,HtmlTableImportModule:Jf,InteractionModule:$f,KeybindingsModule:Zf,MenuModule:Qf,MoveColumnsModule:qf,MoveRowsModule:id,MutatorModule:eg,PageModule:Fd,PersistenceModule:hp,PrintModule:dp,ReactiveDataModule:Jp,ResizeColumnsModule:ng,ResizeRowsModule:rg,ResizeTableModule:pp,ResponsiveLayoutModule:Um,SelectRowModule:$p,SortModule:(()=>{class g extends bo{constructor(o){super(o),this.sortList=[],this.changed=!1,this.registerTableOption("sortMode","local"),this.registerTableOption("initialSort",!1),this.registerTableOption("columnHeaderSortMulti",!0),this.registerTableOption("sortOrderReverse",!1),this.registerTableOption("headerSortElement","<div class='tabulator-arrow'></div>"),this.registerColumnOption("sorter"),this.registerColumnOption("sorterParams"),this.registerColumnOption("headerSort",!0),this.registerColumnOption("headerSortStartingDir"),this.registerColumnOption("headerSortTristate")}initialize(){this.subscribe("column-layout",this.initializeColumn.bind(this)),this.subscribe("table-built",this.tableBuilt.bind(this)),this.registerDataHandler(this.sort.bind(this),20),this.registerTableFunction("setSort",this.userSetSort.bind(this)),this.registerTableFunction("getSorters",this.getSort.bind(this)),this.registerTableFunction("clearSort",this.clearSort.bind(this)),"remote"===this.table.options.sortMode&&this.subscribe("data-params",this.remoteSortParams.bind(this))}tableBuilt(){this.table.options.initialSort&&this.setSort(this.table.options.initialSort)}remoteSortParams(o,a,c,f){var E=this.getSort();return E.forEach(R=>{delete R.column}),f.sort=E,f}userSetSort(o,a){this.setSort(o,a),this.refreshSort()}clearSort(){this.clear(),this.refreshSort()}initializeColumn(o){var c,f,a=!1;switch(typeof o.definition.sorter){case"string":g.sorters[o.definition.sorter]?a=g.sorters[o.definition.sorter]:console.warn("Sort Error - No such sorter found: ",o.definition.sorter);break;case"function":a=o.definition.sorter}o.modules.sort={sorter:a,dir:"none",params:o.definition.sorterParams||{},startingDir:o.definition.headerSortStartingDir||"asc",tristate:o.definition.headerSortTristate},!1!==o.definition.headerSort&&((c=o.getElement()).classList.add("tabulator-sortable"),(f=document.createElement("div")).classList.add("tabulator-col-sorter"),"object"==typeof this.table.options.headerSortElement?f.appendChild(this.table.options.headerSortElement):f.innerHTML=this.table.options.headerSortElement,o.titleHolderElement.appendChild(f),o.modules.sort.element=f,c.addEventListener("click",E=>{var R="",O=[],F=!1;if(o.modules.sort){if(o.modules.sort.tristate)R="none"==o.modules.sort.dir?o.modules.sort.startingDir:o.modules.sort.dir==o.modules.sort.startingDir?"asc"==o.modules.sort.dir?"desc":"asc":"none";else switch(o.modules.sort.dir){case"asc":R="desc";break;case"desc":R="asc";break;default:R=o.modules.sort.startingDir}this.table.options.columnHeaderSortMulti&&(E.shiftKey||E.ctrlKey)?((F=(O=this.getSort()).findIndex(J=>J.field===o.getField()))>-1?(O[F].dir=R,F!=O.length-1&&(F=O.splice(F,1)[0],"none"!=R&&O.push(F))):"none"!=R&&O.push({column:o,dir:R}),this.setSort(O)):"none"==R?this.clear():this.setSort(o,R),this.refreshSort()}}))}refreshSort(){"remote"===this.table.options.sortMode?this.reloadData():this.refreshData()}hasChanged(){var o=this.changed;return this.changed=!1,o}getSort(){var a=[];return this.sortList.forEach(function(c){c.column&&a.push({column:c.column.getComponent(),field:c.column.getField(),dir:c.dir})}),a}setSort(o,a){var c=this,f=[];Array.isArray(o)||(o=[{column:o,dir:a}]),o.forEach(function(E){var R;(R=c.table.columnManager.findColumn(E.column))?(E.column=R,f.push(E),c.changed=!0):console.warn("Sort Warning - Sort field does not exist and is being ignored: ",E.column)}),c.sortList=f,this.dispatch("sort-changed")}clear(){this.setSort([])}findSorter(o){var E,a=this.table.rowManager.activeRows[0],c="string";if(a&&(a=a.getData(),o.getField()))switch(E=o.getFieldValue(a),typeof E){case"undefined":c="string";break;case"boolean":c="boolean";break;default:isNaN(E)||""===E?E.match(/((^[0-9]+[a-z]+)|(^[a-z]+[0-9]+))+$/i)&&(c="alphanum"):c="number"}return g.sorters[c]}sort(o){var a=this,c=this.table.options.sortOrderReverse?a.sortList.slice().reverse():a.sortList,f=[],E=[];return this.subscribedExternal("dataSorting")&&this.dispatchExternal("dataSorting",a.getSort()),a.clearColumnHeaders(),"remote"!==this.table.options.sortMode?(c.forEach(function(R,O){var F=R.column.modules.sort;R.column&&F&&(F.sorter||(F.sorter=a.findSorter(R.column)),R.params="function"==typeof F.params?F.params(R.column.getComponent(),R.dir):F.params,f.push(R)),a.setColumnHeader(R.column,R.dir)}),f.length&&a._sortItems(o,f)):c.forEach(function(R,O){a.setColumnHeader(R.column,R.dir)}),this.subscribedExternal("dataSorted")&&(o.forEach(R=>{E.push(R.getComponent())}),this.dispatchExternal("dataSorted",a.getSort(),E)),o}clearColumnHeaders(){this.table.columnManager.getRealColumns().forEach(function(o){o.modules.sort&&(o.modules.sort.dir="none",o.getElement().setAttribute("aria-sort","none"))})}setColumnHeader(o,a){o.modules.sort.dir=a,o.getElement().setAttribute("aria-sort",a)}_sortItems(o,a){var c=a.length-1;o.sort((f,E)=>{for(var R,O=c;O>=0;O--){let F=a[O];if(0!==(R=this._sortRow(f,E,F.column,F.dir,F.params)))break}return R})}_sortRow(o,a,c,f,E){var R,O,F="asc"==f?o:a,J="asc"==f?a:o;return o=void 0!==(o=c.getFieldValue(F.getData()))?o:"",a=void 0!==(a=c.getFieldValue(J.getData()))?a:"",R=F.getComponent(),O=J.getComponent(),c.modules.sort.sorter.call(this,o,a,R,O,c.getComponent(),f,E)}}return g.moduleName="sort",g.sorters=Vm,g})(),ValidateModule:(()=>{class g extends bo{constructor(o){super(o),this.invalidCells=[],this.registerTableOption("validationMode","blocking"),this.registerColumnOption("validator"),this.registerTableFunction("getInvalidCells",this.getInvalidCells.bind(this)),this.registerTableFunction("clearCellValidation",this.userClearCellValidation.bind(this)),this.registerTableFunction("validate",this.userValidate.bind(this)),this.registerComponentFunction("cell","isValid",this.cellIsValid.bind(this)),this.registerComponentFunction("cell","clearValidation",this.clearValidation.bind(this)),this.registerComponentFunction("cell","validate",this.cellValidate.bind(this)),this.registerComponentFunction("column","validate",this.columnValidate.bind(this)),this.registerComponentFunction("row","validate",this.rowValidate.bind(this))}initialize(){this.subscribe("cell-delete",this.clearValidation.bind(this)),this.subscribe("column-layout",this.initializeColumnCheck.bind(this))}cellIsValid(o){return!o.modules.validate||!o.modules.validate.invalid}cellValidate(o){return this.validate(o.column.modules.validate,o,o.getValue())}columnValidate(o){var a=[];return o.cells.forEach(function(c){this.cellValidate(c)||a.push(c.getComponent())}),!a.length||a}rowValidate(o){var a=[];return o.cells.forEach(function(c){this.cellValidate(c)||a.push(c.getComponent())}),!a.length||a}userClearCellValidation(o){o||(o=this.getInvalidCells()),Array.isArray(o)||(o=[o]),o.forEach(a=>{this.clearValidation(a._getSelf())})}userValidate(o){var a=[];return this.table.rowManager.rows.forEach(function(c){var f=c.validate();!0!==f&&(a=a.concat(f))}),!a.length||a}initializeColumnCheck(o){void 0!==o.definition.validator&&this.initializeColumn(o)}initializeColumn(o){var f,a=this,c=[];o.definition.validator&&(Array.isArray(o.definition.validator)?o.definition.validator.forEach(function(E){(f=a._extractValidator(E))&&c.push(f)}):(f=this._extractValidator(o.definition.validator))&&c.push(f),o.modules.validate=!!c.length&&c)}_extractValidator(o){var a,c,f;switch(typeof o){case"string":return(f=o.indexOf(":"))>-1?(a=o.substring(0,f),c=o.substring(f+1)):a=o,this._buildValidator(a,c);case"function":return this._buildValidator(o);case"object":return this._buildValidator(o.type,o.parameters)}}_buildValidator(o,a){var c="function"==typeof o?o:g.validators[o];return c?{type:"function"==typeof o?"function":o,func:c,params:a}:(console.warn("Validator Setup Error - No matching validator found:",o),!1)}validate(o,a,c){var f=this,E=[],R=this.invalidCells.indexOf(a);return o&&o.forEach(function(O){O.func.call(f,a.getComponent(),c,O.params)||E.push({type:O.type,parameters:O.params})}),E=!E.length||E,a.modules.validate||(a.modules.validate={}),!0===E?(a.modules.validate.invalid=!1,a.getElement().classList.remove("tabulator-validation-fail"),R>-1&&this.invalidCells.splice(R,1)):(a.modules.validate.invalid=!0,"manual"!==this.table.options.validationMode&&a.getElement().classList.add("tabulator-validation-fail"),-1==R&&this.invalidCells.push(a)),E}getInvalidCells(){var o=[];return this.invalidCells.forEach(a=>{o.push(a.getComponent())}),o}clearValidation(o){var a;o.modules.validate&&o.modules.validate.invalid&&(o.getElement().classList.remove("tabulator-validation-fail"),o.modules.validate.invalid=!1,(a=this.invalidCells.indexOf(o))>-1&&this.invalidCells.splice(a,1))}}return g.moduleName="validate",g.validators=ef,g})()}),ag={debugEventsExternal:!1,debugEventsInternal:!1,debugInvalidOptions:!0,height:!1,minHeight:!1,maxHeight:!1,columnMaxWidth:!1,columnHeaderVertAlign:"top",columns:[],columnDefaults:{},data:!1,autoColumns:!1,autoColumnsDefinitions:!1,nestedFieldSeparator:".",tooltipGenerationMode:"load",footerElement:!1,index:"id",textDirection:"auto",addRowPos:"bottom",headerVisible:!0,renderVertical:"virtual",renderHorizontal:"basic",renderVerticalBuffer:0,scrollToRowPosition:"top",scrollToRowIfVisible:!0,scrollToColumnPosition:"left",scrollToColumnIfVisible:!0,rowFormatter:!1,rowFormatterPrint:null,rowFormatterClipboard:null,rowFormatterHtmlOutput:null,placeholder:!1,dataLoader:!0,dataLoaderLoading:!1,dataLoaderError:!1,dataSendParams:{},dataReceiveParams:{}};class Ud{constructor(l,o){this.table=l,this.msgType=o,this.registeredDefaults={}}register(l,o){this.registeredDefaults[l]=o}generate(l,o={}){var a=Object.assign({},this.registeredDefaults);if(Object.assign(a,l),!1!==o.debugInvalidOptions||this.table.options.debugInvalidOptions)for(var c in o)a.hasOwnProperty(c)||console.warn("Invalid "+this.msgType+" option:",c);for(var c in a)c in o?a[c]=o[c]:Array.isArray(a[c])?a[c]=Object.assign([],a[c]):"object"==typeof a[c]&&null!==a[c]?a[c]=Object.assign({},a[c]):void 0===a[c]&&delete a[c];return a}}class Cd extends Nc{constructor(l){super(l),this.elementVertical=l.rowManager.element,this.elementHorizontal=l.columnManager.element,this.tableElement=l.rowManager.tableElement,this.verticalFillMode="fit"}initialize(){}clearRows(){}clearColumns(){}reinitializeColumnWidths(l){}renderRows(){}renderColumns(){}rerenderRows(l){l&&l()}rerenderColumns(l,o){}renderRowCells(l){}rerenderRowCells(l,o){}scrollColumns(l,o){}scrollRows(l,o){}resize(){}scrollToRow(l){}scrollToRowNearestTop(l){}visibleRows(l){return[]}rows(){return this.table.rowManager.getDisplayRows()}styleRow(l,o){var a=l.getElement();o%2?(a.classList.add("tabulator-row-even"),a.classList.remove("tabulator-row-odd")):(a.classList.add("tabulator-row-odd"),a.classList.remove("tabulator-row-even"))}clear(){this.clearRows(),this.clearColumns()}render(){this.renderRows(),this.renderColumns()}rerender(l){this.rerenderRows(),this.rerenderColumns()}scrollToRowPosition(l,o,a){var c=this.rows().indexOf(l),f=l.getElement(),E=0;return new Promise((R,O)=>{if(c>-1){if(void 0===a&&(a=this.table.options.scrollToRowIfVisible),!a&&Ps.elVisible(f)&&(E=Ps.elOffset(f).top-Ps.elOffset(this.elementVertical).top)>0&&E<this.elementVertical.clientHeight-f.offsetHeight)return!1;switch(void 0===o&&(o=this.table.options.scrollToRowPosition),"nearest"===o&&(o=this.scrollToRowNearestTop(l)?"top":"bottom"),this.scrollToRow(l),o){case"middle":case"center":this.elementVertical.scrollTop=this.elementVertical.scrollHeight-this.elementVertical.scrollTop==this.elementVertical.clientHeight?this.elementVertical.scrollTop+(f.offsetTop-this.elementVertical.scrollTop)-(this.elementVertical.scrollHeight-f.offsetTop)/2:this.elementVertical.scrollTop-this.elementVertical.clientHeight/2;break;case"bottom":this.elementVertical.scrollTop=this.elementVertical.scrollHeight-this.elementVertical.scrollTop==this.elementVertical.clientHeight?this.elementVertical.scrollTop-(this.elementVertical.scrollHeight-f.offsetTop)+f.offsetHeight:this.elementVertical.scrollTop-this.elementVertical.clientHeight+f.offsetHeight}R()}else console.warn("Scroll Error - Row not visible"),O("Scroll Error - Row not visible")})}}class rf extends Cd{constructor(l){super(l)}renderRowCells(l){l.cells.forEach(o=>{l.element.appendChild(o.getElement()),o.cellRendered()})}reinitializeColumnWidths(l){l.forEach(function(o){o.reinitializeWidth()})}}class sf extends Cd{constructor(l){super(l),this.leftCol=0,this.rightCol=0,this.scrollLeft=0,this.vDomScrollPosLeft=0,this.vDomScrollPosRight=0,this.vDomPadLeft=0,this.vDomPadRight=0,this.fitDataColAvg=0,this.window=200,this.initialized=!1,this.columns=[]}initialize(){this.compatabilityCheck()}compatabilityCheck(){var l=this.options("columns"),a=!0;return"fitDataTable"==this.options("layout")&&(console.warn("Horizontal Vitrual DOM is not compatible with fitDataTable layout mode"),a=!1),this.options("responsiveLayout")&&(console.warn("Horizontal Vitrual DOM is not compatible with responsive columns"),a=!1),this.options("rtl")&&(console.warn("Horizontal Vitrual DOM is not currently compatible with RTL text direction"),a=!1),l&&l.find(c=>c.frozen)&&(console.warn("Horizontal Vitrual DOM is not compatible with frozen columns"),a=!1),a}renderColumns(l,o){this.dataChange()}scrollColumns(l,o){this.scrollLeft!=l&&(this.scrollLeft=l,this.scroll(l-(this.vDomScrollPosLeft+this.window)))}rerenderColumns(l,o){var a={cols:this.columns,leftCol:this.leftCol,rightCol:this.rightCol};if(!l||this.initialized){this.clear(),this.scrollLeft=this.elementVertical.scrollLeft,this.vDomScrollPosLeft=this.scrollLeft-this.window,this.vDomScrollPosRight=this.scrollLeft+this.elementVertical.clientWidth+this.window;var c=0;this.table.columnManager.columnsByIndex.forEach(f=>{var E={};if(f.visible){var R=f.getWidth();E.leftPos=c,E.rightPos=c+R,E.width=R,"fitData"===this.options("layout")&&(E.fitDataCheck=!0),c+R>this.vDomScrollPosLeft&&c<this.vDomScrollPosRight?(-1==this.leftCol&&(this.leftCol=this.columns.length,this.vDomPadLeft=c),this.rightCol=this.columns.length):-1!==this.leftCol&&(this.vDomPadRight+=R),this.columns.push(f),f.modules.vdomHoz=E,c+=R}}),this.tableElement.style.paddingLeft=this.vDomPadLeft+"px",this.tableElement.style.paddingRight=this.vDomPadRight+"px",this.initialized=!0,o||(!l||this.reinitChanged(a))&&this.renitializeRows(),this.elementVertical.scrollLeft=this.scrollLeft}}renderRowCells(l){this.initialized?this.initializeRow(l):l.cells.forEach(o=>{l.element.appendChild(o.getElement()),o.cellRendered()})}rerenderRowCells(l,o){this.reinitializeRow(l,o)}reinitializeColumnWidths(l){for(let o=this.leftCol;o<=this.rightCol;o++)this.columns[o].reinitializeWidth()}deinitialize(){this.initialized=!1}clear(){this.columns=[],this.leftCol=-1,this.rightCol=0,this.vDomScrollPosLeft=0,this.vDomScrollPosRight=0,this.vDomPadLeft=0,this.vDomPadRight=0}dataChange(){var f,c,l=!1,o=0,a=0;if("fitData"===this.options("layout")){if(this.table.columnManager.columnsByIndex.forEach(E=>{!E.definition.width&&E.visible&&(l=!0)}),l&&l&&this.table.rowManager.getDisplayRows().length&&(this.vDomScrollPosRight=this.scrollLeft+this.elementVertical.clientWidth+this.window,c=this.chain("rows-sample",[1],[],()=>this.table.rowManager.getDisplayRows()[0])[0])){for(f=c.getElement(),c.generateCells(),this.tableElement.appendChild(f),a=0;a<c.cells.length;a++){let O=c.cells[a];if(f.appendChild(O.getElement()),O.column.reinitializeWidth(),(o+=O.column.getWidth())>this.vDomScrollPosRight)break}for(f.parentNode.removeChild(f),this.fitDataColAvg=Math.floor(o/(a+1));a<this.table.columnManager.columnsByIndex.length;a++)this.table.columnManager.columnsByIndex[a].setWidth(this.fitDataColAvg);this.rerenderColumns(!1,!0)}}else"fitColumns"===this.options("layout")&&(this.layoutRefresh(),this.rerenderColumns(!1,!0))}reinitChanged(l){var o=!0;return l.cols.length!==this.columns.length||l.leftCol!==this.leftCol||l.rightCol!==this.rightCol||(l.cols.forEach((a,c)=>{a!==this.columns[c]&&(o=!1)}),!o)}renitializeRows(){this.table.rowManager.getVisibleRows().forEach(o=>{this.reinitializeRow(o,!0)})}scroll(l){this.vDomScrollPosLeft+=l,this.vDomScrollPosRight+=l,l>.8*this.elementVertical.clientWidth?this.rerenderColumns():l>0?(this.addColRight(),this.removeColLeft()):(this.addColLeft(),this.removeColRight())}colPositionAdjust(l,o,a){for(let c=l;c<o;c++){let f=this.columns[c];f.modules.vdomHoz.leftPos+=a,f.modules.vdomHoz.rightPos+=a}}addColRight(){var l=this.columns[this.rightCol+1];l&&l.modules.vdomHoz.leftPos<=this.vDomScrollPosRight&&(this.table.rowManager.getVisibleRows().forEach(a=>{if("group"!==a.type){var c=a.getCell(l);a.getElement().appendChild(c.getElement()),c.cellRendered()}}),this.fitDataColActualWidthCheck(l),this.rightCol++,this.rightCol>=this.columns.length-1?this.vDomPadRight=0:this.vDomPadRight-=l.getWidth(),this.tableElement.style.paddingRight=this.vDomPadRight+"px",this.addColRight())}addColLeft(){var l=this.columns[this.leftCol-1];l&&l.modules.vdomHoz.rightPos>=this.vDomScrollPosLeft&&(this.table.rowManager.getVisibleRows().forEach(c=>{if("group"!==c.type){var f=c.getCell(l);c.getElement().prepend(f.getElement()),f.cellRendered()}}),this.fitDataColActualWidthCheck(l),this.leftCol?this.vDomPadLeft-=l.getWidth():this.vDomPadLeft=0,this.tableElement.style.paddingLeft=this.vDomPadLeft+"px",this.leftCol--,this.addColLeft())}removeColRight(l){var o;(l=this.columns[this.rightCol])&&l.modules.vdomHoz.leftPos>this.vDomScrollPosRight&&(o=this.table.rowManager.getVisibleRows(),l.modules.vdomHoz.visible=!1,o.forEach(a=>{if("group"!==a.type){var c=a.getCell(l);a.getElement().removeChild(c.getElement())}}),this.vDomPadRight+=l.getWidth(),this.tableElement.style.paddingRight=this.vDomPadRight+"px",this.rightCol--,this.removeColRight())}removeColLeft(){var l=this.columns[this.leftCol];l&&l.modules.vdomHoz.rightPos<this.vDomScrollPosLeft&&(this.table.rowManager.getVisibleRows().forEach(a=>{if("group"!==a.type){var c=a.getCell(l);c.parentNode&&a.getElement().removeChild(c.getElement())}}),this.vDomPadLeft+=l.getWidth(),this.tableElement.style.paddingLeft=this.vDomPadLeft+"px",this.leftCol++,this.removeColLeft())}fitDataColActualWidthCheck(l){var o,a;l.modules.vdomHoz.fitDataCheck&&(l.reinitializeWidth(),(a=(o=l.getWidth())-l.modules.vdomHoz.width)&&(l.modules.vdomHoz.rightPos+=a,l.modules.vdomHoz.width=o,this.colPositionAdjust(this.rightCol+2,this.columns.length,a)),l.modules.vdomHoz.fitDataCheck=!1)}initializeRow(l){if("group"!==l.type){l.modules.vdomHoz={leftCol:this.leftCol,rightCol:this.rightCol};for(let o=this.leftCol;o<=this.rightCol;o++){let a=this.columns[o];if(a&&a.visible){let c=l.getCell(a);l.getElement().appendChild(c.getElement()),c.cellRendered()}}}}reinitializeRow(l,o){if("group"!==l.type&&(o||!l.modules.vdomHoz||l.modules.vdomHoz.leftCol!==this.leftCol||l.modules.vdomHoz.rightCol!==this.rightCol)){for(var a=l.getElement();a.firstChild;)a.removeChild(a.firstChild);this.initializeRow(l)}}}class lg extends Nc{constructor(l){super(l),this.blockHozScrollEvent=!1,this.headersElement=null,this.element=null,this.columns=[],this.columnsByIndex=[],this.columnsByField={},this.scrollLeft=0,this.optionsList=new Ud(this.table,"column definition"),this.renderer=null}initialize(){this.initializeRenderer(),this.headersElement=this.createHeadersElement(),this.element=this.createHeaderElement(),this.element.insertBefore(this.headersElement,this.element.firstChild),this.subscribe("scroll-horizontal",this.scrollHorizontal.bind(this))}initializeRenderer(){var l;(l="string"==typeof this.table.options.renderHorizontal?{virtual:sf,basic:rf}[this.table.options.renderHorizontal]:this.table.options.renderHorizontal)?(this.renderer=new l(this.table,this.element,this.tableElement),this.renderer.initialize()):console.error("Unable to find matching renderer:",table.options.renderHorizontal)}createHeadersElement(){var l=document.createElement("div");return l.classList.add("tabulator-headers"),l.setAttribute("role","row"),l}createHeaderElement(){var l=document.createElement("div");return l.classList.add("tabulator-header"),l.setAttribute("role","rowgroup"),this.table.options.headerVisible||l.classList.add("tabulator-header-hidden"),l}getElement(){return this.element}getHeadersElement(){return this.headersElement}scrollHorizontal(l){var a=this.element.scrollWidth-this.table.element.clientWidth;this.element.scrollLeft=l,this.element.style.marginLeft=l>a?-(l-a)+"px":0,this.scrollLeft=l,this.renderer.scrollColumns(l)}generateColumnsFromRowData(l){var c,f,o=[],a=this.table.options.autoColumnsDefinitions;if(l&&l.length){for(var E in c=l[0]){let R={field:E,title:E},O=c[E];switch(typeof O){case"undefined":f="string";break;case"boolean":f="boolean";break;case"object":f=Array.isArray(O)?"array":"string";break;default:f=isNaN(O)||""===O?O.match(/((^[0-9]+[a-z]+)|(^[a-z]+[0-9]+))+$/i)?"alphanum":"string":"number"}R.sorter=f,o.push(R)}if(a)switch(typeof a){case"function":this.table.options.columns=a.call(this.table,o);break;case"object":Array.isArray(a)?o.forEach(R=>{var O=a.find(F=>F.field===R.field);O&&Object.assign(R,O)}):o.forEach(R=>{a[R.field]&&Object.assign(R,a[R.field])}),this.table.options.columns=o}else this.table.options.columns=o;this.setColumns(this.table.options.columns)}}setColumns(l,o){for(;this.headersElement.firstChild;)this.headersElement.removeChild(this.headersElement.firstChild);this.columns=[],this.columnsByIndex=[],this.columnsByField={},this.dispatch("columns-loading"),l.forEach((a,c)=>{this._addColumn(a)}),this._reIndexColumns(),this.dispatch("columns-loaded"),this.renderer.rerenderColumns(!1,!0),this.redraw(!0)}_addColumn(l,o,a){var c=new qu(l,this),f=c.getElement(),E=a&&this.findColumnIndex(a);if(a&&E>-1){var R=a.getTopColumn(),O=this.columns.indexOf(R),F=R.getElement();o?(this.columns.splice(O,0,c),F.parentNode.insertBefore(f,F)):(this.columns.splice(O+1,0,c),F.parentNode.insertBefore(f,F.nextSibling))}else o?(this.columns.unshift(c),this.headersElement.insertBefore(c.getElement(),this.headersElement.firstChild)):(this.columns.push(c),this.headersElement.appendChild(c.getElement()));return c.columnRendered(),c}registerColumnField(l){l.definition.field&&(this.columnsByField[l.definition.field]=l)}registerColumnPosition(l){this.columnsByIndex.push(l)}_reIndexColumns(){this.columnsByIndex=[],this.columns.forEach(function(l){l.reRegisterPosition()})}verticalAlignHeaders(){var l=0;this.columns.forEach(o=>{var a;o.clearVerticalAlign(),(a=o.getHeight())>l&&(l=a)}),this.columns.forEach(o=>{o.verticalAlign(this.table.options.columnHeaderVertAlign,l)}),this.table.rowManager.adjustTableSize()}findColumn(l){return"object"!=typeof l?this.columnsByField[l]||!1:l instanceof qu?l:l instanceof _u?l._getSelf()||!1:"undefined"!=typeof HTMLElement&&l instanceof HTMLElement&&this.columns.find(a=>a.element===l)||!1}getColumnByField(l){return this.columnsByField[l]}getColumnsByFieldRoot(l){var o=[];return Object.keys(this.columnsByField).forEach(a=>{a.split(".")[0]===l&&o.push(this.columnsByField[a])}),o}getColumnByIndex(l){return this.columnsByIndex[l]}getFirstVisibileColumn(l){return(l=this.columnsByIndex.findIndex(o=>o.visible))>-1&&this.columnsByIndex[l]}getColumns(){return this.columns}findColumnIndex(l){return this.columnsByIndex.findIndex(o=>l===o)}getRealColumns(){return this.columnsByIndex}traverse(l){this.columnsByIndex.forEach((o,a)=>{l(o,a)})}getDefinitions(l){var o=[];return this.columnsByIndex.forEach(a=>{(!l||l&&a.visible)&&o.push(a.getDefinition())}),o}getDefinitionTree(){var l=[];return this.columns.forEach(o=>{l.push(o.getDefinition(!0))}),l}getComponents(l){var o=[];return(l?this.columns:this.columnsByIndex).forEach(c=>{o.push(c.getComponent())}),o}getWidth(){var l=0;return this.columnsByIndex.forEach(o=>{o.visible&&(l+=o.getWidth())}),l}moveColumn(l,o,a){this.moveColumnActual(l,o,a),o.element.parentNode.insertBefore(l.element,o.element),a&&o.element.parentNode.insertBefore(o.element,l.element),this.verticalAlignHeaders(),this.table.rowManager.reinitialize()}moveColumnActual(l,o,a){this._moveColumnInArray(l.parent.isGroup?l.parent.columns:this.columns,l,o,a),this._moveColumnInArray(this.columnsByIndex,l,o,a,!0),this.renderer.rerenderColumns(!0),this.dispatch("column-moved",l,o,a),this.subscribedExternal("columnMoved")&&this.dispatchExternal("columnMoved",l.getComponent(),this.table.columnManager.getComponents())}_moveColumnInArray(l,o,a,c,f){var R,E=l.indexOf(o);E>-1&&(l.splice(E,1),(R=l.indexOf(a))>-1?c&&(R+=1):R=E,l.splice(R,0,o),f&&(this.chain("column-moving-rows",[o,a,c],null,[])||[]).concat(this.table.rowManager.rows).forEach(function(F){if(F.cells.length){var J=F.cells.splice(E,1)[0];F.cells.splice(R,0,J)}}))}scrollToColumn(l,o,a){var c=0,f=0,E=0,R=l.getElement();return new Promise((O,F)=>{if(void 0===o&&(o=this.table.options.scrollToColumnPosition),void 0===a&&(a=this.table.options.scrollToColumnIfVisible),l.visible){switch(o){case"middle":case"center":E=-this.element.clientWidth/2;break;case"right":E=R.clientWidth-this.headersElement.clientWidth}if(!a&&(f=R.offsetLeft)>0&&f+R.offsetWidth<this.element.clientWidth)return!1;c=R.offsetLeft+E,c=Math.max(Math.min(c,this.table.rowManager.element.scrollWidth-this.table.rowManager.element.clientWidth),0),this.table.rowManager.scrollHorizontal(c),this.scrollHorizontal(c),O()}else console.warn("Scroll Error - Column not visible"),F("Scroll Error - Column not visible")})}generateCells(l){var o=[];return this.columnsByIndex.forEach(a=>{o.push(a.generateCell(l))}),o}getFlexBaseWidth(){var l=this.table.element.clientWidth,o=0;return this.table.rowManager.element.scrollHeight>this.table.rowManager.element.clientHeight&&(l-=this.table.rowManager.element.offsetWidth-this.table.rowManager.element.clientWidth),this.columnsByIndex.forEach(function(a){var c,f,E;a.visible&&(c=a.definition.width||0,f=parseInt(a.minWidth),E="string"==typeof c?c.indexOf("%")>-1?l/100*parseInt(c):parseInt(c):c,o+=E>f?E:f)}),o}addColumn(l,o,a){return new Promise((c,f)=>{var E=this._addColumn(l,o,a);this._reIndexColumns(),this.dispatch("column-add",l,o,a),"fitColumns"!=this.layoutMode()&&E.reinitializeWidth(),this.redraw(!0),this.table.rowManager.reinitialize(),this.renderer.rerenderColumns(),c(E)})}deregisterColumn(l){var a,o=l.getField();o&&delete this.columnsByField[o],(a=this.columnsByIndex.indexOf(l))>-1&&this.columnsByIndex.splice(a,1),(a=this.columns.indexOf(l))>-1&&this.columns.splice(a,1),this.verticalAlignHeaders(),this.redraw()}redraw(l){Ps.elVisible(this.element)&&this.verticalAlignHeaders(),l&&(this.table.rowManager.resetScroll(),this.table.rowManager.reinitialize()),this.confirm("table-redrawing",l)||this.layoutRefresh(),this.dispatch("table-redraw",l),this.table.footerManager.redraw()}}class gp extends Cd{constructor(l){super(l),this.verticalFillMode="fill",this.scrollTop=0,this.scrollLeft=0,this.scrollTop=0,this.scrollLeft=0}clearRows(){for(var l=this.tableElement;l.firstChild;)l.removeChild(l.firstChild);l.scrollTop=0,l.scrollLeft=0,l.style.minWidth="",l.style.minHeight="",l.style.display="",l.style.visibility=""}renderRows(){var l=this.tableElement,o=!0;this.rows().forEach((a,c)=>{this.styleRow(a,c),l.appendChild(a.getElement()),a.initialize(!0),"group"!==a.type&&(o=!1)}),l.style.minWidth=o?this.table.columnManager.getWidth()+"px":""}rerenderRows(l){this.render(),l&&l()}scrollToRowNearestTop(l){var o=Ps.elOffset(l.getElement()).top;return!(Math.abs(this.elementVertical.scrollTop-o)>Math.abs(this.elementVertical.scrollTop+this.elementVertical.clientHeight-o))}scrollToRow(l){var o=l.getElement();this.elementVertical.scrollTop=Ps.elOffset(o).top-Ps.elOffset(this.elementVertical).top+this.elementVertical.scrollTop}visibleRows(l){return this.rows()}}class cg extends Cd{constructor(l){super(l),this.verticalFillMode="fill",this.scrollTop=0,this.scrollLeft=0,this.vDomRowHeight=20,this.vDomTop=0,this.vDomBottom=0,this.vDomScrollPosTop=0,this.vDomScrollPosBottom=0,this.vDomTopPad=0,this.vDomBottomPad=0,this.vDomMaxRenderChain=90,this.vDomWindowBuffer=0,this.vDomWindowMinTotalRows=20,this.vDomWindowMinMarginRows=5,this.vDomTopNewRows=[],this.vDomBottomNewRows=[]}clearRows(){for(var l=this.tableElement;l.firstChild;)l.removeChild(l.firstChild);l.style.paddingTop="",l.style.paddingBottom="",l.style.minWidth="",l.style.minHeight="",l.style.display="",l.style.visibility="",this.elementVertical.scrollTop=0,this.elementVertical.scrollLeft=0,this.scrollTop=0,this.scrollLeft=0,this.vDomTop=0,this.vDomBottom=0,this.vDomTopPad=0,this.vDomBottomPad=0,this.vDomScrollPosTop=0,this.vDomScrollPosBottom=0}renderRows(){this._virtualRenderFill()}rerenderRows(l){for(var o=this.elementVertical.scrollTop,a=!1,c=!1,f=this.table.rowManager.scrollLeft,E=this.rows(),R=this.vDomTop;R<=this.vDomBottom;R++)if(E[R]){var O=o-E[R].getElement().offsetTop;if(!(!1===c||Math.abs(O)<c))break;c=O,a=R}E.forEach(F=>{F.deinitializeHeight()}),l&&l(),this._virtualRenderFill(!1===a?this.rows.length-1:a,!0,c||0),this.scrollColumns(f)}scrollColumns(l){this.table.rowManager.scrollHorizontal(l)}scrollRows(l,o){var a=l-this.vDomScrollPosTop,c=l-this.vDomScrollPosBottom,f=2*this.vDomWindowBuffer,E=this.rows();if(this.scrollTop=l,-a>f||c>f){var R=this.table.rowManager.scrollLeft;this._virtualRenderFill(Math.floor(this.elementVertical.scrollTop/this.elementVertical.scrollHeight*E.length)),this.scrollColumns(R)}else o?(a<0&&this._addTopRow(E,-a),c<0&&(this.vDomScrollHeight-this.scrollTop>this.vDomWindowBuffer?this._removeBottomRow(E,-c):this.vDomScrollPosBottom=this.scrollTop)):(c>=0&&this._addBottomRow(E,c),a>=0&&(this.scrollTop>this.vDomWindowBuffer?this._removeTopRow(E,a):this.vDomScrollPosTop=this.scrollTop))}resize(){this.vDomWindowBuffer=this.table.options.renderVerticalBuffer||this.elementVertical.clientHeight}scrollToRowNearestTop(l){var o=this.rows().indexOf(l);return!(Math.abs(this.vDomTop-o)>Math.abs(this.vDomBottom-o))}scrollToRow(l){var o=this.rows().indexOf(l);o>-1&&this._virtualRenderFill(o,!0)}visibleRows(l){var o=this.elementVertical.scrollTop,a=this.elementVertical.clientHeight+o,c=!1,f=0,E=0,R=this.rows();if(l)f=this.vDomTop,E=this.vDomBottom;else for(var O=this.vDomTop;O<=this.vDomBottom;O++)if(R[O])if(c){if(!(a-R[O].getElement().offsetTop>=0))break;E=O}else if(o-R[O].getElement().offsetTop>=0)f=O;else{if(c=!0,!(a-R[O].getElement().offsetTop>=0))break;E=O}return R.slice(f,E+1)}_virtualRenderFill(l,o,a){var c=this.tableElement,f=this.elementVertical,E=0,R=0,O=0,F=0,J=0,dt=this.rows(),Ft=dt.length,qt=this.elementVertical.clientHeight;if(a=a||0,l=l||0){for(;c.firstChild;)c.removeChild(c.firstChild);(O=(Ft-l+1)*this.vDomRowHeight)<qt&&(l-=Math.ceil((qt-O)/this.vDomRowHeight))<0&&(l=0),l-=E=Math.min(Math.max(Math.floor(this.vDomWindowBuffer/this.vDomRowHeight),this.vDomWindowMinMarginRows),l)}else this.clear();if(Ft&&Ps.elVisible(this.elementVertical)){for(this.vDomTop=l,this.vDomBottom=l-1;(R<=qt+this.vDomWindowBuffer||J<this.vDomWindowMinTotalRows)&&this.vDomBottom<Ft-1;){var Ge,Ee=this.vDomBottom+1,De=dt[Ee];this.styleRow(De,Ee),c.appendChild(De.getElement()),De.initialize(),De.heightInitialized||De.normalizeHeight(!0),Ge=De.getHeight(),J<E?F+=Ge:R+=Ge,Ge>this.vDomWindowBuffer&&(this.vDomWindowBuffer=2*Ge),this.vDomBottom++,J++}l?(this.vDomTopPad=o?this.vDomRowHeight*this.vDomTop+a:this.scrollTop-F,this.vDomBottomPad=this.vDomBottom==Ft-1?0:Math.max(this.vDomScrollHeight-this.vDomTopPad-R-F,0)):(this.vDomTopPad=0,this.vDomRowHeight=Math.floor((R+F)/J),this.vDomBottomPad=this.vDomRowHeight*(Ft-this.vDomBottom-1),this.vDomScrollHeight=F+R+this.vDomBottomPad-qt),c.style.paddingTop=this.vDomTopPad+"px",c.style.paddingBottom=this.vDomBottomPad+"px",o&&(this.scrollTop=this.vDomTopPad+F+a-(this.elementVertical.scrollWidth>this.elementVertical.clientWidth?this.elementVertical.offsetHeight-qt:0)),this.scrollTop=Math.min(this.scrollTop,this.elementVertical.scrollHeight-qt),this.elementVertical.scrollWidth>this.elementVertical.offsetWidth&&o&&(this.scrollTop+=this.elementVertical.offsetHeight-qt),this.vDomScrollPosTop=this.scrollTop,this.vDomScrollPosBottom=this.scrollTop,f.scrollTop=this.scrollTop,this.dispatch("render-virtual-fill")}}_addTopRow(l,o){for(var a=this.tableElement,c=[],f=0,E=this.vDomTop-1,R=0;this.vDomTop;){let F,J,O=l[E];if(!(O&&R<this.vDomMaxRenderChain))break;if(F=O.getHeight()||this.vDomRowHeight,J=O.initialized,!(o>=F))break;this.styleRow(O,E),a.insertBefore(O.getElement(),a.firstChild),(!O.initialized||!O.heightInitialized)&&c.push(O),O.initialize(),J||(F=O.getElement().offsetHeight,F>this.vDomWindowBuffer&&(this.vDomWindowBuffer=2*F)),o-=F,f+=F,this.vDomTop--,E--,R++}for(let O of c)O.clearCellHeight();this._quickNormalizeRowHeight(c),f&&(this.vDomTopPad-=f,this.vDomTopPad<0&&(this.vDomTopPad=E*this.vDomRowHeight),E<1&&(this.vDomTopPad=0),a.style.paddingTop=this.vDomTopPad+"px",this.vDomScrollPosTop-=f)}_removeTopRow(l,o){for(var a=[],c=0,f=0;;){let R,E=l[this.vDomTop];if(!(E&&f<this.vDomMaxRenderChain))break;if(R=E.getHeight()||this.vDomRowHeight,!(o>=R))break;this.vDomTop++,o-=R,c+=R,a.push(E),f++}for(let E of a){let R=E.getElement();R.parentNode&&R.parentNode.removeChild(R)}c&&(this.vDomTopPad+=c,this.tableElement.style.paddingTop=this.vDomTopPad+"px",this.vDomScrollPosTop+=this.vDomTop?c:c+this.vDomWindowBuffer)}_addBottomRow(l,o){for(var a=this.tableElement,c=[],f=0,E=this.vDomBottom+1,R=0;;){let F,J,O=l[E];if(!(O&&R<this.vDomMaxRenderChain))break;if(F=O.getHeight()||this.vDomRowHeight,J=O.initialized,!(o>=F))break;this.styleRow(O,E),a.appendChild(O.getElement()),(!O.initialized||!O.heightInitialized)&&c.push(O),O.initialize(),J||(F=O.getElement().offsetHeight,F>this.vDomWindowBuffer&&(this.vDomWindowBuffer=2*F)),o-=F,f+=F,this.vDomBottom++,E++,R++}for(let O of c)O.clearCellHeight();this._quickNormalizeRowHeight(c),f&&(this.vDomBottomPad-=f,(this.vDomBottomPad<0||E==l.length-1)&&(this.vDomBottomPad=0),a.style.paddingBottom=this.vDomBottomPad+"px",this.vDomScrollPosBottom+=f)}_removeBottomRow(l,o){for(var a=[],c=0,f=0;;){let R,E=l[this.vDomBottom];if(!(E&&f<this.vDomMaxRenderChain))break;if(R=E.getHeight()||this.vDomRowHeight,!(o>=R))break;this.vDomBottom--,o-=R,c+=R,a.push(E),f++}for(let E of a){let R=E.getElement();R.parentNode&&R.parentNode.removeChild(R)}c&&(this.vDomBottomPad+=c,this.vDomBottomPad<0&&(this.vDomBottomPad=0),this.tableElement.style.paddingBottom=this.vDomBottomPad+"px",this.vDomScrollPosBottom-=c)}_quickNormalizeRowHeight(l){for(let o of l)o.calcHeight();for(let o of l)o.setCellHeight()}}class ug extends Nc{constructor(l){super(l),this.element=this.createHolderElement(),this.tableElement=this.createTableElement(),this.heightFixer=this.createTableElement(),this.firstRender=!1,this.renderMode="virtual",this.fixedHeight=!1,this.rows=[],this.activeRowsPipeline=[],this.activeRows=[],this.activeRowsCount=0,this.displayRows=[],this.displayRowsCount=0,this.scrollTop=0,this.scrollLeft=0,this.rowNumColumn=!1,this.redrawBlock=!1,this.redrawBlockRestoreConfig=!1,this.redrawBlockRederInPosition=!1,this.dataPipeline=[],this.displayPipeline=[],this.renderer=null}createHolderElement(){var l=document.createElement("div");return l.classList.add("tabulator-tableholder"),l.setAttribute("tabindex",0),l.setAttribute("role","rowgroup"),l}createTableElement(){var l=document.createElement("div");return l.classList.add("tabulator-table"),l.setAttribute("role","rowgroup"),l}getElement(){return this.element}getTableElement(){return this.tableElement}getRowPosition(l,o){return o?this.activeRows.indexOf(l):this.rows.indexOf(l)}initialize(){this.initializeRenderer(),this.element.appendChild(this.tableElement),this.firstRender=!0,this.element.addEventListener("scroll",()=>{var l=this.element.scrollLeft,o=this.scrollLeft>l,a=this.element.scrollTop,c=this.scrollTop>a;this.scrollLeft!=l&&(this.scrollLeft=l,this.dispatch("scroll-horizontal",l,o),this.dispatchExternal("scrollHorizontal",l,o)),this.scrollTop!=a&&(this.scrollTop=a,this.renderer.scrollRows(a,c),this.dispatch("scroll-vertical",a,c),this.dispatchExternal("scrollVertical",a,c))})}findRow(l){return"object"!=typeof l?null!=l&&(this.rows.find(a=>a.data[this.table.options.index]==l)||!1):l instanceof ol?l:l instanceof gd?l._getSelf()||!1:"undefined"!=typeof HTMLElement&&l instanceof HTMLElement&&this.rows.find(a=>a.getElement()===l)||!1}getRowFromDataObject(l){return this.rows.find(a=>a.data===l)||!1}getRowFromPosition(l,o){return o?this.activeRows[l]:this.rows[l]}scrollToRow(l,o,a){return this.renderer.scrollToRowPosition(l,o,a)}setData(l,o,a){return new Promise((c,f)=>{o&&this.getDisplayRows().length?this.table.options.pagination?this._setDataActual(l,!0):this.reRenderInPosition(()=>{this._setDataActual(l)}):(this.table.options.autoColumns&&a&&this.table.initialized&&this.table.columnManager.generateColumnsFromRowData(l),this.resetScroll(),this._setDataActual(l)),c()})}_setDataActual(l,o){this.dispatchExternal("dataProcessing",l),this._wipeElements(),Array.isArray(l)?(this.dispatch("data-processing",l),l.forEach((a,c)=>{if(a&&"object"==typeof a){var f=new ol(a,this);this.rows.push(f)}else console.warn("Data Loading Warning - Invalid row data detected and ignored, expecting object but received:",a)}),this.refreshActiveData(!1,!1,o),this.dispatch("data-processed",l),this.dispatchExternal("dataProcessed",l)):console.error("Data Loading Error - Unable to process data due to invalid data type \nExpecting: array \nReceived: ",typeof l,"\nData:     ",l)}_wipeElements(){this.dispatch("rows-wipe"),this.rows.forEach(l=>{l.wipe()}),this.rows=[],this.activeRows=[],this.activeRowsPipeline=[],this.activeRowsCount=0,this.displayRows=[],this.displayRowsCount=0,this.adjustTableSize()}deleteRow(l,o){var a=this.rows.indexOf(l),c=this.activeRows.indexOf(l);c>-1&&this.activeRows.splice(c,1),a>-1&&this.rows.splice(a,1),this.setActiveRows(this.activeRows),this.displayRowIterator(f=>{var E=f.indexOf(l);E>-1&&f.splice(E,1)}),o||this.reRenderInPosition(),this.regenerateRowNumbers(),this.dispatchExternal("rowDeleted",l.getComponent()),this.displayRowsCount||this._showPlaceholder(),this.subscribedExternal("dataChanged")&&this.dispatchExternal("dataChanged",this.getData())}addRow(l,o,a,c){var f=this.addRowActual(l,o,a,c);return this.dispatch("row-added",f,l,o,a),f}addRows(l,o,a){var c=[];return new Promise((f,E)=>{o=this.findAddRowPos(o),Array.isArray(l)||(l=[l]),(void 0===a&&o||void 0!==a&&!o)&&l.reverse(),l.forEach((R,O)=>{var F=this.addRow(R,o,a,!0);c.push(F),this.dispatch("row-added",F,l,o,a)}),this.refreshActiveData(!1,!1,!0),this.regenerateRowNumbers(),c.length&&this._clearPlaceholder(),f(c)})}findAddRowPos(l){return void 0===l&&(l=this.table.options.addRowPos),"pos"===l&&(l=!0),"bottom"===l&&(l=!1),l}addRowActual(l,o,a,c){var O,F,f=l instanceof ol?l:new ol(l||{},this),E=this.findAddRowPos(o),R=-1;return a||(F=this.chain("row-adding-position",[f,E],null,{index:a,top:E}),a=F.index,E=F.top),void 0!==a&&(a=this.findRow(a)),(a=this.chain("row-adding-index",[f,a,E],null,a))&&(R=this.rows.indexOf(a)),a&&R>-1?(O=this.activeRows.indexOf(a),this.displayRowIterator(function(J){var dt=J.indexOf(a);dt>-1&&J.splice(E?dt:dt+1,0,f)}),O>-1&&this.activeRows.splice(E?O:O+1,0,f),this.rows.splice(E?R:R+1,0,f)):E?(this.displayRowIterator(function(J){J.unshift(f)}),this.activeRows.unshift(f),this.rows.unshift(f)):(this.displayRowIterator(function(J){J.push(f)}),this.activeRows.push(f),this.rows.push(f)),this.setActiveRows(this.activeRows),this.dispatchExternal("rowAdded",f.getComponent()),this.subscribedExternal("dataChanged")&&this.dispatchExternal("dataChanged",this.table.rowManager.getData()),c||this.reRenderInPosition(),f}moveRow(l,o,a){this.dispatch("row-move",l,o,a),this.moveRowActual(l,o,a),this.regenerateRowNumbers(),this.dispatch("row-moved",l,o,a),this.dispatchExternal("rowMoved",l.getComponent())}moveRowActual(l,o,a){this.moveRowInArray(this.rows,l,o,a),this.moveRowInArray(this.activeRows,l,o,a),this.displayRowIterator(c=>{this.moveRowInArray(c,l,o,a)}),this.dispatch("row-moving",l,o,a)}moveRowInArray(l,o,a,c){var f,E,O;if(o!==a&&((f=l.indexOf(o))>-1&&(l.splice(f,1),E=l.indexOf(a),l.splice(E>-1?c?E+1:E:f,0,o)),l===this.getDisplayRows())){O=E>f?E:f+1;for(let F=f<E?f:E;F<=O;F++)l[F]&&this.styleRow(l[F],F)}}clearData(){this.setData([])}getRowIndex(l){return this.findRowIndex(l,this.rows)}getDisplayRowIndex(l){var o=this.getDisplayRows().indexOf(l);return o>-1&&o}nextDisplayRow(l,o){var a=this.getDisplayRowIndex(l),c=!1;return!1!==a&&a<this.displayRowsCount-1&&(c=this.getDisplayRows()[a+1]),!c||c instanceof ol&&"row"==c.type?c:this.nextDisplayRow(c,o)}prevDisplayRow(l,o){var a=this.getDisplayRowIndex(l),c=!1;return a&&(c=this.getDisplayRows()[a-1]),!o||!c||c instanceof ol&&"row"==c.type?c:this.prevDisplayRow(c,o)}findRowIndex(l,o){var a;return!!((l=this.findRow(l))&&(a=o.indexOf(l),a>-1))&&a}getData(l,o){var a=[];return this.getRows(l).forEach(function(f){"row"==f.type&&a.push(f.getData(o||"data"))}),a}getComponents(l){var o=[];return this.getRows(l).forEach(function(c){o.push(c.getComponent())}),o}getDataCount(l){return this.getRows(l).length}scrollHorizontal(l){this.scrollLeft=l,this.element.scrollLeft=l,this.dispatch("scroll-horizontal",l)}registerDataPipelineHandler(l,o){void 0!==o?(this.dataPipeline.push({handler:l,priority:o}),this.dataPipeline.sort((a,c)=>a.priority-c.priority)):console.error("Data pipeline handlers must have a priority in order to be registered")}registerDisplayPipelineHandler(l,o){void 0!==o?(this.displayPipeline.push({handler:l,priority:o}),this.displayPipeline.sort((a,c)=>a.priority-c.priority)):console.error("Display pipeline handlers must have a priority in order to be registered")}refreshActiveData(l,o,a){var c=this.table,f="",E=0,R=["all","dataPipeline","display","displayPipeline","end"];if("function"==typeof l)if((E=this.dataPipeline.findIndex(O=>O.handler===l))>-1)f="dataPipeline",o&&(E==this.dataPipeline.length-1?f="display":E++);else{if(!((E=this.displayPipeline.findIndex(O=>O.handler===l))>-1))return void console.error("Unable to refresh data, invalid handler provided",l);f="displayPipeline",o&&(E==this.displayPipeline.length-1?f="end":E++)}else f=l||"all",E=0;if(this.redrawBlock)(!this.redrawBlockRestoreConfig||this.redrawBlockRestoreConfig&&(this.redrawBlockRestoreConfig.stage===f&&E<this.redrawBlockRestoreConfig.index||R.indexOf(f)<R.indexOf(this.redrawBlockRestoreConfig.stage)))&&(this.redrawBlockRestoreConfig={handler:l,skipStage:o,renderInPosition:a,stage:f,index:E});else{switch(this.dispatch("data-refeshing"),l||(this.activeRowsPipeline[0]=this.rows.slice(0)),f){case"all":case"dataPipeline":for(let O=E;O<this.dataPipeline.length;O++){let F=this.dataPipeline[O].handler(this.activeRowsPipeline[O].slice(0));this.activeRowsPipeline[O+1]=F||this.activeRowsPipeline[O].slice(0)}this.setActiveRows(this.activeRowsPipeline[this.dataPipeline.length]),this.regenerateRowNumbers();case"display":E=0,this.resetDisplayRows();case"displayPipeline":for(let O=E;O<this.displayPipeline.length;O++){let F=this.displayPipeline[O].handler((O?this.getDisplayRows(O-1):this.activeRows).slice(0),a);this.setDisplayRows(F||this.getDisplayRows(O-1).slice(0),O)}}Ps.elVisible(this.element)&&(a?this.reRenderInPosition():(l||this.table.columnManager.renderer.renderColumns(),this.renderTable(),c.options.layoutColumnsOnNewData&&this.table.columnManager.redraw(!0))),this.dispatch("data-refeshed")}}regenerateRowNumbers(){this.rowNumColumn&&this.activeRows.forEach(l=>{var o=l.getCell(this.rowNumColumn);o&&o._generateContents()})}setActiveRows(l){this.activeRows=l,this.activeRowsCount=this.activeRows.length}resetDisplayRows(){this.displayRows=[],this.displayRows.push(this.activeRows.slice(0)),this.displayRowsCount=this.displayRows[0].length}getNextDisplayIndex(){return this.displayRows.length}setDisplayRows(l,o){var a=!0;return o&&void 0!==this.displayRows[o]?(this.displayRows[o]=l,a=!0):(this.displayRows.push(l),a=o=this.displayRows.length-1),o==this.displayRows.length-1&&(this.displayRowsCount=this.displayRows[this.displayRows.length-1].length),a}getDisplayRows(l){return void 0===l?this.displayRows.length?this.displayRows[this.displayRows.length-1]:[]:this.displayRows[l]||[]}getVisibleRows(l){return this.renderer.visibleRows(!l)}displayRowIterator(l){this.activeRowsPipeline.forEach(l),this.displayRows.forEach(l),this.displayRowsCount=this.displayRows[this.displayRows.length-1].length}getRows(l){var o;switch(l){case"active":o=this.activeRows;break;case"display":o=this.table.rowManager.getDisplayRows();break;case"visible":o=this.getVisibleRows(!0);break;default:o=this.chain("rows-retrieve",l,null,this.rows)||this.rows}return o}reRenderInPosition(l){this.redrawBlock?l?l():this.redrawBlockRederInPosition=!0:this.renderer.rerenderRows(l)}initializeRenderer(){var l;(l="string"==typeof this.table.options.renderVertical?{virtual:cg,basic:gp}[this.table.options.renderVertical]:this.table.options.renderVertical)?(this.renderer=new l(this.table,this.element,this.tableElement),this.renderer.initialize(),this.fixedHeight=!(!this.table.element.clientHeight&&!this.table.options.height)):console.error("Unable to find matching renderer:",table.options.renderVertical)}getRenderMode(){return this.renderMode}renderTable(){this.dispatchExternal("renderStarted"),this.element.scrollTop=0,this._clearTable(),this.displayRowsCount?(this.renderer.renderRows(),this.firstRender&&(this.firstRender=!1,this.layoutRefresh())):this.renderEmptyScroll(),this.fixedHeight||this.adjustTableSize(),this.dispatch("table-layout"),this.displayRowsCount||this._showPlaceholder(),this.dispatchExternal("renderComplete")}renderEmptyScroll(){this.table.options.placeholder?this.tableElement.style.display="none":this.tableElement.style.minWidth=this.table.columnManager.getWidth()+"px"}_clearTable(){this._clearPlaceholder(),this.scrollTop=0,this.scrollLeft=0,this.renderer.clearRows()}_showPlaceholder(){this.table.options.placeholder&&(this.table.options.placeholder.setAttribute("tabulator-render-mode",this.renderMode),this.getElement().appendChild(this.table.options.placeholder),this.table.options.placeholder.style.width=this.table.columnManager.getWidth()+"px")}_clearPlaceholder(){this.table.options.placeholder&&this.table.options.placeholder.parentNode&&this.table.options.placeholder.parentNode.removeChild(this.table.options.placeholder)}styleRow(l,o){var a=l.getElement();o%2?(a.classList.add("tabulator-row-even"),a.classList.remove("tabulator-row-odd")):(a.classList.add("tabulator-row-odd"),a.classList.remove("tabulator-row-even"))}normalizeHeight(){this.activeRows.forEach(function(l){l.normalizeHeight()})}adjustTableSize(){var l=this.element.clientHeight;if("fill"===this.renderer.verticalFillMode){let o=Math.floor(this.table.columnManager.getElement().getBoundingClientRect().height+(this.table.footerManager&&this.table.footerManager.active&&!this.table.footerManager.external?this.table.footerManager.getElement().getBoundingClientRect().height:0));this.fixedHeight?(this.element.style.minHeight="calc(100% - "+o+"px)",this.element.style.height="calc(100% - "+o+"px)",this.element.style.maxHeight="calc(100% - "+o+"px)"):(this.element.style.height="",this.element.style.height=this.table.element.clientHeight-o+"px",this.element.scrollTop=this.scrollTop),this.renderer.resize(),!this.fixedHeight&&l!=this.element.clientHeight&&(this.subscribed("table-resize")?this.dispatch("table-resize"):this.redraw())}}reinitialize(){this.rows.forEach(function(l){l.reinitialize(!0)})}blockRedraw(){this.redrawBlock=!0,this.redrawBlockRestoreConfig=!1}restoreRedraw(){this.redrawBlock=!1,this.redrawBlockRestoreConfig?(this.refreshActiveData(this.redrawBlockRestoreConfig.handler,this.redrawBlockRestoreConfig.skipStage,this.redrawBlockRestoreConfig.renderInPosition),this.redrawBlockRestoreConfig=!1):this.redrawBlockRederInPosition&&this.reRenderInPosition(),this.redrawBlockRederInPosition=!1}redraw(l){var o=this.scrollLeft;this.adjustTableSize(),this.table.tableWidth=this.table.element.clientWidth,l?this.renderTable():(this.reRenderInPosition(),this.scrollHorizontal(o),this.displayRowsCount||this.table.options.placeholder&&this.getElement().appendChild(this.table.options.placeholder))}resetScroll(){if(this.element.scrollLeft=0,this.element.scrollTop=0,"ie"===this.table.browser){var l=document.createEvent("Event");l.initEvent("scroll",!1,!0),this.element.dispatchEvent(l)}else this.element.dispatchEvent(new Event("scroll"))}}class af extends Nc{constructor(l){super(l),this.active=!1,this.element=this.createElement(),this.external=!1,this.links=[],this.initializeElement()}initialize(){this.initializeElement()}createElement(){var l=document.createElement("div");return l.classList.add("tabulator-footer"),l}initializeElement(){this.table.options.footerElement&&("string"==typeof this.table.options.footerElement?"<"===this.table.options.footerElement[0]?this.element.innerHTML=this.table.options.footerElement:(this.external=!0,this.element=document.querySelector(this.table.options.footerElement)):this.element=this.table.options.footerElement)}getElement(){return this.element}append(l,o){this.activate(o),this.element.appendChild(l),this.table.rowManager.adjustTableSize()}prepend(l,o){this.activate(o),this.element.insertBefore(l,this.element.firstChild),this.table.rowManager.adjustTableSize()}remove(l){l.parentNode.removeChild(l),this.deactivate()}deactivate(l){(!this.element.firstChild||l)&&(this.external||this.element.parentNode.removeChild(this.element),this.active=!1)}activate(l){this.active||(this.active=!0,this.external||(this.table.element.appendChild(this.getElement()),this.table.element.style.display="")),l&&this.links.push(l)}redraw(){this.links.forEach(function(l){l.footerRedraw()})}}class nd extends Nc{constructor(l){super(l),this.el=this.table.element,this.abortClasses=["tabulator-headers","tabulator-table"],this.previousTargets={},this.listeners=["click","dblclick","contextmenu","mouseenter","mouseleave","mouseover","mouseout","mousemove","touchstart","touchend"],this.componentMap={"tabulator-cell":"cell","tabulator-row":"row","tabulator-group":"group","tabulator-col":"column"},this.buildListenerMap(),this.bindSubscriptionWatchers()}buildListenerMap(){var l={};this.listeners.forEach(o=>{l[o]={handler:null,components:[]}}),this.listeners=l}bindSubscriptionWatchers(){var l=Object.keys(this.listeners),o=Object.values(this.componentMap);for(let a of o)for(let c of l)this.subscriptionChange(a+"-"+c,this.subscriptionChanged.bind(this,a,c))}subscriptionChanged(l,o,a){var c=this.listeners[o].components,f=c.indexOf(l),E=!1;a?-1===f&&(c.push(l),E=!0):this.subscribed(l+"-"+o)||f>-1&&(c.splice(f,1),E=!0),E&&this.updateEventListeners()}updateEventListeners(){for(let l in this.listeners){let o=this.listeners[l];o.components.length?o.handler||(o.handler=this.track.bind(this,l),this.el.addEventListener(l,o.handler)):o.handler&&(this.el.removeEventListener(l,o.handler),o.handler=null)}}track(l,o){var a=o.composedPath&&o.composedPath()||o.path,c=this.findTargets(a);c=this.bindComponents(l,c),this.triggerEvents(l,o,c)}findTargets(l){var o={};let a=Object.keys(this.componentMap);for(let c of l){let f=c.classList?[...c.classList]:[];if(f.filter(O=>this.abortClasses.includes(O)).length)break;let R=f.filter(O=>a.includes(O));for(let O of R)o[this.componentMap[O]]=c}return o.group&&o.group===o.row&&delete o.row,o}bindComponents(l,o){var a=Object.keys(o).reverse(),c=this.listeners[l],f={};for(let E of a){let R,O=o[E],F=this.previousTargets[E];if(F&&F.target===O)R=F.component;else switch(E){case"row":case"group":(c.components.includes("row")||c.components.includes("cell"))&&(R=this.table.rowManager.getVisibleRows().find(dt=>dt.getElement()===O));break;case"column":c.components.includes("column")&&(R=this.table.columnManager.findColumn(O));break;case"cell":c.components.includes("cell")&&(R=o.row.findCell(O))}R&&(o[E]=R,f[E]={target:O,component:R})}return this.previousTargets=f,o}triggerEvents(l,o,a){var c=this.listeners[l];for(let f in a)a[f]&&c.components.includes(f)&&this.dispatch(f+"-"+l,o,a[f])}}class lf{constructor(l){this.table=l,this.bindings={}}bind(l,o,a){this.bindings[l]||(this.bindings[l]={}),this.bindings[l][o]?console.warn("Unable to bind component handler, a matching function name is already bound",l,o,hanlder):this.bindings[l][o]=a}handle(l,o,a){if(this.bindings[l]&&this.bindings[l][a])return this.bindings[l][a].bind(null,o);"then"!==a&&"string"==typeof a&&!a.startsWith("_")&&console.error("The "+l+" component does not have a "+a+" function, have you checked that you have the correct Tabulator module installed?")}}class hg extends Nc{constructor(l){super(l),this.loaderElement=this.createLoaderElement(),this.msgElement=this.createMsgElement(),this.loadingElement=null,this.errorElement=null,this.requestOrder=0,this.loading=!1}initialize(){var l;this.loaderElement.appendChild(this.msgElement),this.table.options.dataLoaderLoading&&("string"==typeof this.table.options.dataLoaderLoading?((l=document.createElement("template")).innerHTML=this.table.options.dataLoaderLoading.trim(),this.loadingElement=l.firstElementChild):this.loadingElement=this.table.options.dataLoaderLoading),this.table.options.dataLoaderError&&("string"==typeof this.table.options.dataLoaderError?((l=document.createElement("template")).innerHTML=this.table.options.dataLoaderError.trim(),this.errorElement=l.firstElementChild):this.errorElement=this.table.options.dataLoaderError)}createLoaderElement(){var l=document.createElement("div");return l.classList.add("tabulator-loader"),l}createMsgElement(){var l=document.createElement("div");return l.classList.add("tabulator-loader-msg"),l.setAttribute("role","alert"),l}load(l,o,a,c,f){var E=++this.requestOrder;return this.dispatchExternal("dataLoading",l),l&&(0==l.indexOf("{")||0==l.indexOf("["))&&(l=JSON.parse(l)),this.confirm("data-loading",l,o,a,f)?(this.loading=!0,f||this.showLoader(),o=this.chain("data-params",[l,a,f],o||{},{}),o=this.mapParams(o,this.table.options.dataSendParams),this.chain("data-load",[l,o,a,f],Promise.resolve([])).then(F=>{!Array.isArray(F)&&"object"==typeof F&&(F=this.mapParams(F,this.objectInvert(this.table.options.dataReceiveParams)));var J=this.chain("data-loaded",F,null,F);E==this.requestOrder?(this.hideLoader(),!1!==J&&(this.dispatchExternal("dataLoaded",J),this.table.rowManager.setData(J,c,!c))):console.warn("Data Load Response Blocked - An active data load request was blocked by an attempt to change table data while the request was being made")}).catch(F=>{console.error("Data Load Error: ",F),this.dispatchExternal("dataLoadError",F),f||this.showError(),setTimeout(()=>{this.hideLoader()},3e3)}).finally(()=>{this.loading=!1})):(this.dispatchExternal("dataLoaded",l),l||(l=[]),this.table.rowManager.setData(l,c,!c),Promise.resolve())}mapParams(l,o){var a={};for(let c in l)a[o.hasOwnProperty(c)?o[c]:c]=l[c];return a}objectInvert(l){var o={};for(let a in l)o[l[a]]=a;return o}blockActiveLoad(){this.requestOrder++}showLoader(){if("function"==typeof this.table.options.dataLoader?this.table.options.dataLoader():this.table.options.dataLoader){for(this.hideLoader();this.msgElement.firstChild;)this.msgElement.removeChild(this.msgElement.firstChild);this.msgElement.classList.remove("tabulator-error"),this.msgElement.classList.add("tabulator-loading"),this.loadingElement?this.msgElement.appendChild(this.loadingElement):this.msgElement.innerHTML=this.langText("data|loading"),this.table.element.appendChild(this.loaderElement)}}showError(){for(this.hideLoader();this.msgElement.firstChild;)this.msgElement.removeChild(this.msgElement.firstChild);this.msgElement.classList.remove("tabulator-loading"),this.msgElement.classList.add("tabulator-error"),this.errorElement?this.msgElement.appendChild(this.errorElement):this.msgElement.innerHTML=this.langText("data|error"),this.table.element.appendChild(this.loaderElement)}hideLoader(){this.loaderElement.parentNode&&this.loaderElement.parentNode.removeChild(this.loaderElement)}}class dg{constructor(l,o,a){this.table=l,this.events={},this.optionsList=o||{},this.subscriptionNotifiers={},this.dispatch=a?this._debugDispatch.bind(this):this._dispatch.bind(this),this.debug=a}subscriptionChange(l,o){this.subscriptionNotifiers[l]||(this.subscriptionNotifiers[l]=[]),this.subscriptionNotifiers[l].push(o),this.subscribed(l)&&this._notifiySubscriptionChange(l,!0)}subscribe(l,o){this.events[l]||(this.events[l]=[]),this.events[l].push(o),this._notifiySubscriptionChange(l,!0)}unsubscribe(l,o){var a;if(this.events[l]){if(o){if(!((a=this.events[l].findIndex(c=>c===o))>-1))return void console.warn("Cannot remove event, no matching event found:",l,o);this.events[l].splice(a,1)}else delete this.events[l];this._notifiySubscriptionChange(l,!1)}else console.warn("Cannot remove event, no events set on:",l)}subscribed(l){return this.events[l]&&this.events[l].length}_notifiySubscriptionChange(l,o){var a=this.subscriptionNotifiers[l];a&&a.forEach(c=>{c(o)})}_dispatch(){var a,l=Array.from(arguments),o=l.shift();return this.events[o]&&this.events[o].forEach((c,f)=>{let E=c.apply(this.table,l);f||(a=E)}),a}_debugDispatch(){var l=Array.from(arguments),o=l[0];return l[0]="ExternalEvent:"+l[0],(!0===this.debug||this.debug.includes(o))&&console.log(...l),this._dispatch(...arguments)}}class rd{constructor(l){this.events={},this.subscriptionNotifiers={},this.dispatch=l?this._debugDispatch.bind(this):this._dispatch.bind(this),this.chain=l?this._debugChain.bind(this):this._chain.bind(this),this.confirm=l?this._debugConfirm.bind(this):this._confirm.bind(this),this.debug=l}subscriptionChange(l,o){this.subscriptionNotifiers[l]||(this.subscriptionNotifiers[l]=[]),this.subscriptionNotifiers[l].push(o),this.subscribed(l)&&this._notifiySubscriptionChange(l,!0)}subscribe(l,o,a=1e4){this.events[l]||(this.events[l]=[]),this.events[l].push({callback:o,priority:a}),this.events[l].sort((c,f)=>c.priority-f.priority),this._notifiySubscriptionChange(l,!0)}unsubscribe(l,o){var a;if(this.events[l]){if(o){if(!((a=this.events[l].findIndex(c=>c.callback===o))>-1))return void console.warn("Cannot remove event, no matching event found:",l,o);this.events[l].splice(a,1)}this._notifiySubscriptionChange(l,!1)}else console.warn("Cannot remove event, no events set on:",l)}subscribed(l){return this.events[l]&&this.events[l].length}_chain(l,o,a,c){var f=a;return Array.isArray(o)||(o=[o]),this.subscribed(l)?(this.events[l].forEach((E,R)=>{f=E.callback.apply(this,o.concat([f]))}),f):"function"==typeof c?c():c}_confirm(l,o){var a=!1;return Array.isArray(o)||(o=[o]),this.subscribed(l)&&this.events[l].forEach((c,f)=>{c.callback.apply(this,o)&&(a=!0)}),a}_notifiySubscriptionChange(l,o){var a=this.subscriptionNotifiers[l];a&&a.forEach(c=>{c(o)})}_dispatch(){var l=Array.from(arguments),o=l.shift();this.events[o]&&this.events[o].forEach(a=>{a.callback.apply(this,l)})}_debugDispatch(){var l=Array.from(arguments),o=l[0];return l[0]="InternalEvent:"+o,(!0===this.debug||this.debug.includes(o))&&console.log(...l),this._dispatch(...arguments)}_debugChain(){var l=Array.from(arguments),o=l[0];return l[0]="InternalEvent:"+o,(!0===this.debug||this.debug.includes(o))&&console.log(...l),this._chain(...arguments)}_debugConfirm(){var l=Array.from(arguments),o=l[0];return l[0]="InternalEvent:"+o,(!0===this.debug||this.debug.includes(o))&&console.log(...l),this._confirm(...arguments)}}let Vd=(()=>{class g{static register(o){g.tables.push(o)}static deregister(o){var a=g.tables.indexOf(o);a>-1&&g.tables.splice(a,1)}static lookupTable(o,a){var f,E,c=[];if("string"==typeof o){if((f=document.querySelectorAll(o)).length)for(var R=0;R<f.length;R++)(E=g.matchElement(f[R]))&&c.push(E)}else"undefined"!=typeof HTMLElement&&o instanceof HTMLElement||o instanceof Gh?(E=g.matchElement(o))&&c.push(E):Array.isArray(o)?o.forEach(function(O){c=c.concat(g.lookupTable(O))}):a||console.warn("Table Connection Error - Invalid Selector",o);return c}static matchElement(o){return g.tables.find(function(a){return o instanceof Gh?a===o:a.element===o})}}return g.tables=[],g})();function cf(g){g.forEach(function(l){l.reinitializeWidth()}),this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&this.table.modules.responsiveLayout.update()}var mp={fitData:function(g){this.table.columnManager.renderer.reinitializeColumnWidths(g),this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&this.table.modules.responsiveLayout.update()},fitDataFill:cf,fitDataTable:cf,fitDataStretch:function(g){var l=0,o=this.table.rowManager.element.clientWidth,a=0,c=!1;g.forEach((f,E)=>{f.widthFixed||f.reinitializeWidth(),(this.table.options.responsiveLayout?f.modules.responsive.visible:f.visible)&&(c=f),f.visible&&(l+=f.getWidth())}),c?(a=o-l+c.getWidth(),this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&(c.setWidth(0),this.table.modules.responsiveLayout.update()),a>0?c.setWidth(a):c.reinitializeWidth()):this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&this.table.modules.responsiveLayout.update()},fitColumns:function(g){var f,F,l=this.table.element.clientWidth,o=0,a=0,c=0,E=[],R=[],O=0,J=0;function dt(qt){return"string"==typeof qt?qt.indexOf("%")>-1?l/100*parseInt(qt):parseInt(qt):qt}function Ft(qt,Ee,De,Ge){var We=[],Si=0,ln=0,Gi=0,Xi=c,gn=0,_n=0,wn=[];function Pn(qi){return De*(qi.column.definition.widthGrow||1)}function bn(qi){return dt(qi.width)-De*(qi.column.definition.widthShrink||0)}return qt.forEach(function(qi,Bn){var dr=Ge?bn(qi):Pn(qi);qi.column.minWidth>=dr?We.push(qi):qi.column.maxWidth&&qi.column.maxWidth<dr?(qi.width=qi.column.maxWidth,Ee-=qi.column.maxWidth,(Xi-=Ge?qi.column.definition.widthShrink||1:qi.column.definition.widthGrow||1)&&(De=Math.floor(Ee/Xi))):(wn.push(qi),_n+=Ge?qi.column.definition.widthShrink||1:qi.column.definition.widthGrow||1)}),We.length?(We.forEach(function(qi){Si+=Ge?qi.width-qi.column.minWidth:qi.column.minWidth,qi.width=qi.column.minWidth}),gn=(ln=Ee-Si)-(Gi=_n?Math.floor(ln/_n):ln)*_n,gn+=Ft(wn,ln,Gi,Ge)):(gn=_n?Ee-Math.floor(Ee/_n)*_n:Ee,wn.forEach(function(qi){qi.width=Ge?bn(qi):Pn(qi)})),gn}this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&this.table.modules.responsiveLayout.update(),this.table.rowManager.element.scrollHeight>this.table.rowManager.element.clientHeight&&(l-=this.table.rowManager.element.offsetWidth-this.table.rowManager.element.clientWidth),g.forEach(function(qt){var Ee,De,Ge;qt.visible&&(Ee=qt.definition.width,De=parseInt(qt.minWidth),Ee?(Ge=dt(Ee),o+=Ge>De?Ge:De,qt.definition.widthShrink&&(R.push({column:qt,width:Ge>De?Ge:De}),O+=qt.definition.widthShrink)):(E.push({column:qt,width:0}),c+=qt.definition.widthGrow||1))}),a=l-o,f=Math.floor(a/c),J=Ft(E,a,f,!1),E.length&&J>0&&(E[E.length-1].width+=+J),E.forEach(function(qt){a-=qt.width}),(F=Math.abs(J)+a)>0&&O&&(J=Ft(R,F,Math.floor(F/O),!0)),R.length&&(R[R.length-1].width-=J),E.forEach(function(qt){qt.column.setWidth(qt.width)}),R.forEach(function(qt){qt.column.setWidth(qt.width)})}},hf={default:{groups:{item:"item",items:"items"},columns:{},data:{loading:"Loading",error:"Error"},pagination:{page_size:"Page Size",page_title:"Show Page",first:"First",first_title:"First Page",last:"Last",last_title:"Last Page",prev:"Prev",prev_title:"Prev Page",next:"Next",next_title:"Next Page",all:"All"},headerFilters:{default:"filter column...",columns:{}}}},_g=Object.freeze({__proto__:null,LayoutModule:(()=>{class g extends bo{constructor(o){super(o,"layout"),this.mode=null,this.registerTableOption("layout","fitData"),this.registerTableOption("layoutColumnsOnNewData",!1),this.registerColumnOption("widthGrow"),this.registerColumnOption("widthShrink")}initialize(){var o=this.table.options.layout;g.modes[o]?this.mode=o:(console.warn("Layout Error - invalid mode set, defaulting to 'fitData' : "+o),this.mode="fitData"),this.table.element.setAttribute("tabulator-layout",this.mode)}getMode(){return this.mode}layout(){g.modes[this.mode].call(this,this.table.columnManager.columnsByIndex),this.dispatch("layout-refreshed")}}return g.moduleName="layout",g.modes=mp,g})(),LocalizeModule:(()=>{class g extends bo{constructor(o){super(o),this.locale="default",this.lang=!1,this.bindings={},this.langList={},this.registerTableOption("locale",!1),this.registerTableOption("langs",{})}initialize(){this.langList=Ps.deepClone(g.langs),!1!==this.table.options.columnDefaults.headerFilterPlaceholder&&this.setHeaderFilterPlaceholder(this.table.options.columnDefaults.headerFilterPlaceholder);for(let o in this.table.options.langs)this.installLang(o,this.table.options.langs[o]);this.setLocale(this.table.options.locale),this.registerTableFunction("setLocale",this.setLocale.bind(this)),this.registerTableFunction("getLocale",this.getLocale.bind(this)),this.registerTableFunction("getLang",this.getLang.bind(this))}setHeaderFilterPlaceholder(o){this.langList.default.headerFilters.default=o}setHeaderFilterColumnPlaceholder(o,a){this.langList.default.headerFilters.columns[o]=a,this.lang&&!this.lang.headerFilters.columns[o]&&(this.lang.headerFilters.columns[o]=a)}installLang(o,a){this.langList[o]?this._setLangProp(this.langList[o],a):this.langList[o]=a}_setLangProp(o,a){for(let c in a)o[c]&&"object"==typeof o[c]?this._setLangProp(o[c],a[c]):o[c]=a[c]}setLocale(o){if(!0===(o=o||"default")&&navigator.language&&(o=navigator.language.toLowerCase()),o&&!this.langList[o]){let c=o.split("-")[0];this.langList[c]?(console.warn("Localization Error - Exact matching locale not found, using closest match: ",o,c),o=c):(console.warn("Localization Error - Matching locale not found, using default: ",o),o="default")}this.locale=o,this.lang=Ps.deepClone(this.langList.default||{}),"default"!=o&&function a(c,f){for(var E in c)"object"==typeof c[E]?(f[E]||(f[E]={}),a(c[E],f[E])):f[E]=c[E]}(this.langList[o],this.lang),this.dispatchExternal("localized",this.locale,this.lang),this._executeBindings()}getLocale(o){return this.locale}getLang(o){return o?this.langList[o]:this.lang}getText(o,a){var c=(o=a?o+"|"+a:o).split("|");return this._getLangElement(c,this.locale)||""}_getLangElement(o,a){var c=this.lang;return o.forEach(function(f){var E;c&&(c=void 0!==(E=c[f])&&E)}),c}bind(o,a){this.bindings[o]||(this.bindings[o]=[]),this.bindings[o].push(a),a(this.getText(o),this.lang)}_executeBindings(){for(let o in this.bindings)this.bindings[o].forEach(a=>{a(this.getText(o),this.lang)})}}return g.moduleName="localize",g.langs=hf,g})(),CommsModule:(()=>{class g extends bo{constructor(o){super(o)}initialize(){this.registerTableFunction("tableComms",this.receive.bind(this))}getConnections(o){var a=[];return Vd.lookupTable(o).forEach(f=>{this.table!==f&&a.push(f)}),a}send(o,a,c,f){var E=this.getConnections(o);E.forEach(R=>{R.tableComms(this.table.element,a,c,f)}),!E.length&&o&&console.warn("Table Connection Error - No tables matching selector found",o)}receive(o,a,c,f){if(this.table.modExists(a))return this.table.modules[a].commsReceived(o,c,f);console.warn("Inter-table Comms Error - no such module:",a)}}return g.moduleName="comms",g})()});class df{constructor(l,o){this.bindStaticFuctionality(l),this.bindModules(l,_g,!0),o&&this.bindModules(l,o)}bindStaticFuctionality(l){l.moduleBindings={},l.extendModule=function(o,a,c){if(l.moduleBindings[o]){var f=l.moduleBindings[o][a];if(f)if("object"==typeof c)for(let E in c)f[E]=c[E];else console.warn("Module Error - Invalid value type, it must be an object");else console.warn("Module Error - property does not exist:",a)}else console.warn("Module Error - module does not exist:",o)},l.registerModule=function(o){Array.isArray(o)||(o=[o]),o.forEach(a=>{l.registerModuleBinding(a)})},l.registerModuleBinding=function(o){l.moduleBindings[o.moduleName]=o},l.findTable=function(o){var a=Vd.lookupTable(o,!0);return!(Array.isArray(a)&&!a.length)&&a},l.prototype.bindModules=function(){for(var o in this.modules={},l.moduleBindings){let a=l.moduleBindings[o];this.modules[o]=new a(this),a.prototype.moduleCore?this.modulesCore[o]=this.modules[o]:this.modulesRegular[o]=this.modules[o]}}}bindModules(l,o,a){var c=Object.values(o);a&&c.forEach(f=>{f.prototype.moduleCore=!0}),l.registerModule(c)}}let Gh=(()=>{class g{constructor(o,a){this.options={},this.columnManager=null,this.rowManager=null,this.footerManager=null,this.vdomHoz=null,this.externalEvents=null,this.eventBus=null,this.interactionMonitor=!1,this.browser="",this.browserSlow=!1,this.browserMobile=!1,this.rtl=!1,this.originalElement=null,this.componentFunctionBinder=new lf(this),this.dataLoader=!1,this.modules={},this.modulesCore={},this.modulesRegular={},this.optionsList=new Ud(this,"table constructor"),this.initialized=!1,this.initializeElement(o)&&(this.initialzeCoreSystems(a),setTimeout(()=>{this._create()})),Vd.register(this)}initializeElement(o){return"undefined"!=typeof HTMLElement&&o instanceof HTMLElement?(this.element=o,!0):"string"==typeof o?(this.element=document.querySelector(o),!!this.element||(console.error("Tabulator Creation Error - no element found matching selector: ",o),!1)):(console.error("Tabulator Creation Error - Invalid element provided:",o),!1)}initialzeCoreSystems(o){this.columnManager=new lg(this),this.rowManager=new ug(this),this.footerManager=new af(this),this.dataLoader=new hg(this),this.bindModules(),this.options=this.optionsList.generate(g.defaultOptions,o),this._clearObjectPointers(),this._mapDepricatedFunctionality(),this.externalEvents=new dg(this,this.options,this.options.debugEventsExternal),this.eventBus=new rd(this.options.debugEventsInternal),this.interactionMonitor=new nd(this),this.dataLoader.initialize(),this.columnManager.initialize(),this.rowManager.initialize(),this.footerManager.initialize()}_mapDepricatedFunctionality(){}_clearSelection(){this.element.classList.add("tabulator-block-select"),window.getSelection?window.getSelection().empty?window.getSelection().empty():window.getSelection().removeAllRanges&&window.getSelection().removeAllRanges():document.selection&&document.selection.empty(),this.element.classList.remove("tabulator-block-select")}_create(){this.externalEvents.dispatch("tableBuilding"),this.eventBus.dispatch("table-building"),this._rtlCheck(),this._buildElement(),this._initializeTable(),this._loadInitialData(),this.initialized=!0,this.externalEvents.dispatch("tableBuilt")}_rtlCheck(){var o=window.getComputedStyle(this.element);switch(this.options.textDirection){case"auto":if("rtl"!==o.direction)break;case"rtl":this.element.classList.add("tabulator-rtl"),this.rtl=!0;break;case"ltr":this.element.classList.add("tabulator-ltr");default:this.rtl=!1}}_clearObjectPointers(){this.options.columns=this.options.columns.slice(0),this.options.data&&!this.options.reactiveData&&(this.options.data=this.options.data.slice(0))}_buildElement(){var c,o=this.element,a=this.options;if("TABLE"===o.tagName){this.originalElement=this.element,c=document.createElement("div");var f=o.attributes;for(var E in f)"object"==typeof f[E]&&c.setAttribute(f[E].name,f[E].value);o.parentNode.replaceChild(c,o),this.element=o=c}for(o.classList.add("tabulator"),o.setAttribute("role","grid");o.firstChild;)o.removeChild(o.firstChild);a.height&&(a.height=isNaN(a.height)?a.height:a.height+"px",o.style.height=a.height),!1!==a.minHeight&&(a.minHeight=isNaN(a.minHeight)?a.minHeight:a.minHeight+"px",o.style.minHeight=a.minHeight),!1!==a.maxHeight&&(a.maxHeight=isNaN(a.maxHeight)?a.maxHeight:a.maxHeight+"px",o.style.maxHeight=a.maxHeight)}_initializeTable(){var o=this.element,a=this.options;this.columnManager.initialize(),this.rowManager.initialize(),this._detectBrowser();for(let E in this.modulesCore)this.modulesCore[E].initialize();if("string"==typeof a.placeholder){var c=document.createElement("div");c.classList.add("tabulator-placeholder");var f=document.createElement("span");f.innerHTML=a.placeholder,c.appendChild(f),a.placeholder=c}o.appendChild(this.columnManager.getElement()),o.appendChild(this.rowManager.getElement()),a.footerElement&&this.footerManager.activate(),a.autoColumns&&a.data&&this.columnManager.generateColumnsFromRowData(this.options.data);for(let E in this.modulesRegular)this.modulesRegular[E].initialize();this.columnManager.setColumns(a.columns),this.eventBus.dispatch("table-built")}_loadInitialData(){this.dataLoader.load(this.options.data)}destroy(){var o=this.element;for(Vd.deregister(this),this.eventBus.dispatch("table-destroy"),this.rowManager.rows.forEach(function(a){a.wipe()}),this.rowManager.rows=[],this.rowManager.activeRows=[],this.rowManager.displayRows=[];o.firstChild;)o.removeChild(o.firstChild);o.classList.remove("tabulator")}_detectBrowser(){var o=navigator.userAgent||navigator.vendor||window.opera;o.indexOf("Trident")>-1?(this.browser="ie",this.browserSlow=!0):o.indexOf("Edge")>-1?(this.browser="edge",this.browserSlow=!0):o.indexOf("Firefox")>-1?(this.browser="firefox",this.browserSlow=!1):(this.browser="other",this.browserSlow=!1),this.browserMobile=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(o)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(o.substr(0,4))}blockRedraw(){return this.rowManager.blockRedraw()}restoreRedraw(){return this.rowManager.restoreRedraw()}setDataFromLocalFile(o){return new Promise((a,c)=>{var f=document.createElement("input");f.type="file",f.accept=o||".json,application/json",f.addEventListener("change",E=>{var F,R=f.files[0],O=new FileReader;O.readAsText(R),O.onload=J=>{try{F=JSON.parse(O.result)}catch(dt){return console.warn("File Load Error - File contents is invalid JSON",dt),void c(dt)}this.setData(F).then(dt=>{a(dt)}).catch(dt=>{a(dt)})},O.onerror=J=>{console.warn("File Load Error - Unable to read file"),c()}}),f.click()})}setData(o,a,c){if(this.initialized)return this.dataLoader.load(o,a,c,!1);console.warn("setData failed - table not yet initialized. To set initial data please use the 'data' property in the table constructor.")}clearData(){this.dataLoader.blockActiveLoad(),this.rowManager.clearData()}getData(o){return this.rowManager.getData(o)}getDataCount(o){return this.rowManager.getDataCount(o)}replaceData(o,a,c){if(this.initialized)return this.dataLoader.load(o,a,c,!0,!0);console.warn("replaceData failed - table not yet initialized. Please wait for the `tableBuilt` event before calling this function.")}updateData(o){var a=0;if(this.initialized)return new Promise((c,f)=>{this.dataLoader.blockActiveLoad(),"string"==typeof o&&(o=JSON.parse(o)),o?o.forEach(E=>{var R=this.rowManager.findRow(E[this.options.index]);R&&(a++,R.updateData(E).then(()=>{--a||c()}))}):(console.warn("Update Error - No data provided"),f("Update Error - No data provided"))});console.warn("updateData failed - table not yet initialized. Please wait for the `tableBuilt` event before calling this function.")}addData(o,a,c){if(this.initialized)return new Promise((f,E)=>{this.dataLoader.blockActiveLoad(),"string"==typeof o&&(o=JSON.parse(o)),o?this.rowManager.addRows(o,a,c).then(R=>{var O=[];R.forEach(function(F){O.push(F.getComponent())}),f(O)}):(console.warn("Update Error - No data provided"),E("Update Error - No data provided"))});console.warn("addData failed - table not yet initialized. Please wait for the `tableBuilt` event before calling this function.")}updateOrAddData(o){var a=[],c=0;if(this.initialized)return new Promise((f,E)=>{this.dataLoader.blockActiveLoad(),"string"==typeof o&&(o=JSON.parse(o)),o?o.forEach(R=>{var O=this.rowManager.findRow(R[this.options.index]);c++,O?O.updateData(R).then(()=>{c--,a.push(O.getComponent()),c||f(a)}):this.rowManager.addRows(R).then(F=>{c--,a.push(F[0].getComponent()),c||f(a)})}):(console.warn("Update Error - No data provided"),E("Update Error - No data provided"))});console.warn("updateOrAddData failed - table not yet initialized. Please wait for the `tableBuilt` event before calling this function.")}getRow(o){var a=this.rowManager.findRow(o);return a?a.getComponent():(console.warn("Find Error - No matching row found:",o),!1)}getRowFromPosition(o,a){var c=this.rowManager.getRowFromPosition(o,a);return c?c.getComponent():(console.warn("Find Error - No matching row found:",o),!1)}deleteRow(o){var a=[];Array.isArray(o)||(o=[o]);for(let c of o){let f=this.rowManager.findRow(c,!0);if(!f)return console.error("Delete Error - No matching row found:",c),Promise.reject("Delete Error - No matching row found");a.push(f)}return a.sort((c,f)=>this.rowManager.rows.indexOf(c)>this.rowManager.rows.indexOf(f)?1:-1),a.forEach(c=>{c.delete()}),this.rowManager.reRenderInPosition(),Promise.resolve()}addRow(o,a,c){if(this.initialized)return"string"==typeof o&&(o=JSON.parse(o)),this.rowManager.addRows(o,a,c).then(f=>f[0].getComponent());console.warn("addRow failed - table not yet initialized. Please wait for the `tableBuilt` event before calling this function.")}updateOrAddRow(o,a){var c=this.rowManager.findRow(o);return"string"==typeof a&&(a=JSON.parse(a)),c?c.updateData(a).then(()=>c.getComponent()):this.rowManager.addRows(a).then(f=>f[0].getComponent())}updateRow(o,a){var c=this.rowManager.findRow(o);return"string"==typeof a&&(a=JSON.parse(a)),c?c.updateData(a).then(()=>{resolve(c.getComponent())}):(console.warn("Update Error - No matching row found:",o),Promise.reject("Update Error - No matching row found"))}scrollToRow(o,a,c){var f=this.rowManager.findRow(o);return f?this.rowManager.scrollToRow(f,a,c):(console.warn("Scroll Error - No matching row found:",o),Promise.reject("Scroll Error - No matching row found"))}moveRow(o,a,c){var f=this.rowManager.findRow(o);f?f.moveToRow(a,c):console.warn("Move Error - No matching row found:",o)}getRows(o){if(this.initialized)return this.rowManager.getComponents(o);console.warn("getRows failed - table not yet initialized. Please wait for the `tableBuilt` event before calling this function.")}getRowPosition(o,a){var c=this.rowManager.findRow(o);return c?this.rowManager.getRowPosition(c,a):(console.warn("Position Error - No matching row found:",o),!1)}setColumns(o){this.initialized?this.columnManager.setColumns(o):console.warn("setColumns failed - table not yet initialized. To set initial data please use the 'columns' property in the table constructor.")}getColumns(o){return this.columnManager.getComponents(o)}getColumn(o){var a=this.columnManager.findColumn(o);return a?a.getComponent():(console.warn("Find Error - No matching column found:",o),!1)}getColumnDefinitions(){return this.columnManager.getDefinitionTree()}showColumn(o){var a=this.columnManager.findColumn(o);if(!a)return console.warn("Column Show Error - No matching column found:",o),!1;a.show()}hideColumn(o){var a=this.columnManager.findColumn(o);if(!a)return console.warn("Column Hide Error - No matching column found:",o),!1;a.hide()}toggleColumn(o){var a=this.columnManager.findColumn(o);if(!a)return console.warn("Column Visibility Toggle Error - No matching column found:",o),!1;a.visible?a.hide():a.show()}addColumn(o,a,c){var f=this.columnManager.findColumn(c);return this.columnManager.addColumn(o,a,f).then(E=>E.getComponent())}deleteColumn(o){var a=this.columnManager.findColumn(o);return a?a.delete():(console.warn("Column Delete Error - No matching column found:",o),Promise.reject())}updateColumnDefinition(o,a){var c=this.columnManager.findColumn(o);return c?c.updateDefinition(a):(console.warn("Column Update Error - No matching column found:",o),Promise.reject())}moveColumn(o,a,c){var f=this.columnManager.findColumn(o),E=this.columnManager.findColumn(a);f?E?this.columnManager.moveColumn(f,E,c):console.warn("Move Error - No matching column found:",E):console.warn("Move Error - No matching column found:",o)}scrollToColumn(o,a,c){return new Promise((f,E)=>{var R=this.columnManager.findColumn(o);return R?this.columnManager.scrollToColumn(R,a,c):(console.warn("Scroll Error - No matching column found:",o),Promise.reject("Scroll Error - No matching column found"))})}redraw(o){this.initialized?(this.columnManager.redraw(o),this.rowManager.redraw(o)):console.warn("redraw failed - table not yet initialized. Please wait for the `tableBuilt` event before calling this function.")}setHeight(o){this.options.height=isNaN(o)?o:o+"px",this.element.style.height=this.options.height,this.rowManager.initializeRenderer(),this.rowManager.redraw()}on(o,a){this.externalEvents.subscribe(o,a)}off(o,a){this.externalEvents.unsubscribe(o,a)}dispatchEvent(){Array.from(arguments).shift(),this.externalEvents.dispatch(...arguments)}modExists(o,a){return!!this.modules[o]||(a&&console.error("Tabulator Module Not Installed: "+o),!1)}module(o){var a=this.modules[o];return a||console.error("Tabulator module not installed: "+o),a}}return g.defaultOptions=ag,g})();new df(Gh),new df(class extends Gh{},Td);let Gm=(()=>{class g{constructor(){this.a=null,this.b=null,this.dataObject=[],this.objectsForGrid=[],this.stringsForGrid=[],this.hotInstance=null,this.data=[]}get hot(){return null!=this.hotInstance?this.hotInstance:null}initGrid(o){Gh.registerModule([jp,Up,vd,$p]),this.hotInstance=new Gh(o,{columns:[{title:"Step",field:"id"}],layout:"fitColumns",clipboard:"copy",footerElement:"<div>\n        \x3c!-- <a href=\"javascript:{var event = new Event('TabCopy'); window.dispatchEvent(event);}\">Copy Clipboard</a>\n        &nbsp;&nbsp;&nbsp;&nbsp;\n        <a href=\"javascript:{var event = new Event('TabDownload'); window.dispatchEvent(event);}\">CSV</a>\n        --\x3e\n        \n    </div>",placeholder:"please press execute button"})}AddStringToGrid(o){if(o.startsWith("{")&&o.endsWith("}"))try{var a=JSON.parse(o);return void this.objectsForGrid.push(a)}catch(E){}if(o.startsWith("[")&&o.endsWith("]"))try{for(var c=JSON.parse(o),f=0;f<c.length;f++)this.objectsForGrid.push(c[f]);return}catch(E){}this.stringsForGrid.push(o)}AddData(o){this.data.push(o)}AddDataToGrid(o){return"string"==typeof o?(this.AddStringToGrid(null==o?void 0:o.toString()),void this.dataObject.push([null==o?void 0:o.toString()])):"object"==typeof o?(console.log("adding object to grid"),this.AddStringToGrid(JSON.stringify(o)),void this.dataObject.push([o])):(this.dataObject.push([o.ToString()]),void this.AddStringToGrid(o.toString()))}ClearDataGrid(){this.data=[],this.dataObject=[],this.objectsForGrid=[],this.stringsForGrid=[],null!=this.hot&&(this.hot.setColumns([{title:"Step",field:"id"},{title:"Value",field:"val"}]),this.hot.replaceData([]),this.hot.redraw(!0))}hasOwnProperty(o,a){return null!=o&&o.hasOwnProperty(a)}AddObjectToFinishGrid(){for(var o,a,c=[],f=this.objectsForGrid,E=0;E<f.length;E++)"string"==typeof(R=f[E])?c.push("_"):c.push(...Object.keys(R));var O=new Set(c);c=Array.from(O);var F=[...c],J=[];for(E=0;E<f.length;E++){for(var R=f[E],dt={Nr:E+1},Ft=0;Ft<c.length;Ft++){var qt=c[Ft],Ee=this.goodNameForKey(qt);if(R&&this.hasOwnProperty(R,qt)){var De=R[qt];dt[Ee]="object"==typeof De?JSON.stringify(De):De}else dt[Ee]="string"==typeof R&&0===Ft?R:""}J.push(dt)}c.splice(0,0,"Nr"),F.splice(0,0,"Nr");var Ge=this.Headers(F);null===(o=this.hot)||void 0===o||o.setColumns(Ge),null===(a=this.hot)||void 0===a||a.replaceData(J)}Headers(o){return o.map(a=>({title:a,field:this.goodNameForKey(a),formatter:function(c,f,E){try{var R=c.getValue().toString();if(R.length<2)return R;if(R.startsWith("[")&&R.endsWith("]"))try{var O=JSON.parse(R),F=c.getRow().getData().Nr,dt=c.getColumn().getField()+"_"+F;return E(function(){new Gh("#"+dt,{data:O,autoColumns:!0,layout:"fitDataFill"})}),"<div id='"+dt+"'>"+R+"</div>"}catch(Ft){return R}}catch(Ft){return R}return c.getValue()}}))}AddStringToFinishGrid(){for(var o,a,c=[],f=0;f<this.stringsForGrid.length;f++)c.push({Nr:f+1,Text:this.stringsForGrid[f]});var R=this.Headers(["Nr","Text"]);null===(o=this.hot)||void 0===o||o.setColumns(R),null===(a=this.hot)||void 0===a||a.replaceData(c)}FinishGrid(){for(var o,a=0;a<this.data.length;a++)this.AddDataToGrid(this.data[a]);this.objectsForGrid.length+this.stringsForGrid.length!=0&&(this.objectsForGrid.length>0?this.AddObjectToFinishGrid():this.AddStringToFinishGrid(),null===(o=this.hot)||void 0===o||o.redraw(!0))}goodNameForKey(o){var a=o;return a.replace(".","_")}copyClip(){var o;null===(o=this.hot)||void 0===o||o.copyToClipboard()}copyCSV(){var o;null===(o=this.hot)||void 0===o||o.download("csv","data.csv",{bom:!0})}}return g.\u0275fac=function(o){return new(o||g)},g.\u0275prov=se.Yz7({token:g,factory:g.\u0275fac,providedIn:"root"}),g})();var pf=m(92590),ff=m(91083),yg=m(80926),Wm=m(57261),_p=m(43954),Gd=m(92181),Eg=m(4834),gf=m(20773),mf=m(33);function zm(g,l){1&g&&se._UZ(0,"mat-spinner")}const bu=function(g){return["/","automation","loadexample",g]};function jm(g,l){if(1&g&&(se.TgZ(0,"a",15),se._uU(1),se.qZA()),2&g){const o=se.oxw();se.Q6J("routerLink",se.VKq(2,bu,o.mustLoadDemoBlock)),se.xp6(1),se.hij("Direct link ",o.mustLoadDemoBlock,"")}}function Ym(g,l){if(1&g&&(se.TgZ(0,"mat-tab",27),se._UZ(1,"div",22),se.qZA()),2&g){const o=se.oxw(3);se.xp6(1),se.Q6J("id","steps"+o.myId)}}function _f(g,l){if(1&g){const o=se.EpF();se.TgZ(0,"mat-tab-group",18),se.NdJ("selectedTabChange",function(c){return se.CHM(o),se.oxw(2).changeTabOutput(c)}),se.TgZ(1,"mat-tab",19),se.TgZ(2,"ngx-codemirror",20),se.NdJ("ngModelChange",function(c){return se.CHM(o),se.oxw(2).showInner=c}),se.qZA(),se.qZA(),se.TgZ(3,"mat-tab",21),se._UZ(4,"div",22),se.qZA(),se.TgZ(5,"mat-tab",23),se._UZ(6,"div",22),se.qZA(),se.TgZ(7,"mat-tab",24),se._UZ(8,"canvas",25),se.qZA(),se.YNc(9,Ym,2,1,"mat-tab",26),se.qZA()}if(2&g){const o=se.oxw(2);se.xp6(2),se.Q6J("options",o.editorPlain)("ngModel",o.showInner),se.xp6(2),se.Q6J("id","htmlText"+o.myId),se.xp6(2),se.Q6J("id","htmlOutput"+o.myId),se.xp6(2),se.Q6J("id","barchart"+o.myId),se.xp6(1),se.Q6J("ngIf",!1)}}function vf(g,l){if(1&g){const o=se.EpF();se.TgZ(0,"ngx-codemirror",20),se.NdJ("ngModelChange",function(c){return se.CHM(o),se.oxw(2).showJSCode=c}),se.qZA()}if(2&g){const o=se.oxw(2);se.Q6J("options",o.editorJSOptions)("ngModel",o.showJSCode)}}function bf(g,l){if(1&g){const o=se.EpF();se.TgZ(0,"ngx-codemirror",20),se.NdJ("ngModelChange",function(c){return se.CHM(o),se.oxw(2).showXMLCode=c}),se.qZA()}if(2&g){const o=se.oxw(2);se.Q6J("options",o.editorXMLOptions)("ngModel",o.showXMLCode)}}function Tg(g,l){if(1&g){const o=se.EpF();se.TgZ(0,"ngx-codemirror",20),se.NdJ("ngModelChange",function(c){return se.CHM(o),se.oxw(2).showBlocksDefinition=c}),se.qZA()}if(2&g){const o=se.oxw(2);se.Q6J("options",o.editorJSOptions)("ngModel",o.showBlocksDefinition)}}function Xm(g,l){if(1&g&&(se.TgZ(0,"mat-grid-tile"),se.YNc(1,_f,10,6,"mat-tab-group",16),se.YNc(2,vf,1,2,"ngx-codemirror",17),se.YNc(3,bf,1,2,"ngx-codemirror",17),se.YNc(4,Tg,1,2,"ngx-codemirror",17),se.qZA()),2&g){const o=se.oxw();se.xp6(1),se.Q6J("ngIf",o.ShowOutput()),se.xp6(1),se.Q6J("ngIf",o.ShowCode()),se.xp6(1),se.Q6J("ngIf",o.ShowXML()),se.xp6(1),se.Q6J("ngIf",o.ShowBlocksDefinition())}}var gc=(()=>{return(g=gc||(gc={}))[g.ShowNone=0]="ShowNone",g[g.ShowBlocksDefinition=1]="ShowBlocksDefinition",g[g.ShowXML=2]="ShowXML",g[g.ShowOutput=3]="ShowOutput",g[g.ShowCode=4]="ShowCode",g[g.Stop=100]="Stop",gc;var g})();let vp=(()=>{class g{constructor(o,a,c,f,E,R,O){var F;this.tabulator=o,this.DetailsApp=a,this.loadDemo=c,this.ar=f,this.ta=E,this.snackBar=R,this.dialog=O,this.lastData=null,this.editorXMLOptions={theme:"vs-dark",language:"xml"},this.editorJSOptions={theme:"vs-dark",language:"javascript",lineNumbers:"on"},this.editorPlain={theme:"vs-dark",language:"plaintext",lineNumbers:"on"},this.code='function x() {\nconsole.log("Hello world!");\n}',this.showCodeAndXML=gc.ShowNone,this.swaggerLoaded=0,this.demoWorkspace=null,this.mustLoadDemoBlock="",this.intro=B(),this.myId=0,this.bs=new dd,this.bh2=new Pp,this.bh=null,this.fullTextData="",this.fullHtmlData="",this.myChart=null,this.tabIndex=0,this.step=0,this.swaggerData=[],this.showInner="",this.showXMLCode="",this.showJSCode="",this.showBlocksDefinition="",this.toolboxXML="",this.loadedCompletely=!1,this.myId=++g.id,this.ar.paramMap.subscribe(J=>{this.mustLoadDemoBlock=J.get("demoblock")}),this.ta.receiveData().subscribe(J=>{"DisplayBlocklyComponent"==J[0]&&this[J[1]]()}),null===(F=this.DetailsApp.LocalAPI)||void 0===F||F.IsAlive().subscribe()}createIntro(){var o,a=null===(o=this.DetailsApp.settings)||void 0===o?void 0:o.tourSteps.map(c=>{var f;return{title:(null===(f=this.DetailsApp.settings)||void 0===f?void 0:f.title)||"Blockly Automation",intro:c.text,element:document.querySelector(c.query)||void 0}});this.intro.setOptions({exitOnEsc:!0,showStepNumbers:!0,showButtons:!0,doneLabel:"Exit",skipLabel:"Skip",showProgress:!0,steps:a}).start()}clearOutput(){this.step=0,this.showInner="",this.tabulator.ClearDataGrid(),null!=this.myChart&&this.myChart.destroy(),this.fullHtmlData="",this.fullTextData=""}ShowText(o){if(null!=o){var a=o.toString();this.fullTextData+="\n"+a}}finishHTMLOutput(){this.theHtmlOutput().innerHTML=this.fullHtmlData}ShowHTML(o){if(null!=o){var a=o.toString();this.fullHtmlData+="<br/>"+a}}theHtmlOutput(){return document.getElementById("htmlOutput"+this.myId)}theTextOutput(){return document.getElementById("htmlText"+this.myId)}ShowChart(o){var a,c=null===(a=document.getElementById("barchart"+this.myId))||void 0===a?void 0:a.getContext("2d");if(null!=c)try{var f=null==o?void 0:o.toString(),E=JSON.parse(f);E&&E.type&&(this.myChart=new Kr(c,E),console.log("make chart",o))}catch(R){this.myChart=null}else console.log("not canvas available for chart!")}changeTab(o){switch(o){case 0:break;case 1:this.theTextOutput().innerText=this.fullTextData;break;case 2:this.finishHTMLOutput();break;case 3:this.ShowChart(this.lastData);break;case 4:const a=document.getElementById("steps"+this.myId);if(null==a)return void window.alert("gridElement is null");this.tabulator.ClearDataGrid(),this.tabulator.initGrid(a),this.tabulator.FinishGrid();break;default:window.alert("tab "+o+" not implemented")}}changeTabOutput(o){console.log(o.index),this.tabIndex=o.index,this.changeTab(o.index)}RunCode(){this.snackBar.open("Program start","Executing...");var o=this,a=this.run.latestCode;o.CalculateXMLAndCode(),this.bh=new Ad(this.demoWorkspace,t),this.run=this.bh,this.showCodeAndXML=gc.ShowOutput,this.clearOutput(),this.showInner='{ "step_start": "start program",',this.run.runCode((E,R)=>{try{return new Interpreter(E,R)}catch(O){o.CalculateXMLAndCode(),window.alert("please copy the left output and report there is an error at "+JSON.stringify(O)),this.showCodeAndXML=gc.ShowCode}},E=>{o.step++,o.showInner+=`\n           \n"step_${o.step}" : "${E}",`,o.lastData=E,o.tabulator.AddData(E),o.ShowHTML(E),o.ShowText(E)},()=>{this.snackBar.open("Program end","Done!",{duration:3e3}),o.showInner+='\n "step_end" : "program executed; see results below"\n}',this.changeTab(this.tabIndex)},a)}ShowLocalAPI(o){var a;null===(a=this.DetailsApp.LocalAPI)||void 0===a||a.LoadBlockContent(o).subscribe(c=>{var f=e.Xml.textToDom(c);null!=this.demoWorkspace&&(e.Xml.clearWorkspaceAndLoadFromXml(f,this.demoWorkspace),window.alert("please press execute button"))})}ShowDemo(o){this.mustLoadDemoBlock=o,this.loadDemo.getDemoBlock(o).subscribe(a=>{var c=e.Xml.textToDom(a);if(null!=this.demoWorkspace){try{e.Xml.clearWorkspaceAndLoadFromXml(c,this.demoWorkspace)}catch(f){return(null==o?void 0:o.toString().indexOf("docker"))>-1?void(window.confirm("This demo must run with Desktop App.\nDo you want to go to download page?")&&window.open("http://ba.serviciipeweb.ro/")):(null==o?void 0:o.toString().indexOf("chrome"))>-1?void(window.confirm("This demo must run with MyPC swagger.\nDo you want to go to download page?")&&window.open("https://github.com/ignatandrei/BlocklyAutomation/wiki/MyPC")):void window.alert("error "+o)}window.alert("please press execute button")}})}registerSwaggerBlocksObjects(o,a){return a.fieldXMLObjects.map(f=>e.Xml.textToDom(f))}registerSwaggerBlocksAPIControllers(o,a,c){return a.findfieldXMLFunctions(c).map(E=>e.Xml.textToDom(E.gui))}registerSwaggerBlocksAPIAll(o,a){return a.fieldXMLFunctions.map(f=>e.Xml.textToDom(f.gui))}ngOnInit(){}ngAfterViewInit(){this.StartRegister(),(0,ls.R)(window,"TabDownload").subscribe(o=>this.tabulator.copyCSV()),(0,ls.R)(window,"TabCopy").subscribe(o=>this.tabulator.copyClip())}ShowBlocks(){this.dialog.open(Oh,{}).afterClosed().subscribe(a=>{if(console.log("The dialog was closed with ",a),a){var c=a;switch(c.Source){case"Demos":try{console.log("into try"),this.ShowDemo(a.id)}catch(f){window.alert(a.id),window.alert(f)}break;case"LocalAPI":this.ShowLocalAPI(a.id);break;default:window.alert(c.Source)}}})}LoadSwagger(){var o=this,c=(new x.L(""),window.prompt("Swagger/OpenAPI ? "));if(c){if(c.endsWith(".html")||c.endsWith(".htm"))return void window.alert("Swagger should end with .json - see source of html page");o.LoadSwaggerFromUrl(c).then(f=>{f.hasError?window.confirm("error loading swagger - most probably CORS\n Please download the windows app to try this.")&&window.open("http://ba.serviciipeweb.ro/"):(o.addToToolboxSwagger(f,this),window.alert("loaded successfully"))})}}LoadSwaggerFromUrl(o,a){var c=this;return(0,C.Z)(function*(){var f=new x.L(o),E=yield f.ParseSwagger();return E.name=a||o,E.hasError?E:c.LoadSwaggerFromAPI(E)})()}LoadSwaggerFromAPI(o){if(o.hasError)return console.error("error in swagger",o.name),o;this.swaggerData.push(o);for(var a=0;a<o.GenerateBlocks.length;a++){var c=o.GenerateBlocks[a];null==e.getMainWorkspace()&&console.log("#38 here in loadSwagger from api is not ok",e.getMainWorkspace()),c(e.Blocks,t,this.demoWorkspace)}for(a=0;a<o.GenerateFunctions.length;a++)(c=o.GenerateFunctions[a])(e.Blocks,t);return o.metaBlocks()(e.Blocks,t),o}StartRegister(){var o,a=[...Array(50).keys()].map(O=>this.CategorySwaggerHidden(O)).join(""),c=this.DetailsApp.customCategories,f=[this.bs.defaultBlocks.fieldXML(),` \n        <category name='Blockly Advanced'>\n        <category id="Audio" name="Audio">\n        ${this.bs.ttsBlock.fieldXML()}\n        ${this.bs.pianoBlock.fieldXML()}\n        </category>  \n            ${this.bs.filterBlocks.fieldXML()}\n                \n                ${this.bs.auth0Blocks.fieldXML()}\n                <category id="catConverters"  name="Converters">\n                ${this.bs.convertersBlocks.fieldXML()}\n              </category>    \n              <category id="catDates"  name="Dates">\n          ${this.bs.currentDateBlock.fieldXML()}\n          ${this.bs.dateFromTextBlock.fieldXML()}\n          ${this.bs.waitBlocks1.fieldXML()}\n          ${this.bs.waitBlocks2.fieldXML()}\n        </category>\n        <category id="catEmail"  name="Email">\n        ${this.bs.emailBlocks.fieldXML()}\n      </category>\n\n        <category id="catExporter"  name="Exporter">\n        ${this.bs.exportFileBlock.fieldXML()}\n      </category>\n              <category id="catGUI" name="GUI">\n              ${this.bs.guiBlocks.fieldXML()}\n              ${this.bs.chartBlock.fieldXML()}\n              </category>\n              <category id="catHTML" name="HTML">\n              <category name="GenHTML" id="Generate">\n              ${this.bs.htmlblocks.fieldXML()}\n              </category>\n              <category name="Parser" id="parseHTML">\n              ${this.bs.HTMLParserBlocks.fieldXML()}\n              </category>\n              </category>\n              <category name="Objects" id="objects">\n              ${this.bs.propBlocks.fieldXML()}\n              ${this.bs.createObjectBlocks.fieldXML()}\n              \n              </category>\n              <category id="XHR" name="Request">\n            ${this.bs.xhrBlocks.fieldXML()}\n            ${this.bs.windowsCreds.fieldXML()}\n            </category>\n        `,`<category id="catTimers"  name="Timers">\n          ${this.bs.waitBlocks1.fieldXML()}\n          ${this.bs.waitBlocks2.fieldXML()}\n        </category>`,`  <category id="programming" name="Programming">\n        ${this.bs.trycatchFinBlock.fieldXML()}\n        ${this.bs.commentBlock.fieldXML()}\n          </category>\n        \n      `,`</category>\n      ${c}\n      \n      <category name="Swagger" id="catSwagger" expanded='false' >          \n          ${a}\n        </category> \n       \n        `];this.initialize(f),this.bs.filterBlocks.definitionBlocks(e.Blocks,t),this.bs.waitBlocks2.definitionBlocks(e.defineBlocksWithJsonArray,t),this.bs.xhrBlocks.definitionBlocks(e.Blocks,t),this.bs.propBlocks.definitionBlocks(e.Blocks,t),this.bs.guiBlocks.definitionBlocks(e.Blocks,t),this.bs.convertersBlocks.definitionBlocks(e.Blocks,t),this.bs.exportFileBlock.definitionBlocks(e.Blocks,t),this.bs.createObjectBlocks.definitionBlocks(e.Blocks,t,e.Extensions,e.Mutator),this.bs.currentDateBlock.definitionBlocks(e.Blocks,t),this.bs.dateFromTextBlock.definitionBlocks(e.Blocks,t),this.bs.waitBlocks1.definitionBlocks(e.Blocks,t),this.bs.commentBlock.definitionBlocks(e.Blocks,t),this.bs.trycatchFinBlock.definitionBlocks(e.Blocks,t),this.bs.auth0Blocks.definitionBlocks(e.Blocks,t),this.bs.windowsCreds.definitionBlocks(e.Blocks,t),this.bs.chartBlock.definitionBlocks(e.Blocks,t),this.bs.emailBlocks.definitionBlocks(e.Blocks,t),this.bs.htmlblocks.definitionBlocks(e.Blocks,t),this.bs.HTMLParserBlocks.definitionBlocks(e.Blocks,t),this.bs.ttsBlock.definitionBlocks(e.Blocks,t),this.bs.pianoBlock.definitionBlocks(e.Blocks,t);var E=this.DetailsApp.swaggersDict,R=new Map;E.forEach((O,F)=>{var J=!O.hasError;console.log("show swagger: "+F+":"+J),J&&R.set(F,this.LoadSwaggerFromAPI(O))}),(null===(o=this.DetailsApp.LocalAPI)||void 0===o?void 0:o.WasAlive)&&this.LoadSwaggerFromUrl(this.DetailsApp.LocalAPI.urL+"swagger/v1/swagger.json","LocalAutomation"),window.setTimeout(this.afterTimeout,2e3,this)}SaveBlocks(){this.bh2.saveState(e.Xml,this.demoWorkspace,this.myId)}ShowBlocksDefinition(){return this.showCodeAndXML===gc.ShowBlocksDefinition}ShowSelection(){return gc[this.showCodeAndXML]}ShowSomething(){return this.showCodeAndXML!==gc.ShowNone}ShowOutput(){return this.showCodeAndXML===gc.ShowOutput}ShowCode(){return this.showCodeAndXML===gc.ShowCode}ShowXML(){return this.showCodeAndXML===gc.ShowXML}CalculateXMLAndCode(){var o=e.Xml.workspaceToDom(this.demoWorkspace,!0),a=e.Xml.domToPrettyText(o);this.showJSCode=this.run.latestCode,this.showXMLCode=a;var c=this.parseTextForBlocks(a);this.showBlocksDefinition=c.map(f=>{try{return`Blockly.Blocks['${f}']={ init: \n`+e.Blocks[f].init.toString()+`};\n};\nBlockly.JavaScript['${f}']=`+t[f].toString()+";"}catch(O){return console.error("parse definition : "+f,O),"//Error for "+f}}).join("\n")}parseTextForBlocks(o){var a=[];if(o.indexOf('<block type="')>=0)for(var c=o.split('<block type="'),f=1;f<c.length;f++){var E=c[f].split('"')[0];a.push(E)}return a}ShowInnerWorkings(){null!=this.demoWorkspace?(this.showCodeAndXML++,this.ShowSelection()||(this.showCodeAndXML=gc.ShowNone,setTimeout(a=>{e.svgResize(a)},1e3,this.demoWorkspace)),this.CalculateXMLAndCode()):window.alert("demoWorkspace is null")}Download(){var o=window.prompt("Name?","blocks.txt");null!=o&&this.bh2.DownloadBlocks(e.Xml,this.demoWorkspace,o)}changeListener(o){this.readThis(o.target)}readThis(o){var a=o.files[0],c=new FileReader,f=this;c.onloadend=function(E){f.bh2.LoadFile(e.Xml,f.demoWorkspace,c.result),f.run.resetInterpreter()},c.readAsText(a)}CategorySwaggerHidden(o){return`<category name='swagger_hidden_${o}' hidden='true' >${o}</category>`}SaveToLocalAPI(){var o,a,c;if(0==((null===(a=null===(o=this.DetailsApp)||void 0===o?void 0:o.LocalAPI)||void 0===a?void 0:a.WasAlive)||!1))return this.LoadLocalAPI(),void window.alert("local api it is not yet loaded - please try again after loading");var f=e.Xml.workspaceToDom(this.demoWorkspace,!0),E=e.Xml.domToPrettyText(f),R=new y.q,O=window.prompt("name of the blocks?");null!=O&&(R.id=O,R.blocks="",R.categories="",R.description="",null===(c=this.DetailsApp.LocalAPI)||void 0===c||c.SaveBlock(R,E).subscribe(F=>{console.log("number blocks",F),window.alert("saved !")}))}LoadLocalAPI(){var o,a,c=this;return null===(a=null===(o=c.DetailsApp.LocalAPI)||void 0===o?void 0:o.IsAlive())||void 0===a?void 0:a.pipe((0,go.K)(f=>{var E;throw window.alert(`cannot load ${null===(E=c.DetailsApp.LocalAPI)||void 0===E?void 0:E.urL}`),f})).subscribe(f=>{var E;if(!f){if(!window.confirm("LocalAPI is not alive.\n Do you want to downlod and run ?"))return;c.DetailsApp.LocalAPI.download()}var R=(null===(E=c.DetailsApp.LocalAPI)||void 0===E?void 0:E.urL)||"";c.LoadSwaggerFromUrl(R+="swagger/v1/swagger.json").then(O=>{O.hasError?window.alert("error loading local api"):(O.name="LocalAPI",c.addToToolboxSwagger(O,this),window.alert("loaded successfully"))})})}initialize(o){var a,c,f;const E=document.getElementById("blocklyDiv"+this.myId);if(null!=E){var R=o.map(Ft=>`<sep></sep>${Ft}`);if(this.toolboxXML=`<xml xmlns="https://developers.google.com/blockly/xml" id="toolbox-simple" style="display: none">    \n    ${R}\n    </xml>`,this.demoWorkspace=e.inject(E,{readOnly:!1,media:"media/",trashcan:!0,horizontalLayout:!1,move:{scrollbars:!0,drag:!0,wheel:!0},zoom:{controls:!0,wheel:!0,startScale:1,maxScale:3,minScale:.3,scaleSpeed:1.2,pinch:!0},toolbox:this.toolboxXML}),new u(this.demoWorkspace).init(),((null===(c=null===(a=this.DetailsApp.settings)||void 0===a?void 0:a.startBlocks)||void 0===c?void 0:c.length)||0)>0)try{var J=((null===(f=this.DetailsApp.settings)||void 0===f?void 0:f.startBlocks)||[]).join("\n"),dt=e.Xml.textToDom(J);e.Xml.clearWorkspaceAndLoadFromXml(dt,this.demoWorkspace)}catch(Ft){console.error("error when load default blocks",Ft)}this.bh=new Ad(this.demoWorkspace,t),this.run=this.bh;var F=this;this.demoWorkspace.addChangeListener(function(Ft){Ft.isUiEvent||(F.run.resetInterpreter(),F.run.generateCodeAndLoadIntoInterpreter(),F.CalculateXMLAndCode())})}else window.alert("blocklyDiv is null")}restoreBlocks(){this.bh2.restoreState(e.Xml,this.demoWorkspace,this.myId)}addToToolboxSwagger(o,a){var c,f=o.findCategSwaggerFromPaths().sort().map(qt=>`<category name='${qt}' custom='func_${o.name}_${qt}'></category>`).join("\n"),E=(null==a?void 0:a.CategorySwaggerHidden(null==a?void 0:a.swaggerLoaded))||"",R=a.toolboxXML,O=`<category name='${o.name}'>\n<category name='API' id='func_${o.name}'>\n${f}\n</category>\n${o.categSwagger()}\n\n<category name='meta' id='meta_${o.name}'>\n<block type='meta_swagger_controllers_${o.name}'></block>\n<block type='meta_swagger_controllers_actions_${o.name}'></block>\n</category>\n\n</category>\n`;if(R=R.replace(E,O),a.swaggerLoaded++,a.toolboxXML=R,null===(c=null==a?void 0:a.demoWorkspace)||void 0===c||c.updateToolbox(R),null!=(null==a?void 0:a.demoWorkspace)){var J="objects_"+o.nameCategSwagger(),dt="AllApi_"+o.nameCategSwagger(),Ft=o;a.demoWorkspace.registerToolboxCategoryCallback(J,qt=>a.registerSwaggerBlocksObjects(qt,Ft)),a.demoWorkspace.registerToolboxCategoryCallback(dt,qt=>a.registerSwaggerBlocksAPIAll(qt,Ft)),o.findCategSwaggerFromPaths().forEach(qt=>{var Ee;null===(Ee=null==a?void 0:a.demoWorkspace)||void 0===Ee||Ee.registerToolboxCategoryCallback(`func_${o.name}_${qt}`,De=>a.registerSwaggerBlocksAPIControllers(De,o,qt))})}}afterTimeout(o){var a,c,f;if(o.loadedCompletely=!0,null!=(null==o?void 0:o.swaggerData))if(o.toolboxXML=o.toolboxXML.replace("Swagger",`Swagger(${o.swaggerData.length})`),o.swaggerData.forEach(F=>{o.addToToolboxSwagger(F,o)}),null!=(null==o?void 0:o.mustLoadDemoBlock))o.ShowDemo(null==o?void 0:o.mustLoadDemoBlock);else{if(((null===(c=null===(a=o.DetailsApp.settings)||void 0===a?void 0:a.startBlocks)||void 0===c?void 0:c.length)||0)>0)try{var R=((null===(f=o.DetailsApp.settings)||void 0===f?void 0:f.startBlocks)||[]).join("\n");if((null==R?void 0:R.length)>62){var O=e.Xml.textToDom(R);e.Xml.clearWorkspaceAndLoadFromXml(O,o.demoWorkspace)}}catch(F){console.log("error when load default blocks",F)}o.restoreBlocks()}}}return g.id=0,g.\u0275fac=function(o){return new(o||g)(se.Y36(Gm),se.Y36(Ns.d),se.Y36(pf.F),se.Y36(ff.gz),se.Y36(yg.v),se.Y36(Wm.ux),se.Y36(Fr.uw))},g.\u0275cmp=se.Xpm({type:g,selectors:[["app-display-blockly"]],decls:49,vars:10,consts:[[4,"ngIf"],["rowHeight","1:1",3,"cols"],[2,"display","inline-block","height","100%","width","100%"],[2,"display","inline-block","height","5%","width","100%"],["mat-raised-button","","color","primary",3,"click"],["mat-raised-button","","id","downloadBlocks","color","primary",3,"matMenuTriggerFor"],["menuSave","matMenu"],[3,"inset"],["id","downloadBlocks","mat-raised-button","","color","primary",3,"click"],["mat-raised-button","",3,"color","click"],["mat-raised-button","","color","warn","id","runButton",3,"click"],["type","file",3,"change"],["mat-raised-button","","id","demos","color","accent",3,"click"],["target","_blank","mat-raised-button","","color","primary",3,"routerLink",4,"ngIf"],[2,"display","inline-block","height","100%","width","100%",3,"id"],["target","_blank","mat-raised-button","","color","primary",3,"routerLink"],["style","height: 100%; width: 100%",3,"selectedTabChange",4,"ngIf"],["style","display: inline-block; height: 100%; width: 100%",3,"options","ngModel","ngModelChange",4,"ngIf"],[2,"height","100%","width","100%",3,"selectedTabChange"],["label","JSON"],[2,"display","inline-block","height","100%","width","100%",3,"options","ngModel","ngModelChange"],["label","Text","isActive","true"],[3,"id"],["label","HTML"],["label","Chart"],["width","800","height","450",3,"id"],["label","Grid",4,"ngIf"],["label","Grid"]],template:function(o,a){if(1&o&&(se.YNc(0,zm,1,0,"mat-spinner",0),se.TgZ(1,"mat-grid-list",1),se.TgZ(2,"mat-grid-tile-header"),se.TgZ(3,"div",2),se.TgZ(4,"div",3),se.TgZ(5,"button",4),se.NdJ("click",function(){return a.LoadSwagger()}),se.TgZ(6,"mat-icon"),se._uU(7,"file_upload"),se.qZA(),se._uU(8," Load Swagger/OpenAPI "),se.qZA(),se._uU(9," \xa0 "),se.TgZ(10,"button",5),se.TgZ(11,"mat-icon"),se._uU(12,"save"),se.qZA(),se._uU(13," Save => "),se.qZA(),se.TgZ(14,"mat-menu",null,6),se.TgZ(16,"button",4),se.NdJ("click",function(){return a.SaveBlocks()}),se.TgZ(17,"mat-icon"),se._uU(18,"web"),se.qZA(),se._uU(19," Persist in browser "),se.qZA(),se._UZ(20,"mat-divider",7),se.TgZ(21,"button",8),se.NdJ("click",function(){return a.Download()}),se.TgZ(22,"mat-icon"),se._uU(23,"download"),se.qZA(),se._uU(24," Download blocks "),se.qZA(),se._UZ(25,"mat-divider",7),se.TgZ(26,"button",9),se.NdJ("click",function(){return a.SaveToLocalAPI()}),se.TgZ(27,"mat-icon"),se._uU(28,"save"),se.qZA(),se._uU(29," Save Local "),se.qZA(),se.qZA(),se._uU(30," \xa0 "),se.TgZ(31,"button",10),se.NdJ("click",function(){return a.RunCode()}),se.TgZ(32,"mat-icon"),se._uU(33,"play_arrow"),se.qZA(),se._uU(34," Execute "),se.qZA(),se._uU(35," \xa0 \xa0 "),se.TgZ(36,"input",11),se.NdJ("change",function(f){return a.changeListener(f)}),se.qZA(),se.TgZ(37,"button",4),se.NdJ("click",function(){return a.ShowInnerWorkings()}),se.TgZ(38,"mat-icon"),se._uU(39,"code"),se.qZA(),se._uU(40),se.qZA(),se.TgZ(41,"button",12),se.NdJ("click",function(){return a.ShowBlocks()}),se.TgZ(42,"mat-icon"),se._uU(43,"list"),se.qZA(),se._uU(44," Load Blocks "),se.qZA(),se.YNc(45,jm,2,4,"a",13),se.qZA(),se.qZA(),se.qZA(),se.TgZ(46,"mat-grid-tile"),se._UZ(47,"div",14),se.qZA(),se.YNc(48,Xm,5,4,"mat-grid-tile",0),se.qZA()),2&o){const c=se.MAs(15);se.Q6J("ngIf",!a.loadedCompletely),se.xp6(1),se.Q6J("cols",a.ShowSomething()?2:1),se.xp6(9),se.Q6J("matMenuTriggerFor",c),se.xp6(10),se.Q6J("inset",!0),se.xp6(5),se.Q6J("inset",!0),se.xp6(1),se.Q6J("color",null!=a.DetailsApp.LocalAPI&&a.DetailsApp.LocalAPI.WasAlive?"primary":"warn"),se.xp6(14),se.hij(" ",a.ShowSelection()," "),se.xp6(5),se.Q6J("ngIf",null==a.mustLoadDemoBlock?null:a.mustLoadDemoBlock.length),se.xp6(2),se.Q6J("id","blocklyDiv"+a.myId),se.xp6(1),se.Q6J("ngIf",a.ShowSomething())}},directives:[Qu.O5,_p.Il,_p.$H,_p.jo,Ah.lW,Il.Hw,Gd.p6,Gd.VK,Eg.d,_p.DX,gf.$g,Ah.zs,ff.yS,$s.SP,$s.uX,mf.C,xr.JJ,xr.On],styles:[".tabulator[_ngcontent-%COMP%]{font-size:12px;border:none}.tabulator[_ngcontent-%COMP%]   .tabulator-header[_ngcontent-%COMP%]{font-weight:400;border-bottom:1px solid;border-bottom-color:#0000001f;color:#0000008a}.tabulator[_ngcontent-%COMP%]   .tabulator-header[_ngcontent-%COMP%]   .tabulator-col[_ngcontent-%COMP%]{height:48px;background-color:#fff;border:none;padding:0 7px}.tabulator-row[_ngcontent-%COMP%]{border-bottom:1px solid;border-bottom-color:#0000001f;min-height:48px;vertical-align:middle}.tabulator-row[_ngcontent-%COMP%]   .tabulator-cell[_ngcontent-%COMP%]{padding:16px 7px;border-right:none;vertical-align:middle}.tabulator-row[_ngcontent-%COMP%]   .tabulator-cell[_ngcontent-%COMP%]:first-of-type, .tabulator[_ngcontent-%COMP%]   .tabulator-header[_ngcontent-%COMP%]   .tabulator-col[_ngcontent-%COMP%]:first-of-type{padding-left:24px}.tabulator-row.tabulator-row-even[_ngcontent-%COMP%]{background-color:#fff}"]}),g})()},92590:(U,$,m)=>{"use strict";m.d($,{F:()=>r}),m(39646);var _=m(54004),e=m(18505),t=m(5e3),n=m(40520);let r=(()=>{class s{constructor(y){this.http=y}getDemoBlocks(){var y=(new Date).toISOString();return this.http.get(`assets/showUsage/demoBlocks/all.txt?${y}`,{responseType:"text"}).pipe((0,_.U)(x=>JSON.parse(x)))}getCustomCategories(){var y=(new Date).toISOString();return this.http.get(`assets/loadAtStartup/customCategories.txt?${y}`,{responseType:"text"}).pipe((0,_.U)(x=>x.toString()))}getSwaggerLinks(){var y=(new Date).toISOString();return this.http.get(`assets/loadAtStartup/swaggers.json?${y}`,{responseType:"text"}).pipe((0,_.U)(x=>JSON.parse(x)))}getDemoBlock(y){var x=(new Date).toISOString();return this.http.get(`assets/showUsage/demoBlocks/${y}.txt?${x}`,{responseType:"text"}).pipe((0,e.b)(Q=>{}),(0,_.U)(Q=>Q.toString()))}}return s.\u0275fac=function(y){return new(y||s)(t.LFG(n.eN))},s.\u0275prov=t.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})()},20468:(U,$,m)=>{"use strict";var C=m(22313),_=m(5e3),e=m(93075),t=m(91083),n=m(15861),r=m(47423),s=m(63874),u=m(53251),y=m(69808);const x=["vcr"];function B(L,G){if(1&L&&(_.TgZ(0,"mat-icon",9),_._uU(1),_.qZA()),2&L){const b=_.oxw(2).$implicit;_.xp6(1),_.hij(" filter_",b+1,"")}}function Q(L,G){1&L&&(_.TgZ(0,"span"),_._uU(1,"W:{{number+1}"),_.qZA())}function at(L,G){if(1&L&&(_.YNc(0,B,2,1,"mat-icon",7),_.YNc(1,Q,2,0,"span",8)),2&L){const b=_.oxw().$implicit;_.Q6J("ngIf",b<10),_.xp6(1),_.Q6J("ngIf",b>9)}}function rt(L,G){}function St(L,G){1&L&&(_.TgZ(0,"mat-tab",4),_.YNc(1,at,2,2,"ng-template",5),_.YNc(2,rt,0,0,"ng-template",null,6,_.W1O),_.qZA()),2&L&&_.Q6J("label","W:"+(G.$implicit+1))}let Ht=(()=>{class L{constructor(b,k){this.fooInjector=b,this.resolver=k,this.data=[],this.selectedTabIndex=0,this.numbers=[0]}addTab(){this.numbers.push(this.numbers.length),this.selectedTabIndex=this.numbers.length-1}changeSelected(b){this.data.filter(k=>k==b).length>0||(this.data.push(b),this.loadBar(b).then(k=>{}))}ngAfterViewInit(){this.data.push(0),this.loadBar(0).then(b=>{})}loadBar(b){var k=this;return(0,n.Z)(function*(){var tt;try{const Ke=yield Promise.resolve().then(m.bind(m,27392)),Mi=k.resolver.resolveComponentFactory(Ke.DisplayBlocklyComponent);var Pt=null===(tt=k.components)||void 0===tt?void 0:tt.get(b);null!=Pt&&Pt.createComponent(Mi)}catch(Ke){console.error("loading"+b,Ke)}return b})()}ngOnInit(){}}return L.\u0275fac=function(b){return new(b||L)(_.Y36(_.zs3),_.Y36(_._Vd))},L.\u0275cmp=_.Xpm({type:L,selectors:[["app-blockly-studio"]],viewQuery:function(b,k){if(1&b&&_.Gf(x,5,_.s_b),2&b){let tt;_.iGM(tt=_.CRH())&&(k.components=tt)}},decls:7,vars:2,consts:[["mat-icon-button","","color","primary",3,"click"],[3,"selectedIndex","selectedIndexChange"],[3,"label",4,"ngFor","ngForOf"],["mat-raised-button","","color","primary",3,"click"],[3,"label"],["mat-tab-label",""],["vcr",""],["aria-hidden","false",4,"ngIf"],[4,"ngIf"],["aria-hidden","false"]],template:function(b,k){1&b&&(_.TgZ(0,"button",0),_.NdJ("click",function(){return k.addTab()}),_.TgZ(1,"mat-icon"),_._uU(2,"add_circle"),_.qZA(),_.qZA(),_.TgZ(3,"mat-tab-group",1),_.NdJ("selectedIndexChange",function(Pt){return k.changeSelected(Pt)}),_.YNc(4,St,4,1,"mat-tab",2),_.qZA(),_.TgZ(5,"button",3),_.NdJ("click",function(){return k.addTab()}),_._uU(6,"Add"),_.qZA()),2&b&&(_.xp6(3),_.Q6J("selectedIndex",k.selectedTabIndex),_.xp6(1),_.Q6J("ngForOf",k.numbers))},directives:[r.lW,s.Hw,u.SP,y.sg,u.uX,u.uD,y.O5],styles:[""]}),L})();var vt=m(27392);const xt=[{path:"",redirectTo:"automation/main",pathMatch:"full"},{path:"automation/main",component:vt.DisplayBlocklyComponent},{path:"automation/studio",component:Ht},{path:"automation/loadexample/:demoblock",component:vt.DisplayBlocklyComponent}];let Wt=(()=>{class L{}return L.\u0275fac=function(b){return new(b||L)},L.\u0275mod=_.oAB({type:L}),L.\u0275inj=_.cJS({imports:[[t.Bz.forRoot(xt)],t.Bz]}),L})();var Jt=m(28017),Ct=m(95113),yt=m(54004),ot=m(77579),mt=m(26063);class lt extends ot.x{constructor(G=1/0,b=1/0,k=mt.l){super(),this._bufferSize=G,this._windowTime=b,this._timestampProvider=k,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=b===1/0,this._bufferSize=Math.max(1,G),this._windowTime=Math.max(1,b)}next(G){const{isStopped:b,_buffer:k,_infiniteTimeWindow:tt,_timestampProvider:Pt,_windowTime:Ke}=this;b||(k.push(G),!tt&&k.push(Pt.now()+Ke)),this._trimBuffer(),super.next(G)}_subscribe(G){this._throwIfClosed(),this._trimBuffer();const b=this._innerSubscribe(G),{_infiniteTimeWindow:k,_buffer:tt}=this,Pt=tt.slice();for(let Ke=0;Ke<Pt.length&&!G.closed;Ke+=k?1:2)G.next(Pt[Ke]);return this._checkFinalizedStatuses(G),b}_trimBuffer(){const{_bufferSize:G,_timestampProvider:b,_buffer:k,_infiniteTimeWindow:tt}=this,Pt=(tt?1:2)*G;if(G<1/0&&Pt<k.length&&k.splice(0,k.length-Pt),!tt){const Ke=b.now();let Mi=0;for(let tn=1;tn<k.length&&k[tn]<=Ke;tn+=2)Mi=tn;Mi&&k.splice(0,Mi+1)}}}var Ut=m(13099);let Et=(()=>{class L{constructor(){this.title="",this.footer="",this.startBlocks=[],this.tourSteps=[],this.latestVersion="",this.localAPI=""}}return L.version="2021.12.30.1600",L})();var ht=m(80926),nt=m(70925),he=m(30495),Mt=m(90508),Nt=m(63191),de=m(91159),ve=m(54968),ue=m(56451),Be=m(39300),Ne=m(69718),Qe=m(82722),Di=m(71884),Ze=m(95698),Le=m(68675),gi=m(78372),Bt=m(41777),Te=m(76360),$t=m(15664),_e=m(50226);const At=["*"];function pe(L,G){if(1&L){const b=_.EpF();_.TgZ(0,"div",2),_.NdJ("click",function(){return _.CHM(b),_.oxw()._onBackdropClicked()}),_.qZA()}if(2&L){const b=_.oxw();_.ekj("mat-drawer-shown",b._isShowingBackdrop())}}function ze(L,G){1&L&&(_.TgZ(0,"mat-drawer-content"),_.Hsn(1,2),_.qZA())}const hi=[[["mat-drawer"]],[["mat-drawer-content"]],"*"],Ie=["mat-drawer","mat-drawer-content","*"];function te(L,G){if(1&L){const b=_.EpF();_.TgZ(0,"div",2),_.NdJ("click",function(){return _.CHM(b),_.oxw()._onBackdropClicked()}),_.qZA()}if(2&L){const b=_.oxw();_.ekj("mat-drawer-shown",b._isShowingBackdrop())}}function ee(L,G){1&L&&(_.TgZ(0,"mat-sidenav-content",3),_.Hsn(1,2),_.qZA())}const ke=[[["mat-sidenav"]],[["mat-sidenav-content"]],"*"],ne=["mat-sidenav","mat-sidenav-content","*"],ye={transformDrawer:(0,Bt.X$)("transform",[(0,Bt.SB)("open, open-instant",(0,Bt.oB)({transform:"none",visibility:"visible"})),(0,Bt.SB)("void",(0,Bt.oB)({"box-shadow":"none",visibility:"hidden"})),(0,Bt.eR)("void => open-instant",(0,Bt.jt)("0ms")),(0,Bt.eR)("void <=> open, open-instant => void",(0,Bt.jt)("400ms cubic-bezier(0.25, 0.8, 0.25, 1)"))])},ce=new _.OlP("MAT_DRAWER_DEFAULT_AUTOSIZE",{providedIn:"root",factory:function(){return!1}}),ei=new _.OlP("MAT_DRAWER_CONTAINER");let Fi=(()=>{class L extends he.PQ{constructor(b,k,tt,Pt,Ke){super(tt,Pt,Ke),this._changeDetectorRef=b,this._container=k}ngAfterContentInit(){this._container._contentMarginChanges.subscribe(()=>{this._changeDetectorRef.markForCheck()})}}return L.\u0275fac=function(b){return new(b||L)(_.Y36(_.sBO),_.Y36((0,_.Gpc)(()=>yi)),_.Y36(_.SBq),_.Y36(he.mF),_.Y36(_.R0b))},L.\u0275cmp=_.Xpm({type:L,selectors:[["mat-drawer-content"]],hostAttrs:[1,"mat-drawer-content"],hostVars:4,hostBindings:function(b,k){2&b&&_.Udp("margin-left",k._container._contentMargins.left,"px")("margin-right",k._container._contentMargins.right,"px")},features:[_.qOj],ngContentSelectors:At,decls:1,vars:0,template:function(b,k){1&b&&(_.F$t(),_.Hsn(0))},encapsulation:2,changeDetection:0}),L})(),wi=(()=>{class L{constructor(b,k,tt,Pt,Ke,Mi,tn,Nn){this._elementRef=b,this._focusTrapFactory=k,this._focusMonitor=tt,this._platform=Pt,this._ngZone=Ke,this._interactivityChecker=Mi,this._doc=tn,this._container=Nn,this._elementFocusedBeforeDrawerWasOpened=null,this._enableAnimations=!1,this._position="start",this._mode="over",this._disableClose=!1,this._opened=!1,this._animationStarted=new ot.x,this._animationEnd=new ot.x,this._animationState="void",this.openedChange=new _.vpe(!0),this._openedStream=this.openedChange.pipe((0,Be.h)(hn=>hn),(0,yt.U)(()=>{})),this.openedStart=this._animationStarted.pipe((0,Be.h)(hn=>hn.fromState!==hn.toState&&0===hn.toState.indexOf("open")),(0,Ne.h)(void 0)),this._closedStream=this.openedChange.pipe((0,Be.h)(hn=>!hn),(0,yt.U)(()=>{})),this.closedStart=this._animationStarted.pipe((0,Be.h)(hn=>hn.fromState!==hn.toState&&"void"===hn.toState),(0,Ne.h)(void 0)),this._destroyed=new ot.x,this.onPositionChanged=new _.vpe,this._modeChanged=new ot.x,this.openedChange.subscribe(hn=>{hn?(this._doc&&(this._elementFocusedBeforeDrawerWasOpened=this._doc.activeElement),this._takeFocus()):this._isFocusWithinDrawer()&&this._restoreFocus(this._openedVia||"program")}),this._ngZone.runOutsideAngular(()=>{(0,ve.R)(this._elementRef.nativeElement,"keydown").pipe((0,Be.h)(hn=>hn.keyCode===de.hY&&!this.disableClose&&!(0,de.Vb)(hn)),(0,Qe.R)(this._destroyed)).subscribe(hn=>this._ngZone.run(()=>{this.close(),hn.stopPropagation(),hn.preventDefault()}))}),this._animationEnd.pipe((0,Di.x)((hn,Wr)=>hn.fromState===Wr.fromState&&hn.toState===Wr.toState)).subscribe(hn=>{const{fromState:Wr,toState:yr}=hn;(0===yr.indexOf("open")&&"void"===Wr||"void"===yr&&0===Wr.indexOf("open"))&&this.openedChange.emit(this._opened)})}get position(){return this._position}set position(b){(b="end"===b?"end":"start")!=this._position&&(this._position=b,this.onPositionChanged.emit())}get mode(){return this._mode}set mode(b){this._mode=b,this._updateFocusTrapState(),this._modeChanged.next()}get disableClose(){return this._disableClose}set disableClose(b){this._disableClose=(0,Nt.Ig)(b)}get autoFocus(){const b=this._autoFocus;return null==b?"side"===this.mode?"dialog":"first-tabbable":b}set autoFocus(b){("true"===b||"false"===b||null==b)&&(b=(0,Nt.Ig)(b)),this._autoFocus=b}get opened(){return this._opened}set opened(b){this.toggle((0,Nt.Ig)(b))}_forceFocus(b,k){this._interactivityChecker.isFocusable(b)||(b.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{b.addEventListener("blur",()=>b.removeAttribute("tabindex")),b.addEventListener("mousedown",()=>b.removeAttribute("tabindex"))})),b.focus(k)}_focusByCssSelector(b,k){let tt=this._elementRef.nativeElement.querySelector(b);tt&&this._forceFocus(tt,k)}_takeFocus(){if(!this._focusTrap)return;const b=this._elementRef.nativeElement;switch(this.autoFocus){case!1:case"dialog":return;case!0:case"first-tabbable":this._focusTrap.focusInitialElementWhenReady().then(k=>{!k&&"function"==typeof this._elementRef.nativeElement.focus&&b.focus()});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this.autoFocus)}}_restoreFocus(b){"dialog"!==this.autoFocus&&(this._elementFocusedBeforeDrawerWasOpened?this._focusMonitor.focusVia(this._elementFocusedBeforeDrawerWasOpened,b):this._elementRef.nativeElement.blur(),this._elementFocusedBeforeDrawerWasOpened=null)}_isFocusWithinDrawer(){var b;const k=null===(b=this._doc)||void 0===b?void 0:b.activeElement;return!!k&&this._elementRef.nativeElement.contains(k)}ngAfterContentInit(){this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._updateFocusTrapState()}ngAfterContentChecked(){this._platform.isBrowser&&(this._enableAnimations=!0)}ngOnDestroy(){this._focusTrap&&this._focusTrap.destroy(),this._animationStarted.complete(),this._animationEnd.complete(),this._modeChanged.complete(),this._destroyed.next(),this._destroyed.complete()}open(b){return this.toggle(!0,b)}close(){return this.toggle(!1)}_closeViaBackdropClick(){return this._setOpen(!1,!0,"mouse")}toggle(b=!this.opened,k){b&&k&&(this._openedVia=k);const tt=this._setOpen(b,!b&&this._isFocusWithinDrawer(),this._openedVia||"program");return b||(this._openedVia=null),tt}_setOpen(b,k,tt){return this._opened=b,b?this._animationState=this._enableAnimations?"open":"open-instant":(this._animationState="void",k&&this._restoreFocus(tt)),this._updateFocusTrapState(),new Promise(Pt=>{this.openedChange.pipe((0,Ze.q)(1)).subscribe(Ke=>Pt(Ke?"open":"close"))})}_getWidth(){return this._elementRef.nativeElement&&this._elementRef.nativeElement.offsetWidth||0}_updateFocusTrapState(){this._focusTrap&&(this._focusTrap.enabled=this.opened&&"side"!==this.mode)}}return L.\u0275fac=function(b){return new(b||L)(_.Y36(_.SBq),_.Y36($t.qV),_.Y36($t.tE),_.Y36(nt.t4),_.Y36(_.R0b),_.Y36($t.ic),_.Y36(y.K0,8),_.Y36(ei,8))},L.\u0275cmp=_.Xpm({type:L,selectors:[["mat-drawer"]],hostAttrs:["tabIndex","-1",1,"mat-drawer"],hostVars:12,hostBindings:function(b,k){1&b&&_.WFA("@transform.start",function(Pt){return k._animationStarted.next(Pt)})("@transform.done",function(Pt){return k._animationEnd.next(Pt)}),2&b&&(_.uIk("align",null),_.d8E("@transform",k._animationState),_.ekj("mat-drawer-end","end"===k.position)("mat-drawer-over","over"===k.mode)("mat-drawer-push","push"===k.mode)("mat-drawer-side","side"===k.mode)("mat-drawer-opened",k.opened))},inputs:{position:"position",mode:"mode",disableClose:"disableClose",autoFocus:"autoFocus",opened:"opened"},outputs:{openedChange:"openedChange",_openedStream:"opened",openedStart:"openedStart",_closedStream:"closed",closedStart:"closedStart",onPositionChanged:"positionChanged"},exportAs:["matDrawer"],ngContentSelectors:At,decls:2,vars:0,consts:[["cdkScrollable","",1,"mat-drawer-inner-container"]],template:function(b,k){1&b&&(_.F$t(),_.TgZ(0,"div",0),_.Hsn(1),_.qZA())},directives:[he.PQ],encapsulation:2,data:{animation:[ye.transformDrawer]},changeDetection:0}),L})(),yi=(()=>{class L{constructor(b,k,tt,Pt,Ke,Mi=!1,tn){this._dir=b,this._element=k,this._ngZone=tt,this._changeDetectorRef=Pt,this._animationMode=tn,this._drawers=new _.n_E,this.backdropClick=new _.vpe,this._destroyed=new ot.x,this._doCheckSubject=new ot.x,this._contentMargins={left:null,right:null},this._contentMarginChanges=new ot.x,b&&b.change.pipe((0,Qe.R)(this._destroyed)).subscribe(()=>{this._validateDrawers(),this.updateContentMargins()}),Ke.change().pipe((0,Qe.R)(this._destroyed)).subscribe(()=>this.updateContentMargins()),this._autosize=Mi}get start(){return this._start}get end(){return this._end}get autosize(){return this._autosize}set autosize(b){this._autosize=(0,Nt.Ig)(b)}get hasBackdrop(){return null==this._backdropOverride?!this._start||"side"!==this._start.mode||!this._end||"side"!==this._end.mode:this._backdropOverride}set hasBackdrop(b){this._backdropOverride=null==b?null:(0,Nt.Ig)(b)}get scrollable(){return this._userContent||this._content}ngAfterContentInit(){this._allDrawers.changes.pipe((0,Le.O)(this._allDrawers),(0,Qe.R)(this._destroyed)).subscribe(b=>{this._drawers.reset(b.filter(k=>!k._container||k._container===this)),this._drawers.notifyOnChanges()}),this._drawers.changes.pipe((0,Le.O)(null)).subscribe(()=>{this._validateDrawers(),this._drawers.forEach(b=>{this._watchDrawerToggle(b),this._watchDrawerPosition(b),this._watchDrawerMode(b)}),(!this._drawers.length||this._isDrawerOpen(this._start)||this._isDrawerOpen(this._end))&&this.updateContentMargins(),this._changeDetectorRef.markForCheck()}),this._ngZone.runOutsideAngular(()=>{this._doCheckSubject.pipe((0,gi.b)(10),(0,Qe.R)(this._destroyed)).subscribe(()=>this.updateContentMargins())})}ngOnDestroy(){this._contentMarginChanges.complete(),this._doCheckSubject.complete(),this._drawers.destroy(),this._destroyed.next(),this._destroyed.complete()}open(){this._drawers.forEach(b=>b.open())}close(){this._drawers.forEach(b=>b.close())}updateContentMargins(){let b=0,k=0;if(this._left&&this._left.opened)if("side"==this._left.mode)b+=this._left._getWidth();else if("push"==this._left.mode){const tt=this._left._getWidth();b+=tt,k-=tt}if(this._right&&this._right.opened)if("side"==this._right.mode)k+=this._right._getWidth();else if("push"==this._right.mode){const tt=this._right._getWidth();k+=tt,b-=tt}b=b||null,k=k||null,(b!==this._contentMargins.left||k!==this._contentMargins.right)&&(this._contentMargins={left:b,right:k},this._ngZone.run(()=>this._contentMarginChanges.next(this._contentMargins)))}ngDoCheck(){this._autosize&&this._isPushed()&&this._ngZone.runOutsideAngular(()=>this._doCheckSubject.next())}_watchDrawerToggle(b){b._animationStarted.pipe((0,Be.h)(k=>k.fromState!==k.toState),(0,Qe.R)(this._drawers.changes)).subscribe(k=>{"open-instant"!==k.toState&&"NoopAnimations"!==this._animationMode&&this._element.nativeElement.classList.add("mat-drawer-transition"),this.updateContentMargins(),this._changeDetectorRef.markForCheck()}),"side"!==b.mode&&b.openedChange.pipe((0,Qe.R)(this._drawers.changes)).subscribe(()=>this._setContainerClass(b.opened))}_watchDrawerPosition(b){!b||b.onPositionChanged.pipe((0,Qe.R)(this._drawers.changes)).subscribe(()=>{this._ngZone.onMicrotaskEmpty.pipe((0,Ze.q)(1)).subscribe(()=>{this._validateDrawers()})})}_watchDrawerMode(b){b&&b._modeChanged.pipe((0,Qe.R)((0,ue.T)(this._drawers.changes,this._destroyed))).subscribe(()=>{this.updateContentMargins(),this._changeDetectorRef.markForCheck()})}_setContainerClass(b){const k=this._element.nativeElement.classList,tt="mat-drawer-container-has-open";b?k.add(tt):k.remove(tt)}_validateDrawers(){this._start=this._end=null,this._drawers.forEach(b=>{"end"==b.position?this._end=b:this._start=b}),this._right=this._left=null,this._dir&&"rtl"===this._dir.value?(this._left=this._end,this._right=this._start):(this._left=this._start,this._right=this._end)}_isPushed(){return this._isDrawerOpen(this._start)&&"over"!=this._start.mode||this._isDrawerOpen(this._end)&&"over"!=this._end.mode}_onBackdropClicked(){this.backdropClick.emit(),this._closeModalDrawersViaBackdrop()}_closeModalDrawersViaBackdrop(){[this._start,this._end].filter(b=>b&&!b.disableClose&&this._canHaveBackdrop(b)).forEach(b=>b._closeViaBackdropClick())}_isShowingBackdrop(){return this._isDrawerOpen(this._start)&&this._canHaveBackdrop(this._start)||this._isDrawerOpen(this._end)&&this._canHaveBackdrop(this._end)}_canHaveBackdrop(b){return"side"!==b.mode||!!this._backdropOverride}_isDrawerOpen(b){return null!=b&&b.opened}}return L.\u0275fac=function(b){return new(b||L)(_.Y36(_e.Is,8),_.Y36(_.SBq),_.Y36(_.R0b),_.Y36(_.sBO),_.Y36(he.rL),_.Y36(ce),_.Y36(Te.Qb,8))},L.\u0275cmp=_.Xpm({type:L,selectors:[["mat-drawer-container"]],contentQueries:function(b,k,tt){if(1&b&&(_.Suo(tt,Fi,5),_.Suo(tt,wi,5)),2&b){let Pt;_.iGM(Pt=_.CRH())&&(k._content=Pt.first),_.iGM(Pt=_.CRH())&&(k._allDrawers=Pt)}},viewQuery:function(b,k){if(1&b&&_.Gf(Fi,5),2&b){let tt;_.iGM(tt=_.CRH())&&(k._userContent=tt.first)}},hostAttrs:[1,"mat-drawer-container"],hostVars:2,hostBindings:function(b,k){2&b&&_.ekj("mat-drawer-container-explicit-backdrop",k._backdropOverride)},inputs:{autosize:"autosize",hasBackdrop:"hasBackdrop"},outputs:{backdropClick:"backdropClick"},exportAs:["matDrawerContainer"],features:[_._Bn([{provide:ei,useExisting:L}])],ngContentSelectors:Ie,decls:4,vars:2,consts:[["class","mat-drawer-backdrop",3,"mat-drawer-shown","click",4,"ngIf"],[4,"ngIf"],[1,"mat-drawer-backdrop",3,"click"]],template:function(b,k){1&b&&(_.F$t(hi),_.YNc(0,pe,1,2,"div",0),_.Hsn(1),_.Hsn(2,1),_.YNc(3,ze,2,0,"mat-drawer-content",1)),2&b&&(_.Q6J("ngIf",k.hasBackdrop),_.xp6(3),_.Q6J("ngIf",!k._content))},directives:[y.O5,Fi],styles:[".mat-drawer-container{position:relative;z-index:1;box-sizing:border-box;-webkit-overflow-scrolling:touch;display:block;overflow:hidden}.mat-drawer-container[fullscreen]{top:0;left:0;right:0;bottom:0;position:absolute}.mat-drawer-container[fullscreen].mat-drawer-container-has-open{overflow:hidden}.mat-drawer-container.mat-drawer-container-explicit-backdrop .mat-drawer-side{z-index:3}.mat-drawer-container.ng-animate-disabled .mat-drawer-backdrop,.mat-drawer-container.ng-animate-disabled .mat-drawer-content,.ng-animate-disabled .mat-drawer-container .mat-drawer-backdrop,.ng-animate-disabled .mat-drawer-container .mat-drawer-content{transition:none}.mat-drawer-backdrop{top:0;left:0;right:0;bottom:0;position:absolute;display:block;z-index:3;visibility:hidden}.mat-drawer-backdrop.mat-drawer-shown{visibility:visible}.mat-drawer-transition .mat-drawer-backdrop{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:background-color,visibility}.cdk-high-contrast-active .mat-drawer-backdrop{opacity:.5}.mat-drawer-content{position:relative;z-index:1;display:block;height:100%;overflow:auto}.mat-drawer-transition .mat-drawer-content{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:transform,margin-left,margin-right}.mat-drawer{position:relative;z-index:4;display:block;position:absolute;top:0;bottom:0;z-index:3;outline:0;box-sizing:border-box;overflow-y:auto;transform:translate3d(-100%, 0, 0)}.cdk-high-contrast-active .mat-drawer,.cdk-high-contrast-active [dir=rtl] .mat-drawer.mat-drawer-end{border-right:solid 1px currentColor}.cdk-high-contrast-active [dir=rtl] .mat-drawer,.cdk-high-contrast-active .mat-drawer.mat-drawer-end{border-left:solid 1px currentColor;border-right:none}.mat-drawer.mat-drawer-side{z-index:2}.mat-drawer.mat-drawer-end{right:0;transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer{transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer.mat-drawer-end{left:0;right:auto;transform:translate3d(-100%, 0, 0)}.mat-drawer-inner-container{width:100%;height:100%;overflow:auto;-webkit-overflow-scrolling:touch}.mat-sidenav-fixed{position:fixed}\n"],encapsulation:2,changeDetection:0}),L})(),pn=(()=>{class L extends Fi{constructor(b,k,tt,Pt,Ke){super(b,k,tt,Pt,Ke)}}return L.\u0275fac=function(b){return new(b||L)(_.Y36(_.sBO),_.Y36((0,_.Gpc)(()=>Zi)),_.Y36(_.SBq),_.Y36(he.mF),_.Y36(_.R0b))},L.\u0275cmp=_.Xpm({type:L,selectors:[["mat-sidenav-content"]],hostAttrs:[1,"mat-drawer-content","mat-sidenav-content"],hostVars:4,hostBindings:function(b,k){2&b&&_.Udp("margin-left",k._container._contentMargins.left,"px")("margin-right",k._container._contentMargins.right,"px")},features:[_.qOj],ngContentSelectors:At,decls:1,vars:0,template:function(b,k){1&b&&(_.F$t(),_.Hsn(0))},encapsulation:2,changeDetection:0}),L})(),mi=(()=>{class L extends wi{constructor(){super(...arguments),this._fixedInViewport=!1,this._fixedTopGap=0,this._fixedBottomGap=0}get fixedInViewport(){return this._fixedInViewport}set fixedInViewport(b){this._fixedInViewport=(0,Nt.Ig)(b)}get fixedTopGap(){return this._fixedTopGap}set fixedTopGap(b){this._fixedTopGap=(0,Nt.su)(b)}get fixedBottomGap(){return this._fixedBottomGap}set fixedBottomGap(b){this._fixedBottomGap=(0,Nt.su)(b)}}return L.\u0275fac=function(){let G;return function(k){return(G||(G=_.n5z(L)))(k||L)}}(),L.\u0275cmp=_.Xpm({type:L,selectors:[["mat-sidenav"]],hostAttrs:["tabIndex","-1",1,"mat-drawer","mat-sidenav"],hostVars:17,hostBindings:function(b,k){2&b&&(_.uIk("align",null),_.Udp("top",k.fixedInViewport?k.fixedTopGap:null,"px")("bottom",k.fixedInViewport?k.fixedBottomGap:null,"px"),_.ekj("mat-drawer-end","end"===k.position)("mat-drawer-over","over"===k.mode)("mat-drawer-push","push"===k.mode)("mat-drawer-side","side"===k.mode)("mat-drawer-opened",k.opened)("mat-sidenav-fixed",k.fixedInViewport))},inputs:{fixedInViewport:"fixedInViewport",fixedTopGap:"fixedTopGap",fixedBottomGap:"fixedBottomGap"},exportAs:["matSidenav"],features:[_.qOj],ngContentSelectors:At,decls:2,vars:0,consts:[["cdkScrollable","",1,"mat-drawer-inner-container"]],template:function(b,k){1&b&&(_.F$t(),_.TgZ(0,"div",0),_.Hsn(1),_.qZA())},directives:[he.PQ],encapsulation:2,data:{animation:[ye.transformDrawer]},changeDetection:0}),L})(),Zi=(()=>{class L extends yi{}return L.\u0275fac=function(){let G;return function(k){return(G||(G=_.n5z(L)))(k||L)}}(),L.\u0275cmp=_.Xpm({type:L,selectors:[["mat-sidenav-container"]],contentQueries:function(b,k,tt){if(1&b&&(_.Suo(tt,pn,5),_.Suo(tt,mi,5)),2&b){let Pt;_.iGM(Pt=_.CRH())&&(k._content=Pt.first),_.iGM(Pt=_.CRH())&&(k._allDrawers=Pt)}},hostAttrs:[1,"mat-drawer-container","mat-sidenav-container"],hostVars:2,hostBindings:function(b,k){2&b&&_.ekj("mat-drawer-container-explicit-backdrop",k._backdropOverride)},exportAs:["matSidenavContainer"],features:[_._Bn([{provide:ei,useExisting:L}]),_.qOj],ngContentSelectors:ne,decls:4,vars:2,consts:[["class","mat-drawer-backdrop",3,"mat-drawer-shown","click",4,"ngIf"],["cdkScrollable","",4,"ngIf"],[1,"mat-drawer-backdrop",3,"click"],["cdkScrollable",""]],template:function(b,k){1&b&&(_.F$t(ke),_.YNc(0,te,1,2,"div",0),_.Hsn(1),_.Hsn(2,1),_.YNc(3,ee,2,0,"mat-sidenav-content",1)),2&b&&(_.Q6J("ngIf",k.hasBackdrop),_.xp6(3),_.Q6J("ngIf",!k._content))},directives:[y.O5,pn,he.PQ],styles:[".mat-drawer-container{position:relative;z-index:1;box-sizing:border-box;-webkit-overflow-scrolling:touch;display:block;overflow:hidden}.mat-drawer-container[fullscreen]{top:0;left:0;right:0;bottom:0;position:absolute}.mat-drawer-container[fullscreen].mat-drawer-container-has-open{overflow:hidden}.mat-drawer-container.mat-drawer-container-explicit-backdrop .mat-drawer-side{z-index:3}.mat-drawer-container.ng-animate-disabled .mat-drawer-backdrop,.mat-drawer-container.ng-animate-disabled .mat-drawer-content,.ng-animate-disabled .mat-drawer-container .mat-drawer-backdrop,.ng-animate-disabled .mat-drawer-container .mat-drawer-content{transition:none}.mat-drawer-backdrop{top:0;left:0;right:0;bottom:0;position:absolute;display:block;z-index:3;visibility:hidden}.mat-drawer-backdrop.mat-drawer-shown{visibility:visible}.mat-drawer-transition .mat-drawer-backdrop{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:background-color,visibility}.cdk-high-contrast-active .mat-drawer-backdrop{opacity:.5}.mat-drawer-content{position:relative;z-index:1;display:block;height:100%;overflow:auto}.mat-drawer-transition .mat-drawer-content{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:transform,margin-left,margin-right}.mat-drawer{position:relative;z-index:4;display:block;position:absolute;top:0;bottom:0;z-index:3;outline:0;box-sizing:border-box;overflow-y:auto;transform:translate3d(-100%, 0, 0)}.cdk-high-contrast-active .mat-drawer,.cdk-high-contrast-active [dir=rtl] .mat-drawer.mat-drawer-end{border-right:solid 1px currentColor}.cdk-high-contrast-active [dir=rtl] .mat-drawer,.cdk-high-contrast-active .mat-drawer.mat-drawer-end{border-left:solid 1px currentColor;border-right:none}.mat-drawer.mat-drawer-side{z-index:2}.mat-drawer.mat-drawer-end{right:0;transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer{transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer.mat-drawer-end{left:0;right:auto;transform:translate3d(-100%, 0, 0)}.mat-drawer-inner-container{width:100%;height:100%;overflow:auto;-webkit-overflow-scrolling:touch}.mat-sidenav-fixed{position:fixed}\n"],encapsulation:2,changeDetection:0}),L})(),Ce=(()=>{class L{}return L.\u0275fac=function(b){return new(b||L)},L.\u0275mod=_.oAB({type:L}),L.\u0275inj=_.cJS({imports:[[y.ez,Mt.BQ,nt.ud,he.ZD],he.ZD,Mt.BQ]}),L})();const Oe=["*",[["mat-toolbar-row"]]],Ci=["*","mat-toolbar-row"],je=(0,Mt.pj)(class{constructor(L){this._elementRef=L}});let Ii=(()=>{class L{}return L.\u0275fac=function(b){return new(b||L)},L.\u0275dir=_.lG2({type:L,selectors:[["mat-toolbar-row"]],hostAttrs:[1,"mat-toolbar-row"],exportAs:["matToolbarRow"]}),L})(),_i=(()=>{class L extends je{constructor(b,k,tt){super(b),this._platform=k,this._document=tt}ngAfterViewInit(){this._platform.isBrowser&&(this._checkToolbarMixedModes(),this._toolbarRows.changes.subscribe(()=>this._checkToolbarMixedModes()))}_checkToolbarMixedModes(){}}return L.\u0275fac=function(b){return new(b||L)(_.Y36(_.SBq),_.Y36(nt.t4),_.Y36(y.K0))},L.\u0275cmp=_.Xpm({type:L,selectors:[["mat-toolbar"]],contentQueries:function(b,k,tt){if(1&b&&_.Suo(tt,Ii,5),2&b){let Pt;_.iGM(Pt=_.CRH())&&(k._toolbarRows=Pt)}},hostAttrs:[1,"mat-toolbar"],hostVars:4,hostBindings:function(b,k){2&b&&_.ekj("mat-toolbar-multiple-rows",k._toolbarRows.length>0)("mat-toolbar-single-row",0===k._toolbarRows.length)},inputs:{color:"color"},exportAs:["matToolbar"],features:[_.qOj],ngContentSelectors:Ci,decls:2,vars:0,template:function(b,k){1&b&&(_.F$t(Oe),_.Hsn(0),_.Hsn(1,1))},styles:[".cdk-high-contrast-active .mat-toolbar{outline:solid 1px}.mat-toolbar-row,.mat-toolbar-single-row{display:flex;box-sizing:border-box;padding:0 16px;width:100%;flex-direction:row;align-items:center;white-space:nowrap}.mat-toolbar-multiple-rows{display:flex;box-sizing:border-box;flex-direction:column;width:100%}\n"],encapsulation:2,changeDetection:0}),L})(),$e=(()=>{class L{}return L.\u0275fac=function(b){return new(b||L)},L.\u0275mod=_.oAB({type:L}),L.\u0275inj=_.cJS({imports:[[Mt.BQ],Mt.BQ]}),L})(),Qi=(()=>{class L{constructor(){this._listeners=[]}notify(b,k){for(let tt of this._listeners)tt(b,k)}listen(b){return this._listeners.push(b),()=>{this._listeners=this._listeners.filter(k=>b!==k)}}ngOnDestroy(){this._listeners=[]}}return L.\u0275fac=function(b){return new(b||L)},L.\u0275prov=_.Yz7({token:L,factory:L.\u0275fac,providedIn:"root"}),L})();var tr=m(4834);const li=["*"],xe=[[["","mat-list-avatar",""],["","mat-list-icon",""],["","matListAvatar",""],["","matListIcon",""]],[["","mat-line",""],["","matLine",""]],"*"],ui=["[mat-list-avatar], [mat-list-icon], [matListAvatar], [matListIcon]","[mat-line], [matLine]","*"],Tr=(0,Mt.Id)((0,Mt.Kr)(class{})),eo=(0,Mt.Kr)(class{}),no=new _.OlP("MatList"),mo=new _.OlP("MatNavList");let kr=(()=>{class L extends Tr{constructor(){super(...arguments),this._stateChanges=new ot.x}ngOnChanges(){this._stateChanges.next()}ngOnDestroy(){this._stateChanges.complete()}}return L.\u0275fac=function(){let G;return function(k){return(G||(G=_.n5z(L)))(k||L)}}(),L.\u0275cmp=_.Xpm({type:L,selectors:[["mat-nav-list"]],hostAttrs:["role","navigation",1,"mat-nav-list","mat-list-base"],inputs:{disableRipple:"disableRipple",disabled:"disabled"},exportAs:["matNavList"],features:[_._Bn([{provide:mo,useExisting:L}]),_.qOj,_.TTD],ngContentSelectors:li,decls:1,vars:0,template:function(b,k){1&b&&(_.F$t(),_.Hsn(0))},styles:['.mat-subheader{display:flex;box-sizing:border-box;padding:16px;align-items:center}.mat-list-base .mat-subheader{margin:0}.mat-list-base{padding-top:8px;display:block;-webkit-tap-highlight-color:transparent}.mat-list-base .mat-subheader{height:48px;line-height:16px}.mat-list-base .mat-subheader:first-child{margin-top:-8px}.mat-list-base .mat-list-item,.mat-list-base .mat-list-option{display:block;height:48px;-webkit-tap-highlight-color:transparent;width:100%;padding:0}.mat-list-base .mat-list-item .mat-list-item-content,.mat-list-base .mat-list-option .mat-list-item-content{display:flex;flex-direction:row;align-items:center;box-sizing:border-box;padding:0 16px;position:relative;height:inherit}.mat-list-base .mat-list-item .mat-list-item-content-reverse,.mat-list-base .mat-list-option .mat-list-item-content-reverse{display:flex;align-items:center;padding:0 16px;flex-direction:row-reverse;justify-content:space-around}.mat-list-base .mat-list-item .mat-list-item-ripple,.mat-list-base .mat-list-option .mat-list-item-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-list-base .mat-list-item.mat-list-item-with-avatar,.mat-list-base .mat-list-option.mat-list-item-with-avatar{height:56px}.mat-list-base .mat-list-item.mat-2-line,.mat-list-base .mat-list-option.mat-2-line{height:72px}.mat-list-base .mat-list-item.mat-3-line,.mat-list-base .mat-list-option.mat-3-line{height:88px}.mat-list-base .mat-list-item.mat-multi-line,.mat-list-base .mat-list-option.mat-multi-line{height:auto}.mat-list-base .mat-list-item.mat-multi-line .mat-list-item-content,.mat-list-base .mat-list-option.mat-multi-line .mat-list-item-content{padding-top:16px;padding-bottom:16px}.mat-list-base .mat-list-item .mat-list-text,.mat-list-base .mat-list-option .mat-list-text{display:flex;flex-direction:column;flex:auto;box-sizing:border-box;overflow:hidden;padding:0}.mat-list-base .mat-list-item .mat-list-text>*,.mat-list-base .mat-list-option .mat-list-text>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-list-base .mat-list-item .mat-list-text:empty,.mat-list-base .mat-list-option .mat-list-text:empty{display:none}.mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:0;padding-left:16px}[dir=rtl] .mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:0}.mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-left:0;padding-right:16px}[dir=rtl] .mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-right:0;padding-left:16px}.mat-list-base .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:16px}.mat-list-base .mat-list-item .mat-list-avatar,.mat-list-base .mat-list-option .mat-list-avatar{flex-shrink:0;width:40px;height:40px;border-radius:50%;object-fit:cover}.mat-list-base .mat-list-item .mat-list-avatar~.mat-divider-inset,.mat-list-base .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:72px;width:calc(100% - 72px)}[dir=rtl] .mat-list-base .mat-list-item .mat-list-avatar~.mat-divider-inset,[dir=rtl] .mat-list-base .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:auto;margin-right:72px}.mat-list-base .mat-list-item .mat-list-icon,.mat-list-base .mat-list-option .mat-list-icon{flex-shrink:0;width:24px;height:24px;font-size:24px;box-sizing:content-box;border-radius:50%;padding:4px}.mat-list-base .mat-list-item .mat-list-icon~.mat-divider-inset,.mat-list-base .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:64px;width:calc(100% - 64px)}[dir=rtl] .mat-list-base .mat-list-item .mat-list-icon~.mat-divider-inset,[dir=rtl] .mat-list-base .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:auto;margin-right:64px}.mat-list-base .mat-list-item .mat-divider,.mat-list-base .mat-list-option .mat-divider{position:absolute;bottom:0;left:0;width:100%;margin:0}[dir=rtl] .mat-list-base .mat-list-item .mat-divider,[dir=rtl] .mat-list-base .mat-list-option .mat-divider{margin-left:auto;margin-right:0}.mat-list-base .mat-list-item .mat-divider.mat-divider-inset,.mat-list-base .mat-list-option .mat-divider.mat-divider-inset{position:absolute}.mat-list-base[dense]{padding-top:4px;display:block}.mat-list-base[dense] .mat-subheader{height:40px;line-height:8px}.mat-list-base[dense] .mat-subheader:first-child{margin-top:-4px}.mat-list-base[dense] .mat-list-item,.mat-list-base[dense] .mat-list-option{display:block;height:40px;-webkit-tap-highlight-color:transparent;width:100%;padding:0}.mat-list-base[dense] .mat-list-item .mat-list-item-content,.mat-list-base[dense] .mat-list-option .mat-list-item-content{display:flex;flex-direction:row;align-items:center;box-sizing:border-box;padding:0 16px;position:relative;height:inherit}.mat-list-base[dense] .mat-list-item .mat-list-item-content-reverse,.mat-list-base[dense] .mat-list-option .mat-list-item-content-reverse{display:flex;align-items:center;padding:0 16px;flex-direction:row-reverse;justify-content:space-around}.mat-list-base[dense] .mat-list-item .mat-list-item-ripple,.mat-list-base[dense] .mat-list-option .mat-list-item-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar{height:48px}.mat-list-base[dense] .mat-list-item.mat-2-line,.mat-list-base[dense] .mat-list-option.mat-2-line{height:60px}.mat-list-base[dense] .mat-list-item.mat-3-line,.mat-list-base[dense] .mat-list-option.mat-3-line{height:76px}.mat-list-base[dense] .mat-list-item.mat-multi-line,.mat-list-base[dense] .mat-list-option.mat-multi-line{height:auto}.mat-list-base[dense] .mat-list-item.mat-multi-line .mat-list-item-content,.mat-list-base[dense] .mat-list-option.mat-multi-line .mat-list-item-content{padding-top:16px;padding-bottom:16px}.mat-list-base[dense] .mat-list-item .mat-list-text,.mat-list-base[dense] .mat-list-option .mat-list-text{display:flex;flex-direction:column;flex:auto;box-sizing:border-box;overflow:hidden;padding:0}.mat-list-base[dense] .mat-list-item .mat-list-text>*,.mat-list-base[dense] .mat-list-option .mat-list-text>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-list-base[dense] .mat-list-item .mat-list-text:empty,.mat-list-base[dense] .mat-list-option .mat-list-text:empty{display:none}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:0;padding-left:16px}[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:0}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-left:0;padding-right:16px}[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-right:0;padding-left:16px}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:16px}.mat-list-base[dense] .mat-list-item .mat-list-avatar,.mat-list-base[dense] .mat-list-option .mat-list-avatar{flex-shrink:0;width:36px;height:36px;border-radius:50%;object-fit:cover}.mat-list-base[dense] .mat-list-item .mat-list-avatar~.mat-divider-inset,.mat-list-base[dense] .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:68px;width:calc(100% - 68px)}[dir=rtl] .mat-list-base[dense] .mat-list-item .mat-list-avatar~.mat-divider-inset,[dir=rtl] .mat-list-base[dense] .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:auto;margin-right:68px}.mat-list-base[dense] .mat-list-item .mat-list-icon,.mat-list-base[dense] .mat-list-option .mat-list-icon{flex-shrink:0;width:20px;height:20px;font-size:20px;box-sizing:content-box;border-radius:50%;padding:4px}.mat-list-base[dense] .mat-list-item .mat-list-icon~.mat-divider-inset,.mat-list-base[dense] .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:60px;width:calc(100% - 60px)}[dir=rtl] .mat-list-base[dense] .mat-list-item .mat-list-icon~.mat-divider-inset,[dir=rtl] .mat-list-base[dense] .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:auto;margin-right:60px}.mat-list-base[dense] .mat-list-item .mat-divider,.mat-list-base[dense] .mat-list-option .mat-divider{position:absolute;bottom:0;left:0;width:100%;margin:0}[dir=rtl] .mat-list-base[dense] .mat-list-item .mat-divider,[dir=rtl] .mat-list-base[dense] .mat-list-option .mat-divider{margin-left:auto;margin-right:0}.mat-list-base[dense] .mat-list-item .mat-divider.mat-divider-inset,.mat-list-base[dense] .mat-list-option .mat-divider.mat-divider-inset{position:absolute}.mat-nav-list a{text-decoration:none;color:inherit}.mat-nav-list .mat-list-item{cursor:pointer;outline:none}mat-action-list button{background:none;color:inherit;border:none;font:inherit;outline:inherit;-webkit-tap-highlight-color:transparent;text-align:left}[dir=rtl] mat-action-list button{text-align:right}mat-action-list button::-moz-focus-inner{border:0}mat-action-list .mat-list-item{cursor:pointer;outline:inherit}.mat-list-option:not(.mat-list-item-disabled){cursor:pointer;outline:none}.mat-list-item-disabled{pointer-events:none}.cdk-high-contrast-active .mat-list-item-disabled{opacity:.5}.cdk-high-contrast-active :host .mat-list-item-disabled{opacity:.5}.cdk-high-contrast-active .mat-selection-list:focus{outline-style:dotted}.cdk-high-contrast-active .mat-list-option:hover,.cdk-high-contrast-active .mat-list-option:focus,.cdk-high-contrast-active .mat-nav-list .mat-list-item:hover,.cdk-high-contrast-active .mat-nav-list .mat-list-item:focus,.cdk-high-contrast-active mat-action-list .mat-list-item:hover,.cdk-high-contrast-active mat-action-list .mat-list-item:focus{outline:dotted 1px;z-index:1}.cdk-high-contrast-active .mat-list-single-selected-option::after{content:"";position:absolute;top:50%;right:16px;transform:translateY(-50%);width:10px;height:0;border-bottom:solid 10px;border-radius:10px}.cdk-high-contrast-active [dir=rtl] .mat-list-single-selected-option::after{right:auto;left:16px}@media(hover: none){.mat-list-option:not(.mat-list-single-selected-option):not(.mat-list-item-disabled):hover,.mat-nav-list .mat-list-item:not(.mat-list-item-disabled):hover,.mat-action-list .mat-list-item:not(.mat-list-item-disabled):hover{background:none}}\n'],encapsulation:2,changeDetection:0}),L})(),Mo=(()=>{class L{}return L.\u0275fac=function(b){return new(b||L)},L.\u0275dir=_.lG2({type:L,selectors:[["","mat-list-avatar",""],["","matListAvatar",""]],hostAttrs:[1,"mat-list-avatar"]}),L})(),sr=(()=>{class L{}return L.\u0275fac=function(b){return new(b||L)},L.\u0275dir=_.lG2({type:L,selectors:[["","mat-list-icon",""],["","matListIcon",""]],hostAttrs:[1,"mat-list-icon"]}),L})(),Vn=(()=>{class L extends eo{constructor(b,k,tt,Pt){super(),this._element=b,this._isInteractiveList=!1,this._destroyed=new ot.x,this._disabled=!1,this._isInteractiveList=!!(tt||Pt&&"action-list"===Pt._getListType()),this._list=tt||Pt;const Ke=this._getHostElement();"button"===Ke.nodeName.toLowerCase()&&!Ke.hasAttribute("type")&&Ke.setAttribute("type","button"),this._list&&this._list._stateChanges.pipe((0,Qe.R)(this._destroyed)).subscribe(()=>{k.markForCheck()})}get disabled(){return this._disabled||!(!this._list||!this._list.disabled)}set disabled(b){this._disabled=(0,Nt.Ig)(b)}ngAfterContentInit(){(0,Mt.E0)(this._lines,this._element)}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_isRippleDisabled(){return!this._isInteractiveList||this.disableRipple||!(!this._list||!this._list.disableRipple)}_getHostElement(){return this._element.nativeElement}}return L.\u0275fac=function(b){return new(b||L)(_.Y36(_.SBq),_.Y36(_.sBO),_.Y36(mo,8),_.Y36(no,8))},L.\u0275cmp=_.Xpm({type:L,selectors:[["mat-list-item"],["a","mat-list-item",""],["button","mat-list-item",""]],contentQueries:function(b,k,tt){if(1&b&&(_.Suo(tt,Mo,5),_.Suo(tt,sr,5),_.Suo(tt,Mt.X2,5)),2&b){let Pt;_.iGM(Pt=_.CRH())&&(k._avatar=Pt.first),_.iGM(Pt=_.CRH())&&(k._icon=Pt.first),_.iGM(Pt=_.CRH())&&(k._lines=Pt)}},hostAttrs:[1,"mat-list-item","mat-focus-indicator"],hostVars:6,hostBindings:function(b,k){2&b&&_.ekj("mat-list-item-disabled",k.disabled)("mat-list-item-avatar",k._avatar||k._icon)("mat-list-item-with-avatar",k._avatar||k._icon)},inputs:{disableRipple:"disableRipple",disabled:"disabled"},exportAs:["matListItem"],features:[_.qOj],ngContentSelectors:ui,decls:6,vars:2,consts:[[1,"mat-list-item-content"],["mat-ripple","",1,"mat-list-item-ripple",3,"matRippleTrigger","matRippleDisabled"],[1,"mat-list-text"]],template:function(b,k){1&b&&(_.F$t(xe),_.TgZ(0,"div",0),_._UZ(1,"div",1),_.Hsn(2),_.TgZ(3,"div",2),_.Hsn(4,1),_.qZA(),_.Hsn(5,2),_.qZA()),2&b&&(_.xp6(1),_.Q6J("matRippleTrigger",k._getHostElement())("matRippleDisabled",k._isRippleDisabled()))},directives:[Mt.wG],encapsulation:2,changeDetection:0}),L})(),Vi=(()=>{class L{}return L.\u0275fac=function(b){return new(b||L)},L.\u0275mod=_.oAB({type:L}),L.\u0275inj=_.cJS({imports:[[Mt.uc,Mt.si,Mt.BQ,Mt.us,y.ez],Mt.uc,Mt.BQ,Mt.us,tr.t]}),L})();var Sn=m(50727);const oe=new _.OlP("CdkAccordion");let Oi=0,Ji=(()=>{class L{constructor(b,k,tt){this.accordion=b,this._changeDetectorRef=k,this._expansionDispatcher=tt,this._openCloseAllSubscription=Sn.w0.EMPTY,this.closed=new _.vpe,this.opened=new _.vpe,this.destroyed=new _.vpe,this.expandedChange=new _.vpe,this.id="cdk-accordion-child-"+Oi++,this._expanded=!1,this._disabled=!1,this._removeUniqueSelectionListener=()=>{},this._removeUniqueSelectionListener=tt.listen((Pt,Ke)=>{this.accordion&&!this.accordion.multi&&this.accordion.id===Ke&&this.id!==Pt&&(this.expanded=!1)}),this.accordion&&(this._openCloseAllSubscription=this._subscribeToOpenCloseAllActions())}get expanded(){return this._expanded}set expanded(b){b=(0,Nt.Ig)(b),this._expanded!==b&&(this._expanded=b,this.expandedChange.emit(b),b?(this.opened.emit(),this._expansionDispatcher.notify(this.id,this.accordion?this.accordion.id:this.id)):this.closed.emit(),this._changeDetectorRef.markForCheck())}get disabled(){return this._disabled}set disabled(b){this._disabled=(0,Nt.Ig)(b)}ngOnDestroy(){this.opened.complete(),this.closed.complete(),this.destroyed.emit(),this.destroyed.complete(),this._removeUniqueSelectionListener(),this._openCloseAllSubscription.unsubscribe()}toggle(){this.disabled||(this.expanded=!this.expanded)}close(){this.disabled||(this.expanded=!1)}open(){this.disabled||(this.expanded=!0)}_subscribeToOpenCloseAllActions(){return this.accordion._openCloseAllActions.subscribe(b=>{this.disabled||(this.expanded=b)})}}return L.\u0275fac=function(b){return new(b||L)(_.Y36(oe,12),_.Y36(_.sBO),_.Y36(Qi))},L.\u0275dir=_.lG2({type:L,selectors:[["cdk-accordion-item"],["","cdkAccordionItem",""]],inputs:{expanded:"expanded",disabled:"disabled"},outputs:{closed:"closed",opened:"opened",destroyed:"destroyed",expandedChange:"expandedChange"},exportAs:["cdkAccordionItem"],features:[_._Bn([{provide:oe,useValue:void 0}])]}),L})(),Yi=(()=>{class L{}return L.\u0275fac=function(b){return new(b||L)},L.\u0275mod=_.oAB({type:L}),L.\u0275inj=_.cJS({}),L})();var Kn=m(47429),zn=m(60515);const nr=["body"];function Fn(L,G){}const Ao=[[["mat-expansion-panel-header"]],"*",[["mat-action-row"]]],jo=["mat-expansion-panel-header","*","mat-action-row"];function ro(L,G){if(1&L&&_._UZ(0,"span",2),2&L){const b=_.oxw();_.Q6J("@indicatorRotate",b._getExpandedState())}}const _o=[[["mat-panel-title"]],[["mat-panel-description"]],"*"],Zs=["mat-panel-title","mat-panel-description","*"],lr=new _.OlP("MAT_ACCORDION"),Yo="225ms cubic-bezier(0.4,0.0,0.2,1)",Jr={indicatorRotate:(0,Bt.X$)("indicatorRotate",[(0,Bt.SB)("collapsed, void",(0,Bt.oB)({transform:"rotate(0deg)"})),(0,Bt.SB)("expanded",(0,Bt.oB)({transform:"rotate(180deg)"})),(0,Bt.eR)("expanded <=> collapsed, void => collapsed",(0,Bt.jt)(Yo))]),bodyExpansion:(0,Bt.X$)("bodyExpansion",[(0,Bt.SB)("collapsed, void",(0,Bt.oB)({height:"0px",visibility:"hidden"})),(0,Bt.SB)("expanded",(0,Bt.oB)({height:"*",visibility:"visible"})),(0,Bt.eR)("expanded <=> collapsed, void => collapsed",(0,Bt.jt)(Yo))])};let Ss=(()=>{class L{constructor(b){this._template=b}}return L.\u0275fac=function(b){return new(b||L)(_.Y36(_.Rgc))},L.\u0275dir=_.lG2({type:L,selectors:[["ng-template","matExpansionPanelContent",""]]}),L})(),ws=0;const Bo=new _.OlP("MAT_EXPANSION_PANEL_DEFAULT_OPTIONS");let Ro=(()=>{class L extends Ji{constructor(b,k,tt,Pt,Ke,Mi,tn){super(b,k,tt),this._viewContainerRef=Pt,this._animationMode=Mi,this._hideToggle=!1,this.afterExpand=new _.vpe,this.afterCollapse=new _.vpe,this._inputChanges=new ot.x,this._headerId="mat-expansion-panel-header-"+ws++,this._bodyAnimationDone=new ot.x,this.accordion=b,this._document=Ke,this._bodyAnimationDone.pipe((0,Di.x)((Nn,hn)=>Nn.fromState===hn.fromState&&Nn.toState===hn.toState)).subscribe(Nn=>{"void"!==Nn.fromState&&("expanded"===Nn.toState?this.afterExpand.emit():"collapsed"===Nn.toState&&this.afterCollapse.emit())}),tn&&(this.hideToggle=tn.hideToggle)}get hideToggle(){return this._hideToggle||this.accordion&&this.accordion.hideToggle}set hideToggle(b){this._hideToggle=(0,Nt.Ig)(b)}get togglePosition(){return this._togglePosition||this.accordion&&this.accordion.togglePosition}set togglePosition(b){this._togglePosition=b}_hasSpacing(){return!!this.accordion&&this.expanded&&"default"===this.accordion.displayMode}_getExpandedState(){return this.expanded?"expanded":"collapsed"}toggle(){this.expanded=!this.expanded}close(){this.expanded=!1}open(){this.expanded=!0}ngAfterContentInit(){this._lazyContent&&this.opened.pipe((0,Le.O)(null),(0,Be.h)(()=>this.expanded&&!this._portal),(0,Ze.q)(1)).subscribe(()=>{this._portal=new Kn.UE(this._lazyContent._template,this._viewContainerRef)})}ngOnChanges(b){this._inputChanges.next(b)}ngOnDestroy(){super.ngOnDestroy(),this._bodyAnimationDone.complete(),this._inputChanges.complete()}_containsFocus(){if(this._body){const b=this._document.activeElement,k=this._body.nativeElement;return b===k||k.contains(b)}return!1}}return L.\u0275fac=function(b){return new(b||L)(_.Y36(lr,12),_.Y36(_.sBO),_.Y36(Qi),_.Y36(_.s_b),_.Y36(y.K0),_.Y36(Te.Qb,8),_.Y36(Bo,8))},L.\u0275cmp=_.Xpm({type:L,selectors:[["mat-expansion-panel"]],contentQueries:function(b,k,tt){if(1&b&&_.Suo(tt,Ss,5),2&b){let Pt;_.iGM(Pt=_.CRH())&&(k._lazyContent=Pt.first)}},viewQuery:function(b,k){if(1&b&&_.Gf(nr,5),2&b){let tt;_.iGM(tt=_.CRH())&&(k._body=tt.first)}},hostAttrs:[1,"mat-expansion-panel"],hostVars:6,hostBindings:function(b,k){2&b&&_.ekj("mat-expanded",k.expanded)("_mat-animation-noopable","NoopAnimations"===k._animationMode)("mat-expansion-panel-spacing",k._hasSpacing())},inputs:{disabled:"disabled",expanded:"expanded",hideToggle:"hideToggle",togglePosition:"togglePosition"},outputs:{opened:"opened",closed:"closed",expandedChange:"expandedChange",afterExpand:"afterExpand",afterCollapse:"afterCollapse"},exportAs:["matExpansionPanel"],features:[_._Bn([{provide:lr,useValue:void 0}]),_.qOj,_.TTD],ngContentSelectors:jo,decls:7,vars:4,consts:[["role","region",1,"mat-expansion-panel-content",3,"id"],["body",""],[1,"mat-expansion-panel-body"],[3,"cdkPortalOutlet"]],template:function(b,k){1&b&&(_.F$t(Ao),_.Hsn(0),_.TgZ(1,"div",0,1),_.NdJ("@bodyExpansion.done",function(Pt){return k._bodyAnimationDone.next(Pt)}),_.TgZ(3,"div",2),_.Hsn(4,1),_.YNc(5,Fn,0,0,"ng-template",3),_.qZA(),_.Hsn(6,2),_.qZA()),2&b&&(_.xp6(1),_.Q6J("@bodyExpansion",k._getExpandedState())("id",k.id),_.uIk("aria-labelledby",k._headerId),_.xp6(4),_.Q6J("cdkPortalOutlet",k._portal))},directives:[Kn.Pl],styles:[".mat-expansion-panel{box-sizing:content-box;display:block;margin:0;border-radius:4px;overflow:hidden;transition:margin 225ms cubic-bezier(0.4, 0, 0.2, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);position:relative}.mat-accordion .mat-expansion-panel:not(.mat-expanded),.mat-accordion .mat-expansion-panel:not(.mat-expansion-panel-spacing){border-radius:0}.mat-accordion .mat-expansion-panel:first-of-type{border-top-right-radius:4px;border-top-left-radius:4px}.mat-accordion .mat-expansion-panel:last-of-type{border-bottom-right-radius:4px;border-bottom-left-radius:4px}.cdk-high-contrast-active .mat-expansion-panel{outline:solid 1px}.mat-expansion-panel.ng-animate-disabled,.ng-animate-disabled .mat-expansion-panel,.mat-expansion-panel._mat-animation-noopable{transition:none}.mat-expansion-panel-content{display:flex;flex-direction:column;overflow:visible}.mat-expansion-panel-body{padding:0 24px 16px}.mat-expansion-panel-spacing{margin:16px 0}.mat-accordion>.mat-expansion-panel-spacing:first-child,.mat-accordion>*:first-child:not(.mat-expansion-panel) .mat-expansion-panel-spacing{margin-top:0}.mat-accordion>.mat-expansion-panel-spacing:last-child,.mat-accordion>*:last-child:not(.mat-expansion-panel) .mat-expansion-panel-spacing{margin-bottom:0}.mat-action-row{border-top-style:solid;border-top-width:1px;display:flex;flex-direction:row;justify-content:flex-end;padding:16px 8px 16px 24px}.mat-action-row button.mat-button-base,.mat-action-row button.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-action-row button.mat-button-base,[dir=rtl] .mat-action-row button.mat-mdc-button-base{margin-left:0;margin-right:8px}\n"],encapsulation:2,data:{animation:[Jr.bodyExpansion]},changeDetection:0}),L})();class Ho{}const Ya=(0,Mt.sb)(Ho);let Xa=(()=>{class L extends Ya{constructor(b,k,tt,Pt,Ke,Mi,tn){super(),this.panel=b,this._element=k,this._focusMonitor=tt,this._changeDetectorRef=Pt,this._animationMode=Mi,this._parentChangeSubscription=Sn.w0.EMPTY;const Nn=b.accordion?b.accordion._stateChanges.pipe((0,Be.h)(hn=>!(!hn.hideToggle&&!hn.togglePosition))):zn.E;this.tabIndex=parseInt(tn||"")||0,this._parentChangeSubscription=(0,ue.T)(b.opened,b.closed,Nn,b._inputChanges.pipe((0,Be.h)(hn=>!!(hn.hideToggle||hn.disabled||hn.togglePosition)))).subscribe(()=>this._changeDetectorRef.markForCheck()),b.closed.pipe((0,Be.h)(()=>b._containsFocus())).subscribe(()=>tt.focusVia(k,"program")),Ke&&(this.expandedHeight=Ke.expandedHeight,this.collapsedHeight=Ke.collapsedHeight)}get disabled(){return this.panel.disabled}_toggle(){this.disabled||this.panel.toggle()}_isExpanded(){return this.panel.expanded}_getExpandedState(){return this.panel._getExpandedState()}_getPanelId(){return this.panel.id}_getTogglePosition(){return this.panel.togglePosition}_showToggle(){return!this.panel.hideToggle&&!this.panel.disabled}_getHeaderHeight(){const b=this._isExpanded();return b&&this.expandedHeight?this.expandedHeight:!b&&this.collapsedHeight?this.collapsedHeight:null}_keydown(b){switch(b.keyCode){case de.L_:case de.K5:(0,de.Vb)(b)||(b.preventDefault(),this._toggle());break;default:return void(this.panel.accordion&&this.panel.accordion._handleHeaderKeydown(b))}}focus(b,k){b?this._focusMonitor.focusVia(this._element,b,k):this._element.nativeElement.focus(k)}ngAfterViewInit(){this._focusMonitor.monitor(this._element).subscribe(b=>{b&&this.panel.accordion&&this.panel.accordion._handleHeaderFocus(this)})}ngOnDestroy(){this._parentChangeSubscription.unsubscribe(),this._focusMonitor.stopMonitoring(this._element)}}return L.\u0275fac=function(b){return new(b||L)(_.Y36(Ro,1),_.Y36(_.SBq),_.Y36($t.tE),_.Y36(_.sBO),_.Y36(Bo,8),_.Y36(Te.Qb,8),_.$8M("tabindex"))},L.\u0275cmp=_.Xpm({type:L,selectors:[["mat-expansion-panel-header"]],hostAttrs:["role","button",1,"mat-expansion-panel-header","mat-focus-indicator"],hostVars:15,hostBindings:function(b,k){1&b&&_.NdJ("click",function(){return k._toggle()})("keydown",function(Pt){return k._keydown(Pt)}),2&b&&(_.uIk("id",k.panel._headerId)("tabindex",k.tabIndex)("aria-controls",k._getPanelId())("aria-expanded",k._isExpanded())("aria-disabled",k.panel.disabled),_.Udp("height",k._getHeaderHeight()),_.ekj("mat-expanded",k._isExpanded())("mat-expansion-toggle-indicator-after","after"===k._getTogglePosition())("mat-expansion-toggle-indicator-before","before"===k._getTogglePosition())("_mat-animation-noopable","NoopAnimations"===k._animationMode))},inputs:{tabIndex:"tabIndex",expandedHeight:"expandedHeight",collapsedHeight:"collapsedHeight"},features:[_.qOj],ngContentSelectors:Zs,decls:5,vars:1,consts:[[1,"mat-content"],["class","mat-expansion-indicator",4,"ngIf"],[1,"mat-expansion-indicator"]],template:function(b,k){1&b&&(_.F$t(_o),_.TgZ(0,"span",0),_.Hsn(1),_.Hsn(2,1),_.Hsn(3,2),_.qZA(),_.YNc(4,ro,1,1,"span",1)),2&b&&(_.xp6(4),_.Q6J("ngIf",k._showToggle()))},directives:[y.O5],styles:['.mat-expansion-panel-header{display:flex;flex-direction:row;align-items:center;padding:0 24px;border-radius:inherit;transition:height 225ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-expansion-panel-header._mat-animation-noopable{transition:none}.mat-expansion-panel-header:focus,.mat-expansion-panel-header:hover{outline:none}.mat-expansion-panel-header.mat-expanded:focus,.mat-expansion-panel-header.mat-expanded:hover{background:inherit}.mat-expansion-panel-header:not([aria-disabled=true]){cursor:pointer}.mat-expansion-panel-header.mat-expansion-toggle-indicator-before{flex-direction:row-reverse}.mat-expansion-panel-header.mat-expansion-toggle-indicator-before .mat-expansion-indicator{margin:0 16px 0 0}[dir=rtl] .mat-expansion-panel-header.mat-expansion-toggle-indicator-before .mat-expansion-indicator{margin:0 0 0 16px}.mat-content{display:flex;flex:1;flex-direction:row;overflow:hidden}.mat-expansion-panel-header-title,.mat-expansion-panel-header-description{display:flex;flex-grow:1;margin-right:16px}[dir=rtl] .mat-expansion-panel-header-title,[dir=rtl] .mat-expansion-panel-header-description{margin-right:0;margin-left:16px}.mat-expansion-panel-header-description{flex-grow:2}.mat-expansion-indicator::after{border-style:solid;border-width:0 2px 2px 0;content:"";display:inline-block;padding:3px;transform:rotate(45deg);vertical-align:middle}.cdk-high-contrast-active .mat-expansion-panel .mat-expansion-panel-header.cdk-keyboard-focused:not([aria-disabled=true])::before,.cdk-high-contrast-active .mat-expansion-panel .mat-expansion-panel-header.cdk-program-focused:not([aria-disabled=true])::before,.cdk-high-contrast-active .mat-expansion-panel:not(.mat-expanded) .mat-expansion-panel-header:hover:not([aria-disabled=true])::before{top:0;left:0;right:0;bottom:0;position:absolute;box-sizing:border-box;pointer-events:none;border:3px solid;border-radius:4px;content:""}.cdk-high-contrast-active .mat-expansion-panel-content{border-top:1px solid;border-top-left-radius:0;border-top-right-radius:0}\n'],encapsulation:2,data:{animation:[Jr.indicatorRotate]},changeDetection:0}),L})(),Qo=(()=>{class L{}return L.\u0275fac=function(b){return new(b||L)},L.\u0275dir=_.lG2({type:L,selectors:[["mat-panel-title"]],hostAttrs:[1,"mat-expansion-panel-header-title"]}),L})(),_l=(()=>{class L{}return L.\u0275fac=function(b){return new(b||L)},L.\u0275mod=_.oAB({type:L}),L.\u0275inj=_.cJS({imports:[[y.ez,Mt.BQ,Yi,Kn.eL]]}),L})();var Fs=m(92181);const Pa=function(L){return["/","automation","loadexample",L]};function Bs(L,G){if(1&L&&(_.TgZ(0,"a",24),_.TgZ(1,"mat-icon"),_._uU(2," https "),_.qZA(),_._uU(3),_.qZA()),2&L){const b=G.index,k=G.$implicit;_.Q6J("routerLink",_.VKq(3,Pa,k.id)),_.xp6(3),_.AsE(" ",b+1," ",k.description,"")}}function fs(L,G){if(1&L){const b=_.EpF();_.TgZ(0,"button",26),_.NdJ("click",function(){return _.CHM(b),_.oxw(),_.MAs(2).toggle()}),_.TgZ(1,"mat-icon",27),_._uU(2,"menu"),_.qZA(),_.qZA()}}function al(L,G){if(1&L&&(_.TgZ(0,"span",28),_._uU(1),_.qZA()),2&L){const b=_.oxw();_.xp6(1),_.AsE(" ",b.version," => ",b.latestVersion," ")}}const ma=function(){return["/","automation","studio"]},Qs=function(){return["/","automation","main"]};let Oo=(()=>{class L{constructor(b,k,tt){this.breakpointObserver=b,this.details=k,this.ta=tt,this.demoBlocks=[],this.isHandset$=this.breakpointObserver.observe(Ct.u3.Handset).pipe((0,yt.U)(Pt=>Pt.matches||!0),function(L,G,b){let Pt,Ke=!1;return Pt=1/0,(0,Ut.B)({connector:()=>new lt(Pt,G,b),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:Ke})}()),this.version=Et.version,this.latestVersion="",this.title="Blockly Automation",this.footer="",this.standalone=!1}ngOnInit(){var b,k,tt,Pt,Ke;this.latestVersion=null===(b=this.details.settings)||void 0===b?void 0:b.latestVersion,this.demoBlocks=this.details.demoBlocks.sort((Mi,tn)=>Mi.description.localeCompare(tn.description)),this.title=(null===(tt=null===(k=this.details)||void 0===k?void 0:k.settings)||void 0===tt?void 0:tt.title)||"Blockly Automation",this.footer=(null===(Ke=null===(Pt=this.details)||void 0===Pt?void 0:Pt.settings)||void 0===Ke?void 0:Ke.footer)||"",(navigator.standalone||window.matchMedia("(display-mode: standalone)").matches)&&(this.standalone=!0)}executeOnDisplayBlockly(b){this.ta.sendDataToServer("DisplayBlocklyComponent",b)}}return L.\u0275fac=function(b){return new(b||L)(_.Y36(Ct.Yg),_.Y36(Jt.d),_.Y36(ht.v))},L.\u0275cmp=_.Xpm({type:L,selectors:[["app-primary-navig"]],decls:84,vars:27,consts:[[1,"sidenav-container"],["fixedInViewport","",1,"sidenav",3,"mode","opened"],["drawer",""],["mat-list-item","","routerLink","/"],["mat-list-item","","href","https://github.com/ignatandrei/BlocklyAutomation","target","_blank"],["mat-list-item","","href","https://ignatandrei.github.io/BlocklyAutomation","target","_blank"],["mat-list-item","","target","_blank",3,"routerLink",4,"ngFor","ngForOf"],["color","primary",1,"nav-bar"],["type","button","aria-label","Toggle sidenav","mat-icon-button","",3,"click",4,"ngIf"],[3,"title"],[1,"example-spacer"],["mat-mini-fab","","color","primary",3,"click"],["id","download","mat-button","",3,"matMenuTriggerFor"],["download","matMenu"],["mat-list-item","",4,"ngIf"],["mat-list-item","","href","https://github.com/ignatandrei/BlocklyAutomation/releases/latest/download/releaseBlocklyAutomation.zip/","target","_blank"],["mat-list-item","","href","https://github.com/ignatandrei/BlocklyAutomation/releases/latest/download/releaseLin.zip/","target","_blank"],["mat-list-item","","href","https://github.com/ignatandrei/BlocklyAutomation/releases/latest/download/releaseWin.zip/","target","_blank"],["mat-list-item","","href","https://github.com/ignatandrei/BlocklyAutomation/releases/latest/download/releaseIISWin.zip/","target","_blank"],["mat-list-item","","href","https://github.com/ignatandrei/BlocklyAutomation/releases/latest/download/releaseLocalAPI.zip/","target","_blank"],["mat-list-item","","href","http://ba.serviciipeweb.ro/","target","_blank"],["mat-list-item","","href","https://www.microsoft.com/en-us/p/blocklyautomation/9mxnwjt6zpd0","target","_blank"],["mat-button","",3,"matMenuTriggerFor"],["examples","matMenu"],["mat-list-item","","target","_blank",3,"routerLink"],[1,"main-content"],["type","button","aria-label","Toggle sidenav","mat-icon-button","",3,"click"],["aria-label","Side nav toggle icon"],["mat-list-item",""]],template:function(b,k){if(1&b&&(_.TgZ(0,"mat-sidenav-container",0),_.TgZ(1,"mat-sidenav",1,2),_.ALo(3,"async"),_.ALo(4,"async"),_.ALo(5,"async"),_.TgZ(6,"mat-toolbar"),_.TgZ(7,"a",3),_._uU(8,"Menu"),_.qZA(),_.qZA(),_.TgZ(9,"mat-nav-list"),_.TgZ(10,"a",4),_.TgZ(11,"mat-icon"),_._uU(12," source "),_.qZA(),_._uU(13," Github"),_.qZA(),_._UZ(14,"mat-divider"),_.TgZ(15,"a",5),_.TgZ(16,"mat-icon"),_._uU(17," https "),_.qZA(),_._uU(18," Demo online"),_.qZA(),_._UZ(19,"mat-divider"),_.TgZ(20,"mat-expansion-panel"),_.TgZ(21,"mat-expansion-panel-header"),_.TgZ(22,"mat-panel-title"),_._uU(23),_.qZA(),_.qZA(),_.YNc(24,Bs,4,5,"a",6),_.qZA(),_.qZA(),_.qZA(),_.TgZ(25,"mat-sidenav-content"),_.TgZ(26,"mat-toolbar",7),_.YNc(27,fs,3,0,"button",8),_.ALo(28,"async"),_.TgZ(29,"span",9),_._uU(30),_.qZA(),_._UZ(31,"span",10),_.TgZ(32,"button",11),_.NdJ("click",function(){return k.executeOnDisplayBlockly("createIntro")}),_.TgZ(33,"mat-icon"),_._uU(34," help_outline "),_.qZA(),_.qZA(),_.TgZ(35,"button",12),_.TgZ(36,"mat-icon"),_._uU(37," file_download "),_.qZA(),_.qZA(),_.TgZ(38,"mat-menu",null,13),_.YNc(40,al,2,2,"span",14),_.TgZ(41,"a",15),_._uU(42," Download HTML"),_.qZA(),_.TgZ(43,"a",16),_._uU(44," Download Linux"),_.qZA(),_.TgZ(45,"a",17),_._uU(46," Download Windows"),_.qZA(),_.TgZ(47,"a",18),_._uU(48," Download IIS"),_.qZA(),_.TgZ(49,"a",19),_._uU(50," Download LocalAPI"),_.qZA(),_.TgZ(51,"a",20),_._uU(52," Download WPF"),_.qZA(),_.TgZ(53,"a",21),_._uU(54," Store"),_.qZA(),_.qZA(),_.TgZ(55,"button",22),_.TgZ(56,"mat-icon"),_._uU(57," source "),_.qZA(),_.qZA(),_.TgZ(58,"mat-menu",null,23),_.TgZ(60,"a",24),_.TgZ(61,"mat-icon"),_._uU(62," star "),_.qZA(),_._uU(63,"Studio "),_.qZA(),_.TgZ(64,"a",24),_.TgZ(65,"mat-icon"),_._uU(66," star_half "),_.qZA(),_._uU(67,"Single "),_.qZA(),_.TgZ(68,"a",4),_.TgZ(69,"mat-icon"),_._uU(70," source "),_.qZA(),_._uU(71," Github"),_.qZA(),_._UZ(72,"mat-divider"),_.TgZ(73,"a",5),_.TgZ(74,"mat-icon"),_._uU(75," https "),_.qZA(),_._uU(76," Demo online"),_.qZA(),_.qZA(),_.qZA(),_.TgZ(77,"div",25),_._UZ(78,"router-outlet"),_.qZA(),_.qZA(),_.qZA(),_.TgZ(79,"footer"),_.TgZ(80,"small"),_._uU(81),_.qZA(),_.TgZ(82,"small"),_._uU(83),_.qZA(),_.qZA()),2&b){const tt=_.MAs(39),Pt=_.MAs(59);_.xp6(1),_.Q6J("mode",_.lcZ(4,19,k.isHandset$)?"over":"side")("opened",!1===_.lcZ(5,21,k.isHandset$)),_.uIk("role",_.lcZ(3,17,k.isHandset$)?"dialog":"navigation"),_.xp6(22),_.hij(" Demos ",k.demoBlocks.length," "),_.xp6(1),_.Q6J("ngForOf",k.demoBlocks),_.xp6(3),_.Q6J("ngIf",_.lcZ(28,23,k.isHandset$)),_.xp6(2),_.s9C("title",k.version),_.xp6(1),_.Oqu(k.title),_.xp6(5),_.Q6J("matMenuTriggerFor",tt),_.xp6(5),_.Q6J("ngIf",k.version!=k.latestVersion),_.xp6(15),_.Q6J("matMenuTriggerFor",Pt),_.xp6(5),_.Q6J("routerLink",_.DdM(25,ma)),_.xp6(4),_.Q6J("routerLink",_.DdM(26,Qs)),_.xp6(17),_.Oqu(k.footer),_.xp6(2),_.lnq("",k.standalone?"standalone":"browser"," ",k.version," -> ",k.latestVersion,"")}},directives:[Zi,mi,_i,Vn,t.yS,kr,s.Hw,tr.d,Ro,Xa,Qo,y.sg,pn,y.O5,r.lW,Fs.p6,Fs.VK,t.lC],pipes:[y.Ov],styles:["html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{height:100%;width:100%}.sidenav-container[_ngcontent-%COMP%]{height:100%}.sidenav[_ngcontent-%COMP%]{width:200px}.sidenav[_ngcontent-%COMP%]   .mat-toolbar[_ngcontent-%COMP%]{background:inherit}.mat-toolbar.mat-primary[_ngcontent-%COMP%]{position:sticky;top:0;z-index:1}.example-spacer[_ngcontent-%COMP%]{flex:1 1 auto}.main-content[_ngcontent-%COMP%]{height:97%;width:100%}.nav-bar[_ngcontent-%COMP%]{height:3%;width:100%}"]}),L})(),zr=(()=>{class L{constructor(b,k){var tt,Pt;this.titleService=b,this.title="AutoBlocklyApp",console.log(null===(tt=k.settings)||void 0===tt?void 0:tt.title),this.titleService.setTitle((null===(Pt=k.settings)||void 0===Pt?void 0:Pt.title)||"")}}return L.\u0275fac=function(b){return new(b||L)(_.Y36(C.Dx),_.Y36(Jt.d))},L.\u0275cmp=_.Xpm({type:L,selectors:[["app-root"]],decls:1,vars:0,template:function(b,k){1&b&&_._UZ(0,"app-primary-navig")},directives:[Oo],styles:[""]}),L})();var ao=m(40520),yo=m(91079);let xo=(()=>{class L{}return L.\u0275fac=function(b){return new(b||L)},L.\u0275mod=_.oAB({type:L}),L.\u0275inj=_.cJS({imports:[[$t.rt,Mt.BQ],Mt.BQ]}),L})();var Eo=m(91314);let jr=(()=>{class L{}return L.\u0275fac=function(b){return new(b||L)},L.\u0275mod=_.oAB({type:L}),L.\u0275inj=_.cJS({imports:[[Eo.U8,Mt.BQ,Kn.eL],Mt.BQ]}),L})(),Fe=(()=>{class L{}return L.\u0275fac=function(b){return new(b||L)},L.\u0275mod=_.oAB({type:L}),L.\u0275inj=_.cJS({imports:[[Mt.BQ,Mt.si],Mt.BQ]}),L})(),gt=(()=>{class L{}return L.\u0275fac=function(b){return new(b||L)},L.\u0275mod=_.oAB({type:L}),L.\u0275inj=_.cJS({imports:[[Mt.BQ],Mt.BQ]}),L})();var Qt=m(17144);let Yr=(()=>{class L{}return L.\u0275fac=function(b){return new(b||L)},L.\u0275mod=_.oAB({type:L}),L.\u0275inj=_.cJS({}),L})(),oo=(()=>{class L{}return L.\u0275fac=function(b){return new(b||L)},L.\u0275mod=_.oAB({type:L}),L.\u0275inj=_.cJS({imports:[[Mt.si,Mt.BQ,Qt.Q8,Yr],Mt.BQ,Yr]}),L})();var ko=m(67322);const Dn=new _.OlP("mat-chips-default-options");let Co=(()=>{class L{}return L.\u0275fac=function(b){return new(b||L)},L.\u0275mod=_.oAB({type:L}),L.\u0275inj=_.cJS({providers:[Mt.rD,{provide:Dn,useValue:{separatorKeyCodes:[de.K5]}}],imports:[[Mt.BQ]]}),L})(),ea=(()=>{class L{}return L.\u0275fac=function(b){return new(b||L)},L.\u0275mod=_.oAB({type:L}),L.\u0275inj=_.cJS({imports:[[_e.vT]]}),L})(),it=(()=>{class L{constructor(){this.changes=new ot.x,this.optionalLabel="Optional",this.completedLabel="Completed",this.editableLabel="Editable"}}return L.\u0275fac=function(b){return new(b||L)},L.\u0275prov=_.Yz7({token:L,factory:L.\u0275fac,providedIn:"root"}),L})();const Dt={provide:it,deps:[[new _.FiY,new _.tp0,it]],useFactory:function(L){return L||new it}};let ba=(()=>{class L{}return L.\u0275fac=function(b){return new(b||L)},L.\u0275mod=_.oAB({type:L}),L.\u0275inj=_.cJS({providers:[Dt,Mt.rD],imports:[[Mt.BQ,y.ez,Kn.eL,r.ot,ea,s.Ps,Mt.si],Mt.BQ]}),L})();var Uo=m(77531);let Ar=(()=>{class L{constructor(){this.changes=new ot.x,this.calendarLabel="Calendar",this.openCalendarLabel="Open calendar",this.closeCalendarLabel="Close calendar",this.prevMonthLabel="Previous month",this.nextMonthLabel="Next month",this.prevYearLabel="Previous year",this.nextYearLabel="Next year",this.prevMultiYearLabel="Previous 24 years",this.nextMultiYearLabel="Next 24 years",this.switchToMonthViewLabel="Choose date",this.switchToMultiYearViewLabel="Choose month and year"}formatYearRange(b,k){return`${b} \u2013 ${k}`}}return L.\u0275fac=function(b){return new(b||L)},L.\u0275prov=_.Yz7({token:L,factory:L.\u0275fac,providedIn:"root"}),L})();const Tc={provide:new _.OlP("mat-datepicker-scroll-strategy"),deps:[Eo.aV],useFactory:function(L){return()=>L.scrollStrategies.reposition()}};let wc=(()=>{class L{}return L.\u0275fac=function(b){return new(b||L)},L.\u0275mod=_.oAB({type:L}),L.\u0275inj=_.cJS({providers:[Ar,Tc],imports:[[y.ez,r.ot,Eo.U8,$t.rt,Kn.eL,Mt.BQ],he.ZD]}),L})();var Ca=m(48966),so=m(43954);const ss={provide:new _.OlP("mat-select-scroll-strategy"),deps:[Eo.aV],useFactory:function(L){return()=>L.scrollStrategies.reposition()}};let di=(()=>{class L{}return L.\u0275fac=function(b){return new(b||L)},L.\u0275mod=_.oAB({type:L}),L.\u0275inj=_.cJS({providers:[ss],imports:[[y.ez,Eo.U8,Mt.Ng,Mt.BQ],he.ZD,ko.lN,Mt.Ng,Mt.BQ]}),L})();const Do={provide:new _.OlP("mat-tooltip-scroll-strategy"),deps:[Eo.aV],useFactory:function(L){return()=>L.scrollStrategies.reposition({scrollThrottle:20})}};let ds=(()=>{class L{}return L.\u0275fac=function(b){return new(b||L)},L.\u0275mod=_.oAB({type:L}),L.\u0275inj=_.cJS({providers:[Do],imports:[[$t.rt,y.ez,Eo.U8,Mt.BQ],Mt.BQ,he.ZD]}),L})(),Ic=(()=>{class L{constructor(){this.changes=new ot.x,this.itemsPerPageLabel="Items per page:",this.nextPageLabel="Next page",this.previousPageLabel="Previous page",this.firstPageLabel="First page",this.lastPageLabel="Last page",this.getRangeLabel=(b,k,tt)=>{if(0==tt||0==k)return`0 of ${tt}`;const Pt=b*k;return`${Pt+1} \u2013 ${Pt<(tt=Math.max(tt,0))?Math.min(Pt+k,tt):Pt+k} of ${tt}`}}}return L.\u0275fac=function(b){return new(b||L)},L.\u0275prov=_.Yz7({token:L,factory:L.\u0275fac,providedIn:"root"}),L})();const Ou={provide:Ic,deps:[[new _.FiY,new _.tp0,Ic]],useFactory:function(L){return L||new Ic}};let Yc=(()=>{class L{}return L.\u0275fac=function(b){return new(b||L)},L.\u0275mod=_.oAB({type:L}),L.\u0275inj=_.cJS({providers:[Ou],imports:[[y.ez,r.ot,di,ds,Mt.BQ]]}),L})(),Ku=(()=>{class L{}return L.\u0275fac=function(b){return new(b||L)},L.\u0275mod=_.oAB({type:L}),L.\u0275inj=_.cJS({imports:[[y.ez,Mt.BQ],Mt.BQ]}),L})();var dh=m(20773);let hu=(()=>{class L{}return L.\u0275fac=function(b){return new(b||L)},L.\u0275mod=_.oAB({type:L}),L.\u0275inj=_.cJS({imports:[[Mt.si,Mt.BQ],Mt.BQ]}),L})(),Jl=(()=>{class L{}return L.\u0275fac=function(b){return new(b||L)},L.\u0275mod=_.oAB({type:L}),L.\u0275inj=_.cJS({imports:[[y.ez,Mt.BQ],Mt.BQ]}),L})(),p=(()=>{class L{}return L.\u0275fac=function(b){return new(b||L)},L.\u0275mod=_.oAB({type:L}),L.\u0275inj=_.cJS({}),L})(),T=(()=>{class L{}return L.\u0275fac=function(b){return new(b||L)},L.\u0275mod=_.oAB({type:L}),L.\u0275inj=_.cJS({imports:[[p,Mt.si,Mt.BQ,Qt.Q8],p,Mt.BQ]}),L})();var I=m(57261);let fi=(()=>{class L{constructor(){this.changes=new ot.x}}return L.\u0275fac=function(b){return new(b||L)},L.\u0275prov=_.Yz7({token:L,factory:L.\u0275fac,providedIn:"root"}),L})();const Pi={provide:fi,deps:[[new _.FiY,new _.tp0,fi]],useFactory:function(L){return L||new fi}};let Xn=(()=>{class L{}return L.\u0275fac=function(b){return new(b||L)},L.\u0275mod=_.oAB({type:L}),L.\u0275inj=_.cJS({providers:[Pi],imports:[[y.ez,Mt.BQ]]}),L})();m(32076),m(61135),m(68306),m(30576),m(39646);let Kh=(()=>{class L{}return L.\u0275fac=function(b){return new(b||L)},L.\u0275mod=_.oAB({type:L}),L.\u0275inj=_.cJS({imports:[[he.Cl]]}),L})(),Fp=(()=>{class L{}return L.\u0275fac=function(b){return new(b||L)},L.\u0275mod=_.oAB({type:L}),L.\u0275inj=_.cJS({imports:[[Kh,Mt.BQ],Mt.BQ]}),L})(),Uu=(()=>{class L{}return L.\u0275fac=function(b){return new(b||L)},L.\u0275mod=_.oAB({type:L}),L.\u0275inj=_.cJS({}),L})(),bd=(()=>{class L{}return L.\u0275fac=function(b){return new(b||L)},L.\u0275mod=_.oAB({type:L}),L.\u0275inj=_.cJS({imports:[[Uu,Mt.BQ],Mt.BQ]}),L})();var lp=m(33);let Ld=(()=>{class L{}return L.\u0275fac=function(b){return new(b||L)},L.\u0275mod=_.oAB({type:L,bootstrap:[zr]}),L.\u0275inj=_.cJS({providers:[Jt.d,ht.v,{provide:_.ip1,useFactory:Nd,deps:[Jt.d],multi:!0}],imports:[[C.b2,lp.k,Wt,e.u5,e.UX,Te.PW,Jl,r.ot,ao.JF,yo.Bb,xo,jr,r.ot,Fe,gt,oo,Co,ba,wc,Ca.Is,tr.t,_l,so.N6,s.Ps,Uo.c,Vi,Fs.Tx,Mt.XK,Yc,Ku,dh.Cq,hu,Mt.si,di,Ce,Jl,T,I.ZX,Xn,Fp,u.Nh,$e,ds,bd,$e,r.ot,Ce,s.Ps,Vi]]}),L})();function Nd(L){return()=>L.Init()}(0,_.G48)(),C.q6().bootstrapModule(Ld).catch(L=>console.error(L))},51707:(U,$,m)=>{"use strict";m.d($,{L:()=>e});var C=m(15861),_=m(68699);class e{constructor(n){this.swaggerUrl=n,this.GenerateBlocks=[],this.GenerateFunctions=[],this.fieldXMLObjects=[],this.fieldXMLFunctions=[],this.hasError=!0,this.paths=[],this.name="",this.operations=[],this.basePath="",this.tagsSwagger=[],this.openApiDocument=null,this.cacheCategSwaggerFromPaths=[]}ParseSwagger(){var n=this;return(0,C.Z)(function*(){var r,s=n;s.fieldXMLObjects.push(`<label text="${s.swaggerUrl}"></label>`),s.fieldXMLFunctions.push({id:"",gui:`<label text="${s.swaggerUrl}"></label>`});var u=null;try{var y=yield m(10695).default(n.swaggerUrl);u=y.spec}catch(Q){return console.error(`parseSwagger ${n.swaggerUrl}`,Q),s.fieldXMLObjects.push("<label text='Error parsing!'></label>"),n}n.hasError=!1,n.basePath=u.basePath||"";var x=null===(r=u.components)||void 0===r?void 0:r.schemas;return(null==x||null==x)&&(x=u.definitions),x?Object.keys(x).sort().forEach(function(Q){var at=x[Q],rt=s.findProperties(at),St=`<block type="${Q}">`;rt.forEach(function(Ht){if(Ht.value&&Ht.value.type){var vt=s.GenerateShadowField(Ht.value.type,Ht.key,null);vt.length>0&&(St+=`<value name="val_${Ht.key}">${vt}</value>`)}}),s.fieldXMLObjects.push(St+="</block>"),s.GenerateBlocks.push(s.GenerateBlock(at,Q))}):console.log("_A",u),u.paths&&Object.keys(u.paths).forEach(function(Q){var at=u.paths[Q];s.paths.push({id:Q,nrOps:Object.keys(at).length}),Object.keys(at).forEach(function(rt){s.GenerateFunctions.push(s.GenerateFunction(at,Q,at[rt],rt))})}),s.openApiDocument=u,s})()}categSwagger(){var n=this.findHostNameRegular();(n=n.split(".").join("")).length>5&&n.substring(0,5);var u=this.nameCategSwagger();return'<category name="Objects" custom="objects_'+u+'"></category><category name="AllApi" custom="AllApi_'+u+'"></category>'}GenerateBlock(n,r){var s=this,u=r,x=s.findProperties(n);return function(B,Q,at){_.getMainWorkspace()||(console.log("fix for #38 set mainWorkspace"),_.mainWorkspace=at,console.log("fix for #38  after focus",_.getMainWorkspace())),B[u]={init:function(){var rt=!1,St=[];n.enum&&(rt=!0,St=Object.keys(n.enum).map(n["x-enumNames"]?xt=>[n["x-enumNames"][xt],xt]:xt=>[n.enum[xt],xt]));var vt=this.appendDummyInput().appendField(r);rt?(St=St.map(xt=>{var Wt,Jt;return[null===(Wt=xt[0])||void 0===Wt?void 0:Wt.toString(),null===(Jt=xt[1])||void 0===Jt?void 0:Jt.toString()]}),vt.appendField(new _.FieldDropdown(St),`val_${r}`)):x.forEach(xt=>{var Wt,Jt=xt.key;if(xt.value.nullable&&0==xt.value.nullable&&(Jt+="*"),null===(Wt=xt.value)||void 0===Wt?void 0:Wt.type){var Ct=xt.value.type||"";if("object"==Ct){var yt=xt.value.$$ref||"";yt.length>0&&(Ct=yt.substring(yt.lastIndexOf("/")+1))}Jt+=":"+Ct}xt.value.$ref&&(Jt+="->"+xt.value.$ref.replaceAll("#/components/schemas/","")),this.appendValueInput(`val_${xt.key}`).appendField(`${Jt}`)}),this.setOutput(!0,u)}},Q[u]=function(rt){{var St=!1;n.enum&&(St=!0);var Ht=s.findProperties(n);const Jt=99,Ct=0;var vt="",xt=[];return Ht.forEach(yt=>{let ot=Q.valueToCode(rt,`val_${yt.key}`,Ct);""===ot&&(ot="null"),null==ot&&(ot="null"),xt.push(`"${yt.key}":${ot}`)}),vt="{ "+xt.join(",")+" }",St&&(vt=rt.getFieldValue(`val_${r}`)),[vt,Jt]}}}}findRootSite(){var n,r,s="";if((null===(r=null===(n=this.openApiDocument)||void 0===n?void 0:n.host)||void 0===r?void 0:r.length)>0){var u=this.openApiDocument.host;s=Array.isArray(u)?this.openApiDocument.schemes[0]+"://"+u[0]:this.openApiDocument.schemes[0]+"://"+u}else s=this.swaggerUrl;var y="";if(s.startsWith("http://")||s.startsWith("https://")){var x=new URL(s);y=x.protocol+"//"+x.hostname,x.port.length>0&&(y+=":"+x.port)}return y}GenerateShadowField(n,r,s){switch(n){case"integer":return`<block type='math_number'><field name='NUM'>${s||0}</field></block>`;case"string":return`<block type='text'><field name='TEXT'>${s||`please enter ${r}`}</field></block>`;case"boolean":return`<block type='logic_boolean'><field name='BOOL'>${s||"FALSE"}</field></block>`;case"array":return'<block type="lists_create_with"> <mutation items="0"></mutation></block>';default:return""}}GenerateNameFunction(n,r,s,u){return u+"_"+r.replaceAll("/","_").replaceAll("{","__").replaceAll("}","")}GenerateFunction(n,r,s,u){var y=this,x=y.GenerateNameFunction(n,r,s,u),Q=s,at=`<block type="text_print"> <value name="TEXT"><block type="${x}">`;Q.parameters&&Q.parameters.forEach(Wt=>{if(Wt.type)(Jt=y.GenerateShadowField(Wt.type,Wt.name,null)).length>0&&(at+=`<value name="val_${Wt.name}">${Jt}</value>`);else if(Wt.schema&&Wt.schema.type){var Jt;(Jt=y.GenerateShadowField(Wt.schema.type,Wt.name,null)).length>0&&(at+=`<value name="val_${Wt.name}">${Jt}</value>`)}});var rt="",St="";try{var Ht=y.findRootSite();if((Ht||"").length>0){var vt=new URL(Ht);rt=vt.hostname,St=vt.port}}catch(Wt){console.log("find root error",Wt)}var xt=y.GenerateShadowField("string","override_host",rt=rt||" ");return at+=`<value name="override_Host">${xt}</value>`,xt=y.GenerateShadowField("integer","override_port",St=St||"0"),at+=`<value name="override_Port">${xt}</value>`,at+="</block></value>",y.fieldXMLFunctions.push({id:r,gui:at+="</block>"}),function(Wt,Jt){Wt[x]={init:function(){var Ct=u;switch(u.toString().toLowerCase()){case"get":Ct="",this.setColour(210);break;case"post":Ct="",this.setColour(165);break;case"put":Ct="",this.setColour(40);break;case"delete":Ct="",this.setColour(10);break;default:console.log(`not found ${u}`),this.setColour(10)}for(var yt=r,ot=y.findCategSwaggerFromPaths(),mt=0;mt<ot.length;mt++){var lt="/"+ot[mt]+"/",Ut=r.indexOf(lt);if(Ut>-1){var Rt=r.substring(Ut+lt.length);Rt.length<yt.length&&(yt=Rt)}}yt.length>25&&(yt=yt.substring(0,25)+"..."),this.appendDummyInput().appendField(new _.FieldImage(`assets/httpImages/${u}.png`,90,20,u)).appendField(`${Ct} ${yt}`);var Et=y.findRootSite();if(Q.parameters&&Q.parameters.forEach(Mt=>{var Nt=Mt.name;if(Mt.required&&(Nt+="*"),Mt.type)Nt+=":"+Mt.type;else if(Mt.schema)if(Mt.schema.enum&&"$$ref"in Mt.schema){var de=Mt.schema.$$ref.split("/");Nt+="=>"+de[de.length-1]}else if(Mt.schema.type)if("object"==Mt.schema.type){var ve=Mt.schema.$$ref||"";ve.length>0&&(Nt+=":"+(ve=ve.substring(ve.lastIndexOf("/")+1)))}else Nt+=":"+Mt.schema.type;this.appendValueInput(`val_${Mt.name}`).appendField(Nt)}),Q.requestBody){var ht="";if(Q.requestBody.content){var nt=Q.requestBody.content["application/json"];if(nt&&nt.schema){var he=nt.schema.$$ref;he&&(ht="=>"+he.substring(he.lastIndexOf("/")+1))}}this.appendValueInput("val_values").appendField("values"+ht).setCheck()}this.appendValueInput("override_Host").appendField("override Host"),this.appendValueInput("override_Port").appendField("override Port"),this.setTooltip(`${u} ${Et}${r}`),this.setOutput(!0,"")}},Jt[x]=function(Ct){var lt=y.openApiDocument.paths[r][u],Ut=[];"parameters"in lt&&(Ut=lt.parameters);var Rt=!1,Et=Ut.filter(Ze=>"body"==Ze.in).length>0;(Et||"requestBody"in lt)&&(Rt=!0);var ht={},nt={};Rt&&(ht.val_values=Jt.valueToCode(Ct,"val_values",0),nt.val_values=ht.val_values),Ut.forEach(Ze=>{ht[`val_${Ze.name}`]=Jt.valueToCode(Ct,`val_${Ze.name}`,0)});var he=Ut.map(Ze=>Ze.name);Rt&&!Et&&he.push("values"),he.push("extraData"),Ut.map(Ze=>`\${obj['val_${Ze.name}']},`);var Nt="function(";Nt+=he.join(","),Nt+="){\n",Nt+='var rootSite="'+y.findRootSite()+'";\n',Nt+="if(extraData){\n",Nt+="if(extraData.url && extraData.url.host && extraData.url.host.length>0 ){\n",Nt+="rootSite =  changeHost(rootSite, extraData.url.host);\n",Nt+="};\n",Nt+="if(extraData.url && extraData.url.port && extraData.url.port.toString().length>0 ){\n",Nt+="rootSite  =changePort(rootSite , extraData.url.port);\n",Nt+="};\n",Nt+="};\n",Nt+='var strUrl =rootSite +"'+y.basePath+r+'";\n';var de=Ut.filter(Ze=>"query"==Ze.in);if(de.length>0){Nt+='strUrl+="?";\n;';var ve=de.map(Ze=>`${Ze.name}={`+Ze.name+"}").join("&");Nt+='strUrl += "'+ve+'";\n;'}var ue=Ut.filter(Ze=>"path"==Ze.in||"query"==Ze.in).map(Ze=>`\n          //this gives error cannot read property 'call' of undefined in acorn\n          //strUrl = strUrl.replace("{${Ze.name}}",${Ze.name});\n          {\n            var replaceFInd = "{${Ze.name}}";\n            var index= strUrl.indexOf(replaceFInd);\n            if(index>=0){\n              var strUrlReplace = strUrl.substring(0,index)+ ${Ze.name} + strUrl.substring(index+replaceFInd.length);\n              strUrl = strUrlReplace;\n            }\n\n          };`);if(Nt+=ue.join("\n"),Nt+=`\n{var res= ${u}Xhr(strUrl`,Rt){var Be="values";Et&&(Be=Ut.filter(Ze=>"body"==Ze.in)[0].name),Nt+=`,JSON.stringify(${Be})`}Nt+=");\n",Nt+="var resJS=JSON.parse(res);\n",Nt+="if(resJS.statusOK) return resJS.text;\n",Nt+="errHandler(res);\n}\n",Nt+="}",Nt+="(",Ut.forEach(Ze=>{Nt+=ht[`val_${Ze.name}`]+","}),Rt&&!Et&&(Nt+=nt.val_values+",");var Ne="url:{notImportant:1",Qe=Jt.valueToCode(Ct,"override_Host",0);(Qe=Qe||"").length>0&&(Ne+=`,host:${Qe}`);var Di=Jt.valueToCode(Ct,"override_Port",0);return(Di=Di||"").length>0&&(Ne+=`,port:${Di}`),Nt+=`{${Ne+="}"}}\n`,[Nt+=")",99]}}}findProperties(n){var r=[];return n.properties&&Object.keys(n.properties).forEach(s=>{r.push({key:s,value:n.properties[s]})}),r}TranslateToBlocklyType(n){return"integer"==n?"Number":"string"==n?"String":"bool"==n?"Boolean":"array"==n?"Array":(console.error("not found TranslateToBlocklyType item"+n),"not found type"+n)}nameCategSwagger(){return`catSwagger${this.findHostNameRegular()}_${this.name}`}findHostNameRegular(){var n,r,s,u="";if((null===(r=null===(n=this.openApiDocument)||void 0===n?void 0:n.host)||void 0===r?void 0:r.length)>0){var y=this.openApiDocument.host;u=Array.isArray(y)?this.openApiDocument.schemes[0]+"://"+y[0]:this.openApiDocument.schemes[0]+"://"+y}else u=this.swaggerUrl;var x="(localSite)";if(u.startsWith("http://")||u.startsWith("https://")){var B=new URL(u),Q=null!==(s=B.port)&&void 0!==s?s:80;x=B.hostname+Q}return x.split(".").join("")}metaBlocks(){var n=this;return function(r,s){var u;r[u=`meta_swagger_controllers_${n.name}`]={init:function(){this.appendDummyInput().appendField("categories_"+n.name),this.setOutput(!0,null),this.setColour(30),this.setTooltip(""),this.setHelpUrl(n.swaggerUrl)}},s[u]=function(y){var B=n.findCategSwaggerFromPaths().map(rt=>({name:rt}));return[JSON.stringify({name:n.name,categories:B}),s.ORDER_NONE]},r[u=`meta_swagger_controllers_actions_${n.name}`]={init:function(){this.appendDummyInput().appendField("categories_actions"+n.name),this.setOutput(!0,null),this.setColour(30),this.setTooltip(""),this.setHelpUrl(n.swaggerUrl)}},s[u]=function(y){var B=n.findCategSwaggerFromPaths().map(rt=>({name:rt,ops:n.findfieldXMLFunctions(rt).map(St=>St.id).filter(St=>St.length>0)}));return[JSON.stringify({name:n.name,categories:B}),s.ORDER_NONE]}}}findCategsFromTags(){var n=this.openApiDocument.paths,r=Object.keys(n),s=this;r.forEach(function(u){var y=n[u];y&&Object.keys(y).forEach(function(B){var Q=y[B].tags;Q&&Q.length>0&&Q.forEach(function(at){s.cacheCategSwaggerFromPaths.includes(at)||s.cacheCategSwaggerFromPaths.push(at),s.operations.push({controller:at,id:u})})})})}findCategSwaggerFromPaths(){if(this.findCategsFromTags(),this.cacheCategSwaggerFromPaths.length>0)return this.cacheCategSwaggerFromPaths;var n=this.paths.filter(s=>s&&s.id&&s.id.length>0).map(s=>{for(var u=s.id.length,y=s.id.indexOf("{");y>0;){var x=s.id.indexOf("}",y);if(u-x<2){s.id=s.id.substring(0,y);break}y=s.id.indexOf("{",x)}return s}).map(s=>(s.id.lastIndexOf("/")!=s.id.length-1&&(s.id+="/"),s));this.operations=n.filter(s=>s.nrOps>1).map(s=>({arr:s.id.split("/").filter(y=>y.length>0),id:s.id})).map(s=>({controller:s.arr[s.arr.length-1],id:s.id}));var r=n.filter(s=>1==s.nrOps).map(s=>({arr:s.id.split("/").filter(u=>u.length>0),id:s.id})).map(s=>1==s.arr.length?{controller:s.arr[0],id:s.id}:{controller:s.arr[s.arr.length-2],id:s.id});return this.operations.push(...r),this.cacheCategSwaggerFromPaths=[...new Set(this.operations.map(s=>s.controller))],this.cacheCategSwaggerFromPaths}findfieldXMLFunctions(n){Object.keys(this.openApiDocument.paths);var u=this.operations.filter(x=>x.controller==n);return this.fieldXMLFunctions.filter(x=>{if(""==x.id)return!0;var B=x.id+"/",Q=!1;return u.forEach(at=>{B.startsWith(at.id)&&(Q=!0)}),!!Q||(u.forEach(at=>{var rt=at.id.substring(0,at.id.lastIndexOf("/"))+"{";B.startsWith(rt)&&(Q=!0)}),Q)})}}},86931:function(U,$,m){var _,e;_=[m(81069)],void 0!==(e=function(t){"use strict";return t}.apply($,_))&&(U.exports=e)},81069:function(U,$){var _;void 0!==(_=function(){"use strict";var e={connectionTypes:{INPUT_VALUE:1,OUTPUT_VALUE:2,NEXT_STATEMENT:3,PREVIOUS_STATEMENT:4},constants:{},LINE_MODE_MULTIPLIER:40,PAGE_MODE_MULTIPLIER:125,DRAG_RADIUS:5,FLYOUT_DRAG_RADIUS:10,SNAP_RADIUS:28};return e.CONNECTING_SNAP_RADIUS=e.SNAP_RADIUS,e.CURRENT_CONNECTION_PREFERENCE=8,e.BUMP_DELAY=250,e.BUMP_RANDOMNESS=10,e.COLLAPSE_CHARS=30,e.LONGPRESS=750,e.SOUND_LIMIT=100,e.DRAG_STACK=!0,e.HSV_SATURATION=.45,e.HSV_VALUE=.65,e.SPRITE={width:96,height:124,url:"sprites.png"},e.constants.ALIGN={LEFT:-1,CENTRE:0,RIGHT:1},e.DRAG_NONE=0,e.DRAG_STICKY=1,e.DRAG_BEGIN=1,e.DRAG_FREE=2,e.OPPOSITE_TYPE=[],e.OPPOSITE_TYPE[e.connectionTypes.INPUT_VALUE]=e.connectionTypes.OUTPUT_VALUE,e.OPPOSITE_TYPE[e.connectionTypes.OUTPUT_VALUE]=e.connectionTypes.INPUT_VALUE,e.OPPOSITE_TYPE[e.connectionTypes.NEXT_STATEMENT]=e.connectionTypes.PREVIOUS_STATEMENT,e.OPPOSITE_TYPE[e.connectionTypes.PREVIOUS_STATEMENT]=e.connectionTypes.NEXT_STATEMENT,e.VARIABLE_CATEGORY_NAME="VARIABLE",e.VARIABLE_DYNAMIC_CATEGORY_NAME="VARIABLE_DYNAMIC",e.PROCEDURE_CATEGORY_NAME="PROCEDURE",e.RENAME_VARIABLE_ID="RENAME_VARIABLE_ID",e.DELETE_VARIABLE_ID="DELETE_VARIABLE_ID",e.constants.COLLAPSED_INPUT_NAME="_TEMP_COLLAPSED_INPUT",e.constants.COLLAPSED_FIELD_NAME="_TEMP_COLLAPSED_FIELD",e.utils={},e.utils.global=function(){return"object"==typeof self?self:"object"==typeof window?window:"object"==typeof global?global:this}(),e.Msg={},e.utils.global.Blockly||(e.utils.global.Blockly={}),e.utils.global.Blockly.Msg||(e.utils.global.Blockly.Msg=e.Msg),e.utils.colour={},e.utils.colour.parse=function(t){t=String(t).toLowerCase().trim();var n=e.utils.colour.names[t];if(n||(n="0x"==t.substring(0,2)?"#"+t.substring(2):t,/^#[0-9a-f]{6}$/.test(n="#"==n[0]?n:"#"+n)))return n;if(/^#[0-9a-f]{3}$/.test(n))return["#",n[1],n[1],n[2],n[2],n[3],n[3]].join("");var r=t.match(/^(?:rgb)?\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)$/);return r&&(t=Number(r[1]),n=Number(r[2]),r=Number(r[3]),0<=t&&256>t&&0<=n&&256>n&&0<=r&&256>r)?e.utils.colour.rgbToHex(t,n,r):null},e.utils.colour.rgbToHex=function(t,n,r){return n=t<<16|n<<8|r,16>t?"#"+(16777216|n).toString(16).substr(1):"#"+n.toString(16)},e.utils.colour.hexToRgb=function(t){return(t=e.utils.colour.parse(t))?[(t=parseInt(t.substr(1),16))>>16,t>>8&255,255&t]:[0,0,0]},e.utils.colour.hsvToHex=function(t,n,r){var s=0,u=0,y=0;if(0==n)y=u=s=r;else{var x=Math.floor(t/60),B=t/60-x;t=r*(1-n);var Q=r*(1-n*B);switch(n=r*(1-n*(1-B)),x){case 1:s=Q,u=r,y=t;break;case 2:s=t,u=r,y=n;break;case 3:s=t,u=Q,y=r;break;case 4:s=n,u=t,y=r;break;case 5:s=r,u=t,y=Q;break;case 6:case 0:s=r,u=n,y=t}}return e.utils.colour.rgbToHex(Math.floor(s),Math.floor(u),Math.floor(y))},e.utils.colour.blend=function(t,n,r){return(t=e.utils.colour.parse(t))&&(n=e.utils.colour.parse(n))?(t=e.utils.colour.hexToRgb(t),n=e.utils.colour.hexToRgb(n),e.utils.colour.rgbToHex(Math.round(n[0]+r*(t[0]-n[0])),Math.round(n[1]+r*(t[1]-n[1])),Math.round(n[2]+r*(t[2]-n[2])))):null},e.utils.colour.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00"},e.utils.Coordinate=function(t,n){this.x=t,this.y=n},e.utils.Coordinate.equals=function(t,n){return t==n||!(!t||!n)&&t.x==n.x&&t.y==n.y},e.utils.Coordinate.distance=function(t,n){var r=t.x-n.x;return t=t.y-n.y,Math.sqrt(r*r+t*t)},e.utils.Coordinate.magnitude=function(t){return Math.sqrt(t.x*t.x+t.y*t.y)},e.utils.Coordinate.difference=function(t,n){return new e.utils.Coordinate(t.x-n.x,t.y-n.y)},e.utils.Coordinate.sum=function(t,n){return new e.utils.Coordinate(t.x+n.x,t.y+n.y)},e.utils.Coordinate.prototype.clone=function(){return new e.utils.Coordinate(this.x,this.y)},e.utils.Coordinate.prototype.scale=function(t){return this.x*=t,this.y*=t,this},e.utils.Coordinate.prototype.translate=function(t,n){return this.x+=t,this.y+=n,this},e.utils.Rect=function(t,n,r,s){this.top=t,this.bottom=n,this.left=r,this.right=s},e.utils.Rect.prototype.contains=function(t,n){return t>=this.left&&t<=this.right&&n>=this.top&&n<=this.bottom},e.utils.Rect.prototype.intersects=function(t){return!(this.left>t.right||this.right<t.left||this.top>t.bottom||this.bottom<t.top)},e.utils.string={},e.utils.string.startsWith=function(t,n){return 0==t.lastIndexOf(n,0)},e.utils.string.shortestStringLength=function(t){return t.length?t.reduce(function(n,r){return n.length<r.length?n:r}).length:0},e.utils.string.commonWordPrefix=function(t,n){if(!t.length)return 0;if(1==t.length)return t[0].length;var r=0;n=n||e.utils.string.shortestStringLength(t);for(var s=0;s<n;s++){for(var u=t[0][s],y=1;y<t.length;y++)if(u!=t[y][s])return r;" "==u&&(r=s+1)}for(y=1;y<t.length;y++)if((u=t[y][s])&&" "!=u)return r;return n},e.utils.string.commonWordSuffix=function(t,n){if(!t.length)return 0;if(1==t.length)return t[0].length;var r=0;n=n||e.utils.string.shortestStringLength(t);for(var s=0;s<n;s++){for(var u=t[0].substr(-s-1,1),y=1;y<t.length;y++)if(u!=t[y].substr(-s-1,1))return r;" "==u&&(r=s+1)}for(y=1;y<t.length;y++)if((u=t[y].charAt(t[y].length-s-1))&&" "!=u)return r;return n},e.utils.string.wrap=function(t,n){t=t.split("\n");for(var r=0;r<t.length;r++)t[r]=e.utils.string.wrapLine_(t[r],n);return t.join("\n")},e.utils.string.wrapLine_=function(t,n){if(t.length<=n)return t;for(var r=t.trim().split(/\s+/),s=0;s<r.length;s++)r[s].length>n&&(n=r[s].length);s=-1/0;var u=1;do{var y=s,x=t;t=[];var B=r.length/u,Q=1;for(s=0;s<r.length-1;s++)Q<(s+1.5)/B?(Q++,t[s]=!0):t[s]=!1;t=e.utils.string.wrapMutate_(r,t,n),s=e.utils.string.wrapScore_(r,t,n),t=e.utils.string.wrapToText_(r,t),u++}while(s>y);return x},e.utils.string.wrapScore_=function(t,n,r){for(var s=[0],u=[],y=0;y<t.length;y++)s[s.length-1]+=t[y].length,!0===n[y]?(s.push(0),u.push(t[y].charAt(t[y].length-1))):!1===n[y]&&s[s.length-1]++;for(t=Math.max.apply(Math,s),y=n=0;y<s.length;y++)n-=2*Math.pow(Math.abs(r-s[y]),1.5),n-=Math.pow(t-s[y],1.5),-1!=".?!".indexOf(u[y])?n+=r/3:-1!=",;)]}".indexOf(u[y])&&(n+=r/4);return 1<s.length&&s[s.length-1]<=s[s.length-2]&&(n+=.5),n},e.utils.string.wrapMutate_=function(t,n,r){for(var u,s=e.utils.string.wrapScore_(t,n,r),y=0;y<n.length-1;y++)if(n[y]!=n[y+1]){var x=[].concat(n);x[y]=!x[y],x[y+1]=!x[y+1];var B=e.utils.string.wrapScore_(t,x,r);B>s&&(s=B,u=x)}return u?e.utils.string.wrapMutate_(t,u,r):n},e.utils.string.wrapToText_=function(t,n){for(var r=[],s=0;s<t.length;s++)r.push(t[s]),void 0!==n[s]&&r.push(n[s]?"\n":" ");return r.join("")},e.utils.Size=function(t,n){this.width=t,this.height=n},e.utils.Size.equals=function(t,n){return t==n||!(!t||!n)&&t.width==n.width&&t.height==n.height},e.utils.style={},e.utils.style.getSize=function(t){if("none"!=e.utils.style.getStyle_(t,"display"))return e.utils.style.getSizeWithDisplay_(t);var n=t.style,r=n.display,s=n.visibility,u=n.position;n.visibility="hidden",n.position="absolute",n.display="inline";var y=t.offsetWidth;return t=t.offsetHeight,n.display=r,n.position=u,n.visibility=s,new e.utils.Size(y,t)},e.utils.style.getSizeWithDisplay_=function(t){return new e.utils.Size(t.offsetWidth,t.offsetHeight)},e.utils.style.getStyle_=function(t,n){return e.utils.style.getComputedStyle(t,n)||e.utils.style.getCascadedStyle(t,n)||t.style&&t.style[n]},e.utils.style.getComputedStyle=function(t,n){return document.defaultView&&document.defaultView.getComputedStyle&&(t=document.defaultView.getComputedStyle(t,null))&&(t[n]||t.getPropertyValue(n))||""},e.utils.style.getCascadedStyle=function(t,n){return t.currentStyle?t.currentStyle[n]:null},e.utils.style.getPageOffset=function(t){var n=new e.utils.Coordinate(0,0);t=t.getBoundingClientRect();var r=document.documentElement;return r=new e.utils.Coordinate(window.pageXOffset||r.scrollLeft,window.pageYOffset||r.scrollTop),n.x=t.left+r.x,n.y=t.top+r.y,n},e.utils.style.getViewportPageOffset=function(){var t=document.body,n=document.documentElement;return new e.utils.Coordinate(t.scrollLeft||n.scrollLeft,t.scrollTop||n.scrollTop)},e.utils.style.setElementShown=function(t,n){t.style.display=n?"":"none"},e.utils.style.isRightToLeft=function(t){return"rtl"==e.utils.style.getStyle_(t,"direction")},e.utils.style.getBorderBox=function(t){var n=e.utils.style.getComputedStyle(t,"borderLeftWidth"),r=e.utils.style.getComputedStyle(t,"borderRightWidth"),s=e.utils.style.getComputedStyle(t,"borderTopWidth");return t=e.utils.style.getComputedStyle(t,"borderBottomWidth"),{top:parseFloat(s),right:parseFloat(r),bottom:parseFloat(t),left:parseFloat(n)}},e.utils.style.scrollIntoContainerView=function(t,n,r){t=e.utils.style.getContainerOffsetToScrollInto(t,n,r),n.scrollLeft=t.x,n.scrollTop=t.y},e.utils.style.getContainerOffsetToScrollInto=function(t,n,r){var s=e.utils.style.getPageOffset(t),u=e.utils.style.getPageOffset(n),y=e.utils.style.getBorderBox(n),x=s.x-u.x-y.left;return s=s.y-u.y-y.top,u=e.utils.style.getSizeWithDisplay_(t),t=n.clientWidth-u.width,u=n.clientHeight-u.height,y=n.scrollLeft,n=n.scrollTop,r?(y+=x-t/2,n+=s-u/2):(y+=Math.min(x,Math.max(x-t,0)),n+=Math.min(s,Math.max(s-u,0))),new e.utils.Coordinate(y,n)},e.utils.userAgent={},function(t){function n(s){return-1!=r.indexOf(s.toUpperCase())}e.utils.userAgent.raw=t;var r=e.utils.userAgent.raw.toUpperCase();e.utils.userAgent.IE=n("Trident")||n("MSIE"),e.utils.userAgent.EDGE=n("Edge"),e.utils.userAgent.JAVA_FX=n("JavaFX"),e.utils.userAgent.CHROME=(n("Chrome")||n("CriOS"))&&!e.utils.userAgent.EDGE,e.utils.userAgent.WEBKIT=n("WebKit")&&!e.utils.userAgent.EDGE,e.utils.userAgent.GECKO=n("Gecko")&&!e.utils.userAgent.WEBKIT&&!e.utils.userAgent.IE&&!e.utils.userAgent.EDGE,e.utils.userAgent.ANDROID=n("Android"),t=e.utils.global.navigator&&e.utils.global.navigator.maxTouchPoints,e.utils.userAgent.IPAD=n("iPad")||n("Macintosh")&&0<t,e.utils.userAgent.IPOD=n("iPod"),e.utils.userAgent.IPHONE=n("iPhone")&&!e.utils.userAgent.IPAD&&!e.utils.userAgent.IPOD,e.utils.userAgent.MAC=n("Macintosh"),e.utils.userAgent.TABLET=e.utils.userAgent.IPAD||e.utils.userAgent.ANDROID&&!n("Mobile")||n("Silk"),e.utils.userAgent.MOBILE=!e.utils.userAgent.TABLET&&(e.utils.userAgent.IPOD||e.utils.userAgent.IPHONE||e.utils.userAgent.ANDROID||n("IEMobile"))}(e.utils.global.navigator&&e.utils.global.navigator.userAgent||""),e.utils.noEvent=function(t){t.preventDefault(),t.stopPropagation()},e.utils.isTargetInput=function(t){return"textarea"==t.target.type||"text"==t.target.type||"number"==t.target.type||"email"==t.target.type||"password"==t.target.type||"search"==t.target.type||"tel"==t.target.type||"url"==t.target.type||t.target.isContentEditable||t.target.dataset&&"true"==t.target.dataset.isTextInput},e.utils.getRelativeXY=function(t){var n=new e.utils.Coordinate(0,0),r=t.getAttribute("x");return r&&(n.x=parseInt(r,10)),(r=t.getAttribute("y"))&&(n.y=parseInt(r,10)),(r=(r=t.getAttribute("transform"))&&r.match(e.utils.getRelativeXY.XY_REGEX_))&&(n.x+=Number(r[1]),r[3]&&(n.y+=Number(r[3]))),(t=t.getAttribute("style"))&&-1<t.indexOf("translate")&&(t=t.match(e.utils.getRelativeXY.XY_STYLE_REGEX_))&&(n.x+=Number(t[1]),t[3]&&(n.y+=Number(t[3]))),n},e.utils.getInjectionDivXY_=function(t){for(var n=0,r=0;t;){var s=e.utils.getRelativeXY(t);if(n+=s.x,r+=s.y,-1!=(" "+(t.getAttribute("class")||"")+" ").indexOf(" injectionDiv "))break;t=t.parentNode}return new e.utils.Coordinate(n,r)},e.utils.getRelativeXY.XY_REGEX_=/translate\(\s*([-+\d.e]+)([ ,]\s*([-+\d.e]+)\s*)?/,e.utils.getRelativeXY.XY_STYLE_REGEX_=/transform:\s*translate(?:3d)?\(\s*([-+\d.e]+)\s*px([ ,]\s*([-+\d.e]+)\s*px)?/,e.utils.isRightButton=function(t){return!(!t.ctrlKey||!e.utils.userAgent.MAC)||2==t.button},e.utils.mouseToSvg=function(t,n,r){var s=n.createSVGPoint();return s.x=t.clientX,s.y=t.clientY,r||(r=n.getScreenCTM().inverse()),s.matrixTransform(r)},e.utils.getScrollDeltaPixels=function(t){switch(t.deltaMode){default:return{x:t.deltaX,y:t.deltaY};case 1:return{x:t.deltaX*e.LINE_MODE_MULTIPLIER,y:t.deltaY*e.LINE_MODE_MULTIPLIER};case 2:return{x:t.deltaX*e.PAGE_MODE_MULTIPLIER,y:t.deltaY*e.PAGE_MODE_MULTIPLIER}}},e.utils.tokenizeInterpolation=function(t){return e.utils.tokenizeInterpolation_(t,!0)},e.utils.replaceMessageReferences=function(t){return"string"!=typeof t?t:(t=e.utils.tokenizeInterpolation_(t,!1)).length?String(t[0]):""},e.utils.checkMessageReferences=function(t){for(var n=!0,r=e.Msg,s=t.match(/%{BKY_[A-Z]\w*}/gi),u=0;u<s.length;u++)null==r[s[u].toUpperCase().slice(6,-1)]&&(console.warn("No message string for "+s[u]+" in "+t),n=!1);return n},e.utils.tokenizeInterpolation_=function(t,n){var r=[],s=t.split("");s.push("");var u=0;t=[];for(var y=null,x=0;x<s.length;x++){var B=s[x];0==u?"%"==B?((B=t.join(""))&&r.push(B),t.length=0,u=1):t.push(B):1==u?"%"==B?(t.push(B),u=0):n&&"0"<=B&&"9">=B?(u=2,y=B,(B=t.join(""))&&r.push(B),t.length=0):"{"==B?u=3:(t.push("%",B),u=0):2==u?"0"<=B&&"9">=B?y+=B:(r.push(parseInt(y,10)),x--,u=0):3==u&&(""==B?(t.splice(0,0,"%{"),x--,u=0):"}"!=B?t.push(B):(u=t.join(""),/[A-Z]\w*/i.test(u)?(B=u.toUpperCase(),(B=e.utils.string.startsWith(B,"BKY_")?B.substring(4):null)&&B in e.Msg?"string"==typeof(u=e.Msg[B])?Array.prototype.push.apply(r,e.utils.tokenizeInterpolation_(u,n)):r.push(n?String(u):u):r.push("%{"+u+"}")):r.push("%{"+u+"}"),u=t.length=0))}for((B=t.join(""))&&r.push(B),n=[],x=t.length=0;x<r.length;++x)"string"==typeof r[x]?t.push(r[x]):((B=t.join(""))&&n.push(B),t.length=0,n.push(r[x]));return(B=t.join(""))&&n.push(B),t.length=0,n},e.utils.genUid=function(){for(var t=e.utils.genUid.soup_.length,n=[],r=0;20>r;r++)n[r]=e.utils.genUid.soup_.charAt(Math.random()*t);return n.join("")},e.utils.genUid.soup_="!#$%()*+,-./:;=?@[]^_`{|}~ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e.utils.is3dSupported=function(){if(void 0!==e.utils.is3dSupported.cached_)return e.utils.is3dSupported.cached_;if(!e.utils.global.getComputedStyle)return!1;var t=document.createElement("p"),n="none",r={webkitTransform:"-webkit-transform",OTransform:"-o-transform",msTransform:"-ms-transform",MozTransform:"-moz-transform",transform:"transform"};for(var s in document.body.insertBefore(t,null),r)if(void 0!==t.style[s]){if(t.style[s]="translate3d(1px,1px,1px)",!(n=e.utils.global.getComputedStyle(t)))return document.body.removeChild(t),!1;n=n.getPropertyValue(r[s])}return document.body.removeChild(t),e.utils.is3dSupported.cached_="none"!==n,e.utils.is3dSupported.cached_},e.utils.runAfterPageLoad=function(t){if("object"!=typeof document)throw Error("Blockly.utils.runAfterPageLoad() requires browser document.");if("complete"==document.readyState)t();else var n=setInterval(function(){"complete"==document.readyState&&(clearInterval(n),t())},10)},e.utils.getViewportBBox=function(){var t=e.utils.style.getViewportPageOffset();return new e.utils.Rect(t.y,document.documentElement.clientHeight+t.y,t.x,document.documentElement.clientWidth+t.x)},e.utils.arrayRemove=function(t,n){return-1!=(n=t.indexOf(n))&&(t.splice(n,1),!0)},e.utils.getDocumentScroll=function(){var t=document.documentElement,n=window;return e.utils.userAgent.IE&&n.pageYOffset!=t.scrollTop?new e.utils.Coordinate(t.scrollLeft,t.scrollTop):new e.utils.Coordinate(n.pageXOffset||t.scrollLeft,n.pageYOffset||t.scrollTop)},e.utils.getBlockTypeCounts=function(t,n){var r=Object.create(null),s=t.getDescendants(!0);for(n&&(t=t.getNextBlock())&&(t=s.indexOf(t),s.splice(t,s.length-t)),t=0;n=s[t];t++)r[n.type]?r[n.type]++:r[n.type]=1;return r},e.utils.screenToWsCoordinates=function(t,n){var r=n.x;n=n.y;var s=t.getInjectionDiv().getBoundingClientRect();return r=new e.utils.Coordinate(r-s.left,n-s.top),n=t.getOriginOffsetInPixels(),e.utils.Coordinate.difference(r,n).scale(1/t.scale)},e.utils.parseBlockColour=function(t){var n="string"==typeof t?e.utils.replaceMessageReferences(t):t,r=Number(n);if(!isNaN(r)&&0<=r&&360>=r)return{hue:r,hex:e.utils.colour.hsvToHex(r,e.HSV_SATURATION,255*e.HSV_VALUE)};if(r=e.utils.colour.parse(n))return{hue:null,hex:r};throw r='Invalid colour: "'+n+'"',t!=n&&(r+=' (from "'+t+'")'),Error(r)},e.Touch={},e.Touch.TOUCH_ENABLED="ontouchstart"in e.utils.global||!!(e.utils.global.document&&document.documentElement&&"ontouchstart"in document.documentElement)||!(!e.utils.global.navigator||!e.utils.global.navigator.maxTouchPoints&&!e.utils.global.navigator.msMaxTouchPoints),e.Touch.touchIdentifier_=null,e.Touch.TOUCH_MAP={},e.utils.global.PointerEvent?e.Touch.TOUCH_MAP={mousedown:["pointerdown"],mouseenter:["pointerenter"],mouseleave:["pointerleave"],mousemove:["pointermove"],mouseout:["pointerout"],mouseover:["pointerover"],mouseup:["pointerup","pointercancel"],touchend:["pointerup"],touchcancel:["pointercancel"]}:e.Touch.TOUCH_ENABLED&&(e.Touch.TOUCH_MAP={mousedown:["touchstart"],mousemove:["touchmove"],mouseup:["touchend","touchcancel"]}),e.longPid_=0,e.longStart=function(t,n){e.longStop_(),t.changedTouches&&1!=t.changedTouches.length||(e.longPid_=setTimeout(function(){t.changedTouches&&(t.button=2,t.clientX=t.changedTouches[0].clientX,t.clientY=t.changedTouches[0].clientY),n&&n.handleRightClick(t)},e.LONGPRESS))},e.longStop_=function(){e.longPid_&&(clearTimeout(e.longPid_),e.longPid_=0)},e.Touch.clearTouchIdentifier=function(){e.Touch.touchIdentifier_=null},e.Touch.shouldHandleEvent=function(t){return!e.Touch.isMouseOrTouchEvent(t)||e.Touch.checkTouchIdentifier(t)},e.Touch.getTouchIdentifierFromEvent=function(t){return null!=t.pointerId?t.pointerId:t.changedTouches&&t.changedTouches[0]&&null!=t.changedTouches[0].identifier?t.changedTouches[0].identifier:"mouse"},e.Touch.checkTouchIdentifier=function(t){var n=e.Touch.getTouchIdentifierFromEvent(t);return null!=e.Touch.touchIdentifier_?e.Touch.touchIdentifier_==n:("mousedown"==t.type||"touchstart"==t.type||"pointerdown"==t.type)&&(e.Touch.touchIdentifier_=n,!0)},e.Touch.setClientFromTouch=function(t){if(e.utils.string.startsWith(t.type,"touch")){var n=t.changedTouches[0];t.clientX=n.clientX,t.clientY=n.clientY}},e.Touch.isMouseOrTouchEvent=function(t){return e.utils.string.startsWith(t.type,"touch")||e.utils.string.startsWith(t.type,"mouse")||e.utils.string.startsWith(t.type,"pointer")},e.Touch.isTouchEvent=function(t){return e.utils.string.startsWith(t.type,"touch")||e.utils.string.startsWith(t.type,"pointer")},e.Touch.splitEventByTouches=function(t){var n=[];if(t.changedTouches)for(var r=0;r<t.changedTouches.length;r++)n[r]={type:t.type,changedTouches:[t.changedTouches[r]],target:t.target,stopPropagation:function(){t.stopPropagation()},preventDefault:function(){t.preventDefault()}};else n.push(t);return n},e.browserEvents={},e.browserEvents.conditionalBind=function(t,n,r,s,u,y){var x=!1,B=function(Ht){var vt=!u;Ht=e.Touch.splitEventByTouches(Ht);for(var Wt,xt=0;Wt=Ht[xt];xt++)(!vt||e.Touch.shouldHandleEvent(Wt))&&(e.Touch.setClientFromTouch(Wt),r?s.call(r,Wt):s(Wt),x=!0)},Q=[];if(e.utils.global.PointerEvent&&n in e.Touch.TOUCH_MAP)for(var rt,at=0;rt=e.Touch.TOUCH_MAP[n][at];at++)t.addEventListener(rt,B,!1),Q.push([t,rt,B]);else if(t.addEventListener(n,B,!1),Q.push([t,n,B]),n in e.Touch.TOUCH_MAP){var St=function(Ht){B(Ht),x&&!y&&Ht.preventDefault()};for(at=0;rt=e.Touch.TOUCH_MAP[n][at];at++)t.addEventListener(rt,St,!1),Q.push([t,rt,St])}return Q},e.browserEvents.bind=function(t,n,r,s){var u=function(at){r?s.call(r,at):s(at)},y=[];if(e.utils.global.PointerEvent&&n in e.Touch.TOUCH_MAP)for(var B,x=0;B=e.Touch.TOUCH_MAP[n][x];x++)t.addEventListener(B,u,!1),y.push([t,B,u]);else if(t.addEventListener(n,u,!1),y.push([t,n,u]),n in e.Touch.TOUCH_MAP){var Q=function(at){if(at.changedTouches&&1==at.changedTouches.length){var rt=at.changedTouches[0];at.clientX=rt.clientX,at.clientY=rt.clientY}u(at),at.preventDefault()};for(x=0;B=e.Touch.TOUCH_MAP[n][x];x++)t.addEventListener(B,Q,!1),y.push([t,B,Q])}return y},e.browserEvents.unbind=function(t){for(;t.length;){var n=t.pop(),r=n[2];n[0].removeEventListener(n[1],r,!1)}return r},e.ComponentManager=function(){this.componentData_=Object.create(null),this.capabilityToComponentIds_=Object.create(null)},e.ComponentManager.prototype.addComponent=function(t,n){var r=t.component.id;if(!n&&this.componentData_[r])throw Error('Plugin "'+r+'" with capabilities "'+this.componentData_[r].capabilities+'" already added.');this.componentData_[r]=t,n=[];for(var s=0;s<t.capabilities.length;s++){var u=String(t.capabilities[s]).toLowerCase();n.push(u),void 0===this.capabilityToComponentIds_[u]?this.capabilityToComponentIds_[u]=[r]:this.capabilityToComponentIds_[u].push(r)}this.componentData_[r].capabilities=n},e.ComponentManager.prototype.removeComponent=function(t){var n=this.componentData_[t];if(n){for(var r=0;r<n.capabilities.length;r++){var s=String(n.capabilities[r]).toLowerCase();this.capabilityToComponentIds_[s].splice(this.capabilityToComponentIds_[s].indexOf(t),1)}delete this.componentData_[t]}},e.ComponentManager.prototype.addCapability=function(t,n){if(!this.getComponent(t))throw Error('Cannot add capability, "'+n+'". Plugin "'+t+'" has not been added to the ComponentManager');this.hasCapability(t,n)?console.warn('Plugin "'+t+'already has capability "'+n+'"'):(n=String(n).toLowerCase(),this.componentData_[t].capabilities.push(n),this.capabilityToComponentIds_[n].push(t))},e.ComponentManager.prototype.removeCapability=function(t,n){if(!this.getComponent(t))throw Error('Cannot remove capability, "'+n+'". Plugin "'+t+'" has not been added to the ComponentManager');this.hasCapability(t,n)?(n=String(n).toLowerCase(),this.componentData_[t].capabilities.splice(this.componentData_[t].capabilities.indexOf(n),1),this.capabilityToComponentIds_[n].splice(this.capabilityToComponentIds_[n].indexOf(t),1)):console.warn('Plugin "'+t+"doesn't have capability \""+n+'" to remove')},e.ComponentManager.prototype.hasCapability=function(t,n){return n=String(n).toLowerCase(),-1!==this.componentData_[t].capabilities.indexOf(n)},e.ComponentManager.prototype.getComponent=function(t){return this.componentData_[t]&&this.componentData_[t].component},e.ComponentManager.prototype.getComponents=function(t,n){if(t=String(t).toLowerCase(),!(t=this.capabilityToComponentIds_[t]))return[];var r=[];if(n){var s=[],u=this.componentData_;t.forEach(function(y){s.push(u[y])}),s.sort(function(y,x){return y.weight-x.weight}),s.forEach(function(y){r.push(y.component)})}else u=this.componentData_,t.forEach(function(y){r.push(u[y].component)});return r},e.ComponentManager.Capability=function(t){this.name_=t},e.ComponentManager.Capability.prototype.toString=function(){return this.name_},e.ComponentManager.Capability.POSITIONABLE=new e.ComponentManager.Capability("positionable"),e.ComponentManager.Capability.DRAG_TARGET=new e.ComponentManager.Capability("drag_target"),e.ComponentManager.Capability.DELETE_AREA=new e.ComponentManager.Capability("delete_area"),e.ComponentManager.Capability.AUTOHIDEABLE=new e.ComponentManager.Capability("autohideable"),e.utils.Svg=function(t){this.tagName_=t},e.utils.Svg.prototype.toString=function(){return this.tagName_},e.utils.Svg.ANIMATE=new e.utils.Svg("animate"),e.utils.Svg.CIRCLE=new e.utils.Svg("circle"),e.utils.Svg.CLIPPATH=new e.utils.Svg("clipPath"),e.utils.Svg.DEFS=new e.utils.Svg("defs"),e.utils.Svg.FECOMPOSITE=new e.utils.Svg("feComposite"),e.utils.Svg.FECOMPONENTTRANSFER=new e.utils.Svg("feComponentTransfer"),e.utils.Svg.FEFLOOD=new e.utils.Svg("feFlood"),e.utils.Svg.FEFUNCA=new e.utils.Svg("feFuncA"),e.utils.Svg.FEGAUSSIANBLUR=new e.utils.Svg("feGaussianBlur"),e.utils.Svg.FEPOINTLIGHT=new e.utils.Svg("fePointLight"),e.utils.Svg.FESPECULARLIGHTING=new e.utils.Svg("feSpecularLighting"),e.utils.Svg.FILTER=new e.utils.Svg("filter"),e.utils.Svg.FOREIGNOBJECT=new e.utils.Svg("foreignObject"),e.utils.Svg.G=new e.utils.Svg("g"),e.utils.Svg.IMAGE=new e.utils.Svg("image"),e.utils.Svg.LINE=new e.utils.Svg("line"),e.utils.Svg.PATH=new e.utils.Svg("path"),e.utils.Svg.PATTERN=new e.utils.Svg("pattern"),e.utils.Svg.POLYGON=new e.utils.Svg("polygon"),e.utils.Svg.RECT=new e.utils.Svg("rect"),e.utils.Svg.SVG=new e.utils.Svg("svg"),e.utils.Svg.TEXT=new e.utils.Svg("text"),e.utils.Svg.TSPAN=new e.utils.Svg("tspan"),e.utils.dom={},e.utils.dom.SVG_NS="http://www.w3.org/2000/svg",e.utils.dom.HTML_NS="http://www.w3.org/1999/xhtml",e.utils.dom.XLINK_NS="http://www.w3.org/1999/xlink",e.utils.dom.NodeType={ELEMENT_NODE:1,TEXT_NODE:3,COMMENT_NODE:8,DOCUMENT_POSITION_CONTAINED_BY:16},e.utils.dom.cacheWidths_=null,e.utils.dom.cacheReference_=0,e.utils.dom.canvasContext_=null,e.utils.dom.createSvgElement=function(t,n,r){for(var s in t=document.createElementNS(e.utils.dom.SVG_NS,String(t)),n)t.setAttribute(s,n[s]);return document.body.runtimeStyle&&(t.runtimeStyle=t.currentStyle=t.style),r&&r.appendChild(t),t},e.utils.dom.addClass=function(t,n){var r=t.getAttribute("class")||"";return-1==(" "+r+" ").indexOf(" "+n+" ")&&(r&&(r+=" "),t.setAttribute("class",r+n),!0)},e.utils.dom.removeClasses=function(t,n){n=n.split(" ");for(var r=0;r<n.length;r++)e.utils.dom.removeClass(t,n[r])},e.utils.dom.removeClass=function(t,n){var r=t.getAttribute("class");if(-1==(" "+r+" ").indexOf(" "+n+" "))return!1;r=r.split(/\s+/);for(var s=0;s<r.length;s++)r[s]&&r[s]!=n||(r.splice(s,1),s--);return r.length?t.setAttribute("class",r.join(" ")):t.removeAttribute("class"),!0},e.utils.dom.hasClass=function(t,n){return-1!=(" "+t.getAttribute("class")+" ").indexOf(" "+n+" ")},e.utils.dom.removeNode=function(t){return t&&t.parentNode?t.parentNode.removeChild(t):null},e.utils.dom.insertAfter=function(t,n){var r=n.nextSibling;if(!(n=n.parentNode))throw Error("Reference node has no parent.");r?n.insertBefore(t,r):n.appendChild(t)},e.utils.dom.containsNode=function(t,n){return!!(t.compareDocumentPosition(n)&e.utils.dom.NodeType.DOCUMENT_POSITION_CONTAINED_BY)},e.utils.dom.setCssTransform=function(t,n){t.style.transform=n,t.style["-webkit-transform"]=n},e.utils.dom.startTextWidthCache=function(){e.utils.dom.cacheReference_++,e.utils.dom.cacheWidths_||(e.utils.dom.cacheWidths_=Object.create(null))},e.utils.dom.stopTextWidthCache=function(){e.utils.dom.cacheReference_--,e.utils.dom.cacheReference_||(e.utils.dom.cacheWidths_=null)},e.utils.dom.getTextWidth=function(t){var r,n=t.textContent+"\n"+t.className.baseVal;if(e.utils.dom.cacheWidths_&&(r=e.utils.dom.cacheWidths_[n]))return r;try{r=e.utils.userAgent.IE||e.utils.userAgent.EDGE?t.getBBox().width:t.getComputedTextLength()}catch(s){return 8*t.textContent.length}return e.utils.dom.cacheWidths_&&(e.utils.dom.cacheWidths_[n]=r),r},e.utils.dom.getFastTextWidth=function(t,n,r,s){return e.utils.dom.getFastTextWidthWithSizeString(t,n+"pt",r,s)},e.utils.dom.getFastTextWidthWithSizeString=function(t,n,r,s){var y,u=t.textContent;return t=u+"\n"+t.className.baseVal,e.utils.dom.cacheWidths_&&(y=e.utils.dom.cacheWidths_[t])||(e.utils.dom.canvasContext_||((y=document.createElement("canvas")).className="blocklyComputeCanvas",document.body.appendChild(y),e.utils.dom.canvasContext_=y.getContext("2d")),e.utils.dom.canvasContext_.font=r+" "+n+" "+s,y=e.utils.dom.canvasContext_.measureText(u).width,e.utils.dom.cacheWidths_&&(e.utils.dom.cacheWidths_[t]=y)),y},e.utils.dom.measureFontMetrics=function(t,n,r,s){var u=document.createElement("span");u.style.font=r+" "+n+" "+s,u.textContent=t,(t=document.createElement("div")).style.width="1px",t.style.height="0px",(n=document.createElement("div")).setAttribute("style","position: fixed; top: 0; left: 0; display: flex;"),n.appendChild(u),n.appendChild(t),document.body.appendChild(n);try{r={},n.style.alignItems="baseline",r.baseline=t.offsetTop-u.offsetTop,n.style.alignItems="flex-end",r.height=t.offsetTop-u.offsetTop}finally{document.body.removeChild(n)}return r},e.utils.math={},e.utils.math.toRadians=function(t){return t*Math.PI/180},e.utils.math.toDegrees=function(t){return 180*t/Math.PI},e.utils.math.clamp=function(t,n,r){if(r<t){var s=r;r=t,t=s}return Math.max(t,Math.min(n,r))},e.DropDownDiv=function(){},e.DropDownDiv.boundsElement_=null,e.DropDownDiv.owner_=null,e.DropDownDiv.positionToField_=null,e.DropDownDiv.ARROW_SIZE=16,e.DropDownDiv.BORDER_SIZE=1,e.DropDownDiv.ARROW_HORIZONTAL_PADDING=12,e.DropDownDiv.PADDING_Y=16,e.DropDownDiv.ANIMATION_TIME=.25,e.DropDownDiv.animateOutTimer_=null,e.DropDownDiv.onHide_=null,e.DropDownDiv.rendererClassName_="",e.DropDownDiv.themeClassName_="",e.DropDownDiv.createDom=function(){if(!e.DropDownDiv.DIV_){var t=document.createElement("div");t.className="blocklyDropDownDiv",(e.parentContainer||document.body).appendChild(t),e.DropDownDiv.DIV_=t;var n=document.createElement("div");n.className="blocklyDropDownContent",t.appendChild(n),e.DropDownDiv.content_=n,(n=document.createElement("div")).className="blocklyDropDownArrow",t.appendChild(n),e.DropDownDiv.arrow_=n,e.DropDownDiv.DIV_.style.opacity=0,e.DropDownDiv.DIV_.style.transition="transform "+e.DropDownDiv.ANIMATION_TIME+"s, opacity "+e.DropDownDiv.ANIMATION_TIME+"s",t.addEventListener("focusin",function(){e.utils.dom.addClass(t,"blocklyFocused")}),t.addEventListener("focusout",function(){e.utils.dom.removeClass(t,"blocklyFocused")})}},e.DropDownDiv.setBoundsElement=function(t){e.DropDownDiv.boundsElement_=t},e.DropDownDiv.getContentDiv=function(){return e.DropDownDiv.content_},e.DropDownDiv.clearContent=function(){e.DropDownDiv.content_.textContent="",e.DropDownDiv.content_.style.width=""},e.DropDownDiv.setColour=function(t,n){e.DropDownDiv.DIV_.style.backgroundColor=t,e.DropDownDiv.DIV_.style.borderColor=n},e.DropDownDiv.showPositionedByBlock=function(t,n,r,s){return e.DropDownDiv.showPositionedByRect_(e.DropDownDiv.getScaledBboxOfBlock_(n),t,r,s)},e.DropDownDiv.showPositionedByField=function(t,n,r){return e.DropDownDiv.positionToField_=!0,e.DropDownDiv.showPositionedByRect_(e.DropDownDiv.getScaledBboxOfField_(t),t,n,r)},e.DropDownDiv.getScaledBboxOfBlock_=function(t){var n=t.getSvgRoot(),r=n.getBBox(),s=t.workspace.scale;return t=r.height*s,r=r.width*s,n=e.utils.style.getPageOffset(n),new e.utils.Rect(n.y,n.y+t,n.x,n.x+r)},e.DropDownDiv.getScaledBboxOfField_=function(t){return t=t.getScaledBBox(),new e.utils.Rect(t.top,t.bottom,t.left,t.right)},e.DropDownDiv.showPositionedByRect_=function(t,n,r,s){var u=t.left+(t.right-t.left)/2,y=t.bottom;t=t.top,s&&(t+=s);for(var x=(s=n.getSourceBlock()).workspace;x.options.parentWorkspace;)x=x.options.parentWorkspace;return e.DropDownDiv.setBoundsElement(x.getParentSvg().parentNode),e.DropDownDiv.show(n,s.RTL,u,y,u,t,r)},e.DropDownDiv.show=function(t,n,r,s,u,y,x){return e.DropDownDiv.owner_=t,e.DropDownDiv.onHide_=x||null,(t=e.DropDownDiv.DIV_).style.direction=n?"rtl":"ltr",n=e.getMainWorkspace(),e.DropDownDiv.rendererClassName_=n.getRenderer().getClassName(),e.DropDownDiv.themeClassName_=n.getTheme().getClassName(),e.utils.dom.addClass(t,e.DropDownDiv.rendererClassName_),e.utils.dom.addClass(t,e.DropDownDiv.themeClassName_),e.DropDownDiv.positionInternal_(r,s,u,y)},e.DropDownDiv.getBoundsInfo_=function(){var t=e.utils.style.getPageOffset(e.DropDownDiv.boundsElement_),n=e.utils.style.getSize(e.DropDownDiv.boundsElement_);return{left:t.x,right:t.x+n.width,top:t.y,bottom:t.y+n.height,width:n.width,height:n.height}},e.DropDownDiv.getPositionMetrics_=function(t,n,r,s){var u=e.DropDownDiv.getBoundsInfo_(),y=e.utils.style.getSize(e.DropDownDiv.DIV_);return n+y.height<u.bottom?e.DropDownDiv.getPositionBelowMetrics_(t,n,u,y):s-y.height>u.top?e.DropDownDiv.getPositionAboveMetrics_(r,s,u,y):n+y.height<document.documentElement.clientHeight?e.DropDownDiv.getPositionBelowMetrics_(t,n,u,y):s-y.height>document.documentElement.clientTop?e.DropDownDiv.getPositionAboveMetrics_(r,s,u,y):e.DropDownDiv.getPositionTopOfPageMetrics_(t,u,y)},e.DropDownDiv.getPositionBelowMetrics_=function(t,n,r,s){return{initialX:(t=e.DropDownDiv.getPositionX(t,r.left,r.right,s.width)).divX,initialY:n,finalX:t.divX,finalY:n+e.DropDownDiv.PADDING_Y,arrowX:t.arrowX,arrowY:-(e.DropDownDiv.ARROW_SIZE/2+e.DropDownDiv.BORDER_SIZE),arrowAtTop:!0,arrowVisible:!0}},e.DropDownDiv.getPositionAboveMetrics_=function(t,n,r,s){return{initialX:(t=e.DropDownDiv.getPositionX(t,r.left,r.right,s.width)).divX,initialY:n-s.height,finalX:t.divX,finalY:n-s.height-e.DropDownDiv.PADDING_Y,arrowX:t.arrowX,arrowY:s.height-2*e.DropDownDiv.BORDER_SIZE-e.DropDownDiv.ARROW_SIZE/2,arrowAtTop:!1,arrowVisible:!0}},e.DropDownDiv.getPositionTopOfPageMetrics_=function(t,n,r){return{initialX:(t=e.DropDownDiv.getPositionX(t,n.left,n.right,r.width)).divX,initialY:0,finalX:t.divX,finalY:0,arrowAtTop:null,arrowX:null,arrowY:null,arrowVisible:!1}},e.DropDownDiv.getPositionX=function(t,n,r,s){var u=t;return t=e.utils.math.clamp(n,t-s/2,r-s),{arrowX:s=e.utils.math.clamp(n=e.DropDownDiv.ARROW_HORIZONTAL_PADDING,(u-=e.DropDownDiv.ARROW_SIZE/2)-t,s-n-e.DropDownDiv.ARROW_SIZE),divX:t}},e.DropDownDiv.isVisible=function(){return!!e.DropDownDiv.owner_},e.DropDownDiv.hideIfOwner=function(t,n){return e.DropDownDiv.owner_===t&&(n?e.DropDownDiv.hideWithoutAnimation():e.DropDownDiv.hide(),!0)},e.DropDownDiv.hide=function(){var t=e.DropDownDiv.DIV_;t.style.transform="translate(0, 0)",t.style.opacity=0,e.DropDownDiv.animateOutTimer_=setTimeout(function(){e.DropDownDiv.hideWithoutAnimation()},1e3*e.DropDownDiv.ANIMATION_TIME),e.DropDownDiv.onHide_&&(e.DropDownDiv.onHide_(),e.DropDownDiv.onHide_=null)},e.DropDownDiv.hideWithoutAnimation=function(){if(e.DropDownDiv.isVisible()){e.DropDownDiv.animateOutTimer_&&clearTimeout(e.DropDownDiv.animateOutTimer_);var t=e.DropDownDiv.DIV_;t.style.transform="",t.style.left="",t.style.top="",t.style.opacity=0,t.style.display="none",t.style.backgroundColor="",t.style.borderColor="",e.DropDownDiv.onHide_&&(e.DropDownDiv.onHide_(),e.DropDownDiv.onHide_=null),e.DropDownDiv.clearContent(),e.DropDownDiv.owner_=null,e.DropDownDiv.rendererClassName_&&(e.utils.dom.removeClass(t,e.DropDownDiv.rendererClassName_),e.DropDownDiv.rendererClassName_=""),e.DropDownDiv.themeClassName_&&(e.utils.dom.removeClass(t,e.DropDownDiv.themeClassName_),e.DropDownDiv.themeClassName_=""),e.getMainWorkspace().markFocused()}},e.DropDownDiv.positionInternal_=function(t,n,r,s){(t=e.DropDownDiv.getPositionMetrics_(t,n,r,s)).arrowVisible?(e.DropDownDiv.arrow_.style.display="",e.DropDownDiv.arrow_.style.transform="translate("+t.arrowX+"px,"+t.arrowY+"px) rotate(45deg)",e.DropDownDiv.arrow_.setAttribute("class",t.arrowAtTop?"blocklyDropDownArrow blocklyArrowTop":"blocklyDropDownArrow blocklyArrowBottom")):e.DropDownDiv.arrow_.style.display="none",n=Math.floor(t.initialX),r=Math.floor(t.initialY),s=Math.floor(t.finalX);var u=Math.floor(t.finalY),y=e.DropDownDiv.DIV_;return y.style.left=n+"px",y.style.top=r+"px",y.style.display="block",y.style.opacity=1,y.style.transform="translate("+(s-n)+"px,"+(u-r)+"px)",!!t.arrowAtTop},e.DropDownDiv.repositionForWindowResize=function(){if(e.DropDownDiv.owner_){var t=e.DropDownDiv.owner_,n=t.getSourceBlock();t=e.DropDownDiv.positionToField_?e.DropDownDiv.getScaledBboxOfField_(t):e.DropDownDiv.getScaledBboxOfBlock_(n),e.DropDownDiv.positionInternal_(n=t.left+(t.right-t.left)/2,t.bottom,n,t.top)}else e.DropDownDiv.hide()},e.registry={},e.registry.typeMap_=Object.create(null),e.registry.DEFAULT="default",e.registry.Type=function(t){this.name_=t},e.registry.Type.prototype.toString=function(){return this.name_},e.registry.Type.CONNECTION_CHECKER=new e.registry.Type("connectionChecker"),e.registry.Type.CURSOR=new e.registry.Type("cursor"),e.registry.Type.EVENT=new e.registry.Type("event"),e.registry.Type.FIELD=new e.registry.Type("field"),e.registry.Type.RENDERER=new e.registry.Type("renderer"),e.registry.Type.TOOLBOX=new e.registry.Type("toolbox"),e.registry.Type.THEME=new e.registry.Type("theme"),e.registry.Type.TOOLBOX_ITEM=new e.registry.Type("toolboxItem"),e.registry.Type.FLYOUTS_VERTICAL_TOOLBOX=new e.registry.Type("flyoutsVerticalToolbox"),e.registry.Type.FLYOUTS_HORIZONTAL_TOOLBOX=new e.registry.Type("flyoutsHorizontalToolbox"),e.registry.Type.METRICS_MANAGER=new e.registry.Type("metricsManager"),e.registry.Type.BLOCK_DRAGGER=new e.registry.Type("blockDragger"),e.registry.register=function(t,n,r,s){if(!(t instanceof e.registry.Type)&&"string"!=typeof t||""==String(t).trim())throw Error('Invalid type "'+t+'". The type must be a non-empty string or a Blockly.registry.Type.');if(t=String(t).toLowerCase(),"string"!=typeof n||""==n.trim())throw Error('Invalid name "'+n+'". The name must be a non-empty string.');if(n=n.toLowerCase(),!r)throw Error("Can not register a null value");var u=e.registry.typeMap_[t];if(u||(u=e.registry.typeMap_[t]=Object.create(null)),e.registry.validate_(t,r),!s&&u[n])throw Error('Name "'+n+'" with type "'+t+'" already registered.');u[n]=r},e.registry.validate_=function(t,n){if(t===String(e.registry.Type.FIELD)&&"function"!=typeof n.fromJson)throw Error('Type "'+t+'" must have a fromJson function')},e.registry.unregister=function(t,n){t=String(t).toLowerCase(),n=n.toLowerCase();var r=e.registry.typeMap_[t];r&&r[n]?delete e.registry.typeMap_[t][n]:console.warn("Unable to unregister ["+n+"]["+t+"] from the registry.")},e.registry.getItem_=function(t,n,r){t=String(t).toLowerCase(),n=n.toLowerCase();var s=e.registry.typeMap_[t];if(!s||!s[n]){if(n="Unable to find ["+n+"]["+t+"] in the registry.",r)throw Error(n+" You must require or register a "+t+" plugin.");return console.warn(n),null}return s[n]},e.registry.hasItem=function(t,n){return t=String(t).toLowerCase(),n=n.toLowerCase(),!!(t=e.registry.typeMap_[t])&&!!t[n]},e.registry.getClass=function(t,n,r){return e.registry.getItem_(t,n,r)},e.registry.getObject=function(t,n,r){return e.registry.getItem_(t,n,r)},e.registry.getClassFromOptions=function(t,n,r){return"function"==typeof(n=n.plugins[t.toString()]||e.registry.DEFAULT)?n:e.registry.getClass(t,n,r)},e.Events={},e.Events.group_="",e.Events.recordUndo=!0,e.Events.disabled_=0,e.Events.CREATE="create",e.Events.BLOCK_CREATE=e.Events.CREATE,e.Events.DELETE="delete",e.Events.BLOCK_DELETE=e.Events.DELETE,e.Events.CHANGE="change",e.Events.BLOCK_CHANGE=e.Events.CHANGE,e.Events.MOVE="move",e.Events.BLOCK_MOVE=e.Events.MOVE,e.Events.VAR_CREATE="var_create",e.Events.VAR_DELETE="var_delete",e.Events.VAR_RENAME="var_rename",e.Events.UI="ui",e.Events.BLOCK_DRAG="drag",e.Events.SELECTED="selected",e.Events.CLICK="click",e.Events.MARKER_MOVE="marker_move",e.Events.BUBBLE_OPEN="bubble_open",e.Events.TRASHCAN_OPEN="trashcan_open",e.Events.TOOLBOX_ITEM_SELECT="toolbox_item_select",e.Events.THEME_CHANGE="theme_change",e.Events.VIEWPORT_CHANGE="viewport_change",e.Events.COMMENT_CREATE="comment_create",e.Events.COMMENT_DELETE="comment_delete",e.Events.COMMENT_CHANGE="comment_change",e.Events.COMMENT_MOVE="comment_move",e.Events.FINISHED_LOADING="finished_loading",e.Events.BUMP_EVENTS=[e.Events.BLOCK_CREATE,e.Events.BLOCK_MOVE,e.Events.COMMENT_CREATE,e.Events.COMMENT_MOVE],e.Events.FIRE_QUEUE_=[],e.Events.fire=function(t){e.Events.isEnabled()&&(e.Events.FIRE_QUEUE_.length||setTimeout(e.Events.fireNow_,0),e.Events.FIRE_QUEUE_.push(t))},e.Events.fireNow_=function(){for(var r,t=e.Events.filter(e.Events.FIRE_QUEUE_,!0),n=e.Events.FIRE_QUEUE_.length=0;r=t[n];n++)if(r.workspaceId){var s=e.Workspace.getById(r.workspaceId);s&&s.fireChangeListener(r)}},e.Events.filter=function(t,n){t=t.slice(),n||t.reverse();for(var y,r=[],s=Object.create(null),u=0;y=t[u];u++)if(!y.isNull()){var x=[y.isUiEvent?e.Events.UI:y.type,y.blockId,y.workspaceId].join(" "),B=s[x],Q=B?B.event:null;B?y.type==e.Events.MOVE&&B.index==u-1?(Q.newParentId=y.newParentId,Q.newInputName=y.newInputName,Q.newCoordinate=y.newCoordinate,B.index=u):y.type==e.Events.CHANGE&&y.element==Q.element&&y.name==Q.name?Q.newValue=y.newValue:y.type==e.Events.VIEWPORT_CHANGE?(Q.viewTop=y.viewTop,Q.viewLeft=y.viewLeft,Q.scale=y.scale,Q.oldScale=y.oldScale):(y.type!=e.Events.CLICK||Q.type!=e.Events.BUBBLE_OPEN)&&(s[x]={event:y,index:u},r.push(y)):(s[x]={event:y,index:u},r.push(y))}for(t=r.filter(function(at){return!at.isNull()}),n||t.reverse(),u=1;y=t[u];u++)y.type==e.Events.CHANGE&&"mutation"==y.element&&t.unshift(t.splice(u,1)[0]);return t},e.Events.clearPendingUndo=function(){for(var n,t=0;n=e.Events.FIRE_QUEUE_[t];t++)n.recordUndo=!1},e.Events.disable=function(){e.Events.disabled_++},e.Events.enable=function(){e.Events.disabled_--},e.Events.isEnabled=function(){return 0==e.Events.disabled_},e.Events.getGroup=function(){return e.Events.group_},e.Events.setGroup=function(t){e.Events.group_="boolean"==typeof t?t?e.utils.genUid():"":t},e.Events.getDescendantIds=function(t){var n=[];t=t.getDescendants(!1);for(var s,r=0;s=t[r];r++)n[r]=s.id;return n},e.Events.fromJson=function(t,n){var r=e.Events.get(t.type);if(!r)throw Error("Unknown event type.");return(r=new r).fromJson(t),r.workspaceId=n.id,r},e.Events.get=function(t){return e.registry.getClass(e.registry.Type.EVENT,t)},e.Events.disableOrphans=function(t){if((t.type==e.Events.MOVE||t.type==e.Events.CREATE)&&t.workspaceId){var n=e.Workspace.getById(t.workspaceId),r=n.getBlockById(t.blockId);if(r){t=e.Events.recordUndo;try{e.Events.recordUndo=!1;var s=r.getParent();if(s&&s.isEnabled()){var y,u=r.getDescendants(!1);for(n=0;y=u[n];n++)y.setEnabled(!0)}else if((r.outputConnection||r.previousConnection)&&!n.isDragging())do{r.setEnabled(!1),r=r.getNextBlock()}while(r)}finally{e.Events.recordUndo=t}}}},e.Events.Abstract=function(){this.isBlank=null,this.workspaceId=void 0,this.group=e.Events.getGroup(),this.recordUndo=e.Events.recordUndo},e.Events.Abstract.prototype.isUiEvent=!1,e.Events.Abstract.prototype.toJson=function(){var t={type:this.type};return this.group&&(t.group=this.group),t},e.Events.Abstract.prototype.fromJson=function(t){this.isBlank=!1,this.group=t.group},e.Events.Abstract.prototype.isNull=function(){return!1},e.Events.Abstract.prototype.run=function(t){},e.Events.Abstract.prototype.getEventWorkspace_=function(){if(this.workspaceId)var t=e.Workspace.getById(this.workspaceId);if(!t)throw Error("Workspace is null. Event must have been generated from real Blockly events.");return t},e.utils.object={},e.utils.object.inherits=function(t,n){t.superClass_=n.prototype,t.prototype=Object.create(n.prototype),t.prototype.constructor=t},e.utils.object.mixin=function(t,n){for(var r in n)t[r]=n[r]},e.utils.object.deepMerge=function(t,n){for(var r in n)t[r]=null!=n[r]&&"object"==typeof n[r]?e.utils.object.deepMerge(t[r]||Object.create(null),n[r]):n[r];return t},e.utils.object.values=function(t){return Object.values?Object.values(t):Object.keys(t).map(function(n){return t[n]})},e.utils.xml={},e.utils.xml.NAME_SPACE="https://developers.google.com/blockly/xml",e.utils.xml.document=function(){return document},e.utils.xml.createElement=function(t){return e.utils.xml.document().createElementNS(e.utils.xml.NAME_SPACE,t)},e.utils.xml.createTextNode=function(t){return e.utils.xml.document().createTextNode(t)},e.utils.xml.textToDomDocument=function(t){return(new DOMParser).parseFromString(t,"text/xml")},e.utils.xml.domToText=function(t){return(new XMLSerializer).serializeToString(t)},e.inputTypes={VALUE:e.connectionTypes.INPUT_VALUE,STATEMENT:e.connectionTypes.NEXT_STATEMENT,DUMMY:5},e.Xml={},e.Xml.workspaceToDom=function(t,n){var r=e.utils.xml.createElement("xml"),s=e.Xml.variablesToDom(e.Variables.allUsedVarModels(t));s.hasChildNodes()&&r.appendChild(s);var y,u=t.getTopComments(!0);for(s=0;y=u[s];s++)r.appendChild(y.toXmlWithXY(n));for(t=t.getTopBlocks(!0),s=0;u=t[s];s++)r.appendChild(e.Xml.blockToDomWithXY(u,n));return r},e.Xml.variablesToDom=function(t){for(var s,n=e.utils.xml.createElement("variables"),r=0;s=t[r];r++){var u=e.utils.xml.createElement("variable");u.appendChild(e.utils.xml.createTextNode(s.name)),s.type&&u.setAttribute("type",s.type),u.id=s.getId(),n.appendChild(u)}return n},e.Xml.blockToDomWithXY=function(t,n){if(t.isInsertionMarker()&&!(t=t.getChildren(!1)[0]))return new DocumentFragment;var r;t.workspace.RTL&&(r=t.workspace.getWidth()),n=e.Xml.blockToDom(t,n);var s=t.getRelativeToSurfaceXY();return n.setAttribute("x",Math.round(t.workspace.RTL?r-s.x:s.x)),n.setAttribute("y",Math.round(s.y)),n},e.Xml.fieldToDom_=function(t){if(t.isSerializable()){var n=e.utils.xml.createElement("field");return n.setAttribute("name",t.name||""),t.toXml(n)}return null},e.Xml.allFieldsToDom_=function(t,n){for(var s,r=0;s=t.inputList[r];r++)for(var y,u=0;y=s.fieldRow[u];u++)(y=e.Xml.fieldToDom_(y))&&n.appendChild(y)},e.Xml.blockToDom=function(t,n){if(t.isInsertionMarker())return(t=t.getChildren(!1)[0])?e.Xml.blockToDom(t):new DocumentFragment;var r=e.utils.xml.createElement(t.isShadow()?"shadow":"block");if(r.setAttribute("type",t.type),n||r.setAttribute("id",t.id),t.mutationToDom){var s=t.mutationToDom();s&&(s.hasChildNodes()||s.hasAttributes())&&r.appendChild(s)}if(e.Xml.allFieldsToDom_(t,r),s=t.getCommentText()){var u=t.commentModel.size,y=t.commentModel.pinned,x=e.utils.xml.createElement("comment");x.appendChild(e.utils.xml.createTextNode(s)),x.setAttribute("pinned",y),x.setAttribute("h",u.height),x.setAttribute("w",u.width),r.appendChild(x)}for(t.data&&((s=e.utils.xml.createElement("data")).appendChild(e.utils.xml.createTextNode(t.data)),r.appendChild(s)),s=0;u=t.inputList[s];s++){var B;if(y=!0,u.type!=e.inputTypes.DUMMY){var Q=u.connection.targetBlock();u.type==e.inputTypes.VALUE?B=e.utils.xml.createElement("value"):u.type==e.inputTypes.STATEMENT&&(B=e.utils.xml.createElement("statement")),!(x=u.connection.getShadowDom())||Q&&Q.isShadow()||B.appendChild(e.Xml.cloneShadow_(x,n)),Q&&(x=e.Xml.blockToDom(Q,n)).nodeType==e.utils.dom.NodeType.ELEMENT_NODE&&(B.appendChild(x),y=!1),B.setAttribute("name",u.name),y||r.appendChild(B)}}return null!=t.inputsInline&&t.inputsInline!=t.inputsInlineDefault&&r.setAttribute("inline",t.inputsInline),t.isCollapsed()&&r.setAttribute("collapsed",!0),t.isEnabled()||r.setAttribute("disabled",!0),t.isDeletable()||t.isShadow()||r.setAttribute("deletable",!1),t.isMovable()||t.isShadow()||r.setAttribute("movable",!1),t.isEditable()||r.setAttribute("editable",!1),(s=t.getNextBlock())&&(x=e.Xml.blockToDom(s,n)).nodeType==e.utils.dom.NodeType.ELEMENT_NODE&&((B=e.utils.xml.createElement("next")).appendChild(x),r.appendChild(B)),!(x=t.nextConnection&&t.nextConnection.getShadowDom())||s&&s.isShadow()||B.appendChild(e.Xml.cloneShadow_(x,n)),r},e.Xml.cloneShadow_=function(t,n){for(var s,r=t=t.cloneNode(!0);r;)if(n&&"shadow"==r.nodeName&&r.removeAttribute("id"),r.firstChild)r=r.firstChild;else{for(;r&&!r.nextSibling;)s=r,r=r.parentNode,s.nodeType==e.utils.dom.NodeType.TEXT_NODE&&""==s.data.trim()&&r.firstChild!=s&&e.utils.dom.removeNode(s);r&&(s=r,r=r.nextSibling,s.nodeType==e.utils.dom.NodeType.TEXT_NODE&&""==s.data.trim()&&e.utils.dom.removeNode(s))}return t},e.Xml.domToText=function(t){return e.utils.xml.domToText(t).replace(/<(\w+)([^<]*)\/>/g,"<$1$2></$1>")},e.Xml.domToPrettyText=function(t){t=e.Xml.domToText(t).split("<");for(var n="",r=1;r<t.length;r++){var s=t[r];"/"==s[0]&&(n=n.substring(2)),t[r]=n+"<"+s,"/"!=s[0]&&"/>"!=s.slice(-2)&&(n+="  ")}return(t=(t=t.join("\n")).replace(/(<(\w+)\b[^>]*>[^\n]*)\n *<\/\2>/g,"$1</$2>")).replace(/^\n/,"")},e.Xml.textToDom=function(t){var n=e.utils.xml.textToDomDocument(t);if(!n||!n.documentElement||n.getElementsByTagName("parsererror").length)throw Error("textToDom was unable to parse: "+t);return n.documentElement},e.Xml.clearWorkspaceAndLoadFromXml=function(t,n){return n.setResizesEnabled(!1),n.clear(),t=e.Xml.domToWorkspace(t,n),n.setResizesEnabled(!0),t},e.Xml.domToWorkspace=function(t,n){if(t instanceof e.Workspace){var r=t;t=n,n=r,console.warn("Deprecated call to Blockly.Xml.domToWorkspace, swap the arguments.")}var s;n.RTL&&(s=n.getWidth()),r=[],e.utils.dom.startTextWidthCache();var u=e.Events.getGroup();u||e.Events.setGroup(!0),n.setResizesEnabled&&n.setResizesEnabled(!1);var y=!0;try{for(var B,x=0;B=t.childNodes[x];x++){var Q=B.nodeName.toLowerCase(),at=B;if("block"==Q||"shadow"==Q&&!e.Events.recordUndo){var rt=e.Xml.domToBlock(at,n);r.push(rt.id);var St=at.hasAttribute("x")?parseInt(at.getAttribute("x"),10):10,Ht=at.hasAttribute("y")?parseInt(at.getAttribute("y"),10):10;isNaN(St)||isNaN(Ht)||rt.moveBy(n.RTL?s-St:St,Ht),y=!1}else{if("shadow"==Q)throw TypeError("Shadow block cannot be a top-level block.");if("comment"==Q)n.rendered?e.WorkspaceCommentSvg?e.WorkspaceCommentSvg.fromXml(at,n,s):console.warn("Missing require for Blockly.WorkspaceCommentSvg, ignoring workspace comment."):e.WorkspaceComment?e.WorkspaceComment.fromXml(at,n):console.warn("Missing require for Blockly.WorkspaceComment, ignoring workspace comment.");else if("variables"==Q){if(!y)throw Error("'variables' tag must exist once before block and shadow tag elements in the workspace XML, but it was found in another location.");e.Xml.domToVariables(at,n),y=!1}}}}finally{u||e.Events.setGroup(!1),e.utils.dom.stopTextWidthCache()}return n.setResizesEnabled&&n.setResizesEnabled(!0),e.Events.fire(new(e.Events.get(e.Events.FINISHED_LOADING))(n)),r},e.Xml.appendDomToWorkspace=function(t,n){var r;if(Object.prototype.hasOwnProperty.call(n,"scale")&&(r=n.getBlocksBoundingBox()),t=e.Xml.domToWorkspace(t,n),r&&r.top!=r.bottom){var s=r.bottom,u=n.RTL?r.right:r.left,y=1/0,x=-1/0,B=1/0;for(r=0;r<t.length;r++){var Q=n.getBlockById(t[r]).getRelativeToSurfaceXY();Q.y<B&&(B=Q.y),Q.x<y&&(y=Q.x),Q.x>x&&(x=Q.x)}for(s=s-B+10,u=n.RTL?u-x:u-y,r=0;r<t.length;r++)n.getBlockById(t[r]).moveBy(u,s)}return t},e.Xml.domToBlock=function(t,n){if(t instanceof e.Workspace){var r=t;t=n,n=r,console.warn("Deprecated call to Blockly.Xml.domToBlock, swap the arguments.")}e.Events.disable(),r=n.getAllVariables();try{var s=e.Xml.domToBlockHeadless_(t,n),u=s.getDescendants(!1);if(n.rendered){s.setConnectionTracking(!1);for(var y=u.length-1;0<=y;y--)u[y].initSvg();for(y=u.length-1;0<=y;y--)u[y].render(!1);setTimeout(function(){s.disposed||s.setConnectionTracking(!0)},1),s.updateDisabled(),n.resizeContents()}else for(y=u.length-1;0<=y;y--)u[y].initModel()}finally{e.Events.enable()}if(e.Events.isEnabled()){for(t=e.Variables.getAddedVariables(n,r),y=0;y<t.length;y++)n=t[y],e.Events.fire(new(e.Events.get(e.Events.VAR_CREATE))(n));e.Events.fire(new(e.Events.get(e.Events.CREATE))(s))}return s},e.Xml.domToVariables=function(t,n){for(var s,r=0;s=t.childNodes[r];r++)if(s.nodeType==e.utils.dom.NodeType.ELEMENT_NODE){var u=s.getAttribute("type"),y=s.getAttribute("id");n.createVariable(s.textContent,u,y)}},e.Xml.mapSupportedXmlTags_=function(t){for(var s,n={mutation:[],comment:[],data:[],field:[],input:[],next:[]},r=0;s=t.childNodes[r];r++)if(s.nodeType!=e.utils.dom.NodeType.TEXT_NODE)switch(s.nodeName.toLowerCase()){case"mutation":n.mutation.push(s);break;case"comment":if(!e.Comment){console.warn("Missing require for Blockly.Comment, ignoring block comment.");break}n.comment.push(s);break;case"data":n.data.push(s);break;case"title":case"field":n.field.push(s);break;case"value":case"statement":n.input.push(s);break;case"next":n.next.push(s);break;default:console.warn("Ignoring unknown tag: "+s.nodeName)}return n},e.Xml.applyMutationTagNodes_=function(t,n){for(var u,r=!1,s=0;u=t[s];s++)n.domToMutation&&(n.domToMutation(u),n.initSvg&&(r=!0));return r},e.Xml.applyCommentTagNodes_=function(t,n){for(var s,r=0;s=t[r];r++){var u=s.textContent,y="true"==s.getAttribute("pinned"),x=parseInt(s.getAttribute("w"),10);s=parseInt(s.getAttribute("h"),10),n.setCommentText(u),n.commentModel.pinned=y,isNaN(x)||isNaN(s)||(n.commentModel.size=new e.utils.Size(x,s)),y&&n.getCommentIcon&&!n.isInFlyout&&setTimeout(function(){n.getCommentIcon().setVisible(!0)},1)}},e.Xml.applyDataTagNodes_=function(t,n){for(var s,r=0;s=t[r];r++)n.data=s.textContent},e.Xml.applyFieldTagNodes_=function(t,n){for(var s,r=0;s=t[r];r++){var u=s.getAttribute("name");e.Xml.domToField_(n,u,s)}},e.Xml.findChildBlocks_=function(t){for(var s,n={childBlockElement:null,childShadowElement:null},r=0;s=t.childNodes[r];r++)s.nodeType==e.utils.dom.NodeType.ELEMENT_NODE&&("block"==s.nodeName.toLowerCase()?n.childBlockElement=s:"shadow"==s.nodeName.toLowerCase()&&(n.childShadowElement=s));return n},e.Xml.applyInputTagNodes_=function(t,n,r,s){for(var y,u=0;y=t[u];u++){var x=y.getAttribute("name"),B=r.getInput(x);if(!B){console.warn("Ignoring non-existent input "+x+" in block "+s);break}if((y=e.Xml.findChildBlocks_(y)).childBlockElement){if(!B.connection)throw TypeError("Input connection does not exist.");e.Xml.domToBlockHeadless_(y.childBlockElement,n,B.connection,!1)}y.childShadowElement&&B.connection.setShadowDom(y.childShadowElement)}},e.Xml.applyNextTagNodes_=function(t,n,r){for(var u,s=0;u=t[s];s++){if((u=e.Xml.findChildBlocks_(u)).childBlockElement){if(!r.nextConnection)throw TypeError("Next statement does not exist.");if(r.nextConnection.isConnected())throw TypeError("Next statement is already connected.");e.Xml.domToBlockHeadless_(u.childBlockElement,n,r.nextConnection,!0)}u.childShadowElement&&r.nextConnection&&r.nextConnection.setShadowDom(u.childShadowElement)}},e.Xml.domToBlockHeadless_=function(t,n,r,s){var u=t.getAttribute("type");if(!u)throw TypeError("Block type unspecified: "+t.outerHTML);var y=t.getAttribute("id");y=n.newBlock(u,y);var x=e.Xml.mapSupportedXmlTags_(t),B=e.Xml.applyMutationTagNodes_(x.mutation,y);if(e.Xml.applyCommentTagNodes_(x.comment,y),e.Xml.applyDataTagNodes_(x.data,y),r)if(s){if(!y.previousConnection)throw TypeError("Next block does not have previous statement.");r.connect(y.previousConnection)}else if(y.outputConnection)r.connect(y.outputConnection);else{if(!y.previousConnection)throw TypeError("Child block does not have output or previous statement.");r.connect(y.previousConnection)}if(e.Xml.applyFieldTagNodes_(x.field,y),e.Xml.applyInputTagNodes_(x.input,n,y,u),e.Xml.applyNextTagNodes_(x.next,n,y),B&&y.initSvg(),(n=t.getAttribute("inline"))&&y.setInputsInline("true"==n),(n=t.getAttribute("disabled"))&&y.setEnabled("true"!=n&&"disabled"!=n),(n=t.getAttribute("deletable"))&&y.setDeletable("true"==n),(n=t.getAttribute("movable"))&&y.setMovable("true"==n),(n=t.getAttribute("editable"))&&y.setEditable("true"==n),(n=t.getAttribute("collapsed"))&&y.setCollapsed("true"==n),"shadow"==t.nodeName.toLowerCase()){for(t=y.getChildren(!1),n=0;r=t[n];n++)if(!r.isShadow())throw TypeError("Shadow block not allowed non-shadow child.");if(y.getVarModels().length)throw TypeError("Shadow blocks cannot have variable references.");y.setShadow(!0)}return y},e.Xml.domToField_=function(t,n,r){var s=t.getField(n);s?s.fromXml(r):console.warn("Ignoring non-existent field "+n+" in block "+t.type)},e.Xml.deleteNext=function(t){for(var r,n=0;r=t.childNodes[n];n++)if("next"==r.nodeName.toLowerCase()){t.removeChild(r);break}},e.Events.BlockBase=function(t){e.Events.BlockBase.superClass_.constructor.call(this),this.blockId=(this.isBlank=void 0===t)?"":t.id,this.workspaceId=this.isBlank?"":t.workspace.id},e.utils.object.inherits(e.Events.BlockBase,e.Events.Abstract),e.Events.BlockBase.prototype.toJson=function(){var t=e.Events.BlockBase.superClass_.toJson.call(this);return t.blockId=this.blockId,t},e.Events.BlockBase.prototype.fromJson=function(t){e.Events.BlockBase.superClass_.fromJson.call(this,t),this.blockId=t.blockId},e.Events.BlockChange=function(t,n,r,s,u){e.Events.Change.superClass_.constructor.call(this,t),t&&(this.element=void 0===n?"":n,this.name=void 0===r?"":r,this.oldValue=void 0===s?"":s,this.newValue=void 0===u?"":u)},e.utils.object.inherits(e.Events.BlockChange,e.Events.BlockBase),e.Events.Change=e.Events.BlockChange,e.Events.BlockChange.prototype.type=e.Events.CHANGE,e.Events.BlockChange.prototype.toJson=function(){var t=e.Events.BlockChange.superClass_.toJson.call(this);return t.element=this.element,this.name&&(t.name=this.name),t.oldValue=this.oldValue,t.newValue=this.newValue,t},e.Events.BlockChange.prototype.fromJson=function(t){e.Events.BlockChange.superClass_.fromJson.call(this,t),this.element=t.element,this.name=t.name,this.oldValue=t.oldValue,this.newValue=t.newValue},e.Events.BlockChange.prototype.isNull=function(){return this.oldValue==this.newValue},e.Events.BlockChange.prototype.run=function(t){var n=this.getEventWorkspace_().getBlockById(this.blockId);if(n)switch(n.mutator&&n.mutator.setVisible(!1),t=t?this.newValue:this.oldValue,this.element){case"field":(n=n.getField(this.name))?n.setValue(t):console.warn("Can't set non-existent field: "+this.name);break;case"comment":n.setCommentText(t||null);break;case"collapsed":n.setCollapsed(!!t);break;case"disabled":n.setEnabled(!t);break;case"inline":n.setInputsInline(!!t);break;case"mutation":var r="";if(n.mutationToDom&&(r=(r=n.mutationToDom())&&e.Xml.domToText(r)),n.domToMutation){var s=e.Xml.textToDom(t||"<mutation/>");n.domToMutation(s)}e.Events.fire(new e.Events.BlockChange(n,"mutation",null,r,t));break;default:console.warn("Unknown change type: "+this.element)}else console.warn("Can't change non-existent block: "+this.blockId)},e.Events.Create=function(t){e.Events.Create.superClass_.constructor.call(this,t),t&&(t.isShadow()&&(this.recordUndo=!1),this.xml=t.workspace.rendered?e.Xml.blockToDomWithXY(t):e.Xml.blockToDom(t),this.ids=e.Events.getDescendantIds(t))},e.utils.object.inherits(e.Events.Create,e.Events.BlockBase),e.Events.BlockCreate=e.Events.Create,e.Events.Create.prototype.type=e.Events.CREATE,e.Events.Create.prototype.toJson=function(){var t=e.Events.Create.superClass_.toJson.call(this);return t.xml=e.Xml.domToText(this.xml),t.ids=this.ids,this.recordUndo||(t.recordUndo=this.recordUndo),t},e.Events.Create.prototype.fromJson=function(t){e.Events.Create.superClass_.fromJson.call(this,t),this.xml=e.Xml.textToDom(t.xml),this.ids=t.ids,void 0!==t.recordUndo&&(this.recordUndo=t.recordUndo)},e.Events.Create.prototype.run=function(t){var n=this.getEventWorkspace_();if(t)(t=e.utils.xml.createElement("xml")).appendChild(this.xml),e.Xml.domToWorkspace(t,n);else{t=0;for(var r;r=this.ids[t];t++){var s=n.getBlockById(r);s?s.dispose(!1):r==this.blockId&&console.warn("Can't uncreate non-existent block: "+r)}}},e.Events.Delete=function(t){if(e.Events.Delete.superClass_.constructor.call(this,t),t){if(t.getParent())throw Error("Connected blocks cannot be deleted.");t.isShadow()&&(this.recordUndo=!1),this.oldXml=t.workspace.rendered?e.Xml.blockToDomWithXY(t):e.Xml.blockToDom(t),this.ids=e.Events.getDescendantIds(t)}},e.utils.object.inherits(e.Events.Delete,e.Events.BlockBase),e.Events.BlockDelete=e.Events.Delete,e.Events.Delete.prototype.type=e.Events.DELETE,e.Events.Delete.prototype.toJson=function(){var t=e.Events.Delete.superClass_.toJson.call(this);return t.oldXml=e.Xml.domToText(this.oldXml),t.ids=this.ids,this.recordUndo||(t.recordUndo=this.recordUndo),t},e.Events.Delete.prototype.fromJson=function(t){e.Events.Delete.superClass_.fromJson.call(this,t),this.oldXml=e.Xml.textToDom(t.oldXml),this.ids=t.ids,void 0!==t.recordUndo&&(this.recordUndo=t.recordUndo)},e.Events.Delete.prototype.run=function(t){var n=this.getEventWorkspace_();if(t){t=0;for(var r;r=this.ids[t];t++){var s=n.getBlockById(r);s?s.dispose(!1):r==this.blockId&&console.warn("Can't delete non-existent block: "+r)}}else(t=e.utils.xml.createElement("xml")).appendChild(this.oldXml),e.Xml.domToWorkspace(t,n)},e.Events.Move=function(t){e.Events.Move.superClass_.constructor.call(this,t),t&&(t.isShadow()&&(this.recordUndo=!1),t=this.currentLocation_(),this.oldParentId=t.parentId,this.oldInputName=t.inputName,this.oldCoordinate=t.coordinate)},e.utils.object.inherits(e.Events.Move,e.Events.BlockBase),e.Events.BlockMove=e.Events.Move,e.Events.Move.prototype.type=e.Events.MOVE,e.Events.Move.prototype.toJson=function(){var t=e.Events.Move.superClass_.toJson.call(this);return this.newParentId&&(t.newParentId=this.newParentId),this.newInputName&&(t.newInputName=this.newInputName),this.newCoordinate&&(t.newCoordinate=Math.round(this.newCoordinate.x)+","+Math.round(this.newCoordinate.y)),this.recordUndo||(t.recordUndo=this.recordUndo),t},e.Events.Move.prototype.fromJson=function(t){if(e.Events.Move.superClass_.fromJson.call(this,t),this.newParentId=t.newParentId,this.newInputName=t.newInputName,t.newCoordinate){var n=t.newCoordinate.split(",");this.newCoordinate=new e.utils.Coordinate(Number(n[0]),Number(n[1]))}void 0!==t.recordUndo&&(this.recordUndo=t.recordUndo)},e.Events.Move.prototype.recordNew=function(){var t=this.currentLocation_();this.newParentId=t.parentId,this.newInputName=t.inputName,this.newCoordinate=t.coordinate},e.Events.Move.prototype.currentLocation_=function(){var t=this.getEventWorkspace_().getBlockById(this.blockId),n={},r=t.getParent();return r?(n.parentId=r.id,(t=r.getInputWithBlock(t))&&(n.inputName=t.name)):n.coordinate=t.getRelativeToSurfaceXY(),n},e.Events.Move.prototype.isNull=function(){return this.oldParentId==this.newParentId&&this.oldInputName==this.newInputName&&e.utils.Coordinate.equals(this.oldCoordinate,this.newCoordinate)},e.Events.Move.prototype.run=function(t){var n=this.getEventWorkspace_(),r=n.getBlockById(this.blockId);if(r){var s=t?this.newParentId:this.oldParentId,u=t?this.newInputName:this.oldInputName,y=t?this.newCoordinate:this.oldCoordinate;if(t=null,s&&!(t=n.getBlockById(s)))return void console.warn("Can't connect to non-existent block: "+s);if(r.getParent()&&r.unplug(),y)u=r.getRelativeToSurfaceXY(),r.moveBy(y.x-u.x,y.y-u.y);else{if(n=(r=r.outputConnection||r.previousConnection).type,u){if(t=t.getInput(u))var x=t.connection}else n==e.connectionTypes.PREVIOUS_STATEMENT&&(x=t.nextConnection);x?r.connect(x):console.warn("Can't connect to non-existent input: "+u)}}else console.warn("Can't move non-existent block: "+this.blockId)},e.registry.register(e.registry.Type.EVENT,e.Events.CREATE,e.Events.Create),e.registry.register(e.registry.Type.EVENT,e.Events.DELETE,e.Events.Delete),e.registry.register(e.registry.Type.EVENT,e.Events.CHANGE,e.Events.BlockChange),e.registry.register(e.registry.Type.EVENT,e.Events.MOVE,e.Events.Move),e.Events.FinishedLoading=function(t){this.isBlank=void 0===t,this.workspaceId=t?t.id:"",this.group=e.Events.getGroup(),this.recordUndo=!1},e.utils.object.inherits(e.Events.FinishedLoading,e.Events.Abstract),e.Events.FinishedLoading.prototype.type=e.Events.FINISHED_LOADING,e.Events.FinishedLoading.prototype.toJson=function(){var t={type:this.type};return this.group&&(t.group=this.group),this.workspaceId&&(t.workspaceId=this.workspaceId),t},e.Events.FinishedLoading.prototype.fromJson=function(t){this.isBlank=!1,this.workspaceId=t.workspaceId,this.group=t.group},e.registry.register(e.registry.Type.EVENT,e.Events.FINISHED_LOADING,e.Events.FinishedLoading),e.Events.UiBase=function(t){e.Events.UiBase.superClass_.constructor.call(this),this.isBlank=void 0===t,this.workspaceId=t||"",this.recordUndo=!1},e.utils.object.inherits(e.Events.UiBase,e.Events.Abstract),e.Events.UiBase.prototype.isUiEvent=!0,e.Events.Ui=function(t,n,r,s){e.Events.Ui.superClass_.constructor.call(this,t?t.workspace.id:void 0),this.blockId=t?t.id:null,this.element=void 0===n?"":n,this.oldValue=void 0===r?"":r,this.newValue=void 0===s?"":s},e.utils.object.inherits(e.Events.Ui,e.Events.UiBase),e.Events.Ui.prototype.type=e.Events.UI,e.Events.Ui.prototype.toJson=function(){var t=e.Events.Ui.superClass_.toJson.call(this);return t.element=this.element,void 0!==this.newValue&&(t.newValue=this.newValue),this.blockId&&(t.blockId=this.blockId),t},e.Events.Ui.prototype.fromJson=function(t){e.Events.Ui.superClass_.fromJson.call(this,t),this.element=t.element,this.newValue=t.newValue,this.blockId=t.blockId},e.registry.register(e.registry.Type.EVENT,e.Events.UI,e.Events.Ui),e.Events.VarBase=function(t){e.Events.VarBase.superClass_.constructor.call(this),this.varId=(this.isBlank=void 0===t)?"":t.getId(),this.workspaceId=this.isBlank?"":t.workspace.id},e.utils.object.inherits(e.Events.VarBase,e.Events.Abstract),e.Events.VarBase.prototype.toJson=function(){var t=e.Events.VarBase.superClass_.toJson.call(this);return t.varId=this.varId,t},e.Events.VarBase.prototype.fromJson=function(t){e.Events.VarBase.superClass_.toJson.call(this),this.varId=t.varId},e.Events.VarCreate=function(t){e.Events.VarCreate.superClass_.constructor.call(this,t),t&&(this.varType=t.type,this.varName=t.name)},e.utils.object.inherits(e.Events.VarCreate,e.Events.VarBase),e.Events.VarCreate.prototype.type=e.Events.VAR_CREATE,e.Events.VarCreate.prototype.toJson=function(){var t=e.Events.VarCreate.superClass_.toJson.call(this);return t.varType=this.varType,t.varName=this.varName,t},e.Events.VarCreate.prototype.fromJson=function(t){e.Events.VarCreate.superClass_.fromJson.call(this,t),this.varType=t.varType,this.varName=t.varName},e.Events.VarCreate.prototype.run=function(t){var n=this.getEventWorkspace_();t?n.createVariable(this.varName,this.varType,this.varId):n.deleteVariableById(this.varId)},e.Events.VarDelete=function(t){e.Events.VarDelete.superClass_.constructor.call(this,t),t&&(this.varType=t.type,this.varName=t.name)},e.utils.object.inherits(e.Events.VarDelete,e.Events.VarBase),e.Events.VarDelete.prototype.type=e.Events.VAR_DELETE,e.Events.VarDelete.prototype.toJson=function(){var t=e.Events.VarDelete.superClass_.toJson.call(this);return t.varType=this.varType,t.varName=this.varName,t},e.Events.VarDelete.prototype.fromJson=function(t){e.Events.VarDelete.superClass_.fromJson.call(this,t),this.varType=t.varType,this.varName=t.varName},e.Events.VarDelete.prototype.run=function(t){var n=this.getEventWorkspace_();t?n.deleteVariableById(this.varId):n.createVariable(this.varName,this.varType,this.varId)},e.Events.VarRename=function(t,n){e.Events.VarRename.superClass_.constructor.call(this,t),t&&(this.oldName=t.name,this.newName=void 0===n?"":n)},e.utils.object.inherits(e.Events.VarRename,e.Events.VarBase),e.Events.VarRename.prototype.type=e.Events.VAR_RENAME,e.Events.VarRename.prototype.toJson=function(){var t=e.Events.VarRename.superClass_.toJson.call(this);return t.oldName=this.oldName,t.newName=this.newName,t},e.Events.VarRename.prototype.fromJson=function(t){e.Events.VarRename.superClass_.fromJson.call(this,t),this.oldName=t.oldName,this.newName=t.newName},e.Events.VarRename.prototype.run=function(t){this.getEventWorkspace_().renameVariableById(this.varId,t?this.newName:this.oldName)},e.registry.register(e.registry.Type.EVENT,e.Events.VAR_CREATE,e.Events.VarCreate),e.registry.register(e.registry.Type.EVENT,e.Events.VAR_DELETE,e.Events.VarDelete),e.registry.register(e.registry.Type.EVENT,e.Events.VAR_RENAME,e.Events.VarRename),e.BlockDragSurfaceSvg=function(t){this.container_=t,this.createDom()},e.BlockDragSurfaceSvg.prototype.SVG_=null,e.BlockDragSurfaceSvg.prototype.dragGroup_=null,e.BlockDragSurfaceSvg.prototype.container_=null,e.BlockDragSurfaceSvg.prototype.scale_=1,e.BlockDragSurfaceSvg.prototype.surfaceXY_=null,e.BlockDragSurfaceSvg.prototype.childSurfaceXY_=new e.utils.Coordinate(0,0),e.BlockDragSurfaceSvg.prototype.createDom=function(){this.SVG_||(this.SVG_=e.utils.dom.createSvgElement(e.utils.Svg.SVG,{xmlns:e.utils.dom.SVG_NS,"xmlns:html":e.utils.dom.HTML_NS,"xmlns:xlink":e.utils.dom.XLINK_NS,version:"1.1",class:"blocklyBlockDragSurface"},this.container_),this.dragGroup_=e.utils.dom.createSvgElement(e.utils.Svg.G,{},this.SVG_))},e.BlockDragSurfaceSvg.prototype.setBlocksAndShow=function(t){if(this.dragGroup_.childNodes.length)throw Error("Already dragging a block.");this.dragGroup_.appendChild(t),this.SVG_.style.display="block",this.surfaceXY_=new e.utils.Coordinate(0,0)},e.BlockDragSurfaceSvg.prototype.translateAndScaleGroup=function(t,n,r){this.scale_=r,t=t.toFixed(0),n=n.toFixed(0),this.childSurfaceXY_.x=parseInt(t,10),this.childSurfaceXY_.y=parseInt(n,10),this.dragGroup_.setAttribute("transform","translate("+t+","+n+") scale("+r+")")},e.BlockDragSurfaceSvg.prototype.translateSurfaceInternal_=function(){var t=this.surfaceXY_.x,n=this.surfaceXY_.y;t=t.toFixed(0),n=n.toFixed(0),this.SVG_.style.display="block",e.utils.dom.setCssTransform(this.SVG_,"translate3d("+t+"px, "+n+"px, 0px)")},e.BlockDragSurfaceSvg.prototype.translateBy=function(t,n){this.surfaceXY_=new e.utils.Coordinate(this.surfaceXY_.x+t,this.surfaceXY_.y+n),this.translateSurfaceInternal_()},e.BlockDragSurfaceSvg.prototype.translateSurface=function(t,n){this.surfaceXY_=new e.utils.Coordinate(t*this.scale_,n*this.scale_),this.translateSurfaceInternal_()},e.BlockDragSurfaceSvg.prototype.getSurfaceTranslation=function(){var t=e.utils.getRelativeXY(this.SVG_);return new e.utils.Coordinate(t.x/this.scale_,t.y/this.scale_)},e.BlockDragSurfaceSvg.prototype.getGroup=function(){return this.dragGroup_},e.BlockDragSurfaceSvg.prototype.getSvgRoot=function(){return this.SVG_},e.BlockDragSurfaceSvg.prototype.getCurrentBlock=function(){return this.dragGroup_.firstChild},e.BlockDragSurfaceSvg.prototype.getWsTranslation=function(){return this.childSurfaceXY_.clone()},e.BlockDragSurfaceSvg.prototype.clearAndHide=function(t){if(t?t.appendChild(this.getCurrentBlock()):this.dragGroup_.removeChild(this.getCurrentBlock()),this.SVG_.style.display="none",this.dragGroup_.childNodes.length)throw Error("Drag group was not cleared.");this.surfaceXY_=null},e.Css={},e.Css.injected_=!1,e.Css.register=function(t){if(e.Css.injected_)throw Error("CSS already injected");Array.prototype.push.apply(e.Css.CONTENT,t),t.length=0},e.Css.inject=function(t,n){if(!e.Css.injected_){e.Css.injected_=!0;var r=e.Css.CONTENT.join("\n");e.Css.CONTENT.length=0,t&&(t=n.replace(/[\\/]$/,""),r=r.replace(/<<<PATH>>>/g,t),(t=document.createElement("style")).id="blockly-common-style",r=document.createTextNode(r),t.appendChild(r),document.head.insertBefore(t,document.head.firstChild))}},e.Css.CONTENT=[".blocklySvg {","background-color: #fff;","outline: none;","overflow: hidden;","position: absolute;","display: block;","}",".blocklyWidgetDiv {","display: none;","position: absolute;","z-index: 99999;","}",".injectionDiv {","height: 100%;","position: relative;","overflow: hidden;","touch-action: none;","}",".blocklyNonSelectable {","user-select: none;","-ms-user-select: none;","-webkit-user-select: none;","}",".blocklyWsDragSurface {","display: none;","position: absolute;","top: 0;","left: 0;","}",".blocklyWsDragSurface.blocklyOverflowVisible {","overflow: visible;","}",".blocklyBlockDragSurface {","display: none;","position: absolute;","top: 0;","left: 0;","right: 0;","bottom: 0;","overflow: visible !important;","z-index: 50;","}",".blocklyBlockCanvas.blocklyCanvasTransitioning,",".blocklyBubbleCanvas.blocklyCanvasTransitioning {","transition: transform .5s;","}",".blocklyTooltipDiv {","background-color: #ffffc7;","border: 1px solid #ddc;","box-shadow: 4px 4px 20px 1px rgba(0,0,0,.15);","color: #000;","display: none;","font: 9pt sans-serif;","opacity: .9;","padding: 2px;","position: absolute;","z-index: 100000;","}",".blocklyDropDownDiv {","position: absolute;","left: 0;","top: 0;","z-index: 1000;","display: none;","border: 1px solid;","border-color: #dadce0;","background-color: #fff;","border-radius: 2px;","padding: 4px;","box-shadow: 0 0 3px 1px rgba(0,0,0,.3);","}",".blocklyDropDownDiv.blocklyFocused {","box-shadow: 0 0 6px 1px rgba(0,0,0,.3);","}",".blocklyDropDownContent {","max-height: 300px;","overflow: auto;","overflow-x: hidden;","position: relative;","}",".blocklyDropDownArrow {","position: absolute;","left: 0;","top: 0;","width: 16px;","height: 16px;","z-index: -1;","background-color: inherit;","border-color: inherit;","}",".blocklyDropDownButton {","display: inline-block;","float: left;","padding: 0;","margin: 4px;","border-radius: 4px;","outline: none;","border: 1px solid;","transition: box-shadow .1s;","cursor: pointer;","}",".blocklyArrowTop {","border-top: 1px solid;","border-left: 1px solid;","border-top-left-radius: 4px;","border-color: inherit;","}",".blocklyArrowBottom {","border-bottom: 1px solid;","border-right: 1px solid;","border-bottom-right-radius: 4px;","border-color: inherit;","}",".blocklyResizeSE {","cursor: se-resize;","fill: #aaa;","}",".blocklyResizeSW {","cursor: sw-resize;","fill: #aaa;","}",".blocklyResizeLine {","stroke: #515A5A;","stroke-width: 1;","}",".blocklyHighlightedConnectionPath {","fill: none;","stroke: #fc3;","stroke-width: 4px;","}",".blocklyPathLight {","fill: none;","stroke-linecap: round;","stroke-width: 1;","}",".blocklySelected>.blocklyPathLight {","display: none;","}",".blocklyDraggable {",'cursor: url("<<<PATH>>>/handopen.cur"), auto;',"cursor: grab;","cursor: -webkit-grab;","}",".blocklyDragging {",'cursor: url("<<<PATH>>>/handclosed.cur"), auto;',"cursor: grabbing;","cursor: -webkit-grabbing;","}",".blocklyDraggable:active {",'cursor: url("<<<PATH>>>/handclosed.cur"), auto;',"cursor: grabbing;","cursor: -webkit-grabbing;","}",".blocklyBlockDragSurface .blocklyDraggable {",'cursor: url("<<<PATH>>>/handclosed.cur"), auto;',"cursor: grabbing;","cursor: -webkit-grabbing;","}",".blocklyDragging.blocklyDraggingDelete {",'cursor: url("<<<PATH>>>/handdelete.cur"), auto;',"}",".blocklyDragging>.blocklyPath,",".blocklyDragging>.blocklyPathLight {","fill-opacity: .8;","stroke-opacity: .8;","}",".blocklyDragging>.blocklyPathDark {","display: none;","}",".blocklyDisabled>.blocklyPath {","fill-opacity: .5;","stroke-opacity: .5;","}",".blocklyDisabled>.blocklyPathLight,",".blocklyDisabled>.blocklyPathDark {","display: none;","}",".blocklyInsertionMarker>.blocklyPath,",".blocklyInsertionMarker>.blocklyPathLight,",".blocklyInsertionMarker>.blocklyPathDark {","fill-opacity: .2;","stroke: none;","}",".blocklyMultilineText {","font-family: monospace;","}",".blocklyNonEditableText>text {","pointer-events: none;","}",".blocklyFlyout {","position: absolute;","z-index: 20;","}",".blocklyText text {","cursor: default;","}",".blocklySvg text,",".blocklyBlockDragSurface text {","user-select: none;","-ms-user-select: none;","-webkit-user-select: none;","cursor: inherit;","}",".blocklyHidden {","display: none;","}",".blocklyFieldDropdown:not(.blocklyHidden) {","display: block;","}",".blocklyIconGroup {","cursor: default;","}",".blocklyIconGroup:not(:hover),",".blocklyIconGroupReadonly {","opacity: .6;","}",".blocklyIconShape {","fill: #00f;","stroke: #fff;","stroke-width: 1px;","}",".blocklyIconSymbol {","fill: #fff;","}",".blocklyMinimalBody {","margin: 0;","padding: 0;","}",".blocklyHtmlInput {","border: none;","border-radius: 4px;","height: 100%;","margin: 0;","outline: none;","padding: 0;","width: 100%;","text-align: center;","display: block;","box-sizing: border-box;","}",".blocklyHtmlInput::-ms-clear {","display: none;","}",".blocklyMainBackground {","stroke-width: 1;","stroke: #c6c6c6;","}",".blocklyMutatorBackground {","fill: #fff;","stroke: #ddd;","stroke-width: 1;","}",".blocklyFlyoutBackground {","fill: #ddd;","fill-opacity: .8;","}",".blocklyMainWorkspaceScrollbar {","z-index: 20;","}",".blocklyFlyoutScrollbar {","z-index: 30;","}",".blocklyScrollbarHorizontal,",".blocklyScrollbarVertical {","position: absolute;","outline: none;","}",".blocklyScrollbarBackground {","opacity: 0;","}",".blocklyScrollbarHandle {","fill: #ccc;","}",".blocklyScrollbarBackground:hover+.blocklyScrollbarHandle,",".blocklyScrollbarHandle:hover {","fill: #bbb;","}",".blocklyFlyout .blocklyScrollbarHandle {","fill: #bbb;","}",".blocklyFlyout .blocklyScrollbarBackground:hover+.blocklyScrollbarHandle,",".blocklyFlyout .blocklyScrollbarHandle:hover {","fill: #aaa;","}",".blocklyInvalidInput {","background: #faa;","}",".blocklyVerticalMarker {","stroke-width: 3px;","fill: rgba(255,255,255,.5);","pointer-events: none;","}",".blocklyComputeCanvas {","position: absolute;","width: 0;","height: 0;","}",".blocklyNoPointerEvents {","pointer-events: none;","}",".blocklyContextMenu {","border-radius: 4px;","max-height: 100%;","}",".blocklyDropdownMenu {","border-radius: 2px;","padding: 0 !important;","}",".blocklyDropdownMenu .blocklyMenuItem {","padding-left: 28px;","}",".blocklyDropdownMenu .blocklyMenuItemRtl {","padding-left: 5px;","padding-right: 28px;","}",".blocklyWidgetDiv .blocklyMenu {","background: #fff;","border: 1px solid transparent;","box-shadow: 0 0 3px 1px rgba(0,0,0,.3);","font: normal 13px Arial, sans-serif;","margin: 0;","outline: none;","padding: 4px 0;","position: absolute;","overflow-y: auto;","overflow-x: hidden;","max-height: 100%;","z-index: 20000;","}",".blocklyWidgetDiv .blocklyMenu.blocklyFocused {","box-shadow: 0 0 6px 1px rgba(0,0,0,.3);","}",".blocklyDropDownDiv .blocklyMenu {","background: inherit;","border: inherit;",'font: normal 13px "Helvetica Neue", Helvetica, sans-serif;',"outline: none;","position: relative;","z-index: 20000;","}",".blocklyMenuItem {","border: none;","color: #000;","cursor: pointer;","list-style: none;","margin: 0;","min-width: 7em;","padding: 6px 15px;","white-space: nowrap;","}",".blocklyMenuItemDisabled {","color: #ccc;","cursor: inherit;","}",".blocklyMenuItemHighlight {","background-color: rgba(0,0,0,.1);","}",".blocklyMenuItemCheckbox {","height: 16px;","position: absolute;","width: 16px;","}",".blocklyMenuItemSelected .blocklyMenuItemCheckbox {","background: url(<<<PATH>>>/sprites.png) no-repeat -48px -16px;","float: left;","margin-left: -24px;","position: static;","}",".blocklyMenuItemRtl .blocklyMenuItemCheckbox {","float: right;","margin-right: -24px;","}"],e.Grid=function(t,n){this.gridPattern_=t,this.spacing_=n.spacing,this.length_=n.length,this.line2_=(this.line1_=t.firstChild)&&this.line1_.nextSibling,this.snapToGrid_=n.snap},e.Grid.prototype.scale_=1,e.Grid.prototype.dispose=function(){this.gridPattern_=null},e.Grid.prototype.shouldSnap=function(){return this.snapToGrid_},e.Grid.prototype.getSpacing=function(){return this.spacing_},e.Grid.prototype.getPatternId=function(){return this.gridPattern_.id},e.Grid.prototype.update=function(t){this.scale_=t;var n=this.spacing_*t||100;this.gridPattern_.setAttribute("width",n),this.gridPattern_.setAttribute("height",n);var r=(n=Math.floor(this.spacing_/2)+.5)-this.length_/2,s=n+this.length_/2;this.setLineAttributes_(this.line1_,t,r*=t,s*=t,n*=t,n),this.setLineAttributes_(this.line2_,t,n,n,r,s)},e.Grid.prototype.setLineAttributes_=function(t,n,r,s,u,y){t&&(t.setAttribute("stroke-width",n),t.setAttribute("x1",r),t.setAttribute("y1",u),t.setAttribute("x2",s),t.setAttribute("y2",y))},e.Grid.prototype.moveTo=function(t,n){this.gridPattern_.setAttribute("x",t),this.gridPattern_.setAttribute("y",n),(e.utils.userAgent.IE||e.utils.userAgent.EDGE)&&this.update(this.scale_)},e.Grid.createDom=function(t,n,r){return t=e.utils.dom.createSvgElement(e.utils.Svg.PATTERN,{id:"blocklyGridPattern"+t,patternUnits:"userSpaceOnUse"},r),0<n.length&&0<n.spacing?(e.utils.dom.createSvgElement(e.utils.Svg.LINE,{stroke:n.colour},t),1<n.length&&e.utils.dom.createSvgElement(e.utils.Svg.LINE,{stroke:n.colour},t)):e.utils.dom.createSvgElement(e.utils.Svg.LINE,{},t),t},e.Theme=function(t,n,r,s){this.name=t,this.blockStyles=n||Object.create(null),this.categoryStyles=r||Object.create(null),this.componentStyles=s||Object.create(null),this.fontStyle=Object.create(null),this.startHats=null,e.registry.register(e.registry.Type.THEME,t,this)},e.Theme.prototype.getClassName=function(){return this.name+"-theme"},e.Theme.prototype.setBlockStyle=function(t,n){this.blockStyles[t]=n},e.Theme.prototype.setCategoryStyle=function(t,n){this.categoryStyles[t]=n},e.Theme.prototype.getComponentStyle=function(t){return(t=this.componentStyles[t])&&"string"==typeof t&&this.getComponentStyle(t)?this.getComponentStyle(t):t?String(t):null},e.Theme.prototype.setComponentStyle=function(t,n){this.componentStyles[t]=n},e.Theme.prototype.setFontStyle=function(t){this.fontStyle=t},e.Theme.prototype.setStartHats=function(t){this.startHats=t},e.Theme.defineTheme=function(t,n){var r=new e.Theme(t),s=n.base;return s&&("string"==typeof s&&(s=e.registry.getObject(e.registry.Type.THEME,s)),s instanceof e.Theme&&(e.utils.object.deepMerge(r,s),r.name=t)),e.utils.object.deepMerge(r.blockStyles,n.blockStyles),e.utils.object.deepMerge(r.categoryStyles,n.categoryStyles),e.utils.object.deepMerge(r.componentStyles,n.componentStyles),e.utils.object.deepMerge(r.fontStyle,n.fontStyle),null!=n.startHats&&(r.startHats=n.startHats),r},e.Themes={},e.Themes.Classic={},e.Themes.Classic.defaultBlockStyles={colour_blocks:{colourPrimary:"20"},list_blocks:{colourPrimary:"260"},logic_blocks:{colourPrimary:"210"},loop_blocks:{colourPrimary:"120"},math_blocks:{colourPrimary:"230"},procedure_blocks:{colourPrimary:"290"},text_blocks:{colourPrimary:"160"},variable_blocks:{colourPrimary:"330"},variable_dynamic_blocks:{colourPrimary:"310"},hat_blocks:{colourPrimary:"330",hat:"cap"}},e.Themes.Classic.categoryStyles={colour_category:{colour:"20"},list_category:{colour:"260"},logic_category:{colour:"210"},loop_category:{colour:"120"},math_category:{colour:"230"},procedure_category:{colour:"290"},text_category:{colour:"160"},variable_category:{colour:"330"},variable_dynamic_category:{colour:"310"}},e.Themes.Classic=new e.Theme("classic",e.Themes.Classic.defaultBlockStyles,e.Themes.Classic.categoryStyles),e.utils.IdGenerator={},e.utils.IdGenerator.nextId_=0,e.utils.IdGenerator.getNextUniqueId=function(){return"blockly-"+(e.utils.IdGenerator.nextId_++).toString(36)},e.utils.Metrics=function(){},e.utils.toolbox={},e.utils.toolbox.CATEGORY_TOOLBOX_KIND="categoryToolbox",e.utils.toolbox.FLYOUT_TOOLBOX_KIND="flyoutToolbox",e.utils.toolbox.Position={TOP:0,BOTTOM:1,LEFT:2,RIGHT:3},e.utils.toolbox.convertToolboxDefToJson=function(t){return t?((t instanceof Element||"string"==typeof t)&&(t=e.utils.toolbox.parseToolboxTree(t),t=e.utils.toolbox.convertToToolboxJson_(t)),e.utils.toolbox.validateToolbox_(t),t):null},e.utils.toolbox.validateToolbox_=function(t){var n=t.kind;if(t=t.contents,n&&n!=e.utils.toolbox.FLYOUT_TOOLBOX_KIND&&n!=e.utils.toolbox.CATEGORY_TOOLBOX_KIND)throw Error("Invalid toolbox kind "+n+". Please supply either "+e.utils.toolbox.FLYOUT_TOOLBOX_KIND+" or "+e.utils.toolbox.CATEGORY_TOOLBOX_KIND);if(!t)throw Error("Toolbox must have a contents attribute.")},e.utils.toolbox.convertFlyoutDefToJsonArray=function(t){return t?t.contents?t.contents:Array.isArray(t)&&0<t.length&&!t[0].nodeType?t:e.utils.toolbox.xmlToJsonArray_(t):[]},e.utils.toolbox.hasCategories=function(t){if(!t)return!1;var n=t.kind;return n?n==e.utils.toolbox.CATEGORY_TOOLBOX_KIND:!!t.contents.filter(function(r){return"CATEGORY"==r.kind.toUpperCase()}).length},e.utils.toolbox.isCategoryCollapsible=function(t){return!(!t||!t.contents||!t.contents.filter(function(n){return"CATEGORY"==n.kind.toUpperCase()}).length)},e.utils.toolbox.convertToToolboxJson_=function(t){var n={contents:e.utils.toolbox.xmlToJsonArray_(t)};return t instanceof Node&&e.utils.toolbox.addAttributes_(t,n),n},e.utils.toolbox.xmlToJsonArray_=function(t){var s,n=[],r=t.childNodes;for(r||(r=t),t=0;s=r[t];t++)if(s.tagName){var u={},y=s.tagName.toUpperCase();u.kind=y,"BLOCK"==y?u.blockxml=s:s.childNodes&&0<s.childNodes.length&&(u.contents=e.utils.toolbox.xmlToJsonArray_(s)),e.utils.toolbox.addAttributes_(s,u),n.push(u)}return n},e.utils.toolbox.addAttributes_=function(t,n){for(var r=0;r<t.attributes.length;r++){var s=t.attributes[r];-1<s.nodeName.indexOf("css-")?(n.cssconfig=n.cssconfig||{},n.cssconfig[s.nodeName.replace("css-","")]=s.value):n[s.nodeName]=s.value}},e.utils.toolbox.parseToolboxTree=function(t){if(t){if("string"!=typeof t&&(e.utils.userAgent.IE&&t.outerHTML?t=t.outerHTML:t instanceof Element||(t=null)),"string"==typeof t&&"xml"!=(t=e.Xml.textToDom(t)).nodeName.toLowerCase())throw TypeError("Toolbox should be an <xml> document.")}else t=null;return t},e.Options=function(t){var n=!!t.readOnly;if(n)var r=null,s=!1,u=!1,y=!1,x=!1,B=!1,Q=!1;else{r=e.utils.toolbox.convertToolboxDefToJson(t.toolbox),s=e.utils.toolbox.hasCategories(r),void 0===(u=t.trashcan)&&(u=s);var at=t.maxTrashcanContents;u?void 0===at&&(at=32):at=0,void 0===(y=t.collapse)&&(y=s),void 0===(x=t.comments)&&(x=s),void 0===(B=t.disable)&&(B=s),void 0===(Q=t.sounds)&&(Q=!0)}var rt=!!t.rtl,St=t.horizontalLayout;void 0===St&&(St=!1);var Ht=t.toolboxPosition;Ht="end"!==Ht,Ht=St?Ht?e.utils.toolbox.Position.TOP:e.utils.toolbox.Position.BOTTOM:Ht==rt?e.utils.toolbox.Position.RIGHT:e.utils.toolbox.Position.LEFT;var vt=t.css;void 0===vt&&(vt=!0);var xt="https://blockly-demo.appspot.com/static/media/";t.media?xt=t.media:t.path&&(xt=t.path+"media/");var Wt=void 0===t.oneBasedIndex||!!t.oneBasedIndex,Jt=t.renderer||"geras",Ct=t.plugins||{};this.RTL=rt,this.oneBasedIndex=Wt,this.collapse=y,this.comments=x,this.disable=B,this.readOnly=n,this.maxBlocks=t.maxBlocks||1/0,this.maxInstances=t.maxInstances,this.pathToMedia=xt,this.hasCategories=s,this.moveOptions=e.Options.parseMoveOptions_(t,s),this.hasScrollbars=!!this.moveOptions.scrollbars,this.hasTrashcan=u,this.maxTrashcanContents=at,this.hasSounds=Q,this.hasCss=vt,this.horizontalLayout=St,this.languageTree=r,this.gridOptions=e.Options.parseGridOptions_(t),this.zoomOptions=e.Options.parseZoomOptions_(t),this.toolboxPosition=Ht,this.theme=e.Options.parseThemeOptions_(t),this.renderer=Jt,this.rendererOverrides=t.rendererOverrides,this.gridPattern=null,this.parentWorkspace=t.parentWorkspace,this.plugins=Ct},e.BlocklyOptions=function(){},e.Options.parseMoveOptions_=function(t,n){var r=t.move||{},s={};return void 0===r.scrollbars&&void 0===t.scrollbars?s.scrollbars=n:"object"==typeof r.scrollbars?(s.scrollbars={},s.scrollbars.horizontal=!!r.scrollbars.horizontal,s.scrollbars.vertical=!!r.scrollbars.vertical,s.scrollbars.horizontal&&s.scrollbars.vertical?s.scrollbars=!0:s.scrollbars.horizontal||s.scrollbars.vertical||(s.scrollbars=!1)):s.scrollbars=!!r.scrollbars||!!t.scrollbars,s.wheel=s.scrollbars&&void 0!==r.wheel?!!r.wheel:"object"==typeof s.scrollbars,s.drag=!(!s.scrollbars||void 0!==r.drag&&!r.drag),s},e.Options.parseZoomOptions_=function(t){var n={};return n.controls=void 0!==(t=t.zoom||{}).controls&&!!t.controls,n.wheel=void 0!==t.wheel&&!!t.wheel,n.startScale=void 0===t.startScale?1:Number(t.startScale),n.maxScale=void 0===t.maxScale?3:Number(t.maxScale),n.minScale=void 0===t.minScale?.3:Number(t.minScale),n.scaleSpeed=void 0===t.scaleSpeed?1.2:Number(t.scaleSpeed),n.pinch=void 0===t.pinch?n.wheel||n.controls:!!t.pinch,n},e.Options.parseGridOptions_=function(t){t=t.grid||{};var n={};return n.spacing=Number(t.spacing)||0,n.colour=t.colour||"#888",n.length=void 0===t.length?1:Number(t.length),n.snap=0<n.spacing&&!!t.snap,n},e.Options.parseThemeOptions_=function(t){return"string"==typeof(t=t.theme||e.Themes.Classic)?e.registry.getObject(e.registry.Type.THEME,t):t instanceof e.Theme?t:e.Theme.defineTheme(t.name||"builtin"+e.utils.IdGenerator.getNextUniqueId(),t)},e.Options.parseToolboxTree=function(t){return e.utils.deprecation.warn("Blockly.Options.parseToolboxTree","September 2020","September 2021","Blockly.utils.toolbox.parseToolboxTree"),e.utils.toolbox.parseToolboxTree(t)},e.ScrollbarPair=function(t,n,r,s,u){this.workspace_=t,r=void 0===r||r;var y=(n=void 0===n||n)&&r;n&&(this.hScroll=new e.Scrollbar(t,!0,y,s,u)),r&&(this.vScroll=new e.Scrollbar(t,!1,y,s,u)),y&&(this.corner_=e.utils.dom.createSvgElement(e.utils.Svg.RECT,{height:e.Scrollbar.scrollbarThickness,width:e.Scrollbar.scrollbarThickness,class:"blocklyScrollbarBackground"},null),e.utils.dom.insertAfter(this.corner_,t.getBubbleCanvas())),this.oldHostMetrics_=null},e.ScrollbarPair.prototype.dispose=function(){e.utils.dom.removeNode(this.corner_),this.oldHostMetrics_=this.workspace_=this.corner_=null,this.hScroll&&(this.hScroll.dispose(),this.hScroll=null),this.vScroll&&(this.vScroll.dispose(),this.vScroll=null)},e.ScrollbarPair.prototype.resize=function(){var t=this.workspace_.getMetrics();if(t){var n=!1,r=!1;if(this.oldHostMetrics_&&this.oldHostMetrics_.viewWidth==t.viewWidth&&this.oldHostMetrics_.viewHeight==t.viewHeight&&this.oldHostMetrics_.absoluteTop==t.absoluteTop&&this.oldHostMetrics_.absoluteLeft==t.absoluteLeft?(this.oldHostMetrics_&&this.oldHostMetrics_.scrollWidth==t.scrollWidth&&this.oldHostMetrics_.viewLeft==t.viewLeft&&this.oldHostMetrics_.scrollLeft==t.scrollLeft||(n=!0),this.oldHostMetrics_&&this.oldHostMetrics_.scrollHeight==t.scrollHeight&&this.oldHostMetrics_.viewTop==t.viewTop&&this.oldHostMetrics_.scrollTop==t.scrollTop||(r=!0)):r=n=!0,n||r){try{e.Events.disable(),this.hScroll&&n&&this.hScroll.resize(t),this.vScroll&&r&&this.vScroll.resize(t)}finally{e.Events.enable()}this.workspace_.maybeFireViewportChangeEvent()}this.hScroll&&this.vScroll&&(this.oldHostMetrics_&&this.oldHostMetrics_.viewWidth==t.viewWidth&&this.oldHostMetrics_.absoluteLeft==t.absoluteLeft||this.corner_.setAttribute("x",this.vScroll.position.x),this.oldHostMetrics_&&this.oldHostMetrics_.viewHeight==t.viewHeight&&this.oldHostMetrics_.absoluteTop==t.absoluteTop||this.corner_.setAttribute("y",this.hScroll.position.y)),this.oldHostMetrics_=t}},e.ScrollbarPair.prototype.canScrollHorizontally=function(){return!!this.hScroll},e.ScrollbarPair.prototype.canScrollVertically=function(){return!!this.vScroll},e.ScrollbarPair.prototype.setOrigin=function(t,n){this.hScroll&&this.hScroll.setOrigin(t,n),this.vScroll&&this.vScroll.setOrigin(t,n)},e.ScrollbarPair.prototype.set=function(t,n,r){this.hScroll&&this.hScroll.set(t,!1),this.vScroll&&this.vScroll.set(n,!1),(r||void 0===r)&&(t={},this.hScroll&&(t.x=this.hScroll.getRatio_()),this.vScroll&&(t.y=this.vScroll.getRatio_()),this.workspace_.setMetrics(t))},e.ScrollbarPair.prototype.setX=function(t){this.hScroll&&this.hScroll.set(t,!0)},e.ScrollbarPair.prototype.setY=function(t){this.vScroll&&this.vScroll.set(t,!0)},e.ScrollbarPair.prototype.setContainerVisible=function(t){this.hScroll&&this.hScroll.setContainerVisible(t),this.vScroll&&this.vScroll.setContainerVisible(t)},e.ScrollbarPair.prototype.isVisible=function(){var t=!1;return this.hScroll&&(t=this.hScroll.isVisible()),this.vScroll&&(t=t||this.vScroll.isVisible()),t},e.ScrollbarPair.prototype.resizeContent=function(t){this.hScroll&&this.hScroll.resizeContentHorizontal(t),this.vScroll&&this.vScroll.resizeContentVertical(t)},e.ScrollbarPair.prototype.resizeView=function(t){this.hScroll&&this.hScroll.resizeViewHorizontal(t),this.vScroll&&this.vScroll.resizeViewVertical(t)},e.Scrollbar=function(t,n,r,s,u){this.workspace_=t,this.pair_=r||!1,this.horizontal_=n,this.margin_=void 0!==u?u:e.Scrollbar.DEFAULT_SCROLLBAR_MARGIN,this.ratio=this.oldHostMetrics_=null,this.createDom_(s),this.position=new e.utils.Coordinate(0,0),t=e.Scrollbar.scrollbarThickness,n?(this.svgBackground_.setAttribute("height",t),this.outerSvg_.setAttribute("height",t),this.svgHandle_.setAttribute("height",t-5),this.svgHandle_.setAttribute("y",2.5),this.lengthAttribute_="width",this.positionAttribute_="x"):(this.svgBackground_.setAttribute("width",t),this.outerSvg_.setAttribute("width",t),this.svgHandle_.setAttribute("width",t-5),this.svgHandle_.setAttribute("x",2.5),this.lengthAttribute_="height",this.positionAttribute_="y"),this.onMouseDownBarWrapper_=e.browserEvents.conditionalBind(this.svgBackground_,"mousedown",this,this.onMouseDownBar_),this.onMouseDownHandleWrapper_=e.browserEvents.conditionalBind(this.svgHandle_,"mousedown",this,this.onMouseDownHandle_)},e.Scrollbar.prototype.origin_=new e.utils.Coordinate(0,0),e.Scrollbar.prototype.startDragMouse_=0,e.Scrollbar.prototype.scrollbarLength_=0,e.Scrollbar.prototype.handleLength_=0,e.Scrollbar.prototype.handlePosition_=0,e.Scrollbar.prototype.isVisible_=!0,e.Scrollbar.prototype.containerVisible_=!0,e.Scrollbar.scrollbarThickness=15,e.Touch.TOUCH_ENABLED&&(e.Scrollbar.scrollbarThickness=25),e.Scrollbar.DEFAULT_SCROLLBAR_MARGIN=.5,e.Scrollbar.metricsAreEquivalent_=function(t,n){return t.viewWidth==n.viewWidth&&t.viewHeight==n.viewHeight&&t.viewLeft==n.viewLeft&&t.viewTop==n.viewTop&&t.absoluteTop==n.absoluteTop&&t.absoluteLeft==n.absoluteLeft&&t.scrollWidth==n.scrollWidth&&t.scrollHeight==n.scrollHeight&&t.scrollLeft==n.scrollLeft&&t.scrollTop==n.scrollTop},e.Scrollbar.prototype.dispose=function(){this.cleanUp_(),e.browserEvents.unbind(this.onMouseDownBarWrapper_),this.onMouseDownBarWrapper_=null,e.browserEvents.unbind(this.onMouseDownHandleWrapper_),this.onMouseDownHandleWrapper_=null,e.utils.dom.removeNode(this.outerSvg_),this.svgBackground_=this.svgGroup_=this.outerSvg_=null,this.svgHandle_&&(this.workspace_.getThemeManager().unsubscribe(this.svgHandle_),this.svgHandle_=null),this.workspace_=null},e.Scrollbar.prototype.constrainHandleLength_=function(t){return 0>=t||isNaN(t)?0:Math.min(t,this.scrollbarLength_)},e.Scrollbar.prototype.setHandleLength_=function(t){this.handleLength_=t,this.svgHandle_.setAttribute(this.lengthAttribute_,this.handleLength_)},e.Scrollbar.prototype.constrainHandlePosition_=function(t){return 0>=t||isNaN(t)?0:Math.min(t,this.scrollbarLength_-this.handleLength_)},e.Scrollbar.prototype.setHandlePosition=function(t){this.handlePosition_=t,this.svgHandle_.setAttribute(this.positionAttribute_,this.handlePosition_)},e.Scrollbar.prototype.setScrollbarLength_=function(t){this.scrollbarLength_=t,this.outerSvg_.setAttribute(this.lengthAttribute_,this.scrollbarLength_),this.svgBackground_.setAttribute(this.lengthAttribute_,this.scrollbarLength_)},e.Scrollbar.prototype.setPosition=function(t,n){this.position.x=t,this.position.y=n,e.utils.dom.setCssTransform(this.outerSvg_,"translate("+(this.position.x+this.origin_.x)+"px,"+(this.position.y+this.origin_.y)+"px)")},e.Scrollbar.prototype.resize=function(t){!t&&!(t=this.workspace_.getMetrics())||this.oldHostMetrics_&&e.Scrollbar.metricsAreEquivalent_(t,this.oldHostMetrics_)||(this.horizontal_?this.resizeHorizontal_(t):this.resizeVertical_(t),this.oldHostMetrics_=t,this.updateMetrics_())},e.Scrollbar.prototype.requiresViewResize_=function(t){return!this.oldHostMetrics_||this.oldHostMetrics_.viewWidth!==t.viewWidth||this.oldHostMetrics_.viewHeight!==t.viewHeight||this.oldHostMetrics_.absoluteLeft!==t.absoluteLeft||this.oldHostMetrics_.absoluteTop!==t.absoluteTop},e.Scrollbar.prototype.resizeHorizontal_=function(t){this.requiresViewResize_(t)?this.resizeViewHorizontal(t):this.resizeContentHorizontal(t)},e.Scrollbar.prototype.resizeViewHorizontal=function(t){var n=t.viewWidth-2*this.margin_;this.pair_&&(n-=e.Scrollbar.scrollbarThickness),this.setScrollbarLength_(Math.max(0,n)),n=t.absoluteLeft+this.margin_,this.pair_&&this.workspace_.RTL&&(n+=e.Scrollbar.scrollbarThickness),this.setPosition(n,t.absoluteTop+t.viewHeight-e.Scrollbar.scrollbarThickness-this.margin_),this.resizeContentHorizontal(t)},e.Scrollbar.prototype.resizeContentHorizontal=function(t){if(t.viewWidth>=t.scrollWidth)this.setHandleLength_(this.scrollbarLength_),this.setHandlePosition(0),this.pair_||this.setVisible(!1);else{this.pair_||this.setVisible(!0);var n=this.scrollbarLength_*t.viewWidth/t.scrollWidth;n=this.constrainHandleLength_(n),this.setHandleLength_(n);var r=this.scrollbarLength_-this.handleLength_;t=this.constrainHandlePosition_(t=(t.viewLeft-t.scrollLeft)/(n=t.scrollWidth-t.viewWidth)*r),this.setHandlePosition(t),this.ratio=r/n}},e.Scrollbar.prototype.resizeVertical_=function(t){this.requiresViewResize_(t)?this.resizeViewVertical(t):this.resizeContentVertical(t)},e.Scrollbar.prototype.resizeViewVertical=function(t){var n=t.viewHeight-2*this.margin_;this.pair_&&(n-=e.Scrollbar.scrollbarThickness),this.setScrollbarLength_(Math.max(0,n)),this.setPosition(this.workspace_.RTL?t.absoluteLeft+this.margin_:t.absoluteLeft+t.viewWidth-e.Scrollbar.scrollbarThickness-this.margin_,t.absoluteTop+this.margin_),this.resizeContentVertical(t)},e.Scrollbar.prototype.resizeContentVertical=function(t){if(t.viewHeight>=t.scrollHeight)this.setHandleLength_(this.scrollbarLength_),this.setHandlePosition(0),this.pair_||this.setVisible(!1);else{this.pair_||this.setVisible(!0);var n=this.scrollbarLength_*t.viewHeight/t.scrollHeight;n=this.constrainHandleLength_(n),this.setHandleLength_(n);var r=this.scrollbarLength_-this.handleLength_;t=this.constrainHandlePosition_(t=(t.viewTop-t.scrollTop)/(n=t.scrollHeight-t.viewHeight)*r),this.setHandlePosition(t),this.ratio=r/n}},e.Scrollbar.prototype.createDom_=function(t){var n="blocklyScrollbar"+(this.horizontal_?"Horizontal":"Vertical");t&&(n+=" "+t),this.outerSvg_=e.utils.dom.createSvgElement(e.utils.Svg.SVG,{class:n},null),this.svgGroup_=e.utils.dom.createSvgElement(e.utils.Svg.G,{},this.outerSvg_),this.svgBackground_=e.utils.dom.createSvgElement(e.utils.Svg.RECT,{class:"blocklyScrollbarBackground"},this.svgGroup_),t=Math.floor((e.Scrollbar.scrollbarThickness-5)/2),this.svgHandle_=e.utils.dom.createSvgElement(e.utils.Svg.RECT,{class:"blocklyScrollbarHandle",rx:t,ry:t},this.svgGroup_),this.workspace_.getThemeManager().subscribe(this.svgHandle_,"scrollbarColour","fill"),this.workspace_.getThemeManager().subscribe(this.svgHandle_,"scrollbarOpacity","fill-opacity"),e.utils.dom.insertAfter(this.outerSvg_,this.workspace_.getParentSvg())},e.Scrollbar.prototype.isVisible=function(){return this.isVisible_},e.Scrollbar.prototype.setContainerVisible=function(t){var n=t!=this.containerVisible_;this.containerVisible_=t,n&&this.updateDisplay_()},e.Scrollbar.prototype.setVisible=function(t){var n=t!=this.isVisible();if(this.pair_)throw Error("Unable to toggle visibility of paired scrollbars.");this.isVisible_=t,n&&this.updateDisplay_()},e.Scrollbar.prototype.updateDisplay_=function(){this.containerVisible_&&this.isVisible()?this.outerSvg_.setAttribute("display","block"):this.outerSvg_.setAttribute("display","none")},e.Scrollbar.prototype.onMouseDownBar_=function(t){if(this.workspace_.markFocused(),e.Touch.clearTouchIdentifier(),this.cleanUp_(),e.utils.isRightButton(t))t.stopPropagation();else{var n=e.utils.mouseToSvg(t,this.workspace_.getParentSvg(),this.workspace_.getInverseScreenCTM());n=this.horizontal_?n.x:n.y;var r=e.utils.getInjectionDivXY_(this.svgHandle_),s=this.handlePosition_,u=.95*this.handleLength_;n<=(r=this.horizontal_?r.x:r.y)?s-=u:n>=r+this.handleLength_&&(s+=u),this.setHandlePosition(this.constrainHandlePosition_(s)),this.updateMetrics_(),t.stopPropagation(),t.preventDefault()}},e.Scrollbar.prototype.onMouseDownHandle_=function(t){this.workspace_.markFocused(),this.cleanUp_(),e.utils.isRightButton(t)?t.stopPropagation():(this.startDragHandle=this.handlePosition_,this.workspace_.setupDragSurface(),this.startDragMouse_=this.horizontal_?t.clientX:t.clientY,e.Scrollbar.onMouseUpWrapper_=e.browserEvents.conditionalBind(document,"mouseup",this,this.onMouseUpHandle_),e.Scrollbar.onMouseMoveWrapper_=e.browserEvents.conditionalBind(document,"mousemove",this,this.onMouseMoveHandle_),t.stopPropagation(),t.preventDefault())},e.Scrollbar.prototype.onMouseMoveHandle_=function(t){this.setHandlePosition(this.constrainHandlePosition_(this.startDragHandle+((this.horizontal_?t.clientX:t.clientY)-this.startDragMouse_))),this.updateMetrics_()},e.Scrollbar.prototype.onMouseUpHandle_=function(){this.workspace_.resetDragSurface(),e.Touch.clearTouchIdentifier(),this.cleanUp_()},e.Scrollbar.prototype.cleanUp_=function(){e.hideChaff(!0),e.Scrollbar.onMouseUpWrapper_&&(e.browserEvents.unbind(e.Scrollbar.onMouseUpWrapper_),e.Scrollbar.onMouseUpWrapper_=null),e.Scrollbar.onMouseMoveWrapper_&&(e.browserEvents.unbind(e.Scrollbar.onMouseMoveWrapper_),e.Scrollbar.onMouseMoveWrapper_=null)},e.Scrollbar.prototype.getRatio_=function(){var t=this.handlePosition_/(this.scrollbarLength_-this.handleLength_);return isNaN(t)&&(t=0),t},e.Scrollbar.prototype.updateMetrics_=function(){var t=this.getRatio_(),n={};this.horizontal_?n.x=t:n.y=t,this.workspace_.setMetrics(n)},e.Scrollbar.prototype.set=function(t,n){this.setHandlePosition(this.constrainHandlePosition_(t*this.ratio)),(n||void 0===n)&&this.updateMetrics_()},e.Scrollbar.prototype.setOrigin=function(t,n){this.origin_=new e.utils.Coordinate(t,n)},e.Tooltip={},e.Tooltip.visible=!1,e.Tooltip.blocked_=!1,e.Tooltip.LIMIT=50,e.Tooltip.mouseOutPid_=0,e.Tooltip.showPid_=0,e.Tooltip.lastX_=0,e.Tooltip.lastY_=0,e.Tooltip.element_=null,e.Tooltip.poisonedElement_=null,e.Tooltip.OFFSET_X=0,e.Tooltip.OFFSET_Y=10,e.Tooltip.RADIUS_OK=10,e.Tooltip.HOVER_MS=750,e.Tooltip.MARGINS=5,e.Tooltip.DIV=null,e.Tooltip.getTooltipOfObject=function(t){if(t=e.Tooltip.getTargetObject_(t)){for(t=t.tooltip;"function"==typeof t;)t=t();if("string"!=typeof t)throw Error("Tooltip function must return a string.");return t}return""},e.Tooltip.getTargetObject_=function(t){for(;t&&t.tooltip;){if("string"==typeof t.tooltip||"function"==typeof t.tooltip)return t;t=t.tooltip}return null},e.Tooltip.createDom=function(){e.Tooltip.DIV||(e.Tooltip.DIV=document.createElement("div"),e.Tooltip.DIV.className="blocklyTooltipDiv",(e.parentContainer||document.body).appendChild(e.Tooltip.DIV))},e.Tooltip.bindMouseEvents=function(t){t.mouseOverWrapper_=e.browserEvents.bind(t,"mouseover",null,e.Tooltip.onMouseOver_),t.mouseOutWrapper_=e.browserEvents.bind(t,"mouseout",null,e.Tooltip.onMouseOut_),t.addEventListener("mousemove",e.Tooltip.onMouseMove_,!1)},e.Tooltip.unbindMouseEvents=function(t){t&&(e.browserEvents.unbind(t.mouseOverWrapper_),e.browserEvents.unbind(t.mouseOutWrapper_),t.removeEventListener("mousemove",e.Tooltip.onMouseMove_))},e.Tooltip.onMouseOver_=function(t){e.Tooltip.blocked_||(t=e.Tooltip.getTargetObject_(t.currentTarget),e.Tooltip.element_!=t&&(e.Tooltip.hide(),e.Tooltip.poisonedElement_=null,e.Tooltip.element_=t),clearTimeout(e.Tooltip.mouseOutPid_))},e.Tooltip.onMouseOut_=function(t){e.Tooltip.blocked_||(e.Tooltip.mouseOutPid_=setTimeout(function(){e.Tooltip.element_=null,e.Tooltip.poisonedElement_=null,e.Tooltip.hide()},1),clearTimeout(e.Tooltip.showPid_))},e.Tooltip.onMouseMove_=function(t){if(e.Tooltip.element_&&e.Tooltip.element_.tooltip&&!e.Tooltip.blocked_)if(e.Tooltip.visible){var n=e.Tooltip.lastX_-t.pageX;t=e.Tooltip.lastY_-t.pageY,Math.sqrt(n*n+t*t)>e.Tooltip.RADIUS_OK&&e.Tooltip.hide()}else e.Tooltip.poisonedElement_!=e.Tooltip.element_&&(clearTimeout(e.Tooltip.showPid_),e.Tooltip.lastX_=t.pageX,e.Tooltip.lastY_=t.pageY,e.Tooltip.showPid_=setTimeout(e.Tooltip.show_,e.Tooltip.HOVER_MS))},e.Tooltip.dispose=function(){e.Tooltip.element_=null,e.Tooltip.poisonedElement_=null,e.Tooltip.hide()},e.Tooltip.hide=function(){e.Tooltip.visible&&(e.Tooltip.visible=!1,e.Tooltip.DIV&&(e.Tooltip.DIV.style.display="none")),e.Tooltip.showPid_&&clearTimeout(e.Tooltip.showPid_)},e.Tooltip.block=function(){e.Tooltip.hide(),e.Tooltip.blocked_=!0},e.Tooltip.unblock=function(){e.Tooltip.blocked_=!1},e.Tooltip.show_=function(){if(!e.Tooltip.blocked_&&(e.Tooltip.poisonedElement_=e.Tooltip.element_,e.Tooltip.DIV)){e.Tooltip.DIV.textContent="";var t=e.Tooltip.getTooltipOfObject(e.Tooltip.element_);t=(t=e.utils.string.wrap(t,e.Tooltip.LIMIT)).split("\n");for(var n=0;n<t.length;n++){var r=document.createElement("div");r.appendChild(document.createTextNode(t[n])),e.Tooltip.DIV.appendChild(r)}t=e.Tooltip.element_.RTL,n=document.documentElement.clientWidth,r=document.documentElement.clientHeight,e.Tooltip.DIV.style.direction=t?"rtl":"ltr",e.Tooltip.DIV.style.display="block",e.Tooltip.visible=!0;var s=e.Tooltip.lastX_;s=t?s-(e.Tooltip.OFFSET_X+e.Tooltip.DIV.offsetWidth):s+e.Tooltip.OFFSET_X;var u=e.Tooltip.lastY_+e.Tooltip.OFFSET_Y;u+e.Tooltip.DIV.offsetHeight>r+window.scrollY&&(u-=e.Tooltip.DIV.offsetHeight+2*e.Tooltip.OFFSET_Y),t?s=Math.max(e.Tooltip.MARGINS-window.scrollX,s):s+e.Tooltip.DIV.offsetWidth>n+window.scrollX-2*e.Tooltip.MARGINS&&(s=n-e.Tooltip.DIV.offsetWidth-2*e.Tooltip.MARGINS),e.Tooltip.DIV.style.top=u+"px",e.Tooltip.DIV.style.left=s+"px"}},e.utils.aria={},e.utils.aria.ARIA_PREFIX_="aria-",e.utils.aria.ROLE_ATTRIBUTE_="role",e.utils.aria.Role={GRID:"grid",GRIDCELL:"gridcell",GROUP:"group",LISTBOX:"listbox",MENU:"menu",MENUITEM:"menuitem",MENUITEMCHECKBOX:"menuitemcheckbox",OPTION:"option",PRESENTATION:"presentation",ROW:"row",TREE:"tree",TREEITEM:"treeitem"},e.utils.aria.State={ACTIVEDESCENDANT:"activedescendant",COLCOUNT:"colcount",DISABLED:"disabled",EXPANDED:"expanded",INVALID:"invalid",LABEL:"label",LABELLEDBY:"labelledby",LEVEL:"level",ORIENTATION:"orientation",POSINSET:"posinset",ROWCOUNT:"rowcount",SELECTED:"selected",SETSIZE:"setsize",VALUEMAX:"valuemax",VALUEMIN:"valuemin"},e.utils.aria.setRole=function(t,n){t.setAttribute(e.utils.aria.ROLE_ATTRIBUTE_,n)},e.utils.aria.setState=function(t,n,r){Array.isArray(r)&&(r=r.join(" ")),t.setAttribute(e.utils.aria.ARIA_PREFIX_+n,r)},e.IASTNodeLocation=function(){},e.IASTNodeLocationSvg=function(){},e.IASTNodeLocationWithBlock=function(){},e.IKeyboardAccessible=function(){},e.utils.deprecation={},e.utils.deprecation.warn=function(t,n,r,s){t=t+" was deprecated on "+n+" and will be deleted on "+r+".",s&&(t+="\nUse "+s+" instead."),console.warn(t)},e.Connection=function(t,n){this.sourceBlock_=t,this.type=n},e.Connection.CAN_CONNECT=0,e.Connection.REASON_SELF_CONNECTION=1,e.Connection.REASON_WRONG_TYPE=2,e.Connection.REASON_TARGET_NULL=3,e.Connection.REASON_CHECKS_FAILED=4,e.Connection.REASON_DIFFERENT_WORKSPACES=5,e.Connection.REASON_SHADOW_PARENT=6,e.Connection.REASON_DRAG_CHECKS_FAILED=7,e.Connection.prototype.targetConnection=null,e.Connection.prototype.disposed=!1,e.Connection.prototype.check_=null,e.Connection.prototype.shadowDom_=null,e.Connection.prototype.x=0,e.Connection.prototype.y=0,e.Connection.prototype.connect_=function(t){var B,n=e.connectionTypes.INPUT_VALUE,r=this.getSourceBlock(),s=t.getSourceBlock();if(t.isConnected()&&t.disconnect(),this.isConnected()){var u=this.getShadowDom(!0);this.shadowDom_=null;var y=this.targetBlock();if(y.isShadow())y.dispose(!1);else{this.disconnect();var x=y}this.shadowDom_=u}e.Events.isEnabled()&&(B=new(e.Events.get(e.Events.BLOCK_MOVE))(s)),e.Connection.connectReciprocally_(this,t),s.setParent(r),B&&(B.recordNew(),e.Events.fire(B)),x&&((s=e.Connection.getConnectionForOrphanedConnection(s,t=this.type===n?x.outputConnection:x.previousConnection))?t.connect(s):t.onFailedConnect(this))},e.Connection.prototype.dispose=function(){if(this.isConnected()){this.setShadowDom(null);var t=this.targetBlock();t&&t.unplug()}this.disposed=!0},e.Connection.prototype.getSourceBlock=function(){return this.sourceBlock_},e.Connection.prototype.isSuperior=function(){return this.type==e.connectionTypes.INPUT_VALUE||this.type==e.connectionTypes.NEXT_STATEMENT},e.Connection.prototype.isConnected=function(){return!!this.targetConnection},e.Connection.prototype.canConnectWithReason=function(t){return e.utils.deprecation.warn("Connection.prototype.canConnectWithReason","July 2020","July 2021","the workspace's connection checker"),this.getConnectionChecker().canConnectWithReason(this,t,!1)},e.Connection.prototype.checkConnection=function(t){e.utils.deprecation.warn("Connection.prototype.checkConnection","July 2020","July 2021","the workspace's connection checker");var n=this.getConnectionChecker(),r=n.canConnectWithReason(this,t,!1);if(r!=e.Connection.CAN_CONNECT)throw Error(n.getErrorMessage(r,this,t))},e.Connection.prototype.getConnectionChecker=function(){return this.sourceBlock_.workspace.connectionChecker},e.Connection.prototype.isConnectionAllowed=function(t){return e.utils.deprecation.warn("Connection.prototype.isConnectionAllowed","July 2020","July 2021","the workspace's connection checker"),this.getConnectionChecker().canConnect(this,t,!0)},e.Connection.prototype.onFailedConnect=function(t){},e.Connection.prototype.connect=function(t){if(this.targetConnection!=t&&this.getConnectionChecker().canConnect(this,t,!1)){var n=e.Events.getGroup();n||e.Events.setGroup(!0),this.isSuperior()?this.connect_(t):t.connect_(this),n||e.Events.setGroup(!1)}},e.Connection.connectReciprocally_=function(t,n){if(!t||!n)throw Error("Cannot connect null connections.");t.targetConnection=n,n.targetConnection=t},e.Connection.getSingleConnection_=function(t,n){for(var y,r=null,s=(n=n.outputConnection).getConnectionChecker(),u=0;y=t.inputList[u];u++)if((y=y.connection)&&s.canConnect(n,y,!1)){if(r)return null;r=y}return r},e.Connection.getConnectionForOrphanedOutput_=function(t,n){for(var r;r=e.Connection.getSingleConnection_(t,n);)if(!(t=r.targetBlock())||t.isShadow())return r;return null},e.Connection.getConnectionForOrphanedConnection=function(t,n){if(n.type===e.connectionTypes.OUTPUT_VALUE)return e.Connection.getConnectionForOrphanedOutput_(t,n.getSourceBlock());t=t.lastConnectionInStack(!0);var r=n.getConnectionChecker();return t&&r.canConnect(n,t,!1)?t:null},e.Connection.prototype.disconnect=function(){var t=this.targetConnection;if(!t)throw Error("Source connection not connected.");if(t.targetConnection!=this)throw Error("Target connection not connected to source connection.");if(this.isSuperior()){var n=this.sourceBlock_,r=t.getSourceBlock();t=this}else n=t.getSourceBlock(),r=this.sourceBlock_;var s=e.Events.getGroup();s||e.Events.setGroup(!0),this.disconnectInternal_(n,r),r.isShadow()||t.respawnShadow_(),s||e.Events.setGroup(!1)},e.Connection.prototype.disconnectInternal_=function(t,n){var r;e.Events.isEnabled()&&(r=new(e.Events.get(e.Events.BLOCK_MOVE))(n)),this.targetConnection=this.targetConnection.targetConnection=null,n.setParent(null),r&&(r.recordNew(),e.Events.fire(r))},e.Connection.prototype.respawnShadow_=function(){var t=this.getSourceBlock(),n=this.getShadowDom();if(t.workspace&&n)if((t=e.Xml.domToBlock(n,t.workspace)).outputConnection)this.connect(t.outputConnection);else{if(!t.previousConnection)throw Error("Child block does not have output or previous statement.");this.connect(t.previousConnection)}},e.Connection.prototype.targetBlock=function(){return this.isConnected()?this.targetConnection.getSourceBlock():null},e.Connection.prototype.checkType=function(t){return e.utils.deprecation.warn("Connection.prototype.checkType","October 2019","January 2021","the workspace's connection checker"),this.getConnectionChecker().canConnect(this,t,!1)},e.Connection.prototype.checkType_=function(t){return e.utils.deprecation.warn("Connection.prototype.checkType_","October 2019","January 2021","the workspace's connection checker"),this.checkType(t)},e.Connection.prototype.onCheckChanged_=function(){!this.isConnected()||this.targetConnection&&this.getConnectionChecker().canConnect(this,this.targetConnection,!1)||(this.isSuperior()?this.targetBlock():this.sourceBlock_).unplug()},e.Connection.prototype.setCheck=function(t){return t?(Array.isArray(t)||(t=[t]),this.check_=t,this.onCheckChanged_()):this.check_=null,this},e.Connection.prototype.getCheck=function(){return this.check_},e.Connection.prototype.setShadowDom=function(t){this.shadowDom_=t,(t=this.targetBlock())?t.isShadow()&&(t.dispose(!1),this.respawnShadow_()):this.respawnShadow_()},e.Connection.prototype.getShadowDom=function(t){return t&&this.targetBlock().isShadow()?e.Xml.blockToDom(this.targetBlock()):this.shadowDom_},e.Connection.prototype.neighbours=function(t){return[]},e.Connection.prototype.getParentInput=function(){for(var t=null,n=this.sourceBlock_.inputList,r=0;r<n.length;r++)if(n[r].connection===this){t=n[r];break}return t},e.Connection.prototype.toString=function(){var t=this.sourceBlock_;if(!t)return"Orphan Connection";if(t.outputConnection==this)var n="Output Connection of ";else if(t.previousConnection==this)n="Previous Connection of ";else if(t.nextConnection==this)n="Next Connection of ";else{n=null;for(var s,r=0;s=t.inputList[r];r++)if(s.connection==this){n=s;break}if(!n)return console.warn("Connection not actually connected to sourceBlock_"),"Orphan Connection";n='Input "'+n.name+'" connection on '}return n+t.toDevString()},e.IConnectionChecker=function(){},e.ConnectionChecker=function(){},e.ConnectionChecker.prototype.canConnect=function(t,n,r,s){return this.canConnectWithReason(t,n,r,s)==e.Connection.CAN_CONNECT},e.ConnectionChecker.prototype.canConnectWithReason=function(t,n,r,s){var u=this.doSafetyChecks(t,n);return u!=e.Connection.CAN_CONNECT?u:this.doTypeChecks(t,n)?r&&!this.doDragChecks(t,n,s||0)?e.Connection.REASON_DRAG_CHECKS_FAILED:e.Connection.CAN_CONNECT:e.Connection.REASON_CHECKS_FAILED},e.ConnectionChecker.prototype.getErrorMessage=function(t,n,r){switch(t){case e.Connection.REASON_SELF_CONNECTION:return"Attempted to connect a block to itself.";case e.Connection.REASON_DIFFERENT_WORKSPACES:return"Blocks not on same workspace.";case e.Connection.REASON_WRONG_TYPE:return"Attempt to connect incompatible types.";case e.Connection.REASON_TARGET_NULL:return"Target connection is null.";case e.Connection.REASON_CHECKS_FAILED:return"Connection checks failed. "+n+" expected "+n.getCheck()+", found "+r.getCheck();case e.Connection.REASON_SHADOW_PARENT:return"Connecting non-shadow to shadow block.";case e.Connection.REASON_DRAG_CHECKS_FAILED:return"Drag checks failed.";default:return"Unknown connection failure: this should never happen!"}},e.ConnectionChecker.prototype.doSafetyChecks=function(t,n){if(!t||!n)return e.Connection.REASON_TARGET_NULL;if(t.isSuperior())var r=t.getSourceBlock(),s=n.getSourceBlock();else s=t.getSourceBlock(),r=n.getSourceBlock();return r==s?e.Connection.REASON_SELF_CONNECTION:n.type!=e.OPPOSITE_TYPE[t.type]?e.Connection.REASON_WRONG_TYPE:r.workspace!==s.workspace?e.Connection.REASON_DIFFERENT_WORKSPACES:r.isShadow()&&!s.isShadow()?e.Connection.REASON_SHADOW_PARENT:e.Connection.CAN_CONNECT},e.ConnectionChecker.prototype.doTypeChecks=function(t,n){if(t=t.getCheck(),n=n.getCheck(),!t||!n)return!0;for(var r=0;r<t.length;r++)if(-1!=n.indexOf(t[r]))return!0;return!1},e.ConnectionChecker.prototype.doDragChecks=function(t,n,r){if(t.distanceFrom(n)>r||n.getSourceBlock().isInsertionMarker())return!1;switch(n.type){case e.connectionTypes.PREVIOUS_STATEMENT:return this.canConnectToPrevious_(t,n);case e.connectionTypes.OUTPUT_VALUE:if(n.isConnected()&&!n.targetBlock().isInsertionMarker()||t.isConnected())return!1;break;case e.connectionTypes.INPUT_VALUE:if(n.isConnected()&&!n.targetBlock().isMovable()&&!n.targetBlock().isShadow())return!1;break;case e.connectionTypes.NEXT_STATEMENT:if(n.isConnected()&&!t.getSourceBlock().nextConnection&&!n.targetBlock().isShadow()&&n.targetBlock().nextConnection)return!1;break;default:return!1}return-1==e.draggingConnections.indexOf(n)},e.ConnectionChecker.prototype.canConnectToPrevious_=function(t,n){return!(t.targetConnection||-1!=e.draggingConnections.indexOf(n)||n.targetConnection&&(!(t=n.targetBlock()).isInsertionMarker()||t.getPreviousBlock()))},e.registry.register(e.registry.Type.CONNECTION_CHECKER,e.registry.DEFAULT,e.ConnectionChecker),e.VariableMap=function(t){this.variableMap_=Object.create(null),this.workspace=t},e.VariableMap.prototype.clear=function(){this.variableMap_=Object.create(null)},e.VariableMap.prototype.renameVariable=function(t,n){var r=this.getVariable(n,t.type),s=this.workspace.getAllBlocks(!1);e.Events.setGroup(!0);try{r&&r.getId()!=t.getId()?this.renameVariableWithConflict_(t,n,r,s):this.renameVariableAndUses_(t,n,s)}finally{e.Events.setGroup(!1)}},e.VariableMap.prototype.renameVariableById=function(t,n){var r=this.getVariableById(t);if(!r)throw Error("Tried to rename a variable that didn't exist. ID: "+t);this.renameVariable(r,n)},e.VariableMap.prototype.renameVariableAndUses_=function(t,n,r){for(e.Events.fire(new(e.Events.get(e.Events.VAR_RENAME))(t,n)),t.name=n,n=0;n<r.length;n++)r[n].updateVarName(t)},e.VariableMap.prototype.renameVariableWithConflict_=function(t,n,r,s){var u=t.type;for(n!=r.name&&this.renameVariableAndUses_(r,n,s),n=0;n<s.length;n++)s[n].renameVarById(t.getId(),r.getId());e.Events.fire(new(e.Events.get(e.Events.VAR_DELETE))(t)),t=this.getVariablesOfType(u).indexOf(t),this.variableMap_[u].splice(t,1)},e.VariableMap.prototype.createVariable=function(t,n,r){var s=this.getVariable(t,n);if(s){if(r&&s.getId()!=r)throw Error('Variable "'+t+'" is already in use and its id is "'+s.getId()+'" which conflicts with the passed in id, "'+r+'".');return s}if(r&&this.getVariableById(r))throw Error('Variable id, "'+r+'", is already in use.');return s=r||e.utils.genUid(),s=new e.VariableModel(this.workspace,t,n=n||"",s),(t=this.variableMap_[n]||[]).push(s),delete this.variableMap_[n],this.variableMap_[n]=t,s},e.VariableMap.prototype.deleteVariable=function(t){for(var s,n=this.variableMap_[t.type],r=0;s=n[r];r++)if(s.getId()==t.getId()){n.splice(r,1),e.Events.fire(new(e.Events.get(e.Events.VAR_DELETE))(t));break}},e.VariableMap.prototype.deleteVariableById=function(t){var n=this.getVariableById(t);if(n){var u,r=n.name,s=this.getVariableUsesById(t);for(t=0;u=s[t];t++)if("procedures_defnoreturn"==u.type||"procedures_defreturn"==u.type)return t=u.getFieldValue("NAME"),r=e.Msg.CANNOT_DELETE_VARIABLE_PROCEDURE.replace("%1",r).replace("%2",t),void e.alert(r);var y=this;1<s.length?(r=e.Msg.DELETE_VARIABLE_CONFIRMATION.replace("%1",String(s.length)).replace("%2",r),e.confirm(r,function(x){x&&n&&y.deleteVariableInternal(n,s)})):y.deleteVariableInternal(n,s)}else console.warn("Can't delete non-existent variable: "+t)},e.VariableMap.prototype.deleteVariableInternal=function(t,n){var r=e.Events.getGroup();r||e.Events.setGroup(!0);try{for(var s=0;s<n.length;s++)n[s].dispose(!0);this.deleteVariable(t)}finally{r||e.Events.setGroup(!1)}},e.VariableMap.prototype.getVariable=function(t,n){if(n=this.variableMap_[n||""])for(var s,r=0;s=n[r];r++)if(e.Names.equals(s.name,t))return s;return null},e.VariableMap.prototype.getVariableById=function(t){for(var n=Object.keys(this.variableMap_),r=0;r<n.length;r++)for(var y,s=n[r],u=0;y=this.variableMap_[s][u];u++)if(y.getId()==t)return y;return null},e.VariableMap.prototype.getVariablesOfType=function(t){return(t=this.variableMap_[t||""])?t.slice():[]},e.VariableMap.prototype.getVariableTypes=function(t){var n={};e.utils.object.mixin(n,this.variableMap_),t&&t.getPotentialVariableMap()&&e.utils.object.mixin(n,t.getPotentialVariableMap().variableMap_),t=Object.keys(n),n=!1;for(var r=0;r<t.length;r++)""==t[r]&&(n=!0);return n||t.push(""),t},e.VariableMap.prototype.getAllVariables=function(){var n,t=[];for(n in this.variableMap_)t=t.concat(this.variableMap_[n]);return t},e.VariableMap.prototype.getAllVariableNames=function(){var n,t=[];for(n in this.variableMap_)for(var u,r=this.variableMap_[n],s=0;u=r[s];s++)t.push(u.name);return t},e.VariableMap.prototype.getVariableUsesById=function(t){for(var n=[],r=this.workspace.getAllBlocks(!1),s=0;s<r.length;s++){var u=r[s].getVarModels();if(u)for(var y=0;y<u.length;y++)u[y].getId()==t&&n.push(r[s])}return n},e.Workspace=function(t){this.id=e.utils.genUid(),e.Workspace.WorkspaceDB_[this.id]=this,this.options=t||new e.Options({}),this.RTL=!!this.options.RTL,this.horizontalLayout=!!this.options.horizontalLayout,this.toolboxPosition=this.options.toolboxPosition,this.connectionChecker=new(e.registry.getClassFromOptions(e.registry.Type.CONNECTION_CHECKER,this.options,!0))(this),this.topBlocks_=[],this.topComments_=[],this.commentDB_=Object.create(null),this.listeners_=[],this.undoStack_=[],this.redoStack_=[],this.blockDB_=Object.create(null),this.typedBlocksDB_=Object.create(null),this.variableMap_=new e.VariableMap(this),this.potentialVariableMap_=null},e.Workspace.prototype.rendered=!1,e.Workspace.prototype.isClearing=!1,e.Workspace.prototype.MAX_UNDO=1024,e.Workspace.prototype.connectionDBList=null,e.Workspace.prototype.dispose=function(){this.listeners_.length=0,this.clear(),delete e.Workspace.WorkspaceDB_[this.id]},e.Workspace.SCAN_ANGLE=3,e.Workspace.prototype.sortObjects_=function(t,n){return t=t.getRelativeToSurfaceXY(),n=n.getRelativeToSurfaceXY(),t.y+e.Workspace.prototype.sortObjects_.offset*t.x-(n.y+e.Workspace.prototype.sortObjects_.offset*n.x)},e.Workspace.prototype.addTopBlock=function(t){this.topBlocks_.push(t)},e.Workspace.prototype.removeTopBlock=function(t){if(!e.utils.arrayRemove(this.topBlocks_,t))throw Error("Block not present in workspace's list of top-most blocks.")},e.Workspace.prototype.getTopBlocks=function(t){var n=[].concat(this.topBlocks_);return t&&1<n.length&&(this.sortObjects_.offset=Math.sin(e.utils.math.toRadians(e.Workspace.SCAN_ANGLE)),this.RTL&&(this.sortObjects_.offset*=-1),n.sort(this.sortObjects_)),n},e.Workspace.prototype.addTypedBlock=function(t){this.typedBlocksDB_[t.type]||(this.typedBlocksDB_[t.type]=[]),this.typedBlocksDB_[t.type].push(t)},e.Workspace.prototype.removeTypedBlock=function(t){this.typedBlocksDB_[t.type].splice(this.typedBlocksDB_[t.type].indexOf(t),1),this.typedBlocksDB_[t.type].length||delete this.typedBlocksDB_[t.type]},e.Workspace.prototype.getBlocksByType=function(t,n){return this.typedBlocksDB_[t]?(t=this.typedBlocksDB_[t].slice(0),n&&1<t.length&&(this.sortObjects_.offset=Math.sin(e.utils.math.toRadians(e.Workspace.SCAN_ANGLE)),this.RTL&&(this.sortObjects_.offset*=-1),t.sort(this.sortObjects_)),t):[]},e.Workspace.prototype.addTopComment=function(t){this.topComments_.push(t),this.commentDB_[t.id]&&console.warn('Overriding an existing comment on this workspace, with id "'+t.id+'"'),this.commentDB_[t.id]=t},e.Workspace.prototype.removeTopComment=function(t){if(!e.utils.arrayRemove(this.topComments_,t))throw Error("Comment not present in workspace's list of top-most comments.");delete this.commentDB_[t.id]},e.Workspace.prototype.getTopComments=function(t){var n=[].concat(this.topComments_);return t&&1<n.length&&(this.sortObjects_.offset=Math.sin(e.utils.math.toRadians(e.Workspace.SCAN_ANGLE)),this.RTL&&(this.sortObjects_.offset*=-1),n.sort(this.sortObjects_)),n},e.Workspace.prototype.getAllBlocks=function(t){if(t){t=this.getTopBlocks(!0);for(var n=[],r=0;r<t.length;r++)n.push.apply(n,t[r].getDescendants(!0))}else for(n=this.getTopBlocks(!1),r=0;r<n.length;r++)n.push.apply(n,n[r].getChildren(!1));return n.filter(function(s){return!s.isInsertionMarker()})},e.Workspace.prototype.clear=function(){this.isClearing=!0;try{var t=e.Events.getGroup();for(t||e.Events.setGroup(!0);this.topBlocks_.length;)this.topBlocks_[0].dispose(!1);for(;this.topComments_.length;)this.topComments_[this.topComments_.length-1].dispose(!1);t||e.Events.setGroup(!1),this.variableMap_.clear(),this.potentialVariableMap_&&this.potentialVariableMap_.clear()}finally{this.isClearing=!1}},e.Workspace.prototype.renameVariableById=function(t,n){this.variableMap_.renameVariableById(t,n)},e.Workspace.prototype.createVariable=function(t,n,r){return this.variableMap_.createVariable(t,n,r)},e.Workspace.prototype.getVariableUsesById=function(t){return this.variableMap_.getVariableUsesById(t)},e.Workspace.prototype.deleteVariableById=function(t){this.variableMap_.deleteVariableById(t)},e.Workspace.prototype.getVariable=function(t,n){return this.variableMap_.getVariable(t,n)},e.Workspace.prototype.getVariableById=function(t){return this.variableMap_.getVariableById(t)},e.Workspace.prototype.getVariablesOfType=function(t){return this.variableMap_.getVariablesOfType(t)},e.Workspace.prototype.getVariableTypes=function(){return this.variableMap_.getVariableTypes(this)},e.Workspace.prototype.getAllVariables=function(){return this.variableMap_.getAllVariables()},e.Workspace.prototype.getAllVariableNames=function(){return this.variableMap_.getAllVariableNames()},e.Workspace.prototype.getWidth=function(){return 0},e.Workspace.prototype.newBlock=function(t,n){return new e.Block(this,t,n)},e.Workspace.prototype.remainingCapacity=function(){return isNaN(this.options.maxBlocks)?1/0:this.options.maxBlocks-this.getAllBlocks(!1).length},e.Workspace.prototype.remainingCapacityOfType=function(t){return this.options.maxInstances?(void 0!==this.options.maxInstances[t]?this.options.maxInstances[t]:1/0)-this.getBlocksByType(t,!1).length:1/0},e.Workspace.prototype.isCapacityAvailable=function(t){if(!this.hasBlockLimits())return!0;var r,n=0;for(r in t){if(t[r]>this.remainingCapacityOfType(r))return!1;n+=t[r]}return!(n>this.remainingCapacity())},e.Workspace.prototype.hasBlockLimits=function(){return this.options.maxBlocks!=1/0||!!this.options.maxInstances},e.Workspace.prototype.getUndoStack=function(){return this.undoStack_},e.Workspace.prototype.getRedoStack=function(){return this.redoStack_},e.Workspace.prototype.undo=function(t){var n=t?this.redoStack_:this.undoStack_,r=t?this.undoStack_:this.redoStack_,s=n.pop();if(s){for(var u=[s];n.length&&s.group&&s.group==n[n.length-1].group;)u.push(n.pop());for(n=0;s=u[n];n++)r.push(s);u=e.Events.filter(u,t),e.Events.recordUndo=!1;try{for(n=0;s=u[n];n++)s.run(t)}finally{e.Events.recordUndo=!0}}},e.Workspace.prototype.clearUndo=function(){this.undoStack_.length=0,this.redoStack_.length=0,e.Events.clearPendingUndo()},e.Workspace.prototype.addChangeListener=function(t){return this.listeners_.push(t),t},e.Workspace.prototype.removeChangeListener=function(t){e.utils.arrayRemove(this.listeners_,t)},e.Workspace.prototype.fireChangeListener=function(t){if(t.recordUndo)for(this.undoStack_.push(t),this.redoStack_.length=0;this.undoStack_.length>this.MAX_UNDO&&0<=this.MAX_UNDO;)this.undoStack_.shift();for(var r,n=0;r=this.listeners_[n];n++)r(t)},e.Workspace.prototype.getBlockById=function(t){return this.blockDB_[t]||null},e.Workspace.prototype.setBlockById=function(t,n){this.blockDB_[t]=n},e.Workspace.prototype.removeBlockById=function(t){delete this.blockDB_[t]},e.Workspace.prototype.getCommentById=function(t){return this.commentDB_[t]||null},e.Workspace.prototype.allInputsFilled=function(t){for(var s,n=this.getTopBlocks(!1),r=0;s=n[r];r++)if(!s.allInputsFilled(t))return!1;return!0},e.Workspace.prototype.getPotentialVariableMap=function(){return this.potentialVariableMap_},e.Workspace.prototype.createPotentialVariableMap=function(){this.potentialVariableMap_=new e.VariableMap(this)},e.Workspace.prototype.getVariableMap=function(){return this.variableMap_},e.Workspace.prototype.setVariableMap=function(t){this.variableMap_=t},e.Workspace.WorkspaceDB_=Object.create(null),e.Workspace.getById=function(t){return e.Workspace.WorkspaceDB_[t]||null},e.Workspace.getAll=function(){var n,t=[];for(n in e.Workspace.WorkspaceDB_)t.push(e.Workspace.WorkspaceDB_[n]);return t},e.WorkspaceDragSurfaceSvg=function(t){this.container_=t,this.createDom()},e.WorkspaceDragSurfaceSvg.prototype.SVG_=null,e.WorkspaceDragSurfaceSvg.prototype.container_=null,e.WorkspaceDragSurfaceSvg.prototype.createDom=function(){this.SVG_||(this.SVG_=e.utils.dom.createSvgElement(e.utils.Svg.SVG,{xmlns:e.utils.dom.SVG_NS,"xmlns:html":e.utils.dom.HTML_NS,"xmlns:xlink":e.utils.dom.XLINK_NS,version:"1.1",class:"blocklyWsDragSurface blocklyOverflowVisible"},null),this.container_.appendChild(this.SVG_))},e.WorkspaceDragSurfaceSvg.prototype.translateSurface=function(t,n){t=t.toFixed(0),n=n.toFixed(0),this.SVG_.style.display="block",e.utils.dom.setCssTransform(this.SVG_,"translate3d("+t+"px, "+n+"px, 0px)")},e.WorkspaceDragSurfaceSvg.prototype.getSurfaceTranslation=function(){return e.utils.getRelativeXY(this.SVG_)},e.WorkspaceDragSurfaceSvg.prototype.clearAndHide=function(t){if(!t)throw Error("Couldn't clear and hide the drag surface: missing new surface.");var n=this.SVG_.childNodes[0],r=this.SVG_.childNodes[1];if(!(n&&r&&e.utils.dom.hasClass(n,"blocklyBlockCanvas")&&e.utils.dom.hasClass(r,"blocklyBubbleCanvas")))throw Error("Couldn't clear and hide the drag surface. A node was missing.");if(null!=this.previousSibling_?e.utils.dom.insertAfter(n,this.previousSibling_):t.insertBefore(n,t.firstChild),e.utils.dom.insertAfter(r,n),this.SVG_.style.display="none",this.SVG_.childNodes.length)throw Error("Drag surface was not cleared.");e.utils.dom.setCssTransform(this.SVG_,""),this.previousSibling_=null},e.WorkspaceDragSurfaceSvg.prototype.setContentsAndShow=function(t,n,r,s,u,y){if(this.SVG_.childNodes.length)throw Error("Already dragging a block.");this.previousSibling_=r,t.setAttribute("transform","translate(0, 0) scale("+y+")"),n.setAttribute("transform","translate(0, 0) scale("+y+")"),this.SVG_.setAttribute("width",s),this.SVG_.setAttribute("height",u),this.SVG_.appendChild(t),this.SVG_.appendChild(n),this.SVG_.style.display="block"},e.blockRendering={},e.blockRendering.useDebugger=!1,e.blockRendering.register=function(t,n){e.registry.register(e.registry.Type.RENDERER,t,n)},e.blockRendering.unregister=function(t){e.registry.unregister(e.registry.Type.RENDERER,t)},e.blockRendering.startDebugger=function(){e.blockRendering.useDebugger=!0},e.blockRendering.stopDebugger=function(){e.blockRendering.useDebugger=!1},e.blockRendering.init=function(t,n,r){return(t=new(e.registry.getClass(e.registry.Type.RENDERER,t))(t)).init(n,r),t},e.ASTNode=function(t,n,r){if(!n)throw Error("Cannot create a node without a location.");this.type_=t,this.isConnection_=e.ASTNode.isConnectionType_(t),this.location_=n,this.wsCoordinate_=null,this.processParams_(r||null)},e.ASTNode.types={FIELD:"field",BLOCK:"block",INPUT:"input",OUTPUT:"output",NEXT:"next",PREVIOUS:"previous",STACK:"stack",WORKSPACE:"workspace"},e.ASTNode.NAVIGATE_ALL_FIELDS=!1,e.ASTNode.DEFAULT_OFFSET_Y=-20,e.ASTNode.isConnectionType_=function(t){switch(t){case e.ASTNode.types.PREVIOUS:case e.ASTNode.types.NEXT:case e.ASTNode.types.INPUT:case e.ASTNode.types.OUTPUT:return!0}return!1},e.ASTNode.createFieldNode=function(t){return t?new e.ASTNode(e.ASTNode.types.FIELD,t):null},e.ASTNode.createConnectionNode=function(t){if(!t)return null;var n=t.type;return n==e.connectionTypes.INPUT_VALUE||n==e.connectionTypes.NEXT_STATEMENT&&t.getParentInput()?e.ASTNode.createInputNode(t.getParentInput()):n==e.connectionTypes.NEXT_STATEMENT?new e.ASTNode(e.ASTNode.types.NEXT,t):n==e.connectionTypes.OUTPUT_VALUE?new e.ASTNode(e.ASTNode.types.OUTPUT,t):n==e.connectionTypes.PREVIOUS_STATEMENT?new e.ASTNode(e.ASTNode.types.PREVIOUS,t):null},e.ASTNode.createInputNode=function(t){return t&&t.connection?new e.ASTNode(e.ASTNode.types.INPUT,t.connection):null},e.ASTNode.createBlockNode=function(t){return t?new e.ASTNode(e.ASTNode.types.BLOCK,t):null},e.ASTNode.createStackNode=function(t){return t?new e.ASTNode(e.ASTNode.types.STACK,t):null},e.ASTNode.createWorkspaceNode=function(t,n){return n&&t?new e.ASTNode(e.ASTNode.types.WORKSPACE,t,{wsCoordinate:n}):null},e.ASTNode.createTopNode=function(t){var n=t.previousConnection||t.outputConnection;return n?e.ASTNode.createConnectionNode(n):e.ASTNode.createBlockNode(t)},e.ASTNode.prototype.processParams_=function(t){t&&t.wsCoordinate&&(this.wsCoordinate_=t.wsCoordinate)},e.ASTNode.prototype.getLocation=function(){return this.location_},e.ASTNode.prototype.getType=function(){return this.type_},e.ASTNode.prototype.getWsCoordinate=function(){return this.wsCoordinate_},e.ASTNode.prototype.isConnection=function(){return this.isConnection_},e.ASTNode.prototype.findNextForInput_=function(){var r,t=this.location_.getParentInput(),n=t.getSourceBlock();for(t=n.inputList.indexOf(t)+1;r=n.inputList[t];t++){for(var y,s=r.fieldRow,u=0;y=s[u];u++)if(y.isClickable()||e.ASTNode.NAVIGATE_ALL_FIELDS)return e.ASTNode.createFieldNode(y);if(r.connection)return e.ASTNode.createInputNode(r)}return null},e.ASTNode.prototype.findNextForField_=function(){var t=this.location_,n=t.getParentInput(),r=t.getSourceBlock(),s=r.inputList.indexOf(n);for(t=n.fieldRow.indexOf(t)+1;n=r.inputList[s];s++){for(var u=n.fieldRow;t<u.length;){if(u[t].isClickable()||e.ASTNode.NAVIGATE_ALL_FIELDS)return e.ASTNode.createFieldNode(u[t]);t++}if(t=0,n.connection)return e.ASTNode.createInputNode(n)}return null},e.ASTNode.prototype.findPrevForInput_=function(){for(var s,t=this.location_.getParentInput(),n=t.getSourceBlock(),r=n.inputList.indexOf(t);s=n.inputList[r];r--){if(s.connection&&s!==t)return e.ASTNode.createInputNode(s);for(var y,u=(s=s.fieldRow).length-1;y=s[u];u--)if(y.isClickable()||e.ASTNode.NAVIGATE_ALL_FIELDS)return e.ASTNode.createFieldNode(y)}return null},e.ASTNode.prototype.findPrevForField_=function(){var u,t=this.location_,n=t.getParentInput(),r=t.getSourceBlock(),s=r.inputList.indexOf(n);for(t=n.fieldRow.indexOf(t)-1;u=r.inputList[s];s--){if(u.connection&&u!==n)return e.ASTNode.createInputNode(u);for(u=u.fieldRow;-1<t;){if(u[t].isClickable()||e.ASTNode.NAVIGATE_ALL_FIELDS)return e.ASTNode.createFieldNode(u[t]);t--}0<=s-1&&(t=r.inputList[s-1].fieldRow.length-1)}return null},e.ASTNode.prototype.navigateBetweenStacks_=function(t){var n=this.getLocation();if(n instanceof e.Block||(n=n.getSourceBlock()),!n||!n.workspace)return null;var r=n.getRootBlock();n=r.workspace.getTopBlocks(!0);for(var u,s=0;u=n[s];s++)if(r.id==u.id)return-1==(t=s+(t?1:-1))||t==n.length?null:e.ASTNode.createStackNode(n[t]);throw Error("Couldn't find "+(t?"next":"previous")+" stack?!")},e.ASTNode.prototype.findTopASTNodeForBlock_=function(t){var n=t.previousConnection||t.outputConnection;return n?e.ASTNode.createConnectionNode(n):e.ASTNode.createBlockNode(t)},e.ASTNode.prototype.getOutAstNodeForBlock_=function(t){if(!t)return null;var n=(t=t.getTopStackBlock()).previousConnection||t.outputConnection;return n&&n.targetConnection&&n.targetConnection.getParentInput()?e.ASTNode.createInputNode(n.targetConnection.getParentInput()):e.ASTNode.createStackNode(t)},e.ASTNode.prototype.findFirstFieldOrInput_=function(t){t=t.inputList;for(var r,n=0;r=t[n];n++){for(var y,s=r.fieldRow,u=0;y=s[u];u++)if(y.isClickable()||e.ASTNode.NAVIGATE_ALL_FIELDS)return e.ASTNode.createFieldNode(y);if(r.connection)return e.ASTNode.createInputNode(r)}return null},e.ASTNode.prototype.getSourceBlock=function(){return this.getType()===e.ASTNode.types.BLOCK||this.getType()===e.ASTNode.types.STACK?this.getLocation():this.getType()===e.ASTNode.types.WORKSPACE?null:this.getLocation().getSourceBlock()},e.ASTNode.prototype.next=function(){switch(this.type_){case e.ASTNode.types.STACK:return this.navigateBetweenStacks_(!0);case e.ASTNode.types.OUTPUT:var t=this.location_;return e.ASTNode.createBlockNode(t.getSourceBlock());case e.ASTNode.types.FIELD:return this.findNextForField_();case e.ASTNode.types.INPUT:return this.findNextForInput_();case e.ASTNode.types.BLOCK:return e.ASTNode.createConnectionNode(this.location_.nextConnection);case e.ASTNode.types.PREVIOUS:return e.ASTNode.createBlockNode((t=this.location_).getSourceBlock());case e.ASTNode.types.NEXT:return e.ASTNode.createConnectionNode((t=this.location_).targetConnection)}return null},e.ASTNode.prototype.in=function(){switch(this.type_){case e.ASTNode.types.WORKSPACE:var t=this.location_.getTopBlocks(!0);if(0<t.length)return e.ASTNode.createStackNode(t[0]);break;case e.ASTNode.types.STACK:return this.findTopASTNodeForBlock_(t=this.location_);case e.ASTNode.types.BLOCK:return this.findFirstFieldOrInput_(t=this.location_);case e.ASTNode.types.INPUT:return e.ASTNode.createConnectionNode(this.location_.targetConnection)}return null},e.ASTNode.prototype.prev=function(){switch(this.type_){case e.ASTNode.types.STACK:return this.navigateBetweenStacks_(!1);case e.ASTNode.types.FIELD:return this.findPrevForField_();case e.ASTNode.types.INPUT:return this.findPrevForInput_();case e.ASTNode.types.BLOCK:var t=this.location_;return e.ASTNode.createConnectionNode(t.previousConnection||t.outputConnection);case e.ASTNode.types.PREVIOUS:if((t=(t=this.location_).targetConnection)&&!t.getParentInput())return e.ASTNode.createConnectionNode(t);break;case e.ASTNode.types.NEXT:return e.ASTNode.createBlockNode((t=this.location_).getSourceBlock())}return null},e.ASTNode.prototype.out=function(){switch(this.type_){case e.ASTNode.types.STACK:var t=this.location_,n=t.getRelativeToSurfaceXY();return n=new e.utils.Coordinate(n.x,n.y+e.ASTNode.DEFAULT_OFFSET_Y),e.ASTNode.createWorkspaceNode(t.workspace,n);case e.ASTNode.types.OUTPUT:return(n=(t=this.location_).targetConnection)?e.ASTNode.createConnectionNode(n):e.ASTNode.createStackNode(t.getSourceBlock());case e.ASTNode.types.FIELD:return e.ASTNode.createBlockNode(this.location_.getSourceBlock());case e.ASTNode.types.INPUT:return e.ASTNode.createBlockNode((t=this.location_).getSourceBlock());case e.ASTNode.types.BLOCK:return this.getOutAstNodeForBlock_(t=this.location_);case e.ASTNode.types.PREVIOUS:case e.ASTNode.types.NEXT:return this.getOutAstNodeForBlock_((t=this.location_).getSourceBlock())}return null},e.Blocks=Object.create(null),e.Extensions={},e.Extensions.ALL_=Object.create(null),e.Extensions.register=function(t,n){if("string"!=typeof t||""==t.trim())throw Error('Error: Invalid extension name "'+t+'"');if(e.Extensions.ALL_[t])throw Error('Error: Extension "'+t+'" is already registered.');if("function"!=typeof n)throw Error('Error: Extension "'+t+'" must be a function');e.Extensions.ALL_[t]=n},e.Extensions.registerMixin=function(t,n){if(!n||"object"!=typeof n)throw Error('Error: Mixin "'+t+'" must be a object');e.Extensions.register(t,function(){this.mixin(n)})},e.Extensions.registerMutator=function(t,n,r,s){var u='Error when registering mutator "'+t+'": ';e.Extensions.checkHasFunction_(u,n.domToMutation,"domToMutation"),e.Extensions.checkHasFunction_(u,n.mutationToDom,"mutationToDom");var y=e.Extensions.checkMutatorDialog_(n,u);if(r&&"function"!=typeof r)throw Error('Extension "'+t+'" is not a function');e.Extensions.register(t,function(){if(y){if(!e.Mutator)throw Error(u+"Missing require for Blockly.Mutator");this.setMutator(new e.Mutator(s||[]))}this.mixin(n),r&&r.apply(this)})},e.Extensions.unregister=function(t){e.Extensions.ALL_[t]?delete e.Extensions.ALL_[t]:console.warn('No extension mapping for name "'+t+'" found to unregister')},e.Extensions.apply=function(t,n,r){var s=e.Extensions.ALL_[t];if("function"!=typeof s)throw Error('Error: Extension "'+t+'" not found.');if(r)e.Extensions.checkNoMutatorProperties_(t,n);else var u=e.Extensions.getMutatorProperties_(n);if(s.apply(n),r)e.Extensions.checkBlockHasMutatorProperties_('Error after applying mutator "'+t+'": ',n);else if(!e.Extensions.mutatorPropertiesMatch_(u,n))throw Error('Error when applying extension "'+t+'": mutation properties changed when applying a non-mutator extension.')},e.Extensions.checkHasFunction_=function(t,n,r){if(!n)throw Error(t+'missing required property "'+r+'"');if("function"!=typeof n)throw Error(t+'" required property "'+r+'" must be a function')},e.Extensions.checkNoMutatorProperties_=function(t,n){if(e.Extensions.getMutatorProperties_(n).length)throw Error('Error: tried to apply mutation "'+t+'" to a block that already has mutator functions.  Block id: '+n.id)},e.Extensions.checkMutatorDialog_=function(t,n){var r=void 0!==t.compose,s=void 0!==t.decompose;if(r&&s){if("function"!=typeof t.compose)throw Error(n+"compose must be a function.");if("function"!=typeof t.decompose)throw Error(n+"decompose must be a function.");return!0}if(!r&&!s)return!1;throw Error(n+'Must have both or neither of "compose" and "decompose"')},e.Extensions.checkBlockHasMutatorProperties_=function(t,n){if("function"!=typeof n.domToMutation)throw Error(t+'Applying a mutator didn\'t add "domToMutation"');if("function"!=typeof n.mutationToDom)throw Error(t+'Applying a mutator didn\'t add "mutationToDom"');e.Extensions.checkMutatorDialog_(n,t)},e.Extensions.getMutatorProperties_=function(t){var n=[];return void 0!==t.domToMutation&&n.push(t.domToMutation),void 0!==t.mutationToDom&&n.push(t.mutationToDom),void 0!==t.compose&&n.push(t.compose),void 0!==t.decompose&&n.push(t.decompose),n},e.Extensions.mutatorPropertiesMatch_=function(t,n){if((n=e.Extensions.getMutatorProperties_(n)).length!=t.length)return!1;for(var r=0;r<n.length;r++)if(t[r]!=n[r])return!1;return!0},e.Extensions.buildTooltipForDropdown=function(t,n){var r=[];return"object"==typeof document&&e.utils.runAfterPageLoad(function(){for(var s in n)e.utils.checkMessageReferences(n[s])}),function(){this.type&&-1==r.indexOf(this.type)&&(e.Extensions.checkDropdownOptionsInTable_(this,t,n),r.push(this.type)),this.setTooltip(function(){var s=String(this.getFieldValue(t)),u=n[s];return null==u?-1==r.indexOf(this.type)&&(s="No tooltip mapping for value "+s+" of field "+t,null!=this.type&&(s+=" of block type "+this.type),console.warn(s+".")):u=e.utils.replaceMessageReferences(u),u}.bind(this))}},e.Extensions.checkDropdownOptionsInTable_=function(t,n,r){var s=t.getField(n);if(!s.isOptionListDynamic()){s=s.getOptions();for(var u=0;u<s.length;++u){var y=s[u][1];null==r[y]&&console.warn("No tooltip mapping for value "+y+" of field "+n+" of block type "+t.type)}}},e.Extensions.buildTooltipWithFieldText=function(t,n){return"object"==typeof document&&e.utils.runAfterPageLoad(function(){e.utils.checkMessageReferences(t)}),function(){this.setTooltip(function(){var r=this.getField(n);return e.utils.replaceMessageReferences(t).replace("%1",r?r.getText():"")}.bind(this))}},e.Extensions.extensionParentTooltip_=function(){this.tooltipWhenNotConnected_=this.tooltip,this.setTooltip(function(){var t=this.getParent();return t&&t.getInputsInline()&&t.tooltip||this.tooltipWhenNotConnected_}.bind(this))},e.Extensions.register("parent_tooltip_when_inline",e.Extensions.extensionParentTooltip_),e.fieldRegistry={},e.fieldRegistry.register=function(t,n){e.registry.register(e.registry.Type.FIELD,t,n)},e.fieldRegistry.unregister=function(t){e.registry.unregister(e.registry.Type.FIELD,t)},e.fieldRegistry.fromJson=function(t){var n=e.registry.getObject(e.registry.Type.FIELD,t.type);return n?n.fromJson(t):(console.warn("Blockly could not create a field of type "+t.type+". The field is probably not being registered. This could be because the file is not loaded, the field does not register itself (Issue #1584), or the registration is not being reached."),null)},e.IDeletable=function(){},e.blockAnimations={},e.blockAnimations.disconnectPid_=0,e.blockAnimations.disconnectGroup_=null,e.blockAnimations.disposeUiEffect=function(t){var n=t.workspace,r=t.getSvgRoot();n.getAudioManager().play("delete"),t=n.getSvgXY(r),(r=r.cloneNode(!0)).translateX_=t.x,r.translateY_=t.y,r.setAttribute("transform","translate("+t.x+","+t.y+")"),n.getParentSvg().appendChild(r),r.bBox_=r.getBBox(),e.blockAnimations.disposeUiStep_(r,n.RTL,new Date,n.scale)},e.blockAnimations.disposeUiStep_=function(t,n,r,s){var u=(new Date-r)/150;1<u?e.utils.dom.removeNode(t):(t.setAttribute("transform","translate("+(t.translateX_+(n?-1:1)*t.bBox_.width*s/2*u)+","+(t.translateY_+t.bBox_.height*s*u)+") scale("+(1-u)*s+")"),setTimeout(e.blockAnimations.disposeUiStep_,10,t,n,r,s))},e.blockAnimations.connectionUiEffect=function(t){var n=t.workspace,r=n.scale;if(n.getAudioManager().play("click"),!(1>r)){var s=n.getSvgXY(t.getSvgRoot());t.outputConnection?(s.x+=(t.RTL?3:-3)*r,s.y+=13*r):t.previousConnection&&(s.x+=(t.RTL?-23:23)*r,s.y+=3*r),t=e.utils.dom.createSvgElement(e.utils.Svg.CIRCLE,{cx:s.x,cy:s.y,r:0,fill:"none",stroke:"#888","stroke-width":10},n.getParentSvg()),e.blockAnimations.connectionUiStep_(t,new Date,r)}},e.blockAnimations.connectionUiStep_=function(t,n,r){var s=(new Date-n)/150;1<s?e.utils.dom.removeNode(t):(t.setAttribute("r",25*s*r),t.style.opacity=1-s,e.blockAnimations.disconnectPid_=setTimeout(e.blockAnimations.connectionUiStep_,10,t,n,r))},e.blockAnimations.disconnectUiEffect=function(t){if(t.workspace.getAudioManager().play("disconnect"),!(1>t.workspace.scale)){var n=t.getHeightWidth().height;n=Math.atan(10/n)/Math.PI*180,t.RTL||(n*=-1),e.blockAnimations.disconnectUiStep_(t.getSvgRoot(),n,new Date)}},e.blockAnimations.disconnectUiStep_=function(t,n,r){var s=(new Date-r)/200;1<s?t.skew_="":(t.skew_="skewX("+Math.round(Math.sin(s*Math.PI*3)*(1-s)*n)+")",e.blockAnimations.disconnectGroup_=t,e.blockAnimations.disconnectPid_=setTimeout(e.blockAnimations.disconnectUiStep_,10,t,n,r)),t.setAttribute("transform",t.translate_+t.skew_)},e.blockAnimations.disconnectUiStop=function(){if(e.blockAnimations.disconnectGroup_){clearTimeout(e.blockAnimations.disconnectPid_);var t=e.blockAnimations.disconnectGroup_;t.skew_="",t.setAttribute("transform",t.translate_),e.blockAnimations.disconnectGroup_=null}},e.Events.BlockDrag=function(t,n,r){e.Events.BlockDrag.superClass_.constructor.call(this,t?t.workspace.id:void 0),this.blockId=t?t.id:null,this.isStart=n,this.blocks=r},e.utils.object.inherits(e.Events.BlockDrag,e.Events.UiBase),e.Events.BlockDrag.prototype.type=e.Events.BLOCK_DRAG,e.Events.BlockDrag.prototype.toJson=function(){var t=e.Events.BlockDrag.superClass_.toJson.call(this);return t.isStart=this.isStart,t.blockId=this.blockId,t.blocks=this.blocks,t},e.Events.BlockDrag.prototype.fromJson=function(t){e.Events.BlockDrag.superClass_.fromJson.call(this,t),this.isStart=t.isStart,this.blockId=t.blockId,this.blocks=t.blocks},e.registry.register(e.registry.Type.EVENT,e.Events.BLOCK_DRAG,e.Events.BlockDrag),e.IBlockDragger=function(){},e.InsertionMarkerManager=function(t){this.topBlock_=e.selected=t,this.workspace_=t.workspace,this.lastMarker_=this.lastOnStack_=null,this.firstMarker_=this.createMarkerBlock_(this.topBlock_),this.localConnection_=this.closestConnection_=null,this.wouldDeleteBlock_=!1,this.fadedBlock_=this.highlightedBlock_=this.markerConnection_=null,this.availableConnections_=this.initAvailableConnections_()},e.InsertionMarkerManager.PREVIEW_TYPE={INSERTION_MARKER:0,INPUT_OUTLINE:1,REPLACEMENT_FADE:2},e.InsertionMarkerManager.DUPLICATE_BLOCK_ERROR="The insertion marker manager tried to create a marker but the result is missing %1. If you are using a mutator, make sure your domToMutation method is properly defined.",e.InsertionMarkerManager.prototype.dispose=function(){this.availableConnections_.length=0,e.Events.disable();try{this.firstMarker_&&this.firstMarker_.dispose(),this.lastMarker_&&this.lastMarker_.dispose()}finally{e.Events.enable()}},e.InsertionMarkerManager.prototype.updateAvailableConnections=function(){this.availableConnections_=this.initAvailableConnections_()},e.InsertionMarkerManager.prototype.wouldDeleteBlock=function(){return this.wouldDeleteBlock_},e.InsertionMarkerManager.prototype.wouldConnectBlock=function(){return!!this.closestConnection_},e.InsertionMarkerManager.prototype.applyConnections=function(){if(this.closestConnection_&&(e.Events.disable(),this.hidePreview_(),e.Events.enable(),this.localConnection_.connect(this.closestConnection_),this.topBlock_.rendered)){var t=this.localConnection_.isSuperior()?this.closestConnection_:this.localConnection_;e.blockAnimations.connectionUiEffect(t.getSourceBlock()),this.topBlock_.getRootBlock().bringToFront()}},e.InsertionMarkerManager.prototype.update=function(t,n){var r=this.getCandidate_(t);((this.wouldDeleteBlock_=this.shouldDelete_(r,n))||this.shouldUpdatePreviews_(r,t))&&(e.Events.disable(),this.maybeHidePreview_(r),this.maybeShowPreview_(r),e.Events.enable())},e.InsertionMarkerManager.prototype.createMarkerBlock_=function(t){var n=t.type;e.Events.disable();try{var r=this.workspace_.newBlock(n);if(r.setInsertionMarker(!0),t.mutationToDom){var s=t.mutationToDom();s&&r.domToMutation(s)}for(n=0;n<t.inputList.length;n++){var u=t.inputList[n];if(u.name!=e.constants.COLLAPSED_INPUT_NAME){var y=r.inputList[n];if(!y)throw Error(e.InsertionMarkerManager.DUPLICATE_BLOCK_ERROR.replace("%1","an input"));for(s=0;s<u.fieldRow.length;s++){var x=u.fieldRow[s],B=y.fieldRow[s];if(!B)throw Error(e.InsertionMarkerManager.DUPLICATE_BLOCK_ERROR.replace("%1","a field"));B.setValue(x.getValue())}}}r.setCollapsed(t.isCollapsed()),r.setInputsInline(t.getInputsInline()),r.initSvg(),r.getSvgRoot().setAttribute("visibility","hidden")}finally{e.Events.enable()}return r},e.InsertionMarkerManager.prototype.initAvailableConnections_=function(){var t=this.topBlock_.getConnections_(!1),n=this.topBlock_.lastConnectionInStack(!0);if(n&&n!=this.topBlock_.nextConnection){if(t.push(n),this.lastOnStack_=n,this.lastMarker_){e.Events.disable();try{this.lastMarker_.dispose()}finally{e.Events.enable()}}this.lastMarker_=this.createMarkerBlock_(n.getSourceBlock())}return t},e.InsertionMarkerManager.prototype.shouldUpdatePreviews_=function(t,n){var r=t.local,s=t.closest;return t=t.radius,r&&s?this.localConnection_&&this.closestConnection_?!(this.closestConnection_==s&&this.localConnection_==r||(r=this.localConnection_.x+n.x-this.closestConnection_.x,n=this.localConnection_.y+n.y-this.closestConnection_.y,n=Math.sqrt(r*r+n*n),s&&t>n-e.CURRENT_CONNECTION_PREFERENCE)):!this.localConnection_&&!this.closestConnection_||(console.error("Only one of localConnection_ and closestConnection_ was set."),console.error("Returning true from shouldUpdatePreviews, but it's not clear why."),!0):!(!this.localConnection_||!this.closestConnection_)},e.InsertionMarkerManager.prototype.getCandidate_=function(t){for(var n=this.getStartRadius_(),r=null,s=null,u=0;u<this.availableConnections_.length;u++){var y=this.availableConnections_[u],x=y.closest(n,t);x.connection&&(r=x.connection,s=y,n=x.radius)}return{closest:r,local:s,radius:n}},e.InsertionMarkerManager.prototype.getStartRadius_=function(){return this.closestConnection_&&this.localConnection_?e.CONNECTING_SNAP_RADIUS:e.SNAP_RADIUS},e.InsertionMarkerManager.prototype.shouldDelete_=function(t,n){return!(!n||!this.workspace_.getComponentManager().hasCapability(n.id,e.ComponentManager.Capability.DELETE_AREA))&&n.wouldDelete(this.topBlock_,t&&!!t.closest)},e.InsertionMarkerManager.prototype.maybeShowPreview_=function(t){if(!this.wouldDeleteBlock_){var n=t.closest;t=t.local,n&&(n==this.closestConnection_||n.getSourceBlock().isInsertionMarker()?console.log("Trying to connect to an insertion marker"):(this.closestConnection_=n,this.localConnection_=t,this.showPreview_()))}},e.InsertionMarkerManager.prototype.showPreview_=function(){var t=this.closestConnection_,n=this.workspace_.getRenderer();switch(n.getConnectionPreviewMethod(t,this.localConnection_,this.topBlock_)){case e.InsertionMarkerManager.PREVIEW_TYPE.INPUT_OUTLINE:this.showInsertionInputOutline_();break;case e.InsertionMarkerManager.PREVIEW_TYPE.INSERTION_MARKER:this.showInsertionMarker_();break;case e.InsertionMarkerManager.PREVIEW_TYPE.REPLACEMENT_FADE:this.showReplacementFade_()}t&&n.shouldHighlightConnection(t)&&t.highlight()},e.InsertionMarkerManager.prototype.maybeHidePreview_=function(t){if(t.closest){var n=this.closestConnection_!=t.closest;t=this.localConnection_!=t.local,this.closestConnection_&&this.localConnection_&&(n||t||this.wouldDeleteBlock_)&&this.hidePreview_()}else this.hidePreview_();this.localConnection_=this.closestConnection_=this.markerConnection_=null},e.InsertionMarkerManager.prototype.hidePreview_=function(){this.closestConnection_&&this.closestConnection_.targetBlock()&&this.workspace_.getRenderer().shouldHighlightConnection(this.closestConnection_)&&this.closestConnection_.unhighlight(),this.fadedBlock_?this.hideReplacementFade_():this.highlightedBlock_?this.hideInsertionInputOutline_():this.markerConnection_&&this.hideInsertionMarker_()},e.InsertionMarkerManager.prototype.showInsertionMarker_=function(){var t=this.localConnection_,n=this.closestConnection_,r=this.lastOnStack_&&t==this.lastOnStack_?this.lastMarker_:this.firstMarker_;if((t=r.getMatchingConnection(t.getSourceBlock(),t))==this.markerConnection_)throw Error("Made it to showInsertionMarker_ even though the marker isn't changing");r.render(),r.rendered=!0,r.getSvgRoot().setAttribute("visibility","visible"),t&&n&&r.positionNearConnection(t,n),n&&t.connect(n),this.markerConnection_=t},e.InsertionMarkerManager.prototype.hideInsertionMarker_=function(){if(this.markerConnection_){var t=this.markerConnection_,n=t.getSourceBlock(),r=n.nextConnection,s=n.previousConnection,u=n.outputConnection;if(u=t.type==e.connectionTypes.INPUT_VALUE&&!(u&&u.targetConnection),!(t!=r||s&&s.targetConnection)||u?t.targetBlock().unplug(!1):t.type==e.connectionTypes.NEXT_STATEMENT&&t!=r?((r=t.targetConnection).getSourceBlock().unplug(!1),s=s?s.targetConnection:null,n.unplug(!0),s&&s.connect(r)):n.unplug(!0),t.targetConnection)throw Error("markerConnection_ still connected at the end of disconnectInsertionMarker");this.markerConnection_=null,(t=n.getSvgRoot())&&t.setAttribute("visibility","hidden")}else console.log("No insertion marker connection to disconnect")},e.InsertionMarkerManager.prototype.showInsertionInputOutline_=function(){var t=this.closestConnection_;this.highlightedBlock_=t.getSourceBlock(),this.highlightedBlock_.highlightShapeForInput(t,!0)},e.InsertionMarkerManager.prototype.hideInsertionInputOutline_=function(){this.highlightedBlock_.highlightShapeForInput(this.closestConnection_,!1),this.highlightedBlock_=null},e.InsertionMarkerManager.prototype.showReplacementFade_=function(){this.fadedBlock_=this.closestConnection_.targetBlock(),this.fadedBlock_.fadeForReplacement(!0)},e.InsertionMarkerManager.prototype.hideReplacementFade_=function(){this.fadedBlock_.fadeForReplacement(!1),this.fadedBlock_=null},e.InsertionMarkerManager.prototype.getInsertionMarkers=function(){var t=[];return this.firstMarker_&&t.push(this.firstMarker_),this.lastMarker_&&t.push(this.lastMarker_),t},e.BlockDragger=function(t,n){this.draggingBlock_=t,this.workspace_=n,this.draggedConnectionManager_=new e.InsertionMarkerManager(this.draggingBlock_),this.dragTarget_=null,this.wouldDeleteBlock_=!1,this.startXY_=this.draggingBlock_.getRelativeToSurfaceXY(),this.dragIconData_=e.BlockDragger.initIconData_(t)},e.BlockDragger.prototype.dispose=function(){this.dragIconData_.length=0,this.draggedConnectionManager_&&this.draggedConnectionManager_.dispose()},e.BlockDragger.initIconData_=function(t){var n=[];t=t.getDescendants(!1);for(var s,r=0;s=t[r];r++){s=s.getIcons();for(var u=0;u<s.length;u++){var y={location:s[u].getIconLocation(),icon:s[u]};n.push(y)}}return n},e.BlockDragger.prototype.startDrag=function(t,n){e.Events.getGroup()||e.Events.setGroup(!0),this.fireDragStartEvent_(),this.workspace_.isMutator&&this.draggingBlock_.bringToFront(),e.utils.dom.startTextWidthCache(),this.workspace_.setResizesEnabled(!1),e.blockAnimations.disconnectUiStop(),this.shouldDisconnect_(n)&&this.disconnectBlock_(n,t),this.draggingBlock_.setDragging(!0),this.draggingBlock_.moveToDragSurface()},e.BlockDragger.prototype.shouldDisconnect_=function(t){return!!(this.draggingBlock_.getParent()||t&&this.draggingBlock_.nextConnection&&this.draggingBlock_.nextConnection.targetBlock())},e.BlockDragger.prototype.disconnectBlock_=function(t,n){this.draggingBlock_.unplug(t),t=this.pixelsToWorkspaceUnits_(n),t=e.utils.Coordinate.sum(this.startXY_,t),this.draggingBlock_.translate(t.x,t.y),e.blockAnimations.disconnectUiEffect(this.draggingBlock_),this.draggedConnectionManager_.updateAvailableConnections()},e.BlockDragger.prototype.fireDragStartEvent_=function(){var t=new(e.Events.get(e.Events.BLOCK_DRAG))(this.draggingBlock_,!0,this.draggingBlock_.getDescendants(!1));e.Events.fire(t)},e.BlockDragger.prototype.drag=function(t,n){n=this.pixelsToWorkspaceUnits_(n);var r=e.utils.Coordinate.sum(this.startXY_,n);this.draggingBlock_.moveDuringDrag(r),this.dragIcons_(n),r=this.dragTarget_,this.dragTarget_=this.workspace_.getDragTarget(t),this.draggedConnectionManager_.update(n,this.dragTarget_),t=this.wouldDeleteBlock_,this.wouldDeleteBlock_=this.draggedConnectionManager_.wouldDeleteBlock(),t!=this.wouldDeleteBlock_&&this.updateCursorDuringBlockDrag_(),this.dragTarget_!==r&&(r&&r.onDragExit(this.draggingBlock_),this.dragTarget_&&this.dragTarget_.onDragEnter(this.draggingBlock_)),this.dragTarget_&&this.dragTarget_.onDragOver(this.draggingBlock_)},e.BlockDragger.prototype.endDrag=function(t,n){if(this.drag(t,n),this.dragIconData_=[],this.fireDragEndEvent_(),e.utils.dom.stopTextWidthCache(),e.blockAnimations.disconnectUiStop(),this.dragTarget_&&this.dragTarget_.shouldPreventMove(this.draggingBlock_))t=this.startXY_;else{var r=(t=this.getNewLocationAfterDrag_(n)).delta;t=t.newLocation}this.draggingBlock_.moveOffDragSurface(t),this.dragTarget_&&this.dragTarget_.onDrop(this.draggingBlock_),this.maybeDeleteBlock_()||(this.draggingBlock_.setDragging(!1),r?this.updateBlockAfterMove_(r):e.bumpObjectIntoBounds_(this.draggingBlock_.workspace,this.workspace_.getMetricsManager().getScrollMetrics(!0),this.draggingBlock_)),this.workspace_.setResizesEnabled(!0),e.Events.setGroup(!1)},e.BlockDragger.prototype.getNewLocationAfterDrag_=function(t){var n={};return n.delta=this.pixelsToWorkspaceUnits_(t),n.newLocation=e.utils.Coordinate.sum(this.startXY_,n.delta),n},e.BlockDragger.prototype.maybeDeleteBlock_=function(){return!!this.wouldDeleteBlock_&&(this.fireMoveEvent_(),this.draggingBlock_.dispose(!1,!0),e.draggingConnections=[],!0)},e.BlockDragger.prototype.updateBlockAfterMove_=function(t){this.draggingBlock_.moveConnections(t.x,t.y),this.fireMoveEvent_(),this.draggedConnectionManager_.wouldConnectBlock()?this.draggedConnectionManager_.applyConnections():this.draggingBlock_.render(),this.draggingBlock_.scheduleSnapAndBump()},e.BlockDragger.prototype.fireDragEndEvent_=function(){var t=new(e.Events.get(e.Events.BLOCK_DRAG))(this.draggingBlock_,!1,this.draggingBlock_.getDescendants(!1));e.Events.fire(t)},e.BlockDragger.prototype.updateToolboxStyle_=function(t){var n=this.workspace_.getToolbox();if(n){var r=this.draggingBlock_.isDeletable()?"blocklyToolboxDelete":"blocklyToolboxGrab";t&&"function"==typeof n.removeStyle?n.removeStyle(r):t||"function"!=typeof n.addStyle||n.addStyle(r)}},e.BlockDragger.prototype.fireMoveEvent_=function(){var t=new(e.Events.get(e.Events.BLOCK_MOVE))(this.draggingBlock_);t.oldCoordinate=this.startXY_,t.recordNew(),e.Events.fire(t)},e.BlockDragger.prototype.updateCursorDuringBlockDrag_=function(){this.draggingBlock_.setDeleteStyle(this.wouldDeleteBlock_)},e.BlockDragger.prototype.pixelsToWorkspaceUnits_=function(t){return t=new e.utils.Coordinate(t.x/this.workspace_.scale,t.y/this.workspace_.scale),this.workspace_.isMutator&&t.scale(1/this.workspace_.options.parentWorkspace.scale),t},e.BlockDragger.prototype.dragIcons_=function(t){for(var n=0;n<this.dragIconData_.length;n++){var r=this.dragIconData_[n];r.icon.setIconLocation(e.utils.Coordinate.sum(r.location,t))}},e.BlockDragger.prototype.getInsertionMarkers=function(){return this.draggedConnectionManager_&&this.draggedConnectionManager_.getInsertionMarkers?this.draggedConnectionManager_.getInsertionMarkers():[]},e.registry.register(e.registry.Type.BLOCK_DRAGGER,e.registry.DEFAULT,e.BlockDragger),e.IContextMenu=function(){},e.IDraggable=function(){},e.IBubble=function(){},e.Bubble=function(t,n,r,s,u,y){this.workspace_=t,this.content_=n,this.shape_=r,this.onMouseDownResizeWrapper_=this.onMouseDownBubbleWrapper_=this.moveCallback_=this.resizeCallback_=null,this.disposed=!1,r=e.Bubble.ARROW_ANGLE,this.workspace_.RTL&&(r=-r),this.arrow_radians_=e.utils.math.toRadians(r),t.getBubbleCanvas().appendChild(this.createDom_(n,!(!u||!y))),this.setAnchorLocation(s),u&&y||(u=(t=this.content_.getBBox()).width+2*e.Bubble.BORDER_WIDTH,y=t.height+2*e.Bubble.BORDER_WIDTH),this.setBubbleSize(u,y),this.positionBubble_(),this.renderArrow_(),this.rendered_=!0},e.Bubble.BORDER_WIDTH=6,e.Bubble.ARROW_THICKNESS=5,e.Bubble.ARROW_ANGLE=20,e.Bubble.ARROW_BEND=4,e.Bubble.ANCHOR_RADIUS=8,e.Bubble.onMouseUpWrapper_=null,e.Bubble.onMouseMoveWrapper_=null,e.Bubble.unbindDragEvents_=function(){e.Bubble.onMouseUpWrapper_&&(e.browserEvents.unbind(e.Bubble.onMouseUpWrapper_),e.Bubble.onMouseUpWrapper_=null),e.Bubble.onMouseMoveWrapper_&&(e.browserEvents.unbind(e.Bubble.onMouseMoveWrapper_),e.Bubble.onMouseMoveWrapper_=null)},e.Bubble.bubbleMouseUp_=function(t){e.Touch.clearTouchIdentifier(),e.Bubble.unbindDragEvents_()},e.Bubble.prototype.rendered_=!1,e.Bubble.prototype.anchorXY_=null,e.Bubble.prototype.relativeLeft_=0,e.Bubble.prototype.relativeTop_=0,e.Bubble.prototype.width_=0,e.Bubble.prototype.height_=0,e.Bubble.prototype.autoLayout_=!0,e.Bubble.prototype.createDom_=function(t,n){this.bubbleGroup_=e.utils.dom.createSvgElement(e.utils.Svg.G,{},null);var r={filter:"url(#"+this.workspace_.getRenderer().getConstants().embossFilterId+")"};return e.utils.userAgent.JAVA_FX&&(r={}),r=e.utils.dom.createSvgElement(e.utils.Svg.G,r,this.bubbleGroup_),this.bubbleArrow_=e.utils.dom.createSvgElement(e.utils.Svg.PATH,{},r),this.bubbleBack_=e.utils.dom.createSvgElement(e.utils.Svg.RECT,{class:"blocklyDraggable",x:0,y:0,rx:e.Bubble.BORDER_WIDTH,ry:e.Bubble.BORDER_WIDTH},r),n?(this.resizeGroup_=e.utils.dom.createSvgElement(e.utils.Svg.G,{class:this.workspace_.RTL?"blocklyResizeSW":"blocklyResizeSE"},this.bubbleGroup_),e.utils.dom.createSvgElement(e.utils.Svg.POLYGON,{points:"0,x x,x x,0".replace(/x/g,(n=2*e.Bubble.BORDER_WIDTH).toString())},this.resizeGroup_),e.utils.dom.createSvgElement(e.utils.Svg.LINE,{class:"blocklyResizeLine",x1:n/3,y1:n-1,x2:n-1,y2:n/3},this.resizeGroup_),e.utils.dom.createSvgElement(e.utils.Svg.LINE,{class:"blocklyResizeLine",x1:2*n/3,y1:n-1,x2:n-1,y2:2*n/3},this.resizeGroup_)):this.resizeGroup_=null,this.workspace_.options.readOnly||(this.onMouseDownBubbleWrapper_=e.browserEvents.conditionalBind(this.bubbleBack_,"mousedown",this,this.bubbleMouseDown_),this.resizeGroup_&&(this.onMouseDownResizeWrapper_=e.browserEvents.conditionalBind(this.resizeGroup_,"mousedown",this,this.resizeMouseDown_))),this.bubbleGroup_.appendChild(t),this.bubbleGroup_},e.Bubble.prototype.getSvgRoot=function(){return this.bubbleGroup_},e.Bubble.prototype.setSvgId=function(t){this.bubbleGroup_.dataset&&(this.bubbleGroup_.dataset.blockId=t)},e.Bubble.prototype.bubbleMouseDown_=function(t){var n=this.workspace_.getGesture(t);n&&n.handleBubbleStart(t,this)},e.Bubble.prototype.showContextMenu=function(t){},e.Bubble.prototype.isDeletable=function(){return!1},e.Bubble.prototype.setDeleteStyle=function(t){},e.Bubble.prototype.resizeMouseDown_=function(t){this.promote(),e.Bubble.unbindDragEvents_(),e.utils.isRightButton(t)||(this.workspace_.startDrag(t,new e.utils.Coordinate(this.workspace_.RTL?-this.width_:this.width_,this.height_)),e.Bubble.onMouseUpWrapper_=e.browserEvents.conditionalBind(document,"mouseup",this,e.Bubble.bubbleMouseUp_),e.Bubble.onMouseMoveWrapper_=e.browserEvents.conditionalBind(document,"mousemove",this,this.resizeMouseMove_),e.hideChaff()),t.stopPropagation()},e.Bubble.prototype.resizeMouseMove_=function(t){this.autoLayout_=!1,t=this.workspace_.moveDrag(t),this.setBubbleSize(this.workspace_.RTL?-t.x:t.x,t.y),this.workspace_.RTL&&this.positionBubble_()},e.Bubble.prototype.registerResizeEvent=function(t){this.resizeCallback_=t},e.Bubble.prototype.registerMoveEvent=function(t){this.moveCallback_=t},e.Bubble.prototype.promote=function(){var t=this.bubbleGroup_.parentNode;return t.lastChild!==this.bubbleGroup_&&(t.appendChild(this.bubbleGroup_),!0)},e.Bubble.prototype.setAnchorLocation=function(t){this.anchorXY_=t,this.rendered_&&this.positionBubble_()},e.Bubble.prototype.layoutBubble_=function(){var t=this.workspace_.getMetricsManager().getViewMetrics(!0),n=this.getOptimalRelativeLeft_(t),r=this.getOptimalRelativeTop_(t),s=this.shape_.getBBox(),u={x:n,y:-this.height_-this.workspace_.getRenderer().getConstants().MIN_BLOCK_HEIGHT},y={x:-this.width_-30,y:r};r={x:s.width,y:r};var x={x:n,y:s.height};n=s.width<s.height?r:x,s=s.width<s.height?x:r,r=this.getOverlap_(u,t),x=this.getOverlap_(y,t);var B=this.getOverlap_(n,t);t=this.getOverlap_(s,t),r==(t=Math.max(r,x,B,t))?(this.relativeLeft_=u.x,this.relativeTop_=u.y):x==t?(this.relativeLeft_=y.x,this.relativeTop_=y.y):B==t?(this.relativeLeft_=n.x,this.relativeTop_=n.y):(this.relativeLeft_=s.x,this.relativeTop_=s.y)},e.Bubble.prototype.getOverlap_=function(t,n){var r=this.workspace_.RTL?this.anchorXY_.x-t.x-this.width_:t.x+this.anchorXY_.x;return t=t.y+this.anchorXY_.y,Math.max(0,Math.min(1,(Math.min(r+this.width_,n.left+n.width)-Math.max(r,n.left))*(Math.min(t+this.height_,n.top+n.height)-Math.max(t,n.top))/(this.width_*this.height_)))},e.Bubble.prototype.getOptimalRelativeLeft_=function(t){var n=-this.width_/4;if(this.width_>t.width)return n;if(this.workspace_.RTL)var r=this.anchorXY_.x-n,s=r-this.width_,u=t.left+t.width,y=t.left+e.Scrollbar.scrollbarThickness/this.workspace_.scale;else r=(s=n+this.anchorXY_.x)+this.width_,y=t.left,u=t.left+t.width-e.Scrollbar.scrollbarThickness/this.workspace_.scale;return this.workspace_.RTL?s<y?n=-(y-this.anchorXY_.x+this.width_):r>u&&(n=-(u-this.anchorXY_.x)):s<y?n=y-this.anchorXY_.x:r>u&&(n=u-this.anchorXY_.x-this.width_),n},e.Bubble.prototype.getOptimalRelativeTop_=function(t){var n=-this.height_/4;if(this.height_>t.height)return n;var r=this.anchorXY_.y+n,u=t.top;t=t.top+t.height-e.Scrollbar.scrollbarThickness/this.workspace_.scale;var y=this.anchorXY_.y;return r<u?n=u-y:r+this.height_>t&&(n=t-y-this.height_),n},e.Bubble.prototype.positionBubble_=function(){var t=this.anchorXY_.x;this.moveTo(t=this.workspace_.RTL?t-(this.relativeLeft_+this.width_):t+this.relativeLeft_,this.relativeTop_+this.anchorXY_.y)},e.Bubble.prototype.moveTo=function(t,n){this.bubbleGroup_.setAttribute("transform","translate("+t+","+n+")")},e.Bubble.prototype.setDragging=function(t){!t&&this.moveCallback_&&this.moveCallback_()},e.Bubble.prototype.getBubbleSize=function(){return new e.utils.Size(this.width_,this.height_)},e.Bubble.prototype.setBubbleSize=function(t,n){var r=2*e.Bubble.BORDER_WIDTH;t=Math.max(t,r+45),n=Math.max(n,r+20),this.width_=t,this.height_=n,this.bubbleBack_.setAttribute("width",t),this.bubbleBack_.setAttribute("height",n),this.resizeGroup_&&this.resizeGroup_.setAttribute("transform",this.workspace_.RTL?"translate("+2*e.Bubble.BORDER_WIDTH+","+(n-r)+") scale(-1 1)":"translate("+(t-r)+","+(n-r)+")"),this.autoLayout_&&this.layoutBubble_(),this.positionBubble_(),this.renderArrow_(),this.resizeCallback_&&this.resizeCallback_()},e.Bubble.prototype.renderArrow_=function(){var t=[],n=this.width_/2,r=this.height_/2,s=-this.relativeLeft_,u=-this.relativeTop_;if(n==s&&r==u)t.push("M "+n+","+r);else{u-=r,s-=n,this.workspace_.RTL&&(s*=-1);var y=Math.sqrt(u*u+s*s),x=Math.acos(s/y);0>u&&(x=2*Math.PI-x);var B=x+Math.PI/2;B>2*Math.PI&&(B-=2*Math.PI);var Q=Math.sin(B),at=Math.cos(B),rt=this.getBubbleSize();B=(rt.width+rt.height)/e.Bubble.ARROW_THICKNESS,B=Math.min(B,rt.width,rt.height)/4,s=n+(rt=1-e.Bubble.ANCHOR_RADIUS/y)*s,u=r+rt*u,rt=n+B*at;var St=r+B*Q;n-=B*at,r-=B*Q,(Q=x+this.arrow_radians_)>2*Math.PI&&(Q-=2*Math.PI),x=Math.sin(Q)*y/e.Bubble.ARROW_BEND,y=Math.cos(Q)*y/e.Bubble.ARROW_BEND,t.push("M"+rt+","+St),t.push("C"+(rt+y)+","+(St+x)+" "+s+","+u+" "+s+","+u),t.push("C"+s+","+u+" "+(n+y)+","+(r+x)+" "+n+","+r)}t.push("z"),this.bubbleArrow_.setAttribute("d",t.join(" "))},e.Bubble.prototype.setColour=function(t){this.bubbleBack_.setAttribute("fill",t),this.bubbleArrow_.setAttribute("fill",t)},e.Bubble.prototype.dispose=function(){this.onMouseDownBubbleWrapper_&&e.browserEvents.unbind(this.onMouseDownBubbleWrapper_),this.onMouseDownResizeWrapper_&&e.browserEvents.unbind(this.onMouseDownResizeWrapper_),e.Bubble.unbindDragEvents_(),e.utils.dom.removeNode(this.bubbleGroup_),this.disposed=!0},e.Bubble.prototype.moveDuringDrag=function(t,n){t?t.translateSurface(n.x,n.y):this.moveTo(n.x,n.y),this.relativeLeft_=this.workspace_.RTL?this.anchorXY_.x-n.x-this.width_:n.x-this.anchorXY_.x,this.relativeTop_=n.y-this.anchorXY_.y,this.renderArrow_()},e.Bubble.prototype.getRelativeToSurfaceXY=function(){return new e.utils.Coordinate(this.workspace_.RTL?-this.relativeLeft_+this.anchorXY_.x-this.width_:this.anchorXY_.x+this.relativeLeft_,this.anchorXY_.y+this.relativeTop_)},e.Bubble.prototype.setAutoLayout=function(t){this.autoLayout_=t},e.Bubble.textToDom=function(t){var n=e.utils.dom.createSvgElement(e.utils.Svg.TEXT,{class:"blocklyText blocklyBubbleText blocklyNoPointerEvents",y:e.Bubble.BORDER_WIDTH},null);t=t.split("\n");for(var r=0;r<t.length;r++){var s=e.utils.dom.createSvgElement(e.utils.Svg.TSPAN,{dy:"1em",x:e.Bubble.BORDER_WIDTH},n),u=document.createTextNode(t[r]);s.appendChild(u)}return n},e.Bubble.createNonEditableBubble=function(t,n,r){if((r=new e.Bubble(n.workspace,t,n.pathObject.svgPath,r,null,null)).setSvgId(n.id),n.RTL){n=t.getBBox().width;for(var u,s=0;u=t.childNodes[s];s++)u.setAttribute("text-anchor","end"),u.setAttribute("x",n+e.Bubble.BORDER_WIDTH)}return r},e.Events.CommentBase=function(t){this.commentId=(this.isBlank=void 0===t)?"":t.id,this.workspaceId=this.isBlank?"":t.workspace.id,this.group=e.Events.getGroup(),this.recordUndo=e.Events.recordUndo},e.utils.object.inherits(e.Events.CommentBase,e.Events.Abstract),e.Events.CommentBase.prototype.toJson=function(){var t=e.Events.CommentBase.superClass_.toJson.call(this);return this.commentId&&(t.commentId=this.commentId),t},e.Events.CommentBase.prototype.fromJson=function(t){e.Events.CommentBase.superClass_.fromJson.call(this,t),this.commentId=t.commentId},e.Events.CommentChange=function(t,n,r){e.Events.CommentChange.superClass_.constructor.call(this,t),t&&(this.oldContents_=void 0===n?"":n,this.newContents_=void 0===r?"":r)},e.utils.object.inherits(e.Events.CommentChange,e.Events.CommentBase),e.Events.CommentChange.prototype.type=e.Events.COMMENT_CHANGE,e.Events.CommentChange.prototype.toJson=function(){var t=e.Events.CommentChange.superClass_.toJson.call(this);return t.oldContents=this.oldContents_,t.newContents=this.newContents_,t},e.Events.CommentChange.prototype.fromJson=function(t){e.Events.CommentChange.superClass_.fromJson.call(this,t),this.oldContents_=t.oldContents,this.newContents_=t.newContents},e.Events.CommentChange.prototype.isNull=function(){return this.oldContents_==this.newContents_},e.Events.CommentChange.prototype.run=function(t){var n=this.getEventWorkspace_().getCommentById(this.commentId);n?n.setContent(t?this.newContents_:this.oldContents_):console.warn("Can't change non-existent comment: "+this.commentId)},e.Events.CommentCreate=function(t){e.Events.CommentCreate.superClass_.constructor.call(this,t),t&&(this.xml=t.toXmlWithXY())},e.utils.object.inherits(e.Events.CommentCreate,e.Events.CommentBase),e.Events.CommentCreate.prototype.type=e.Events.COMMENT_CREATE,e.Events.CommentCreate.prototype.toJson=function(){var t=e.Events.CommentCreate.superClass_.toJson.call(this);return t.xml=e.Xml.domToText(this.xml),t},e.Events.CommentCreate.prototype.fromJson=function(t){e.Events.CommentCreate.superClass_.fromJson.call(this,t),this.xml=e.Xml.textToDom(t.xml)},e.Events.CommentCreate.prototype.run=function(t){e.Events.CommentCreateDeleteHelper(this,t)},e.Events.CommentCreateDeleteHelper=function(t,n){var r=t.getEventWorkspace_();n?((n=e.utils.xml.createElement("xml")).appendChild(t.xml),e.Xml.domToWorkspace(n,r)):(r=r.getCommentById(t.commentId))?r.dispose(!1,!1):console.warn("Can't uncreate non-existent comment: "+t.commentId)},e.Events.CommentDelete=function(t){e.Events.CommentDelete.superClass_.constructor.call(this,t),t&&(this.xml=t.toXmlWithXY())},e.utils.object.inherits(e.Events.CommentDelete,e.Events.CommentBase),e.Events.CommentDelete.prototype.type=e.Events.COMMENT_DELETE,e.Events.CommentDelete.prototype.toJson=function(){return e.Events.CommentDelete.superClass_.toJson.call(this)},e.Events.CommentDelete.prototype.fromJson=function(t){e.Events.CommentDelete.superClass_.fromJson.call(this,t)},e.Events.CommentDelete.prototype.run=function(t){e.Events.CommentCreateDeleteHelper(this,!t)},e.Events.CommentMove=function(t){e.Events.CommentMove.superClass_.constructor.call(this,t),t&&(this.comment_=t,this.oldCoordinate_=t.getXY(),this.newCoordinate_=null)},e.utils.object.inherits(e.Events.CommentMove,e.Events.CommentBase),e.Events.CommentMove.prototype.recordNew=function(){if(!this.comment_)throw Error("Tried to record the new position of a comment on the same event twice.");this.newCoordinate_=this.comment_.getXY(),this.comment_=null},e.Events.CommentMove.prototype.type=e.Events.COMMENT_MOVE,e.Events.CommentMove.prototype.setOldCoordinate=function(t){this.oldCoordinate_=t},e.Events.CommentMove.prototype.toJson=function(){var t=e.Events.CommentMove.superClass_.toJson.call(this);return this.oldCoordinate_&&(t.oldCoordinate=Math.round(this.oldCoordinate_.x)+","+Math.round(this.oldCoordinate_.y)),this.newCoordinate_&&(t.newCoordinate=Math.round(this.newCoordinate_.x)+","+Math.round(this.newCoordinate_.y)),t},e.Events.CommentMove.prototype.fromJson=function(t){if(e.Events.CommentMove.superClass_.fromJson.call(this,t),t.oldCoordinate){var n=t.oldCoordinate.split(",");this.oldCoordinate_=new e.utils.Coordinate(Number(n[0]),Number(n[1]))}t.newCoordinate&&(n=t.newCoordinate.split(","),this.newCoordinate_=new e.utils.Coordinate(Number(n[0]),Number(n[1])))},e.Events.CommentMove.prototype.isNull=function(){return e.utils.Coordinate.equals(this.oldCoordinate_,this.newCoordinate_)},e.Events.CommentMove.prototype.run=function(t){var n=this.getEventWorkspace_().getCommentById(this.commentId);if(n){t=t?this.newCoordinate_:this.oldCoordinate_;var r=n.getXY();n.moveBy(t.x-r.x,t.y-r.y)}else console.warn("Can't move non-existent comment: "+this.commentId)},e.registry.register(e.registry.Type.EVENT,e.Events.COMMENT_CREATE,e.Events.CommentCreate),e.registry.register(e.registry.Type.EVENT,e.Events.COMMENT_CHANGE,e.Events.CommentChange),e.registry.register(e.registry.Type.EVENT,e.Events.COMMENT_MOVE,e.Events.CommentMove),e.registry.register(e.registry.Type.EVENT,e.Events.COMMENT_DELETE,e.Events.CommentDelete),e.BubbleDragger=function(t,n){this.draggingBubble_=t,this.workspace_=n,this.dragTarget_=null,this.wouldDeleteBubble_=!1,this.startXY_=this.draggingBubble_.getRelativeToSurfaceXY(),this.dragSurface_=e.utils.is3dSupported()&&n.getBlockDragSurface()?n.getBlockDragSurface():null},e.BubbleDragger.prototype.dispose=function(){this.dragSurface_=this.workspace_=this.draggingBubble_=null},e.BubbleDragger.prototype.startBubbleDrag=function(){e.Events.getGroup()||e.Events.setGroup(!0),this.workspace_.setResizesEnabled(!1),this.draggingBubble_.setAutoLayout(!1),this.dragSurface_&&this.moveToDragSurface_(),this.draggingBubble_.setDragging&&this.draggingBubble_.setDragging(!0)},e.BubbleDragger.prototype.dragBubble=function(t,n){n=this.pixelsToWorkspaceUnits_(n),n=e.utils.Coordinate.sum(this.startXY_,n),this.draggingBubble_.moveDuringDrag(this.dragSurface_,n),n=this.dragTarget_,this.dragTarget_=this.workspace_.getDragTarget(t),t=this.wouldDeleteBubble_,this.wouldDeleteBubble_=this.shouldDelete_(this.dragTarget_),t!=this.wouldDeleteBubble_&&this.updateCursorDuringBubbleDrag_(),this.dragTarget_!==n&&(n&&n.onDragExit(this.draggingBubble_),this.dragTarget_&&this.dragTarget_.onDragEnter(this.draggingBubble_)),this.dragTarget_&&this.dragTarget_.onDragOver(this.draggingBubble_)},e.BubbleDragger.prototype.shouldDelete_=function(t){return!(!t||!this.workspace_.getComponentManager().hasCapability(t.id,e.ComponentManager.Capability.DELETE_AREA))&&t.wouldDelete(this.draggingBubble_,!1)},e.BubbleDragger.prototype.updateCursorDuringBubbleDrag_=function(){this.draggingBubble_.setDeleteStyle(this.wouldDeleteBubble_)},e.BubbleDragger.prototype.endBubbleDrag=function(t,n){this.dragBubble(t,n),this.dragTarget_&&this.dragTarget_.shouldPreventMove(this.draggingBubble_)?t=this.startXY_:(t=this.pixelsToWorkspaceUnits_(n),t=e.utils.Coordinate.sum(this.startXY_,t)),this.draggingBubble_.moveTo(t.x,t.y),this.dragTarget_&&this.dragTarget_.onDrop(this.draggingBubble_),this.wouldDeleteBubble_?(this.fireMoveEvent_(),this.draggingBubble_.dispose(!1,!0)):(this.dragSurface_&&this.dragSurface_.clearAndHide(this.workspace_.getBubbleCanvas()),this.draggingBubble_.setDragging&&this.draggingBubble_.setDragging(!1),this.fireMoveEvent_()),this.workspace_.setResizesEnabled(!0),e.Events.setGroup(!1)},e.BubbleDragger.prototype.fireMoveEvent_=function(){if(this.draggingBubble_.isComment){var t=new(e.Events.get(e.Events.COMMENT_MOVE))(this.draggingBubble_);t.setOldCoordinate(this.startXY_),t.recordNew(),e.Events.fire(t)}},e.BubbleDragger.prototype.pixelsToWorkspaceUnits_=function(t){return t=new e.utils.Coordinate(t.x/this.workspace_.scale,t.y/this.workspace_.scale),this.workspace_.isMutator&&t.scale(1/this.workspace_.options.parentWorkspace.scale),t},e.BubbleDragger.prototype.moveToDragSurface_=function(){this.draggingBubble_.moveTo(0,0),this.dragSurface_.translateSurface(this.startXY_.x,this.startXY_.y),this.dragSurface_.setBlocksAndShow(this.draggingBubble_.getSvgRoot())},e.Events.Click=function(t,n,r){e.Events.Click.superClass_.constructor.call(this,t?t.workspace.id:n),this.blockId=t?t.id:null,this.targetType=r},e.utils.object.inherits(e.Events.Click,e.Events.UiBase),e.Events.Click.prototype.type=e.Events.CLICK,e.Events.Click.prototype.toJson=function(){var t=e.Events.Click.superClass_.toJson.call(this);return t.targetType=this.targetType,this.blockId&&(t.blockId=this.blockId),t},e.Events.Click.prototype.fromJson=function(t){e.Events.Click.superClass_.fromJson.call(this,t),this.targetType=t.targetType,this.blockId=t.blockId},e.registry.register(e.registry.Type.EVENT,e.Events.CLICK,e.Events.Click),e.WorkspaceDragger=function(t){this.workspace_=t,this.horizontalScrollEnabled_=this.workspace_.isMovableHorizontally(),this.verticalScrollEnabled_=this.workspace_.isMovableVertically(),this.startScrollXY_=new e.utils.Coordinate(t.scrollX,t.scrollY)},e.WorkspaceDragger.prototype.dispose=function(){this.workspace_=null},e.WorkspaceDragger.prototype.startDrag=function(){e.selected&&e.selected.unselect(),this.workspace_.setupDragSurface()},e.WorkspaceDragger.prototype.endDrag=function(t){this.drag(t),this.workspace_.resetDragSurface()},e.WorkspaceDragger.prototype.drag=function(t){if(t=e.utils.Coordinate.sum(this.startScrollXY_,t),this.horizontalScrollEnabled_&&this.verticalScrollEnabled_)this.workspace_.scroll(t.x,t.y);else if(this.horizontalScrollEnabled_)this.workspace_.scroll(t.x,this.workspace_.scrollY);else{if(!this.verticalScrollEnabled_)throw new TypeError("Invalid state.");this.workspace_.scroll(this.workspace_.scrollX,t.y)}},e.Gesture=function(t,n){this.mouseDownXY_=null,this.currentDragDeltaXY_=new e.utils.Coordinate(0,0),this.startWorkspace_=this.targetBlock_=this.startBlock_=this.startField_=this.startBubble_=null,this.creatorWorkspace_=n,this.isDraggingBubble_=this.isDraggingBlock_=this.isDraggingWorkspace_=this.hasExceededDragRadius_=!1,this.mostRecentEvent_=t,this.flyout_=this.workspaceDragger_=this.blockDragger_=this.bubbleDragger_=this.onUpWrapper_=this.onMoveWrapper_=null,this.isEnding_=this.hasStarted_=this.calledUpdateIsDragging_=!1,this.healStack_=!e.DRAG_STACK},e.Gesture.prototype.dispose=function(){e.Touch.clearTouchIdentifier(),e.Tooltip.unblock(),this.creatorWorkspace_.clearGesture(),this.onMoveWrapper_&&e.browserEvents.unbind(this.onMoveWrapper_),this.onUpWrapper_&&e.browserEvents.unbind(this.onUpWrapper_),this.blockDragger_&&this.blockDragger_.dispose(),this.workspaceDragger_&&this.workspaceDragger_.dispose(),this.bubbleDragger_&&this.bubbleDragger_.dispose()},e.Gesture.prototype.updateFromEvent_=function(t){var n=new e.utils.Coordinate(t.clientX,t.clientY);this.updateDragDelta_(n)&&(this.updateIsDragging_(),e.longStop_()),this.mostRecentEvent_=t},e.Gesture.prototype.updateDragDelta_=function(t){return this.currentDragDeltaXY_=e.utils.Coordinate.difference(t,this.mouseDownXY_),!this.hasExceededDragRadius_&&(this.hasExceededDragRadius_=e.utils.Coordinate.magnitude(this.currentDragDeltaXY_)>(this.flyout_?e.FLYOUT_DRAG_RADIUS:e.DRAG_RADIUS))},e.Gesture.prototype.updateIsDraggingFromFlyout_=function(){return!(!this.targetBlock_||!this.flyout_.isBlockCreatable_(this.targetBlock_)||this.flyout_.isScrollable()&&!this.flyout_.isDragTowardWorkspace(this.currentDragDeltaXY_)||(this.startWorkspace_=this.flyout_.targetWorkspace,this.startWorkspace_.updateScreenCalculationsIfScrolled(),e.Events.getGroup()||e.Events.setGroup(!0),this.startBlock_=null,this.targetBlock_=this.flyout_.createBlock(this.targetBlock_),this.targetBlock_.select(),0))},e.Gesture.prototype.updateIsDraggingBubble_=function(){return!!this.startBubble_&&(this.isDraggingBubble_=!0,this.startDraggingBubble_(),!0)},e.Gesture.prototype.updateIsDraggingBlock_=function(){return!!this.targetBlock_&&(this.flyout_?this.isDraggingBlock_=this.updateIsDraggingFromFlyout_():this.targetBlock_.isMovable()&&(this.isDraggingBlock_=!0),!!this.isDraggingBlock_&&(this.startDraggingBlock_(),!0))},e.Gesture.prototype.updateIsDraggingWorkspace_=function(){(this.flyout_?this.flyout_.isScrollable():this.startWorkspace_&&this.startWorkspace_.isDraggable())&&(this.workspaceDragger_=new e.WorkspaceDragger(this.startWorkspace_),this.isDraggingWorkspace_=!0,this.workspaceDragger_.startDrag())},e.Gesture.prototype.updateIsDragging_=function(){if(this.calledUpdateIsDragging_)throw Error("updateIsDragging_ should only be called once per gesture.");this.calledUpdateIsDragging_=!0,this.updateIsDraggingBubble_()||this.updateIsDraggingBlock_()||this.updateIsDraggingWorkspace_()},e.Gesture.prototype.startDraggingBlock_=function(){this.blockDragger_=new(e.registry.getClassFromOptions(e.registry.Type.BLOCK_DRAGGER,this.creatorWorkspace_.options,!0))(this.targetBlock_,this.startWorkspace_),this.blockDragger_.startDrag(this.currentDragDeltaXY_,this.healStack_),this.blockDragger_.drag(this.mostRecentEvent_,this.currentDragDeltaXY_)},e.Gesture.prototype.startDraggingBubble_=function(){this.bubbleDragger_=new e.BubbleDragger(this.startBubble_,this.startWorkspace_),this.bubbleDragger_.startBubbleDrag(),this.bubbleDragger_.dragBubble(this.mostRecentEvent_,this.currentDragDeltaXY_)},e.Gesture.prototype.doStart=function(t){e.utils.isTargetInput(t)?this.cancel():(this.hasStarted_=!0,e.blockAnimations.disconnectUiStop(),this.startWorkspace_.updateScreenCalculationsIfScrolled(),this.startWorkspace_.isMutator&&this.startWorkspace_.resize(),e.hideChaff(!!this.flyout_),this.startWorkspace_.markFocused(),this.mostRecentEvent_=t,e.Tooltip.block(),this.targetBlock_&&this.targetBlock_.select(),e.utils.isRightButton(t)?this.handleRightClick(t):("touchstart"!=t.type.toLowerCase()&&"pointerdown"!=t.type.toLowerCase()||"mouse"==t.pointerType||e.longStart(t,this),this.mouseDownXY_=new e.utils.Coordinate(t.clientX,t.clientY),this.healStack_=t.altKey||t.ctrlKey||t.metaKey,this.bindMouseEvents(t)))},e.Gesture.prototype.bindMouseEvents=function(t){this.onMoveWrapper_=e.browserEvents.conditionalBind(document,"mousemove",null,this.handleMove.bind(this)),this.onUpWrapper_=e.browserEvents.conditionalBind(document,"mouseup",null,this.handleUp.bind(this)),t.preventDefault(),t.stopPropagation()},e.Gesture.prototype.handleMove=function(t){this.updateFromEvent_(t),this.isDraggingWorkspace_?this.workspaceDragger_.drag(this.currentDragDeltaXY_):this.isDraggingBlock_?this.blockDragger_.drag(this.mostRecentEvent_,this.currentDragDeltaXY_):this.isDraggingBubble_&&this.bubbleDragger_.dragBubble(this.mostRecentEvent_,this.currentDragDeltaXY_),t.preventDefault(),t.stopPropagation()},e.Gesture.prototype.handleUp=function(t){this.updateFromEvent_(t),e.longStop_(),this.isEnding_?console.log("Trying to end a gesture recursively."):(this.isEnding_=!0,this.isDraggingBubble_?this.bubbleDragger_.endBubbleDrag(t,this.currentDragDeltaXY_):this.isDraggingBlock_?this.blockDragger_.endDrag(t,this.currentDragDeltaXY_):this.isDraggingWorkspace_?this.workspaceDragger_.endDrag(this.currentDragDeltaXY_):this.isBubbleClick_()?this.doBubbleClick_():this.isFieldClick_()?this.doFieldClick_():this.isBlockClick_()?this.doBlockClick_():this.isWorkspaceClick_()&&this.doWorkspaceClick_(t),t.preventDefault(),t.stopPropagation(),this.dispose())},e.Gesture.prototype.cancel=function(){this.isEnding_||(e.longStop_(),this.isDraggingBubble_?this.bubbleDragger_.endBubbleDrag(this.mostRecentEvent_,this.currentDragDeltaXY_):this.isDraggingBlock_?this.blockDragger_.endDrag(this.mostRecentEvent_,this.currentDragDeltaXY_):this.isDraggingWorkspace_&&this.workspaceDragger_.endDrag(this.currentDragDeltaXY_),this.dispose())},e.Gesture.prototype.handleRightClick=function(t){this.targetBlock_?(this.bringBlockToFront_(),e.hideChaff(!!this.flyout_),this.targetBlock_.showContextMenu(t)):this.startBubble_?this.startBubble_.showContextMenu(t):this.startWorkspace_&&!this.flyout_&&(e.hideChaff(),this.startWorkspace_.showContextMenu(t)),t.preventDefault(),t.stopPropagation(),this.dispose()},e.Gesture.prototype.handleWsStart=function(t,n){if(this.hasStarted_)throw Error("Tried to call gesture.handleWsStart, but the gesture had already been started.");this.setStartWorkspace_(n),this.mostRecentEvent_=t,this.doStart(t)},e.Gesture.prototype.fireWorkspaceClick_=function(t){e.Events.fire(new(e.Events.get(e.Events.CLICK))(null,t.id,"workspace"))},e.Gesture.prototype.handleFlyoutStart=function(t,n){if(this.hasStarted_)throw Error("Tried to call gesture.handleFlyoutStart, but the gesture had already been started.");this.setStartFlyout_(n),this.handleWsStart(t,n.getWorkspace())},e.Gesture.prototype.handleBlockStart=function(t,n){if(this.hasStarted_)throw Error("Tried to call gesture.handleBlockStart, but the gesture had already been started.");this.setStartBlock(n),this.mostRecentEvent_=t},e.Gesture.prototype.handleBubbleStart=function(t,n){if(this.hasStarted_)throw Error("Tried to call gesture.handleBubbleStart, but the gesture had already been started.");this.setStartBubble(n),this.mostRecentEvent_=t},e.Gesture.prototype.doBubbleClick_=function(){this.startBubble_.setFocus&&this.startBubble_.setFocus(),this.startBubble_.select&&this.startBubble_.select()},e.Gesture.prototype.doFieldClick_=function(){this.startField_.showEditor(this.mostRecentEvent_),this.bringBlockToFront_()},e.Gesture.prototype.doBlockClick_=function(){if(this.flyout_&&this.flyout_.autoClose)this.targetBlock_.isEnabled()&&(e.Events.getGroup()||e.Events.setGroup(!0),this.flyout_.createBlock(this.targetBlock_).scheduleSnapAndBump());else{var t=new(e.Events.get(e.Events.CLICK))(this.startBlock_,this.startWorkspace_.id,"block");e.Events.fire(t)}this.bringBlockToFront_(),e.Events.setGroup(!1)},e.Gesture.prototype.doWorkspaceClick_=function(t){t=this.creatorWorkspace_,e.selected&&e.selected.unselect(),this.fireWorkspaceClick_(this.startWorkspace_||t)},e.Gesture.prototype.bringBlockToFront_=function(){this.targetBlock_&&!this.flyout_&&this.targetBlock_.bringToFront()},e.Gesture.prototype.setStartField=function(t){if(this.hasStarted_)throw Error("Tried to call gesture.setStartField, but the gesture had already been started.");this.startField_||(this.startField_=t)},e.Gesture.prototype.setStartBubble=function(t){this.startBubble_||(this.startBubble_=t)},e.Gesture.prototype.setStartBlock=function(t){this.startBlock_||this.startBubble_||(this.startBlock_=t,t.isInFlyout&&t!=t.getRootBlock()?this.setTargetBlock_(t.getRootBlock()):this.setTargetBlock_(t))},e.Gesture.prototype.setTargetBlock_=function(t){t.isShadow()?this.setTargetBlock_(t.getParent()):this.targetBlock_=t},e.Gesture.prototype.setStartWorkspace_=function(t){this.startWorkspace_||(this.startWorkspace_=t)},e.Gesture.prototype.setStartFlyout_=function(t){this.flyout_||(this.flyout_=t)},e.Gesture.prototype.isBubbleClick_=function(){return!!this.startBubble_&&!this.hasExceededDragRadius_},e.Gesture.prototype.isBlockClick_=function(){return!!this.startBlock_&&!this.hasExceededDragRadius_&&!this.isFieldClick_()},e.Gesture.prototype.isFieldClick_=function(){return!!this.startField_&&this.startField_.isClickable()&&!this.hasExceededDragRadius_&&(!this.flyout_||!this.flyout_.autoClose)},e.Gesture.prototype.isWorkspaceClick_=function(){return!(this.startBlock_||this.startBubble_||this.startField_||this.hasExceededDragRadius_)},e.Gesture.prototype.isDragging=function(){return this.isDraggingWorkspace_||this.isDraggingBlock_||this.isDraggingBubble_},e.Gesture.prototype.hasStarted=function(){return this.hasStarted_},e.Gesture.prototype.getInsertionMarkers=function(){return this.blockDragger_?this.blockDragger_.getInsertionMarkers():[]},e.Gesture.prototype.getCurrentDragger=function(){return this.isDraggingBlock_?this.blockDragger_:this.isDraggingWorkspace_?this.workspaceDragger_:this.isDraggingBubble_?this.bubbleDragger_:null},e.Gesture.inProgress=function(){for(var r,t=e.Workspace.getAll(),n=0;r=t[n];n++)if(r.currentGesture_)return!0;return!1},e.IRegistrable=function(){},e.Marker=function(){this.drawer_=this.curNode_=this.colour=null,this.type="marker"},e.Marker.prototype.setDrawer=function(t){this.drawer_=t},e.Marker.prototype.getDrawer=function(){return this.drawer_},e.Marker.prototype.getCurNode=function(){return this.curNode_},e.Marker.prototype.setCurNode=function(t){var n=this.curNode_;this.curNode_=t,this.drawer_&&this.drawer_.draw(n,this.curNode_)},e.Marker.prototype.draw=function(){this.drawer_&&this.drawer_.draw(this.curNode_,this.curNode_)},e.Marker.prototype.hide=function(){this.drawer_&&this.drawer_.hide()},e.Marker.prototype.dispose=function(){this.getDrawer()&&this.getDrawer().dispose()},e.Cursor=function(){e.Cursor.superClass_.constructor.call(this),this.type="cursor"},e.utils.object.inherits(e.Cursor,e.Marker),e.Cursor.prototype.next=function(){var t=this.getCurNode();if(!t)return null;for(t=t.next();t&&t.next()&&(t.getType()==e.ASTNode.types.NEXT||t.getType()==e.ASTNode.types.BLOCK);)t=t.next();return t&&this.setCurNode(t),t},e.Cursor.prototype.in=function(){var t=this.getCurNode();return t?((t.getType()==e.ASTNode.types.PREVIOUS||t.getType()==e.ASTNode.types.OUTPUT)&&(t=t.next()),(t=t.in())&&this.setCurNode(t),t):null},e.Cursor.prototype.prev=function(){var t=this.getCurNode();if(!t)return null;for(t=t.prev();t&&t.prev()&&(t.getType()==e.ASTNode.types.NEXT||t.getType()==e.ASTNode.types.BLOCK);)t=t.prev();return t&&this.setCurNode(t),t},e.Cursor.prototype.out=function(){var t=this.getCurNode();return t?((t=t.out())&&t.getType()==e.ASTNode.types.BLOCK&&(t=t.prev()||t),t&&this.setCurNode(t),t):null},e.registry.register(e.registry.Type.CURSOR,e.registry.DEFAULT,e.Cursor),e.MarkerManager=function(t){this.cursorSvg_=this.cursor_=null,this.markers_=Object.create(null),this.workspace_=t},e.MarkerManager.LOCAL_MARKER="local_marker_1",e.MarkerManager.prototype.registerMarker=function(t,n){this.markers_[t]&&this.unregisterMarker(t),n.setDrawer(this.workspace_.getRenderer().makeMarkerDrawer(this.workspace_,n)),this.setMarkerSvg(n.getDrawer().createDom()),this.markers_[t]=n},e.MarkerManager.prototype.unregisterMarker=function(t){var n=this.markers_[t];if(!n)throw Error("Marker with ID "+t+" does not exist. Can only unregister markers that exist.");n.dispose(),delete this.markers_[t]},e.MarkerManager.prototype.getCursor=function(){return this.cursor_},e.MarkerManager.prototype.getMarker=function(t){return this.markers_[t]||null},e.MarkerManager.prototype.setCursor=function(t){this.cursor_&&this.cursor_.getDrawer()&&this.cursor_.getDrawer().dispose(),(this.cursor_=t)&&(t=this.workspace_.getRenderer().makeMarkerDrawer(this.workspace_,this.cursor_),this.cursor_.setDrawer(t),this.setCursorSvg(this.cursor_.getDrawer().createDom()))},e.MarkerManager.prototype.setCursorSvg=function(t){t?(this.workspace_.getBlockCanvas().appendChild(t),this.cursorSvg_=t):this.cursorSvg_=null},e.MarkerManager.prototype.setMarkerSvg=function(t){t?this.workspace_.getBlockCanvas()&&(this.cursorSvg_?this.workspace_.getBlockCanvas().insertBefore(t,this.cursorSvg_):this.workspace_.getBlockCanvas().appendChild(t)):this.markerSvg_=null},e.MarkerManager.prototype.updateMarkers=function(){this.workspace_.keyboardAccessibilityMode&&this.cursorSvg_&&this.workspace_.getCursor().draw()},e.MarkerManager.prototype.dispose=function(){for(var r,t=Object.keys(this.markers_),n=0;r=t[n];n++)this.unregisterMarker(r);this.markers_=null,this.cursor_&&(this.cursor_.dispose(),this.cursor_=null)},e.WidgetDiv={},e.WidgetDiv.owner_=null,e.WidgetDiv.dispose_=null,e.WidgetDiv.rendererClassName_="",e.WidgetDiv.themeClassName_="",e.WidgetDiv.createDom=function(){e.WidgetDiv.DIV||(e.WidgetDiv.DIV=document.createElement("div"),e.WidgetDiv.DIV.className="blocklyWidgetDiv",(e.parentContainer||document.body).appendChild(e.WidgetDiv.DIV))},e.WidgetDiv.show=function(t,n,r){e.WidgetDiv.hide(),e.WidgetDiv.owner_=t,e.WidgetDiv.dispose_=r,(t=e.WidgetDiv.DIV).style.direction=n?"rtl":"ltr",t.style.display="block",n=e.getMainWorkspace(),e.WidgetDiv.rendererClassName_=n.getRenderer().getClassName(),e.WidgetDiv.themeClassName_=n.getTheme().getClassName(),e.utils.dom.addClass(t,e.WidgetDiv.rendererClassName_),e.utils.dom.addClass(t,e.WidgetDiv.themeClassName_)},e.WidgetDiv.hide=function(){if(e.WidgetDiv.isVisible()){e.WidgetDiv.owner_=null;var t=e.WidgetDiv.DIV;t.style.display="none",t.style.left="",t.style.top="",e.WidgetDiv.dispose_&&e.WidgetDiv.dispose_(),e.WidgetDiv.dispose_=null,t.textContent="",e.WidgetDiv.rendererClassName_&&(e.utils.dom.removeClass(t,e.WidgetDiv.rendererClassName_),e.WidgetDiv.rendererClassName_=""),e.WidgetDiv.themeClassName_&&(e.utils.dom.removeClass(t,e.WidgetDiv.themeClassName_),e.WidgetDiv.themeClassName_=""),e.getMainWorkspace().markFocused()}},e.WidgetDiv.isVisible=function(){return!!e.WidgetDiv.owner_},e.WidgetDiv.hideIfOwner=function(t){e.WidgetDiv.owner_==t&&e.WidgetDiv.hide()},e.WidgetDiv.positionInternal_=function(t,n,r){e.WidgetDiv.DIV.style.left=t+"px",e.WidgetDiv.DIV.style.top=n+"px",e.WidgetDiv.DIV.style.height=r+"px"},e.WidgetDiv.positionWithAnchor=function(t,n,r,s){var u=e.WidgetDiv.calculateY_(t,n,r);t=e.WidgetDiv.calculateX_(t,n,r,s),0>u?e.WidgetDiv.positionInternal_(t,0,r.height+u):e.WidgetDiv.positionInternal_(t,u,r.height)},e.WidgetDiv.calculateX_=function(t,n,r,s){return s?(n=Math.max(n.right-r.width,t.left),Math.min(n,t.right-r.width)):(n=Math.min(n.left,t.right-r.width),Math.max(n,t.left))},e.WidgetDiv.calculateY_=function(t,n,r){return n.bottom+r.height>=t.bottom?n.top-r.height:n.bottom},e.Field=function(t,n,r){this.value_=this.DEFAULT_VALUE,this.tooltip_=this.validator_=null,this.size_=new e.utils.Size(0,0),this.constants_=this.mouseDownWrapper_=this.textContent_=this.textElement_=this.borderRect_=this.fieldGroup_=this.markerSvg_=this.cursorSvg_=null,r&&this.configure_(r),this.setValue(t),n&&this.setValidator(n)},e.Field.prototype.DEFAULT_VALUE=null,e.Field.prototype.name=void 0,e.Field.prototype.disposed=!1,e.Field.prototype.maxDisplayLength=50,e.Field.prototype.sourceBlock_=null,e.Field.prototype.isDirty_=!0,e.Field.prototype.visible_=!0,e.Field.prototype.clickTarget_=null,e.Field.NBSP="\xa0",e.Field.prototype.EDITABLE=!0,e.Field.prototype.SERIALIZABLE=!1,e.Field.prototype.configure_=function(t){var n=t.tooltip;"string"==typeof n&&(n=e.utils.replaceMessageReferences(t.tooltip)),n&&this.setTooltip(n)},e.Field.prototype.setSourceBlock=function(t){if(this.sourceBlock_)throw Error("Field already bound to a block.");this.sourceBlock_=t},e.Field.prototype.getConstants=function(){return!this.constants_&&this.sourceBlock_&&this.sourceBlock_.workspace&&this.sourceBlock_.workspace.rendered&&(this.constants_=this.sourceBlock_.workspace.getRenderer().getConstants()),this.constants_},e.Field.prototype.getSourceBlock=function(){return this.sourceBlock_},e.Field.prototype.init=function(){this.fieldGroup_||(this.fieldGroup_=e.utils.dom.createSvgElement(e.utils.Svg.G,{},null),this.isVisible()||(this.fieldGroup_.style.display="none"),this.sourceBlock_.getSvgRoot().appendChild(this.fieldGroup_),this.initView(),this.updateEditable(),this.setTooltip(this.tooltip_),this.bindEvents_(),this.initModel())},e.Field.prototype.initView=function(){this.createBorderRect_(),this.createTextElement_()},e.Field.prototype.initModel=function(){},e.Field.prototype.createBorderRect_=function(){this.borderRect_=e.utils.dom.createSvgElement(e.utils.Svg.RECT,{rx:this.getConstants().FIELD_BORDER_RECT_RADIUS,ry:this.getConstants().FIELD_BORDER_RECT_RADIUS,x:0,y:0,height:this.size_.height,width:this.size_.width,class:"blocklyFieldRect"},this.fieldGroup_)},e.Field.prototype.createTextElement_=function(){this.textElement_=e.utils.dom.createSvgElement(e.utils.Svg.TEXT,{class:"blocklyText"},this.fieldGroup_),this.getConstants().FIELD_TEXT_BASELINE_CENTER&&this.textElement_.setAttribute("dominant-baseline","central"),this.textContent_=document.createTextNode(""),this.textElement_.appendChild(this.textContent_)},e.Field.prototype.bindEvents_=function(){e.Tooltip.bindMouseEvents(this.getClickTarget_()),this.mouseDownWrapper_=e.browserEvents.conditionalBind(this.getClickTarget_(),"mousedown",this,this.onMouseDown_)},e.Field.prototype.fromXml=function(t){this.setValue(t.textContent)},e.Field.prototype.toXml=function(t){return t.textContent=this.getValue(),t},e.Field.prototype.dispose=function(){e.DropDownDiv.hideIfOwner(this),e.WidgetDiv.hideIfOwner(this),e.Tooltip.unbindMouseEvents(this.getClickTarget_()),this.mouseDownWrapper_&&e.browserEvents.unbind(this.mouseDownWrapper_),e.utils.dom.removeNode(this.fieldGroup_),this.disposed=!0},e.Field.prototype.updateEditable=function(){var t=this.fieldGroup_;this.EDITABLE&&t&&(this.sourceBlock_.isEditable()?(e.utils.dom.addClass(t,"blocklyEditableText"),e.utils.dom.removeClass(t,"blocklyNonEditableText"),t.style.cursor=this.CURSOR):(e.utils.dom.addClass(t,"blocklyNonEditableText"),e.utils.dom.removeClass(t,"blocklyEditableText"),t.style.cursor=""))},e.Field.prototype.isClickable=function(){return!!this.sourceBlock_&&this.sourceBlock_.isEditable()&&!!this.showEditor_&&"function"==typeof this.showEditor_},e.Field.prototype.isCurrentlyEditable=function(){return this.EDITABLE&&!!this.sourceBlock_&&this.sourceBlock_.isEditable()},e.Field.prototype.isSerializable=function(){var t=!1;return this.name&&(this.SERIALIZABLE?t=!0:this.EDITABLE&&(console.warn("Detected an editable field that was not serializable. Please define SERIALIZABLE property as true on all editable custom fields. Proceeding with serialization."),t=!0)),t},e.Field.prototype.isVisible=function(){return this.visible_},e.Field.prototype.setVisible=function(t){if(this.visible_!=t){this.visible_=t;var n=this.getSvgRoot();n&&(n.style.display=t?"block":"none")}},e.Field.prototype.setValidator=function(t){this.validator_=t},e.Field.prototype.getValidator=function(){return this.validator_},e.Field.prototype.getSvgRoot=function(){return this.fieldGroup_},e.Field.prototype.applyColour=function(){},e.Field.prototype.render_=function(){this.textContent_&&(this.textContent_.nodeValue=this.getDisplayText_()),this.updateSize_()},e.Field.prototype.showEditor=function(t){this.isClickable()&&this.showEditor_(t)},e.Field.prototype.updateSize_=function(t){var n=this.getConstants(),r=2*(t=null!=t?t:this.borderRect_?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0),s=n.FIELD_TEXT_HEIGHT,u=0;this.textElement_&&(r+=u=e.utils.dom.getFastTextWidth(this.textElement_,n.FIELD_TEXT_FONTSIZE,n.FIELD_TEXT_FONTWEIGHT,n.FIELD_TEXT_FONTFAMILY)),this.borderRect_&&(s=Math.max(s,n.FIELD_BORDER_RECT_HEIGHT)),this.size_.height=s,this.size_.width=r,this.positionTextElement_(t,u),this.positionBorderRect_()},e.Field.prototype.positionTextElement_=function(t,n){if(this.textElement_){var r=this.getConstants(),s=this.size_.height/2;this.textElement_.setAttribute("x",this.sourceBlock_.RTL?this.size_.width-n-t:t),this.textElement_.setAttribute("y",r.FIELD_TEXT_BASELINE_CENTER?s:s-r.FIELD_TEXT_HEIGHT/2+r.FIELD_TEXT_BASELINE)}},e.Field.prototype.positionBorderRect_=function(){this.borderRect_&&(this.borderRect_.setAttribute("width",this.size_.width),this.borderRect_.setAttribute("height",this.size_.height),this.borderRect_.setAttribute("rx",this.getConstants().FIELD_BORDER_RECT_RADIUS),this.borderRect_.setAttribute("ry",this.getConstants().FIELD_BORDER_RECT_RADIUS))},e.Field.prototype.getSize=function(){return this.isVisible()?(this.isDirty_?(this.render_(),this.isDirty_=!1):this.visible_&&0==this.size_.width&&(console.warn("Deprecated use of setting size_.width to 0 to rerender a field. Set field.isDirty_ to true instead."),this.render_()),this.size_):new e.utils.Size(0,0)},e.Field.prototype.getScaledBBox=function(){if(this.borderRect_)t=this.borderRect_.getBoundingClientRect(),r=e.utils.style.getPageOffset(this.borderRect_),s=t.width,t=t.height;else{var t=this.sourceBlock_.getHeightWidth(),n=this.sourceBlock_.workspace.scale,r=this.getAbsoluteXY_(),s=t.width*n;t=t.height*n,e.utils.userAgent.GECKO?(r.x+=1.5*n,r.y+=1.5*n):e.utils.userAgent.EDGE||e.utils.userAgent.IE||(r.x-=.5*n,r.y-=.5*n),s+=1*n,t+=1*n}return new e.utils.Rect(r.y,r.y+t,r.x,r.x+s)},e.Field.prototype.getDisplayText_=function(){var t=this.getText();return t?(t.length>this.maxDisplayLength&&(t=t.substring(0,this.maxDisplayLength-2)+"\u2026"),t=t.replace(/\s/g,e.Field.NBSP),this.sourceBlock_&&this.sourceBlock_.RTL&&(t+="\u200f"),t):e.Field.NBSP},e.Field.prototype.getText=function(){if(this.getText_){var t=this.getText_.call(this);if(null!==t)return String(t)}return String(this.getValue())},e.Field.prototype.markDirty=function(){this.isDirty_=!0,this.constants_=null},e.Field.prototype.forceRerender=function(){this.isDirty_=!0,this.sourceBlock_&&this.sourceBlock_.rendered&&(this.sourceBlock_.render(),this.sourceBlock_.bumpNeighbours(),this.updateMarkers_())},e.Field.prototype.setValue=function(t){if(null!==t){var n=this.doClassValidation_(t);if(!((t=this.processValidation_(t,n))instanceof Error)){if((n=this.getValidator())&&(n=n.call(this,t),(t=this.processValidation_(t,n))instanceof Error))return;if(!(n=this.sourceBlock_)||!n.disposed){var r=this.getValue();r===t?this.doValueUpdate_(t):(n&&e.Events.isEnabled()&&e.Events.fire(new(e.Events.get(e.Events.BLOCK_CHANGE))(n,"field",this.name||null,r,t)),this.doValueUpdate_(t),this.isDirty_&&this.forceRerender())}}}},e.Field.prototype.processValidation_=function(t,n){return null===n?(this.doValueInvalid_(t),this.isDirty_&&this.forceRerender(),Error()):(void 0!==n&&(t=n),t)},e.Field.prototype.getValue=function(){return this.value_},e.Field.prototype.doClassValidation_=function(t){return null==t?null:t},e.Field.prototype.doValueUpdate_=function(t){this.value_=t,this.isDirty_=!0},e.Field.prototype.doValueInvalid_=function(t){},e.Field.prototype.onMouseDown_=function(t){this.sourceBlock_&&this.sourceBlock_.workspace&&(t=this.sourceBlock_.workspace.getGesture(t))&&t.setStartField(this)},e.Field.prototype.setTooltip=function(t){t||""===t||(t=this.sourceBlock_);var n=this.getClickTarget_();n?n.tooltip=t:this.tooltip_=t},e.Field.prototype.getTooltip=function(){var t=this.getClickTarget_();return e.Tooltip.getTooltipOfObject(t||{tooltip:this.tooltip_})},e.Field.prototype.getClickTarget_=function(){return this.clickTarget_||this.getSvgRoot()},e.Field.prototype.getAbsoluteXY_=function(){return e.utils.style.getPageOffset(this.getClickTarget_())},e.Field.prototype.referencesVariables=function(){return!1},e.Field.prototype.getParentInput=function(){for(var t=null,n=this.sourceBlock_,r=n.inputList,s=0;s<n.inputList.length;s++)for(var u=r[s],y=u.fieldRow,x=0;x<y.length;x++)if(y[x]===this){t=u;break}return t},e.Field.prototype.getFlipRtl=function(){return!1},e.Field.prototype.isTabNavigable=function(){return!1},e.Field.prototype.onShortcut=function(t){return!1},e.Field.prototype.setCursorSvg=function(t){t?(this.fieldGroup_.appendChild(t),this.cursorSvg_=t):this.cursorSvg_=null},e.Field.prototype.setMarkerSvg=function(t){t?(this.fieldGroup_.appendChild(t),this.markerSvg_=t):this.markerSvg_=null},e.Field.prototype.updateMarkers_=function(){var t=this.sourceBlock_.workspace;t.keyboardAccessibilityMode&&this.cursorSvg_&&t.getCursor().draw(),t.keyboardAccessibilityMode&&this.markerSvg_&&t.getMarker(e.MarkerManager.LOCAL_MARKER).draw()},e.FieldLabel=function(t,n,r){this.class_=null,e.FieldLabel.superClass_.constructor.call(this,t,null,r),r||(this.class_=n||null)},e.utils.object.inherits(e.FieldLabel,e.Field),e.FieldLabel.prototype.DEFAULT_VALUE="",e.FieldLabel.fromJson=function(t){var n=e.utils.replaceMessageReferences(t.text);return new e.FieldLabel(n,void 0,t)},e.FieldLabel.prototype.EDITABLE=!1,e.FieldLabel.prototype.configure_=function(t){e.FieldLabel.superClass_.configure_.call(this,t),this.class_=t.class},e.FieldLabel.prototype.initView=function(){this.createTextElement_(),this.class_&&e.utils.dom.addClass(this.textElement_,this.class_)},e.FieldLabel.prototype.doClassValidation_=function(t){return null==t?null:String(t)},e.FieldLabel.prototype.setClass=function(t){this.textElement_&&(this.class_&&e.utils.dom.removeClass(this.textElement_,this.class_),t&&e.utils.dom.addClass(this.textElement_,t)),this.class_=t},e.fieldRegistry.register("field_label",e.FieldLabel),e.Input=function(t,n,r,s){if(t!=e.inputTypes.DUMMY&&!n)throw Error("Value inputs and statement inputs must have non-empty name.");this.type=t,this.name=n,this.sourceBlock_=r,this.connection=s,this.fieldRow=[]},e.Input.prototype.align=e.constants.ALIGN.LEFT,e.Input.prototype.visible_=!0,e.Input.prototype.getSourceBlock=function(){return this.sourceBlock_},e.Input.prototype.appendField=function(t,n){return this.insertFieldAt(this.fieldRow.length,t,n),this},e.Input.prototype.insertFieldAt=function(t,n,r){if(0>t||t>this.fieldRow.length)throw Error("index "+t+" out of bounds.");return(n||""==n&&r)&&("string"==typeof n&&(n=e.fieldRegistry.fromJson({type:"field_label",text:n})),n.setSourceBlock(this.sourceBlock_),this.sourceBlock_.rendered&&(n.init(),n.applyColour()),n.name=r,n.setVisible(this.isVisible()),n.prefixField&&(t=this.insertFieldAt(t,n.prefixField)),this.fieldRow.splice(t,0,n),++t,n.suffixField&&(t=this.insertFieldAt(t,n.suffixField)),this.sourceBlock_.rendered&&(this.sourceBlock_=this.sourceBlock_,this.sourceBlock_.render(),this.sourceBlock_.bumpNeighbours())),t},e.Input.prototype.removeField=function(t,n){for(var s,r=0;s=this.fieldRow[r];r++)if(s.name===t)return s.dispose(),this.fieldRow.splice(r,1),this.sourceBlock_.rendered&&(this.sourceBlock_=this.sourceBlock_,this.sourceBlock_.render(),this.sourceBlock_.bumpNeighbours()),!0;if(n)return!1;throw Error('Field "'+t+'" not found.')},e.Input.prototype.isVisible=function(){return this.visible_},e.Input.prototype.setVisible=function(t){var n=[];if(this.visible_==t)return n;this.visible_=t;for(var s,r=0;s=this.fieldRow[r];r++)s.setVisible(t);return this.connection&&(this.connection=this.connection,t?n=this.connection.startTrackingAll():this.connection.stopTrackingAll(),r=this.connection.targetBlock())&&(r.getSvgRoot().style.display=t?"block":"none"),n},e.Input.prototype.markDirty=function(){for(var n,t=0;n=this.fieldRow[t];t++)n.markDirty()},e.Input.prototype.setCheck=function(t){if(!this.connection)throw Error("This input does not have a connection.");return this.connection.setCheck(t),this},e.Input.prototype.setAlign=function(t){return this.align=t,this.sourceBlock_.rendered&&(this.sourceBlock_=this.sourceBlock_,this.sourceBlock_.render()),this},e.Input.prototype.setShadowDom=function(t){if(!this.connection)throw Error("This input does not have a connection.");return this.connection.setShadowDom(t),this},e.Input.prototype.getShadowDom=function(){if(!this.connection)throw Error("This input does not have a connection.");return this.connection.getShadowDom()},e.Input.prototype.init=function(){if(this.sourceBlock_.workspace.rendered)for(var t=0;t<this.fieldRow.length;t++)this.fieldRow[t].init()},e.Input.prototype.dispose=function(){for(var n,t=0;n=this.fieldRow[t];t++)n.dispose();this.connection&&this.connection.dispose(),this.sourceBlock_=null},e.Block=function(t,n,r){if(e.Generator&&void 0!==e.Generator.prototype[n])throw Error('Block prototypeName "'+n+'" conflicts with Blockly.Generator members.');if(this.id=r&&!t.getBlockById(r)?r:e.utils.genUid(),t.setBlockById(this.id,this),this.previousConnection=this.nextConnection=this.outputConnection=null,this.inputList=[],this.inputsInline=void 0,this.disabled=!1,this.tooltip="",this.contextMenu=!0,this.parentBlock_=null,this.childBlocks_=[],this.editable_=this.movable_=this.deletable_=!0,this.collapsed_=this.isShadow_=!1,this.comment=this.outputShape_=null,this.commentModel={text:null,pinned:!1,size:new e.utils.Size(160,80)},this.xy_=new e.utils.Coordinate(0,0),this.workspace=t,this.isInFlyout=t.isFlyout,this.isInMutator=t.isMutator,this.RTL=t.RTL,this.isInsertionMarker_=!1,this.hat=void 0,this.rendered=null,this.statementInputCount=0,n){if(this.type=n,!(r=e.Blocks[n])||"object"!=typeof r)throw TypeError("Unknown block type: "+n);e.utils.object.mixin(this,r)}t.addTopBlock(this),t.addTypedBlock(this),(t=e.Events.getGroup())||e.Events.setGroup(!0),n=e.Events.recordUndo;try{"function"==typeof this.init&&(e.Events.recordUndo=!1,this.init(),e.Events.recordUndo=n),e.Events.isEnabled()&&e.Events.fire(new(e.Events.get(e.Events.BLOCK_CREATE))(this))}finally{t||e.Events.setGroup(!1),e.Events.recordUndo=n}this.inputsInlineDefault=this.inputsInline,"function"==typeof this.onchange&&this.setOnChange(this.onchange)},e.Block.COLLAPSED_INPUT_NAME=e.constants.COLLAPSED_INPUT_NAME,e.Block.COLLAPSED_FIELD_NAME=e.constants.COLLAPSED_FIELD_NAME,e.Block.prototype.data=null,e.Block.prototype.disposed=!1,e.Block.prototype.hue_=null,e.Block.prototype.colour_="#000000",e.Block.prototype.styleName_="",e.Block.prototype.dispose=function(t){if(this.workspace){this.onchangeWrapper_&&this.workspace.removeChangeListener(this.onchangeWrapper_),this.unplug(t),e.Events.isEnabled()&&e.Events.fire(new(e.Events.get(e.Events.BLOCK_DELETE))(this)),e.Events.disable();try{this.workspace&&(this.workspace.removeTopBlock(this),this.workspace.removeTypedBlock(this),this.workspace.removeBlockById(this.id),this.workspace=null),e.selected==this&&(e.selected=null);for(var n=this.childBlocks_.length-1;0<=n;n--)this.childBlocks_[n].dispose(!1);n=0;for(var r;r=this.inputList[n];n++)r.dispose();this.inputList.length=0;var u,s=this.getConnections_(!0);for(n=0;u=s[n];n++)u.dispose()}finally{e.Events.enable(),this.disposed=!0}}},e.Block.prototype.initModel=function(){for(var n,t=0;n=this.inputList[t];t++)for(var s,r=0;s=n.fieldRow[r];r++)s.initModel&&s.initModel()},e.Block.prototype.unplug=function(t){this.outputConnection?this.unplugFromRow_(t):this.previousConnection&&this.unplugFromStack_(t)},e.Block.prototype.unplugFromRow_=function(t){var n=null;this.outputConnection.isConnected()&&(n=this.outputConnection.targetConnection,this.outputConnection.disconnect()),n&&t&&(t=this.getOnlyValueConnection_())&&t.isConnected()&&!t.targetBlock().isShadow()&&((t=t.targetConnection).disconnect(),this.workspace.connectionChecker.canConnect(t,n,!1)?n.connect(t):t.onFailedConnect(n))},e.Block.prototype.getOnlyValueConnection_=function(){for(var t=null,n=0;n<this.inputList.length;n++){var r=this.inputList[n].connection;if(r&&r.type==e.connectionTypes.INPUT_VALUE&&r.targetConnection){if(t)return null;t=r}}return t},e.Block.prototype.unplugFromStack_=function(t){var n=null;this.previousConnection.isConnected()&&(n=this.previousConnection.targetConnection,this.previousConnection.disconnect());var r=this.getNextBlock();t&&r&&!r.isShadow()&&((t=this.nextConnection.targetConnection).disconnect(),n&&this.workspace.connectionChecker.canConnect(n,t,!1)&&n.connect(t))},e.Block.prototype.getConnections_=function(t){t=[],this.outputConnection&&t.push(this.outputConnection),this.previousConnection&&t.push(this.previousConnection),this.nextConnection&&t.push(this.nextConnection);for(var r,n=0;r=this.inputList[n];n++)r.connection&&t.push(r.connection);return t},e.Block.prototype.lastConnectionInStack=function(t){for(var n=this.nextConnection;n;){var r=n.targetBlock();if(!r||t&&r.isShadow())return n;n=r.nextConnection}return null},e.Block.prototype.bumpNeighbours=function(){},e.Block.prototype.getParent=function(){return this.parentBlock_},e.Block.prototype.getInputWithBlock=function(t){for(var r,n=0;r=this.inputList[n];n++)if(r.connection&&r.connection.targetBlock()==t)return r;return null},e.Block.prototype.getSurroundParent=function(){var t=this;do{var n=t;if(!(t=t.getParent()))return null}while(t.getNextBlock()==n);return t},e.Block.prototype.getNextBlock=function(){return this.nextConnection&&this.nextConnection.targetBlock()},e.Block.prototype.getPreviousBlock=function(){return this.previousConnection&&this.previousConnection.targetBlock()},e.Block.prototype.getFirstStatementConnection=function(){for(var n,t=0;n=this.inputList[t];t++)if(n.connection&&n.connection.type==e.connectionTypes.NEXT_STATEMENT)return n.connection;return null},e.Block.prototype.getRootBlock=function(){var t=this;do{var n=t;t=n.parentBlock_}while(t);return n},e.Block.prototype.getTopStackBlock=function(){var t=this;do{var n=t.getPreviousBlock()}while(n&&n.getNextBlock()==t&&(t=n));return t},e.Block.prototype.getChildren=function(t){if(!t)return this.childBlocks_;t=[];for(var r,n=0;r=this.inputList[n];n++)r.connection&&(r=r.connection.targetBlock())&&t.push(r);return(n=this.getNextBlock())&&t.push(n),t},e.Block.prototype.setParent=function(t){if(t!=this.parentBlock_){if(this.parentBlock_){if(e.utils.arrayRemove(this.parentBlock_.childBlocks_,this),this.previousConnection&&this.previousConnection.isConnected())throw Error("Still connected to previous block.");if(this.outputConnection&&this.outputConnection.isConnected())throw Error("Still connected to parent block.");this.parentBlock_=null}else this.workspace.removeTopBlock(this);(this.parentBlock_=t)?t.childBlocks_.push(this):this.workspace.addTopBlock(this)}},e.Block.prototype.getDescendants=function(t){for(var s,n=[this],r=this.getChildren(t),u=0;s=r[u];u++)n.push.apply(n,s.getDescendants(t));return n},e.Block.prototype.isDeletable=function(){return this.deletable_&&!this.isShadow_&&!(this.workspace&&this.workspace.options.readOnly)},e.Block.prototype.setDeletable=function(t){this.deletable_=t},e.Block.prototype.isMovable=function(){return this.movable_&&!this.isShadow_&&!(this.workspace&&this.workspace.options.readOnly)},e.Block.prototype.setMovable=function(t){this.movable_=t},e.Block.prototype.isDuplicatable=function(){return!this.workspace.hasBlockLimits()||this.workspace.isCapacityAvailable(e.utils.getBlockTypeCounts(this,!0))},e.Block.prototype.isShadow=function(){return this.isShadow_},e.Block.prototype.setShadow=function(t){this.isShadow_=t},e.Block.prototype.isInsertionMarker=function(){return this.isInsertionMarker_},e.Block.prototype.setInsertionMarker=function(t){this.isInsertionMarker_=t},e.Block.prototype.isEditable=function(){return this.editable_&&!(this.workspace&&this.workspace.options.readOnly)},e.Block.prototype.setEditable=function(t){this.editable_=t,t=0;for(var n;n=this.inputList[t];t++)for(var s,r=0;s=n.fieldRow[r];r++)s.updateEditable()},e.Block.prototype.isDisposed=function(){return this.disposed},e.Block.prototype.getMatchingConnection=function(t,n){var r=this.getConnections_(!0);if(t=t.getConnections_(!0),r.length!=t.length)throw Error("Connection lists did not match in length.");for(var s=0;s<t.length;s++)if(t[s]==n)return r[s];return null},e.Block.prototype.setHelpUrl=function(t){this.helpUrl=t},e.Block.prototype.setTooltip=function(t){this.tooltip=t},e.Block.prototype.getTooltip=function(){return e.Tooltip.getTooltipOfObject(this)},e.Block.prototype.getColour=function(){return this.colour_},e.Block.prototype.getStyleName=function(){return this.styleName_},e.Block.prototype.getHue=function(){return this.hue_},e.Block.prototype.setColour=function(t){t=e.utils.parseBlockColour(t),this.hue_=t.hue,this.colour_=t.hex},e.Block.prototype.setStyle=function(t){this.styleName_=t},e.Block.prototype.setOnChange=function(t){if(t&&"function"!=typeof t)throw Error("onchange must be a function.");this.onchangeWrapper_&&this.workspace.removeChangeListener(this.onchangeWrapper_),(this.onchange=t)&&(this.onchangeWrapper_=t.bind(this),this.workspace.addChangeListener(this.onchangeWrapper_))},e.Block.prototype.getField=function(t){if("string"!=typeof t)throw TypeError("Blockly.Block.prototype.getField expects a string with the field name but received "+(void 0===t?"nothing":t+" of type "+typeof t)+" instead");for(var r,n=0;r=this.inputList[n];n++)for(var u,s=0;u=r.fieldRow[s];s++)if(u.name===t)return u;return null},e.Block.prototype.getVars=function(){for(var r,t=[],n=0;r=this.inputList[n];n++)for(var u,s=0;u=r.fieldRow[s];s++)u.referencesVariables()&&t.push(u.getValue());return t},e.Block.prototype.getVarModels=function(){for(var r,t=[],n=0;r=this.inputList[n];n++)for(var u,s=0;u=r.fieldRow[s];s++)u.referencesVariables()&&(u=this.workspace.getVariableById(u.getValue()))&&t.push(u);return t},e.Block.prototype.updateVarName=function(t){for(var r,n=0;r=this.inputList[n];n++)for(var u,s=0;u=r.fieldRow[s];s++)u.referencesVariables()&&t.getId()==u.getValue()&&u.refreshVariableName()},e.Block.prototype.renameVarById=function(t,n){for(var s,r=0;s=this.inputList[r];r++)for(var y,u=0;y=s.fieldRow[u];u++)y.referencesVariables()&&t==y.getValue()&&y.setValue(n)},e.Block.prototype.getFieldValue=function(t){return(t=this.getField(t))?t.getValue():null},e.Block.prototype.setFieldValue=function(t,n){var r=this.getField(n);if(!r)throw Error('Field "'+n+'" not found.');r.setValue(t)},e.Block.prototype.setPreviousStatement=function(t,n){if(t){if(void 0===n&&(n=null),!this.previousConnection){if(this.outputConnection)throw Error("Remove output connection prior to adding previous connection.");this.previousConnection=this.makeConnection_(e.connectionTypes.PREVIOUS_STATEMENT)}this.previousConnection.setCheck(n)}else if(this.previousConnection){if(this.previousConnection.isConnected())throw Error("Must disconnect previous statement before removing connection.");this.previousConnection.dispose(),this.previousConnection=null}},e.Block.prototype.setNextStatement=function(t,n){if(t)void 0===n&&(n=null),this.nextConnection||(this.nextConnection=this.makeConnection_(e.connectionTypes.NEXT_STATEMENT)),this.nextConnection.setCheck(n);else if(this.nextConnection){if(this.nextConnection.isConnected())throw Error("Must disconnect next statement before removing connection.");this.nextConnection.dispose(),this.nextConnection=null}},e.Block.prototype.setOutput=function(t,n){if(t){if(void 0===n&&(n=null),!this.outputConnection){if(this.previousConnection)throw Error("Remove previous connection prior to adding output connection.");this.outputConnection=this.makeConnection_(e.connectionTypes.OUTPUT_VALUE)}this.outputConnection.setCheck(n)}else if(this.outputConnection){if(this.outputConnection.isConnected())throw Error("Must disconnect output value before removing connection.");this.outputConnection.dispose(),this.outputConnection=null}},e.Block.prototype.setInputsInline=function(t){this.inputsInline!=t&&(e.Events.fire(new(e.Events.get(e.Events.BLOCK_CHANGE))(this,"inline",null,this.inputsInline,t)),this.inputsInline=t)},e.Block.prototype.getInputsInline=function(){if(null!=this.inputsInline)return this.inputsInline;for(var t=1;t<this.inputList.length;t++)if(this.inputList[t-1].type==e.inputTypes.DUMMY&&this.inputList[t].type==e.inputTypes.DUMMY)return!1;for(t=1;t<this.inputList.length;t++)if(this.inputList[t-1].type==e.inputTypes.VALUE&&this.inputList[t].type==e.inputTypes.DUMMY)return!0;return!1},e.Block.prototype.setOutputShape=function(t){this.outputShape_=t},e.Block.prototype.getOutputShape=function(){return this.outputShape_},e.Block.prototype.isEnabled=function(){return!this.disabled},e.Block.prototype.setEnabled=function(t){this.isEnabled()!=t&&(e.Events.fire(new(e.Events.get(e.Events.BLOCK_CHANGE))(this,"disabled",null,this.disabled,!t)),this.disabled=!t)},e.Block.prototype.getInheritedDisabled=function(){for(var t=this.getSurroundParent();t;){if(t.disabled)return!0;t=t.getSurroundParent()}return!1},e.Block.prototype.isCollapsed=function(){return this.collapsed_},e.Block.prototype.setCollapsed=function(t){this.collapsed_!=t&&(e.Events.fire(new(e.Events.get(e.Events.BLOCK_CHANGE))(this,"collapsed",null,this.collapsed_,t)),this.collapsed_=t)},e.Block.prototype.toString=function(t,n){function r(at){var rt=at.getCheck();return!rt&&at.targetConnection&&(rt=at.targetConnection.getCheck()),!!rt&&(-1!=rt.indexOf("Boolean")||-1!=rt.indexOf("Number"))}function s(){x&&x.getType()==B.getType()&&x.getLocation()==B.getLocation()&&(x=null)}var u=[];n=n||"?";var y=e.ASTNode.NAVIGATE_ALL_FIELDS;e.ASTNode.NAVIGATE_ALL_FIELDS=!0;for(var x=e.ASTNode.createBlockNode(this),B=x;x;){switch(x.getType()){case e.ASTNode.types.INPUT:var Q=x.getLocation();x.in()?r(Q)&&u.push("("):u.push(n);break;case e.ASTNode.types.FIELD:(Q=x.getLocation()).name!=e.constants.COLLAPSED_FIELD_NAME&&u.push(Q.getText())}if(!(x=(Q=x).in()||Q.next())){for(x=Q.out(),s();x&&!x.next();)x=x.out(),s(),x&&x.getType()==e.ASTNode.types.INPUT&&r(x.getLocation())&&u.push(")");x&&(x=x.next())}}for(e.ASTNode.NAVIGATE_ALL_FIELDS=y,n=2;n<u.length;n++)"("==u[n-2]&&")"==u[n]&&(u[n-2]=u[n-1],u.splice(n-1,2));return u=(u=u.reduce(function(at,rt){return at+("("==at.substr(-1)||")"==rt?"":" ")+rt},"")).trim()||"???",t&&u.length>t&&(u=u.substring(0,t-3)+"..."),u},e.Block.prototype.appendValueInput=function(t){return this.appendInput_(e.inputTypes.VALUE,t)},e.Block.prototype.appendStatementInput=function(t){return this.appendInput_(e.inputTypes.STATEMENT,t)},e.Block.prototype.appendDummyInput=function(t){return this.appendInput_(e.inputTypes.DUMMY,t||"")},e.Block.prototype.jsonInit=function(t){var n=t.type?'Block "'+t.type+'": ':"";if(t.output&&t.previousStatement)throw Error(n+"Must not have both an output and a previousStatement.");if(t.style&&t.style.hat&&(this.hat=t.style.hat,t.style=null),t.style&&t.colour)throw Error(n+"Must not have both a colour and a style.");t.style?this.jsonInitStyle_(t,n):this.jsonInitColour_(t,n);for(var r=0;void 0!==t["message"+r];)this.interpolate_(t["message"+r],t["args"+r]||[],t["lastDummyAlign"+r],n),r++;if(void 0!==t.inputsInline&&this.setInputsInline(t.inputsInline),void 0!==t.output&&this.setOutput(!0,t.output),void 0!==t.outputShape&&this.setOutputShape(t.outputShape),void 0!==t.previousStatement&&this.setPreviousStatement(!0,t.previousStatement),void 0!==t.nextStatement&&this.setNextStatement(!0,t.nextStatement),void 0!==t.tooltip&&(r=e.utils.replaceMessageReferences(r=t.tooltip),this.setTooltip(r)),void 0!==t.enableContextMenu&&(this.contextMenu=!!(r=t.enableContextMenu)),void 0!==t.helpUrl&&(r=e.utils.replaceMessageReferences(r=t.helpUrl),this.setHelpUrl(r)),"string"==typeof t.extensions&&(console.warn(n+"JSON attribute 'extensions' should be an array of strings. Found raw string in JSON for '"+t.type+"' block."),t.extensions=[t.extensions]),void 0!==t.mutator&&e.Extensions.apply(t.mutator,this,!0),t=t.extensions,Array.isArray(t))for(n=0;n<t.length;++n)e.Extensions.apply(t[n],this,!1)},e.Block.prototype.jsonInitColour_=function(t,n){if("colour"in t)if(void 0===t.colour)console.warn(n+"Undefined colour value.");else{t=t.colour;try{this.setColour(t)}catch(r){console.warn(n+"Illegal colour value: ",t)}}},e.Block.prototype.jsonInitStyle_=function(t,n){t=t.style;try{this.setStyle(t)}catch(r){console.warn(n+"Style does not exist: ",t)}},e.Block.prototype.mixin=function(t,n){if(void 0!==n&&"boolean"!=typeof n)throw Error("opt_disableCheck must be a boolean if provided");if(!n){for(var r in n=[],t)void 0!==this[r]&&n.push(r);if(n.length)throw Error("Mixin will overwrite block members: "+JSON.stringify(n))}e.utils.object.mixin(this,t)},e.Block.prototype.interpolate_=function(t,n,r,s){t=e.utils.tokenizeInterpolation(t),this.validateTokens_(t,n.length),n=this.interpolateArguments_(t,n,r),r=[],t=0;for(var u;u=n[t];t++)if(this.isInputKeyword_(u.type)){if(u=this.inputFromJson_(u,s)){for(var x,y=0;x=r[y];y++)u.appendField(x[0],x[1]);r.length=0}}else(y=this.fieldFromJson_(u))&&r.push([y,u.name])},e.Block.prototype.validateTokens_=function(t,n){for(var r=[],s=0,u=0;u<t.length;u++){var y=t[u];if("number"==typeof y){if(1>y||y>n)throw Error('Block "'+this.type+'": Message index %'+y+" out of range.");if(r[y])throw Error('Block "'+this.type+'": Message index %'+y+" duplicated.");r[y]=!0,s++}}if(s!=n)throw Error('Block "'+this.type+'": Message does not reference all '+n+" arg(s).")},e.Block.prototype.interpolateArguments_=function(t,n,r){for(var s=[],u=0;u<t.length;u++){var y=t[u];"number"==typeof y&&(y=n[y-1]),("string"!=typeof y||(y=this.stringToFieldJson_(y)))&&s.push(y)}return(t=s.length)&&!this.isInputKeyword_(s[t-1].type)&&(t={type:"input_dummy"},r&&(t.align=r),s.push(t)),s},e.Block.prototype.fieldFromJson_=function(t){var n=e.fieldRegistry.fromJson(t);return!n&&t.alt?"string"==typeof t.alt?(t=this.stringToFieldJson_(t.alt))?this.fieldFromJson_(t):null:this.fieldFromJson_(t.alt):n},e.Block.prototype.inputFromJson_=function(t,n){var r={LEFT:e.constants.ALIGN.LEFT,RIGHT:e.constants.ALIGN.RIGHT,CENTRE:e.constants.ALIGN.CENTRE,CENTER:e.constants.ALIGN.CENTRE},s=null;switch(t.type){case"input_value":s=this.appendValueInput(t.name);break;case"input_statement":s=this.appendStatementInput(t.name);break;case"input_dummy":s=this.appendDummyInput(t.name)}return s?(t.check&&s.setCheck(t.check),t.align&&(void 0===(r=r[t.align.toUpperCase()])?console.warn(n+"Illegal align value: ",t.align):s.setAlign(r)),s):null},e.Block.prototype.isInputKeyword_=function(t){return"input_value"==t||"input_statement"==t||"input_dummy"==t},e.Block.prototype.stringToFieldJson_=function(t){return(t=t.trim())?{type:"field_label",text:t}:null},e.Block.prototype.appendInput_=function(t,n){var r=null;return(t==e.inputTypes.VALUE||t==e.inputTypes.STATEMENT)&&(r=this.makeConnection_(t)),t==e.inputTypes.STATEMENT&&this.statementInputCount++,t=new e.Input(t,n,this,r),this.inputList.push(t),t},e.Block.prototype.moveInputBefore=function(t,n){if(t!=n){for(var y,r=-1,s=n?-1:this.inputList.length,u=0;y=this.inputList[u];u++)if(y.name==t){if(r=u,-1!=s)break}else if(n&&y.name==n&&(s=u,-1!=r))break;if(-1==r)throw Error('Named input "'+t+'" not found.');if(-1==s)throw Error('Reference input "'+n+'" not found.');this.moveNumberedInputBefore(r,s)}},e.Block.prototype.moveNumberedInputBefore=function(t,n){if(t==n)throw Error("Can't move input to itself.");if(t>=this.inputList.length)throw RangeError("Input index "+t+" out of bounds.");if(n>this.inputList.length)throw RangeError("Reference input "+n+" out of bounds.");var r=this.inputList[t];this.inputList.splice(t,1),t<n&&n--,this.inputList.splice(n,0,r)},e.Block.prototype.removeInput=function(t,n){for(var s,r=0;s=this.inputList[r];r++)if(s.name==t)return s.type==e.inputTypes.STATEMENT&&this.statementInputCount--,s.dispose(),this.inputList.splice(r,1),!0;if(n)return!1;throw Error("Input not found: "+t)},e.Block.prototype.getInput=function(t){for(var r,n=0;r=this.inputList[n];n++)if(r.name==t)return r;return null},e.Block.prototype.getInputTargetBlock=function(t){return(t=this.getInput(t))&&t.connection&&t.connection.targetBlock()},e.Block.prototype.getCommentText=function(){return this.commentModel.text},e.Block.prototype.setCommentText=function(t){this.commentModel.text!=t&&(e.Events.fire(new(e.Events.get(e.Events.BLOCK_CHANGE))(this,"comment",null,this.commentModel.text,t)),this.comment=this.commentModel.text=t)},e.Block.prototype.setWarningText=function(t,n){},e.Block.prototype.setMutator=function(t){},e.Block.prototype.getRelativeToSurfaceXY=function(){return this.xy_},e.Block.prototype.moveBy=function(t,n){if(this.parentBlock_)throw Error("Block has parent.");var r=new(e.Events.get(e.Events.BLOCK_MOVE))(this);this.xy_.translate(t,n),r.recordNew(),e.Events.fire(r)},e.Block.prototype.makeConnection_=function(t){return new e.Connection(this,t)},e.Block.prototype.allInputsFilled=function(t){if(void 0===t&&(t=!0),!t&&this.isShadow())return!1;for(var r,n=0;r=this.inputList[n];n++)if(r.connection&&(!(r=r.connection.targetBlock())||!r.allInputsFilled(t)))return!1;return!(n=this.getNextBlock())||n.allInputsFilled(t)},e.Block.prototype.toDevString=function(){var t=this.type?'"'+this.type+'" block':"Block";return this.id&&(t+=' (id="'+this.id+'")'),t},e.blockRendering.IPathObject=function(t,n){},e.utils.KeyCodes={WIN_KEY_FF_LINUX:0,MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PLUS_SIGN:43,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,FF_SEMICOLON:59,FF_EQUALS:61,FF_DASH:173,FF_HASH:163,QUESTION_MARK:63,AT_SIGN:64,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SCROLL_LOCK:145,FIRST_MEDIA_KEY:166,LAST_MEDIA_KEY:183,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,TILDE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,WIN_KEY:224,MAC_FF_META:224,MAC_WK_CMD_LEFT:91,MAC_WK_CMD_RIGHT:93,WIN_IME:229,VK_NONAME:252,PHANTOM:255},e.Menu=function(){this.menuItems_=[],this.roleName_=this.element_=this.onKeyDownHandler_=this.mouseLeaveHandler_=this.mouseEnterHandler_=this.clickHandler_=this.mouseOverHandler_=this.highlightedItem_=this.openingCoords=null},e.Menu.prototype.addChild=function(t){this.menuItems_.push(t)},e.Menu.prototype.render=function(t){var n=document.createElement("div");n.className="blocklyMenu goog-menu blocklyNonSelectable",n.tabIndex=0,this.roleName_&&e.utils.aria.setRole(n,this.roleName_),this.element_=n;for(var s,r=0;s=this.menuItems_[r];r++)n.appendChild(s.createDom());this.mouseOverHandler_=e.browserEvents.conditionalBind(n,"mouseover",this,this.handleMouseOver_,!0),this.clickHandler_=e.browserEvents.conditionalBind(n,"click",this,this.handleClick_,!0),this.mouseEnterHandler_=e.browserEvents.conditionalBind(n,"mouseenter",this,this.handleMouseEnter_,!0),this.mouseLeaveHandler_=e.browserEvents.conditionalBind(n,"mouseleave",this,this.handleMouseLeave_,!0),this.onKeyDownHandler_=e.browserEvents.conditionalBind(n,"keydown",this,this.handleKeyEvent_),t.appendChild(n)},e.Menu.prototype.getElement=function(){return this.element_},e.Menu.prototype.focus=function(){var t=this.getElement();t&&(t.focus({preventScroll:!0}),e.utils.dom.addClass(t,"blocklyFocused"))},e.Menu.prototype.blur_=function(){var t=this.getElement();t&&(t.blur(),e.utils.dom.removeClass(t,"blocklyFocused"))},e.Menu.prototype.setRole=function(t){this.roleName_=t},e.Menu.prototype.dispose=function(){this.mouseOverHandler_&&(e.browserEvents.unbind(this.mouseOverHandler_),this.mouseOverHandler_=null),this.clickHandler_&&(e.browserEvents.unbind(this.clickHandler_),this.clickHandler_=null),this.mouseEnterHandler_&&(e.browserEvents.unbind(this.mouseEnterHandler_),this.mouseEnterHandler_=null),this.mouseLeaveHandler_&&(e.browserEvents.unbind(this.mouseLeaveHandler_),this.mouseLeaveHandler_=null),this.onKeyDownHandler_&&(e.browserEvents.unbind(this.onKeyDownHandler_),this.onKeyDownHandler_=null);for(var n,t=0;n=this.menuItems_[t];t++)n.dispose();this.element_=null},e.Menu.prototype.getMenuItem_=function(t){for(var n=this.getElement();t&&t!=n;){if(e.utils.dom.hasClass(t,"blocklyMenuItem"))for(var s,r=0;s=this.menuItems_[r];r++)if(s.getElement()==t)return s;t=t.parentElement}return null},e.Menu.prototype.setHighlighted=function(t){var n=this.highlightedItem_;n&&(n.setHighlighted(!1),this.highlightedItem_=null),t&&(t.setHighlighted(!0),this.highlightedItem_=t,n=this.getElement(),e.utils.style.scrollIntoContainerView(t.getElement(),n),e.utils.aria.setState(n,e.utils.aria.State.ACTIVEDESCENDANT,t.getId()))},e.Menu.prototype.highlightNext=function(){var t=this.menuItems_.indexOf(this.highlightedItem_);this.highlightHelper_(t,1)},e.Menu.prototype.highlightPrevious=function(){var t=this.menuItems_.indexOf(this.highlightedItem_);this.highlightHelper_(0>t?this.menuItems_.length:t,-1)},e.Menu.prototype.highlightFirst_=function(){this.highlightHelper_(-1,1)},e.Menu.prototype.highlightLast_=function(){this.highlightHelper_(this.menuItems_.length,-1)},e.Menu.prototype.highlightHelper_=function(t,n){t+=n;for(var r;r=this.menuItems_[t];){if(r.isEnabled()){this.setHighlighted(r);break}t+=n}},e.Menu.prototype.handleMouseOver_=function(t){(t=this.getMenuItem_(t.target))&&(t.isEnabled()?this.highlightedItem_!=t&&this.setHighlighted(t):this.setHighlighted(null))},e.Menu.prototype.handleClick_=function(t){var n=this.openingCoords;if(this.openingCoords=null,n&&"number"==typeof t.clientX){var r=new e.utils.Coordinate(t.clientX,t.clientY);if(1>e.utils.Coordinate.distance(n,r))return}(t=this.getMenuItem_(t.target))&&t.performAction()},e.Menu.prototype.handleMouseEnter_=function(t){this.focus()},e.Menu.prototype.handleMouseLeave_=function(t){this.getElement()&&(this.blur_(),this.setHighlighted(null))},e.Menu.prototype.handleKeyEvent_=function(t){if(this.menuItems_.length&&!(t.shiftKey||t.ctrlKey||t.metaKey||t.altKey)){var n=this.highlightedItem_;switch(t.keyCode){case e.utils.KeyCodes.ENTER:case e.utils.KeyCodes.SPACE:n&&n.performAction();break;case e.utils.KeyCodes.UP:this.highlightPrevious();break;case e.utils.KeyCodes.DOWN:this.highlightNext();break;case e.utils.KeyCodes.PAGE_UP:case e.utils.KeyCodes.HOME:this.highlightFirst_();break;case e.utils.KeyCodes.PAGE_DOWN:case e.utils.KeyCodes.END:this.highlightLast_();break;default:return}t.preventDefault(),t.stopPropagation()}},e.Menu.prototype.getSize=function(){var t=this.getElement(),n=e.utils.style.getSize(t);return n.height=t.scrollHeight,n},e.MenuItem=function(t,n){this.content_=t,this.value_=n,this.enabled_=!0,this.element_=null,this.rightToLeft_=!1,this.roleName_=null,this.highlight_=this.checked_=this.checkable_=!1,this.actionHandler_=null},e.MenuItem.prototype.createDom=function(){var t=document.createElement("div");t.id=e.utils.IdGenerator.getNextUniqueId(),this.element_=t,t.className="blocklyMenuItem goog-menuitem "+(this.enabled_?"":"blocklyMenuItemDisabled goog-menuitem-disabled ")+(this.checked_?"blocklyMenuItemSelected goog-option-selected ":"")+(this.highlight_?"blocklyMenuItemHighlight goog-menuitem-highlight ":"")+(this.rightToLeft_?"blocklyMenuItemRtl goog-menuitem-rtl ":"");var n=document.createElement("div");if(n.className="blocklyMenuItemContent goog-menuitem-content",this.checkable_){var r=document.createElement("div");r.className="blocklyMenuItemCheckbox goog-menuitem-checkbox",n.appendChild(r)}return r=this.content_,"string"==typeof this.content_&&(r=document.createTextNode(this.content_)),n.appendChild(r),t.appendChild(n),this.roleName_&&e.utils.aria.setRole(t,this.roleName_),e.utils.aria.setState(t,e.utils.aria.State.SELECTED,this.checkable_&&this.checked_||!1),e.utils.aria.setState(t,e.utils.aria.State.DISABLED,!this.enabled_),t},e.MenuItem.prototype.dispose=function(){this.element_=null},e.MenuItem.prototype.getElement=function(){return this.element_},e.MenuItem.prototype.getId=function(){return this.element_.id},e.MenuItem.prototype.getValue=function(){return this.value_},e.MenuItem.prototype.setRightToLeft=function(t){this.rightToLeft_=t},e.MenuItem.prototype.setRole=function(t){this.roleName_=t},e.MenuItem.prototype.setCheckable=function(t){this.checkable_=t},e.MenuItem.prototype.setChecked=function(t){this.checked_=t},e.MenuItem.prototype.setHighlighted=function(t){this.highlight_=t;var n=this.getElement();n&&this.isEnabled()&&(t?(e.utils.dom.addClass(n,"blocklyMenuItemHighlight"),e.utils.dom.addClass(n,"goog-menuitem-highlight")):(e.utils.dom.removeClass(n,"blocklyMenuItemHighlight"),e.utils.dom.removeClass(n,"goog-menuitem-highlight")))},e.MenuItem.prototype.isEnabled=function(){return this.enabled_},e.MenuItem.prototype.setEnabled=function(t){this.enabled_=t},e.MenuItem.prototype.performAction=function(){this.isEnabled()&&this.actionHandler_&&this.actionHandler_(this)},e.MenuItem.prototype.onAction=function(t,n){this.actionHandler_=t.bind(n)},e.ContextMenu={},e.ContextMenu.currentBlock=null,e.ContextMenu.menu_=null,e.ContextMenu.show=function(t,n,r){if(e.WidgetDiv.show(e.ContextMenu,r,e.ContextMenu.dispose),n.length){var s=e.ContextMenu.populate_(n,r);e.ContextMenu.menu_=s,e.ContextMenu.position_(s,t,r),setTimeout(function(){s.focus()},1),e.ContextMenu.currentBlock=null}else e.ContextMenu.hide()},e.ContextMenu.populate_=function(t,n){var r=new e.Menu;r.setRole(e.utils.aria.Role.MENU);for(var u,s=0;u=t[s];s++){var y=new e.MenuItem(u.text);y.setRightToLeft(n),y.setRole(e.utils.aria.Role.MENUITEM),r.addChild(y),y.setEnabled(u.enabled),u.enabled&&y.onAction(function(x){e.ContextMenu.hide(),this.callback(this.scope)},u)}return r},e.ContextMenu.position_=function(t,n,r){var s=e.utils.getViewportBBox();n=new e.utils.Rect(n.clientY+s.top,n.clientY+s.top,n.clientX+s.left,n.clientX+s.left),e.ContextMenu.createWidget_(t);var u=t.getSize();r&&(n.left+=u.width,n.right+=u.width,s.left+=u.width,s.right+=u.width),e.WidgetDiv.positionWithAnchor(s,n,u,r),t.focus()},e.ContextMenu.createWidget_=function(t){t.render(e.WidgetDiv.DIV);var n=t.getElement();e.utils.dom.addClass(n,"blocklyContextMenu"),e.browserEvents.conditionalBind(n,"contextmenu",null,e.utils.noEvent),t.focus()},e.ContextMenu.hide=function(){e.WidgetDiv.hideIfOwner(e.ContextMenu),e.ContextMenu.currentBlock=null},e.ContextMenu.dispose=function(){e.ContextMenu.menu_&&(e.ContextMenu.menu_.dispose(),e.ContextMenu.menu_=null)},e.ContextMenu.callbackFactory=function(t,n){return function(){e.Events.disable();try{var r=e.Xml.domToBlock(n,t.workspace),s=t.getRelativeToSurfaceXY();s.x=t.RTL?s.x-e.SNAP_RADIUS:s.x+e.SNAP_RADIUS,s.y+=2*e.SNAP_RADIUS,r.moveBy(s.x,s.y)}finally{e.Events.enable()}e.Events.isEnabled()&&!r.isShadow()&&e.Events.fire(new(e.Events.get(e.Events.BLOCK_CREATE))(r)),r.select()}},e.ContextMenu.commentDeleteOption=function(t){return{text:e.Msg.REMOVE_COMMENT,enabled:!0,callback:function(){e.Events.setGroup(!0),t.dispose(!0,!0),e.Events.setGroup(!1)}}},e.ContextMenu.commentDuplicateOption=function(t){return{text:e.Msg.DUPLICATE_COMMENT,enabled:!0,callback:function(){e.duplicate(t)}}},e.ContextMenu.workspaceCommentOption=function(t,n){if(!e.WorkspaceCommentSvg)throw Error("Missing require for Blockly.WorkspaceCommentSvg");var r={enabled:!e.utils.userAgent.IE};return r.text=e.Msg.ADD_COMMENT,r.callback=function(){var s=new e.WorkspaceCommentSvg(t,e.Msg.WORKSPACE_COMMENT_DEFAULT_TEXT,e.WorkspaceCommentSvg.DEFAULT_SIZE,e.WorkspaceCommentSvg.DEFAULT_SIZE),u=t.getInjectionDiv().getBoundingClientRect();u=new e.utils.Coordinate(n.clientX-u.left,n.clientY-u.top);var y=t.getOriginOffsetInPixels();(u=e.utils.Coordinate.difference(u,y)).scale(1/t.scale),s.moveBy(u.x,u.y),t.rendered&&(s.initSvg(),s.render(),s.select())},r},e.ContextMenuRegistry=function(){e.ContextMenuRegistry.registry=this,this.registry_=Object.create(null)},e.ContextMenuRegistry.ScopeType={BLOCK:"block",WORKSPACE:"workspace"},e.ContextMenuRegistry.registry=null,e.ContextMenuRegistry.prototype.register=function(t){if(this.registry_[t.id])throw Error('Menu item with ID "'+t.id+'" is already registered.');this.registry_[t.id]=t},e.ContextMenuRegistry.prototype.unregister=function(t){if(!this.registry_[t])throw Error('Menu item with ID "'+t+'" not found.');delete this.registry_[t]},e.ContextMenuRegistry.prototype.getItem=function(t){return this.registry_[t]||null},e.ContextMenuRegistry.prototype.getContextMenuOptions=function(t,n){var r=[],s=this.registry_;return Object.keys(s).forEach(function(u){if(t==(u=s[u]).scopeType){var y=u.preconditionFn(n);"hidden"!=y&&(u={text:"function"==typeof u.displayText?u.displayText(n):u.displayText,enabled:"enabled"==y,callback:u.callback,scope:n,weight:u.weight},r.push(u))}}),r.sort(function(u,y){return u.weight-y.weight}),r},new e.ContextMenuRegistry,e.Events.Selected=function(t,n,r){e.Events.Selected.superClass_.constructor.call(this,r),this.oldElementId=t,this.newElementId=n},e.utils.object.inherits(e.Events.Selected,e.Events.UiBase),e.Events.Selected.prototype.type=e.Events.SELECTED,e.Events.Selected.prototype.toJson=function(){var t=e.Events.Selected.superClass_.toJson.call(this);return t.oldElementId=this.oldElementId,t.newElementId=this.newElementId,t},e.Events.Selected.prototype.fromJson=function(t){e.Events.Selected.superClass_.fromJson.call(this,t),this.oldElementId=t.oldElementId,this.newElementId=t.newElementId},e.registry.register(e.registry.Type.EVENT,e.Events.SELECTED,e.Events.Selected),e.IBoundedElement=function(){},e.ICopyable=function(){},e.RenderedConnection=function(t,n){e.RenderedConnection.superClass_.constructor.call(this,t,n),this.db_=t.workspace.connectionDBList[n],this.dbOpposite_=t.workspace.connectionDBList[e.OPPOSITE_TYPE[n]],this.offsetInBlock_=new e.utils.Coordinate(0,0),this.trackedState_=e.RenderedConnection.TrackedState.WILL_TRACK,this.targetConnection=null},e.utils.object.inherits(e.RenderedConnection,e.Connection),e.RenderedConnection.TrackedState={WILL_TRACK:-1,UNTRACKED:0,TRACKED:1},e.RenderedConnection.prototype.dispose=function(){e.RenderedConnection.superClass_.dispose.call(this),this.trackedState_==e.RenderedConnection.TrackedState.TRACKED&&this.db_.removeConnection(this,this.y)},e.RenderedConnection.prototype.getSourceBlock=function(){return e.RenderedConnection.superClass_.getSourceBlock.call(this)},e.RenderedConnection.prototype.targetBlock=function(){return e.RenderedConnection.superClass_.targetBlock.call(this)},e.RenderedConnection.prototype.distanceFrom=function(t){var n=this.x-t.x;return t=this.y-t.y,Math.sqrt(n*n+t*t)},e.RenderedConnection.prototype.bumpAwayFrom=function(t){if(!this.sourceBlock_.workspace.isDragging()){var n=this.sourceBlock_.getRootBlock();if(!n.isInFlyout){var r=!1;if(!n.isMovable()){if(!(n=t.getSourceBlock().getRootBlock()).isMovable())return;t=this,r=!0}var s=e.selected==n;s||n.addSelect();var u=t.x+e.SNAP_RADIUS+Math.floor(Math.random()*e.BUMP_RANDOMNESS)-this.x,y=t.y+e.SNAP_RADIUS+Math.floor(Math.random()*e.BUMP_RANDOMNESS)-this.y;r&&(y=-y),n.RTL&&(u=t.x-e.SNAP_RADIUS-Math.floor(Math.random()*e.BUMP_RANDOMNESS)-this.x),n.moveBy(u,y),s||n.removeSelect()}}},e.RenderedConnection.prototype.moveTo=function(t,n){this.trackedState_==e.RenderedConnection.TrackedState.WILL_TRACK?(this.db_.addConnection(this,n),this.trackedState_=e.RenderedConnection.TrackedState.TRACKED):this.trackedState_==e.RenderedConnection.TrackedState.TRACKED&&(this.db_.removeConnection(this,this.y),this.db_.addConnection(this,n)),this.x=t,this.y=n},e.RenderedConnection.prototype.moveBy=function(t,n){this.moveTo(this.x+t,this.y+n)},e.RenderedConnection.prototype.moveToOffset=function(t){this.moveTo(t.x+this.offsetInBlock_.x,t.y+this.offsetInBlock_.y)},e.RenderedConnection.prototype.setOffsetInBlock=function(t,n){this.offsetInBlock_.x=t,this.offsetInBlock_.y=n},e.RenderedConnection.prototype.getOffsetInBlock=function(){return this.offsetInBlock_},e.RenderedConnection.prototype.tighten=function(){var t=this.targetConnection.x-this.x,n=this.targetConnection.y-this.y;if(0!=t||0!=n){var r=this.targetBlock(),s=r.getSvgRoot();if(!s)throw Error("block is not rendered.");s=e.utils.getRelativeXY(s),r.getSvgRoot().setAttribute("transform","translate("+(s.x-t)+","+(s.y-n)+")"),r.moveConnections(-t,-n)}},e.RenderedConnection.prototype.closest=function(t,n){return this.dbOpposite_.searchForClosest(this,t,n)},e.RenderedConnection.prototype.highlight=function(){var t=this.sourceBlock_.workspace.getRenderer().getConstants(),n=t.shapeFor(this);n=this.type==e.connectionTypes.INPUT_VALUE||this.type==e.connectionTypes.OUTPUT_VALUE?e.utils.svgPaths.moveBy(0,-(t=t.TAB_OFFSET_FROM_TOP))+e.utils.svgPaths.lineOnAxis("v",t)+n.pathDown+e.utils.svgPaths.lineOnAxis("v",t):e.utils.svgPaths.moveBy(-(t=t.NOTCH_OFFSET_LEFT-t.CORNER_RADIUS),0)+e.utils.svgPaths.lineOnAxis("h",t)+n.pathLeft+e.utils.svgPaths.lineOnAxis("h",t),t=this.sourceBlock_.getRelativeToSurfaceXY(),e.Connection.highlightedPath_=e.utils.dom.createSvgElement(e.utils.Svg.PATH,{class:"blocklyHighlightedConnectionPath",d:n,transform:"translate("+(this.x-t.x)+","+(this.y-t.y)+")"+(this.sourceBlock_.RTL?" scale(-1 1)":"")},this.sourceBlock_.getSvgRoot())},e.RenderedConnection.prototype.unhighlight=function(){e.utils.dom.removeNode(e.Connection.highlightedPath_),delete e.Connection.highlightedPath_},e.RenderedConnection.prototype.setTracking=function(t){t&&this.trackedState_==e.RenderedConnection.TrackedState.TRACKED||!t&&this.trackedState_==e.RenderedConnection.TrackedState.UNTRACKED||this.sourceBlock_.isInFlyout||(t?(this.db_.addConnection(this,this.y),this.trackedState_=e.RenderedConnection.TrackedState.TRACKED):(this.trackedState_==e.RenderedConnection.TrackedState.TRACKED&&this.db_.removeConnection(this,this.y),this.trackedState_=e.RenderedConnection.TrackedState.UNTRACKED))},e.RenderedConnection.prototype.stopTrackingAll=function(){if(this.setTracking(!1),this.targetConnection)for(var t=this.targetBlock().getDescendants(!1),n=0;n<t.length;n++){for(var r=t[n],s=r.getConnections_(!0),u=0;u<s.length;u++)s[u].setTracking(!1);for(r=r.getIcons(),u=0;u<r.length;u++)r[u].setVisible(!1)}},e.RenderedConnection.prototype.startTrackingAll=function(){this.setTracking(!0);var t=[];if(this.type!=e.connectionTypes.INPUT_VALUE&&this.type!=e.connectionTypes.NEXT_STATEMENT)return t;var n=this.targetBlock();if(n){if(n.isCollapsed()){var r=[];n.outputConnection&&r.push(n.outputConnection),n.nextConnection&&r.push(n.nextConnection),n.previousConnection&&r.push(n.previousConnection)}else r=n.getConnections_(!0);for(var s=0;s<r.length;s++)t.push.apply(t,r[s].startTrackingAll());t.length||(t[0]=n)}return t},e.RenderedConnection.prototype.isConnectionAllowed=function(t,n){return e.utils.deprecation.warn("RenderedConnection.prototype.isConnectionAllowed","July 2020","July 2021","Blockly.Workspace.prototype.getConnectionChecker().canConnect"),!(this.distanceFrom(t)>n)&&e.RenderedConnection.superClass_.isConnectionAllowed.call(this,t)},e.RenderedConnection.prototype.onFailedConnect=function(t){var n=this.getSourceBlock();if(e.Events.recordUndo){var r=e.Events.getGroup();setTimeout(function(){n.isDisposed()||n.getParent()||(e.Events.setGroup(r),this.bumpAwayFrom(t),e.Events.setGroup(!1))}.bind(this),e.BUMP_DELAY)}},e.RenderedConnection.prototype.disconnectInternal_=function(t,n){e.RenderedConnection.superClass_.disconnectInternal_.call(this,t,n),t.rendered&&t.render(),n.rendered&&(n.updateDisabled(),n.render(),n.getSvgRoot().style.display="block")},e.RenderedConnection.prototype.respawnShadow_=function(){e.RenderedConnection.superClass_.respawnShadow_.call(this);var t=this.targetBlock();t&&(t.initSvg(),t.render(!1),(t=this.getSourceBlock()).rendered&&t.render())},e.RenderedConnection.prototype.neighbours=function(t){return this.dbOpposite_.getNeighbours(this,t)},e.RenderedConnection.prototype.connect_=function(t){e.RenderedConnection.superClass_.connect_.call(this,t);var n=this.getSourceBlock();t=t.getSourceBlock();var r=n.rendered,s=t.rendered;r&&n.updateDisabled(),s&&t.updateDisabled(),r&&s&&(this.type==e.connectionTypes.NEXT_STATEMENT||this.type==e.connectionTypes.PREVIOUS_STATEMENT?t.render():n.render()),(n=n.getInputWithBlock(t))&&(n=n.isVisible(),t.getSvgRoot().style.display=n?"block":"none")},e.RenderedConnection.prototype.onCheckChanged_=function(){!this.isConnected()||this.targetConnection&&this.getConnectionChecker().canConnect(this,this.targetConnection,!1)||((this.isSuperior()?this.targetBlock():this.sourceBlock_).unplug(),this.sourceBlock_.bumpNeighbours())},e.BasicCursor=function(){e.BasicCursor.superClass_.constructor.call(this)},e.utils.object.inherits(e.BasicCursor,e.Cursor),e.BasicCursor.registrationName="basicCursor",e.BasicCursor.prototype.next=function(){var t=this.getCurNode();return t?((t=this.getNextNode_(t,this.validNode_))&&this.setCurNode(t),t):null},e.BasicCursor.prototype.in=function(){return this.next()},e.BasicCursor.prototype.prev=function(){var t=this.getCurNode();return t?((t=this.getPreviousNode_(t,this.validNode_))&&this.setCurNode(t),t):null},e.BasicCursor.prototype.out=function(){return this.prev()},e.BasicCursor.prototype.getNextNode_=function(t,n){if(!t)return null;var r=t.in()||t.next();return n(r)?r:r?this.getNextNode_(r,n):n(t=this.findSiblingOrParent_(t.out()))?t:t?this.getNextNode_(t,n):null},e.BasicCursor.prototype.getPreviousNode_=function(t,n){if(!t)return null;var r=t.prev();return n(r=r?this.getRightMostChild_(r):t.out())?r:r?this.getPreviousNode_(r,n):null},e.BasicCursor.prototype.validNode_=function(t){var n=!1;return((t=t&&t.getType())==e.ASTNode.types.OUTPUT||t==e.ASTNode.types.INPUT||t==e.ASTNode.types.FIELD||t==e.ASTNode.types.NEXT||t==e.ASTNode.types.PREVIOUS||t==e.ASTNode.types.WORKSPACE)&&(n=!0),n},e.BasicCursor.prototype.findSiblingOrParent_=function(t){return t?t.next()||this.findSiblingOrParent_(t.out()):null},e.BasicCursor.prototype.getRightMostChild_=function(t){if(!t.in())return t;for(t=t.in();t.next();)t=t.next();return this.getRightMostChild_(t)},e.registry.register(e.registry.Type.CURSOR,e.BasicCursor.registrationName,e.BasicCursor),e.TabNavigateCursor=function(){e.TabNavigateCursor.superClass_.constructor.call(this)},e.utils.object.inherits(e.TabNavigateCursor,e.BasicCursor),e.TabNavigateCursor.prototype.validNode_=function(t){var n=!1,r=t&&t.getType();return t&&(t=t.getLocation(),r==e.ASTNode.types.FIELD&&t&&t.isTabNavigable()&&t.isClickable()&&(n=!0)),n},e.BlockSvg=function(t,n,r){this.svgGroup_=e.utils.dom.createSvgElement(e.utils.Svg.G,{},null),this.svgGroup_.translate_="",this.style=t.getRenderer().getConstants().getBlockStyle(null),this.pathObject=t.getRenderer().makePathObject(this.svgGroup_,this.style),this.renderIsInProgress_=this.rendered=!1,this.workspace=t,this.previousConnection=this.nextConnection=this.outputConnection=null,this.useDragSurface_=e.utils.is3dSupported()&&!!t.getBlockDragSurface();var s=this.pathObject.svgPath;s.tooltip=this,e.Tooltip.bindMouseEvents(s),e.BlockSvg.superClass_.constructor.call(this,t,n,r),this.svgGroup_.dataset?this.svgGroup_.dataset.id=this.id:e.utils.userAgent.IE&&this.svgGroup_.setAttribute("data-id",this.id)},e.utils.object.inherits(e.BlockSvg,e.Block),e.BlockSvg.prototype.height=0,e.BlockSvg.prototype.width=0,e.BlockSvg.prototype.warningTextDb_=null,e.BlockSvg.INLINE=-1,e.BlockSvg.COLLAPSED_WARNING_ID="TEMP_COLLAPSED_WARNING_",e.BlockSvg.prototype.initSvg=function(){if(!this.workspace.rendered)throw TypeError("Workspace is headless.");for(var n,t=0;n=this.inputList[t];t++)n.init();for(n=this.getIcons(),t=0;t<n.length;t++)n[t].createIcon();this.applyColour(),this.pathObject.updateMovable(this.isMovable()),t=this.getSvgRoot(),this.workspace.options.readOnly||this.eventsInit_||!t||e.browserEvents.conditionalBind(t,"mousedown",this,this.onMouseDown_),this.eventsInit_=!0,t.parentNode||this.workspace.getCanvas().appendChild(t)},e.BlockSvg.prototype.getColourSecondary=function(){return this.style.colourSecondary},e.BlockSvg.prototype.getColourTertiary=function(){return this.style.colourTertiary},e.BlockSvg.prototype.getColourShadow=function(){return e.utils.deprecation.warn("BlockSvg.prototype.getColourShadow","January 2020","January 2021","style.colourSecondary"),this.getColourSecondary()},e.BlockSvg.prototype.getColourBorder=function(){return e.utils.deprecation.warn("BlockSvg.prototype.getColourBorder","January 2020","January 2021","style.colourTertiary"),{colourBorder:this.getColourTertiary(),colourLight:null,colourDark:null}},e.BlockSvg.prototype.select=function(){if(this.isShadow()&&this.getParent())this.getParent().select();else if(e.selected!=this){var t=null;if(e.selected){t=e.selected.id,e.Events.disable();try{e.selected.unselect()}finally{e.Events.enable()}}t=new(e.Events.get(e.Events.SELECTED))(t,this.id,this.workspace.id),e.Events.fire(t),e.selected=this,this.addSelect()}},e.BlockSvg.prototype.unselect=function(){if(e.selected==this){var t=new(e.Events.get(e.Events.SELECTED))(this.id,null,this.workspace.id);t.workspaceId=this.workspace.id,e.Events.fire(t),e.selected=null,this.removeSelect()}},e.BlockSvg.prototype.mutator=null,e.BlockSvg.prototype.comment=null,e.BlockSvg.prototype.commentIcon_=null,e.BlockSvg.prototype.warning=null,e.BlockSvg.prototype.getIcons=function(){var t=[];return this.mutator&&t.push(this.mutator),this.commentIcon_&&t.push(this.commentIcon_),this.warning&&t.push(this.warning),t},e.BlockSvg.prototype.setParent=function(t){var n=this.parentBlock_;if(t!=n){e.utils.dom.startTextWidthCache(),e.BlockSvg.superClass_.setParent.call(this,t),e.utils.dom.stopTextWidthCache();var r=this.getSvgRoot();if(!this.workspace.isClearing&&r){var s=this.getRelativeToSurfaceXY();t?(t.getSvgRoot().appendChild(r),t=this.getRelativeToSurfaceXY(),this.moveConnections(t.x-s.x,t.y-s.y)):n&&(this.workspace.getCanvas().appendChild(r),this.translate(s.x,s.y)),this.applyColour()}}},e.BlockSvg.prototype.getRelativeToSurfaceXY=function(){var t=0,n=0,r=this.useDragSurface_?this.workspace.getBlockDragSurface().getGroup():null,s=this.getSvgRoot();if(s)do{var u=e.utils.getRelativeXY(s);t+=u.x,n+=u.y,this.useDragSurface_&&this.workspace.getBlockDragSurface().getCurrentBlock()==s&&(t+=(u=this.workspace.getBlockDragSurface().getSurfaceTranslation()).x,n+=u.y),s=s.parentNode}while(s&&s!=this.workspace.getCanvas()&&s!=r);return new e.utils.Coordinate(t,n)},e.BlockSvg.prototype.moveBy=function(t,n){if(this.parentBlock_)throw Error("Block has parent.");var r=e.Events.isEnabled();if(r)var s=new(e.Events.get(e.Events.BLOCK_MOVE))(this);var u=this.getRelativeToSurfaceXY();this.translate(u.x+t,u.y+n),this.moveConnections(t,n),r&&(s.recordNew(),e.Events.fire(s)),this.workspace.resizeContents()},e.BlockSvg.prototype.translate=function(t,n){this.getSvgRoot().setAttribute("transform","translate("+t+","+n+")")},e.BlockSvg.prototype.moveToDragSurface=function(){if(this.useDragSurface_){var t=this.getRelativeToSurfaceXY();this.clearTransformAttributes_(),this.workspace.getBlockDragSurface().translateSurface(t.x,t.y),(t=this.getSvgRoot())&&this.workspace.getBlockDragSurface().setBlocksAndShow(t)}},e.BlockSvg.prototype.moveTo=function(t){var n=this.getRelativeToSurfaceXY();this.moveBy(t.x-n.x,t.y-n.y)},e.BlockSvg.prototype.moveOffDragSurface=function(t){this.useDragSurface_&&(this.translate(t.x,t.y),this.workspace.getBlockDragSurface().clearAndHide(this.workspace.getCanvas()))},e.BlockSvg.prototype.moveDuringDrag=function(t){this.useDragSurface_?this.workspace.getBlockDragSurface().translateSurface(t.x,t.y):(this.svgGroup_.translate_="translate("+t.x+","+t.y+")",this.svgGroup_.setAttribute("transform",this.svgGroup_.translate_+this.svgGroup_.skew_))},e.BlockSvg.prototype.clearTransformAttributes_=function(){this.getSvgRoot().removeAttribute("transform")},e.BlockSvg.prototype.snapToGrid=function(){if(this.workspace&&!this.workspace.isDragging()&&!this.getParent()&&!this.isInFlyout){var t=this.workspace.getGrid();if(t&&t.shouldSnap()){var n=t.getSpacing(),r=n/2,s=this.getRelativeToSurfaceXY();t=Math.round((s.x-r)/n)*n+r-s.x,n=Math.round((s.y-r)/n)*n+r-s.y,t=Math.round(t),n=Math.round(n),0==t&&0==n||this.moveBy(t,n)}}},e.BlockSvg.prototype.getBoundingRectangle=function(){var t=this.getRelativeToSurfaceXY(),n=this.getHeightWidth();if(this.RTL)var r=t.x-n.width,s=t.x;else r=t.x,s=t.x+n.width;return new e.utils.Rect(t.y,t.y+n.height,r,s)},e.BlockSvg.prototype.markDirty=function(){this.pathObject.constants=this.workspace.getRenderer().getConstants();for(var n,t=0;n=this.inputList[t];t++)n.markDirty()},e.BlockSvg.prototype.setCollapsed=function(t){this.collapsed_!=t&&(e.BlockSvg.superClass_.setCollapsed.call(this,t),t?this.rendered&&this.render():this.updateCollapsed_())},e.BlockSvg.prototype.updateCollapsed_=function(){for(var u,t=this.isCollapsed(),n=e.constants.COLLAPSED_INPUT_NAME,r=e.constants.COLLAPSED_FIELD_NAME,s=0;u=this.inputList[s];s++)u.name!=n&&u.setVisible(!t);if(t){for(u=this.getIcons(),s=0;t=u[s];s++)t.setVisible(!1);s=this.toString(e.COLLAPSE_CHARS),(u=this.getField(r))?u.setValue(s):(u=this.getInput(n)||this.appendDummyInput(n)).appendField(new e.FieldLabel(s),r)}else this.updateDisabled(),this.removeInput(n)},e.BlockSvg.prototype.tab=function(t,n){var r=new e.TabNavigateCursor;r.setCurNode(e.ASTNode.createFieldNode(t)),t=r.getCurNode(),n?r.next():r.prev(),(n=r.getCurNode())&&n!==t&&(n.getLocation().showEditor(),this.workspace.keyboardAccessibilityMode&&this.workspace.getCursor().setCurNode(n))},e.BlockSvg.prototype.onMouseDown_=function(t){var n=this.workspace&&this.workspace.getGesture(t);n&&n.handleBlockStart(t,this)},e.BlockSvg.prototype.showHelp=function(){var t="function"==typeof this.helpUrl?this.helpUrl():this.helpUrl;t&&window.open(t)},e.BlockSvg.prototype.generateContextMenu=function(){if(this.workspace.options.readOnly||!this.contextMenu)return null;var t=e.ContextMenuRegistry.registry.getContextMenuOptions(e.ContextMenuRegistry.ScopeType.BLOCK,{block:this});return this.customContextMenu&&this.customContextMenu(t),t},e.BlockSvg.prototype.showContextMenu=function(t){var n=this.generateContextMenu();n&&n.length&&(e.ContextMenu.show(t,n,this.RTL),e.ContextMenu.currentBlock=this)},e.BlockSvg.prototype.moveConnections=function(t,n){if(this.rendered){for(var r=this.getConnections_(!1),s=0;s<r.length;s++)r[s].moveBy(t,n);for(r=this.getIcons(),s=0;s<r.length;s++)r[s].computeIconLocation();for(s=0;s<this.childBlocks_.length;s++)this.childBlocks_[s].moveConnections(t,n)}},e.BlockSvg.prototype.setDragging=function(t){if(t){var n=this.getSvgRoot();n.translate_="",n.skew_="",e.draggingConnections=e.draggingConnections.concat(this.getConnections_(!0)),e.utils.dom.addClass(this.svgGroup_,"blocklyDragging")}else e.draggingConnections=[],e.utils.dom.removeClass(this.svgGroup_,"blocklyDragging");for(n=0;n<this.childBlocks_.length;n++)this.childBlocks_[n].setDragging(t)},e.BlockSvg.prototype.setMovable=function(t){e.BlockSvg.superClass_.setMovable.call(this,t),this.pathObject.updateMovable(t)},e.BlockSvg.prototype.setEditable=function(t){e.BlockSvg.superClass_.setEditable.call(this,t),t=this.getIcons();for(var n=0;n<t.length;n++)t[n].updateEditable()},e.BlockSvg.prototype.setShadow=function(t){e.BlockSvg.superClass_.setShadow.call(this,t),this.applyColour()},e.BlockSvg.prototype.setInsertionMarker=function(t){this.isInsertionMarker_!=t&&(this.isInsertionMarker_=t)&&(this.setColour(this.workspace.getRenderer().getConstants().INSERTION_MARKER_COLOUR),this.pathObject.updateInsertionMarker(!0))},e.BlockSvg.prototype.getSvgRoot=function(){return this.svgGroup_},e.BlockSvg.prototype.dispose=function(t,n){if(this.workspace){e.Tooltip.dispose(),e.Tooltip.unbindMouseEvents(this.pathObject.svgPath),e.utils.dom.startTextWidthCache();var r=this.workspace;if(e.selected==this&&(this.unselect(),this.workspace.cancelCurrentGesture()),e.ContextMenu.currentBlock==this&&e.ContextMenu.hide(),n&&this.rendered&&(this.unplug(t),e.blockAnimations.disposeUiEffect(this)),this.rendered=!1,this.warningTextDb_){for(var s in this.warningTextDb_)clearTimeout(this.warningTextDb_[s]);this.warningTextDb_=null}for(n=this.getIcons(),s=0;s<n.length;s++)n[s].dispose();e.BlockSvg.superClass_.dispose.call(this,!!t),e.utils.dom.removeNode(this.svgGroup_),r.resizeContents(),this.svgGroup_=null,e.utils.dom.stopTextWidthCache()}},e.BlockSvg.prototype.toCopyData=function(){if(this.isInsertionMarker_)return null;var t=e.Xml.blockToDom(this,!0);e.Xml.deleteNext(t);var n=this.getRelativeToSurfaceXY();return t.setAttribute("x",this.RTL?-n.x:n.x),t.setAttribute("y",n.y),{xml:t,source:this.workspace,typeCounts:e.utils.getBlockTypeCounts(this,!0)}},e.BlockSvg.prototype.applyColour=function(){this.pathObject.applyColour(this);for(var t=this.getIcons(),n=0;n<t.length;n++)t[n].applyColour();for(t=0;n=this.inputList[t];t++)for(var s,r=0;s=n.fieldRow[r];r++)s.applyColour()},e.BlockSvg.prototype.updateDisabled=function(){var t=this.getChildren(!1);if(this.applyColour(),!this.isCollapsed())for(var r,n=0;r=t[n];n++)r.rendered&&r.updateDisabled()},e.BlockSvg.prototype.getCommentIcon=function(){return this.commentIcon_},e.BlockSvg.prototype.setCommentText=function(t){if(!e.Comment)throw Error("Missing require for Blockly.Comment");this.commentModel.text!=t&&(e.BlockSvg.superClass_.setCommentText.call(this,t),!!this.commentIcon_==(t=null!=t)?this.commentIcon_.updateText():(t?this.comment=this.commentIcon_=new e.Comment(this):(this.commentIcon_.dispose(),this.comment=this.commentIcon_=null),this.rendered&&(this.render(),this.bumpNeighbours())))},e.BlockSvg.prototype.setWarningText=function(t,n){if(!e.Warning)throw Error("Missing require for Blockly.Warning");this.warningTextDb_||(this.warningTextDb_=Object.create(null));var r=n||"";if(r)this.warningTextDb_[r]&&(clearTimeout(this.warningTextDb_[r]),delete this.warningTextDb_[r]);else for(var s in this.warningTextDb_)clearTimeout(this.warningTextDb_[s]),delete this.warningTextDb_[s];if(this.workspace.isDragging()){var u=this;this.warningTextDb_[r]=setTimeout(function(){u.workspace&&(delete u.warningTextDb_[r],u.setWarningText(t,r))},100)}else{if(this.isInFlyout&&(t=null),n=!1,"string"==typeof t){s=this.getSurroundParent();for(var y=null;s;)s.isCollapsed()&&(y=s),s=s.getSurroundParent();y&&y.setWarningText(e.Msg.COLLAPSED_WARNINGS_WARNING,e.BlockSvg.COLLAPSED_WARNING_ID),this.warning||(this.warning=new e.Warning(this),n=!0),this.warning.setText(t,r)}else this.warning&&!r?(this.warning.dispose(),n=!0):this.warning&&(n=this.warning.getText(),this.warning.setText("",r),(s=this.warning.getText())||this.warning.dispose(),n=n!=s);n&&this.rendered&&(this.render(),this.bumpNeighbours())}},e.BlockSvg.prototype.setMutator=function(t){this.mutator&&this.mutator!==t&&this.mutator.dispose(),t&&(t.setBlock(this),this.mutator=t,t.createIcon()),this.rendered&&(this.render(),this.bumpNeighbours())},e.BlockSvg.prototype.setEnabled=function(t){this.isEnabled()!=t&&(e.BlockSvg.superClass_.setEnabled.call(this,t),this.rendered&&!this.getInheritedDisabled()&&this.updateDisabled())},e.BlockSvg.prototype.setHighlighted=function(t){this.rendered&&this.pathObject.updateHighlighted(t)},e.BlockSvg.prototype.addSelect=function(){this.pathObject.updateSelected(!0)},e.BlockSvg.prototype.removeSelect=function(){this.pathObject.updateSelected(!1)},e.BlockSvg.prototype.setDeleteStyle=function(t){this.pathObject.updateDraggingDelete(t)},e.BlockSvg.prototype.getColour=function(){return this.style.colourPrimary},e.BlockSvg.prototype.setColour=function(t){e.BlockSvg.superClass_.setColour.call(this,t),t=this.workspace.getRenderer().getConstants().getBlockStyleForColour(this.colour_),this.pathObject.setStyle(t.style),this.style=t.style,this.styleName_=t.name,this.applyColour()},e.BlockSvg.prototype.setStyle=function(t){var n=this.workspace.getRenderer().getConstants().getBlockStyle(t);if(this.styleName_=t,!n)throw Error("Invalid style name: "+t);this.hat=n.hat,this.pathObject.setStyle(n),this.colour_=n.colourPrimary,this.style=n,this.applyColour()},e.BlockSvg.prototype.bringToFront=function(){var t=this;do{var n=t.getSvgRoot(),r=n.parentNode,s=r.childNodes;s[s.length-1]!==n&&r.appendChild(n),t=t.getParent()}while(t)},e.BlockSvg.prototype.setPreviousStatement=function(t,n){e.BlockSvg.superClass_.setPreviousStatement.call(this,t,n),this.rendered&&(this.render(),this.bumpNeighbours())},e.BlockSvg.prototype.setNextStatement=function(t,n){e.BlockSvg.superClass_.setNextStatement.call(this,t,n),this.rendered&&(this.render(),this.bumpNeighbours())},e.BlockSvg.prototype.setOutput=function(t,n){e.BlockSvg.superClass_.setOutput.call(this,t,n),this.rendered&&(this.render(),this.bumpNeighbours())},e.BlockSvg.prototype.setInputsInline=function(t){e.BlockSvg.superClass_.setInputsInline.call(this,t),this.rendered&&(this.render(),this.bumpNeighbours())},e.BlockSvg.prototype.removeInput=function(t,n){return t=e.BlockSvg.superClass_.removeInput.call(this,t,n),this.rendered&&(this.render(),this.bumpNeighbours()),t},e.BlockSvg.prototype.moveNumberedInputBefore=function(t,n){e.BlockSvg.superClass_.moveNumberedInputBefore.call(this,t,n),this.rendered&&(this.render(),this.bumpNeighbours())},e.BlockSvg.prototype.appendInput_=function(t,n){return t=e.BlockSvg.superClass_.appendInput_.call(this,t,n),this.rendered&&(this.render(),this.bumpNeighbours()),t},e.BlockSvg.prototype.setConnectionTracking=function(t){if(this.previousConnection&&this.previousConnection.setTracking(t),this.outputConnection&&this.outputConnection.setTracking(t),this.nextConnection){this.nextConnection.setTracking(t);var n=this.nextConnection.targetBlock();n&&n.setConnectionTracking(t)}if(!this.collapsed_)for(n=0;n<this.inputList.length;n++){var r=this.inputList[n].connection;r&&(r.setTracking(t),(r=r.targetBlock())&&r.setConnectionTracking(t))}},e.BlockSvg.prototype.getConnections_=function(t){var n=[];if((t||this.rendered)&&(this.outputConnection&&n.push(this.outputConnection),this.previousConnection&&n.push(this.previousConnection),this.nextConnection&&n.push(this.nextConnection),t||!this.collapsed_)){t=0;for(var r;r=this.inputList[t];t++)r.connection&&n.push(r.connection)}return n},e.BlockSvg.prototype.lastConnectionInStack=function(t){return e.BlockSvg.superClass_.lastConnectionInStack.call(this,t)},e.BlockSvg.prototype.getMatchingConnection=function(t,n){return e.BlockSvg.superClass_.getMatchingConnection.call(this,t,n)},e.BlockSvg.prototype.makeConnection_=function(t){return new e.RenderedConnection(this,t)},e.BlockSvg.prototype.bumpNeighbours=function(){if(this.workspace&&!this.workspace.isDragging()){var t=this.getRootBlock();if(!t.isInFlyout)for(var s,n=this.getConnections_(!1),r=0;s=n[r];r++){s.isConnected()&&s.isSuperior()&&s.targetBlock().bumpNeighbours();for(var x,u=s.neighbours(e.SNAP_RADIUS),y=0;x=u[y];y++)s.isConnected()&&x.isConnected()||x.getSourceBlock().getRootBlock()!=t&&(s.isSuperior()?x.bumpAwayFrom(s):s.bumpAwayFrom(x))}}},e.BlockSvg.prototype.scheduleSnapAndBump=function(){var t=this,n=e.Events.getGroup();setTimeout(function(){e.Events.setGroup(n),t.snapToGrid(),e.Events.setGroup(!1)},e.BUMP_DELAY/2),setTimeout(function(){e.Events.setGroup(n),t.bumpNeighbours(),e.Events.setGroup(!1)},e.BUMP_DELAY)},e.BlockSvg.prototype.positionNearConnection=function(t,n){t.type!=e.connectionTypes.NEXT_STATEMENT&&t.type!=e.connectionTypes.INPUT_VALUE||this.moveBy(n.x-t.x,n.y-t.y)},e.BlockSvg.prototype.getParent=function(){return e.BlockSvg.superClass_.getParent.call(this)},e.BlockSvg.prototype.getRootBlock=function(){return e.BlockSvg.superClass_.getRootBlock.call(this)},e.BlockSvg.prototype.render=function(t){if(!this.renderIsInProgress_){this.renderIsInProgress_=!0;try{if(this.rendered=!0,e.utils.dom.startTextWidthCache(),this.isCollapsed()&&this.updateCollapsed_(),this.workspace.getRenderer().render(this),this.updateConnectionLocations_(),!1!==t){var n=this.getParent();n?n.render(!0):this.workspace.resizeContents()}e.utils.dom.stopTextWidthCache(),this.updateMarkers_()}finally{this.renderIsInProgress_=!1}}},e.BlockSvg.prototype.updateMarkers_=function(){this.workspace.keyboardAccessibilityMode&&this.pathObject.cursorSvg&&this.workspace.getCursor().draw(),this.workspace.keyboardAccessibilityMode&&this.pathObject.markerSvg&&this.workspace.getMarker(e.MarkerManager.LOCAL_MARKER).draw()},e.BlockSvg.prototype.updateConnectionLocations_=function(){var t=this.getRelativeToSurfaceXY();this.previousConnection&&this.previousConnection.moveToOffset(t),this.outputConnection&&this.outputConnection.moveToOffset(t);for(var n=0;n<this.inputList.length;n++){var r=this.inputList[n].connection;r&&(r.moveToOffset(t),r.isConnected()&&r.tighten())}this.nextConnection&&(this.nextConnection.moveToOffset(t),this.nextConnection.isConnected()&&this.nextConnection.tighten())},e.BlockSvg.prototype.setCursorSvg=function(t){this.pathObject.setCursorSvg(t)},e.BlockSvg.prototype.setMarkerSvg=function(t){this.pathObject.setMarkerSvg(t)},e.BlockSvg.prototype.getHeightWidth=function(){var t=this.height,n=this.width,r=this.getNextBlock();if(r){r=r.getHeightWidth();var s=this.workspace.getRenderer().getConstants().NOTCH_HEIGHT;t+=r.height-s,n=Math.max(n,r.width)}return{height:t,width:n}},e.BlockSvg.prototype.fadeForReplacement=function(t){this.pathObject.updateReplacementFade(t)},e.BlockSvg.prototype.highlightShapeForInput=function(t,n){this.pathObject.updateShapeForInputHighlight(t,n)},e.ConnectionDB=function(t){this.connections_=[],this.connectionChecker_=t},e.ConnectionDB.prototype.addConnection=function(t,n){n=this.calculateIndexForYPos_(n),this.connections_.splice(n,0,t)},e.ConnectionDB.prototype.findIndexOfConnection_=function(t,n){if(!this.connections_.length)return-1;var r=this.calculateIndexForYPos_(n);if(r>=this.connections_.length)return-1;n=t.y;for(var s=r;0<=s&&this.connections_[s].y==n;){if(this.connections_[s]==t)return s;s--}for(s=r;s<this.connections_.length&&this.connections_[s].y==n;){if(this.connections_[s]==t)return s;s++}return-1},e.ConnectionDB.prototype.calculateIndexForYPos_=function(t){if(!this.connections_.length)return 0;for(var n=0,r=this.connections_.length;n<r;){var s=Math.floor((n+r)/2);if(this.connections_[s].y<t)n=s+1;else{if(!(this.connections_[s].y>t)){n=s;break}r=s}}return n},e.ConnectionDB.prototype.removeConnection=function(t,n){if(-1==(t=this.findIndexOfConnection_(t,n)))throw Error("Unable to find connection in connectionDB.");this.connections_.splice(t,1)},e.ConnectionDB.prototype.getNeighbours=function(t,n){function r(at){var rt=u-s[at].x,St=y-s[at].y;return Math.sqrt(rt*rt+St*St)<=n&&Q.push(s[at]),St<n}var s=this.connections_,u=t.x,y=t.y;t=0;for(var x=s.length-2,B=x;t<B;)s[B].y<y?t=B:x=B,B=Math.floor((t+x)/2);var Q=[];if(x=t=B,s.length){for(;0<=t&&r(t);)t--;do{x++}while(x<s.length&&r(x))}return Q},e.ConnectionDB.prototype.isInYRange_=function(t,n,r){return Math.abs(this.connections_[t].y-n)<=r},e.ConnectionDB.prototype.searchForClosest=function(t,n,r){if(!this.connections_.length)return{connection:null,radius:n};var s=t.y,u=t.x;t.x=u+r.x,t.y=s+r.y;var y=this.calculateIndexForYPos_(t.y);r=null;for(var B,x=n,Q=y-1;0<=Q&&this.isInYRange_(Q,t.y,n);)this.connectionChecker_.canConnect(t,B=this.connections_[Q],!0,x)&&(r=B,x=B.distanceFrom(t)),Q--;for(;y<this.connections_.length&&this.isInYRange_(y,t.y,n);)this.connectionChecker_.canConnect(t,B=this.connections_[y],!0,x)&&(r=B,x=B.distanceFrom(t)),y++;return t.x=u,t.y=s,{connection:r,radius:x}},e.ConnectionDB.init=function(t){var n=[];return n[e.connectionTypes.INPUT_VALUE]=new e.ConnectionDB(t),n[e.connectionTypes.OUTPUT_VALUE]=new e.ConnectionDB(t),n[e.connectionTypes.NEXT_STATEMENT]=new e.ConnectionDB(t),n[e.connectionTypes.PREVIOUS_STATEMENT]=new e.ConnectionDB(t),n},e.Events.ThemeChange=function(t,n){e.Events.ThemeChange.superClass_.constructor.call(this,n),this.themeName=t},e.utils.object.inherits(e.Events.ThemeChange,e.Events.UiBase),e.Events.ThemeChange.prototype.type=e.Events.THEME_CHANGE,e.Events.ThemeChange.prototype.toJson=function(){var t=e.Events.ThemeChange.superClass_.toJson.call(this);return t.themeName=this.themeName,t},e.Events.ThemeChange.prototype.fromJson=function(t){e.Events.ThemeChange.superClass_.fromJson.call(this,t),this.themeName=t.themeName},e.registry.register(e.registry.Type.EVENT,e.Events.THEME_CHANGE,e.Events.ThemeChange),e.Events.ViewportChange=function(t,n,r,s,u){e.Events.ViewportChange.superClass_.constructor.call(this,s),this.viewTop=t,this.viewLeft=n,this.scale=r,this.oldScale=u},e.utils.object.inherits(e.Events.ViewportChange,e.Events.UiBase),e.Events.ViewportChange.prototype.type=e.Events.VIEWPORT_CHANGE,e.Events.ViewportChange.prototype.toJson=function(){var t=e.Events.ViewportChange.superClass_.toJson.call(this);return t.viewTop=this.viewTop,t.viewLeft=this.viewLeft,t.scale=this.scale,t.oldScale=this.oldScale,t},e.Events.ViewportChange.prototype.fromJson=function(t){e.Events.ViewportChange.superClass_.fromJson.call(this,t),this.viewTop=t.viewTop,this.viewLeft=t.viewLeft,this.scale=t.scale,this.oldScale=t.oldScale},e.registry.register(e.registry.Type.EVENT,e.Events.VIEWPORT_CHANGE,e.Events.ViewportChange),e.IMetricsManager=function(){},e.MetricsManager=function(t){this.workspace_=t},e.MetricsManager.prototype.getDimensionsPx_=function(t){var n=0,r=0;return t&&(n=t.getWidth(),r=t.getHeight()),new e.utils.Size(n,r)},e.MetricsManager.prototype.getFlyoutMetrics=function(t){return{width:(t=this.getDimensionsPx_(this.workspace_.getFlyout(t))).width,height:t.height,position:this.workspace_.toolboxPosition}},e.MetricsManager.prototype.getToolboxMetrics=function(){var t=this.getDimensionsPx_(this.workspace_.getToolbox());return{width:t.width,height:t.height,position:this.workspace_.toolboxPosition}},e.MetricsManager.prototype.getSvgMetrics=function(){return this.workspace_.getCachedParentSvgSize()},e.MetricsManager.prototype.getAbsoluteMetrics=function(){var t=0,n=this.getToolboxMetrics(),r=this.getFlyoutMetrics(!0),s=!!this.workspace_.getToolbox(),u=!!this.workspace_.getFlyout(!0),y=s?n.position:r.position,x=y==e.utils.toolbox.Position.LEFT;return y=y==e.utils.toolbox.Position.TOP,s&&x?t=n.width:u&&x&&(t=r.width),x=0,s&&y?x=n.height:u&&y&&(x=r.height),{top:x,left:t}},e.MetricsManager.prototype.getViewMetrics=function(t){t=t?this.workspace_.scale:1;var n=this.getSvgMetrics(),r=this.getToolboxMetrics(),s=this.getFlyoutMetrics(!0),u=this.workspace_.getToolbox()?r.position:s.position;return this.workspace_.getToolbox()?u==e.utils.toolbox.Position.TOP||u==e.utils.toolbox.Position.BOTTOM?n.height-=r.height:(u==e.utils.toolbox.Position.LEFT||u==e.utils.toolbox.Position.RIGHT)&&(n.width-=r.width):this.workspace_.getFlyout(!0)&&(u==e.utils.toolbox.Position.TOP||u==e.utils.toolbox.Position.BOTTOM?n.height-=s.height:(u==e.utils.toolbox.Position.LEFT||u==e.utils.toolbox.Position.RIGHT)&&(n.width-=s.width)),{height:n.height/t,width:n.width/t,top:-this.workspace_.scrollY/t,left:-this.workspace_.scrollX/t}},e.MetricsManager.prototype.getContentMetrics=function(t){t=t?1:this.workspace_.scale;var n=this.workspace_.getBlocksBoundingBox();return{height:(n.bottom-n.top)*t,width:(n.right-n.left)*t,top:n.top*t,left:n.left*t}},e.MetricsManager.prototype.hasFixedEdges=function(){return!this.workspace_.isMovableHorizontally()||!this.workspace_.isMovableVertically()},e.MetricsManager.prototype.getComputedFixedEdges_=function(t){if(!this.hasFixedEdges())return{};var n=this.workspace_.isMovableHorizontally(),r=this.workspace_.isMovableVertically();t=t||this.getViewMetrics(!1);var s={};return r||(s.top=t.top,s.bottom=t.top+t.height),n||(s.left=t.left,s.right=t.left+t.width),s},e.MetricsManager.prototype.getPaddedContent_=function(t,n){var r=n.top+n.height,s=n.left+n.width,u=t.width,y=u/2,x=(t=t.height)/2;return{top:Math.min(n.top-x,r-t),bottom:Math.max(r+x,n.top+t),left:Math.min(n.left-y,s-u),right:Math.max(s+y,n.left+u)}},e.MetricsManager.prototype.getScrollMetrics=function(t,n,r){t=t?this.workspace_.scale:1,n=n||this.getViewMetrics(!1);var s=r||this.getContentMetrics();r=this.getComputedFixedEdges_(n),n=this.getPaddedContent_(n,s);var u=void 0!==r.left?r.left:n.left;return{top:(s=void 0!==r.top?r.top:n.top)/t,left:u/t,width:((void 0!==r.right?r.right:n.right)-u)/t,height:((void 0!==r.bottom?r.bottom:n.bottom)-s)/t}},e.MetricsManager.prototype.getUiMetrics=function(){return{viewMetrics:this.getViewMetrics(),absoluteMetrics:this.getAbsoluteMetrics(),toolboxMetrics:this.getToolboxMetrics()}},e.MetricsManager.prototype.getMetrics=function(){var t=this.getToolboxMetrics(),n=this.getFlyoutMetrics(!0),r=this.getSvgMetrics(),s=this.getAbsoluteMetrics(),u=this.getViewMetrics(),y=this.getContentMetrics(),x=this.getScrollMetrics(!1,u,y);return{contentHeight:y.height,contentWidth:y.width,contentTop:y.top,contentLeft:y.left,scrollHeight:x.height,scrollWidth:x.width,scrollTop:x.top,scrollLeft:x.left,viewHeight:u.height,viewWidth:u.width,viewTop:u.top,viewLeft:u.left,absoluteTop:s.top,absoluteLeft:s.left,svgHeight:r.height,svgWidth:r.width,toolboxWidth:t.width,toolboxHeight:t.height,toolboxPosition:t.position,flyoutWidth:n.width,flyoutHeight:n.height}},e.registry.register(e.registry.Type.METRICS_MANAGER,e.registry.DEFAULT,e.MetricsManager),e.FlyoutMetricsManager=function(t,n){this.flyout_=n,e.FlyoutMetricsManager.superClass_.constructor.call(this,t)},e.utils.object.inherits(e.FlyoutMetricsManager,e.MetricsManager),e.FlyoutMetricsManager.prototype.getBoundingBox_=function(){try{var t=this.workspace_.getCanvas().getBBox()}catch(n){t={height:0,y:0,width:0,x:0}}return t},e.FlyoutMetricsManager.prototype.getContentMetrics=function(t){var n=this.getBoundingBox_();return{height:n.height*(t=t?1:this.workspace_.scale),width:n.width*t,top:n.y*t,left:n.x*t}},e.FlyoutMetricsManager.prototype.getScrollMetrics=function(t,n,r){return{height:((n=r||this.getContentMetrics()).height+2*(r=this.flyout_.MARGIN*this.workspace_.scale))/(t=t?this.workspace_.scale:1),width:(n.width+n.left+r)/t,top:0,left:0}},e.ThemeManager=function(t,n){this.workspace_=t,this.theme_=n,this.subscribedWorkspaces_=[],this.componentDB_=Object.create(null)},e.ThemeManager.prototype.getTheme=function(){return this.theme_},e.ThemeManager.prototype.setTheme=function(t){var r,n=this.theme_;for(this.theme_=t,(t=this.workspace_.getInjectionDiv())&&(n&&e.utils.dom.removeClass(t,n.getClassName()),e.utils.dom.addClass(t,this.theme_.getClassName())),n=0;t=this.subscribedWorkspaces_[n];n++)t.refreshTheme();for(n=0,t=Object.keys(this.componentDB_);r=t[n];n++)for(var u,s=0;u=this.componentDB_[r][s];s++){var y=u.element;u=u.propertyName;var x=this.theme_&&this.theme_.getComponentStyle(r);y.style[u]=x||""}e.hideChaff()},e.ThemeManager.prototype.subscribeWorkspace=function(t){this.subscribedWorkspaces_.push(t)},e.ThemeManager.prototype.unsubscribeWorkspace=function(t){if(0>(t=this.subscribedWorkspaces_.indexOf(t)))throw Error("Cannot unsubscribe a workspace that hasn't been subscribed.");this.subscribedWorkspaces_.splice(t,1)},e.ThemeManager.prototype.subscribe=function(t,n,r){this.componentDB_[n]||(this.componentDB_[n]=[]),this.componentDB_[n].push({element:t,propertyName:r}),n=this.theme_&&this.theme_.getComponentStyle(n),t.style[r]=n||""},e.ThemeManager.prototype.unsubscribe=function(t){if(t)for(var s,n=Object.keys(this.componentDB_),r=0;s=n[r];r++){for(var u=this.componentDB_[s],y=u.length-1;0<=y;y--)u[y].element===t&&u.splice(y,1);this.componentDB_[s].length||delete this.componentDB_[s]}},e.ThemeManager.prototype.dispose=function(){this.componentDB_=this.subscribedWorkspaces_=this.theme_=this.owner_=null},e.TouchGesture=function(t,n){e.TouchGesture.superClass_.constructor.call(this,t,n),this.isMultiTouch_=!1,this.cachedPoints_=Object.create(null),this.startDistance_=this.previousScale_=0,this.isPinchZoomEnabled_=this.onStartWrapper_=null},e.utils.object.inherits(e.TouchGesture,e.Gesture),e.TouchGesture.ZOOM_IN_MULTIPLIER=5,e.TouchGesture.ZOOM_OUT_MULTIPLIER=6,e.TouchGesture.prototype.doStart=function(t){this.isPinchZoomEnabled_=this.startWorkspace_.options.zoomOptions&&this.startWorkspace_.options.zoomOptions.pinch,e.TouchGesture.superClass_.doStart.call(this,t),!this.isEnding_&&e.Touch.isTouchEvent(t)&&this.handleTouchStart(t)},e.TouchGesture.prototype.bindMouseEvents=function(t){this.onStartWrapper_=e.browserEvents.conditionalBind(document,"mousedown",null,this.handleStart.bind(this),!0),this.onMoveWrapper_=e.browserEvents.conditionalBind(document,"mousemove",null,this.handleMove.bind(this),!0),this.onUpWrapper_=e.browserEvents.conditionalBind(document,"mouseup",null,this.handleUp.bind(this),!0),t.preventDefault(),t.stopPropagation()},e.TouchGesture.prototype.handleStart=function(t){!this.isDragging()&&e.Touch.isTouchEvent(t)&&(this.handleTouchStart(t),this.isMultiTouch()&&e.longStop_())},e.TouchGesture.prototype.handleMove=function(t){this.isDragging()?e.Touch.shouldHandleEvent(t)&&e.TouchGesture.superClass_.handleMove.call(this,t):this.isMultiTouch()?(e.Touch.isTouchEvent(t)&&this.handleTouchMove(t),e.longStop_()):e.TouchGesture.superClass_.handleMove.call(this,t)},e.TouchGesture.prototype.handleUp=function(t){e.Touch.isTouchEvent(t)&&!this.isDragging()&&this.handleTouchEnd(t),!this.isMultiTouch()||this.isDragging()?e.Touch.shouldHandleEvent(t)&&e.TouchGesture.superClass_.handleUp.call(this,t):(t.preventDefault(),t.stopPropagation(),this.dispose())},e.TouchGesture.prototype.isMultiTouch=function(){return this.isMultiTouch_},e.TouchGesture.prototype.dispose=function(){e.TouchGesture.superClass_.dispose.call(this),this.onStartWrapper_&&e.browserEvents.unbind(this.onStartWrapper_)},e.TouchGesture.prototype.handleTouchStart=function(t){var n=e.Touch.getTouchIdentifierFromEvent(t);this.cachedPoints_[n]=this.getTouchPoint(t),2==(n=Object.keys(this.cachedPoints_)).length&&(this.startDistance_=e.utils.Coordinate.distance(this.cachedPoints_[n[0]],this.cachedPoints_[n[1]]),this.isMultiTouch_=!0,t.preventDefault())},e.TouchGesture.prototype.handleTouchMove=function(t){var n=e.Touch.getTouchIdentifierFromEvent(t);this.cachedPoints_[n]=this.getTouchPoint(t),n=Object.keys(this.cachedPoints_),this.isPinchZoomEnabled_&&2===n.length?this.handlePinch_(t):e.TouchGesture.superClass_.handleMove.call(this,t)},e.TouchGesture.prototype.handlePinch_=function(t){var n=Object.keys(this.cachedPoints_);if(n=e.utils.Coordinate.distance(this.cachedPoints_[n[0]],this.cachedPoints_[n[1]])/this.startDistance_,0<this.previousScale_&&1/0>this.previousScale_){var r=n-this.previousScale_;r=0<r?r*e.TouchGesture.ZOOM_IN_MULTIPLIER:r*e.TouchGesture.ZOOM_OUT_MULTIPLIER;var s=this.startWorkspace_,u=e.utils.mouseToSvg(t,s.getParentSvg(),s.getInverseScreenCTM());s.zoom(u.x,u.y,r)}this.previousScale_=n,t.preventDefault()},e.TouchGesture.prototype.handleTouchEnd=function(t){t=e.Touch.getTouchIdentifierFromEvent(t),this.cachedPoints_[t]&&delete this.cachedPoints_[t],2>Object.keys(this.cachedPoints_).length&&(this.cachedPoints_=Object.create(null),this.previousScale_=0)},e.TouchGesture.prototype.getTouchPoint=function(t){return this.startWorkspace_?new e.utils.Coordinate(t.pageX?t.pageX:t.changedTouches[0].pageX,t.pageY?t.pageY:t.changedTouches[0].pageY):null},e.WorkspaceAudio=function(t){this.parentWorkspace_=t,this.SOUNDS_=Object.create(null)},e.WorkspaceAudio.prototype.lastSound_=null,e.WorkspaceAudio.prototype.dispose=function(){this.SOUNDS_=this.parentWorkspace_=null},e.WorkspaceAudio.prototype.load=function(t,n){if(t.length){try{var r=new e.utils.global.Audio}catch(B){return}for(var s,u=0;u<t.length;u++){var y=t[u],x=y.match(/\.(\w+)$/);if(x&&r.canPlayType("audio/"+x[1])){s=new e.utils.global.Audio(y);break}}s&&s.play&&(this.SOUNDS_[n]=s)}},e.WorkspaceAudio.prototype.preload=function(){for(var t in this.SOUNDS_){var n=this.SOUNDS_[t];n.volume=.01;var r=n.play();if(void 0!==r?r.then(n.pause).catch(function(){}):n.pause(),e.utils.userAgent.IPAD||e.utils.userAgent.IPHONE)break}},e.WorkspaceAudio.prototype.play=function(t,n){var r=this.SOUNDS_[t];r?(t=new Date,null!=this.lastSound_&&t-this.lastSound_<e.SOUND_LIMIT||(this.lastSound_=t,(r=e.utils.userAgent.IPAD||e.utils.userAgent.ANDROID?r:r.cloneNode()).volume=void 0===n?1:n,r.play())):this.parentWorkspace_&&this.parentWorkspace_.getAudioManager().play(t,n)},e.WorkspaceSvg=function(t,n,r){e.WorkspaceSvg.superClass_.constructor.call(this,t),this.metricsManager_=new(e.registry.getClassFromOptions(e.registry.Type.METRICS_MANAGER,t,!0))(this),this.getMetrics=t.getMetrics||this.metricsManager_.getMetrics.bind(this.metricsManager_),this.setMetrics=t.setMetrics||e.WorkspaceSvg.setTopLevelWorkspaceMetrics_,this.componentManager_=new e.ComponentManager,this.connectionDBList=e.ConnectionDB.init(this.connectionChecker),n&&(this.blockDragSurface_=n),r&&(this.workspaceDragSurface_=r),this.useWorkspaceDragSurface_=!!this.workspaceDragSurface_&&e.utils.is3dSupported(),this.highlightedBlocks_=[],this.audioManager_=new e.WorkspaceAudio(t.parentWorkspace),this.grid_=this.options.gridPattern?new e.Grid(this.options.gridPattern,t.gridOptions):null,this.markerManager_=new e.MarkerManager(this),this.toolboxCategoryCallbacks_=Object.create(null),this.flyoutButtonCallbacks_=Object.create(null),e.Variables&&e.Variables.flyoutCategory&&this.registerToolboxCategoryCallback(e.VARIABLE_CATEGORY_NAME,e.Variables.flyoutCategory),e.VariablesDynamic&&e.VariablesDynamic.flyoutCategory&&this.registerToolboxCategoryCallback(e.VARIABLE_DYNAMIC_CATEGORY_NAME,e.VariablesDynamic.flyoutCategory),e.Procedures&&e.Procedures.flyoutCategory&&(this.registerToolboxCategoryCallback(e.PROCEDURE_CATEGORY_NAME,e.Procedures.flyoutCategory),this.addChangeListener(e.Procedures.mutatorOpenListener)),this.themeManager_=this.options.parentWorkspace?this.options.parentWorkspace.getThemeManager():new e.ThemeManager(this,this.options.theme||e.Themes.Classic),this.themeManager_.subscribeWorkspace(this),this.renderer_=e.blockRendering.init(this.options.renderer||"geras",this.getTheme(),this.options.rendererOverrides),this.cachedParentSvg_=null,this.keyboardAccessibilityMode=!1,this.topBoundedElements_=[],this.dragTargetAreas_=[],this.cachedParentSvgSize_=new e.utils.Size(0,0)},e.utils.object.inherits(e.WorkspaceSvg,e.Workspace),e.WorkspaceSvg.prototype.resizeHandlerWrapper_=null,e.WorkspaceSvg.prototype.rendered=!0,e.WorkspaceSvg.prototype.isVisible_=!0,e.WorkspaceSvg.prototype.isFlyout=!1,e.WorkspaceSvg.prototype.isMutator=!1,e.WorkspaceSvg.prototype.resizesEnabled_=!0,e.WorkspaceSvg.prototype.scrollX=0,e.WorkspaceSvg.prototype.scrollY=0,e.WorkspaceSvg.prototype.startScrollX=0,e.WorkspaceSvg.prototype.startScrollY=0,e.WorkspaceSvg.prototype.dragDeltaXY_=null,e.WorkspaceSvg.prototype.scale=1,e.WorkspaceSvg.prototype.oldScale_=1,e.WorkspaceSvg.prototype.oldTop_=0,e.WorkspaceSvg.prototype.oldLeft_=0,e.WorkspaceSvg.prototype.trashcan=null,e.WorkspaceSvg.prototype.scrollbar=null,e.WorkspaceSvg.prototype.flyout_=null,e.WorkspaceSvg.prototype.toolbox_=null,e.WorkspaceSvg.prototype.currentGesture_=null,e.WorkspaceSvg.prototype.blockDragSurface_=null,e.WorkspaceSvg.prototype.workspaceDragSurface_=null,e.WorkspaceSvg.prototype.useWorkspaceDragSurface_=!1,e.WorkspaceSvg.prototype.isDragSurfaceActive_=!1,e.WorkspaceSvg.prototype.injectionDiv_=null,e.WorkspaceSvg.prototype.lastRecordedPageScroll_=null,e.WorkspaceSvg.prototype.targetWorkspace=null,e.WorkspaceSvg.prototype.inverseScreenCTM_=null,e.WorkspaceSvg.prototype.inverseScreenCTMDirty_=!0,e.WorkspaceSvg.prototype.getMarkerManager=function(){return this.markerManager_},e.WorkspaceSvg.prototype.getMetricsManager=function(){return this.metricsManager_},e.WorkspaceSvg.prototype.setMetricsManager=function(t){this.metricsManager_=t,this.getMetrics=this.metricsManager_.getMetrics.bind(this.metricsManager_)},e.WorkspaceSvg.prototype.getComponentManager=function(){return this.componentManager_},e.WorkspaceSvg.prototype.setCursorSvg=function(t){this.markerManager_.setCursorSvg(t)},e.WorkspaceSvg.prototype.setMarkerSvg=function(t){this.markerManager_.setMarkerSvg(t)},e.WorkspaceSvg.prototype.getMarker=function(t){return this.markerManager_?this.markerManager_.getMarker(t):null},e.WorkspaceSvg.prototype.getCursor=function(){return this.markerManager_?this.markerManager_.getCursor():null},e.WorkspaceSvg.prototype.getRenderer=function(){return this.renderer_},e.WorkspaceSvg.prototype.getThemeManager=function(){return this.themeManager_},e.WorkspaceSvg.prototype.getTheme=function(){return this.themeManager_.getTheme()},e.WorkspaceSvg.prototype.setTheme=function(t){t||(t=e.Themes.Classic),this.themeManager_.setTheme(t)},e.WorkspaceSvg.prototype.refreshTheme=function(){this.svgGroup_&&this.renderer_.refreshDom(this.svgGroup_,this.getTheme()),this.updateBlockStyles_(this.getAllBlocks(!1).filter(function(n){return!!n.getStyleName()})),this.refreshToolboxSelection(),this.toolbox_&&this.toolbox_.refreshTheme(),this.isVisible()&&this.setVisible(!0);var t=new(e.Events.get(e.Events.THEME_CHANGE))(this.getTheme().name,this.id);e.Events.fire(t)},e.WorkspaceSvg.prototype.updateBlockStyles_=function(t){for(var r,n=0;r=t[n];n++){var s=r.getStyleName();s&&(r.setStyle(s),r.mutator&&r.mutator.updateBlockStyle())}},e.WorkspaceSvg.prototype.getInverseScreenCTM=function(){if(this.inverseScreenCTMDirty_){var t=this.getParentSvg().getScreenCTM();t&&(this.inverseScreenCTM_=t.inverse(),this.inverseScreenCTMDirty_=!1)}return this.inverseScreenCTM_},e.WorkspaceSvg.prototype.updateInverseScreenCTM=function(){this.inverseScreenCTMDirty_=!0},e.WorkspaceSvg.prototype.isVisible=function(){return this.isVisible_},e.WorkspaceSvg.prototype.getSvgXY=function(t){var n=0,r=0,s=1;(e.utils.dom.containsNode(this.getCanvas(),t)||e.utils.dom.containsNode(this.getBubbleCanvas(),t))&&(s=this.scale);do{var u=e.utils.getRelativeXY(t);(t==this.getCanvas()||t==this.getBubbleCanvas())&&(s=1),n+=u.x*s,r+=u.y*s,t=t.parentNode}while(t&&t!=this.getParentSvg());return new e.utils.Coordinate(n,r)},e.WorkspaceSvg.prototype.getCachedParentSvgSize=function(){var t=this.cachedParentSvgSize_;return new e.utils.Size(t.width,t.height)},e.WorkspaceSvg.prototype.getOriginOffsetInPixels=function(){return e.utils.getInjectionDivXY_(this.getCanvas())},e.WorkspaceSvg.prototype.getInjectionDiv=function(){if(!this.injectionDiv_)for(var t=this.svgGroup_;t;){if(-1!=(" "+(t.getAttribute("class")||"")+" ").indexOf(" injectionDiv ")){this.injectionDiv_=t;break}t=t.parentNode}return this.injectionDiv_},e.WorkspaceSvg.prototype.getBlockCanvas=function(){return this.svgBlockCanvas_},e.WorkspaceSvg.prototype.setResizeHandlerWrapper=function(t){this.resizeHandlerWrapper_=t},e.WorkspaceSvg.prototype.createDom=function(t){return this.svgGroup_=e.utils.dom.createSvgElement(e.utils.Svg.G,{class:"blocklyWorkspace"},null),t&&(this.svgBackground_=e.utils.dom.createSvgElement(e.utils.Svg.RECT,{height:"100%",width:"100%",class:t},this.svgGroup_),"blocklyMainBackground"==t&&this.grid_?this.svgBackground_.style.fill="url(#"+this.grid_.getPatternId()+")":this.themeManager_.subscribe(this.svgBackground_,"workspaceBackgroundColour","fill")),this.svgBlockCanvas_=e.utils.dom.createSvgElement(e.utils.Svg.G,{class:"blocklyBlockCanvas"},this.svgGroup_),this.svgBubbleCanvas_=e.utils.dom.createSvgElement(e.utils.Svg.G,{class:"blocklyBubbleCanvas"},this.svgGroup_),this.isFlyout||(e.browserEvents.conditionalBind(this.svgGroup_,"mousedown",this,this.onMouseDown_,!1,!0),e.browserEvents.conditionalBind(this.svgGroup_,"wheel",this,this.onMouseWheel_)),this.options.hasCategories&&(this.toolbox_=new(e.registry.getClassFromOptions(e.registry.Type.TOOLBOX,this.options,!0))(this)),this.grid_&&this.grid_.update(this.scale),this.recordDragTargets(),(t=e.registry.getClassFromOptions(e.registry.Type.CURSOR,this.options))&&this.markerManager_.setCursor(new t),this.renderer_.createDom(this.svgGroup_,this.getTheme()),this.svgGroup_},e.WorkspaceSvg.prototype.dispose=function(){if(this.rendered=!1,this.currentGesture_&&this.currentGesture_.cancel(),this.svgGroup_&&(e.utils.dom.removeNode(this.svgGroup_),this.svgGroup_=null),this.svgBubbleCanvas_=this.svgBlockCanvas_=null,this.toolbox_&&(this.toolbox_.dispose(),this.toolbox_=null),this.flyout_&&(this.flyout_.dispose(),this.flyout_=null),this.trashcan&&(this.trashcan.dispose(),this.trashcan=null),this.scrollbar&&(this.scrollbar.dispose(),this.scrollbar=null),this.zoomControls_&&(this.zoomControls_.dispose(),this.zoomControls_=null),this.audioManager_&&(this.audioManager_.dispose(),this.audioManager_=null),this.grid_&&(this.grid_.dispose(),this.grid_=null),this.renderer_.dispose(),this.markerManager_&&(this.markerManager_.dispose(),this.markerManager_=null),e.WorkspaceSvg.superClass_.dispose.call(this),this.themeManager_&&(this.themeManager_.unsubscribeWorkspace(this),this.themeManager_.unsubscribe(this.svgBackground_),this.options.parentWorkspace||(this.themeManager_.dispose(),this.themeManager_=null)),this.flyoutButtonCallbacks_=this.toolboxCategoryCallbacks_=this.connectionDBList=null,!this.options.parentWorkspace){var t=this.getParentSvg();t&&t.parentNode&&e.utils.dom.removeNode(t.parentNode)}this.resizeHandlerWrapper_&&(e.browserEvents.unbind(this.resizeHandlerWrapper_),this.resizeHandlerWrapper_=null)},e.WorkspaceSvg.prototype.newBlock=function(t,n){return new e.BlockSvg(this,t,n)},e.WorkspaceSvg.prototype.addTrashcan=function(){if(!e.Trashcan)throw Error("Missing require for Blockly.Trashcan");this.trashcan=new e.Trashcan(this);var t=this.trashcan.createDom();this.svgGroup_.insertBefore(t,this.svgBlockCanvas_)},e.WorkspaceSvg.prototype.addZoomControls=function(){if(!e.ZoomControls)throw Error("Missing require for Blockly.ZoomControls");this.zoomControls_=new e.ZoomControls(this);var t=this.zoomControls_.createDom();this.svgGroup_.appendChild(t)},e.WorkspaceSvg.prototype.addFlyout=function(t){var n=new e.Options({parentWorkspace:this,rtl:this.RTL,oneBasedIndex:this.options.oneBasedIndex,horizontalLayout:this.horizontalLayout,renderer:this.options.renderer,rendererOverrides:this.options.rendererOverrides,move:{scrollbars:!0}});return n.toolboxPosition=this.options.toolboxPosition,this.flyout_=this.horizontalLayout?new(e.registry.getClassFromOptions(e.registry.Type.FLYOUTS_HORIZONTAL_TOOLBOX,this.options,!0))(n):new(e.registry.getClassFromOptions(e.registry.Type.FLYOUTS_VERTICAL_TOOLBOX,this.options,!0))(n),this.flyout_.autoClose=!1,this.flyout_.getWorkspace().setVisible(!0),this.flyout_.createDom(t)},e.WorkspaceSvg.prototype.getFlyout=function(t){return this.flyout_||t?this.flyout_:this.toolbox_?this.toolbox_.getFlyout():null},e.WorkspaceSvg.prototype.getToolbox=function(){return this.toolbox_},e.WorkspaceSvg.prototype.updateScreenCalculations_=function(){this.updateInverseScreenCTM(),this.recordDragTargets()},e.WorkspaceSvg.prototype.resizeContents=function(){this.resizesEnabled_&&this.rendered&&(this.scrollbar&&this.scrollbar.resize(),this.updateInverseScreenCTM())},e.WorkspaceSvg.prototype.resize=function(){this.toolbox_&&this.toolbox_.position(),this.flyout_&&this.flyout_.position();for(var u,t=this.componentManager_.getComponents(e.ComponentManager.Capability.POSITIONABLE,!0),n=this.getMetricsManager().getUiMetrics(),r=[],s=0;u=t[s];s++)u.position(n,r),(u=u.getBoundingRectangle())&&r.push(u);this.scrollbar&&this.scrollbar.resize(),this.updateScreenCalculations_()},e.WorkspaceSvg.prototype.updateScreenCalculationsIfScrolled=function(){var t=e.utils.getDocumentScroll();e.utils.Coordinate.equals(this.lastRecordedPageScroll_,t)||(this.lastRecordedPageScroll_=t,this.updateScreenCalculations_())},e.WorkspaceSvg.prototype.getCanvas=function(){return this.svgBlockCanvas_},e.WorkspaceSvg.prototype.setCachedParentSvgSize=function(t,n){var r=this.getParentSvg();t&&(this.cachedParentSvgSize_.width=t,r.cachedWidth_=t),n&&(this.cachedParentSvgSize_.height=n,r.cachedHeight_=n)},e.WorkspaceSvg.prototype.getBubbleCanvas=function(){return this.svgBubbleCanvas_},e.WorkspaceSvg.prototype.getParentSvg=function(){if(!this.cachedParentSvg_)for(var t=this.svgGroup_;t;){if("svg"==t.tagName){this.cachedParentSvg_=t;break}t=t.parentNode}return this.cachedParentSvg_},e.WorkspaceSvg.prototype.maybeFireViewportChangeEvent=function(){if(e.Events.isEnabled()){var t=this.scale,n=-this.scrollY,r=-this.scrollX;if(!(t==this.oldScale_&&1>Math.abs(n-this.oldTop_)&&1>Math.abs(r-this.oldLeft_))){var s=new(e.Events.get(e.Events.VIEWPORT_CHANGE))(n,r,t,this.id,this.oldScale_);this.oldScale_=t,this.oldTop_=n,this.oldLeft_=r,e.Events.fire(s)}}},e.WorkspaceSvg.prototype.translate=function(t,n){if(this.useWorkspaceDragSurface_&&this.isDragSurfaceActive_)this.workspaceDragSurface_.translateSurface(t,n);else{var r="translate("+t+","+n+") scale("+this.scale+")";this.svgBlockCanvas_.setAttribute("transform",r),this.svgBubbleCanvas_.setAttribute("transform",r)}this.blockDragSurface_&&this.blockDragSurface_.translateAndScaleGroup(t,n,this.scale),this.grid_&&this.grid_.moveTo(t,n),this.maybeFireViewportChangeEvent()},e.WorkspaceSvg.prototype.resetDragSurface=function(){if(this.useWorkspaceDragSurface_){this.isDragSurfaceActive_=!1;var t=this.workspaceDragSurface_.getSurfaceTranslation();this.workspaceDragSurface_.clearAndHide(this.svgGroup_),this.svgBlockCanvas_.setAttribute("transform",t="translate("+t.x+","+t.y+") scale("+this.scale+")"),this.svgBubbleCanvas_.setAttribute("transform",t)}},e.WorkspaceSvg.prototype.setupDragSurface=function(){if(this.useWorkspaceDragSurface_&&!this.isDragSurfaceActive_){this.isDragSurfaceActive_=!0;var t=this.svgBlockCanvas_.previousSibling,n=parseInt(this.getParentSvg().getAttribute("width"),10),r=parseInt(this.getParentSvg().getAttribute("height"),10),s=e.utils.getRelativeXY(this.getCanvas());this.workspaceDragSurface_.setContentsAndShow(this.getCanvas(),this.getBubbleCanvas(),t,n,r,this.scale),this.workspaceDragSurface_.translateSurface(s.x,s.y)}},e.WorkspaceSvg.prototype.getBlockDragSurface=function(){return this.blockDragSurface_},e.WorkspaceSvg.prototype.getWidth=function(){var t=this.getMetrics();return t?t.viewWidth/this.scale:0},e.WorkspaceSvg.prototype.setVisible=function(t){if(this.isVisible_=t,this.svgGroup_)if(this.scrollbar&&this.scrollbar.setContainerVisible(t),this.getFlyout()&&this.getFlyout().setContainerVisible(t),this.getParentSvg().style.display=t?"block":"none",this.toolbox_&&this.toolbox_.setVisible(t),t){for(var n=(t=this.getAllBlocks(!1)).length-1;0<=n;n--)t[n].markDirty();this.render(),this.toolbox_&&this.toolbox_.position()}else e.hideChaff(!0)},e.WorkspaceSvg.prototype.render=function(){for(var t=this.getAllBlocks(!1),n=t.length-1;0<=n;n--)t[n].render(!1);if(this.currentGesture_)for(t=this.currentGesture_.getInsertionMarkers(),n=0;n<t.length;n++)t[n].render(!1);this.markerManager_.updateMarkers()},e.WorkspaceSvg.prototype.highlightBlock=function(t,n){if(void 0===n){for(var s,r=0;s=this.highlightedBlocks_[r];r++)s.setHighlighted(!1);this.highlightedBlocks_.length=0}(s=t?this.getBlockById(t):null)&&((t=void 0===n||n)?-1==this.highlightedBlocks_.indexOf(s)&&this.highlightedBlocks_.push(s):e.utils.arrayRemove(this.highlightedBlocks_,s),s.setHighlighted(t))},e.WorkspaceSvg.prototype.paste=function(t){!this.rendered||!t.tagName||t.getElementsByTagName("block").length>=this.remainingCapacity()||(this.currentGesture_&&this.currentGesture_.cancel(),"comment"==t.tagName.toLowerCase()?this.pasteWorkspaceComment_(t):this.pasteBlock_(t))},e.WorkspaceSvg.prototype.pasteBlock_=function(t){e.Events.disable();try{var n=e.Xml.domToBlock(t,this),r=parseInt(t.getAttribute("x"),10),s=parseInt(t.getAttribute("y"),10);if(!isNaN(r)&&!isNaN(s)){this.RTL&&(r=-r);do{t=!1;for(var x,u=this.getAllBlocks(!1),y=0;x=u[y];y++){var B=x.getRelativeToSurfaceXY();if(1>=Math.abs(r-B.x)&&1>=Math.abs(s-B.y)){t=!0;break}}if(!t){var at,Q=n.getConnections_(!1);for(y=0;at=Q[y];y++)if(at.closest(e.SNAP_RADIUS,new e.utils.Coordinate(r,s)).connection){t=!0;break}}t&&(r=this.RTL?r-e.SNAP_RADIUS:r+e.SNAP_RADIUS,s+=2*e.SNAP_RADIUS)}while(t);n.moveBy(r,s)}}finally{e.Events.enable()}e.Events.isEnabled()&&!n.isShadow()&&e.Events.fire(new(e.Events.get(e.Events.BLOCK_CREATE))(n)),n.select()},e.WorkspaceSvg.prototype.pasteWorkspaceComment_=function(t){e.Events.disable();try{var n=e.WorkspaceCommentSvg.fromXml(t,this),r=parseInt(t.getAttribute("x"),10),s=parseInt(t.getAttribute("y"),10);isNaN(r)||isNaN(s)||(this.RTL&&(r=-r),n.moveBy(r+50,s+50))}finally{e.Events.enable()}e.Events.isEnabled()&&e.WorkspaceComment.fireCreateEvent(n),n.select()},e.WorkspaceSvg.prototype.refreshToolboxSelection=function(){var t=this.isFlyout?this.targetWorkspace:this;t&&!t.currentGesture_&&t.toolbox_&&t.toolbox_.getFlyout()&&t.toolbox_.refreshSelection()},e.WorkspaceSvg.prototype.renameVariableById=function(t,n){e.WorkspaceSvg.superClass_.renameVariableById.call(this,t,n),this.refreshToolboxSelection()},e.WorkspaceSvg.prototype.deleteVariableById=function(t){e.WorkspaceSvg.superClass_.deleteVariableById.call(this,t),this.refreshToolboxSelection()},e.WorkspaceSvg.prototype.createVariable=function(t,n,r){return t=e.WorkspaceSvg.superClass_.createVariable.call(this,t,n,r),this.refreshToolboxSelection(),t},e.WorkspaceSvg.prototype.recordDeleteAreas=function(){e.utils.deprecation.warn("WorkspaceSvg.prototype.recordDeleteAreas","June 2021","June 2022","WorkspaceSvg.prototype.recordDragTargets"),this.recordDragTargets()},e.WorkspaceSvg.prototype.recordDragTargets=function(){var t=this.componentManager_.getComponents(e.ComponentManager.Capability.DRAG_TARGET,!0);this.dragTargetAreas_=[];for(var r,n=0;r=t[n];n++){var s=r.getClientRect();s&&this.dragTargetAreas_.push({component:r,clientRect:s})}},e.WorkspaceSvg.prototype.getDragTarget=function(t){for(var r,n=0;r=this.dragTargetAreas_[n];n++)if(r.clientRect.contains(t.clientX,t.clientY))return r.component;return null},e.WorkspaceSvg.prototype.onMouseDown_=function(t){var n=this.getGesture(t);n&&n.handleWsStart(t,this)},e.WorkspaceSvg.prototype.startDrag=function(t,n){(t=e.utils.mouseToSvg(t,this.getParentSvg(),this.getInverseScreenCTM())).x/=this.scale,t.y/=this.scale,this.dragDeltaXY_=e.utils.Coordinate.difference(n,t)},e.WorkspaceSvg.prototype.moveDrag=function(t){return(t=e.utils.mouseToSvg(t,this.getParentSvg(),this.getInverseScreenCTM())).x/=this.scale,t.y/=this.scale,e.utils.Coordinate.sum(this.dragDeltaXY_,t)},e.WorkspaceSvg.prototype.isDragging=function(){return null!=this.currentGesture_&&this.currentGesture_.isDragging()},e.WorkspaceSvg.prototype.isDraggable=function(){return this.options.moveOptions&&this.options.moveOptions.drag},e.WorkspaceSvg.prototype.isMovable=function(){return this.options.moveOptions&&!!this.options.moveOptions.scrollbars||this.options.moveOptions&&this.options.moveOptions.wheel||this.options.moveOptions&&this.options.moveOptions.drag||this.options.zoomOptions&&this.options.zoomOptions.wheel||this.options.zoomOptions&&this.options.zoomOptions.pinch},e.WorkspaceSvg.prototype.isMovableHorizontally=function(){var t=!!this.scrollbar;return this.isMovable()&&(!t||t&&this.scrollbar.canScrollHorizontally())},e.WorkspaceSvg.prototype.isMovableVertically=function(){var t=!!this.scrollbar;return this.isMovable()&&(!t||t&&this.scrollbar.canScrollVertically())},e.WorkspaceSvg.prototype.onMouseWheel_=function(t){if(e.Gesture.inProgress())t.preventDefault(),t.stopPropagation();else{var n=this.options.zoomOptions&&this.options.zoomOptions.wheel,r=this.options.moveOptions&&this.options.moveOptions.wheel;if(n||r){var s=e.utils.getScrollDeltaPixels(t);!n||!t.ctrlKey&&r?(n=this.scrollX-s.x,r=this.scrollY-s.y,t.shiftKey&&!s.x&&(n=this.scrollX-s.y,r=this.scrollY),this.scroll(n,r)):(s=-s.y/50,n=e.utils.mouseToSvg(t,this.getParentSvg(),this.getInverseScreenCTM()),this.zoom(n.x,n.y,s)),t.preventDefault()}}},e.WorkspaceSvg.prototype.getBlocksBoundingBox=function(){var t=this.getTopBoundedElements();if(!t.length)return new e.utils.Rect(0,0,0,0);for(var n=t[0].getBoundingRectangle(),r=1;r<t.length;r++){var s=t[r];s.isInsertionMarker&&s.isInsertionMarker()||((s=s.getBoundingRectangle()).top<n.top&&(n.top=s.top),s.bottom>n.bottom&&(n.bottom=s.bottom),s.left<n.left&&(n.left=s.left),s.right>n.right&&(n.right=s.right))}return n},e.WorkspaceSvg.prototype.cleanUp=function(){this.setResizesEnabled(!1),e.Events.setGroup(!0);for(var s,t=this.getTopBlocks(!0),n=0,r=0;s=t[r];r++)if(s.isMovable()){var u=s.getRelativeToSurfaceXY();s.moveBy(-u.x,n-u.y),s.snapToGrid(),n=s.getRelativeToSurfaceXY().y+s.getHeightWidth().height+this.renderer_.getConstants().MIN_BLOCK_HEIGHT}e.Events.setGroup(!1),this.setResizesEnabled(!0)},e.WorkspaceSvg.prototype.showContextMenu=function(t){if(!this.options.readOnly&&!this.isFlyout){var n=e.ContextMenuRegistry.registry.getContextMenuOptions(e.ContextMenuRegistry.ScopeType.WORKSPACE,{workspace:this});this.configureContextMenu&&this.configureContextMenu(n,t),e.ContextMenu.show(t,n,this.RTL)}},e.WorkspaceSvg.prototype.updateToolbox=function(t){if(t=e.utils.toolbox.convertToolboxDefToJson(t)){if(!this.options.languageTree)throw Error("Existing toolbox is null.  Can't create new toolbox.");if(e.utils.toolbox.hasCategories(t)){if(!this.toolbox_)throw Error("Existing toolbox has no categories.  Can't change mode.");this.options.languageTree=t,this.toolbox_.render(t)}else{if(!this.flyout_)throw Error("Existing toolbox has categories.  Can't change mode.");this.options.languageTree=t,this.flyout_.show(t)}}else if(this.options.languageTree)throw Error("Can't nullify an existing toolbox.")},e.WorkspaceSvg.prototype.markFocused=function(){this.options.parentWorkspace?this.options.parentWorkspace.markFocused():(e.mainWorkspace=this,this.setBrowserFocus())},e.WorkspaceSvg.prototype.setBrowserFocus=function(){document.activeElement&&document.activeElement.blur&&document.activeElement.blur();try{this.getParentSvg().focus({preventScroll:!0})}catch(t){try{this.getParentSvg().parentNode.setActive()}catch(n){this.getParentSvg().parentNode.focus({preventScroll:!0})}}},e.WorkspaceSvg.prototype.zoom=function(t,n,r){r=Math.pow(this.options.zoomOptions.scaleSpeed,r);var s=this.scale*r;if(this.scale!=s){s>this.options.zoomOptions.maxScale?r=this.options.zoomOptions.maxScale/this.scale:s<this.options.zoomOptions.minScale&&(r=this.options.zoomOptions.minScale/this.scale);var u=this.getCanvas().getCTM(),y=this.getParentSvg().createSVGPoint();y.x=t,y.y=n,y=y.matrixTransform(u.inverse()),u=u.translate((t=y.x)*(1-r),(n=y.y)*(1-r)).scale(r),this.scrollX=u.e,this.scrollY=u.f,this.setScale(s)}},e.WorkspaceSvg.prototype.zoomCenter=function(t){var n=this.getMetrics();if(this.flyout_){var r=n.svgWidth?n.svgWidth/2:0;n=n.svgHeight?n.svgHeight/2:0}else r=n.viewWidth/2+n.absoluteLeft,n=n.viewHeight/2+n.absoluteTop;this.zoom(r,n,t)},e.WorkspaceSvg.prototype.zoomToFit=function(){if(this.isMovable()){var t=this.getMetrics(),n=t.viewWidth;t=t.viewHeight;var r=this.getBlocksBoundingBox(),s=r.right-r.left;if(r=r.bottom-r.top,s){this.flyout_&&(this.horizontalLayout?(t+=this.flyout_.getHeight(),r+=this.flyout_.getHeight()/this.scale):(n+=this.flyout_.getWidth(),s+=this.flyout_.getWidth()/this.scale)),n/=s,t/=r,e.Events.disable();try{this.setScale(Math.min(n,t)),this.scrollCenter()}finally{e.Events.enable()}this.maybeFireViewportChangeEvent()}}else console.warn("Tried to move a non-movable workspace. This could result in blocks becoming inaccessible.")},e.WorkspaceSvg.prototype.beginCanvasTransition=function(){e.utils.dom.addClass(this.svgBlockCanvas_,"blocklyCanvasTransitioning"),e.utils.dom.addClass(this.svgBubbleCanvas_,"blocklyCanvasTransitioning")},e.WorkspaceSvg.prototype.endCanvasTransition=function(){e.utils.dom.removeClass(this.svgBlockCanvas_,"blocklyCanvasTransitioning"),e.utils.dom.removeClass(this.svgBubbleCanvas_,"blocklyCanvasTransitioning")},e.WorkspaceSvg.prototype.scrollCenter=function(){if(this.isMovable()){var t=this.getMetrics(),n=(t.scrollWidth-t.viewWidth)/2,r=(t.scrollHeight-t.viewHeight)/2;this.scroll(n=-n-t.scrollLeft,r=-r-t.scrollTop)}else console.warn("Tried to move a non-movable workspace. This could result in blocks becoming inaccessible.")},e.WorkspaceSvg.prototype.centerOnBlock=function(t){if(this.isMovable()){if(t=t?this.getBlockById(t):null){var n=t.getRelativeToSurfaceXY(),r=t.getHeightWidth(),s=this.scale;t=(n.x+(this.RTL?-1:1)*r.width/2)*s,n=(n.y+r.height/2)*s,r=this.getMetrics(),this.scroll(-(t-r.viewWidth/2),-(n-r.viewHeight/2))}}else console.warn("Tried to move a non-movable workspace. This could result in blocks becoming inaccessible.")},e.WorkspaceSvg.prototype.setScale=function(t){this.options.zoomOptions.maxScale&&t>this.options.zoomOptions.maxScale?t=this.options.zoomOptions.maxScale:this.options.zoomOptions.minScale&&t<this.options.zoomOptions.minScale&&(t=this.options.zoomOptions.minScale),this.scale=t,e.hideChaff(!1),this.flyout_&&(this.flyout_.reflow(),this.recordDragTargets()),this.grid_&&this.grid_.update(this.scale),t=this.getMetrics(),this.scrollX-=t.absoluteLeft,this.scrollY-=t.absoluteTop,t.viewLeft+=t.absoluteLeft,t.viewTop+=t.absoluteTop,this.scroll(this.scrollX,this.scrollY),this.scrollbar&&(this.flyout_?this.scrollbar.resizeView(t):this.scrollbar.resizeContent(t))},e.WorkspaceSvg.prototype.getScale=function(){return this.options.parentWorkspace?this.options.parentWorkspace.getScale():this.scale},e.WorkspaceSvg.prototype.scroll=function(t,n){e.hideChaff(!0);var r=this.getMetrics();t=Math.min(t,-r.scrollLeft),n=Math.min(n,-r.scrollTop);var s=r.scrollTop+Math.max(0,r.scrollHeight-r.viewHeight);t=Math.max(t,-(r.scrollLeft+Math.max(0,r.scrollWidth-r.viewWidth))),n=Math.max(n,-s),this.scrollX=t,this.scrollY=n,this.scrollbar&&this.scrollbar.set(-(t+r.scrollLeft),-(n+r.scrollTop),!1),this.translate(t+=r.absoluteLeft,n+=r.absoluteTop)},e.WorkspaceSvg.setTopLevelWorkspaceMetrics_=function(t){var n=this.getMetrics();"number"==typeof t.x&&(this.scrollX=-(n.scrollLeft+(n.scrollWidth-n.viewWidth)*t.x)),"number"==typeof t.y&&(this.scrollY=-(n.scrollTop+(n.scrollHeight-n.viewHeight)*t.y)),this.translate(this.scrollX+n.absoluteLeft,this.scrollY+n.absoluteTop)},e.WorkspaceSvg.prototype.getBlockById=function(t){return e.WorkspaceSvg.superClass_.getBlockById.call(this,t)},e.WorkspaceSvg.prototype.getTopBlocks=function(t){return e.WorkspaceSvg.superClass_.getTopBlocks.call(this,t)},e.WorkspaceSvg.prototype.addTopBlock=function(t){this.addTopBoundedElement(t),e.WorkspaceSvg.superClass_.addTopBlock.call(this,t)},e.WorkspaceSvg.prototype.removeTopBlock=function(t){this.removeTopBoundedElement(t),e.WorkspaceSvg.superClass_.removeTopBlock.call(this,t)},e.WorkspaceSvg.prototype.addTopComment=function(t){this.addTopBoundedElement(t),e.WorkspaceSvg.superClass_.addTopComment.call(this,t)},e.WorkspaceSvg.prototype.removeTopComment=function(t){this.removeTopBoundedElement(t),e.WorkspaceSvg.superClass_.removeTopComment.call(this,t)},e.WorkspaceSvg.prototype.addTopBoundedElement=function(t){this.topBoundedElements_.push(t)},e.WorkspaceSvg.prototype.removeTopBoundedElement=function(t){e.utils.arrayRemove(this.topBoundedElements_,t)},e.WorkspaceSvg.prototype.getTopBoundedElements=function(){return[].concat(this.topBoundedElements_)},e.WorkspaceSvg.prototype.setResizesEnabled=function(t){var n=!this.resizesEnabled_&&t;this.resizesEnabled_=t,n&&this.resizeContents()},e.WorkspaceSvg.prototype.clear=function(){this.setResizesEnabled(!1),e.WorkspaceSvg.superClass_.clear.call(this),this.topBoundedElements_=[],this.setResizesEnabled(!0)},e.WorkspaceSvg.prototype.registerButtonCallback=function(t,n){if("function"!=typeof n)throw TypeError("Button callbacks must be functions.");this.flyoutButtonCallbacks_[t]=n},e.WorkspaceSvg.prototype.getButtonCallback=function(t){return(t=this.flyoutButtonCallbacks_[t])?t:null},e.WorkspaceSvg.prototype.removeButtonCallback=function(t){this.flyoutButtonCallbacks_[t]=null},e.WorkspaceSvg.prototype.registerToolboxCategoryCallback=function(t,n){if("function"!=typeof n)throw TypeError("Toolbox category callbacks must be functions.");this.toolboxCategoryCallbacks_[t]=n},e.WorkspaceSvg.prototype.getToolboxCategoryCallback=function(t){return this.toolboxCategoryCallbacks_[t]||null},e.WorkspaceSvg.prototype.removeToolboxCategoryCallback=function(t){this.toolboxCategoryCallbacks_[t]=null},e.WorkspaceSvg.prototype.getGesture=function(t){var n="mousedown"==t.type||"touchstart"==t.type||"pointerdown"==t.type,r=this.currentGesture_;return r?n&&r.hasStarted()?(console.warn("Tried to start the same gesture twice."),r.cancel(),null):r:n?this.currentGesture_=new e.TouchGesture(t,this):null},e.WorkspaceSvg.prototype.clearGesture=function(){this.currentGesture_=null},e.WorkspaceSvg.prototype.cancelCurrentGesture=function(){this.currentGesture_&&this.currentGesture_.cancel()},e.WorkspaceSvg.prototype.getAudioManager=function(){return this.audioManager_},e.WorkspaceSvg.prototype.getGrid=function(){return this.grid_},e.inject=function(t,n){if(e.checkBlockColourConstants(),"string"==typeof t&&(t=document.getElementById(t)||document.querySelector(t)),!t||!e.utils.dom.containsNode(document,t))throw Error("Error: container is not in current document.");n=new e.Options(n||{});var r=document.createElement("div");r.className="injectionDiv",r.tabIndex=0,e.utils.aria.setState(r,e.utils.aria.State.LABEL,e.Msg.WORKSPACE_ARIA_LABEL),t.appendChild(r),t=e.createDom_(r,n);var s=new e.BlockDragSurfaceSvg(r),u=new e.WorkspaceDragSurfaceSvg(r),y=e.createMainWorkspace_(t,n,s,u);return e.init_(y),e.mainWorkspace=y,e.svgResize(y),r.addEventListener("focusin",function(){e.mainWorkspace=y}),y},e.createDom_=function(t,n){t.setAttribute("dir","LTR"),e.Css.inject(n.hasCss,n.pathToMedia),t=e.utils.dom.createSvgElement(e.utils.Svg.SVG,{xmlns:e.utils.dom.SVG_NS,"xmlns:html":e.utils.dom.HTML_NS,"xmlns:xlink":e.utils.dom.XLINK_NS,version:"1.1",class:"blocklySvg",tabindex:"0"},t);var r=e.utils.dom.createSvgElement(e.utils.Svg.DEFS,{},t),s=String(Math.random()).substring(2);return n.gridPattern=e.Grid.createDom(s,n.gridOptions,r),t},e.createMainWorkspace_=function(t,n,r,s){return n.parentWorkspace=null,(n=new e.WorkspaceSvg(n,r,s)).scale=(r=n.options).zoomOptions.startScale,t.appendChild(n.createDom("blocklyMainBackground")),e.utils.dom.addClass(n.getInjectionDiv(),n.getRenderer().getClassName()),e.utils.dom.addClass(n.getInjectionDiv(),n.getTheme().getClassName()),!r.hasCategories&&r.languageTree&&(s=n.addFlyout(e.utils.Svg.SVG),e.utils.dom.insertAfter(s,t)),r.hasTrashcan&&n.addTrashcan(),r.zoomOptions&&r.zoomOptions.controls&&n.addZoomControls(),n.getThemeManager().subscribe(t,"workspaceBackgroundColour","background-color"),n.translate(0,0),n.addChangeListener(e.bumpIntoBoundsHandler_(n)),e.svgResize(n),e.WidgetDiv.createDom(),e.DropDownDiv.createDom(),e.Tooltip.createDom(),n},e.extractObjectFromEvent_=function(t,n){var r=null;switch(n.type){case e.Events.BLOCK_CREATE:case e.Events.BLOCK_MOVE:(r=t.getBlockById(n.blockId))&&(r=r.getRootBlock());break;case e.Events.COMMENT_CREATE:case e.Events.COMMENT_MOVE:r=t.getCommentById(n.commentId)}return r},e.bumpTopObjectsIntoBounds_=function(t){var n=t.getMetricsManager();if(n.hasFixedEdges()&&!t.isDragging()){n=n.getScrollMetrics(!0);for(var u,r=t.getTopBoundedElements(),s=0;u=r[s];s++)e.bumpObjectIntoBounds_(t,n,u)}},e.bumpIntoBoundsHandler_=function(t){return function(n){var r=t.getMetricsManager();if(r.hasFixedEdges()&&!t.isDragging())if(-1!==e.Events.BUMP_EVENTS.indexOf(n.type)){r=r.getScrollMetrics(!0);var s=e.extractObjectFromEvent_(t,n);if(s){var u=e.Events.getGroup();e.Events.setGroup(n.group),e.bumpObjectIntoBounds_(t,r,s)&&!n.group&&console.warn("Moved object in bounds but there was no event group. This may break undo."),null!==u&&e.Events.setGroup(u)}}else n.type===e.Events.VIEWPORT_CHANGE&&n.scale>n.oldScale&&e.bumpTopObjectsIntoBounds_(t)}},e.bumpObjectIntoBounds_=function(t,n,r){var s=r.getBoundingRectangle(),u=s.right-s.left,y=e.utils.math.clamp(n.top,s.top,n.top+n.height-(s.bottom-s.top))-s.top,x=n.left;return n=n.left+n.width-u,t.RTL?x=Math.min(n,x):n=Math.max(x,n),!(!(t=e.utils.math.clamp(x,s.left,n)-s.left)&&!y||(r.moveBy(t,y),0))},e.init_=function(t){var n=t.options,r=t.getParentSvg();if(e.browserEvents.conditionalBind(r.parentNode,"contextmenu",null,function(u){e.utils.isTargetInput(u)||u.preventDefault()}),r=e.browserEvents.conditionalBind(window,"resize",null,function(){e.hideChaff(!0),e.svgResize(t),e.bumpTopObjectsIntoBounds_(t)}),t.setResizeHandlerWrapper(r),e.inject.bindDocumentEvents_(),n.languageTree){r=t.getToolbox();var s=t.getFlyout(!0);r?r.init():s&&(s.init(t),s.show(n.languageTree),"function"==typeof s.scrollToStart&&s.scrollToStart())}n.hasTrashcan&&t.trashcan.init(),n.zoomOptions&&n.zoomOptions.controls&&t.zoomControls_.init(),n.moveOptions&&n.moveOptions.scrollbars?(t.scrollbar=new e.ScrollbarPair(t,!0===n.moveOptions.scrollbars||!!n.moveOptions.scrollbars.horizontal,!0===n.moveOptions.scrollbars||!!n.moveOptions.scrollbars.vertical,"blocklyMainWorkspaceScrollbar"),t.scrollbar.resize()):t.setMetrics({x:.5,y:.5}),n.hasSounds&&e.inject.loadSounds_(n.pathToMedia,t)},e.inject.bindDocumentEvents_=function(){e.documentEventsBound_||(e.browserEvents.conditionalBind(document,"scroll",null,function(){for(var r,t=e.Workspace.getAll(),n=0;r=t[n];n++)r.updateInverseScreenCTM&&r.updateInverseScreenCTM()}),e.browserEvents.conditionalBind(document,"keydown",null,e.onKeyDown),e.browserEvents.bind(document,"touchend",null,e.longStop_),e.browserEvents.bind(document,"touchcancel",null,e.longStop_),e.utils.userAgent.IPAD&&e.browserEvents.conditionalBind(window,"orientationchange",document,function(){e.svgResize(e.getMainWorkspace())})),e.documentEventsBound_=!0},e.inject.loadSounds_=function(t,n){var r=n.getAudioManager();r.load([t+"click.mp3",t+"click.wav",t+"click.ogg"],"click"),r.load([t+"disconnect.wav",t+"disconnect.mp3",t+"disconnect.ogg"],"disconnect"),r.load([t+"delete.mp3",t+"delete.ogg",t+"delete.wav"],"delete");var s=[];t=function(){for(;s.length;)e.browserEvents.unbind(s.pop());r.preload()},s.push(e.browserEvents.conditionalBind(document,"mousemove",null,t,!0)),s.push(e.browserEvents.conditionalBind(document,"touchstart",null,t,!0))},e.Names=function(t,n){if(this.variablePrefix_=n||"",this.reservedDict_=Object.create(null),t)for(t=t.split(","),n=0;n<t.length;n++)this.reservedDict_[t[n]]=!0;this.reset()},e.Names.DEVELOPER_VARIABLE_TYPE="DEVELOPER_VARIABLE",e.Names.prototype.reset=function(){this.db_=Object.create(null),this.dbReverse_=Object.create(null),this.variableMap_=null},e.Names.prototype.setVariableMap=function(t){this.variableMap_=t},e.Names.prototype.getNameForUserVariable_=function(t){return this.variableMap_?(t=this.variableMap_.getVariableById(t))?t.name:null:(console.warn("Deprecated call to Blockly.Names.prototype.getName without defining a variable map. To fix, add the following code in your generator's init() function:\nBlockly.YourGeneratorName.nameDB_.setVariableMap(workspace.getVariableMap());"),null)},e.Names.prototype.populateVariables=function(t){t=e.Variables.allUsedVarModels(t);for(var n=0;n<t.length;n++)this.getName(t[n].getId(),e.VARIABLE_CATEGORY_NAME)},e.Names.prototype.populateProcedures=function(t){t=(t=e.Procedures.allProcedures(t))[0].concat(t[1]);for(var n=0;n<t.length;n++)this.getName(t[n][0],e.PROCEDURE_CATEGORY_NAME)},e.Names.prototype.getName=function(t,n){var r=t;n==e.VARIABLE_CATEGORY_NAME&&(t=this.getNameForUserVariable_(t))&&(r=t),t=r.toLowerCase();var s=n==e.VARIABLE_CATEGORY_NAME||n==e.Names.DEVELOPER_VARIABLE_TYPE?this.variablePrefix_:"";n in this.db_||(this.db_[n]=Object.create(null));var u=this.db_[n];return t in u?s+u[t]:(n=this.getDistinctName(r,n),u[t]=n.substr(s.length),n)},e.Names.prototype.getUserNames=function(t){return Object.keys(this.db_[t]||{})},e.Names.prototype.getDistinctName=function(t,n){t=this.safeName_(t);for(var r="";this.dbReverse_[t+r]||t+r in this.reservedDict_;)r=r?r+1:2;return this.dbReverse_[t+=r]=!0,(n==e.VARIABLE_CATEGORY_NAME||n==e.Names.DEVELOPER_VARIABLE_TYPE?this.variablePrefix_:"")+t},e.Names.prototype.safeName_=function(t){return t?(t=encodeURI(t.replace(/ /g,"_")).replace(/[^\w]/g,"_"),-1!="0123456789".indexOf(t[0])&&(t="my_"+t)):t=e.Msg.UNNAMED_KEY||"unnamed",t},e.Names.equals=function(t,n){return t.toLowerCase()==n.toLowerCase()},e.Procedures={},e.Procedures.NAME_TYPE=e.PROCEDURE_CATEGORY_NAME,e.Procedures.DEFAULT_ARG="x",e.Procedures.allProcedures=function(t){var n=t.getBlocksByType("procedures_defnoreturn",!1).map(function(r){return r.getProcedureDef()});return t=t.getBlocksByType("procedures_defreturn",!1).map(function(r){return r.getProcedureDef()}),n.sort(e.Procedures.procTupleComparator_),t.sort(e.Procedures.procTupleComparator_),[n,t]},e.Procedures.procTupleComparator_=function(t,n){return t[0].localeCompare(n[0],void 0,{sensitivity:"base"})},e.Procedures.findLegalName=function(t,n){if(n.isInFlyout)return t;for(t=t||e.Msg.UNNAMED_KEY||"unnamed";!e.Procedures.isLegalName_(t,n.workspace,n);){var r=t.match(/^(.*?)(\d+)$/);t=r?r[1]+(parseInt(r[2],10)+1):t+"2"}return t},e.Procedures.isLegalName_=function(t,n,r){return!e.Procedures.isNameUsed(t,n,r)},e.Procedures.isNameUsed=function(t,n,r){n=n.getAllBlocks(!1);for(var s=0;s<n.length;s++)if(n[s]!=r&&n[s].getProcedureDef){var u=n[s].getProcedureDef();if(e.Names.equals(u[0],t))return!0}return!1},e.Procedures.rename=function(t){t=t.trim();var n=e.Procedures.findLegalName(t,this.getSourceBlock()),r=this.getValue();if(r!=t&&r!=n){t=this.getSourceBlock().workspace.getAllBlocks(!1);for(var s=0;s<t.length;s++)t[s].renameProcedure&&t[s].renameProcedure(r,n)}return n},e.Procedures.flyoutCategory=function(t){function n(y,x){for(var B=0;B<y.length;B++){var Q=y[B][0],at=y[B][1],rt=e.utils.xml.createElement("block");rt.setAttribute("type",x),rt.setAttribute("gap",16);var St=e.utils.xml.createElement("mutation");for(St.setAttribute("name",Q),rt.appendChild(St),Q=0;Q<at.length;Q++){var Ht=e.utils.xml.createElement("arg");Ht.setAttribute("name",at[Q]),St.appendChild(Ht)}r.push(rt)}}var r=[];if(e.Blocks.procedures_defnoreturn){var s=e.utils.xml.createElement("block");s.setAttribute("type","procedures_defnoreturn"),s.setAttribute("gap",16);var u=e.utils.xml.createElement("field");u.setAttribute("name","NAME"),u.appendChild(e.utils.xml.createTextNode(e.Msg.PROCEDURES_DEFNORETURN_PROCEDURE)),s.appendChild(u),r.push(s)}return e.Blocks.procedures_defreturn&&((s=e.utils.xml.createElement("block")).setAttribute("type","procedures_defreturn"),s.setAttribute("gap",16),(u=e.utils.xml.createElement("field")).setAttribute("name","NAME"),u.appendChild(e.utils.xml.createTextNode(e.Msg.PROCEDURES_DEFRETURN_PROCEDURE)),s.appendChild(u),r.push(s)),e.Blocks.procedures_ifreturn&&((s=e.utils.xml.createElement("block")).setAttribute("type","procedures_ifreturn"),s.setAttribute("gap",16),r.push(s)),r.length&&r[r.length-1].setAttribute("gap",24),n((t=e.Procedures.allProcedures(t))[0],"procedures_callnoreturn"),n(t[1],"procedures_callreturn"),r},e.Procedures.updateMutatorFlyout_=function(t){for(var u,n=[],r=t.getBlocksByType("procedures_mutatorarg",!1),s=0;u=r[s];s++)n.push(u.getFieldValue("NAME"));r=e.utils.xml.createElement("xml"),(s=e.utils.xml.createElement("block")).setAttribute("type","procedures_mutatorarg"),(u=e.utils.xml.createElement("field")).setAttribute("name","NAME"),n=e.Variables.generateUniqueNameFromOptions(e.Procedures.DEFAULT_ARG,n),n=e.utils.xml.createTextNode(n),u.appendChild(n),s.appendChild(u),r.appendChild(s),t.updateToolbox(r)},e.Procedures.mutatorOpenListener=function(t){if(t.type==e.Events.BUBBLE_OPEN&&"mutator"===t.bubbleType&&t.isOpen){var n=(t=e.Workspace.getById(t.workspaceId).getBlockById(t.blockId)).type;("procedures_defnoreturn"==n||"procedures_defreturn"==n)&&(t=t.mutator.getWorkspace(),e.Procedures.updateMutatorFlyout_(t),t.addChangeListener(e.Procedures.mutatorChangeListener_))}},e.Procedures.mutatorChangeListener_=function(t){(t.type==e.Events.BLOCK_CREATE||t.type==e.Events.BLOCK_DELETE||t.type==e.Events.BLOCK_CHANGE)&&(t=e.Workspace.getById(t.workspaceId),e.Procedures.updateMutatorFlyout_(t))},e.Procedures.getCallers=function(t,n){var r=[];n=n.getAllBlocks(!1);for(var s=0;s<n.length;s++)if(n[s].getProcedureCall){var u=n[s].getProcedureCall();u&&e.Names.equals(u,t)&&r.push(n[s])}return r},e.Procedures.mutateCallers=function(t){var u,n=e.Events.recordUndo,r=t.getProcedureDef()[0],s=t.mutationToDom(!0);for(t=e.Procedures.getCallers(r,t.workspace),r=0;u=t[r];r++){var y=u.mutationToDom();y=y&&e.Xml.domToText(y),u.domToMutation(s);var x=u.mutationToDom();y!=(x=x&&e.Xml.domToText(x))&&(e.Events.recordUndo=!1,e.Events.fire(new(e.Events.get(e.Events.BLOCK_CHANGE))(u,"mutation",null,y,x)),e.Events.recordUndo=n)}},e.Procedures.getDefinition=function(t,n){n=n.getAllBlocks(!1);for(var r=0;r<n.length;r++)if(n[r].getProcedureDef){var s=n[r].getProcedureDef();if(s&&e.Names.equals(s[0],t))return n[r]}return null},e.ShortcutRegistry=function(){e.ShortcutRegistry.registry=this,this.registry_=Object.create(null),this.keyMap_=Object.create(null)},e.ShortcutRegistry.modifierKeys={Shift:e.utils.KeyCodes.SHIFT,Control:e.utils.KeyCodes.CTRL,Alt:e.utils.KeyCodes.ALT,Meta:e.utils.KeyCodes.META},e.ShortcutRegistry.prototype.register=function(t,n){if(this.registry_[t.name]&&!n)throw Error('Shortcut with name "'+t.name+'" already exists.');this.registry_[t.name]=t},e.ShortcutRegistry.prototype.unregister=function(t){return this.registry_[t]?(this.removeAllKeyMappings(t),delete this.registry_[t],!0):(console.warn('Keyboard shortcut with name "'+t+'" not found.'),!1)},e.ShortcutRegistry.prototype.addKeyMapping=function(t,n,r){t=String(t);var s=this.keyMap_[t];if(s&&!r)throw Error('Shortcut with name "'+n+'" collides with shortcuts '+s.toString());s&&r?s.unshift(n):this.keyMap_[t]=[n]},e.ShortcutRegistry.prototype.removeKeyMapping=function(t,n,r){var s=this.keyMap_[t];if(!s&&!r)return console.warn('No keyboard shortcut with name "'+n+'" registered with key code "'+t+'"'),!1;var u=s.indexOf(n);return-1<u?(s.splice(u,1),0==s.length&&delete this.keyMap_[t],!0):(r||console.warn('No keyboard shortcut with name "'+n+'" registered with key code "'+t+'"'),!1)},e.ShortcutRegistry.prototype.removeAllKeyMappings=function(t){for(var n in this.keyMap_)this.removeKeyMapping(n,t,!0)},e.ShortcutRegistry.prototype.setKeyMap=function(t){this.keyMap_=t},e.ShortcutRegistry.prototype.getKeyMap=function(){return e.utils.object.deepMerge(Object.create(null),this.keyMap_)},e.ShortcutRegistry.prototype.getRegistry=function(){return e.utils.object.deepMerge(Object.create(null),this.registry_)},e.ShortcutRegistry.prototype.onKeyDown=function(t,n){var r=this.serializeKeyEvent_(n);if(!(r=this.getShortcutNamesByKeyCode(r)))return!1;for(var u,s=0;u=r[s];s++)if((!(u=this.registry_[u]).preconditionFn||u.preconditionFn(t))&&u.callback&&u.callback(t,n,u))return!0;return!1},e.ShortcutRegistry.prototype.getShortcutNamesByKeyCode=function(t){return this.keyMap_[t]||[]},e.ShortcutRegistry.prototype.getKeyCodesByShortcutName=function(t){var r,n=[];for(r in this.keyMap_)-1<this.keyMap_[r].indexOf(t)&&n.push(r);return n},e.ShortcutRegistry.prototype.serializeKeyEvent_=function(t){var r,n="";for(r in e.ShortcutRegistry.modifierKeys)t.getModifierState(r)&&(""!=n&&(n+="+"),n+=r);return""!=n&&t.keyCode?n=n+"+"+t.keyCode:t.keyCode&&(n=t.keyCode.toString()),n},e.ShortcutRegistry.prototype.checkModifiers_=function(t){for(var s,n=e.utils.object.values(e.ShortcutRegistry.modifierKeys),r=0;s=t[r];r++)if(0>n.indexOf(s))throw Error(s+" is not a valid modifier key.")},e.ShortcutRegistry.prototype.createSerializedKey=function(t,n){var r="";if(n)for(var s in this.checkModifiers_(n),e.ShortcutRegistry.modifierKeys)-1<n.indexOf(e.ShortcutRegistry.modifierKeys[s])&&(""!=r&&(r+="+"),r+=s);return""!=r&&t?r=r+"+"+t:t&&(r=t.toString()),r},new e.ShortcutRegistry,e.VariableModel=function(t,n,r,s){this.workspace=t,this.name=n,this.type=r||"",this.id_=s||e.utils.genUid(),e.Events.fire(new(e.Events.get(e.Events.VAR_CREATE))(this))},e.VariableModel.prototype.getId=function(){return this.id_},e.VariableModel.compareByName=function(t,n){return t.name.localeCompare(n.name,void 0,{sensitivity:"base"})},e.Variables={},e.Variables.NAME_TYPE=e.VARIABLE_CATEGORY_NAME,e.Variables.allUsedVarModels=function(t){var n=t.getAllBlocks(!1);t=Object.create(null);for(var r=0;r<n.length;r++){var s=n[r].getVarModels();if(s)for(var u=0;u<s.length;u++){var y=s[u],x=y.getId();x&&(t[x]=y)}}for(x in n=[],t)n.push(t[x]);return n},e.Variables.ALL_DEVELOPER_VARS_WARNINGS_BY_BLOCK_TYPE_={},e.Variables.allDeveloperVariables=function(t){t=t.getAllBlocks(!1);for(var s,n=Object.create(null),r=0;s=t[r];r++){var u=s.getDeveloperVariables;if(!u&&s.getDeveloperVars&&(u=s.getDeveloperVars,e.Variables.ALL_DEVELOPER_VARS_WARNINGS_BY_BLOCK_TYPE_[s.type]||(console.warn("Function getDeveloperVars() deprecated. Use getDeveloperVariables() (block type '"+s.type+"')"),e.Variables.ALL_DEVELOPER_VARS_WARNINGS_BY_BLOCK_TYPE_[s.type]=!0)),u)for(s=u(),u=0;u<s.length;u++)n[s[u]]=!0}return Object.keys(n)},e.Variables.flyoutCategory=function(t){var n=[],r=document.createElement("button");return r.setAttribute("text","%{BKY_NEW_VARIABLE}"),r.setAttribute("callbackKey","CREATE_VARIABLE"),t.registerButtonCallback("CREATE_VARIABLE",function(s){e.Variables.createVariableButtonHandler(s.getTargetWorkspace())}),n.push(r),t=e.Variables.flyoutCategoryBlocks(t),n.concat(t)},e.Variables.flyoutCategoryBlocks=function(t){var n=[];if(0<(t=t.getVariablesOfType("")).length){var r=t[t.length-1];if(e.Blocks.variables_set){var s=e.utils.xml.createElement("block");s.setAttribute("type","variables_set"),s.setAttribute("gap",e.Blocks.math_change?8:24),s.appendChild(e.Variables.generateVariableFieldDom(r)),n.push(s)}if(e.Blocks.math_change&&((s=e.utils.xml.createElement("block")).setAttribute("type","math_change"),s.setAttribute("gap",e.Blocks.variables_get?20:8),s.appendChild(e.Variables.generateVariableFieldDom(r)),r=e.Xml.textToDom('<value name="DELTA"><shadow type="math_number"><field name="NUM">1</field></shadow></value>'),s.appendChild(r),n.push(s)),e.Blocks.variables_get){t.sort(e.VariableModel.compareByName),r=0;for(var u;u=t[r];r++)(s=e.utils.xml.createElement("block")).setAttribute("type","variables_get"),s.setAttribute("gap",8),s.appendChild(e.Variables.generateVariableFieldDom(u)),n.push(s)}}return n},e.Variables.VAR_LETTER_OPTIONS="ijkmnopqrstuvwxyzabcdefgh",e.Variables.generateUniqueName=function(t){return e.Variables.generateUniqueNameFromOptions(e.Variables.VAR_LETTER_OPTIONS.charAt(0),t.getAllVariableNames())},e.Variables.generateUniqueNameFromOptions=function(t,n){if(!n.length)return t;for(var r=e.Variables.VAR_LETTER_OPTIONS,s="",u=r.indexOf(t);;){for(var y=!1,x=0;x<n.length;x++)if(n[x].toLowerCase()==t){y=!0;break}if(!y)return t;++u==r.length&&(u=0,s=Number(s)+1),t=r.charAt(u)+s}},e.Variables.createVariableButtonHandler=function(t,n,r){var s=r||"",u=function(y){e.Variables.promptName(e.Msg.NEW_VARIABLE_TITLE,y,function(x){if(x){var B=e.Variables.nameUsedWithAnyType(x,t);if(B){if(B.type==s)var Q=e.Msg.VARIABLE_ALREADY_EXISTS.replace("%1",B.name);else Q=(Q=e.Msg.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE).replace("%1",B.name).replace("%2",B.type);e.alert(Q,function(){u(x)})}else t.createVariable(x,s),n&&n(x)}else n&&n(null)})};u("")},e.Variables.createVariable=e.Variables.createVariableButtonHandler,e.Variables.renameVariable=function(t,n,r){var s=function(u){var y=e.Msg.RENAME_VARIABLE_TITLE.replace("%1",n.name);e.Variables.promptName(y,u,function(x){if(x){var B=e.Variables.nameUsedWithOtherType_(x,n.type,t);B?(B=e.Msg.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE.replace("%1",B.name).replace("%2",B.type),e.alert(B,function(){s(x)})):(t.renameVariableById(n.getId(),x),r&&r(x))}else r&&r(null)})};s("")},e.Variables.promptName=function(t,n,r){e.prompt(t,n,function(s){s&&((s=s.replace(/[\s\xa0]+/g," ").trim())==e.Msg.RENAME_VARIABLE||s==e.Msg.NEW_VARIABLE)&&(s=null),r(s)})},e.Variables.nameUsedWithOtherType_=function(t,n,r){r=r.getVariableMap().getAllVariables(),t=t.toLowerCase();for(var u,s=0;u=r[s];s++)if(u.name.toLowerCase()==t&&u.type!=n)return u;return null},e.Variables.nameUsedWithAnyType=function(t,n){n=n.getVariableMap().getAllVariables(),t=t.toLowerCase();for(var s,r=0;s=n[r];r++)if(s.name.toLowerCase()==t)return s;return null},e.Variables.generateVariableFieldDom=function(t){var n=e.utils.xml.createElement("field");return n.setAttribute("name","VAR"),n.setAttribute("id",t.getId()),n.setAttribute("variabletype",t.type),t=e.utils.xml.createTextNode(t.name),n.appendChild(t),n},e.Variables.getOrCreateVariablePackage=function(t,n,r,s){var u=e.Variables.getVariable(t,n,r,s);return u||(u=e.Variables.createVariable_(t,n,r,s)),u},e.Variables.getVariable=function(t,n,r,s){var u=t.getPotentialVariableMap(),y=null;if(n&&(!(y=t.getVariableById(n))&&u&&(y=u.getVariableById(n)),y))return y;if(r){if(null==s)throw Error("Tried to look up a variable by name without a type");!(y=t.getVariable(r,s))&&u&&(y=u.getVariable(r,s))}return y},e.Variables.createVariable_=function(t,n,r,s){var u=t.getPotentialVariableMap();return r||(r=e.Variables.generateUniqueName(t.isFlyout?t.targetWorkspace:t)),u?u.createVariable(r,s,n):t.createVariable(r,s,n)},e.Variables.getAddedVariables=function(t,n){t=t.getAllVariables();var r=[];if(n.length!=t.length)for(var s=0;s<t.length;s++){var u=t[s];-1==n.indexOf(u)&&r.push(u)}return r},e.VERSION="6.20210701.0",e.mainWorkspace=null,e.selected=null,e.draggingConnections=[],e.clipboardXml_=null,e.clipboardSource_=null,e.clipboardTypeCounts_=null,e.cache3dSupported_=null,e.parentContainer=null,e.svgSize=function(t){return e.utils.deprecation.warn("Blockly.svgSize","March 2021","March 2022","workspace.getCachedParentSvgSize"),new e.utils.Size(t.cachedWidth_,t.cachedHeight_)},e.resizeSvgContents=function(t){t.resizeContents()},e.svgResize=function(t){for(;t.options.parentWorkspace;)t=t.options.parentWorkspace;var n=t.getParentSvg(),r=t.getCachedParentSvgSize(),s=n.parentNode;if(s){var u=s.offsetWidth;s=s.offsetHeight,r.width!=u&&(n.setAttribute("width",u+"px"),t.setCachedParentSvgSize(u,null)),r.height!=s&&(n.setAttribute("height",s+"px"),t.setCachedParentSvgSize(null,s)),t.resize()}},e.onKeyDown=function(t){var n=e.mainWorkspace;n&&!(e.utils.isTargetInput(t)||n.rendered&&!n.isVisible())&&e.ShortcutRegistry.registry.onKeyDown(n,t)},e.deleteBlock=function(t){t.workspace.isFlyout||(e.Events.setGroup(!0),e.hideChaff(),t.dispose(!t.outputConnection,!0),e.Events.setGroup(!1))},e.copy=function(t){(t=t.toCopyData())&&(e.clipboardXml_=t.xml,e.clipboardSource_=t.source,e.clipboardTypeCounts_=t.typeCounts)},e.paste=function(){if(!e.clipboardXml_)return!1;var t=e.clipboardSource_;return t.isFlyout&&(t=t.targetWorkspace),!(!e.clipboardTypeCounts_||!t.isCapacityAvailable(e.clipboardTypeCounts_)||(e.Events.setGroup(!0),t.paste(e.clipboardXml_),e.Events.setGroup(!1),0))},e.duplicate=function(t){var n=e.clipboardXml_,r=e.clipboardSource_;e.copy(t),t.workspace.paste(e.clipboardXml_),e.clipboardXml_=n,e.clipboardSource_=r},e.onContextMenu_=function(t){e.utils.isTargetInput(t)||t.preventDefault()},e.hideChaff=function(t){e.Tooltip.hide(),e.WidgetDiv.hide(),e.DropDownDiv.hideWithoutAnimation();var n=!!t;e.getMainWorkspace().getComponentManager().getComponents(e.ComponentManager.Capability.AUTOHIDEABLE,!0).forEach(function(r){r.autoHide(n)})},e.getMainWorkspace=function(){return e.mainWorkspace},e.alert=function(t,n){alert(t),n&&n()},e.confirm=function(t,n){n(confirm(t))},e.prompt=function(t,n,r){r(prompt(t,n))},e.jsonInitFactory_=function(t){return function(){this.jsonInit(t)}},e.defineBlocksWithJsonArray=function(t){for(var n=0;n<t.length;n++){var r=t[n];if(r){var s=r.type;null==s||""===s?console.warn("Block definition #"+n+" in JSON array is missing a type attribute. Skipping."):(e.Blocks[s]&&console.warn("Block definition #"+n+' in JSON array overwrites prior definition of "'+s+'".'),e.Blocks[s]={init:e.jsonInitFactory_(r)})}else console.warn("Block definition #"+n+" in JSON array is "+r+". Skipping.")}},e.isNumber=function(t){return/^\s*-?\d+(\.\d+)?\s*$/.test(t)},e.hueToHex=function(t){return e.utils.colour.hsvToHex(t,e.HSV_SATURATION,255*e.HSV_VALUE)},e.checkBlockColourConstants=function(){e.checkBlockColourConstant_("LOGIC_HUE",["Blocks","logic","HUE"],void 0),e.checkBlockColourConstant_("LOGIC_HUE",["Constants","Logic","HUE"],210),e.checkBlockColourConstant_("LOOPS_HUE",["Blocks","loops","HUE"],void 0),e.checkBlockColourConstant_("LOOPS_HUE",["Constants","Loops","HUE"],120),e.checkBlockColourConstant_("MATH_HUE",["Blocks","math","HUE"],void 0),e.checkBlockColourConstant_("MATH_HUE",["Constants","Math","HUE"],230),e.checkBlockColourConstant_("TEXTS_HUE",["Blocks","texts","HUE"],void 0),e.checkBlockColourConstant_("TEXTS_HUE",["Constants","Text","HUE"],160),e.checkBlockColourConstant_("LISTS_HUE",["Blocks","lists","HUE"],void 0),e.checkBlockColourConstant_("LISTS_HUE",["Constants","Lists","HUE"],260),e.checkBlockColourConstant_("COLOUR_HUE",["Blocks","colour","HUE"],void 0),e.checkBlockColourConstant_("COLOUR_HUE",["Constants","Colour","HUE"],20),e.checkBlockColourConstant_("VARIABLES_HUE",["Blocks","variables","HUE"],void 0),e.checkBlockColourConstant_("VARIABLES_HUE",["Constants","Variables","HUE"],330),e.checkBlockColourConstant_("VARIABLES_DYNAMIC_HUE",["Constants","VariablesDynamic","HUE"],310),e.checkBlockColourConstant_("PROCEDURES_HUE",["Blocks","procedures","HUE"],void 0)},e.checkBlockColourConstant_=function(t,n,r){for(var s="Blockly",u=e,y=0;y<n.length;++y)s+="."+n[y],u&&(u=u[n[y]]);u&&u!==r&&(t=(void 0===r?'%1 has been removed. Use Blockly.Msg["%2"].':'%1 is deprecated and unused. Override Blockly.Msg["%2"].').replace("%1",s).replace("%2",t),console.warn(t))},e.setParentContainer=function(t){e.parentContainer=t},e.bindEvent_=e.browserEvents.bind,e.unbindEvent_=e.browserEvents.unbind,e.bindEventWithChecks_=e.browserEvents.conditionalBind,e.ALIGN_LEFT=e.constants.ALIGN.LEFT,e.ALIGN_CENTRE=e.constants.ALIGN.CENTRE,e.ALIGN_RIGHT=e.constants.ALIGN.RIGHT,e.INPUT_VALUE=e.connectionTypes.INPUT_VALUE,e.OUTPUT_VALUE=e.connectionTypes.OUTPUT_VALUE,e.NEXT_STATEMENT=e.connectionTypes.NEXT_STATEMENT,e.PREVIOUS_STATEMENT=e.connectionTypes.PREVIOUS_STATEMENT,e.DUMMY_INPUT=e.inputTypes.DUMMY,e.TOOLBOX_AT_TOP=e.utils.toolbox.Position.TOP,e.TOOLBOX_AT_BOTTOM=e.utils.toolbox.Position.BOTTOM,e.TOOLBOX_AT_LEFT=e.utils.toolbox.Position.LEFT,e.TOOLBOX_AT_RIGHT=e.utils.toolbox.Position.RIGHT,e.Events.BubbleOpen=function(t,n,r){e.Events.BubbleOpen.superClass_.constructor.call(this,t?t.workspace.id:void 0),this.blockId=t?t.id:null,this.isOpen=n,this.bubbleType=r},e.utils.object.inherits(e.Events.BubbleOpen,e.Events.UiBase),e.Events.BubbleOpen.prototype.type=e.Events.BUBBLE_OPEN,e.Events.BubbleOpen.prototype.toJson=function(){var t=e.Events.BubbleOpen.superClass_.toJson.call(this);return t.isOpen=this.isOpen,t.bubbleType=this.bubbleType,t.blockId=this.blockId,t},e.Events.BubbleOpen.prototype.fromJson=function(t){e.Events.BubbleOpen.superClass_.fromJson.call(this,t),this.isOpen=t.isOpen,this.bubbleType=t.bubbleType,this.blockId=t.blockId},e.registry.register(e.registry.Type.EVENT,e.Events.BUBBLE_OPEN,e.Events.BubbleOpen),e.Icon=function(t){this.block_=t,this.iconGroup_=null},e.Icon.prototype.collapseHidden=!0,e.Icon.prototype.SIZE=17,e.Icon.prototype.bubble_=null,e.Icon.prototype.iconXY_=null,e.Icon.prototype.createIcon=function(){this.iconGroup_||(this.iconGroup_=e.utils.dom.createSvgElement(e.utils.Svg.G,{class:"blocklyIconGroup"},null),this.block_.isInFlyout&&e.utils.dom.addClass(this.iconGroup_,"blocklyIconGroupReadonly"),this.drawIcon_(this.iconGroup_),this.block_.getSvgRoot().appendChild(this.iconGroup_),e.browserEvents.conditionalBind(this.iconGroup_,"mouseup",this,this.iconClick_),this.updateEditable())},e.Icon.prototype.dispose=function(){e.utils.dom.removeNode(this.iconGroup_),this.iconGroup_=null,this.setVisible(!1),this.block_=null},e.Icon.prototype.updateEditable=function(){},e.Icon.prototype.isVisible=function(){return!!this.bubble_},e.Icon.prototype.iconClick_=function(t){this.block_.workspace.isDragging()||this.block_.isInFlyout||e.utils.isRightButton(t)||this.setVisible(!this.isVisible())},e.Icon.prototype.applyColour=function(){this.isVisible()&&this.bubble_.setColour(this.block_.style.colourPrimary)},e.Icon.prototype.setIconLocation=function(t){this.iconXY_=t,this.isVisible()&&this.bubble_.setAnchorLocation(t)},e.Icon.prototype.computeIconLocation=function(){var t=this.block_.getRelativeToSurfaceXY(),n=e.utils.getRelativeXY(this.iconGroup_);t=new e.utils.Coordinate(t.x+n.x+this.SIZE/2,t.y+n.y+this.SIZE/2),e.utils.Coordinate.equals(this.getIconLocation(),t)||this.setIconLocation(t)},e.Icon.prototype.getIconLocation=function(){return this.iconXY_},e.Icon.prototype.getCorrectedSize=function(){return new e.utils.Size(e.Icon.prototype.SIZE,e.Icon.prototype.SIZE-2)},e.Warning=function(t){e.Warning.superClass_.constructor.call(this,t),this.createIcon(),this.text_=Object.create(null)},e.utils.object.inherits(e.Warning,e.Icon),e.Warning.prototype.collapseHidden=!1,e.Warning.prototype.drawIcon_=function(t){e.utils.dom.createSvgElement(e.utils.Svg.PATH,{class:"blocklyIconShape",d:"M2,15Q-1,15 0.5,12L6.5,1.7Q8,-1 9.5,1.7L15.5,12Q17,15 14,15z"},t),e.utils.dom.createSvgElement(e.utils.Svg.PATH,{class:"blocklyIconSymbol",d:"m7,4.8v3.16l0.27,2.27h1.46l0.27,-2.27v-3.16z"},t),e.utils.dom.createSvgElement(e.utils.Svg.RECT,{class:"blocklyIconSymbol",x:"7",y:"11",height:"2",width:"2"},t)},e.Warning.prototype.setVisible=function(t){t!=this.isVisible()&&(e.Events.fire(new(e.Events.get(e.Events.BUBBLE_OPEN))(this.block_,t,"warning")),t?this.createBubble_():this.disposeBubble_())},e.Warning.prototype.createBubble_=function(){this.paragraphElement_=e.Bubble.textToDom(this.getText()),this.bubble_=e.Bubble.createNonEditableBubble(this.paragraphElement_,this.block_,this.iconXY_),this.applyColour()},e.Warning.prototype.disposeBubble_=function(){this.bubble_.dispose(),this.paragraphElement_=this.bubble_=null},e.Warning.prototype.setText=function(t,n){this.text_[n]!=t&&(t?this.text_[n]=t:delete this.text_[n],this.isVisible()&&(this.setVisible(!1),this.setVisible(!0)))},e.Warning.prototype.getText=function(){var n,t=[];for(n in this.text_)t.push(this.text_[n]);return t.join("\n")},e.Warning.prototype.dispose=function(){this.block_.warning=null,e.Icon.prototype.dispose.call(this)},e.Comment=function(t){e.Comment.superClass_.constructor.call(this,t),this.model_=t.commentModel,this.model_.text=this.model_.text||"",this.cachedText_="",this.onInputWrapper_=this.onChangeWrapper_=this.onWheelWrapper_=this.onMouseUpWrapper_=null,this.createIcon()},e.utils.object.inherits(e.Comment,e.Icon),e.Comment.prototype.drawIcon_=function(t){e.utils.dom.createSvgElement(e.utils.Svg.CIRCLE,{class:"blocklyIconShape",r:"8",cx:"8",cy:"8"},t),e.utils.dom.createSvgElement(e.utils.Svg.PATH,{class:"blocklyIconSymbol",d:"m6.8,10h2c0.003,-0.617 0.271,-0.962 0.633,-1.266 2.875,-2.4050.607,-5.534 -3.765,-3.874v1.7c3.12,-1.657 3.698,0.118 2.336,1.25-1.201,0.998 -1.201,1.528 -1.204,2.19z"},t),e.utils.dom.createSvgElement(e.utils.Svg.RECT,{class:"blocklyIconSymbol",x:"6.8",y:"10.78",height:"2",width:"2"},t)},e.Comment.prototype.createEditor_=function(){this.foreignObject_=e.utils.dom.createSvgElement(e.utils.Svg.FOREIGNOBJECT,{x:e.Bubble.BORDER_WIDTH,y:e.Bubble.BORDER_WIDTH},null);var t=document.createElementNS(e.utils.dom.HTML_NS,"body");t.setAttribute("xmlns",e.utils.dom.HTML_NS),t.className="blocklyMinimalBody";var n=this.textarea_=document.createElementNS(e.utils.dom.HTML_NS,"textarea");return n.className="blocklyCommentTextarea",n.setAttribute("dir",this.block_.RTL?"RTL":"LTR"),n.value=this.model_.text,this.resizeTextarea_(),t.appendChild(n),this.foreignObject_.appendChild(t),this.onMouseUpWrapper_=e.browserEvents.conditionalBind(n,"mouseup",this,this.startEdit_,!0,!0),this.onWheelWrapper_=e.browserEvents.conditionalBind(n,"wheel",this,function(r){r.stopPropagation()}),this.onChangeWrapper_=e.browserEvents.conditionalBind(n,"change",this,function(r){this.cachedText_!=this.model_.text&&e.Events.fire(new(e.Events.get(e.Events.BLOCK_CHANGE))(this.block_,"comment",null,this.cachedText_,this.model_.text))}),this.onInputWrapper_=e.browserEvents.conditionalBind(n,"input",this,function(r){this.model_.text=n.value}),setTimeout(n.focus.bind(n),0),this.foreignObject_},e.Comment.prototype.updateEditable=function(){e.Comment.superClass_.updateEditable.call(this),this.isVisible()&&(this.disposeBubble_(),this.createBubble_())},e.Comment.prototype.onBubbleResize_=function(){this.isVisible()&&(this.model_.size=this.bubble_.getBubbleSize(),this.resizeTextarea_())},e.Comment.prototype.resizeTextarea_=function(){var t=this.model_.size,n=2*e.Bubble.BORDER_WIDTH,r=t.width-n;t=t.height-n,this.foreignObject_.setAttribute("width",r),this.foreignObject_.setAttribute("height",t),this.textarea_.style.width=r-4+"px",this.textarea_.style.height=t-4+"px"},e.Comment.prototype.setVisible=function(t){t!=this.isVisible()&&(e.Events.fire(new(e.Events.get(e.Events.BUBBLE_OPEN))(this.block_,t,"comment")),(this.model_.pinned=t)?this.createBubble_():this.disposeBubble_())},e.Comment.prototype.createBubble_=function(){!this.block_.isEditable()||e.utils.userAgent.IE?this.createNonEditableBubble_():this.createEditableBubble_()},e.Comment.prototype.createEditableBubble_=function(){this.bubble_=new e.Bubble(this.block_.workspace,this.createEditor_(),this.block_.pathObject.svgPath,this.iconXY_,this.model_.size.width,this.model_.size.height),this.bubble_.setSvgId(this.block_.id),this.bubble_.registerResizeEvent(this.onBubbleResize_.bind(this)),this.applyColour()},e.Comment.prototype.createNonEditableBubble_=function(){this.paragraphElement_=e.Bubble.textToDom(this.block_.getCommentText()),this.bubble_=e.Bubble.createNonEditableBubble(this.paragraphElement_,this.block_,this.iconXY_),this.applyColour()},e.Comment.prototype.disposeBubble_=function(){this.onMouseUpWrapper_&&(e.browserEvents.unbind(this.onMouseUpWrapper_),this.onMouseUpWrapper_=null),this.onWheelWrapper_&&(e.browserEvents.unbind(this.onWheelWrapper_),this.onWheelWrapper_=null),this.onChangeWrapper_&&(e.browserEvents.unbind(this.onChangeWrapper_),this.onChangeWrapper_=null),this.onInputWrapper_&&(e.browserEvents.unbind(this.onInputWrapper_),this.onInputWrapper_=null),this.bubble_.dispose(),this.paragraphElement_=this.foreignObject_=this.textarea_=this.bubble_=null},e.Comment.prototype.startEdit_=function(t){this.bubble_.promote()&&this.textarea_.focus(),this.cachedText_=this.model_.text},e.Comment.prototype.getBubbleSize=function(){return this.model_.size},e.Comment.prototype.setBubbleSize=function(t,n){this.bubble_?this.bubble_.setBubbleSize(t,n):(this.model_.size.width=t,this.model_.size.height=n)},e.Comment.prototype.updateText=function(){this.textarea_?this.textarea_.value=this.model_.text:this.paragraphElement_&&(this.paragraphElement_.firstChild.textContent=this.model_.text)},e.Comment.prototype.dispose=function(){this.block_.comment=null,e.Icon.prototype.dispose.call(this)},e.Css.register(".blocklyCommentTextarea {,background-color: #fef49c;,border: 0;,outline: 0;,margin: 0;,padding: 3px;,resize: none;,display: block;,text-overflow: hidden;,}".split(",")),e.IComponent=function(){},e.IDragTarget=function(){},e.DragTarget=function(){},e.DragTarget.prototype.onDragEnter=function(t){},e.DragTarget.prototype.onDragOver=function(t){},e.DragTarget.prototype.onDragExit=function(t){},e.DragTarget.prototype.onDrop=function(t){},e.DragTarget.prototype.shouldPreventMove=function(t){return!1},e.IDeleteArea=function(){},e.DeleteArea=function(){e.DeleteArea.superClass_.constructor.call(this),this.wouldDelete_=!1},e.utils.object.inherits(e.DeleteArea,e.DragTarget),e.DeleteArea.prototype.wouldDelete=function(t,n){return t instanceof e.BlockSvg?(t=!t.getParent()&&t.isDeletable(),this.updateWouldDelete_(t&&!n)):this.updateWouldDelete_(t.isDeletable()),this.wouldDelete_},e.DeleteArea.prototype.updateWouldDelete_=function(t){this.wouldDelete_=t},e.IFlyout=function(){},e.Flyout=function(t){e.Flyout.superClass_.constructor.call(this),t.setMetrics=this.setMetrics_.bind(this),this.workspace_=new e.WorkspaceSvg(t),this.workspace_.setMetricsManager(new e.FlyoutMetricsManager(this.workspace_,this)),this.workspace_.isFlyout=!0,this.workspace_.setVisible(this.isVisible_),this.id=e.utils.genUid(),this.RTL=!!t.RTL,this.horizontalLayout=!1,this.toolboxPosition_=t.toolboxPosition,this.eventWrappers_=[],this.mats_=[],this.buttons_=[],this.listeners_=[],this.permanentlyDisabled_=[],this.tabWidth_=this.workspace_.getRenderer().getConstants().TAB_WIDTH,this.targetWorkspace=null},e.utils.object.inherits(e.Flyout,e.DeleteArea),e.Flyout.prototype.autoClose=!0,e.Flyout.prototype.isVisible_=!1,e.Flyout.prototype.containerVisible_=!0,e.Flyout.prototype.CORNER_RADIUS=8,e.Flyout.prototype.MARGIN=e.Flyout.prototype.CORNER_RADIUS,e.Flyout.prototype.GAP_X=3*e.Flyout.prototype.MARGIN,e.Flyout.prototype.GAP_Y=3*e.Flyout.prototype.MARGIN,e.Flyout.prototype.SCROLLBAR_MARGIN=2.5,e.Flyout.prototype.width_=0,e.Flyout.prototype.height_=0,e.Flyout.prototype.dragAngleRange_=70,e.Flyout.prototype.createDom=function(t){return this.svgGroup_=e.utils.dom.createSvgElement(t,{class:"blocklyFlyout",style:"display: none"},null),this.svgBackground_=e.utils.dom.createSvgElement(e.utils.Svg.PATH,{class:"blocklyFlyoutBackground"},this.svgGroup_),this.svgGroup_.appendChild(this.workspace_.createDom()),this.workspace_.getThemeManager().subscribe(this.svgBackground_,"flyoutBackgroundColour","fill"),this.workspace_.getThemeManager().subscribe(this.svgBackground_,"flyoutOpacity","fill-opacity"),this.svgGroup_},e.Flyout.prototype.init=function(t){this.targetWorkspace=t,this.workspace_.targetWorkspace=t,this.workspace_.scrollbar=new e.ScrollbarPair(this.workspace_,this.horizontalLayout,!this.horizontalLayout,"blocklyFlyoutScrollbar",this.SCROLLBAR_MARGIN),this.hide(),Array.prototype.push.apply(this.eventWrappers_,e.browserEvents.conditionalBind(this.svgGroup_,"wheel",this,this.wheel_)),this.autoClose||(this.filterWrapper_=this.filterForCapacity_.bind(this),this.targetWorkspace.addChangeListener(this.filterWrapper_)),Array.prototype.push.apply(this.eventWrappers_,e.browserEvents.conditionalBind(this.svgBackground_,"mousedown",this,this.onMouseDown_)),this.workspace_.getGesture=this.targetWorkspace.getGesture.bind(this.targetWorkspace),this.workspace_.setVariableMap(this.targetWorkspace.getVariableMap()),this.workspace_.createPotentialVariableMap(),t.getComponentManager().addComponent({component:this,weight:1,capabilities:[e.ComponentManager.Capability.DELETE_AREA,e.ComponentManager.Capability.DRAG_TARGET]})},e.Flyout.prototype.dispose=function(){this.hide(),this.workspace_.getComponentManager().removeComponent(this.id),e.browserEvents.unbind(this.eventWrappers_),this.filterWrapper_&&(this.targetWorkspace.removeChangeListener(this.filterWrapper_),this.filterWrapper_=null),this.workspace_&&(this.workspace_.getThemeManager().unsubscribe(this.svgBackground_),this.workspace_.targetWorkspace=null,this.workspace_.dispose(),this.workspace_=null),this.svgGroup_&&(e.utils.dom.removeNode(this.svgGroup_),this.svgGroup_=null),this.targetWorkspace=this.svgBackground_=null},e.Flyout.prototype.getWidth=function(){return this.width_},e.Flyout.prototype.getHeight=function(){return this.height_},e.Flyout.prototype.getFlyoutScale=function(){return this.targetWorkspace.scale},e.Flyout.prototype.getWorkspace=function(){return this.workspace_},e.Flyout.prototype.isVisible=function(){return this.isVisible_},e.Flyout.prototype.setVisible=function(t){var n=t!=this.isVisible();this.isVisible_=t,n&&(this.autoClose||this.workspace_.recordDragTargets(),this.updateDisplay_())},e.Flyout.prototype.setContainerVisible=function(t){var n=t!=this.containerVisible_;this.containerVisible_=t,n&&this.updateDisplay_()},e.Flyout.prototype.updateDisplay_=function(){var t=!!this.containerVisible_&&this.isVisible();this.svgGroup_.style.display=t?"block":"none",this.workspace_.scrollbar.setContainerVisible(t)},e.Flyout.prototype.positionAt_=function(t,n,r,s){this.svgGroup_.setAttribute("width",t),this.svgGroup_.setAttribute("height",n),this.workspace_.setCachedParentSvgSize(t,n),"svg"==this.svgGroup_.tagName?e.utils.dom.setCssTransform(this.svgGroup_,"translate("+r+"px,"+s+"px)"):this.svgGroup_.setAttribute("transform","translate("+r+","+s+")"),(t=this.workspace_.scrollbar)&&(t.setOrigin(r,s),t.resize(),t.hScroll&&t.hScroll.setPosition(t.hScroll.position.x,t.hScroll.position.y),t.vScroll&&t.vScroll.setPosition(t.vScroll.position.x,t.vScroll.position.y))},e.Flyout.prototype.hide=function(){if(this.isVisible()){this.setVisible(!1);for(var n,t=0;n=this.listeners_[t];t++)e.browserEvents.unbind(n);this.listeners_.length=0,this.reflowWrapper_&&(this.workspace_.removeChangeListener(this.reflowWrapper_),this.reflowWrapper_=null)}},e.Flyout.prototype.show=function(t){this.workspace_.setResizesEnabled(!1),this.hide(),this.clearOldBlocks_(),"string"==typeof t&&(t=this.getDynamicCategoryContents_(t)),this.setVisible(!0),t=e.utils.toolbox.convertFlyoutDefToJsonArray(t),t=this.createFlyoutInfo_(t),this.layout_(t.contents,t.gaps),this.listeners_.push(e.browserEvents.conditionalBind(this.svgBackground_,"mouseover",this,function(){for(var s,n=this.workspace_.getTopBlocks(!1),r=0;s=n[r];r++)s.removeSelect()})),this.horizontalLayout?this.height_=0:this.width_=0,this.workspace_.setResizesEnabled(!0),this.reflow(),this.filterForCapacity_(),this.position(),this.reflowWrapper_=this.reflow.bind(this),this.workspace_.addChangeListener(this.reflowWrapper_)},e.Flyout.prototype.createFlyoutInfo_=function(t){var n=[],r=[];this.permanentlyDisabled_.length=0;for(var y,s=this.horizontalLayout?this.GAP_X:this.GAP_Y,u=0;y=t[u];u++)switch(y.custom&&(y=this.getDynamicCategoryContents_(y.custom),y=e.utils.toolbox.convertFlyoutDefToJsonArray(y),t.splice.apply(t,[u,1].concat(y)),y=t[u]),y.kind.toUpperCase()){case"BLOCK":var x=y,B=this.getBlockXml_(x);y=this.createBlock_(B),x=parseInt(x.gap||B.getAttribute("gap"),10),r.push(isNaN(x)?s:x),n.push({type:"block",block:y});break;case"SEP":this.addSeparatorGap_(y,r,s);break;case"LABEL":y=this.createButton_(y,!0),n.push({type:"button",button:y}),r.push(s);break;case"BUTTON":y=this.createButton_(y,!1),n.push({type:"button",button:y}),r.push(s)}return{contents:n,gaps:r}},e.Flyout.prototype.getDynamicCategoryContents_=function(t){if("function"!=typeof(t=this.workspace_.targetWorkspace.getToolboxCategoryCallback(t)))throw TypeError("Couldn't find a callback function when opening a toolbox category.");if(t=t(this.workspace_.targetWorkspace),!Array.isArray(t))throw new TypeError("Result of toolbox category callback must be an array.");return t},e.Flyout.prototype.createButton_=function(t,n){if(!e.FlyoutButton)throw Error("Missing require for Blockly.FlyoutButton");return new e.FlyoutButton(this.workspace_,this.targetWorkspace,t,n)},e.Flyout.prototype.createBlock_=function(t){return(t=e.Xml.domToBlock(t,this.workspace_)).isEnabled()||this.permanentlyDisabled_.push(t),t},e.Flyout.prototype.getBlockXml_=function(t){var n=null,r=t.blockxml;if(r&&"string"!=typeof r?n=r:r&&"string"==typeof r?(n=e.Xml.textToDom(r),t.blockxml=n):t.type&&((n=e.utils.xml.createElement("xml")).setAttribute("type",t.type),n.setAttribute("disabled",t.disabled),t.blockxml=n),!n)throw Error("Error: Invalid block definition. Block definition must have blockxml or type.");return n},e.Flyout.prototype.addSeparatorGap_=function(t,n,r){t=parseInt(t.gap,10),!isNaN(t)&&0<n.length?n[n.length-1]=t:n.push(r)},e.Flyout.prototype.clearOldBlocks_=function(){for(var r,t=this.workspace_.getTopBlocks(!1),n=0;r=t[n];n++)r.workspace==this.workspace_&&r.dispose(!1,!1);for(n=0;n<this.mats_.length;n++)(t=this.mats_[n])&&(e.Tooltip.unbindMouseEvents(t),e.utils.dom.removeNode(t));for(n=this.mats_.length=0;t=this.buttons_[n];n++)t.dispose();this.buttons_.length=0,this.workspace_.getPotentialVariableMap().clear()},e.Flyout.prototype.addBlockListeners_=function(t,n,r){this.listeners_.push(e.browserEvents.conditionalBind(t,"mousedown",null,this.blockMouseDown_(n))),this.listeners_.push(e.browserEvents.conditionalBind(r,"mousedown",null,this.blockMouseDown_(n))),this.listeners_.push(e.browserEvents.bind(t,"mouseenter",n,n.addSelect)),this.listeners_.push(e.browserEvents.bind(t,"mouseleave",n,n.removeSelect)),this.listeners_.push(e.browserEvents.bind(r,"mouseenter",n,n.addSelect)),this.listeners_.push(e.browserEvents.bind(r,"mouseleave",n,n.removeSelect))},e.Flyout.prototype.blockMouseDown_=function(t){var n=this;return function(r){var s=n.targetWorkspace.getGesture(r);s&&(s.setStartBlock(t),s.handleFlyoutStart(r,n))}},e.Flyout.prototype.onMouseDown_=function(t){var n=this.targetWorkspace.getGesture(t);n&&n.handleFlyoutStart(t,this)},e.Flyout.prototype.isBlockCreatable_=function(t){return t.isEnabled()},e.Flyout.prototype.createBlock=function(t){var n=null;e.Events.disable();var r=this.targetWorkspace.getAllVariables();this.targetWorkspace.setResizesEnabled(!1);try{n=this.placeNewBlock_(t)}finally{e.Events.enable()}if(e.hideChaff(),t=e.Variables.getAddedVariables(this.targetWorkspace,r),e.Events.isEnabled()){for(e.Events.setGroup(!0),r=0;r<t.length;r++){var s=t[r];e.Events.fire(new(e.Events.get(e.Events.VAR_CREATE))(s))}e.Events.fire(new(e.Events.get(e.Events.BLOCK_CREATE))(n))}return this.autoClose?this.hide():this.filterForCapacity_(),n},e.Flyout.prototype.initFlyoutButton_=function(t,n,r){var s=t.createDom();t.moveTo(n,r),t.show(),this.listeners_.push(e.browserEvents.conditionalBind(s,"mousedown",this,this.onMouseDown_)),this.buttons_.push(t)},e.Flyout.prototype.createRect_=function(t,n,r,s,u){return(n=e.utils.dom.createSvgElement(e.utils.Svg.RECT,{"fill-opacity":0,x:n,y:r,height:s.height,width:s.width},null)).tooltip=t,e.Tooltip.bindMouseEvents(n),this.workspace_.getCanvas().insertBefore(n,t.getSvgRoot()),t.flyoutRect_=n,this.mats_[u]=n},e.Flyout.prototype.moveRectToBlock_=function(t,n){var r=n.getHeightWidth();t.setAttribute("width",r.width),t.setAttribute("height",r.height),n=n.getRelativeToSurfaceXY(),t.setAttribute("y",n.y),t.setAttribute("x",this.RTL?n.x-r.width:n.x)},e.Flyout.prototype.filterForCapacity_=function(){for(var r,t=this.workspace_.getTopBlocks(!1),n=0;r=t[n];n++)if(-1==this.permanentlyDisabled_.indexOf(r))for(var s=this.targetWorkspace.isCapacityAvailable(e.utils.getBlockTypeCounts(r));r;)r.setEnabled(s),r=r.getNextBlock()},e.Flyout.prototype.reflow=function(){this.reflowWrapper_&&this.workspace_.removeChangeListener(this.reflowWrapper_),this.reflowInternal_(),this.reflowWrapper_&&this.workspace_.addChangeListener(this.reflowWrapper_)},e.Flyout.prototype.isScrollable=function(){return!!this.workspace_.scrollbar&&this.workspace_.scrollbar.isVisible()},e.Flyout.prototype.placeNewBlock_=function(t){var n=this.targetWorkspace;if(!t.getSvgRoot())throw Error("oldBlock is not rendered.");var r=e.Xml.blockToDom(t,!0);if(n.setResizesEnabled(!1),!(r=e.Xml.domToBlock(r,n)).getSvgRoot())throw Error("block is not rendered.");var s=n.getOriginOffsetInPixels(),u=this.workspace_.getOriginOffsetInPixels();return(t=t.getRelativeToSurfaceXY()).scale(this.workspace_.scale),t=e.utils.Coordinate.sum(u,t),(s=e.utils.Coordinate.difference(t,s)).scale(1/n.scale),r.moveBy(s.x,s.y),r},e.HorizontalFlyout=function(t){e.HorizontalFlyout.superClass_.constructor.call(this,t),this.horizontalLayout=!0},e.utils.object.inherits(e.HorizontalFlyout,e.Flyout),e.HorizontalFlyout.prototype.setMetrics_=function(t){if(this.isVisible()){var n=this.workspace_.getMetricsManager(),r=n.getScrollMetrics(),s=n.getViewMetrics();n=n.getAbsoluteMetrics(),"number"==typeof t.x&&(this.workspace_.scrollX=-(r.left+(r.width-s.width)*t.x)),this.workspace_.translate(this.workspace_.scrollX+n.left,this.workspace_.scrollY+n.top)}},e.HorizontalFlyout.prototype.getX=function(){return 0},e.HorizontalFlyout.prototype.getY=function(){if(!this.isVisible())return 0;var t=this.targetWorkspace.getMetricsManager(),n=t.getAbsoluteMetrics(),r=t.getViewMetrics();t=t.getToolboxMetrics();var s=this.toolboxPosition_==e.utils.toolbox.Position.TOP;return this.targetWorkspace.toolboxPosition==this.toolboxPosition_?this.targetWorkspace.getToolbox()?s?t.height:r.height-this.height_:s?0:r.height:s?0:r.height+n.top-this.height_},e.HorizontalFlyout.prototype.position=function(){if(this.isVisible()&&this.targetWorkspace.isVisible()){var t=this.targetWorkspace.getMetricsManager().getViewMetrics();this.width_=t.width,this.setBackgroundPath_(t.width-2*this.CORNER_RADIUS,this.height_-this.CORNER_RADIUS),t=this.getX();var n=this.getY();this.positionAt_(this.width_,this.height_,t,n)}},e.HorizontalFlyout.prototype.setBackgroundPath_=function(t,n){var r=this.toolboxPosition_==e.utils.toolbox.Position.TOP,s=["M 0,"+(r?0:this.CORNER_RADIUS)];r?(s.push("h",t+2*this.CORNER_RADIUS),s.push("v",n),s.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,-this.CORNER_RADIUS,this.CORNER_RADIUS),s.push("h",-t),s.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,-this.CORNER_RADIUS,-this.CORNER_RADIUS)):(s.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,this.CORNER_RADIUS,-this.CORNER_RADIUS),s.push("h",t),s.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,this.CORNER_RADIUS,this.CORNER_RADIUS),s.push("v",n),s.push("h",-t-2*this.CORNER_RADIUS)),s.push("z"),this.svgBackground_.setAttribute("d",s.join(" "))},e.HorizontalFlyout.prototype.scrollToStart=function(){this.workspace_.scrollbar.setX(this.RTL?1/0:0)},e.HorizontalFlyout.prototype.wheel_=function(t){var n=e.utils.getScrollDeltaPixels(t);if(n=n.x||n.y){var r=this.workspace_.getMetricsManager(),s=r.getScrollMetrics();n=r.getViewMetrics().left-s.left+n,this.workspace_.scrollbar.setX(n),e.WidgetDiv.hide(),e.DropDownDiv.hideWithoutAnimation()}t.preventDefault(),t.stopPropagation()},e.HorizontalFlyout.prototype.layout_=function(t,n){this.workspace_.scale=this.targetWorkspace.scale;var r=this.MARGIN,s=r+this.tabWidth_;this.RTL&&(t=t.reverse());for(var y,u=0;y=t[u];u++)if("block"==y.type){for(var Q,x=(y=y.block).getDescendants(!1),B=0;Q=x[B];B++)Q.isInFlyout=!0;y.render(),x=y.getSvgRoot(),B=y.getHeightWidth(),Q=y.outputConnection?this.tabWidth_:0,y.moveBy(Q=this.RTL?s+B.width:s-Q,r),Q=this.createRect_(y,Q,r,B,u),s+=B.width+n[u],this.addBlockListeners_(x,y,Q)}else"button"==y.type&&(this.initFlyoutButton_(y.button,s,r),s+=y.button.width+n[u])},e.HorizontalFlyout.prototype.isDragTowardWorkspace=function(t){t=Math.atan2(t.y,t.x)/Math.PI*180;var n=this.dragAngleRange_;return t<90+n&&t>90-n||t>-90-n&&t<-90+n},e.HorizontalFlyout.prototype.getClientRect=function(){if(!this.svgGroup_||this.autoClose||!this.isVisible())return null;var t=this.svgGroup_.getBoundingClientRect(),n=t.top;return this.toolboxPosition_==e.utils.toolbox.Position.TOP?new e.utils.Rect(-1e9,n+t.height,-1e9,1e9):new e.utils.Rect(n,1e9,-1e9,1e9)},e.HorizontalFlyout.prototype.reflowInternal_=function(){this.workspace_.scale=this.getFlyoutScale();for(var s,t=0,n=this.workspace_.getTopBlocks(!1),r=0;s=n[r];r++)t=Math.max(t,s.getHeightWidth().height);if(t+=1.5*this.MARGIN,t*=this.workspace_.scale,this.height_!=(t+=e.Scrollbar.scrollbarThickness)){for(r=0;s=n[r];r++)s.flyoutRect_&&this.moveRectToBlock_(s.flyoutRect_,s);this.targetWorkspace.toolboxPosition!=this.toolboxPosition_||this.toolboxPosition_!=e.utils.toolbox.Position.TOP||this.targetWorkspace.getToolbox()||this.targetWorkspace.translate(this.targetWorkspace.scrollX,this.targetWorkspace.scrollY+t),this.height_=t,this.position(),this.targetWorkspace.recordDragTargets()}},e.registry.register(e.registry.Type.FLYOUTS_HORIZONTAL_TOOLBOX,e.registry.DEFAULT,e.HorizontalFlyout),e.VerticalFlyout=function(t){e.VerticalFlyout.superClass_.constructor.call(this,t)},e.utils.object.inherits(e.VerticalFlyout,e.Flyout),e.VerticalFlyout.registryName="verticalFlyout",e.VerticalFlyout.prototype.setMetrics_=function(t){if(this.isVisible()){var n=this.workspace_.getMetricsManager(),r=n.getScrollMetrics(),s=n.getViewMetrics();n=n.getAbsoluteMetrics(),"number"==typeof t.y&&(this.workspace_.scrollY=-(r.top+(r.height-s.height)*t.y)),this.workspace_.translate(this.workspace_.scrollX+n.left,this.workspace_.scrollY+n.top)}},e.VerticalFlyout.prototype.getX=function(){if(!this.isVisible())return 0;var t=this.targetWorkspace.getMetricsManager(),n=t.getAbsoluteMetrics(),r=t.getViewMetrics();return t=t.getToolboxMetrics(),this.targetWorkspace.toolboxPosition==this.toolboxPosition_?this.targetWorkspace.getToolbox()?this.toolboxPosition_==e.utils.toolbox.Position.LEFT?t.width:r.width-this.width_:this.toolboxPosition_==e.utils.toolbox.Position.LEFT?0:r.width:this.toolboxPosition_==e.utils.toolbox.Position.LEFT?0:r.width+n.left-this.width_},e.VerticalFlyout.prototype.getY=function(){return 0},e.VerticalFlyout.prototype.position=function(){if(this.isVisible()&&this.targetWorkspace.isVisible()){var t=this.targetWorkspace.getMetricsManager().getViewMetrics();this.height_=t.height,this.setBackgroundPath_(this.width_-this.CORNER_RADIUS,t.height-2*this.CORNER_RADIUS),t=this.getX();var n=this.getY();this.positionAt_(this.width_,this.height_,t,n)}},e.VerticalFlyout.prototype.setBackgroundPath_=function(t,n){var r=this.toolboxPosition_==e.utils.toolbox.Position.RIGHT,s=t+this.CORNER_RADIUS;(s=["M "+(r?s:0)+",0"]).push("h",r?-t:t),s.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,r?0:1,r?-this.CORNER_RADIUS:this.CORNER_RADIUS,this.CORNER_RADIUS),s.push("v",Math.max(0,n)),s.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,r?0:1,r?this.CORNER_RADIUS:-this.CORNER_RADIUS,this.CORNER_RADIUS),s.push("h",r?t:-t),s.push("z"),this.svgBackground_.setAttribute("d",s.join(" "))},e.VerticalFlyout.prototype.scrollToStart=function(){this.workspace_.scrollbar.setY(0)},e.VerticalFlyout.prototype.wheel_=function(t){var n=e.utils.getScrollDeltaPixels(t);if(n.y){var r=this.workspace_.getMetricsManager(),s=r.getScrollMetrics();n=r.getViewMetrics().top-s.top+n.y,this.workspace_.scrollbar.setY(n),e.WidgetDiv.hide(),e.DropDownDiv.hideWithoutAnimation()}t.preventDefault(),t.stopPropagation()},e.VerticalFlyout.prototype.layout_=function(t,n){this.workspace_.scale=this.targetWorkspace.scale;for(var y,r=this.MARGIN,s=this.RTL?r:r+this.tabWidth_,u=0;y=t[u];u++)if("block"==y.type){for(var Q,x=(y=y.block).getDescendants(!1),B=0;Q=x[B];B++)Q.isInFlyout=!0;y.render(),x=y.getSvgRoot(),B=y.getHeightWidth(),y.moveBy(Q=y.outputConnection?s-this.tabWidth_:s,r),Q=this.createRect_(y,this.RTL?Q-B.width:Q,r,B,u),this.addBlockListeners_(x,y,Q),r+=B.height+n[u]}else"button"==y.type&&(this.initFlyoutButton_(y.button,s,r),r+=y.button.height+n[u])},e.VerticalFlyout.prototype.isDragTowardWorkspace=function(t){t=Math.atan2(t.y,t.x)/Math.PI*180;var n=this.dragAngleRange_;return t<n&&t>-n||t<-180+n||t>180-n},e.VerticalFlyout.prototype.getClientRect=function(){if(!this.svgGroup_||this.autoClose||!this.isVisible())return null;var t=this.svgGroup_.getBoundingClientRect(),n=t.left;return this.toolboxPosition_==e.utils.toolbox.Position.LEFT?new e.utils.Rect(-1e9,1e9,-1e9,n+t.width):new e.utils.Rect(-1e9,1e9,n,1e9)},e.VerticalFlyout.prototype.reflowInternal_=function(){this.workspace_.scale=this.getFlyoutScale();for(var s,t=0,n=this.workspace_.getTopBlocks(!1),r=0;s=n[r];r++){var u=s.getHeightWidth().width;s.outputConnection&&(u-=this.tabWidth_),t=Math.max(t,u)}for(r=0;s=this.buttons_[r];r++)t=Math.max(t,s.width);if(t+=1.5*this.MARGIN+this.tabWidth_,t*=this.workspace_.scale,this.width_!=(t+=e.Scrollbar.scrollbarThickness)){for(r=0;s=n[r];r++){if(this.RTL){u=s.getRelativeToSurfaceXY().x;var y=t/this.workspace_.scale-this.MARGIN;s.outputConnection||(y-=this.tabWidth_),s.moveBy(y-u,0)}s.flyoutRect_&&this.moveRectToBlock_(s.flyoutRect_,s)}if(this.RTL)for(r=0;s=this.buttons_[r];r++)n=s.getPosition().y,s.moveTo(t/this.workspace_.scale-s.width-this.MARGIN-this.tabWidth_,n);this.targetWorkspace.toolboxPosition!=this.toolboxPosition_||this.toolboxPosition_!=e.utils.toolbox.Position.LEFT||this.targetWorkspace.getToolbox()||this.targetWorkspace.translate(this.targetWorkspace.scrollX+t,this.targetWorkspace.scrollY),this.width_=t,this.position(),this.targetWorkspace.recordDragTargets()}},e.registry.register(e.registry.Type.FLYOUTS_VERTICAL_TOOLBOX,e.registry.DEFAULT,e.VerticalFlyout),e.FlyoutButton=function(t,n,r,s){this.workspace_=t,this.targetWorkspace_=n,this.text_=r.text,this.position_=new e.utils.Coordinate(0,0),this.isLabel_=s,this.callbackKey_=r.callbackKey||r.callbackkey,this.cssClass_=r["web-class"]||null,this.onMouseUpWrapper_=null,this.info=r},e.FlyoutButton.MARGIN_X=5,e.FlyoutButton.MARGIN_Y=2,e.FlyoutButton.prototype.width=0,e.FlyoutButton.prototype.height=0,e.FlyoutButton.prototype.createDom=function(){var t=this.isLabel_?"blocklyFlyoutLabel":"blocklyFlyoutButton";if(this.cssClass_&&(t+=" "+this.cssClass_),this.svgGroup_=e.utils.dom.createSvgElement(e.utils.Svg.G,{class:t},this.workspace_.getCanvas()),!this.isLabel_)var n=e.utils.dom.createSvgElement(e.utils.Svg.RECT,{class:"blocklyFlyoutButtonShadow",rx:4,ry:4,x:1,y:1},this.svgGroup_);t=e.utils.dom.createSvgElement(e.utils.Svg.RECT,{class:this.isLabel_?"blocklyFlyoutLabelBackground":"blocklyFlyoutButtonBackground",rx:4,ry:4},this.svgGroup_);var r=e.utils.dom.createSvgElement(e.utils.Svg.TEXT,{class:this.isLabel_?"blocklyFlyoutLabelText":"blocklyText",x:0,y:0,"text-anchor":"middle"},this.svgGroup_),s=e.utils.replaceMessageReferences(this.text_);this.workspace_.RTL&&(s+="\u200f"),r.textContent=s,this.isLabel_&&(this.svgText_=r,this.workspace_.getThemeManager().subscribe(this.svgText_,"flyoutForegroundColour","fill"));var u=e.utils.style.getComputedStyle(r,"fontSize"),y=e.utils.style.getComputedStyle(r,"fontWeight"),x=e.utils.style.getComputedStyle(r,"fontFamily");return this.width=e.utils.dom.getFastTextWidthWithSizeString(r,u,y,x),s=e.utils.dom.measureFontMetrics(s,u,y,x),this.height=s.height,this.isLabel_||(this.width+=2*e.FlyoutButton.MARGIN_X,this.height+=2*e.FlyoutButton.MARGIN_Y,n.setAttribute("width",this.width),n.setAttribute("height",this.height)),t.setAttribute("width",this.width),t.setAttribute("height",this.height),r.setAttribute("x",this.width/2),r.setAttribute("y",this.height/2-s.height/2+s.baseline),this.updateTransform_(),this.onMouseUpWrapper_=e.browserEvents.conditionalBind(this.svgGroup_,"mouseup",this,this.onMouseUp_),this.svgGroup_},e.FlyoutButton.prototype.show=function(){this.updateTransform_(),this.svgGroup_.setAttribute("display","block")},e.FlyoutButton.prototype.updateTransform_=function(){this.svgGroup_.setAttribute("transform","translate("+this.position_.x+","+this.position_.y+")")},e.FlyoutButton.prototype.moveTo=function(t,n){this.position_.x=t,this.position_.y=n,this.updateTransform_()},e.FlyoutButton.prototype.isLabel=function(){return this.isLabel_},e.FlyoutButton.prototype.getPosition=function(){return this.position_},e.FlyoutButton.prototype.getButtonText=function(){return this.text_},e.FlyoutButton.prototype.getTargetWorkspace=function(){return this.targetWorkspace_},e.FlyoutButton.prototype.dispose=function(){this.onMouseUpWrapper_&&e.browserEvents.unbind(this.onMouseUpWrapper_),this.svgGroup_&&e.utils.dom.removeNode(this.svgGroup_),this.svgText_&&this.workspace_.getThemeManager().unsubscribe(this.svgText_)},e.FlyoutButton.prototype.onMouseUp_=function(t){(t=this.targetWorkspace_.getGesture(t))&&t.cancel(),this.isLabel_&&this.callbackKey_?console.warn("Labels should not have callbacks. Label text: "+this.text_):this.isLabel_||this.callbackKey_&&this.targetWorkspace_.getButtonCallback(this.callbackKey_)?this.isLabel_||this.targetWorkspace_.getButtonCallback(this.callbackKey_)(this):console.warn("Buttons should have callbacks. Button text: "+this.text_)},e.Css.register(".blocklyFlyoutButton {,fill: #888;,cursor: default;,},.blocklyFlyoutButtonShadow {,fill: #666;,},.blocklyFlyoutButton:hover {,fill: #aaa;,},.blocklyFlyoutLabel {,cursor: default;,},.blocklyFlyoutLabelBackground {,opacity: 0;,}".split(",")),e.Generator=function(t){this.name_=t,this.FUNCTION_NAME_PLACEHOLDER_REGEXP_=new RegExp(this.FUNCTION_NAME_PLACEHOLDER_,"g")},e.Generator.prototype.INFINITE_LOOP_TRAP=null,e.Generator.prototype.STATEMENT_PREFIX=null,e.Generator.prototype.STATEMENT_SUFFIX=null,e.Generator.prototype.INDENT="  ",e.Generator.prototype.COMMENT_WRAP=60,e.Generator.prototype.ORDER_OVERRIDES=[],e.Generator.prototype.isInitialized=null,e.Generator.prototype.workspaceToCode=function(t){t||(console.warn("No workspace specified in workspaceToCode call.  Guessing."),t=e.getMainWorkspace());var n=[];this.init(t),t=t.getTopBlocks(!0);for(var s,r=0;s=t[r];r++){var u=this.blockToCode(s);Array.isArray(u)&&(u=u[0]),u&&(s.outputConnection&&(u=this.scrubNakedValue(u),this.STATEMENT_PREFIX&&!s.suppressPrefixSuffix&&(u=this.injectId(this.STATEMENT_PREFIX,s)+u),this.STATEMENT_SUFFIX&&!s.suppressPrefixSuffix&&(u+=this.injectId(this.STATEMENT_SUFFIX,s))),n.push(u))}return n=n.join("\n"),(n=(n=(n=this.finish(n)).replace(/^\s+\n/,"")).replace(/\n\s+$/,"\n")).replace(/[ \t]+\n/g,"\n")},e.Generator.prototype.prefixLines=function(t,n){return n+t.replace(/(?!\n$)\n/g,"\n"+n)},e.Generator.prototype.allNestedComments=function(t){var n=[];t=t.getDescendants(!0);for(var r=0;r<t.length;r++){var s=t[r].getCommentText();s&&n.push(s)}return n.length&&n.push(""),n.join("\n")},e.Generator.prototype.blockToCode=function(t,n){if(!1===this.isInitialized&&console.warn("Generator init was not called before blockToCode was called."),!t)return"";if(!t.isEnabled())return n?"":this.blockToCode(t.getNextBlock());if(t.isInsertionMarker())return n?"":this.blockToCode(t.getChildren(!1)[0]);var r=this[t.type];if("function"!=typeof r)throw Error('Language "'+this.name_+'" does not know how to generate code for block type "'+t.type+'".');if(r=r.call(t,t),Array.isArray(r)){if(!t.outputConnection)throw TypeError("Expecting string from statement block: "+t.type);return[this.scrub_(t,r[0],n),r[1]]}if("string"==typeof r)return this.STATEMENT_PREFIX&&!t.suppressPrefixSuffix&&(r=this.injectId(this.STATEMENT_PREFIX,t)+r),this.STATEMENT_SUFFIX&&!t.suppressPrefixSuffix&&(r+=this.injectId(this.STATEMENT_SUFFIX,t)),this.scrub_(t,r,n);if(null===r)return"";throw SyntaxError("Invalid code generated: "+r)},e.Generator.prototype.valueToCode=function(t,n,r){if(isNaN(r))throw TypeError("Expecting valid order from block: "+t.type);var s=t.getInputTargetBlock(n);if(!s||""===(n=this.blockToCode(s)))return"";if(!Array.isArray(n))throw TypeError("Expecting tuple from value block: "+s.type);if(t=n[0],n=n[1],isNaN(n))throw TypeError("Expecting valid order from value block: "+s.type);if(!t)return"";s=!1;var u=Math.floor(r),y=Math.floor(n);if(u<=y&&(u!=y||0!=u&&99!=u))for(s=!0,u=0;u<this.ORDER_OVERRIDES.length;u++)if(this.ORDER_OVERRIDES[u][0]==r&&this.ORDER_OVERRIDES[u][1]==n){s=!1;break}return s&&(t="("+t+")"),t},e.Generator.prototype.statementToCode=function(t,n){if(t=t.getInputTargetBlock(n),"string"!=typeof(n=this.blockToCode(t)))throw TypeError("Expecting code from statement block: "+(t&&t.type));return n&&(n=this.prefixLines(n,this.INDENT)),n},e.Generator.prototype.addLoopTrap=function(t,n){return this.INFINITE_LOOP_TRAP&&(t=this.prefixLines(this.injectId(this.INFINITE_LOOP_TRAP,n),this.INDENT)+t),this.STATEMENT_SUFFIX&&!n.suppressPrefixSuffix&&(t=this.prefixLines(this.injectId(this.STATEMENT_SUFFIX,n),this.INDENT)+t),this.STATEMENT_PREFIX&&!n.suppressPrefixSuffix&&(t+=this.prefixLines(this.injectId(this.STATEMENT_PREFIX,n),this.INDENT)),t},e.Generator.prototype.injectId=function(t,n){return n=n.id.replace(/\$/g,"$$$$"),t.replace(/%1/g,"'"+n+"'")},e.Generator.prototype.RESERVED_WORDS_="",e.Generator.prototype.addReservedWords=function(t){this.RESERVED_WORDS_+=t+","},e.Generator.prototype.FUNCTION_NAME_PLACEHOLDER_="{leCUI8hutHZI4480Dc}",Object.defineProperty(e.Generator.prototype,"variableDB_",{get:function(){return e.utils.deprecation.warn("variableDB_","May 2021","May 2026","nameDB_"),this.nameDB_},set:function(t){e.utils.deprecation.warn("variableDB_","May 2021","May 2026","nameDB_"),this.nameDB_=t}}),e.Generator.prototype.provideFunction_=function(t,n){if(!this.definitions_[t]){var s,r=this.nameDB_.getDistinctName(t,e.PROCEDURE_CATEGORY_NAME);for(this.functionNames_[t]=r,n=n.join("\n").replace(this.FUNCTION_NAME_PLACEHOLDER_REGEXP_,r);s!=n;)s=n,n=n.replace(/^(( {2})*) {2}/gm,"$1\0");n=n.replace(/\0/g,this.INDENT),this.definitions_[t]=n}return this.functionNames_[t]},e.Generator.prototype.init=function(t){this.definitions_=Object.create(null),this.functionNames_=Object.create(null)},e.Generator.prototype.scrub_=function(t,n,r){return n},e.Generator.prototype.finish=function(t){return delete this.definitions_,delete this.functionNames_,t},e.Generator.prototype.scrubNakedValue=function(t){return t},e.IToolboxItem=function(){},e.ISelectableToolboxItem=function(){},e.ICollapsibleToolboxItem=function(){},e.ToolboxItem=function(t,n,r){this.id_=t.toolboxitemid||e.utils.IdGenerator.getNextUniqueId(),this.level_=(this.parent_=r||null)?this.parent_.getLevel()+1:0,this.toolboxItemDef_=t,this.parentToolbox_=n,this.workspace_=this.parentToolbox_.getWorkspace()},e.ToolboxItem.prototype.init=function(){},e.ToolboxItem.prototype.getDiv=function(){return null},e.ToolboxItem.prototype.getId=function(){return this.id_},e.ToolboxItem.prototype.getParent=function(){return null},e.ToolboxItem.prototype.getLevel=function(){return this.level_},e.ToolboxItem.prototype.isSelectable=function(){return!1},e.ToolboxItem.prototype.isCollapsible=function(){return!1},e.ToolboxItem.prototype.dispose=function(){},e.ToolboxCategory=function(t,n,r){e.ToolboxCategory.superClass_.constructor.call(this,t,n,r),this.name_=e.utils.replaceMessageReferences(t.name),this.colour_=this.getColour_(t),this.labelDom_=this.iconDom_=this.rowContents_=this.rowDiv_=this.htmlDiv_=null,this.cssConfig_=this.makeDefaultCssConfig_(),e.utils.object.mixin(this.cssConfig_,t.cssconfig||t.cssConfig),this.isDisabled_=this.isHidden_=!1,this.flyoutItems_=[],this.parseContents_(t)},e.utils.object.inherits(e.ToolboxCategory,e.ToolboxItem),e.ToolboxCategory.registrationName="category",e.ToolboxCategory.nestedPadding=19,e.ToolboxCategory.borderWidth=8,e.ToolboxCategory.defaultBackgroundColour="#57e",e.ToolboxCategory.prototype.makeDefaultCssConfig_=function(){return{container:"blocklyToolboxCategory",row:"blocklyTreeRow",rowcontentcontainer:"blocklyTreeRowContentContainer",icon:"blocklyTreeIcon",label:"blocklyTreeLabel",contents:"blocklyToolboxContents",selected:"blocklyTreeSelected",openicon:"blocklyTreeIconOpen",closedicon:"blocklyTreeIconClosed"}},e.ToolboxCategory.prototype.parseContents_=function(t){var n=t.contents;if(t.custom)this.flyoutItems_=t.custom;else if(n){t=0;for(var r;r=n[t];t++)this.flyoutItems_.push(r)}},e.ToolboxCategory.prototype.init=function(){this.createDom_(),"true"==this.toolboxItemDef_.hidden&&this.hide()},e.ToolboxCategory.prototype.createDom_=function(){return this.htmlDiv_=this.createContainer_(),e.utils.aria.setRole(this.htmlDiv_,e.utils.aria.Role.TREEITEM),e.utils.aria.setState(this.htmlDiv_,e.utils.aria.State.SELECTED,!1),e.utils.aria.setState(this.htmlDiv_,e.utils.aria.State.LEVEL,this.level_),this.rowDiv_=this.createRowContainer_(),this.rowDiv_.style.pointerEvents="auto",this.htmlDiv_.appendChild(this.rowDiv_),this.rowContents_=this.createRowContentsContainer_(),this.rowContents_.style.pointerEvents="none",this.rowDiv_.appendChild(this.rowContents_),this.iconDom_=this.createIconDom_(),e.utils.aria.setRole(this.iconDom_,e.utils.aria.Role.PRESENTATION),this.rowContents_.appendChild(this.iconDom_),this.labelDom_=this.createLabelDom_(this.name_),this.rowContents_.appendChild(this.labelDom_),e.utils.aria.setState(this.htmlDiv_,e.utils.aria.State.LABELLEDBY,this.labelDom_.getAttribute("id")),this.addColourBorder_(this.colour_),this.htmlDiv_},e.ToolboxCategory.prototype.createContainer_=function(){var t=document.createElement("div");return e.utils.dom.addClass(t,this.cssConfig_.container),t},e.ToolboxCategory.prototype.createRowContainer_=function(){var t=document.createElement("div");e.utils.dom.addClass(t,this.cssConfig_.row);var n=e.ToolboxCategory.nestedPadding*this.getLevel();return n=n.toString()+"px",this.workspace_.RTL?t.style.paddingRight=n:t.style.paddingLeft=n,t},e.ToolboxCategory.prototype.createRowContentsContainer_=function(){var t=document.createElement("div");return e.utils.dom.addClass(t,this.cssConfig_.rowcontentcontainer),t},e.ToolboxCategory.prototype.createIconDom_=function(){var t=document.createElement("span");return this.parentToolbox_.isHorizontal()||e.utils.dom.addClass(t,this.cssConfig_.icon),t.style.display="inline-block",t},e.ToolboxCategory.prototype.createLabelDom_=function(t){var n=document.createElement("span");return n.setAttribute("id",this.getId()+".label"),n.textContent=t,e.utils.dom.addClass(n,this.cssConfig_.label),n},e.ToolboxCategory.prototype.refreshTheme=function(){this.colour_=this.getColour_(this.toolboxItemDef_),this.addColourBorder_(this.colour_)},e.ToolboxCategory.prototype.addColourBorder_=function(t){t&&(t=e.ToolboxCategory.borderWidth+"px solid "+(t||"#ddd"),this.workspace_.RTL?this.rowDiv_.style.borderRight=t:this.rowDiv_.style.borderLeft=t)},e.ToolboxCategory.prototype.getColour_=function(t){var n=t.categorystyle||t.categoryStyle;return(t=t.colour)&&n?(console.warn('Toolbox category "'+this.name_+'" must not have both a style and a colour'),""):n?this.getColourfromStyle_(n):this.parseColour_(t)},e.ToolboxCategory.prototype.getColourfromStyle_=function(t){var n=this.workspace_.getTheme();if(t&&n){if((n=n.categoryStyles[t])&&n.colour)return this.parseColour_(n.colour);console.warn('Style "'+t+'" must exist and contain a colour value')}return""},e.ToolboxCategory.prototype.getClickTarget=function(){return this.rowDiv_},e.ToolboxCategory.prototype.parseColour_=function(t){if(null==(t=e.utils.replaceMessageReferences(t))||""===t)return"";var n=Number(t);return isNaN(n)?(n=e.utils.colour.parse(t))?n:(console.warn('Toolbox category "'+this.name_+'" has unrecognized colour attribute: '+t),""):e.hueToHex(n)},e.ToolboxCategory.prototype.openIcon_=function(t){t&&(e.utils.dom.removeClasses(t,this.cssConfig_.closedicon),e.utils.dom.addClass(t,this.cssConfig_.openicon))},e.ToolboxCategory.prototype.closeIcon_=function(t){t&&(e.utils.dom.removeClasses(t,this.cssConfig_.openicon),e.utils.dom.addClass(t,this.cssConfig_.closedicon))},e.ToolboxCategory.prototype.setVisible_=function(t){this.htmlDiv_.style.display=t?"block":"none",this.isHidden_=!t,this.parentToolbox_.getSelectedItem()==this&&this.parentToolbox_.clearSelection()},e.ToolboxCategory.prototype.hide=function(){this.setVisible_(!1)},e.ToolboxCategory.prototype.show=function(){this.setVisible_(!0)},e.ToolboxCategory.prototype.isVisible=function(){return!this.isHidden_&&this.allAncestorsExpanded_()},e.ToolboxCategory.prototype.allAncestorsExpanded_=function(){for(var t=this;t.getParent();)if(!(t=t.getParent()).isExpanded())return!1;return!0},e.ToolboxCategory.prototype.isSelectable=function(){return this.isVisible()&&!this.isDisabled_},e.ToolboxCategory.prototype.onClick=function(t){},e.ToolboxCategory.prototype.setSelected=function(t){if(t){var n=this.parseColour_(e.ToolboxCategory.defaultBackgroundColour);this.rowDiv_.style.backgroundColor=this.colour_||n,e.utils.dom.addClass(this.rowDiv_,this.cssConfig_.selected)}else this.rowDiv_.style.backgroundColor="",e.utils.dom.removeClass(this.rowDiv_,this.cssConfig_.selected);e.utils.aria.setState(this.htmlDiv_,e.utils.aria.State.SELECTED,t)},e.ToolboxCategory.prototype.setDisabled=function(t){this.isDisabled_=t,this.getDiv().setAttribute("disabled",t),t?this.getDiv().setAttribute("disabled","true"):this.getDiv().removeAttribute("disabled")},e.ToolboxCategory.prototype.getName=function(){return this.name_},e.ToolboxCategory.prototype.getParent=function(){return this.parent_},e.ToolboxCategory.prototype.getDiv=function(){return this.htmlDiv_},e.ToolboxCategory.prototype.getContents=function(){return this.flyoutItems_},e.ToolboxCategory.prototype.updateFlyoutContents=function(t){this.flyoutItems_=[],"string"==typeof t?this.toolboxItemDef_.custom=t:(delete this.toolboxItemDef_.custom,this.toolboxItemDef_.contents=e.utils.toolbox.convertFlyoutDefToJsonArray(t)),this.parseContents_(this.toolboxItemDef_)},e.ToolboxCategory.prototype.dispose=function(){e.utils.dom.removeNode(this.htmlDiv_)},e.Css.register([".blocklyTreeRow:not(.blocklyTreeSelected):hover {","background-color: rgba(255, 255, 255, 0.2);","}",'.blocklyToolboxDiv[layout="h"] .blocklyToolboxCategory {',"margin: 1px 5px 1px 0;","}",'.blocklyToolboxDiv[dir="RTL"][layout="h"] .blocklyToolboxCategory {',"margin: 1px 0 1px 5px;","}",".blocklyTreeRow {","height: 22px;","line-height: 22px;","margin-bottom: 3px;","padding-right: 8px;","white-space: nowrap;","}",'.blocklyToolboxDiv[dir="RTL"] .blocklyTreeRow {',"margin-left: 8px;","padding-right: 0px","}",".blocklyTreeIcon {","background-image: url(<<<PATH>>>/sprites.png);","height: 16px;","vertical-align: middle;","visibility: hidden;","width: 16px;","}",".blocklyTreeIconClosed {","background-position: -32px -1px;","}",'.blocklyToolboxDiv[dir="RTL"] .blocklyTreeIconClosed {',"background-position: 0 -1px;","}",".blocklyTreeSelected>.blocklyTreeIconClosed {","background-position: -32px -17px;","}",'.blocklyToolboxDiv[dir="RTL"] .blocklyTreeSelected>.blocklyTreeIconClosed {',"background-position: 0 -17px;","}",".blocklyTreeIconOpen {","background-position: -16px -1px;","}",".blocklyTreeSelected>.blocklyTreeIconOpen {","background-position: -16px -17px;","}",".blocklyTreeLabel {","cursor: default;","font: 16px sans-serif;","padding: 0 3px;","vertical-align: middle;","}",".blocklyToolboxDelete .blocklyTreeLabel {",'cursor: url("<<<PATH>>>/handdelete.cur"), auto;',"}",".blocklyTreeSelected .blocklyTreeLabel {","color: #fff;","}"]),e.registry.register(e.registry.Type.TOOLBOX_ITEM,e.ToolboxCategory.registrationName,e.ToolboxCategory),e.ToolboxSeparator=function(t,n){e.ToolboxSeparator.superClass_.constructor.call(this,t,n),this.cssConfig_={container:"blocklyTreeSeparator"},e.utils.object.mixin(this.cssConfig_,t.cssconfig||t.cssConfig)},e.utils.object.inherits(e.ToolboxSeparator,e.ToolboxItem),e.ToolboxSeparator.registrationName="sep",e.ToolboxSeparator.prototype.init=function(){this.createDom_()},e.ToolboxSeparator.prototype.createDom_=function(){var t=document.createElement("div");return e.utils.dom.addClass(t,this.cssConfig_.container),this.htmlDiv_=t},e.ToolboxSeparator.prototype.getDiv=function(){return this.htmlDiv_},e.ToolboxSeparator.prototype.dispose=function(){e.utils.dom.removeNode(this.htmlDiv_)},e.Css.register('.blocklyTreeSeparator {,border-bottom: solid #e5e5e5 1px;,height: 0;,margin: 5px 0;,},.blocklyToolboxDiv[layout="h"] .blocklyTreeSeparator {,border-right: solid #e5e5e5 1px;,border-bottom: none;,height: auto;,margin: 0 5px 0 5px;,padding: 5px 0;,width: 0;,}'.split(",")),e.registry.register(e.registry.Type.TOOLBOX_ITEM,e.ToolboxSeparator.registrationName,e.ToolboxSeparator),e.CollapsibleToolboxCategory=function(t,n,r){this.subcategoriesDiv_=null,this.expanded_=!1,this.toolboxItems_=[],e.CollapsibleToolboxCategory.superClass_.constructor.call(this,t,n,r)},e.utils.object.inherits(e.CollapsibleToolboxCategory,e.ToolboxCategory),e.CollapsibleToolboxCategory.registrationName="collapsibleCategory",e.CollapsibleToolboxCategory.prototype.makeDefaultCssConfig_=function(){var t=e.CollapsibleToolboxCategory.superClass_.makeDefaultCssConfig_.call(this);return t.contents="blocklyToolboxContents",t},e.CollapsibleToolboxCategory.prototype.parseContents_=function(t){var n=t.contents,r=!0;if(t.custom)this.flyoutItems_=t.custom;else if(n){t=0;for(var s;s=n[t];t++)!e.registry.hasItem(e.registry.Type.TOOLBOX_ITEM,s.kind)||s.kind.toLowerCase()==e.ToolboxSeparator.registrationName&&r?(this.flyoutItems_.push(s),r=!0):(this.createToolboxItem_(s),r=!1)}},e.CollapsibleToolboxCategory.prototype.createToolboxItem_=function(t){var n=t.kind;"CATEGORY"==n.toUpperCase()&&e.utils.toolbox.isCategoryCollapsible(t)&&(n=e.CollapsibleToolboxCategory.registrationName),t=new(e.registry.getClass(e.registry.Type.TOOLBOX_ITEM,n))(t,this.parentToolbox_,this),this.toolboxItems_.push(t)},e.CollapsibleToolboxCategory.prototype.init=function(){e.CollapsibleToolboxCategory.superClass_.init.call(this),this.setExpanded("true"==this.toolboxItemDef_.expanded||this.toolboxItemDef_.expanded)},e.CollapsibleToolboxCategory.prototype.createDom_=function(){e.CollapsibleToolboxCategory.superClass_.createDom_.call(this);var t=this.getChildToolboxItems();return this.subcategoriesDiv_=this.createSubCategoriesDom_(t),e.utils.aria.setRole(this.subcategoriesDiv_,e.utils.aria.Role.GROUP),this.htmlDiv_.appendChild(this.subcategoriesDiv_),this.htmlDiv_},e.CollapsibleToolboxCategory.prototype.createIconDom_=function(){var t=document.createElement("span");return this.parentToolbox_.isHorizontal()||(e.utils.dom.addClass(t,this.cssConfig_.icon),t.style.visibility="visible"),t.style.display="inline-block",t},e.CollapsibleToolboxCategory.prototype.createSubCategoriesDom_=function(t){var n=document.createElement("div");e.utils.dom.addClass(n,this.cssConfig_.contents);for(var r=0;r<t.length;r++){var s=t[r];s.init();var u=s.getDiv();n.appendChild(u),s.getClickTarget&&s.getClickTarget().setAttribute("id",s.getId())}return n},e.CollapsibleToolboxCategory.prototype.setExpanded=function(t){this.expanded_!=t&&((this.expanded_=t)?(this.subcategoriesDiv_.style.display="block",this.openIcon_(this.iconDom_)):(this.subcategoriesDiv_.style.display="none",this.closeIcon_(this.iconDom_)),e.utils.aria.setState(this.htmlDiv_,e.utils.aria.State.EXPANDED,t),this.parentToolbox_.handleToolboxItemResize())},e.CollapsibleToolboxCategory.prototype.setVisible_=function(t){this.htmlDiv_.style.display=t?"block":"none";for(var r,n=0;r=this.getChildToolboxItems()[n];n++)r.setVisible_(t);this.isHidden_=!t,this.parentToolbox_.getSelectedItem()==this&&this.parentToolbox_.clearSelection()},e.CollapsibleToolboxCategory.prototype.isExpanded=function(){return this.expanded_},e.CollapsibleToolboxCategory.prototype.isCollapsible=function(){return!0},e.CollapsibleToolboxCategory.prototype.onClick=function(t){this.toggleExpanded()},e.CollapsibleToolboxCategory.prototype.toggleExpanded=function(){this.setExpanded(!this.expanded_)},e.CollapsibleToolboxCategory.prototype.getDiv=function(){return this.htmlDiv_},e.CollapsibleToolboxCategory.prototype.getChildToolboxItems=function(){return this.toolboxItems_},e.registry.register(e.registry.Type.TOOLBOX_ITEM,e.CollapsibleToolboxCategory.registrationName,e.CollapsibleToolboxCategory),e.Events.ToolboxItemSelect=function(t,n,r){e.Events.ToolboxItemSelect.superClass_.constructor.call(this,r),this.oldItem=t,this.newItem=n},e.utils.object.inherits(e.Events.ToolboxItemSelect,e.Events.UiBase),e.Events.ToolboxItemSelect.prototype.type=e.Events.TOOLBOX_ITEM_SELECT,e.Events.ToolboxItemSelect.prototype.toJson=function(){var t=e.Events.ToolboxItemSelect.superClass_.toJson.call(this);return t.oldItem=this.oldItem,t.newItem=this.newItem,t},e.Events.ToolboxItemSelect.prototype.fromJson=function(t){e.Events.ToolboxItemSelect.superClass_.fromJson.call(this,t),this.oldItem=t.oldItem,this.newItem=t.newItem},e.registry.register(e.registry.Type.EVENT,e.Events.TOOLBOX_ITEM_SELECT,e.Events.ToolboxItemSelect),e.IAutoHideable=function(){},e.IStyleable=function(){},e.IToolbox=function(){},e.Toolbox=function(t){e.Toolbox.superClass_.constructor.call(this),this.workspace_=t,this.id="toolbox",this.toolboxDef_=t.options.languageTree||{contents:[]},this.horizontalLayout_=t.options.horizontalLayout,this.contentsDiv_=this.HtmlDiv=null,this.isVisible_=!1,this.contents_=[],this.height_=this.width_=0,this.RTL=t.options.RTL,this.flyout_=null,this.contentMap_=Object.create(null),this.toolboxPosition=t.options.toolboxPosition,this.previouslySelectedItem_=this.selectedItem_=null,this.boundEvents_=[]},e.utils.object.inherits(e.Toolbox,e.DeleteArea),e.Toolbox.prototype.onShortcut=function(t){return!1},e.Toolbox.prototype.init=function(){var t=this.workspace_,n=t.getParentSvg();this.flyout_=this.createFlyout_(),this.HtmlDiv=this.createDom_(this.workspace_),e.utils.dom.insertAfter(this.flyout_.createDom("svg"),n),this.setVisible(!0),this.flyout_.init(t),this.render(this.toolboxDef_),(t=t.getThemeManager()).subscribe(this.HtmlDiv,"toolboxBackgroundColour","background-color"),t.subscribe(this.HtmlDiv,"toolboxForegroundColour","color"),this.workspace_.getComponentManager().addComponent({component:this,weight:1,capabilities:[e.ComponentManager.Capability.AUTOHIDEABLE,e.ComponentManager.Capability.DELETE_AREA,e.ComponentManager.Capability.DRAG_TARGET]})},e.Toolbox.prototype.createDom_=function(t){t=t.getParentSvg();var n=this.createContainer_();return this.contentsDiv_=this.createContentsContainer_(),this.contentsDiv_.tabIndex=0,e.utils.aria.setRole(this.contentsDiv_,e.utils.aria.Role.TREE),n.appendChild(this.contentsDiv_),t.parentNode.insertBefore(n,t),this.attachEvents_(n,this.contentsDiv_),n},e.Toolbox.prototype.createContainer_=function(){var t=document.createElement("div");return t.setAttribute("layout",this.isHorizontal()?"h":"v"),e.utils.dom.addClass(t,"blocklyToolboxDiv"),e.utils.dom.addClass(t,"blocklyNonSelectable"),t.setAttribute("dir",this.RTL?"RTL":"LTR"),t},e.Toolbox.prototype.createContentsContainer_=function(){var t=document.createElement("div");return e.utils.dom.addClass(t,"blocklyToolboxContents"),this.isHorizontal()&&(t.style.flexDirection="row"),t},e.Toolbox.prototype.attachEvents_=function(t,n){t=e.browserEvents.conditionalBind(t,"click",this,this.onClick_,!1,!0),this.boundEvents_.push(t),n=e.browserEvents.conditionalBind(n,"keydown",this,this.onKeyDown_,!1,!0),this.boundEvents_.push(n)},e.Toolbox.prototype.onClick_=function(t){if(e.utils.isRightButton(t)||t.target==this.HtmlDiv)e.hideChaff(!1);else{var n=t.target.getAttribute("id");n&&(n=this.getToolboxItemById(n)).isSelectable()&&(this.setSelectedItem(n),n.onClick(t)),e.hideChaff(!0)}e.Touch.clearTouchIdentifier()},e.Toolbox.prototype.onKeyDown_=function(t){var n=!1;switch(t.keyCode){case e.utils.KeyCodes.DOWN:n=this.selectNext_();break;case e.utils.KeyCodes.UP:n=this.selectPrevious_();break;case e.utils.KeyCodes.LEFT:n=this.selectParent_();break;case e.utils.KeyCodes.RIGHT:n=this.selectChild_();break;case e.utils.KeyCodes.ENTER:case e.utils.KeyCodes.SPACE:this.selectedItem_&&this.selectedItem_.isCollapsible()&&(this.selectedItem_.toggleExpanded(),n=!0);break;default:n=!1}!n&&this.selectedItem_&&this.selectedItem_.onKeyDown&&(n=this.selectedItem_.onKeyDown(t)),n&&t.preventDefault()},e.Toolbox.prototype.createFlyout_=function(){var t=this.workspace_,n=new e.Options({parentWorkspace:t,rtl:t.RTL,oneBasedIndex:t.options.oneBasedIndex,horizontalLayout:t.horizontalLayout,renderer:t.options.renderer,rendererOverrides:t.options.rendererOverrides,move:{scrollbars:!0}});return n.toolboxPosition=t.options.toolboxPosition,new(e.registry.getClassFromOptions(t.horizontalLayout?e.registry.Type.FLYOUTS_HORIZONTAL_TOOLBOX:e.registry.Type.FLYOUTS_VERTICAL_TOOLBOX,t.options,!0))(n)},e.Toolbox.prototype.render=function(t){this.toolboxDef_=t;for(var n=0;n<this.contents_.length;n++){var r=this.contents_[n];r&&r.dispose()}this.contents_=[],this.contentMap_=Object.create(null),this.renderContents_(t.contents),this.position(),this.handleToolboxItemResize()},e.Toolbox.prototype.renderContents_=function(t){for(var s,n=document.createDocumentFragment(),r=0;s=t[r];r++)this.createToolboxItem_(s,n);this.contentsDiv_.appendChild(n)},e.Toolbox.prototype.createToolboxItem_=function(t,n){var r=t.kind;"CATEGORY"==r.toUpperCase()&&e.utils.toolbox.isCategoryCollapsible(t)&&(r=e.CollapsibleToolboxCategory.registrationName),(r=e.registry.getClass(e.registry.Type.TOOLBOX_ITEM,r.toLowerCase()))&&(t=new r(t,this),this.addToolboxItem_(t),t.init(),(r=t.getDiv())&&n.appendChild(r),t.getClickTarget&&t.getClickTarget().setAttribute("id",t.getId()))},e.Toolbox.prototype.addToolboxItem_=function(t){if(this.contents_.push(t),this.contentMap_[t.getId()]=t,t.isCollapsible())for(var r,n=0;r=t.getChildToolboxItems()[n];n++)this.addToolboxItem_(r)},e.Toolbox.prototype.getToolboxItems=function(){return this.contents_},e.Toolbox.prototype.addStyle=function(t){e.utils.dom.addClass(this.HtmlDiv,t)},e.Toolbox.prototype.removeStyle=function(t){e.utils.dom.removeClass(this.HtmlDiv,t)},e.Toolbox.prototype.getClientRect=function(){if(!this.HtmlDiv||!this.isVisible_)return null;var t=this.HtmlDiv.getBoundingClientRect(),n=t.top,r=n+t.height,s=t.left;return t=s+t.width,this.toolboxPosition==e.utils.toolbox.Position.TOP?new e.utils.Rect(-1e7,r,-1e7,1e7):this.toolboxPosition==e.utils.toolbox.Position.BOTTOM?new e.utils.Rect(n,1e7,-1e7,1e7):this.toolboxPosition==e.utils.toolbox.Position.LEFT?new e.utils.Rect(-1e7,1e7,-1e7,t):new e.utils.Rect(-1e7,1e7,s,1e7)},e.Toolbox.prototype.wouldDelete=function(t,n){return this.updateWouldDelete_(t instanceof e.BlockSvg?!t.getParent()&&t.isDeletable():t.isDeletable()),this.wouldDelete_},e.Toolbox.prototype.onDragEnter=function(t){this.updateCursorDeleteStyle_(!0)},e.Toolbox.prototype.onDragExit=function(t){this.updateCursorDeleteStyle_(!1)},e.Toolbox.prototype.onDrop=function(t){this.updateCursorDeleteStyle_(!1)},e.Toolbox.prototype.updateWouldDelete_=function(t){t!==this.wouldDelete_&&(this.updateCursorDeleteStyle_(!1),this.wouldDelete_=t,this.updateCursorDeleteStyle_(!0))},e.Toolbox.prototype.updateCursorDeleteStyle_=function(t){var n=this.wouldDelete_?"blocklyToolboxDelete":"blocklyToolboxGrab";t?this.addStyle(n):this.removeStyle(n)},e.Toolbox.prototype.getToolboxItemById=function(t){return this.contentMap_[t]||null},e.Toolbox.prototype.getWidth=function(){return this.width_},e.Toolbox.prototype.getHeight=function(){return this.height_},e.Toolbox.prototype.getFlyout=function(){return this.flyout_},e.Toolbox.prototype.getWorkspace=function(){return this.workspace_},e.Toolbox.prototype.getSelectedItem=function(){return this.selectedItem_},e.Toolbox.prototype.getPreviouslySelectedItem=function(){return this.previouslySelectedItem_},e.Toolbox.prototype.isHorizontal=function(){return this.horizontalLayout_},e.Toolbox.prototype.position=function(){var t=this.workspace_.getMetrics(),n=this.HtmlDiv;n&&(this.horizontalLayout_?(n.style.left="0",n.style.height="auto",n.style.width="100%",this.height_=n.offsetHeight,this.width_=t.viewWidth,this.toolboxPosition==e.utils.toolbox.Position.TOP?n.style.top="0":n.style.bottom="0"):(this.toolboxPosition==e.utils.toolbox.Position.RIGHT?n.style.right="0":n.style.left="0",n.style.height="100%",this.width_=n.offsetWidth,this.height_=t.viewHeight),this.flyout_.position())},e.Toolbox.prototype.handleToolboxItemResize=function(){var t=this.workspace_,n=this.HtmlDiv.getBoundingClientRect();t.translate(this.toolboxPosition==e.utils.toolbox.Position.LEFT?t.scrollX+n.width:t.scrollX,this.toolboxPosition==e.utils.toolbox.Position.TOP?t.scrollY+n.height:t.scrollY),e.svgResize(t)},e.Toolbox.prototype.clearSelection=function(){this.setSelectedItem(null)},e.Toolbox.prototype.refreshTheme=function(){for(var t=0;t<this.contents_.length;t++){var n=this.contents_[t];n.refreshTheme&&n.refreshTheme()}},e.Toolbox.prototype.refreshSelection=function(){this.selectedItem_&&this.selectedItem_.isSelectable()&&this.selectedItem_.getContents().length&&this.flyout_.show(this.selectedItem_.getContents())},e.Toolbox.prototype.setVisible=function(t){this.isVisible_!==t&&(this.HtmlDiv.style.display=t?"block":"none",this.isVisible_=t,this.workspace_.recordDragTargets())},e.Toolbox.prototype.autoHide=function(t){!t&&this.flyout_&&this.flyout_.autoClose&&this.clearSelection()},e.Toolbox.prototype.setSelectedItem=function(t){var n=this.selectedItem_;!t&&!n||t&&!t.isSelectable()||(this.shouldDeselectItem_(n,t)&&null!=n&&this.deselectItem_(n),this.shouldSelectItem_(n,t)&&null!=t&&this.selectItem_(n,t),this.updateFlyout_(n,t),this.fireSelectEvent_(n,t))},e.Toolbox.prototype.shouldDeselectItem_=function(t,n){return null!=t&&(!t.isCollapsible()||t!=n)},e.Toolbox.prototype.shouldSelectItem_=function(t,n){return null!=n&&n!=t},e.Toolbox.prototype.deselectItem_=function(t){this.selectedItem_=null,this.previouslySelectedItem_=t,t.setSelected(!1),e.utils.aria.setState(this.contentsDiv_,e.utils.aria.State.ACTIVEDESCENDANT,"")},e.Toolbox.prototype.selectItem_=function(t,n){this.selectedItem_=n,this.previouslySelectedItem_=t,n.setSelected(!0),e.utils.aria.setState(this.contentsDiv_,e.utils.aria.State.ACTIVEDESCENDANT,n.getId())},e.Toolbox.prototype.selectItemByPosition=function(t){-1<t&&t<this.contents_.length&&(t=this.contents_[t]).isSelectable()&&this.setSelectedItem(t)},e.Toolbox.prototype.updateFlyout_=function(t,n){(t!=n||n.isCollapsible())&&n&&n.getContents().length?(this.flyout_.show(n.getContents()),this.flyout_.scrollToStart()):this.flyout_.hide()},e.Toolbox.prototype.fireSelectEvent_=function(t,n){var r=t&&t.getName(),s=n&&n.getName();t==n&&(s=null),t=new(e.Events.get(e.Events.TOOLBOX_ITEM_SELECT))(r,s,this.workspace_.id),e.Events.fire(t)},e.Toolbox.prototype.selectParent_=function(){return!(!this.selectedItem_||(this.selectedItem_.isCollapsible()&&this.selectedItem_.isExpanded()?(this.selectedItem_.setExpanded(!1),0):!this.selectedItem_.getParent()||!this.selectedItem_.getParent().isSelectable()||(this.setSelectedItem(this.selectedItem_.getParent()),0)))},e.Toolbox.prototype.selectChild_=function(){if(!this.selectedItem_||!this.selectedItem_.isCollapsible())return!1;var t=this.selectedItem_;return t.isExpanded()?this.selectNext_():t.setExpanded(!0),!0},e.Toolbox.prototype.selectNext_=function(){if(!this.selectedItem_)return!1;var t=this.contents_.indexOf(this.selectedItem_)+1;if(-1<t&&t<this.contents_.length){for(var n=this.contents_[t];n&&!n.isSelectable();)n=this.contents_[++t];if(n&&n.isSelectable())return this.setSelectedItem(n),!0}return!1},e.Toolbox.prototype.selectPrevious_=function(){if(!this.selectedItem_)return!1;var t=this.contents_.indexOf(this.selectedItem_)-1;if(-1<t&&t<this.contents_.length){for(var n=this.contents_[t];n&&!n.isSelectable();)n=this.contents_[--t];if(n&&n.isSelectable())return this.setSelectedItem(n),!0}return!1},e.Toolbox.prototype.dispose=function(){this.workspace_.getComponentManager().removeComponent("toolbox"),this.flyout_.dispose();for(var t=0;t<this.contents_.length;t++)this.contents_[t].dispose();for(t=0;t<this.boundEvents_.length;t++)e.browserEvents.unbind(this.boundEvents_[t]);this.boundEvents_=[],this.contents_=[],this.workspace_.getThemeManager().unsubscribe(this.HtmlDiv),e.utils.dom.removeNode(this.HtmlDiv)},e.Css.register([".blocklyToolboxDelete {",'cursor: url("<<<PATH>>>/handdelete.cur"), auto;',"}",".blocklyToolboxGrab {",'cursor: url("<<<PATH>>>/handclosed.cur"), auto;',"cursor: grabbing;","cursor: -webkit-grabbing;","}",".blocklyToolboxDiv {","background-color: #ddd;","overflow-x: visible;","overflow-y: auto;","padding: 4px 0 4px 0;","position: absolute;","z-index: 70;","-webkit-tap-highlight-color: transparent;","}",".blocklyToolboxContents {","display: flex;","flex-wrap: wrap;","flex-direction: column;","}",".blocklyToolboxContents:focus {","outline: none;","}"]),e.registry.register(e.registry.Type.TOOLBOX,e.registry.DEFAULT,e.Toolbox),e.Events.TrashcanOpen=function(t,n){e.Events.TrashcanOpen.superClass_.constructor.call(this,n),this.isOpen=t},e.utils.object.inherits(e.Events.TrashcanOpen,e.Events.UiBase),e.Events.TrashcanOpen.prototype.type=e.Events.TRASHCAN_OPEN,e.Events.TrashcanOpen.prototype.toJson=function(){var t=e.Events.TrashcanOpen.superClass_.toJson.call(this);return t.isOpen=this.isOpen,t},e.Events.TrashcanOpen.prototype.fromJson=function(t){e.Events.TrashcanOpen.superClass_.fromJson.call(this,t),this.isOpen=t.isOpen},e.registry.register(e.registry.Type.EVENT,e.Events.TRASHCAN_OPEN,e.Events.TrashcanOpen),e.IPositionable=function(){},e.uiPosition={},e.uiPosition.verticalPosition={TOP:0,BOTTOM:1},e.uiPosition.horizontalPosition={LEFT:0,RIGHT:1},e.uiPosition.bumpDirection={UP:0,DOWN:1},e.uiPosition.getStartPositionRect=function(t,n,r,s,u,y){var x=y.scrollbar&&y.scrollbar.canScrollVertically();return t.horizontal===e.uiPosition.horizontalPosition.LEFT?(r=u.absoluteMetrics.left+r,x&&y.RTL&&(r+=e.Scrollbar.scrollbarThickness)):(r=u.absoluteMetrics.left+u.viewMetrics.width-n.width-r,x&&!y.RTL&&(r-=e.Scrollbar.scrollbarThickness)),t.vertical===e.uiPosition.verticalPosition.TOP?t=u.absoluteMetrics.top+s:(t=u.absoluteMetrics.top+u.viewMetrics.height-n.height-s,y.scrollbar&&y.scrollbar.canScrollHorizontally()&&(t-=e.Scrollbar.scrollbarThickness)),new e.utils.Rect(t,t+n.height,r,r+n.width)},e.uiPosition.getCornerOppositeToolbox=function(t,n){return{horizontal:n.toolboxMetrics.position===e.utils.toolbox.Position.LEFT||t.horizontalLayout&&!t.RTL?e.uiPosition.horizontalPosition.RIGHT:e.uiPosition.horizontalPosition.LEFT,vertical:n.toolboxMetrics.position===e.utils.toolbox.Position.BOTTOM?e.uiPosition.verticalPosition.TOP:e.uiPosition.verticalPosition.BOTTOM}},e.uiPosition.bumpPositionRect=function(t,n,r,s){for(var Q,u=t.left,y=t.right-t.left,x=t.bottom-t.top,B=0;Q=s[B];B++)t.intersects(Q)&&(t=new e.utils.Rect(t=r===e.uiPosition.bumpDirection.UP?Q.top-x-n:Q.bottom+n,t+x,u,u+y),B=-1);return t},e.Trashcan=function(t){e.Trashcan.superClass_.constructor.call(this),this.workspace_=t,this.id="trashcan",this.contents_=[],this.flyout=null,0>=this.workspace_.options.maxTrashcanContents||(t=new e.Options({scrollbars:!0,parentWorkspace:this.workspace_,rtl:this.workspace_.RTL,oneBasedIndex:this.workspace_.options.oneBasedIndex,renderer:this.workspace_.options.renderer,rendererOverrides:this.workspace_.options.rendererOverrides,move:{scrollbars:!0}}),this.workspace_.horizontalLayout?(t.toolboxPosition=this.workspace_.toolboxPosition==e.utils.toolbox.Position.TOP?e.utils.toolbox.Position.BOTTOM:e.utils.toolbox.Position.TOP,this.flyout=new(e.registry.getClassFromOptions(e.registry.Type.FLYOUTS_HORIZONTAL_TOOLBOX,this.workspace_.options,!0))(t)):(t.toolboxPosition=this.workspace_.toolboxPosition==e.utils.toolbox.Position.RIGHT?e.utils.toolbox.Position.LEFT:e.utils.toolbox.Position.RIGHT,this.flyout=new(e.registry.getClassFromOptions(e.registry.Type.FLYOUTS_VERTICAL_TOOLBOX,this.workspace_.options,!0))(t)),this.workspace_.addChangeListener(this.onDelete_.bind(this)))},e.utils.object.inherits(e.Trashcan,e.DeleteArea),e.Trashcan.prototype.WIDTH_=47,e.Trashcan.prototype.BODY_HEIGHT_=44,e.Trashcan.prototype.LID_HEIGHT_=16,e.Trashcan.prototype.MARGIN_VERTICAL_=20,e.Trashcan.prototype.MARGIN_HORIZONTAL_=20,e.Trashcan.prototype.MARGIN_HOTSPOT_=10,e.Trashcan.prototype.SPRITE_LEFT_=0,e.Trashcan.prototype.SPRITE_TOP_=32,e.Trashcan.prototype.HAS_BLOCKS_LID_ANGLE_=.1,e.Trashcan.ANIMATION_LENGTH_=80,e.Trashcan.ANIMATION_FRAMES_=4,e.Trashcan.OPACITY_MIN_=.4,e.Trashcan.OPACITY_MAX_=.8,e.Trashcan.MAX_LID_ANGLE_=45,e.Trashcan.prototype.isLidOpen=!1,e.Trashcan.prototype.minOpenness_=0,e.Trashcan.prototype.svgGroup_=null,e.Trashcan.prototype.svgLid_=null,e.Trashcan.prototype.lidTask_=0,e.Trashcan.prototype.lidOpen_=0,e.Trashcan.prototype.left_=0,e.Trashcan.prototype.top_=0,e.Trashcan.prototype.initialized_=!1,e.Trashcan.prototype.createDom=function(){this.svgGroup_=e.utils.dom.createSvgElement(e.utils.Svg.G,{class:"blocklyTrash"},null);var t=String(Math.random()).substring(2),n=e.utils.dom.createSvgElement(e.utils.Svg.CLIPPATH,{id:"blocklyTrashBodyClipPath"+t},this.svgGroup_);e.utils.dom.createSvgElement(e.utils.Svg.RECT,{width:this.WIDTH_,height:this.BODY_HEIGHT_,y:this.LID_HEIGHT_},n);var r=e.utils.dom.createSvgElement(e.utils.Svg.IMAGE,{width:e.SPRITE.width,x:-this.SPRITE_LEFT_,height:e.SPRITE.height,y:-this.SPRITE_TOP_,"clip-path":"url(#blocklyTrashBodyClipPath"+t+")"},this.svgGroup_);return r.setAttributeNS(e.utils.dom.XLINK_NS,"xlink:href",this.workspace_.options.pathToMedia+e.SPRITE.url),n=e.utils.dom.createSvgElement(e.utils.Svg.CLIPPATH,{id:"blocklyTrashLidClipPath"+t},this.svgGroup_),e.utils.dom.createSvgElement(e.utils.Svg.RECT,{width:this.WIDTH_,height:this.LID_HEIGHT_},n),this.svgLid_=e.utils.dom.createSvgElement(e.utils.Svg.IMAGE,{width:e.SPRITE.width,x:-this.SPRITE_LEFT_,height:e.SPRITE.height,y:-this.SPRITE_TOP_,"clip-path":"url(#blocklyTrashLidClipPath"+t+")"},this.svgGroup_),this.svgLid_.setAttributeNS(e.utils.dom.XLINK_NS,"xlink:href",this.workspace_.options.pathToMedia+e.SPRITE.url),e.browserEvents.bind(this.svgGroup_,"mousedown",this,this.blockMouseDownWhenOpenable_),e.browserEvents.bind(this.svgGroup_,"mouseup",this,this.click),e.browserEvents.bind(r,"mouseover",this,this.mouseOver_),e.browserEvents.bind(r,"mouseout",this,this.mouseOut_),this.animateLid_(),this.svgGroup_},e.Trashcan.prototype.init=function(){0<this.workspace_.options.maxTrashcanContents&&(e.utils.dom.insertAfter(this.flyout.createDom(e.utils.Svg.SVG),this.workspace_.getParentSvg()),this.flyout.init(this.workspace_)),this.workspace_.getComponentManager().addComponent({component:this,weight:1,capabilities:[e.ComponentManager.Capability.AUTOHIDEABLE,e.ComponentManager.Capability.DELETE_AREA,e.ComponentManager.Capability.DRAG_TARGET,e.ComponentManager.Capability.POSITIONABLE]}),this.initialized_=!0,this.setLidOpen(!1)},e.Trashcan.prototype.dispose=function(){this.workspace_.getComponentManager().removeComponent("trashcan"),this.svgGroup_&&(e.utils.dom.removeNode(this.svgGroup_),this.svgGroup_=null),this.workspace_=this.svgLid_=null,clearTimeout(this.lidTask_)},e.Trashcan.prototype.hasContents_=function(){return!!this.contents_.length},e.Trashcan.prototype.contentsIsOpen=function(){return this.flyout.isVisible()},e.Trashcan.prototype.openFlyout=function(){if(!this.contentsIsOpen()){var t=this.contents_.map(e.Xml.textToDom);this.flyout.show(t),this.fireUiEvent_(!0)}},e.Trashcan.prototype.closeFlyout=function(){this.contentsIsOpen()&&(this.flyout.hide(),this.fireUiEvent_(!1))},e.Trashcan.prototype.autoHide=function(t){!t&&this.flyout&&this.closeFlyout()},e.Trashcan.prototype.emptyContents=function(){this.hasContents_()&&(this.contents_.length=0,this.setMinOpenness_(0),this.closeFlyout())},e.Trashcan.prototype.position=function(t,n){if(this.initialized_){var r=e.uiPosition.getCornerOppositeToolbox(this.workspace_,t);t=e.uiPosition.getStartPositionRect(r,new e.utils.Size(this.WIDTH_,this.BODY_HEIGHT_+this.LID_HEIGHT_),this.MARGIN_HORIZONTAL_,this.MARGIN_VERTICAL_,t,this.workspace_),n=e.uiPosition.bumpPositionRect(t,this.MARGIN_VERTICAL_,r.vertical===e.uiPosition.verticalPosition.TOP?e.uiPosition.bumpDirection.DOWN:e.uiPosition.bumpDirection.UP,n),this.top_=n.top,this.left_=n.left,this.svgGroup_.setAttribute("transform","translate("+this.left_+","+this.top_+")")}},e.Trashcan.prototype.getBoundingRectangle=function(){return new e.utils.Rect(this.top_,this.top_+this.BODY_HEIGHT_+this.LID_HEIGHT_,this.left_,this.left_+this.WIDTH_)},e.Trashcan.prototype.getClientRect=function(){if(!this.svgGroup_)return null;var t=this.svgGroup_.getBoundingClientRect(),n=t.top+this.SPRITE_TOP_-this.MARGIN_HOTSPOT_;return new e.utils.Rect(n,n+this.LID_HEIGHT_+this.BODY_HEIGHT_+2*this.MARGIN_HOTSPOT_,t=t.left+this.SPRITE_LEFT_-this.MARGIN_HOTSPOT_,t+this.WIDTH_+2*this.MARGIN_HOTSPOT_)},e.Trashcan.prototype.onDragOver=function(t){this.setLidOpen(this.wouldDelete_)},e.Trashcan.prototype.onDragExit=function(t){this.setLidOpen(!1)},e.Trashcan.prototype.onDrop=function(t){setTimeout(this.setLidOpen.bind(this,!1),100)},e.Trashcan.prototype.setLidOpen=function(t){this.isLidOpen!=t&&(clearTimeout(this.lidTask_),this.isLidOpen=t,this.animateLid_())},e.Trashcan.prototype.animateLid_=function(){var t=e.Trashcan.ANIMATION_FRAMES_,n=1/(t+1);this.lidOpen_+=this.isLidOpen?n:-n,this.lidOpen_=Math.min(Math.max(this.lidOpen_,this.minOpenness_),1),this.setLidAngle_(this.lidOpen_*e.Trashcan.MAX_LID_ANGLE_),this.svgGroup_.style.opacity=(n=e.Trashcan.OPACITY_MIN_)+this.lidOpen_*(e.Trashcan.OPACITY_MAX_-n),this.lidOpen_>this.minOpenness_&&1>this.lidOpen_&&(this.lidTask_=setTimeout(this.animateLid_.bind(this),e.Trashcan.ANIMATION_LENGTH_/t))},e.Trashcan.prototype.setLidAngle_=function(t){var n=this.workspace_.toolboxPosition==e.utils.toolbox.Position.RIGHT||this.workspace_.horizontalLayout&&this.workspace_.RTL;this.svgLid_.setAttribute("transform","rotate("+(n?-t:t)+","+(n?4:this.WIDTH_-4)+","+(this.LID_HEIGHT_-2)+")")},e.Trashcan.prototype.setMinOpenness_=function(t){this.minOpenness_=t,this.isLidOpen||this.setLidAngle_(t*e.Trashcan.MAX_LID_ANGLE_)},e.Trashcan.prototype.closeLid=function(){this.setLidOpen(!1)},e.Trashcan.prototype.click=function(){this.hasContents_()&&this.openFlyout()},e.Trashcan.prototype.fireUiEvent_=function(t){t=new(e.Events.get(e.Events.TRASHCAN_OPEN))(t,this.workspace_.id),e.Events.fire(t)},e.Trashcan.prototype.blockMouseDownWhenOpenable_=function(t){!this.contentsIsOpen()&&this.hasContents_()&&t.stopPropagation()},e.Trashcan.prototype.mouseOver_=function(){this.hasContents_()&&this.setLidOpen(!0)},e.Trashcan.prototype.mouseOut_=function(){this.setLidOpen(!1)},e.Trashcan.prototype.onDelete_=function(t){if(!(0>=this.workspace_.options.maxTrashcanContents)&&t.type==e.Events.BLOCK_DELETE&&t.oldXml.tagName&&"shadow"!=t.oldXml.tagName.toLowerCase()&&(t=this.cleanBlockXML_(t.oldXml),-1==this.contents_.indexOf(t))){for(this.contents_.unshift(t);this.contents_.length>this.workspace_.options.maxTrashcanContents;)this.contents_.pop();this.setMinOpenness_(this.HAS_BLOCKS_LID_ANGLE_)}},e.Trashcan.prototype.cleanBlockXML_=function(t){for(var n=t=t.cloneNode(!0);n;){n.removeAttribute&&(n.removeAttribute("x"),n.removeAttribute("y"),n.removeAttribute("id"),n.removeAttribute("disabled"),"comment"==n.nodeName&&(n.removeAttribute("h"),n.removeAttribute("w"),n.removeAttribute("pinned")));var r=n.firstChild||n.nextSibling;if(!r)for(r=n.parentNode;r;){if(r.nextSibling){r=r.nextSibling;break}r=r.parentNode}n=r}return e.Xml.domToText(t)},e.VariablesDynamic={},e.VariablesDynamic.onCreateVariableButtonClick_String=function(t){e.Variables.createVariableButtonHandler(t.getTargetWorkspace(),void 0,"String")},e.VariablesDynamic.onCreateVariableButtonClick_Number=function(t){e.Variables.createVariableButtonHandler(t.getTargetWorkspace(),void 0,"Number")},e.VariablesDynamic.onCreateVariableButtonClick_Colour=function(t){e.Variables.createVariableButtonHandler(t.getTargetWorkspace(),void 0,"Colour")},e.VariablesDynamic.flyoutCategory=function(t){var n=[],r=document.createElement("button");return r.setAttribute("text",e.Msg.NEW_STRING_VARIABLE),r.setAttribute("callbackKey","CREATE_VARIABLE_STRING"),n.push(r),(r=document.createElement("button")).setAttribute("text",e.Msg.NEW_NUMBER_VARIABLE),r.setAttribute("callbackKey","CREATE_VARIABLE_NUMBER"),n.push(r),(r=document.createElement("button")).setAttribute("text",e.Msg.NEW_COLOUR_VARIABLE),r.setAttribute("callbackKey","CREATE_VARIABLE_COLOUR"),n.push(r),t.registerButtonCallback("CREATE_VARIABLE_STRING",e.VariablesDynamic.onCreateVariableButtonClick_String),t.registerButtonCallback("CREATE_VARIABLE_NUMBER",e.VariablesDynamic.onCreateVariableButtonClick_Number),t.registerButtonCallback("CREATE_VARIABLE_COLOUR",e.VariablesDynamic.onCreateVariableButtonClick_Colour),t=e.VariablesDynamic.flyoutCategoryBlocks(t),n.concat(t)},e.VariablesDynamic.flyoutCategoryBlocks=function(t){var n=[];if(0<(t=t.getAllVariables()).length){if(e.Blocks.variables_set_dynamic){var r=t[t.length-1],s=e.utils.xml.createElement("block");s.setAttribute("type","variables_set_dynamic"),s.setAttribute("gap",24),s.appendChild(e.Variables.generateVariableFieldDom(r)),n.push(s)}if(e.Blocks.variables_get_dynamic){t.sort(e.VariableModel.compareByName),r=0;for(var u;u=t[r];r++)(s=e.utils.xml.createElement("block")).setAttribute("type","variables_get_dynamic"),s.setAttribute("gap",8),s.appendChild(e.Variables.generateVariableFieldDom(u)),n.push(s)}}return n},e.ZoomControls=function(t){this.workspace_=t,this.id="zoomControls",this.zoomResetGroup_=this.zoomOutGroup_=this.zoomInGroup_=this.onZoomOutWrapper_=this.onZoomInWrapper_=this.onZoomResetWrapper_=null},e.ZoomControls.prototype.WIDTH_=32,e.ZoomControls.prototype.HEIGHT_=32,e.ZoomControls.prototype.SMALL_SPACING_=2,e.ZoomControls.prototype.LARGE_SPACING_=11,e.ZoomControls.prototype.MARGIN_VERTICAL_=20,e.ZoomControls.prototype.MARGIN_HORIZONTAL_=20,e.ZoomControls.prototype.svgGroup_=null,e.ZoomControls.prototype.left_=0,e.ZoomControls.prototype.top_=0,e.ZoomControls.prototype.initialized_=!1,e.ZoomControls.prototype.createDom=function(){this.svgGroup_=e.utils.dom.createSvgElement(e.utils.Svg.G,{},null);var t=String(Math.random()).substring(2);return this.createZoomOutSvg_(t),this.createZoomInSvg_(t),this.workspace_.isMovable()&&this.createZoomResetSvg_(t),this.svgGroup_},e.ZoomControls.prototype.init=function(){this.workspace_.getComponentManager().addComponent({component:this,weight:2,capabilities:[e.ComponentManager.Capability.POSITIONABLE]}),this.initialized_=!0},e.ZoomControls.prototype.dispose=function(){this.workspace_.getComponentManager().removeComponent("zoomControls"),this.svgGroup_&&e.utils.dom.removeNode(this.svgGroup_),this.onZoomResetWrapper_&&e.browserEvents.unbind(this.onZoomResetWrapper_),this.onZoomInWrapper_&&e.browserEvents.unbind(this.onZoomInWrapper_),this.onZoomOutWrapper_&&e.browserEvents.unbind(this.onZoomOutWrapper_)},e.ZoomControls.prototype.getBoundingRectangle=function(){var t=this.SMALL_SPACING_+2*this.HEIGHT_;return this.zoomResetGroup_&&(t+=this.LARGE_SPACING_+this.HEIGHT_),new e.utils.Rect(this.top_,this.top_+t,this.left_,this.left_+this.WIDTH_)},e.ZoomControls.prototype.position=function(t,n){if(this.initialized_){var r=e.uiPosition.getCornerOppositeToolbox(this.workspace_,t),s=this.SMALL_SPACING_+2*this.HEIGHT_;this.zoomResetGroup_&&(s+=this.LARGE_SPACING_+this.HEIGHT_),t=e.uiPosition.getStartPositionRect(r,new e.utils.Size(this.WIDTH_,s),this.MARGIN_HORIZONTAL_,this.MARGIN_VERTICAL_,t,this.workspace_),n=e.uiPosition.bumpPositionRect(t,this.MARGIN_VERTICAL_,(r=r.vertical)===e.uiPosition.verticalPosition.TOP?e.uiPosition.bumpDirection.DOWN:e.uiPosition.bumpDirection.UP,n),r===e.uiPosition.verticalPosition.TOP?(this.zoomInGroup_.setAttribute("transform","translate(0, "+(r=this.SMALL_SPACING_+this.HEIGHT_)+")"),this.zoomResetGroup_&&this.zoomResetGroup_.setAttribute("transform","translate(0, "+(r+this.LARGE_SPACING_+this.HEIGHT_)+")")):(this.zoomInGroup_.setAttribute("transform","translate(0, "+(r=this.zoomResetGroup_?this.LARGE_SPACING_+this.HEIGHT_:0)+")"),this.zoomOutGroup_.setAttribute("transform","translate(0, "+(r+this.SMALL_SPACING_+this.HEIGHT_)+")")),this.top_=n.top,this.left_=n.left,this.svgGroup_.setAttribute("transform","translate("+this.left_+","+this.top_+")")}},e.ZoomControls.prototype.createZoomOutSvg_=function(t){this.zoomOutGroup_=e.utils.dom.createSvgElement(e.utils.Svg.G,{class:"blocklyZoom"},this.svgGroup_);var n=e.utils.dom.createSvgElement(e.utils.Svg.CLIPPATH,{id:"blocklyZoomoutClipPath"+t},this.zoomOutGroup_);e.utils.dom.createSvgElement(e.utils.Svg.RECT,{width:32,height:32},n),e.utils.dom.createSvgElement(e.utils.Svg.IMAGE,{width:e.SPRITE.width,height:e.SPRITE.height,x:-64,y:-92,"clip-path":"url(#blocklyZoomoutClipPath"+t+")"},this.zoomOutGroup_).setAttributeNS(e.utils.dom.XLINK_NS,"xlink:href",this.workspace_.options.pathToMedia+e.SPRITE.url),this.onZoomOutWrapper_=e.browserEvents.conditionalBind(this.zoomOutGroup_,"mousedown",null,this.zoom_.bind(this,-1))},e.ZoomControls.prototype.createZoomInSvg_=function(t){this.zoomInGroup_=e.utils.dom.createSvgElement(e.utils.Svg.G,{class:"blocklyZoom"},this.svgGroup_);var n=e.utils.dom.createSvgElement(e.utils.Svg.CLIPPATH,{id:"blocklyZoominClipPath"+t},this.zoomInGroup_);e.utils.dom.createSvgElement(e.utils.Svg.RECT,{width:32,height:32},n),e.utils.dom.createSvgElement(e.utils.Svg.IMAGE,{width:e.SPRITE.width,height:e.SPRITE.height,x:-32,y:-92,"clip-path":"url(#blocklyZoominClipPath"+t+")"},this.zoomInGroup_).setAttributeNS(e.utils.dom.XLINK_NS,"xlink:href",this.workspace_.options.pathToMedia+e.SPRITE.url),this.onZoomInWrapper_=e.browserEvents.conditionalBind(this.zoomInGroup_,"mousedown",null,this.zoom_.bind(this,1))},e.ZoomControls.prototype.zoom_=function(t,n){this.workspace_.markFocused(),this.workspace_.zoomCenter(t),this.fireZoomEvent_(),e.Touch.clearTouchIdentifier(),n.stopPropagation(),n.preventDefault()},e.ZoomControls.prototype.createZoomResetSvg_=function(t){this.zoomResetGroup_=e.utils.dom.createSvgElement(e.utils.Svg.G,{class:"blocklyZoom"},this.svgGroup_);var n=e.utils.dom.createSvgElement(e.utils.Svg.CLIPPATH,{id:"blocklyZoomresetClipPath"+t},this.zoomResetGroup_);e.utils.dom.createSvgElement(e.utils.Svg.RECT,{width:32,height:32},n),e.utils.dom.createSvgElement(e.utils.Svg.IMAGE,{width:e.SPRITE.width,height:e.SPRITE.height,y:-92,"clip-path":"url(#blocklyZoomresetClipPath"+t+")"},this.zoomResetGroup_).setAttributeNS(e.utils.dom.XLINK_NS,"xlink:href",this.workspace_.options.pathToMedia+e.SPRITE.url),this.onZoomResetWrapper_=e.browserEvents.conditionalBind(this.zoomResetGroup_,"mousedown",null,this.resetZoom_.bind(this))},e.ZoomControls.prototype.resetZoom_=function(t){this.workspace_.markFocused();var n=Math.log(this.workspace_.options.zoomOptions.startScale/this.workspace_.scale)/Math.log(this.workspace_.options.zoomOptions.scaleSpeed);this.workspace_.beginCanvasTransition(),this.workspace_.zoomCenter(n),this.workspace_.scrollCenter(),setTimeout(this.workspace_.endCanvasTransition.bind(this.workspace_),500),this.fireZoomEvent_(),e.Touch.clearTouchIdentifier(),t.stopPropagation(),t.preventDefault()},e.ZoomControls.prototype.fireZoomEvent_=function(){var t=new(e.Events.get(e.Events.CLICK))(null,this.workspace_.id,"zoom_controls");e.Events.fire(t)},e.Css.register([".blocklyZoom>image, .blocklyZoom>svg>image {","opacity: .4;","}",".blocklyZoom>image:hover, .blocklyZoom>svg>image:hover {","opacity: .6;","}",".blocklyZoom>image:active, .blocklyZoom>svg>image:active {","opacity: .8;","}"]),e.ShortcutItems={},e.ShortcutItems.names={ESCAPE:"escape",DELETE:"delete",COPY:"copy",CUT:"cut",PASTE:"paste",UNDO:"undo",REDO:"redo"},e.ShortcutItems.registerEscape=function(){var t={name:e.ShortcutItems.names.ESCAPE,preconditionFn:function(n){return!n.options.readOnly},callback:function(){return e.hideChaff(),!0}};e.ShortcutRegistry.registry.register(t),e.ShortcutRegistry.registry.addKeyMapping(e.utils.KeyCodes.ESC,t.name)},e.ShortcutItems.registerDelete=function(){var t={name:e.ShortcutItems.names.DELETE,preconditionFn:function(n){return!n.options.readOnly&&e.selected&&e.selected.isDeletable()},callback:function(n,r){return r.preventDefault(),!e.Gesture.inProgress()&&(e.deleteBlock(e.selected),!0)}};e.ShortcutRegistry.registry.register(t),e.ShortcutRegistry.registry.addKeyMapping(e.utils.KeyCodes.DELETE,t.name),e.ShortcutRegistry.registry.addKeyMapping(e.utils.KeyCodes.BACKSPACE,t.name)},e.ShortcutItems.registerCopy=function(){var t={name:e.ShortcutItems.names.COPY,preconditionFn:function(r){return!r.options.readOnly&&!e.Gesture.inProgress()&&e.selected&&e.selected.isDeletable()&&e.selected.isMovable()},callback:function(r,s){return s.preventDefault(),e.hideChaff(),e.copy(e.selected),!0}};e.ShortcutRegistry.registry.register(t);var n=e.ShortcutRegistry.registry.createSerializedKey(e.utils.KeyCodes.C,[e.utils.KeyCodes.CTRL]);e.ShortcutRegistry.registry.addKeyMapping(n,t.name),n=e.ShortcutRegistry.registry.createSerializedKey(e.utils.KeyCodes.C,[e.utils.KeyCodes.ALT]),e.ShortcutRegistry.registry.addKeyMapping(n,t.name),n=e.ShortcutRegistry.registry.createSerializedKey(e.utils.KeyCodes.C,[e.utils.KeyCodes.META]),e.ShortcutRegistry.registry.addKeyMapping(n,t.name)},e.ShortcutItems.registerCut=function(){var t={name:e.ShortcutItems.names.CUT,preconditionFn:function(r){return!r.options.readOnly&&!e.Gesture.inProgress()&&e.selected&&e.selected.isDeletable()&&e.selected.isMovable()&&!e.selected.workspace.isFlyout},callback:function(){return e.copy(e.selected),e.deleteBlock(e.selected),!0}};e.ShortcutRegistry.registry.register(t);var n=e.ShortcutRegistry.registry.createSerializedKey(e.utils.KeyCodes.X,[e.utils.KeyCodes.CTRL]);e.ShortcutRegistry.registry.addKeyMapping(n,t.name),n=e.ShortcutRegistry.registry.createSerializedKey(e.utils.KeyCodes.X,[e.utils.KeyCodes.ALT]),e.ShortcutRegistry.registry.addKeyMapping(n,t.name),n=e.ShortcutRegistry.registry.createSerializedKey(e.utils.KeyCodes.X,[e.utils.KeyCodes.META]),e.ShortcutRegistry.registry.addKeyMapping(n,t.name)},e.ShortcutItems.registerPaste=function(){var t={name:e.ShortcutItems.names.PASTE,preconditionFn:function(r){return!r.options.readOnly&&!e.Gesture.inProgress()},callback:function(){return e.paste()}};e.ShortcutRegistry.registry.register(t);var n=e.ShortcutRegistry.registry.createSerializedKey(e.utils.KeyCodes.V,[e.utils.KeyCodes.CTRL]);e.ShortcutRegistry.registry.addKeyMapping(n,t.name),n=e.ShortcutRegistry.registry.createSerializedKey(e.utils.KeyCodes.V,[e.utils.KeyCodes.ALT]),e.ShortcutRegistry.registry.addKeyMapping(n,t.name),n=e.ShortcutRegistry.registry.createSerializedKey(e.utils.KeyCodes.V,[e.utils.KeyCodes.META]),e.ShortcutRegistry.registry.addKeyMapping(n,t.name)},e.ShortcutItems.registerUndo=function(){var t={name:e.ShortcutItems.names.UNDO,preconditionFn:function(r){return!r.options.readOnly&&!e.Gesture.inProgress()},callback:function(r){return e.hideChaff(),r.undo(!1),!0}};e.ShortcutRegistry.registry.register(t);var n=e.ShortcutRegistry.registry.createSerializedKey(e.utils.KeyCodes.Z,[e.utils.KeyCodes.CTRL]);e.ShortcutRegistry.registry.addKeyMapping(n,t.name),n=e.ShortcutRegistry.registry.createSerializedKey(e.utils.KeyCodes.Z,[e.utils.KeyCodes.ALT]),e.ShortcutRegistry.registry.addKeyMapping(n,t.name),n=e.ShortcutRegistry.registry.createSerializedKey(e.utils.KeyCodes.Z,[e.utils.KeyCodes.META]),e.ShortcutRegistry.registry.addKeyMapping(n,t.name)},e.ShortcutItems.registerRedo=function(){var t={name:e.ShortcutItems.names.REDO,preconditionFn:function(r){return!e.Gesture.inProgress()&&!r.options.readOnly},callback:function(r){return e.hideChaff(),r.undo(!0),!0}};e.ShortcutRegistry.registry.register(t);var n=e.ShortcutRegistry.registry.createSerializedKey(e.utils.KeyCodes.Z,[e.utils.KeyCodes.SHIFT,e.utils.KeyCodes.CTRL]);e.ShortcutRegistry.registry.addKeyMapping(n,t.name),n=e.ShortcutRegistry.registry.createSerializedKey(e.utils.KeyCodes.Z,[e.utils.KeyCodes.SHIFT,e.utils.KeyCodes.ALT]),e.ShortcutRegistry.registry.addKeyMapping(n,t.name),n=e.ShortcutRegistry.registry.createSerializedKey(e.utils.KeyCodes.Z,[e.utils.KeyCodes.SHIFT,e.utils.KeyCodes.META]),e.ShortcutRegistry.registry.addKeyMapping(n,t.name),n=e.ShortcutRegistry.registry.createSerializedKey(e.utils.KeyCodes.Y,[e.utils.KeyCodes.CTRL]),e.ShortcutRegistry.registry.addKeyMapping(n,t.name)},e.ShortcutItems.registerDefaultShortcuts=function(){e.ShortcutItems.registerEscape(),e.ShortcutItems.registerDelete(),e.ShortcutItems.registerCopy(),e.ShortcutItems.registerCut(),e.ShortcutItems.registerPaste(),e.ShortcutItems.registerUndo(),e.ShortcutItems.registerRedo()},e.ShortcutItems.registerDefaultShortcuts(),e.ContextMenuItems={},e.ContextMenuItems.registerUndo=function(){e.ContextMenuRegistry.registry.register({displayText:function(){return e.Msg.UNDO},preconditionFn:function(t){return 0<t.workspace.getUndoStack().length?"enabled":"disabled"},callback:function(t){t.workspace.undo(!1)},scopeType:e.ContextMenuRegistry.ScopeType.WORKSPACE,id:"undoWorkspace",weight:1})},e.ContextMenuItems.registerRedo=function(){e.ContextMenuRegistry.registry.register({displayText:function(){return e.Msg.REDO},preconditionFn:function(t){return 0<t.workspace.getRedoStack().length?"enabled":"disabled"},callback:function(t){t.workspace.undo(!0)},scopeType:e.ContextMenuRegistry.ScopeType.WORKSPACE,id:"redoWorkspace",weight:2})},e.ContextMenuItems.registerCleanup=function(){e.ContextMenuRegistry.registry.register({displayText:function(){return e.Msg.CLEAN_UP},preconditionFn:function(t){return t.workspace.isMovable()?1<t.workspace.getTopBlocks(!1).length?"enabled":"disabled":"hidden"},callback:function(t){t.workspace.cleanUp()},scopeType:e.ContextMenuRegistry.ScopeType.WORKSPACE,id:"cleanWorkspace",weight:3})},e.ContextMenuItems.toggleOption_=function(t,n){for(var r=0,s=0;s<n.length;s++)for(var u=n[s];u;)setTimeout(u.setCollapsed.bind(u,t),r),u=u.getNextBlock(),r+=10},e.ContextMenuItems.registerCollapse=function(){e.ContextMenuRegistry.registry.register({displayText:function(){return e.Msg.COLLAPSE_ALL},preconditionFn:function(t){if(t.workspace.options.collapse){t=t.workspace.getTopBlocks(!1);for(var n=0;n<t.length;n++)for(var r=t[n];r;){if(!r.isCollapsed())return"enabled";r=r.getNextBlock()}return"disabled"}return"hidden"},callback:function(t){e.ContextMenuItems.toggleOption_(!0,t.workspace.getTopBlocks(!0))},scopeType:e.ContextMenuRegistry.ScopeType.WORKSPACE,id:"collapseWorkspace",weight:4})},e.ContextMenuItems.registerExpand=function(){e.ContextMenuRegistry.registry.register({displayText:function(){return e.Msg.EXPAND_ALL},preconditionFn:function(t){if(t.workspace.options.collapse){t=t.workspace.getTopBlocks(!1);for(var n=0;n<t.length;n++)for(var r=t[n];r;){if(r.isCollapsed())return"enabled";r=r.getNextBlock()}return"disabled"}return"hidden"},callback:function(t){e.ContextMenuItems.toggleOption_(!1,t.workspace.getTopBlocks(!0))},scopeType:e.ContextMenuRegistry.ScopeType.WORKSPACE,id:"expandWorkspace",weight:5})},e.ContextMenuItems.addDeletableBlocks_=function(t,n){if(t.isDeletable())Array.prototype.push.apply(n,t.getDescendants(!1));else{t=t.getChildren(!1);for(var r=0;r<t.length;r++)e.ContextMenuItems.addDeletableBlocks_(t[r],n)}},e.ContextMenuItems.getDeletableBlocks_=function(t){var n=[];t=t.getTopBlocks(!0);for(var r=0;r<t.length;r++)e.ContextMenuItems.addDeletableBlocks_(t[r],n);return n},e.ContextMenuItems.deleteNext_=function(t,n){e.Events.setGroup(n);var r=t.shift();r&&(r.workspace?(r.dispose(!1,!0),setTimeout(e.ContextMenuItems.deleteNext_,10,t,n)):e.ContextMenuItems.deleteNext_(t,n)),e.Events.setGroup(!1)},e.ContextMenuItems.registerDeleteAll=function(){e.ContextMenuRegistry.registry.register({displayText:function(t){if(t.workspace)return 1==(t=e.ContextMenuItems.getDeletableBlocks_(t.workspace).length)?e.Msg.DELETE_BLOCK:e.Msg.DELETE_X_BLOCKS.replace("%1",String(t))},preconditionFn:function(t){if(t.workspace)return 0<e.ContextMenuItems.getDeletableBlocks_(t.workspace).length?"enabled":"disabled"},callback:function(t){if(t.workspace){t.workspace.cancelCurrentGesture();var n=e.ContextMenuItems.getDeletableBlocks_(t.workspace),r=e.utils.genUid();2>n.length?e.ContextMenuItems.deleteNext_(n,r):e.confirm(e.Msg.DELETE_ALL_BLOCKS.replace("%1",n.length),function(s){s&&e.ContextMenuItems.deleteNext_(n,r)})}},scopeType:e.ContextMenuRegistry.ScopeType.WORKSPACE,id:"workspaceDelete",weight:6})},e.ContextMenuItems.registerWorkspaceOptions_=function(){e.ContextMenuItems.registerUndo(),e.ContextMenuItems.registerRedo(),e.ContextMenuItems.registerCleanup(),e.ContextMenuItems.registerCollapse(),e.ContextMenuItems.registerExpand(),e.ContextMenuItems.registerDeleteAll()},e.ContextMenuItems.registerDuplicate=function(){e.ContextMenuRegistry.registry.register({displayText:function(){return e.Msg.DUPLICATE_BLOCK},preconditionFn:function(t){return!(t=t.block).isInFlyout&&t.isDeletable()&&t.isMovable()?t.isDuplicatable()?"enabled":"disabled":"hidden"},callback:function(t){t.block&&e.duplicate(t.block)},scopeType:e.ContextMenuRegistry.ScopeType.BLOCK,id:"blockDuplicate",weight:1})},e.ContextMenuItems.registerComment=function(){e.ContextMenuRegistry.registry.register({displayText:function(t){return t.block.getCommentIcon()?e.Msg.REMOVE_COMMENT:e.Msg.ADD_COMMENT},preconditionFn:function(t){return t=t.block,e.utils.userAgent.IE||t.isInFlyout||!t.workspace.options.comments||t.isCollapsed()||!t.isEditable()?"hidden":"enabled"},callback:function(t){(t=t.block).getCommentIcon()?t.setCommentText(null):t.setCommentText("")},scopeType:e.ContextMenuRegistry.ScopeType.BLOCK,id:"blockComment",weight:2})},e.ContextMenuItems.registerInline=function(){e.ContextMenuRegistry.registry.register({displayText:function(t){return t.block.getInputsInline()?e.Msg.EXTERNAL_INPUTS:e.Msg.INLINE_INPUTS},preconditionFn:function(t){if(!(t=t.block).isInFlyout&&t.isMovable()&&!t.isCollapsed())for(var n=1;n<t.inputList.length;n++)if(t.inputList[n-1].type!=e.inputTypes.STATEMENT&&t.inputList[n].type!=e.inputTypes.STATEMENT)return"enabled";return"hidden"},callback:function(t){t.block.setInputsInline(!t.block.getInputsInline())},scopeType:e.ContextMenuRegistry.ScopeType.BLOCK,id:"blockInline",weight:3})},e.ContextMenuItems.registerCollapseExpandBlock=function(){e.ContextMenuRegistry.registry.register({displayText:function(t){return t.block.isCollapsed()?e.Msg.EXPAND_BLOCK:e.Msg.COLLAPSE_BLOCK},preconditionFn:function(t){return!(t=t.block).isInFlyout&&t.isMovable()&&t.workspace.options.collapse?"enabled":"hidden"},callback:function(t){t.block.setCollapsed(!t.block.isCollapsed())},scopeType:e.ContextMenuRegistry.ScopeType.BLOCK,id:"blockCollapseExpand",weight:4})},e.ContextMenuItems.registerDisable=function(){e.ContextMenuRegistry.registry.register({displayText:function(t){return t.block.isEnabled()?e.Msg.DISABLE_BLOCK:e.Msg.ENABLE_BLOCK},preconditionFn:function(t){return!(t=t.block).isInFlyout&&t.workspace.options.disable&&t.isEditable()?t.getInheritedDisabled()?"disabled":"enabled":"hidden"},callback:function(t){t=t.block;var n=e.Events.getGroup();n||e.Events.setGroup(!0),t.setEnabled(!t.isEnabled()),n||e.Events.setGroup(!1)},scopeType:e.ContextMenuRegistry.ScopeType.BLOCK,id:"blockDisable",weight:5})},e.ContextMenuItems.registerDelete=function(){e.ContextMenuRegistry.registry.register({displayText:function(t){var n=t.block;return t=n.getDescendants(!1).length,(n=n.getNextBlock())&&(t-=n.getDescendants(!1).length),1==t?e.Msg.DELETE_BLOCK:e.Msg.DELETE_X_BLOCKS.replace("%1",String(t))},preconditionFn:function(t){return!t.block.isInFlyout&&t.block.isDeletable()?"enabled":"hidden"},callback:function(t){e.Events.setGroup(!0),t.block&&e.deleteBlock(t.block),e.Events.setGroup(!1)},scopeType:e.ContextMenuRegistry.ScopeType.BLOCK,id:"blockDelete",weight:6})},e.ContextMenuItems.registerHelp=function(){e.ContextMenuRegistry.registry.register({displayText:function(){return e.Msg.HELP},preconditionFn:function(t){return("function"==typeof(t=t.block).helpUrl?t.helpUrl():t.helpUrl)?"enabled":"hidden"},callback:function(t){t.block.showHelp()},scopeType:e.ContextMenuRegistry.ScopeType.BLOCK,id:"blockHelp",weight:7})},e.ContextMenuItems.registerBlockOptions_=function(){e.ContextMenuItems.registerDuplicate(),e.ContextMenuItems.registerComment(),e.ContextMenuItems.registerInline(),e.ContextMenuItems.registerCollapseExpandBlock(),e.ContextMenuItems.registerDisable(),e.ContextMenuItems.registerDelete(),e.ContextMenuItems.registerHelp()},e.ContextMenuItems.registerDefaultOptions=function(){e.ContextMenuItems.registerWorkspaceOptions_(),e.ContextMenuItems.registerBlockOptions_()},e.ContextMenuItems.registerDefaultOptions(),e.Mutator=function(t){e.Mutator.superClass_.constructor.call(this,null),this.quarkNames_=t},e.utils.object.inherits(e.Mutator,e.Icon),e.Mutator.prototype.workspace_=null,e.Mutator.prototype.workspaceWidth_=0,e.Mutator.prototype.workspaceHeight_=0,e.Mutator.prototype.setBlock=function(t){this.block_=t},e.Mutator.prototype.getWorkspace=function(){return this.workspace_},e.Mutator.prototype.drawIcon_=function(t){e.utils.dom.createSvgElement(e.utils.Svg.RECT,{class:"blocklyIconShape",rx:"4",ry:"4",height:"16",width:"16"},t),e.utils.dom.createSvgElement(e.utils.Svg.PATH,{class:"blocklyIconSymbol",d:"m4.203,7.296 0,1.368 -0.92,0.677 -0.11,0.41 0.9,1.559 0.41,0.11 1.043,-0.457 1.187,0.683 0.127,1.134 0.3,0.3 1.8,0 0.3,-0.299 0.127,-1.138 1.185,-0.682 1.046,0.458 0.409,-0.11 0.9,-1.559 -0.11,-0.41 -0.92,-0.677 0,-1.366 0.92,-0.677 0.11,-0.41 -0.9,-1.559 -0.409,-0.109 -1.046,0.458 -1.185,-0.682 -0.127,-1.138 -0.3,-0.299 -1.8,0 -0.3,0.3 -0.126,1.135 -1.187,0.682 -1.043,-0.457 -0.41,0.11 -0.899,1.559 0.108,0.409z"},t),e.utils.dom.createSvgElement(e.utils.Svg.CIRCLE,{class:"blocklyIconShape",r:"2.7",cx:"8",cy:"8"},t)},e.Mutator.prototype.iconClick_=function(t){this.block_.isEditable()&&e.Icon.prototype.iconClick_.call(this,t)},e.Mutator.prototype.createEditor_=function(){if(this.svgDialog_=e.utils.dom.createSvgElement(e.utils.Svg.SVG,{x:e.Bubble.BORDER_WIDTH,y:e.Bubble.BORDER_WIDTH},null),this.quarkNames_.length)for(var r,t=e.utils.xml.createElement("xml"),n=0;r=this.quarkNames_[n];n++){var s=e.utils.xml.createElement("block");s.setAttribute("type",r),t.appendChild(s)}else t=null;return(n=new e.Options({disable:!1,parentWorkspace:this.block_.workspace,media:this.block_.workspace.options.pathToMedia,rtl:this.block_.RTL,horizontalLayout:!1,renderer:this.block_.workspace.options.renderer,rendererOverrides:this.block_.workspace.options.rendererOverrides})).toolboxPosition=this.block_.RTL?e.utils.toolbox.Position.RIGHT:e.utils.toolbox.Position.LEFT,(r=!!t)&&(n.languageTree=e.utils.toolbox.convertToolboxDefToJson(t)),this.workspace_=new e.WorkspaceSvg(n),this.workspace_.isMutator=!0,this.workspace_.addChangeListener(e.Events.disableOrphans),t=r?this.workspace_.addFlyout(e.utils.Svg.G):null,n=this.workspace_.createDom("blocklyMutatorBackground"),t&&n.insertBefore(t,this.workspace_.svgBlockCanvas_),this.svgDialog_.appendChild(n),this.svgDialog_},e.Mutator.prototype.updateEditable=function(){e.Mutator.superClass_.updateEditable.call(this),this.block_.isInFlyout||(this.block_.isEditable()?this.iconGroup_&&e.utils.dom.removeClass(this.iconGroup_,"blocklyIconGroupReadonly"):(this.setVisible(!1),this.iconGroup_&&e.utils.dom.addClass(this.iconGroup_,"blocklyIconGroupReadonly")))},e.Mutator.prototype.resizeBubble_=function(){var t=2*e.Bubble.BORDER_WIDTH,n=this.workspace_.getCanvas().getBBox(),r=n.width+n.x,s=n.height+3*t,u=this.workspace_.getFlyout();if(u){var y=u.getWorkspace().getMetricsManager().getScrollMetrics();s=Math.max(s,y.height+20),r+=u.getWidth()}this.block_.RTL&&(r=-n.x),r+=3*t,(Math.abs(this.workspaceWidth_-r)>t||Math.abs(this.workspaceHeight_-s)>t)&&(this.workspaceWidth_=r,this.workspaceHeight_=s,this.bubble_.setBubbleSize(r+t,s+t),this.svgDialog_.setAttribute("width",this.workspaceWidth_),this.svgDialog_.setAttribute("height",this.workspaceHeight_),this.workspace_.setCachedParentSvgSize(this.workspaceWidth_,this.workspaceHeight_)),this.block_.RTL&&(t="translate("+this.workspaceWidth_+",0)",this.workspace_.getCanvas().setAttribute("transform",t)),this.workspace_.resize()},e.Mutator.prototype.onBubbleMove_=function(){this.workspace_&&this.workspace_.recordDragTargets()},e.Mutator.prototype.setVisible=function(t){if(t!=this.isVisible())if(e.Events.fire(new(e.Events.get(e.Events.BUBBLE_OPEN))(this.block_,t,"mutator")),t){this.bubble_=new e.Bubble(this.block_.workspace,this.createEditor_(),this.block_.pathObject.svgPath,this.iconXY_,null,null),this.bubble_.setSvgId(this.block_.id),this.bubble_.registerMoveEvent(this.onBubbleMove_.bind(this));var n=this.workspace_.options.languageTree;t=this.workspace_.getFlyout(),n&&(t.init(this.workspace_),t.show(n)),this.rootBlock_=this.block_.decompose(this.workspace_),n=this.rootBlock_.getDescendants(!1);for(var s,r=0;s=n[r];r++)s.render();if(this.rootBlock_.setMovable(!1),this.rootBlock_.setDeletable(!1),t?(n=2*t.CORNER_RADIUS,t=this.rootBlock_.RTL?t.getWidth()+n:n):t=n=16,this.block_.RTL&&(t=-t),this.rootBlock_.moveBy(t,n),this.block_.saveConnections){var u=this,y=this.block_;y.saveConnections(this.rootBlock_),this.sourceListener_=function(){y.saveConnections(u.rootBlock_)},this.block_.workspace.addChangeListener(this.sourceListener_)}this.resizeBubble_(),this.workspace_.addChangeListener(this.workspaceChanged_.bind(this)),this.applyColour()}else this.svgDialog_=null,this.workspace_.dispose(),this.rootBlock_=this.workspace_=null,this.bubble_.dispose(),this.bubble_=null,this.workspaceHeight_=this.workspaceWidth_=0,this.sourceListener_&&(this.block_.workspace.removeChangeListener(this.sourceListener_),this.sourceListener_=null)},e.Mutator.prototype.workspaceChanged_=function(t){if(!(t.isUiEvent||t.type==e.Events.CHANGE&&"disabled"==t.element)){if(!this.workspace_.isDragging()){t=this.workspace_.getTopBlocks(!1);for(var r,n=0;r=t[n];n++){var s=r.getRelativeToSurfaceXY();if(20>s.y&&r.moveBy(0,20-s.y),r.RTL){var u=-20,y=this.workspace_.getFlyout();y&&(u-=y.getWidth()),s.x>u&&r.moveBy(u-s.x,0)}else 20>s.x&&r.moveBy(20-s.x,0)}}if(this.rootBlock_.workspace==this.workspace_){if(e.Events.setGroup(!0),t=(t=(r=this.block_).mutationToDom())&&e.Xml.domToText(t),n=r.rendered,r.rendered=!1,r.compose(this.rootBlock_),r.rendered=n,r.initSvg(),r.rendered&&r.render(),t!=(n=(n=r.mutationToDom())&&e.Xml.domToText(n))){e.Events.fire(new(e.Events.get(e.Events.BLOCK_CHANGE))(r,"mutation",null,t,n));var x=e.Events.getGroup();setTimeout(function(){e.Events.setGroup(x),r.bumpNeighbours(),e.Events.setGroup(!1)},e.BUMP_DELAY)}this.workspace_.isDragging()||this.resizeBubble_(),e.Events.setGroup(!1)}}},e.Mutator.prototype.dispose=function(){this.block_.mutator=null,e.Icon.prototype.dispose.call(this)},e.Mutator.prototype.updateBlockStyle=function(){var t=this.workspace_;if(t&&t.getAllBlocks(!1)){for(var s,n=t.getAllBlocks(!1),r=0;s=n[r];r++)s.setStyle(s.getStyleName());if(r=t.getFlyout())for(t=r.workspace_.getAllBlocks(!1),r=0;s=t[r];r++)s.setStyle(s.getStyleName())}},e.Mutator.reconnect=function(t,n,r){if(!t||!t.getSourceBlock().workspace)return!1;r=n.getInput(r).connection;var s=t.targetBlock();return!(s&&s!=n||r.targetConnection==t||(r.isConnected()&&r.disconnect(),r.connect(t),0))},e.Mutator.findParentWs=function(t){var n=null;if(t&&t.options){var r=t.options.parentWorkspace;t.isFlyout?r&&r.options&&(n=r.options.parentWorkspace):r&&(n=r)}return n},e.FieldTextInput=function(t,n,r){this.spellcheck_=!0,e.FieldTextInput.superClass_.constructor.call(this,t,n,r),this.onKeyInputWrapper_=this.onKeyDownWrapper_=this.htmlInput_=null,this.fullBlockClickTarget_=!1,this.workspace_=null},e.utils.object.inherits(e.FieldTextInput,e.Field),e.FieldTextInput.prototype.DEFAULT_VALUE="",e.FieldTextInput.fromJson=function(t){var n=e.utils.replaceMessageReferences(t.text);return new e.FieldTextInput(n,void 0,t)},e.FieldTextInput.prototype.SERIALIZABLE=!0,e.FieldTextInput.BORDERRADIUS=4,e.FieldTextInput.prototype.CURSOR="text",e.FieldTextInput.prototype.configure_=function(t){e.FieldTextInput.superClass_.configure_.call(this,t),"boolean"==typeof t.spellcheck&&(this.spellcheck_=t.spellcheck)},e.FieldTextInput.prototype.initView=function(){if(this.getConstants().FULL_BLOCK_FIELDS){for(var s,t=0,n=0,r=0;s=this.sourceBlock_.inputList[r];r++){for(var u=0;s.fieldRow[u];u++)t++;s.connection&&n++}this.fullBlockClickTarget_=1>=t&&this.sourceBlock_.outputConnection&&!n}else this.fullBlockClickTarget_=!1;this.fullBlockClickTarget_?this.clickTarget_=this.sourceBlock_.getSvgRoot():this.createBorderRect_(),this.createTextElement_()},e.FieldTextInput.prototype.doClassValidation_=function(t){return null==t?null:String(t)},e.FieldTextInput.prototype.doValueInvalid_=function(t){this.isBeingEdited_&&(this.isTextValid_=!1,t=this.value_,this.value_=this.htmlInput_.untypedDefaultValue_,this.sourceBlock_&&e.Events.isEnabled()&&e.Events.fire(new(e.Events.get(e.Events.BLOCK_CHANGE))(this.sourceBlock_,"field",this.name||null,t,this.value_)))},e.FieldTextInput.prototype.doValueUpdate_=function(t){this.isTextValid_=!0,this.value_=t,this.isBeingEdited_||(this.isDirty_=!0)},e.FieldTextInput.prototype.applyColour=function(){this.sourceBlock_&&this.getConstants().FULL_BLOCK_FIELDS&&(this.borderRect_?this.borderRect_.setAttribute("stroke",this.sourceBlock_.style.colourTertiary):this.sourceBlock_.pathObject.svgPath.setAttribute("fill",this.getConstants().FIELD_BORDER_RECT_COLOUR))},e.FieldTextInput.prototype.render_=function(){if(e.FieldTextInput.superClass_.render_.call(this),this.isBeingEdited_){this.resizeEditor_();var t=this.htmlInput_;this.isTextValid_?(e.utils.dom.removeClass(t,"blocklyInvalidInput"),e.utils.aria.setState(t,e.utils.aria.State.INVALID,!1)):(e.utils.dom.addClass(t,"blocklyInvalidInput"),e.utils.aria.setState(t,e.utils.aria.State.INVALID,!0))}},e.FieldTextInput.prototype.setSpellcheck=function(t){t!=this.spellcheck_&&(this.spellcheck_=t,this.htmlInput_&&this.htmlInput_.setAttribute("spellcheck",this.spellcheck_))},e.FieldTextInput.prototype.showEditor_=function(t,n){this.workspace_=this.sourceBlock_.workspace,!(t=n||!1)&&(e.utils.userAgent.MOBILE||e.utils.userAgent.ANDROID||e.utils.userAgent.IPAD)?this.showPromptEditor_():this.showInlineEditor_(t)},e.FieldTextInput.prototype.showPromptEditor_=function(){e.prompt(e.Msg.CHANGE_VALUE_TITLE,this.getText(),function(t){this.setValue(this.getValueFromEditorText_(t))}.bind(this))},e.FieldTextInput.prototype.showInlineEditor_=function(t){e.WidgetDiv.show(this,this.sourceBlock_.RTL,this.widgetDispose_.bind(this)),this.htmlInput_=this.widgetCreate_(),this.isBeingEdited_=!0,t||(this.htmlInput_.focus({preventScroll:!0}),this.htmlInput_.select())},e.FieldTextInput.prototype.widgetCreate_=function(){var t=e.WidgetDiv.DIV;e.utils.dom.addClass(this.getClickTarget_(),"editing");var n=document.createElement("input");n.className="blocklyHtmlInput",n.setAttribute("spellcheck",this.spellcheck_);var r=this.workspace_.getScale(),s=this.getConstants().FIELD_TEXT_FONTSIZE*r+"pt";if(t.style.fontSize=s,n.style.fontSize=s,s=e.FieldTextInput.BORDERRADIUS*r+"px",this.fullBlockClickTarget_){s=((s=this.getScaledBBox()).bottom-s.top)/2+"px";var u=this.sourceBlock_.getParent()?this.sourceBlock_.getParent().style.colourTertiary:this.sourceBlock_.style.colourTertiary;n.style.border=1*r+"px solid "+u,t.style.borderRadius=s,t.style.transition="box-shadow 0.25s ease 0s",this.getConstants().FIELD_TEXTINPUT_BOX_SHADOW&&(t.style.boxShadow="rgba(255, 255, 255, 0.3) 0px 0px 0px "+4*r+"px")}return n.style.borderRadius=s,t.appendChild(n),n.value=n.defaultValue=this.getEditorText_(this.value_),n.untypedDefaultValue_=this.value_,n.oldValue_=null,this.resizeEditor_(),this.bindInputEvents_(n),n},e.FieldTextInput.prototype.widgetDispose_=function(){this.isBeingEdited_=!1,this.isTextValid_=!0,this.forceRerender(),this.onFinishEditing_&&this.onFinishEditing_(this.value_),this.unbindInputEvents_();var t=e.WidgetDiv.DIV.style;t.width="auto",t.height="auto",t.fontSize="",t.transition="",t.boxShadow="",this.htmlInput_=null,e.utils.dom.removeClass(this.getClickTarget_(),"editing")},e.FieldTextInput.prototype.bindInputEvents_=function(t){this.onKeyDownWrapper_=e.browserEvents.conditionalBind(t,"keydown",this,this.onHtmlInputKeyDown_),this.onKeyInputWrapper_=e.browserEvents.conditionalBind(t,"input",this,this.onHtmlInputChange_)},e.FieldTextInput.prototype.unbindInputEvents_=function(){this.onKeyDownWrapper_&&(e.browserEvents.unbind(this.onKeyDownWrapper_),this.onKeyDownWrapper_=null),this.onKeyInputWrapper_&&(e.browserEvents.unbind(this.onKeyInputWrapper_),this.onKeyInputWrapper_=null)},e.FieldTextInput.prototype.onHtmlInputKeyDown_=function(t){t.keyCode==e.utils.KeyCodes.ENTER?(e.WidgetDiv.hide(),e.DropDownDiv.hideWithoutAnimation()):t.keyCode==e.utils.KeyCodes.ESC?(this.setValue(this.htmlInput_.untypedDefaultValue_),e.WidgetDiv.hide(),e.DropDownDiv.hideWithoutAnimation()):t.keyCode==e.utils.KeyCodes.TAB&&(e.WidgetDiv.hide(),e.DropDownDiv.hideWithoutAnimation(),this.sourceBlock_.tab(this,!t.shiftKey),t.preventDefault())},e.FieldTextInput.prototype.onHtmlInputChange_=function(t){(t=this.htmlInput_.value)!==this.htmlInput_.oldValue_&&(this.htmlInput_.oldValue_=t,e.Events.setGroup(!0),t=this.getValueFromEditorText_(t),this.setValue(t),this.forceRerender(),this.resizeEditor_(),e.Events.setGroup(!1))},e.FieldTextInput.prototype.setEditorValue_=function(t){this.isDirty_=!0,this.isBeingEdited_&&(this.htmlInput_.value=this.getEditorText_(t)),this.setValue(t)},e.FieldTextInput.prototype.resizeEditor_=function(){var t=e.WidgetDiv.DIV,n=this.getScaledBBox();t.style.width=n.right-n.left+"px",t.style.height=n.bottom-n.top+"px",n=new e.utils.Coordinate(this.sourceBlock_.RTL?n.right-t.offsetWidth:n.left,n.top),t.style.left=n.x+"px",t.style.top=n.y+"px"},e.FieldTextInput.prototype.isTabNavigable=function(){return!0},e.FieldTextInput.prototype.getText_=function(){return this.isBeingEdited_&&this.htmlInput_?this.htmlInput_.value:null},e.FieldTextInput.prototype.getEditorText_=function(t){return String(t)},e.FieldTextInput.prototype.getValueFromEditorText_=function(t){return t},e.fieldRegistry.register("field_input",e.FieldTextInput),e.FieldAngle=function(t,n,r){this.clockwise_=e.FieldAngle.CLOCKWISE,this.offset_=e.FieldAngle.OFFSET,this.wrap_=e.FieldAngle.WRAP,this.round_=e.FieldAngle.ROUND,e.FieldAngle.superClass_.constructor.call(this,t,n,r),this.moveSurfaceWrapper_=this.clickSurfaceWrapper_=this.clickWrapper_=this.line_=this.gauge_=this.editor_=null},e.utils.object.inherits(e.FieldAngle,e.FieldTextInput),e.FieldAngle.prototype.DEFAULT_VALUE=0,e.FieldAngle.fromJson=function(t){return new e.FieldAngle(t.angle,void 0,t)},e.FieldAngle.prototype.SERIALIZABLE=!0,e.FieldAngle.ROUND=15,e.FieldAngle.HALF=50,e.FieldAngle.CLOCKWISE=!1,e.FieldAngle.OFFSET=0,e.FieldAngle.WRAP=360,e.FieldAngle.RADIUS=e.FieldAngle.HALF-1,e.FieldAngle.prototype.configure_=function(t){switch(e.FieldAngle.superClass_.configure_.call(this,t),t.mode){case"compass":this.clockwise_=!0,this.offset_=90;break;case"protractor":this.clockwise_=!1,this.offset_=0}var n=t.clockwise;"boolean"==typeof n&&(this.clockwise_=n),null!=(n=t.offset)&&(n=Number(n),isNaN(n)||(this.offset_=n)),null!=(n=t.wrap)&&(n=Number(n),isNaN(n)||(this.wrap_=n)),null!=(t=t.round)&&(t=Number(t),isNaN(t)||(this.round_=t))},e.FieldAngle.prototype.initView=function(){e.FieldAngle.superClass_.initView.call(this),this.symbol_=e.utils.dom.createSvgElement(e.utils.Svg.TSPAN,{},null),this.symbol_.appendChild(document.createTextNode("\xb0")),this.textElement_.appendChild(this.symbol_)},e.FieldAngle.prototype.render_=function(){e.FieldAngle.superClass_.render_.call(this),this.updateGraph_()},e.FieldAngle.prototype.showEditor_=function(t){e.FieldAngle.superClass_.showEditor_.call(this,t,e.utils.userAgent.MOBILE||e.utils.userAgent.ANDROID||e.utils.userAgent.IPAD),this.dropdownCreate_(),e.DropDownDiv.getContentDiv().appendChild(this.editor_),e.DropDownDiv.setColour(this.sourceBlock_.style.colourPrimary,this.sourceBlock_.style.colourTertiary),e.DropDownDiv.showPositionedByField(this,this.dropdownDispose_.bind(this)),this.updateGraph_()},e.FieldAngle.prototype.dropdownCreate_=function(){var t=e.utils.dom.createSvgElement(e.utils.Svg.SVG,{xmlns:e.utils.dom.SVG_NS,"xmlns:html":e.utils.dom.HTML_NS,"xmlns:xlink":e.utils.dom.XLINK_NS,version:"1.1",height:2*e.FieldAngle.HALF+"px",width:2*e.FieldAngle.HALF+"px",style:"touch-action: none"},null),n=e.utils.dom.createSvgElement(e.utils.Svg.CIRCLE,{cx:e.FieldAngle.HALF,cy:e.FieldAngle.HALF,r:e.FieldAngle.RADIUS,class:"blocklyAngleCircle"},t);this.gauge_=e.utils.dom.createSvgElement(e.utils.Svg.PATH,{class:"blocklyAngleGauge"},t),this.line_=e.utils.dom.createSvgElement(e.utils.Svg.LINE,{x1:e.FieldAngle.HALF,y1:e.FieldAngle.HALF,class:"blocklyAngleLine"},t);for(var r=0;360>r;r+=15)e.utils.dom.createSvgElement(e.utils.Svg.LINE,{x1:e.FieldAngle.HALF+e.FieldAngle.RADIUS,y1:e.FieldAngle.HALF,x2:e.FieldAngle.HALF+e.FieldAngle.RADIUS-(r%45==0?10:5),y2:e.FieldAngle.HALF,class:"blocklyAngleMarks",transform:"rotate("+r+","+e.FieldAngle.HALF+","+e.FieldAngle.HALF+")"},t);this.clickWrapper_=e.browserEvents.conditionalBind(t,"click",this,this.hide_),this.clickSurfaceWrapper_=e.browserEvents.conditionalBind(n,"click",this,this.onMouseMove_,!0,!0),this.moveSurfaceWrapper_=e.browserEvents.conditionalBind(n,"mousemove",this,this.onMouseMove_,!0,!0),this.editor_=t},e.FieldAngle.prototype.dropdownDispose_=function(){this.clickWrapper_&&(e.browserEvents.unbind(this.clickWrapper_),this.clickWrapper_=null),this.clickSurfaceWrapper_&&(e.browserEvents.unbind(this.clickSurfaceWrapper_),this.clickSurfaceWrapper_=null),this.moveSurfaceWrapper_&&(e.browserEvents.unbind(this.moveSurfaceWrapper_),this.moveSurfaceWrapper_=null),this.line_=this.gauge_=null},e.FieldAngle.prototype.hide_=function(){e.DropDownDiv.hideIfOwner(this),e.WidgetDiv.hide()},e.FieldAngle.prototype.onMouseMove_=function(t){var n=this.gauge_.ownerSVGElement.getBoundingClientRect(),r=t.clientX-n.left-e.FieldAngle.HALF;t=t.clientY-n.top-e.FieldAngle.HALF,n=Math.atan(-t/r),isNaN(n)||(n=e.utils.math.toDegrees(n),0>r?n+=180:0<t&&(n+=360),this.displayMouseOrKeyboardValue_(n=this.clockwise_?this.offset_+360-n:360-(this.offset_-n)))},e.FieldAngle.prototype.displayMouseOrKeyboardValue_=function(t){this.round_&&(t=Math.round(t/this.round_)*this.round_),(t=this.wrapValue_(t))!=this.value_&&this.setEditorValue_(t)},e.FieldAngle.prototype.updateGraph_=function(){if(this.gauge_){var t=Number(this.getText())+this.offset_,n=e.utils.math.toRadians(t%360);t=["M ",e.FieldAngle.HALF,",",e.FieldAngle.HALF];var r=e.FieldAngle.HALF,s=e.FieldAngle.HALF;if(!isNaN(n)){var u=Number(this.clockwise_),y=e.utils.math.toRadians(this.offset_),x=Math.cos(y)*e.FieldAngle.RADIUS,B=Math.sin(y)*-e.FieldAngle.RADIUS;u&&(n=2*y-n),r+=Math.cos(n)*e.FieldAngle.RADIUS,s-=Math.sin(n)*e.FieldAngle.RADIUS,n=Math.abs(Math.floor((n-y)/Math.PI)%2),u&&(n=1-n),t.push(" l ",x,",",B," A ",e.FieldAngle.RADIUS,",",e.FieldAngle.RADIUS," 0 ",n," ",u," ",r,",",s," z")}this.gauge_.setAttribute("d",t.join("")),this.line_.setAttribute("x2",r),this.line_.setAttribute("y2",s)}},e.FieldAngle.prototype.onHtmlInputKeyDown_=function(t){var n;if(e.FieldAngle.superClass_.onHtmlInputKeyDown_.call(this,t),t.keyCode===e.utils.KeyCodes.LEFT?n=this.sourceBlock_.RTL?1:-1:t.keyCode===e.utils.KeyCodes.RIGHT?n=this.sourceBlock_.RTL?-1:1:t.keyCode===e.utils.KeyCodes.DOWN?n=-1:t.keyCode===e.utils.KeyCodes.UP&&(n=1),n){var r=this.getValue();this.displayMouseOrKeyboardValue_(r+n*this.round_),t.preventDefault(),t.stopPropagation()}},e.FieldAngle.prototype.doClassValidation_=function(t){return t=Number(t),isNaN(t)||!isFinite(t)?null:this.wrapValue_(t)},e.FieldAngle.prototype.wrapValue_=function(t){return 0>(t%=360)&&(t+=360),t>this.wrap_&&(t-=360),t},e.Css.register(".blocklyAngleCircle {,stroke: #444;,stroke-width: 1;,fill: #ddd;,fill-opacity: .8;,},.blocklyAngleMarks {,stroke: #444;,stroke-width: 1;,},.blocklyAngleGauge {,fill: #f88;,fill-opacity: .8;,pointer-events: none;,},.blocklyAngleLine {,stroke: #f00;,stroke-width: 2;,stroke-linecap: round;,pointer-events: none;,}".split(",")),e.fieldRegistry.register("field_angle",e.FieldAngle),e.FieldCheckbox=function(t,n,r){this.checkChar_=null,e.FieldCheckbox.superClass_.constructor.call(this,t,n,r)},e.utils.object.inherits(e.FieldCheckbox,e.Field),e.FieldCheckbox.prototype.DEFAULT_VALUE=!1,e.FieldCheckbox.fromJson=function(t){return new e.FieldCheckbox(t.checked,void 0,t)},e.FieldCheckbox.CHECK_CHAR="\u2713",e.FieldCheckbox.prototype.SERIALIZABLE=!0,e.FieldCheckbox.prototype.CURSOR="default",e.FieldCheckbox.prototype.configure_=function(t){e.FieldCheckbox.superClass_.configure_.call(this,t),t.checkCharacter&&(this.checkChar_=t.checkCharacter)},e.FieldCheckbox.prototype.initView=function(){e.FieldCheckbox.superClass_.initView.call(this),e.utils.dom.addClass(this.textElement_,"blocklyCheckbox"),this.textElement_.style.display=this.value_?"block":"none"},e.FieldCheckbox.prototype.render_=function(){this.textContent_&&(this.textContent_.nodeValue=this.getDisplayText_()),this.updateSize_(this.getConstants().FIELD_CHECKBOX_X_OFFSET)},e.FieldCheckbox.prototype.getDisplayText_=function(){return this.checkChar_||e.FieldCheckbox.CHECK_CHAR},e.FieldCheckbox.prototype.setCheckCharacter=function(t){this.checkChar_=t,this.forceRerender()},e.FieldCheckbox.prototype.showEditor_=function(){this.setValue(!this.value_)},e.FieldCheckbox.prototype.doClassValidation_=function(t){return!0===t||"TRUE"===t?"TRUE":!1===t||"FALSE"===t?"FALSE":null},e.FieldCheckbox.prototype.doValueUpdate_=function(t){this.value_=this.convertValueToBool_(t),this.textElement_&&(this.textElement_.style.display=this.value_?"block":"none")},e.FieldCheckbox.prototype.getValue=function(){return this.value_?"TRUE":"FALSE"},e.FieldCheckbox.prototype.getValueBoolean=function(){return this.value_},e.FieldCheckbox.prototype.getText=function(){return String(this.convertValueToBool_(this.value_))},e.FieldCheckbox.prototype.convertValueToBool_=function(t){return"string"==typeof t?"TRUE"==t:!!t},e.fieldRegistry.register("field_checkbox",e.FieldCheckbox),e.FieldColour=function(t,n,r){e.FieldColour.superClass_.constructor.call(this,t,n,r),this.onKeyDownWrapper_=this.onMouseLeaveWrapper_=this.onMouseEnterWrapper_=this.onMouseMoveWrapper_=this.onClickWrapper_=this.highlightedIndex_=this.picker_=null},e.utils.object.inherits(e.FieldColour,e.Field),e.FieldColour.fromJson=function(t){return new e.FieldColour(t.colour,void 0,t)},e.FieldColour.prototype.SERIALIZABLE=!0,e.FieldColour.prototype.CURSOR="default",e.FieldColour.prototype.isDirty_=!1,e.FieldColour.prototype.colours_=null,e.FieldColour.prototype.titles_=null,e.FieldColour.prototype.columns_=0,e.FieldColour.prototype.configure_=function(t){e.FieldColour.superClass_.configure_.call(this,t),t.colourOptions&&(this.colours_=t.colourOptions,this.titles_=t.colourTitles),t.columns&&(this.columns_=t.columns)},e.FieldColour.prototype.initView=function(){this.size_=new e.utils.Size(this.getConstants().FIELD_COLOUR_DEFAULT_WIDTH,this.getConstants().FIELD_COLOUR_DEFAULT_HEIGHT),this.getConstants().FIELD_COLOUR_FULL_BLOCK?this.clickTarget_=this.sourceBlock_.getSvgRoot():(this.createBorderRect_(),this.borderRect_.style.fillOpacity="1")},e.FieldColour.prototype.applyColour=function(){this.getConstants().FIELD_COLOUR_FULL_BLOCK?(this.sourceBlock_.pathObject.svgPath.setAttribute("fill",this.getValue()),this.sourceBlock_.pathObject.svgPath.setAttribute("stroke","#fff")):this.borderRect_&&(this.borderRect_.style.fill=this.getValue())},e.FieldColour.prototype.doClassValidation_=function(t){return"string"!=typeof t?null:e.utils.colour.parse(t)},e.FieldColour.prototype.doValueUpdate_=function(t){this.value_=t,this.borderRect_?this.borderRect_.style.fill=t:this.sourceBlock_&&this.sourceBlock_.rendered&&(this.sourceBlock_.pathObject.svgPath.setAttribute("fill",t),this.sourceBlock_.pathObject.svgPath.setAttribute("stroke","#fff"))},e.FieldColour.prototype.getText=function(){var t=this.value_;return/^#(.)\1(.)\2(.)\3$/.test(t)&&(t="#"+t[1]+t[3]+t[5]),t},e.FieldColour.COLOURS="#ffffff #cccccc #c0c0c0 #999999 #666666 #333333 #000000 #ffcccc #ff6666 #ff0000 #cc0000 #990000 #660000 #330000 #ffcc99 #ff9966 #ff9900 #ff6600 #cc6600 #993300 #663300 #ffff99 #ffff66 #ffcc66 #ffcc33 #cc9933 #996633 #663333 #ffffcc #ffff33 #ffff00 #ffcc00 #999900 #666600 #333300 #99ff99 #66ff99 #33ff33 #33cc00 #009900 #006600 #003300 #99ffff #33ffff #66cccc #00cccc #339999 #336666 #003333 #ccffff #66ffff #33ccff #3366ff #3333ff #000099 #000066 #ccccff #9999ff #6666cc #6633ff #6600cc #333399 #330099 #ffccff #ff99ff #cc66cc #cc33cc #993399 #663366 #330033".split(" "),e.FieldColour.prototype.DEFAULT_VALUE=e.FieldColour.COLOURS[0],e.FieldColour.TITLES=[],e.FieldColour.COLUMNS=7,e.FieldColour.prototype.setColours=function(t,n){return this.colours_=t,n&&(this.titles_=n),this},e.FieldColour.prototype.setColumns=function(t){return this.columns_=t,this},e.FieldColour.prototype.showEditor_=function(){this.dropdownCreate_(),e.DropDownDiv.getContentDiv().appendChild(this.picker_),e.DropDownDiv.showPositionedByField(this,this.dropdownDispose_.bind(this)),this.picker_.focus({preventScroll:!0})},e.FieldColour.prototype.onClick_=function(t){null!==(t=(t=t.target)&&t.label)&&(this.setValue(t),e.DropDownDiv.hideIfOwner(this))},e.FieldColour.prototype.onKeyDown_=function(t){var n=!1;t.keyCode===e.utils.KeyCodes.UP?(this.moveHighlightBy_(0,-1),n=!0):t.keyCode===e.utils.KeyCodes.DOWN?(this.moveHighlightBy_(0,1),n=!0):t.keyCode===e.utils.KeyCodes.LEFT?(this.moveHighlightBy_(-1,0),n=!0):t.keyCode===e.utils.KeyCodes.RIGHT?(this.moveHighlightBy_(1,0),n=!0):t.keyCode===e.utils.KeyCodes.ENTER&&((n=this.getHighlighted_())&&null!==(n=n&&n.label)&&this.setValue(n),e.DropDownDiv.hideWithoutAnimation(),n=!0),n&&t.stopPropagation()},e.FieldColour.prototype.moveHighlightBy_=function(t,n){var r=this.colours_||e.FieldColour.COLOURS,s=this.columns_||e.FieldColour.COLUMNS,u=this.highlightedIndex_%s,y=Math.floor(this.highlightedIndex_/s);u+=t,y+=n,0>t?0>u&&0<y?(u=s-1,y--):0>u&&(u=0):0<t?u>s-1&&y<Math.floor(r.length/s)-1?(u=0,y++):u>s-1&&u--:0>n?0>y&&(y=0):0<n&&y>Math.floor(r.length/s)-1&&(y=Math.floor(r.length/s)-1),this.setHighlightedCell_(this.picker_.childNodes[y].childNodes[u],y*s+u)},e.FieldColour.prototype.onMouseMove_=function(t){var n=(t=t.target)&&Number(t.getAttribute("data-index"));null!==n&&n!==this.highlightedIndex_&&this.setHighlightedCell_(t,n)},e.FieldColour.prototype.onMouseEnter_=function(){this.picker_.focus({preventScroll:!0})},e.FieldColour.prototype.onMouseLeave_=function(){this.picker_.blur();var t=this.getHighlighted_();t&&e.utils.dom.removeClass(t,"blocklyColourHighlighted")},e.FieldColour.prototype.getHighlighted_=function(){var t=this.columns_||e.FieldColour.COLUMNS,n=this.picker_.childNodes[Math.floor(this.highlightedIndex_/t)];return n?n.childNodes[this.highlightedIndex_%t]:null},e.FieldColour.prototype.setHighlightedCell_=function(t,n){var r=this.getHighlighted_();r&&e.utils.dom.removeClass(r,"blocklyColourHighlighted"),e.utils.dom.addClass(t,"blocklyColourHighlighted"),this.highlightedIndex_=n,e.utils.aria.setState(this.picker_,e.utils.aria.State.ACTIVEDESCENDANT,t.getAttribute("id"))},e.FieldColour.prototype.dropdownCreate_=function(){var t=this.columns_||e.FieldColour.COLUMNS,n=this.colours_||e.FieldColour.COLOURS,r=this.titles_||e.FieldColour.TITLES,s=this.getValue(),u=document.createElement("table");u.className="blocklyColourTable",u.tabIndex=0,u.dir="ltr",e.utils.aria.setRole(u,e.utils.aria.Role.GRID),e.utils.aria.setState(u,e.utils.aria.State.EXPANDED,!0),e.utils.aria.setState(u,e.utils.aria.State.ROWCOUNT,Math.floor(n.length/t)),e.utils.aria.setState(u,e.utils.aria.State.COLCOUNT,t);for(var y,x=0;x<n.length;x++){x%t==0&&(y=document.createElement("tr"),e.utils.aria.setRole(y,e.utils.aria.Role.ROW),u.appendChild(y));var B=document.createElement("td");y.appendChild(B),B.label=n[x],B.title=r[x]||n[x],B.id=e.utils.IdGenerator.getNextUniqueId(),B.setAttribute("data-index",x),e.utils.aria.setRole(B,e.utils.aria.Role.GRIDCELL),e.utils.aria.setState(B,e.utils.aria.State.LABEL,n[x]),e.utils.aria.setState(B,e.utils.aria.State.SELECTED,n[x]==s),B.style.backgroundColor=n[x],n[x]==s&&(B.className="blocklyColourSelected",this.highlightedIndex_=x)}this.onClickWrapper_=e.browserEvents.conditionalBind(u,"click",this,this.onClick_,!0),this.onMouseMoveWrapper_=e.browserEvents.conditionalBind(u,"mousemove",this,this.onMouseMove_,!0),this.onMouseEnterWrapper_=e.browserEvents.conditionalBind(u,"mouseenter",this,this.onMouseEnter_,!0),this.onMouseLeaveWrapper_=e.browserEvents.conditionalBind(u,"mouseleave",this,this.onMouseLeave_,!0),this.onKeyDownWrapper_=e.browserEvents.conditionalBind(u,"keydown",this,this.onKeyDown_),this.picker_=u},e.FieldColour.prototype.dropdownDispose_=function(){this.onClickWrapper_&&(e.browserEvents.unbind(this.onClickWrapper_),this.onClickWrapper_=null),this.onMouseMoveWrapper_&&(e.browserEvents.unbind(this.onMouseMoveWrapper_),this.onMouseMoveWrapper_=null),this.onMouseEnterWrapper_&&(e.browserEvents.unbind(this.onMouseEnterWrapper_),this.onMouseEnterWrapper_=null),this.onMouseLeaveWrapper_&&(e.browserEvents.unbind(this.onMouseLeaveWrapper_),this.onMouseLeaveWrapper_=null),this.onKeyDownWrapper_&&(e.browserEvents.unbind(this.onKeyDownWrapper_),this.onKeyDownWrapper_=null),this.highlightedIndex_=this.picker_=null},e.Css.register([".blocklyColourTable {","border-collapse: collapse;","display: block;","outline: none;","padding: 1px;","}",".blocklyColourTable>tr>td {","border: .5px solid #888;","box-sizing: border-box;","cursor: pointer;","display: inline-block;","height: 20px;","padding: 0;","width: 20px;","}",".blocklyColourTable>tr>td.blocklyColourHighlighted {","border-color: #eee;","box-shadow: 2px 2px 7px 2px rgba(0,0,0,.3);","position: relative;","}",".blocklyColourSelected, .blocklyColourSelected:hover {","border-color: #eee !important;","outline: 1px solid #333;","position: relative;","}"]),e.fieldRegistry.register("field_colour",e.FieldColour),e.FieldDropdown=function(t,n,r){"function"!=typeof t&&e.FieldDropdown.validateOptions_(t),this.menuGenerator_=t,this.suffixField=this.prefixField=this.generatedOptions_=null,this.trimOptions_(),this.selectedOption_=this.getOptions(!1)[0],e.FieldDropdown.superClass_.constructor.call(this,this.selectedOption_[1],n,r),this.svgArrow_=this.arrow_=this.imageElement_=this.menu_=this.selectedMenuItem_=null},e.utils.object.inherits(e.FieldDropdown,e.Field),e.FieldDropdown.fromJson=function(t){return new e.FieldDropdown(t.options,void 0,t)},e.FieldDropdown.prototype.fromXml=function(t){this.isOptionListDynamic()&&this.getOptions(!1),this.setValue(t.textContent)},e.FieldDropdown.prototype.SERIALIZABLE=!0,e.FieldDropdown.CHECKMARK_OVERHANG=25,e.FieldDropdown.MAX_MENU_HEIGHT_VH=.45,e.FieldDropdown.IMAGE_Y_OFFSET=5,e.FieldDropdown.IMAGE_Y_PADDING=2*e.FieldDropdown.IMAGE_Y_OFFSET,e.FieldDropdown.ARROW_CHAR=e.utils.userAgent.ANDROID?"\u25bc":"\u25be",e.FieldDropdown.prototype.CURSOR="default",e.FieldDropdown.prototype.initView=function(){this.shouldAddBorderRect_()?this.createBorderRect_():this.clickTarget_=this.sourceBlock_.getSvgRoot(),this.createTextElement_(),this.imageElement_=e.utils.dom.createSvgElement(e.utils.Svg.IMAGE,{},this.fieldGroup_),this.getConstants().FIELD_DROPDOWN_SVG_ARROW?this.createSVGArrow_():this.createTextArrow_(),this.borderRect_&&e.utils.dom.addClass(this.borderRect_,"blocklyDropdownRect")},e.FieldDropdown.prototype.shouldAddBorderRect_=function(){return!this.getConstants().FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW||this.getConstants().FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW&&!this.sourceBlock_.isShadow()},e.FieldDropdown.prototype.createTextArrow_=function(){this.arrow_=e.utils.dom.createSvgElement(e.utils.Svg.TSPAN,{},this.textElement_),this.arrow_.appendChild(document.createTextNode(this.sourceBlock_.RTL?e.FieldDropdown.ARROW_CHAR+" ":" "+e.FieldDropdown.ARROW_CHAR)),this.sourceBlock_.RTL?this.textElement_.insertBefore(this.arrow_,this.textContent_):this.textElement_.appendChild(this.arrow_)},e.FieldDropdown.prototype.createSVGArrow_=function(){this.svgArrow_=e.utils.dom.createSvgElement(e.utils.Svg.IMAGE,{height:this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE+"px",width:this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE+"px"},this.fieldGroup_),this.svgArrow_.setAttributeNS(e.utils.dom.XLINK_NS,"xlink:href",this.getConstants().FIELD_DROPDOWN_SVG_ARROW_DATAURI)},e.FieldDropdown.prototype.showEditor_=function(t){if(this.dropdownCreate_(),this.menu_.openingCoords=t&&"number"==typeof t.clientX?new e.utils.Coordinate(t.clientX,t.clientY):null,this.menu_.render(e.DropDownDiv.getContentDiv()),t=this.menu_.getElement(),e.utils.dom.addClass(t,"blocklyDropdownMenu"),this.getConstants().FIELD_DROPDOWN_COLOURED_DIV){t=this.sourceBlock_.isShadow()?this.sourceBlock_.getParent().getColour():this.sourceBlock_.getColour();var n=this.sourceBlock_.isShadow()?this.sourceBlock_.getParent().style.colourTertiary:this.sourceBlock_.style.colourTertiary;e.DropDownDiv.setColour(t,n)}e.DropDownDiv.showPositionedByField(this,this.dropdownDispose_.bind(this)),this.menu_.focus(),this.selectedMenuItem_&&this.menu_.setHighlighted(this.selectedMenuItem_),this.applyColour()},e.FieldDropdown.prototype.dropdownCreate_=function(){var t=new e.Menu;t.setRole(e.utils.aria.Role.LISTBOX),this.menu_=t;var n=this.getOptions(!1);this.selectedMenuItem_=null;for(var r=0;r<n.length;r++){var s=n[r][0],u=n[r][1];if("object"==typeof s){var y=new Image(s.width,s.height);y.src=s.src,y.alt=s.alt||"",s=y}(s=new e.MenuItem(s,u)).setRole(e.utils.aria.Role.OPTION),s.setRightToLeft(this.sourceBlock_.RTL),s.setCheckable(!0),t.addChild(s),s.setChecked(u==this.value_),u==this.value_&&(this.selectedMenuItem_=s),s.onAction(this.handleMenuActionEvent_,this)}},e.FieldDropdown.prototype.dropdownDispose_=function(){this.menu_&&this.menu_.dispose(),this.selectedMenuItem_=this.menu_=null,this.applyColour()},e.FieldDropdown.prototype.handleMenuActionEvent_=function(t){e.DropDownDiv.hideIfOwner(this,!0),this.onItemSelected_(this.menu_,t)},e.FieldDropdown.prototype.onItemSelected_=function(t,n){this.setValue(n.getValue())},e.FieldDropdown.prototype.trimOptions_=function(){var t=this.menuGenerator_;if(Array.isArray(t)){for(var n=!1,r=0;r<t.length;r++){var s=t[r][0];"string"==typeof s?t[r][0]=e.utils.replaceMessageReferences(s):(null!=s.alt&&(t[r][0].alt=e.utils.replaceMessageReferences(s.alt)),n=!0)}if(!(n||2>t.length)){for(n=[],r=0;r<t.length;r++)n.push(t[r][0]);r=e.utils.string.shortestStringLength(n),s=e.utils.string.commonWordPrefix(n,r);var u=e.utils.string.commonWordSuffix(n,r);!s&&!u||r<=s+u||(s&&(this.prefixField=n[0].substring(0,s-1)),u&&(this.suffixField=n[0].substr(1-u)),this.menuGenerator_=e.FieldDropdown.applyTrim_(t,s,u))}}},e.FieldDropdown.applyTrim_=function(t,n,r){for(var s=[],u=0;u<t.length;u++){var y=t[u][0],x=t[u][1];y=y.substring(n,y.length-r),s[u]=[y,x]}return s},e.FieldDropdown.prototype.isOptionListDynamic=function(){return"function"==typeof this.menuGenerator_},e.FieldDropdown.prototype.getOptions=function(t){return this.isOptionListDynamic()?(this.generatedOptions_&&t||(this.generatedOptions_=this.menuGenerator_.call(this),e.FieldDropdown.validateOptions_(this.generatedOptions_)),this.generatedOptions_):this.menuGenerator_},e.FieldDropdown.prototype.doClassValidation_=function(t){for(var u,n=!1,r=this.getOptions(!0),s=0;u=r[s];s++)if(u[1]==t){n=!0;break}return n?t:(this.sourceBlock_&&console.warn("Cannot set the dropdown's value to an unavailable option. Block type: "+this.sourceBlock_.type+", Field name: "+this.name+", Value: "+t),null)},e.FieldDropdown.prototype.doValueUpdate_=function(t){e.FieldDropdown.superClass_.doValueUpdate_.call(this,t),t=this.getOptions(!0);for(var r,n=0;r=t[n];n++)r[1]==this.value_&&(this.selectedOption_=r)},e.FieldDropdown.prototype.applyColour=function(){this.borderRect_&&(this.borderRect_.setAttribute("stroke",this.sourceBlock_.style.colourTertiary),this.borderRect_.setAttribute("fill",this.menu_?this.sourceBlock_.style.colourTertiary:"transparent")),this.sourceBlock_&&this.arrow_&&(this.arrow_.style.fill=this.sourceBlock_.isShadow()?this.sourceBlock_.style.colourSecondary:this.sourceBlock_.style.colourPrimary)},e.FieldDropdown.prototype.render_=function(){this.textContent_.nodeValue="",this.imageElement_.style.display="none";var t=this.selectedOption_&&this.selectedOption_[0];t&&"object"==typeof t?this.renderSelectedImage_(t):this.renderSelectedText_(),this.positionBorderRect_()},e.FieldDropdown.prototype.renderSelectedImage_=function(t){this.imageElement_.style.display="",this.imageElement_.setAttributeNS(e.utils.dom.XLINK_NS,"xlink:href",t.src),this.imageElement_.setAttribute("height",t.height),this.imageElement_.setAttribute("width",t.width);var n=Number(t.height);t=Number(t.width);var r=!!this.borderRect_,s=Math.max(r?this.getConstants().FIELD_DROPDOWN_BORDER_RECT_HEIGHT:0,n+e.FieldDropdown.IMAGE_Y_PADDING);r=r?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0;var u=this.svgArrow_?this.positionSVGArrow_(t+r,s/2-this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE/2):e.utils.dom.getFastTextWidth(this.arrow_,this.getConstants().FIELD_TEXT_FONTSIZE,this.getConstants().FIELD_TEXT_FONTWEIGHT,this.getConstants().FIELD_TEXT_FONTFAMILY);this.size_.width=t+u+2*r,this.size_.height=s;var y=0;this.sourceBlock_.RTL?this.imageElement_.setAttribute("x",r+u):(y=t+u,this.textElement_.setAttribute("text-anchor","end"),this.imageElement_.setAttribute("x",r)),this.imageElement_.setAttribute("y",s/2-n/2),this.positionTextElement_(y+r,t+u)},e.FieldDropdown.prototype.renderSelectedText_=function(){this.textContent_.nodeValue=this.getDisplayText_(),e.utils.dom.addClass(this.textElement_,"blocklyDropdownText"),this.textElement_.setAttribute("text-anchor","start");var t=!!this.borderRect_,n=Math.max(t?this.getConstants().FIELD_DROPDOWN_BORDER_RECT_HEIGHT:0,this.getConstants().FIELD_TEXT_HEIGHT),r=e.utils.dom.getFastTextWidth(this.textElement_,this.getConstants().FIELD_TEXT_FONTSIZE,this.getConstants().FIELD_TEXT_FONTWEIGHT,this.getConstants().FIELD_TEXT_FONTFAMILY);t=t?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0;var s=0;this.svgArrow_&&(s=this.positionSVGArrow_(r+t,n/2-this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE/2)),this.size_.width=r+s+2*t,this.size_.height=n,this.positionTextElement_(t,r)},e.FieldDropdown.prototype.positionSVGArrow_=function(t,n){if(!this.svgArrow_)return 0;var r=this.borderRect_?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0,s=this.getConstants().FIELD_DROPDOWN_SVG_ARROW_PADDING,u=this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE;return this.svgArrow_.setAttribute("transform","translate("+(this.sourceBlock_.RTL?r:t+s)+","+n+")"),u+s},e.FieldDropdown.prototype.getText_=function(){if(!this.selectedOption_)return null;var t=this.selectedOption_[0];return"object"==typeof t?t.alt:t},e.FieldDropdown.validateOptions_=function(t){if(!Array.isArray(t))throw TypeError("FieldDropdown options must be an array.");if(!t.length)throw TypeError("FieldDropdown options must not be an empty array.");for(var n=!1,r=0;r<t.length;++r){var s=t[r];Array.isArray(s)?"string"!=typeof s[1]?(n=!0,console.error("Invalid option["+r+"]: Each FieldDropdown option id must be a string. Found "+s[1]+" in: ",s)):s[0]&&"string"!=typeof s[0]&&"string"!=typeof s[0].src&&(n=!0,console.error("Invalid option["+r+"]: Each FieldDropdown option must have a string label or image description. Found"+s[0]+" in: ",s)):(n=!0,console.error("Invalid option["+r+"]: Each FieldDropdown option must be an array. Found: ",s))}if(n)throw TypeError("Found invalid FieldDropdown options.")},e.fieldRegistry.register("field_dropdown",e.FieldDropdown),e.FieldLabelSerializable=function(t,n,r){e.FieldLabelSerializable.superClass_.constructor.call(this,t,n,r)},e.utils.object.inherits(e.FieldLabelSerializable,e.FieldLabel),e.FieldLabelSerializable.fromJson=function(t){var n=e.utils.replaceMessageReferences(t.text);return new e.FieldLabelSerializable(n,void 0,t)},e.FieldLabelSerializable.prototype.EDITABLE=!1,e.FieldLabelSerializable.prototype.SERIALIZABLE=!0,e.fieldRegistry.register("field_label_serializable",e.FieldLabelSerializable),e.FieldImage=function(t,n,r,s,u,y,x){if(!t)throw Error("Src value of an image field is required");if(t=e.utils.replaceMessageReferences(t),r=Number(e.utils.replaceMessageReferences(r)),n=Number(e.utils.replaceMessageReferences(n)),isNaN(r)||isNaN(n))throw Error("Height and width values of an image field must cast to numbers.");if(0>=r||0>=n)throw Error("Height and width values of an image field must be greater than 0.");this.flipRtl_=!1,this.altText_="",e.FieldImage.superClass_.constructor.call(this,t,null,x),x||(this.flipRtl_=!!y,this.altText_=e.utils.replaceMessageReferences(s)||""),this.size_=new e.utils.Size(n,r+e.FieldImage.Y_PADDING),this.imageHeight_=r,this.clickHandler_=null,"function"==typeof u&&(this.clickHandler_=u),this.imageElement_=null},e.utils.object.inherits(e.FieldImage,e.Field),e.FieldImage.prototype.DEFAULT_VALUE="",e.FieldImage.fromJson=function(t){return new e.FieldImage(t.src,t.width,t.height,void 0,void 0,void 0,t)},e.FieldImage.Y_PADDING=1,e.FieldImage.prototype.EDITABLE=!1,e.FieldImage.prototype.isDirty_=!1,e.FieldImage.prototype.configure_=function(t){e.FieldImage.superClass_.configure_.call(this,t),this.flipRtl_=!!t.flipRtl,this.altText_=e.utils.replaceMessageReferences(t.alt)||""},e.FieldImage.prototype.initView=function(){this.imageElement_=e.utils.dom.createSvgElement(e.utils.Svg.IMAGE,{height:this.imageHeight_+"px",width:this.size_.width+"px",alt:this.altText_},this.fieldGroup_),this.imageElement_.setAttributeNS(e.utils.dom.XLINK_NS,"xlink:href",this.value_),this.clickHandler_&&(this.imageElement_.style.cursor="pointer")},e.FieldImage.prototype.updateSize_=function(){},e.FieldImage.prototype.doClassValidation_=function(t){return"string"!=typeof t?null:t},e.FieldImage.prototype.doValueUpdate_=function(t){this.value_=t,this.imageElement_&&this.imageElement_.setAttributeNS(e.utils.dom.XLINK_NS,"xlink:href",String(this.value_))},e.FieldImage.prototype.getFlipRtl=function(){return this.flipRtl_},e.FieldImage.prototype.setAlt=function(t){t!=this.altText_&&(this.altText_=t||"",this.imageElement_&&this.imageElement_.setAttribute("alt",this.altText_))},e.FieldImage.prototype.showEditor_=function(){this.clickHandler_&&this.clickHandler_(this)},e.FieldImage.prototype.setOnClickHandler=function(t){this.clickHandler_=t},e.FieldImage.prototype.getText_=function(){return this.altText_},e.fieldRegistry.register("field_image",e.FieldImage),e.FieldMultilineInput=function(t,n,r){e.FieldMultilineInput.superClass_.constructor.call(this,t,n,r),this.textGroup_=null,this.maxLines_=1/0,this.isOverflowedY_=!1},e.utils.object.inherits(e.FieldMultilineInput,e.FieldTextInput),e.FieldMultilineInput.prototype.configure_=function(t){e.FieldMultilineInput.superClass_.configure_.call(this,t),t.maxLines&&this.setMaxLines(t.maxLines)},e.FieldMultilineInput.fromJson=function(t){var n=e.utils.replaceMessageReferences(t.text);return new e.FieldMultilineInput(n,void 0,t)},e.FieldMultilineInput.prototype.toXml=function(t){return t.textContent=this.getValue().replace(/\n/g,"&#10;"),t},e.FieldMultilineInput.prototype.fromXml=function(t){this.setValue(t.textContent.replace(/&#10;/g,"\n"))},e.FieldMultilineInput.prototype.initView=function(){this.createBorderRect_(),this.textGroup_=e.utils.dom.createSvgElement(e.utils.Svg.G,{class:"blocklyEditableText"},this.fieldGroup_)},e.FieldMultilineInput.prototype.getDisplayText_=function(){var t=this.getText();if(!t)return e.Field.NBSP;var n=t.split("\n");t="";for(var r=this.isOverflowedY_?this.maxLines_:n.length,s=0;s<r;s++){var u=n[s];u.length>this.maxDisplayLength?u=u.substring(0,this.maxDisplayLength-4)+"...":this.isOverflowedY_&&s===r-1&&(u=u.substring(0,u.length-3)+"..."),t+=u=u.replace(/\s/g,e.Field.NBSP),s!==r-1&&(t+="\n")}return this.sourceBlock_.RTL&&(t+="\u200f"),t},e.FieldMultilineInput.prototype.doValueUpdate_=function(t){e.FieldMultilineInput.superClass_.doValueUpdate_.call(this,t),this.isOverflowedY_=this.value_.split("\n").length>this.maxLines_},e.FieldMultilineInput.prototype.render_=function(){for(var t;t=this.textGroup_.firstChild;)this.textGroup_.removeChild(t);t=this.getDisplayText_().split("\n");for(var n=0,r=0;r<t.length;r++){var s=this.getConstants().FIELD_TEXT_HEIGHT+this.getConstants().FIELD_BORDER_RECT_Y_PADDING;e.utils.dom.createSvgElement(e.utils.Svg.TEXT,{class:"blocklyText blocklyMultilineText",x:this.getConstants().FIELD_BORDER_RECT_X_PADDING,y:n+this.getConstants().FIELD_BORDER_RECT_Y_PADDING,dy:this.getConstants().FIELD_TEXT_BASELINE},this.textGroup_).appendChild(document.createTextNode(t[r])),n+=s}this.isBeingEdited_&&(t=this.htmlInput_,this.isOverflowedY_?e.utils.dom.addClass(t,"blocklyHtmlTextAreaInputOverflowedY"):e.utils.dom.removeClass(t,"blocklyHtmlTextAreaInputOverflowedY")),this.updateSize_(),this.isBeingEdited_&&(this.sourceBlock_.RTL?setTimeout(this.resizeEditor_.bind(this),0):this.resizeEditor_(),t=this.htmlInput_,this.isTextValid_?(e.utils.dom.removeClass(t,"blocklyInvalidInput"),e.utils.aria.setState(t,e.utils.aria.State.INVALID,!1)):(e.utils.dom.addClass(t,"blocklyInvalidInput"),e.utils.aria.setState(t,e.utils.aria.State.INVALID,!0)))},e.FieldMultilineInput.prototype.updateSize_=function(){for(var t=this.textGroup_.childNodes,n=0,r=0,s=0;s<t.length;s++){var u=e.utils.dom.getTextWidth(t[s]);u>n&&(n=u),r+=this.getConstants().FIELD_TEXT_HEIGHT+(0<s?this.getConstants().FIELD_BORDER_RECT_Y_PADDING:0)}if(this.isBeingEdited_){t=this.value_.split("\n"),u=e.utils.dom.createSvgElement(e.utils.Svg.TEXT,{class:"blocklyText blocklyMultilineText"});var y=this.getConstants().FIELD_TEXT_FONTSIZE,x=this.getConstants().FIELD_TEXT_FONTWEIGHT,B=this.getConstants().FIELD_TEXT_FONTFAMILY;for(s=0;s<t.length;s++){t[s].length>this.maxDisplayLength&&(t[s]=t[s].substring(0,this.maxDisplayLength)),u.textContent=t[s];var Q=e.utils.dom.getFastTextWidth(u,y,x,B);Q>n&&(n=Q)}n+=this.htmlInput_.offsetWidth-this.htmlInput_.clientWidth}this.borderRect_&&(r+=2*this.getConstants().FIELD_BORDER_RECT_Y_PADDING,n+=2*this.getConstants().FIELD_BORDER_RECT_X_PADDING,this.borderRect_.setAttribute("width",n),this.borderRect_.setAttribute("height",r)),this.size_.width=n,this.size_.height=r,this.positionBorderRect_()},e.FieldMultilineInput.prototype.showEditor_=function(t,n){e.FieldMultilineInput.superClass_.showEditor_.call(this,t,n),this.forceRerender()},e.FieldMultilineInput.prototype.widgetCreate_=function(){var t=e.WidgetDiv.DIV,n=this.workspace_.getScale(),r=document.createElement("textarea");r.className="blocklyHtmlInput blocklyHtmlTextAreaInput",r.setAttribute("spellcheck",this.spellcheck_);var s=this.getConstants().FIELD_TEXT_FONTSIZE*n+"pt";t.style.fontSize=s,r.style.fontSize=s,r.style.borderRadius=e.FieldTextInput.BORDERRADIUS*n+"px",s=this.getConstants().FIELD_BORDER_RECT_X_PADDING*n;var u=this.getConstants().FIELD_BORDER_RECT_Y_PADDING*n/2;return r.style.padding=u+"px "+s+"px "+u+"px "+s+"px",s=this.getConstants().FIELD_TEXT_HEIGHT+this.getConstants().FIELD_BORDER_RECT_Y_PADDING,r.style.lineHeight=s*n+"px",t.appendChild(r),r.value=r.defaultValue=this.getEditorText_(this.value_),r.untypedDefaultValue_=this.value_,r.oldValue_=null,e.utils.userAgent.GECKO?setTimeout(this.resizeEditor_.bind(this),0):this.resizeEditor_(),this.bindInputEvents_(r),r},e.FieldMultilineInput.prototype.setMaxLines=function(t){"number"==typeof t&&0<t&&t!==this.maxLines_&&(this.maxLines_=t,this.forceRerender())},e.FieldMultilineInput.prototype.getMaxLines=function(){return this.maxLines_},e.FieldMultilineInput.prototype.onHtmlInputKeyDown_=function(t){t.keyCode!==e.utils.KeyCodes.ENTER&&e.FieldMultilineInput.superClass_.onHtmlInputKeyDown_.call(this,t)},e.Css.register(".blocklyHtmlTextAreaInput {,font-family: monospace;,resize: none;,overflow: hidden;,height: 100%;,text-align: left;,},.blocklyHtmlTextAreaInputOverflowedY {,overflow-y: scroll;,}".split(",")),e.fieldRegistry.register("field_multilinetext",e.FieldMultilineInput),e.FieldNumber=function(t,n,r,s,u,y){this.min_=-1/0,this.max_=1/0,this.precision_=0,this.decimalPlaces_=null,e.FieldNumber.superClass_.constructor.call(this,t,u,y),y||this.setConstraints(n,r,s)},e.utils.object.inherits(e.FieldNumber,e.FieldTextInput),e.FieldNumber.prototype.DEFAULT_VALUE=0,e.FieldNumber.fromJson=function(t){return new e.FieldNumber(t.value,void 0,void 0,void 0,void 0,t)},e.FieldNumber.prototype.SERIALIZABLE=!0,e.FieldNumber.prototype.configure_=function(t){e.FieldNumber.superClass_.configure_.call(this,t),this.setMinInternal_(t.min),this.setMaxInternal_(t.max),this.setPrecisionInternal_(t.precision)},e.FieldNumber.prototype.setConstraints=function(t,n,r){this.setMinInternal_(t),this.setMaxInternal_(n),this.setPrecisionInternal_(r),this.setValue(this.getValue())},e.FieldNumber.prototype.setMin=function(t){this.setMinInternal_(t),this.setValue(this.getValue())},e.FieldNumber.prototype.setMinInternal_=function(t){null==t?this.min_=-1/0:(t=Number(t),isNaN(t)||(this.min_=t))},e.FieldNumber.prototype.getMin=function(){return this.min_},e.FieldNumber.prototype.setMax=function(t){this.setMaxInternal_(t),this.setValue(this.getValue())},e.FieldNumber.prototype.setMaxInternal_=function(t){null==t?this.max_=1/0:(t=Number(t),isNaN(t)||(this.max_=t))},e.FieldNumber.prototype.getMax=function(){return this.max_},e.FieldNumber.prototype.setPrecision=function(t){this.setPrecisionInternal_(t),this.setValue(this.getValue())},e.FieldNumber.prototype.setPrecisionInternal_=function(t){this.precision_=Number(t)||0;var n=String(this.precision_);-1!=n.indexOf("e")&&(n=this.precision_.toLocaleString("en-US",{maximumFractionDigits:20}));var r=n.indexOf(".");this.decimalPlaces_=-1==r?t?0:null:n.length-r-1},e.FieldNumber.prototype.getPrecision=function(){return this.precision_},e.FieldNumber.prototype.doClassValidation_=function(t){return null===t||(t=(t=(t=(t=String(t)).replace(/O/gi,"0")).replace(/,/g,"")).replace(/infinity/i,"Infinity"),t=Number(t||0),isNaN(t))?null:(t=Math.min(Math.max(t,this.min_),this.max_),this.precision_&&isFinite(t)&&(t=Math.round(t/this.precision_)*this.precision_),null!=this.decimalPlaces_&&(t=Number(t.toFixed(this.decimalPlaces_))),t)},e.FieldNumber.prototype.widgetCreate_=function(){var t=e.FieldNumber.superClass_.widgetCreate_.call(this);return-1/0<this.min_&&e.utils.aria.setState(t,e.utils.aria.State.VALUEMIN,this.min_),1/0>this.max_&&e.utils.aria.setState(t,e.utils.aria.State.VALUEMAX,this.max_),t},e.fieldRegistry.register("field_number",e.FieldNumber),e.FieldVariable=function(t,n,r,s,u){this.menuGenerator_=e.FieldVariable.dropdownCreate,this.defaultVariableName="string"==typeof t?t:"",this.size_=new e.utils.Size(0,0),u&&this.configure_(u),n&&this.setValidator(n),u||this.setTypes_(r,s)},e.utils.object.inherits(e.FieldVariable,e.FieldDropdown),e.FieldVariable.fromJson=function(t){var n=e.utils.replaceMessageReferences(t.variable);return new e.FieldVariable(n,void 0,void 0,void 0,t)},e.FieldVariable.prototype.SERIALIZABLE=!0,e.FieldVariable.prototype.configure_=function(t){e.FieldVariable.superClass_.configure_.call(this,t),this.setTypes_(t.variableTypes,t.defaultType)},e.FieldVariable.prototype.initModel=function(){if(!this.variable_){var t=e.Variables.getOrCreateVariablePackage(this.sourceBlock_.workspace,null,this.defaultVariableName,this.defaultType_);this.doValueUpdate_(t.getId())}},e.FieldVariable.prototype.shouldAddBorderRect_=function(){return e.FieldVariable.superClass_.shouldAddBorderRect_.call(this)&&(!this.getConstants().FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW||"variables_get"!=this.sourceBlock_.type)},e.FieldVariable.prototype.fromXml=function(t){var n=t.getAttribute("id"),r=t.textContent,s=t.getAttribute("variabletype")||t.getAttribute("variableType")||"";if(n=e.Variables.getOrCreateVariablePackage(this.sourceBlock_.workspace,n,r,s),null!=s&&s!==n.type)throw Error("Serialized variable type with id '"+n.getId()+"' had type "+n.type+", and does not match variable field that references it: "+e.Xml.domToText(t)+".");this.setValue(n.getId())},e.FieldVariable.prototype.toXml=function(t){return this.initModel(),t.id=this.variable_.getId(),t.textContent=this.variable_.name,this.variable_.type&&t.setAttribute("variabletype",this.variable_.type),t},e.FieldVariable.prototype.setSourceBlock=function(t){if(t.isShadow())throw Error("Variable fields are not allowed to exist on shadow blocks.");e.FieldVariable.superClass_.setSourceBlock.call(this,t)},e.FieldVariable.prototype.getValue=function(){return this.variable_?this.variable_.getId():null},e.FieldVariable.prototype.getText=function(){return this.variable_?this.variable_.name:""},e.FieldVariable.prototype.getVariable=function(){return this.variable_},e.FieldVariable.prototype.getValidator=function(){return this.variable_?this.validator_:null},e.FieldVariable.prototype.doClassValidation_=function(t){if(null===t)return null;var n=e.Variables.getVariable(this.sourceBlock_.workspace,t);return n?this.typeIsAllowed_(n=n.type)?t:(console.warn("Variable type doesn't match this field!  Type was "+n),null):(console.warn("Variable id doesn't point to a real variable! ID was "+t),null)},e.FieldVariable.prototype.doValueUpdate_=function(t){this.variable_=e.Variables.getVariable(this.sourceBlock_.workspace,t),e.FieldVariable.superClass_.doValueUpdate_.call(this,t)},e.FieldVariable.prototype.typeIsAllowed_=function(t){var n=this.getVariableTypes_();if(!n)return!0;for(var r=0;r<n.length;r++)if(t==n[r])return!0;return!1},e.FieldVariable.prototype.getVariableTypes_=function(){var t=this.variableTypes;if(null===t&&this.sourceBlock_&&this.sourceBlock_.workspace)return this.sourceBlock_.workspace.getVariableTypes();if(0==(t=t||[""]).length)throw t=this.getText(),Error("'variableTypes' of field variable "+t+" was an empty list");return t},e.FieldVariable.prototype.setTypes_=function(t,n){if(n=n||"",null==t||null==t)t=null;else{if(!Array.isArray(t))throw Error("'variableTypes' was not an array in the definition of a FieldVariable");for(var r=!1,s=0;s<t.length;s++)t[s]==n&&(r=!0);if(!r)throw Error("Invalid default type '"+n+"' in the definition of a FieldVariable")}this.defaultType_=n,this.variableTypes=t},e.FieldVariable.prototype.refreshVariableName=function(){this.forceRerender()},e.FieldVariable.dropdownCreate=function(){if(!this.variable_)throw Error("Tried to call dropdownCreate on a variable field with no variable selected.");var t=this.getText(),n=[];if(this.sourceBlock_&&this.sourceBlock_.workspace)for(var r=this.getVariableTypes_(),s=0;s<r.length;s++){var u=this.sourceBlock_.workspace.getVariablesOfType(r[s]);n=n.concat(u)}for(n.sort(e.VariableModel.compareByName),r=[],s=0;s<n.length;s++)r[s]=[n[s].name,n[s].getId()];return r.push([e.Msg.RENAME_VARIABLE,e.RENAME_VARIABLE_ID]),e.Msg.DELETE_VARIABLE&&r.push([e.Msg.DELETE_VARIABLE.replace("%1",t),e.DELETE_VARIABLE_ID]),r},e.FieldVariable.prototype.onItemSelected_=function(t,n){if(t=n.getValue(),this.sourceBlock_&&this.sourceBlock_.workspace){if(t==e.RENAME_VARIABLE_ID)return void e.Variables.renameVariable(this.sourceBlock_.workspace,this.variable_);if(t==e.DELETE_VARIABLE_ID)return void this.sourceBlock_.workspace.deleteVariableById(this.variable_.getId())}this.setValue(t)},e.FieldVariable.prototype.referencesVariables=function(){return!0},e.fieldRegistry.register("field_variable",e.FieldVariable),e.utils.svgPaths={},e.utils.svgPaths.point=function(t,n){return" "+t+","+n+" "},e.utils.svgPaths.curve=function(t,n){return" "+t+n.join("")},e.utils.svgPaths.moveTo=function(t,n){return" M "+t+","+n+" "},e.utils.svgPaths.moveBy=function(t,n){return" m "+t+","+n+" "},e.utils.svgPaths.lineTo=function(t,n){return" l "+t+","+n+" "},e.utils.svgPaths.line=function(t){return" l"+t.join("")},e.utils.svgPaths.lineOnAxis=function(t,n){return" "+t+" "+n+" "},e.utils.svgPaths.arc=function(t,n,r,s){return t+" "+r+" "+r+" "+n+s},e.blockRendering.ConstantProvider=function(){this.NO_PADDING=0,this.SMALL_PADDING=3,this.MEDIUM_PADDING=5,this.MEDIUM_LARGE_PADDING=8,this.LARGE_PADDING=10,this.TALL_INPUT_FIELD_OFFSET_Y=this.MEDIUM_PADDING,this.TAB_HEIGHT=15,this.TAB_OFFSET_FROM_TOP=5,this.TAB_VERTICAL_OVERLAP=2.5,this.TAB_WIDTH=8,this.NOTCH_WIDTH=15,this.NOTCH_HEIGHT=4,this.MIN_BLOCK_WIDTH=12,this.EMPTY_BLOCK_SPACER_HEIGHT=16,this.DUMMY_INPUT_SHADOW_MIN_HEIGHT=this.DUMMY_INPUT_MIN_HEIGHT=this.TAB_HEIGHT,this.CORNER_RADIUS=8,this.STATEMENT_INPUT_NOTCH_OFFSET=this.NOTCH_OFFSET_LEFT=15,this.STATEMENT_BOTTOM_SPACER=0,this.STATEMENT_INPUT_PADDING_LEFT=20,this.BETWEEN_STATEMENT_PADDING_Y=4,this.TOP_ROW_MIN_HEIGHT=this.MEDIUM_PADDING,this.TOP_ROW_PRECEDES_STATEMENT_MIN_HEIGHT=this.LARGE_PADDING,this.BOTTOM_ROW_MIN_HEIGHT=this.MEDIUM_PADDING,this.BOTTOM_ROW_AFTER_STATEMENT_MIN_HEIGHT=this.LARGE_PADDING,this.ADD_START_HATS=!1,this.START_HAT_HEIGHT=15,this.START_HAT_WIDTH=100,this.SPACER_DEFAULT_HEIGHT=15,this.MIN_BLOCK_HEIGHT=24,this.EMPTY_INLINE_INPUT_PADDING=14.5,this.EMPTY_INLINE_INPUT_HEIGHT=this.TAB_HEIGHT+11,this.EXTERNAL_VALUE_INPUT_PADDING=2,this.EMPTY_STATEMENT_INPUT_HEIGHT=this.MIN_BLOCK_HEIGHT,this.START_POINT=e.utils.svgPaths.moveBy(0,0),this.JAGGED_TEETH_HEIGHT=12,this.JAGGED_TEETH_WIDTH=6,this.FIELD_TEXT_FONTSIZE=11,this.FIELD_TEXT_FONTWEIGHT="normal",this.FIELD_TEXT_FONTFAMILY="sans-serif",this.FIELD_TEXT_BASELINE=this.FIELD_TEXT_HEIGHT=-1,this.FIELD_BORDER_RECT_RADIUS=4,this.FIELD_BORDER_RECT_HEIGHT=16,this.FIELD_BORDER_RECT_X_PADDING=5,this.FIELD_BORDER_RECT_Y_PADDING=3,this.FIELD_BORDER_RECT_COLOUR="#fff",this.FIELD_TEXT_BASELINE_CENTER=!e.utils.userAgent.IE&&!e.utils.userAgent.EDGE,this.FIELD_DROPDOWN_BORDER_RECT_HEIGHT=this.FIELD_BORDER_RECT_HEIGHT,this.FIELD_DROPDOWN_SVG_ARROW=this.FIELD_DROPDOWN_COLOURED_DIV=this.FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW=!1,this.FIELD_DROPDOWN_SVG_ARROW_PADDING=this.FIELD_BORDER_RECT_X_PADDING,this.FIELD_DROPDOWN_SVG_ARROW_SIZE=12,this.FIELD_DROPDOWN_SVG_ARROW_DATAURI="data:image/svg+xml;base64,PHN2ZyBpZD0iTGF5ZXJfMSIgZGF0YS1uYW1lPSJMYXllciAxIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMi43MSIgaGVpZ2h0PSI4Ljc5IiB2aWV3Qm94PSIwIDAgMTIuNzEgOC43OSI+PHRpdGxlPmRyb3Bkb3duLWFycm93PC90aXRsZT48ZyBvcGFjaXR5PSIwLjEiPjxwYXRoIGQ9Ik0xMi43MSwyLjQ0QTIuNDEsMi40MSwwLDAsMSwxMiw0LjE2TDguMDgsOC4wOGEyLjQ1LDIuNDUsMCwwLDEtMy40NSwwTDAuNzIsNC4xNkEyLjQyLDIuNDIsMCwwLDEsMCwyLjQ0LDIuNDgsMi40OCwwLDAsMSwuNzEuNzFDMSwwLjQ3LDEuNDMsMCw2LjM2LDBTMTEuNzUsMC40NiwxMiwuNzFBMi40NCwyLjQ0LDAsMCwxLDEyLjcxLDIuNDRaIiBmaWxsPSIjMjMxZjIwIi8+PC9nPjxwYXRoIGQ9Ik02LjM2LDcuNzlhMS40MywxLjQzLDAsMCwxLTEtLjQyTDEuNDIsMy40NWExLjQ0LDEuNDQsMCwwLDEsMC0yYzAuNTYtLjU2LDkuMzEtMC41Niw5Ljg3LDBhMS40NCwxLjQ0LDAsMCwxLDAsMkw3LjM3LDcuMzdBMS40MywxLjQzLDAsMCwxLDYuMzYsNy43OVoiIGZpbGw9IiNmZmYiLz48L3N2Zz4=",this.FIELD_COLOUR_FULL_BLOCK=this.FIELD_TEXTINPUT_BOX_SHADOW=!1,this.FIELD_COLOUR_DEFAULT_WIDTH=26,this.FIELD_COLOUR_DEFAULT_HEIGHT=this.FIELD_BORDER_RECT_HEIGHT,this.FIELD_CHECKBOX_X_OFFSET=this.FIELD_BORDER_RECT_X_PADDING-3,this.randomIdentifier=String(Math.random()).substring(2),this.embossFilterId="",this.embossFilter_=null,this.disabledPatternId="",this.disabledPattern_=null,this.debugFilterId="",this.cssNode_=this.debugFilter_=null,this.CURSOR_COLOUR="#cc0a0a",this.MARKER_COLOUR="#4286f4",this.CURSOR_WS_WIDTH=100,this.WS_CURSOR_HEIGHT=5,this.CURSOR_STACK_PADDING=10,this.CURSOR_BLOCK_PADDING=2,this.CURSOR_STROKE_WIDTH=4,this.FULL_BLOCK_FIELDS=!1,this.INSERTION_MARKER_COLOUR="#000000",this.INSERTION_MARKER_OPACITY=.2,this.SHAPES={PUZZLE:1,NOTCH:2}},e.blockRendering.ConstantProvider.prototype.init=function(){this.JAGGED_TEETH=this.makeJaggedTeeth(),this.NOTCH=this.makeNotch(),this.START_HAT=this.makeStartHat(),this.PUZZLE_TAB=this.makePuzzleTab(),this.INSIDE_CORNERS=this.makeInsideCorners(),this.OUTSIDE_CORNERS=this.makeOutsideCorners()},e.blockRendering.ConstantProvider.prototype.setTheme=function(t){this.blockStyles=Object.create(null);var r,n=t.blockStyles;for(r in n)this.blockStyles[r]=this.validatedBlockStyle_(n[r]);this.setDynamicProperties_(t)},e.blockRendering.ConstantProvider.prototype.setDynamicProperties_=function(t){this.setFontConstants_(t),this.setComponentConstants_(t),this.ADD_START_HATS=null!=t.startHats?t.startHats:this.ADD_START_HATS},e.blockRendering.ConstantProvider.prototype.setFontConstants_=function(t){this.FIELD_TEXT_FONTFAMILY=t.fontStyle&&null!=t.fontStyle.family?t.fontStyle.family:this.FIELD_TEXT_FONTFAMILY,this.FIELD_TEXT_FONTWEIGHT=t.fontStyle&&null!=t.fontStyle.weight?t.fontStyle.weight:this.FIELD_TEXT_FONTWEIGHT,this.FIELD_TEXT_FONTSIZE=t.fontStyle&&null!=t.fontStyle.size?t.fontStyle.size:this.FIELD_TEXT_FONTSIZE,t=e.utils.dom.measureFontMetrics("Hg",this.FIELD_TEXT_FONTSIZE+"pt",this.FIELD_TEXT_FONTWEIGHT,this.FIELD_TEXT_FONTFAMILY),this.FIELD_TEXT_HEIGHT=t.height,this.FIELD_TEXT_BASELINE=t.baseline},e.blockRendering.ConstantProvider.prototype.setComponentConstants_=function(t){this.CURSOR_COLOUR=t.getComponentStyle("cursorColour")||this.CURSOR_COLOUR,this.MARKER_COLOUR=t.getComponentStyle("markerColour")||this.MARKER_COLOUR,this.INSERTION_MARKER_COLOUR=t.getComponentStyle("insertionMarkerColour")||this.INSERTION_MARKER_COLOUR,this.INSERTION_MARKER_OPACITY=Number(t.getComponentStyle("insertionMarkerOpacity"))||this.INSERTION_MARKER_OPACITY},e.blockRendering.ConstantProvider.prototype.getBlockStyleForColour=function(t){var n="auto_"+t;return this.blockStyles[n]||(this.blockStyles[n]=this.createBlockStyle_(t)),{style:this.blockStyles[n],name:n}},e.blockRendering.ConstantProvider.prototype.getBlockStyle=function(t){return this.blockStyles[t||""]||(t&&0==t.indexOf("auto_")?this.getBlockStyleForColour(t.substring(5)).style:this.createBlockStyle_("#000000"))},e.blockRendering.ConstantProvider.prototype.createBlockStyle_=function(t){return this.validatedBlockStyle_({colourPrimary:t})},e.blockRendering.ConstantProvider.prototype.validatedBlockStyle_=function(t){var n={};return t&&e.utils.object.mixin(n,t),t=e.utils.parseBlockColour(n.colourPrimary||"#000"),n.colourPrimary=t.hex,n.colourSecondary=n.colourSecondary?e.utils.parseBlockColour(n.colourSecondary).hex:this.generateSecondaryColour_(n.colourPrimary),n.colourTertiary=n.colourTertiary?e.utils.parseBlockColour(n.colourTertiary).hex:this.generateTertiaryColour_(n.colourPrimary),n.hat=n.hat||"",n},e.blockRendering.ConstantProvider.prototype.generateSecondaryColour_=function(t){return e.utils.colour.blend("#fff",t,.6)||t},e.blockRendering.ConstantProvider.prototype.generateTertiaryColour_=function(t){return e.utils.colour.blend("#fff",t,.3)||t},e.blockRendering.ConstantProvider.prototype.dispose=function(){this.embossFilter_&&e.utils.dom.removeNode(this.embossFilter_),this.disabledPattern_&&e.utils.dom.removeNode(this.disabledPattern_),this.debugFilter_&&e.utils.dom.removeNode(this.debugFilter_),this.cssNode_=null},e.blockRendering.ConstantProvider.prototype.makeJaggedTeeth=function(){var t=this.JAGGED_TEETH_HEIGHT,n=this.JAGGED_TEETH_WIDTH;return{height:t,width:n,path:e.utils.svgPaths.line([e.utils.svgPaths.point(n,t/4),e.utils.svgPaths.point(2*-n,t/2),e.utils.svgPaths.point(n,t/4)])}},e.blockRendering.ConstantProvider.prototype.makeStartHat=function(){var t=this.START_HAT_HEIGHT,n=this.START_HAT_WIDTH;return{height:t,width:n,path:e.utils.svgPaths.curve("c",[e.utils.svgPaths.point(30,-t),e.utils.svgPaths.point(70,-t),e.utils.svgPaths.point(n,0)])}},e.blockRendering.ConstantProvider.prototype.makePuzzleTab=function(){function t(y){var x=-(y=y?-1:1),B=r/2,Q=B+2.5,at=B+.5,rt=e.utils.svgPaths.point(-n,y*B);return B=e.utils.svgPaths.point(n,y*B),e.utils.svgPaths.curve("c",[e.utils.svgPaths.point(0,y*Q),e.utils.svgPaths.point(-n,x*at),rt])+e.utils.svgPaths.curve("s",[e.utils.svgPaths.point(n,2.5*x),B])}var n=this.TAB_WIDTH,r=this.TAB_HEIGHT,s=t(!0),u=t(!1);return{type:this.SHAPES.PUZZLE,width:n,height:r,pathDown:u,pathUp:s}},e.blockRendering.ConstantProvider.prototype.makeNotch=function(){function t(x){return e.utils.svgPaths.line([e.utils.svgPaths.point(x*s,r),e.utils.svgPaths.point(3*x,0),e.utils.svgPaths.point(x*s,-r)])}var n=this.NOTCH_WIDTH,r=this.NOTCH_HEIGHT,s=(n-3)/2,u=t(1),y=t(-1);return{type:this.SHAPES.NOTCH,width:n,height:r,pathLeft:u,pathRight:y}},e.blockRendering.ConstantProvider.prototype.makeInsideCorners=function(){var t=this.CORNER_RADIUS;return{width:t,height:t,pathTop:e.utils.svgPaths.arc("a","0 0,0",t,e.utils.svgPaths.point(-t,t)),pathBottom:e.utils.svgPaths.arc("a","0 0,0",t,e.utils.svgPaths.point(t,t))}},e.blockRendering.ConstantProvider.prototype.makeOutsideCorners=function(){var t=this.CORNER_RADIUS,n=e.utils.svgPaths.moveBy(0,t)+e.utils.svgPaths.arc("a","0 0,1",t,e.utils.svgPaths.point(t,-t)),r=e.utils.svgPaths.arc("a","0 0,1",t,e.utils.svgPaths.point(t,t)),s=e.utils.svgPaths.arc("a","0 0,1",t,e.utils.svgPaths.point(-t,-t));return{topLeft:n,topRight:r,bottomRight:e.utils.svgPaths.arc("a","0 0,1",t,e.utils.svgPaths.point(-t,t)),bottomLeft:s,rightHeight:t}},e.blockRendering.ConstantProvider.prototype.shapeFor=function(t){switch(t.type){case e.connectionTypes.INPUT_VALUE:case e.connectionTypes.OUTPUT_VALUE:return this.PUZZLE_TAB;case e.connectionTypes.PREVIOUS_STATEMENT:case e.connectionTypes.NEXT_STATEMENT:return this.NOTCH;default:throw Error("Unknown connection type")}},e.blockRendering.ConstantProvider.prototype.createDom=function(t,n,r){this.injectCSS_(n,r),t=e.utils.dom.createSvgElement(e.utils.Svg.DEFS,{},t),n=e.utils.dom.createSvgElement(e.utils.Svg.FILTER,{id:"blocklyEmbossFilter"+this.randomIdentifier},t),e.utils.dom.createSvgElement(e.utils.Svg.FEGAUSSIANBLUR,{in:"SourceAlpha",stdDeviation:1,result:"blur"},n),r=e.utils.dom.createSvgElement(e.utils.Svg.FESPECULARLIGHTING,{in:"blur",surfaceScale:1,specularConstant:.5,specularExponent:10,"lighting-color":"white",result:"specOut"},n),e.utils.dom.createSvgElement(e.utils.Svg.FEPOINTLIGHT,{x:-5e3,y:-1e4,z:2e4},r),e.utils.dom.createSvgElement(e.utils.Svg.FECOMPOSITE,{in:"specOut",in2:"SourceAlpha",operator:"in",result:"specOut"},n),e.utils.dom.createSvgElement(e.utils.Svg.FECOMPOSITE,{in:"SourceGraphic",in2:"specOut",operator:"arithmetic",k1:0,k2:1,k3:1,k4:0},n),this.embossFilterId=n.id,this.embossFilter_=n,n=e.utils.dom.createSvgElement(e.utils.Svg.PATTERN,{id:"blocklyDisabledPattern"+this.randomIdentifier,patternUnits:"userSpaceOnUse",width:10,height:10},t),e.utils.dom.createSvgElement(e.utils.Svg.RECT,{width:10,height:10,fill:"#aaa"},n),e.utils.dom.createSvgElement(e.utils.Svg.PATH,{d:"M 0 0 L 10 10 M 10 0 L 0 10",stroke:"#cc0"},n),this.disabledPatternId=n.id,this.disabledPattern_=n,e.blockRendering.Debug&&(t=e.utils.dom.createSvgElement(e.utils.Svg.FILTER,{id:"blocklyDebugFilter"+this.randomIdentifier,height:"160%",width:"180%",y:"-30%",x:"-40%"},t),n=e.utils.dom.createSvgElement(e.utils.Svg.FECOMPONENTTRANSFER,{result:"outBlur"},t),e.utils.dom.createSvgElement(e.utils.Svg.FEFUNCA,{type:"table",tableValues:"0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1"},n),e.utils.dom.createSvgElement(e.utils.Svg.FEFLOOD,{"flood-color":"#ff0000","flood-opacity":.5,result:"outColor"},t),e.utils.dom.createSvgElement(e.utils.Svg.FECOMPOSITE,{in:"outColor",in2:"outBlur",operator:"in",result:"outGlow"},t),this.debugFilterId=t.id,this.debugFilter_=t)},e.blockRendering.ConstantProvider.prototype.injectCSS_=function(t,n){n=this.getCSS_(n),t="blockly-renderer-style-"+t,this.cssNode_=document.getElementById(t);var r=n.join("\n");this.cssNode_?this.cssNode_.firstChild.textContent=r:((n=document.createElement("style")).id=t,t=document.createTextNode(r),n.appendChild(t),document.head.insertBefore(n,document.head.firstChild),this.cssNode_=n)},e.blockRendering.ConstantProvider.prototype.getCSS_=function(t){return[t+" .blocklyText, ",t+" .blocklyFlyoutLabelText {","font: "+this.FIELD_TEXT_FONTWEIGHT+" "+this.FIELD_TEXT_FONTSIZE+"pt "+this.FIELD_TEXT_FONTFAMILY+";","}",t+" .blocklyText {","fill: #fff;","}",t+" .blocklyNonEditableText>rect,",t+" .blocklyEditableText>rect {","fill: "+this.FIELD_BORDER_RECT_COLOUR+";","fill-opacity: .6;","stroke: none;","}",t+" .blocklyNonEditableText>text,",t+" .blocklyEditableText>text {","fill: #000;","}",t+" .blocklyFlyoutLabelText {","fill: #000;","}",t+" .blocklyText.blocklyBubbleText {","fill: #000;","}",t+" .blocklyEditableText:not(.editing):hover>rect {","stroke: #fff;","stroke-width: 2;","}",t+" .blocklyHtmlInput {","font-family: "+this.FIELD_TEXT_FONTFAMILY+";","font-weight: "+this.FIELD_TEXT_FONTWEIGHT+";","}",t+" .blocklySelected>.blocklyPath {","stroke: #fc3;","stroke-width: 3px;","}",t+" .blocklyHighlightedConnectionPath {","stroke: #fc3;","}",t+" .blocklyReplaceable .blocklyPath {","fill-opacity: .5;","}",t+" .blocklyReplaceable .blocklyPathLight,",t+" .blocklyReplaceable .blocklyPathDark {","display: none;","}",t+" .blocklyInsertionMarker>.blocklyPath {","fill-opacity: "+this.INSERTION_MARKER_OPACITY+";","stroke: none;","}"]},e.blockRendering.Types={NONE:0,FIELD:1,HAT:2,ICON:4,SPACER:8,BETWEEN_ROW_SPACER:16,IN_ROW_SPACER:32,EXTERNAL_VALUE_INPUT:64,INPUT:128,INLINE_INPUT:256,STATEMENT_INPUT:512,CONNECTION:1024,PREVIOUS_CONNECTION:2048,NEXT_CONNECTION:4096,OUTPUT_CONNECTION:8192,CORNER:16384,LEFT_SQUARE_CORNER:32768,LEFT_ROUND_CORNER:65536,RIGHT_SQUARE_CORNER:131072,RIGHT_ROUND_CORNER:262144,JAGGED_EDGE:524288,ROW:1048576,TOP_ROW:2097152,BOTTOM_ROW:4194304,INPUT_ROW:8388608},e.blockRendering.Types.LEFT_CORNER=e.blockRendering.Types.LEFT_SQUARE_CORNER|e.blockRendering.Types.LEFT_ROUND_CORNER,e.blockRendering.Types.RIGHT_CORNER=e.blockRendering.Types.RIGHT_SQUARE_CORNER|e.blockRendering.Types.RIGHT_ROUND_CORNER,e.blockRendering.Types.nextTypeValue_=16777216,e.blockRendering.Types.getType=function(t){return Object.prototype.hasOwnProperty.call(e.blockRendering.Types,t)||(e.blockRendering.Types[t]=e.blockRendering.Types.nextTypeValue_,e.blockRendering.Types.nextTypeValue_<<=1),e.blockRendering.Types[t]},e.blockRendering.Types.isField=function(t){return t.type&e.blockRendering.Types.FIELD},e.blockRendering.Types.isHat=function(t){return t.type&e.blockRendering.Types.HAT},e.blockRendering.Types.isIcon=function(t){return t.type&e.blockRendering.Types.ICON},e.blockRendering.Types.isSpacer=function(t){return t.type&e.blockRendering.Types.SPACER},e.blockRendering.Types.isInRowSpacer=function(t){return t.type&e.blockRendering.Types.IN_ROW_SPACER},e.blockRendering.Types.isInput=function(t){return t.type&e.blockRendering.Types.INPUT},e.blockRendering.Types.isExternalInput=function(t){return t.type&e.blockRendering.Types.EXTERNAL_VALUE_INPUT},e.blockRendering.Types.isInlineInput=function(t){return t.type&e.blockRendering.Types.INLINE_INPUT},e.blockRendering.Types.isStatementInput=function(t){return t.type&e.blockRendering.Types.STATEMENT_INPUT},e.blockRendering.Types.isPreviousConnection=function(t){return t.type&e.blockRendering.Types.PREVIOUS_CONNECTION},e.blockRendering.Types.isNextConnection=function(t){return t.type&e.blockRendering.Types.NEXT_CONNECTION},e.blockRendering.Types.isPreviousOrNextConnection=function(t){return t.type&(e.blockRendering.Types.PREVIOUS_CONNECTION|e.blockRendering.Types.NEXT_CONNECTION)},e.blockRendering.Types.isLeftRoundedCorner=function(t){return t.type&e.blockRendering.Types.LEFT_ROUND_CORNER},e.blockRendering.Types.isRightRoundedCorner=function(t){return t.type&e.blockRendering.Types.RIGHT_ROUND_CORNER},e.blockRendering.Types.isLeftSquareCorner=function(t){return t.type&e.blockRendering.Types.LEFT_SQUARE_CORNER},e.blockRendering.Types.isRightSquareCorner=function(t){return t.type&e.blockRendering.Types.RIGHT_SQUARE_CORNER},e.blockRendering.Types.isCorner=function(t){return t.type&e.blockRendering.Types.CORNER},e.blockRendering.Types.isJaggedEdge=function(t){return t.type&e.blockRendering.Types.JAGGED_EDGE},e.blockRendering.Types.isRow=function(t){return t.type&e.blockRendering.Types.ROW},e.blockRendering.Types.isBetweenRowSpacer=function(t){return t.type&e.blockRendering.Types.BETWEEN_ROW_SPACER},e.blockRendering.Types.isTopRow=function(t){return t.type&e.blockRendering.Types.TOP_ROW},e.blockRendering.Types.isBottomRow=function(t){return t.type&e.blockRendering.Types.BOTTOM_ROW},e.blockRendering.Types.isTopOrBottomRow=function(t){return t.type&(e.blockRendering.Types.TOP_ROW|e.blockRendering.Types.BOTTOM_ROW)},e.blockRendering.Types.isInputRow=function(t){return t.type&e.blockRendering.Types.INPUT_ROW},e.blockRendering.Measurable=function(t){this.height=this.width=0,this.type=e.blockRendering.Types.NONE,this.centerline=this.xPos=0,this.constants_=t,this.notchOffset=this.constants_.NOTCH_OFFSET_LEFT},e.blockRendering.Connection=function(t,n){e.blockRendering.Connection.superClass_.constructor.call(this,t),this.connectionModel=n,this.shape=this.constants_.shapeFor(n),this.isDynamicShape=!!this.shape.isDynamic,this.type|=e.blockRendering.Types.CONNECTION},e.utils.object.inherits(e.blockRendering.Connection,e.blockRendering.Measurable),e.blockRendering.OutputConnection=function(t,n){e.blockRendering.OutputConnection.superClass_.constructor.call(this,t,n),this.type|=e.blockRendering.Types.OUTPUT_CONNECTION,this.height=this.isDynamicShape?0:this.shape.height,this.startX=this.width=this.isDynamicShape?0:this.shape.width,this.connectionOffsetY=this.constants_.TAB_OFFSET_FROM_TOP,this.connectionOffsetX=0},e.utils.object.inherits(e.blockRendering.OutputConnection,e.blockRendering.Connection),e.blockRendering.PreviousConnection=function(t,n){e.blockRendering.PreviousConnection.superClass_.constructor.call(this,t,n),this.type|=e.blockRendering.Types.PREVIOUS_CONNECTION,this.height=this.shape.height,this.width=this.shape.width},e.utils.object.inherits(e.blockRendering.PreviousConnection,e.blockRendering.Connection),e.blockRendering.NextConnection=function(t,n){e.blockRendering.NextConnection.superClass_.constructor.call(this,t,n),this.type|=e.blockRendering.Types.NEXT_CONNECTION,this.height=this.shape.height,this.width=this.shape.width},e.utils.object.inherits(e.blockRendering.NextConnection,e.blockRendering.Connection),e.blockRendering.InputConnection=function(t,n){e.blockRendering.InputConnection.superClass_.constructor.call(this,t,n.connection),this.type|=e.blockRendering.Types.INPUT,this.input=n,this.align=n.align,(this.connectedBlock=n.connection&&n.connection.targetBlock()?n.connection.targetBlock():null)?(t=this.connectedBlock.getHeightWidth(),this.connectedBlockWidth=t.width,this.connectedBlockHeight=t.height):this.connectedBlockHeight=this.connectedBlockWidth=0,this.connectionOffsetY=this.connectionOffsetX=0},e.utils.object.inherits(e.blockRendering.InputConnection,e.blockRendering.Connection),e.blockRendering.InlineInput=function(t,n){e.blockRendering.InlineInput.superClass_.constructor.call(this,t,n),this.type|=e.blockRendering.Types.INLINE_INPUT,this.connectedBlock?(this.width=this.connectedBlockWidth,this.height=this.connectedBlockHeight):(this.height=this.constants_.EMPTY_INLINE_INPUT_HEIGHT,this.width=this.constants_.EMPTY_INLINE_INPUT_PADDING),this.connectionHeight=this.isDynamicShape?this.shape.height(this.height):this.shape.height,this.connectionWidth=this.isDynamicShape?this.shape.width(this.height):this.shape.width,this.connectedBlock||(this.width+=this.connectionWidth*(this.isDynamicShape?2:1)),this.connectionOffsetY=this.isDynamicShape?this.shape.connectionOffsetY(this.connectionHeight):this.constants_.TAB_OFFSET_FROM_TOP,this.connectionOffsetX=this.isDynamicShape?this.shape.connectionOffsetX(this.connectionWidth):0},e.utils.object.inherits(e.blockRendering.InlineInput,e.blockRendering.InputConnection),e.blockRendering.StatementInput=function(t,n){e.blockRendering.StatementInput.superClass_.constructor.call(this,t,n),this.type|=e.blockRendering.Types.STATEMENT_INPUT,this.height=this.connectedBlock?this.connectedBlockHeight+this.constants_.STATEMENT_BOTTOM_SPACER:this.constants_.EMPTY_STATEMENT_INPUT_HEIGHT,this.width=this.constants_.STATEMENT_INPUT_NOTCH_OFFSET+this.shape.width},e.utils.object.inherits(e.blockRendering.StatementInput,e.blockRendering.InputConnection),e.blockRendering.ExternalValueInput=function(t,n){e.blockRendering.ExternalValueInput.superClass_.constructor.call(this,t,n),this.type|=e.blockRendering.Types.EXTERNAL_VALUE_INPUT,this.height=this.connectedBlock?this.connectedBlockHeight-this.constants_.TAB_OFFSET_FROM_TOP-this.constants_.MEDIUM_PADDING:this.shape.height,this.width=this.shape.width+this.constants_.EXTERNAL_VALUE_INPUT_PADDING,this.connectionOffsetY=this.constants_.TAB_OFFSET_FROM_TOP,this.connectionHeight=this.shape.height,this.connectionWidth=this.shape.width},e.utils.object.inherits(e.blockRendering.ExternalValueInput,e.blockRendering.InputConnection),e.blockRendering.Icon=function(t,n){e.blockRendering.Icon.superClass_.constructor.call(this,t),this.icon=n,this.isVisible=n.isVisible(),this.type|=e.blockRendering.Types.ICON,t=n.getCorrectedSize(),this.height=t.height,this.width=t.width},e.utils.object.inherits(e.blockRendering.Icon,e.blockRendering.Measurable),e.blockRendering.JaggedEdge=function(t){e.blockRendering.JaggedEdge.superClass_.constructor.call(this,t),this.type|=e.blockRendering.Types.JAGGED_EDGE,this.height=this.constants_.JAGGED_TEETH.height,this.width=this.constants_.JAGGED_TEETH.width},e.utils.object.inherits(e.blockRendering.JaggedEdge,e.blockRendering.Measurable),e.blockRendering.Field=function(t,n,r){e.blockRendering.Field.superClass_.constructor.call(this,t),this.field=n,this.isEditable=n.EDITABLE,this.flipRtl=n.getFlipRtl(),this.type|=e.blockRendering.Types.FIELD,t=this.field.getSize(),this.height=t.height,this.width=t.width,this.parentInput=r},e.utils.object.inherits(e.blockRendering.Field,e.blockRendering.Measurable),e.blockRendering.Hat=function(t){e.blockRendering.Hat.superClass_.constructor.call(this,t),this.type|=e.blockRendering.Types.HAT,this.height=this.constants_.START_HAT.height,this.width=this.constants_.START_HAT.width,this.ascenderHeight=this.height},e.utils.object.inherits(e.blockRendering.Hat,e.blockRendering.Measurable),e.blockRendering.SquareCorner=function(t,n){e.blockRendering.SquareCorner.superClass_.constructor.call(this,t),this.type=(n&&"left"!=n?e.blockRendering.Types.RIGHT_SQUARE_CORNER:e.blockRendering.Types.LEFT_SQUARE_CORNER)|e.blockRendering.Types.CORNER,this.width=this.height=this.constants_.NO_PADDING},e.utils.object.inherits(e.blockRendering.SquareCorner,e.blockRendering.Measurable),e.blockRendering.RoundCorner=function(t,n){e.blockRendering.RoundCorner.superClass_.constructor.call(this,t),this.type=(n&&"left"!=n?e.blockRendering.Types.RIGHT_ROUND_CORNER:e.blockRendering.Types.LEFT_ROUND_CORNER)|e.blockRendering.Types.CORNER,this.width=this.constants_.CORNER_RADIUS,this.height=this.constants_.CORNER_RADIUS/2},e.utils.object.inherits(e.blockRendering.RoundCorner,e.blockRendering.Measurable),e.blockRendering.InRowSpacer=function(t,n){e.blockRendering.InRowSpacer.superClass_.constructor.call(this,t),this.type=this.type|e.blockRendering.Types.SPACER|e.blockRendering.Types.IN_ROW_SPACER,this.width=n,this.height=this.constants_.SPACER_DEFAULT_HEIGHT},e.utils.object.inherits(e.blockRendering.InRowSpacer,e.blockRendering.Measurable),e.blockRendering.Row=function(t){this.type=e.blockRendering.Types.ROW,this.elements=[],this.xPos=this.yPos=this.widthWithConnectedBlocks=this.minWidth=this.minHeight=this.width=this.height=0,this.hasJaggedEdge=this.hasDummyInput=this.hasInlineInput=this.hasStatement=this.hasExternalInput=!1,this.constants_=t,this.notchOffset=this.constants_.NOTCH_OFFSET_LEFT,this.align=null},e.blockRendering.Row.prototype.measure=function(){throw Error("Unexpected attempt to measure a base Row.")},e.blockRendering.Row.prototype.getLastInput=function(){for(var n,t=this.elements.length-1;n=this.elements[t];t--)if(e.blockRendering.Types.isInput(n))return n;return null},e.blockRendering.Row.prototype.startsWithElemSpacer=function(){return!0},e.blockRendering.Row.prototype.endsWithElemSpacer=function(){return!0},e.blockRendering.Row.prototype.getFirstSpacer=function(){for(var n,t=0;n=this.elements[t];t++)if(e.blockRendering.Types.isSpacer(n))return n;return null},e.blockRendering.Row.prototype.getLastSpacer=function(){for(var n,t=this.elements.length-1;n=this.elements[t];t--)if(e.blockRendering.Types.isSpacer(n))return n;return null},e.blockRendering.TopRow=function(t){e.blockRendering.TopRow.superClass_.constructor.call(this,t),this.type|=e.blockRendering.Types.TOP_ROW,this.ascenderHeight=this.capline=0,this.hasPreviousConnection=!1,this.connection=null},e.utils.object.inherits(e.blockRendering.TopRow,e.blockRendering.Row),e.blockRendering.TopRow.prototype.hasLeftSquareCorner=function(t){var n=(t.hat?"cap"===t.hat:this.constants_.ADD_START_HATS)&&!t.outputConnection&&!t.previousConnection,r=t.getPreviousBlock();return!!t.outputConnection||n||!!r&&r.getNextBlock()==t},e.blockRendering.TopRow.prototype.hasRightSquareCorner=function(t){return!0},e.blockRendering.TopRow.prototype.measure=function(){for(var u,t=0,n=0,r=0,s=0;u=this.elements[s];s++)n+=u.width,e.blockRendering.Types.isSpacer(u)||(e.blockRendering.Types.isHat(u)?r=Math.max(r,u.ascenderHeight):t=Math.max(t,u.height));this.width=Math.max(this.minWidth,n),this.height=Math.max(this.minHeight,t)+r,this.capline=this.ascenderHeight=r,this.widthWithConnectedBlocks=this.width},e.blockRendering.TopRow.prototype.startsWithElemSpacer=function(){return!1},e.blockRendering.TopRow.prototype.endsWithElemSpacer=function(){return!1},e.blockRendering.BottomRow=function(t){e.blockRendering.BottomRow.superClass_.constructor.call(this,t),this.type|=e.blockRendering.Types.BOTTOM_ROW,this.hasNextConnection=!1,this.connection=null,this.baseline=this.descenderHeight=0},e.utils.object.inherits(e.blockRendering.BottomRow,e.blockRendering.Row),e.blockRendering.BottomRow.prototype.hasLeftSquareCorner=function(t){return!!t.outputConnection||!!t.getNextBlock()},e.blockRendering.BottomRow.prototype.hasRightSquareCorner=function(t){return!0},e.blockRendering.BottomRow.prototype.measure=function(){for(var u,t=0,n=0,r=0,s=0;u=this.elements[s];s++)n+=u.width,e.blockRendering.Types.isSpacer(u)||(e.blockRendering.Types.isNextConnection(u)?r=Math.max(r,u.height):t=Math.max(t,u.height));this.width=Math.max(this.minWidth,n),this.height=Math.max(this.minHeight,t)+r,this.descenderHeight=r,this.widthWithConnectedBlocks=this.width},e.blockRendering.BottomRow.prototype.startsWithElemSpacer=function(){return!1},e.blockRendering.BottomRow.prototype.endsWithElemSpacer=function(){return!1},e.blockRendering.SpacerRow=function(t,n,r){e.blockRendering.SpacerRow.superClass_.constructor.call(this,t),this.type=this.type|e.blockRendering.Types.SPACER|e.blockRendering.Types.BETWEEN_ROW_SPACER,this.width=r,this.height=n,this.followsStatement=!1,this.widthWithConnectedBlocks=0,this.elements=[new e.blockRendering.InRowSpacer(this.constants_,r)]},e.utils.object.inherits(e.blockRendering.SpacerRow,e.blockRendering.Row),e.blockRendering.SpacerRow.prototype.measure=function(){},e.blockRendering.InputRow=function(t){e.blockRendering.InputRow.superClass_.constructor.call(this,t),this.type|=e.blockRendering.Types.INPUT_ROW,this.connectedBlockWidths=0},e.utils.object.inherits(e.blockRendering.InputRow,e.blockRendering.Row),e.blockRendering.InputRow.prototype.measure=function(){this.width=this.minWidth,this.height=this.minHeight;for(var r,t=0,n=0;r=this.elements[n];n++)this.width+=r.width,e.blockRendering.Types.isInput(r)&&(e.blockRendering.Types.isStatementInput(r)?t+=r.connectedBlockWidth:e.blockRendering.Types.isExternalInput(r)&&0!=r.connectedBlockWidth&&(t+=r.connectedBlockWidth-r.connectionWidth)),e.blockRendering.Types.isSpacer(r)||(this.height=Math.max(this.height,r.height));this.connectedBlockWidths=t,this.widthWithConnectedBlocks=this.width+t},e.blockRendering.InputRow.prototype.endsWithElemSpacer=function(){return!this.hasExternalInput&&!this.hasStatement},e.blockRendering.RenderInfo=function(t,n){this.block_=n,this.renderer_=t,this.constants_=this.renderer_.getConstants(),this.outputConnection=n.outputConnection?new e.blockRendering.OutputConnection(this.constants_,n.outputConnection):null,this.isInline=n.getInputsInline()&&!n.isCollapsed(),this.isCollapsed=n.isCollapsed(),this.isInsertionMarker=n.isInsertionMarker(),this.RTL=n.RTL,this.statementEdge=this.width=this.widthWithChildren=this.height=0,this.rows=[],this.inputRows=[],this.hiddenIcons=[],this.topRow=new e.blockRendering.TopRow(this.constants_),this.bottomRow=new e.blockRendering.BottomRow(this.constants_),this.startY=this.startX=0},e.blockRendering.RenderInfo.prototype.getRenderer=function(){return this.renderer_},e.blockRendering.RenderInfo.prototype.measure=function(){this.createRows_(),this.addElemSpacing_(),this.addRowSpacing_(),this.computeBounds_(),this.alignRowElements_(),this.finalize_()},e.blockRendering.RenderInfo.prototype.createRows_=function(){this.populateTopRow_(),this.rows.push(this.topRow);var t=new e.blockRendering.InputRow(this.constants_);this.inputRows.push(t);for(var s,n=this.block_.getIcons(),r=0;s=n[r];r++){var u=new e.blockRendering.Icon(this.constants_,s);this.isCollapsed&&s.collapseHidden?this.hiddenIcons.push(u):t.elements.push(u)}for(s=null,r=0;n=this.block_.inputList[r];r++)if(n.isVisible()){for(this.shouldStartNewRow_(n,s)&&(this.rows.push(t),t=new e.blockRendering.InputRow(this.constants_),this.inputRows.push(t)),s=0;u=n.fieldRow[s];s++)t.elements.push(new e.blockRendering.Field(this.constants_,u,n));this.addInput_(n,t),s=n}this.isCollapsed&&(t.hasJaggedEdge=!0,t.elements.push(new e.blockRendering.JaggedEdge(this.constants_))),(t.elements.length||t.hasDummyInput)&&this.rows.push(t),this.populateBottomRow_(),this.rows.push(this.bottomRow)},e.blockRendering.RenderInfo.prototype.populateTopRow_=function(){var t=!!this.block_.previousConnection,n=(this.block_.hat?"cap"===this.block_.hat:this.constants_.ADD_START_HATS)&&!this.outputConnection&&!t,r=this.topRow.hasLeftSquareCorner(this.block_)?e.blockRendering.SquareCorner:e.blockRendering.RoundCorner;this.topRow.elements.push(new r(this.constants_)),n?(t=new e.blockRendering.Hat(this.constants_),this.topRow.elements.push(t),this.topRow.capline=t.ascenderHeight):t&&(this.topRow.hasPreviousConnection=!0,this.topRow.connection=new e.blockRendering.PreviousConnection(this.constants_,this.block_.previousConnection),this.topRow.elements.push(this.topRow.connection)),this.topRow.minHeight=this.block_.inputList.length&&this.block_.inputList[0].type==e.inputTypes.STATEMENT&&!this.block_.isCollapsed()?this.constants_.TOP_ROW_PRECEDES_STATEMENT_MIN_HEIGHT:this.constants_.TOP_ROW_MIN_HEIGHT,r=this.topRow.hasRightSquareCorner(this.block_)?e.blockRendering.SquareCorner:e.blockRendering.RoundCorner,this.topRow.elements.push(new r(this.constants_,"right"))},e.blockRendering.RenderInfo.prototype.populateBottomRow_=function(){this.bottomRow.hasNextConnection=!!this.block_.nextConnection,this.bottomRow.minHeight=this.block_.inputList.length&&this.block_.inputList[this.block_.inputList.length-1].type==e.inputTypes.STATEMENT?this.constants_.BOTTOM_ROW_AFTER_STATEMENT_MIN_HEIGHT:this.constants_.BOTTOM_ROW_MIN_HEIGHT,this.bottomRow.hasLeftSquareCorner(this.block_)?this.bottomRow.elements.push(new e.blockRendering.SquareCorner(this.constants_)):this.bottomRow.elements.push(new e.blockRendering.RoundCorner(this.constants_)),this.bottomRow.hasNextConnection&&(this.bottomRow.connection=new e.blockRendering.NextConnection(this.constants_,this.block_.nextConnection),this.bottomRow.elements.push(this.bottomRow.connection)),this.bottomRow.hasRightSquareCorner(this.block_)?this.bottomRow.elements.push(new e.blockRendering.SquareCorner(this.constants_,"right")):this.bottomRow.elements.push(new e.blockRendering.RoundCorner(this.constants_,"right"))},e.blockRendering.RenderInfo.prototype.addInput_=function(t,n){this.isInline&&t.type==e.inputTypes.VALUE?(n.elements.push(new e.blockRendering.InlineInput(this.constants_,t)),n.hasInlineInput=!0):t.type==e.inputTypes.STATEMENT?(n.elements.push(new e.blockRendering.StatementInput(this.constants_,t)),n.hasStatement=!0):t.type==e.inputTypes.VALUE?(n.elements.push(new e.blockRendering.ExternalValueInput(this.constants_,t)),n.hasExternalInput=!0):t.type==e.inputTypes.DUMMY&&(n.minHeight=Math.max(n.minHeight,t.getSourceBlock()&&t.getSourceBlock().isShadow()?this.constants_.DUMMY_INPUT_SHADOW_MIN_HEIGHT:this.constants_.DUMMY_INPUT_MIN_HEIGHT),n.hasDummyInput=!0),null==n.align&&(n.align=t.align)},e.blockRendering.RenderInfo.prototype.shouldStartNewRow_=function(t,n){return!(!n||t.type!=e.inputTypes.STATEMENT&&n.type!=e.inputTypes.STATEMENT&&(t.type!=e.inputTypes.VALUE&&t.type!=e.inputTypes.DUMMY||this.isInline))},e.blockRendering.RenderInfo.prototype.addElemSpacing_=function(){for(var n,t=0;n=this.rows[t];t++){var r=n.elements;if(n.elements=[],n.startsWithElemSpacer()&&n.elements.push(new e.blockRendering.InRowSpacer(this.constants_,this.getInRowSpacing_(null,r[0]))),r.length){for(var s=0;s<r.length-1;s++){n.elements.push(r[s]);var u=this.getInRowSpacing_(r[s],r[s+1]);n.elements.push(new e.blockRendering.InRowSpacer(this.constants_,u))}n.elements.push(r[r.length-1]),n.endsWithElemSpacer()&&n.elements.push(new e.blockRendering.InRowSpacer(this.constants_,this.getInRowSpacing_(r[r.length-1],null)))}}},e.blockRendering.RenderInfo.prototype.getInRowSpacing_=function(t,n){if(!t&&n&&e.blockRendering.Types.isStatementInput(n))return this.constants_.STATEMENT_INPUT_PADDING_LEFT;if(t&&e.blockRendering.Types.isInput(t)&&!n){if(e.blockRendering.Types.isExternalInput(t))return this.constants_.NO_PADDING;if(e.blockRendering.Types.isInlineInput(t))return this.constants_.LARGE_PADDING;if(e.blockRendering.Types.isStatementInput(t))return this.constants_.NO_PADDING}return t&&e.blockRendering.Types.isLeftSquareCorner(t)&&n&&(e.blockRendering.Types.isPreviousConnection(n)||e.blockRendering.Types.isNextConnection(n))?n.notchOffset:t&&e.blockRendering.Types.isLeftRoundedCorner(t)&&n&&(e.blockRendering.Types.isPreviousConnection(n)||e.blockRendering.Types.isNextConnection(n))?n.notchOffset-this.constants_.CORNER_RADIUS:this.constants_.MEDIUM_PADDING},e.blockRendering.RenderInfo.prototype.computeBounds_=function(){for(var u,t=0,n=0,r=0,s=0;u=this.rows[s];s++){if(u.measure(),n=Math.max(n,u.width),u.hasStatement){var y=u.getLastInput();t=Math.max(t,u.width-y.width)}r=Math.max(r,u.widthWithConnectedBlocks)}for(this.statementEdge=t,this.width=n,s=0;u=this.rows[s];s++)u.hasStatement&&(u.statementEdge=this.statementEdge);this.widthWithChildren=Math.max(n,r),this.outputConnection&&(this.startX=this.outputConnection.width,this.width+=this.outputConnection.width,this.widthWithChildren+=this.outputConnection.width)},e.blockRendering.RenderInfo.prototype.alignRowElements_=function(){for(var n,t=0;n=this.rows[t];t++)if(n.hasStatement)this.alignStatementRow_(n);else{var r=n.width;0<(r=this.getDesiredRowWidth_(n)-r)&&this.addAlignmentPadding_(n,r),e.blockRendering.Types.isTopOrBottomRow(n)&&(n.widthWithConnectedBlocks=n.width)}},e.blockRendering.RenderInfo.prototype.getDesiredRowWidth_=function(t){return this.width-this.startX},e.blockRendering.RenderInfo.prototype.addAlignmentPadding_=function(t,n){var r=t.getFirstSpacer(),s=t.getLastSpacer();(t.hasExternalInput||t.hasStatement)&&(t.widthWithConnectedBlocks+=n),t.align==e.constants.ALIGN.LEFT?s.width+=n:t.align==e.constants.ALIGN.CENTRE?(r.width+=n/2,s.width+=n/2):t.align==e.constants.ALIGN.RIGHT?r.width+=n:s.width+=n,t.width+=n},e.blockRendering.RenderInfo.prototype.alignStatementRow_=function(t){var n=t.getLastInput(),r=t.width-n.width,s=this.statementEdge;0<(r=s-r)&&this.addAlignmentPadding_(t,r),r=t.width,s=this.getDesiredRowWidth_(t),n.width+=s-r,n.height=Math.max(n.height,t.height),t.width+=s-r,t.widthWithConnectedBlocks=Math.max(t.width,this.statementEdge+t.connectedBlockWidths)},e.blockRendering.RenderInfo.prototype.addRowSpacing_=function(){var t=this.rows;this.rows=[];for(var n=0;n<t.length;n++)this.rows.push(t[n]),n!=t.length-1&&this.rows.push(this.makeSpacerRow_(t[n],t[n+1]))},e.blockRendering.RenderInfo.prototype.makeSpacerRow_=function(t,n){var r=this.getSpacerRowHeight_(t,n),s=this.getSpacerRowWidth_(t,n);return r=new e.blockRendering.SpacerRow(this.constants_,r,s),t.hasStatement&&(r.followsStatement=!0),n.hasStatement&&(r.precedesStatement=!0),r},e.blockRendering.RenderInfo.prototype.getSpacerRowWidth_=function(t,n){return this.width-this.startX},e.blockRendering.RenderInfo.prototype.getSpacerRowHeight_=function(t,n){return this.constants_.MEDIUM_PADDING},e.blockRendering.RenderInfo.prototype.getElemCenterline_=function(t,n){return e.blockRendering.Types.isSpacer(n)?t.yPos+n.height/2:e.blockRendering.Types.isBottomRow(t)?(t=t.yPos+t.height-t.descenderHeight,e.blockRendering.Types.isNextConnection(n)?t+n.height/2:t-n.height/2):e.blockRendering.Types.isTopRow(t)?e.blockRendering.Types.isHat(n)?t.capline-n.height/2:t.capline+n.height/2:t.yPos+t.height/2},e.blockRendering.RenderInfo.prototype.recordElemPositions_=function(t){for(var s,n=t.xPos,r=0;s=t.elements[r];r++)e.blockRendering.Types.isSpacer(s)&&(s.height=t.height),s.xPos=n,s.centerline=this.getElemCenterline_(t,s),n+=s.width},e.blockRendering.RenderInfo.prototype.finalize_=function(){for(var s,t=0,n=0,r=0;s=this.rows[r];r++)s.yPos=n,s.xPos=this.startX,n+=s.height,t=Math.max(t,s.widthWithConnectedBlocks),this.recordElemPositions_(s);this.outputConnection&&this.block_.nextConnection&&this.block_.nextConnection.isConnected()&&(t=Math.max(t,this.block_.nextConnection.targetBlock().getHeightWidth().width)),this.widthWithChildren=t+this.startX,this.height=n,this.startY=this.topRow.capline,this.bottomRow.baseline=n-this.bottomRow.descenderHeight},e.blockRendering.Debug=function(t){this.debugElements_=[],this.svgRoot_=null,this.constants_=t},e.blockRendering.Debug.config={rowSpacers:!0,elemSpacers:!0,rows:!0,elems:!0,connections:!0,blockBounds:!0,connectedBlockBounds:!0,render:!0},e.blockRendering.Debug.prototype.clearElems=function(){for(var n,t=0;n=this.debugElements_[t];t++)e.utils.dom.removeNode(n);this.debugElements_=[]},e.blockRendering.Debug.prototype.drawSpacerRow=function(t,n,r){if(e.blockRendering.Debug.config.rowSpacers){var s=Math.abs(t.height),u=0>t.height;u&&(n-=s),this.debugElements_.push(e.utils.dom.createSvgElement(e.utils.Svg.RECT,{class:"rowSpacerRect blockRenderDebug",x:r?-(t.xPos+t.width):t.xPos,y:n,width:t.width,height:s,stroke:u?"black":"blue",fill:"blue","fill-opacity":"0.5","stroke-width":"1px"},this.svgRoot_))}},e.blockRendering.Debug.prototype.drawSpacerElem=function(t,n,r){if(e.blockRendering.Debug.config.elemSpacers){n=Math.abs(t.width);var s=0>t.width,u=s?t.xPos-n:t.xPos;r&&(u=-(u+n)),this.debugElements_.push(e.utils.dom.createSvgElement(e.utils.Svg.RECT,{class:"elemSpacerRect blockRenderDebug",x:u,y:t.centerline-t.height/2,width:n,height:t.height,stroke:"pink",fill:s?"black":"pink","fill-opacity":"0.5","stroke-width":"1px"},this.svgRoot_))}},e.blockRendering.Debug.prototype.drawRenderedElem=function(t,n){if(e.blockRendering.Debug.config.elems){var r=t.xPos;n&&(r=-(r+t.width)),this.debugElements_.push(e.utils.dom.createSvgElement(e.utils.Svg.RECT,{class:"rowRenderingRect blockRenderDebug",x:r,y:n=t.centerline-t.height/2,width:t.width,height:t.height,stroke:"black",fill:"none","stroke-width":"1px"},this.svgRoot_)),e.blockRendering.Types.isField(t)&&t.field instanceof e.FieldLabel&&this.debugElements_.push(e.utils.dom.createSvgElement(e.utils.Svg.RECT,{class:"rowRenderingRect blockRenderDebug",x:r,y:n+this.constants_.FIELD_TEXT_BASELINE,width:t.width,height:"0.1px",stroke:"red",fill:"none","stroke-width":"0.5px"},this.svgRoot_))}e.blockRendering.Types.isInput(t)&&e.blockRendering.Debug.config.connections&&this.drawConnection(t.connectionModel)},e.blockRendering.Debug.prototype.drawConnection=function(t){if(e.blockRendering.Debug.config.connections){if(t.type==e.connectionTypes.INPUT_VALUE)var n=4,r="magenta",s="none";else t.type==e.connectionTypes.OUTPUT_VALUE?(n=2,s=r="magenta"):t.type==e.connectionTypes.NEXT_STATEMENT?(n=4,r="goldenrod",s="none"):t.type==e.connectionTypes.PREVIOUS_STATEMENT&&(n=2,s=r="goldenrod");this.debugElements_.push(e.utils.dom.createSvgElement(e.utils.Svg.CIRCLE,{class:"blockRenderDebug",cx:t.offsetInBlock_.x,cy:t.offsetInBlock_.y,r:n,fill:s,stroke:r},this.svgRoot_))}},e.blockRendering.Debug.prototype.drawRenderedRow=function(t,n,r){e.blockRendering.Debug.config.rows&&(this.debugElements_.push(e.utils.dom.createSvgElement(e.utils.Svg.RECT,{class:"elemRenderingRect blockRenderDebug",x:r?-(t.xPos+t.width):t.xPos,y:t.yPos,width:t.width,height:t.height,stroke:"red",fill:"none","stroke-width":"1px"},this.svgRoot_)),e.blockRendering.Types.isTopOrBottomRow(t)||e.blockRendering.Debug.config.connectedBlockBounds&&this.debugElements_.push(e.utils.dom.createSvgElement(e.utils.Svg.RECT,{class:"connectedBlockWidth blockRenderDebug",x:r?-(t.xPos+t.widthWithConnectedBlocks):t.xPos,y:t.yPos,width:t.widthWithConnectedBlocks,height:t.height,stroke:this.randomColour_,fill:"none","stroke-width":"1px","stroke-dasharray":"3,3"},this.svgRoot_)))},e.blockRendering.Debug.prototype.drawRowWithElements=function(t,n,r){for(var s=0,u=t.elements.length;s<u;s++){var y=t.elements[s];y?e.blockRendering.Types.isSpacer(y)?this.drawSpacerElem(y,t.height,r):this.drawRenderedElem(y,r):console.warn("A row has an undefined or null element.",t,y)}this.drawRenderedRow(t,n,r)},e.blockRendering.Debug.prototype.drawBoundingBox=function(t){if(e.blockRendering.Debug.config.blockBounds){var n=t.RTL?-t.width:0;this.debugElements_.push(e.utils.dom.createSvgElement(e.utils.Svg.RECT,{class:"blockBoundingBox blockRenderDebug",x:n,y:0,width:t.width,height:t.height,stroke:"black",fill:"none","stroke-width":"1px","stroke-dasharray":"5,5"},this.svgRoot_)),e.blockRendering.Debug.config.connectedBlockBounds&&this.debugElements_.push(e.utils.dom.createSvgElement(e.utils.Svg.RECT,{class:"blockRenderDebug",x:n=t.RTL?-t.widthWithChildren:0,y:0,width:t.widthWithChildren,height:t.height,stroke:"#DF57BC",fill:"none","stroke-width":"1px","stroke-dasharray":"3,3"},this.svgRoot_))}},e.blockRendering.Debug.prototype.drawDebug=function(t,n){this.clearElems(),this.svgRoot_=t.getSvgRoot(),this.randomColour_="#"+Math.floor(16777215*Math.random()).toString(16);for(var u,r=0,s=0;u=n.rows[s];s++)e.blockRendering.Types.isBetweenRowSpacer(u)?this.drawSpacerRow(u,r,n.RTL):this.drawRowWithElements(u,r,n.RTL),r+=u.height;t.previousConnection&&this.drawConnection(t.previousConnection),t.nextConnection&&this.drawConnection(t.nextConnection),t.outputConnection&&this.drawConnection(t.outputConnection),n.rightSide&&this.drawRenderedElem(n.rightSide,n.RTL),this.drawBoundingBox(n),this.drawRender(t.pathObject.svgPath)},e.blockRendering.Debug.prototype.drawRender=function(t){e.blockRendering.Debug.config.render&&(t.setAttribute("filter","url(#"+this.constants_.debugFilterId+")"),setTimeout(function(){t.setAttribute("filter","")},100))},e.blockRendering.Drawer=function(t,n){this.block_=t,this.info_=n,this.topLeft_=t.getRelativeToSurfaceXY(),this.inlinePath_=this.outlinePath_="",this.constants_=n.getRenderer().getConstants()},e.blockRendering.Drawer.prototype.draw=function(){this.hideHiddenIcons_(),this.drawOutline_(),this.drawInternals_(),this.block_.pathObject.setPath(this.outlinePath_+"\n"+this.inlinePath_),this.info_.RTL&&this.block_.pathObject.flipRTL(),e.blockRendering.useDebugger&&this.block_.renderingDebugger.drawDebug(this.block_,this.info_),this.recordSizeOnBlock_()},e.blockRendering.Drawer.prototype.recordSizeOnBlock_=function(){this.block_.height=this.info_.height,this.block_.width=this.info_.widthWithChildren},e.blockRendering.Drawer.prototype.hideHiddenIcons_=function(){for(var n,t=0;n=this.info_.hiddenIcons[t];t++)n.icon.iconGroup_.setAttribute("display","none")},e.blockRendering.Drawer.prototype.drawOutline_=function(){this.drawTop_();for(var t=1;t<this.info_.rows.length-1;t++){var n=this.info_.rows[t];n.hasJaggedEdge?this.drawJaggedEdge_(n):n.hasStatement?this.drawStatementInput_(n):n.hasExternalInput?this.drawValueInput_(n):this.drawRightSideRow_(n)}this.drawBottom_(),this.drawLeft_()},e.blockRendering.Drawer.prototype.drawTop_=function(){var t=this.info_.topRow,n=t.elements;this.positionPreviousConnection_(),this.outlinePath_+=e.utils.svgPaths.moveBy(t.xPos,this.info_.startY);for(var s,r=0;s=n[r];r++)e.blockRendering.Types.isLeftRoundedCorner(s)?this.outlinePath_+=this.constants_.OUTSIDE_CORNERS.topLeft:e.blockRendering.Types.isRightRoundedCorner(s)?this.outlinePath_+=this.constants_.OUTSIDE_CORNERS.topRight:e.blockRendering.Types.isPreviousConnection(s)?this.outlinePath_+=s.shape.pathLeft:e.blockRendering.Types.isHat(s)?this.outlinePath_+=this.constants_.START_HAT.path:e.blockRendering.Types.isSpacer(s)&&(this.outlinePath_+=e.utils.svgPaths.lineOnAxis("h",s.width));this.outlinePath_+=e.utils.svgPaths.lineOnAxis("v",t.height)},e.blockRendering.Drawer.prototype.drawJaggedEdge_=function(t){this.outlinePath_+=this.constants_.JAGGED_TEETH.path+e.utils.svgPaths.lineOnAxis("v",t.height-this.constants_.JAGGED_TEETH.height)},e.blockRendering.Drawer.prototype.drawValueInput_=function(t){var n=t.getLastInput();this.positionExternalValueConnection_(t);var r="function"==typeof n.shape.pathDown?n.shape.pathDown(n.height):n.shape.pathDown;this.outlinePath_+=e.utils.svgPaths.lineOnAxis("H",n.xPos+n.width)+r+e.utils.svgPaths.lineOnAxis("v",t.height-n.connectionHeight)},e.blockRendering.Drawer.prototype.drawStatementInput_=function(t){var n=t.getLastInput(),r=n.xPos+n.notchOffset+n.shape.width;n=n.shape.pathRight+e.utils.svgPaths.lineOnAxis("h",-(n.notchOffset-this.constants_.INSIDE_CORNERS.width))+this.constants_.INSIDE_CORNERS.pathTop;var s=t.height-2*this.constants_.INSIDE_CORNERS.height;this.outlinePath_+=e.utils.svgPaths.lineOnAxis("H",r)+n+e.utils.svgPaths.lineOnAxis("v",s)+this.constants_.INSIDE_CORNERS.pathBottom+e.utils.svgPaths.lineOnAxis("H",t.xPos+t.width),this.positionStatementInputConnection_(t)},e.blockRendering.Drawer.prototype.drawRightSideRow_=function(t){this.outlinePath_+=e.utils.svgPaths.lineOnAxis("V",t.yPos+t.height)},e.blockRendering.Drawer.prototype.drawBottom_=function(){var t=this.info_.bottomRow,n=t.elements;this.positionNextConnection_();for(var y,r=0,s="",u=n.length-1;y=n[u];u--)e.blockRendering.Types.isNextConnection(y)?s+=y.shape.pathRight:e.blockRendering.Types.isLeftSquareCorner(y)?s+=e.utils.svgPaths.lineOnAxis("H",t.xPos):e.blockRendering.Types.isLeftRoundedCorner(y)?s+=this.constants_.OUTSIDE_CORNERS.bottomLeft:e.blockRendering.Types.isRightRoundedCorner(y)?(s+=this.constants_.OUTSIDE_CORNERS.bottomRight,r=this.constants_.OUTSIDE_CORNERS.rightHeight):e.blockRendering.Types.isSpacer(y)&&(s+=e.utils.svgPaths.lineOnAxis("h",-1*y.width));this.outlinePath_+=e.utils.svgPaths.lineOnAxis("V",t.baseline-r),this.outlinePath_+=s},e.blockRendering.Drawer.prototype.drawLeft_=function(){var t=this.info_.outputConnection;if(this.positionOutputConnection_(),t){var n=t.connectionOffsetY+t.height;t="function"==typeof t.shape.pathUp?t.shape.pathUp(t.height):t.shape.pathUp,this.outlinePath_+=e.utils.svgPaths.lineOnAxis("V",n)+t}this.outlinePath_+="z"},e.blockRendering.Drawer.prototype.drawInternals_=function(){for(var n,t=0;n=this.info_.rows[t];t++)for(var s,r=0;s=n.elements[r];r++)e.blockRendering.Types.isInlineInput(s)?this.drawInlineInput_(s):(e.blockRendering.Types.isIcon(s)||e.blockRendering.Types.isField(s))&&this.layoutField_(s)},e.blockRendering.Drawer.prototype.layoutField_=function(t){if(e.blockRendering.Types.isField(t))var n=t.field.getSvgRoot();else e.blockRendering.Types.isIcon(t)&&(n=t.icon.iconGroup_);var r=t.centerline-t.height/2,s=t.xPos,u="";this.info_.RTL&&(s=-(s+t.width),t.flipRtl&&(s+=t.width,u="scale(-1 1)")),e.blockRendering.Types.isIcon(t)?(n.setAttribute("display","block"),n.setAttribute("transform","translate("+s+","+r+")"),t.icon.computeIconLocation()):n.setAttribute("transform","translate("+s+","+r+")"+u),this.info_.isInsertionMarker&&n.setAttribute("display","none")},e.blockRendering.Drawer.prototype.drawInlineInput_=function(t){var n=t.width,r=t.height,s=t.connectionOffsetY,u=t.connectionHeight+s;this.inlinePath_+=e.utils.svgPaths.moveTo(t.xPos+t.connectionWidth,t.centerline-r/2)+e.utils.svgPaths.lineOnAxis("v",s)+t.shape.pathDown+e.utils.svgPaths.lineOnAxis("v",r-u)+e.utils.svgPaths.lineOnAxis("h",n-t.connectionWidth)+e.utils.svgPaths.lineOnAxis("v",-r)+"z",this.positionInlineInputConnection_(t)},e.blockRendering.Drawer.prototype.positionInlineInputConnection_=function(t){if(t.connectionModel){var r=t.xPos+t.connectionWidth+t.connectionOffsetX;this.info_.RTL&&(r*=-1),t.connectionModel.setOffsetInBlock(r,t.centerline-t.height/2+t.connectionOffsetY)}},e.blockRendering.Drawer.prototype.positionStatementInputConnection_=function(t){var n=t.getLastInput();if(n.connectionModel){var r=t.xPos+t.statementEdge+n.notchOffset;this.info_.RTL&&(r*=-1),n.connectionModel.setOffsetInBlock(r,t.yPos)}},e.blockRendering.Drawer.prototype.positionExternalValueConnection_=function(t){var n=t.getLastInput();if(n.connectionModel){var r=t.xPos+t.width;this.info_.RTL&&(r*=-1),n.connectionModel.setOffsetInBlock(r,t.yPos)}},e.blockRendering.Drawer.prototype.positionPreviousConnection_=function(){var t=this.info_.topRow;if(t.connection){var n=t.xPos+t.notchOffset;t.connection.connectionModel.setOffsetInBlock(this.info_.RTL?-n:n,0)}},e.blockRendering.Drawer.prototype.positionNextConnection_=function(){var t=this.info_.bottomRow;if(t.connection){var n=t.connection,r=n.xPos;n.connectionModel.setOffsetInBlock(this.info_.RTL?-r:r,t.baseline)}},e.blockRendering.Drawer.prototype.positionOutputConnection_=function(){if(this.info_.outputConnection){var t=this.info_.startX+this.info_.outputConnection.connectionOffsetX;this.block_.outputConnection.setOffsetInBlock(this.info_.RTL?-t:t,this.info_.outputConnection.connectionOffsetY)}},e.Events.MarkerMove=function(t,n,r,s){var u=t?t.workspace.id:void 0;s&&s.getType()==e.ASTNode.types.WORKSPACE&&(u=s.getLocation().id),e.Events.MarkerMove.superClass_.constructor.call(this,u),this.blockId=t?t.id:null,this.oldNode=r,this.newNode=s,this.isCursor=n},e.utils.object.inherits(e.Events.MarkerMove,e.Events.UiBase),e.Events.MarkerMove.prototype.type=e.Events.MARKER_MOVE,e.Events.MarkerMove.prototype.toJson=function(){var t=e.Events.MarkerMove.superClass_.toJson.call(this);return t.isCursor=this.isCursor,t.blockId=this.blockId,t.oldNode=this.oldNode,t.newNode=this.newNode,t},e.Events.MarkerMove.prototype.fromJson=function(t){e.Events.MarkerMove.superClass_.fromJson.call(this,t),this.isCursor=t.isCursor,this.blockId=t.blockId,this.oldNode=t.oldNode,this.newNode=t.newNode},e.registry.register(e.registry.Type.EVENT,e.Events.MARKER_MOVE,e.Events.MarkerMove),e.blockRendering.MarkerSvg=function(t,n,r){this.workspace_=t,this.marker_=r,this.parent_=null,this.constants_=n,this.currentMarkerSvg=null,t=this.isCursor()?this.constants_.CURSOR_COLOUR:this.constants_.MARKER_COLOUR,this.colour_=r.colour||t},e.blockRendering.MarkerSvg.CURSOR_CLASS="blocklyCursor",e.blockRendering.MarkerSvg.MARKER_CLASS="blocklyMarker",e.blockRendering.MarkerSvg.HEIGHT_MULTIPLIER=.75,e.blockRendering.MarkerSvg.prototype.getSvgRoot=function(){return this.svgGroup_},e.blockRendering.MarkerSvg.prototype.getMarker=function(){return this.marker_},e.blockRendering.MarkerSvg.prototype.isCursor=function(){return"cursor"==this.marker_.type},e.blockRendering.MarkerSvg.prototype.createDom=function(){var t=this.isCursor()?e.blockRendering.MarkerSvg.CURSOR_CLASS:e.blockRendering.MarkerSvg.MARKER_CLASS;return this.svgGroup_=e.utils.dom.createSvgElement(e.utils.Svg.G,{class:t},null),this.createDomInternal_(),this.svgGroup_},e.blockRendering.MarkerSvg.prototype.setParent_=function(t){this.isCursor()?(this.parent_&&this.parent_.setCursorSvg(null),t.setCursorSvg(this.getSvgRoot())):(this.parent_&&this.parent_.setMarkerSvg(null),t.setMarkerSvg(this.getSvgRoot())),this.parent_=t},e.blockRendering.MarkerSvg.prototype.draw=function(t,n){if(n){this.constants_=this.workspace_.getRenderer().getConstants();var r=this.isCursor()?this.constants_.CURSOR_COLOUR:this.constants_.MARKER_COLOUR;this.colour_=this.marker_.colour||r,this.applyColour_(n),this.showAtLocation_(n),this.fireMarkerEvent_(t,n),void 0!==(t=this.currentMarkerSvg.childNodes[0])&&t.beginElement&&t.beginElement()}else this.hide()},e.blockRendering.MarkerSvg.prototype.showAtLocation_=function(t){var n=t.getLocation().type;t.getType()==e.ASTNode.types.BLOCK?this.showWithBlock_(t):t.getType()==e.ASTNode.types.OUTPUT?this.showWithOutput_(t):n==e.connectionTypes.INPUT_VALUE?this.showWithInput_(t):n==e.connectionTypes.NEXT_STATEMENT?this.showWithNext_(t):t.getType()==e.ASTNode.types.PREVIOUS?this.showWithPrevious_(t):t.getType()==e.ASTNode.types.FIELD?this.showWithField_(t):t.getType()==e.ASTNode.types.WORKSPACE?this.showWithCoordinates_(t):t.getType()==e.ASTNode.types.STACK&&this.showWithStack_(t)},e.blockRendering.MarkerSvg.prototype.showWithBlockPrevOutput_=function(t){var n=(t=t.getSourceBlock()).width,r=t.height,s=r*e.blockRendering.MarkerSvg.HEIGHT_MULTIPLIER,u=this.constants_.CURSOR_BLOCK_PADDING;if(t.previousConnection){var y=this.constants_.shapeFor(t.previousConnection);this.positionPrevious_(n,u,s,y)}else t.outputConnection?(y=this.constants_.shapeFor(t.outputConnection),this.positionOutput_(n,r,y)):this.positionBlock_(n,u,s);this.setParent_(t),this.showCurrent_()},e.blockRendering.MarkerSvg.prototype.showWithBlock_=function(t){this.showWithBlockPrevOutput_(t)},e.blockRendering.MarkerSvg.prototype.showWithPrevious_=function(t){this.showWithBlockPrevOutput_(t)},e.blockRendering.MarkerSvg.prototype.showWithOutput_=function(t){this.showWithBlockPrevOutput_(t)},e.blockRendering.MarkerSvg.prototype.showWithCoordinates_=function(t){var n=t.getWsCoordinate();t=n.x,this.workspace_.RTL&&(t-=this.constants_.CURSOR_WS_WIDTH),this.positionLine_(t,n=n.y,this.constants_.CURSOR_WS_WIDTH),this.setParent_(this.workspace_),this.showCurrent_()},e.blockRendering.MarkerSvg.prototype.showWithField_=function(t){var n=(t=t.getLocation()).getSize().width,r=t.getSize().height;this.positionRect_(0,0,n,r),this.setParent_(t),this.showCurrent_()},e.blockRendering.MarkerSvg.prototype.showWithInput_=function(t){var n=(t=t.getLocation()).getSourceBlock();this.positionInput_(t),this.setParent_(n),this.showCurrent_()},e.blockRendering.MarkerSvg.prototype.showWithNext_=function(t){var n=t.getLocation();t=n.getSourceBlock();var r=0;n=n.getOffsetInBlock().y;var s=t.getHeightWidth().width;this.workspace_.RTL&&(r=-s),this.positionLine_(r,n,s),this.setParent_(t),this.showCurrent_()},e.blockRendering.MarkerSvg.prototype.showWithStack_=function(t){var n=(t=t.getLocation()).getHeightWidth(),r=n.width+this.constants_.CURSOR_STACK_PADDING,s=-this.constants_.CURSOR_STACK_PADDING/2,y=s;this.workspace_.RTL&&(y=-(r+s)),this.positionRect_(y,-this.constants_.CURSOR_STACK_PADDING/2,r,n=n.height+this.constants_.CURSOR_STACK_PADDING),this.setParent_(t),this.showCurrent_()},e.blockRendering.MarkerSvg.prototype.showCurrent_=function(){this.hide(),this.currentMarkerSvg.style.display=""},e.blockRendering.MarkerSvg.prototype.positionBlock_=function(t,n,r){t=e.utils.svgPaths.moveBy(-n,r)+e.utils.svgPaths.lineOnAxis("V",-n)+e.utils.svgPaths.lineOnAxis("H",t+2*n)+e.utils.svgPaths.lineOnAxis("V",r),this.markerBlock_.setAttribute("d",t),this.workspace_.RTL&&this.flipRtl_(this.markerBlock_),this.currentMarkerSvg=this.markerBlock_},e.blockRendering.MarkerSvg.prototype.positionInput_=function(t){var n=t.getOffsetInBlock().x,r=t.getOffsetInBlock().y;t=e.utils.svgPaths.moveTo(0,0)+this.constants_.shapeFor(t).pathDown,this.markerInput_.setAttribute("d",t),this.markerInput_.setAttribute("transform","translate("+n+","+r+")"+(this.workspace_.RTL?" scale(-1 1)":"")),this.currentMarkerSvg=this.markerInput_},e.blockRendering.MarkerSvg.prototype.positionLine_=function(t,n,r){this.markerSvgLine_.setAttribute("x",t),this.markerSvgLine_.setAttribute("y",n),this.markerSvgLine_.setAttribute("width",r),this.currentMarkerSvg=this.markerSvgLine_},e.blockRendering.MarkerSvg.prototype.positionOutput_=function(t,n,r){t=e.utils.svgPaths.moveBy(t,0)+e.utils.svgPaths.lineOnAxis("h",-(t-r.width))+e.utils.svgPaths.lineOnAxis("v",this.constants_.TAB_OFFSET_FROM_TOP)+r.pathDown+e.utils.svgPaths.lineOnAxis("V",n)+e.utils.svgPaths.lineOnAxis("H",t),this.markerBlock_.setAttribute("d",t),this.workspace_.RTL&&this.flipRtl_(this.markerBlock_),this.currentMarkerSvg=this.markerBlock_},e.blockRendering.MarkerSvg.prototype.positionPrevious_=function(t,n,r,s){t=e.utils.svgPaths.moveBy(-n,r)+e.utils.svgPaths.lineOnAxis("V",-n)+e.utils.svgPaths.lineOnAxis("H",this.constants_.NOTCH_OFFSET_LEFT)+s.pathLeft+e.utils.svgPaths.lineOnAxis("H",t+2*n)+e.utils.svgPaths.lineOnAxis("V",r),this.markerBlock_.setAttribute("d",t),this.workspace_.RTL&&this.flipRtl_(this.markerBlock_),this.currentMarkerSvg=this.markerBlock_},e.blockRendering.MarkerSvg.prototype.positionRect_=function(t,n,r,s){this.markerSvgRect_.setAttribute("x",t),this.markerSvgRect_.setAttribute("y",n),this.markerSvgRect_.setAttribute("width",r),this.markerSvgRect_.setAttribute("height",s),this.currentMarkerSvg=this.markerSvgRect_},e.blockRendering.MarkerSvg.prototype.flipRtl_=function(t){t.setAttribute("transform","scale(-1 1)")},e.blockRendering.MarkerSvg.prototype.hide=function(){this.markerSvgLine_.style.display="none",this.markerSvgRect_.style.display="none",this.markerInput_.style.display="none",this.markerBlock_.style.display="none"},e.blockRendering.MarkerSvg.prototype.fireMarkerEvent_=function(t,n){var r=n.getSourceBlock();t=new(e.Events.get(e.Events.MARKER_MOVE))(r,this.isCursor(),t,n),e.Events.fire(t)},e.blockRendering.MarkerSvg.prototype.getBlinkProperties_=function(){return{attributeType:"XML",attributeName:"fill",dur:"1s",values:this.colour_+";transparent;transparent;",repeatCount:"indefinite"}},e.blockRendering.MarkerSvg.prototype.createDomInternal_=function(){if(this.markerSvg_=e.utils.dom.createSvgElement(e.utils.Svg.G,{width:this.constants_.CURSOR_WS_WIDTH,height:this.constants_.WS_CURSOR_HEIGHT},this.svgGroup_),this.markerSvgLine_=e.utils.dom.createSvgElement(e.utils.Svg.RECT,{width:this.constants_.CURSOR_WS_WIDTH,height:this.constants_.WS_CURSOR_HEIGHT,style:"display: none"},this.markerSvg_),this.markerSvgRect_=e.utils.dom.createSvgElement(e.utils.Svg.RECT,{class:"blocklyVerticalMarker",rx:10,ry:10,style:"display: none"},this.markerSvg_),this.markerInput_=e.utils.dom.createSvgElement(e.utils.Svg.PATH,{transform:"",style:"display: none"},this.markerSvg_),this.markerBlock_=e.utils.dom.createSvgElement(e.utils.Svg.PATH,{transform:"",style:"display: none",fill:"none","stroke-width":this.constants_.CURSOR_STROKE_WIDTH},this.markerSvg_),this.isCursor()){var t=this.getBlinkProperties_();e.utils.dom.createSvgElement(e.utils.Svg.ANIMATE,t,this.markerSvgLine_),e.utils.dom.createSvgElement(e.utils.Svg.ANIMATE,t,this.markerInput_),t.attributeName="stroke",e.utils.dom.createSvgElement(e.utils.Svg.ANIMATE,t,this.markerBlock_)}return this.markerSvg_},e.blockRendering.MarkerSvg.prototype.applyColour_=function(t){this.markerSvgLine_.setAttribute("fill",this.colour_),this.markerSvgRect_.setAttribute("stroke",this.colour_),this.markerInput_.setAttribute("fill",this.colour_),this.markerBlock_.setAttribute("stroke",this.colour_),this.isCursor()&&(this.markerSvgLine_.firstChild.setAttribute("values",t=this.colour_+";transparent;transparent;"),this.markerInput_.firstChild.setAttribute("values",t),this.markerBlock_.firstChild.setAttribute("values",t))},e.blockRendering.MarkerSvg.prototype.dispose=function(){this.svgGroup_&&e.utils.dom.removeNode(this.svgGroup_)},e.blockRendering.PathObject=function(t,n,r){this.constants=r,this.svgRoot=t,this.svgPath=e.utils.dom.createSvgElement(e.utils.Svg.PATH,{class:"blocklyPath"},this.svgRoot),this.style=n,this.markerSvg=this.cursorSvg=null},e.blockRendering.PathObject.prototype.setPath=function(t){this.svgPath.setAttribute("d",t)},e.blockRendering.PathObject.prototype.flipRTL=function(){this.svgPath.setAttribute("transform","scale(-1 1)")},e.blockRendering.PathObject.prototype.setCursorSvg=function(t){t?(this.svgRoot.appendChild(t),this.cursorSvg=t):this.cursorSvg=null},e.blockRendering.PathObject.prototype.setMarkerSvg=function(t){t?(this.cursorSvg?this.svgRoot.insertBefore(t,this.cursorSvg):this.svgRoot.appendChild(t),this.markerSvg=t):this.markerSvg=null},e.blockRendering.PathObject.prototype.applyColour=function(t){this.svgPath.setAttribute("stroke",this.style.colourTertiary),this.svgPath.setAttribute("fill",this.style.colourPrimary),this.updateShadow_(t.isShadow()),this.updateDisabled_(!t.isEnabled()||t.getInheritedDisabled())},e.blockRendering.PathObject.prototype.setStyle=function(t){this.style=t},e.blockRendering.PathObject.prototype.setClass_=function(t,n){n?e.utils.dom.addClass(this.svgRoot,t):e.utils.dom.removeClass(this.svgRoot,t)},e.blockRendering.PathObject.prototype.updateHighlighted=function(t){this.svgPath.setAttribute("filter",t?"url(#"+this.constants.embossFilterId+")":"none")},e.blockRendering.PathObject.prototype.updateShadow_=function(t){t&&(this.svgPath.setAttribute("stroke","none"),this.svgPath.setAttribute("fill",this.style.colourSecondary))},e.blockRendering.PathObject.prototype.updateDisabled_=function(t){this.setClass_("blocklyDisabled",t),t&&this.svgPath.setAttribute("fill","url(#"+this.constants.disabledPatternId+")")},e.blockRendering.PathObject.prototype.updateSelected=function(t){this.setClass_("blocklySelected",t)},e.blockRendering.PathObject.prototype.updateDraggingDelete=function(t){this.setClass_("blocklyDraggingDelete",t)},e.blockRendering.PathObject.prototype.updateInsertionMarker=function(t){this.setClass_("blocklyInsertionMarker",t)},e.blockRendering.PathObject.prototype.updateMovable=function(t){this.setClass_("blocklyDraggable",t)},e.blockRendering.PathObject.prototype.updateReplacementFade=function(t){this.setClass_("blocklyReplaceable",t)},e.blockRendering.PathObject.prototype.updateShapeForInputHighlight=function(t,n){},e.blockRendering.Renderer=function(t){this.name=t,this.overrides=this.constants_=null},e.blockRendering.Renderer.prototype.getClassName=function(){return this.name+"-renderer"},e.blockRendering.Renderer.prototype.init=function(t,n){this.constants_=this.makeConstants_(),n&&(this.overrides=n,e.utils.object.mixin(this.constants_,n)),this.constants_.setTheme(t),this.constants_.init()},e.blockRendering.Renderer.prototype.createDom=function(t,n){this.constants_.createDom(t,this.name+"-"+n.name,"."+this.getClassName()+"."+n.getClassName())},e.blockRendering.Renderer.prototype.refreshDom=function(t,n){var r=this.getConstants();r.dispose(),this.constants_=this.makeConstants_(),this.overrides&&e.utils.object.mixin(this.constants_,this.overrides),this.constants_.randomIdentifier=r.randomIdentifier,this.constants_.setTheme(n),this.constants_.init(),this.createDom(t,n)},e.blockRendering.Renderer.prototype.dispose=function(){this.constants_&&this.constants_.dispose()},e.blockRendering.Renderer.prototype.makeConstants_=function(){return new e.blockRendering.ConstantProvider},e.blockRendering.Renderer.prototype.makeRenderInfo_=function(t){return new e.blockRendering.RenderInfo(this,t)},e.blockRendering.Renderer.prototype.makeDrawer_=function(t,n){return new e.blockRendering.Drawer(t,n)},e.blockRendering.Renderer.prototype.makeDebugger_=function(){if(!e.blockRendering.Debug)throw Error("Missing require for Blockly.blockRendering.Debug");return new e.blockRendering.Debug(this.getConstants())},e.blockRendering.Renderer.prototype.makeMarkerDrawer=function(t,n){return new e.blockRendering.MarkerSvg(t,this.getConstants(),n)},e.blockRendering.Renderer.prototype.makePathObject=function(t,n){return new e.blockRendering.PathObject(t,n,this.constants_)},e.blockRendering.Renderer.prototype.getConstants=function(){return this.constants_},e.blockRendering.Renderer.prototype.shouldHighlightConnection=function(t){return!0},e.blockRendering.Renderer.prototype.orphanCanConnectAtEnd=function(t,n,r){return!!e.Connection.getConnectionForOrphanedConnection(t,r===e.connectionTypes.OUTPUT_VALUE?n.outputConnection:n.previousConnection)},e.blockRendering.Renderer.prototype.getConnectionPreviewMethod=function(t,n,r){return n.type==e.connectionTypes.OUTPUT_VALUE||n.type==e.connectionTypes.PREVIOUS_STATEMENT?!t.isConnected()||this.orphanCanConnectAtEnd(r,t.targetBlock(),n.type)?e.InsertionMarkerManager.PREVIEW_TYPE.INSERTION_MARKER:e.InsertionMarkerManager.PREVIEW_TYPE.REPLACEMENT_FADE:e.InsertionMarkerManager.PREVIEW_TYPE.INSERTION_MARKER},e.blockRendering.Renderer.prototype.render=function(t){e.blockRendering.useDebugger&&!t.renderingDebugger&&(t.renderingDebugger=this.makeDebugger_());var n=this.makeRenderInfo_(t);n.measure(),this.makeDrawer_(t,n).draw()},e.geras={},e.geras.ConstantProvider=function(){e.geras.ConstantProvider.superClass_.constructor.call(this),this.FIELD_TEXT_BASELINE_CENTER=!1,this.DARK_PATH_OFFSET=1,this.MAX_BOTTOM_WIDTH=30,this.STATEMENT_BOTTOM_SPACER=-this.NOTCH_HEIGHT/2},e.utils.object.inherits(e.geras.ConstantProvider,e.blockRendering.ConstantProvider),e.geras.ConstantProvider.prototype.getCSS_=function(t){return e.geras.ConstantProvider.superClass_.getCSS_.call(this,t).concat([t+" .blocklyInsertionMarker>.blocklyPathLight,",t+" .blocklyInsertionMarker>.blocklyPathDark {","fill-opacity: "+this.INSERTION_MARKER_OPACITY+";","stroke: none;","}"])},e.geras.Highlighter=function(t){this.info_=t,this.inlineSteps_=this.steps_="",this.RTL_=this.info_.RTL,t=t.getRenderer(),this.constants_=t.getConstants(),this.highlightConstants_=t.getHighlightConstants(),this.highlightOffset_=this.highlightConstants_.OFFSET,this.outsideCornerPaths_=this.highlightConstants_.OUTSIDE_CORNER,this.insideCornerPaths_=this.highlightConstants_.INSIDE_CORNER,this.puzzleTabPaths_=this.highlightConstants_.PUZZLE_TAB,this.notchPaths_=this.highlightConstants_.NOTCH,this.startPaths_=this.highlightConstants_.START_HAT,this.jaggedTeethPaths_=this.highlightConstants_.JAGGED_TEETH},e.geras.Highlighter.prototype.getPath=function(){return this.steps_+"\n"+this.inlineSteps_},e.geras.Highlighter.prototype.drawTopCorner=function(t){this.steps_+=e.utils.svgPaths.moveBy(t.xPos,this.info_.startY);for(var r,n=0;r=t.elements[n];n++)e.blockRendering.Types.isLeftSquareCorner(r)?this.steps_+=this.highlightConstants_.START_POINT:e.blockRendering.Types.isLeftRoundedCorner(r)?this.steps_+=this.outsideCornerPaths_.topLeft(this.RTL_):e.blockRendering.Types.isPreviousConnection(r)?this.steps_+=this.notchPaths_.pathLeft:e.blockRendering.Types.isHat(r)?this.steps_+=this.startPaths_.path(this.RTL_):e.blockRendering.Types.isSpacer(r)&&0!=r.width&&(this.steps_+=e.utils.svgPaths.lineOnAxis("H",r.xPos+r.width-this.highlightOffset_));this.steps_+=e.utils.svgPaths.lineOnAxis("H",t.xPos+t.width-this.highlightOffset_)},e.geras.Highlighter.prototype.drawJaggedEdge_=function(t){this.info_.RTL&&(this.steps_+=this.jaggedTeethPaths_.pathLeft+e.utils.svgPaths.lineOnAxis("v",t.height-this.jaggedTeethPaths_.height-this.highlightOffset_))},e.geras.Highlighter.prototype.drawValueInput=function(t){var n=t.getLastInput();if(this.RTL_){var r=t.height-n.connectionHeight;this.steps_+=e.utils.svgPaths.moveTo(n.xPos+n.width-this.highlightOffset_,t.yPos)+this.puzzleTabPaths_.pathDown(this.RTL_)+e.utils.svgPaths.lineOnAxis("v",r)}else this.steps_+=e.utils.svgPaths.moveTo(n.xPos+n.width,t.yPos)+this.puzzleTabPaths_.pathDown(this.RTL_)},e.geras.Highlighter.prototype.drawStatementInput=function(t){var n=t.getLastInput();if(this.RTL_){var r=t.height-2*this.insideCornerPaths_.height;this.steps_+=e.utils.svgPaths.moveTo(n.xPos,t.yPos)+this.insideCornerPaths_.pathTop(this.RTL_)+e.utils.svgPaths.lineOnAxis("v",r)+this.insideCornerPaths_.pathBottom(this.RTL_)+e.utils.svgPaths.lineTo(t.width-n.xPos-this.insideCornerPaths_.width,0)}else this.steps_+=e.utils.svgPaths.moveTo(n.xPos,t.yPos+t.height)+this.insideCornerPaths_.pathBottom(this.RTL_)+e.utils.svgPaths.lineTo(t.width-n.xPos-this.insideCornerPaths_.width,0)},e.geras.Highlighter.prototype.drawRightSideRow=function(t){var n=t.xPos+t.width-this.highlightOffset_;t.followsStatement&&(this.steps_+=e.utils.svgPaths.lineOnAxis("H",n)),this.RTL_&&(this.steps_+=e.utils.svgPaths.lineOnAxis("H",n),t.height>this.highlightOffset_&&(this.steps_+=e.utils.svgPaths.lineOnAxis("V",t.yPos+t.height-this.highlightOffset_)))},e.geras.Highlighter.prototype.drawBottomRow=function(t){if(this.RTL_)this.steps_+=e.utils.svgPaths.lineOnAxis("V",t.baseline-this.highlightOffset_);else{var n=this.info_.bottomRow.elements[0];e.blockRendering.Types.isLeftSquareCorner(n)?this.steps_+=e.utils.svgPaths.moveTo(t.xPos+this.highlightOffset_,t.baseline-this.highlightOffset_):e.blockRendering.Types.isLeftRoundedCorner(n)&&(this.steps_+=e.utils.svgPaths.moveTo(t.xPos,t.baseline),this.steps_+=this.outsideCornerPaths_.bottomLeft())}},e.geras.Highlighter.prototype.drawLeft=function(){var t=this.info_.outputConnection;t&&(t=t.connectionOffsetY+t.height,this.RTL_?this.steps_+=e.utils.svgPaths.moveTo(this.info_.startX,t):(this.steps_+=e.utils.svgPaths.moveTo(this.info_.startX+this.highlightOffset_,this.info_.bottomRow.baseline-this.highlightOffset_),this.steps_+=e.utils.svgPaths.lineOnAxis("V",t)),this.steps_+=this.puzzleTabPaths_.pathUp(this.RTL_)),this.RTL_||(e.blockRendering.Types.isLeftRoundedCorner((t=this.info_.topRow).elements[0])?this.steps_+=e.utils.svgPaths.lineOnAxis("V",this.outsideCornerPaths_.height):this.steps_+=e.utils.svgPaths.lineOnAxis("V",t.capline+this.highlightOffset_))},e.geras.Highlighter.prototype.drawInlineInput=function(t){var n=this.highlightOffset_,r=t.xPos+t.connectionWidth,s=t.centerline-t.height/2,u=t.width-t.connectionWidth,y=s+n;this.RTL_?(s=t.connectionOffsetY-n,t=t.height-(t.connectionOffsetY+t.connectionHeight)+n,this.inlineSteps_+=e.utils.svgPaths.moveTo(r-n,y)+e.utils.svgPaths.lineOnAxis("v",s)+this.puzzleTabPaths_.pathDown(this.RTL_)+e.utils.svgPaths.lineOnAxis("v",t)+e.utils.svgPaths.lineOnAxis("h",u)):this.inlineSteps_+=e.utils.svgPaths.moveTo(t.xPos+t.width+n,y)+e.utils.svgPaths.lineOnAxis("v",t.height)+e.utils.svgPaths.lineOnAxis("h",-u)+e.utils.svgPaths.moveTo(r,s+t.connectionOffsetY)+this.puzzleTabPaths_.pathDown(this.RTL_)},e.geras.InlineInput=function(t,n){e.geras.InlineInput.superClass_.constructor.call(this,t,n),this.connectedBlock&&(this.width+=this.constants_.DARK_PATH_OFFSET,this.height+=this.constants_.DARK_PATH_OFFSET)},e.utils.object.inherits(e.geras.InlineInput,e.blockRendering.InlineInput),e.geras.StatementInput=function(t,n){e.geras.StatementInput.superClass_.constructor.call(this,t,n),this.connectedBlock&&(this.height+=this.constants_.DARK_PATH_OFFSET)},e.utils.object.inherits(e.geras.StatementInput,e.blockRendering.StatementInput),e.geras.RenderInfo=function(t,n){e.geras.RenderInfo.superClass_.constructor.call(this,t,n)},e.utils.object.inherits(e.geras.RenderInfo,e.blockRendering.RenderInfo),e.geras.RenderInfo.prototype.getRenderer=function(){return this.renderer_},e.geras.RenderInfo.prototype.populateBottomRow_=function(){e.geras.RenderInfo.superClass_.populateBottomRow_.call(this),this.block_.inputList.length&&this.block_.inputList[this.block_.inputList.length-1].type==e.inputTypes.STATEMENT||(this.bottomRow.minHeight=this.constants_.MEDIUM_PADDING-this.constants_.DARK_PATH_OFFSET)},e.geras.RenderInfo.prototype.addInput_=function(t,n){this.isInline&&t.type==e.inputTypes.VALUE?(n.elements.push(new e.geras.InlineInput(this.constants_,t)),n.hasInlineInput=!0):t.type==e.inputTypes.STATEMENT?(n.elements.push(new e.geras.StatementInput(this.constants_,t)),n.hasStatement=!0):t.type==e.inputTypes.VALUE?(n.elements.push(new e.blockRendering.ExternalValueInput(this.constants_,t)),n.hasExternalInput=!0):t.type==e.inputTypes.DUMMY&&(n.minHeight=Math.max(n.minHeight,this.constants_.DUMMY_INPUT_MIN_HEIGHT),n.hasDummyInput=!0),this.isInline||null!=n.align||(n.align=t.align)},e.geras.RenderInfo.prototype.addElemSpacing_=function(){for(var r,t=!1,n=0;r=this.rows[n];n++)r.hasExternalInput&&(t=!0);for(n=0;r=this.rows[n];n++){var s=r.elements;if(r.elements=[],r.startsWithElemSpacer()&&r.elements.push(new e.blockRendering.InRowSpacer(this.constants_,this.getInRowSpacing_(null,s[0]))),s.length){for(var u=0;u<s.length-1;u++){r.elements.push(s[u]);var y=this.getInRowSpacing_(s[u],s[u+1]);r.elements.push(new e.blockRendering.InRowSpacer(this.constants_,y))}r.elements.push(s[s.length-1]),r.endsWithElemSpacer()&&(y=this.getInRowSpacing_(s[s.length-1],null),t&&r.hasDummyInput&&(y+=this.constants_.TAB_WIDTH),r.elements.push(new e.blockRendering.InRowSpacer(this.constants_,y)))}}},e.geras.RenderInfo.prototype.getInRowSpacing_=function(t,n){if(!t)return n&&e.blockRendering.Types.isField(n)&&n.isEditable?this.constants_.MEDIUM_PADDING:n&&e.blockRendering.Types.isInlineInput(n)?this.constants_.MEDIUM_LARGE_PADDING:n&&e.blockRendering.Types.isStatementInput(n)?this.constants_.STATEMENT_INPUT_PADDING_LEFT:this.constants_.LARGE_PADDING;if(!e.blockRendering.Types.isInput(t)&&(!n||e.blockRendering.Types.isStatementInput(n)))return e.blockRendering.Types.isField(t)&&t.isEditable?this.constants_.MEDIUM_PADDING:e.blockRendering.Types.isIcon(t)?2*this.constants_.LARGE_PADDING+1:e.blockRendering.Types.isHat(t)?this.constants_.NO_PADDING:e.blockRendering.Types.isPreviousOrNextConnection(t)?this.constants_.LARGE_PADDING:e.blockRendering.Types.isLeftRoundedCorner(t)?this.constants_.MIN_BLOCK_WIDTH:e.blockRendering.Types.isJaggedEdge(t)?this.constants_.NO_PADDING:this.constants_.LARGE_PADDING;if(e.blockRendering.Types.isInput(t)&&!n){if(e.blockRendering.Types.isExternalInput(t))return this.constants_.NO_PADDING;if(e.blockRendering.Types.isInlineInput(t))return this.constants_.LARGE_PADDING;if(e.blockRendering.Types.isStatementInput(t))return this.constants_.NO_PADDING}if(!e.blockRendering.Types.isInput(t)&&n&&e.blockRendering.Types.isInput(n)){if(e.blockRendering.Types.isField(t)&&t.isEditable){if(e.blockRendering.Types.isInlineInput(n)||e.blockRendering.Types.isExternalInput(n))return this.constants_.SMALL_PADDING}else{if(e.blockRendering.Types.isInlineInput(n)||e.blockRendering.Types.isExternalInput(n))return this.constants_.MEDIUM_LARGE_PADDING;if(e.blockRendering.Types.isStatementInput(n))return this.constants_.LARGE_PADDING}return this.constants_.LARGE_PADDING-1}if(e.blockRendering.Types.isIcon(t)&&n&&!e.blockRendering.Types.isInput(n))return this.constants_.LARGE_PADDING;if(e.blockRendering.Types.isInlineInput(t)&&n&&e.blockRendering.Types.isField(n))return n.isEditable?this.constants_.MEDIUM_PADDING:this.constants_.LARGE_PADDING;if(e.blockRendering.Types.isLeftSquareCorner(t)&&n){if(e.blockRendering.Types.isHat(n))return this.constants_.NO_PADDING;if(e.blockRendering.Types.isPreviousConnection(n))return n.notchOffset;if(e.blockRendering.Types.isNextConnection(n))return n.notchOffset+(this.RTL?1:-1)*this.constants_.DARK_PATH_OFFSET/2}if(e.blockRendering.Types.isLeftRoundedCorner(t)&&n){if(e.blockRendering.Types.isPreviousConnection(n))return n.notchOffset-this.constants_.CORNER_RADIUS;if(e.blockRendering.Types.isNextConnection(n))return n.notchOffset-this.constants_.CORNER_RADIUS+(this.RTL?1:-1)*this.constants_.DARK_PATH_OFFSET/2}return e.blockRendering.Types.isField(t)&&n&&e.blockRendering.Types.isField(n)&&t.isEditable==n.isEditable||n&&e.blockRendering.Types.isJaggedEdge(n)?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING},e.geras.RenderInfo.prototype.getSpacerRowHeight_=function(t,n){return e.blockRendering.Types.isTopRow(t)&&e.blockRendering.Types.isBottomRow(n)?this.constants_.EMPTY_BLOCK_SPACER_HEIGHT:e.blockRendering.Types.isTopRow(t)||e.blockRendering.Types.isBottomRow(n)?this.constants_.NO_PADDING:t.hasExternalInput&&n.hasExternalInput?this.constants_.LARGE_PADDING:!t.hasStatement&&n.hasStatement?this.constants_.BETWEEN_STATEMENT_PADDING_Y:t.hasStatement&&n.hasStatement||!t.hasStatement&&n.hasDummyInput||t.hasDummyInput?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING},e.geras.RenderInfo.prototype.getElemCenterline_=function(t,n){if(e.blockRendering.Types.isSpacer(n))return t.yPos+n.height/2;if(e.blockRendering.Types.isBottomRow(t))return t=t.yPos+t.height-t.descenderHeight,e.blockRendering.Types.isNextConnection(n)?t+n.height/2:t-n.height/2;if(e.blockRendering.Types.isTopRow(t))return e.blockRendering.Types.isHat(n)?t.capline-n.height/2:t.capline+n.height/2;var r=t.yPos;return e.blockRendering.Types.isField(n)||e.blockRendering.Types.isIcon(n)?(r+=n.height/2,(t.hasInlineInput||t.hasStatement)&&n.height+this.constants_.TALL_INPUT_FIELD_OFFSET_Y<=t.height&&(r+=this.constants_.TALL_INPUT_FIELD_OFFSET_Y)):r=e.blockRendering.Types.isInlineInput(n)?r+n.height/2:r+t.height/2,r},e.geras.RenderInfo.prototype.alignRowElements_=function(){if(this.isInline){for(var s,t=0,n=null,r=this.rows.length-1;s=this.rows[r];r--)s.nextRightEdge=t,e.blockRendering.Types.isInputRow(s)&&(s.hasStatement&&this.alignStatementRow_(s),n&&n.hasStatement&&s.width<n.width?s.nextRightEdge=n.width:t=s.width,n=s);for(r=t=0;s=this.rows[r];r++)s.hasStatement?t=this.getDesiredRowWidth_(s):e.blockRendering.Types.isSpacer(s)?s.width=Math.max(t,s.nextRightEdge):(0<(t=Math.max(t,s.nextRightEdge)-s.width)&&this.addAlignmentPadding_(s,t),t=s.width)}else e.geras.RenderInfo.superClass_.alignRowElements_.call(this)},e.geras.RenderInfo.prototype.getDesiredRowWidth_=function(t){return this.isInline&&t.hasStatement?this.statementEdge+this.constants_.MAX_BOTTOM_WIDTH+this.startX:e.geras.RenderInfo.superClass_.getDesiredRowWidth_.call(this,t)},e.geras.RenderInfo.prototype.finalize_=function(){for(var s,t=0,n=0,r=0;s=this.rows[r];r++){s.yPos=n,s.xPos=this.startX,n+=s.height,t=Math.max(t,s.widthWithConnectedBlocks);var u=n-this.topRow.ascenderHeight;s==this.bottomRow&&u<this.constants_.MIN_BLOCK_HEIGHT&&(this.bottomRow.height+=u=this.constants_.MIN_BLOCK_HEIGHT-u,n+=u),this.recordElemPositions_(s)}this.outputConnection&&this.block_.nextConnection&&this.block_.nextConnection.isConnected()&&(t=Math.max(t,this.block_.nextConnection.targetBlock().getHeightWidth().width-this.constants_.DARK_PATH_OFFSET)),this.bottomRow.baseline=n-this.bottomRow.descenderHeight,this.widthWithChildren=t+this.startX+this.constants_.DARK_PATH_OFFSET,this.width+=this.constants_.DARK_PATH_OFFSET,this.height=n+this.constants_.DARK_PATH_OFFSET,this.startY=this.topRow.capline},e.geras.Drawer=function(t,n){e.geras.Drawer.superClass_.constructor.call(this,t,n),this.highlighter_=new e.geras.Highlighter(n)},e.utils.object.inherits(e.geras.Drawer,e.blockRendering.Drawer),e.geras.Drawer.prototype.draw=function(){this.hideHiddenIcons_(),this.drawOutline_(),this.drawInternals_();var t=this.block_.pathObject;t.setPath(this.outlinePath_+"\n"+this.inlinePath_),t.setHighlightPath(this.highlighter_.getPath()),this.info_.RTL&&t.flipRTL(),e.blockRendering.useDebugger&&this.block_.renderingDebugger.drawDebug(this.block_,this.info_),this.recordSizeOnBlock_()},e.geras.Drawer.prototype.drawTop_=function(){this.highlighter_.drawTopCorner(this.info_.topRow),this.highlighter_.drawRightSideRow(this.info_.topRow),e.geras.Drawer.superClass_.drawTop_.call(this)},e.geras.Drawer.prototype.drawJaggedEdge_=function(t){this.highlighter_.drawJaggedEdge_(t),e.geras.Drawer.superClass_.drawJaggedEdge_.call(this,t)},e.geras.Drawer.prototype.drawValueInput_=function(t){this.highlighter_.drawValueInput(t),e.geras.Drawer.superClass_.drawValueInput_.call(this,t)},e.geras.Drawer.prototype.drawStatementInput_=function(t){this.highlighter_.drawStatementInput(t),e.geras.Drawer.superClass_.drawStatementInput_.call(this,t)},e.geras.Drawer.prototype.drawRightSideRow_=function(t){this.highlighter_.drawRightSideRow(t),this.outlinePath_+=e.utils.svgPaths.lineOnAxis("H",t.xPos+t.width)+e.utils.svgPaths.lineOnAxis("V",t.yPos+t.height)},e.geras.Drawer.prototype.drawBottom_=function(){this.highlighter_.drawBottomRow(this.info_.bottomRow),e.geras.Drawer.superClass_.drawBottom_.call(this)},e.geras.Drawer.prototype.drawLeft_=function(){this.highlighter_.drawLeft(),e.geras.Drawer.superClass_.drawLeft_.call(this)},e.geras.Drawer.prototype.drawInlineInput_=function(t){this.highlighter_.drawInlineInput(t),e.geras.Drawer.superClass_.drawInlineInput_.call(this,t)},e.geras.Drawer.prototype.positionInlineInputConnection_=function(t){if(t.connectionModel){var r=t.xPos+t.connectionWidth+this.constants_.DARK_PATH_OFFSET;this.info_.RTL&&(r*=-1),t.connectionModel.setOffsetInBlock(r,t.centerline-t.height/2+t.connectionOffsetY+this.constants_.DARK_PATH_OFFSET)}},e.geras.Drawer.prototype.positionStatementInputConnection_=function(t){var n=t.getLastInput();if(n.connectionModel){var r=t.xPos+t.statementEdge+n.notchOffset;n.connectionModel.setOffsetInBlock(r=this.info_.RTL?-1*r:r+this.constants_.DARK_PATH_OFFSET,t.yPos+this.constants_.DARK_PATH_OFFSET)}},e.geras.Drawer.prototype.positionExternalValueConnection_=function(t){var n=t.getLastInput();if(n.connectionModel){var r=t.xPos+t.width+this.constants_.DARK_PATH_OFFSET;this.info_.RTL&&(r*=-1),n.connectionModel.setOffsetInBlock(r,t.yPos)}},e.geras.Drawer.prototype.positionNextConnection_=function(){var t=this.info_.bottomRow;if(t.connection){var n=t.connection,r=n.xPos;n.connectionModel.setOffsetInBlock((this.info_.RTL?-r:r)+this.constants_.DARK_PATH_OFFSET/2,t.baseline+this.constants_.DARK_PATH_OFFSET)}},e.geras.HighlightConstantProvider=function(t){this.constantProvider=t,this.OFFSET=.5,this.START_POINT=e.utils.svgPaths.moveBy(this.OFFSET,this.OFFSET)},e.geras.HighlightConstantProvider.prototype.init=function(){this.INSIDE_CORNER=this.makeInsideCorner(),this.OUTSIDE_CORNER=this.makeOutsideCorner(),this.PUZZLE_TAB=this.makePuzzleTab(),this.NOTCH=this.makeNotch(),this.JAGGED_TEETH=this.makeJaggedTeeth(),this.START_HAT=this.makeStartHat()},e.geras.HighlightConstantProvider.prototype.makeInsideCorner=function(){var t=this.constantProvider.CORNER_RADIUS,n=this.OFFSET,r=(1-Math.SQRT1_2)*(t+n)-n,s=e.utils.svgPaths.moveBy(r,r)+e.utils.svgPaths.arc("a","0 0,0",t,e.utils.svgPaths.point(-r-n,t-r)),u=e.utils.svgPaths.arc("a","0 0,0",t+n,e.utils.svgPaths.point(t+n,t+n)),y=e.utils.svgPaths.moveBy(r,-r)+e.utils.svgPaths.arc("a","0 0,0",t+n,e.utils.svgPaths.point(t-r,r+n));return{width:t+n,height:t,pathTop:function(x){return x?s:""},pathBottom:function(x){return x?u:y}}},e.geras.HighlightConstantProvider.prototype.makeOutsideCorner=function(){var t=this.constantProvider.CORNER_RADIUS,n=this.OFFSET,r=(1-Math.SQRT1_2)*(t-n)+n,s=e.utils.svgPaths.moveBy(r,r)+e.utils.svgPaths.arc("a","0 0,1",t-n,e.utils.svgPaths.point(t-r,-r+n)),u=e.utils.svgPaths.moveBy(n,t)+e.utils.svgPaths.arc("a","0 0,1",t-n,e.utils.svgPaths.point(t,-t+n)),y=-r,x=e.utils.svgPaths.moveBy(r,y)+e.utils.svgPaths.arc("a","0 0,1",t-n,e.utils.svgPaths.point(-r+n,-y-t));return{height:t,topLeft:function(B){return B?s:u},bottomLeft:function(){return x}}},e.geras.HighlightConstantProvider.prototype.makePuzzleTab=function(){var t=this.constantProvider.TAB_WIDTH,n=this.constantProvider.TAB_HEIGHT,r=e.utils.svgPaths.moveBy(-2,3.4-n)+e.utils.svgPaths.lineTo(-.45*t,-2.1),s=e.utils.svgPaths.lineOnAxis("v",2.5)+e.utils.svgPaths.moveBy(.97*-t,2.5)+e.utils.svgPaths.curve("q",[e.utils.svgPaths.point(.05*-t,10),e.utils.svgPaths.point(.3*t,9.5)])+e.utils.svgPaths.moveBy(.67*t,-1.9)+e.utils.svgPaths.lineOnAxis("v",2.5),u=e.utils.svgPaths.lineOnAxis("v",-1.5)+e.utils.svgPaths.moveBy(-.92*t,-.5)+e.utils.svgPaths.curve("q",[e.utils.svgPaths.point(-.19*t,-5.5),e.utils.svgPaths.point(0,-11)])+e.utils.svgPaths.moveBy(.92*t,1),y=e.utils.svgPaths.moveBy(-5,n-.7)+e.utils.svgPaths.lineTo(.46*t,-2.1);return{width:t,height:n,pathUp:function(x){return x?r:u},pathDown:function(x){return x?s:y}}},e.geras.HighlightConstantProvider.prototype.makeNotch=function(){return{pathLeft:e.utils.svgPaths.lineOnAxis("h",this.OFFSET)+this.constantProvider.NOTCH.pathLeft}},e.geras.HighlightConstantProvider.prototype.makeJaggedTeeth=function(){return{pathLeft:e.utils.svgPaths.lineTo(5.1,2.6)+e.utils.svgPaths.moveBy(-10.2,6.8)+e.utils.svgPaths.lineTo(5.1,2.6),height:12,width:10.2}},e.geras.HighlightConstantProvider.prototype.makeStartHat=function(){var t=this.constantProvider.START_HAT.height,n=e.utils.svgPaths.moveBy(25,-8.7)+e.utils.svgPaths.curve("c",[e.utils.svgPaths.point(29.7,-6.2),e.utils.svgPaths.point(57.2,-.5),e.utils.svgPaths.point(75,8.7)]),r=e.utils.svgPaths.curve("c",[e.utils.svgPaths.point(17.8,-9.2),e.utils.svgPaths.point(45.3,-14.9),e.utils.svgPaths.point(75,-8.7)])+e.utils.svgPaths.moveTo(100.5,t+.5);return{path:function(s){return s?n:r}}},e.geras.PathObject=function(t,n,r){this.constants=r,this.svgRoot=t,this.svgPathDark=e.utils.dom.createSvgElement(e.utils.Svg.PATH,{class:"blocklyPathDark",transform:"translate(1,1)"},this.svgRoot),this.svgPath=e.utils.dom.createSvgElement(e.utils.Svg.PATH,{class:"blocklyPath"},this.svgRoot),this.svgPathLight=e.utils.dom.createSvgElement(e.utils.Svg.PATH,{class:"blocklyPathLight"},this.svgRoot),this.colourDark="#000000",this.style=n},e.utils.object.inherits(e.geras.PathObject,e.blockRendering.PathObject),e.geras.PathObject.prototype.setPath=function(t){this.svgPath.setAttribute("d",t),this.svgPathDark.setAttribute("d",t)},e.geras.PathObject.prototype.setHighlightPath=function(t){this.svgPathLight.setAttribute("d",t)},e.geras.PathObject.prototype.flipRTL=function(){this.svgPath.setAttribute("transform","scale(-1 1)"),this.svgPathLight.setAttribute("transform","scale(-1 1)"),this.svgPathDark.setAttribute("transform","translate(1,1) scale(-1 1)")},e.geras.PathObject.prototype.applyColour=function(t){this.svgPathLight.style.display="",this.svgPathDark.style.display="",this.svgPathLight.setAttribute("stroke",this.style.colourTertiary),this.svgPathDark.setAttribute("fill",this.colourDark),e.geras.PathObject.superClass_.applyColour.call(this,t),this.svgPath.setAttribute("stroke","none")},e.geras.PathObject.prototype.setStyle=function(t){this.style=t,this.colourDark=e.utils.colour.blend("#000",this.style.colourPrimary,.2)||this.colourDark},e.geras.PathObject.prototype.updateHighlighted=function(t){t?(this.svgPath.setAttribute("filter","url(#"+this.constants.embossFilterId+")"),this.svgPathLight.style.display="none"):(this.svgPath.setAttribute("filter","none"),this.svgPathLight.style.display="inline")},e.geras.PathObject.prototype.updateShadow_=function(t){t&&(this.svgPathLight.style.display="none",this.svgPathDark.setAttribute("fill",this.style.colourSecondary),this.svgPath.setAttribute("stroke","none"),this.svgPath.setAttribute("fill",this.style.colourSecondary))},e.geras.PathObject.prototype.updateDisabled_=function(t){e.geras.PathObject.superClass_.updateDisabled_.call(this,t),t&&this.svgPath.setAttribute("stroke","none")},e.geras.Renderer=function(t){e.geras.Renderer.superClass_.constructor.call(this,t),this.highlightConstants_=null},e.utils.object.inherits(e.geras.Renderer,e.blockRendering.Renderer),e.geras.Renderer.prototype.init=function(t,n){e.geras.Renderer.superClass_.init.call(this,t,n),this.highlightConstants_=this.makeHighlightConstants_(),this.highlightConstants_.init()},e.geras.Renderer.prototype.refreshDom=function(t,n){e.geras.Renderer.superClass_.refreshDom.call(this,t,n),this.getHighlightConstants().init()},e.geras.Renderer.prototype.makeConstants_=function(){return new e.geras.ConstantProvider},e.geras.Renderer.prototype.makeRenderInfo_=function(t){return new e.geras.RenderInfo(this,t)},e.geras.Renderer.prototype.makeDrawer_=function(t,n){return new e.geras.Drawer(t,n)},e.geras.Renderer.prototype.makePathObject=function(t,n){return new e.geras.PathObject(t,n,this.getConstants())},e.geras.Renderer.prototype.makeHighlightConstants_=function(){return new e.geras.HighlightConstantProvider(this.getConstants())},e.geras.Renderer.prototype.getHighlightConstants=function(){return this.highlightConstants_},e.blockRendering.register("geras",e.geras.Renderer),e.thrasos={},e.thrasos.RenderInfo=function(t,n){e.thrasos.RenderInfo.superClass_.constructor.call(this,t,n)},e.utils.object.inherits(e.thrasos.RenderInfo,e.blockRendering.RenderInfo),e.thrasos.RenderInfo.prototype.getRenderer=function(){return this.renderer_},e.thrasos.RenderInfo.prototype.addElemSpacing_=function(){for(var r,t=!1,n=0;r=this.rows[n];n++)r.hasExternalInput&&(t=!0);for(n=0;r=this.rows[n];n++){var s=r.elements;r.elements=[],r.startsWithElemSpacer()&&r.elements.push(new e.blockRendering.InRowSpacer(this.constants_,this.getInRowSpacing_(null,s[0])));for(var u=0;u<s.length-1;u++){r.elements.push(s[u]);var y=this.getInRowSpacing_(s[u],s[u+1]);r.elements.push(new e.blockRendering.InRowSpacer(this.constants_,y))}r.elements.push(s[s.length-1]),r.endsWithElemSpacer()&&(y=this.getInRowSpacing_(s[s.length-1],null),t&&r.hasDummyInput&&(y+=this.constants_.TAB_WIDTH),r.elements.push(new e.blockRendering.InRowSpacer(this.constants_,y)))}},e.thrasos.RenderInfo.prototype.getInRowSpacing_=function(t,n){if(!t)return n&&e.blockRendering.Types.isField(n)&&n.isEditable?this.constants_.MEDIUM_PADDING:n&&e.blockRendering.Types.isInlineInput(n)?this.constants_.MEDIUM_LARGE_PADDING:n&&e.blockRendering.Types.isStatementInput(n)?this.constants_.STATEMENT_INPUT_PADDING_LEFT:this.constants_.LARGE_PADDING;if(!e.blockRendering.Types.isInput(t)&&!n)return e.blockRendering.Types.isField(t)&&t.isEditable?this.constants_.MEDIUM_PADDING:e.blockRendering.Types.isIcon(t)?2*this.constants_.LARGE_PADDING+1:e.blockRendering.Types.isHat(t)?this.constants_.NO_PADDING:e.blockRendering.Types.isPreviousOrNextConnection(t)?this.constants_.LARGE_PADDING:e.blockRendering.Types.isLeftRoundedCorner(t)?this.constants_.MIN_BLOCK_WIDTH:e.blockRendering.Types.isJaggedEdge(t)?this.constants_.NO_PADDING:this.constants_.LARGE_PADDING;if(e.blockRendering.Types.isInput(t)&&!n){if(e.blockRendering.Types.isExternalInput(t))return this.constants_.NO_PADDING;if(e.blockRendering.Types.isInlineInput(t))return this.constants_.LARGE_PADDING;if(e.blockRendering.Types.isStatementInput(t))return this.constants_.NO_PADDING}if(!e.blockRendering.Types.isInput(t)&&n&&e.blockRendering.Types.isInput(n)){if(e.blockRendering.Types.isField(t)&&t.isEditable){if(e.blockRendering.Types.isInlineInput(n)||e.blockRendering.Types.isExternalInput(n))return this.constants_.SMALL_PADDING}else{if(e.blockRendering.Types.isInlineInput(n)||e.blockRendering.Types.isExternalInput(n))return this.constants_.MEDIUM_LARGE_PADDING;if(e.blockRendering.Types.isStatementInput(n))return this.constants_.LARGE_PADDING}return this.constants_.LARGE_PADDING-1}if(e.blockRendering.Types.isIcon(t)&&n&&!e.blockRendering.Types.isInput(n))return this.constants_.LARGE_PADDING;if(e.blockRendering.Types.isInlineInput(t)&&n&&e.blockRendering.Types.isField(n))return n.isEditable?this.constants_.MEDIUM_PADDING:this.constants_.LARGE_PADDING;if(e.blockRendering.Types.isLeftSquareCorner(t)&&n){if(e.blockRendering.Types.isHat(n))return this.constants_.NO_PADDING;if(e.blockRendering.Types.isPreviousConnection(n)||e.blockRendering.Types.isNextConnection(n))return n.notchOffset}return e.blockRendering.Types.isLeftRoundedCorner(t)&&n?n.notchOffset-this.constants_.CORNER_RADIUS:e.blockRendering.Types.isField(t)&&n&&e.blockRendering.Types.isField(n)&&t.isEditable==n.isEditable||n&&e.blockRendering.Types.isJaggedEdge(n)?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING},e.thrasos.RenderInfo.prototype.getSpacerRowHeight_=function(t,n){return e.blockRendering.Types.isTopRow(t)&&e.blockRendering.Types.isBottomRow(n)?this.constants_.EMPTY_BLOCK_SPACER_HEIGHT:e.blockRendering.Types.isTopRow(t)||e.blockRendering.Types.isBottomRow(n)?this.constants_.NO_PADDING:t.hasExternalInput&&n.hasExternalInput?this.constants_.LARGE_PADDING:!t.hasStatement&&n.hasStatement?this.constants_.BETWEEN_STATEMENT_PADDING_Y:t.hasStatement&&n.hasStatement||t.hasDummyInput||n.hasDummyInput?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING},e.thrasos.RenderInfo.prototype.getElemCenterline_=function(t,n){if(e.blockRendering.Types.isSpacer(n))return t.yPos+n.height/2;if(e.blockRendering.Types.isBottomRow(t))return t=t.yPos+t.height-t.descenderHeight,e.blockRendering.Types.isNextConnection(n)?t+n.height/2:t-n.height/2;if(e.blockRendering.Types.isTopRow(t))return e.blockRendering.Types.isHat(n)?t.capline-n.height/2:t.capline+n.height/2;var r=t.yPos;return e.blockRendering.Types.isField(n)&&t.hasStatement?r+(this.constants_.TALL_INPUT_FIELD_OFFSET_Y+n.height/2):r+t.height/2},e.thrasos.RenderInfo.prototype.finalize_=function(){for(var s,t=0,n=0,r=0;s=this.rows[r];r++){s.yPos=n,s.xPos=this.startX,n+=s.height,t=Math.max(t,s.widthWithConnectedBlocks);var u=n-this.topRow.ascenderHeight;s==this.bottomRow&&u<this.constants_.MIN_BLOCK_HEIGHT&&(this.bottomRow.height+=u=this.constants_.MIN_BLOCK_HEIGHT-u,n+=u),this.recordElemPositions_(s)}this.outputConnection&&this.block_.nextConnection&&this.block_.nextConnection.isConnected()&&(t=Math.max(t,this.block_.nextConnection.targetBlock().getHeightWidth().width)),this.bottomRow.baseline=n-this.bottomRow.descenderHeight,this.widthWithChildren=t+this.startX,this.height=n,this.startY=this.topRow.capline},e.thrasos.Renderer=function(t){e.thrasos.Renderer.superClass_.constructor.call(this,t)},e.utils.object.inherits(e.thrasos.Renderer,e.blockRendering.Renderer),e.thrasos.Renderer.prototype.makeRenderInfo_=function(t){return new e.thrasos.RenderInfo(this,t)},e.blockRendering.register("thrasos",e.thrasos.Renderer),e.zelos={},e.zelos.ConstantProvider=function(){e.zelos.ConstantProvider.superClass_.constructor.call(this),this.SMALL_PADDING=this.GRID_UNIT=4,this.MEDIUM_PADDING=2*this.GRID_UNIT,this.MEDIUM_LARGE_PADDING=3*this.GRID_UNIT,this.LARGE_PADDING=4*this.GRID_UNIT,this.CORNER_RADIUS=1*this.GRID_UNIT,this.NOTCH_WIDTH=9*this.GRID_UNIT,this.NOTCH_HEIGHT=2*this.GRID_UNIT,this.STATEMENT_INPUT_NOTCH_OFFSET=this.NOTCH_OFFSET_LEFT=3*this.GRID_UNIT,this.MIN_BLOCK_WIDTH=2*this.GRID_UNIT,this.MIN_BLOCK_HEIGHT=12*this.GRID_UNIT,this.EMPTY_STATEMENT_INPUT_HEIGHT=6*this.GRID_UNIT,this.TAB_OFFSET_FROM_TOP=0,this.TOP_ROW_MIN_HEIGHT=this.CORNER_RADIUS,this.TOP_ROW_PRECEDES_STATEMENT_MIN_HEIGHT=this.LARGE_PADDING,this.BOTTOM_ROW_MIN_HEIGHT=this.CORNER_RADIUS,this.BOTTOM_ROW_AFTER_STATEMENT_MIN_HEIGHT=6*this.GRID_UNIT,this.STATEMENT_BOTTOM_SPACER=-this.NOTCH_HEIGHT,this.STATEMENT_INPUT_SPACER_MIN_WIDTH=40*this.GRID_UNIT,this.STATEMENT_INPUT_PADDING_LEFT=4*this.GRID_UNIT,this.EMPTY_INLINE_INPUT_PADDING=4*this.GRID_UNIT,this.EMPTY_INLINE_INPUT_HEIGHT=8*this.GRID_UNIT,this.DUMMY_INPUT_MIN_HEIGHT=8*this.GRID_UNIT,this.DUMMY_INPUT_SHADOW_MIN_HEIGHT=6*this.GRID_UNIT,this.CURSOR_WS_WIDTH=20*this.GRID_UNIT,this.CURSOR_COLOUR="#ffa200",this.CURSOR_RADIUS=5,this.JAGGED_TEETH_WIDTH=this.JAGGED_TEETH_HEIGHT=0,this.START_HAT_HEIGHT=22,this.START_HAT_WIDTH=96,this.SHAPES={HEXAGONAL:1,ROUND:2,SQUARE:3,PUZZLE:4,NOTCH:5},this.SHAPE_IN_SHAPE_PADDING={1:{0:5*this.GRID_UNIT,1:2*this.GRID_UNIT,2:5*this.GRID_UNIT,3:5*this.GRID_UNIT},2:{0:3*this.GRID_UNIT,1:3*this.GRID_UNIT,2:1*this.GRID_UNIT,3:2*this.GRID_UNIT},3:{0:2*this.GRID_UNIT,1:2*this.GRID_UNIT,2:2*this.GRID_UNIT,3:2*this.GRID_UNIT}},this.FULL_BLOCK_FIELDS=!0,this.FIELD_TEXT_FONTSIZE=3*this.GRID_UNIT,this.FIELD_TEXT_FONTWEIGHT="bold",this.FIELD_TEXT_FONTFAMILY='"Helvetica Neue", "Segoe UI", Helvetica, sans-serif',this.FIELD_BORDER_RECT_RADIUS=this.CORNER_RADIUS,this.FIELD_BORDER_RECT_X_PADDING=2*this.GRID_UNIT,this.FIELD_BORDER_RECT_Y_PADDING=1.625*this.GRID_UNIT,this.FIELD_BORDER_RECT_HEIGHT=8*this.GRID_UNIT,this.FIELD_DROPDOWN_BORDER_RECT_HEIGHT=8*this.GRID_UNIT,this.FIELD_DROPDOWN_SVG_ARROW=this.FIELD_DROPDOWN_COLOURED_DIV=this.FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW=!0,this.FIELD_DROPDOWN_SVG_ARROW_PADDING=this.FIELD_BORDER_RECT_X_PADDING,this.FIELD_COLOUR_FULL_BLOCK=this.FIELD_TEXTINPUT_BOX_SHADOW=!0,this.FIELD_COLOUR_DEFAULT_WIDTH=2*this.GRID_UNIT,this.FIELD_COLOUR_DEFAULT_HEIGHT=4*this.GRID_UNIT,this.FIELD_CHECKBOX_X_OFFSET=1*this.GRID_UNIT,this.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH=12*this.GRID_UNIT,this.SELECTED_GLOW_COLOUR="#fff200",this.SELECTED_GLOW_SIZE=.5,this.REPLACEMENT_GLOW_COLOUR="#fff200",this.REPLACEMENT_GLOW_SIZE=2,this.selectedGlowFilterId="",this.selectedGlowFilter_=null,this.replacementGlowFilterId="",this.replacementGlowFilter_=null},e.utils.object.inherits(e.zelos.ConstantProvider,e.blockRendering.ConstantProvider),e.zelos.ConstantProvider.prototype.setFontConstants_=function(t){e.zelos.ConstantProvider.superClass_.setFontConstants_.call(this,t),this.FIELD_DROPDOWN_BORDER_RECT_HEIGHT=this.FIELD_BORDER_RECT_HEIGHT=this.FIELD_TEXT_HEIGHT+2*this.FIELD_BORDER_RECT_Y_PADDING},e.zelos.ConstantProvider.prototype.init=function(){e.zelos.ConstantProvider.superClass_.init.call(this),this.HEXAGONAL=this.makeHexagonal(),this.ROUNDED=this.makeRounded(),this.SQUARED=this.makeSquared(),this.STATEMENT_INPUT_NOTCH_OFFSET=this.NOTCH_OFFSET_LEFT+this.INSIDE_CORNERS.rightWidth},e.zelos.ConstantProvider.prototype.setDynamicProperties_=function(t){e.zelos.ConstantProvider.superClass_.setDynamicProperties_.call(this,t),this.SELECTED_GLOW_COLOUR=t.getComponentStyle("selectedGlowColour")||this.SELECTED_GLOW_COLOUR;var n=Number(t.getComponentStyle("selectedGlowSize"));this.SELECTED_GLOW_SIZE=n&&!isNaN(n)?n:this.SELECTED_GLOW_SIZE,this.REPLACEMENT_GLOW_COLOUR=t.getComponentStyle("replacementGlowColour")||this.REPLACEMENT_GLOW_COLOUR,this.REPLACEMENT_GLOW_SIZE=(t=Number(t.getComponentStyle("replacementGlowSize")))&&!isNaN(t)?t:this.REPLACEMENT_GLOW_SIZE},e.zelos.ConstantProvider.prototype.dispose=function(){e.zelos.ConstantProvider.superClass_.dispose.call(this),this.selectedGlowFilter_&&e.utils.dom.removeNode(this.selectedGlowFilter_),this.replacementGlowFilter_&&e.utils.dom.removeNode(this.replacementGlowFilter_)},e.zelos.ConstantProvider.prototype.makeStartHat=function(){var t=this.START_HAT_HEIGHT,n=this.START_HAT_WIDTH;return{height:t,width:n,path:e.utils.svgPaths.curve("c",[e.utils.svgPaths.point(25,-t),e.utils.svgPaths.point(71,-t),e.utils.svgPaths.point(n,0)])}},e.zelos.ConstantProvider.prototype.makeHexagonal=function(){function t(r,s,u){var y=r/2;return e.utils.svgPaths.lineTo(-(u=u?-1:1)*(y=y>n?n:y),r=(s?-1:1)*r/2)+e.utils.svgPaths.lineTo(u*y,r)}var n=this.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH;return{type:this.SHAPES.HEXAGONAL,isDynamic:!0,width:function(r){return(r/=2)>n?n:r},height:function(r){return r},connectionOffsetY:function(r){return r/2},connectionOffsetX:function(r){return-r},pathDown:function(r){return t(r,!1,!1)},pathUp:function(r){return t(r,!0,!1)},pathRightDown:function(r){return t(r,!1,!0)},pathRightUp:function(r){return t(r,!1,!0)}}},e.zelos.ConstantProvider.prototype.makeRounded=function(){function t(s,u,y){var x=s>r?s-r:0;return e.utils.svgPaths.arc("a","0 0,1",s=(s>r?r:s)/2,e.utils.svgPaths.point((u?-1:1)*s,(u?-1:1)*s))+e.utils.svgPaths.lineOnAxis("v",(y?1:-1)*x)+e.utils.svgPaths.arc("a","0 0,1",s,e.utils.svgPaths.point((u?1:-1)*s,(u?-1:1)*s))}var n=this.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH,r=2*n;return{type:this.SHAPES.ROUND,isDynamic:!0,width:function(s){return(s/=2)>n?n:s},height:function(s){return s},connectionOffsetY:function(s){return s/2},connectionOffsetX:function(s){return-s},pathDown:function(s){return t(s,!1,!1)},pathUp:function(s){return t(s,!0,!1)},pathRightDown:function(s){return t(s,!1,!0)},pathRightUp:function(s){return t(s,!1,!0)}}},e.zelos.ConstantProvider.prototype.makeSquared=function(){function t(r,s,u){return r-=2*n,e.utils.svgPaths.arc("a","0 0,1",n,e.utils.svgPaths.point((s?-1:1)*n,(s?-1:1)*n))+e.utils.svgPaths.lineOnAxis("v",(u?1:-1)*r)+e.utils.svgPaths.arc("a","0 0,1",n,e.utils.svgPaths.point((s?1:-1)*n,(s?-1:1)*n))}var n=this.CORNER_RADIUS;return{type:this.SHAPES.SQUARE,isDynamic:!0,width:function(r){return n},height:function(r){return r},connectionOffsetY:function(r){return r/2},connectionOffsetX:function(r){return-r},pathDown:function(r){return t(r,!1,!1)},pathUp:function(r){return t(r,!0,!1)},pathRightDown:function(r){return t(r,!1,!0)},pathRightUp:function(r){return t(r,!1,!0)}}},e.zelos.ConstantProvider.prototype.shapeFor=function(t){var n=t.getCheck();switch(!n&&t.targetConnection&&(n=t.targetConnection.getCheck()),t.type){case e.connectionTypes.INPUT_VALUE:case e.connectionTypes.OUTPUT_VALUE:if(null!=(t=t.getSourceBlock().getOutputShape()))switch(t){case this.SHAPES.HEXAGONAL:return this.HEXAGONAL;case this.SHAPES.ROUND:return this.ROUNDED;case this.SHAPES.SQUARE:return this.SQUARED}return n&&-1!=n.indexOf("Boolean")?this.HEXAGONAL:(n&&-1!=n.indexOf("Number")||n&&n.indexOf("String"),this.ROUNDED);case e.connectionTypes.PREVIOUS_STATEMENT:case e.connectionTypes.NEXT_STATEMENT:return this.NOTCH;default:throw Error("Unknown type")}},e.zelos.ConstantProvider.prototype.makeNotch=function(){function t(at){return e.utils.svgPaths.curve("c",[e.utils.svgPaths.point(at*u/2,0),e.utils.svgPaths.point(at*u*3/4,x/2),e.utils.svgPaths.point(at*u,x)])+e.utils.svgPaths.line([e.utils.svgPaths.point(at*u,y)])+e.utils.svgPaths.curve("c",[e.utils.svgPaths.point(at*u/4,x/2),e.utils.svgPaths.point(at*u/2,x),e.utils.svgPaths.point(at*u,x)])+e.utils.svgPaths.lineOnAxis("h",at*s)+e.utils.svgPaths.curve("c",[e.utils.svgPaths.point(at*u/2,0),e.utils.svgPaths.point(at*u*3/4,-x/2),e.utils.svgPaths.point(at*u,-x)])+e.utils.svgPaths.line([e.utils.svgPaths.point(at*u,-y)])+e.utils.svgPaths.curve("c",[e.utils.svgPaths.point(at*u/4,-x/2),e.utils.svgPaths.point(at*u/2,-x),e.utils.svgPaths.point(at*u,-x)])}var n=this.NOTCH_WIDTH,r=this.NOTCH_HEIGHT,s=n/3,u=s/3,y=r/2,x=y/2,B=t(1),Q=t(-1);return{type:this.SHAPES.NOTCH,width:n,height:r,pathLeft:B,pathRight:Q}},e.zelos.ConstantProvider.prototype.makeInsideCorners=function(){var t=this.CORNER_RADIUS,n=e.utils.svgPaths.arc("a","0 0,0",t,e.utils.svgPaths.point(-t,t)),r=e.utils.svgPaths.arc("a","0 0,1",t,e.utils.svgPaths.point(-t,t));return{width:t,height:t,pathTop:n,pathBottom:e.utils.svgPaths.arc("a","0 0,0",t,e.utils.svgPaths.point(t,t)),rightWidth:t,rightHeight:t,pathTopRight:r,pathBottomRight:e.utils.svgPaths.arc("a","0 0,1",t,e.utils.svgPaths.point(t,t))}},e.zelos.ConstantProvider.prototype.generateSecondaryColour_=function(t){return e.utils.colour.blend("#000",t,.15)||t},e.zelos.ConstantProvider.prototype.generateTertiaryColour_=function(t){return e.utils.colour.blend("#000",t,.25)||t},e.zelos.ConstantProvider.prototype.createDom=function(t,n,r){e.zelos.ConstantProvider.superClass_.createDom.call(this,t,n,r),t=e.utils.dom.createSvgElement(e.utils.Svg.DEFS,{},t),n=e.utils.dom.createSvgElement(e.utils.Svg.FILTER,{id:"blocklySelectedGlowFilter"+this.randomIdentifier,height:"160%",width:"180%",y:"-30%",x:"-40%"},t),e.utils.dom.createSvgElement(e.utils.Svg.FEGAUSSIANBLUR,{in:"SourceGraphic",stdDeviation:this.SELECTED_GLOW_SIZE},n),r=e.utils.dom.createSvgElement(e.utils.Svg.FECOMPONENTTRANSFER,{result:"outBlur"},n),e.utils.dom.createSvgElement(e.utils.Svg.FEFUNCA,{type:"table",tableValues:"0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1"},r),e.utils.dom.createSvgElement(e.utils.Svg.FEFLOOD,{"flood-color":this.SELECTED_GLOW_COLOUR,"flood-opacity":1,result:"outColor"},n),e.utils.dom.createSvgElement(e.utils.Svg.FECOMPOSITE,{in:"outColor",in2:"outBlur",operator:"in",result:"outGlow"},n),this.selectedGlowFilterId=n.id,this.selectedGlowFilter_=n,t=e.utils.dom.createSvgElement(e.utils.Svg.FILTER,{id:"blocklyReplacementGlowFilter"+this.randomIdentifier,height:"160%",width:"180%",y:"-30%",x:"-40%"},t),e.utils.dom.createSvgElement(e.utils.Svg.FEGAUSSIANBLUR,{in:"SourceGraphic",stdDeviation:this.REPLACEMENT_GLOW_SIZE},t),n=e.utils.dom.createSvgElement(e.utils.Svg.FECOMPONENTTRANSFER,{result:"outBlur"},t),e.utils.dom.createSvgElement(e.utils.Svg.FEFUNCA,{type:"table",tableValues:"0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1"},n),e.utils.dom.createSvgElement(e.utils.Svg.FEFLOOD,{"flood-color":this.REPLACEMENT_GLOW_COLOUR,"flood-opacity":1,result:"outColor"},t),e.utils.dom.createSvgElement(e.utils.Svg.FECOMPOSITE,{in:"outColor",in2:"outBlur",operator:"in",result:"outGlow"},t),e.utils.dom.createSvgElement(e.utils.Svg.FECOMPOSITE,{in:"SourceGraphic",in2:"outGlow",operator:"over"},t),this.replacementGlowFilterId=t.id,this.replacementGlowFilter_=t},e.zelos.ConstantProvider.prototype.getCSS_=function(t){return[t+" .blocklyText,",t+" .blocklyFlyoutLabelText {","font: "+this.FIELD_TEXT_FONTWEIGHT+" "+this.FIELD_TEXT_FONTSIZE+"pt "+this.FIELD_TEXT_FONTFAMILY+";","}",t+" .blocklyText {","fill: #fff;","}",t+" .blocklyNonEditableText>rect:not(.blocklyDropdownRect),",t+" .blocklyEditableText>rect:not(.blocklyDropdownRect) {","fill: "+this.FIELD_BORDER_RECT_COLOUR+";","}",t+" .blocklyNonEditableText>text,",t+" .blocklyEditableText>text,",t+" .blocklyNonEditableText>g>text,",t+" .blocklyEditableText>g>text {","fill: #575E75;","}",t+" .blocklyFlyoutLabelText {","fill: #575E75;","}",t+" .blocklyText.blocklyBubbleText {","fill: #575E75;","}",t+" .blocklyDraggable:not(.blocklyDisabled)"," .blocklyEditableText:not(.editing):hover>rect,",t+" .blocklyDraggable:not(.blocklyDisabled)"," .blocklyEditableText:not(.editing):hover>.blocklyPath {","stroke: #fff;","stroke-width: 2;","}",t+" .blocklyHtmlInput {","font-family: "+this.FIELD_TEXT_FONTFAMILY+";","font-weight: "+this.FIELD_TEXT_FONTWEIGHT+";","color: #575E75;","}",t+" .blocklyDropdownText {","fill: #fff !important;","}",t+".blocklyWidgetDiv .goog-menuitem,",t+".blocklyDropDownDiv .goog-menuitem {","font-family: "+this.FIELD_TEXT_FONTFAMILY+";","}",t+".blocklyDropDownDiv .goog-menuitem-content {","color: #fff;","}",t+" .blocklyHighlightedConnectionPath {","stroke: "+this.SELECTED_GLOW_COLOUR+";","}",t+" .blocklyDisabled > .blocklyOutlinePath {","fill: url(#blocklyDisabledPattern"+this.randomIdentifier+")","}",t+" .blocklyInsertionMarker>.blocklyPath {","fill-opacity: "+this.INSERTION_MARKER_OPACITY+";","stroke: none;","}"]},e.zelos.TopRow=function(t){e.zelos.TopRow.superClass_.constructor.call(this,t)},e.utils.object.inherits(e.zelos.TopRow,e.blockRendering.TopRow),e.zelos.TopRow.prototype.endsWithElemSpacer=function(){return!1},e.zelos.TopRow.prototype.hasLeftSquareCorner=function(t){return!!t.outputConnection||(t.hat?"cap"===t.hat:this.constants_.ADD_START_HATS)&&!t.outputConnection&&!t.previousConnection},e.zelos.TopRow.prototype.hasRightSquareCorner=function(t){return!!t.outputConnection&&!t.statementInputCount&&!t.nextConnection},e.zelos.BottomRow=function(t){e.zelos.BottomRow.superClass_.constructor.call(this,t)},e.utils.object.inherits(e.zelos.BottomRow,e.blockRendering.BottomRow),e.zelos.BottomRow.prototype.endsWithElemSpacer=function(){return!1},e.zelos.BottomRow.prototype.hasLeftSquareCorner=function(t){return!!t.outputConnection},e.zelos.BottomRow.prototype.hasRightSquareCorner=function(t){return!!t.outputConnection&&!t.statementInputCount&&!t.nextConnection},e.zelos.RightConnectionShape=function(t){e.zelos.RightConnectionShape.superClass_.constructor.call(this,t),this.type|=e.blockRendering.Types.getType("RIGHT_CONNECTION"),this.width=this.height=0},e.utils.object.inherits(e.zelos.RightConnectionShape,e.blockRendering.Measurable),e.zelos.RenderInfo=function(t,n){e.zelos.RenderInfo.superClass_.constructor.call(this,t,n),this.topRow=new e.zelos.TopRow(this.constants_),this.bottomRow=new e.zelos.BottomRow(this.constants_),this.isInline=!0,this.isMultiRow=!n.getInputsInline()||n.isCollapsed(),this.hasStatementInput=0<n.statementInputCount,this.rightSide=this.outputConnection?new e.zelos.RightConnectionShape(this.constants_):null},e.utils.object.inherits(e.zelos.RenderInfo,e.blockRendering.RenderInfo),e.zelos.RenderInfo.prototype.getRenderer=function(){return this.renderer_},e.zelos.RenderInfo.prototype.measure=function(){this.createRows_(),this.addElemSpacing_(),this.addRowSpacing_(),this.adjustXPosition_(),this.computeBounds_(),this.alignRowElements_(),this.finalize_()},e.zelos.RenderInfo.prototype.shouldStartNewRow_=function(t,n){return!!n&&(t.type==e.inputTypes.STATEMENT||n.type==e.inputTypes.STATEMENT||(t.type==e.inputTypes.VALUE||t.type==e.inputTypes.DUMMY)&&(!this.isInline||this.isMultiRow))},e.zelos.RenderInfo.prototype.getDesiredRowWidth_=function(t){return t.hasStatement?this.width-this.startX-(this.constants_.INSIDE_CORNERS.rightWidth||0):e.zelos.RenderInfo.superClass_.getDesiredRowWidth_.call(this,t)},e.zelos.RenderInfo.prototype.getInRowSpacing_=function(t,n){return t&&n||!this.outputConnection||!this.outputConnection.isDynamicShape||this.hasStatementInput||this.bottomRow.hasNextConnection?!t&&n&&e.blockRendering.Types.isStatementInput(n)?this.constants_.STATEMENT_INPUT_PADDING_LEFT:t&&e.blockRendering.Types.isLeftRoundedCorner(t)&&n&&(e.blockRendering.Types.isPreviousConnection(n)||e.blockRendering.Types.isNextConnection(n))?n.notchOffset-this.constants_.CORNER_RADIUS:t&&e.blockRendering.Types.isLeftSquareCorner(t)&&n&&e.blockRendering.Types.isHat(n)?this.constants_.NO_PADDING:this.constants_.MEDIUM_PADDING:this.constants_.NO_PADDING},e.zelos.RenderInfo.prototype.getSpacerRowHeight_=function(t,n){if(e.blockRendering.Types.isTopRow(t)&&e.blockRendering.Types.isBottomRow(n))return this.constants_.EMPTY_BLOCK_SPACER_HEIGHT;var r=e.blockRendering.Types.isInputRow(t)&&t.hasStatement,s=e.blockRendering.Types.isInputRow(n)&&n.hasStatement;return s||r?(t=Math.max(this.constants_.NOTCH_HEIGHT,this.constants_.INSIDE_CORNERS.rightHeight||0),s&&r?Math.max(t,this.constants_.DUMMY_INPUT_MIN_HEIGHT):t):e.blockRendering.Types.isTopRow(t)?t.hasPreviousConnection||this.outputConnection&&!this.hasStatementInput?this.constants_.NO_PADDING:Math.abs(this.constants_.NOTCH_HEIGHT-this.constants_.CORNER_RADIUS):e.blockRendering.Types.isBottomRow(n)?this.outputConnection?!n.hasNextConnection&&this.hasStatementInput?Math.abs(this.constants_.NOTCH_HEIGHT-this.constants_.CORNER_RADIUS):this.constants_.NO_PADDING:Math.max(this.topRow.minHeight,Math.max(this.constants_.NOTCH_HEIGHT,this.constants_.CORNER_RADIUS))-this.constants_.CORNER_RADIUS:this.constants_.MEDIUM_PADDING},e.zelos.RenderInfo.prototype.getSpacerRowWidth_=function(t,n){var r=this.width-this.startX;return e.blockRendering.Types.isInputRow(t)&&t.hasStatement||e.blockRendering.Types.isInputRow(n)&&n.hasStatement?Math.max(r,this.constants_.STATEMENT_INPUT_SPACER_MIN_WIDTH):r},e.zelos.RenderInfo.prototype.getElemCenterline_=function(t,n){if(t.hasStatement&&!e.blockRendering.Types.isSpacer(n)&&!e.blockRendering.Types.isStatementInput(n))return t.yPos+this.constants_.EMPTY_STATEMENT_INPUT_HEIGHT/2;if(e.blockRendering.Types.isInlineInput(n)){var r=n.connectedBlock;if(r&&r.outputConnection&&r.nextConnection)return t.yPos+r.height/2}return e.zelos.RenderInfo.superClass_.getElemCenterline_.call(this,t,n)},e.zelos.RenderInfo.prototype.addInput_=function(t,n){t.type==e.inputTypes.DUMMY&&n.hasDummyInput&&n.align==e.constants.ALIGN.LEFT&&t.align==e.constants.ALIGN.RIGHT&&(n.rightAlignedDummyInput=t),e.zelos.RenderInfo.superClass_.addInput_.call(this,t,n)},e.zelos.RenderInfo.prototype.addAlignmentPadding_=function(t,n){if(t.rightAlignedDummyInput){for(var r,u,s=0;(u=t.elements[s])&&(e.blockRendering.Types.isSpacer(u)&&(r=u),!e.blockRendering.Types.isField(u)||u.parentInput!=t.rightAlignedDummyInput);s++);if(r)return r.width+=n,void(t.width+=n)}e.zelos.RenderInfo.superClass_.addAlignmentPadding_.call(this,t,n)},e.zelos.RenderInfo.prototype.adjustXPosition_=function(){for(var t=this.constants_.NOTCH_OFFSET_LEFT+this.constants_.NOTCH_WIDTH,n=t,r=2;r<this.rows.length-1;r+=2){var s=this.rows[r-1],u=this.rows[r],y=this.rows[r+1];if(s=2==r?!!this.topRow.hasPreviousConnection:!!s.followsStatement,y=r+2>=this.rows.length-1?!!this.bottomRow.hasNextConnection:!!y.precedesStatement,e.blockRendering.Types.isInputRow(u)&&u.hasStatement)u.measure(),n=u.width-u.getLastInput().width+t;else if(s&&(2==r||y)&&e.blockRendering.Types.isInputRow(u)&&!u.hasStatement){y=u.xPos,s=null;for(var B,x=0;B=u.elements[x];x++)e.blockRendering.Types.isSpacer(B)&&(s=B),!(s&&(e.blockRendering.Types.isField(B)||e.blockRendering.Types.isInput(B))&&y<n)||e.blockRendering.Types.isField(B)&&(B.field instanceof e.FieldLabel||B.field instanceof e.FieldImage)||(s.width+=n-y),y+=B.width}}},e.zelos.RenderInfo.prototype.finalizeOutputConnection_=function(){if(this.outputConnection&&this.outputConnection.isDynamicShape){for(var r,t=0,n=0;r=this.rows[n];n++)r.yPos=t,t+=r.height;this.height=t,t=this.outputConnection.shape.height(n=this.bottomRow.hasNextConnection?this.height-this.bottomRow.descenderHeight:this.height),n=this.outputConnection.shape.width(n),this.outputConnection.height=t,this.outputConnection.width=n,this.outputConnection.startX=n,this.outputConnection.connectionOffsetY=this.outputConnection.shape.connectionOffsetY(t),this.outputConnection.connectionOffsetX=this.outputConnection.shape.connectionOffsetX(n),r=0,this.hasStatementInput||this.bottomRow.hasNextConnection||(r=n,this.rightSide.height=t,this.rightSide.width=r,this.rightSide.centerline=t/2,this.rightSide.xPos=this.width+r),this.startX=n,this.width+=n+r,this.widthWithChildren+=n+r}},e.zelos.RenderInfo.prototype.finalizeHorizontalAlignment_=function(){if(this.outputConnection&&!this.hasStatementInput&&!this.bottomRow.hasNextConnection){for(var r,t=0,n=0;r=this.rows[n];n++)if(e.blockRendering.Types.isInputRow(r)){t=r.elements[r.elements.length-2];var s=this.getNegativeSpacing_(r.elements[1]),u=this.getNegativeSpacing_(t),y=this.constants_.MIN_BLOCK_WIDTH+2*this.outputConnection.width;this.width-(t=s+u)<y&&(s=(t=this.width-y)/2,u=t/2),r.elements.unshift(new e.blockRendering.InRowSpacer(this.constants_,-s)),r.elements.push(new e.blockRendering.InRowSpacer(this.constants_,-u))}if(t)for(this.width-=t,this.widthWithChildren-=t,this.rightSide.xPos-=t,n=0;r=this.rows[n];n++)e.blockRendering.Types.isTopOrBottomRow(r)&&(r.elements[1].width-=t,r.elements[1].widthWithConnectedBlocks-=t),r.width-=t,r.widthWithConnectedBlocks-=t}},e.zelos.RenderInfo.prototype.getNegativeSpacing_=function(t){if(!t)return 0;var n=this.outputConnection.width,r=this.outputConnection.shape.type,s=this.constants_;if(this.isMultiRow&&1<this.inputRows.length)return r===s.SHAPES.ROUND?n-(r=this.height/2>(r=this.constants_.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH)?r:this.height/2)*(1-Math.sin(Math.acos((r-this.constants_.SMALL_PADDING)/r))):0;if(e.blockRendering.Types.isInlineInput(t)){var u=t.connectedBlock;return t=u?u.pathObject.outputShapeType:t.shape.type,u&&u.outputConnection&&(u.statementInputCount||u.nextConnection)||r==s.SHAPES.HEXAGONAL&&r!=t?0:n-this.constants_.SHAPE_IN_SHAPE_PADDING[r][t]}return e.blockRendering.Types.isField(t)?r==s.SHAPES.ROUND&&t.field instanceof e.FieldTextInput?n-2.75*s.GRID_UNIT:n-this.constants_.SHAPE_IN_SHAPE_PADDING[r][0]:e.blockRendering.Types.isIcon(t)?this.constants_.SMALL_PADDING:0},e.zelos.RenderInfo.prototype.finalizeVerticalAlignment_=function(){if(!this.outputConnection)for(var t=2;t<this.rows.length-1;t+=2){var n=this.rows[t-1],r=this.rows[t],s=this.rows[t+1],u=2==t,y=t+2>=this.rows.length-1?!!this.bottomRow.hasNextConnection:!!s.precedesStatement;if(u?this.topRow.hasPreviousConnection:n.followsStatement){var x=3==r.elements.length&&(r.elements[1].field instanceof e.FieldLabel||r.elements[1].field instanceof e.FieldImage);if(!u&&x)n.height-=this.constants_.SMALL_PADDING,s.height-=this.constants_.SMALL_PADDING,r.height-=this.constants_.MEDIUM_PADDING;else if(u||y){if(y){for(u=!1,y=0;x=r.elements[y];y++)if(e.blockRendering.Types.isInlineInput(x)&&x.connectedBlock&&!x.connectedBlock.isShadow()&&40<=x.connectedBlock.getHeightWidth().height){u=!0;break}u&&(n.height-=this.constants_.SMALL_PADDING,s.height-=this.constants_.SMALL_PADDING)}}else n.height+=this.constants_.SMALL_PADDING}}},e.zelos.RenderInfo.prototype.finalize_=function(){this.finalizeOutputConnection_(),this.finalizeHorizontalAlignment_(),this.finalizeVerticalAlignment_(),e.zelos.RenderInfo.superClass_.finalize_.call(this),this.rightSide&&(this.widthWithChildren+=this.rightSide.width)},e.zelos.Drawer=function(t,n){e.zelos.Drawer.superClass_.constructor.call(this,t,n)},e.utils.object.inherits(e.zelos.Drawer,e.blockRendering.Drawer),e.zelos.Drawer.prototype.draw=function(){var t=this.block_.pathObject;t.beginDrawing(),this.hideHiddenIcons_(),this.drawOutline_(),this.drawInternals_(),t.setPath(this.outlinePath_+"\n"+this.inlinePath_),this.info_.RTL&&t.flipRTL(),e.blockRendering.useDebugger&&this.block_.renderingDebugger.drawDebug(this.block_,this.info_),this.recordSizeOnBlock_(),this.info_.outputConnection&&(t.outputShapeType=this.info_.outputConnection.shape.type),t.endDrawing()},e.zelos.Drawer.prototype.drawOutline_=function(){this.info_.outputConnection&&this.info_.outputConnection.isDynamicShape&&!this.info_.hasStatementInput&&!this.info_.bottomRow.hasNextConnection?(this.drawFlatTop_(),this.drawRightDynamicConnection_(),this.drawFlatBottom_(),this.drawLeftDynamicConnection_()):e.zelos.Drawer.superClass_.drawOutline_.call(this)},e.zelos.Drawer.prototype.drawLeft_=function(){this.info_.outputConnection&&this.info_.outputConnection.isDynamicShape?this.drawLeftDynamicConnection_():e.zelos.Drawer.superClass_.drawLeft_.call(this)},e.zelos.Drawer.prototype.drawRightSideRow_=function(t){if(!(0>=t.height))if(t.precedesStatement||t.followsStatement){var n=this.constants_.INSIDE_CORNERS.rightHeight;this.outlinePath_+=(t.followsStatement?this.constants_.INSIDE_CORNERS.pathBottomRight:"")+(0<(n=t.height-(t.precedesStatement?n:0))?e.utils.svgPaths.lineOnAxis("V",t.yPos+n):"")+(t.precedesStatement?this.constants_.INSIDE_CORNERS.pathTopRight:"")}else this.outlinePath_+=e.utils.svgPaths.lineOnAxis("V",t.yPos+t.height)},e.zelos.Drawer.prototype.drawRightDynamicConnection_=function(){this.outlinePath_+=this.info_.outputConnection.shape.pathRightDown(this.info_.outputConnection.height)},e.zelos.Drawer.prototype.drawLeftDynamicConnection_=function(){this.positionOutputConnection_(),this.outlinePath_+=this.info_.outputConnection.shape.pathUp(this.info_.outputConnection.height),this.outlinePath_+="z"},e.zelos.Drawer.prototype.drawFlatTop_=function(){var t=this.info_.topRow;this.positionPreviousConnection_(),this.outlinePath_+=e.utils.svgPaths.moveBy(t.xPos,this.info_.startY),this.outlinePath_+=e.utils.svgPaths.lineOnAxis("h",t.width)},e.zelos.Drawer.prototype.drawFlatBottom_=function(){var t=this.info_.bottomRow;this.positionNextConnection_(),this.outlinePath_+=e.utils.svgPaths.lineOnAxis("V",t.baseline),this.outlinePath_+=e.utils.svgPaths.lineOnAxis("h",-t.width)},e.zelos.Drawer.prototype.drawInlineInput_=function(t){this.positionInlineInputConnection_(t);var n=t.input.name;if(!t.connectedBlock&&!this.info_.isInsertionMarker){var r=t.width-2*t.connectionWidth;t=e.utils.svgPaths.moveTo(t.xPos+t.connectionWidth,t.centerline-t.height/2)+e.utils.svgPaths.lineOnAxis("h",r)+t.shape.pathRightDown(t.height)+e.utils.svgPaths.lineOnAxis("h",-r)+t.shape.pathUp(t.height)+"z",this.block_.pathObject.setOutlinePath(n,t)}},e.zelos.Drawer.prototype.drawStatementInput_=function(t){var n=t.getLastInput(),r=n.xPos+n.notchOffset+n.shape.width,s=n.shape.pathRight+e.utils.svgPaths.lineOnAxis("h",-(n.notchOffset-this.constants_.INSIDE_CORNERS.width))+this.constants_.INSIDE_CORNERS.pathTop,u=t.height-2*this.constants_.INSIDE_CORNERS.height;n=this.constants_.INSIDE_CORNERS.pathBottom+e.utils.svgPaths.lineOnAxis("h",n.notchOffset-this.constants_.INSIDE_CORNERS.width)+(n.connectedBottomNextConnection?"":n.shape.pathLeft),this.outlinePath_+=e.utils.svgPaths.lineOnAxis("H",r)+s+e.utils.svgPaths.lineOnAxis("v",u)+n+e.utils.svgPaths.lineOnAxis("H",t.xPos+t.width),this.positionStatementInputConnection_(t)},e.zelos.MarkerSvg=function(t,n,r){e.zelos.MarkerSvg.superClass_.constructor.call(this,t,n,r)},e.utils.object.inherits(e.zelos.MarkerSvg,e.blockRendering.MarkerSvg),e.zelos.MarkerSvg.prototype.showWithInputOutput_=function(t){var n=t.getSourceBlock();t=t.getLocation().getOffsetInBlock(),this.positionCircle_(t.x,t.y),this.setParent_(n),this.showCurrent_()},e.zelos.MarkerSvg.prototype.showWithOutput_=function(t){this.showWithInputOutput_(t)},e.zelos.MarkerSvg.prototype.showWithInput_=function(t){this.showWithInputOutput_(t)},e.zelos.MarkerSvg.prototype.showWithBlock_=function(t){var n=(t=t.getLocation()).getHeightWidth();this.positionRect_(0,0,n.width,n.height),this.setParent_(t),this.showCurrent_()},e.zelos.MarkerSvg.prototype.positionCircle_=function(t,n){this.markerCircle_.setAttribute("cx",t),this.markerCircle_.setAttribute("cy",n),this.currentMarkerSvg=this.markerCircle_},e.zelos.MarkerSvg.prototype.hide=function(){e.zelos.MarkerSvg.superClass_.hide.call(this),this.markerCircle_.style.display="none"},e.zelos.MarkerSvg.prototype.createDomInternal_=function(){if(e.zelos.MarkerSvg.superClass_.createDomInternal_.call(this),this.markerCircle_=e.utils.dom.createSvgElement(e.utils.Svg.CIRCLE,{r:this.constants_.CURSOR_RADIUS,style:"display: none","stroke-width":this.constants_.CURSOR_STROKE_WIDTH},this.markerSvg_),this.isCursor()){var t=this.getBlinkProperties_();e.utils.dom.createSvgElement(e.utils.Svg.ANIMATE,t,this.markerCircle_)}return this.markerSvg_},e.zelos.MarkerSvg.prototype.applyColour_=function(t){e.zelos.MarkerSvg.superClass_.applyColour_.call(this,t),this.markerCircle_.setAttribute("fill",this.colour_),this.markerCircle_.setAttribute("stroke",this.colour_),this.isCursor()&&this.markerCircle_.firstChild.setAttribute("values",this.colour_+";transparent;transparent;")},e.zelos.PathObject=function(t,n,r){e.zelos.PathObject.superClass_.constructor.call(this,t,n,r),this.constants=r,this.svgPathSelected_=null,this.outlines_=Object.create(null),this.outputShapeType=this.remainingOutlines_=null},e.utils.object.inherits(e.zelos.PathObject,e.blockRendering.PathObject),e.zelos.PathObject.prototype.setPath=function(t){e.zelos.PathObject.superClass_.setPath.call(this,t),this.svgPathSelected_&&this.svgPathSelected_.setAttribute("d",t)},e.zelos.PathObject.prototype.applyColour=function(t){for(var n in e.zelos.PathObject.superClass_.applyColour.call(this,t),t.isShadow()&&t.getParent()&&this.svgPath.setAttribute("stroke",t.getParent().style.colourTertiary),this.outlines_)this.outlines_[n].setAttribute("fill",this.style.colourTertiary)},e.zelos.PathObject.prototype.flipRTL=function(){for(var t in e.zelos.PathObject.superClass_.flipRTL.call(this),this.outlines_)this.outlines_[t].setAttribute("transform","scale(-1 1)")},e.zelos.PathObject.prototype.updateSelected=function(t){this.setClass_("blocklySelected",t),t?this.svgPathSelected_||(this.svgPathSelected_=this.svgPath.cloneNode(!0),this.svgPathSelected_.setAttribute("fill","none"),this.svgPathSelected_.setAttribute("filter","url(#"+this.constants.selectedGlowFilterId+")"),this.svgRoot.appendChild(this.svgPathSelected_)):this.svgPathSelected_&&(this.svgRoot.removeChild(this.svgPathSelected_),this.svgPathSelected_=null)},e.zelos.PathObject.prototype.updateReplacementFade=function(t){this.setClass_("blocklyReplaceable",t),t?this.svgPath.setAttribute("filter","url(#"+this.constants.replacementGlowFilterId+")"):this.svgPath.removeAttribute("filter")},e.zelos.PathObject.prototype.updateShapeForInputHighlight=function(t,n){t=t.getParentInput().name,(t=this.getOutlinePath_(t))&&(n?t.setAttribute("filter","url(#"+this.constants.replacementGlowFilterId+")"):t.removeAttribute("filter"))},e.zelos.PathObject.prototype.beginDrawing=function(){for(var t in this.remainingOutlines_=Object.create(null),this.outlines_)this.remainingOutlines_[t]=1},e.zelos.PathObject.prototype.endDrawing=function(){if(this.remainingOutlines_)for(var t in this.remainingOutlines_)this.removeOutlinePath_(t);this.remainingOutlines_=null},e.zelos.PathObject.prototype.setOutlinePath=function(t,n){(t=this.getOutlinePath_(t)).setAttribute("d",n),t.setAttribute("fill",this.style.colourTertiary)},e.zelos.PathObject.prototype.getOutlinePath_=function(t){return this.outlines_[t]||(this.outlines_[t]=e.utils.dom.createSvgElement(e.utils.Svg.PATH,{class:"blocklyOutlinePath",d:""},this.svgRoot)),this.remainingOutlines_&&delete this.remainingOutlines_[t],this.outlines_[t]},e.zelos.PathObject.prototype.removeOutlinePath_=function(t){this.outlines_[t].parentNode.removeChild(this.outlines_[t]),delete this.outlines_[t]},e.zelos.Renderer=function(t){e.zelos.Renderer.superClass_.constructor.call(this,t)},e.utils.object.inherits(e.zelos.Renderer,e.blockRendering.Renderer),e.zelos.Renderer.prototype.makeConstants_=function(){return new e.zelos.ConstantProvider},e.zelos.Renderer.prototype.makeRenderInfo_=function(t){return new e.zelos.RenderInfo(this,t)},e.zelos.Renderer.prototype.makeDrawer_=function(t,n){return new e.zelos.Drawer(t,n)},e.zelos.Renderer.prototype.makeMarkerDrawer=function(t,n){return new e.zelos.MarkerSvg(t,this.getConstants(),n)},e.zelos.Renderer.prototype.makePathObject=function(t,n){return new e.zelos.PathObject(t,n,this.getConstants())},e.zelos.Renderer.prototype.shouldHighlightConnection=function(t){return t.type!=e.connectionTypes.INPUT_VALUE&&t.type!==e.connectionTypes.OUTPUT_VALUE},e.zelos.Renderer.prototype.getConnectionPreviewMethod=function(t,n,r){return n.type==e.connectionTypes.OUTPUT_VALUE?t.isConnected()?e.InsertionMarkerManager.PREVIEW_TYPE.REPLACEMENT_FADE:e.InsertionMarkerManager.PREVIEW_TYPE.INPUT_OUTLINE:e.zelos.Renderer.superClass_.getConnectionPreviewMethod(t,n,r)},e.blockRendering.register("zelos",e.zelos.Renderer),e.Themes.Dark=e.Theme.defineTheme("dark",{base:e.Themes.Classic,componentStyles:{workspaceBackgroundColour:"#1e1e1e",toolboxBackgroundColour:"blackBackground",toolboxForegroundColour:"#fff",flyoutBackgroundColour:"#252526",flyoutForegroundColour:"#ccc",flyoutOpacity:1,scrollbarColour:"#797979",insertionMarkerColour:"#fff",insertionMarkerOpacity:.3,scrollbarOpacity:.4,cursorColour:"#d0d0d0",blackBackground:"#333"}}),e.Themes.Deuteranopia={},e.Themes.Deuteranopia.defaultBlockStyles={colour_blocks:{colourPrimary:"#f2a72c",colourSecondary:"#f1c172",colourTertiary:"#da921c"},list_blocks:{colourPrimary:"#7d65ab",colourSecondary:"#a88be0",colourTertiary:"#66518e"},logic_blocks:{colourPrimary:"#9fd2f1",colourSecondary:"#c0e0f4",colourTertiary:"#74bae5"},loop_blocks:{colourPrimary:"#795a07",colourSecondary:"#ac8726",colourTertiary:"#c4a03f"},math_blocks:{colourPrimary:"#e6da39",colourSecondary:"#f3ec8e",colourTertiary:"#f2eeb7"},procedure_blocks:{colourPrimary:"#590721",colourSecondary:"#8c475d",colourTertiary:"#885464"},text_blocks:{colourPrimary:"#058863",colourSecondary:"#5ecfaf",colourTertiary:"#04684c"},variable_blocks:{colourPrimary:"#47025a",colourSecondary:"#820fa1",colourTertiary:"#8e579d"},variable_dynamic_blocks:{colourPrimary:"#47025a",colourSecondary:"#820fa1",colourTertiary:"#8e579d"}},e.Themes.Deuteranopia.categoryStyles={colour_category:{colour:"#f2a72c"},list_category:{colour:"#7d65ab"},logic_category:{colour:"#9fd2f1"},loop_category:{colour:"#795a07"},math_category:{colour:"#e6da39"},procedure_category:{colour:"#590721"},text_category:{colour:"#058863"},variable_category:{colour:"#47025a"},variable_dynamic_category:{colour:"#47025a"}},e.Themes.Deuteranopia=new e.Theme("deuteranopia",e.Themes.Deuteranopia.defaultBlockStyles,e.Themes.Deuteranopia.categoryStyles),e.Themes.HighContrast={},e.Themes.HighContrast.defaultBlockStyles={colour_blocks:{colourPrimary:"#a52714",colourSecondary:"#FB9B8C",colourTertiary:"#FBE1DD"},list_blocks:{colourPrimary:"#4a148c",colourSecondary:"#AD7BE9",colourTertiary:"#CDB6E9"},logic_blocks:{colourPrimary:"#01579b",colourSecondary:"#64C7FF",colourTertiary:"#C5EAFF"},loop_blocks:{colourPrimary:"#33691e",colourSecondary:"#9AFF78",colourTertiary:"#E1FFD7"},math_blocks:{colourPrimary:"#1a237e",colourSecondary:"#8A9EFF",colourTertiary:"#DCE2FF"},procedure_blocks:{colourPrimary:"#006064",colourSecondary:"#77E6EE",colourTertiary:"#CFECEE"},text_blocks:{colourPrimary:"#004d40",colourSecondary:"#5ae27c",colourTertiary:"#D2FFDD"},variable_blocks:{colourPrimary:"#880e4f",colourSecondary:"#FF73BE",colourTertiary:"#FFD4EB"},variable_dynamic_blocks:{colourPrimary:"#880e4f",colourSecondary:"#FF73BE",colourTertiary:"#FFD4EB"},hat_blocks:{colourPrimary:"#880e4f",colourSecondary:"#FF73BE",colourTertiary:"#FFD4EB",hat:"cap"}},e.Themes.HighContrast.categoryStyles={colour_category:{colour:"#a52714"},list_category:{colour:"#4a148c"},logic_category:{colour:"#01579b"},loop_category:{colour:"#33691e"},math_category:{colour:"#1a237e"},procedure_category:{colour:"#006064"},text_category:{colour:"#004d40"},variable_category:{colour:"#880e4f"},variable_dynamic_category:{colour:"#880e4f"}},e.Themes.HighContrast=new e.Theme("highcontrast",e.Themes.HighContrast.defaultBlockStyles,e.Themes.HighContrast.categoryStyles),e.Themes.HighContrast.setComponentStyle("selectedGlowColour","#000000"),e.Themes.HighContrast.setComponentStyle("selectedGlowSize",1),e.Themes.HighContrast.setComponentStyle("replacementGlowColour","#000000"),e.Themes.HighContrast.setFontStyle({family:null,weight:null,size:16}),e.Themes.Tritanopia={},e.Themes.Tritanopia.defaultBlockStyles={colour_blocks:{colourPrimary:"#05427f",colourSecondary:"#2974c0",colourTertiary:"#2d74bb"},list_blocks:{colourPrimary:"#b69ce8",colourSecondary:"#ccbaef",colourTertiary:"#9176c5"},logic_blocks:{colourPrimary:"#9fd2f1",colourSecondary:"#c0e0f4",colourTertiary:"#74bae5"},loop_blocks:{colourPrimary:"#aa1846",colourSecondary:"#d36185",colourTertiary:"#7c1636"},math_blocks:{colourPrimary:"#e6da39",colourSecondary:"#f3ec8e",colourTertiary:"#f2eeb7"},procedure_blocks:{colourPrimary:"#590721",colourSecondary:"#8c475d",colourTertiary:"#885464"},text_blocks:{colourPrimary:"#058863",colourSecondary:"#5ecfaf",colourTertiary:"#04684c"},variable_blocks:{colourPrimary:"#4b2d84",colourSecondary:"#816ea7",colourTertiary:"#83759e"},variable_dynamic_blocks:{colourPrimary:"#4b2d84",colourSecondary:"#816ea7",colourTertiary:"#83759e"}},e.Themes.Tritanopia.categoryStyles={colour_category:{colour:"#05427f"},list_category:{colour:"#b69ce8"},logic_category:{colour:"#9fd2f1"},loop_category:{colour:"#aa1846"},math_category:{colour:"#e6da39"},procedure_category:{colour:"#590721"},text_category:{colour:"#058863"},variable_category:{colour:"#4b2d84"},variable_dynamic_category:{colour:"#4b2d84"}},e.Themes.Tritanopia=new e.Theme("tritanopia",e.Themes.Tritanopia.defaultBlockStyles,e.Themes.Tritanopia.categoryStyles),e.requires={},e}.apply($,[]))&&(U.exports=_)},18783:function(U,$,m){var _,e;_=[m(55484)],void 0!==(e=function(t){"use strict";return t.Blocks={},t.Blocks}.apply($,_))&&(U.exports=e)},55484:function(U,$,m){var _,e;_=[m(81069)],void 0!==(e=function(t){"use strict";return t.Blocks.colour={},t.Constants={},t.Constants.Colour={},t.Constants.Colour.HUE=20,t.defineBlocksWithJsonArray([{type:"colour_picker",message0:"%1",args0:[{type:"field_colour",name:"COLOUR",colour:"#ff0000"}],output:"Colour",helpUrl:"%{BKY_COLOUR_PICKER_HELPURL}",style:"colour_blocks",tooltip:"%{BKY_COLOUR_PICKER_TOOLTIP}",extensions:["parent_tooltip_when_inline"]},{type:"colour_random",message0:"%{BKY_COLOUR_RANDOM_TITLE}",output:"Colour",helpUrl:"%{BKY_COLOUR_RANDOM_HELPURL}",style:"colour_blocks",tooltip:"%{BKY_COLOUR_RANDOM_TOOLTIP}"},{type:"colour_rgb",message0:"%{BKY_COLOUR_RGB_TITLE} %{BKY_COLOUR_RGB_RED} %1 %{BKY_COLOUR_RGB_GREEN} %2 %{BKY_COLOUR_RGB_BLUE} %3",args0:[{type:"input_value",name:"RED",check:"Number",align:"RIGHT"},{type:"input_value",name:"GREEN",check:"Number",align:"RIGHT"},{type:"input_value",name:"BLUE",check:"Number",align:"RIGHT"}],output:"Colour",helpUrl:"%{BKY_COLOUR_RGB_HELPURL}",style:"colour_blocks",tooltip:"%{BKY_COLOUR_RGB_TOOLTIP}"},{type:"colour_blend",message0:"%{BKY_COLOUR_BLEND_TITLE} %{BKY_COLOUR_BLEND_COLOUR1} %1 %{BKY_COLOUR_BLEND_COLOUR2} %2 %{BKY_COLOUR_BLEND_RATIO} %3",args0:[{type:"input_value",name:"COLOUR1",check:"Colour",align:"RIGHT"},{type:"input_value",name:"COLOUR2",check:"Colour",align:"RIGHT"},{type:"input_value",name:"RATIO",check:"Number",align:"RIGHT"}],output:"Colour",helpUrl:"%{BKY_COLOUR_BLEND_HELPURL}",style:"colour_blocks",tooltip:"%{BKY_COLOUR_BLEND_TOOLTIP}"}]),t.Constants.Lists={},t.Constants.Lists.HUE=260,t.defineBlocksWithJsonArray([{type:"lists_create_empty",message0:"%{BKY_LISTS_CREATE_EMPTY_TITLE}",output:"Array",style:"list_blocks",tooltip:"%{BKY_LISTS_CREATE_EMPTY_TOOLTIP}",helpUrl:"%{BKY_LISTS_CREATE_EMPTY_HELPURL}"},{type:"lists_repeat",message0:"%{BKY_LISTS_REPEAT_TITLE}",args0:[{type:"input_value",name:"ITEM"},{type:"input_value",name:"NUM",check:"Number"}],output:"Array",style:"list_blocks",tooltip:"%{BKY_LISTS_REPEAT_TOOLTIP}",helpUrl:"%{BKY_LISTS_REPEAT_HELPURL}"},{type:"lists_reverse",message0:"%{BKY_LISTS_REVERSE_MESSAGE0}",args0:[{type:"input_value",name:"LIST",check:"Array"}],output:"Array",inputsInline:!0,style:"list_blocks",tooltip:"%{BKY_LISTS_REVERSE_TOOLTIP}",helpUrl:"%{BKY_LISTS_REVERSE_HELPURL}"},{type:"lists_isEmpty",message0:"%{BKY_LISTS_ISEMPTY_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Boolean",style:"list_blocks",tooltip:"%{BKY_LISTS_ISEMPTY_TOOLTIP}",helpUrl:"%{BKY_LISTS_ISEMPTY_HELPURL}"},{type:"lists_length",message0:"%{BKY_LISTS_LENGTH_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Number",style:"list_blocks",tooltip:"%{BKY_LISTS_LENGTH_TOOLTIP}",helpUrl:"%{BKY_LISTS_LENGTH_HELPURL}"}]),t.Blocks.lists_create_with={init:function(){this.setHelpUrl(t.Msg.LISTS_CREATE_WITH_HELPURL),this.setStyle("list_blocks"),this.itemCount_=3,this.updateShape_(),this.setOutput(!0,"Array"),this.setMutator(new t.Mutator(["lists_create_with_item"])),this.setTooltip(t.Msg.LISTS_CREATE_WITH_TOOLTIP)},mutationToDom:function(){var n=t.utils.xml.createElement("mutation");return n.setAttribute("items",this.itemCount_),n},domToMutation:function(n){this.itemCount_=parseInt(n.getAttribute("items"),10),this.updateShape_()},decompose:function(n){var r=n.newBlock("lists_create_with_container");r.initSvg();for(var s=r.getInput("STACK").connection,u=0;u<this.itemCount_;u++){var y=n.newBlock("lists_create_with_item");y.initSvg(),s.connect(y.previousConnection),s=y.nextConnection}return r},compose:function(n){var r=n.getInputTargetBlock("STACK");for(n=[];r&&!r.isInsertionMarker();)n.push(r.valueConnection_),r=r.nextConnection&&r.nextConnection.targetBlock();for(r=0;r<this.itemCount_;r++){var s=this.getInput("ADD"+r).connection.targetConnection;s&&-1==n.indexOf(s)&&s.disconnect()}for(this.itemCount_=n.length,this.updateShape_(),r=0;r<this.itemCount_;r++)t.Mutator.reconnect(n[r],this,"ADD"+r)},saveConnections:function(n){n=n.getInputTargetBlock("STACK");for(var r=0;n;){var s=this.getInput("ADD"+r);n.valueConnection_=s&&s.connection.targetConnection,r++,n=n.nextConnection&&n.nextConnection.targetBlock()}},updateShape_:function(){this.itemCount_&&this.getInput("EMPTY")?this.removeInput("EMPTY"):this.itemCount_||this.getInput("EMPTY")||this.appendDummyInput("EMPTY").appendField(t.Msg.LISTS_CREATE_EMPTY_TITLE);for(var n=0;n<this.itemCount_;n++)if(!this.getInput("ADD"+n)){var r=this.appendValueInput("ADD"+n).setAlign(t.ALIGN_RIGHT);0==n&&r.appendField(t.Msg.LISTS_CREATE_WITH_INPUT_WITH)}for(;this.getInput("ADD"+n);)this.removeInput("ADD"+n),n++}},t.Blocks.lists_create_with_container={init:function(){this.setStyle("list_blocks"),this.appendDummyInput().appendField(t.Msg.LISTS_CREATE_WITH_CONTAINER_TITLE_ADD),this.appendStatementInput("STACK"),this.setTooltip(t.Msg.LISTS_CREATE_WITH_CONTAINER_TOOLTIP),this.contextMenu=!1}},t.Blocks.lists_create_with_item={init:function(){this.setStyle("list_blocks"),this.appendDummyInput().appendField(t.Msg.LISTS_CREATE_WITH_ITEM_TITLE),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(t.Msg.LISTS_CREATE_WITH_ITEM_TOOLTIP),this.contextMenu=!1}},t.Blocks.lists_indexOf={init:function(){var n=[[t.Msg.LISTS_INDEX_OF_FIRST,"FIRST"],[t.Msg.LISTS_INDEX_OF_LAST,"LAST"]];this.setHelpUrl(t.Msg.LISTS_INDEX_OF_HELPURL),this.setStyle("list_blocks"),this.setOutput(!0,"Number"),this.appendValueInput("VALUE").setCheck("Array").appendField(t.Msg.LISTS_INDEX_OF_INPUT_IN_LIST),this.appendValueInput("FIND").appendField(new t.FieldDropdown(n),"END"),this.setInputsInline(!0);var r=this;this.setTooltip(function(){return t.Msg.LISTS_INDEX_OF_TOOLTIP.replace("%1",r.workspace.options.oneBasedIndex?"0":"-1")})}},t.Blocks.lists_getIndex={init:function(){var n=[[t.Msg.LISTS_GET_INDEX_GET,"GET"],[t.Msg.LISTS_GET_INDEX_GET_REMOVE,"GET_REMOVE"],[t.Msg.LISTS_GET_INDEX_REMOVE,"REMOVE"]];this.WHERE_OPTIONS=[[t.Msg.LISTS_GET_INDEX_FROM_START,"FROM_START"],[t.Msg.LISTS_GET_INDEX_FROM_END,"FROM_END"],[t.Msg.LISTS_GET_INDEX_FIRST,"FIRST"],[t.Msg.LISTS_GET_INDEX_LAST,"LAST"],[t.Msg.LISTS_GET_INDEX_RANDOM,"RANDOM"]],this.setHelpUrl(t.Msg.LISTS_GET_INDEX_HELPURL),this.setStyle("list_blocks"),n=new t.FieldDropdown(n,function(s){s="REMOVE"==s,this.getSourceBlock().updateStatement_(s)}),this.appendValueInput("VALUE").setCheck("Array").appendField(t.Msg.LISTS_GET_INDEX_INPUT_IN_LIST),this.appendDummyInput().appendField(n,"MODE").appendField("","SPACE"),this.appendDummyInput("AT"),t.Msg.LISTS_GET_INDEX_TAIL&&this.appendDummyInput("TAIL").appendField(t.Msg.LISTS_GET_INDEX_TAIL),this.setInputsInline(!0),this.setOutput(!0),this.updateAt_(!0);var r=this;this.setTooltip(function(){var s=r.getFieldValue("MODE"),u=r.getFieldValue("WHERE"),y="";switch(s+" "+u){case"GET FROM_START":case"GET FROM_END":y=t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FROM;break;case"GET FIRST":y=t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FIRST;break;case"GET LAST":y=t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_LAST;break;case"GET RANDOM":y=t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_RANDOM;break;case"GET_REMOVE FROM_START":case"GET_REMOVE FROM_END":y=t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FROM;break;case"GET_REMOVE FIRST":y=t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FIRST;break;case"GET_REMOVE LAST":y=t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_LAST;break;case"GET_REMOVE RANDOM":y=t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_RANDOM;break;case"REMOVE FROM_START":case"REMOVE FROM_END":y=t.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FROM;break;case"REMOVE FIRST":y=t.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FIRST;break;case"REMOVE LAST":y=t.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_LAST;break;case"REMOVE RANDOM":y=t.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_RANDOM}return("FROM_START"==u||"FROM_END"==u)&&(y+="  "+("FROM_START"==u?t.Msg.LISTS_INDEX_FROM_START_TOOLTIP:t.Msg.LISTS_INDEX_FROM_END_TOOLTIP).replace("%1",r.workspace.options.oneBasedIndex?"#1":"#0")),y})},mutationToDom:function(){var n=t.utils.xml.createElement("mutation");n.setAttribute("statement",!this.outputConnection);var r=this.getInput("AT").type==t.INPUT_VALUE;return n.setAttribute("at",r),n},domToMutation:function(n){var r="true"==n.getAttribute("statement");this.updateStatement_(r),n="false"!=n.getAttribute("at"),this.updateAt_(n)},updateStatement_:function(n){n!=!this.outputConnection&&(this.unplug(!0,!0),n?(this.setOutput(!1),this.setPreviousStatement(!0),this.setNextStatement(!0)):(this.setPreviousStatement(!1),this.setNextStatement(!1),this.setOutput(!0)))},updateAt_:function(n){this.removeInput("AT"),this.removeInput("ORDINAL",!0),n?(this.appendValueInput("AT").setCheck("Number"),t.Msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL").appendField(t.Msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT");var r=new t.FieldDropdown(this.WHERE_OPTIONS,function(s){var u="FROM_START"==s||"FROM_END"==s;if(u!=n){var y=this.getSourceBlock();return y.updateAt_(u),y.setFieldValue(s,"WHERE"),null}});this.getInput("AT").appendField(r,"WHERE"),t.Msg.LISTS_GET_INDEX_TAIL&&this.moveInputBefore("TAIL",null)}},t.Blocks.lists_setIndex={init:function(){var n=[[t.Msg.LISTS_SET_INDEX_SET,"SET"],[t.Msg.LISTS_SET_INDEX_INSERT,"INSERT"]];this.WHERE_OPTIONS=[[t.Msg.LISTS_GET_INDEX_FROM_START,"FROM_START"],[t.Msg.LISTS_GET_INDEX_FROM_END,"FROM_END"],[t.Msg.LISTS_GET_INDEX_FIRST,"FIRST"],[t.Msg.LISTS_GET_INDEX_LAST,"LAST"],[t.Msg.LISTS_GET_INDEX_RANDOM,"RANDOM"]],this.setHelpUrl(t.Msg.LISTS_SET_INDEX_HELPURL),this.setStyle("list_blocks"),this.appendValueInput("LIST").setCheck("Array").appendField(t.Msg.LISTS_SET_INDEX_INPUT_IN_LIST),this.appendDummyInput().appendField(new t.FieldDropdown(n),"MODE").appendField("","SPACE"),this.appendDummyInput("AT"),this.appendValueInput("TO").appendField(t.Msg.LISTS_SET_INDEX_INPUT_TO),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(t.Msg.LISTS_SET_INDEX_TOOLTIP),this.updateAt_(!0);var r=this;this.setTooltip(function(){var s=r.getFieldValue("MODE"),u=r.getFieldValue("WHERE"),y="";switch(s+" "+u){case"SET FROM_START":case"SET FROM_END":y=t.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FROM;break;case"SET FIRST":y=t.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FIRST;break;case"SET LAST":y=t.Msg.LISTS_SET_INDEX_TOOLTIP_SET_LAST;break;case"SET RANDOM":y=t.Msg.LISTS_SET_INDEX_TOOLTIP_SET_RANDOM;break;case"INSERT FROM_START":case"INSERT FROM_END":y=t.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FROM;break;case"INSERT FIRST":y=t.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FIRST;break;case"INSERT LAST":y=t.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_LAST;break;case"INSERT RANDOM":y=t.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_RANDOM}return("FROM_START"==u||"FROM_END"==u)&&(y+="  "+t.Msg.LISTS_INDEX_FROM_START_TOOLTIP.replace("%1",r.workspace.options.oneBasedIndex?"#1":"#0")),y})},mutationToDom:function(){var n=t.utils.xml.createElement("mutation"),r=this.getInput("AT").type==t.INPUT_VALUE;return n.setAttribute("at",r),n},domToMutation:function(n){n="false"!=n.getAttribute("at"),this.updateAt_(n)},updateAt_:function(n){this.removeInput("AT"),this.removeInput("ORDINAL",!0),n?(this.appendValueInput("AT").setCheck("Number"),t.Msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL").appendField(t.Msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT");var r=new t.FieldDropdown(this.WHERE_OPTIONS,function(s){var u="FROM_START"==s||"FROM_END"==s;if(u!=n){var y=this.getSourceBlock();return y.updateAt_(u),y.setFieldValue(s,"WHERE"),null}});this.moveInputBefore("AT","TO"),this.getInput("ORDINAL")&&this.moveInputBefore("ORDINAL","TO"),this.getInput("AT").appendField(r,"WHERE")}},t.Blocks.lists_getSublist={init:function(){this.WHERE_OPTIONS_1=[[t.Msg.LISTS_GET_SUBLIST_START_FROM_START,"FROM_START"],[t.Msg.LISTS_GET_SUBLIST_START_FROM_END,"FROM_END"],[t.Msg.LISTS_GET_SUBLIST_START_FIRST,"FIRST"]],this.WHERE_OPTIONS_2=[[t.Msg.LISTS_GET_SUBLIST_END_FROM_START,"FROM_START"],[t.Msg.LISTS_GET_SUBLIST_END_FROM_END,"FROM_END"],[t.Msg.LISTS_GET_SUBLIST_END_LAST,"LAST"]],this.setHelpUrl(t.Msg.LISTS_GET_SUBLIST_HELPURL),this.setStyle("list_blocks"),this.appendValueInput("LIST").setCheck("Array").appendField(t.Msg.LISTS_GET_SUBLIST_INPUT_IN_LIST),this.appendDummyInput("AT1"),this.appendDummyInput("AT2"),t.Msg.LISTS_GET_SUBLIST_TAIL&&this.appendDummyInput("TAIL").appendField(t.Msg.LISTS_GET_SUBLIST_TAIL),this.setInputsInline(!0),this.setOutput(!0,"Array"),this.updateAt_(1,!0),this.updateAt_(2,!0),this.setTooltip(t.Msg.LISTS_GET_SUBLIST_TOOLTIP)},mutationToDom:function(){var n=t.utils.xml.createElement("mutation"),r=this.getInput("AT1").type==t.INPUT_VALUE;return n.setAttribute("at1",r),r=this.getInput("AT2").type==t.INPUT_VALUE,n.setAttribute("at2",r),n},domToMutation:function(n){var r="true"==n.getAttribute("at1");n="true"==n.getAttribute("at2"),this.updateAt_(1,r),this.updateAt_(2,n)},updateAt_:function(n,r){this.removeInput("AT"+n),this.removeInput("ORDINAL"+n,!0),r?(this.appendValueInput("AT"+n).setCheck("Number"),t.Msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL"+n).appendField(t.Msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT"+n);var s=new t.FieldDropdown(this["WHERE_OPTIONS_"+n],function(u){var y="FROM_START"==u||"FROM_END"==u;if(y!=r){var x=this.getSourceBlock();return x.updateAt_(n,y),x.setFieldValue(u,"WHERE"+n),null}});this.getInput("AT"+n).appendField(s,"WHERE"+n),1==n&&(this.moveInputBefore("AT1","AT2"),this.getInput("ORDINAL1")&&this.moveInputBefore("ORDINAL1","AT2")),t.Msg.LISTS_GET_SUBLIST_TAIL&&this.moveInputBefore("TAIL",null)}},t.Blocks.lists_sort={init:function(){this.jsonInit({message0:t.Msg.LISTS_SORT_TITLE,args0:[{type:"field_dropdown",name:"TYPE",options:[[t.Msg.LISTS_SORT_TYPE_NUMERIC,"NUMERIC"],[t.Msg.LISTS_SORT_TYPE_TEXT,"TEXT"],[t.Msg.LISTS_SORT_TYPE_IGNORECASE,"IGNORE_CASE"]]},{type:"field_dropdown",name:"DIRECTION",options:[[t.Msg.LISTS_SORT_ORDER_ASCENDING,"1"],[t.Msg.LISTS_SORT_ORDER_DESCENDING,"-1"]]},{type:"input_value",name:"LIST",check:"Array"}],output:"Array",style:"list_blocks",tooltip:t.Msg.LISTS_SORT_TOOLTIP,helpUrl:t.Msg.LISTS_SORT_HELPURL})}},t.Blocks.lists_split={init:function(){var n=this,r=new t.FieldDropdown([[t.Msg.LISTS_SPLIT_LIST_FROM_TEXT,"SPLIT"],[t.Msg.LISTS_SPLIT_TEXT_FROM_LIST,"JOIN"]],function(s){n.updateType_(s)});this.setHelpUrl(t.Msg.LISTS_SPLIT_HELPURL),this.setStyle("list_blocks"),this.appendValueInput("INPUT").setCheck("String").appendField(r,"MODE"),this.appendValueInput("DELIM").setCheck("String").appendField(t.Msg.LISTS_SPLIT_WITH_DELIMITER),this.setInputsInline(!0),this.setOutput(!0,"Array"),this.setTooltip(function(){var s=n.getFieldValue("MODE");if("SPLIT"==s)return t.Msg.LISTS_SPLIT_TOOLTIP_SPLIT;if("JOIN"==s)return t.Msg.LISTS_SPLIT_TOOLTIP_JOIN;throw Error("Unknown mode: "+s)})},updateType_:function(n){if(this.getFieldValue("MODE")!=n){var r=this.getInput("INPUT").connection;r.setShadowDom(null);var s=r.targetBlock();s&&(r.disconnect(),s.isShadow()?s.dispose():this.bumpNeighbours())}"SPLIT"==n?(this.outputConnection.setCheck("Array"),this.getInput("INPUT").setCheck("String")):(this.outputConnection.setCheck("String"),this.getInput("INPUT").setCheck("Array"))},mutationToDom:function(){var n=t.utils.xml.createElement("mutation");return n.setAttribute("mode",this.getFieldValue("MODE")),n},domToMutation:function(n){this.updateType_(n.getAttribute("mode"))}},t.Blocks.logic={},t.Constants.Logic={},t.Constants.Logic.HUE=210,t.defineBlocksWithJsonArray([{type:"logic_boolean",message0:"%1",args0:[{type:"field_dropdown",name:"BOOL",options:[["%{BKY_LOGIC_BOOLEAN_TRUE}","TRUE"],["%{BKY_LOGIC_BOOLEAN_FALSE}","FALSE"]]}],output:"Boolean",style:"logic_blocks",tooltip:"%{BKY_LOGIC_BOOLEAN_TOOLTIP}",helpUrl:"%{BKY_LOGIC_BOOLEAN_HELPURL}"},{type:"controls_if",message0:"%{BKY_CONTROLS_IF_MSG_IF} %1",args0:[{type:"input_value",name:"IF0",check:"Boolean"}],message1:"%{BKY_CONTROLS_IF_MSG_THEN} %1",args1:[{type:"input_statement",name:"DO0"}],previousStatement:null,nextStatement:null,style:"logic_blocks",helpUrl:"%{BKY_CONTROLS_IF_HELPURL}",mutator:"controls_if_mutator",extensions:["controls_if_tooltip"]},{type:"controls_ifelse",message0:"%{BKY_CONTROLS_IF_MSG_IF} %1",args0:[{type:"input_value",name:"IF0",check:"Boolean"}],message1:"%{BKY_CONTROLS_IF_MSG_THEN} %1",args1:[{type:"input_statement",name:"DO0"}],message2:"%{BKY_CONTROLS_IF_MSG_ELSE} %1",args2:[{type:"input_statement",name:"ELSE"}],previousStatement:null,nextStatement:null,style:"logic_blocks",tooltip:"%{BKYCONTROLS_IF_TOOLTIP_2}",helpUrl:"%{BKY_CONTROLS_IF_HELPURL}",extensions:["controls_if_tooltip"]},{type:"logic_compare",message0:"%1 %2 %3",args0:[{type:"input_value",name:"A"},{type:"field_dropdown",name:"OP",options:[["=","EQ"],["\u2260","NEQ"],["\u200f<","LT"],["\u200f\u2264","LTE"],["\u200f>","GT"],["\u200f\u2265","GTE"]]},{type:"input_value",name:"B"}],inputsInline:!0,output:"Boolean",style:"logic_blocks",helpUrl:"%{BKY_LOGIC_COMPARE_HELPURL}",extensions:["logic_compare","logic_op_tooltip"]},{type:"logic_operation",message0:"%1 %2 %3",args0:[{type:"input_value",name:"A",check:"Boolean"},{type:"field_dropdown",name:"OP",options:[["%{BKY_LOGIC_OPERATION_AND}","AND"],["%{BKY_LOGIC_OPERATION_OR}","OR"]]},{type:"input_value",name:"B",check:"Boolean"}],inputsInline:!0,output:"Boolean",style:"logic_blocks",helpUrl:"%{BKY_LOGIC_OPERATION_HELPURL}",extensions:["logic_op_tooltip"]},{type:"logic_negate",message0:"%{BKY_LOGIC_NEGATE_TITLE}",args0:[{type:"input_value",name:"BOOL",check:"Boolean"}],output:"Boolean",style:"logic_blocks",tooltip:"%{BKY_LOGIC_NEGATE_TOOLTIP}",helpUrl:"%{BKY_LOGIC_NEGATE_HELPURL}"},{type:"logic_null",message0:"%{BKY_LOGIC_NULL}",output:null,style:"logic_blocks",tooltip:"%{BKY_LOGIC_NULL_TOOLTIP}",helpUrl:"%{BKY_LOGIC_NULL_HELPURL}"},{type:"logic_ternary",message0:"%{BKY_LOGIC_TERNARY_CONDITION} %1",args0:[{type:"input_value",name:"IF",check:"Boolean"}],message1:"%{BKY_LOGIC_TERNARY_IF_TRUE} %1",args1:[{type:"input_value",name:"THEN"}],message2:"%{BKY_LOGIC_TERNARY_IF_FALSE} %1",args2:[{type:"input_value",name:"ELSE"}],output:null,style:"logic_blocks",tooltip:"%{BKY_LOGIC_TERNARY_TOOLTIP}",helpUrl:"%{BKY_LOGIC_TERNARY_HELPURL}",extensions:["logic_ternary"]}]),t.defineBlocksWithJsonArray([{type:"controls_if_if",message0:"%{BKY_CONTROLS_IF_IF_TITLE_IF}",nextStatement:null,enableContextMenu:!1,style:"logic_blocks",tooltip:"%{BKY_CONTROLS_IF_IF_TOOLTIP}"},{type:"controls_if_elseif",message0:"%{BKY_CONTROLS_IF_ELSEIF_TITLE_ELSEIF}",previousStatement:null,nextStatement:null,enableContextMenu:!1,style:"logic_blocks",tooltip:"%{BKY_CONTROLS_IF_ELSEIF_TOOLTIP}"},{type:"controls_if_else",message0:"%{BKY_CONTROLS_IF_ELSE_TITLE_ELSE}",previousStatement:null,enableContextMenu:!1,style:"logic_blocks",tooltip:"%{BKY_CONTROLS_IF_ELSE_TOOLTIP}"}]),t.Constants.Logic.TOOLTIPS_BY_OP={EQ:"%{BKY_LOGIC_COMPARE_TOOLTIP_EQ}",NEQ:"%{BKY_LOGIC_COMPARE_TOOLTIP_NEQ}",LT:"%{BKY_LOGIC_COMPARE_TOOLTIP_LT}",LTE:"%{BKY_LOGIC_COMPARE_TOOLTIP_LTE}",GT:"%{BKY_LOGIC_COMPARE_TOOLTIP_GT}",GTE:"%{BKY_LOGIC_COMPARE_TOOLTIP_GTE}",AND:"%{BKY_LOGIC_OPERATION_TOOLTIP_AND}",OR:"%{BKY_LOGIC_OPERATION_TOOLTIP_OR}"},t.Extensions.register("logic_op_tooltip",t.Extensions.buildTooltipForDropdown("OP",t.Constants.Logic.TOOLTIPS_BY_OP)),t.Constants.Logic.CONTROLS_IF_MUTATOR_MIXIN={elseifCount_:0,elseCount_:0,suppressPrefixSuffix:!0,mutationToDom:function(){if(!this.elseifCount_&&!this.elseCount_)return null;var n=t.utils.xml.createElement("mutation");return this.elseifCount_&&n.setAttribute("elseif",this.elseifCount_),this.elseCount_&&n.setAttribute("else",1),n},domToMutation:function(n){this.elseifCount_=parseInt(n.getAttribute("elseif"),10)||0,this.elseCount_=parseInt(n.getAttribute("else"),10)||0,this.rebuildShape_()},decompose:function(n){var r=n.newBlock("controls_if_if");r.initSvg();for(var s=r.nextConnection,u=1;u<=this.elseifCount_;u++){var y=n.newBlock("controls_if_elseif");y.initSvg(),s.connect(y.previousConnection),s=y.nextConnection}return this.elseCount_&&((n=n.newBlock("controls_if_else")).initSvg(),s.connect(n.previousConnection)),r},compose:function(n){n=n.nextConnection.targetBlock(),this.elseCount_=this.elseifCount_=0;for(var r=[null],s=[null],u=null;n&&!n.isInsertionMarker();){switch(n.type){case"controls_if_elseif":this.elseifCount_++,r.push(n.valueConnection_),s.push(n.statementConnection_);break;case"controls_if_else":this.elseCount_++,u=n.statementConnection_;break;default:throw TypeError("Unknown block type: "+n.type)}n=n.nextConnection&&n.nextConnection.targetBlock()}this.updateShape_(),this.reconnectChildBlocks_(r,s,u)},saveConnections:function(n){n=n.nextConnection.targetBlock();for(var r=1;n;){switch(n.type){case"controls_if_elseif":var s=this.getInput("IF"+r),u=this.getInput("DO"+r);n.valueConnection_=s&&s.connection.targetConnection,n.statementConnection_=u&&u.connection.targetConnection,r++;break;case"controls_if_else":u=this.getInput("ELSE"),n.statementConnection_=u&&u.connection.targetConnection;break;default:throw TypeError("Unknown block type: "+n.type)}n=n.nextConnection&&n.nextConnection.targetBlock()}},rebuildShape_:function(){var n=[null],r=[null],s=null;this.getInput("ELSE")&&(s=this.getInput("ELSE").connection.targetConnection);for(var u=1;this.getInput("IF"+u);){var y=this.getInput("IF"+u),x=this.getInput("DO"+u);n.push(y.connection.targetConnection),r.push(x.connection.targetConnection),u++}this.updateShape_(),this.reconnectChildBlocks_(n,r,s)},updateShape_:function(){this.getInput("ELSE")&&this.removeInput("ELSE");for(var n=1;this.getInput("IF"+n);)this.removeInput("IF"+n),this.removeInput("DO"+n),n++;for(n=1;n<=this.elseifCount_;n++)this.appendValueInput("IF"+n).setCheck("Boolean").appendField(t.Msg.CONTROLS_IF_MSG_ELSEIF),this.appendStatementInput("DO"+n).appendField(t.Msg.CONTROLS_IF_MSG_THEN);this.elseCount_&&this.appendStatementInput("ELSE").appendField(t.Msg.CONTROLS_IF_MSG_ELSE)},reconnectChildBlocks_:function(n,r,s){for(var u=1;u<=this.elseifCount_;u++)t.Mutator.reconnect(n[u],this,"IF"+u),t.Mutator.reconnect(r[u],this,"DO"+u);t.Mutator.reconnect(s,this,"ELSE")}},t.Extensions.registerMutator("controls_if_mutator",t.Constants.Logic.CONTROLS_IF_MUTATOR_MIXIN,null,["controls_if_elseif","controls_if_else"]),t.Constants.Logic.CONTROLS_IF_TOOLTIP_EXTENSION=function(){this.setTooltip(function(){return this.elseifCount_||this.elseCount_?!this.elseifCount_&&this.elseCount_?t.Msg.CONTROLS_IF_TOOLTIP_2:this.elseifCount_&&!this.elseCount_?t.Msg.CONTROLS_IF_TOOLTIP_3:this.elseifCount_&&this.elseCount_?t.Msg.CONTROLS_IF_TOOLTIP_4:"":t.Msg.CONTROLS_IF_TOOLTIP_1}.bind(this))},t.Extensions.register("controls_if_tooltip",t.Constants.Logic.CONTROLS_IF_TOOLTIP_EXTENSION),t.Constants.Logic.LOGIC_COMPARE_ONCHANGE_MIXIN={onchange:function(n){this.prevBlocks_||(this.prevBlocks_=[null,null]);var r=this.getInputTargetBlock("A"),s=this.getInputTargetBlock("B");r&&s&&!this.workspace.connectionChecker.doTypeChecks(r.outputConnection,s.outputConnection)&&(t.Events.setGroup(n.group),(n=this.prevBlocks_[0])!==r&&(r.unplug(),!n||n.isDisposed()||n.isShadow()||this.getInput("A").connection.connect(n.outputConnection)),(r=this.prevBlocks_[1])!==s&&(s.unplug(),!r||r.isDisposed()||r.isShadow()||this.getInput("B").connection.connect(r.outputConnection)),this.bumpNeighbours(),t.Events.setGroup(!1)),this.prevBlocks_[0]=this.getInputTargetBlock("A"),this.prevBlocks_[1]=this.getInputTargetBlock("B")}},t.Constants.Logic.LOGIC_COMPARE_EXTENSION=function(){this.mixin(t.Constants.Logic.LOGIC_COMPARE_ONCHANGE_MIXIN)},t.Extensions.register("logic_compare",t.Constants.Logic.LOGIC_COMPARE_EXTENSION),t.Constants.Logic.LOGIC_TERNARY_ONCHANGE_MIXIN={prevParentConnection_:null,onchange:function(n){var r=this.getInputTargetBlock("THEN"),s=this.getInputTargetBlock("ELSE"),u=this.outputConnection.targetConnection;if((r||s)&&u)for(var y=0;2>y;y++){var x=1==y?r:s;x&&!x.workspace.connectionChecker.doTypeChecks(x.outputConnection,u)&&(t.Events.setGroup(n.group),u===this.prevParentConnection_?(this.unplug(),u.getSourceBlock().bumpNeighbours()):(x.unplug(),x.bumpNeighbours()),t.Events.setGroup(!1))}this.prevParentConnection_=u}},t.Extensions.registerMixin("logic_ternary",t.Constants.Logic.LOGIC_TERNARY_ONCHANGE_MIXIN),t.Blocks.loops={},t.Constants.Loops={},t.Constants.Loops.HUE=120,t.defineBlocksWithJsonArray([{type:"controls_repeat_ext",message0:"%{BKY_CONTROLS_REPEAT_TITLE}",args0:[{type:"input_value",name:"TIMES",check:"Number"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",tooltip:"%{BKY_CONTROLS_REPEAT_TOOLTIP}",helpUrl:"%{BKY_CONTROLS_REPEAT_HELPURL}"},{type:"controls_repeat",message0:"%{BKY_CONTROLS_REPEAT_TITLE}",args0:[{type:"field_number",name:"TIMES",value:10,min:0,precision:1}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",tooltip:"%{BKY_CONTROLS_REPEAT_TOOLTIP}",helpUrl:"%{BKY_CONTROLS_REPEAT_HELPURL}"},{type:"controls_whileUntil",message0:"%1 %2",args0:[{type:"field_dropdown",name:"MODE",options:[["%{BKY_CONTROLS_WHILEUNTIL_OPERATOR_WHILE}","WHILE"],["%{BKY_CONTROLS_WHILEUNTIL_OPERATOR_UNTIL}","UNTIL"]]},{type:"input_value",name:"BOOL",check:"Boolean"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_WHILEUNTIL_HELPURL}",extensions:["controls_whileUntil_tooltip"]},{type:"controls_for",message0:"%{BKY_CONTROLS_FOR_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:null},{type:"input_value",name:"FROM",check:"Number",align:"RIGHT"},{type:"input_value",name:"TO",check:"Number",align:"RIGHT"},{type:"input_value",name:"BY",check:"Number",align:"RIGHT"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],inputsInline:!0,previousStatement:null,nextStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_FOR_HELPURL}",extensions:["contextMenu_newGetVariableBlock","controls_for_tooltip"]},{type:"controls_forEach",message0:"%{BKY_CONTROLS_FOREACH_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:null},{type:"input_value",name:"LIST",check:"Array"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_FOREACH_HELPURL}",extensions:["contextMenu_newGetVariableBlock","controls_forEach_tooltip"]},{type:"controls_flow_statements",message0:"%1",args0:[{type:"field_dropdown",name:"FLOW",options:[["%{BKY_CONTROLS_FLOW_STATEMENTS_OPERATOR_BREAK}","BREAK"],["%{BKY_CONTROLS_FLOW_STATEMENTS_OPERATOR_CONTINUE}","CONTINUE"]]}],previousStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_FLOW_STATEMENTS_HELPURL}",extensions:["controls_flow_tooltip","controls_flow_in_loop_check"]}]),t.Constants.Loops.WHILE_UNTIL_TOOLTIPS={WHILE:"%{BKY_CONTROLS_WHILEUNTIL_TOOLTIP_WHILE}",UNTIL:"%{BKY_CONTROLS_WHILEUNTIL_TOOLTIP_UNTIL}"},t.Extensions.register("controls_whileUntil_tooltip",t.Extensions.buildTooltipForDropdown("MODE",t.Constants.Loops.WHILE_UNTIL_TOOLTIPS)),t.Constants.Loops.BREAK_CONTINUE_TOOLTIPS={BREAK:"%{BKY_CONTROLS_FLOW_STATEMENTS_TOOLTIP_BREAK}",CONTINUE:"%{BKY_CONTROLS_FLOW_STATEMENTS_TOOLTIP_CONTINUE}"},t.Extensions.register("controls_flow_tooltip",t.Extensions.buildTooltipForDropdown("FLOW",t.Constants.Loops.BREAK_CONTINUE_TOOLTIPS)),t.Constants.Loops.CUSTOM_CONTEXT_MENU_CREATE_VARIABLES_GET_MIXIN={customContextMenu:function(n){if(!this.isInFlyout){var r=this.getField("VAR").getVariable(),s=r.name;if(!this.isCollapsed()&&null!=s){var u={enabled:!0};u.text=t.Msg.VARIABLES_SET_CREATE_GET.replace("%1",s),r=t.Variables.generateVariableFieldDom(r),(s=t.utils.xml.createElement("block")).setAttribute("type","variables_get"),s.appendChild(r),u.callback=t.ContextMenu.callbackFactory(this,s),n.push(u)}}}},t.Extensions.registerMixin("contextMenu_newGetVariableBlock",t.Constants.Loops.CUSTOM_CONTEXT_MENU_CREATE_VARIABLES_GET_MIXIN),t.Extensions.register("controls_for_tooltip",t.Extensions.buildTooltipWithFieldText("%{BKY_CONTROLS_FOR_TOOLTIP}","VAR")),t.Extensions.register("controls_forEach_tooltip",t.Extensions.buildTooltipWithFieldText("%{BKY_CONTROLS_FOREACH_TOOLTIP}","VAR")),t.Constants.Loops.CONTROL_FLOW_IN_LOOP_CHECK_MIXIN={LOOP_TYPES:["controls_repeat","controls_repeat_ext","controls_forEach","controls_for","controls_whileUntil"],suppressPrefixSuffix:!0,getSurroundLoop:function(n){do{if(-1!=t.Constants.Loops.CONTROL_FLOW_IN_LOOP_CHECK_MIXIN.LOOP_TYPES.indexOf(n.type))return n;n=n.getSurroundParent()}while(n);return null},onchange:function(n){if(this.workspace.isDragging&&!this.workspace.isDragging()&&n.type==t.Events.BLOCK_MOVE){var r=t.Constants.Loops.CONTROL_FLOW_IN_LOOP_CHECK_MIXIN.getSurroundLoop(this);if(this.setWarningText(r?null:t.Msg.CONTROLS_FLOW_STATEMENTS_WARNING),!this.isInFlyout){var s=t.Events.getGroup();t.Events.setGroup(n.group),this.setEnabled(r),t.Events.setGroup(s)}}}},t.Extensions.registerMixin("controls_flow_in_loop_check",t.Constants.Loops.CONTROL_FLOW_IN_LOOP_CHECK_MIXIN),t.Blocks.math={},t.Constants.Math={},t.Constants.Math.HUE=230,t.defineBlocksWithJsonArray([{type:"math_number",message0:"%1",args0:[{type:"field_number",name:"NUM",value:0}],output:"Number",helpUrl:"%{BKY_MATH_NUMBER_HELPURL}",style:"math_blocks",tooltip:"%{BKY_MATH_NUMBER_TOOLTIP}",extensions:["parent_tooltip_when_inline"]},{type:"math_arithmetic",message0:"%1 %2 %3",args0:[{type:"input_value",name:"A",check:"Number"},{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_ADDITION_SYMBOL}","ADD"],["%{BKY_MATH_SUBTRACTION_SYMBOL}","MINUS"],["%{BKY_MATH_MULTIPLICATION_SYMBOL}","MULTIPLY"],["%{BKY_MATH_DIVISION_SYMBOL}","DIVIDE"],["%{BKY_MATH_POWER_SYMBOL}","POWER"]]},{type:"input_value",name:"B",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_ARITHMETIC_HELPURL}",extensions:["math_op_tooltip"]},{type:"math_single",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_SINGLE_OP_ROOT}","ROOT"],["%{BKY_MATH_SINGLE_OP_ABSOLUTE}","ABS"],["-","NEG"],["ln","LN"],["log10","LOG10"],["e^","EXP"],["10^","POW10"]]},{type:"input_value",name:"NUM",check:"Number"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_SINGLE_HELPURL}",extensions:["math_op_tooltip"]},{type:"math_trig",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_TRIG_SIN}","SIN"],["%{BKY_MATH_TRIG_COS}","COS"],["%{BKY_MATH_TRIG_TAN}","TAN"],["%{BKY_MATH_TRIG_ASIN}","ASIN"],["%{BKY_MATH_TRIG_ACOS}","ACOS"],["%{BKY_MATH_TRIG_ATAN}","ATAN"]]},{type:"input_value",name:"NUM",check:"Number"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_TRIG_HELPURL}",extensions:["math_op_tooltip"]},{type:"math_constant",message0:"%1",args0:[{type:"field_dropdown",name:"CONSTANT",options:[["\u03c0","PI"],["e","E"],["\u03c6","GOLDEN_RATIO"],["sqrt(2)","SQRT2"],["sqrt(\xbd)","SQRT1_2"],["\u221e","INFINITY"]]}],output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_CONSTANT_TOOLTIP}",helpUrl:"%{BKY_MATH_CONSTANT_HELPURL}"},{type:"math_number_property",message0:"%1 %2",args0:[{type:"input_value",name:"NUMBER_TO_CHECK",check:"Number"},{type:"field_dropdown",name:"PROPERTY",options:[["%{BKY_MATH_IS_EVEN}","EVEN"],["%{BKY_MATH_IS_ODD}","ODD"],["%{BKY_MATH_IS_PRIME}","PRIME"],["%{BKY_MATH_IS_WHOLE}","WHOLE"],["%{BKY_MATH_IS_POSITIVE}","POSITIVE"],["%{BKY_MATH_IS_NEGATIVE}","NEGATIVE"],["%{BKY_MATH_IS_DIVISIBLE_BY}","DIVISIBLE_BY"]]}],inputsInline:!0,output:"Boolean",style:"math_blocks",tooltip:"%{BKY_MATH_IS_TOOLTIP}",mutator:"math_is_divisibleby_mutator"},{type:"math_change",message0:"%{BKY_MATH_CHANGE_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_MATH_CHANGE_TITLE_ITEM}"},{type:"input_value",name:"DELTA",check:"Number"}],previousStatement:null,nextStatement:null,style:"variable_blocks",helpUrl:"%{BKY_MATH_CHANGE_HELPURL}",extensions:["math_change_tooltip"]},{type:"math_round",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_ROUND_OPERATOR_ROUND}","ROUND"],["%{BKY_MATH_ROUND_OPERATOR_ROUNDUP}","ROUNDUP"],["%{BKY_MATH_ROUND_OPERATOR_ROUNDDOWN}","ROUNDDOWN"]]},{type:"input_value",name:"NUM",check:"Number"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_ROUND_HELPURL}",tooltip:"%{BKY_MATH_ROUND_TOOLTIP}"},{type:"math_on_list",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_ONLIST_OPERATOR_SUM}","SUM"],["%{BKY_MATH_ONLIST_OPERATOR_MIN}","MIN"],["%{BKY_MATH_ONLIST_OPERATOR_MAX}","MAX"],["%{BKY_MATH_ONLIST_OPERATOR_AVERAGE}","AVERAGE"],["%{BKY_MATH_ONLIST_OPERATOR_MEDIAN}","MEDIAN"],["%{BKY_MATH_ONLIST_OPERATOR_MODE}","MODE"],["%{BKY_MATH_ONLIST_OPERATOR_STD_DEV}","STD_DEV"],["%{BKY_MATH_ONLIST_OPERATOR_RANDOM}","RANDOM"]]},{type:"input_value",name:"LIST",check:"Array"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_ONLIST_HELPURL}",mutator:"math_modes_of_list_mutator",extensions:["math_op_tooltip"]},{type:"math_modulo",message0:"%{BKY_MATH_MODULO_TITLE}",args0:[{type:"input_value",name:"DIVIDEND",check:"Number"},{type:"input_value",name:"DIVISOR",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_MODULO_TOOLTIP}",helpUrl:"%{BKY_MATH_MODULO_HELPURL}"},{type:"math_constrain",message0:"%{BKY_MATH_CONSTRAIN_TITLE}",args0:[{type:"input_value",name:"VALUE",check:"Number"},{type:"input_value",name:"LOW",check:"Number"},{type:"input_value",name:"HIGH",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_CONSTRAIN_TOOLTIP}",helpUrl:"%{BKY_MATH_CONSTRAIN_HELPURL}"},{type:"math_random_int",message0:"%{BKY_MATH_RANDOM_INT_TITLE}",args0:[{type:"input_value",name:"FROM",check:"Number"},{type:"input_value",name:"TO",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_RANDOM_INT_TOOLTIP}",helpUrl:"%{BKY_MATH_RANDOM_INT_HELPURL}"},{type:"math_random_float",message0:"%{BKY_MATH_RANDOM_FLOAT_TITLE_RANDOM}",output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_RANDOM_FLOAT_TOOLTIP}",helpUrl:"%{BKY_MATH_RANDOM_FLOAT_HELPURL}"},{type:"math_atan2",message0:"%{BKY_MATH_ATAN2_TITLE}",args0:[{type:"input_value",name:"X",check:"Number"},{type:"input_value",name:"Y",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_ATAN2_TOOLTIP}",helpUrl:"%{BKY_MATH_ATAN2_HELPURL}"}]),t.Constants.Math.TOOLTIPS_BY_OP={ADD:"%{BKY_MATH_ARITHMETIC_TOOLTIP_ADD}",MINUS:"%{BKY_MATH_ARITHMETIC_TOOLTIP_MINUS}",MULTIPLY:"%{BKY_MATH_ARITHMETIC_TOOLTIP_MULTIPLY}",DIVIDE:"%{BKY_MATH_ARITHMETIC_TOOLTIP_DIVIDE}",POWER:"%{BKY_MATH_ARITHMETIC_TOOLTIP_POWER}",ROOT:"%{BKY_MATH_SINGLE_TOOLTIP_ROOT}",ABS:"%{BKY_MATH_SINGLE_TOOLTIP_ABS}",NEG:"%{BKY_MATH_SINGLE_TOOLTIP_NEG}",LN:"%{BKY_MATH_SINGLE_TOOLTIP_LN}",LOG10:"%{BKY_MATH_SINGLE_TOOLTIP_LOG10}",EXP:"%{BKY_MATH_SINGLE_TOOLTIP_EXP}",POW10:"%{BKY_MATH_SINGLE_TOOLTIP_POW10}",SIN:"%{BKY_MATH_TRIG_TOOLTIP_SIN}",COS:"%{BKY_MATH_TRIG_TOOLTIP_COS}",TAN:"%{BKY_MATH_TRIG_TOOLTIP_TAN}",ASIN:"%{BKY_MATH_TRIG_TOOLTIP_ASIN}",ACOS:"%{BKY_MATH_TRIG_TOOLTIP_ACOS}",ATAN:"%{BKY_MATH_TRIG_TOOLTIP_ATAN}",SUM:"%{BKY_MATH_ONLIST_TOOLTIP_SUM}",MIN:"%{BKY_MATH_ONLIST_TOOLTIP_MIN}",MAX:"%{BKY_MATH_ONLIST_TOOLTIP_MAX}",AVERAGE:"%{BKY_MATH_ONLIST_TOOLTIP_AVERAGE}",MEDIAN:"%{BKY_MATH_ONLIST_TOOLTIP_MEDIAN}",MODE:"%{BKY_MATH_ONLIST_TOOLTIP_MODE}",STD_DEV:"%{BKY_MATH_ONLIST_TOOLTIP_STD_DEV}",RANDOM:"%{BKY_MATH_ONLIST_TOOLTIP_RANDOM}"},t.Extensions.register("math_op_tooltip",t.Extensions.buildTooltipForDropdown("OP",t.Constants.Math.TOOLTIPS_BY_OP)),t.Constants.Math.IS_DIVISIBLEBY_MUTATOR_MIXIN={mutationToDom:function(){var n=t.utils.xml.createElement("mutation"),r="DIVISIBLE_BY"==this.getFieldValue("PROPERTY");return n.setAttribute("divisor_input",r),n},domToMutation:function(n){n="true"==n.getAttribute("divisor_input"),this.updateShape_(n)},updateShape_:function(n){var r=this.getInput("DIVISOR");n?r||this.appendValueInput("DIVISOR").setCheck("Number"):r&&this.removeInput("DIVISOR")}},t.Constants.Math.IS_DIVISIBLE_MUTATOR_EXTENSION=function(){this.getField("PROPERTY").setValidator(function(n){n="DIVISIBLE_BY"==n,this.getSourceBlock().updateShape_(n)})},t.Extensions.registerMutator("math_is_divisibleby_mutator",t.Constants.Math.IS_DIVISIBLEBY_MUTATOR_MIXIN,t.Constants.Math.IS_DIVISIBLE_MUTATOR_EXTENSION),t.Extensions.register("math_change_tooltip",t.Extensions.buildTooltipWithFieldText("%{BKY_MATH_CHANGE_TOOLTIP}","VAR")),t.Constants.Math.LIST_MODES_MUTATOR_MIXIN={updateType_:function(n){this.outputConnection.setCheck("MODE"==n?"Array":"Number")},mutationToDom:function(){var n=t.utils.xml.createElement("mutation");return n.setAttribute("op",this.getFieldValue("OP")),n},domToMutation:function(n){this.updateType_(n.getAttribute("op"))}},t.Constants.Math.LIST_MODES_MUTATOR_EXTENSION=function(){this.getField("OP").setValidator(function(n){this.updateType_(n)}.bind(this))},t.Extensions.registerMutator("math_modes_of_list_mutator",t.Constants.Math.LIST_MODES_MUTATOR_MIXIN,t.Constants.Math.LIST_MODES_MUTATOR_EXTENSION),t.Blocks.procedures={},t.Blocks.procedures_defnoreturn={init:function(){var n=t.Procedures.findLegalName("",this);(n=new t.FieldTextInput(n,t.Procedures.rename)).setSpellcheck(!1),this.appendDummyInput().appendField(t.Msg.PROCEDURES_DEFNORETURN_TITLE).appendField(n,"NAME").appendField("","PARAMS"),this.setMutator(new t.Mutator(["procedures_mutatorarg"])),(this.workspace.options.comments||this.workspace.options.parentWorkspace&&this.workspace.options.parentWorkspace.options.comments)&&t.Msg.PROCEDURES_DEFNORETURN_COMMENT&&this.setCommentText(t.Msg.PROCEDURES_DEFNORETURN_COMMENT),this.setStyle("procedure_blocks"),this.setTooltip(t.Msg.PROCEDURES_DEFNORETURN_TOOLTIP),this.setHelpUrl(t.Msg.PROCEDURES_DEFNORETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.setStatements_(!0),this.statementConnection_=null},setStatements_:function(n){this.hasStatements_!==n&&(n?(this.appendStatementInput("STACK").appendField(t.Msg.PROCEDURES_DEFNORETURN_DO),this.getInput("RETURN")&&this.moveInputBefore("STACK","RETURN")):this.removeInput("STACK",!0),this.hasStatements_=n)},updateParams_:function(){var n="";this.arguments_.length&&(n=t.Msg.PROCEDURES_BEFORE_PARAMS+" "+this.arguments_.join(", ")),t.Events.disable();try{this.setFieldValue(n,"PARAMS")}finally{t.Events.enable()}},mutationToDom:function(n){var r=t.utils.xml.createElement("mutation");n&&r.setAttribute("name",this.getFieldValue("NAME"));for(var s=0;s<this.argumentVarModels_.length;s++){var u=t.utils.xml.createElement("arg"),y=this.argumentVarModels_[s];u.setAttribute("name",y.name),u.setAttribute("varid",y.getId()),n&&this.paramIds_&&u.setAttribute("paramId",this.paramIds_[s]),r.appendChild(u)}return this.hasStatements_||r.setAttribute("statements","false"),r},domToMutation:function(n){this.arguments_=[],this.argumentVarModels_=[];for(var s,r=0;s=n.childNodes[r];r++)if("arg"==s.nodeName.toLowerCase()){var u=s.getAttribute("name");s=s.getAttribute("varid")||s.getAttribute("varId"),this.arguments_.push(u),null!=(s=t.Variables.getOrCreateVariablePackage(this.workspace,s,u,""))?this.argumentVarModels_.push(s):console.log("Failed to create a variable with name "+u+", ignoring.")}this.updateParams_(),t.Procedures.mutateCallers(this),this.setStatements_("false"!==n.getAttribute("statements"))},decompose:function(n){var r=t.utils.xml.createElement("block");r.setAttribute("type","procedures_mutatorcontainer");var s=t.utils.xml.createElement("statement");s.setAttribute("name","STACK"),r.appendChild(s);for(var u=0;u<this.arguments_.length;u++){var y=t.utils.xml.createElement("block");y.setAttribute("type","procedures_mutatorarg");var x=t.utils.xml.createElement("field");x.setAttribute("name","NAME");var B=t.utils.xml.createTextNode(this.arguments_[u]);x.appendChild(B),y.appendChild(x),x=t.utils.xml.createElement("next"),y.appendChild(x),s.appendChild(y),s=x}return n=t.Xml.domToBlock(r,n),"procedures_defreturn"==this.type?n.setFieldValue(this.hasStatements_,"STATEMENTS"):n.removeInput("STATEMENT_INPUT"),t.Procedures.mutateCallers(this),n},compose:function(n){this.arguments_=[],this.paramIds_=[],this.argumentVarModels_=[];for(var r=n.getInputTargetBlock("STACK");r&&!r.isInsertionMarker();){var s=r.getFieldValue("NAME");this.arguments_.push(s),s=this.workspace.getVariable(s,""),this.argumentVarModels_.push(s),this.paramIds_.push(r.id),r=r.nextConnection&&r.nextConnection.targetBlock()}this.updateParams_(),t.Procedures.mutateCallers(this),null!==(n=n.getFieldValue("STATEMENTS"))&&this.hasStatements_!=(n="TRUE"==n)&&(n?(this.setStatements_(!0),t.Mutator.reconnect(this.statementConnection_,this,"STACK"),this.statementConnection_=null):(n=this.getInput("STACK").connection,(this.statementConnection_=n.targetConnection)&&((n=n.targetBlock()).unplug(),n.bumpNeighbours()),this.setStatements_(!1)))},getProcedureDef:function(){return[this.getFieldValue("NAME"),this.arguments_,!1]},getVars:function(){return this.arguments_},getVarModels:function(){return this.argumentVarModels_},renameVarById:function(n,r){var s=this.workspace.getVariableById(n);if(""==s.type){s=s.name,r=this.workspace.getVariableById(r);for(var u=!1,y=0;y<this.argumentVarModels_.length;y++)this.argumentVarModels_[y].getId()==n&&(this.arguments_[y]=r.name,this.argumentVarModels_[y]=r,u=!0);u&&(this.displayRenamedVar_(s,r.name),t.Procedures.mutateCallers(this))}},updateVarName:function(n){for(var r=n.name,s=!1,u=0;u<this.argumentVarModels_.length;u++)if(this.argumentVarModels_[u].getId()==n.getId()){var y=this.arguments_[u];this.arguments_[u]=r,s=!0}s&&(this.displayRenamedVar_(y,r),t.Procedures.mutateCallers(this))},displayRenamedVar_:function(n,r){if(this.updateParams_(),this.mutator&&this.mutator.isVisible())for(var y,s=this.mutator.workspace_.getAllBlocks(!1),u=0;y=s[u];u++)"procedures_mutatorarg"==y.type&&t.Names.equals(n,y.getFieldValue("NAME"))&&y.setFieldValue(r,"NAME")},customContextMenu:function(n){if(!this.isInFlyout){var r={enabled:!0},s=this.getFieldValue("NAME");r.text=t.Msg.PROCEDURES_CREATE_DO.replace("%1",s);var u=t.utils.xml.createElement("mutation");for(u.setAttribute("name",s),s=0;s<this.arguments_.length;s++){var y=t.utils.xml.createElement("arg");y.setAttribute("name",this.arguments_[s]),u.appendChild(y)}if((s=t.utils.xml.createElement("block")).setAttribute("type",this.callType_),s.appendChild(u),r.callback=t.ContextMenu.callbackFactory(this,s),n.push(r),!this.isCollapsed())for(s=0;s<this.argumentVarModels_.length;s++)(r={enabled:!0}).text=t.Msg.VARIABLES_SET_CREATE_GET.replace("%1",(u=this.argumentVarModels_[s]).name),u=t.Variables.generateVariableFieldDom(u),(y=t.utils.xml.createElement("block")).setAttribute("type","variables_get"),y.appendChild(u),r.callback=t.ContextMenu.callbackFactory(this,y),n.push(r)}},callType_:"procedures_callnoreturn"},t.Blocks.procedures_defreturn={init:function(){var n=t.Procedures.findLegalName("",this);(n=new t.FieldTextInput(n,t.Procedures.rename)).setSpellcheck(!1),this.appendDummyInput().appendField(t.Msg.PROCEDURES_DEFRETURN_TITLE).appendField(n,"NAME").appendField("","PARAMS"),this.appendValueInput("RETURN").setAlign(t.ALIGN_RIGHT).appendField(t.Msg.PROCEDURES_DEFRETURN_RETURN),this.setMutator(new t.Mutator(["procedures_mutatorarg"])),(this.workspace.options.comments||this.workspace.options.parentWorkspace&&this.workspace.options.parentWorkspace.options.comments)&&t.Msg.PROCEDURES_DEFRETURN_COMMENT&&this.setCommentText(t.Msg.PROCEDURES_DEFRETURN_COMMENT),this.setStyle("procedure_blocks"),this.setTooltip(t.Msg.PROCEDURES_DEFRETURN_TOOLTIP),this.setHelpUrl(t.Msg.PROCEDURES_DEFRETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.setStatements_(!0),this.statementConnection_=null},setStatements_:t.Blocks.procedures_defnoreturn.setStatements_,updateParams_:t.Blocks.procedures_defnoreturn.updateParams_,mutationToDom:t.Blocks.procedures_defnoreturn.mutationToDom,domToMutation:t.Blocks.procedures_defnoreturn.domToMutation,decompose:t.Blocks.procedures_defnoreturn.decompose,compose:t.Blocks.procedures_defnoreturn.compose,getProcedureDef:function(){return[this.getFieldValue("NAME"),this.arguments_,!0]},getVars:t.Blocks.procedures_defnoreturn.getVars,getVarModels:t.Blocks.procedures_defnoreturn.getVarModels,renameVarById:t.Blocks.procedures_defnoreturn.renameVarById,updateVarName:t.Blocks.procedures_defnoreturn.updateVarName,displayRenamedVar_:t.Blocks.procedures_defnoreturn.displayRenamedVar_,customContextMenu:t.Blocks.procedures_defnoreturn.customContextMenu,callType_:"procedures_callreturn"},t.Blocks.procedures_mutatorcontainer={init:function(){this.appendDummyInput().appendField(t.Msg.PROCEDURES_MUTATORCONTAINER_TITLE),this.appendStatementInput("STACK"),this.appendDummyInput("STATEMENT_INPUT").appendField(t.Msg.PROCEDURES_ALLOW_STATEMENTS).appendField(new t.FieldCheckbox("TRUE"),"STATEMENTS"),this.setStyle("procedure_blocks"),this.setTooltip(t.Msg.PROCEDURES_MUTATORCONTAINER_TOOLTIP),this.contextMenu=!1}},t.Blocks.procedures_mutatorarg={init:function(){var n=new t.FieldTextInput(t.Procedures.DEFAULT_ARG,this.validator_);n.oldShowEditorFn_=n.showEditor_,n.showEditor_=function(){this.createdVariables_=[],this.oldShowEditorFn_()},this.appendDummyInput().appendField(t.Msg.PROCEDURES_MUTATORARG_TITLE).appendField(n,"NAME"),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setStyle("procedure_blocks"),this.setTooltip(t.Msg.PROCEDURES_MUTATORARG_TOOLTIP),this.contextMenu=!1,n.onFinishEditing_=this.deleteIntermediateVars_,n.createdVariables_=[],n.onFinishEditing_("x")},validator_:function(n){var r=this.getSourceBlock(),s=t.Mutator.findParentWs(r.workspace);if(!(n=n.replace(/[\s\xa0]+/g," ").replace(/^ | $/g,"")))return null;for(var u=(r.workspace.targetWorkspace||r.workspace).getAllBlocks(!1),y=n.toLowerCase(),x=0;x<u.length;x++)if(u[x].id!=this.getSourceBlock().id){var B=u[x].getFieldValue("NAME");if(B&&B.toLowerCase()==y)return null}return r.isInFlyout||((r=s.getVariable(n,""))&&r.name!=n&&s.renameVariableById(r.getId(),n),r||(r=s.createVariable(n,""))&&this.createdVariables_&&this.createdVariables_.push(r)),n},deleteIntermediateVars_:function(n){var r=t.Mutator.findParentWs(this.getSourceBlock().workspace);if(r)for(var s=0;s<this.createdVariables_.length;s++){var u=this.createdVariables_[s];u.name!=n&&r.deleteVariableById(u.getId())}}},t.Blocks.procedures_callnoreturn={init:function(){this.appendDummyInput("TOPROW").appendField("","NAME"),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setStyle("procedure_blocks"),this.setHelpUrl(t.Msg.PROCEDURES_CALLNORETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.quarkConnections_={},this.quarkIds_=null,this.previousEnabledState_=!0},getProcedureCall:function(){return this.getFieldValue("NAME")},renameProcedure:function(n,r){t.Names.equals(n,this.getProcedureCall())&&(this.setFieldValue(r,"NAME"),this.setTooltip((this.outputConnection?t.Msg.PROCEDURES_CALLRETURN_TOOLTIP:t.Msg.PROCEDURES_CALLNORETURN_TOOLTIP).replace("%1",r)))},setProcedureParameters_:function(n,r){var s=t.Procedures.getDefinition(this.getProcedureCall(),this.workspace),u=s&&s.mutator&&s.mutator.isVisible();if(u||(this.quarkConnections_={},this.quarkIds_=null),r)if(n.join("\n")==this.arguments_.join("\n"))this.quarkIds_=r;else{if(r.length!=n.length)throw RangeError("paramNames and paramIds must be the same length.");this.setCollapsed(!1),this.quarkIds_||(this.quarkConnections_={},this.quarkIds_=[]),s=this.rendered,this.rendered=!1;for(var y=0;y<this.arguments_.length;y++){var x=this.getInput("ARG"+y);x&&(this.quarkConnections_[this.quarkIds_[y]]=x=x.connection.targetConnection,u&&x&&-1==r.indexOf(this.quarkIds_[y])&&(x.disconnect(),x.getSourceBlock().bumpNeighbours()))}for(this.arguments_=[].concat(n),this.argumentVarModels_=[],y=0;y<this.arguments_.length;y++)n=t.Variables.getOrCreateVariablePackage(this.workspace,null,this.arguments_[y],""),this.argumentVarModels_.push(n);if(this.updateShape_(),this.quarkIds_=r)for(y=0;y<this.arguments_.length;y++)(r=this.quarkIds_[y])in this.quarkConnections_&&(t.Mutator.reconnect(x=this.quarkConnections_[r],this,"ARG"+y)||delete this.quarkConnections_[r]);(this.rendered=s)&&this.render()}},updateShape_:function(){for(var n=0;n<this.arguments_.length;n++){var r=this.getField("ARGNAME"+n);if(r){t.Events.disable();try{r.setValue(this.arguments_[n])}finally{t.Events.enable()}}else r=new t.FieldLabel(this.arguments_[n]),this.appendValueInput("ARG"+n).setAlign(t.ALIGN_RIGHT).appendField(r,"ARGNAME"+n).init()}for(;this.getInput("ARG"+n);)this.removeInput("ARG"+n),n++;(n=this.getInput("TOPROW"))&&(this.arguments_.length?this.getField("WITH")||(n.appendField(t.Msg.PROCEDURES_CALL_BEFORE_PARAMS,"WITH"),n.init()):this.getField("WITH")&&n.removeField("WITH"))},mutationToDom:function(){var n=t.utils.xml.createElement("mutation");n.setAttribute("name",this.getProcedureCall());for(var r=0;r<this.arguments_.length;r++){var s=t.utils.xml.createElement("arg");s.setAttribute("name",this.arguments_[r]),n.appendChild(s)}return n},domToMutation:function(n){var r=n.getAttribute("name");this.renameProcedure(this.getProcedureCall(),r),r=[];for(var y,s=[],u=0;y=n.childNodes[u];u++)"arg"==y.nodeName.toLowerCase()&&(r.push(y.getAttribute("name")),s.push(y.getAttribute("paramId")));this.setProcedureParameters_(r,s)},getVars:function(){return this.arguments_},getVarModels:function(){return this.argumentVarModels_},onchange:function(n){if(this.workspace&&!this.workspace.isFlyout&&n.recordUndo)if(n.type==t.Events.BLOCK_CREATE&&-1!=n.ids.indexOf(this.id)){var r=this.getProcedureCall();if(!(r=t.Procedures.getDefinition(r,this.workspace))||r.type==this.defType_&&JSON.stringify(r.getVars())==JSON.stringify(this.arguments_)||(r=null),!r){t.Events.setGroup(n.group),n=t.utils.xml.createElement("xml"),(r=t.utils.xml.createElement("block")).setAttribute("type",this.defType_);var s=this.getRelativeToSurfaceXY(),u=s.y+2*t.SNAP_RADIUS;r.setAttribute("x",s.x+t.SNAP_RADIUS*(this.RTL?-1:1)),r.setAttribute("y",u),s=this.mutationToDom(),r.appendChild(s),(s=t.utils.xml.createElement("field")).setAttribute("name","NAME"),(u=this.getProcedureCall())||(u=t.Procedures.findLegalName("",this),this.renameProcedure("",u)),s.appendChild(t.utils.xml.createTextNode(u)),r.appendChild(s),n.appendChild(r),t.Xml.domToWorkspace(n,this.workspace),t.Events.setGroup(!1)}}else n.type==t.Events.BLOCK_DELETE?(r=this.getProcedureCall(),(r=t.Procedures.getDefinition(r,this.workspace))||(t.Events.setGroup(n.group),this.dispose(!0),t.Events.setGroup(!1))):n.type==t.Events.CHANGE&&"disabled"==n.element&&(r=this.getProcedureCall(),(r=t.Procedures.getDefinition(r,this.workspace))&&r.id==n.blockId&&((r=t.Events.getGroup())&&console.log("Saw an existing group while responding to a definition change"),t.Events.setGroup(n.group),n.newValue?(this.previousEnabledState_=this.isEnabled(),this.setEnabled(!1)):this.setEnabled(this.previousEnabledState_),t.Events.setGroup(r)))},customContextMenu:function(n){if(this.workspace.isMovable()){var r={enabled:!0};r.text=t.Msg.PROCEDURES_HIGHLIGHT_DEF;var s=this.getProcedureCall(),u=this.workspace;r.callback=function(){var y=t.Procedures.getDefinition(s,u);y&&(u.centerOnBlock(y.id),y.select())},n.push(r)}},defType_:"procedures_defnoreturn"},t.Blocks.procedures_callreturn={init:function(){this.appendDummyInput("TOPROW").appendField("","NAME"),this.setOutput(!0),this.setStyle("procedure_blocks"),this.setHelpUrl(t.Msg.PROCEDURES_CALLRETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.quarkConnections_={},this.quarkIds_=null,this.previousEnabledState_=!0},getProcedureCall:t.Blocks.procedures_callnoreturn.getProcedureCall,renameProcedure:t.Blocks.procedures_callnoreturn.renameProcedure,setProcedureParameters_:t.Blocks.procedures_callnoreturn.setProcedureParameters_,updateShape_:t.Blocks.procedures_callnoreturn.updateShape_,mutationToDom:t.Blocks.procedures_callnoreturn.mutationToDom,domToMutation:t.Blocks.procedures_callnoreturn.domToMutation,getVars:t.Blocks.procedures_callnoreturn.getVars,getVarModels:t.Blocks.procedures_callnoreturn.getVarModels,onchange:t.Blocks.procedures_callnoreturn.onchange,customContextMenu:t.Blocks.procedures_callnoreturn.customContextMenu,defType_:"procedures_defreturn"},t.Blocks.procedures_ifreturn={init:function(){this.appendValueInput("CONDITION").setCheck("Boolean").appendField(t.Msg.CONTROLS_IF_MSG_IF),this.appendValueInput("VALUE").appendField(t.Msg.PROCEDURES_DEFRETURN_RETURN),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setStyle("procedure_blocks"),this.setTooltip(t.Msg.PROCEDURES_IFRETURN_TOOLTIP),this.setHelpUrl(t.Msg.PROCEDURES_IFRETURN_HELPURL),this.hasReturnValue_=!0},mutationToDom:function(){var n=t.utils.xml.createElement("mutation");return n.setAttribute("value",Number(this.hasReturnValue_)),n},domToMutation:function(n){this.hasReturnValue_=1==n.getAttribute("value"),this.hasReturnValue_||(this.removeInput("VALUE"),this.appendDummyInput("VALUE").appendField(t.Msg.PROCEDURES_DEFRETURN_RETURN))},onchange:function(n){if(this.workspace.isDragging&&!this.workspace.isDragging()){n=!1;var r=this;do{if(-1!=this.FUNCTION_TYPES.indexOf(r.type)){n=!0;break}r=r.getSurroundParent()}while(r);n?("procedures_defnoreturn"==r.type&&this.hasReturnValue_?(this.removeInput("VALUE"),this.appendDummyInput("VALUE").appendField(t.Msg.PROCEDURES_DEFRETURN_RETURN),this.hasReturnValue_=!1):"procedures_defreturn"!=r.type||this.hasReturnValue_||(this.removeInput("VALUE"),this.appendValueInput("VALUE").appendField(t.Msg.PROCEDURES_DEFRETURN_RETURN),this.hasReturnValue_=!0),this.setWarningText(null),this.isInFlyout||this.setEnabled(!0)):(this.setWarningText(t.Msg.PROCEDURES_IFRETURN_WARNING),this.isInFlyout||this.getInheritedDisabled()||this.setEnabled(!1))}},FUNCTION_TYPES:["procedures_defnoreturn","procedures_defreturn"]},t.Blocks.texts={},t.Constants.Text={},t.Constants.Text.HUE=160,t.defineBlocksWithJsonArray([{type:"text",message0:"%1",args0:[{type:"field_input",name:"TEXT",text:""}],output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_TEXT_HELPURL}",tooltip:"%{BKY_TEXT_TEXT_TOOLTIP}",extensions:["text_quotes","parent_tooltip_when_inline"]},{type:"text_multiline",message0:"%1 %2",args0:[{type:"field_image",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAARCAYAAADpPU2iAAAABGdBTUEAALGPC/xhBQAAAAlwSFlzAAAdhgAAHYYBXaITgQAAABh0RVh0U29mdHdhcmUAcGFpbnQubmV0IDQuMS42/U4J6AAAAP1JREFUOE+Vks0KQUEYhjmRIja4ABtZ2dm5A3t3Ia6AUm7CylYuQRaUhZSlLZJiQbFAyRnPN33y01HOW08z8873zpwzM4F3GWOCruvGIE4/rLaV+Nq1hVGMBqzhqlxgCys4wJA65xnogMHsQ5lujnYHTejBBCK2mE4abjCgMGhNxHgDFWjDSG07kdfVa2pZMf4ZyMAdWmpZMfYOsLiDMYMjlMB+K613QISRhTnITnsYg5yUd0DETmEoMlkFOeIT/A58iyK5E18BuTBfgYXfwNJv4P9/oEBerLylOnRhygmGdPpTTBZAPkde61lbQe4moWUvYUZYLfUNftIY4zwA5X2Z9AYnQrEAAAAASUVORK5CYII=",width:12,height:17,alt:"\xb6"},{type:"field_multilinetext",name:"TEXT",text:""}],output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_TEXT_HELPURL}",tooltip:"%{BKY_TEXT_TEXT_TOOLTIP}",extensions:["parent_tooltip_when_inline"]},{type:"text_join",message0:"",output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_JOIN_HELPURL}",tooltip:"%{BKY_TEXT_JOIN_TOOLTIP}",mutator:"text_join_mutator"},{type:"text_create_join_container",message0:"%{BKY_TEXT_CREATE_JOIN_TITLE_JOIN} %1 %2",args0:[{type:"input_dummy"},{type:"input_statement",name:"STACK"}],style:"text_blocks",tooltip:"%{BKY_TEXT_CREATE_JOIN_TOOLTIP}",enableContextMenu:!1},{type:"text_create_join_item",message0:"%{BKY_TEXT_CREATE_JOIN_ITEM_TITLE_ITEM}",previousStatement:null,nextStatement:null,style:"text_blocks",tooltip:"%{BKY_TEXT_CREATE_JOIN_ITEM_TOOLTIP}",enableContextMenu:!1},{type:"text_append",message0:"%{BKY_TEXT_APPEND_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_TEXT_APPEND_VARIABLE}"},{type:"input_value",name:"TEXT"}],previousStatement:null,nextStatement:null,style:"text_blocks",extensions:["text_append_tooltip"]},{type:"text_length",message0:"%{BKY_TEXT_LENGTH_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Number",style:"text_blocks",tooltip:"%{BKY_TEXT_LENGTH_TOOLTIP}",helpUrl:"%{BKY_TEXT_LENGTH_HELPURL}"},{type:"text_isEmpty",message0:"%{BKY_TEXT_ISEMPTY_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Boolean",style:"text_blocks",tooltip:"%{BKY_TEXT_ISEMPTY_TOOLTIP}",helpUrl:"%{BKY_TEXT_ISEMPTY_HELPURL}"},{type:"text_indexOf",message0:"%{BKY_TEXT_INDEXOF_TITLE}",args0:[{type:"input_value",name:"VALUE",check:"String"},{type:"field_dropdown",name:"END",options:[["%{BKY_TEXT_INDEXOF_OPERATOR_FIRST}","FIRST"],["%{BKY_TEXT_INDEXOF_OPERATOR_LAST}","LAST"]]},{type:"input_value",name:"FIND",check:"String"}],output:"Number",style:"text_blocks",helpUrl:"%{BKY_TEXT_INDEXOF_HELPURL}",inputsInline:!0,extensions:["text_indexOf_tooltip"]},{type:"text_charAt",message0:"%{BKY_TEXT_CHARAT_TITLE}",args0:[{type:"input_value",name:"VALUE",check:"String"},{type:"field_dropdown",name:"WHERE",options:[["%{BKY_TEXT_CHARAT_FROM_START}","FROM_START"],["%{BKY_TEXT_CHARAT_FROM_END}","FROM_END"],["%{BKY_TEXT_CHARAT_FIRST}","FIRST"],["%{BKY_TEXT_CHARAT_LAST}","LAST"],["%{BKY_TEXT_CHARAT_RANDOM}","RANDOM"]]}],output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_CHARAT_HELPURL}",inputsInline:!0,mutator:"text_charAt_mutator"}]),t.Blocks.text_getSubstring={init:function(){this.WHERE_OPTIONS_1=[[t.Msg.TEXT_GET_SUBSTRING_START_FROM_START,"FROM_START"],[t.Msg.TEXT_GET_SUBSTRING_START_FROM_END,"FROM_END"],[t.Msg.TEXT_GET_SUBSTRING_START_FIRST,"FIRST"]],this.WHERE_OPTIONS_2=[[t.Msg.TEXT_GET_SUBSTRING_END_FROM_START,"FROM_START"],[t.Msg.TEXT_GET_SUBSTRING_END_FROM_END,"FROM_END"],[t.Msg.TEXT_GET_SUBSTRING_END_LAST,"LAST"]],this.setHelpUrl(t.Msg.TEXT_GET_SUBSTRING_HELPURL),this.setStyle("text_blocks"),this.appendValueInput("STRING").setCheck("String").appendField(t.Msg.TEXT_GET_SUBSTRING_INPUT_IN_TEXT),this.appendDummyInput("AT1"),this.appendDummyInput("AT2"),t.Msg.TEXT_GET_SUBSTRING_TAIL&&this.appendDummyInput("TAIL").appendField(t.Msg.TEXT_GET_SUBSTRING_TAIL),this.setInputsInline(!0),this.setOutput(!0,"String"),this.updateAt_(1,!0),this.updateAt_(2,!0),this.setTooltip(t.Msg.TEXT_GET_SUBSTRING_TOOLTIP)},mutationToDom:function(){var n=t.utils.xml.createElement("mutation"),r=this.getInput("AT1").type==t.INPUT_VALUE;return n.setAttribute("at1",r),r=this.getInput("AT2").type==t.INPUT_VALUE,n.setAttribute("at2",r),n},domToMutation:function(n){var r="true"==n.getAttribute("at1");n="true"==n.getAttribute("at2"),this.updateAt_(1,r),this.updateAt_(2,n)},updateAt_:function(n,r){this.removeInput("AT"+n),this.removeInput("ORDINAL"+n,!0),r?(this.appendValueInput("AT"+n).setCheck("Number"),t.Msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL"+n).appendField(t.Msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT"+n),2==n&&t.Msg.TEXT_GET_SUBSTRING_TAIL&&(this.removeInput("TAIL",!0),this.appendDummyInput("TAIL").appendField(t.Msg.TEXT_GET_SUBSTRING_TAIL));var s=new t.FieldDropdown(this["WHERE_OPTIONS_"+n],function(u){var y="FROM_START"==u||"FROM_END"==u;if(y!=r){var x=this.getSourceBlock();return x.updateAt_(n,y),x.setFieldValue(u,"WHERE"+n),null}});this.getInput("AT"+n).appendField(s,"WHERE"+n),1==n&&(this.moveInputBefore("AT1","AT2"),this.getInput("ORDINAL1")&&this.moveInputBefore("ORDINAL1","AT2"))}},t.Blocks.text_changeCase={init:function(){var n=[[t.Msg.TEXT_CHANGECASE_OPERATOR_UPPERCASE,"UPPERCASE"],[t.Msg.TEXT_CHANGECASE_OPERATOR_LOWERCASE,"LOWERCASE"],[t.Msg.TEXT_CHANGECASE_OPERATOR_TITLECASE,"TITLECASE"]];this.setHelpUrl(t.Msg.TEXT_CHANGECASE_HELPURL),this.setStyle("text_blocks"),this.appendValueInput("TEXT").setCheck("String").appendField(new t.FieldDropdown(n),"CASE"),this.setOutput(!0,"String"),this.setTooltip(t.Msg.TEXT_CHANGECASE_TOOLTIP)}},t.Blocks.text_trim={init:function(){var n=[[t.Msg.TEXT_TRIM_OPERATOR_BOTH,"BOTH"],[t.Msg.TEXT_TRIM_OPERATOR_LEFT,"LEFT"],[t.Msg.TEXT_TRIM_OPERATOR_RIGHT,"RIGHT"]];this.setHelpUrl(t.Msg.TEXT_TRIM_HELPURL),this.setStyle("text_blocks"),this.appendValueInput("TEXT").setCheck("String").appendField(new t.FieldDropdown(n),"MODE"),this.setOutput(!0,"String"),this.setTooltip(t.Msg.TEXT_TRIM_TOOLTIP)}},t.Blocks.text_print={init:function(){this.jsonInit({message0:t.Msg.TEXT_PRINT_TITLE,args0:[{type:"input_value",name:"TEXT"}],previousStatement:null,nextStatement:null,style:"text_blocks",tooltip:t.Msg.TEXT_PRINT_TOOLTIP,helpUrl:t.Msg.TEXT_PRINT_HELPURL})}},t.Blocks.text_prompt_ext={init:function(){var n=[[t.Msg.TEXT_PROMPT_TYPE_TEXT,"TEXT"],[t.Msg.TEXT_PROMPT_TYPE_NUMBER,"NUMBER"]];this.setHelpUrl(t.Msg.TEXT_PROMPT_HELPURL),this.setStyle("text_blocks");var r=this;n=new t.FieldDropdown(n,function(s){r.updateType_(s)}),this.appendValueInput("TEXT").appendField(n,"TYPE"),this.setOutput(!0,"String"),this.setTooltip(function(){return"TEXT"==r.getFieldValue("TYPE")?t.Msg.TEXT_PROMPT_TOOLTIP_TEXT:t.Msg.TEXT_PROMPT_TOOLTIP_NUMBER})},updateType_:function(n){this.outputConnection.setCheck("NUMBER"==n?"Number":"String")},mutationToDom:function(){var n=t.utils.xml.createElement("mutation");return n.setAttribute("type",this.getFieldValue("TYPE")),n},domToMutation:function(n){this.updateType_(n.getAttribute("type"))}},t.Blocks.text_prompt={init:function(){this.mixin(t.Constants.Text.QUOTE_IMAGE_MIXIN);var n=[[t.Msg.TEXT_PROMPT_TYPE_TEXT,"TEXT"],[t.Msg.TEXT_PROMPT_TYPE_NUMBER,"NUMBER"]],r=this;this.setHelpUrl(t.Msg.TEXT_PROMPT_HELPURL),this.setStyle("text_blocks"),n=new t.FieldDropdown(n,function(s){r.updateType_(s)}),this.appendDummyInput().appendField(n,"TYPE").appendField(this.newQuote_(!0)).appendField(new t.FieldTextInput(""),"TEXT").appendField(this.newQuote_(!1)),this.setOutput(!0,"String"),this.setTooltip(function(){return"TEXT"==r.getFieldValue("TYPE")?t.Msg.TEXT_PROMPT_TOOLTIP_TEXT:t.Msg.TEXT_PROMPT_TOOLTIP_NUMBER})},updateType_:t.Blocks.text_prompt_ext.updateType_,mutationToDom:t.Blocks.text_prompt_ext.mutationToDom,domToMutation:t.Blocks.text_prompt_ext.domToMutation},t.Blocks.text_count={init:function(){this.jsonInit({message0:t.Msg.TEXT_COUNT_MESSAGE0,args0:[{type:"input_value",name:"SUB",check:"String"},{type:"input_value",name:"TEXT",check:"String"}],output:"Number",inputsInline:!0,style:"text_blocks",tooltip:t.Msg.TEXT_COUNT_TOOLTIP,helpUrl:t.Msg.TEXT_COUNT_HELPURL})}},t.Blocks.text_replace={init:function(){this.jsonInit({message0:t.Msg.TEXT_REPLACE_MESSAGE0,args0:[{type:"input_value",name:"FROM",check:"String"},{type:"input_value",name:"TO",check:"String"},{type:"input_value",name:"TEXT",check:"String"}],output:"String",inputsInline:!0,style:"text_blocks",tooltip:t.Msg.TEXT_REPLACE_TOOLTIP,helpUrl:t.Msg.TEXT_REPLACE_HELPURL})}},t.Blocks.text_reverse={init:function(){this.jsonInit({message0:t.Msg.TEXT_REVERSE_MESSAGE0,args0:[{type:"input_value",name:"TEXT",check:"String"}],output:"String",inputsInline:!0,style:"text_blocks",tooltip:t.Msg.TEXT_REVERSE_TOOLTIP,helpUrl:t.Msg.TEXT_REVERSE_HELPURL})}},t.Constants.Text.QUOTE_IMAGE_MIXIN={QUOTE_IMAGE_LEFT_DATAURI:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAKCAQAAAAqJXdxAAAAn0lEQVQI1z3OMa5BURSF4f/cQhAKjUQhuQmFNwGJEUi0RKN5rU7FHKhpjEH3TEMtkdBSCY1EIv8r7nFX9e29V7EBAOvu7RPjwmWGH/VuF8CyN9/OAdvqIXYLvtRaNjx9mMTDyo+NjAN1HNcl9ZQ5oQMM3dgDUqDo1l8DzvwmtZN7mnD+PkmLa+4mhrxVA9fRowBWmVBhFy5gYEjKMfz9AylsaRRgGzvZAAAAAElFTkSuQmCC",QUOTE_IMAGE_RIGHT_DATAURI:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAKCAQAAAAqJXdxAAAAqUlEQVQI1z3KvUpCcRiA8ef9E4JNHhI0aFEacm1o0BsI0Slx8wa8gLauoDnoBhq7DcfWhggONDmJJgqCPA7neJ7p934EOOKOnM8Q7PDElo/4x4lFb2DmuUjcUzS3URnGib9qaPNbuXvBO3sGPHJDRG6fGVdMSeWDP2q99FQdFrz26Gu5Tq7dFMzUvbXy8KXeAj57cOklgA+u1B5AoslLtGIHQMaCVnwDnADZIFIrXsoXrgAAAABJRU5ErkJggg==",QUOTE_IMAGE_WIDTH:12,QUOTE_IMAGE_HEIGHT:12,quoteField_:function(n){for(var s,r=0;s=this.inputList[r];r++)for(var y,u=0;y=s.fieldRow[u];u++)if(n==y.name)return s.insertFieldAt(u,this.newQuote_(!0)),void s.insertFieldAt(u+2,this.newQuote_(!1));console.warn('field named "'+n+'" not found in '+this.toDevString())},newQuote_:function(n){return new t.FieldImage((n=this.RTL?!n:n)?this.QUOTE_IMAGE_LEFT_DATAURI:this.QUOTE_IMAGE_RIGHT_DATAURI,this.QUOTE_IMAGE_WIDTH,this.QUOTE_IMAGE_HEIGHT,n?"\u201c":"\u201d")}},t.Constants.Text.TEXT_QUOTES_EXTENSION=function(){this.mixin(t.Constants.Text.QUOTE_IMAGE_MIXIN),this.quoteField_("TEXT")},t.Constants.Text.TEXT_JOIN_MUTATOR_MIXIN={mutationToDom:function(){var n=t.utils.xml.createElement("mutation");return n.setAttribute("items",this.itemCount_),n},domToMutation:function(n){this.itemCount_=parseInt(n.getAttribute("items"),10),this.updateShape_()},decompose:function(n){var r=n.newBlock("text_create_join_container");r.initSvg();for(var s=r.getInput("STACK").connection,u=0;u<this.itemCount_;u++){var y=n.newBlock("text_create_join_item");y.initSvg(),s.connect(y.previousConnection),s=y.nextConnection}return r},compose:function(n){var r=n.getInputTargetBlock("STACK");for(n=[];r&&!r.isInsertionMarker();)n.push(r.valueConnection_),r=r.nextConnection&&r.nextConnection.targetBlock();for(r=0;r<this.itemCount_;r++){var s=this.getInput("ADD"+r).connection.targetConnection;s&&-1==n.indexOf(s)&&s.disconnect()}for(this.itemCount_=n.length,this.updateShape_(),r=0;r<this.itemCount_;r++)t.Mutator.reconnect(n[r],this,"ADD"+r)},saveConnections:function(n){n=n.getInputTargetBlock("STACK");for(var r=0;n;){var s=this.getInput("ADD"+r);n.valueConnection_=s&&s.connection.targetConnection,r++,n=n.nextConnection&&n.nextConnection.targetBlock()}},updateShape_:function(){this.itemCount_&&this.getInput("EMPTY")?this.removeInput("EMPTY"):this.itemCount_||this.getInput("EMPTY")||this.appendDummyInput("EMPTY").appendField(this.newQuote_(!0)).appendField(this.newQuote_(!1));for(var n=0;n<this.itemCount_;n++)if(!this.getInput("ADD"+n)){var r=this.appendValueInput("ADD"+n).setAlign(t.ALIGN_RIGHT);0==n&&r.appendField(t.Msg.TEXT_JOIN_TITLE_CREATEWITH)}for(;this.getInput("ADD"+n);)this.removeInput("ADD"+n),n++}},t.Constants.Text.TEXT_JOIN_EXTENSION=function(){this.mixin(t.Constants.Text.QUOTE_IMAGE_MIXIN),this.itemCount_=2,this.updateShape_(),this.setMutator(new t.Mutator(["text_create_join_item"]))},t.Extensions.register("text_append_tooltip",t.Extensions.buildTooltipWithFieldText("%{BKY_TEXT_APPEND_TOOLTIP}","VAR")),t.Constants.Text.TEXT_INDEXOF_TOOLTIP_EXTENSION=function(){var n=this;this.setTooltip(function(){return t.Msg.TEXT_INDEXOF_TOOLTIP.replace("%1",n.workspace.options.oneBasedIndex?"0":"-1")})},t.Constants.Text.TEXT_CHARAT_MUTATOR_MIXIN={mutationToDom:function(){var n=t.utils.xml.createElement("mutation");return n.setAttribute("at",!!this.isAt_),n},domToMutation:function(n){n="false"!=n.getAttribute("at"),this.updateAt_(n)},updateAt_:function(n){this.removeInput("AT",!0),this.removeInput("ORDINAL",!0),n&&(this.appendValueInput("AT").setCheck("Number"),t.Msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL").appendField(t.Msg.ORDINAL_NUMBER_SUFFIX)),t.Msg.TEXT_CHARAT_TAIL&&(this.removeInput("TAIL",!0),this.appendDummyInput("TAIL").appendField(t.Msg.TEXT_CHARAT_TAIL)),this.isAt_=n}},t.Constants.Text.TEXT_CHARAT_EXTENSION=function(){this.getField("WHERE").setValidator(function(r){(r="FROM_START"==r||"FROM_END"==r)!=this.isAt_&&this.getSourceBlock().updateAt_(r)}),this.updateAt_(!0);var n=this;this.setTooltip(function(){var r=n.getFieldValue("WHERE"),s=t.Msg.TEXT_CHARAT_TOOLTIP;return("FROM_START"==r||"FROM_END"==r)&&(r="FROM_START"==r?t.Msg.LISTS_INDEX_FROM_START_TOOLTIP:t.Msg.LISTS_INDEX_FROM_END_TOOLTIP)&&(s+="  "+r.replace("%1",n.workspace.options.oneBasedIndex?"#1":"#0")),s})},t.Extensions.register("text_indexOf_tooltip",t.Constants.Text.TEXT_INDEXOF_TOOLTIP_EXTENSION),t.Extensions.register("text_quotes",t.Constants.Text.TEXT_QUOTES_EXTENSION),t.Extensions.registerMutator("text_join_mutator",t.Constants.Text.TEXT_JOIN_MUTATOR_MIXIN,t.Constants.Text.TEXT_JOIN_EXTENSION),t.Extensions.registerMutator("text_charAt_mutator",t.Constants.Text.TEXT_CHARAT_MUTATOR_MIXIN,t.Constants.Text.TEXT_CHARAT_EXTENSION),t.Blocks.variables={},t.Constants.Variables={},t.Constants.Variables.HUE=330,t.defineBlocksWithJsonArray([{type:"variables_get",message0:"%1",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"}],output:null,style:"variable_blocks",helpUrl:"%{BKY_VARIABLES_GET_HELPURL}",tooltip:"%{BKY_VARIABLES_GET_TOOLTIP}",extensions:["contextMenu_variableSetterGetter"]},{type:"variables_set",message0:"%{BKY_VARIABLES_SET}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"},{type:"input_value",name:"VALUE"}],previousStatement:null,nextStatement:null,style:"variable_blocks",tooltip:"%{BKY_VARIABLES_SET_TOOLTIP}",helpUrl:"%{BKY_VARIABLES_SET_HELPURL}",extensions:["contextMenu_variableSetterGetter"]}]),t.Constants.Variables.CUSTOM_CONTEXT_MENU_VARIABLE_GETTER_SETTER_MIXIN={customContextMenu:function(n){if(this.isInFlyout)("variables_get"==this.type||"variables_get_reporter"==this.type)&&(r={text:t.Msg.RENAME_VARIABLE,enabled:!0,callback:t.Constants.Variables.RENAME_OPTION_CALLBACK_FACTORY(this)},y=this.getField("VAR").getText(),u={text:t.Msg.DELETE_VARIABLE.replace("%1",y),enabled:!0,callback:t.Constants.Variables.DELETE_OPTION_CALLBACK_FACTORY(this)},n.unshift(r),n.unshift(u));else{if("variables_get"==this.type)var r="variables_set",s=t.Msg.VARIABLES_GET_CREATE_SET;else r="variables_get",s=t.Msg.VARIABLES_SET_CREATE_GET;var u={enabled:0<this.workspace.remainingCapacity()},y=this.getField("VAR").getText();u.text=s.replace("%1",y),(s=t.utils.xml.createElement("field")).setAttribute("name","VAR"),s.appendChild(t.utils.xml.createTextNode(y)),(y=t.utils.xml.createElement("block")).setAttribute("type",r),y.appendChild(s),u.callback=t.ContextMenu.callbackFactory(this,y),n.push(u)}}},t.Constants.Variables.RENAME_OPTION_CALLBACK_FACTORY=function(n){return function(){var r=n.workspace,s=n.getField("VAR").getVariable();t.Variables.renameVariable(r,s)}},t.Constants.Variables.DELETE_OPTION_CALLBACK_FACTORY=function(n){return function(){var r=n.workspace,s=n.getField("VAR").getVariable();r.deleteVariableById(s.getId()),r.refreshToolboxSelection()}},t.Extensions.registerMixin("contextMenu_variableSetterGetter",t.Constants.Variables.CUSTOM_CONTEXT_MENU_VARIABLE_GETTER_SETTER_MIXIN),t.Constants.VariablesDynamic={},t.Constants.VariablesDynamic.HUE=310,t.defineBlocksWithJsonArray([{type:"variables_get_dynamic",message0:"%1",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"}],output:null,style:"variable_dynamic_blocks",helpUrl:"%{BKY_VARIABLES_GET_HELPURL}",tooltip:"%{BKY_VARIABLES_GET_TOOLTIP}",extensions:["contextMenu_variableDynamicSetterGetter"]},{type:"variables_set_dynamic",message0:"%{BKY_VARIABLES_SET}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"},{type:"input_value",name:"VALUE"}],previousStatement:null,nextStatement:null,style:"variable_dynamic_blocks",tooltip:"%{BKY_VARIABLES_SET_TOOLTIP}",helpUrl:"%{BKY_VARIABLES_SET_HELPURL}",extensions:["contextMenu_variableDynamicSetterGetter"]}]),t.Constants.VariablesDynamic.CUSTOM_CONTEXT_MENU_VARIABLE_GETTER_SETTER_MIXIN={customContextMenu:function(n){if(this.isInFlyout)("variables_get_dynamic"==this.type||"variables_get_reporter_dynamic"==this.type)&&(r={text:t.Msg.RENAME_VARIABLE,enabled:!0,callback:t.Constants.Variables.RENAME_OPTION_CALLBACK_FACTORY(this)},x=this.getField("VAR").getText(),y={text:t.Msg.DELETE_VARIABLE.replace("%1",x),enabled:!0,callback:t.Constants.Variables.DELETE_OPTION_CALLBACK_FACTORY(this)},n.unshift(r),n.unshift(y));else{var r=this.getFieldValue("VAR"),s=this.workspace.getVariableById(r).type;if("variables_get_dynamic"==this.type){r="variables_set_dynamic";var u=t.Msg.VARIABLES_GET_CREATE_SET}else r="variables_get_dynamic",u=t.Msg.VARIABLES_SET_CREATE_GET;var y={enabled:0<this.workspace.remainingCapacity()},x=this.getField("VAR").getText();y.text=u.replace("%1",x),(u=t.utils.xml.createElement("field")).setAttribute("name","VAR"),u.setAttribute("variabletype",s),u.appendChild(t.utils.xml.createTextNode(x)),(x=t.utils.xml.createElement("block")).setAttribute("type",r),x.appendChild(u),y.callback=t.ContextMenu.callbackFactory(this,x),n.push(y)}},onchange:function(n){n=this.getFieldValue("VAR"),n=t.Variables.getVariable(this.workspace,n),"variables_get_dynamic"==this.type?this.outputConnection.setCheck(n.type):this.getInput("VALUE").connection.setCheck(n.type)}},t.Constants.VariablesDynamic.RENAME_OPTION_CALLBACK_FACTORY=function(n){return function(){var r=n.workspace,s=n.getField("VAR").getVariable();t.Variables.renameVariable(r,s)}},t.Constants.VariablesDynamic.DELETE_OPTION_CALLBACK_FACTORY=function(n){return function(){var r=n.workspace,s=n.getField("VAR").getVariable();r.deleteVariableById(s.getId()),r.refreshToolboxSelection()}},t.Extensions.registerMixin("contextMenu_variableDynamicSetterGetter",t.Constants.VariablesDynamic.CUSTOM_CONTEXT_MENU_VARIABLE_GETTER_SETTER_MIXIN),t.Blocks}.apply($,_))&&(U.exports=e)},25552:function(U,$,m){var _,e;_=[m(68210),m(63266),m(18783),m(30069)],void 0!==(e=function(t,n,r,s){"use strict";return t.setLocale(n),t.Blocks=t.Blocks||{},Object.keys(r).forEach(function(u){t.Blocks[u]=r[u]}),t.JavaScript=s,t}.apply($,_))&&(U.exports=e)},68210:function(U,$,m){var _,e;_=[m(86931)],void 0!==(e=function(t){"use strict";return t.setLocale=function(n){t.Msg=t.Msg||{},Object.keys(n).forEach(function(r){t.Msg[r]=n[r]})},t}.apply($,_))&&(U.exports=e)},76279:function(U,$,m){var _,e;_=[m(25552)],void 0!==(e=function(t){"use strict";return t}.apply($,_))&&(U.exports=e)},30069:function(U,$,m){var _,e;_=[m(68210),m(69957)],void 0!==(e=function(t,n){"use strict";return t.JavaScript=n,n}.apply($,_))&&(U.exports=e)},69957:function(U,$,m){var _,e;_=[m(81069)],void 0!==(e=function(t){"use strict";return t.JavaScript=new t.Generator("JavaScript"),t.JavaScript.addReservedWords("break,case,catch,class,const,continue,debugger,default,delete,do,else,export,extends,finally,for,function,if,import,in,instanceof,new,return,super,switch,this,throw,try,typeof,var,void,while,with,yield,enum,implements,interface,let,package,private,protected,public,static,await,null,true,false,arguments,"+Object.getOwnPropertyNames(t.utils.global).join(",")),t.JavaScript.ORDER_ATOMIC=0,t.JavaScript.ORDER_NEW=1.1,t.JavaScript.ORDER_MEMBER=1.2,t.JavaScript.ORDER_FUNCTION_CALL=2,t.JavaScript.ORDER_INCREMENT=3,t.JavaScript.ORDER_DECREMENT=3,t.JavaScript.ORDER_BITWISE_NOT=4.1,t.JavaScript.ORDER_UNARY_PLUS=4.2,t.JavaScript.ORDER_UNARY_NEGATION=4.3,t.JavaScript.ORDER_LOGICAL_NOT=4.4,t.JavaScript.ORDER_TYPEOF=4.5,t.JavaScript.ORDER_VOID=4.6,t.JavaScript.ORDER_DELETE=4.7,t.JavaScript.ORDER_AWAIT=4.8,t.JavaScript.ORDER_EXPONENTIATION=5,t.JavaScript.ORDER_MULTIPLICATION=5.1,t.JavaScript.ORDER_DIVISION=5.2,t.JavaScript.ORDER_MODULUS=5.3,t.JavaScript.ORDER_SUBTRACTION=6.1,t.JavaScript.ORDER_ADDITION=6.2,t.JavaScript.ORDER_BITWISE_SHIFT=7,t.JavaScript.ORDER_RELATIONAL=8,t.JavaScript.ORDER_IN=8,t.JavaScript.ORDER_INSTANCEOF=8,t.JavaScript.ORDER_EQUALITY=9,t.JavaScript.ORDER_BITWISE_AND=10,t.JavaScript.ORDER_BITWISE_XOR=11,t.JavaScript.ORDER_BITWISE_OR=12,t.JavaScript.ORDER_LOGICAL_AND=13,t.JavaScript.ORDER_LOGICAL_OR=14,t.JavaScript.ORDER_CONDITIONAL=15,t.JavaScript.ORDER_ASSIGNMENT=16,t.JavaScript.ORDER_YIELD=17,t.JavaScript.ORDER_COMMA=18,t.JavaScript.ORDER_NONE=99,t.JavaScript.ORDER_OVERRIDES=[[t.JavaScript.ORDER_FUNCTION_CALL,t.JavaScript.ORDER_MEMBER],[t.JavaScript.ORDER_FUNCTION_CALL,t.JavaScript.ORDER_FUNCTION_CALL],[t.JavaScript.ORDER_MEMBER,t.JavaScript.ORDER_MEMBER],[t.JavaScript.ORDER_MEMBER,t.JavaScript.ORDER_FUNCTION_CALL],[t.JavaScript.ORDER_LOGICAL_NOT,t.JavaScript.ORDER_LOGICAL_NOT],[t.JavaScript.ORDER_MULTIPLICATION,t.JavaScript.ORDER_MULTIPLICATION],[t.JavaScript.ORDER_ADDITION,t.JavaScript.ORDER_ADDITION],[t.JavaScript.ORDER_LOGICAL_AND,t.JavaScript.ORDER_LOGICAL_AND],[t.JavaScript.ORDER_LOGICAL_OR,t.JavaScript.ORDER_LOGICAL_OR]],t.JavaScript.isInitialized=!1,t.JavaScript.init=function(n){Object.getPrototypeOf(this).init.call(this),this.nameDB_?this.nameDB_.reset():this.nameDB_=new t.Names(this.RESERVED_WORDS_),this.nameDB_.setVariableMap(n.getVariableMap()),this.nameDB_.populateVariables(n),this.nameDB_.populateProcedures(n);for(var r=[],s=t.Variables.allDeveloperVariables(n),u=0;u<s.length;u++)r.push(this.nameDB_.getName(s[u],t.Names.DEVELOPER_VARIABLE_TYPE));for(n=t.Variables.allUsedVarModels(n),u=0;u<n.length;u++)r.push(this.nameDB_.getName(n[u].getId(),t.VARIABLE_CATEGORY_NAME));r.length&&(this.definitions_.variables="var "+r.join(", ")+";"),this.isInitialized=!0},t.JavaScript.finish=function(n){var r=t.utils.object.values(this.definitions_);return n=Object.getPrototypeOf(this).finish.call(this,n),this.isInitialized=!1,this.nameDB_.reset(),r.join("\n\n")+"\n\n\n"+n},t.JavaScript.scrubNakedValue=function(n){return n+";\n"},t.JavaScript.quote_=function(n){return"'"+(n=n.replace(/\\/g,"\\\\").replace(/\n/g,"\\\n").replace(/'/g,"\\'"))+"'"},t.JavaScript.multiline_quote_=function(n){return n.split(/\n/g).map(this.quote_).join(" + '\\n' +\n")},t.JavaScript.scrub_=function(n,r,s){var u="";if(!n.outputConnection||!n.outputConnection.targetConnection){var y=n.getCommentText();y&&(y=t.utils.string.wrap(y,this.COMMENT_WRAP-3),u+=this.prefixLines(y+"\n","// "));for(var x=0;x<n.inputList.length;x++)n.inputList[x].type==t.inputTypes.VALUE&&(y=n.inputList[x].connection.targetBlock())&&(y=this.allNestedComments(y))&&(u+=this.prefixLines(y,"// "))}return n=n.nextConnection&&n.nextConnection.targetBlock(),u+r+(s?"":this.blockToCode(n))},t.JavaScript.getAdjusted=function(n,r,s,u,y){s=s||0,y=y||this.ORDER_NONE,n.workspace.options.oneBasedIndex&&s--;var x=n.workspace.options.oneBasedIndex?"1":"0";if(n=0<s?this.valueToCode(n,r,this.ORDER_ADDITION)||x:0>s?this.valueToCode(n,r,this.ORDER_SUBTRACTION)||x:u?this.valueToCode(n,r,this.ORDER_UNARY_NEGATION)||x:this.valueToCode(n,r,y)||x,t.isNumber(n))n=Number(n)+s,u&&(n=-n);else{if(0<s){n=n+" + "+s;var B=this.ORDER_ADDITION}else 0>s&&(n=n+" - "+-s,B=this.ORDER_SUBTRACTION);u&&(n=s?"-("+n+")":"-"+n,B=this.ORDER_UNARY_NEGATION),B=Math.floor(B),y=Math.floor(y),B&&y>=B&&(n="("+n+")")}return n},t.JavaScript.colour={},t.JavaScript.colour_picker=function(n){return[t.JavaScript.quote_(n.getFieldValue("COLOUR")),t.JavaScript.ORDER_ATOMIC]},t.JavaScript.colour_random=function(n){return[t.JavaScript.provideFunction_("colourRandom",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"() {","  var num = Math.floor(Math.random() * Math.pow(2, 24));","  return '#' + ('00000' + num.toString(16)).substr(-6);","}"])+"()",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.colour_rgb=function(n){var r=t.JavaScript.valueToCode(n,"RED",t.JavaScript.ORDER_NONE)||0,s=t.JavaScript.valueToCode(n,"GREEN",t.JavaScript.ORDER_NONE)||0;return n=t.JavaScript.valueToCode(n,"BLUE",t.JavaScript.ORDER_NONE)||0,[t.JavaScript.provideFunction_("colourRgb",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(r, g, b) {","  r = Math.max(Math.min(Number(r), 100), 0) * 2.55;","  g = Math.max(Math.min(Number(g), 100), 0) * 2.55;","  b = Math.max(Math.min(Number(b), 100), 0) * 2.55;","  r = ('0' + (Math.round(r) || 0).toString(16)).slice(-2);","  g = ('0' + (Math.round(g) || 0).toString(16)).slice(-2);","  b = ('0' + (Math.round(b) || 0).toString(16)).slice(-2);","  return '#' + r + g + b;","}"])+"("+r+", "+s+", "+n+")",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.colour_blend=function(n){var r=t.JavaScript.valueToCode(n,"COLOUR1",t.JavaScript.ORDER_NONE)||"'#000000'",s=t.JavaScript.valueToCode(n,"COLOUR2",t.JavaScript.ORDER_NONE)||"'#000000'";return n=t.JavaScript.valueToCode(n,"RATIO",t.JavaScript.ORDER_NONE)||.5,[t.JavaScript.provideFunction_("colourBlend",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(c1, c2, ratio) {","  ratio = Math.max(Math.min(Number(ratio), 1), 0);","  var r1 = parseInt(c1.substring(1, 3), 16);","  var g1 = parseInt(c1.substring(3, 5), 16);","  var b1 = parseInt(c1.substring(5, 7), 16);","  var r2 = parseInt(c2.substring(1, 3), 16);","  var g2 = parseInt(c2.substring(3, 5), 16);","  var b2 = parseInt(c2.substring(5, 7), 16);","  var r = Math.round(r1 * (1 - ratio) + r2 * ratio);","  var g = Math.round(g1 * (1 - ratio) + g2 * ratio);","  var b = Math.round(b1 * (1 - ratio) + b2 * ratio);","  r = ('0' + (r || 0).toString(16)).slice(-2);","  g = ('0' + (g || 0).toString(16)).slice(-2);","  b = ('0' + (b || 0).toString(16)).slice(-2);","  return '#' + r + g + b;","}"])+"("+r+", "+s+", "+n+")",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.lists={},t.JavaScript.lists_create_empty=function(n){return["[]",t.JavaScript.ORDER_ATOMIC]},t.JavaScript.lists_create_with=function(n){for(var r=Array(n.itemCount_),s=0;s<n.itemCount_;s++)r[s]=t.JavaScript.valueToCode(n,"ADD"+s,t.JavaScript.ORDER_NONE)||"null";return["["+r.join(", ")+"]",t.JavaScript.ORDER_ATOMIC]},t.JavaScript.lists_repeat=function(n){return[t.JavaScript.provideFunction_("listsRepeat",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(value, n) {","  var array = [];","  for (var i = 0; i < n; i++) {","    array[i] = value;","  }","  return array;","}"])+"("+(t.JavaScript.valueToCode(n,"ITEM",t.JavaScript.ORDER_NONE)||"null")+", "+(n=t.JavaScript.valueToCode(n,"NUM",t.JavaScript.ORDER_NONE)||"0")+")",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.lists_length=function(n){return[(t.JavaScript.valueToCode(n,"VALUE",t.JavaScript.ORDER_MEMBER)||"[]")+".length",t.JavaScript.ORDER_MEMBER]},t.JavaScript.lists_isEmpty=function(n){return["!"+(t.JavaScript.valueToCode(n,"VALUE",t.JavaScript.ORDER_MEMBER)||"[]")+".length",t.JavaScript.ORDER_LOGICAL_NOT]},t.JavaScript.lists_indexOf=function(n){var r="FIRST"==n.getFieldValue("END")?"indexOf":"lastIndexOf",s=t.JavaScript.valueToCode(n,"FIND",t.JavaScript.ORDER_NONE)||"''";return r=(t.JavaScript.valueToCode(n,"VALUE",t.JavaScript.ORDER_MEMBER)||"[]")+"."+r+"("+s+")",n.workspace.options.oneBasedIndex?[r+" + 1",t.JavaScript.ORDER_ADDITION]:[r,t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.lists_getIndex=function(n){var r=n.getFieldValue("MODE")||"GET",s=n.getFieldValue("WHERE")||"FROM_START",u=t.JavaScript.valueToCode(n,"VALUE","RANDOM"==s?t.JavaScript.ORDER_NONE:t.JavaScript.ORDER_MEMBER)||"[]";switch(s){case"FIRST":if("GET"==r)return[u+"[0]",t.JavaScript.ORDER_MEMBER];if("GET_REMOVE"==r)return[u+".shift()",t.JavaScript.ORDER_MEMBER];if("REMOVE"==r)return u+".shift();\n";break;case"LAST":if("GET"==r)return[u+".slice(-1)[0]",t.JavaScript.ORDER_MEMBER];if("GET_REMOVE"==r)return[u+".pop()",t.JavaScript.ORDER_MEMBER];if("REMOVE"==r)return u+".pop();\n";break;case"FROM_START":if(n=t.JavaScript.getAdjusted(n,"AT"),"GET"==r)return[u+"["+n+"]",t.JavaScript.ORDER_MEMBER];if("GET_REMOVE"==r)return[u+".splice("+n+", 1)[0]",t.JavaScript.ORDER_FUNCTION_CALL];if("REMOVE"==r)return u+".splice("+n+", 1);\n";break;case"FROM_END":if(n=t.JavaScript.getAdjusted(n,"AT",1,!0),"GET"==r)return[u+".slice("+n+")[0]",t.JavaScript.ORDER_FUNCTION_CALL];if("GET_REMOVE"==r)return[u+".splice("+n+", 1)[0]",t.JavaScript.ORDER_FUNCTION_CALL];if("REMOVE"==r)return u+".splice("+n+", 1);";break;case"RANDOM":if(u=t.JavaScript.provideFunction_("listsGetRandomItem",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(list, remove) {","  var x = Math.floor(Math.random() * list.length);","  if (remove) {","    return list.splice(x, 1)[0];","  } else {","    return list[x];","  }","}"])+"("+u+", "+("GET"!=r)+")","GET"==r||"GET_REMOVE"==r)return[u,t.JavaScript.ORDER_FUNCTION_CALL];if("REMOVE"==r)return u+";\n"}throw Error("Unhandled combination (lists_getIndex).")},t.JavaScript.lists_setIndex=function(n){function r(){if(s.match(/^\w+$/))return"";var B=t.JavaScript.nameDB_.getDistinctName("tmpList",t.VARIABLE_CATEGORY_NAME),Q="var "+B+" = "+s+";\n";return s=B,Q}var s=t.JavaScript.valueToCode(n,"LIST",t.JavaScript.ORDER_MEMBER)||"[]",u=n.getFieldValue("MODE")||"GET",y=n.getFieldValue("WHERE")||"FROM_START",x=t.JavaScript.valueToCode(n,"TO",t.JavaScript.ORDER_ASSIGNMENT)||"null";switch(y){case"FIRST":if("SET"==u)return s+"[0] = "+x+";\n";if("INSERT"==u)return s+".unshift("+x+");\n";break;case"LAST":if("SET"==u)return(n=r())+(s+"[")+s+".length - 1] = "+x+";\n";if("INSERT"==u)return s+".push("+x+");\n";break;case"FROM_START":if(y=t.JavaScript.getAdjusted(n,"AT"),"SET"==u)return s+"["+y+"] = "+x+";\n";if("INSERT"==u)return s+".splice("+y+", 0, "+x+");\n";break;case"FROM_END":if(y=t.JavaScript.getAdjusted(n,"AT",1,!1,t.JavaScript.ORDER_SUBTRACTION),n=r(),"SET"==u)return n+(s+"[")+s+".length - "+y+"] = "+x+";\n";if("INSERT"==u)return n+(s+".splice(")+s+".length - "+y+", 0, "+x+");\n";break;case"RANDOM":if(n=r(),n+="var "+(y=t.JavaScript.nameDB_.getDistinctName("tmpX",t.VARIABLE_CATEGORY_NAME))+" = Math.floor(Math.random() * "+s+".length);\n","SET"==u)return n+(s+"[")+y+"] = "+x+";\n";if("INSERT"==u)return n+(s+".splice(")+y+", 0, "+x+");\n"}throw Error("Unhandled combination (lists_setIndex).")},t.JavaScript.lists.getIndex_=function(n,r,s){return"FIRST"==r?"0":"FROM_END"==r?n+".length - 1 - "+s:"LAST"==r?n+".length - 1":s},t.JavaScript.lists_getSublist=function(n){var r=t.JavaScript.valueToCode(n,"LIST",t.JavaScript.ORDER_MEMBER)||"[]",s=n.getFieldValue("WHERE1"),u=n.getFieldValue("WHERE2");if("FIRST"==s&&"LAST"==u)r+=".slice(0)";else if(r.match(/^\w+$/)||"FROM_END"!=s&&"FROM_START"==u){switch(s){case"FROM_START":var y=t.JavaScript.getAdjusted(n,"AT1");break;case"FROM_END":y=r+".length - "+(y=t.JavaScript.getAdjusted(n,"AT1",1,!1,t.JavaScript.ORDER_SUBTRACTION));break;case"FIRST":y="0";break;default:throw Error("Unhandled option (lists_getSublist).")}switch(u){case"FROM_START":n=t.JavaScript.getAdjusted(n,"AT2",1);break;case"FROM_END":n=r+".length - "+(n=t.JavaScript.getAdjusted(n,"AT2",0,!1,t.JavaScript.ORDER_SUBTRACTION));break;case"LAST":n=r+".length";break;default:throw Error("Unhandled option (lists_getSublist).")}r=r+".slice("+y+", "+n+")"}else{y=t.JavaScript.getAdjusted(n,"AT1"),n=t.JavaScript.getAdjusted(n,"AT2");var x=t.JavaScript.lists.getIndex_,B={FIRST:"First",LAST:"Last",FROM_START:"FromStart",FROM_END:"FromEnd"};r=t.JavaScript.provideFunction_("subsequence"+B[s]+B[u],["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(sequence"+("FROM_END"==s||"FROM_START"==s?", at1":"")+("FROM_END"==u||"FROM_START"==u?", at2":"")+") {","  var start = "+x("sequence",s,"at1")+";","  var end = "+x("sequence",u,"at2")+" + 1;","  return sequence.slice(start, end);","}"])+"("+r+("FROM_END"==s||"FROM_START"==s?", "+y:"")+("FROM_END"==u||"FROM_START"==u?", "+n:"")+")"}return[r,t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.lists_sort=function(n){var r=t.JavaScript.valueToCode(n,"LIST",t.JavaScript.ORDER_FUNCTION_CALL)||"[]",s="1"===n.getFieldValue("DIRECTION")?1:-1;return n=n.getFieldValue("TYPE"),[r+".slice().sort("+t.JavaScript.provideFunction_("listsGetSortCompare",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(type, direction) {","  var compareFuncs = {",'    "NUMERIC": function(a, b) {',"        return Number(a) - Number(b); },",'    "TEXT": function(a, b) {',"        return a.toString() > b.toString() ? 1 : -1; },",'    "IGNORE_CASE": function(a, b) {',"        return a.toString().toLowerCase() > b.toString().toLowerCase() ? 1 : -1; },","  };","  var compare = compareFuncs[type];","  return function(a, b) { return compare(a, b) * direction; }","}"])+'("'+n+'", '+s+"))",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.lists_split=function(n){var r=t.JavaScript.valueToCode(n,"INPUT",t.JavaScript.ORDER_MEMBER),s=t.JavaScript.valueToCode(n,"DELIM",t.JavaScript.ORDER_NONE)||"''";if("SPLIT"==(n=n.getFieldValue("MODE")))r||(r="''"),n="split";else{if("JOIN"!=n)throw Error("Unknown mode: "+n);r||(r="[]"),n="join"}return[r+"."+n+"("+s+")",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.lists_reverse=function(n){return[(t.JavaScript.valueToCode(n,"LIST",t.JavaScript.ORDER_FUNCTION_CALL)||"[]")+".slice().reverse()",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.logic={},t.JavaScript.controls_if=function(n){var r=0,s="";t.JavaScript.STATEMENT_PREFIX&&(s+=t.JavaScript.injectId(t.JavaScript.STATEMENT_PREFIX,n));do{var u=t.JavaScript.valueToCode(n,"IF"+r,t.JavaScript.ORDER_NONE)||"false",y=t.JavaScript.statementToCode(n,"DO"+r);t.JavaScript.STATEMENT_SUFFIX&&(y=t.JavaScript.prefixLines(t.JavaScript.injectId(t.JavaScript.STATEMENT_SUFFIX,n),t.JavaScript.INDENT)+y),s+=(0<r?" else ":"")+"if ("+u+") {\n"+y+"}",++r}while(n.getInput("IF"+r));return(n.getInput("ELSE")||t.JavaScript.STATEMENT_SUFFIX)&&(y=t.JavaScript.statementToCode(n,"ELSE"),t.JavaScript.STATEMENT_SUFFIX&&(y=t.JavaScript.prefixLines(t.JavaScript.injectId(t.JavaScript.STATEMENT_SUFFIX,n),t.JavaScript.INDENT)+y),s+=" else {\n"+y+"}"),s+"\n"},t.JavaScript.controls_ifelse=t.JavaScript.controls_if,t.JavaScript.logic_compare=function(n){var r={EQ:"==",NEQ:"!=",LT:"<",LTE:"<=",GT:">",GTE:">="}[n.getFieldValue("OP")],s="=="==r||"!="==r?t.JavaScript.ORDER_EQUALITY:t.JavaScript.ORDER_RELATIONAL;return[(t.JavaScript.valueToCode(n,"A",s)||"0")+" "+r+" "+(n=t.JavaScript.valueToCode(n,"B",s)||"0"),s]},t.JavaScript.logic_operation=function(n){var r="AND"==n.getFieldValue("OP")?"&&":"||",s="&&"==r?t.JavaScript.ORDER_LOGICAL_AND:t.JavaScript.ORDER_LOGICAL_OR,u=t.JavaScript.valueToCode(n,"A",s);if(n=t.JavaScript.valueToCode(n,"B",s),u||n){var y="&&"==r?"true":"false";u||(u=y),n||(n=y)}else n=u="false";return[u+" "+r+" "+n,s]},t.JavaScript.logic_negate=function(n){var r=t.JavaScript.ORDER_LOGICAL_NOT;return["!"+(t.JavaScript.valueToCode(n,"BOOL",r)||"true"),r]},t.JavaScript.logic_boolean=function(n){return["TRUE"==n.getFieldValue("BOOL")?"true":"false",t.JavaScript.ORDER_ATOMIC]},t.JavaScript.logic_null=function(n){return["null",t.JavaScript.ORDER_ATOMIC]},t.JavaScript.logic_ternary=function(n){return[(t.JavaScript.valueToCode(n,"IF",t.JavaScript.ORDER_CONDITIONAL)||"false")+" ? "+(t.JavaScript.valueToCode(n,"THEN",t.JavaScript.ORDER_CONDITIONAL)||"null")+" : "+(n=t.JavaScript.valueToCode(n,"ELSE",t.JavaScript.ORDER_CONDITIONAL)||"null"),t.JavaScript.ORDER_CONDITIONAL]},t.JavaScript.loops={},t.JavaScript.controls_repeat_ext=function(n){var r=n.getField("TIMES")?String(Number(n.getFieldValue("TIMES"))):t.JavaScript.valueToCode(n,"TIMES",t.JavaScript.ORDER_ASSIGNMENT)||"0",s=t.JavaScript.statementToCode(n,"DO");s=t.JavaScript.addLoopTrap(s,n),n="";var u=t.JavaScript.nameDB_.getDistinctName("count",t.VARIABLE_CATEGORY_NAME),y=r;return r.match(/^\w+$/)||t.isNumber(r)||(n+="var "+(y=t.JavaScript.nameDB_.getDistinctName("repeat_end",t.VARIABLE_CATEGORY_NAME))+" = "+r+";\n"),n+"for (var "+u+" = 0; "+u+" < "+y+"; "+u+"++) {\n"+s+"}\n"},t.JavaScript.controls_repeat=t.JavaScript.controls_repeat_ext,t.JavaScript.controls_whileUntil=function(n){var r="UNTIL"==n.getFieldValue("MODE"),s=t.JavaScript.valueToCode(n,"BOOL",r?t.JavaScript.ORDER_LOGICAL_NOT:t.JavaScript.ORDER_NONE)||"false",u=t.JavaScript.statementToCode(n,"DO");return r&&(s="!"+s),"while ("+s+") {\n"+(u=t.JavaScript.addLoopTrap(u,n))+"}\n"},t.JavaScript.controls_for=function(n){var r=t.JavaScript.nameDB_.getName(n.getFieldValue("VAR"),t.VARIABLE_CATEGORY_NAME),s=t.JavaScript.valueToCode(n,"FROM",t.JavaScript.ORDER_ASSIGNMENT)||"0",u=t.JavaScript.valueToCode(n,"TO",t.JavaScript.ORDER_ASSIGNMENT)||"0",y=t.JavaScript.valueToCode(n,"BY",t.JavaScript.ORDER_ASSIGNMENT)||"1",x=t.JavaScript.statementToCode(n,"DO");if(x=t.JavaScript.addLoopTrap(x,n),t.isNumber(s)&&t.isNumber(u)&&t.isNumber(y)){var B=Number(s)<=Number(u);n="for ("+r+" = "+s+"; "+r+(B?" <= ":" >= ")+u+"; "+r,n=(1==(r=Math.abs(Number(y)))?n+(B?"++":"--"):n+(B?" += ":" -= ")+r)+") {\n"+x+"}\n"}else n="",B=s,s.match(/^\w+$/)||t.isNumber(s)||(n+="var "+(B=t.JavaScript.nameDB_.getDistinctName(r+"_start",t.VARIABLE_CATEGORY_NAME))+" = "+s+";\n"),s=u,u.match(/^\w+$/)||t.isNumber(u)||(n+="var "+(s=t.JavaScript.nameDB_.getDistinctName(r+"_end",t.VARIABLE_CATEGORY_NAME))+" = "+u+";\n"),n+="var "+(u=t.JavaScript.nameDB_.getDistinctName(r+"_inc",t.VARIABLE_CATEGORY_NAME))+" = ",n=(n=t.isNumber(y)?n+(Math.abs(y)+";\n"):n+"Math.abs("+y+");\n")+"if ("+B+" > "+s+") {\n"+(t.JavaScript.INDENT+u)+" = -"+u+";\n",n+="}\n",n+="for ("+r+" = "+B+"; "+u+" >= 0 ? "+r+" <= "+s+" : "+r+" >= "+s+"; "+r+" += "+u+") {\n"+x+"}\n";return n},t.JavaScript.controls_forEach=function(n){var r=t.JavaScript.nameDB_.getName(n.getFieldValue("VAR"),t.VARIABLE_CATEGORY_NAME),s=t.JavaScript.valueToCode(n,"LIST",t.JavaScript.ORDER_ASSIGNMENT)||"[]",u=t.JavaScript.statementToCode(n,"DO");u=t.JavaScript.addLoopTrap(u,n),n="";var y=s;return s.match(/^\w+$/)||(n+="var "+(y=t.JavaScript.nameDB_.getDistinctName(r+"_list",t.VARIABLE_CATEGORY_NAME))+" = "+s+";\n"),n+"for (var "+(s=t.JavaScript.nameDB_.getDistinctName(r+"_index",t.VARIABLE_CATEGORY_NAME))+" in "+y+") {\n"+(u=t.JavaScript.INDENT+r+" = "+y+"["+s+"];\n"+u)+"}\n"},t.JavaScript.controls_flow_statements=function(n){var r="";if(t.JavaScript.STATEMENT_PREFIX&&(r+=t.JavaScript.injectId(t.JavaScript.STATEMENT_PREFIX,n)),t.JavaScript.STATEMENT_SUFFIX&&(r+=t.JavaScript.injectId(t.JavaScript.STATEMENT_SUFFIX,n)),t.JavaScript.STATEMENT_PREFIX){var s=t.Constants.Loops.CONTROL_FLOW_IN_LOOP_CHECK_MIXIN.getSurroundLoop(n);s&&!s.suppressPrefixSuffix&&(r+=t.JavaScript.injectId(t.JavaScript.STATEMENT_PREFIX,s))}switch(n.getFieldValue("FLOW")){case"BREAK":return r+"break;\n";case"CONTINUE":return r+"continue;\n"}throw Error("Unknown flow statement.")},t.JavaScript.math={},t.JavaScript.math_number=function(n){return[n=Number(n.getFieldValue("NUM")),0<=n?t.JavaScript.ORDER_ATOMIC:t.JavaScript.ORDER_UNARY_NEGATION]},t.JavaScript.math_arithmetic=function(n){var r={ADD:[" + ",t.JavaScript.ORDER_ADDITION],MINUS:[" - ",t.JavaScript.ORDER_SUBTRACTION],MULTIPLY:[" * ",t.JavaScript.ORDER_MULTIPLICATION],DIVIDE:[" / ",t.JavaScript.ORDER_DIVISION],POWER:[null,t.JavaScript.ORDER_NONE]}[n.getFieldValue("OP")],s=r[0],u=t.JavaScript.valueToCode(n,"A",r=r[1])||"0";return n=t.JavaScript.valueToCode(n,"B",r)||"0",s?[u+s+n,r]:["Math.pow("+u+", "+n+")",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.math_single=function(n){var r=n.getFieldValue("OP");if("NEG"==r)return"-"==(n=t.JavaScript.valueToCode(n,"NUM",t.JavaScript.ORDER_UNARY_NEGATION)||"0")[0]&&(n=" "+n),["-"+n,t.JavaScript.ORDER_UNARY_NEGATION];switch(n="SIN"==r||"COS"==r||"TAN"==r?t.JavaScript.valueToCode(n,"NUM",t.JavaScript.ORDER_DIVISION)||"0":t.JavaScript.valueToCode(n,"NUM",t.JavaScript.ORDER_NONE)||"0",r){case"ABS":var s="Math.abs("+n+")";break;case"ROOT":s="Math.sqrt("+n+")";break;case"LN":s="Math.log("+n+")";break;case"EXP":s="Math.exp("+n+")";break;case"POW10":s="Math.pow(10,"+n+")";break;case"ROUND":s="Math.round("+n+")";break;case"ROUNDUP":s="Math.ceil("+n+")";break;case"ROUNDDOWN":s="Math.floor("+n+")";break;case"SIN":s="Math.sin("+n+" / 180 * Math.PI)";break;case"COS":s="Math.cos("+n+" / 180 * Math.PI)";break;case"TAN":s="Math.tan("+n+" / 180 * Math.PI)"}if(s)return[s,t.JavaScript.ORDER_FUNCTION_CALL];switch(r){case"LOG10":s="Math.log("+n+") / Math.log(10)";break;case"ASIN":s="Math.asin("+n+") / Math.PI * 180";break;case"ACOS":s="Math.acos("+n+") / Math.PI * 180";break;case"ATAN":s="Math.atan("+n+") / Math.PI * 180";break;default:throw Error("Unknown math operator: "+r)}return[s,t.JavaScript.ORDER_DIVISION]},t.JavaScript.math_constant=function(n){return{PI:["Math.PI",t.JavaScript.ORDER_MEMBER],E:["Math.E",t.JavaScript.ORDER_MEMBER],GOLDEN_RATIO:["(1 + Math.sqrt(5)) / 2",t.JavaScript.ORDER_DIVISION],SQRT2:["Math.SQRT2",t.JavaScript.ORDER_MEMBER],SQRT1_2:["Math.SQRT1_2",t.JavaScript.ORDER_MEMBER],INFINITY:["Infinity",t.JavaScript.ORDER_ATOMIC]}[n.getFieldValue("CONSTANT")]},t.JavaScript.math_number_property=function(n){var r=t.JavaScript.valueToCode(n,"NUMBER_TO_CHECK",t.JavaScript.ORDER_MODULUS)||"0",s=n.getFieldValue("PROPERTY");if("PRIME"==s)return[t.JavaScript.provideFunction_("mathIsPrime",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(n) {","  // https://en.wikipedia.org/wiki/Primality_test#Naive_methods","  if (n == 2 || n == 3) {","    return true;","  }","  // False if n is NaN, negative, is 1, or not whole.","  // And false if n is divisible by 2 or 3.","  if (isNaN(n) || n <= 1 || n % 1 != 0 || n % 2 == 0 || n % 3 == 0) {","    return false;","  }","  // Check all the numbers of form 6k +/- 1, up to sqrt(n).","  for (var x = 6; x <= Math.sqrt(n) + 1; x += 6) {","    if (n % (x - 1) == 0 || n % (x + 1) == 0) {","      return false;","    }","  }","  return true;","}"])+"("+r+")",t.JavaScript.ORDER_FUNCTION_CALL];switch(s){case"EVEN":var u=r+" % 2 == 0";break;case"ODD":u=r+" % 2 == 1";break;case"WHOLE":u=r+" % 1 == 0";break;case"POSITIVE":u=r+" > 0";break;case"NEGATIVE":u=r+" < 0";break;case"DIVISIBLE_BY":u=r+" % "+(n=t.JavaScript.valueToCode(n,"DIVISOR",t.JavaScript.ORDER_MODULUS)||"0")+" == 0"}return[u,t.JavaScript.ORDER_EQUALITY]},t.JavaScript.math_change=function(n){var r=t.JavaScript.valueToCode(n,"DELTA",t.JavaScript.ORDER_ADDITION)||"0";return(n=t.JavaScript.nameDB_.getName(n.getFieldValue("VAR"),t.VARIABLE_CATEGORY_NAME))+" = (typeof "+n+" == 'number' ? "+n+" : 0) + "+r+";\n"},t.JavaScript.math_round=t.JavaScript.math_single,t.JavaScript.math_trig=t.JavaScript.math_single,t.JavaScript.math_on_list=function(n){var r=n.getFieldValue("OP");switch(r){case"SUM":n=t.JavaScript.valueToCode(n,"LIST",t.JavaScript.ORDER_MEMBER)||"[]",n+=".reduce(function(x, y) {return x + y;})";break;case"MIN":n="Math.min.apply(null, "+(n=t.JavaScript.valueToCode(n,"LIST",t.JavaScript.ORDER_NONE)||"[]")+")";break;case"MAX":n="Math.max.apply(null, "+(n=t.JavaScript.valueToCode(n,"LIST",t.JavaScript.ORDER_NONE)||"[]")+")";break;case"AVERAGE":n=(r=t.JavaScript.provideFunction_("mathMean",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(myList) {","  return myList.reduce(function(x, y) {return x + y;}) / myList.length;","}"]))+"("+(n=t.JavaScript.valueToCode(n,"LIST",t.JavaScript.ORDER_NONE)||"[]")+")";break;case"MEDIAN":n=(r=t.JavaScript.provideFunction_("mathMedian",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(myList) {","  var localList = myList.filter(function (x) {return typeof x == 'number';});","  if (!localList.length) return null;","  localList.sort(function(a, b) {return b - a;});","  if (localList.length % 2 == 0) {","    return (localList[localList.length / 2 - 1] + localList[localList.length / 2]) / 2;","  } else {","    return localList[(localList.length - 1) / 2];","  }","}"]))+"("+(n=t.JavaScript.valueToCode(n,"LIST",t.JavaScript.ORDER_NONE)||"[]")+")";break;case"MODE":n=(r=t.JavaScript.provideFunction_("mathModes",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(values) {","  var modes = [];","  var counts = [];","  var maxCount = 0;","  for (var i = 0; i < values.length; i++) {","    var value = values[i];","    var found = false;","    var thisCount;","    for (var j = 0; j < counts.length; j++) {","      if (counts[j][0] === value) {","        thisCount = ++counts[j][1];","        found = true;","        break;","      }","    }","    if (!found) {","      counts.push([value, 1]);","      thisCount = 1;","    }","    maxCount = Math.max(thisCount, maxCount);","  }","  for (var j = 0; j < counts.length; j++) {","    if (counts[j][1] == maxCount) {","        modes.push(counts[j][0]);","    }","  }","  return modes;","}"]))+"("+(n=t.JavaScript.valueToCode(n,"LIST",t.JavaScript.ORDER_NONE)||"[]")+")";break;case"STD_DEV":n=(r=t.JavaScript.provideFunction_("mathStandardDeviation",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(numbers) {","  var n = numbers.length;","  if (!n) return null;","  var mean = numbers.reduce(function(x, y) {return x + y;}) / n;","  var variance = 0;","  for (var j = 0; j < n; j++) {","    variance += Math.pow(numbers[j] - mean, 2);","  }","  variance = variance / n;","  return Math.sqrt(variance);","}"]))+"("+(n=t.JavaScript.valueToCode(n,"LIST",t.JavaScript.ORDER_NONE)||"[]")+")";break;case"RANDOM":n=(r=t.JavaScript.provideFunction_("mathRandomList",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(list) {","  var x = Math.floor(Math.random() * list.length);","  return list[x];","}"]))+"("+(n=t.JavaScript.valueToCode(n,"LIST",t.JavaScript.ORDER_NONE)||"[]")+")";break;default:throw Error("Unknown operator: "+r)}return[n,t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.math_modulo=function(n){return[(t.JavaScript.valueToCode(n,"DIVIDEND",t.JavaScript.ORDER_MODULUS)||"0")+" % "+(n=t.JavaScript.valueToCode(n,"DIVISOR",t.JavaScript.ORDER_MODULUS)||"0"),t.JavaScript.ORDER_MODULUS]},t.JavaScript.math_constrain=function(n){return["Math.min(Math.max("+(t.JavaScript.valueToCode(n,"VALUE",t.JavaScript.ORDER_NONE)||"0")+", "+(t.JavaScript.valueToCode(n,"LOW",t.JavaScript.ORDER_NONE)||"0")+"), "+(n=t.JavaScript.valueToCode(n,"HIGH",t.JavaScript.ORDER_NONE)||"Infinity")+")",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.math_random_int=function(n){var r=t.JavaScript.valueToCode(n,"FROM",t.JavaScript.ORDER_NONE)||"0";return n=t.JavaScript.valueToCode(n,"TO",t.JavaScript.ORDER_NONE)||"0",[t.JavaScript.provideFunction_("mathRandomInt",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(a, b) {","  if (a > b) {","    // Swap a and b to ensure a is smaller.","    var c = a;","    a = b;","    b = c;","  }","  return Math.floor(Math.random() * (b - a + 1) + a);","}"])+"("+r+", "+n+")",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.math_random_float=function(n){return["Math.random()",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.math_atan2=function(n){var r=t.JavaScript.valueToCode(n,"X",t.JavaScript.ORDER_NONE)||"0";return["Math.atan2("+(t.JavaScript.valueToCode(n,"Y",t.JavaScript.ORDER_NONE)||"0")+", "+r+") / Math.PI * 180",t.JavaScript.ORDER_DIVISION]},t.JavaScript.procedures={},t.JavaScript.procedures_defreturn=function(n){var r=t.JavaScript.nameDB_.getName(n.getFieldValue("NAME"),t.PROCEDURE_CATEGORY_NAME),s="";t.JavaScript.STATEMENT_PREFIX&&(s+=t.JavaScript.injectId(t.JavaScript.STATEMENT_PREFIX,n)),t.JavaScript.STATEMENT_SUFFIX&&(s+=t.JavaScript.injectId(t.JavaScript.STATEMENT_SUFFIX,n)),s&&(s=t.JavaScript.prefixLines(s,t.JavaScript.INDENT));var u="";t.JavaScript.INFINITE_LOOP_TRAP&&(u=t.JavaScript.prefixLines(t.JavaScript.injectId(t.JavaScript.INFINITE_LOOP_TRAP,n),t.JavaScript.INDENT));var y=t.JavaScript.statementToCode(n,"STACK"),x=t.JavaScript.valueToCode(n,"RETURN",t.JavaScript.ORDER_NONE)||"",B="";y&&x&&(B=s),x&&(x=t.JavaScript.INDENT+"return "+x+";\n");for(var Q=[],at=n.getVars(),rt=0;rt<at.length;rt++)Q[rt]=t.JavaScript.nameDB_.getName(at[rt],t.VARIABLE_CATEGORY_NAME);return s="function "+r+"("+Q.join(", ")+") {\n"+s+u+y+B+x+"}",s=t.JavaScript.scrub_(n,s),t.JavaScript.definitions_["%"+r]=s,null},t.JavaScript.procedures_defnoreturn=t.JavaScript.procedures_defreturn,t.JavaScript.procedures_callreturn=function(n){for(var r=t.JavaScript.nameDB_.getName(n.getFieldValue("NAME"),t.PROCEDURE_CATEGORY_NAME),s=[],u=n.getVars(),y=0;y<u.length;y++)s[y]=t.JavaScript.valueToCode(n,"ARG"+y,t.JavaScript.ORDER_NONE)||"null";return[r+"("+s.join(", ")+")",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.procedures_callnoreturn=function(n){return t.JavaScript.procedures_callreturn(n)[0]+";\n"},t.JavaScript.procedures_ifreturn=function(n){var r="if ("+(t.JavaScript.valueToCode(n,"CONDITION",t.JavaScript.ORDER_NONE)||"false")+") {\n";return t.JavaScript.STATEMENT_SUFFIX&&(r+=t.JavaScript.prefixLines(t.JavaScript.injectId(t.JavaScript.STATEMENT_SUFFIX,n),t.JavaScript.INDENT)),n.hasReturnValue_?(n=t.JavaScript.valueToCode(n,"VALUE",t.JavaScript.ORDER_NONE)||"null",r+=t.JavaScript.INDENT+"return "+n+";\n"):r+=t.JavaScript.INDENT+"return;\n",r+"}\n"},t.JavaScript.texts={},t.JavaScript.text=function(n){return[t.JavaScript.quote_(n.getFieldValue("TEXT")),t.JavaScript.ORDER_ATOMIC]},t.JavaScript.text_multiline=function(n){var r=-1!=(n=t.JavaScript.multiline_quote_(n.getFieldValue("TEXT"))).indexOf("+")?t.JavaScript.ORDER_ADDITION:t.JavaScript.ORDER_ATOMIC;return[n,r]},t.JavaScript.text.forceString_=function(n){return t.JavaScript.text.forceString_.strRegExp.test(n)?[n,t.JavaScript.ORDER_ATOMIC]:["String("+n+")",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.text.forceString_.strRegExp=/^\s*'([^']|\\')*'\s*$/,t.JavaScript.text_join=function(n){switch(n.itemCount_){case 0:return["''",t.JavaScript.ORDER_ATOMIC];case 1:return n=t.JavaScript.valueToCode(n,"ADD0",t.JavaScript.ORDER_NONE)||"''",t.JavaScript.text.forceString_(n);case 2:var r=t.JavaScript.valueToCode(n,"ADD0",t.JavaScript.ORDER_NONE)||"''";return n=t.JavaScript.valueToCode(n,"ADD1",t.JavaScript.ORDER_NONE)||"''",[n=t.JavaScript.text.forceString_(r)[0]+" + "+t.JavaScript.text.forceString_(n)[0],t.JavaScript.ORDER_ADDITION];default:r=Array(n.itemCount_);for(var s=0;s<n.itemCount_;s++)r[s]=t.JavaScript.valueToCode(n,"ADD"+s,t.JavaScript.ORDER_NONE)||"''";return[n="["+r.join(",")+"].join('')",t.JavaScript.ORDER_FUNCTION_CALL]}},t.JavaScript.text_append=function(n){var r=t.JavaScript.nameDB_.getName(n.getFieldValue("VAR"),t.VARIABLE_CATEGORY_NAME);return n=t.JavaScript.valueToCode(n,"TEXT",t.JavaScript.ORDER_NONE)||"''",r+" += "+t.JavaScript.text.forceString_(n)[0]+";\n"},t.JavaScript.text_length=function(n){return[(t.JavaScript.valueToCode(n,"VALUE",t.JavaScript.ORDER_MEMBER)||"''")+".length",t.JavaScript.ORDER_MEMBER]},t.JavaScript.text_isEmpty=function(n){return["!"+(t.JavaScript.valueToCode(n,"VALUE",t.JavaScript.ORDER_MEMBER)||"''")+".length",t.JavaScript.ORDER_LOGICAL_NOT]},t.JavaScript.text_indexOf=function(n){var r="FIRST"==n.getFieldValue("END")?"indexOf":"lastIndexOf",s=t.JavaScript.valueToCode(n,"FIND",t.JavaScript.ORDER_NONE)||"''";return r=(t.JavaScript.valueToCode(n,"VALUE",t.JavaScript.ORDER_MEMBER)||"''")+"."+r+"("+s+")",n.workspace.options.oneBasedIndex?[r+" + 1",t.JavaScript.ORDER_ADDITION]:[r,t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.text_charAt=function(n){var r=n.getFieldValue("WHERE")||"FROM_START",s=t.JavaScript.valueToCode(n,"VALUE","RANDOM"==r?t.JavaScript.ORDER_NONE:t.JavaScript.ORDER_MEMBER)||"''";switch(r){case"FIRST":return[s+".charAt(0)",t.JavaScript.ORDER_FUNCTION_CALL];case"LAST":return[s+".slice(-1)",t.JavaScript.ORDER_FUNCTION_CALL];case"FROM_START":return[s+".charAt("+(n=t.JavaScript.getAdjusted(n,"AT"))+")",t.JavaScript.ORDER_FUNCTION_CALL];case"FROM_END":return[s+".slice("+(n=t.JavaScript.getAdjusted(n,"AT",1,!0))+").charAt(0)",t.JavaScript.ORDER_FUNCTION_CALL];case"RANDOM":return[t.JavaScript.provideFunction_("textRandomLetter",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(text) {","  var x = Math.floor(Math.random() * text.length);","  return text[x];","}"])+"("+s+")",t.JavaScript.ORDER_FUNCTION_CALL]}throw Error("Unhandled option (text_charAt).")},t.JavaScript.text.getIndex_=function(n,r,s){return"FIRST"==r?"0":"FROM_END"==r?n+".length - 1 - "+s:"LAST"==r?n+".length - 1":s},t.JavaScript.text_getSubstring=function(n){var r=n.getFieldValue("WHERE1"),s=n.getFieldValue("WHERE2"),u="FROM_END"!=r&&"LAST"!=r&&"FROM_END"!=s&&"LAST"!=s,y=t.JavaScript.valueToCode(n,"STRING",u?t.JavaScript.ORDER_MEMBER:t.JavaScript.ORDER_NONE)||"''";if("FIRST"==r&&"LAST"==s)return[y,t.JavaScript.ORDER_NONE];if(y.match(/^'?\w+'?$/)||u){switch(r){case"FROM_START":u=t.JavaScript.getAdjusted(n,"AT1");break;case"FROM_END":u=y+".length - "+(u=t.JavaScript.getAdjusted(n,"AT1",1,!1,t.JavaScript.ORDER_SUBTRACTION));break;case"FIRST":u="0";break;default:throw Error("Unhandled option (text_getSubstring).")}switch(s){case"FROM_START":n=t.JavaScript.getAdjusted(n,"AT2",1);break;case"FROM_END":n=y+".length - "+(n=t.JavaScript.getAdjusted(n,"AT2",0,!1,t.JavaScript.ORDER_SUBTRACTION));break;case"LAST":n=y+".length";break;default:throw Error("Unhandled option (text_getSubstring).")}r=y+".slice("+u+", "+n+")"}else{u=t.JavaScript.getAdjusted(n,"AT1"),n=t.JavaScript.getAdjusted(n,"AT2");var x=t.JavaScript.text.getIndex_,B={FIRST:"First",LAST:"Last",FROM_START:"FromStart",FROM_END:"FromEnd"};r=t.JavaScript.provideFunction_("subsequence"+B[r]+B[s],["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(sequence"+("FROM_END"==r||"FROM_START"==r?", at1":"")+("FROM_END"==s||"FROM_START"==s?", at2":"")+") {","  var start = "+x("sequence",r,"at1")+";","  var end = "+x("sequence",s,"at2")+" + 1;","  return sequence.slice(start, end);","}"])+"("+y+("FROM_END"==r||"FROM_START"==r?", "+u:"")+("FROM_END"==s||"FROM_START"==s?", "+n:"")+")"}return[r,t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.text_changeCase=function(n){var r={UPPERCASE:".toUpperCase()",LOWERCASE:".toLowerCase()",TITLECASE:null}[n.getFieldValue("CASE")];return n=t.JavaScript.valueToCode(n,"TEXT",r?t.JavaScript.ORDER_MEMBER:t.JavaScript.ORDER_NONE)||"''",[r?n+r:t.JavaScript.provideFunction_("textToTitleCase",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(str) {","  return str.replace(/\\S+/g,","      function(txt) {return txt[0].toUpperCase() + txt.substring(1).toLowerCase();});","}"])+"("+n+")",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.text_trim=function(n){var r={LEFT:".replace(/^[\\s\\xa0]+/, '')",RIGHT:".replace(/[\\s\\xa0]+$/, '')",BOTH:".trim()"}[n.getFieldValue("MODE")];return[(t.JavaScript.valueToCode(n,"TEXT",t.JavaScript.ORDER_MEMBER)||"''")+r,t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.text_print=function(n){return"window.alert("+(t.JavaScript.valueToCode(n,"TEXT",t.JavaScript.ORDER_NONE)||"''")+");\n"},t.JavaScript.text_prompt_ext=function(n){var r="window.prompt("+(n.getField("TEXT")?t.JavaScript.quote_(n.getFieldValue("TEXT")):t.JavaScript.valueToCode(n,"TEXT",t.JavaScript.ORDER_NONE)||"''")+")";return"NUMBER"==n.getFieldValue("TYPE")&&(r="Number("+r+")"),[r,t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.text_prompt=t.JavaScript.text_prompt_ext,t.JavaScript.text_count=function(n){var r=t.JavaScript.valueToCode(n,"TEXT",t.JavaScript.ORDER_NONE)||"''";return n=t.JavaScript.valueToCode(n,"SUB",t.JavaScript.ORDER_NONE)||"''",[t.JavaScript.provideFunction_("textCount",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(haystack, needle) {","  if (needle.length === 0) {","    return haystack.length + 1;","  } else {","    return haystack.split(needle).length - 1;","  }","}"])+"("+r+", "+n+")",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.text_replace=function(n){var r=t.JavaScript.valueToCode(n,"TEXT",t.JavaScript.ORDER_NONE)||"''",s=t.JavaScript.valueToCode(n,"FROM",t.JavaScript.ORDER_NONE)||"''";return n=t.JavaScript.valueToCode(n,"TO",t.JavaScript.ORDER_NONE)||"''",[t.JavaScript.provideFunction_("textReplace",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(haystack, needle, replacement) {",'  needle = needle.replace(/([-()\\[\\]{}+?*.$\\^|,:#<!\\\\])/g,"\\\\$1")','                 .replace(/\\x08/g,"\\\\x08");',"  return haystack.replace(new RegExp(needle, 'g'), replacement);","}"])+"("+r+", "+s+", "+n+")",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.text_reverse=function(n){return[(t.JavaScript.valueToCode(n,"TEXT",t.JavaScript.ORDER_MEMBER)||"''")+".split('').reverse().join('')",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.variables={},t.JavaScript.variables_get=function(n){return[t.JavaScript.nameDB_.getName(n.getFieldValue("VAR"),t.VARIABLE_CATEGORY_NAME),t.JavaScript.ORDER_ATOMIC]},t.JavaScript.variables_set=function(n){var r=t.JavaScript.valueToCode(n,"VALUE",t.JavaScript.ORDER_ASSIGNMENT)||"0";return t.JavaScript.nameDB_.getName(n.getFieldValue("VAR"),t.VARIABLE_CATEGORY_NAME)+" = "+r+";\n"},t.JavaScript.variablesDynamic={},t.JavaScript.variables_get_dynamic=t.JavaScript.variables_get,t.JavaScript.variables_set_dynamic=t.JavaScript.variables_set,t.JavaScript}.apply($,_))&&(U.exports=e)},63266:function(U,$,m){var _,e;_=[m(68210)],void 0!==(e=function(t){return(t={Msg:{}}).Msg.ADD_COMMENT="Add Comment",t.Msg.CANNOT_DELETE_VARIABLE_PROCEDURE="Can't delete the variable '%1' because it's part of the definition of the function '%2'",t.Msg.CHANGE_VALUE_TITLE="Change value:",t.Msg.CLEAN_UP="Clean up Blocks",t.Msg.COLLAPSED_WARNINGS_WARNING="Collapsed blocks contain warnings.",t.Msg.COLLAPSE_ALL="Collapse Blocks",t.Msg.COLLAPSE_BLOCK="Collapse Block",t.Msg.COLOUR_BLEND_COLOUR1="colour 1",t.Msg.COLOUR_BLEND_COLOUR2="colour 2",t.Msg.COLOUR_BLEND_HELPURL="https://meyerweb.com/eric/tools/color-blend/#:::rgbp",t.Msg.COLOUR_BLEND_RATIO="ratio",t.Msg.COLOUR_BLEND_TITLE="blend",t.Msg.COLOUR_BLEND_TOOLTIP="Blends two colours together with a given ratio (0.0 - 1.0).",t.Msg.COLOUR_PICKER_HELPURL="https://en.wikipedia.org/wiki/Color",t.Msg.COLOUR_PICKER_TOOLTIP="Choose a colour from the palette.",t.Msg.COLOUR_RANDOM_HELPURL="http://randomcolour.com",t.Msg.COLOUR_RANDOM_TITLE="random colour",t.Msg.COLOUR_RANDOM_TOOLTIP="Choose a colour at random.",t.Msg.COLOUR_RGB_BLUE="blue",t.Msg.COLOUR_RGB_GREEN="green",t.Msg.COLOUR_RGB_HELPURL="https://www.december.com/html/spec/colorpercompact.html",t.Msg.COLOUR_RGB_RED="red",t.Msg.COLOUR_RGB_TITLE="colour with",t.Msg.COLOUR_RGB_TOOLTIP="Create a colour with the specified amount of red, green, and blue. All values must be between 0 and 100.",t.Msg.CONTROLS_FLOW_STATEMENTS_HELPURL="https://github.com/google/blockly/wiki/Loops#loop-termination-blocks",t.Msg.CONTROLS_FLOW_STATEMENTS_OPERATOR_BREAK="break out of loop",t.Msg.CONTROLS_FLOW_STATEMENTS_OPERATOR_CONTINUE="continue with next iteration of loop",t.Msg.CONTROLS_FLOW_STATEMENTS_TOOLTIP_BREAK="Break out of the containing loop.",t.Msg.CONTROLS_FLOW_STATEMENTS_TOOLTIP_CONTINUE="Skip the rest of this loop, and continue with the next iteration.",t.Msg.CONTROLS_FLOW_STATEMENTS_WARNING="Warning: This block may only be used within a loop.",t.Msg.CONTROLS_FOREACH_HELPURL="https://github.com/google/blockly/wiki/Loops#for-each",t.Msg.CONTROLS_FOREACH_TITLE="for each item %1 in list %2",t.Msg.CONTROLS_FOREACH_TOOLTIP="For each item in a list, set the variable '%1' to the item, and then do some statements.",t.Msg.CONTROLS_FOR_HELPURL="https://github.com/google/blockly/wiki/Loops#count-with",t.Msg.CONTROLS_FOR_TITLE="count with %1 from %2 to %3 by %4",t.Msg.CONTROLS_FOR_TOOLTIP="Have the variable '%1' take on the values from the start number to the end number, counting by the specified interval, and do the specified blocks.",t.Msg.CONTROLS_IF_ELSEIF_TOOLTIP="Add a condition to the if block.",t.Msg.CONTROLS_IF_ELSE_TOOLTIP="Add a final, catch-all condition to the if block.",t.Msg.CONTROLS_IF_HELPURL="https://github.com/google/blockly/wiki/IfElse",t.Msg.CONTROLS_IF_IF_TOOLTIP="Add, remove, or reorder sections to reconfigure this if block.",t.Msg.CONTROLS_IF_MSG_ELSE="else",t.Msg.CONTROLS_IF_MSG_ELSEIF="else if",t.Msg.CONTROLS_IF_MSG_IF="if",t.Msg.CONTROLS_IF_TOOLTIP_1="If a value is true, then do some statements.",t.Msg.CONTROLS_IF_TOOLTIP_2="If a value is true, then do the first block of statements. Otherwise, do the second block of statements.",t.Msg.CONTROLS_IF_TOOLTIP_3="If the first value is true, then do the first block of statements. Otherwise, if the second value is true, do the second block of statements.",t.Msg.CONTROLS_IF_TOOLTIP_4="If the first value is true, then do the first block of statements. Otherwise, if the second value is true, do the second block of statements. If none of the values are true, do the last block of statements.",t.Msg.CONTROLS_REPEAT_HELPURL="https://en.wikipedia.org/wiki/For_loop",t.Msg.CONTROLS_REPEAT_INPUT_DO="do",t.Msg.CONTROLS_REPEAT_TITLE="repeat %1 times",t.Msg.CONTROLS_REPEAT_TOOLTIP="Do some statements several times.",t.Msg.CONTROLS_WHILEUNTIL_HELPURL="https://github.com/google/blockly/wiki/Loops#repeat",t.Msg.CONTROLS_WHILEUNTIL_OPERATOR_UNTIL="repeat until",t.Msg.CONTROLS_WHILEUNTIL_OPERATOR_WHILE="repeat while",t.Msg.CONTROLS_WHILEUNTIL_TOOLTIP_UNTIL="While a value is false, then do some statements.",t.Msg.CONTROLS_WHILEUNTIL_TOOLTIP_WHILE="While a value is true, then do some statements.",t.Msg.DELETE_ALL_BLOCKS="Delete all %1 blocks?",t.Msg.DELETE_BLOCK="Delete Block",t.Msg.DELETE_VARIABLE="Delete the '%1' variable",t.Msg.DELETE_VARIABLE_CONFIRMATION="Delete %1 uses of the '%2' variable?",t.Msg.DELETE_X_BLOCKS="Delete %1 Blocks",t.Msg.DISABLE_BLOCK="Disable Block",t.Msg.DUPLICATE_BLOCK="Duplicate",t.Msg.DUPLICATE_COMMENT="Duplicate Comment",t.Msg.ENABLE_BLOCK="Enable Block",t.Msg.EXPAND_ALL="Expand Blocks",t.Msg.EXPAND_BLOCK="Expand Block",t.Msg.EXTERNAL_INPUTS="External Inputs",t.Msg.HELP="Help",t.Msg.INLINE_INPUTS="Inline Inputs",t.Msg.IOS_CANCEL="Cancel",t.Msg.IOS_ERROR="Error",t.Msg.IOS_OK="OK",t.Msg.IOS_PROCEDURES_ADD_INPUT="+ Add Input",t.Msg.IOS_PROCEDURES_ALLOW_STATEMENTS="Allow statements",t.Msg.IOS_PROCEDURES_DUPLICATE_INPUTS_ERROR="This function has duplicate inputs.",t.Msg.IOS_PROCEDURES_INPUTS="INPUTS",t.Msg.IOS_VARIABLES_ADD_BUTTON="Add",t.Msg.IOS_VARIABLES_ADD_VARIABLE="+ Add Variable",t.Msg.IOS_VARIABLES_DELETE_BUTTON="Delete",t.Msg.IOS_VARIABLES_EMPTY_NAME_ERROR="You can't use an empty variable name.",t.Msg.IOS_VARIABLES_RENAME_BUTTON="Rename",t.Msg.IOS_VARIABLES_VARIABLE_NAME="Variable name",t.Msg.LISTS_CREATE_EMPTY_HELPURL="https://github.com/google/blockly/wiki/Lists#create-empty-list",t.Msg.LISTS_CREATE_EMPTY_TITLE="create empty list",t.Msg.LISTS_CREATE_EMPTY_TOOLTIP="Returns a list, of length 0, containing no data records",t.Msg.LISTS_CREATE_WITH_CONTAINER_TITLE_ADD="list",t.Msg.LISTS_CREATE_WITH_CONTAINER_TOOLTIP="Add, remove, or reorder sections to reconfigure this list block.",t.Msg.LISTS_CREATE_WITH_HELPURL="https://github.com/google/blockly/wiki/Lists#create-list-with",t.Msg.LISTS_CREATE_WITH_INPUT_WITH="create list with",t.Msg.LISTS_CREATE_WITH_ITEM_TOOLTIP="Add an item to the list.",t.Msg.LISTS_CREATE_WITH_TOOLTIP="Create a list with any number of items.",t.Msg.LISTS_GET_INDEX_FIRST="first",t.Msg.LISTS_GET_INDEX_FROM_END="# from end",t.Msg.LISTS_GET_INDEX_FROM_START="#",t.Msg.LISTS_GET_INDEX_GET="get",t.Msg.LISTS_GET_INDEX_GET_REMOVE="get and remove",t.Msg.LISTS_GET_INDEX_LAST="last",t.Msg.LISTS_GET_INDEX_RANDOM="random",t.Msg.LISTS_GET_INDEX_REMOVE="remove",t.Msg.LISTS_GET_INDEX_TAIL="",t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FIRST="Returns the first item in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FROM="Returns the item at the specified position in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_LAST="Returns the last item in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_RANDOM="Returns a random item in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FIRST="Removes and returns the first item in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FROM="Removes and returns the item at the specified position in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_LAST="Removes and returns the last item in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_RANDOM="Removes and returns a random item in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FIRST="Removes the first item in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FROM="Removes the item at the specified position in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_LAST="Removes the last item in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_RANDOM="Removes a random item in a list.",t.Msg.LISTS_GET_SUBLIST_END_FROM_END="to # from end",t.Msg.LISTS_GET_SUBLIST_END_FROM_START="to #",t.Msg.LISTS_GET_SUBLIST_END_LAST="to last",t.Msg.LISTS_GET_SUBLIST_HELPURL="https://github.com/google/blockly/wiki/Lists#getting-a-sublist",t.Msg.LISTS_GET_SUBLIST_START_FIRST="get sub-list from first",t.Msg.LISTS_GET_SUBLIST_START_FROM_END="get sub-list from # from end",t.Msg.LISTS_GET_SUBLIST_START_FROM_START="get sub-list from #",t.Msg.LISTS_GET_SUBLIST_TAIL="",t.Msg.LISTS_GET_SUBLIST_TOOLTIP="Creates a copy of the specified portion of a list.",t.Msg.LISTS_INDEX_FROM_END_TOOLTIP="%1 is the last item.",t.Msg.LISTS_INDEX_FROM_START_TOOLTIP="%1 is the first item.",t.Msg.LISTS_INDEX_OF_FIRST="find first occurrence of item",t.Msg.LISTS_INDEX_OF_HELPURL="https://github.com/google/blockly/wiki/Lists#getting-items-from-a-list",t.Msg.LISTS_INDEX_OF_LAST="find last occurrence of item",t.Msg.LISTS_INDEX_OF_TOOLTIP="Returns the index of the first/last occurrence of the item in the list. Returns %1 if item is not found.",t.Msg.LISTS_INLIST="in list",t.Msg.LISTS_ISEMPTY_HELPURL="https://github.com/google/blockly/wiki/Lists#is-empty",t.Msg.LISTS_ISEMPTY_TITLE="%1 is empty",t.Msg.LISTS_ISEMPTY_TOOLTIP="Returns true if the list is empty.",t.Msg.LISTS_LENGTH_HELPURL="https://github.com/google/blockly/wiki/Lists#length-of",t.Msg.LISTS_LENGTH_TITLE="length of %1",t.Msg.LISTS_LENGTH_TOOLTIP="Returns the length of a list.",t.Msg.LISTS_REPEAT_HELPURL="https://github.com/google/blockly/wiki/Lists#create-list-with",t.Msg.LISTS_REPEAT_TITLE="create list with item %1 repeated %2 times",t.Msg.LISTS_REPEAT_TOOLTIP="Creates a list consisting of the given value repeated the specified number of times.",t.Msg.LISTS_REVERSE_HELPURL="https://github.com/google/blockly/wiki/Lists#reversing-a-list",t.Msg.LISTS_REVERSE_MESSAGE0="reverse %1",t.Msg.LISTS_REVERSE_TOOLTIP="Reverse a copy of a list.",t.Msg.LISTS_SET_INDEX_HELPURL="https://github.com/google/blockly/wiki/Lists#in-list--set",t.Msg.LISTS_SET_INDEX_INPUT_TO="as",t.Msg.LISTS_SET_INDEX_INSERT="insert at",t.Msg.LISTS_SET_INDEX_SET="set",t.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FIRST="Inserts the item at the start of a list.",t.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FROM="Inserts the item at the specified position in a list.",t.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_LAST="Append the item to the end of a list.",t.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_RANDOM="Inserts the item randomly in a list.",t.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FIRST="Sets the first item in a list.",t.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FROM="Sets the item at the specified position in a list.",t.Msg.LISTS_SET_INDEX_TOOLTIP_SET_LAST="Sets the last item in a list.",t.Msg.LISTS_SET_INDEX_TOOLTIP_SET_RANDOM="Sets a random item in a list.",t.Msg.LISTS_SORT_HELPURL="https://github.com/google/blockly/wiki/Lists#sorting-a-list",t.Msg.LISTS_SORT_ORDER_ASCENDING="ascending",t.Msg.LISTS_SORT_ORDER_DESCENDING="descending",t.Msg.LISTS_SORT_TITLE="sort %1 %2 %3",t.Msg.LISTS_SORT_TOOLTIP="Sort a copy of a list.",t.Msg.LISTS_SORT_TYPE_IGNORECASE="alphabetic, ignore case",t.Msg.LISTS_SORT_TYPE_NUMERIC="numeric",t.Msg.LISTS_SORT_TYPE_TEXT="alphabetic",t.Msg.LISTS_SPLIT_HELPURL="https://github.com/google/blockly/wiki/Lists#splitting-strings-and-joining-lists",t.Msg.LISTS_SPLIT_LIST_FROM_TEXT="make list from text",t.Msg.LISTS_SPLIT_TEXT_FROM_LIST="make text from list",t.Msg.LISTS_SPLIT_TOOLTIP_JOIN="Join a list of texts into one text, separated by a delimiter.",t.Msg.LISTS_SPLIT_TOOLTIP_SPLIT="Split text into a list of texts, breaking at each delimiter.",t.Msg.LISTS_SPLIT_WITH_DELIMITER="with delimiter",t.Msg.LOGIC_BOOLEAN_FALSE="false",t.Msg.LOGIC_BOOLEAN_HELPURL="https://github.com/google/blockly/wiki/Logic#values",t.Msg.LOGIC_BOOLEAN_TOOLTIP="Returns either true or false.",t.Msg.LOGIC_BOOLEAN_TRUE="true",t.Msg.LOGIC_COMPARE_HELPURL="https://en.wikipedia.org/wiki/Inequality_(mathematics)",t.Msg.LOGIC_COMPARE_TOOLTIP_EQ="Return true if both inputs equal each other.",t.Msg.LOGIC_COMPARE_TOOLTIP_GT="Return true if the first input is greater than the second input.",t.Msg.LOGIC_COMPARE_TOOLTIP_GTE="Return true if the first input is greater than or equal to the second input.",t.Msg.LOGIC_COMPARE_TOOLTIP_LT="Return true if the first input is smaller than the second input.",t.Msg.LOGIC_COMPARE_TOOLTIP_LTE="Return true if the first input is smaller than or equal to the second input.",t.Msg.LOGIC_COMPARE_TOOLTIP_NEQ="Return true if both inputs are not equal to each other.",t.Msg.LOGIC_NEGATE_HELPURL="https://github.com/google/blockly/wiki/Logic#not",t.Msg.LOGIC_NEGATE_TITLE="not %1",t.Msg.LOGIC_NEGATE_TOOLTIP="Returns true if the input is false. Returns false if the input is true.",t.Msg.LOGIC_NULL="null",t.Msg.LOGIC_NULL_HELPURL="https://en.wikipedia.org/wiki/Nullable_type",t.Msg.LOGIC_NULL_TOOLTIP="Returns null.",t.Msg.LOGIC_OPERATION_AND="and",t.Msg.LOGIC_OPERATION_HELPURL="https://github.com/google/blockly/wiki/Logic#logical-operations",t.Msg.LOGIC_OPERATION_OR="or",t.Msg.LOGIC_OPERATION_TOOLTIP_AND="Return true if both inputs are true.",t.Msg.LOGIC_OPERATION_TOOLTIP_OR="Return true if at least one of the inputs is true.",t.Msg.LOGIC_TERNARY_CONDITION="test",t.Msg.LOGIC_TERNARY_HELPURL="https://en.wikipedia.org/wiki/%3F:",t.Msg.LOGIC_TERNARY_IF_FALSE="if false",t.Msg.LOGIC_TERNARY_IF_TRUE="if true",t.Msg.LOGIC_TERNARY_TOOLTIP="Check the condition in 'test'. If the condition is true, returns the 'if true' value; otherwise returns the 'if false' value.",t.Msg.MATH_ADDITION_SYMBOL="+",t.Msg.MATH_ARITHMETIC_HELPURL="https://en.wikipedia.org/wiki/Arithmetic",t.Msg.MATH_ARITHMETIC_TOOLTIP_ADD="Return the sum of the two numbers.",t.Msg.MATH_ARITHMETIC_TOOLTIP_DIVIDE="Return the quotient of the two numbers.",t.Msg.MATH_ARITHMETIC_TOOLTIP_MINUS="Return the difference of the two numbers.",t.Msg.MATH_ARITHMETIC_TOOLTIP_MULTIPLY="Return the product of the two numbers.",t.Msg.MATH_ARITHMETIC_TOOLTIP_POWER="Return the first number raised to the power of the second number.",t.Msg.MATH_ATAN2_HELPURL="https://en.wikipedia.org/wiki/Atan2",t.Msg.MATH_ATAN2_TITLE="atan2 of X:%1 Y:%2",t.Msg.MATH_ATAN2_TOOLTIP="Return the arctangent of point (X, Y) in degrees from -180 to 180.",t.Msg.MATH_CHANGE_HELPURL="https://en.wikipedia.org/wiki/Programming_idiom#Incrementing_a_counter",t.Msg.MATH_CHANGE_TITLE="change %1 by %2",t.Msg.MATH_CHANGE_TOOLTIP="Add a number to variable '%1'.",t.Msg.MATH_CONSTANT_HELPURL="https://en.wikipedia.org/wiki/Mathematical_constant",t.Msg.MATH_CONSTANT_TOOLTIP="Return one of the common constants: \u03c0 (3.141\u2026), e (2.718\u2026), \u03c6 (1.618\u2026), sqrt(2) (1.414\u2026), sqrt(\xbd) (0.707\u2026), or \u221e (infinity).",t.Msg.MATH_CONSTRAIN_HELPURL="https://en.wikipedia.org/wiki/Clamping_(graphics)",t.Msg.MATH_CONSTRAIN_TITLE="constrain %1 low %2 high %3",t.Msg.MATH_CONSTRAIN_TOOLTIP="Constrain a number to be between the specified limits (inclusive).",t.Msg.MATH_DIVISION_SYMBOL="\xf7",t.Msg.MATH_IS_DIVISIBLE_BY="is divisible by",t.Msg.MATH_IS_EVEN="is even",t.Msg.MATH_IS_NEGATIVE="is negative",t.Msg.MATH_IS_ODD="is odd",t.Msg.MATH_IS_POSITIVE="is positive",t.Msg.MATH_IS_PRIME="is prime",t.Msg.MATH_IS_TOOLTIP="Check if a number is an even, odd, prime, whole, positive, negative, or if it is divisible by certain number. Returns true or false.",t.Msg.MATH_IS_WHOLE="is whole",t.Msg.MATH_MODULO_HELPURL="https://en.wikipedia.org/wiki/Modulo_operation",t.Msg.MATH_MODULO_TITLE="remainder of %1 \xf7 %2",t.Msg.MATH_MODULO_TOOLTIP="Return the remainder from dividing the two numbers.",t.Msg.MATH_MULTIPLICATION_SYMBOL="\xd7",t.Msg.MATH_NUMBER_HELPURL="https://en.wikipedia.org/wiki/Number",t.Msg.MATH_NUMBER_TOOLTIP="A number.",t.Msg.MATH_ONLIST_HELPURL="",t.Msg.MATH_ONLIST_OPERATOR_AVERAGE="average of list",t.Msg.MATH_ONLIST_OPERATOR_MAX="max of list",t.Msg.MATH_ONLIST_OPERATOR_MEDIAN="median of list",t.Msg.MATH_ONLIST_OPERATOR_MIN="min of list",t.Msg.MATH_ONLIST_OPERATOR_MODE="modes of list",t.Msg.MATH_ONLIST_OPERATOR_RANDOM="random item of list",t.Msg.MATH_ONLIST_OPERATOR_STD_DEV="standard deviation of list",t.Msg.MATH_ONLIST_OPERATOR_SUM="sum of list",t.Msg.MATH_ONLIST_TOOLTIP_AVERAGE="Return the average (arithmetic mean) of the numeric values in the list.",t.Msg.MATH_ONLIST_TOOLTIP_MAX="Return the largest number in the list.",t.Msg.MATH_ONLIST_TOOLTIP_MEDIAN="Return the median number in the list.",t.Msg.MATH_ONLIST_TOOLTIP_MIN="Return the smallest number in the list.",t.Msg.MATH_ONLIST_TOOLTIP_MODE="Return a list of the most common item(s) in the list.",t.Msg.MATH_ONLIST_TOOLTIP_RANDOM="Return a random element from the list.",t.Msg.MATH_ONLIST_TOOLTIP_STD_DEV="Return the standard deviation of the list.",t.Msg.MATH_ONLIST_TOOLTIP_SUM="Return the sum of all the numbers in the list.",t.Msg.MATH_POWER_SYMBOL="^",t.Msg.MATH_RANDOM_FLOAT_HELPURL="https://en.wikipedia.org/wiki/Random_number_generation",t.Msg.MATH_RANDOM_FLOAT_TITLE_RANDOM="random fraction",t.Msg.MATH_RANDOM_FLOAT_TOOLTIP="Return a random fraction between 0.0 (inclusive) and 1.0 (exclusive).",t.Msg.MATH_RANDOM_INT_HELPURL="https://en.wikipedia.org/wiki/Random_number_generation",t.Msg.MATH_RANDOM_INT_TITLE="random integer from %1 to %2",t.Msg.MATH_RANDOM_INT_TOOLTIP="Return a random integer between the two specified limits, inclusive.",t.Msg.MATH_ROUND_HELPURL="https://en.wikipedia.org/wiki/Rounding",t.Msg.MATH_ROUND_OPERATOR_ROUND="round",t.Msg.MATH_ROUND_OPERATOR_ROUNDDOWN="round down",t.Msg.MATH_ROUND_OPERATOR_ROUNDUP="round up",t.Msg.MATH_ROUND_TOOLTIP="Round a number up or down.",t.Msg.MATH_SINGLE_HELPURL="https://en.wikipedia.org/wiki/Square_root",t.Msg.MATH_SINGLE_OP_ABSOLUTE="absolute",t.Msg.MATH_SINGLE_OP_ROOT="square root",t.Msg.MATH_SINGLE_TOOLTIP_ABS="Return the absolute value of a number.",t.Msg.MATH_SINGLE_TOOLTIP_EXP="Return e to the power of a number.",t.Msg.MATH_SINGLE_TOOLTIP_LN="Return the natural logarithm of a number.",t.Msg.MATH_SINGLE_TOOLTIP_LOG10="Return the base 10 logarithm of a number.",t.Msg.MATH_SINGLE_TOOLTIP_NEG="Return the negation of a number.",t.Msg.MATH_SINGLE_TOOLTIP_POW10="Return 10 to the power of a number.",t.Msg.MATH_SINGLE_TOOLTIP_ROOT="Return the square root of a number.",t.Msg.MATH_SUBTRACTION_SYMBOL="-",t.Msg.MATH_TRIG_ACOS="acos",t.Msg.MATH_TRIG_ASIN="asin",t.Msg.MATH_TRIG_ATAN="atan",t.Msg.MATH_TRIG_COS="cos",t.Msg.MATH_TRIG_HELPURL="https://en.wikipedia.org/wiki/Trigonometric_functions",t.Msg.MATH_TRIG_SIN="sin",t.Msg.MATH_TRIG_TAN="tan",t.Msg.MATH_TRIG_TOOLTIP_ACOS="Return the arccosine of a number.",t.Msg.MATH_TRIG_TOOLTIP_ASIN="Return the arcsine of a number.",t.Msg.MATH_TRIG_TOOLTIP_ATAN="Return the arctangent of a number.",t.Msg.MATH_TRIG_TOOLTIP_COS="Return the cosine of a degree (not radian).",t.Msg.MATH_TRIG_TOOLTIP_SIN="Return the sine of a degree (not radian).",t.Msg.MATH_TRIG_TOOLTIP_TAN="Return the tangent of a degree (not radian).",t.Msg.NEW_COLOUR_VARIABLE="Create colour variable...",t.Msg.NEW_NUMBER_VARIABLE="Create number variable...",t.Msg.NEW_STRING_VARIABLE="Create string variable...",t.Msg.NEW_VARIABLE="Create variable...",t.Msg.NEW_VARIABLE_TITLE="New variable name:",t.Msg.NEW_VARIABLE_TYPE_TITLE="New variable type:",t.Msg.ORDINAL_NUMBER_SUFFIX="",t.Msg.PROCEDURES_ALLOW_STATEMENTS="allow statements",t.Msg.PROCEDURES_BEFORE_PARAMS="with:",t.Msg.PROCEDURES_CALLNORETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",t.Msg.PROCEDURES_CALLNORETURN_TOOLTIP="Run the user-defined function '%1'.",t.Msg.PROCEDURES_CALLRETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",t.Msg.PROCEDURES_CALLRETURN_TOOLTIP="Run the user-defined function '%1' and use its output.",t.Msg.PROCEDURES_CALL_BEFORE_PARAMS="with:",t.Msg.PROCEDURES_CREATE_DO="Create '%1'",t.Msg.PROCEDURES_DEFNORETURN_COMMENT="Describe this function...",t.Msg.PROCEDURES_DEFNORETURN_DO="",t.Msg.PROCEDURES_DEFNORETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",t.Msg.PROCEDURES_DEFNORETURN_PROCEDURE="do something",t.Msg.PROCEDURES_DEFNORETURN_TITLE="to",t.Msg.PROCEDURES_DEFNORETURN_TOOLTIP="Creates a function with no output.",t.Msg.PROCEDURES_DEFRETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",t.Msg.PROCEDURES_DEFRETURN_RETURN="return",t.Msg.PROCEDURES_DEFRETURN_TOOLTIP="Creates a function with an output.",t.Msg.PROCEDURES_DEF_DUPLICATE_WARNING="Warning: This function has duplicate parameters.",t.Msg.PROCEDURES_HIGHLIGHT_DEF="Highlight function definition",t.Msg.PROCEDURES_IFRETURN_HELPURL="http://c2.com/cgi/wiki?GuardClause",t.Msg.PROCEDURES_IFRETURN_TOOLTIP="If a value is true, then return a second value.",t.Msg.PROCEDURES_IFRETURN_WARNING="Warning: This block may be used only within a function definition.",t.Msg.PROCEDURES_MUTATORARG_TITLE="input name:",t.Msg.PROCEDURES_MUTATORARG_TOOLTIP="Add an input to the function.",t.Msg.PROCEDURES_MUTATORCONTAINER_TITLE="inputs",t.Msg.PROCEDURES_MUTATORCONTAINER_TOOLTIP="Add, remove, or reorder inputs to this function.",t.Msg.REDO="Redo",t.Msg.REMOVE_COMMENT="Remove Comment",t.Msg.RENAME_VARIABLE="Rename variable...",t.Msg.RENAME_VARIABLE_TITLE="Rename all '%1' variables to:",t.Msg.TEXT_APPEND_HELPURL="https://github.com/google/blockly/wiki/Text#text-modification",t.Msg.TEXT_APPEND_TITLE="to %1 append text %2",t.Msg.TEXT_APPEND_TOOLTIP="Append some text to variable '%1'.",t.Msg.TEXT_CHANGECASE_HELPURL="https://github.com/google/blockly/wiki/Text#adjusting-text-case",t.Msg.TEXT_CHANGECASE_OPERATOR_LOWERCASE="to lower case",t.Msg.TEXT_CHANGECASE_OPERATOR_TITLECASE="to Title Case",t.Msg.TEXT_CHANGECASE_OPERATOR_UPPERCASE="to UPPER CASE",t.Msg.TEXT_CHANGECASE_TOOLTIP="Return a copy of the text in a different case.",t.Msg.TEXT_CHARAT_FIRST="get first letter",t.Msg.TEXT_CHARAT_FROM_END="get letter # from end",t.Msg.TEXT_CHARAT_FROM_START="get letter #",t.Msg.TEXT_CHARAT_HELPURL="https://github.com/google/blockly/wiki/Text#extracting-text",t.Msg.TEXT_CHARAT_LAST="get last letter",t.Msg.TEXT_CHARAT_RANDOM="get random letter",t.Msg.TEXT_CHARAT_TAIL="",t.Msg.TEXT_CHARAT_TITLE="in text %1 %2",t.Msg.TEXT_CHARAT_TOOLTIP="Returns the letter at the specified position.",t.Msg.TEXT_COUNT_HELPURL="https://github.com/google/blockly/wiki/Text#counting-substrings",t.Msg.TEXT_COUNT_MESSAGE0="count %1 in %2",t.Msg.TEXT_COUNT_TOOLTIP="Count how many times some text occurs within some other text.",t.Msg.TEXT_CREATE_JOIN_ITEM_TOOLTIP="Add an item to the text.",t.Msg.TEXT_CREATE_JOIN_TITLE_JOIN="join",t.Msg.TEXT_CREATE_JOIN_TOOLTIP="Add, remove, or reorder sections to reconfigure this text block.",t.Msg.TEXT_GET_SUBSTRING_END_FROM_END="to letter # from end",t.Msg.TEXT_GET_SUBSTRING_END_FROM_START="to letter #",t.Msg.TEXT_GET_SUBSTRING_END_LAST="to last letter",t.Msg.TEXT_GET_SUBSTRING_HELPURL="https://github.com/google/blockly/wiki/Text#extracting-a-region-of-text",t.Msg.TEXT_GET_SUBSTRING_INPUT_IN_TEXT="in text",t.Msg.TEXT_GET_SUBSTRING_START_FIRST="get substring from first letter",t.Msg.TEXT_GET_SUBSTRING_START_FROM_END="get substring from letter # from end",t.Msg.TEXT_GET_SUBSTRING_START_FROM_START="get substring from letter #",t.Msg.TEXT_GET_SUBSTRING_TAIL="",t.Msg.TEXT_GET_SUBSTRING_TOOLTIP="Returns a specified portion of the text.",t.Msg.TEXT_INDEXOF_HELPURL="https://github.com/google/blockly/wiki/Text#finding-text",t.Msg.TEXT_INDEXOF_OPERATOR_FIRST="find first occurrence of text",t.Msg.TEXT_INDEXOF_OPERATOR_LAST="find last occurrence of text",t.Msg.TEXT_INDEXOF_TITLE="in text %1 %2 %3",t.Msg.TEXT_INDEXOF_TOOLTIP="Returns the index of the first/last occurrence of the first text in the second text. Returns %1 if text is not found.",t.Msg.TEXT_ISEMPTY_HELPURL="https://github.com/google/blockly/wiki/Text#checking-for-empty-text",t.Msg.TEXT_ISEMPTY_TITLE="%1 is empty",t.Msg.TEXT_ISEMPTY_TOOLTIP="Returns true if the provided text is empty.",t.Msg.TEXT_JOIN_HELPURL="https://github.com/google/blockly/wiki/Text#text-creation",t.Msg.TEXT_JOIN_TITLE_CREATEWITH="create text with",t.Msg.TEXT_JOIN_TOOLTIP="Create a piece of text by joining together any number of items.",t.Msg.TEXT_LENGTH_HELPURL="https://github.com/google/blockly/wiki/Text#text-modification",t.Msg.TEXT_LENGTH_TITLE="length of %1",t.Msg.TEXT_LENGTH_TOOLTIP="Returns the number of letters (including spaces) in the provided text.",t.Msg.TEXT_PRINT_HELPURL="https://github.com/google/blockly/wiki/Text#printing-text",t.Msg.TEXT_PRINT_TITLE="print %1",t.Msg.TEXT_PRINT_TOOLTIP="Print the specified text, number or other value.",t.Msg.TEXT_PROMPT_HELPURL="https://github.com/google/blockly/wiki/Text#getting-input-from-the-user",t.Msg.TEXT_PROMPT_TOOLTIP_NUMBER="Prompt for user for a number.",t.Msg.TEXT_PROMPT_TOOLTIP_TEXT="Prompt for user for some text.",t.Msg.TEXT_PROMPT_TYPE_NUMBER="prompt for number with message",t.Msg.TEXT_PROMPT_TYPE_TEXT="prompt for text with message",t.Msg.TEXT_REPLACE_HELPURL="https://github.com/google/blockly/wiki/Text#replacing-substrings",t.Msg.TEXT_REPLACE_MESSAGE0="replace %1 with %2 in %3",t.Msg.TEXT_REPLACE_TOOLTIP="Replace all occurances of some text within some other text.",t.Msg.TEXT_REVERSE_HELPURL="https://github.com/google/blockly/wiki/Text#reversing-text",t.Msg.TEXT_REVERSE_MESSAGE0="reverse %1",t.Msg.TEXT_REVERSE_TOOLTIP="Reverses the order of the characters in the text.",t.Msg.TEXT_TEXT_HELPURL="https://en.wikipedia.org/wiki/String_(computer_science)",t.Msg.TEXT_TEXT_TOOLTIP="A letter, word, or line of text.",t.Msg.TEXT_TRIM_HELPURL="https://github.com/google/blockly/wiki/Text#trimming-removing-spaces",t.Msg.TEXT_TRIM_OPERATOR_BOTH="trim spaces from both sides of",t.Msg.TEXT_TRIM_OPERATOR_LEFT="trim spaces from left side of",t.Msg.TEXT_TRIM_OPERATOR_RIGHT="trim spaces from right side of",t.Msg.TEXT_TRIM_TOOLTIP="Return a copy of the text with spaces removed from one or both ends.",t.Msg.TODAY="Today",t.Msg.UNDO="Undo",t.Msg.UNNAMED_KEY="unnamed",t.Msg.VARIABLES_DEFAULT_NAME="item",t.Msg.VARIABLES_GET_CREATE_SET="Create 'set %1'",t.Msg.VARIABLES_GET_HELPURL="https://github.com/google/blockly/wiki/Variables#get",t.Msg.VARIABLES_GET_TOOLTIP="Returns the value of this variable.",t.Msg.VARIABLES_SET="set %1 to %2",t.Msg.VARIABLES_SET_CREATE_GET="Create 'get %1'",t.Msg.VARIABLES_SET_HELPURL="https://github.com/google/blockly/wiki/Variables#set",t.Msg.VARIABLES_SET_TOOLTIP="Sets this variable to be equal to the input.",t.Msg.VARIABLE_ALREADY_EXISTS="A variable named '%1' already exists.",t.Msg.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE="A variable named '%1' already exists for another type: '%2'.",t.Msg.WORKSPACE_ARIA_LABEL="Blockly Workspace",t.Msg.WORKSPACE_COMMENT_DEFAULT_TEXT="Say something...",t.Msg.CONTROLS_FOREACH_INPUT_DO=t.Msg.CONTROLS_REPEAT_INPUT_DO,t.Msg.CONTROLS_FOR_INPUT_DO=t.Msg.CONTROLS_REPEAT_INPUT_DO,t.Msg.CONTROLS_IF_ELSEIF_TITLE_ELSEIF=t.Msg.CONTROLS_IF_MSG_ELSEIF,t.Msg.CONTROLS_IF_ELSE_TITLE_ELSE=t.Msg.CONTROLS_IF_MSG_ELSE,t.Msg.CONTROLS_IF_IF_TITLE_IF=t.Msg.CONTROLS_IF_MSG_IF,t.Msg.CONTROLS_IF_MSG_THEN=t.Msg.CONTROLS_REPEAT_INPUT_DO,t.Msg.CONTROLS_WHILEUNTIL_INPUT_DO=t.Msg.CONTROLS_REPEAT_INPUT_DO,t.Msg.LISTS_CREATE_WITH_ITEM_TITLE=t.Msg.VARIABLES_DEFAULT_NAME,t.Msg.LISTS_GET_INDEX_HELPURL=t.Msg.LISTS_INDEX_OF_HELPURL,t.Msg.LISTS_GET_INDEX_INPUT_IN_LIST=t.Msg.LISTS_INLIST,t.Msg.LISTS_GET_SUBLIST_INPUT_IN_LIST=t.Msg.LISTS_INLIST,t.Msg.LISTS_INDEX_OF_INPUT_IN_LIST=t.Msg.LISTS_INLIST,t.Msg.LISTS_SET_INDEX_INPUT_IN_LIST=t.Msg.LISTS_INLIST,t.Msg.MATH_CHANGE_TITLE_ITEM=t.Msg.VARIABLES_DEFAULT_NAME,t.Msg.PROCEDURES_DEFRETURN_COMMENT=t.Msg.PROCEDURES_DEFNORETURN_COMMENT,t.Msg.PROCEDURES_DEFRETURN_DO=t.Msg.PROCEDURES_DEFNORETURN_DO,t.Msg.PROCEDURES_DEFRETURN_PROCEDURE=t.Msg.PROCEDURES_DEFNORETURN_PROCEDURE,t.Msg.PROCEDURES_DEFRETURN_TITLE=t.Msg.PROCEDURES_DEFNORETURN_TITLE,t.Msg.TEXT_APPEND_VARIABLE=t.Msg.VARIABLES_DEFAULT_NAME,t.Msg.TEXT_CREATE_JOIN_ITEM_TITLE_ITEM=t.Msg.VARIABLES_DEFAULT_NAME,t.Msg.MATH_HUE="230",t.Msg.LOOPS_HUE="120",t.Msg.LISTS_HUE="260",t.Msg.LOGIC_HUE="210",t.Msg.VARIABLES_HUE="330",t.Msg.TEXTS_HUE="160",t.Msg.PROCEDURES_HUE="290",t.Msg.COLOUR_HUE="20",t.Msg.VARIABLES_DYNAMIC_HUE="310",t.Msg}.apply($,_))&&(U.exports=e)},68266:function(U){U.exports=function(){"use strict";var $=navigator.userAgent,m=navigator.platform,C=/gecko\/\d/i.test($),_=/MSIE \d/.test($),e=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec($),t=/Edge\/(\d+)/.exec($),n=_||e||t,r=n&&(_?document.documentMode||6:+(t||e)[1]),s=!t&&/WebKit\//.test($),u=s&&/Qt\/\d+\.\d+/.test($),y=!t&&/Chrome\//.test($),x=/Opera\//.test($),B=/Apple Computer/.test(navigator.vendor),Q=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test($),at=/PhantomJS/.test($),rt=B&&(/Mobile\/\w+/.test($)||navigator.maxTouchPoints>2),St=/Android/.test($),Ht=rt||St||/webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test($),vt=rt||/Mac/.test(m),xt=/\bCrOS\b/.test($),Wt=/win/i.test(m),Jt=x&&$.match(/Version\/(\d*\.\d*)/);Jt&&(Jt=Number(Jt[1])),Jt&&Jt>=15&&(x=!1,s=!0);var Ct=vt&&(u||x&&(null==Jt||Jt<12.11)),yt=C||n&&r>=9;function ot(p){return new RegExp("(^|\\s)"+p+"(?:$|\\s)\\s*")}var ht,mt=function(p,T){var I=p.className,D=ot(T).exec(I);if(D){var N=I.slice(D.index+D[0].length);p.className=I.slice(0,D.index)+(N?D[1]+N:"")}};function lt(p){for(var T=p.childNodes.length;T>0;--T)p.removeChild(p.firstChild);return p}function Ut(p,T){return lt(p).appendChild(T)}function Rt(p,T,I,D){var N=document.createElement(p);if(I&&(N.className=I),D&&(N.style.cssText=D),"string"==typeof T)N.appendChild(document.createTextNode(T));else if(T)for(var Y=0;Y<T.length;++Y)N.appendChild(T[Y]);return N}function Et(p,T,I,D){var N=Rt(p,T,I,D);return N.setAttribute("role","presentation"),N}function nt(p,T){if(3==T.nodeType&&(T=T.parentNode),p.contains)return p.contains(T);do{if(11==T.nodeType&&(T=T.host),T==p)return!0}while(T=T.parentNode)}function he(){var p;try{p=document.activeElement}catch(T){p=document.body||null}for(;p&&p.shadowRoot&&p.shadowRoot.activeElement;)p=p.shadowRoot.activeElement;return p}function Mt(p,T){var I=p.className;ot(T).test(I)||(p.className+=(I?" ":"")+T)}function Nt(p,T){for(var I=p.split(" "),D=0;D<I.length;D++)I[D]&&!ot(I[D]).test(T)&&(T+=" "+I[D]);return T}ht=document.createRange?function(p,T,I,D){var N=document.createRange();return N.setEnd(D||p,I),N.setStart(p,T),N}:function(p,T,I){var D=document.body.createTextRange();try{D.moveToElementText(p.parentNode)}catch(N){return D}return D.collapse(!0),D.moveEnd("character",I),D.moveStart("character",T),D};var de=function(p){p.select()};function ve(p){var T=Array.prototype.slice.call(arguments,1);return function(){return p.apply(null,T)}}function ue(p,T,I){for(var D in T||(T={}),p)p.hasOwnProperty(D)&&(!1!==I||!T.hasOwnProperty(D))&&(T[D]=p[D]);return T}function Be(p,T,I,D,N){null==T&&-1==(T=p.search(/[^\s\u00a0]/))&&(T=p.length);for(var Y=D||0,ut=N||0;;){var Tt=p.indexOf("\t",Y);if(Tt<0||Tt>=T)return ut+(T-Y);ut+=Tt-Y,ut+=I-ut%I,Y=Tt+1}}rt?de=function(p){p.selectionStart=0,p.selectionEnd=p.value.length}:n&&(de=function(p){try{p.select()}catch(T){}});var Ne=function(){this.id=null,this.f=null,this.time=0,this.handler=ve(this.onTimeout,this)};function Qe(p,T){for(var I=0;I<p.length;++I)if(p[I]==T)return I;return-1}Ne.prototype.onTimeout=function(p){p.id=0,p.time<=+new Date?p.f():setTimeout(p.handler,p.time-+new Date)},Ne.prototype.set=function(p,T){this.f=T;var I=+new Date+p;(!this.id||I<this.time)&&(clearTimeout(this.id),this.id=setTimeout(this.handler,p),this.time=I)};var Ze={toString:function(){return"CodeMirror.Pass"}},Le={scroll:!1},gi={origin:"*mouse"},Bt={origin:"+move"};function Te(p,T,I){for(var D=0,N=0;;){var Y=p.indexOf("\t",D);-1==Y&&(Y=p.length);var ut=Y-D;if(Y==p.length||N+ut>=T)return D+Math.min(ut,T-N);if(N+=Y-D,D=Y+1,(N+=I-N%I)>=T)return D}}var $t=[""];function _e(p){for(;$t.length<=p;)$t.push(At($t)+" ");return $t[p]}function At(p){return p[p.length-1]}function pe(p,T){for(var I=[],D=0;D<p.length;D++)I[D]=T(p[D],D);return I}function hi(){}function Ie(p,T){var I;return Object.create?I=Object.create(p):(hi.prototype=p,I=new hi),T&&ue(T,I),I}var te=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;function ee(p){return/\w/.test(p)||p>"\x80"&&(p.toUpperCase()!=p.toLowerCase()||te.test(p))}function ke(p,T){return T?!!(T.source.indexOf("\\w")>-1&&ee(p))||T.test(p):ee(p)}function ne(p){for(var T in p)if(p.hasOwnProperty(T)&&p[T])return!1;return!0}var me=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;function ye(p){return p.charCodeAt(0)>=768&&me.test(p)}function Zt(p,T,I){for(;(I<0?T>0:T<p.length)&&ye(p.charAt(T));)T+=I;return T}function ce(p,T,I){for(var D=T>I?-1:1;;){if(T==I)return T;var N=(T+I)/2,Y=D<0?Math.ceil(N):Math.floor(N);if(Y==T)return p(Y)?T:I;p(Y)?I=Y:T=Y+D}}var ni=null;function Fi(p,T,I){var D;ni=null;for(var N=0;N<p.length;++N){var Y=p[N];if(Y.from<T&&Y.to>T)return N;Y.to==T&&(Y.from!=Y.to&&"before"==I?D=N:ni=N),Y.from==T&&(Y.from!=Y.to&&"before"!=I?D=N:ni=N)}return null!=D?D:ni}var wi=function(){function I(Kt){return Kt<=247?"bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN".charAt(Kt):1424<=Kt&&Kt<=1524?"R":1536<=Kt&&Kt<=1785?"nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111".charAt(Kt-1536):1774<=Kt&&Kt<=2220?"r":8192<=Kt&&Kt<=8203?"w":8204==Kt?"b":"L"}var D=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,N=/[stwN]/,Y=/[LRr]/,ut=/[Lb1n]/,Tt=/[1n]/;function Vt(Kt,Me,Xe){this.level=Kt,this.from=Me,this.to=Xe}return function(Kt,Me){var Xe="ltr"==Me?"L":"R";if(0==Kt.length||"ltr"==Me&&!D.test(Kt))return!1;for(var fi=Kt.length,ci=[],Pi=0;Pi<fi;++Pi)ci.push(I(Kt.charCodeAt(Pi)));for(var Ki=0,an=Xe;Ki<fi;++Ki){var mn=ci[Ki];"m"==mn?ci[Ki]=an:an=mn}for(var Cn=0,dn=Xe;Cn<fi;++Cn){var In=ci[Cn];"1"==In&&"r"==dn?ci[Cn]="n":Y.test(In)&&(dn=In,"r"==In&&(ci[Cn]="R"))}for(var Xn=1,Yn=ci[0];Xn<fi-1;++Xn){var mr=ci[Xn];"+"==mr&&"1"==Yn&&"1"==ci[Xn+1]?ci[Xn]="1":","==mr&&Yn==ci[Xn+1]&&("1"==Yn||"n"==Yn)&&(ci[Xn]=Yn),Yn=mr}for(var fo=0;fo<fi;++fo){var Es=ci[fo];if(","==Es)ci[fo]="N";else if("%"==Es){var Wo=void 0;for(Wo=fo+1;Wo<fi&&"%"==ci[Wo];++Wo);for(var wa=fo&&"!"==ci[fo-1]||Wo<fi&&"1"==ci[Wo]?"1":"N",La=fo;La<Wo;++La)ci[La]=wa;fo=Wo-1}}for(var Ts=0,Xr=Xe;Ts<fi;++Ts){var ks=ci[Ts];"L"==Xr&&"1"==ks?ci[Ts]="L":Y.test(ks)&&(Xr=ks)}for(var as=0;as<fi;++as)if(N.test(ci[as])){var S=void 0;for(S=as+1;S<fi&&N.test(ci[S]);++S);for(var H="L"==(as?ci[as-1]:Xe),et=H==("L"==(S<fi?ci[S]:Xe))?H?"L":"R":Xe,ft=as;ft<S;++ft)ci[ft]=et;as=S-1}for(var jt,Yt=[],re=0;re<fi;)if(ut.test(ci[re])){var Se=re;for(++re;re<fi&&ut.test(ci[re]);++re);Yt.push(new Vt(0,Se,re))}else{var Re=re,ri=Yt.length,ai="rtl"==Me?1:0;for(++re;re<fi&&"L"!=ci[re];++re);for(var pi=Re;pi<re;)if(Tt.test(ci[pi])){Re<pi&&(Yt.splice(ri,0,new Vt(1,Re,pi)),ri+=ai);var Ri=pi;for(++pi;pi<re&&Tt.test(ci[pi]);++pi);Yt.splice(ri,0,new Vt(2,Ri,pi)),ri+=ai,Re=pi}else++pi;Re<re&&Yt.splice(ri,0,new Vt(1,Re,re))}return"ltr"==Me&&(1==Yt[0].level&&(jt=Kt.match(/^\s+/))&&(Yt[0].from=jt[0].length,Yt.unshift(new Vt(0,0,jt[0].length))),1==At(Yt).level&&(jt=Kt.match(/\s+$/))&&(At(Yt).to-=jt[0].length,Yt.push(new Vt(0,fi-jt[0].length,fi)))),"rtl"==Me?Yt.reverse():Yt}}();function yi(p,T){var I=p.order;return null==I&&(I=p.order=wi(p.text,T)),I}var pn=[],mi=function(p,T,I){if(p.addEventListener)p.addEventListener(T,I,!1);else if(p.attachEvent)p.attachEvent("on"+T,I);else{var D=p._handlers||(p._handlers={});D[T]=(D[T]||pn).concat(I)}};function Zi(p,T){return p._handlers&&p._handlers[T]||pn}function Ce(p,T,I){if(p.removeEventListener)p.removeEventListener(T,I,!1);else if(p.detachEvent)p.detachEvent("on"+T,I);else{var D=p._handlers,N=D&&D[T];if(N){var Y=Qe(N,I);Y>-1&&(D[T]=N.slice(0,Y).concat(N.slice(Y+1)))}}}function Oe(p,T){var I=Zi(p,T);if(I.length)for(var D=Array.prototype.slice.call(arguments,2),N=0;N<I.length;++N)I[N].apply(null,D)}function Ci(p,T,I){return"string"==typeof T&&(T={type:T,preventDefault:function(){this.defaultPrevented=!0}}),Oe(p,I||T.type,p,T),fe(T)||T.codemirrorIgnore}function je(p){var T=p._handlers&&p._handlers.cursorActivity;if(T)for(var I=p.curOp.cursorActivityHandlers||(p.curOp.cursorActivityHandlers=[]),D=0;D<T.length;++D)-1==Qe(I,T[D])&&I.push(T[D])}function Ii(p,T){return Zi(p,T).length>0}function _i(p){p.prototype.on=function(T,I){mi(this,T,I)},p.prototype.off=function(T,I){Ce(this,T,I)}}function Ui(p){p.preventDefault?p.preventDefault():p.returnValue=!1}function $e(p){p.stopPropagation?p.stopPropagation():p.cancelBubble=!0}function fe(p){return null!=p.defaultPrevented?p.defaultPrevented:0==p.returnValue}function kt(p){Ui(p),$e(p)}function ct(p){return p.target||p.srcElement}function Lt(p){var T=p.which;return null==T&&(1&p.button?T=1:2&p.button?T=3:4&p.button&&(T=2)),vt&&p.ctrlKey&&1==T&&(T=3),T}var Ae,Qi,ae=function(){if(n&&r<9)return!1;var p=Rt("div");return"draggable"in p||"dragDrop"in p}();function Wi(p){if(null==Ae){var T=Rt("span","\u200b");Ut(p,Rt("span",[T,document.createTextNode("x")])),0!=p.firstChild.offsetHeight&&(Ae=T.offsetWidth<=1&&T.offsetHeight>2&&!(n&&r<8))}var I=Ae?Rt("span","\u200b"):Rt("span","\xa0",null,"display: inline-block; width: 1px; margin-right: -1px");return I.setAttribute("cm-text",""),I}function yn(p){if(null!=Qi)return Qi;var T=Ut(p,document.createTextNode("A\u062eA")),I=ht(T,0,1).getBoundingClientRect(),D=ht(T,1,2).getBoundingClientRect();return lt(p),!(!I||I.left==I.right)&&(Qi=D.right-I.right<3)}var p,tr=3!="\n\nb".split(/\n/).length?function(p){for(var T=0,I=[],D=p.length;T<=D;){var N=p.indexOf("\n",T);-1==N&&(N=p.length);var Y=p.slice(T,"\r"==p.charAt(N-1)?N-1:N),ut=Y.indexOf("\r");-1!=ut?(I.push(Y.slice(0,ut)),T+=ut+1):(I.push(Y),T=N+1)}return I}:function(p){return p.split(/\r\n?|\n/)},li=window.getSelection?function(p){try{return p.selectionStart!=p.selectionEnd}catch(T){return!1}}:function(p){var T;try{T=p.ownerDocument.selection.createRange()}catch(I){}return!(!T||T.parentElement()!=p)&&0!=T.compareEndPoints("StartToEnd",T)},Je="oncopy"in(p=Rt("div"))||(p.setAttribute("oncopy","return;"),"function"==typeof p.oncopy),xe=null;var ki={},fn={};function An(p,T){arguments.length>2&&(T.dependencies=Array.prototype.slice.call(arguments,2)),ki[p]=T}function Tr(p){if("string"==typeof p&&fn.hasOwnProperty(p))p=fn[p];else if(p&&"string"==typeof p.name&&fn.hasOwnProperty(p.name)){var T=fn[p.name];"string"==typeof T&&(T={name:T}),(p=Ie(T,p)).name=T.name}else{if("string"==typeof p&&/^[\w\-]+\/[\w\-]+\+xml$/.test(p))return Tr("application/xml");if("string"==typeof p&&/^[\w\-]+\/[\w\-]+\+json$/.test(p))return Tr("application/json")}return"string"==typeof p?{name:p}:p||{name:"null"}}function eo(p,T){T=Tr(T);var I=ki[T.name];if(!I)return eo(p,"text/plain");var D=I(p,T);if(no.hasOwnProperty(T.name)){var N=no[T.name];for(var Y in N)!N.hasOwnProperty(Y)||(D.hasOwnProperty(Y)&&(D["_"+Y]=D[Y]),D[Y]=N[Y])}if(D.name=T.name,T.helperType&&(D.helperType=T.helperType),T.modeProps)for(var ut in T.modeProps)D[ut]=T.modeProps[ut];return D}var no={};function mo(p,T){ue(T,no.hasOwnProperty(p)?no[p]:no[p]={})}function kr(p,T){if(!0===T)return T;if(p.copyState)return p.copyState(T);var I={};for(var D in T){var N=T[D];N instanceof Array&&(N=N.concat([])),I[D]=N}return I}function ur(p,T){for(var I;p.innerMode&&(I=p.innerMode(T))&&I.mode!=p;)T=I.state,p=I.mode;return I||{mode:p,state:T}}function Mo(p,T,I){return!p.startState||p.startState(T,I)}var sr=function(p,T,I){this.pos=this.start=0,this.string=p,this.tabSize=T||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0,this.lineOracle=I};function Ai(p,T){if((T-=p.first)<0||T>=p.size)throw new Error("There is no line "+(T+p.first)+" in the document.");for(var I=p;!I.lines;)for(var D=0;;++D){var N=I.children[D],Y=N.chunkSize();if(T<Y){I=N;break}T-=Y}return I.lines[T]}function Vn(p,T,I){var D=[],N=T.line;return p.iter(T.line,I.line+1,function(Y){var ut=Y.text;N==I.line&&(ut=ut.slice(0,I.ch)),N==T.line&&(ut=ut.slice(T.ch)),D.push(ut),++N}),D}function gr(p,T,I){var D=[];return p.iter(T,I,function(N){D.push(N.text)}),D}function Br(p,T){var I=T-p.height;if(I)for(var D=p;D;D=D.parent)D.height+=I}function pr(p){if(null==p.parent)return null;for(var T=p.parent,I=Qe(T.lines,p),D=T.parent;D;T=D,D=D.parent)for(var N=0;D.children[N]!=T;++N)I+=D.children[N].chunkSize();return I+T.first}function Dr(p,T){var I=p.first;t:do{for(var D=0;D<p.children.length;++D){var N=p.children[D],Y=N.height;if(T<Y){p=N;continue t}T-=Y,I+=N.chunkSize()}return I}while(!p.lines);for(var ut=0;ut<p.lines.length;++ut){var Vt=p.lines[ut].height;if(T<Vt)break;T-=Vt}return I+ut}function Qr(p,T){return T>=p.first&&T<p.first+p.size}function Ir(p,T){return String(p.lineNumberFormatter(T+p.firstLineNumber))}function Vi(p,T,I){if(void 0===I&&(I=null),!(this instanceof Vi))return new Vi(p,T,I);this.line=p,this.ch=T,this.sticky=I}function Sn(p,T){return p.line-T.line||p.ch-T.ch}function Gn(p,T){return p.sticky==T.sticky&&0==Sn(p,T)}function oe(p){return Vi(p.line,p.ch)}function He(p,T){return Sn(p,T)<0?T:p}function Oi(p,T){return Sn(p,T)<0?p:T}function Ji(p,T){return Math.max(p.first,Math.min(T,p.first+p.size-1))}function Yi(p,T){if(T.line<p.first)return Vi(p.first,0);var I=p.first+p.size-1;return T.line>I?Vi(I,Ai(p,I).text.length):function(p,T){var I=p.ch;return null==I||I>T?Vi(p.line,T):I<0?Vi(p.line,0):p}(T,Ai(p,T.line).text.length)}function zn(p,T){for(var I=[],D=0;D<T.length;D++)I[D]=Yi(p,T[D]);return I}sr.prototype.eol=function(){return this.pos>=this.string.length},sr.prototype.sol=function(){return this.pos==this.lineStart},sr.prototype.peek=function(){return this.string.charAt(this.pos)||void 0},sr.prototype.next=function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},sr.prototype.eat=function(p){var T=this.string.charAt(this.pos);if("string"==typeof p?T==p:T&&(p.test?p.test(T):p(T)))return++this.pos,T},sr.prototype.eatWhile=function(p){for(var T=this.pos;this.eat(p););return this.pos>T},sr.prototype.eatSpace=function(){for(var p=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>p},sr.prototype.skipToEnd=function(){this.pos=this.string.length},sr.prototype.skipTo=function(p){var T=this.string.indexOf(p,this.pos);if(T>-1)return this.pos=T,!0},sr.prototype.backUp=function(p){this.pos-=p},sr.prototype.column=function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=Be(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?Be(this.string,this.lineStart,this.tabSize):0)},sr.prototype.indentation=function(){return Be(this.string,null,this.tabSize)-(this.lineStart?Be(this.string,this.lineStart,this.tabSize):0)},sr.prototype.match=function(p,T,I){if("string"!=typeof p){var Y=this.string.slice(this.pos).match(p);return Y&&Y.index>0?null:(Y&&!1!==T&&(this.pos+=Y[0].length),Y)}var D=function(ut){return I?ut.toLowerCase():ut};if(D(this.string.substr(this.pos,p.length))==D(p))return!1!==T&&(this.pos+=p.length),!0},sr.prototype.current=function(){return this.string.slice(this.start,this.pos)},sr.prototype.hideFirstChars=function(p,T){this.lineStart+=p;try{return T()}finally{this.lineStart-=p}},sr.prototype.lookAhead=function(p){var T=this.lineOracle;return T&&T.lookAhead(p)},sr.prototype.baseToken=function(){var p=this.lineOracle;return p&&p.baseToken(this.pos)};var nr=function(p,T){this.state=p,this.lookAhead=T},Fn=function(p,T,I,D){this.state=T,this.doc=p,this.line=I,this.maxLookAhead=D||0,this.baseTokens=null,this.baseTokenPos=1};function Ao(p,T,I,D){var N=[p.state.modeGen],Y={};ws(p,T.text,p.doc.mode,I,function(Kt,Me){return N.push(Kt,Me)},Y,D);for(var ut=I.state,Tt=function(Kt){I.baseTokens=N;var Me=p.state.overlays[Kt],Xe=1,fi=0;I.state=!0,ws(p,T.text,Me.mode,I,function(ci,Pi){for(var Ki=Xe;fi<ci;){var an=N[Xe];an>ci&&N.splice(Xe,1,ci,N[Xe+1],an),Xe+=2,fi=Math.min(ci,an)}if(Pi)if(Me.opaque)N.splice(Ki,Xe-Ki,ci,"overlay "+Pi),Xe=Ki+2;else for(;Ki<Xe;Ki+=2){var mn=N[Ki+1];N[Ki+1]=(mn?mn+" ":"")+"overlay "+Pi}},Y),I.state=ut,I.baseTokens=null,I.baseTokenPos=1},Vt=0;Vt<p.state.overlays.length;++Vt)Tt(Vt);return{styles:N,classes:Y.bgClass||Y.textClass?Y:null}}function jo(p,T,I){if(!T.styles||T.styles[0]!=p.state.modeGen){var D=ro(p,pr(T)),N=T.text.length>p.options.maxHighlightLength&&kr(p.doc.mode,D.state),Y=Ao(p,T,D);N&&(D.state=N),T.stateAfter=D.save(!N),T.styles=Y.styles,Y.classes?T.styleClasses=Y.classes:T.styleClasses&&(T.styleClasses=null),I===p.doc.highlightFrontier&&(p.doc.modeFrontier=Math.max(p.doc.modeFrontier,++p.doc.highlightFrontier))}return T.styles}function ro(p,T,I){var D=p.doc,N=p.display;if(!D.mode.startState)return new Fn(D,!0,T);var Y=function(p,T,I){for(var D,N,Y=p.doc,ut=I?-1:T-(p.doc.mode.innerMode?1e3:100),Tt=T;Tt>ut;--Tt){if(Tt<=Y.first)return Y.first;var Vt=Ai(Y,Tt-1),Kt=Vt.stateAfter;if(Kt&&(!I||Tt+(Kt instanceof nr?Kt.lookAhead:0)<=Y.modeFrontier))return Tt;var Me=Be(Vt.text,null,p.options.tabSize);(null==N||D>Me)&&(N=Tt-1,D=Me)}return N}(p,T,I),ut=Y>D.first&&Ai(D,Y-1).stateAfter,Tt=ut?Fn.fromSaved(D,ut,Y):new Fn(D,Mo(D.mode),Y);return D.iter(Y,T,function(Vt){_o(p,Vt.text,Tt);var Kt=Tt.line;Vt.stateAfter=Kt==T-1||Kt%5==0||Kt>=N.viewFrom&&Kt<N.viewTo?Tt.save():null,Tt.nextLine()}),I&&(D.modeFrontier=Tt.line),Tt}function _o(p,T,I,D){var N=p.doc.mode,Y=new sr(T,p.options.tabSize,I);for(Y.start=Y.pos=D||0,""==T&&Zs(N,I.state);!Y.eol();)lr(N,Y,I.state),Y.start=Y.pos}function Zs(p,T){if(p.blankLine)return p.blankLine(T);if(p.innerMode){var I=ur(p,T);if(I.mode.blankLine)return I.mode.blankLine(I.state)}}function lr(p,T,I,D){for(var N=0;N<10;N++){D&&(D[0]=ur(p,I).mode);var Y=p.token(T,I);if(T.pos>T.start)return Y}throw new Error("Mode "+p.name+" failed to advance stream.")}Fn.prototype.lookAhead=function(p){var T=this.doc.getLine(this.line+p);return null!=T&&p>this.maxLookAhead&&(this.maxLookAhead=p),T},Fn.prototype.baseToken=function(p){if(!this.baseTokens)return null;for(;this.baseTokens[this.baseTokenPos]<=p;)this.baseTokenPos+=2;var T=this.baseTokens[this.baseTokenPos+1];return{type:T&&T.replace(/( |^)overlay .*/,""),size:this.baseTokens[this.baseTokenPos]-p}},Fn.prototype.nextLine=function(){this.line++,this.maxLookAhead>0&&this.maxLookAhead--},Fn.fromSaved=function(p,T,I){return T instanceof nr?new Fn(p,kr(p.mode,T.state),I,T.lookAhead):new Fn(p,kr(p.mode,T),I)},Fn.prototype.save=function(p){var T=!1!==p?kr(this.doc.mode,this.state):this.state;return this.maxLookAhead>0?new nr(T,this.maxLookAhead):T};var Yo=function(p,T,I){this.start=p.start,this.end=p.pos,this.string=p.current(),this.type=T||null,this.state=I};function Jr(p,T,I,D){var ut,Me,N=p.doc,Y=N.mode,Tt=Ai(N,(T=Yi(N,T)).line),Vt=ro(p,T.line,I),Kt=new sr(Tt.text,p.options.tabSize,Vt);for(D&&(Me=[]);(D||Kt.pos<T.ch)&&!Kt.eol();)Kt.start=Kt.pos,ut=lr(Y,Kt,Vt.state),D&&Me.push(new Yo(Kt,ut,kr(N.mode,Vt.state)));return D?Me:new Yo(Kt,ut,Vt.state)}function Ss(p,T){if(p)for(;;){var I=p.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!I)break;p=p.slice(0,I.index)+p.slice(I.index+I[0].length);var D=I[1]?"bgClass":"textClass";null==T[D]?T[D]=I[2]:new RegExp("(?:^|\\s)"+I[2]+"(?:$|\\s)").test(T[D])||(T[D]+=" "+I[2])}return p}function ws(p,T,I,D,N,Y,ut){var Tt=I.flattenSpans;null==Tt&&(Tt=p.options.flattenSpans);var Xe,Vt=0,Kt=null,Me=new sr(T,p.options.tabSize,D),fi=p.options.addModeClass&&[null];for(""==T&&Ss(Zs(I,D.state),Y);!Me.eol();){if(Me.pos>p.options.maxHighlightLength?(Tt=!1,ut&&_o(p,T,D,Me.pos),Me.pos=T.length,Xe=null):Xe=Ss(lr(I,Me,D.state,fi),Y),fi){var ci=fi[0].name;ci&&(Xe="m-"+(Xe?ci+" "+Xe:ci))}if(!Tt||Kt!=Xe){for(;Vt<Me.start;)N(Vt=Math.min(Me.start,Vt+5e3),Kt);Kt=Xe}Me.start=Me.pos}for(;Vt<Me.pos;){var Pi=Math.min(Me.pos,Vt+5e3);N(Pi,Kt),Vt=Pi}}var ns=!1,Ho=!1;function Ka(p,T,I){this.marker=p,this.from=T,this.to=I}function Qo(p,T){if(p)for(var I=0;I<p.length;++I){var D=p[I];if(D.marker==T)return D}}function ga(p,T){for(var I,D=0;D<p.length;++D)p[D]!=T&&(I||(I=[])).push(p[D]);return I}function Bs(p,T){if(T.full)return null;var I=Qr(p,T.from.line)&&Ai(p,T.from.line).markedSpans,D=Qr(p,T.to.line)&&Ai(p,T.to.line).markedSpans;if(!I&&!D)return null;var N=T.from.ch,Y=T.to.ch,ut=0==Sn(T.from,T.to),Tt=function(p,T,I){var D;if(p)for(var N=0;N<p.length;++N){var Y=p[N],ut=Y.marker;null!=Y.from&&!(ut.inclusiveLeft?Y.from<=T:Y.from<T)&&(Y.from!=T||"bookmark"!=ut.type||I&&Y.marker.insertLeft)||(D||(D=[])).push(new Ka(ut,Y.from,null==Y.to||(ut.inclusiveRight?Y.to>=T:Y.to>T)?null:Y.to))}return D}(I,N,ut),Vt=function(p,T,I){var D;if(p)for(var N=0;N<p.length;++N){var Y=p[N],ut=Y.marker;(null==Y.to||(ut.inclusiveRight?Y.to>=T:Y.to>T)||Y.from==T&&"bookmark"==ut.type&&(!I||Y.marker.insertLeft))&&(D||(D=[])).push(new Ka(ut,null==Y.from||(ut.inclusiveLeft?Y.from<=T:Y.from<T)?null:Y.from-T,null==Y.to?null:Y.to-T))}return D}(D,Y,ut),Kt=1==T.text.length,Me=At(T.text).length+(Kt?N:0);if(Tt)for(var Xe=0;Xe<Tt.length;++Xe){var fi=Tt[Xe];if(null==fi.to){var ci=Qo(Vt,fi.marker);ci?Kt&&(fi.to=null==ci.to?null:ci.to+Me):fi.to=N}}if(Vt)for(var Pi=0;Pi<Vt.length;++Pi){var Ki=Vt[Pi];null!=Ki.to&&(Ki.to+=Me),null==Ki.from?Qo(Tt,Ki.marker)||(Ki.from=Me,Kt&&(Tt||(Tt=[])).push(Ki)):(Ki.from+=Me,Kt&&(Tt||(Tt=[])).push(Ki))}Tt&&(Tt=fs(Tt)),Vt&&Vt!=Tt&&(Vt=fs(Vt));var mn=[Tt];if(!Kt){var dn,Cn=T.text.length-2;if(Cn>0&&Tt)for(var In=0;In<Tt.length;++In)null==Tt[In].to&&(dn||(dn=[])).push(new Ka(Tt[In].marker,null,null));for(var Xn=0;Xn<Cn;++Xn)mn.push(dn);mn.push(Vt)}return mn}function fs(p){for(var T=0;T<p.length;++T){var I=p[T];null!=I.from&&I.from==I.to&&!1!==I.marker.clearWhenEmpty&&p.splice(T--,1)}return p.length?p:null}function ma(p){var T=p.markedSpans;if(T){for(var I=0;I<T.length;++I)T[I].marker.detachLine(p);p.markedSpans=null}}function Qs(p,T){if(T){for(var I=0;I<T.length;++I)T[I].marker.attachLine(p);p.markedSpans=T}}function Oo(p){return p.inclusiveLeft?-1:0}function zr(p){return p.inclusiveRight?1:0}function ao(p,T){var I=p.lines.length-T.lines.length;if(0!=I)return I;var D=p.find(),N=T.find(),Y=Sn(D.from,N.from)||Oo(p)-Oo(T);return Y?-Y:Sn(D.to,N.to)||zr(p)-zr(T)||T.id-p.id}function yo(p,T){var D,I=Ho&&p.markedSpans;if(I)for(var N=void 0,Y=0;Y<I.length;++Y)(N=I[Y]).marker.collapsed&&null==(T?N.from:N.to)&&(!D||ao(D,N.marker)<0)&&(D=N.marker);return D}function Hs(p){return yo(p,!0)}function Xo(p){return yo(p,!1)}function Rs(p,T){var D,I=Ho&&p.markedSpans;if(I)for(var N=0;N<I.length;++N){var Y=I[N];Y.marker.collapsed&&(null==Y.from||Y.from<T)&&(null==Y.to||Y.to>T)&&(!D||ao(D,Y.marker)<0)&&(D=Y.marker)}return D}function zo(p,T,I,D,N){var Y=Ai(p,T),ut=Ho&&Y.markedSpans;if(ut)for(var Tt=0;Tt<ut.length;++Tt){var Vt=ut[Tt];if(Vt.marker.collapsed){var Kt=Vt.marker.find(0),Me=Sn(Kt.from,I)||Oo(Vt.marker)-Oo(N),Xe=Sn(Kt.to,D)||zr(Vt.marker)-zr(N);if(!(Me>=0&&Xe<=0||Me<=0&&Xe>=0)&&(Me<=0&&(Vt.marker.inclusiveRight&&N.inclusiveLeft?Sn(Kt.to,I)>=0:Sn(Kt.to,I)>0)||Me>=0&&(Vt.marker.inclusiveRight&&N.inclusiveLeft?Sn(Kt.from,D)<=0:Sn(Kt.from,D)<0)))return!0}}}function xo(p){for(var T;T=Hs(p);)p=T.find(-1,!0).line;return p}function lo(p,T){var I=Ai(p,T),D=xo(I);return I==D?T:pr(D)}function gs(p,T){if(T>p.lastLine())return T;var D,I=Ai(p,T);if(!Lr(p,I))return T;for(;D=Xo(I);)I=D.find(1,!0).line;return pr(I)+1}function Lr(p,T){var I=Ho&&T.markedSpans;if(I)for(var D=void 0,N=0;N<I.length;++N)if((D=I[N]).marker.collapsed){if(null==D.from)return!0;if(!D.marker.widgetNode&&0==D.from&&D.marker.inclusiveLeft&&aa(p,T,D))return!0}}function aa(p,T,I){if(null==I.to){var D=I.marker.find(1,!0);return aa(p,D.line,Qo(D.line.markedSpans,I.marker))}if(I.marker.inclusiveRight&&I.to==T.text.length)return!0;for(var N=void 0,Y=0;Y<T.markedSpans.length;++Y)if((N=T.markedSpans[Y]).marker.collapsed&&!N.marker.widgetNode&&N.from==I.to&&(null==N.to||N.to!=I.from)&&(N.marker.inclusiveLeft||I.marker.inclusiveRight)&&aa(p,T,N))return!0}function jr(p){for(var T=0,I=(p=xo(p)).parent,D=0;D<I.lines.length;++D){var N=I.lines[D];if(N==p)break;T+=N.height}for(var Y=I.parent;Y;Y=(I=Y).parent)for(var ut=0;ut<Y.children.length;++ut){var Tt=Y.children[ut];if(Tt==I)break;T+=Tt.height}return T}function la(p){if(0==p.height)return 0;for(var I,T=p.text.length,D=p;I=Hs(D);){var N=I.find(0,!0);D=N.from.line,T+=N.from.ch-N.to.ch}for(D=p;I=Xo(D);){var Y=I.find(0,!0);T-=D.text.length-Y.from.ch,T+=(D=Y.to.line).text.length-Y.to.ch}return T}function vl(p){var T=p.display,I=p.doc;T.maxLine=Ai(I,I.first),T.maxLineLength=la(T.maxLine),T.maxLineChanged=!0,I.iter(function(D){var N=la(D);N>T.maxLineLength&&(T.maxLineLength=N,T.maxLine=D)})}var us=function(p,T,I){this.text=p,Qs(this,T),this.height=I?I(this):1};function ms(p){p.parent=null,ma(p)}us.prototype.lineNo=function(){return pr(this)},_i(us);var bl={},Nr={};function xn(p,T){if(!p||/^\s*$/.test(p))return null;var I=T.addModeClass?Nr:bl;return I[p]||(I[p]=p.replace(/\S+/g,"cm-$&"))}function _a(p,T){var I=Et("span",null,null,s?"padding-right: .1px":null),D={pre:Et("pre",[I],"CodeMirror-line"),content:I,col:0,pos:0,cm:p,trailingSpace:!1,splitSpaces:p.getOption("lineWrapping")};T.measure={};for(var N=0;N<=(T.rest?T.rest.length:0);N++){var Y=N?T.rest[N-1]:T.line,ut=void 0;D.pos=0,D.addToken=Z,yn(p.display.measure)&&(ut=yi(Y,p.doc.direction))&&(D.addToken=z(D.addToken,ut)),D.map=[],Fe(Y,D,jo(p,Y,T!=p.display.externalMeasured&&pr(Y))),Y.styleClasses&&(Y.styleClasses.bgClass&&(D.bgClass=Nt(Y.styleClasses.bgClass,D.bgClass||"")),Y.styleClasses.textClass&&(D.textClass=Nt(Y.styleClasses.textClass,D.textClass||""))),0==D.map.length&&D.map.push(0,0,D.content.appendChild(Wi(p.display.measure))),0==N?(T.measure.map=D.map,T.measure.cache={}):((T.measure.maps||(T.measure.maps=[])).push(D.map),(T.measure.caches||(T.measure.caches=[])).push({}))}if(s){var Vt=D.content.lastChild;(/\bcm-tab\b/.test(Vt.className)||Vt.querySelector&&Vt.querySelector(".cm-tab"))&&(D.content.className="cm-tab-wrap-hack")}return Oe(p,"renderLine",p,T.line,D.pre),D.pre.className&&(D.textClass=Nt(D.pre.className,D.textClass||"")),D}function Ot(p){var T=Rt("span","\u2022","cm-invalidchar");return T.title="\\u"+p.charCodeAt(0).toString(16),T.setAttribute("aria-label",T.title),T}function Z(p,T,I,D,N,Y,ut){if(T){var Me,Tt=p.splitSpaces?function(p,T){if(p.length>1&&!/  /.test(p))return p;for(var I=T,D="",N=0;N<p.length;N++){var Y=p.charAt(N);" "==Y&&I&&(N==p.length-1||32==p.charCodeAt(N+1))&&(Y="\xa0"),D+=Y,I=" "==Y}return D}(T,p.trailingSpace):T,Vt=p.cm.state.specialChars,Kt=!1;if(Vt.test(T)){Me=document.createDocumentFragment();for(var Xe=0;;){Vt.lastIndex=Xe;var fi=Vt.exec(T),ci=fi?fi.index-Xe:T.length-Xe;if(ci){var Pi=document.createTextNode(Tt.slice(Xe,Xe+ci));Me.appendChild(n&&r<9?Rt("span",[Pi]):Pi),p.map.push(p.pos,p.pos+ci,Pi),p.col+=ci,p.pos+=ci}if(!fi)break;Xe+=ci+1;var Ki=void 0;if("\t"==fi[0]){var an=p.cm.options.tabSize,mn=an-p.col%an;(Ki=Me.appendChild(Rt("span",_e(mn),"cm-tab"))).setAttribute("role","presentation"),Ki.setAttribute("cm-text","\t"),p.col+=mn}else"\r"==fi[0]||"\n"==fi[0]?((Ki=Me.appendChild(Rt("span","\r"==fi[0]?"\u240d":"\u2424","cm-invalidchar"))).setAttribute("cm-text",fi[0]),p.col+=1):((Ki=p.cm.options.specialCharPlaceholder(fi[0])).setAttribute("cm-text",fi[0]),Me.appendChild(n&&r<9?Rt("span",[Ki]):Ki),p.col+=1);p.map.push(p.pos,p.pos+1,Ki),p.pos++}}else p.col+=T.length,Me=document.createTextNode(Tt),p.map.push(p.pos,p.pos+T.length,Me),n&&r<9&&(Kt=!0),p.pos+=T.length;if(p.trailingSpace=32==Tt.charCodeAt(T.length-1),I||D||N||Kt||Y||ut){var Cn=I||"";D&&(Cn+=D),N&&(Cn+=N);var dn=Rt("span",[Me],Cn,Y);if(ut)for(var In in ut)ut.hasOwnProperty(In)&&"style"!=In&&"class"!=In&&dn.setAttribute(In,ut[In]);return p.content.appendChild(dn)}p.content.appendChild(Me)}}function z(p,T){return function(I,D,N,Y,ut,Tt,Vt){N=N?N+" cm-force-border":"cm-force-border";for(var Kt=I.pos,Me=Kt+D.length;;){for(var Xe=void 0,fi=0;fi<T.length&&!((Xe=T[fi]).to>Kt&&Xe.from<=Kt);fi++);if(Xe.to>=Me)return p(I,D,N,Y,ut,Tt,Vt);p(I,D.slice(0,Xe.to-Kt),N,Y,null,Tt,Vt),Y=null,D=D.slice(Xe.to-Kt),Kt=Xe.to}}}function It(p,T,I,D){var N=!D&&I.widgetNode;N&&p.map.push(p.pos,p.pos+T,N),!D&&p.cm.display.input.needsContentAttribute&&(N||(N=p.content.appendChild(document.createElement("span"))),N.setAttribute("cm-marker",I.id)),N&&(p.cm.display.input.setUneditable(N),p.content.appendChild(N)),p.pos+=T,p.trailingSpace=!1}function Fe(p,T,I){var D=p.markedSpans,N=p.text,Y=0;if(D)for(var Xe,fi,Pi,Ki,an,mn,Cn,Tt=N.length,Vt=0,Kt=1,Me="",ci=0;;){if(ci==Vt){Pi=Ki=an=fi="",Cn=null,mn=null,ci=1/0;for(var dn=[],In=void 0,Xn=0;Xn<D.length;++Xn){var Yn=D[Xn],mr=Yn.marker;if("bookmark"==mr.type&&Yn.from==Vt&&mr.widgetNode)dn.push(mr);else if(Yn.from<=Vt&&(null==Yn.to||Yn.to>Vt||mr.collapsed&&Yn.to==Vt&&Yn.from==Vt)){if(null!=Yn.to&&Yn.to!=Vt&&ci>Yn.to&&(ci=Yn.to,Ki=""),mr.className&&(Pi+=" "+mr.className),mr.css&&(fi=(fi?fi+";":"")+mr.css),mr.startStyle&&Yn.from==Vt&&(an+=" "+mr.startStyle),mr.endStyle&&Yn.to==ci&&(In||(In=[])).push(mr.endStyle,Yn.to),mr.title&&((Cn||(Cn={})).title=mr.title),mr.attributes)for(var fo in mr.attributes)(Cn||(Cn={}))[fo]=mr.attributes[fo];mr.collapsed&&(!mn||ao(mn.marker,mr)<0)&&(mn=Yn)}else Yn.from>Vt&&ci>Yn.from&&(ci=Yn.from)}if(In)for(var Es=0;Es<In.length;Es+=2)In[Es+1]==ci&&(Ki+=" "+In[Es]);if(!mn||mn.from==Vt)for(var Wo=0;Wo<dn.length;++Wo)It(T,0,dn[Wo]);if(mn&&(mn.from||0)==Vt){if(It(T,(null==mn.to?Tt+1:mn.to)-Vt,mn.marker,null==mn.from),null==mn.to)return;mn.to==Vt&&(mn=!1)}}if(Vt>=Tt)break;for(var wa=Math.min(Tt,ci);;){if(Me){var La=Vt+Me.length;if(!mn){var Ts=La>wa?Me.slice(0,wa-Vt):Me;T.addToken(T,Ts,Xe?Xe+Pi:Pi,an,Vt+Ts.length==ci?Ki:"",fi,Cn)}if(La>=wa){Me=Me.slice(wa-Vt),Vt=wa;break}Vt=La,an=""}Me=N.slice(Y,Y=I[Kt++]),Xe=xn(I[Kt++],T.cm.options)}}else for(var ut=1;ut<I.length;ut+=2)T.addToken(T,N.slice(Y,Y=I[ut]),xn(I[ut+1],T.cm.options))}function bi(p,T,I){this.line=T,this.rest=function(p){for(var T,I;T=Xo(p);)p=T.find(1,!0).line,(I||(I=[])).push(p);return I}(T),this.size=this.rest?pr(At(this.rest))-I+1:1,this.node=this.text=null,this.hidden=Lr(p,T)}function cn(p,T,I){for(var N,D=[],Y=T;Y<I;Y=N){var ut=new bi(p.doc,Ai(p.doc,Y),Y);N=Y+ut.size,D.push(ut)}return D}var jn=null;var io=null;function hr(p,T){var I=Zi(p,T);if(I.length){var N,D=Array.prototype.slice.call(arguments,2);jn?N=jn.delayedCallbacks:io?N=io:(N=io=[],setTimeout(qo,0));for(var Y=function(Tt){N.push(function(){return I[Tt].apply(null,D)})},ut=0;ut<I.length;++ut)Y(ut)}}function qo(){var p=io;io=null;for(var T=0;T<p.length;++T)p[T]()}function Hn(p,T,I,D){for(var N=0;N<T.changes.length;N++){var Y=T.changes[N];"text"==Y?ll(p,T):"gutter"==Y?qs(p,T,I,D):"class"==Y?Vs(p,T):"widget"==Y&&Bc(p,T,D)}T.changes=null}function Us(p){return p.node==p.text&&(p.node=Rt("div",null,null,"position: relative"),p.text.parentNode&&p.text.parentNode.replaceChild(p.node,p.text),p.node.appendChild(p.text),n&&r<8&&(p.node.style.zIndex=2)),p.node}function ts(p,T){var I=p.display.externalMeasured;return I&&I.line==T.line?(p.display.externalMeasured=null,T.measure=I.measure,I.built):_a(p,T)}function ll(p,T){var I=T.text.className,D=ts(p,T);T.text==T.node&&(T.node=D.pre),T.text.parentNode.replaceChild(D.pre,T.text),T.text=D.pre,D.bgClass!=T.bgClass||D.textClass!=T.textClass?(T.bgClass=D.bgClass,T.textClass=D.textClass,Vs(p,T)):I&&(T.text.className=I)}function Vs(p,T){(function(p,T){var I=T.bgClass?T.bgClass+" "+(T.line.bgClass||""):T.line.bgClass;if(I&&(I+=" CodeMirror-linebackground"),T.background)I?T.background.className=I:(T.background.parentNode.removeChild(T.background),T.background=null);else if(I){var D=Us(T);T.background=D.insertBefore(Rt("div",null,I),D.firstChild),p.display.input.setUneditable(T.background)}})(p,T),T.line.wrapClass?Us(T).className=T.line.wrapClass:T.node!=T.text&&(T.node.className=""),T.text.className=(T.textClass?T.textClass+" "+(T.line.textClass||""):T.line.textClass)||""}function qs(p,T,I,D){if(T.gutter&&(T.node.removeChild(T.gutter),T.gutter=null),T.gutterBackground&&(T.node.removeChild(T.gutterBackground),T.gutterBackground=null),T.line.gutterClass){var N=Us(T);T.gutterBackground=Rt("div",null,"CodeMirror-gutter-background "+T.line.gutterClass,"left: "+(p.options.fixedGutter?D.fixedPos:-D.gutterTotalWidth)+"px; width: "+D.gutterTotalWidth+"px"),p.display.input.setUneditable(T.gutterBackground),N.insertBefore(T.gutterBackground,T.text)}var Y=T.line.gutterMarkers;if(p.options.lineNumbers||Y){var ut=Us(T),Tt=T.gutter=Rt("div",null,"CodeMirror-gutter-wrapper","left: "+(p.options.fixedGutter?D.fixedPos:-D.gutterTotalWidth)+"px");if(Tt.setAttribute("aria-hidden","true"),p.display.input.setUneditable(Tt),ut.insertBefore(Tt,T.text),T.line.gutterClass&&(Tt.className+=" "+T.line.gutterClass),p.options.lineNumbers&&(!Y||!Y["CodeMirror-linenumbers"])&&(T.lineNumber=Tt.appendChild(Rt("div",Ir(p.options,I),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+D.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+p.display.lineNumInnerWidth+"px"))),Y)for(var Vt=0;Vt<p.display.gutterSpecs.length;++Vt){var Kt=p.display.gutterSpecs[Vt].className,Me=Y.hasOwnProperty(Kt)&&Y[Kt];Me&&Tt.appendChild(Rt("div",[Me],"CodeMirror-gutter-elt","left: "+D.gutterLeft[Kt]+"px; width: "+D.gutterWidth[Kt]+"px"))}}}function Bc(p,T,I){T.alignable&&(T.alignable=null);for(var D=ot("CodeMirror-linewidget"),N=T.node.firstChild,Y=void 0;N;N=Y)Y=N.nextSibling,D.test(N.className)&&T.node.removeChild(N);W(p,T,I)}function Gt(p,T,I,D){var N=ts(p,T);return T.text=T.node=N.pre,N.bgClass&&(T.bgClass=N.bgClass),N.textClass&&(T.textClass=N.textClass),Vs(p,T),qs(p,T,I,D),W(p,T,D),T.node}function W(p,T,I){if(K(p,T.line,T,I,!0),T.rest)for(var D=0;D<T.rest.length;D++)K(p,T.rest[D],T,I,!1)}function K(p,T,I,D,N){if(T.widgets)for(var Y=Us(I),ut=0,Tt=T.widgets;ut<Tt.length;++ut){var Vt=Tt[ut],Kt=Rt("div",[Vt.node],"CodeMirror-linewidget"+(Vt.className?" "+Vt.className:""));Vt.handleMouseEvents||Kt.setAttribute("cm-ignore-events","true"),gt(Vt,Kt,I,D),p.display.input.setUneditable(Kt),N&&Vt.above?Y.insertBefore(Kt,I.gutter||I.text):Y.appendChild(Kt),hr(Vt,"redraw")}}function gt(p,T,I,D){if(p.noHScroll){(I.alignable||(I.alignable=[])).push(T);var N=D.wrapperWidth;T.style.left=D.fixedPos+"px",p.coverGutter||(N-=D.gutterTotalWidth,T.style.paddingLeft=D.gutterTotalWidth+"px"),T.style.width=N+"px"}p.coverGutter&&(T.style.zIndex=5,T.style.position="relative",p.noHScroll||(T.style.marginLeft=-D.gutterTotalWidth+"px"))}function Qt(p){if(null!=p.height)return p.height;var T=p.doc.cm;if(!T)return 0;if(!nt(document.body,p.node)){var I="position: relative;";p.coverGutter&&(I+="margin-left: -"+T.display.gutters.offsetWidth+"px;"),p.noHScroll&&(I+="width: "+T.display.wrapper.clientWidth+"px;"),Ut(T.display.measure,Rt("div",[p.node],null,I))}return p.height=p.node.parentNode.offsetHeight}function be(p,T){for(var I=ct(T);I!=p.wrapper;I=I.parentNode)if(!I||1==I.nodeType&&"true"==I.getAttribute("cm-ignore-events")||I.parentNode==p.sizer&&I!=p.mover)return!0}function Ye(p){return p.lineSpace.offsetTop}function ti(p){return p.mover.offsetHeight-p.lineSpace.offsetHeight}function vi(p){if(p.cachedPaddingH)return p.cachedPaddingH;var T=Ut(p.measure,Rt("pre","x","CodeMirror-line-like")),I=window.getComputedStyle?window.getComputedStyle(T):T.currentStyle,D={left:parseInt(I.paddingLeft),right:parseInt(I.paddingRight)};return!isNaN(D.left)&&!isNaN(D.right)&&(p.cachedPaddingH=D),D}function Bi(p){return 50-p.display.nativeBarWidth}function un(p){return p.display.scroller.clientWidth-Bi(p)-p.display.barWidth}function En(p){return p.display.scroller.clientHeight-Bi(p)-p.display.barHeight}function Qn(p,T,I){if(p.line==T)return{map:p.measure.map,cache:p.measure.cache};if(p.rest){for(var D=0;D<p.rest.length;D++)if(p.rest[D]==T)return{map:p.measure.maps[D],cache:p.measure.caches[D]};for(var N=0;N<p.rest.length;N++)if(pr(p.rest[N])>I)return{map:p.measure.maps[N],cache:p.measure.caches[N],before:!0}}}function er(p,T,I,D){return Yr(p,wr(p,T),I,D)}function rr(p,T){if(T>=p.display.viewFrom&&T<p.display.viewTo)return p.display.view[vs(p,T)];var I=p.display.externalMeasured;return I&&T>=I.lineN&&T<I.lineN+I.size?I:void 0}function wr(p,T){var I=pr(T),D=rr(p,I);D&&!D.text?D=null:D&&D.changes&&(Hn(p,D,I,zs(p)),p.curOp.forceUpdate=!0),D||(D=function(p,T){var I=pr(T=xo(T)),D=p.display.externalMeasured=new bi(p.doc,T,I);D.lineN=I;var N=D.built=_a(p,D);return D.text=N.pre,Ut(p.display.lineMeasure,N.pre),D}(p,T));var N=Qn(D,T,I);return{line:T,view:D,rect:null,map:N.map,cache:N.cache,before:N.before,hasHeights:!1}}function Yr(p,T,I,D,N){T.before&&(I=-1);var ut,Y=I+(D||"");return T.cache.hasOwnProperty(Y)?ut=T.cache[Y]:(T.rect||(T.rect=T.view.text.getBoundingClientRect()),T.hasHeights||(function(p,T,I){var D=p.options.lineWrapping,N=D&&un(p);if(!T.measure.heights||D&&T.measure.width!=N){var Y=T.measure.heights=[];if(D){T.measure.width=N;for(var ut=T.text.firstChild.getClientRects(),Tt=0;Tt<ut.length-1;Tt++){var Vt=ut[Tt],Kt=ut[Tt+1];Math.abs(Vt.bottom-Kt.bottom)>2&&Y.push((Vt.bottom+Kt.top)/2-I.top)}}Y.push(I.bottom-I.top)}}(p,T.view,T.rect),T.hasHeights=!0),(ut=function(p,T,I,D){var Kt,N=ko(T.map,I,D),Y=N.node,ut=N.start,Tt=N.end,Vt=N.collapse;if(3==Y.nodeType){for(var Me=0;Me<4;Me++){for(;ut&&ye(T.line.text.charAt(N.coverStart+ut));)--ut;for(;N.coverStart+Tt<N.coverEnd&&ye(T.line.text.charAt(N.coverStart+Tt));)++Tt;if((Kt=n&&r<9&&0==ut&&Tt==N.coverEnd-N.coverStart?Y.parentNode.getBoundingClientRect():Ba(ht(Y,ut,Tt).getClientRects(),D)).left||Kt.right||0==ut)break;Tt=ut,ut-=1,Vt="right"}n&&r<11&&(Kt=function(p,T){if(!window.screen||null==screen.logicalXDPI||screen.logicalXDPI==screen.deviceXDPI||!function(p){if(null!=xe)return xe;var T=Ut(p,Rt("span","x")),I=T.getBoundingClientRect(),D=ht(T,0,1).getBoundingClientRect();return xe=Math.abs(I.left-D.left)>1}(p))return T;var I=screen.logicalXDPI/screen.deviceXDPI,D=screen.logicalYDPI/screen.deviceYDPI;return{left:T.left*I,right:T.right*I,top:T.top*D,bottom:T.bottom*D}}(p.display.measure,Kt))}else{var Xe;ut>0&&(Vt=D="right"),Kt=p.options.lineWrapping&&(Xe=Y.getClientRects()).length>1?Xe["right"==D?Xe.length-1:0]:Y.getBoundingClientRect()}if(n&&r<9&&!ut&&(!Kt||!Kt.left&&!Kt.right)){var fi=Y.parentNode.getClientRects()[0];Kt=fi?{left:fi.left,right:fi.left+_s(p.display),top:fi.top,bottom:fi.bottom}:oo}for(var ci=Kt.top-T.rect.top,Pi=Kt.bottom-T.rect.top,Ki=(ci+Pi)/2,an=T.view.measure.heights,mn=0;mn<an.length-1&&!(Ki<an[mn]);mn++);var In={left:("right"==Vt?Kt.right:Kt.left)-T.rect.left,right:("left"==Vt?Kt.left:Kt.right)-T.rect.left,top:mn?an[mn-1]:0,bottom:an[mn]};return!Kt.left&&!Kt.right&&(In.bogus=!0),p.options.singleCursorHeightPerLine||(In.rtop=ci,In.rbottom=Pi),In}(p,T,I,D)).bogus||(T.cache[Y]=ut)),{left:ut.left,right:ut.right,top:N?ut.rtop:ut.top,bottom:N?ut.rbottom:ut.bottom}}var Ur,oo={left:0,right:0,top:0,bottom:0};function ko(p,T,I){for(var D,N,Y,ut,Tt,Vt,Kt=0;Kt<p.length;Kt+=3)if(Vt=p[Kt+1],T<(Tt=p[Kt])?(N=0,Y=1,ut="left"):T<Vt?Y=1+(N=T-Tt):(Kt==p.length-3||T==Vt&&p[Kt+3]>T)&&(N=(Y=Vt-Tt)-1,T>=Vt&&(ut="right")),null!=N){if(D=p[Kt+2],Tt==Vt&&I==(D.insertLeft?"left":"right")&&(ut=I),"left"==I&&0==N)for(;Kt&&p[Kt-2]==p[Kt-3]&&p[Kt-1].insertLeft;)D=p[2+(Kt-=3)],ut="left";if("right"==I&&N==Vt-Tt)for(;Kt<p.length-3&&p[Kt+3]==p[Kt+4]&&!p[Kt+5].insertLeft;)D=p[(Kt+=3)+2],ut="right";break}return{node:D,start:N,end:Y,collapse:ut,coverStart:Tt,coverEnd:Vt}}function Ba(p,T){var I=oo;if("left"==T)for(var D=0;D<p.length&&(I=p[D]).left==I.right;D++);else for(var N=p.length-1;N>=0&&(I=p[N]).left==I.right;N--);return I}function Is(p){if(p.measure&&(p.measure.cache={},p.measure.heights=null,p.rest))for(var T=0;T<p.rest.length;T++)p.measure.caches[T]={}}function rs(p){p.display.externalMeasure=null,lt(p.display.lineMeasure);for(var T=0;T<p.display.view.length;T++)Is(p.display.view[T])}function Ms(p){rs(p),p.display.cachedCharWidth=p.display.cachedTextHeight=p.display.cachedPaddingH=null,p.options.lineWrapping||(p.display.maxLineChanged=!0),p.display.lineNumChars=null}function cl(){return y&&St?-(document.body.getBoundingClientRect().left-parseInt(getComputedStyle(document.body).marginLeft)):window.pageXOffset||(document.documentElement||document.body).scrollLeft}function Da(){return y&&St?-(document.body.getBoundingClientRect().top-parseInt(getComputedStyle(document.body).marginTop)):window.pageYOffset||(document.documentElement||document.body).scrollTop}function Ws(p){var T=0;if(p.widgets)for(var I=0;I<p.widgets.length;++I)p.widgets[I].above&&(T+=Qt(p.widgets[I]));return T}function co(p,T,I,D,N){if(!N){var Y=Ws(T);I.top+=Y,I.bottom+=Y}if("line"==D)return I;D||(D="local");var ut=jr(T);if("local"==D?ut+=Ye(p.display):ut-=p.display.viewOffset,"page"==D||"window"==D){var Tt=p.display.lineSpace.getBoundingClientRect();ut+=Tt.top+("window"==D?0:Da());var Vt=Tt.left+("window"==D?0:cl());I.left+=Vt,I.right+=Vt}return I.top+=ut,I.bottom+=ut,I}function Ja(p,T,I){if("div"==I)return T;var D=T.left,N=T.top;if("page"==I)D-=cl(),N-=Da();else if("local"==I||!I){var Y=p.display.sizer.getBoundingClientRect();D+=Y.left,N+=Y.top}var ut=p.display.lineSpace.getBoundingClientRect();return{left:D-ut.left,top:N-ut.top}}function Dn(p,T,I,D,N){return D||(D=Ai(p.doc,T.line)),co(p,D,er(p,D,T.ch,N),I)}function On(p,T,I,D,N,Y){function ut(Pi,Ki){var an=Yr(p,N,Pi,Ki?"right":"left",Y);return Ki?an.left=an.right:an.right=an.left,co(p,D,an,I)}D=D||Ai(p.doc,T.line),N||(N=wr(p,D));var Tt=yi(D,p.doc.direction),Vt=T.ch,Kt=T.sticky;if(Vt>=D.text.length?(Vt=D.text.length,Kt="before"):Vt<=0&&(Vt=0,Kt="after"),!Tt)return ut("before"==Kt?Vt-1:Vt,"before"==Kt);function Me(Pi,Ki,an){return ut(an?Pi-1:Pi,1==Tt[Ki].level!=an)}var Xe=Fi(Tt,Vt,Kt),fi=ni,ci=Me(Vt,Xe,"before"==Kt);return null!=fi&&(ci.other=Me(Vt,fi,"before"!=Kt)),ci}function or(p,T){var I=0;T=Yi(p.doc,T),p.options.lineWrapping||(I=_s(p.display)*T.ch);var D=Ai(p.doc,T.line),N=jr(D)+Ye(p.display);return{left:I,right:I,top:N,bottom:N+D.height}}function cr(p,T,I,D,N){var Y=Vi(p,T,I);return Y.xRel=N,D&&(Y.outside=D),Y}function Er(p,T,I){var D=p.doc;if((I+=p.display.viewOffset)<0)return cr(D.first,0,null,-1,-1);var N=Dr(D,I),Y=D.first+D.size-1;if(N>Y)return cr(D.first+D.size-1,Ai(D,Y).text.length,null,1,1);T<0&&(T=0);for(var ut=Ai(D,N);;){var Tt=Co(p,ut,N,T,I),Vt=Rs(ut,Tt.ch+(Tt.xRel>0||Tt.outside>0?1:0));if(!Vt)return Tt;var Kt=Vt.find(1);if(Kt.line==N)return Kt;ut=Ai(D,N=Kt.line)}}function es(p,T,I,D){D-=Ws(T);var N=T.text.length,Y=ce(function(ut){return Yr(p,I,ut-1).bottom<=D},N,0);return{begin:Y,end:N=ce(function(ut){return Yr(p,I,ut).top>D},Y,N)}}function Mr(p,T,I,D){return I||(I=wr(p,T)),es(p,T,I,co(p,T,Yr(p,I,D),"line").top)}function ta(p,T,I,D){return!(p.bottom<=I)&&(p.top>I||(D?p.left:p.right)>T)}function Co(p,T,I,D,N){N-=jr(T);var Y=wr(p,T),ut=Ws(T),Tt=0,Vt=T.text.length,Kt=!0,Me=yi(T,p.doc.direction);if(Me){var Xe=(p.options.lineWrapping?$a:yl)(p,T,I,Y,Me,D,N);Tt=(Kt=1!=Xe.level)?Xe.from:Xe.to-1,Vt=Kt?Xe.to:Xe.from-1}var Ki,an,fi=null,ci=null,Pi=ce(function(Xn){var Yn=Yr(p,Y,Xn);return Yn.top+=ut,Yn.bottom+=ut,!!ta(Yn,D,N,!1)&&(Yn.top<=N&&Yn.left<=D&&(fi=Xn,ci=Yn),!0)},Tt,Vt),mn=!1;if(ci){var Cn=D-ci.left<ci.right-D,dn=Cn==Kt;Pi=fi+(dn?0:1),an=dn?"after":"before",Ki=Cn?ci.left:ci.right}else{!Kt&&(Pi==Vt||Pi==Tt)&&Pi++,an=0==Pi?"after":Pi==T.text.length?"before":Yr(p,Y,Pi-(Kt?1:0)).bottom+ut<=N==Kt?"after":"before";var In=On(p,Vi(I,Pi,an),"line",T,Y);Ki=In.left,mn=N<In.top?-1:N>=In.bottom?1:0}return cr(I,Pi=Zt(T.text,Pi,1),an,mn,D-Ki)}function yl(p,T,I,D,N,Y,ut){var Tt=ce(function(Xe){var fi=N[Xe],ci=1!=fi.level;return ta(On(p,Vi(I,ci?fi.to:fi.from,ci?"before":"after"),"line",T,D),Y,ut,!0)},0,N.length-1),Vt=N[Tt];if(Tt>0){var Kt=1!=Vt.level,Me=On(p,Vi(I,Kt?Vt.from:Vt.to,Kt?"after":"before"),"line",T,D);ta(Me,Y,ut,!0)&&Me.top>ut&&(Vt=N[Tt-1])}return Vt}function $a(p,T,I,D,N,Y,ut){var Tt=es(p,T,D,ut),Vt=Tt.begin,Kt=Tt.end;/\s/.test(T.text.charAt(Kt-1))&&Kt--;for(var Me=null,Xe=null,fi=0;fi<N.length;fi++){var ci=N[fi];if(!(ci.from>=Kt||ci.to<=Vt)){var Ki=Yr(p,D,1!=ci.level?Math.min(Kt,ci.to)-1:Math.max(Vt,ci.from)).right,an=Ki<Y?Y-Ki+1e9:Ki-Y;(!Me||Xe>an)&&(Me=ci,Xe=an)}}return Me||(Me=N[N.length-1]),Me.from<Vt&&(Me={from:Vt,to:Me.to,level:Me.level}),Me.to>Kt&&(Me={from:Me.from,to:Kt,level:Me.level}),Me}function ca(p){if(null!=p.cachedTextHeight)return p.cachedTextHeight;if(null==Ur){Ur=Rt("pre",null,"CodeMirror-line-like");for(var T=0;T<49;++T)Ur.appendChild(document.createTextNode("x")),Ur.appendChild(Rt("br"));Ur.appendChild(document.createTextNode("x"))}Ut(p.measure,Ur);var I=Ur.offsetHeight/50;return I>3&&(p.cachedTextHeight=I),lt(p.measure),I||1}function _s(p){if(null!=p.cachedCharWidth)return p.cachedCharWidth;var T=Rt("span","xxxxxxxxxx"),I=Rt("pre",[T],"CodeMirror-line-like");Ut(p.measure,I);var D=T.getBoundingClientRect(),N=(D.right-D.left)/10;return N>2&&(p.cachedCharWidth=N),N||10}function zs(p){for(var T=p.display,I={},D={},N=T.gutters.clientLeft,Y=T.gutters.firstChild,ut=0;Y;Y=Y.nextSibling,++ut){var Tt=p.display.gutterSpecs[ut].className;I[Tt]=Y.offsetLeft+Y.clientLeft+N,D[Tt]=Y.clientWidth}return{fixedPos:As(T),gutterTotalWidth:T.gutters.offsetWidth,gutterLeft:I,gutterWidth:D,wrapperWidth:T.wrapper.clientWidth}}function As(p){return p.scroller.getBoundingClientRect().left-p.sizer.getBoundingClientRect().left}function va(p){var T=ca(p.display),I=p.options.lineWrapping,D=I&&Math.max(5,p.display.scroller.clientWidth/_s(p.display)-3);return function(N){if(Lr(p.doc,N))return 0;var Y=0;if(N.widgets)for(var ut=0;ut<N.widgets.length;ut++)N.widgets[ut].height&&(Y+=N.widgets[ut].height);return I?Y+(Math.ceil(N.text.length/D)||1)*T:Y+T}}function Al(p){var T=p.doc,I=va(p);T.iter(function(D){var N=I(D);N!=D.height&&Br(D,N)})}function ul(p,T,I,D){var N=p.display;if(!I&&"true"==ct(T).getAttribute("cm-not-content"))return null;var Y,ut,Tt=N.lineSpace.getBoundingClientRect();try{Y=T.clientX-Tt.left,ut=T.clientY-Tt.top}catch(Xe){return null}var Kt,Vt=Er(p,Y,ut);if(D&&Vt.xRel>0&&(Kt=Ai(p.doc,Vt.line).text).length==Vt.ch){var Me=Be(Kt,Kt.length,p.options.tabSize)-Kt.length;Vt=Vi(Vt.line,Math.max(0,Math.round((Y-vi(p.display).left)/_s(p.display))-Me))}return Vt}function vs(p,T){if(T>=p.display.viewTo||(T-=p.display.viewFrom)<0)return null;for(var I=p.display.view,D=0;D<I.length;D++)if((T-=I[D].size)<0)return D}function is(p,T,I,D){null==T&&(T=p.doc.first),null==I&&(I=p.doc.first+p.doc.size),D||(D=0);var N=p.display;if(D&&I<N.viewTo&&(null==N.updateLineNumbers||N.updateLineNumbers>T)&&(N.updateLineNumbers=T),p.curOp.viewChanged=!0,T>=N.viewTo)Ho&&lo(p.doc,T)<N.viewTo&&Za(p);else if(I<=N.viewFrom)Ho&&gs(p.doc,I+D)>N.viewFrom?Za(p):(N.viewFrom+=D,N.viewTo+=D);else if(T<=N.viewFrom&&I>=N.viewTo)Za(p);else if(T<=N.viewFrom){var Y=Ia(p,I,I+D,1);Y?(N.view=N.view.slice(Y.index),N.viewFrom=Y.lineN,N.viewTo+=D):Za(p)}else if(I>=N.viewTo){var ut=Ia(p,T,T,-1);ut?(N.view=N.view.slice(0,ut.index),N.viewTo=ut.lineN):Za(p)}else{var Tt=Ia(p,T,T,-1),Vt=Ia(p,I,I+D,1);Tt&&Vt?(N.view=N.view.slice(0,Tt.index).concat(cn(p,Tt.lineN,Vt.lineN)).concat(N.view.slice(Vt.index)),N.viewTo+=D):Za(p)}var Kt=N.externalMeasured;Kt&&(I<Kt.lineN?Kt.lineN+=D:T<Kt.lineN+Kt.size&&(N.externalMeasured=null))}function ea(p,T,I){p.curOp.viewChanged=!0;var D=p.display,N=p.display.externalMeasured;if(N&&T>=N.lineN&&T<N.lineN+N.size&&(D.externalMeasured=null),!(T<D.viewFrom||T>=D.viewTo)){var Y=D.view[vs(p,T)];if(null!=Y.node){var ut=Y.changes||(Y.changes=[]);-1==Qe(ut,I)&&ut.push(I)}}}function Za(p){p.display.viewFrom=p.display.viewTo=p.doc.first,p.display.view=[],p.display.viewOffset=0}function Ia(p,T,I,D){var Y,N=vs(p,T),ut=p.display.view;if(!Ho||I==p.doc.first+p.doc.size)return{index:N,lineN:I};for(var Tt=p.display.viewFrom,Vt=0;Vt<N;Vt++)Tt+=ut[Vt].size;if(Tt!=T){if(D>0){if(N==ut.length-1)return null;Y=Tt+ut[N].size-T,N++}else Y=Tt-T;T+=Y,I+=Y}for(;lo(p.doc,I)!=I;){if(N==(D<0?0:ut.length-1))return null;I+=D*ut[N-(D<0?1:0)].size,N+=D}return{index:N,lineN:I}}function Ma(p){for(var T=p.display.view,I=0,D=0;D<T.length;D++){var N=T[D];!N.hidden&&(!N.node||N.changes)&&++I}return I}function Ol(p){p.display.input.showSelection(p.display.input.prepareSelection())}function Gl(p,T){void 0===T&&(T=!0);var I=p.doc,D={},N=D.cursors=document.createDocumentFragment(),Y=D.selection=document.createDocumentFragment(),ut=p.options.$customCursor;ut&&(T=!0);for(var Tt=0;Tt<I.sel.ranges.length;Tt++)if(T||Tt!=I.sel.primIndex){var Vt=I.sel.ranges[Tt];if(!(Vt.from().line>=p.display.viewTo||Vt.to().line<p.display.viewFrom)){var Kt=Vt.empty();if(ut){var Me=ut(p,Vt);Me&&Ha(p,Me,N)}else(Kt||p.options.showCursorWhenSelecting)&&Ha(p,Vt.head,N);Kt||mc(p,Vt,Y)}}return D}function Ha(p,T,I){var D=On(p,T,"div",null,null,!p.options.singleCursorHeightPerLine),N=I.appendChild(Rt("div","\xa0","CodeMirror-cursor"));if(N.style.left=D.left+"px",N.style.top=D.top+"px",N.style.height=Math.max(0,D.bottom-D.top)*p.options.cursorHeight+"px",/\bcm-fat-cursor\b/.test(p.getWrapperElement().className)){var Y=Dn(p,T,"div",null,null),ut=Y.right-Y.left;N.style.width=(ut>0?ut:p.defaultCharWidth())+"px"}if(D.other){var Tt=I.appendChild(Rt("div","\xa0","CodeMirror-cursor CodeMirror-secondarycursor"));Tt.style.display="",Tt.style.left=D.other.left+"px",Tt.style.top=D.other.top+"px",Tt.style.height=.85*(D.other.bottom-D.other.top)+"px"}}function Qa(p,T){return p.top-T.top||p.left-T.left}function mc(p,T,I){var D=p.display,N=p.doc,Y=document.createDocumentFragment(),ut=vi(p.display),Tt=ut.left,Vt=Math.max(D.sizerWidth,un(p)-D.sizer.offsetLeft)-ut.right,Kt="ltr"==N.direction;function Me(dn,In,Xn,Yn){In<0&&(In=0),In=Math.round(In),Yn=Math.round(Yn),Y.appendChild(Rt("div",null,"CodeMirror-selected","position: absolute; left: "+dn+"px;\n                             top: "+In+"px; width: "+(null==Xn?Vt-dn:Xn)+"px;\n                             height: "+(Yn-In)+"px"))}function Xe(dn,In,Xn){var fo,Es,Yn=Ai(N,dn),mr=Yn.text.length;function Wo(Ts,Xr){return Dn(p,Vi(dn,Ts),"div",Yn,Xr)}function wa(Ts,Xr,ks){var as=Mr(p,Yn,null,Ts),S="ltr"==Xr==("after"==ks)?"left":"right";return Wo("after"==ks?as.begin:as.end-(/\s/.test(Yn.text.charAt(as.end-1))?2:1),S)[S]}var La=yi(Yn,N.direction);return function(p,T,I,D){if(!p)return D(T,I,"ltr",0);for(var N=!1,Y=0;Y<p.length;++Y){var ut=p[Y];(ut.from<I&&ut.to>T||T==I&&ut.to==T)&&(D(Math.max(ut.from,T),Math.min(ut.to,I),1==ut.level?"rtl":"ltr",Y),N=!0)}N||D(T,I,"ltr")}(La,In||0,null==Xn?mr:Xn,function(Ts,Xr,ks,as){var S="ltr"==ks,H=Wo(Ts,S?"left":"right"),j=Wo(Xr-1,S?"right":"left"),et=null==In&&0==Ts,ft=null==Xn&&Xr==mr,Yt=0==as,jt=!La||as==La.length-1;if(j.top-H.top<=3){var Re=(Kt?et:ft)&&Yt?Tt:(S?H:j).left;Me(Re,H.top,((Kt?ft:et)&&jt?Vt:(S?j:H).right)-Re,H.bottom)}else{var ai,pi,Ri,ji;S?(ai=Kt&&et&&Yt?Tt:H.left,pi=Kt?Vt:wa(Ts,ks,"before"),Ri=Kt?Tt:wa(Xr,ks,"after"),ji=Kt&&ft&&jt?Vt:j.right):(ai=Kt?wa(Ts,ks,"before"):Tt,pi=!Kt&&et&&Yt?Vt:H.right,Ri=!Kt&&ft&&jt?Tt:j.left,ji=Kt?wa(Xr,ks,"after"):Vt),Me(ai,H.top,pi-ai,H.bottom),H.bottom<j.top&&Me(Tt,H.bottom,null,j.top),Me(Ri,j.top,ji-Ri,j.bottom)}(!fo||Qa(H,fo)<0)&&(fo=H),Qa(j,fo)<0&&(fo=j),(!Es||Qa(H,Es)<0)&&(Es=H),Qa(j,Es)<0&&(Es=j)}),{start:fo,end:Es}}var fi=T.from(),ci=T.to();if(fi.line==ci.line)Xe(fi.line,fi.ch,ci.ch);else{var Pi=Ai(N,fi.line),Ki=Ai(N,ci.line),an=xo(Pi)==xo(Ki),mn=Xe(fi.line,fi.ch,an?Pi.text.length+1:null).end,Cn=Xe(ci.line,an?0:null,ci.ch).start;an&&(mn.top<Cn.top-2?(Me(mn.right,mn.top,null,mn.bottom),Me(Tt,Cn.top,Cn.left,Cn.bottom)):Me(mn.right,mn.top,Cn.left-mn.right,mn.bottom)),mn.bottom<Cn.top&&Me(Tt,mn.bottom,null,Cn.top)}I.appendChild(Y)}function Wl(p){if(p.state.focused){var T=p.display;clearInterval(T.blinker);var I=!0;T.cursorDiv.style.visibility="",p.options.cursorBlinkRate>0?T.blinker=setInterval(function(){p.hasFocus()||Aa(p),T.cursorDiv.style.visibility=(I=!I)?"":"hidden"},p.options.cursorBlinkRate):p.options.cursorBlinkRate<0&&(T.cursorDiv.style.visibility="hidden")}}function ua(p){p.hasFocus()||(p.display.input.focus(),p.state.focused||js(p))}function Ua(p){p.state.delayingBlurEvent=!0,setTimeout(function(){p.state.delayingBlurEvent&&(p.state.delayingBlurEvent=!1,p.state.focused&&Aa(p))},100)}function js(p,T){p.state.delayingBlurEvent&&!p.state.draggingText&&(p.state.delayingBlurEvent=!1),"nocursor"!=p.options.readOnly&&(p.state.focused||(Oe(p,"focus",p,T),p.state.focused=!0,Mt(p.display.wrapper,"CodeMirror-focused"),!p.curOp&&p.display.selForContextMenu!=p.doc.sel&&(p.display.input.reset(),s&&setTimeout(function(){return p.display.input.reset(!0)},20)),p.display.input.receivedFocus()),Wl(p))}function Aa(p,T){p.state.delayingBlurEvent||(p.state.focused&&(Oe(p,"blur",p,T),p.state.focused=!1,mt(p.display.wrapper,"CodeMirror-focused")),clearInterval(p.display.blinker),setTimeout(function(){p.state.focused||(p.display.shift=!1)},150))}function Os(p){for(var T=p.display,I=T.lineDiv.offsetTop,D=Math.max(0,T.scroller.getBoundingClientRect().top),N=T.lineDiv.getBoundingClientRect().top,Y=0,ut=0;ut<T.view.length;ut++){var Tt=T.view[ut],Vt=p.options.lineWrapping,Kt=void 0,Me=0;if(!Tt.hidden){if(N+=Tt.line.height,n&&r<8){var Xe=Tt.node.offsetTop+Tt.node.offsetHeight;Kt=Xe-I,I=Xe}else{var fi=Tt.node.getBoundingClientRect();Kt=fi.bottom-fi.top,!Vt&&Tt.text.firstChild&&(Me=Tt.text.firstChild.getBoundingClientRect().right-fi.left-1)}var ci=Tt.line.height-Kt;if((ci>.005||ci<-.005)&&(N<D&&(Y-=ci),Br(Tt.line,Kt),Oa(Tt.line),Tt.rest))for(var Pi=0;Pi<Tt.rest.length;Pi++)Oa(Tt.rest[Pi]);if(Me>p.display.sizerWidth){var Ki=Math.ceil(Me/_s(p.display));Ki>p.display.maxLineLength&&(p.display.maxLineLength=Ki,p.display.maxLine=Tt.line,p.display.maxLineChanged=!0)}}}Math.abs(Y)>2&&(T.scroller.scrollTop+=Y)}function Oa(p){if(p.widgets)for(var T=0;T<p.widgets.length;++T){var I=p.widgets[T],D=I.node.parentNode;D&&(I.height=D.offsetHeight)}}function El(p,T,I){var D=I&&null!=I.top?Math.max(0,I.top):p.scroller.scrollTop;D=Math.floor(D-Ye(p));var N=I&&null!=I.bottom?I.bottom:D+p.wrapper.clientHeight,Y=Dr(T,D),ut=Dr(T,N);if(I&&I.ensure){var Tt=I.ensure.from.line,Vt=I.ensure.to.line;Tt<Y?(Y=Tt,ut=Dr(T,jr(Ai(T,Tt))+p.wrapper.clientHeight)):Math.min(Vt,T.lastLine())>=ut&&(Y=Dr(T,jr(Ai(T,Vt))-p.wrapper.clientHeight),ut=Vt)}return{from:Y,to:Math.max(ut,Y+1)}}function Hc(p,T){var I=p.display,D=ca(p.display);T.top<0&&(T.top=0);var N=p.curOp&&null!=p.curOp.scrollTop?p.curOp.scrollTop:I.scroller.scrollTop,Y=En(p),ut={};T.bottom-T.top>Y&&(T.bottom=T.top+Y);var Tt=p.doc.height+ti(I),Kt=T.bottom>Tt-D;if(T.top<N)ut.scrollTop=T.top<D?0:T.top;else if(T.bottom>N+Y){var Me=Math.min(T.top,(Kt?Tt:T.bottom)-Y);Me!=N&&(ut.scrollTop=Me)}var Xe=p.options.fixedGutter?0:I.gutters.offsetWidth,fi=p.curOp&&null!=p.curOp.scrollLeft?p.curOp.scrollLeft:I.scroller.scrollLeft-Xe,ci=un(p)-I.gutters.offsetWidth,Pi=T.right-T.left>ci;return Pi&&(T.right=T.left+ci),T.left<10?ut.scrollLeft=0:T.left<fi?ut.scrollLeft=Math.max(0,T.left+Xe-(Pi?0:10)):T.right>ci+fi-3&&(ut.scrollLeft=T.right+(Pi?0:10)-ci),ut}function pt(p,T){null!=T&&(zt(p),p.curOp.scrollTop=(null==p.curOp.scrollTop?p.doc.scrollTop:p.curOp.scrollTop)+T)}function it(p){zt(p);var T=p.getCursor();p.curOp.scrollToPos={from:T,to:T,margin:p.options.cursorScrollMargin}}function q(p,T,I){(null!=T||null!=I)&&zt(p),null!=T&&(p.curOp.scrollLeft=T),null!=I&&(p.curOp.scrollTop=I)}function zt(p){var T=p.curOp.scrollToPos;T&&(p.curOp.scrollToPos=null,ge(p,or(p,T.from),or(p,T.to),T.margin))}function ge(p,T,I,D){var N=Hc(p,{left:Math.min(T.left,I.left),top:Math.min(T.top,I.top)-D,right:Math.max(T.right,I.right),bottom:Math.max(T.bottom,I.bottom)+D});q(p,N.scrollLeft,N.scrollTop)}function Ve(p,T){Math.abs(p.doc.scrollTop-T)<2||(C||Gu(p,{top:T}),ii(p,T,!0),C&&Gu(p),tc(p,100))}function ii(p,T,I){T=Math.max(0,Math.min(p.display.scroller.scrollHeight-p.display.scroller.clientHeight,T)),(p.display.scroller.scrollTop!=T||I)&&(p.doc.scrollTop=T,p.display.scrollbars.setScrollTop(T),p.display.scroller.scrollTop!=T&&(p.display.scroller.scrollTop=T))}function Ni(p,T,I,D){T=Math.max(0,Math.min(T,p.display.scroller.scrollWidth-p.display.scroller.clientWidth)),(!(I?T==p.doc.scrollLeft:Math.abs(p.doc.scrollLeft-T)<2)||D)&&(p.doc.scrollLeft=T,os(p),p.display.scroller.scrollLeft!=T&&(p.display.scroller.scrollLeft=T),p.display.scrollbars.setScrollLeft(T))}function Tn(p){var T=p.display,I=T.gutters.offsetWidth,D=Math.round(p.doc.height+ti(p.display));return{clientHeight:T.scroller.clientHeight,viewHeight:T.wrapper.clientHeight,scrollWidth:T.scroller.scrollWidth,clientWidth:T.scroller.clientWidth,viewWidth:T.wrapper.clientWidth,barLeft:p.options.fixedGutter?I:0,docHeight:D,scrollHeight:D+Bi(p)+T.barHeight,nativeBarWidth:T.nativeBarWidth,gutterWidth:I}}var _r=function(p,T,I){this.cm=I;var D=this.vert=Rt("div",[Rt("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),N=this.horiz=Rt("div",[Rt("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");D.tabIndex=N.tabIndex=-1,p(D),p(N),mi(D,"scroll",function(){D.clientHeight&&T(D.scrollTop,"vertical")}),mi(N,"scroll",function(){N.clientWidth&&T(N.scrollLeft,"horizontal")}),this.checkedZeroWidth=!1,n&&r<8&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")};_r.prototype.update=function(p){var T=p.scrollWidth>p.clientWidth+1,I=p.scrollHeight>p.clientHeight+1,D=p.nativeBarWidth;return I?(this.vert.style.display="block",this.vert.style.bottom=T?D+"px":"0",this.vert.firstChild.style.height=Math.max(0,p.scrollHeight-p.clientHeight+(p.viewHeight-(T?D:0)))+"px"):(this.vert.scrollTop=0,this.vert.style.display="",this.vert.firstChild.style.height="0"),T?(this.horiz.style.display="block",this.horiz.style.right=I?D+"px":"0",this.horiz.style.left=p.barLeft+"px",this.horiz.firstChild.style.width=Math.max(0,p.scrollWidth-p.clientWidth+(p.viewWidth-p.barLeft-(I?D:0)))+"px"):(this.horiz.style.display="",this.horiz.firstChild.style.width="0"),!this.checkedZeroWidth&&p.clientHeight>0&&(0==D&&this.zeroWidthHack(),this.checkedZeroWidth=!0),{right:I?D:0,bottom:T?D:0}},_r.prototype.setScrollLeft=function(p){this.horiz.scrollLeft!=p&&(this.horiz.scrollLeft=p),this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz,"horiz")},_r.prototype.setScrollTop=function(p){this.vert.scrollTop!=p&&(this.vert.scrollTop=p),this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert,"vert")},_r.prototype.zeroWidthHack=function(){this.horiz.style.height=this.vert.style.width=vt&&!Q?"12px":"18px",this.horiz.style.pointerEvents=this.vert.style.pointerEvents="none",this.disableHoriz=new Ne,this.disableVert=new Ne},_r.prototype.enableZeroWidthBar=function(p,T,I){p.style.pointerEvents="auto",T.set(1e3,function D(){var N=p.getBoundingClientRect();("vert"==I?document.elementFromPoint(N.right-1,(N.top+N.bottom)/2):document.elementFromPoint((N.right+N.left)/2,N.bottom-1))!=p?p.style.pointerEvents="none":T.set(1e3,D)})},_r.prototype.clear=function(){var p=this.horiz.parentNode;p.removeChild(this.horiz),p.removeChild(this.vert)};var Wn=function(){};function $r(p,T){T||(T=Tn(p));var I=p.display.barWidth,D=p.display.barHeight;uo(p,T);for(var N=0;N<4&&I!=p.display.barWidth||D!=p.display.barHeight;N++)I!=p.display.barWidth&&p.options.lineWrapping&&Os(p),uo(p,Tn(p)),I=p.display.barWidth,D=p.display.barHeight}function uo(p,T){var I=p.display,D=I.scrollbars.update(T);I.sizer.style.paddingRight=(I.barWidth=D.right)+"px",I.sizer.style.paddingBottom=(I.barHeight=D.bottom)+"px",I.heightForcer.style.borderBottom=D.bottom+"px solid transparent",D.right&&D.bottom?(I.scrollbarFiller.style.display="block",I.scrollbarFiller.style.height=D.bottom+"px",I.scrollbarFiller.style.width=D.right+"px"):I.scrollbarFiller.style.display="",D.bottom&&p.options.coverGutterNextToScrollbar&&p.options.fixedGutter?(I.gutterFiller.style.display="block",I.gutterFiller.style.height=D.bottom+"px",I.gutterFiller.style.width=T.gutterWidth+"px"):I.gutterFiller.style.display=""}Wn.prototype.update=function(){return{bottom:0,right:0}},Wn.prototype.setScrollLeft=function(){},Wn.prototype.setScrollTop=function(){},Wn.prototype.clear=function(){};var Tl={native:_r,null:Wn};function Ys(p){p.display.scrollbars&&(p.display.scrollbars.clear(),p.display.scrollbars.addClass&&mt(p.display.wrapper,p.display.scrollbars.addClass)),p.display.scrollbars=new Tl[p.options.scrollbarStyle](function(T){p.display.wrapper.insertBefore(T,p.display.scrollbarFiller),mi(T,"mousedown",function(){p.state.focused&&setTimeout(function(){return p.display.input.focus()},0)}),T.setAttribute("cm-not-content","true")},function(T,I){"horizontal"==I?Ni(p,T):Ve(p,T)},p),p.display.scrollbars.addClass&&Mt(p.display.wrapper,p.display.scrollbars.addClass)}var ba=0;function Uo(p){p.curOp={cm:p,viewChanged:!1,startHeight:p.doc.height,forceUpdate:!1,updateInput:0,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++ba,markArrays:null},function(p){jn?jn.ops.push(p):p.ownsGroup=jn={ops:[p],delayedCallbacks:[]}}(p.curOp)}function qa(p){var T=p.curOp;T&&function(p,T){var I=p.ownsGroup;if(I)try{!function(p){var T=p.delayedCallbacks,I=0;do{for(;I<T.length;I++)T[I].call(null);for(var D=0;D<p.ops.length;D++){var N=p.ops[D];if(N.cursorActivityHandlers)for(;N.cursorActivityCalled<N.cursorActivityHandlers.length;)N.cursorActivityHandlers[N.cursorActivityCalled++].call(null,N.cm)}}while(I<T.length)}(I)}finally{jn=null,T(I)}}(T,function(I){for(var D=0;D<I.ops.length;D++)I.ops[D].cm.curOp=null;!function(p){for(var T=p.ops,I=0;I<T.length;I++)ya(T[I]);for(var D=0;D<T.length;D++)Va(T[D]);for(var N=0;N<T.length;N++)Tu(T[N]);for(var Y=0;Y<T.length;Y++)Ks(T[Y]);for(var ut=0;ut<T.length;ut++)ql(T[ut])}(I)})}function ya(p){var T=p.cm,I=T.display;(function(p){var T=p.display;!T.scrollbarsClipped&&T.scroller.offsetWidth&&(T.nativeBarWidth=T.scroller.offsetWidth-T.scroller.clientWidth,T.heightForcer.style.height=Bi(p)+"px",T.sizer.style.marginBottom=-T.nativeBarWidth+"px",T.sizer.style.borderRightWidth=Bi(p)+"px",T.scrollbarsClipped=!0)})(T),p.updateMaxLine&&vl(T),p.mustUpdate=p.viewChanged||p.forceUpdate||null!=p.scrollTop||p.scrollToPos&&(p.scrollToPos.from.line<I.viewFrom||p.scrollToPos.to.line>=I.viewTo)||I.maxLineChanged&&T.options.lineWrapping,p.update=p.mustUpdate&&new Vo(T,p.mustUpdate&&{top:p.scrollTop,ensure:p.scrollToPos},p.forceUpdate)}function Va(p){p.updatedDisplay=p.mustUpdate&&vc(p.cm,p.update)}function Tu(p){var T=p.cm,I=T.display;p.updatedDisplay&&Os(T),p.barMeasure=Tn(T),I.maxLineChanged&&!T.options.lineWrapping&&(p.adjustWidthTo=er(T,I.maxLine,I.maxLine.text.length).left+3,T.display.sizerWidth=p.adjustWidthTo,p.barMeasure.scrollWidth=Math.max(I.scroller.clientWidth,I.sizer.offsetLeft+p.adjustWidthTo+Bi(T)+T.display.barWidth),p.maxScrollLeft=Math.max(0,I.sizer.offsetLeft+p.adjustWidthTo-un(T))),(p.updatedDisplay||p.selectionChanged)&&(p.preparedSelection=I.input.prepareSelection())}function Ks(p){var T=p.cm;null!=p.adjustWidthTo&&(T.display.sizer.style.minWidth=p.adjustWidthTo+"px",p.maxScrollLeft<T.doc.scrollLeft&&Ni(T,Math.min(T.display.scroller.scrollLeft,p.maxScrollLeft),!0),T.display.maxLineChanged=!1);var I=p.focus&&p.focus==he();p.preparedSelection&&T.display.input.showSelection(p.preparedSelection,I),(p.updatedDisplay||p.startHeight!=T.doc.height)&&$r(T,p.barMeasure),p.updatedDisplay&&eu(T,p.barMeasure),p.selectionChanged&&Wl(T),T.state.focused&&p.updateInput&&T.display.input.reset(p.typing),I&&ua(p.cm)}function ql(p){var T=p.cm,I=T.display,D=T.doc;p.updatedDisplay&&sh(T,p.update),null!=I.wheelStartX&&(null!=p.scrollTop||null!=p.scrollLeft||p.scrollToPos)&&(I.wheelStartX=I.wheelStartY=null),null!=p.scrollTop&&ii(T,p.scrollTop,p.forceScroll),null!=p.scrollLeft&&Ni(T,p.scrollLeft,!0,!0),p.scrollToPos&&function(p,T){if(!Ci(p,"scrollCursorIntoView")){var I=p.display,D=I.sizer.getBoundingClientRect(),N=null;if(T.top+D.top<0?N=!0:T.bottom+D.top>(window.innerHeight||document.documentElement.clientHeight)&&(N=!1),null!=N&&!at){var Y=Rt("div","\u200b",null,"position: absolute;\n                         top: "+(T.top-I.viewOffset-Ye(p.display))+"px;\n                         height: "+(T.bottom-T.top+Bi(p)+I.barHeight)+"px;\n                         left: "+T.left+"px; width: "+Math.max(2,T.right-T.left)+"px;");p.display.lineSpace.appendChild(Y),Y.scrollIntoView(N),p.display.lineSpace.removeChild(Y)}}}(T,function(p,T,I,D){var N;null==D&&(D=0),!p.options.lineWrapping&&T==I&&(I="before"==T.sticky?Vi(T.line,T.ch+1,"before"):T,T=T.ch?Vi(T.line,"before"==T.sticky?T.ch-1:T.ch,"after"):T);for(var Y=0;Y<5;Y++){var ut=!1,Tt=On(p,T),Vt=I&&I!=T?On(p,I):Tt,Kt=Hc(p,N={left:Math.min(Tt.left,Vt.left),top:Math.min(Tt.top,Vt.top)-D,right:Math.max(Tt.left,Vt.left),bottom:Math.max(Tt.bottom,Vt.bottom)+D}),Me=p.doc.scrollTop,Xe=p.doc.scrollLeft;if(null!=Kt.scrollTop&&(Ve(p,Kt.scrollTop),Math.abs(p.doc.scrollTop-Me)>1&&(ut=!0)),null!=Kt.scrollLeft&&(Ni(p,Kt.scrollLeft),Math.abs(p.doc.scrollLeft-Xe)>1&&(ut=!0)),!ut)break}return N}(T,Yi(D,p.scrollToPos.from),Yi(D,p.scrollToPos.to),p.scrollToPos.margin));var Y=p.maybeHiddenMarkers,ut=p.maybeUnhiddenMarkers;if(Y)for(var Tt=0;Tt<Y.length;++Tt)Y[Tt].lines.length||Oe(Y[Tt],"hide");if(ut)for(var Vt=0;Vt<ut.length;++Vt)ut[Vt].lines.length&&Oe(ut[Vt],"unhide");I.wrapper.offsetHeight&&(D.scrollTop=T.display.scroller.scrollTop),p.changeObjs&&Oe(T,"changes",T,p.changeObjs),p.update&&p.update.finish()}function hs(p,T){if(p.curOp)return T();Uo(p);try{return T()}finally{qa(p)}}function Lo(p,T){return function(){if(p.curOp)return T.apply(p,arguments);Uo(p);try{return T.apply(p,arguments)}finally{qa(p)}}}function No(p){return function(){if(this.curOp)return p.apply(this,arguments);Uo(this);try{return p.apply(this,arguments)}finally{qa(this)}}}function qr(p){return function(){var T=this.cm;if(!T||T.curOp)return p.apply(this,arguments);Uo(T);try{return p.apply(this,arguments)}finally{qa(T)}}}function tc(p,T){p.doc.highlightFrontier<p.display.viewTo&&p.state.highlight.set(T,ve(Cu,p))}function Cu(p){var T=p.doc;if(!(T.highlightFrontier>=p.display.viewTo)){var I=+new Date+p.options.workTime,D=ro(p,T.highlightFrontier),N=[];T.iter(D.line,Math.min(T.first+T.size,p.display.viewTo+500),function(Y){if(D.line>=p.display.viewFrom){var ut=Y.styles,Tt=Y.text.length>p.options.maxHighlightLength?kr(T.mode,D.state):null,Vt=Ao(p,Y,D,!0);Tt&&(D.state=Tt),Y.styles=Vt.styles;var Kt=Y.styleClasses,Me=Vt.classes;Me?Y.styleClasses=Me:Kt&&(Y.styleClasses=null);for(var Xe=!ut||ut.length!=Y.styles.length||Kt!=Me&&(!Kt||!Me||Kt.bgClass!=Me.bgClass||Kt.textClass!=Me.textClass),fi=0;!Xe&&fi<ut.length;++fi)Xe=ut[fi]!=Y.styles[fi];Xe&&N.push(D.line),Y.stateAfter=D.save(),D.nextLine()}else Y.text.length<=p.options.maxHighlightLength&&_o(p,Y.text,D),Y.stateAfter=D.line%5==0?D.save():null,D.nextLine();if(+new Date>I)return tc(p,p.options.workDelay),!0}),T.highlightFrontier=D.line,T.modeFrontier=Math.max(T.modeFrontier,D.line),N.length&&hs(p,function(){for(var Y=0;Y<N.length;Y++)ea(p,N[Y],"text")})}}var Vo=function(p,T,I){var D=p.display;this.viewport=T,this.visible=El(D,p.doc,T),this.editorIsHidden=!D.wrapper.offsetWidth,this.wrapperHeight=D.wrapper.clientHeight,this.wrapperWidth=D.wrapper.clientWidth,this.oldDisplayWidth=un(p),this.force=I,this.dims=zs(p),this.events=[]};function vc(p,T){var I=p.display,D=p.doc;if(T.editorIsHidden)return Za(p),!1;if(!T.force&&T.visible.from>=I.viewFrom&&T.visible.to<=I.viewTo&&(null==I.updateLineNumbers||I.updateLineNumbers>=I.viewTo)&&I.renderedView==I.view&&0==Ma(p))return!1;bc(p)&&(Za(p),T.dims=zs(p));var N=D.first+D.size,Y=Math.max(T.visible.from-p.options.viewportMargin,D.first),ut=Math.min(N,T.visible.to+p.options.viewportMargin);I.viewFrom<Y&&Y-I.viewFrom<20&&(Y=Math.max(D.first,I.viewFrom)),I.viewTo>ut&&I.viewTo-ut<20&&(ut=Math.min(N,I.viewTo)),Ho&&(Y=lo(p.doc,Y),ut=gs(p.doc,ut));var Tt=Y!=I.viewFrom||ut!=I.viewTo||I.lastWrapHeight!=T.wrapperHeight||I.lastWrapWidth!=T.wrapperWidth;(function(p,T,I){var D=p.display;0==D.view.length||T>=D.viewTo||I<=D.viewFrom?(D.view=cn(p,T,I),D.viewFrom=T):(D.viewFrom>T?D.view=cn(p,T,D.viewFrom).concat(D.view):D.viewFrom<T&&(D.view=D.view.slice(vs(p,T))),D.viewFrom=T,D.viewTo<I?D.view=D.view.concat(cn(p,D.viewTo,I)):D.viewTo>I&&(D.view=D.view.slice(0,vs(p,I)))),D.viewTo=I})(p,Y,ut),I.viewOffset=jr(Ai(p.doc,I.viewFrom)),p.display.mover.style.top=I.viewOffset+"px";var Vt=Ma(p);if(!Tt&&0==Vt&&!T.force&&I.renderedView==I.view&&(null==I.updateLineNumbers||I.updateLineNumbers>=I.viewTo))return!1;var Kt=function(p){if(p.hasFocus())return null;var T=he();if(!T||!nt(p.display.lineDiv,T))return null;var I={activeElt:T};if(window.getSelection){var D=window.getSelection();D.anchorNode&&D.extend&&nt(p.display.lineDiv,D.anchorNode)&&(I.anchorNode=D.anchorNode,I.anchorOffset=D.anchorOffset,I.focusNode=D.focusNode,I.focusOffset=D.focusOffset)}return I}(p);return Vt>4&&(I.lineDiv.style.display="none"),function(p,T,I){var D=p.display,N=p.options.lineNumbers,Y=D.lineDiv,ut=Y.firstChild;function Tt(Pi){var Ki=Pi.nextSibling;return s&&vt&&p.display.currentWheelTarget==Pi?Pi.style.display="none":Pi.parentNode.removeChild(Pi),Ki}for(var Vt=D.view,Kt=D.viewFrom,Me=0;Me<Vt.length;Me++){var Xe=Vt[Me];if(!Xe.hidden)if(Xe.node&&Xe.node.parentNode==Y){for(;ut!=Xe.node;)ut=Tt(ut);var ci=N&&null!=T&&T<=Kt&&Xe.lineNumber;Xe.changes&&(Qe(Xe.changes,"gutter")>-1&&(ci=!1),Hn(p,Xe,Kt,I)),ci&&(lt(Xe.lineNumber),Xe.lineNumber.appendChild(document.createTextNode(Ir(p.options,Kt)))),ut=Xe.node.nextSibling}else{var fi=Gt(p,Xe,Kt,I);Y.insertBefore(fi,ut)}Kt+=Xe.size}for(;ut;)ut=Tt(ut)}(p,I.updateLineNumbers,T.dims),Vt>4&&(I.lineDiv.style.display=""),I.renderedView=I.view,function(p){if(p&&p.activeElt&&p.activeElt!=he()&&(p.activeElt.focus(),!/^(INPUT|TEXTAREA)$/.test(p.activeElt.nodeName)&&p.anchorNode&&nt(document.body,p.anchorNode)&&nt(document.body,p.focusNode))){var T=window.getSelection(),I=document.createRange();I.setEnd(p.anchorNode,p.anchorOffset),I.collapse(!1),T.removeAllRanges(),T.addRange(I),T.extend(p.focusNode,p.focusOffset)}}(Kt),lt(I.cursorDiv),lt(I.selectionDiv),I.gutters.style.height=I.sizer.style.minHeight=0,Tt&&(I.lastWrapHeight=T.wrapperHeight,I.lastWrapWidth=T.wrapperWidth,tc(p,400)),I.updateLineNumbers=null,!0}function sh(p,T){for(var I=T.viewport,D=!0;;D=!1){if(D&&p.options.lineWrapping&&T.oldDisplayWidth!=un(p))D&&(T.visible=El(p.display,p.doc,I));else if(I&&null!=I.top&&(I={top:Math.min(p.doc.height+ti(p.display)-En(p),I.top)}),T.visible=El(p.display,p.doc,I),T.visible.from>=p.display.viewFrom&&T.visible.to<=p.display.viewTo)break;if(!vc(p,T))break;Os(p);var N=Tn(p);Ol(p),$r(p,N),eu(p,N),T.force=!1}T.signal(p,"update",p),(p.display.viewFrom!=p.display.reportedViewFrom||p.display.viewTo!=p.display.reportedViewTo)&&(T.signal(p,"viewportChange",p,p.display.viewFrom,p.display.viewTo),p.display.reportedViewFrom=p.display.viewFrom,p.display.reportedViewTo=p.display.viewTo)}function Gu(p,T){var I=new Vo(p,T);if(vc(p,I)){Os(p),sh(p,I);var D=Tn(p);Ol(p),$r(p,D),eu(p,D),I.finish()}}function zl(p){p.sizer.style.marginLeft=p.gutters.offsetWidth+"px",hr(p,"gutterChanged",p)}function eu(p,T){p.display.sizer.style.minHeight=T.docHeight+"px",p.display.heightForcer.style.top=T.docHeight+"px",p.display.gutters.style.height=T.docHeight+p.display.barHeight+Bi(p)+"px"}function os(p){var T=p.display,I=T.view;if(T.alignWidgets||T.gutters.firstChild&&p.options.fixedGutter){for(var D=As(T)-T.scroller.scrollLeft+p.doc.scrollLeft,N=T.gutters.offsetWidth,Y=D+"px",ut=0;ut<I.length;ut++)if(!I[ut].hidden){p.options.fixedGutter&&(I[ut].gutter&&(I[ut].gutter.style.left=Y),I[ut].gutterBackground&&(I[ut].gutterBackground.style.left=Y));var Tt=I[ut].alignable;if(Tt)for(var Vt=0;Vt<Tt.length;Vt++)Tt[Vt].style.left=Y}p.options.fixedGutter&&(T.gutters.style.left=D+N+"px")}}function bc(p){if(!p.options.lineNumbers)return!1;var T=p.doc,I=Ir(p.options,T.first+T.size-1),D=p.display;if(I.length!=D.lineNumChars){var N=D.measure.appendChild(Rt("div",[Rt("div",I)],"CodeMirror-linenumber CodeMirror-gutter-elt")),Y=N.firstChild.offsetWidth,ut=N.offsetWidth-Y;return D.lineGutter.style.width="",D.lineNumInnerWidth=Math.max(Y,D.lineGutter.offsetWidth-ut)+1,D.lineNumWidth=D.lineNumInnerWidth+ut,D.lineNumChars=D.lineNumInnerWidth?I.length:-1,D.lineGutter.style.width=D.lineNumWidth+"px",zl(p.display),!0}return!1}function ic(p,T){for(var I=[],D=!1,N=0;N<p.length;N++){var Y=p[N],ut=null;if("string"!=typeof Y&&(ut=Y.style,Y=Y.className),"CodeMirror-linenumbers"==Y){if(!T)continue;D=!0}I.push({className:Y,style:ut})}return T&&!D&&I.push({className:"CodeMirror-linenumbers",style:null}),I}function kl(p){var T=p.gutters,I=p.gutterSpecs;lt(T),p.lineGutter=null;for(var D=0;D<I.length;++D){var N=I[D],Y=N.className,ut=N.style,Tt=T.appendChild(Rt("div",null,"CodeMirror-gutter "+Y));ut&&(Tt.style.cssText=ut),"CodeMirror-linenumbers"==Y&&(p.lineGutter=Tt,Tt.style.width=(p.lineNumWidth||1)+"px")}T.style.display=I.length?"":"none",zl(p)}function Ea(p){kl(p.display),is(p),os(p)}function ha(p,T,I,D){var N=this;this.input=I,N.scrollbarFiller=Rt("div",null,"CodeMirror-scrollbar-filler"),N.scrollbarFiller.setAttribute("cm-not-content","true"),N.gutterFiller=Rt("div",null,"CodeMirror-gutter-filler"),N.gutterFiller.setAttribute("cm-not-content","true"),N.lineDiv=Et("div",null,"CodeMirror-code"),N.selectionDiv=Rt("div",null,null,"position: relative; z-index: 1"),N.cursorDiv=Rt("div",null,"CodeMirror-cursors"),N.measure=Rt("div",null,"CodeMirror-measure"),N.lineMeasure=Rt("div",null,"CodeMirror-measure"),N.lineSpace=Et("div",[N.measure,N.lineMeasure,N.selectionDiv,N.cursorDiv,N.lineDiv],null,"position: relative; outline: none");var Y=Et("div",[N.lineSpace],"CodeMirror-lines");N.mover=Rt("div",[Y],null,"position: relative"),N.sizer=Rt("div",[N.mover],"CodeMirror-sizer"),N.sizerWidth=null,N.heightForcer=Rt("div",null,null,"position: absolute; height: 50px; width: 1px;"),N.gutters=Rt("div",null,"CodeMirror-gutters"),N.lineGutter=null,N.scroller=Rt("div",[N.sizer,N.heightForcer,N.gutters],"CodeMirror-scroll"),N.scroller.setAttribute("tabIndex","-1"),N.wrapper=Rt("div",[N.scrollbarFiller,N.gutterFiller,N.scroller],"CodeMirror"),N.wrapper.setAttribute("translate","no"),n&&r<8&&(N.gutters.style.zIndex=-1,N.scroller.style.paddingRight=0),!s&&!(C&&Ht)&&(N.scroller.draggable=!0),p&&(p.appendChild?p.appendChild(N.wrapper):p(N.wrapper)),N.viewFrom=N.viewTo=T.first,N.reportedViewFrom=N.reportedViewTo=T.first,N.view=[],N.renderedView=null,N.externalMeasured=null,N.viewOffset=0,N.lastWrapHeight=N.lastWrapWidth=0,N.updateLineNumbers=null,N.nativeBarWidth=N.barHeight=N.barWidth=0,N.scrollbarsClipped=!1,N.lineNumWidth=N.lineNumInnerWidth=N.lineNumChars=null,N.alignWidgets=!1,N.cachedCharWidth=N.cachedTextHeight=N.cachedPaddingH=null,N.maxLine=null,N.maxLineLength=0,N.maxLineChanged=!1,N.wheelDX=N.wheelDY=N.wheelStartX=N.wheelStartY=null,N.shift=!1,N.selForContextMenu=null,N.activeTouch=null,N.gutterSpecs=ic(D.gutters,D.lineNumbers),kl(N),I.init(N)}Vo.prototype.signal=function(p,T){Ii(p,T)&&this.events.push(arguments)},Vo.prototype.finish=function(){for(var p=0;p<this.events.length;p++)Oe.apply(null,this.events[p])};var So=0,xa=null;function Ga(p){var T=p.wheelDeltaX,I=p.wheelDeltaY;return null==T&&p.detail&&p.axis==p.HORIZONTAL_AXIS&&(T=p.detail),null==I&&p.detail&&p.axis==p.VERTICAL_AXIS?I=p.detail:null==I&&(I=p.wheelDelta),{x:T,y:I}}function Ll(p){var T=Ga(p);return T.x*=xa,T.y*=xa,T}function iu(p,T){var I=Ga(T),D=I.x,N=I.y,Y=xa;0===T.deltaMode&&(D=T.deltaX,N=T.deltaY,Y=1);var ut=p.display,Tt=ut.scroller,Kt=Tt.scrollHeight>Tt.clientHeight;if(D&&Tt.scrollWidth>Tt.clientWidth||N&&Kt){if(N&&vt&&s)t:for(var Me=T.target,Xe=ut.view;Me!=Tt;Me=Me.parentNode)for(var fi=0;fi<Xe.length;fi++)if(Xe[fi].node==Me){p.display.currentWheelTarget=Me;break t}if(D&&!C&&!x&&null!=Y)return N&&Kt&&Ve(p,Math.max(0,Tt.scrollTop+N*Y)),Ni(p,Math.max(0,Tt.scrollLeft+D*Y)),(!N||N&&Kt)&&Ui(T),void(ut.wheelStartX=null);if(N&&null!=Y){var ci=N*Y,Pi=p.doc.scrollTop,Ki=Pi+ut.wrapper.clientHeight;ci<0?Pi=Math.max(0,Pi+ci-50):Ki=Math.min(p.doc.height,Ki+ci+50),Gu(p,{top:Pi,bottom:Ki})}So<20&&0!==T.deltaMode&&(null==ut.wheelStartX?(ut.wheelStartX=Tt.scrollLeft,ut.wheelStartY=Tt.scrollTop,ut.wheelDX=D,ut.wheelDY=N,setTimeout(function(){if(null!=ut.wheelStartX){var an=Tt.scrollLeft-ut.wheelStartX,mn=Tt.scrollTop-ut.wheelStartY,Cn=mn&&ut.wheelDY&&mn/ut.wheelDY||an&&ut.wheelDX&&an/ut.wheelDX;ut.wheelStartX=ut.wheelStartY=null,Cn&&(xa=(xa*So+Cn)/(So+1),++So)}},200)):(ut.wheelDX+=D,ut.wheelDY+=N))}}n?xa=-.53:C?xa=15:y?xa=-.7:B&&(xa=-1/3);var ia=function(p,T){this.ranges=p,this.primIndex=T};ia.prototype.primary=function(){return this.ranges[this.primIndex]},ia.prototype.equals=function(p){if(p==this)return!0;if(p.primIndex!=this.primIndex||p.ranges.length!=this.ranges.length)return!1;for(var T=0;T<this.ranges.length;T++){var I=this.ranges[T],D=p.ranges[T];if(!Gn(I.anchor,D.anchor)||!Gn(I.head,D.head))return!1}return!0},ia.prototype.deepCopy=function(){for(var p=[],T=0;T<this.ranges.length;T++)p[T]=new Vr(oe(this.ranges[T].anchor),oe(this.ranges[T].head));return new ia(p,this.primIndex)},ia.prototype.somethingSelected=function(){for(var p=0;p<this.ranges.length;p++)if(!this.ranges[p].empty())return!0;return!1},ia.prototype.contains=function(p,T){T||(T=p);for(var I=0;I<this.ranges.length;I++){var D=this.ranges[I];if(Sn(T,D.from())>=0&&Sn(p,D.to())<=0)return I}return-1};var Vr=function(p,T){this.anchor=p,this.head=T};function Ta(p,T,I){var D=p&&p.options.selectionsMayTouch,N=T[I];T.sort(function(fi,ci){return Sn(fi.from(),ci.from())}),I=Qe(T,N);for(var Y=1;Y<T.length;Y++){var ut=T[Y],Tt=T[Y-1],Vt=Sn(Tt.to(),ut.from());if(D&&!ut.empty()?Vt>0:Vt>=0){var Kt=Oi(Tt.from(),ut.from()),Me=He(Tt.to(),ut.to()),Xe=Tt.empty()?ut.from()==ut.head:Tt.from()==Tt.head;Y<=I&&--I,T.splice(--Y,2,new Vr(Xe?Me:Kt,Xe?Kt:Me))}}return new ia(T,I)}function nc(p,T){return new ia([new Vr(p,T||p)],0)}function Nl(p){return p.text?Vi(p.from.line+p.text.length-1,At(p.text).length+(1==p.text.length?p.from.ch:0)):p.to}function bs(p,T){if(Sn(p,T.from)<0)return p;if(Sn(p,T.to)<=0)return Nl(T);var I=p.line+T.text.length-(T.to.line-T.from.line)-1,D=p.ch;return p.line==T.to.line&&(D+=Nl(T).ch-T.to.ch),Vi(I,D)}function tl(p,T){for(var I=[],D=0;D<p.sel.ranges.length;D++){var N=p.sel.ranges[D];I.push(new Vr(bs(N.anchor,T),bs(N.head,T)))}return Ta(p.cm,I,p.sel.primIndex)}function rc(p,T,I){return p.line==T.line?Vi(I.line,p.ch-T.ch+I.ch):Vi(I.line+(p.line-T.line),p.ch)}function ka(p){p.doc.mode=eo(p.options,p.doc.modeOption),Pl(p)}function Pl(p){p.doc.iter(function(T){T.stateAfter&&(T.stateAfter=null),T.styles&&(T.styles=null)}),p.doc.modeFrontier=p.doc.highlightFrontier=p.doc.first,tc(p,100),p.state.modeGen++,p.curOp&&is(p)}function oc(p,T){return 0==T.from.ch&&0==T.to.ch&&""==At(T.text)&&(!p.cm||p.cm.options.wholeLineUpdateBefore)}function xs(p,T,I,D){function N(Cn){return I?I[Cn]:null}function Y(Cn,dn,In){(function(p,T,I,D){p.text=T,p.stateAfter&&(p.stateAfter=null),p.styles&&(p.styles=null),null!=p.order&&(p.order=null),ma(p),Qs(p,I);var N=D?D(p):1;N!=p.height&&Br(p,N)})(Cn,dn,In,D),hr(Cn,"change",Cn,T)}function ut(Cn,dn){for(var In=[],Xn=Cn;Xn<dn;++Xn)In.push(new us(Kt[Xn],N(Xn),D));return In}var Tt=T.from,Vt=T.to,Kt=T.text,Me=Ai(p,Tt.line),Xe=Ai(p,Vt.line),fi=At(Kt),ci=N(Kt.length-1),Pi=Vt.line-Tt.line;if(T.full)p.insert(0,ut(0,Kt.length)),p.remove(Kt.length,p.size-Kt.length);else if(oc(p,T)){var Ki=ut(0,Kt.length-1);Y(Xe,Xe.text,ci),Pi&&p.remove(Tt.line,Pi),Ki.length&&p.insert(Tt.line,Ki)}else if(Me==Xe)if(1==Kt.length)Y(Me,Me.text.slice(0,Tt.ch)+fi+Me.text.slice(Vt.ch),ci);else{var an=ut(1,Kt.length-1);an.push(new us(fi+Me.text.slice(Vt.ch),ci,D)),Y(Me,Me.text.slice(0,Tt.ch)+Kt[0],N(0)),p.insert(Tt.line+1,an)}else if(1==Kt.length)Y(Me,Me.text.slice(0,Tt.ch)+Kt[0]+Xe.text.slice(Vt.ch),N(0)),p.remove(Tt.line+1,Pi);else{Y(Me,Me.text.slice(0,Tt.ch)+Kt[0],N(0)),Y(Xe,fi+Xe.text.slice(Vt.ch),ci);var mn=ut(1,Kt.length-1);Pi>1&&p.remove(Tt.line+1,Pi-1),p.insert(Tt.line+1,mn)}hr(p,"change",p,T)}function hl(p,T,I){!function D(N,Y,ut){if(N.linked)for(var Tt=0;Tt<N.linked.length;++Tt){var Vt=N.linked[Tt];if(Vt.doc!=Y){var Kt=ut&&Vt.sharedHist;I&&!Kt||(T(Vt.doc,Kt),D(Vt.doc,N,Kt))}}}(p,null,!0)}function Ar(p,T){if(T.cm)throw new Error("This document is already in use.");p.doc=T,T.cm=p,Al(p),ka(p),sc(p),p.options.direction=T.direction,p.options.lineWrapping||vl(p),p.options.mode=T.modeOption,is(p)}function sc(p){("rtl"==p.doc.direction?Mt:mt)(p.display.lineDiv,"CodeMirror-rtl")}function yc(p){this.done=[],this.undone=[],this.undoDepth=p?p.undoDepth:1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=p?p.maxGeneration:1}function Vc(p,T){var I={from:oe(T.from),to:Nl(T),text:Vn(p,T.from,T.to)};return cc(p,I,T.from.line,T.to.line+1),hl(p,function(D){return cc(D,I,T.from.line,T.to.line+1)},!0),I}function na(p){for(;p.length&&At(p).ranges;)p.pop()}function Po(p,T,I,D){var N=p.history;N.undone.length=0;var ut,Tt,Y=+new Date;if((N.lastOp==D||N.lastOrigin==T.origin&&T.origin&&("+"==T.origin.charAt(0)&&N.lastModTime>Y-(p.cm?p.cm.options.historyEventDelay:500)||"*"==T.origin.charAt(0)))&&(ut=function(p,T){return T?(na(p.done),At(p.done)):p.done.length&&!At(p.done).ranges?At(p.done):p.done.length>1&&!p.done[p.done.length-2].ranges?(p.done.pop(),At(p.done)):void 0}(N,N.lastOp==D)))Tt=At(ut.changes),0==Sn(T.from,T.to)&&0==Sn(T.from,Tt.to)?Tt.to=Nl(T):ut.changes.push(Vc(p,T));else{var Vt=At(N.done);for((!Vt||!Vt.ranges)&&nu(p.sel,N.done),ut={changes:[Vc(p,T)],generation:N.generation},N.done.push(ut);N.done.length>N.undoDepth;)N.done.shift(),N.done[0].ranges||N.done.shift()}N.done.push(I),N.generation=++N.maxGeneration,N.lastModTime=N.lastSelTime=Y,N.lastOp=N.lastSelOp=D,N.lastOrigin=N.lastSelOrigin=T.origin,Tt||Oe(p,"historyAdded")}function lc(p,T,I,D){var N=p.history,Y=D&&D.origin;I==N.lastSelOp||Y&&N.lastSelOrigin==Y&&(N.lastModTime==N.lastSelTime&&N.lastOrigin==Y||function(p,T,I,D){var N=T.charAt(0);return"*"==N||"+"==N&&I.ranges.length==D.ranges.length&&I.somethingSelected()==D.somethingSelected()&&new Date-p.history.lastSelTime<=(p.cm?p.cm.options.historyEventDelay:500)}(p,Y,At(N.done),T))?N.done[N.done.length-1]=T:nu(T,N.done),N.lastSelTime=+new Date,N.lastSelOrigin=Y,N.lastSelOp=I,D&&!1!==D.clearRedo&&na(N.undone)}function nu(p,T){var I=At(T);I&&I.ranges&&I.equals(p)||T.push(p)}function cc(p,T,I,D){var N=T["spans_"+p.id],Y=0;p.iter(Math.max(p.first,I),Math.min(p.first+p.size,D),function(ut){ut.markedSpans&&((N||(N=T["spans_"+p.id]={}))[Y]=ut.markedSpans),++Y})}function Wa(p){if(!p)return null;for(var T,I=0;I<p.length;++I)p[I].marker.explicitlyCleared?T||(T=p.slice(0,I)):T&&T.push(p[I]);return T?T.length?T:null:p}function uc(p,T){var I=function(p,T){var I=T["spans_"+p.id];if(!I)return null;for(var D=[],N=0;N<T.text.length;++N)D.push(Wa(I[N]));return D}(p,T),D=Bs(p,T);if(!I)return D;if(!D)return I;for(var N=0;N<I.length;++N){var Y=I[N],ut=D[N];if(Y&&ut)t:for(var Tt=0;Tt<ut.length;++Tt){for(var Vt=ut[Tt],Kt=0;Kt<Y.length;++Kt)if(Y[Kt].marker==Vt.marker)continue t;Y.push(Vt)}else ut&&(I[N]=ut)}return I}function dl(p,T,I){for(var D=[],N=0;N<p.length;++N){var Y=p[N];if(Y.ranges)D.push(I?ia.prototype.deepCopy.call(Y):Y);else{var ut=Y.changes,Tt=[];D.push({changes:Tt});for(var Vt=0;Vt<ut.length;++Vt){var Kt=ut[Vt],Me=void 0;if(Tt.push({from:Kt.from,to:Kt.to,text:Kt.text}),T)for(var Xe in Kt)(Me=Xe.match(/^spans_(\d+)$/))&&Qe(T,Number(Me[1]))>-1&&(At(Tt)[Xe]=Kt[Xe],delete Kt[Xe])}}}return D}function Jo(p,T,I,D){if(D){var N=p.anchor;if(I){var Y=Sn(T,N)<0;Y!=Sn(I,N)<0?(N=T,T=I):Y!=Sn(T,I)<0&&(T=I)}return new Vr(N,T)}return new Vr(I||T,T)}function pl(p,T,I,D,N){null==N&&(N=p.cm&&(p.cm.display.shift||p.extend)),ra(p,new ia([Jo(p.sel.primary(),T,I,N)],0),D)}function el(p,T,I){for(var D=[],N=p.cm&&(p.cm.display.shift||p.extend),Y=0;Y<p.sel.ranges.length;Y++)D[Y]=Jo(p.sel.ranges[Y],T[Y],null,N);ra(p,Ta(p.cm,D,p.sel.primIndex),I)}function hc(p,T,I,D){var N=p.sel.ranges.slice(0);N[T]=I,ra(p,Ta(p.cm,N,p.sel.primIndex),D)}function Cc(p,T,I,D){ra(p,nc(T,I),D)}function ru(p,T,I){var D=p.history.done,N=At(D);N&&N.ranges?(D[D.length-1]=T,Fl(p,T,I)):ra(p,T,I)}function ra(p,T,I){Fl(p,T,I),lc(p,p.sel,p.cm?p.cm.curOp.id:NaN,I)}function Fl(p,T,I){(Ii(p,"beforeSelectionChange")||p.cm&&Ii(p.cm,"beforeSelectionChange"))&&(T=function(p,T,I){var D={ranges:T.ranges,update:function(N){this.ranges=[];for(var Y=0;Y<N.length;Y++)this.ranges[Y]=new Vr(Yi(p,N[Y].anchor),Yi(p,N[Y].head))},origin:I&&I.origin};return Oe(p,"beforeSelectionChange",p,D),p.cm&&Oe(p.cm,"beforeSelectionChange",p.cm,D),D.ranges!=T.ranges?Ta(p.cm,D.ranges,D.ranges.length-1):T}(p,T,I));var D=I&&I.bias||(Sn(T.primary().head,p.sel.primary().head)<0?-1:1);jl(p,da(p,T,D,!0)),(!I||!1!==I.scroll)&&p.cm&&"nocursor"!=p.cm.getOption("readOnly")&&it(p.cm)}function jl(p,T){T.equals(p.sel)||(p.sel=T,p.cm&&(p.cm.curOp.updateInput=1,p.cm.curOp.selectionChanged=!0,je(p.cm)),hr(p,"cursorActivity",p))}function Sc(p){jl(p,da(p,p.sel,null,!1))}function da(p,T,I,D){for(var N,Y=0;Y<T.ranges.length;Y++){var ut=T.ranges[Y],Tt=T.ranges.length==p.sel.ranges.length&&p.sel.ranges[Y],Vt=Wc(p,ut.anchor,Tt&&Tt.anchor,I,D),Kt=Wc(p,ut.head,Tt&&Tt.head,I,D);(N||Vt!=ut.anchor||Kt!=ut.head)&&(N||(N=T.ranges.slice(0,Y)),N[Y]=new Vr(Vt,Kt))}return N?Ta(p.cm,N,T.primIndex):T}function il(p,T,I,D,N){var Y=Ai(p,T.line);if(Y.markedSpans)for(var ut=0;ut<Y.markedSpans.length;++ut){var Tt=Y.markedSpans[ut],Vt=Tt.marker,Kt="selectLeft"in Vt?!Vt.selectLeft:Vt.inclusiveLeft,Me="selectRight"in Vt?!Vt.selectRight:Vt.inclusiveRight;if((null==Tt.from||(Kt?Tt.from<=T.ch:Tt.from<T.ch))&&(null==Tt.to||(Me?Tt.to>=T.ch:Tt.to>T.ch))){if(N&&(Oe(Vt,"beforeCursorEnter"),Vt.explicitlyCleared)){if(Y.markedSpans){--ut;continue}break}if(!Vt.atomic)continue;if(I){var Xe=Vt.find(D<0?1:-1),fi=void 0;if((D<0?Me:Kt)&&(Xe=dc(p,Xe,-D,Xe&&Xe.line==T.line?Y:null)),Xe&&Xe.line==T.line&&(fi=Sn(Xe,I))&&(D<0?fi<0:fi>0))return il(p,Xe,T,D,N)}var ci=Vt.find(D<0?-1:1);return(D<0?Kt:Me)&&(ci=dc(p,ci,D,ci.line==T.line?Y:null)),ci?il(p,ci,T,D,N):null}}return T}function Wc(p,T,I,D,N){var Y=D||1;return il(p,T,I,Y,N)||!N&&il(p,T,I,Y,!0)||il(p,T,I,-Y,N)||!N&&il(p,T,I,-Y,!0)||(p.cantEdit=!0,Vi(p.first,0))}function dc(p,T,I,D){return I<0&&0==T.ch?T.line>p.first?Yi(p,Vi(T.line-1)):null:I>0&&T.ch==(D||Ai(p,T.line)).text.length?T.line<p.first+p.size-1?Vi(T.line+1,0):null:new Vi(T.line,T.ch+I)}function zc(p){p.setSelection(Vi(p.firstLine(),0),Vi(p.lastLine()),Le)}function wc(p,T,I){var D={canceled:!1,from:T.from,to:T.to,text:T.text,origin:T.origin,cancel:function(){return D.canceled=!0}};return I&&(D.update=function(N,Y,ut,Tt){N&&(D.from=Yi(p,N)),Y&&(D.to=Yi(p,Y)),ut&&(D.text=ut),void 0!==Tt&&(D.origin=Tt)}),Oe(p,"beforeChange",p,D),p.cm&&Oe(p.cm,"beforeChange",p.cm,D),D.canceled?(p.cm&&(p.cm.curOp.updateInput=2),null):{from:D.from,to:D.to,text:D.text,origin:D.origin}}function Ca(p,T,I){if(p.cm){if(!p.cm.curOp)return Lo(p.cm,Ca)(p,T,I);if(p.cm.state.suppressEdits)return}if(!(Ii(p,"beforeChange")||p.cm&&Ii(p.cm,"beforeChange"))||(T=wc(p,T,!0))){var D=ns&&!I&&function(p,T,I){var D=null;if(p.iter(T.line,I.line+1,function(ci){if(ci.markedSpans)for(var Pi=0;Pi<ci.markedSpans.length;++Pi){var Ki=ci.markedSpans[Pi].marker;Ki.readOnly&&(!D||-1==Qe(D,Ki))&&(D||(D=[])).push(Ki)}}),!D)return null;for(var N=[{from:T,to:I}],Y=0;Y<D.length;++Y)for(var ut=D[Y],Tt=ut.find(0),Vt=0;Vt<N.length;++Vt){var Kt=N[Vt];if(!(Sn(Kt.to,Tt.from)<0||Sn(Kt.from,Tt.to)>0)){var Me=[Vt,1],Xe=Sn(Kt.from,Tt.from),fi=Sn(Kt.to,Tt.to);(Xe<0||!ut.inclusiveLeft&&!Xe)&&Me.push({from:Kt.from,to:Tt.from}),(fi>0||!ut.inclusiveRight&&!fi)&&Me.push({from:Tt.to,to:Kt.to}),N.splice.apply(N,Me),Vt+=Me.length-3}}return N}(p,T.from,T.to);if(D)for(var N=D.length-1;N>=0;--N)so(p,{from:D[N].from,to:D[N].to,text:N?[""]:T.text,origin:T.origin});else so(p,T)}}function so(p,T){if(1!=T.text.length||""!=T.text[0]||0!=Sn(T.from,T.to)){var I=tl(p,T);Po(p,T,I,p.cm?p.cm.curOp.id:NaN),Rc(p,T,I,Bs(p,T));var D=[];hl(p,function(N,Y){!Y&&-1==Qe(D,N.history)&&(Du(N.history,T),D.push(N.history)),Rc(N,T,null,Bs(N,T))})}}function Bl(p,T,I){var D=p.cm&&p.cm.state.suppressEdits;if(!D||I){for(var Y,N=p.history,ut=p.sel,Tt="undo"==T?N.done:N.undone,Vt="undo"==T?N.undone:N.done,Kt=0;Kt<Tt.length&&(Y=Tt[Kt],!(I?Y.ranges&&!Y.equals(p.sel):!Y.ranges));Kt++);if(Kt!=Tt.length){for(N.lastOrigin=N.lastSelOrigin=null;;){if(!(Y=Tt.pop()).ranges){if(D)return void Tt.push(Y);break}if(nu(Y,Vt),I&&!Y.equals(p.sel))return void ra(p,Y,{clearRedo:!1});ut=Y}var Me=[];nu(ut,Vt),Vt.push({changes:Me,generation:N.generation}),N.generation=Y.generation||++N.maxGeneration;for(var Xe=Ii(p,"beforeChange")||p.cm&&Ii(p.cm,"beforeChange"),fi=function(Ki){var an=Y.changes[Ki];if(an.origin=T,Xe&&!wc(p,an,!1))return Tt.length=0,{};Me.push(Vc(p,an));var mn=Ki?tl(p,an):At(Tt);Rc(p,an,mn,uc(p,an)),!Ki&&p.cm&&p.cm.scrollIntoView({from:an.from,to:Nl(an)});var Cn=[];hl(p,function(dn,In){!In&&-1==Qe(Cn,dn.history)&&(Du(dn.history,an),Cn.push(dn.history)),Rc(dn,an,null,uc(dn,an))})},ci=Y.changes.length-1;ci>=0;--ci){var Pi=fi(ci);if(Pi)return Pi.v}}}}function Yl(p,T){if(0!=T&&(p.first+=T,p.sel=new ia(pe(p.sel.ranges,function(N){return new Vr(Vi(N.anchor.line+T,N.anchor.ch),Vi(N.head.line+T,N.head.ch))}),p.sel.primIndex),p.cm)){is(p.cm,p.first,p.first-T,T);for(var I=p.cm.display,D=I.viewFrom;D<I.viewTo;D++)ea(p.cm,D,"gutter")}}function Rc(p,T,I,D){if(p.cm&&!p.cm.curOp)return Lo(p.cm,Rc)(p,T,I,D);if(T.to.line<p.first)Yl(p,T.text.length-1-(T.to.line-T.from.line));else if(!(T.from.line>p.lastLine())){if(T.from.line<p.first){var N=T.text.length-1-(p.first-T.from.line);Yl(p,N),T={from:Vi(p.first,0),to:Vi(T.to.line+N,T.to.ch),text:[At(T.text)],origin:T.origin}}var Y=p.lastLine();T.to.line>Y&&(T={from:T.from,to:Vi(Y,Ai(p,Y).text.length),text:[T.text[0]],origin:T.origin}),T.removed=Vn(p,T.from,T.to),I||(I=tl(p,T)),p.cm?function(p,T,I){var D=p.doc,N=p.display,Y=T.from,ut=T.to,Tt=!1,Vt=Y.line;p.options.lineWrapping||(Vt=pr(xo(Ai(D,Y.line))),D.iter(Vt,ut.line+1,function(ci){if(ci==N.maxLine)return Tt=!0,!0})),D.sel.contains(T.from,T.to)>-1&&je(p),xs(D,T,I,va(p)),p.options.lineWrapping||(D.iter(Vt,Y.line+T.text.length,function(ci){var Pi=la(ci);Pi>N.maxLineLength&&(N.maxLine=ci,N.maxLineLength=Pi,N.maxLineChanged=!0,Tt=!1)}),Tt&&(p.curOp.updateMaxLine=!0)),function(p,T){if(p.modeFrontier=Math.min(p.modeFrontier,T),!(p.highlightFrontier<T-10)){for(var I=p.first,D=T-1;D>I;D--){var N=Ai(p,D).stateAfter;if(N&&(!(N instanceof nr)||D+N.lookAhead<T)){I=D+1;break}}p.highlightFrontier=Math.min(p.highlightFrontier,I)}}(D,Y.line),tc(p,400);var Kt=T.text.length-(ut.line-Y.line)-1;T.full?is(p):Y.line!=ut.line||1!=T.text.length||oc(p.doc,T)?is(p,Y.line,ut.line+1,Kt):ea(p,Y.line,"text");var Me=Ii(p,"changes"),Xe=Ii(p,"change");if(Xe||Me){var fi={from:Y,to:ut,text:T.text,removed:T.removed,origin:T.origin};Xe&&hr(p,"change",p,fi),Me&&(p.curOp.changeObjs||(p.curOp.changeObjs=[])).push(fi)}p.display.selForContextMenu=null}(p.cm,T,D):xs(p,T,D),Fl(p,I,Le),p.cantEdit&&Wc(p,Vi(p.firstLine(),0))&&(p.cantEdit=!1)}}function fl(p,T,I,D,N){var Y;D||(D=I),Sn(D,I)<0&&(I=(Y=[D,I])[0],D=Y[1]),"string"==typeof T&&(T=p.splitLines(T)),Ca(p,{from:I,to:D,text:T,origin:N})}function Ru(p,T,I,D){I<p.line?p.line+=D:T<p.line&&(p.line=T,p.ch=0)}function Xl(p,T,I,D){for(var N=0;N<p.length;++N){var Y=p[N],ut=!0;if(Y.ranges){Y.copied||((Y=p[N]=Y.deepCopy()).copied=!0);for(var Tt=0;Tt<Y.ranges.length;Tt++)Ru(Y.ranges[Tt].anchor,T,I,D),Ru(Y.ranges[Tt].head,T,I,D)}else{for(var Vt=0;Vt<Y.changes.length;++Vt){var Kt=Y.changes[Vt];if(I<Kt.from.line)Kt.from=Vi(Kt.from.line+D,Kt.from.ch),Kt.to=Vi(Kt.to.line+D,Kt.to.ch);else if(T<=Kt.to.line){ut=!1;break}}ut||(p.splice(0,N+1),N=0)}}}function Du(p,T){var I=T.from.line,D=T.to.line,N=T.text.length-(D-I)-1;Xl(p.done,I,D,N),Xl(p.undone,I,D,N)}function pc(p,T,I,D){var N=T,Y=T;return"number"==typeof T?Y=Ai(p,Ji(p,T)):N=pr(T),null==N?null:(D(Y,N)&&p.cm&&ea(p.cm,N,I),Y)}function jc(p){this.lines=p,this.parent=null;for(var T=0,I=0;I<p.length;++I)p[I].parent=this,T+=p[I].height;this.height=T}function Cl(p){this.children=p;for(var T=0,I=0,D=0;D<p.length;++D){var N=p[D];T+=N.chunkSize(),I+=N.height,N.parent=this}this.size=T,this.height=I,this.parent=null}Vr.prototype.from=function(){return Oi(this.anchor,this.head)},Vr.prototype.to=function(){return He(this.anchor,this.head)},Vr.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch},jc.prototype={chunkSize:function(){return this.lines.length},removeInner:function(p,T){for(var I=p,D=p+T;I<D;++I){var N=this.lines[I];this.height-=N.height,ms(N),hr(N,"delete")}this.lines.splice(p,T)},collapse:function(p){p.push.apply(p,this.lines)},insertInner:function(p,T,I){this.height+=I,this.lines=this.lines.slice(0,p).concat(T).concat(this.lines.slice(p));for(var D=0;D<T.length;++D)T[D].parent=this},iterN:function(p,T,I){for(var D=p+T;p<D;++p)if(I(this.lines[p]))return!0}},Cl.prototype={chunkSize:function(){return this.size},removeInner:function(p,T){this.size-=T;for(var I=0;I<this.children.length;++I){var D=this.children[I],N=D.chunkSize();if(p<N){var Y=Math.min(T,N-p),ut=D.height;if(D.removeInner(p,Y),this.height-=ut-D.height,N==Y&&(this.children.splice(I--,1),D.parent=null),0==(T-=Y))break;p=0}else p-=N}if(this.size-T<25&&(this.children.length>1||!(this.children[0]instanceof jc))){var Tt=[];this.collapse(Tt),this.children=[new jc(Tt)],this.children[0].parent=this}},collapse:function(p){for(var T=0;T<this.children.length;++T)this.children[T].collapse(p)},insertInner:function(p,T,I){this.size+=T.length,this.height+=I;for(var D=0;D<this.children.length;++D){var N=this.children[D],Y=N.chunkSize();if(p<=Y){if(N.insertInner(p,T,I),N.lines&&N.lines.length>50){for(var ut=N.lines.length%25+25,Tt=ut;Tt<N.lines.length;){var Vt=new jc(N.lines.slice(Tt,Tt+=25));N.height-=Vt.height,this.children.splice(++D,0,Vt),Vt.parent=this}N.lines=N.lines.slice(0,ut),this.maybeSpill()}break}p-=Y}},maybeSpill:function(){if(!(this.children.length<=10)){var p=this;do{var I=new Cl(p.children.splice(p.children.length-5,5));if(p.parent){p.size-=I.size,p.height-=I.height;var N=Qe(p.parent.children,p);p.parent.children.splice(N+1,0,I)}else{var D=new Cl(p.children);D.parent=p,p.children=[D,I],p=D}I.parent=p.parent}while(p.children.length>10);p.parent.maybeSpill()}},iterN:function(p,T,I){for(var D=0;D<this.children.length;++D){var N=this.children[D],Y=N.chunkSize();if(p<Y){var ut=Math.min(T,Y-p);if(N.iterN(p,ut,I))return!0;if(0==(T-=ut))break;p=0}else p-=Y}}};var Sl=function(p,T,I){if(I)for(var D in I)I.hasOwnProperty(D)&&(this[D]=I[D]);this.doc=p,this.node=T};function wl(p,T,I){jr(T)<(p.curOp&&p.curOp.scrollTop||p.doc.scrollTop)&&pt(p,I)}Sl.prototype.clear=function(){var p=this.doc.cm,T=this.line.widgets,I=this.line,D=pr(I);if(null!=D&&T){for(var N=0;N<T.length;++N)T[N]==this&&T.splice(N--,1);T.length||(I.widgets=null);var Y=Qt(this);Br(I,Math.max(0,I.height-Y)),p&&(hs(p,function(){wl(p,I,-Y),ea(p,D,"widget")}),hr(p,"lineWidgetCleared",p,this,D))}},Sl.prototype.changed=function(){var p=this,T=this.height,I=this.doc.cm,D=this.line;this.height=null;var N=Qt(this)-T;!N||(Lr(this.doc,D)||Br(D,D.height+N),I&&hs(I,function(){I.curOp.forceUpdate=!0,wl(I,D,N),hr(I,"lineWidgetChanged",I,p,pr(D))}))},_i(Sl);var Iu=0,za=function(p,T){this.lines=[],this.type=T,this.doc=p,this.id=++Iu};function Sa(p,T,I,D,N){if(D&&D.shared)return function(p,T,I,D,N){(D=ue(D)).shared=!1;var Y=[Sa(p,T,I,D,N)],ut=Y[0],Tt=D.widgetNode;return hl(p,function(Vt){Tt&&(D.widgetNode=Tt.cloneNode(!0)),Y.push(Sa(Vt,Yi(Vt,T),Yi(Vt,I),D,N));for(var Kt=0;Kt<Vt.linked.length;++Kt)if(Vt.linked[Kt].isParent)return;ut=At(Y)}),new nl(Y,ut)}(p,T,I,D,N);if(p.cm&&!p.cm.curOp)return Lo(p.cm,Sa)(p,T,I,D,N);var Y=new za(p,N),ut=Sn(T,I);if(D&&ue(D,Y,!1),ut>0||0==ut&&!1!==Y.clearWhenEmpty)return Y;if(Y.replacedWith&&(Y.collapsed=!0,Y.widgetNode=Et("span",[Y.replacedWith],"CodeMirror-widget"),D.handleMouseEvents||Y.widgetNode.setAttribute("cm-ignore-events","true"),D.insertLeft&&(Y.widgetNode.insertLeft=!0)),Y.collapsed){if(zo(p,T.line,T,I,Y)||T.line!=I.line&&zo(p,I.line,T,I,Y))throw new Error("Inserting collapsed marker partially overlapping an existing one");Ho=!0}Y.addToHistory&&Po(p,{from:T,to:I,origin:"markText"},p.sel,NaN);var Kt,Tt=T.line,Vt=p.cm;if(p.iter(Tt,I.line+1,function(Xe){Vt&&Y.collapsed&&!Vt.options.lineWrapping&&xo(Xe)==Vt.display.maxLine&&(Kt=!0),Y.collapsed&&Tt!=T.line&&Br(Xe,0),function(p,T,I){var D=I&&window.WeakSet&&(I.markedSpans||(I.markedSpans=new WeakSet));D&&D.has(p.markedSpans)?p.markedSpans.push(T):(p.markedSpans=p.markedSpans?p.markedSpans.concat([T]):[T],D&&D.add(p.markedSpans)),T.marker.attachLine(p)}(Xe,new Ka(Y,Tt==T.line?T.ch:null,Tt==I.line?I.ch:null),p.cm&&p.cm.curOp),++Tt}),Y.collapsed&&p.iter(T.line,I.line+1,function(Xe){Lr(p,Xe)&&Br(Xe,0)}),Y.clearOnEnter&&mi(Y,"beforeCursorEnter",function(){return Y.clear()}),Y.readOnly&&(ns=!0,(p.history.done.length||p.history.undone.length)&&p.clearHistory()),Y.collapsed&&(Y.id=++Iu,Y.atomic=!0),Vt){if(Kt&&(Vt.curOp.updateMaxLine=!0),Y.collapsed)is(Vt,T.line,I.line+1);else if(Y.className||Y.startStyle||Y.endStyle||Y.css||Y.attributes||Y.title)for(var Me=T.line;Me<=I.line;Me++)ea(Vt,Me,"text");Y.atomic&&Sc(Vt.doc),hr(Vt,"markerAdded",Vt,Y)}return Y}za.prototype.clear=function(){if(!this.explicitlyCleared){var p=this.doc.cm,T=p&&!p.curOp;if(T&&Uo(p),Ii(this,"clear")){var I=this.find();I&&hr(this,"clear",I.from,I.to)}for(var D=null,N=null,Y=0;Y<this.lines.length;++Y){var ut=this.lines[Y],Tt=Qo(ut.markedSpans,this);p&&!this.collapsed?ea(p,pr(ut),"text"):p&&(null!=Tt.to&&(N=pr(ut)),null!=Tt.from&&(D=pr(ut))),ut.markedSpans=ga(ut.markedSpans,Tt),null==Tt.from&&this.collapsed&&!Lr(this.doc,ut)&&p&&Br(ut,ca(p.display))}if(p&&this.collapsed&&!p.options.lineWrapping)for(var Vt=0;Vt<this.lines.length;++Vt){var Kt=xo(this.lines[Vt]),Me=la(Kt);Me>p.display.maxLineLength&&(p.display.maxLine=Kt,p.display.maxLineLength=Me,p.display.maxLineChanged=!0)}null!=D&&p&&this.collapsed&&is(p,D,N+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,p&&Sc(p.doc)),p&&hr(p,"markerCleared",p,this,D,N),T&&qa(p),this.parent&&this.parent.clear()}},za.prototype.find=function(p,T){null==p&&"bookmark"==this.type&&(p=1);for(var I,D,N=0;N<this.lines.length;++N){var Y=this.lines[N],ut=Qo(Y.markedSpans,this);if(null!=ut.from&&(I=Vi(T?Y:pr(Y),ut.from),-1==p))return I;if(null!=ut.to&&(D=Vi(T?Y:pr(Y),ut.to),1==p))return D}return I&&{from:I,to:D}},za.prototype.changed=function(){var p=this,T=this.find(-1,!0),I=this,D=this.doc.cm;!T||!D||hs(D,function(){var N=T.line,Y=pr(T.line),ut=rr(D,Y);if(ut&&(Is(ut),D.curOp.selectionChanged=D.curOp.forceUpdate=!0),D.curOp.updateMaxLine=!0,!Lr(I.doc,N)&&null!=I.height){var Tt=I.height;I.height=null;var Vt=Qt(I)-Tt;Vt&&Br(N,N.height+Vt)}hr(D,"markerChanged",D,p)})},za.prototype.attachLine=function(p){if(!this.lines.length&&this.doc.cm){var T=this.doc.cm.curOp;(!T.maybeHiddenMarkers||-1==Qe(T.maybeHiddenMarkers,this))&&(T.maybeUnhiddenMarkers||(T.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(p)},za.prototype.detachLine=function(p){if(this.lines.splice(Qe(this.lines,p),1),!this.lines.length&&this.doc.cm){var T=this.doc.cm.curOp;(T.maybeHiddenMarkers||(T.maybeHiddenMarkers=[])).push(this)}},_i(za);var nl=function(p,T){this.markers=p,this.primary=T;for(var I=0;I<p.length;++I)p[I].parent=this};function pa(p){return p.findMarks(Vi(p.first,0),p.clipPos(Vi(p.lastLine())),function(T){return T.parent})}function Hl(p){for(var T=function(D){var N=p[D],Y=[N.primary.doc];hl(N.primary.doc,function(Vt){return Y.push(Vt)});for(var ut=0;ut<N.markers.length;ut++){var Tt=N.markers[ut];-1==Qe(Y,Tt.doc)&&(Tt.parent=null,N.markers.splice(ut--,1))}},I=0;I<p.length;I++)T(I)}nl.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var p=0;p<this.markers.length;++p)this.markers[p].clear();hr(this,"clear")}},nl.prototype.find=function(p,T){return this.primary.find(p,T)},_i(nl);var lh=0,ss=function(p,T,I,D,N){if(!(this instanceof ss))return new ss(p,T,I,D,N);null==I&&(I=0),Cl.call(this,[new jc([new us("",null)])]),this.first=I,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.modeFrontier=this.highlightFrontier=I;var Y=Vi(I,0);this.sel=nc(Y),this.history=new yc(null),this.id=++lh,this.modeOption=T,this.lineSep=D,this.direction="rtl"==N?"rtl":"ltr",this.extend=!1,"string"==typeof p&&(p=this.splitLines(p)),xs(this,{from:Y,to:Y,text:p}),ra(this,nc(Y),Le)};ss.prototype=Ie(Cl.prototype,{constructor:ss,iter:function(p,T,I){I?this.iterN(p-this.first,T-p,I):this.iterN(this.first,this.first+this.size,p)},insert:function(p,T){for(var I=0,D=0;D<T.length;++D)I+=T[D].height;this.insertInner(p-this.first,T,I)},remove:function(p,T){this.removeInner(p-this.first,T)},getValue:function(p){var T=gr(this,this.first,this.first+this.size);return!1===p?T:T.join(p||this.lineSeparator())},setValue:qr(function(p){var T=Vi(this.first,0),I=this.first+this.size-1;Ca(this,{from:T,to:Vi(I,Ai(this,I).text.length),text:this.splitLines(p),origin:"setValue",full:!0},!0),this.cm&&q(this.cm,0,0),ra(this,nc(T),Le)}),replaceRange:function(p,T,I,D){fl(this,p,T=Yi(this,T),I=I?Yi(this,I):T,D)},getRange:function(p,T,I){var D=Vn(this,Yi(this,p),Yi(this,T));return!1===I?D:D.join(""===I?"":I||this.lineSeparator())},getLine:function(p){var T=this.getLineHandle(p);return T&&T.text},getLineHandle:function(p){if(Qr(this,p))return Ai(this,p)},getLineNumber:function(p){return pr(p)},getLineHandleVisualStart:function(p){return"number"==typeof p&&(p=Ai(this,p)),xo(p)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(p){return Yi(this,p)},getCursor:function(p){var T=this.sel.primary();return null==p||"head"==p?T.head:"anchor"==p?T.anchor:"end"==p||"to"==p||!1===p?T.to():T.from()},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:qr(function(p,T,I){Cc(this,Yi(this,"number"==typeof p?Vi(p,T||0):p),null,I)}),setSelection:qr(function(p,T,I){Cc(this,Yi(this,p),Yi(this,T||p),I)}),extendSelection:qr(function(p,T,I){pl(this,Yi(this,p),T&&Yi(this,T),I)}),extendSelections:qr(function(p,T){el(this,zn(this,p),T)}),extendSelectionsBy:qr(function(p,T){el(this,zn(this,pe(this.sel.ranges,p)),T)}),setSelections:qr(function(p,T,I){if(p.length){for(var D=[],N=0;N<p.length;N++)D[N]=new Vr(Yi(this,p[N].anchor),Yi(this,p[N].head||p[N].anchor));null==T&&(T=Math.min(p.length-1,this.sel.primIndex)),ra(this,Ta(this.cm,D,T),I)}}),addSelection:qr(function(p,T,I){var D=this.sel.ranges.slice(0);D.push(new Vr(Yi(this,p),Yi(this,T||p))),ra(this,Ta(this.cm,D,D.length-1),I)}),getSelection:function(p){for(var I,T=this.sel.ranges,D=0;D<T.length;D++){var N=Vn(this,T[D].from(),T[D].to());I=I?I.concat(N):N}return!1===p?I:I.join(p||this.lineSeparator())},getSelections:function(p){for(var T=[],I=this.sel.ranges,D=0;D<I.length;D++){var N=Vn(this,I[D].from(),I[D].to());!1!==p&&(N=N.join(p||this.lineSeparator())),T[D]=N}return T},replaceSelection:function(p,T,I){for(var D=[],N=0;N<this.sel.ranges.length;N++)D[N]=p;this.replaceSelections(D,T,I||"+input")},replaceSelections:qr(function(p,T,I){for(var D=[],N=this.sel,Y=0;Y<N.ranges.length;Y++){var ut=N.ranges[Y];D[Y]={from:ut.from(),to:ut.to(),text:this.splitLines(p[Y]),origin:I}}for(var Tt=T&&"end"!=T&&function(p,T,I){for(var D=[],N=Vi(p.first,0),Y=N,ut=0;ut<T.length;ut++){var Tt=T[ut],Vt=rc(Tt.from,N,Y),Kt=rc(Nl(Tt),N,Y);if(N=Tt.to,Y=Kt,"around"==I){var Me=p.sel.ranges[ut],Xe=Sn(Me.head,Me.anchor)<0;D[ut]=new Vr(Xe?Kt:Vt,Xe?Vt:Kt)}else D[ut]=new Vr(Vt,Vt)}return new ia(D,p.sel.primIndex)}(this,D,T),Vt=D.length-1;Vt>=0;Vt--)Ca(this,D[Vt]);Tt?ru(this,Tt):this.cm&&it(this.cm)}),undo:qr(function(){Bl(this,"undo")}),redo:qr(function(){Bl(this,"redo")}),undoSelection:qr(function(){Bl(this,"undo",!0)}),redoSelection:qr(function(){Bl(this,"redo",!0)}),setExtending:function(p){this.extend=p},getExtending:function(){return this.extend},historySize:function(){for(var p=this.history,T=0,I=0,D=0;D<p.done.length;D++)p.done[D].ranges||++T;for(var N=0;N<p.undone.length;N++)p.undone[N].ranges||++I;return{undo:T,redo:I}},clearHistory:function(){var p=this;this.history=new yc(this.history),hl(this,function(T){return T.history=p.history},!0)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(p){return p&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(p){return this.history.generation==(p||this.cleanGeneration)},getHistory:function(){return{done:dl(this.history.done),undone:dl(this.history.undone)}},setHistory:function(p){var T=this.history=new yc(this.history);T.done=dl(p.done.slice(0),null,!0),T.undone=dl(p.undone.slice(0),null,!0)},setGutterMarker:qr(function(p,T,I){return pc(this,p,"gutter",function(D){var N=D.gutterMarkers||(D.gutterMarkers={});return N[T]=I,!I&&ne(N)&&(D.gutterMarkers=null),!0})}),clearGutter:qr(function(p){var T=this;this.iter(function(I){I.gutterMarkers&&I.gutterMarkers[p]&&pc(T,I,"gutter",function(){return I.gutterMarkers[p]=null,ne(I.gutterMarkers)&&(I.gutterMarkers=null),!0})})}),lineInfo:function(p){var T;if("number"==typeof p){if(!(Qr(this,p)&&(T=p,p=Ai(this,p))))return null}else if(null==(T=pr(p)))return null;return{line:T,handle:p,text:p.text,gutterMarkers:p.gutterMarkers,textClass:p.textClass,bgClass:p.bgClass,wrapClass:p.wrapClass,widgets:p.widgets}},addLineClass:qr(function(p,T,I){return pc(this,p,"gutter"==T?"gutter":"class",function(D){var N="text"==T?"textClass":"background"==T?"bgClass":"gutter"==T?"gutterClass":"wrapClass";if(D[N]){if(ot(I).test(D[N]))return!1;D[N]+=" "+I}else D[N]=I;return!0})}),removeLineClass:qr(function(p,T,I){return pc(this,p,"gutter"==T?"gutter":"class",function(D){var N="text"==T?"textClass":"background"==T?"bgClass":"gutter"==T?"gutterClass":"wrapClass",Y=D[N];if(!Y)return!1;if(null==I)D[N]=null;else{var ut=Y.match(ot(I));if(!ut)return!1;var Tt=ut.index+ut[0].length;D[N]=Y.slice(0,ut.index)+(ut.index&&Tt!=Y.length?" ":"")+Y.slice(Tt)||null}return!0})}),addLineWidget:qr(function(p,T,I){return function(p,T,I,D){var N=new Sl(p,I,D),Y=p.cm;return Y&&N.noHScroll&&(Y.display.alignWidgets=!0),pc(p,T,"widget",function(ut){var Tt=ut.widgets||(ut.widgets=[]);if(null==N.insertAt?Tt.push(N):Tt.splice(Math.min(Tt.length,Math.max(0,N.insertAt)),0,N),N.line=ut,Y&&!Lr(p,ut)){var Vt=jr(ut)<p.scrollTop;Br(ut,ut.height+Qt(N)),Vt&&pt(Y,N.height),Y.curOp.forceUpdate=!0}return!0}),Y&&hr(Y,"lineWidgetAdded",Y,N,"number"==typeof T?T:pr(T)),N}(this,p,T,I)}),removeLineWidget:function(p){p.clear()},markText:function(p,T,I){return Sa(this,Yi(this,p),Yi(this,T),I,I&&I.type||"range")},setBookmark:function(p,T){var I={replacedWith:T&&(null==T.nodeType?T.widget:T),insertLeft:T&&T.insertLeft,clearWhenEmpty:!1,shared:T&&T.shared,handleMouseEvents:T&&T.handleMouseEvents};return Sa(this,p=Yi(this,p),p,I,"bookmark")},findMarksAt:function(p){var T=[],I=Ai(this,(p=Yi(this,p)).line).markedSpans;if(I)for(var D=0;D<I.length;++D){var N=I[D];(null==N.from||N.from<=p.ch)&&(null==N.to||N.to>=p.ch)&&T.push(N.marker.parent||N.marker)}return T},findMarks:function(p,T,I){p=Yi(this,p),T=Yi(this,T);var D=[],N=p.line;return this.iter(p.line,T.line+1,function(Y){var ut=Y.markedSpans;if(ut)for(var Tt=0;Tt<ut.length;Tt++){var Vt=ut[Tt];!(null!=Vt.to&&N==p.line&&p.ch>=Vt.to||null==Vt.from&&N!=p.line||null!=Vt.from&&N==T.line&&Vt.from>=T.ch)&&(!I||I(Vt.marker))&&D.push(Vt.marker.parent||Vt.marker)}++N}),D},getAllMarks:function(){var p=[];return this.iter(function(T){var I=T.markedSpans;if(I)for(var D=0;D<I.length;++D)null!=I[D].from&&p.push(I[D].marker)}),p},posFromIndex:function(p){var T,I=this.first,D=this.lineSeparator().length;return this.iter(function(N){var Y=N.text.length+D;if(Y>p)return T=p,!0;p-=Y,++I}),Yi(this,Vi(I,T))},indexFromPos:function(p){var T=(p=Yi(this,p)).ch;if(p.line<this.first||p.ch<0)return 0;var I=this.lineSeparator().length;return this.iter(this.first,p.line,function(D){T+=D.text.length+I}),T},copy:function(p){var T=new ss(gr(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep,this.direction);return T.scrollTop=this.scrollTop,T.scrollLeft=this.scrollLeft,T.sel=this.sel,T.extend=!1,p&&(T.history.undoDepth=this.history.undoDepth,T.setHistory(this.getHistory())),T},linkedDoc:function(p){p||(p={});var T=this.first,I=this.first+this.size;null!=p.from&&p.from>T&&(T=p.from),null!=p.to&&p.to<I&&(I=p.to);var D=new ss(gr(this,T,I),p.mode||this.modeOption,T,this.lineSep,this.direction);return p.sharedHist&&(D.history=this.history),(this.linked||(this.linked=[])).push({doc:D,sharedHist:p.sharedHist}),D.linked=[{doc:this,isParent:!0,sharedHist:p.sharedHist}],function(p,T){for(var I=0;I<T.length;I++){var D=T[I],N=D.find(),Y=p.clipPos(N.from),ut=p.clipPos(N.to);if(Sn(Y,ut)){var Tt=Sa(p,Y,ut,D.primary,D.primary.type);D.markers.push(Tt),Tt.parent=D}}}(D,pa(this)),D},unlinkDoc:function(p){if(p instanceof Gr&&(p=p.doc),this.linked)for(var T=0;T<this.linked.length;++T)if(this.linked[T].doc==p){this.linked.splice(T,1),p.unlinkDoc(this),Hl(pa(this));break}if(p.history==this.history){var D=[p.id];hl(p,function(N){return D.push(N.id)},!0),p.history=new yc(null),p.history.done=dl(this.history.done,D),p.history.undone=dl(this.history.undone,D)}},iterLinkedDocs:function(p){hl(this,p)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(p){return this.lineSep?p.split(this.lineSep):tr(p)},lineSeparator:function(){return this.lineSep||"\n"},setDirection:qr(function(p){"rtl"!=p&&(p="ltr"),p!=this.direction&&(this.direction=p,this.iter(function(T){return T.order=null}),this.cm&&function(p){hs(p,function(){sc(p),is(p)})}(this.cm))})}),ss.prototype.eachLine=ss.prototype.iter;var Dc=0;function _t(p){var T=this;if(we(T),!Ci(T,p)&&!be(T.display,p)){Ui(p),n&&(Dc=+new Date);var I=ul(T,p,!0),D=p.dataTransfer.files;if(I&&!T.isReadOnly())if(D&&D.length&&window.FileReader&&window.File)for(var N=D.length,Y=Array(N),ut=0,Tt=function(){++ut==N&&Lo(T,function(){var ci={from:I=Yi(T.doc,I),to:I,text:T.doc.splitLines(Y.filter(function(Pi){return null!=Pi}).join(T.doc.lineSeparator())),origin:"paste"};Ca(T.doc,ci),ru(T.doc,nc(Yi(T.doc,I),Yi(T.doc,Nl(ci))))})()},Vt=function(ci,Pi){if(T.options.allowDropFileTypes&&-1==Qe(T.options.allowDropFileTypes,ci.type))Tt();else{var Ki=new FileReader;Ki.onerror=function(){return Tt()},Ki.onload=function(){var an=Ki.result;/[\x00-\x08\x0e-\x1f]{2}/.test(an)||(Y[Pi]=an),Tt()},Ki.readAsText(ci)}},Kt=0;Kt<D.length;Kt++)Vt(D[Kt],Kt);else{if(T.state.draggingText&&T.doc.sel.contains(I)>-1)return T.state.draggingText(p),void setTimeout(function(){return T.display.input.focus()},20);try{var Me=p.dataTransfer.getData("Text");if(Me){var Xe;if(T.state.draggingText&&!T.state.draggingText.copy&&(Xe=T.listSelections()),Fl(T.doc,nc(I,I)),Xe)for(var fi=0;fi<Xe.length;++fi)fl(T.doc,"",Xe[fi].anchor,Xe[fi].head,"drag");T.replaceSelection(Me,"around","paste"),T.display.input.focus()}}catch(ci){}}}}function we(p){p.display.dragCursor&&(p.display.lineSpace.removeChild(p.display.dragCursor),p.display.dragCursor=null)}function Ue(p){if(document.getElementsByClassName){for(var T=document.getElementsByClassName("CodeMirror"),I=[],D=0;D<T.length;D++){var N=T[D].CodeMirror;N&&I.push(N)}I.length&&I[0].operation(function(){for(var Y=0;Y<I.length;Y++)p(I[Y])})}}var di=!1;function qe(){di||(function(){var p;mi(window,"resize",function(){null==p&&(p=setTimeout(function(){p=null,Ue(Li)},100))}),mi(window,"blur",function(){return Ue(Aa)})}(),di=!0)}function Li(p){var T=p.display;T.cachedCharWidth=T.cachedTextHeight=T.cachedPaddingH=null,T.scrollbarsClipped=!1,p.setSize()}for(var xi={3:"Pause",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",145:"ScrollLock",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",224:"Mod",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"},zi=0;zi<10;zi++)xi[zi+48]=xi[zi+96]=String(zi);for(var Jn=65;Jn<=90;Jn++)xi[Jn]=String.fromCharCode(Jn);for(var Un=1;Un<=12;Un++)xi[Un+111]=xi[Un+63235]="F"+Un;var qn={};function $o(p){var T=p.split(/-(?!$)/);p=T[T.length-1];for(var I,D,N,Y,ut=0;ut<T.length-1;ut++){var Tt=T[ut];if(/^(cmd|meta|m)$/i.test(Tt))Y=!0;else if(/^a(lt)?$/i.test(Tt))I=!0;else if(/^(c|ctrl|control)$/i.test(Tt))D=!0;else{if(!/^s(hift)?$/i.test(Tt))throw new Error("Unrecognized modifier name: "+Tt);N=!0}}return I&&(p="Alt-"+p),D&&(p="Ctrl-"+p),Y&&(p="Cmd-"+p),N&&(p="Shift-"+p),p}function Do(p){var T={};for(var I in p)if(p.hasOwnProperty(I)){var D=p[I];if(/^(name|fallthrough|(de|at)tach)$/.test(I))continue;if("..."==D){delete p[I];continue}for(var N=pe(I.split(" "),$o),Y=0;Y<N.length;Y++){var ut=void 0,Tt=void 0;Y==N.length-1?(Tt=N.join(" "),ut=D):(Tt=N.slice(0,Y+1).join(" "),ut="...");var Vt=T[Tt];if(Vt){if(Vt!=ut)throw new Error("Inconsistent bindings for "+Tt)}else T[Tt]=ut}delete p[I]}for(var Kt in T)p[Kt]=T[Kt];return p}function Zr(p,T,I,D){var N=(T=oa(T)).call?T.call(p,D):T[p];if(!1===N)return"nothing";if("..."===N)return"multi";if(null!=N&&I(N))return"handled";if(T.fallthrough){if("[object Array]"!=Object.prototype.toString.call(T.fallthrough))return Zr(p,T.fallthrough,I,D);for(var Y=0;Y<T.fallthrough.length;Y++){var ut=Zr(p,T.fallthrough[Y],I,D);if(ut)return ut}}}function ho(p){var T="string"==typeof p?p:xi[p.keyCode];return"Ctrl"==T||"Alt"==T||"Shift"==T||"Mod"==T}function Go(p,T,I){var D=p;return T.altKey&&"Alt"!=D&&(p="Alt-"+p),(Ct?T.metaKey:T.ctrlKey)&&"Ctrl"!=D&&(p="Ctrl-"+p),(Ct?T.ctrlKey:T.metaKey)&&"Mod"!=D&&(p="Cmd-"+p),!I&&T.shiftKey&&"Shift"!=D&&(p="Shift-"+p),p}function po(p,T){if(x&&34==p.keyCode&&p.char)return!1;var I=xi[p.keyCode];return null!=I&&!p.altGraphKey&&(3==p.keyCode&&p.code&&(I=p.code),Go(I,p,T))}function oa(p){return"string"==typeof p?qn[p]:p}function ys(p,T){for(var I=p.doc.sel.ranges,D=[],N=0;N<I.length;N++){for(var Y=T(I[N]);D.length&&Sn(Y.from,At(D).to)<=0;){var ut=D.pop();if(Sn(ut.from,Y.from)<0){Y.from=ut.from;break}}D.push(Y)}hs(p,function(){for(var Tt=D.length-1;Tt>=0;Tt--)fl(p.doc,"",D[Tt].from,D[Tt].to,"+delete");it(p)})}function ds(p,T,I){var D=Zt(p.text,T+I,I);return D<0||D>p.text.length?null:D}function gl(p,T,I){var D=ds(p,T.ch,I);return null==D?null:new Vi(T.line,D,I<0?"after":"before")}function ou(p,T,I,D,N){if(p){"rtl"==T.doc.direction&&(N=-N);var Y=yi(I,T.doc.direction);if(Y){var Kt,ut=N<0?At(Y):Y[0],Vt=N<0==(1==ut.level)?"after":"before";if(ut.level>0||"rtl"==T.doc.direction){var Me=wr(T,I),Xe=Yr(T,Me,Kt=N<0?I.text.length-1:0).top;Kt=ce(function(fi){return Yr(T,Me,fi).top==Xe},N<0==(1==ut.level)?ut.from:ut.to-1,Kt),"before"==Vt&&(Kt=ds(I,Kt,1))}else Kt=N<0?ut.to:ut.from;return new Vi(D,Kt,Vt)}}return new Vi(D,N<0?I.text.length:0,N<0?"before":"after")}qn.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},qn.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},qn.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"},qn.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},qn.default=vt?qn.macDefault:qn.pcDefault;var zu={selectAll:zc,singleSelection:function(p){return p.setSelection(p.getCursor("anchor"),p.getCursor("head"),Le)},killLine:function(p){return ys(p,function(T){if(T.empty()){var I=Ai(p.doc,T.head.line).text.length;return T.head.ch==I&&T.head.line<p.lastLine()?{from:T.head,to:Vi(T.head.line+1,0)}:{from:T.head,to:Vi(T.head.line,I)}}return{from:T.from(),to:T.to()}})},deleteLine:function(p){return ys(p,function(T){return{from:Vi(T.from().line,0),to:Yi(p.doc,Vi(T.to().line+1,0))}})},delLineLeft:function(p){return ys(p,function(T){return{from:Vi(T.from().line,0),to:T.from()}})},delWrappedLineLeft:function(p){return ys(p,function(T){var I=p.charCoords(T.head,"div").top+5;return{from:p.coordsChar({left:0,top:I},"div"),to:T.from()}})},delWrappedLineRight:function(p){return ys(p,function(T){var I=p.charCoords(T.head,"div").top+5,D=p.coordsChar({left:p.display.lineDiv.offsetWidth+100,top:I},"div");return{from:T.from(),to:D}})},undo:function(p){return p.undo()},redo:function(p){return p.redo()},undoSelection:function(p){return p.undoSelection()},redoSelection:function(p){return p.redoSelection()},goDocStart:function(p){return p.extendSelection(Vi(p.firstLine(),0))},goDocEnd:function(p){return p.extendSelection(Vi(p.lastLine()))},goLineStart:function(p){return p.extendSelectionsBy(function(T){return Au(p,T.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(p){return p.extendSelectionsBy(function(T){return Ic(p,T.head)},{origin:"+move",bias:1})},goLineEnd:function(p){return p.extendSelectionsBy(function(T){return function(p,T){var I=Ai(p.doc,T),D=function(p){for(var T;T=Xo(p);)p=T.find(1,!0).line;return p}(I);return D!=I&&(T=pr(D)),ou(!0,p,I,T,-1)}(p,T.head.line)},{origin:"+move",bias:-1})},goLineRight:function(p){return p.extendSelectionsBy(function(T){var I=p.cursorCoords(T.head,"div").top+5;return p.coordsChar({left:p.display.lineDiv.offsetWidth+100,top:I},"div")},Bt)},goLineLeft:function(p){return p.extendSelectionsBy(function(T){var I=p.cursorCoords(T.head,"div").top+5;return p.coordsChar({left:0,top:I},"div")},Bt)},goLineLeftSmart:function(p){return p.extendSelectionsBy(function(T){var I=p.cursorCoords(T.head,"div").top+5,D=p.coordsChar({left:0,top:I},"div");return D.ch<p.getLine(D.line).search(/\S/)?Ic(p,T.head):D},Bt)},goLineUp:function(p){return p.moveV(-1,"line")},goLineDown:function(p){return p.moveV(1,"line")},goPageUp:function(p){return p.moveV(-1,"page")},goPageDown:function(p){return p.moveV(1,"page")},goCharLeft:function(p){return p.moveH(-1,"char")},goCharRight:function(p){return p.moveH(1,"char")},goColumnLeft:function(p){return p.moveH(-1,"column")},goColumnRight:function(p){return p.moveH(1,"column")},goWordLeft:function(p){return p.moveH(-1,"word")},goGroupRight:function(p){return p.moveH(1,"group")},goGroupLeft:function(p){return p.moveH(-1,"group")},goWordRight:function(p){return p.moveH(1,"word")},delCharBefore:function(p){return p.deleteH(-1,"codepoint")},delCharAfter:function(p){return p.deleteH(1,"char")},delWordBefore:function(p){return p.deleteH(-1,"word")},delWordAfter:function(p){return p.deleteH(1,"word")},delGroupBefore:function(p){return p.deleteH(-1,"group")},delGroupAfter:function(p){return p.deleteH(1,"group")},indentAuto:function(p){return p.indentSelection("smart")},indentMore:function(p){return p.indentSelection("add")},indentLess:function(p){return p.indentSelection("subtract")},insertTab:function(p){return p.replaceSelection("\t")},insertSoftTab:function(p){for(var T=[],I=p.listSelections(),D=p.options.tabSize,N=0;N<I.length;N++){var Y=I[N].from(),ut=Be(p.getLine(Y.line),Y.ch,D);T.push(_e(D-ut%D))}p.replaceSelections(T)},defaultTab:function(p){p.somethingSelected()?p.indentSelection("add"):p.execCommand("insertTab")},transposeChars:function(p){return hs(p,function(){for(var T=p.listSelections(),I=[],D=0;D<T.length;D++)if(T[D].empty()){var N=T[D].head,Y=Ai(p.doc,N.line).text;if(Y)if(N.ch==Y.length&&(N=new Vi(N.line,N.ch-1)),N.ch>0)N=new Vi(N.line,N.ch+1),p.replaceRange(Y.charAt(N.ch-1)+Y.charAt(N.ch-2),Vi(N.line,N.ch-2),N,"+transpose");else if(N.line>p.doc.first){var ut=Ai(p.doc,N.line-1).text;ut&&(N=new Vi(N.line,1),p.replaceRange(Y.charAt(0)+p.doc.lineSeparator()+ut.charAt(ut.length-1),Vi(N.line-1,ut.length-1),N,"+transpose"))}I.push(new Vr(N,N))}p.setSelections(I)})},newlineAndIndent:function(p){return hs(p,function(){for(var T=p.listSelections(),I=T.length-1;I>=0;I--)p.replaceRange(p.doc.lineSeparator(),T[I].anchor,T[I].head,"+input");T=p.listSelections();for(var D=0;D<T.length;D++)p.indentLine(T[D].from().line,null,!0);it(p)})},openLine:function(p){return p.replaceSelection("\n","start")},toggleOverwrite:function(p){return p.toggleOverwrite()}};function Au(p,T){var I=Ai(p.doc,T),D=xo(I);return D!=I&&(T=pr(D)),ou(!0,p,D,T,1)}function Ic(p,T){var I=Au(p,T.line),D=Ai(p.doc,I.line),N=yi(D,p.doc.direction);if(!N||0==N[0].level){var Y=Math.max(I.ch,D.text.search(/\S/));return Vi(I.line,T.line==I.line&&T.ch<=Y&&T.ch?0:Y,I.sticky)}return I}function su(p,T,I){if("string"==typeof T&&!(T=zu[T]))return!1;p.display.input.ensurePolled();var D=p.display.shift,N=!1;try{p.isReadOnly()&&(p.state.suppressEdits=!0),I&&(p.display.shift=!1),N=T(p)!=Ze}finally{p.display.shift=D,p.state.suppressEdits=!1}return N}var ju=new Ne;function xu(p,T,I,D){var N=p.state.keySeq;if(N){if(ho(T))return"handled";if(/\'$/.test(T)?p.state.keySeq=null:ju.set(50,function(){p.state.keySeq==N&&(p.state.keySeq=null,p.display.input.reset())}),Yu(p,N+" "+T,I,D))return!0}return Yu(p,T,I,D)}function Yu(p,T,I,D){var N=function(p,T,I){for(var D=0;D<p.state.keyMaps.length;D++){var N=Zr(T,p.state.keyMaps[D],I,p);if(N)return N}return p.options.extraKeys&&Zr(T,p.options.extraKeys,I,p)||Zr(T,p.options.keyMap,I,p)}(p,T,D);return"multi"==N&&(p.state.keySeq=T),"handled"==N&&hr(p,"keyHandled",p,T,I),("handled"==N||"multi"==N)&&(Ui(I),Wl(p)),!!N}function fc(p,T){var I=po(T,!0);return!!I&&(T.shiftKey&&!p.state.keySeq?xu(p,"Shift-"+I,T,function(D){return su(p,D,!0)})||xu(p,I,T,function(D){if("string"==typeof D?/^go[A-Z]/.test(D):D.motion)return su(p,D)}):xu(p,I,T,function(D){return su(p,D)}))}var au=null;function Yc(p){var T=this;if(!(p.target&&p.target!=T.display.input.getField()||(T.curOp.focus=he(),Ci(T,p)))){n&&r<11&&27==p.keyCode&&(p.returnValue=!1);var I=p.keyCode;T.display.shift=16==I||p.shiftKey;var D=fc(T,p);x&&(au=D?I:null,!D&&88==I&&!Je&&(vt?p.metaKey:p.ctrlKey)&&T.replaceSelection("",null,"cut")),C&&!vt&&!D&&46==I&&p.shiftKey&&!p.ctrlKey&&document.execCommand&&document.execCommand("cut"),18==I&&!/\bCodeMirror-crosshair\b/.test(T.display.lineDiv.className)&&function(p){var T=p.display.lineDiv;function I(D){(18==D.keyCode||!D.altKey)&&(mt(T,"CodeMirror-crosshair"),Ce(document,"keyup",I),Ce(document,"mouseover",I))}Mt(T,"CodeMirror-crosshair"),mi(document,"keyup",I),mi(document,"mouseover",I)}(T)}}function Xu(p){16==p.keyCode&&(this.doc.sel.shift=!1),Ci(this,p)}function Ch(p){var T=this;if(!(p.target&&p.target!=T.display.input.getField()||be(T.display,p)||Ci(T,p)||p.ctrlKey&&!p.altKey||vt&&p.metaKey)){var I=p.keyCode,D=p.charCode;if(x&&I==au)return au=null,void Ui(p);if(!x||p.which&&!(p.which<10)||!fc(T,p)){var N=String.fromCharCode(null==D?I:D);"\b"!=N&&(function(p,T,I){return xu(p,"'"+I+"'",T,function(D){return su(p,D,!0)})}(T,p,N)||T.display.input.onKeyPress(p))}}}var Lu,Xc,lu=function(p,T,I){this.time=p,this.pos=T,this.button=I};function Ku(p){var T=this,I=T.display;if(!(Ci(T,p)||I.activeTouch&&I.input.supportsTouch())){if(I.input.ensurePolled(),I.shift=p.shiftKey,be(I,p))return void(s||(I.scroller.draggable=!1,setTimeout(function(){return I.scroller.draggable=!0},100)));if(!Kc(T,p)){var D=ul(T,p),N=Lt(p),Y=D?function(p,T){var I=+new Date;return Xc&&Xc.compare(I,p,T)?(Lu=Xc=null,"triple"):Lu&&Lu.compare(I,p,T)?(Xc=new lu(I,p,T),Lu=null,"double"):(Lu=new lu(I,p,T),Xc=null,"single")}(D,N):"single";window.focus(),1==N&&T.state.selectingText&&T.state.selectingText(p),(!D||!function(p,T,I,D,N){var Y="Click";return"double"==D?Y="Double"+Y:"triple"==D&&(Y="Triple"+Y),xu(p,Go(Y=(1==T?"Left":2==T?"Middle":"Right")+Y,N),N,function(ut){if("string"==typeof ut&&(ut=zu[ut]),!ut)return!1;var Tt=!1;try{p.isReadOnly()&&(p.state.suppressEdits=!0),Tt=ut(p,I)!=Ze}finally{p.state.suppressEdits=!1}return Tt})}(T,N,D,Y,p))&&(1==N?D?function(p,T,I,D){n?setTimeout(ve(ua,p),0):p.curOp.focus=he();var ut,N=function(p,T,I){var D=p.getOption("configureMouse"),N=D?D(p,T,I):{};return null==N.unit&&(N.unit=(xt?I.shiftKey&&I.metaKey:I.altKey)?"rectangle":"single"==T?"char":"double"==T?"word":"line"),(null==N.extend||p.doc.extend)&&(N.extend=p.doc.extend||I.shiftKey),null==N.addNew&&(N.addNew=vt?I.metaKey:I.ctrlKey),null==N.moveOnDrag&&(N.moveOnDrag=!(vt?I.altKey:I.ctrlKey)),N}(p,I,D),Y=p.doc.sel;p.options.dragDrop&&ae&&!p.isReadOnly()&&"single"==I&&(ut=Y.contains(T))>-1&&(Sn((ut=Y.ranges[ut]).from(),T)<0||T.xRel>0)&&(Sn(ut.to(),T)>0||T.xRel<0)?function(p,T,I,D){var N=p.display,Y=!1,ut=Lo(p,function(Kt){s&&(N.scroller.draggable=!1),p.state.draggingText=!1,p.state.delayingBlurEvent&&(p.hasFocus()?p.state.delayingBlurEvent=!1:Ua(p)),Ce(N.wrapper.ownerDocument,"mouseup",ut),Ce(N.wrapper.ownerDocument,"mousemove",Tt),Ce(N.scroller,"dragstart",Vt),Ce(N.scroller,"drop",ut),Y||(Ui(Kt),D.addNew||pl(p.doc,I,null,null,D.extend),s&&!B||n&&9==r?setTimeout(function(){N.wrapper.ownerDocument.body.focus({preventScroll:!0}),N.input.focus()},20):N.input.focus())}),Tt=function(Kt){Y=Y||Math.abs(T.clientX-Kt.clientX)+Math.abs(T.clientY-Kt.clientY)>=10},Vt=function(){return Y=!0};s&&(N.scroller.draggable=!0),p.state.draggingText=ut,ut.copy=!D.moveOnDrag,mi(N.wrapper.ownerDocument,"mouseup",ut),mi(N.wrapper.ownerDocument,"mousemove",Tt),mi(N.scroller,"dragstart",Vt),mi(N.scroller,"drop",ut),p.state.delayingBlurEvent=!0,setTimeout(function(){return N.input.focus()},20),N.scroller.dragDrop&&N.scroller.dragDrop()}(p,D,T,N):function(p,T,I,D){n&&Ua(p);var N=p.display,Y=p.doc;Ui(T);var ut,Tt,Vt=Y.sel,Kt=Vt.ranges;if(D.addNew&&!D.extend?(Tt=Y.sel.contains(I),ut=Tt>-1?Kt[Tt]:new Vr(I,I)):(ut=Y.sel.primary(),Tt=Y.sel.primIndex),"rectangle"==D.unit)D.addNew||(ut=new Vr(I,I)),I=ul(p,T,!0,!0),Tt=-1;else{var Me=Nu(p,I,D.unit);ut=D.extend?Jo(ut,Me.anchor,Me.head,D.extend):Me}D.addNew?-1==Tt?(Tt=Kt.length,ra(Y,Ta(p,Kt.concat([ut]),Tt),{scroll:!1,origin:"*mouse"})):Kt.length>1&&Kt[Tt].empty()&&"char"==D.unit&&!D.extend?(ra(Y,Ta(p,Kt.slice(0,Tt).concat(Kt.slice(Tt+1)),0),{scroll:!1,origin:"*mouse"}),Vt=Y.sel):hc(Y,Tt,ut,gi):(Tt=0,ra(Y,new ia([ut],0),gi),Vt=Y.sel);var Xe=I;function fi(dn){if(0!=Sn(Xe,dn))if(Xe=dn,"rectangle"==D.unit){for(var In=[],Xn=p.options.tabSize,Yn=Be(Ai(Y,I.line).text,I.ch,Xn),mr=Be(Ai(Y,dn.line).text,dn.ch,Xn),fo=Math.min(Yn,mr),Es=Math.max(Yn,mr),Wo=Math.min(I.line,dn.line),wa=Math.min(p.lastLine(),Math.max(I.line,dn.line));Wo<=wa;Wo++){var La=Ai(Y,Wo).text,Ts=Te(La,fo,Xn);fo==Es?In.push(new Vr(Vi(Wo,Ts),Vi(Wo,Ts))):La.length>Ts&&In.push(new Vr(Vi(Wo,Ts),Vi(Wo,Te(La,Es,Xn))))}In.length||In.push(new Vr(I,I)),ra(Y,Ta(p,Vt.ranges.slice(0,Tt).concat(In),Tt),{origin:"*mouse",scroll:!1}),p.scrollIntoView(dn)}else{var S,Xr=ut,ks=Nu(p,dn,D.unit),as=Xr.anchor;Sn(ks.anchor,as)>0?(S=ks.head,as=Oi(Xr.from(),ks.anchor)):(S=ks.anchor,as=He(Xr.to(),ks.head));var H=Vt.ranges.slice(0);H[Tt]=function(p,T){var I=T.anchor,D=T.head,N=Ai(p.doc,I.line);if(0==Sn(I,D)&&I.sticky==D.sticky)return T;var Y=yi(N);if(!Y)return T;var ut=Fi(Y,I.ch,I.sticky),Tt=Y[ut];if(Tt.from!=I.ch&&Tt.to!=I.ch)return T;var Kt,Vt=ut+(Tt.from==I.ch==(1!=Tt.level)?0:1);if(0==Vt||Vt==Y.length)return T;if(D.line!=I.line)Kt=(D.line-I.line)*("ltr"==p.doc.direction?1:-1)>0;else{var Me=Fi(Y,D.ch,D.sticky),Xe=Me-ut||(D.ch-I.ch)*(1==Tt.level?-1:1);Kt=Me==Vt-1||Me==Vt?Xe<0:Xe>0}var fi=Y[Vt+(Kt?-1:0)],ci=Kt==(1==fi.level),Pi=ci?fi.from:fi.to,Ki=ci?"after":"before";return I.ch==Pi&&I.sticky==Ki?T:new Vr(new Vi(I.line,Pi,Ki),D)}(p,new Vr(Yi(Y,as),S)),ra(Y,Ta(p,H,Tt),gi)}}var ci=N.wrapper.getBoundingClientRect(),Pi=0;function Ki(dn){var In=++Pi,Xn=ul(p,dn,!0,"rectangle"==D.unit);if(Xn)if(0!=Sn(Xn,Xe)){p.curOp.focus=he(),fi(Xn);var Yn=El(N,Y);(Xn.line>=Yn.to||Xn.line<Yn.from)&&setTimeout(Lo(p,function(){Pi==In&&Ki(dn)}),150)}else{var mr=dn.clientY<ci.top?-20:dn.clientY>ci.bottom?20:0;mr&&setTimeout(Lo(p,function(){Pi==In&&(N.scroller.scrollTop+=mr,Ki(dn))}),50)}}function an(dn){p.state.selectingText=!1,Pi=1/0,dn&&(Ui(dn),N.input.focus()),Ce(N.wrapper.ownerDocument,"mousemove",mn),Ce(N.wrapper.ownerDocument,"mouseup",Cn),Y.history.lastSelOrigin=null}var mn=Lo(p,function(dn){0!==dn.buttons&&Lt(dn)?Ki(dn):an(dn)}),Cn=Lo(p,an);p.state.selectingText=Cn,mi(N.wrapper.ownerDocument,"mousemove",mn),mi(N.wrapper.ownerDocument,"mouseup",Cn)}(p,D,T,N)}(T,D,Y,p):ct(p)==I.scroller&&Ui(p):2==N?(D&&pl(T.doc,D),setTimeout(function(){return I.input.focus()},20)):3==N&&(yt?T.display.input.onContextMenu(p):Ua(T)))}}}function Nu(p,T,I){if("char"==I)return new Vr(T,T);if("word"==I)return p.findWordAt(T);if("line"==I)return new Vr(Vi(T.line,0),Yi(p.doc,Vi(T.line+1,0)));var D=I(p,T);return new Vr(D.from,D.to)}function fa(p,T,I,D){var N,Y;if(T.touches)N=T.touches[0].clientX,Y=T.touches[0].clientY;else try{N=T.clientX,Y=T.clientY}catch(fi){return!1}if(N>=Math.floor(p.display.gutters.getBoundingClientRect().right))return!1;D&&Ui(T);var ut=p.display,Tt=ut.lineDiv.getBoundingClientRect();if(Y>Tt.bottom||!Ii(p,I))return fe(T);Y-=Tt.top-ut.viewOffset;for(var Vt=0;Vt<p.display.gutterSpecs.length;++Vt){var Kt=ut.gutters.childNodes[Vt];if(Kt&&Kt.getBoundingClientRect().right>=N)return Oe(p,I,p,Dr(p.doc,Y),p.display.gutterSpecs[Vt].className,T),fe(T)}}function Kc(p,T){return fa(p,T,"gutterClick",!0)}function Ul(p,T){be(p.display,T)||function(p,T){return!!Ii(p,"gutterContextMenu")&&fa(p,T,"gutterContextMenu",!1)}(p,T)||Ci(p,T,"contextmenu")||yt||p.display.input.onContextMenu(T)}function sa(p){p.display.wrapper.className=p.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+p.options.theme.replace(/(^|\s)\s*/g," cm-s-"),Ms(p)}lu.prototype.compare=function(p,T,I){return this.time+400>p&&0==Sn(T,this.pos)&&I==this.button};var Rl={toString:function(){return"CodeMirror.Init"}},cu={},uu={};function hu(p,T,I){if(!T!=!(I&&I!=Rl)){var N=p.display.dragFunctions,Y=T?mi:Ce;Y(p.display.scroller,"dragstart",N.start),Y(p.display.scroller,"dragenter",N.enter),Y(p.display.scroller,"dragover",N.over),Y(p.display.scroller,"dragleave",N.leave),Y(p.display.scroller,"drop",N.drop)}}function ph(p){p.options.lineWrapping?(Mt(p.display.wrapper,"CodeMirror-wrap"),p.display.sizer.style.minWidth="",p.display.sizerWidth=null):(mt(p.display.wrapper,"CodeMirror-wrap"),vl(p)),Al(p),is(p),Ms(p),setTimeout(function(){return $r(p)},100)}function Gr(p,T){var I=this;if(!(this instanceof Gr))return new Gr(p,T);this.options=T=T?ue(T):{},ue(cu,T,!1);var D=T.value;"string"==typeof D?D=new ss(D,T.mode,null,T.lineSeparator,T.direction):T.mode&&(D.modeOption=T.mode),this.doc=D;var N=new Gr.inputStyles[T.inputStyle](this),Y=this.display=new ha(p,D,N,T);for(var ut in Y.wrapper.CodeMirror=this,sa(this),T.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),Ys(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:-1,cutIncoming:-1,selectingText:!1,draggingText:!1,highlight:new Ne,keySeq:null,specialChars:null},T.autofocus&&!Ht&&Y.input.focus(),n&&r<11&&setTimeout(function(){return I.display.input.reset(!0)},20),function(p){var T=p.display;mi(T.scroller,"mousedown",Lo(p,Ku)),mi(T.scroller,"dblclick",n&&r<11?Lo(p,function(Vt){if(!Ci(p,Vt)){var Kt=ul(p,Vt);if(Kt&&!Kc(p,Vt)&&!be(p.display,Vt)){Ui(Vt);var Me=p.findWordAt(Kt);pl(p.doc,Me.anchor,Me.head)}}}):function(Vt){return Ci(p,Vt)||Ui(Vt)}),mi(T.scroller,"contextmenu",function(Vt){return Ul(p,Vt)}),mi(T.input.getField(),"contextmenu",function(Vt){T.scroller.contains(Vt.target)||Ul(p,Vt)});var I,D={end:0};function N(){T.activeTouch&&(I=setTimeout(function(){return T.activeTouch=null},1e3),(D=T.activeTouch).end=+new Date)}function Y(Vt){if(1!=Vt.touches.length)return!1;var Kt=Vt.touches[0];return Kt.radiusX<=1&&Kt.radiusY<=1}function ut(Vt,Kt){if(null==Kt.left)return!0;var Me=Kt.left-Vt.left,Xe=Kt.top-Vt.top;return Me*Me+Xe*Xe>400}mi(T.scroller,"touchstart",function(Vt){if(!Ci(p,Vt)&&!Y(Vt)&&!Kc(p,Vt)){T.input.ensurePolled(),clearTimeout(I);var Kt=+new Date;T.activeTouch={start:Kt,moved:!1,prev:Kt-D.end<=300?D:null},1==Vt.touches.length&&(T.activeTouch.left=Vt.touches[0].pageX,T.activeTouch.top=Vt.touches[0].pageY)}}),mi(T.scroller,"touchmove",function(){T.activeTouch&&(T.activeTouch.moved=!0)}),mi(T.scroller,"touchend",function(Vt){var Kt=T.activeTouch;if(Kt&&!be(T,Vt)&&null!=Kt.left&&!Kt.moved&&new Date-Kt.start<300){var Xe,Me=p.coordsChar(T.activeTouch,"page");Xe=!Kt.prev||ut(Kt,Kt.prev)?new Vr(Me,Me):!Kt.prev.prev||ut(Kt,Kt.prev.prev)?p.findWordAt(Me):new Vr(Vi(Me.line,0),Yi(p.doc,Vi(Me.line+1,0))),p.setSelection(Xe.anchor,Xe.head),p.focus(),Ui(Vt)}N()}),mi(T.scroller,"touchcancel",N),mi(T.scroller,"scroll",function(){T.scroller.clientHeight&&(Ve(p,T.scroller.scrollTop),Ni(p,T.scroller.scrollLeft,!0),Oe(p,"scroll",p))}),mi(T.scroller,"mousewheel",function(Vt){return iu(p,Vt)}),mi(T.scroller,"DOMMouseScroll",function(Vt){return iu(p,Vt)}),mi(T.wrapper,"scroll",function(){return T.wrapper.scrollTop=T.wrapper.scrollLeft=0}),T.dragFunctions={enter:function(Vt){Ci(p,Vt)||kt(Vt)},over:function(Vt){Ci(p,Vt)||(function(p,T){var I=ul(p,T);if(I){var D=document.createDocumentFragment();Ha(p,I,D),p.display.dragCursor||(p.display.dragCursor=Rt("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),p.display.lineSpace.insertBefore(p.display.dragCursor,p.display.cursorDiv)),Ut(p.display.dragCursor,D)}}(p,Vt),kt(Vt))},start:function(Vt){return function(p,T){if(n&&(!p.state.draggingText||+new Date-Dc<100))kt(T);else if(!Ci(p,T)&&!be(p.display,T)&&(T.dataTransfer.setData("Text",p.getSelection()),T.dataTransfer.effectAllowed="copyMove",T.dataTransfer.setDragImage&&!B)){var I=Rt("img",null,null,"position: fixed; left: 0; top: 0;");I.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",x&&(I.width=I.height=1,p.display.wrapper.appendChild(I),I._top=I.offsetTop),T.dataTransfer.setDragImage(I,0,0),x&&I.parentNode.removeChild(I)}}(p,Vt)},drop:Lo(p,_t),leave:function(Vt){Ci(p,Vt)||we(p)}};var Tt=T.input.getField();mi(Tt,"keyup",function(Vt){return Xu.call(p,Vt)}),mi(Tt,"keydown",Lo(p,Yc)),mi(Tt,"keypress",Lo(p,Ch)),mi(Tt,"focus",function(Vt){return js(p,Vt)}),mi(Tt,"blur",function(Vt){return Aa(p,Vt)})}(this),qe(),Uo(this),this.curOp.forceUpdate=!0,Ar(this,D),T.autofocus&&!Ht||this.hasFocus()?setTimeout(function(){I.hasFocus()&&!I.state.focused&&js(I)},20):Aa(this),uu)uu.hasOwnProperty(ut)&&uu[ut](this,T[ut],Rl);bc(this),T.finishInit&&T.finishInit(this);for(var Tt=0;Tt<Jc.length;++Tt)Jc[Tt](this);qa(this),s&&T.lineWrapping&&"optimizelegibility"==getComputedStyle(Y.lineDiv).textRendering&&(Y.lineDiv.style.textRendering="auto")}Gr.defaults=cu,Gr.optionHandlers=uu;var Jc=[];function Ac(p,T,I,D){var Y,N=p.doc;null==I&&(I="add"),"smart"==I&&(N.mode.indent?Y=ro(p,T).state:I="prev");var ut=p.options.tabSize,Tt=Ai(N,T),Vt=Be(Tt.text,null,ut);Tt.stateAfter&&(Tt.stateAfter=null);var Me,Kt=Tt.text.match(/^\s*/)[0];if(D||/\S/.test(Tt.text)){if("smart"==I&&((Me=N.mode.indent(Y,Tt.text.slice(Kt.length),Tt.text))==Ze||Me>150)){if(!D)return;I="prev"}}else Me=0,I="not";"prev"==I?Me=T>N.first?Be(Ai(N,T-1).text,null,ut):0:"add"==I?Me=Vt+p.options.indentUnit:"subtract"==I?Me=Vt-p.options.indentUnit:"number"==typeof I&&(Me=Vt+I),Me=Math.max(0,Me);var Xe="",fi=0;if(p.options.indentWithTabs)for(var ci=Math.floor(Me/ut);ci;--ci)fi+=ut,Xe+="\t";if(fi<Me&&(Xe+=_e(Me-fi)),Xe!=Kt)return fl(N,Xe,Vi(T,0),Vi(T,Kt.length),"+input"),Tt.stateAfter=null,!0;for(var Pi=0;Pi<N.sel.ranges.length;Pi++){var Ki=N.sel.ranges[Pi];if(Ki.head.line==T&&Ki.head.ch<Kt.length){var an=Vi(T,Kt.length);hc(N,Pi,new Vr(an,an));break}}}Gr.defineInitHook=function(p){return Jc.push(p)};var ml=null;function du(p){ml=p}function $c(p,T,I,D,N){var Y=p.doc;p.display.shift=!1,D||(D=Y.sel);var ut=+new Date-200,Tt="paste"==N||p.state.pasteIncoming>ut,Vt=tr(T),Kt=null;if(Tt&&D.ranges.length>1)if(ml&&ml.text.join("\n")==T){if(D.ranges.length%ml.text.length==0){Kt=[];for(var Me=0;Me<ml.text.length;Me++)Kt.push(Y.splitLines(ml.text[Me]))}}else Vt.length==D.ranges.length&&p.options.pasteLinesPerSelection&&(Kt=pe(Vt,function(mn){return[mn]}));for(var Xe=p.curOp.updateInput,fi=D.ranges.length-1;fi>=0;fi--){var ci=D.ranges[fi],Pi=ci.from(),Ki=ci.to();ci.empty()&&(I&&I>0?Pi=Vi(Pi.line,Pi.ch-I):p.state.overwrite&&!Tt?Ki=Vi(Ki.line,Math.min(Ai(Y,Ki.line).text.length,Ki.ch+At(Vt).length)):Tt&&ml&&ml.lineWise&&ml.text.join("\n")==Vt.join("\n")&&(Pi=Ki=Vi(Pi.line,0)));var an={from:Pi,to:Ki,text:Kt?Kt[fi%Kt.length]:Vt,origin:N||(Tt?"paste":p.state.cutIncoming>ut?"cut":"+input")};Ca(p.doc,an),hr(p,"inputRead",p,an)}T&&!Tt&&gh(p,T),it(p),p.curOp.updateInput<2&&(p.curOp.updateInput=Xe),p.curOp.typing=!0,p.state.pasteIncoming=p.state.cutIncoming=-1}function Pu(p,T){var I=p.clipboardData&&p.clipboardData.getData("Text");if(I)return p.preventDefault(),!T.isReadOnly()&&!T.options.disableInput&&hs(T,function(){return $c(T,I,0,null,"paste")}),!0}function gh(p,T){if(p.options.electricChars&&p.options.smartIndent)for(var I=p.doc.sel,D=I.ranges.length-1;D>=0;D--){var N=I.ranges[D];if(!(N.head.ch>100||D&&I.ranges[D-1].head.line==N.head.line)){var Y=p.getModeAt(N.head),ut=!1;if(Y.electricChars){for(var Tt=0;Tt<Y.electricChars.length;Tt++)if(T.indexOf(Y.electricChars.charAt(Tt))>-1){ut=Ac(p,N.head.line,"smart");break}}else Y.electricInput&&Y.electricInput.test(Ai(p.doc,N.head.line).text.slice(0,N.head.ch))&&(ut=Ac(p,N.head.line,"smart"));ut&&hr(p,"electricInput",p,N.head.line)}}}function Dl(p){for(var T=[],I=[],D=0;D<p.doc.sel.ranges.length;D++){var N=p.doc.sel.ranges[D].head.line,Y={anchor:Vi(N,0),head:Vi(N+1,0)};I.push(Y),T.push(p.getRange(Y.anchor,Y.head))}return{text:T,ranges:I}}function pu(p,T,I,D){p.setAttribute("autocorrect",I?"":"off"),p.setAttribute("autocapitalize",D?"":"off"),p.setAttribute("spellcheck",!!T)}function Oc(){var p=Rt("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; min-height: 1em; outline: none"),T=Rt("div",[p],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return s?p.style.width="1000px":p.setAttribute("wrap","off"),rt&&(p.style.border="1px solid black"),pu(p),T}function Jl(p,T,I,D,N){var Y=T,ut=I,Tt=Ai(p,T.line),Vt=N&&"rtl"==p.direction?-I:I;function Me(Cn){var dn;if("codepoint"==D){var In=Tt.text.charCodeAt(T.ch+(I>0?0:-1));dn=isNaN(In)?null:new Vi(T.line,Math.max(0,Math.min(Tt.text.length,T.ch+I*((I>0?In>=55296&&In<56320:In>=56320&&In<57343)?2:1))),-I)}else dn=N?function(p,T,I,D){var N=yi(T,p.doc.direction);if(!N)return gl(T,I,D);I.ch>=T.text.length?(I.ch=T.text.length,I.sticky="before"):I.ch<=0&&(I.ch=0,I.sticky="after");var Y=Fi(N,I.ch,I.sticky),ut=N[Y];if("ltr"==p.doc.direction&&ut.level%2==0&&(D>0?ut.to>I.ch:ut.from<I.ch))return gl(T,I,D);var Vt,Tt=function(mn,Cn){return ds(T,mn instanceof Vi?mn.ch:mn,Cn)},Kt=function(mn){return p.options.lineWrapping?(Vt=Vt||wr(p,T),Mr(p,T,Vt,mn)):{begin:0,end:T.text.length}},Me=Kt("before"==I.sticky?Tt(I,-1):I.ch);if("rtl"==p.doc.direction||1==ut.level){var Xe=1==ut.level==D<0,fi=Tt(I,Xe?1:-1);if(null!=fi&&(Xe?fi<=ut.to&&fi<=Me.end:fi>=ut.from&&fi>=Me.begin))return new Vi(I.line,fi,Xe?"before":"after")}var Pi=function(mn,Cn,dn){for(;mn>=0&&mn<N.length;mn+=Cn){var Xn=N[mn],Yn=Cn>0==(1!=Xn.level),mr=Yn?dn.begin:Tt(dn.end,-1);if(Xn.from<=mr&&mr<Xn.to||(mr=Yn?Xn.from:Tt(Xn.to,-1),dn.begin<=mr&&mr<dn.end))return fo=mr,Yn?new Vi(I.line,Tt(fo,1),"before"):new Vi(I.line,fo,"after")}var fo},Ki=Pi(Y+D,D,Me);if(Ki)return Ki;var an=D>0?Me.end:Tt(Me.begin,-1);return null==an||D>0&&an==T.text.length||!(Ki=Pi(D>0?0:N.length-1,D,Kt(an)))?null:Ki}(p.cm,Tt,T,I):gl(Tt,T,I);if(null==dn){if(Cn||!function(){var Cn=T.line+Vt;return!(Cn<p.first||Cn>=p.first+p.size)&&(T=new Vi(Cn,T.ch,T.sticky),Tt=Ai(p,Cn))}())return!1;T=ou(N,p.cm,Tt,T.line,Vt)}else T=dn;return!0}if("char"==D||"codepoint"==D)Me();else if("column"==D)Me(!0);else if("word"==D||"group"==D)for(var Xe=null,fi="group"==D,ci=p.cm&&p.cm.getHelper(T,"wordChars"),Pi=!0;!(I<0)||Me(!Pi);Pi=!1){var Ki=Tt.text.charAt(T.ch)||"\n",an=ke(Ki,ci)?"w":fi&&"\n"==Ki?"n":!fi||/\s/.test(Ki)?null:"p";if(fi&&!Pi&&!an&&(an="s"),Xe&&Xe!=an){I<0&&(I=1,Me(),T.sticky="after");break}if(an&&(Xe=an),I>0&&!Me(!Pi))break}var mn=Wc(p,T,Y,ut,!0);return Gn(Y,mn)&&(mn.hitSide=!0),mn}function fu(p,T,I,D){var ut,Kt,N=p.doc,Y=T.left;if("page"==D){var Tt=Math.min(p.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight),Vt=Math.max(Tt-.5*ca(p.display),3);ut=(I>0?T.bottom:T.top)+I*Vt}else"line"==D&&(ut=I>0?T.bottom+3:T.top-3);for(;(Kt=Er(p,Y,ut)).outside;){if(I<0?ut<=0:ut>=N.height){Kt.hitSide=!0;break}ut+=5*I}return Kt}var wo=function(p){this.cm=p,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new Ne,this.composing=null,this.gracePeriod=!1,this.readDOMTimeout=null};function Zu(p,T){var I=rr(p,T.line);if(!I||I.hidden)return null;var D=Ai(p.doc,T.line),N=Qn(I,D,T.line),Y=yi(D,p.doc.direction),ut="left";Y&&(ut=Fi(Y,T.ch)%2?"right":"left");var Vt=ko(N.map,T.ch,ut);return Vt.offset="right"==Vt.collapse?Vt.end:Vt.start,Vt}function Zc(p,T){return T&&(p.bad=!0),p}function Fu(p,T,I){var D;if(T==p.display.lineDiv){if(!(D=p.display.lineDiv.childNodes[I]))return Zc(p.clipPos(Vi(p.display.viewTo-1)),!0);T=null,I=0}else for(D=T;;D=D.parentNode){if(!D||D==p.display.lineDiv)return null;if(D.parentNode&&D.parentNode==p.display.lineDiv)break}for(var N=0;N<p.display.view.length;N++){var Y=p.display.view[N];if(Y.node==D)return gu(Y,T,I)}}function gu(p,T,I){var D=p.text.firstChild,N=!1;if(!T||!nt(D,T))return Zc(Vi(pr(p.line),0),!0);if(T==D&&(N=!0,T=D.childNodes[I],I=0,!T)){var Y=p.rest?At(p.rest):p.line;return Zc(Vi(pr(Y),Y.text.length),N)}var ut=3==T.nodeType?T:null,Tt=T;for(!ut&&1==T.childNodes.length&&3==T.firstChild.nodeType&&(ut=T.firstChild,I&&(I=ut.nodeValue.length));Tt.parentNode!=D;)Tt=Tt.parentNode;var Vt=p.measure,Kt=Vt.maps;function Me(an,mn,Cn){for(var dn=-1;dn<(Kt?Kt.length:0);dn++)for(var In=dn<0?Vt.map:Kt[dn],Xn=0;Xn<In.length;Xn+=3){var Yn=In[Xn+2];if(Yn==an||Yn==mn){var mr=pr(dn<0?p.line:p.rest[dn]),fo=In[Xn]+Cn;return(Cn<0||Yn!=an)&&(fo=In[Xn+(Cn?1:0)]),Vi(mr,fo)}}}var Xe=Me(ut,Tt,I);if(Xe)return Zc(Xe,N);for(var fi=Tt.nextSibling,ci=ut?ut.nodeValue.length-I:0;fi;fi=fi.nextSibling){if(Xe=Me(fi,fi.firstChild,0))return Zc(Vi(Xe.line,Xe.ch-ci),N);ci+=fi.textContent.length}for(var Pi=Tt.previousSibling,Ki=I;Pi;Pi=Pi.previousSibling){if(Xe=Me(Pi,Pi.firstChild,-1))return Zc(Vi(Xe.line,Xe.ch+Ki),N);Ki+=Pi.textContent.length}}wo.prototype.init=function(p){var T=this,I=this,D=I.cm,N=I.div=p.lineDiv;function Y(Tt){for(var Vt=Tt.target;Vt;Vt=Vt.parentNode){if(Vt==N)return!0;if(/\bCodeMirror-(?:line)?widget\b/.test(Vt.className))break}return!1}function ut(Tt){if(Y(Tt)&&!Ci(D,Tt)){if(D.somethingSelected())du({lineWise:!1,text:D.getSelections()}),"cut"==Tt.type&&D.replaceSelection("",null,"cut");else{if(!D.options.lineWiseCopyCut)return;var Vt=Dl(D);du({lineWise:!0,text:Vt.text}),"cut"==Tt.type&&D.operation(function(){D.setSelections(Vt.ranges,0,Le),D.replaceSelection("",null,"cut")})}if(Tt.clipboardData){Tt.clipboardData.clearData();var Kt=ml.text.join("\n");if(Tt.clipboardData.setData("Text",Kt),Tt.clipboardData.getData("Text")==Kt)return void Tt.preventDefault()}var Me=Oc(),Xe=Me.firstChild;D.display.lineSpace.insertBefore(Me,D.display.lineSpace.firstChild),Xe.value=ml.text.join("\n");var fi=he();de(Xe),setTimeout(function(){D.display.lineSpace.removeChild(Me),fi.focus(),fi==N&&I.showPrimarySelection()},50)}}N.contentEditable=!0,pu(N,D.options.spellcheck,D.options.autocorrect,D.options.autocapitalize),mi(N,"paste",function(Tt){!Y(Tt)||Ci(D,Tt)||Pu(Tt,D)||r<=11&&setTimeout(Lo(D,function(){return T.updateFromDOM()}),20)}),mi(N,"compositionstart",function(Tt){T.composing={data:Tt.data,done:!1}}),mi(N,"compositionupdate",function(Tt){T.composing||(T.composing={data:Tt.data,done:!1})}),mi(N,"compositionend",function(Tt){T.composing&&(Tt.data!=T.composing.data&&T.readFromDOMSoon(),T.composing.done=!0)}),mi(N,"touchstart",function(){return I.forceCompositionEnd()}),mi(N,"input",function(){T.composing||T.readFromDOMSoon()}),mi(N,"copy",ut),mi(N,"cut",ut)},wo.prototype.screenReaderLabelChanged=function(p){p?this.div.setAttribute("aria-label",p):this.div.removeAttribute("aria-label")},wo.prototype.prepareSelection=function(){var p=Gl(this.cm,!1);return p.focus=he()==this.div,p},wo.prototype.showSelection=function(p,T){!p||!this.cm.display.view.length||((p.focus||T)&&this.showPrimarySelection(),this.showMultipleSelections(p))},wo.prototype.getSelection=function(){return this.cm.display.wrapper.ownerDocument.getSelection()},wo.prototype.showPrimarySelection=function(){var p=this.getSelection(),T=this.cm,I=T.doc.sel.primary(),D=I.from(),N=I.to();if(T.display.viewTo==T.display.viewFrom||D.line>=T.display.viewTo||N.line<T.display.viewFrom)p.removeAllRanges();else{var Y=Fu(T,p.anchorNode,p.anchorOffset),ut=Fu(T,p.focusNode,p.focusOffset);if(!Y||Y.bad||!ut||ut.bad||0!=Sn(Oi(Y,ut),D)||0!=Sn(He(Y,ut),N)){var Tt=T.display.view,Vt=D.line>=T.display.viewFrom&&Zu(T,D)||{node:Tt[0].measure.map[2],offset:0},Kt=N.line<T.display.viewTo&&Zu(T,N);if(!Kt){var Me=Tt[Tt.length-1].measure,Xe=Me.maps?Me.maps[Me.maps.length-1]:Me.map;Kt={node:Xe[Xe.length-1],offset:Xe[Xe.length-2]-Xe[Xe.length-3]}}if(!Vt||!Kt)return void p.removeAllRanges();var ci,fi=p.rangeCount&&p.getRangeAt(0);try{ci=ht(Vt.node,Vt.offset,Kt.offset,Kt.node)}catch(Pi){}ci&&(!C&&T.state.focused?(p.collapse(Vt.node,Vt.offset),ci.collapsed||(p.removeAllRanges(),p.addRange(ci))):(p.removeAllRanges(),p.addRange(ci)),fi&&null==p.anchorNode?p.addRange(fi):C&&this.startGracePeriod()),this.rememberSelection()}}},wo.prototype.startGracePeriod=function(){var p=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout(function(){p.gracePeriod=!1,p.selectionChanged()&&p.cm.operation(function(){return p.cm.curOp.selectionChanged=!0})},20)},wo.prototype.showMultipleSelections=function(p){Ut(this.cm.display.cursorDiv,p.cursors),Ut(this.cm.display.selectionDiv,p.selection)},wo.prototype.rememberSelection=function(){var p=this.getSelection();this.lastAnchorNode=p.anchorNode,this.lastAnchorOffset=p.anchorOffset,this.lastFocusNode=p.focusNode,this.lastFocusOffset=p.focusOffset},wo.prototype.selectionInEditor=function(){var p=this.getSelection();if(!p.rangeCount)return!1;var T=p.getRangeAt(0).commonAncestorContainer;return nt(this.div,T)},wo.prototype.focus=function(){"nocursor"!=this.cm.options.readOnly&&((!this.selectionInEditor()||he()!=this.div)&&this.showSelection(this.prepareSelection(),!0),this.div.focus())},wo.prototype.blur=function(){this.div.blur()},wo.prototype.getField=function(){return this.div},wo.prototype.supportsTouch=function(){return!0},wo.prototype.receivedFocus=function(){var p=this,T=this;this.selectionInEditor()?setTimeout(function(){return p.pollSelection()},20):hs(this.cm,function(){return T.cm.curOp.selectionChanged=!0}),this.polling.set(this.cm.options.pollInterval,function I(){T.cm.state.focused&&(T.pollSelection(),T.polling.set(T.cm.options.pollInterval,I))})},wo.prototype.selectionChanged=function(){var p=this.getSelection();return p.anchorNode!=this.lastAnchorNode||p.anchorOffset!=this.lastAnchorOffset||p.focusNode!=this.lastFocusNode||p.focusOffset!=this.lastFocusOffset},wo.prototype.pollSelection=function(){if(null==this.readDOMTimeout&&!this.gracePeriod&&this.selectionChanged()){var p=this.getSelection(),T=this.cm;if(St&&y&&this.cm.display.gutterSpecs.length&&function(p){for(var T=p;T;T=T.parentNode)if(/CodeMirror-gutter-wrapper/.test(T.className))return!0;return!1}(p.anchorNode))return this.cm.triggerOnKeyDown({type:"keydown",keyCode:8,preventDefault:Math.abs}),this.blur(),void this.focus();if(!this.composing){this.rememberSelection();var I=Fu(T,p.anchorNode,p.anchorOffset),D=Fu(T,p.focusNode,p.focusOffset);I&&D&&hs(T,function(){ra(T.doc,nc(I,D),Le),(I.bad||D.bad)&&(T.curOp.selectionChanged=!0)})}}},wo.prototype.pollContent=function(){null!=this.readDOMTimeout&&(clearTimeout(this.readDOMTimeout),this.readDOMTimeout=null);var Y,ut,Tt,p=this.cm,T=p.display,I=p.doc.sel.primary(),D=I.from(),N=I.to();if(0==D.ch&&D.line>p.firstLine()&&(D=Vi(D.line-1,Ai(p.doc,D.line-1).length)),N.ch==Ai(p.doc,N.line).text.length&&N.line<p.lastLine()&&(N=Vi(N.line+1,0)),D.line<T.viewFrom||N.line>T.viewTo-1)return!1;D.line==T.viewFrom||0==(Y=vs(p,D.line))?(ut=pr(T.view[0].line),Tt=T.view[0].node):(ut=pr(T.view[Y].line),Tt=T.view[Y-1].node.nextSibling);var Kt,Me,Vt=vs(p,N.line);if(Vt==T.view.length-1?(Kt=T.viewTo-1,Me=T.lineDiv.lastChild):(Kt=pr(T.view[Vt+1].line)-1,Me=T.view[Vt+1].node.previousSibling),!Tt)return!1;for(var Xe=p.doc.splitLines(function(p,T,I,D,N){var Y="",ut=!1,Tt=p.doc.lineSeparator(),Vt=!1;function Me(){ut&&(Y+=Tt,Vt&&(Y+=Tt),ut=Vt=!1)}function Xe(ci){ci&&(Me(),Y+=ci)}function fi(ci){if(1==ci.nodeType){var Pi=ci.getAttribute("cm-text");if(Pi)return void Xe(Pi);var an,Ki=ci.getAttribute("cm-marker");if(Ki){var mn=p.findMarks(Vi(D,0),Vi(N+1,0),function(ci){return function(Pi){return Pi.id==ci}}(+Ki));return void(mn.length&&(an=mn[0].find(0))&&Xe(Vn(p.doc,an.from,an.to).join(Tt)))}if("false"==ci.getAttribute("contenteditable"))return;var Cn=/^(pre|div|p|li|table|br)$/i.test(ci.nodeName);if(!/^br$/i.test(ci.nodeName)&&0==ci.textContent.length)return;Cn&&Me();for(var dn=0;dn<ci.childNodes.length;dn++)fi(ci.childNodes[dn]);/^(pre|p)$/i.test(ci.nodeName)&&(Vt=!0),Cn&&(ut=!0)}else 3==ci.nodeType&&Xe(ci.nodeValue.replace(/\u200b/g,"").replace(/\u00a0/g," "))}for(;fi(T),T!=I;)T=T.nextSibling,Vt=!1;return Y}(p,Tt,Me,ut,Kt)),fi=Vn(p.doc,Vi(ut,0),Vi(Kt,Ai(p.doc,Kt).text.length));Xe.length>1&&fi.length>1;)if(At(Xe)==At(fi))Xe.pop(),fi.pop(),Kt--;else{if(Xe[0]!=fi[0])break;Xe.shift(),fi.shift(),ut++}for(var ci=0,Pi=0,Ki=Xe[0],an=fi[0],mn=Math.min(Ki.length,an.length);ci<mn&&Ki.charCodeAt(ci)==an.charCodeAt(ci);)++ci;for(var Cn=At(Xe),dn=At(fi),In=Math.min(Cn.length-(1==Xe.length?ci:0),dn.length-(1==fi.length?ci:0));Pi<In&&Cn.charCodeAt(Cn.length-Pi-1)==dn.charCodeAt(dn.length-Pi-1);)++Pi;if(1==Xe.length&&1==fi.length&&ut==D.line)for(;ci&&ci>D.ch&&Cn.charCodeAt(Cn.length-Pi-1)==dn.charCodeAt(dn.length-Pi-1);)ci--,Pi++;Xe[Xe.length-1]=Cn.slice(0,Cn.length-Pi).replace(/^\u200b+/,""),Xe[0]=Xe[0].slice(ci).replace(/\u200b+$/,"");var Xn=Vi(ut,ci),Yn=Vi(Kt,fi.length?At(fi).length-Pi:0);return Xe.length>1||Xe[0]||Sn(Xn,Yn)?(fl(p.doc,Xe,Xn,Yn,"+input"),!0):void 0},wo.prototype.ensurePolled=function(){this.forceCompositionEnd()},wo.prototype.reset=function(){this.forceCompositionEnd()},wo.prototype.forceCompositionEnd=function(){!this.composing||(clearTimeout(this.readDOMTimeout),this.composing=null,this.updateFromDOM(),this.div.blur(),this.div.focus())},wo.prototype.readFromDOMSoon=function(){var p=this;null==this.readDOMTimeout&&(this.readDOMTimeout=setTimeout(function(){if(p.readDOMTimeout=null,p.composing){if(!p.composing.done)return;p.composing=null}p.updateFromDOM()},80))},wo.prototype.updateFromDOM=function(){var p=this;(this.cm.isReadOnly()||!this.pollContent())&&hs(this.cm,function(){return is(p.cm)})},wo.prototype.setUneditable=function(p){p.contentEditable="false"},wo.prototype.onKeyPress=function(p){0==p.charCode||this.composing||(p.preventDefault(),this.cm.isReadOnly()||Lo(this.cm,$c)(this.cm,String.fromCharCode(null==p.charCode?p.keyCode:p.charCode),0))},wo.prototype.readOnlyChanged=function(p){this.div.contentEditable=String("nocursor"!=p)},wo.prototype.onContextMenu=function(){},wo.prototype.resetPosition=function(){},wo.prototype.needsContentAttribute=!0;var vo=function(p){this.cm=p,this.prevInput="",this.pollingFast=!1,this.polling=new Ne,this.hasSelection=!1,this.composing=null};vo.prototype.init=function(p){var T=this,I=this,D=this.cm;this.createField(p);var N=this.textarea;function Y(ut){if(!Ci(D,ut)){if(D.somethingSelected())du({lineWise:!1,text:D.getSelections()});else{if(!D.options.lineWiseCopyCut)return;var Tt=Dl(D);du({lineWise:!0,text:Tt.text}),"cut"==ut.type?D.setSelections(Tt.ranges,null,Le):(I.prevInput="",N.value=Tt.text.join("\n"),de(N))}"cut"==ut.type&&(D.state.cutIncoming=+new Date)}}p.wrapper.insertBefore(this.wrapper,p.wrapper.firstChild),rt&&(N.style.width="0px"),mi(N,"input",function(){n&&r>=9&&T.hasSelection&&(T.hasSelection=null),I.poll()}),mi(N,"paste",function(ut){Ci(D,ut)||Pu(ut,D)||(D.state.pasteIncoming=+new Date,I.fastPoll())}),mi(N,"cut",Y),mi(N,"copy",Y),mi(p.scroller,"paste",function(ut){if(!be(p,ut)&&!Ci(D,ut)){if(!N.dispatchEvent)return D.state.pasteIncoming=+new Date,void I.focus();var Tt=new Event("paste");Tt.clipboardData=ut.clipboardData,N.dispatchEvent(Tt)}}),mi(p.lineSpace,"selectstart",function(ut){be(p,ut)||Ui(ut)}),mi(N,"compositionstart",function(){var ut=D.getCursor("from");I.composing&&I.composing.range.clear(),I.composing={start:ut,range:D.markText(ut,D.getCursor("to"),{className:"CodeMirror-composing"})}}),mi(N,"compositionend",function(){I.composing&&(I.poll(),I.composing.range.clear(),I.composing=null)})},vo.prototype.createField=function(p){this.wrapper=Oc(),this.textarea=this.wrapper.firstChild},vo.prototype.screenReaderLabelChanged=function(p){p?this.textarea.setAttribute("aria-label",p):this.textarea.removeAttribute("aria-label")},vo.prototype.prepareSelection=function(){var p=this.cm,T=p.display,I=p.doc,D=Gl(p);if(p.options.moveInputWithCursor){var N=On(p,I.sel.primary().head,"div"),Y=T.wrapper.getBoundingClientRect(),ut=T.lineDiv.getBoundingClientRect();D.teTop=Math.max(0,Math.min(T.wrapper.clientHeight-10,N.top+ut.top-Y.top)),D.teLeft=Math.max(0,Math.min(T.wrapper.clientWidth-10,N.left+ut.left-Y.left))}return D},vo.prototype.showSelection=function(p){var I=this.cm.display;Ut(I.cursorDiv,p.cursors),Ut(I.selectionDiv,p.selection),null!=p.teTop&&(this.wrapper.style.top=p.teTop+"px",this.wrapper.style.left=p.teLeft+"px")},vo.prototype.reset=function(p){if(!this.contextMenuPending&&!this.composing){var T=this.cm;if(T.somethingSelected()){this.prevInput="";var I=T.getSelection();this.textarea.value=I,T.state.focused&&de(this.textarea),n&&r>=9&&(this.hasSelection=I)}else p||(this.prevInput=this.textarea.value="",n&&r>=9&&(this.hasSelection=null))}},vo.prototype.getField=function(){return this.textarea},vo.prototype.supportsTouch=function(){return!1},vo.prototype.focus=function(){if("nocursor"!=this.cm.options.readOnly&&(!Ht||he()!=this.textarea))try{this.textarea.focus()}catch(p){}},vo.prototype.blur=function(){this.textarea.blur()},vo.prototype.resetPosition=function(){this.wrapper.style.top=this.wrapper.style.left=0},vo.prototype.receivedFocus=function(){this.slowPoll()},vo.prototype.slowPoll=function(){var p=this;this.pollingFast||this.polling.set(this.cm.options.pollInterval,function(){p.poll(),p.cm.state.focused&&p.slowPoll()})},vo.prototype.fastPoll=function(){var p=!1,T=this;T.pollingFast=!0,T.polling.set(20,function I(){T.poll()||p?(T.pollingFast=!1,T.slowPoll()):(p=!0,T.polling.set(60,I))})},vo.prototype.poll=function(){var p=this,T=this.cm,I=this.textarea,D=this.prevInput;if(this.contextMenuPending||!T.state.focused||li(I)&&!D&&!this.composing||T.isReadOnly()||T.options.disableInput||T.state.keySeq)return!1;var N=I.value;if(N==D&&!T.somethingSelected())return!1;if(n&&r>=9&&this.hasSelection===N||vt&&/[\uf700-\uf7ff]/.test(N))return T.display.input.reset(),!1;if(T.doc.sel==T.display.selForContextMenu){var Y=N.charCodeAt(0);if(8203==Y&&!D&&(D="\u200b"),8666==Y)return this.reset(),this.cm.execCommand("undo")}for(var ut=0,Tt=Math.min(D.length,N.length);ut<Tt&&D.charCodeAt(ut)==N.charCodeAt(ut);)++ut;return hs(T,function(){$c(T,N.slice(ut),D.length-ut,null,p.composing?"*compose":null),N.length>1e3||N.indexOf("\n")>-1?I.value=p.prevInput="":p.prevInput=N,p.composing&&(p.composing.range.clear(),p.composing.range=T.markText(p.composing.start,T.getCursor("to"),{className:"CodeMirror-composing"}))}),!0},vo.prototype.ensurePolled=function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},vo.prototype.onKeyPress=function(){n&&r>=9&&(this.hasSelection=null),this.fastPoll()},vo.prototype.onContextMenu=function(p){var T=this,I=T.cm,D=I.display,N=T.textarea;T.contextMenuPending&&T.contextMenuPending();var Y=ul(I,p),ut=D.scroller.scrollTop;if(Y&&!x){I.options.resetSelectionOnContextMenu&&-1==I.doc.sel.contains(Y)&&Lo(I,ra)(I.doc,nc(Y),Le);var Xe,Vt=N.style.cssText,Kt=T.wrapper.style.cssText,Me=T.wrapper.offsetParent.getBoundingClientRect();if(T.wrapper.style.cssText="position: static",N.style.cssText="position: absolute; width: 30px; height: 30px;\n      top: "+(p.clientY-Me.top-5)+"px; left: "+(p.clientX-Me.left-5)+"px;\n      z-index: 1000; background: "+(n?"rgba(255, 255, 255, .05)":"transparent")+";\n      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);",s&&(Xe=window.scrollY),D.input.focus(),s&&window.scrollTo(null,Xe),D.input.reset(),I.somethingSelected()||(N.value=T.prevInput=" "),T.contextMenuPending=ci,D.selForContextMenu=I.doc.sel,clearTimeout(D.detectingSelectAll),n&&r>=9&&fi(),yt){kt(p);var Pi=function(){Ce(window,"mouseup",Pi),setTimeout(ci,20)};mi(window,"mouseup",Pi)}else setTimeout(ci,50)}function fi(){if(null!=N.selectionStart){var Ki=I.somethingSelected(),an="\u200b"+(Ki?N.value:"");N.value="\u21da",N.value=an,T.prevInput=Ki?"":"\u200b",N.selectionStart=1,N.selectionEnd=an.length,D.selForContextMenu=I.doc.sel}}function ci(){if(T.contextMenuPending==ci&&(T.contextMenuPending=!1,T.wrapper.style.cssText=Kt,N.style.cssText=Vt,n&&r<9&&D.scrollbars.setScrollTop(D.scroller.scrollTop=ut),null!=N.selectionStart)){(!n||n&&r<9)&&fi();var Ki=0,an=function(){D.selForContextMenu==I.doc.sel&&0==N.selectionStart&&N.selectionEnd>0&&"\u200b"==T.prevInput?Lo(I,zc)(I):Ki++<10?D.detectingSelectAll=setTimeout(an,500):(D.selForContextMenu=null,D.input.reset())};D.detectingSelectAll=setTimeout(an,200)}}},vo.prototype.readOnlyChanged=function(p){p||this.reset(),this.textarea.disabled="nocursor"==p,this.textarea.readOnly=!!p},vo.prototype.setUneditable=function(){},vo.prototype.needsContentAttribute=!1,function(p){var T=p.optionHandlers;function I(D,N,Y,ut){p.defaults[D]=N,Y&&(T[D]=ut?function(Tt,Vt,Kt){Kt!=Rl&&Y(Tt,Vt,Kt)}:Y)}p.defineOption=I,p.Init=Rl,I("value","",function(D,N){return D.setValue(N)},!0),I("mode",null,function(D,N){D.doc.modeOption=N,ka(D)},!0),I("indentUnit",2,ka,!0),I("indentWithTabs",!1),I("smartIndent",!0),I("tabSize",4,function(D){Pl(D),Ms(D),is(D)},!0),I("lineSeparator",null,function(D,N){if(D.doc.lineSep=N,N){var Y=[],ut=D.doc.first;D.doc.iter(function(Vt){for(var Kt=0;;){var Me=Vt.text.indexOf(N,Kt);if(-1==Me)break;Kt=Me+N.length,Y.push(Vi(ut,Me))}ut++});for(var Tt=Y.length-1;Tt>=0;Tt--)fl(D.doc,N,Y[Tt],Vi(Y[Tt].line,Y[Tt].ch+N.length))}}),I("specialChars",/[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b\u200e\u200f\u2028\u2029\ufeff\ufff9-\ufffc]/g,function(D,N,Y){D.state.specialChars=new RegExp(N.source+(N.test("\t")?"":"|\t"),"g"),Y!=Rl&&D.refresh()}),I("specialCharPlaceholder",Ot,function(D){return D.refresh()},!0),I("electricChars",!0),I("inputStyle",Ht?"contenteditable":"textarea",function(){throw new Error("inputStyle can not (yet) be changed in a running editor")},!0),I("spellcheck",!1,function(D,N){return D.getInputField().spellcheck=N},!0),I("autocorrect",!1,function(D,N){return D.getInputField().autocorrect=N},!0),I("autocapitalize",!1,function(D,N){return D.getInputField().autocapitalize=N},!0),I("rtlMoveVisually",!Wt),I("wholeLineUpdateBefore",!0),I("theme","default",function(D){sa(D),Ea(D)},!0),I("keyMap","default",function(D,N,Y){var ut=oa(N),Tt=Y!=Rl&&oa(Y);Tt&&Tt.detach&&Tt.detach(D,ut),ut.attach&&ut.attach(D,Tt||null)}),I("extraKeys",null),I("configureMouse",null),I("lineWrapping",!1,ph,!0),I("gutters",[],function(D,N){D.display.gutterSpecs=ic(N,D.options.lineNumbers),Ea(D)},!0),I("fixedGutter",!0,function(D,N){D.display.gutters.style.left=N?As(D.display)+"px":"0",D.refresh()},!0),I("coverGutterNextToScrollbar",!1,function(D){return $r(D)},!0),I("scrollbarStyle","native",function(D){Ys(D),$r(D),D.display.scrollbars.setScrollTop(D.doc.scrollTop),D.display.scrollbars.setScrollLeft(D.doc.scrollLeft)},!0),I("lineNumbers",!1,function(D,N){D.display.gutterSpecs=ic(D.options.gutters,N),Ea(D)},!0),I("firstLineNumber",1,Ea,!0),I("lineNumberFormatter",function(D){return D},Ea,!0),I("showCursorWhenSelecting",!1,Ol,!0),I("resetSelectionOnContextMenu",!0),I("lineWiseCopyCut",!0),I("pasteLinesPerSelection",!0),I("selectionsMayTouch",!1),I("readOnly",!1,function(D,N){"nocursor"==N&&(Aa(D),D.display.input.blur()),D.display.input.readOnlyChanged(N)}),I("screenReaderLabel",null,function(D,N){D.display.input.screenReaderLabelChanged(N=""===N?null:N)}),I("disableInput",!1,function(D,N){N||D.display.input.reset()},!0),I("dragDrop",!0,hu),I("allowDropFileTypes",null),I("cursorBlinkRate",530),I("cursorScrollMargin",0),I("cursorHeight",1,Ol,!0),I("singleCursorHeightPerLine",!0,Ol,!0),I("workTime",100),I("workDelay",100),I("flattenSpans",!0,Pl,!0),I("addModeClass",!1,Pl,!0),I("pollInterval",100),I("undoDepth",200,function(D,N){return D.doc.history.undoDepth=N}),I("historyEventDelay",1250),I("viewportMargin",10,function(D){return D.refresh()},!0),I("maxHighlightLength",1e4,Pl,!0),I("moveInputWithCursor",!0,function(D,N){N||D.display.input.resetPosition()}),I("tabindex",null,function(D,N){return D.display.input.getField().tabIndex=N||""}),I("autofocus",null),I("direction","ltr",function(D,N){return D.doc.setDirection(N)},!0),I("phrases",null)}(Gr),function(p){var T=p.optionHandlers,I=p.helpers={};p.prototype={constructor:p,focus:function(){window.focus(),this.display.input.focus()},setOption:function(D,N){var Y=this.options,ut=Y[D];Y[D]==N&&"mode"!=D||(Y[D]=N,T.hasOwnProperty(D)&&Lo(this,T[D])(this,N,ut),Oe(this,"optionChange",this,D))},getOption:function(D){return this.options[D]},getDoc:function(){return this.doc},addKeyMap:function(D,N){this.state.keyMaps[N?"push":"unshift"](oa(D))},removeKeyMap:function(D){for(var N=this.state.keyMaps,Y=0;Y<N.length;++Y)if(N[Y]==D||N[Y].name==D)return N.splice(Y,1),!0},addOverlay:No(function(D,N){var Y=D.token?D:p.getMode(this.options,D);if(Y.startState)throw new Error("Overlays may not be stateful.");(function(p,T,I){for(var D=0,N=I(T);D<p.length&&I(p[D])<=N;)D++;p.splice(D,0,T)})(this.state.overlays,{mode:Y,modeSpec:D,opaque:N&&N.opaque,priority:N&&N.priority||0},function(ut){return ut.priority}),this.state.modeGen++,is(this)}),removeOverlay:No(function(D){for(var N=this.state.overlays,Y=0;Y<N.length;++Y){var ut=N[Y].modeSpec;if(ut==D||"string"==typeof D&&ut.name==D)return N.splice(Y,1),this.state.modeGen++,void is(this)}}),indentLine:No(function(D,N,Y){"string"!=typeof N&&"number"!=typeof N&&(N=null==N?this.options.smartIndent?"smart":"prev":N?"add":"subtract"),Qr(this.doc,D)&&Ac(this,D,N,Y)}),indentSelection:No(function(D){for(var N=this.doc.sel.ranges,Y=-1,ut=0;ut<N.length;ut++){var Tt=N[ut];if(Tt.empty())Tt.head.line>Y&&(Ac(this,Tt.head.line,D,!0),Y=Tt.head.line,ut==this.doc.sel.primIndex&&it(this));else{var Vt=Tt.from(),Kt=Tt.to(),Me=Math.max(Y,Vt.line);Y=Math.min(this.lastLine(),Kt.line-(Kt.ch?0:1))+1;for(var Xe=Me;Xe<Y;++Xe)Ac(this,Xe,D);var fi=this.doc.sel.ranges;0==Vt.ch&&N.length==fi.length&&fi[ut].from().ch>0&&hc(this.doc,ut,new Vr(Vt,fi[ut].to()),Le)}}}),getTokenAt:function(D,N){return Jr(this,D,N)},getLineTokens:function(D,N){return Jr(this,Vi(D),N,!0)},getTokenTypeAt:function(D){D=Yi(this.doc,D);var Vt,N=jo(this,Ai(this.doc,D.line)),Y=0,ut=(N.length-1)/2,Tt=D.ch;if(0==Tt)Vt=N[2];else for(;;){var Kt=Y+ut>>1;if((Kt?N[2*Kt-1]:0)>=Tt)ut=Kt;else{if(!(N[2*Kt+1]<Tt)){Vt=N[2*Kt+2];break}Y=Kt+1}}var Me=Vt?Vt.indexOf("overlay "):-1;return Me<0?Vt:0==Me?null:Vt.slice(0,Me-1)},getModeAt:function(D){var N=this.doc.mode;return N.innerMode?p.innerMode(N,this.getTokenAt(D).state).mode:N},getHelper:function(D,N){return this.getHelpers(D,N)[0]},getHelpers:function(D,N){var Y=[];if(!I.hasOwnProperty(N))return Y;var ut=I[N],Tt=this.getModeAt(D);if("string"==typeof Tt[N])ut[Tt[N]]&&Y.push(ut[Tt[N]]);else if(Tt[N])for(var Vt=0;Vt<Tt[N].length;Vt++){var Kt=ut[Tt[N][Vt]];Kt&&Y.push(Kt)}else Tt.helperType&&ut[Tt.helperType]?Y.push(ut[Tt.helperType]):ut[Tt.name]&&Y.push(ut[Tt.name]);for(var Me=0;Me<ut._global.length;Me++){var Xe=ut._global[Me];Xe.pred(Tt,this)&&-1==Qe(Y,Xe.val)&&Y.push(Xe.val)}return Y},getStateAfter:function(D,N){var Y=this.doc;return ro(this,(D=Ji(Y,null==D?Y.first+Y.size-1:D))+1,N).state},cursorCoords:function(D,N){var ut=this.doc.sel.primary();return On(this,null==D?ut.head:"object"==typeof D?Yi(this.doc,D):D?ut.from():ut.to(),N||"page")},charCoords:function(D,N){return Dn(this,Yi(this.doc,D),N||"page")},coordsChar:function(D,N){return Er(this,(D=Ja(this,D,N||"page")).left,D.top)},lineAtHeight:function(D,N){return D=Ja(this,{top:D,left:0},N||"page").top,Dr(this.doc,D+this.display.viewOffset)},heightAtLine:function(D,N,Y){var Tt,ut=!1;if("number"==typeof D){var Vt=this.doc.first+this.doc.size-1;D<this.doc.first?D=this.doc.first:D>Vt&&(D=Vt,ut=!0),Tt=Ai(this.doc,D)}else Tt=D;return co(this,Tt,{top:0,left:0},N||"page",Y||ut).top+(ut?this.doc.height-jr(Tt):0)},defaultTextHeight:function(){return ca(this.display)},defaultCharWidth:function(){return _s(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(D,N,Y,ut,Tt){var Vt=this.display,Kt=(D=On(this,Yi(this.doc,D))).bottom,Me=D.left;if(N.style.position="absolute",N.setAttribute("cm-ignore-events","true"),this.display.input.setUneditable(N),Vt.sizer.appendChild(N),"over"==ut)Kt=D.top;else if("above"==ut||"near"==ut){var Xe=Math.max(Vt.wrapper.clientHeight,this.doc.height),fi=Math.max(Vt.sizer.clientWidth,Vt.lineSpace.clientWidth);("above"==ut||D.bottom+N.offsetHeight>Xe)&&D.top>N.offsetHeight?Kt=D.top-N.offsetHeight:D.bottom+N.offsetHeight<=Xe&&(Kt=D.bottom),Me+N.offsetWidth>fi&&(Me=fi-N.offsetWidth)}N.style.top=Kt+"px",N.style.left=N.style.right="","right"==Tt?(Me=Vt.sizer.clientWidth-N.offsetWidth,N.style.right="0px"):("left"==Tt?Me=0:"middle"==Tt&&(Me=(Vt.sizer.clientWidth-N.offsetWidth)/2),N.style.left=Me+"px"),Y&&function(p,T){var I=Hc(p,T);null!=I.scrollTop&&Ve(p,I.scrollTop),null!=I.scrollLeft&&Ni(p,I.scrollLeft)}(this,{left:Me,top:Kt,right:Me+N.offsetWidth,bottom:Kt+N.offsetHeight})},triggerOnKeyDown:No(Yc),triggerOnKeyPress:No(Ch),triggerOnKeyUp:Xu,triggerOnMouseDown:No(Ku),execCommand:function(D){if(zu.hasOwnProperty(D))return zu[D].call(null,this)},triggerElectric:No(function(D){gh(this,D)}),findPosH:function(D,N,Y,ut){var Tt=1;N<0&&(Tt=-1,N=-N);for(var Vt=Yi(this.doc,D),Kt=0;Kt<N&&!(Vt=Jl(this.doc,Vt,Tt,Y,ut)).hitSide;++Kt);return Vt},moveH:No(function(D,N){var Y=this;this.extendSelectionsBy(function(ut){return Y.display.shift||Y.doc.extend||ut.empty()?Jl(Y.doc,ut.head,D,N,Y.options.rtlMoveVisually):D<0?ut.from():ut.to()},Bt)}),deleteH:No(function(D,N){var ut=this.doc;this.doc.sel.somethingSelected()?ut.replaceSelection("",null,"+delete"):ys(this,function(Tt){var Vt=Jl(ut,Tt.head,D,N,!1);return D<0?{from:Vt,to:Tt.head}:{from:Tt.head,to:Vt}})}),findPosV:function(D,N,Y,ut){var Tt=1,Vt=ut;N<0&&(Tt=-1,N=-N);for(var Kt=Yi(this.doc,D),Me=0;Me<N;++Me){var Xe=On(this,Kt,"div");if(null==Vt?Vt=Xe.left:Xe.left=Vt,(Kt=fu(this,Xe,Tt,Y)).hitSide)break}return Kt},moveV:No(function(D,N){var Y=this,ut=this.doc,Tt=[],Vt=!this.display.shift&&!ut.extend&&ut.sel.somethingSelected();if(ut.extendSelectionsBy(function(Me){if(Vt)return D<0?Me.from():Me.to();var Xe=On(Y,Me.head,"div");null!=Me.goalColumn&&(Xe.left=Me.goalColumn),Tt.push(Xe.left);var fi=fu(Y,Xe,D,N);return"page"==N&&Me==ut.sel.primary()&&pt(Y,Dn(Y,fi,"div").top-Xe.top),fi},Bt),Tt.length)for(var Kt=0;Kt<ut.sel.ranges.length;Kt++)ut.sel.ranges[Kt].goalColumn=Tt[Kt]}),findWordAt:function(D){var Y=Ai(this.doc,D.line).text,ut=D.ch,Tt=D.ch;if(Y){var Vt=this.getHelper(D,"wordChars");"before"!=D.sticky&&Tt!=Y.length||!ut?++Tt:--ut;for(var Kt=Y.charAt(ut),Me=ke(Kt,Vt)?function(Xe){return ke(Xe,Vt)}:/\s/.test(Kt)?function(Xe){return/\s/.test(Xe)}:function(Xe){return!/\s/.test(Xe)&&!ke(Xe)};ut>0&&Me(Y.charAt(ut-1));)--ut;for(;Tt<Y.length&&Me(Y.charAt(Tt));)++Tt}return new Vr(Vi(D.line,ut),Vi(D.line,Tt))},toggleOverwrite:function(D){null!=D&&D==this.state.overwrite||((this.state.overwrite=!this.state.overwrite)?Mt(this.display.cursorDiv,"CodeMirror-overwrite"):mt(this.display.cursorDiv,"CodeMirror-overwrite"),Oe(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==he()},isReadOnly:function(){return!(!this.options.readOnly&&!this.doc.cantEdit)},scrollTo:No(function(D,N){q(this,D,N)}),getScrollInfo:function(){var D=this.display.scroller;return{left:D.scrollLeft,top:D.scrollTop,height:D.scrollHeight-Bi(this)-this.display.barHeight,width:D.scrollWidth-Bi(this)-this.display.barWidth,clientHeight:En(this),clientWidth:un(this)}},scrollIntoView:No(function(D,N){null==D?(D={from:this.doc.sel.primary().head,to:null},null==N&&(N=this.options.cursorScrollMargin)):"number"==typeof D?D={from:Vi(D,0),to:null}:null==D.from&&(D={from:D,to:null}),D.to||(D.to=D.from),D.margin=N||0,null!=D.from.line?function(p,T){zt(p),p.curOp.scrollToPos=T}(this,D):ge(this,D.from,D.to,D.margin)}),setSize:No(function(D,N){var Y=this,ut=function(Vt){return"number"==typeof Vt||/^\d+$/.test(String(Vt))?Vt+"px":Vt};null!=D&&(this.display.wrapper.style.width=ut(D)),null!=N&&(this.display.wrapper.style.height=ut(N)),this.options.lineWrapping&&rs(this);var Tt=this.display.viewFrom;this.doc.iter(Tt,this.display.viewTo,function(Vt){if(Vt.widgets)for(var Kt=0;Kt<Vt.widgets.length;Kt++)if(Vt.widgets[Kt].noHScroll){ea(Y,Tt,"widget");break}++Tt}),this.curOp.forceUpdate=!0,Oe(this,"refresh",this)}),operation:function(D){return hs(this,D)},startOperation:function(){return Uo(this)},endOperation:function(){return qa(this)},refresh:No(function(){var D=this.display.cachedTextHeight;is(this),this.curOp.forceUpdate=!0,Ms(this),q(this,this.doc.scrollLeft,this.doc.scrollTop),zl(this.display),(null==D||Math.abs(D-ca(this.display))>.5||this.options.lineWrapping)&&Al(this),Oe(this,"refresh",this)}),swapDoc:No(function(D){var N=this.doc;return N.cm=null,this.state.selectingText&&this.state.selectingText(),Ar(this,D),Ms(this),this.display.input.reset(),q(this,D.scrollLeft,D.scrollTop),this.curOp.forceScroll=!0,hr(this,"swapDoc",this,N),N}),phrase:function(D){var N=this.options.phrases;return N&&Object.prototype.hasOwnProperty.call(N,D)?N[D]:D},getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},_i(p),p.registerHelper=function(D,N,Y){I.hasOwnProperty(D)||(I[D]=p[D]={_global:[]}),I[D][N]=Y},p.registerGlobalHelper=function(D,N,Y,ut){p.registerHelper(D,N,ut),I[D]._global.push({pred:Y,val:ut})}}(Gr);var _h="iter insert remove copy getEditor constructor".split(" ");for(var Bu in ss.prototype)ss.prototype.hasOwnProperty(Bu)&&Qe(_h,Bu)<0&&(Gr.prototype[Bu]=function(p){return function(){return p.apply(this.doc,arguments)}}(ss.prototype[Bu]));return _i(ss),Gr.inputStyles={textarea:vo,contenteditable:wo},Gr.defineMode=function(p){!Gr.defaults.mode&&"null"!=p&&(Gr.defaults.mode=p),An.apply(this,arguments)},Gr.defineMIME=function(p,T){fn[p]=T},Gr.defineMode("null",function(){return{token:function(p){return p.skipToEnd()}}}),Gr.defineMIME("text/plain","null"),Gr.defineExtension=function(p,T){Gr.prototype[p]=T},Gr.defineDocExtension=function(p,T){ss.prototype[p]=T},Gr.fromTextArea=function(p,T){if((T=T?ue(T):{}).value=p.value,!T.tabindex&&p.tabIndex&&(T.tabindex=p.tabIndex),!T.placeholder&&p.placeholder&&(T.placeholder=p.placeholder),null==T.autofocus){var I=he();T.autofocus=I==p||null!=p.getAttribute("autofocus")&&I==document.body}function D(){p.value=Tt.getValue()}var N;if(p.form&&(mi(p.form,"submit",D),!T.leaveSubmitMethodAlone)){var Y=p.form;N=Y.submit;try{var ut=Y.submit=function(){D(),Y.submit=N,Y.submit(),Y.submit=ut}}catch(Vt){}}T.finishInit=function(Vt){Vt.save=D,Vt.getTextArea=function(){return p},Vt.toTextArea=function(){Vt.toTextArea=isNaN,D(),p.parentNode.removeChild(Vt.getWrapperElement()),p.style.display="",p.form&&(Ce(p.form,"submit",D),!T.leaveSubmitMethodAlone&&"function"==typeof p.form.submit&&(p.form.submit=N))}},p.style.display="none";var Tt=Gr(function(Vt){return p.parentNode.insertBefore(Vt,p.nextSibling)},T);return Tt},function(p){p.off=Ce,p.on=mi,p.wheelEventPixels=Ll,p.Doc=ss,p.splitLines=tr,p.countColumn=Be,p.findColumn=Te,p.isWordChar=ee,p.Pass=Ze,p.signal=Oe,p.Line=us,p.changeEnd=Nl,p.scrollbarModel=Tl,p.Pos=Vi,p.cmpPos=Sn,p.modes=ki,p.mimeModes=fn,p.resolveMode=Tr,p.getMode=eo,p.modeExtensions=no,p.extendMode=mo,p.copyState=kr,p.startState=Mo,p.innerMode=ur,p.commands=zu,p.keyMap=qn,p.keyName=po,p.isModifierKey=ho,p.lookupKey=Zr,p.normalizeKeyMap=Do,p.StringStream=sr,p.SharedTextMarker=nl,p.TextMarker=za,p.LineWidget=Sl,p.e_preventDefault=Ui,p.e_stopPropagation=$e,p.e_stop=kt,p.addClass=Mt,p.contains=nt,p.rmClass=mt,p.keyNames=xi}(Gr),Gr.version="5.65.0",Gr}()},64166:(U,$,m)=>{!function(C){"use strict";C.defineMode("javascript",function(_,e){var St,Ht,t=_.indentUnit,n=e.statementIndent,r=e.jsonld,s=e.json||r,u=!1!==e.trackScope,y=e.typescript,x=e.wordCharacters||/[\w$\xa1-\uffff]/,B=function(){function oe(nr){return{type:nr,style:"keyword"}}var He=oe("keyword a"),Oi=oe("keyword b"),Ji=oe("keyword c"),Yi=oe("keyword d"),Kn=oe("operator"),zn={type:"atom",style:"atom"};return{if:oe("if"),while:He,with:He,else:Oi,do:Oi,try:Oi,finally:Oi,return:Yi,break:Yi,continue:Yi,new:oe("new"),delete:Ji,void:Ji,throw:Ji,debugger:oe("debugger"),var:oe("var"),const:oe("var"),let:oe("var"),function:oe("function"),catch:oe("catch"),for:oe("for"),switch:oe("switch"),case:oe("case"),default:oe("default"),in:Kn,typeof:Kn,instanceof:Kn,true:zn,false:zn,null:zn,undefined:zn,NaN:zn,Infinity:zn,this:oe("this"),class:oe("class"),super:oe("atom"),yield:Ji,export:oe("export"),import:oe("import"),extends:Ji,await:Ji}}(),Q=/[+\-*&%=<>!?|~^@]/,at=/^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)"/;function vt(oe,He,Oi){return St=oe,Ht=Oi,He}function xt(oe,He){var Oi=oe.next();if('"'==Oi||"'"==Oi)return He.tokenize=function(oe){return function(He,Oi){var Yi,Ji=!1;if(r&&"@"==He.peek()&&He.match(at))return Oi.tokenize=xt,vt("jsonld-keyword","meta");for(;null!=(Yi=He.next())&&(Yi!=oe||Ji);)Ji=!Ji&&"\\"==Yi;return Ji||(Oi.tokenize=xt),vt("string","string")}}(Oi),He.tokenize(oe,He);if("."==Oi&&oe.match(/^\d[\d_]*(?:[eE][+\-]?[\d_]+)?/))return vt("number","number");if("."==Oi&&oe.match(".."))return vt("spread","meta");if(/[\[\]{}\(\),;\:\.]/.test(Oi))return vt(Oi);if("="==Oi&&oe.eat(">"))return vt("=>","operator");if("0"==Oi&&oe.match(/^(?:x[\dA-Fa-f_]+|o[0-7_]+|b[01_]+)n?/))return vt("number","number");if(/\d/.test(Oi))return oe.match(/^[\d_]*(?:n|(?:\.[\d_]*)?(?:[eE][+\-]?[\d_]+)?)?/),vt("number","number");if("/"==Oi)return oe.eat("*")?(He.tokenize=Jt,Jt(oe,He)):oe.eat("/")?(oe.skipToEnd(),vt("comment","comment")):Gn(oe,He,1)?(function(oe){for(var Oi,He=!1,Ji=!1;null!=(Oi=oe.next());){if(!He){if("/"==Oi&&!Ji)return;"["==Oi?Ji=!0:Ji&&"]"==Oi&&(Ji=!1)}He=!He&&"\\"==Oi}}(oe),oe.match(/^\b(([gimyus])(?![gimyus]*\2))+\b/),vt("regexp","string-2")):(oe.eat("="),vt("operator","operator",oe.current()));if("`"==Oi)return He.tokenize=Ct,Ct(oe,He);if("#"==Oi&&"!"==oe.peek())return oe.skipToEnd(),vt("meta","meta");if("#"==Oi&&oe.eatWhile(x))return vt("variable","property");if("<"==Oi&&oe.match("!--")||"-"==Oi&&oe.match("->")&&!/\S/.test(oe.string.slice(0,oe.start)))return oe.skipToEnd(),vt("comment","comment");if(Q.test(Oi))return(">"!=Oi||!He.lexical||">"!=He.lexical.type)&&(oe.eat("=")?("!"==Oi||"="==Oi)&&oe.eat("="):/[<>*+\-|&?]/.test(Oi)&&(oe.eat(Oi),">"==Oi&&oe.eat(Oi))),"?"==Oi&&oe.eat(".")?vt("."):vt("operator","operator",oe.current());if(x.test(Oi)){oe.eatWhile(x);var Ji=oe.current();if("."!=He.lastType){if(B.propertyIsEnumerable(Ji)){var Yi=B[Ji];return vt(Yi.type,Yi.style,Ji)}if("async"==Ji&&oe.match(/^(\s|\/\*([^*]|\*(?!\/))*?\*\/)*[\[\(\w]/,!1))return vt("async","keyword",Ji)}return vt("variable","variable",Ji)}}function Jt(oe,He){for(var Ji,Oi=!1;Ji=oe.next();){if("/"==Ji&&Oi){He.tokenize=xt;break}Oi="*"==Ji}return vt("comment","comment")}function Ct(oe,He){for(var Ji,Oi=!1;null!=(Ji=oe.next());){if(!Oi&&("`"==Ji||"$"==Ji&&oe.eat("{"))){He.tokenize=xt;break}Oi=!Oi&&"\\"==Ji}return vt("quasi","string-2",oe.current())}function ot(oe,He){He.fatArrowAt&&(He.fatArrowAt=null);var Oi=oe.string.indexOf("=>",oe.start);if(!(Oi<0)){if(y){var Ji=/:\s*(?:\w+(?:<[^>]*>|\[\])?|\{[^}]*\})\s*$/.exec(oe.string.slice(oe.start,Oi));Ji&&(Oi=Ji.index)}for(var Yi=0,Kn=!1,zn=Oi-1;zn>=0;--zn){var nr=oe.string.charAt(zn),Fn="([{}])".indexOf(nr);if(Fn>=0&&Fn<3){if(!Yi){++zn;break}if(0==--Yi){"("==nr&&(Kn=!0);break}}else if(Fn>=3&&Fn<6)++Yi;else if(x.test(nr))Kn=!0;else if(/["'\/`]/.test(nr))for(;;--zn){if(0==zn)return;if(oe.string.charAt(zn-1)==nr&&"\\"!=oe.string.charAt(zn-2)){zn--;break}}else if(Kn&&!Yi){++zn;break}}Kn&&!Yi&&(He.fatArrowAt=zn)}}var mt={atom:!0,number:!0,variable:!0,string:!0,regexp:!0,this:!0,import:!0,"jsonld-keyword":!0};function lt(oe,He,Oi,Ji,Yi,Kn){this.indented=oe,this.column=He,this.type=Oi,this.prev=Yi,this.info=Kn,null!=Ji&&(this.align=Ji)}function Ut(oe,He){if(!u)return!1;for(var Oi=oe.localVars;Oi;Oi=Oi.next)if(Oi.name==He)return!0;for(var Ji=oe.context;Ji;Ji=Ji.prev)for(Oi=Ji.vars;Oi;Oi=Oi.next)if(Oi.name==He)return!0}function Rt(oe,He,Oi,Ji,Yi){var Kn=oe.cc;for(Et.state=oe,Et.stream=Yi,Et.marked=null,Et.cc=Kn,Et.style=He,oe.lexical.hasOwnProperty("align")||(oe.lexical.align=!0);;)if((Kn.length?Kn.pop():s?$t:Bt)(Oi,Ji)){for(;Kn.length&&Kn[Kn.length-1].lex;)Kn.pop()();return Et.marked?Et.marked:"variable"==Oi&&Ut(oe,Ji)?"variable-2":He}}var Et={state:null,column:null,marked:null,cc:null};function ht(){for(var oe=arguments.length-1;oe>=0;oe--)Et.cc.push(arguments[oe])}function nt(){return ht.apply(null,arguments),!0}function he(oe,He){for(var Oi=He;Oi;Oi=Oi.next)if(Oi.name==oe)return!0;return!1}function Mt(oe){var He=Et.state;if(Et.marked="def",u){if(He.context)if("var"==He.lexical.info&&He.context&&He.context.block){var Oi=Nt(oe,He.context);if(null!=Oi)return void(He.context=Oi)}else if(!he(oe,He.localVars))return void(He.localVars=new ue(oe,He.localVars));e.globalVars&&!he(oe,He.globalVars)&&(He.globalVars=new ue(oe,He.globalVars))}}function Nt(oe,He){if(He){if(He.block){var Oi=Nt(oe,He.prev);return Oi?Oi==He.prev?He:new ve(Oi,He.vars,!0):null}return he(oe,He.vars)?He:new ve(He.prev,new ue(oe,He.vars),!1)}return null}function de(oe){return"public"==oe||"private"==oe||"protected"==oe||"abstract"==oe||"readonly"==oe}function ve(oe,He,Oi){this.prev=oe,this.vars=He,this.block=Oi}function ue(oe,He){this.name=oe,this.next=He}var Be=new ue("this",new ue("arguments",null));function Ne(){Et.state.context=new ve(Et.state.context,Et.state.localVars,!1),Et.state.localVars=Be}function Qe(){Et.state.context=new ve(Et.state.context,Et.state.localVars,!0),Et.state.localVars=null}function Di(){Et.state.localVars=Et.state.context.vars,Et.state.context=Et.state.context.prev}function Ze(oe,He){var Oi=function(){var Ji=Et.state,Yi=Ji.indented;if("stat"==Ji.lexical.type)Yi=Ji.lexical.indented;else for(var Kn=Ji.lexical;Kn&&")"==Kn.type&&Kn.align;Kn=Kn.prev)Yi=Kn.indented;Ji.lexical=new lt(Yi,Et.stream.column(),oe,null,Ji.lexical,He)};return Oi.lex=!0,Oi}function Le(){var oe=Et.state;oe.lexical.prev&&(")"==oe.lexical.type&&(oe.indented=oe.lexical.indented),oe.lexical=oe.lexical.prev)}function gi(oe){return function He(Oi){return Oi==oe?nt():";"==oe||"}"==Oi||")"==Oi||"]"==Oi?ht():nt(He)}}function Bt(oe,He){return"var"==oe?nt(Ze("vardef",He),Wi,gi(";"),Le):"keyword a"==oe?nt(Ze("form"),At,Bt,Le):"keyword b"==oe?nt(Ze("form"),Bt,Le):"keyword d"==oe?Et.stream.match(/^\s*$/,!1)?nt():nt(Ze("stat"),ze,gi(";"),Le):"debugger"==oe?nt(gi(";")):"{"==oe?nt(Ze("}"),Qe,mi,Le,Di):";"==oe?nt():"if"==oe?("else"==Et.state.lexical.info&&Et.state.cc[Et.state.cc.length-1]==Le&&Et.state.cc.pop()(),nt(Ze("form"),At,Bt,Le,xe)):"function"==oe?nt(An):"for"==oe?nt(Ze("form"),Qe,ui,Bt,Di,Le):"class"==oe||y&&"interface"==He?(Et.marked="keyword",nt(Ze("form","class"==oe?oe:He),mo,Le)):"variable"==oe?y&&"declare"==He?(Et.marked="keyword",nt(Bt)):y&&("module"==He||"enum"==He||"type"==He)&&Et.stream.match(/^\s*\w/,!1)?(Et.marked="keyword","enum"==He?nt(Ir):"type"==He?nt(Tr,gi("operator"),je,gi(";")):nt(Ze("form"),Qi,gi("{"),Ze("}"),mi,Le,Le)):y&&"namespace"==He?(Et.marked="keyword",nt(Ze("form"),$t,Bt,Le)):y&&"abstract"==He?(Et.marked="keyword",nt(Bt)):nt(Ze("stat"),ce):"switch"==oe?nt(Ze("form"),At,gi("{"),Ze("}","switch"),Qe,mi,Le,Le,Di):"case"==oe?nt($t,gi(":")):"default"==oe?nt(gi(":")):"catch"==oe?nt(Ze("form"),Ne,Te,Bt,Le,Di):"export"==oe?nt(Ze("stat"),sr,Le):"import"==oe?nt(Ze("stat"),Vn,Le):"async"==oe?nt(Bt):"@"==He?nt($t,Bt):ht(Ze("stat"),$t,gi(";"),Le)}function Te(oe){if("("==oe)return nt(eo,gi(")"))}function $t(oe,He){return pe(oe,He,!1)}function _e(oe,He){return pe(oe,He,!0)}function At(oe){return"("!=oe?ht():nt(Ze(")"),ze,gi(")"),Le)}function pe(oe,He,Oi){if(Et.state.fatArrowAt==Et.stream.start){var Ji=Oi?ne:ke;if("("==oe)return nt(Ne,Ze(")"),yi(eo,")"),Le,gi("=>"),Ji,Di);if("variable"==oe)return ht(Ne,Qi,gi("=>"),Ji,Di)}var Yi=Oi?Ie:hi;return mt.hasOwnProperty(oe)?nt(Yi):"function"==oe?nt(An,Yi):"class"==oe||y&&"interface"==He?(Et.marked="keyword",nt(Ze("form"),no,Le)):"keyword c"==oe||"async"==oe?nt(Oi?_e:$t):"("==oe?nt(Ze(")"),ze,gi(")"),Le,Yi):"operator"==oe||"spread"==oe?nt(Oi?_e:$t):"["==oe?nt(Ze("]"),Qr,Le,Yi):"{"==oe?pn(ni,"}",null,Yi):"quasi"==oe?ht(te,Yi):"new"==oe?nt(function(oe){return function(He){return"."==He?nt(oe?Zt:ye):"variable"==He&&y?nt(Lt,oe?Ie:hi):ht(oe?_e:$t)}}(Oi)):nt()}function ze(oe){return oe.match(/[;\}\)\],]/)?ht():ht($t)}function hi(oe,He){return","==oe?nt(ze):Ie(oe,He,!1)}function Ie(oe,He,Oi){var Ji=0==Oi?hi:Ie,Yi=0==Oi?$t:_e;if("=>"==oe)return nt(Ne,Oi?ne:ke,Di);if("operator"==oe)return/\+\+|--/.test(He)||y&&"!"==He?nt(Ji):y&&"<"==He&&Et.stream.match(/^([^<>]|<[^<>]*>)*>\s*\(/,!1)?nt(Ze(">"),yi(je,">"),Le,Ji):"?"==He?nt($t,gi(":"),Yi):nt(Yi);if("quasi"==oe)return ht(te,Ji);if(";"!=oe){if("("==oe)return pn(_e,")","call",Ji);if("."==oe)return nt(ei,Ji);if("["==oe)return nt(Ze("]"),ze,gi("]"),Le,Ji);if(y&&"as"==He)return Et.marked="keyword",nt(je,Ji);if("regexp"==oe)return Et.state.lastType=Et.marked="operator",Et.stream.backUp(Et.stream.pos-Et.stream.start-1),nt(Yi)}}function te(oe,He){return"quasi"!=oe?ht():"${"!=He.slice(He.length-2)?nt(te):nt(ze,ee)}function ee(oe){if("}"==oe)return Et.marked="string-2",Et.state.tokenize=Ct,nt(te)}function ke(oe){return ot(Et.stream,Et.state),ht("{"==oe?Bt:$t)}function ne(oe){return ot(Et.stream,Et.state),ht("{"==oe?Bt:_e)}function ye(oe,He){if("target"==He)return Et.marked="keyword",nt(hi)}function Zt(oe,He){if("target"==He)return Et.marked="keyword",nt(Ie)}function ce(oe){return":"==oe?nt(Le,Bt):ht(hi,gi(";"),Le)}function ei(oe){if("variable"==oe)return Et.marked="property",nt()}function ni(oe,He){return"async"==oe?(Et.marked="property",nt(ni)):"variable"==oe||"keyword"==Et.style?(Et.marked="property","get"==He||"set"==He?nt(Fi):(y&&Et.state.fatArrowAt==Et.stream.start&&(Oi=Et.stream.match(/^\s*:\s*/,!1))&&(Et.state.fatArrowAt=Et.stream.pos+Oi[0].length),nt(wi))):"number"==oe||"string"==oe?(Et.marked=r?"property":Et.style+" property",nt(wi)):"jsonld-keyword"==oe?nt(wi):y&&de(He)?(Et.marked="keyword",nt(ni)):"["==oe?nt($t,Zi,gi("]"),wi):"spread"==oe?nt(_e,wi):"*"==He?(Et.marked="keyword",nt(ni)):":"==oe?ht(wi):void 0;var Oi}function Fi(oe){return"variable"!=oe?ht(wi):(Et.marked="property",nt(An))}function wi(oe){return":"==oe?nt(_e):"("==oe?ht(An):void 0}function yi(oe,He,Oi){function Ji(Yi,Kn){if(Oi?Oi.indexOf(Yi)>-1:","==Yi){var zn=Et.state.lexical;return"call"==zn.info&&(zn.pos=(zn.pos||0)+1),nt(function(nr,Fn){return nr==He||Fn==He?ht():ht(oe)},Ji)}return Yi==He||Kn==He?nt():Oi&&Oi.indexOf(";")>-1?ht(oe):nt(gi(He))}return function(Yi,Kn){return Yi==He||Kn==He?nt():ht(oe,Ji)}}function pn(oe,He,Oi){for(var Ji=3;Ji<arguments.length;Ji++)Et.cc.push(arguments[Ji]);return nt(Ze(He,Oi),yi(oe,He),Le)}function mi(oe){return"}"==oe?nt():ht(Bt,mi)}function Zi(oe,He){if(y){if(":"==oe)return nt(je);if("?"==He)return nt(Zi)}}function Ce(oe,He){if(y&&(":"==oe||"in"==He))return nt(je)}function Oe(oe){if(y&&":"==oe)return Et.stream.match(/^\s*\w+\s+is\b/,!1)?nt($t,Ci,je):nt(je)}function Ci(oe,He){if("is"==He)return Et.marked="keyword",nt()}function je(oe,He){return"keyof"==He||"typeof"==He||"infer"==He||"readonly"==He?(Et.marked="keyword",nt("typeof"==He?_e:je)):"variable"==oe||"void"==He?(Et.marked="type",nt(ct)):"|"==He||"&"==He?nt(je):"string"==oe||"number"==oe||"atom"==oe?nt(ct):"["==oe?nt(Ze("]"),yi(je,"]",","),Le,ct):"{"==oe?nt(Ze("}"),_i,Le,ct):"("==oe?nt(yi(kt,")"),Ii,ct):"<"==oe?nt(yi(je,">"),je):"quasi"==oe?ht($e,ct):void 0}function Ii(oe){if("=>"==oe)return nt(je)}function _i(oe){return oe.match(/[\}\)\]]/)?nt():","==oe||";"==oe?nt(_i):ht(Ui,_i)}function Ui(oe,He){return"variable"==oe||"keyword"==Et.style?(Et.marked="property",nt(Ui)):"?"==He||"number"==oe||"string"==oe?nt(Ui):":"==oe?nt(je):"["==oe?nt(gi("variable"),Ce,gi("]"),Ui):"("==oe?ht(ar,Ui):oe.match(/[;\}\)\],]/)?void 0:nt()}function $e(oe,He){return"quasi"!=oe?ht():"${"!=He.slice(He.length-2)?nt($e):nt(je,fe)}function fe(oe){if("}"==oe)return Et.marked="string-2",Et.state.tokenize=Ct,nt($e)}function kt(oe,He){return"variable"==oe&&Et.stream.match(/^\s*[?:]/,!1)||"?"==He?nt(kt):":"==oe?nt(je):"spread"==oe?nt(kt):ht(je)}function ct(oe,He){return"<"==He?nt(Ze(">"),yi(je,">"),Le,ct):"|"==He||"."==oe||"&"==He?nt(je):"["==oe?nt(je,gi("]"),ct):"extends"==He||"implements"==He?(Et.marked="keyword",nt(je)):"?"==He?nt(je,gi(":"),je):void 0}function Lt(oe,He){if("<"==He)return nt(Ze(">"),yi(je,">"),Le,ct)}function ae(){return ht(je,Ae)}function Ae(oe,He){if("="==He)return nt(je)}function Wi(oe,He){return"enum"==He?(Et.marked="keyword",nt(Ir)):ht(Qi,Zi,li,Je)}function Qi(oe,He){return y&&de(He)?(Et.marked="keyword",nt(Qi)):"variable"==oe?(Mt(He),nt()):"spread"==oe?nt(Qi):"["==oe?pn(tr,"]"):"{"==oe?pn(yn,"}"):void 0}function yn(oe,He){return"variable"!=oe||Et.stream.match(/^\s*:/,!1)?("variable"==oe&&(Et.marked="property"),"spread"==oe?nt(Qi):"}"==oe?ht():"["==oe?nt($t,gi("]"),gi(":"),yn):nt(gi(":"),Qi,li)):(Mt(He),nt(li))}function tr(){return ht(Qi,li)}function li(oe,He){if("="==He)return nt(_e)}function Je(oe){if(","==oe)return nt(Wi)}function xe(oe,He){if("keyword b"==oe&&"else"==He)return nt(Ze("form","else"),Bt,Le)}function ui(oe,He){return"await"==He?nt(ui):"("==oe?nt(Ze(")"),ki,Le):void 0}function ki(oe){return"var"==oe?nt(Wi,fn):"variable"==oe?nt(fn):ht(fn)}function fn(oe,He){return")"==oe?nt():";"==oe?nt(fn):"in"==He||"of"==He?(Et.marked="keyword",nt($t,fn)):ht($t,fn)}function An(oe,He){return"*"==He?(Et.marked="keyword",nt(An)):"variable"==oe?(Mt(He),nt(An)):"("==oe?nt(Ne,Ze(")"),yi(eo,")"),Le,Oe,Bt,Di):y&&"<"==He?nt(Ze(">"),yi(ae,">"),Le,An):void 0}function ar(oe,He){return"*"==He?(Et.marked="keyword",nt(ar)):"variable"==oe?(Mt(He),nt(ar)):"("==oe?nt(Ne,Ze(")"),yi(eo,")"),Le,Oe,Di):y&&"<"==He?nt(Ze(">"),yi(ae,">"),Le,ar):void 0}function Tr(oe,He){return"keyword"==oe||"variable"==oe?(Et.marked="type",nt(Tr)):"<"==He?nt(Ze(">"),yi(ae,">"),Le):void 0}function eo(oe,He){return"@"==He&&nt($t,eo),"spread"==oe?nt(eo):y&&de(He)?(Et.marked="keyword",nt(eo)):y&&"this"==oe?nt(Zi,li):ht(Qi,Zi,li)}function no(oe,He){return"variable"==oe?mo(oe,He):kr(oe,He)}function mo(oe,He){if("variable"==oe)return Mt(He),nt(kr)}function kr(oe,He){return"<"==He?nt(Ze(">"),yi(ae,">"),Le,kr):"extends"==He||"implements"==He||y&&","==oe?("implements"==He&&(Et.marked="keyword"),nt(y?je:$t,kr)):"{"==oe?nt(Ze("}"),ur,Le):void 0}function ur(oe,He){return"async"==oe||"variable"==oe&&("static"==He||"get"==He||"set"==He||y&&de(He))&&Et.stream.match(/^\s+[\w$\xa1-\uffff]/,!1)?(Et.marked="keyword",nt(ur)):"variable"==oe||"keyword"==Et.style?(Et.marked="property",nt(Mo,ur)):"number"==oe||"string"==oe?nt(Mo,ur):"["==oe?nt($t,Zi,gi("]"),Mo,ur):"*"==He?(Et.marked="keyword",nt(ur)):y&&"("==oe?ht(ar,ur):";"==oe||","==oe?nt(ur):"}"==oe?nt():"@"==He?nt($t,ur):void 0}function Mo(oe,He){if("!"==He||"?"==He)return nt(Mo);if(":"==oe)return nt(je,li);if("="==He)return nt(_e);var Oi=Et.state.lexical.prev;return ht(Oi&&"interface"==Oi.info?ar:An)}function sr(oe,He){return"*"==He?(Et.marked="keyword",nt(Dr,gi(";"))):"default"==He?(Et.marked="keyword",nt($t,gi(";"))):"{"==oe?nt(yi(Ai,"}"),Dr,gi(";")):ht(Bt)}function Ai(oe,He){return"as"==He?(Et.marked="keyword",nt(gi("variable"))):"variable"==oe?ht(_e,Ai):void 0}function Vn(oe){return"string"==oe?nt():"("==oe?ht($t):"."==oe?ht(hi):ht(gr,Br,Dr)}function gr(oe,He){return"{"==oe?pn(gr,"}"):("variable"==oe&&Mt(He),"*"==He&&(Et.marked="keyword"),nt(pr))}function Br(oe){if(","==oe)return nt(gr,Br)}function pr(oe,He){if("as"==He)return Et.marked="keyword",nt(gr)}function Dr(oe,He){if("from"==He)return Et.marked="keyword",nt($t)}function Qr(oe){return"]"==oe?nt():ht(yi(_e,"]"))}function Ir(){return ht(Ze("form"),Qi,gi("{"),Ze("}"),yi(Vi,"}"),Le,Le)}function Vi(){return ht(Qi,li)}function Gn(oe,He,Oi){return He.tokenize==xt&&/^(?:operator|sof|keyword [bcd]|case|new|export|default|spread|[\[{}\(,;:]|=>)$/.test(He.lastType)||"quasi"==He.lastType&&/\{\s*$/.test(oe.string.slice(0,oe.pos-(Oi||0)))}return Di.lex=!0,Le.lex=!0,{startState:function(oe){var He={tokenize:xt,lastType:"sof",cc:[],lexical:new lt((oe||0)-t,0,"block",!1),localVars:e.localVars,context:e.localVars&&new ve(null,null,!1),indented:oe||0};return e.globalVars&&"object"==typeof e.globalVars&&(He.globalVars=e.globalVars),He},token:function(oe,He){if(oe.sol()&&(He.lexical.hasOwnProperty("align")||(He.lexical.align=!1),He.indented=oe.indentation(),ot(oe,He)),He.tokenize!=Jt&&oe.eatSpace())return null;var Oi=He.tokenize(oe,He);return"comment"==St?Oi:(He.lastType="operator"!=St||"++"!=Ht&&"--"!=Ht?St:"incdec",Rt(He,Oi,St,Ht,oe))},indent:function(oe,He){if(oe.tokenize==Jt||oe.tokenize==Ct)return C.Pass;if(oe.tokenize!=xt)return 0;var Yi,Oi=He&&He.charAt(0),Ji=oe.lexical;if(!/^\s*else\b/.test(He))for(var Kn=oe.cc.length-1;Kn>=0;--Kn){var zn=oe.cc[Kn];if(zn==Le)Ji=Ji.prev;else if(zn!=xe&&zn!=Di)break}for(;("stat"==Ji.type||"form"==Ji.type)&&("}"==Oi||(Yi=oe.cc[oe.cc.length-1])&&(Yi==hi||Yi==Ie)&&!/^[,\.=+\-*:?[\(]/.test(He));)Ji=Ji.prev;n&&")"==Ji.type&&"stat"==Ji.prev.type&&(Ji=Ji.prev);var nr=Ji.type,Fn=Oi==nr;return"vardef"==nr?Ji.indented+("operator"==oe.lastType||","==oe.lastType?Ji.info.length+1:0):"form"==nr&&"{"==Oi?Ji.indented:"form"==nr?Ji.indented+t:"stat"==nr?Ji.indented+(function(oe,He){return"operator"==oe.lastType||","==oe.lastType||Q.test(He.charAt(0))||/[,.]/.test(He.charAt(0))}(oe,He)?n||t:0):"switch"!=Ji.info||Fn||0==e.doubleIndentSwitch?Ji.align?Ji.column+(Fn?0:1):Ji.indented+(Fn?0:t):Ji.indented+(/^(?:case|default)\b/.test(He)?t:2*t)},electricInput:/^\s*(?:case .*?:|default:|\{|\})$/,blockCommentStart:s?null:"/*",blockCommentEnd:s?null:"*/",blockCommentContinue:s?null:" * ",lineComment:s?null:"//",fold:"brace",closeBrackets:"()[]{}''\"\"``",helperType:s?"json":"javascript",jsonldMode:r,jsonMode:s,expressionAllowed:Gn,skipExpression:function(oe){Rt(oe,"atom","atom","true",new C.StringStream("",2,null))}}}),C.registerHelper("wordChars","javascript",/[\w$]/),C.defineMIME("text/javascript","javascript"),C.defineMIME("text/ecmascript","javascript"),C.defineMIME("application/javascript","javascript"),C.defineMIME("application/x-javascript","javascript"),C.defineMIME("application/ecmascript","javascript"),C.defineMIME("application/json",{name:"javascript",json:!0}),C.defineMIME("application/x-json",{name:"javascript",json:!0}),C.defineMIME("application/manifest+json",{name:"javascript",json:!0}),C.defineMIME("application/ld+json",{name:"javascript",jsonld:!0}),C.defineMIME("text/typescript",{name:"javascript",typescript:!0}),C.defineMIME("application/typescript",{name:"javascript",typescript:!0})}(m(68266))},70697:function(U){U.exports=function(){"use strict";function $(_t){return($="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(wt){return typeof wt}:function(wt){return wt&&"function"==typeof Symbol&&wt.constructor===Symbol&&wt!==Symbol.prototype?"symbol":typeof wt})(_t)}var _t,C=(_t={},function(ie){var we=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"introjs-stamp";return _t[we]=_t[we]||0,void 0===ie[we]&&(ie[we]=_t[we]++),ie[we]});function _(_t,wt,ie){if(_t)for(var we=0,Ue=_t.length;we<Ue;we++)wt(_t[we],we);"function"==typeof ie&&ie()}var e=new function(){var wt="introjs_event";this._id=function(ie,we,Ue,di){return we+C(Ue)+(di?"_".concat(C(di)):"")},this.on=function(ie,we,Ue,di,qe){var si=this._id.apply(this,arguments),Li=function(zi){return Ue.call(di||ie,zi||window.event)};"addEventListener"in ie?ie.addEventListener(we,Li,qe):"attachEvent"in ie&&ie.attachEvent("on".concat(we),Li),ie[wt]=ie[wt]||{},ie[wt][si]=Li},this.off=function(ie,we,Ue,di,qe){var si=this._id.apply(this,arguments),Li=ie[wt]&&ie[wt][si];!Li||("removeEventListener"in ie?ie.removeEventListener(we,Li,qe):"detachEvent"in ie&&ie.detachEvent("on".concat(we),Li),ie[wt][si]=null)}},t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function n(_t,wt){return _t(wt={exports:{}},wt.exports),wt.exports}var Le,gi,r=function(_t){return _t&&_t.Math==Math&&_t},s=r("object"==typeof globalThis&&globalThis)||r("object"==typeof window&&window)||r("object"==typeof self&&self)||r("object"==typeof t&&t)||function(){return this}()||Function("return this")(),u=function(_t){try{return!!_t()}catch(wt){return!0}},y=!u(function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}),x=Function.prototype.call,B=x.bind?x.bind(x):function(){return x.apply(x,arguments)},Q={}.propertyIsEnumerable,at=Object.getOwnPropertyDescriptor,Ht={f:at&&!Q.call({1:2},1)?function(wt){var ie=at(this,wt);return!!ie&&ie.enumerable}:Q},vt=function(_t,wt){return{enumerable:!(1&_t),configurable:!(2&_t),writable:!(4&_t),value:wt}},xt=Function.prototype,Wt=xt.bind,Jt=xt.call,Ct=Wt&&Wt.bind(Jt),yt=Wt?function(_t){return _t&&Ct(Jt,_t)}:function(_t){return _t&&function(){return Jt.apply(_t,arguments)}},ot=yt({}.toString),mt=yt("".slice),lt=function(_t){return mt(ot(_t),8,-1)},Ut=s.Object,Rt=yt("".split),Et=u(function(){return!Ut("z").propertyIsEnumerable(0)})?function(_t){return"String"==lt(_t)?Rt(_t,""):Ut(_t)}:Ut,ht=s.TypeError,nt=function(_t){if(null==_t)throw ht("Can't call method on "+_t);return _t},he=function(_t){return Et(nt(_t))},Mt=function(_t){return"function"==typeof _t},Nt=function(_t){return"object"==typeof _t?null!==_t:Mt(_t)},de=function(_t){return Mt(_t)?_t:void 0},ve=function(_t,wt){return arguments.length<2?de(s[_t]):s[_t]&&s[_t][wt]},ue=yt({}.isPrototypeOf),Be=ve("navigator","userAgent")||"",Ne=s.process,Qe=s.Deno,Di=Ne&&Ne.versions||Qe&&Qe.version,Ze=Di&&Di.v8;Ze&&(gi=(Le=Ze.split("."))[0]>0&&Le[0]<4?1:+(Le[0]+Le[1])),!gi&&Be&&(!(Le=Be.match(/Edge\/(\d+)/))||Le[1]>=74)&&(Le=Be.match(/Chrome\/(\d+)/))&&(gi=+Le[1]);var Bt=gi,Te=!!Object.getOwnPropertySymbols&&!u(function(){var _t=Symbol();return!String(_t)||!(Object(_t)instanceof Symbol)||!Symbol.sham&&Bt&&Bt<41}),$t=Te&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,_e=s.Object,At=$t?function(_t){return"symbol"==typeof _t}:function(_t){var wt=ve("Symbol");return Mt(wt)&&ue(wt.prototype,_e(_t))},pe=s.String,ze=function(_t){try{return pe(_t)}catch(wt){return"Object"}},hi=s.TypeError,Ie=function(_t){if(Mt(_t))return _t;throw hi(ze(_t)+" is not a function")},te=function(_t,wt){var ie=_t[wt];return null==ie?void 0:Ie(ie)},ee=s.TypeError,ne=Object.defineProperty,me=function(_t,wt){try{ne(s,_t,{value:wt,configurable:!0,writable:!0})}catch(ie){s[_t]=wt}return wt},ye="__core-js_shared__",ce=s[ye]||me(ye,{}),ei=n(function(_t){(_t.exports=function(wt,ie){return ce[wt]||(ce[wt]=void 0!==ie?ie:{})})("versions",[]).push({version:"3.19.1",mode:"global",copyright:"\xa9 2021 Denis Pushkarev (zloirock.ru)"})}),ni=s.Object,Fi=function(_t){return ni(nt(_t))},wi=yt({}.hasOwnProperty),yi=Object.hasOwn||function(wt,ie){return wi(Fi(wt),ie)},pn=0,mi=Math.random(),Zi=yt(1..toString),Ce=function(_t){return"Symbol("+(void 0===_t?"":_t)+")_"+Zi(++pn+mi,36)},Oe=ei("wks"),Ci=s.Symbol,je=Ci&&Ci.for,Ii=$t?Ci:Ci&&Ci.withoutSetter||Ce,_i=function(_t){if(!yi(Oe,_t)||!Te&&"string"!=typeof Oe[_t]){var wt="Symbol."+_t;Oe[_t]=Te&&yi(Ci,_t)?Ci[_t]:$t&&je?je(wt):Ii(wt)}return Oe[_t]},Ui=s.TypeError,$e=_i("toPrimitive"),fe=function(_t,wt){if(!Nt(_t)||At(_t))return _t;var we,ie=te(_t,$e);if(ie){if(void 0===wt&&(wt="default"),we=B(ie,_t,wt),!Nt(we)||At(we))return we;throw Ui("Can't convert object to primitive value")}return void 0===wt&&(wt="number"),function(_t,wt){var ie,we;if("string"===wt&&Mt(ie=_t.toString)&&!Nt(we=B(ie,_t))||Mt(ie=_t.valueOf)&&!Nt(we=B(ie,_t))||"string"!==wt&&Mt(ie=_t.toString)&&!Nt(we=B(ie,_t)))return we;throw ee("Can't convert object to primitive value")}(_t,wt)},kt=function(_t){var wt=fe(_t,"string");return At(wt)?wt:wt+""},ct=s.document,Lt=Nt(ct)&&Nt(ct.createElement),ae=function(_t){return Lt?ct.createElement(_t):{}},Ae=!y&&!u(function(){return 7!=Object.defineProperty(ae("div"),"a",{get:function(){return 7}}).a}),Wi=Object.getOwnPropertyDescriptor,yn={f:y?Wi:function(wt,ie){if(wt=he(wt),ie=kt(ie),Ae)try{return Wi(wt,ie)}catch(we){}if(yi(wt,ie))return vt(!B(Ht.f,wt,ie),wt[ie])}},tr=s.String,li=s.TypeError,Je=function(_t){if(Nt(_t))return _t;throw li(tr(_t)+" is not an object")},xe=s.TypeError,ui=Object.defineProperty,fn={f:y?ui:function(wt,ie,we){if(Je(wt),ie=kt(ie),Je(we),Ae)try{return ui(wt,ie,we)}catch(Ue){}if("get"in we||"set"in we)throw xe("Accessors not supported");return"value"in we&&(wt[ie]=we.value),wt}},An=y?function(_t,wt,ie){return fn.f(_t,wt,vt(1,ie))}:function(_t,wt,ie){return _t[wt]=ie,_t},ar=yt(Function.toString);Mt(ce.inspectSource)||(ce.inspectSource=function(_t){return ar(_t)});var Vn,gr,Br,Tr=ce.inspectSource,eo=s.WeakMap,no=Mt(eo)&&/native code/.test(Tr(eo)),mo=ei("keys"),kr=function(_t){return mo[_t]||(mo[_t]=Ce(_t))},ur={},Mo="Object already initialized",sr=s.TypeError;if(no||ce.state){var Qr=ce.state||(ce.state=new(0,s.WeakMap)),Ir=yt(Qr.get),Vi=yt(Qr.has),Sn=yt(Qr.set);Vn=function(_t,wt){if(Vi(Qr,_t))throw new sr(Mo);return wt.facade=_t,Sn(Qr,_t,wt),wt},gr=function(_t){return Ir(Qr,_t)||{}},Br=function(_t){return Vi(Qr,_t)}}else{var Gn=kr("state");ur[Gn]=!0,Vn=function(_t,wt){if(yi(_t,Gn))throw new sr(Mo);return wt.facade=_t,An(_t,Gn,wt),wt},gr=function(_t){return yi(_t,Gn)?_t[Gn]:{}},Br=function(_t){return yi(_t,Gn)}}var oe={set:Vn,get:gr,has:Br,enforce:function(_t){return Br(_t)?gr(_t):Vn(_t,{})},getterFor:function(_t){return function(wt){var ie;if(!Nt(wt)||(ie=gr(wt)).type!==_t)throw sr("Incompatible receiver, "+_t+" required");return ie}}},He=Function.prototype,Oi=y&&Object.getOwnPropertyDescriptor,Ji=yi(He,"name"),zn={EXISTS:Ji,PROPER:Ji&&"something"===function(){}.name,CONFIGURABLE:Ji&&(!y||y&&Oi(He,"name").configurable)},nr=n(function(_t){var wt=zn.CONFIGURABLE,ie=oe.get,we=oe.enforce,Ue=String(String).split("String");(_t.exports=function(di,qe,si,Li){var qn,xi=!!Li&&!!Li.unsafe,zi=!!Li&&!!Li.enumerable,Jn=!!Li&&!!Li.noTargetGet,Un=Li&&void 0!==Li.name?Li.name:qe;Mt(si)&&("Symbol("===String(Un).slice(0,7)&&(Un="["+String(Un).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),(!yi(si,"name")||wt&&si.name!==Un)&&An(si,"name",Un),(qn=we(si)).source||(qn.source=Ue.join("string"==typeof Un?Un:""))),di!==s?(xi?!Jn&&di[qe]&&(zi=!0):delete di[qe],zi?di[qe]=si:An(di,qe,si)):zi?di[qe]=si:me(qe,si)})(Function.prototype,"toString",function(){return Mt(this)&&ie(this).source||Tr(this)})}),Fn=Math.ceil,Ao=Math.floor,jo=function(_t){var wt=+_t;return wt!=wt||0===wt?0:(wt>0?Ao:Fn)(wt)},ro=Math.max,_o=Math.min,Zs=function(_t,wt){var ie=jo(_t);return ie<0?ro(ie+wt,0):_o(ie,wt)},lr=Math.min,Yo=function(_t){return _t>0?lr(jo(_t),9007199254740991):0},Jr=function(_t){return Yo(_t.length)},Ss=function(_t){return function(wt,ie,we){var si,Ue=he(wt),di=Jr(Ue),qe=Zs(we,di);if(_t&&ie!=ie){for(;di>qe;)if((si=Ue[qe++])!=si)return!0}else for(;di>qe;qe++)if((_t||qe in Ue)&&Ue[qe]===ie)return _t||qe||0;return!_t&&-1}},ws={includes:Ss(!0),indexOf:Ss(!1)},Bo=ws.indexOf,Ro=yt([].push),ns=function(_t,wt){var di,ie=he(_t),we=0,Ue=[];for(di in ie)!yi(ur,di)&&yi(ie,di)&&Ro(Ue,di);for(;wt.length>we;)yi(ie,di=wt[we++])&&(~Bo(Ue,di)||Ro(Ue,di));return Ue},Ho=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],Ya=Ho.concat("length","prototype"),Ka={f:Object.getOwnPropertyNames||function(wt){return ns(wt,Ya)}},ga={f:Object.getOwnPropertySymbols},_l=yt([].concat),Fs=ve("Reflect","ownKeys")||function(wt){var ie=Ka.f(Je(wt)),we=ga.f;return we?_l(ie,we(wt)):ie},Pa=function(_t,wt){for(var ie=Fs(wt),we=fn.f,Ue=yn.f,di=0;di<ie.length;di++){var qe=ie[di];yi(_t,qe)||we(_t,qe,Ue(wt,qe))}},Bs=/#|\.prototype\./,fs=function(_t,wt){var ie=ma[al(_t)];return ie==Oo||ie!=Qs&&(Mt(wt)?u(wt):!!wt)},al=fs.normalize=function(_t){return String(_t).replace(Bs,".").toLowerCase()},ma=fs.data={},Qs=fs.NATIVE="N",Oo=fs.POLYFILL="P",zr=fs,ao=yn.f,yo=function(_t,wt){var qe,si,Li,xi,zi,ie=_t.target,we=_t.global,Ue=_t.stat;if(qe=we?s:Ue?s[ie]||me(ie,{}):(s[ie]||{}).prototype)for(si in wt){if(xi=wt[si],Li=_t.noTargetGet?(zi=ao(qe,si))&&zi.value:qe[si],!zr(we?si:ie+(Ue?".":"#")+si,_t.forced)&&void 0!==Li){if(typeof xi==typeof Li)continue;Pa(xi,Li)}(_t.sham||Li&&Li.sham)&&An(xi,"sham",!0),nr(qe,si,xi,_t)}},Xo={};Xo[_i("toStringTag")]="z";var bi,Rs="[object z]"===String(Xo),zo=_i("toStringTag"),xo=s.Object,Eo="Arguments"==lt(function(){return arguments}()),lo=Rs?lt:function(_t){var wt,ie,we;return void 0===_t?"Undefined":null===_t?"Null":"string"==typeof(ie=function(_t,wt){try{return _t[wt]}catch(ie){}}(wt=xo(_t),zo))?ie:Eo?lt(wt):"Object"==(we=lt(wt))&&Mt(wt.callee)?"Arguments":we},gs=s.String,Lr=function(_t){if("Symbol"===lo(_t))throw TypeError("Cannot convert a Symbol value to a string");return gs(_t)},aa=function(){var _t=Je(this),wt="";return _t.global&&(wt+="g"),_t.ignoreCase&&(wt+="i"),_t.multiline&&(wt+="m"),_t.dotAll&&(wt+="s"),_t.unicode&&(wt+="u"),_t.sticky&&(wt+="y"),wt},jr=s.RegExp,la=u(function(){var _t=jr("a","y");return _t.lastIndex=2,null!=_t.exec("abcd")}),vl=u(function(){var _t=jr("^r","gy");return _t.lastIndex=2,null!=_t.exec("str")}),us={UNSUPPORTED_Y:la,BROKEN_CARET:vl},Ko=Object.keys||function(wt){return ns(wt,Ho)},ms=y?Object.defineProperties:function(wt,ie){Je(wt);for(var si,we=he(ie),Ue=Ko(ie),di=Ue.length,qe=0;di>qe;)fn.f(wt,si=Ue[qe++],we[si]);return wt},bl=ve("document","documentElement"),_a="prototype",Ot="script",Z=kr("IE_PROTO"),V=function(){},z=function(_t){return"<script>"+_t+"</"+Ot+">"},It=function(_t){_t.write(z("")),_t.close();var wt=_t.parentWindow.Object;return _t=null,wt},cn=function(){try{bi=new ActiveXObject("htmlfile")}catch(wt){}cn="undefined"!=typeof document?document.domain&&bi?It(bi):function(){var ie,_t=ae("iframe");return _t.style.display="none",bl.appendChild(_t),_t.src=String("javascript:"),(ie=_t.contentWindow.document).open(),ie.write(z("document.F=Object")),ie.close(),ie.F}():It(bi);for(var _t=Ho.length;_t--;)delete cn[_a][Ho[_t]];return cn()};ur[Z]=!0;var jn=Object.create||function(wt,ie){var we;return null!==wt?(V[_a]=Je(wt),we=new V,V[_a]=null,we[Z]=wt):we=cn(),void 0===ie?we:ms(we,ie)},Cr=s.RegExp,Hr=u(function(){var _t=Cr(".","s");return!(_t.dotAll&&_t.exec("\n")&&"s"===_t.flags)}),Pr=s.RegExp,io=u(function(){var _t=Pr("(?<a>b)","g");return"b"!==_t.exec("b").groups.a||"bc"!=="b".replace(_t,"$<a>c")}),hr=oe.get,qo=ei("native-string-replace",String.prototype.replace),Hn=RegExp.prototype.exec,Us=Hn,Fa=yt("".charAt),ts=yt("".indexOf),ll=yt("".replace),Vs=yt("".slice),qs=function(){var _t=/a/,wt=/b*/g;return B(Hn,_t,"a"),B(Hn,wt,"a"),0!==_t.lastIndex||0!==wt.lastIndex}(),Bc=us.UNSUPPORTED_Y||us.BROKEN_CARET,Gt=void 0!==/()??/.exec("")[1];(qs||Gt||Bc||Hr||io)&&(Us=function(wt){var qe,si,Li,xi,zi,Jn,Un,ie=this,we=hr(ie),Ue=Lr(wt),di=we.raw;if(di)return di.lastIndex=ie.lastIndex,qe=B(Us,di,Ue),ie.lastIndex=di.lastIndex,qe;var qn=we.groups,$o=Bc&&ie.sticky,Do=B(aa,ie),Zr=ie.source,ho=0,Go=Ue;if($o&&(Do=ll(Do,"y",""),-1===ts(Do,"g")&&(Do+="g"),Go=Vs(Ue,ie.lastIndex),ie.lastIndex>0&&(!ie.multiline||ie.multiline&&"\n"!==Fa(Ue,ie.lastIndex-1))&&(Zr="(?: "+Zr+")",Go=" "+Go,ho++),si=new RegExp("^(?:"+Zr+")",Do)),Gt&&(si=new RegExp("^"+Zr+"$(?!\\s)",Do)),qs&&(Li=ie.lastIndex),xi=B(Hn,$o?si:ie,Go),$o?xi?(xi.input=Vs(xi.input,ho),xi[0]=Vs(xi[0],ho),xi.index=ie.lastIndex,ie.lastIndex+=xi[0].length):ie.lastIndex=0:qs&&xi&&(ie.lastIndex=ie.global?xi.index+xi[0].length:Li),Gt&&xi&&xi.length>1&&B(qo,xi[0],si,function(){for(zi=1;zi<arguments.length-2;zi++)void 0===arguments[zi]&&(xi[zi]=void 0)}),xi&&qn)for(xi.groups=Jn=jn(null),zi=0;zi<qn.length;zi++)Jn[(Un=qn[zi])[0]]=xi[Un[1]];return xi});var K=Us;yo({target:"RegExp",proto:!0,forced:/./.exec!==K},{exec:K});var gt=_i("species"),Qt=RegExp.prototype,be=function(_t,wt,ie,we){var Ue=_i(_t),di=!u(function(){var xi={};return xi[Ue]=function(){return 7},7!=""[_t](xi)}),qe=di&&!u(function(){var xi=!1,zi=/a/;return"split"===_t&&((zi={}).constructor={},zi.constructor[gt]=function(){return zi},zi.flags="",zi[Ue]=/./[Ue]),zi.exec=function(){return xi=!0,null},zi[Ue](""),!xi});if(!di||!qe||ie){var si=yt(/./[Ue]),Li=wt(Ue,""[_t],function(xi,zi,Jn,Un,qn){var $o=yt(xi),Do=zi.exec;return Do===K||Do===Qt.exec?di&&!qn?{done:!0,value:si(zi,Jn,Un)}:{done:!0,value:$o(Jn,zi,Un)}:{done:!1}});nr(String.prototype,_t,Li[0]),nr(Qt,Ue,Li[1])}we&&An(Qt[Ue],"sham",!0)},Ye=yt("".charAt),ti=yt("".charCodeAt),vi=yt("".slice),Bi=function(_t){return function(wt,ie){var qe,si,we=Lr(nt(wt)),Ue=jo(ie),di=we.length;return Ue<0||Ue>=di?_t?"":void 0:(qe=ti(we,Ue))<55296||qe>56319||Ue+1===di||(si=ti(we,Ue+1))<56320||si>57343?_t?Ye(we,Ue):qe:_t?vi(we,Ue,Ue+2):si-56320+(qe-55296<<10)+65536}},En=(Bi(!1),Bi(!0)),Zn=function(_t,wt,ie){return wt+(ie?En(_t,wt).length:1)},Qn=s.TypeError,Ln=function(_t,wt){var ie=_t.exec;if(Mt(ie)){var we=B(ie,_t,wt);return null!==we&&Je(we),we}if("RegExp"===lt(_t))return B(K,_t,wt);throw Qn("RegExp#exec called on incompatible receiver")};be("match",function(_t,wt,ie){return[function(Ue){var di=nt(this),qe=null==Ue?void 0:te(Ue,_t);return qe?B(qe,Ue,di):new RegExp(Ue)[_t](Lr(di))},function(we){var Ue=Je(this),di=Lr(we),qe=ie(wt,Ue,di);if(qe.done)return qe.value;if(!Ue.global)return Ln(Ue,di);var si=Ue.unicode;Ue.lastIndex=0;for(var zi,Li=[],xi=0;null!==(zi=Ln(Ue,di));){var Jn=Lr(zi[0]);Li[xi]=Jn,""===Jn&&(Ue.lastIndex=Zn(di,Yo(Ue.lastIndex),si)),xi++}return 0===xi?null:Li}]});var er=Array.isArray||function(wt){return"Array"==lt(wt)},rr=function(_t,wt,ie){var we=kt(wt);we in _t?fn.f(_t,we,vt(0,ie)):_t[we]=ie},wr=function(){},Yr=[],oo=ve("Reflect","construct"),ko=/^\s*(?:class|function)\b/,Ba=yt(ko.exec),Gs=!ko.exec(wr),To=function(_t){if(!Mt(_t))return!1;try{return oo(wr,Yr,_t),!0}catch(wt){return!1}},rs=!oo||u(function(){var _t;return To(To.call)||!To(Object)||!To(function(){_t=!0})||_t})?function(_t){if(!Mt(_t))return!1;switch(lo(_t)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}return Gs||!!Ba(ko,Tr(_t))}:To,Ms=_i("species"),cl=s.Array,Ws=function(_t,wt){return new(function(_t){var wt;return er(_t)&&(rs(wt=_t.constructor)&&(wt===cl||er(wt.prototype))||Nt(wt)&&null===(wt=wt[Ms]))&&(wt=void 0),void 0===wt?cl:wt}(_t))(0===wt?0:wt)},co=_i("species"),Ja=function(_t){return Bt>=51||!u(function(){var wt=[];return(wt.constructor={})[co]=function(){return{foo:1}},1!==wt[_t](Boolean).foo})},Dn=_i("isConcatSpreadable"),On=9007199254740991,or="Maximum allowed index exceeded",cr=s.TypeError,Er=Bt>=51||!u(function(){var _t=[];return _t[Dn]=!1,_t.concat()[0]!==_t}),es=Ja("concat"),Mr=function(_t){if(!Nt(_t))return!1;var wt=_t[Dn];return void 0!==wt?!!wt:er(_t)};yo({target:"Array",proto:!0,forced:!Er||!es},{concat:function(wt){var di,qe,si,Li,xi,ie=Fi(this),we=Ws(ie,0),Ue=0;for(di=-1,si=arguments.length;di<si;di++)if(Mr(xi=-1===di?ie:arguments[di])){if(Ue+(Li=Jr(xi))>On)throw cr(or);for(qe=0;qe<Li;qe++,Ue++)qe in xi&&rr(we,Ue,xi[qe])}else{if(Ue>=On)throw cr(or);rr(we,Ue++,xi)}return we.length=Ue,we}}),Rs||nr(Object.prototype,"toString",Rs?{}.toString:function(){return"[object "+lo(this)+"]"},{unsafe:!0});var yl=zn.PROPER,$a="toString",Ur=RegExp.prototype,ca=Ur[$a],_s=yt(aa);(u(function(){return"/a/b"!=ca.call({source:"a",flags:"b"})})||yl&&ca.name!=$a)&&nr(RegExp.prototype,$a,function(){var wt=Je(this),ie=Lr(wt.source),we=wt.flags;return"/"+ie+"/"+Lr(void 0===we&&ue(Ur,wt)&&!("flags"in Ur)?_s(wt):we)},{unsafe:!0});var va=Function.prototype,Al=va.apply,vs=va.call,is="object"==typeof Reflect&&Reflect.apply||(va.bind?vs.bind(Al):function(){return vs.apply(Al,arguments)}),ea=_i("match"),Za=function(_t){var wt;return Nt(_t)&&(void 0!==(wt=_t[ea])?!!wt:"RegExp"==lt(_t))},Ia=s.TypeError,Ma=_i("species"),Ol=function(_t,wt){var we,ie=Je(_t).constructor;return void 0===ie||null==(we=Je(ie)[Ma])?wt:function(_t){if(rs(_t))return _t;throw Ia(ze(_t)+" is not a constructor")}(we)},Gl=yt([].slice),Ha=us.UNSUPPORTED_Y,Qa=4294967295,mc=Math.min,Wl=[].push,ua=yt(/./.exec),Ua=yt(Wl),js=yt("".slice),Aa=!u(function(){var _t=/(?:)/,wt=_t.exec;_t.exec=function(){return wt.apply(this,arguments)};var ie="ab".split(_t);return 2!==ie.length||"a"!==ie[0]||"b"!==ie[1]});function Os(_t,wt){if(_t instanceof SVGElement){var ie=_t.getAttribute("class")||"";ie.match(wt)||_t.setAttribute("class","".concat(ie," ").concat(wt))}else void 0!==_t.classList?_(wt.split(" "),function(Ue){_t.classList.add(Ue)}):_t.className.match(wt)||(_t.className+=" ".concat(wt))}function Oa(_t,wt){var ie="";return _t.currentStyle?ie=_t.currentStyle[wt]:document.defaultView&&document.defaultView.getComputedStyle&&(ie=document.defaultView.getComputedStyle(_t,null).getPropertyValue(wt)),ie&&ie.toLowerCase?ie.toLowerCase():ie}function xl(_t){var wt=_t.element;if(this._options.scrollToElement){var ie=function(_t){var wt=window.getComputedStyle(_t),ie="absolute"===wt.position,we=/(auto|scroll)/;if("fixed"===wt.position)return document.body;for(var Ue=_t;Ue=Ue.parentElement;)if(wt=window.getComputedStyle(Ue),(!ie||"static"!==wt.position)&&we.test(wt.overflow+wt.overflowY+wt.overflowX))return Ue;return document.body}(wt);ie!==document.body&&(ie.scrollTop=wt.offsetTop-ie.offsetTop)}}function _c(){if(void 0!==window.innerWidth)return{width:window.innerWidth,height:window.innerHeight};var _t=document.documentElement;return{width:_t.clientWidth,height:_t.clientHeight}}function pt(_t,wt,ie){var Ue,we=wt.element;if("off"!==_t&&this._options.scrollToElement&&(Ue="tooltip"===_t?ie.getBoundingClientRect():we.getBoundingClientRect(),!function(_t){var wt=_t.getBoundingClientRect();return wt.top>=0&&wt.left>=0&&wt.bottom+80<=window.innerHeight&&wt.right<=window.innerWidth}(we))){var di=_c().height;Ue.bottom-(Ue.bottom-Ue.top)<0||we.clientHeight>di?window.scrollBy(0,Ue.top-(di/2-Ue.height/2)-this._options.scrollPadding):window.scrollBy(0,Ue.top-(di/2-Ue.height/2)+this._options.scrollPadding)}}function it(_t){_t.setAttribute("role","button"),_t.tabIndex=0}be("split",function(_t,wt,ie){var we;return we="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(Ue,di){var qe=Lr(nt(this)),si=void 0===di?Qa:di>>>0;if(0===si)return[];if(void 0===Ue)return[qe];if(!Za(Ue))return B(wt,qe,Ue,si);for(var Un,qn,$o,Li=[],zi=0,Jn=new RegExp(Ue.source,(Ue.ignoreCase?"i":"")+(Ue.multiline?"m":"")+(Ue.unicode?"u":"")+(Ue.sticky?"y":"")+"g");(Un=B(K,Jn,qe))&&!((qn=Jn.lastIndex)>zi&&(Ua(Li,js(qe,zi,Un.index)),Un.length>1&&Un.index<qe.length&&is(Wl,Li,Gl(Un,1)),$o=Un[0].length,zi=qn,Li.length>=si));)Jn.lastIndex===Un.index&&Jn.lastIndex++;return zi===qe.length?($o||!ua(Jn,""))&&Ua(Li,""):Ua(Li,js(qe,zi)),Li.length>si?Gl(Li,0,si):Li}:"0".split(void 0,0).length?function(Ue,di){return void 0===Ue&&0===di?[]:B(wt,this,Ue,di)}:wt,[function(di,qe){var si=nt(this),Li=null==di?void 0:te(di,_t);return Li?B(Li,di,si,qe):B(we,Lr(si),di,qe)},function(Ue,di){var qe=Je(this),si=Lr(Ue),Li=ie(we,qe,si,di,we!==wt);if(Li.done)return Li.value;var xi=Ol(qe,RegExp),zi=qe.unicode,Un=new xi(Ha?"^(?:"+qe.source+")":qe,(qe.ignoreCase?"i":"")+(qe.multiline?"m":"")+(qe.unicode?"u":"")+(Ha?"g":"y")),qn=void 0===di?Qa:di>>>0;if(0===qn)return[];if(0===si.length)return null===Ln(Un,si)?[si]:[];for(var $o=0,Do=0,Zr=[];Do<si.length;){Un.lastIndex=Ha?0:Do;var Go,ho=Ln(Un,Ha?js(si,Do):si);if(null===ho||(Go=mc(Yo(Un.lastIndex+(Ha?Do:0)),si.length))===$o)Do=Zn(si,Do,zi);else{if(Ua(Zr,js(si,$o,Do)),Zr.length===qn)return Zr;for(var po=1;po<=ho.length-1;po++)if(Ua(Zr,ho[po]),Zr.length===qn)return Zr;Do=$o=Go}}return Ua(Zr,js(si,$o)),Zr}]},!Aa,Ha);var q=Object.assign,Dt=Object.defineProperty,zt=yt([].concat),ge=!q||u(function(){if(y&&1!==q({b:1},q(Dt({},"a",{enumerable:!0,get:function(){Dt(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var _t={},wt={},ie=Symbol(),we="abcdefghijklmnopqrst";return _t[ie]=7,we.split("").forEach(function(Ue){wt[Ue]=Ue}),7!=q({},_t)[ie]||Ko(q({},wt)).join("")!=we})?function(wt,ie){for(var we=Fi(wt),Ue=arguments.length,di=1,qe=ga.f,si=Ht.f;Ue>di;)for(var Un,Li=Et(arguments[di++]),xi=qe?zt(Ko(Li),qe(Li)):Ko(Li),zi=xi.length,Jn=0;zi>Jn;)Un=xi[Jn++],(!y||B(si,Li,Un))&&(we[Un]=Li[Un]);return we}:q;function Ve(_t){var wt=_t.parentNode;return!(!wt||"HTML"===wt.nodeName)&&("fixed"===Oa(_t,"position")||Ve(wt))}function ii(_t,wt){var ie=document.body,we=document.documentElement,Ue=window.pageYOffset||we.scrollTop||ie.scrollTop,di=window.pageXOffset||we.scrollLeft||ie.scrollLeft;wt=wt||ie;var qe=_t.getBoundingClientRect(),si=wt.getBoundingClientRect(),Li=Oa(wt,"position"),xi={width:qe.width,height:qe.height};return"body"!==wt.tagName.toLowerCase()&&"relative"===Li||"sticky"===Li?Object.assign(xi,{top:qe.top-si.top,left:qe.left-si.left}):Ve(_t)?Object.assign(xi,{top:qe.top,left:qe.left}):Object.assign(xi,{top:qe.top+Ue,left:qe.left+di})}yo({target:"Object",stat:!0,forced:Object.assign!==ge},{assign:ge});var Ni=Math.floor,Tn=yt("".charAt),_r=yt("".replace),Wn=yt("".slice),$r=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,uo=/\$([$&'`]|\d{1,2})/g,Tl=function(_t,wt,ie,we,Ue,di){var qe=ie+_t.length,si=we.length,Li=uo;return void 0!==Ue&&(Ue=Fi(Ue),Li=$r),_r(di,Li,function(xi,zi){var Jn;switch(Tn(zi,0)){case"$":return"$";case"&":return _t;case"`":return Wn(wt,0,ie);case"'":return Wn(wt,qe);case"<":Jn=Ue[Wn(zi,1,-1)];break;default:var Un=+zi;if(0===Un)return xi;if(Un>si){var qn=Ni(Un/10);return 0===qn?xi:qn<=si?void 0===we[qn-1]?Tn(zi,1):we[qn-1]+Tn(zi,1):xi}Jn=we[Un-1]}return void 0===Jn?"":Jn})},Ys=_i("replace"),ba=Math.max,Uo=Math.min,qa=yt([].concat),Xs=yt([].push),ya=yt("".indexOf),Va=yt("".slice),Tu=function(_t){return void 0===_t?_t:String(_t)},Ks="$0"==="a".replace(/./,"$0"),ql=!!/./[Ys]&&""===/./[Ys]("a","$0"),hs=!u(function(){var _t=/./;return _t.exec=function(){var wt=[];return wt.groups={a:"7"},wt},"7"!=="".replace(_t,"$<a>")});function Lo(_t,wt){if(_t instanceof SVGElement){var ie=_t.getAttribute("class")||"";_t.setAttribute("class",ie.replace(wt,"").replace(/^\s+|\s+$/g,""))}else _t.className=_t.className.replace(wt,"").replace(/^\s+|\s+$/g,"")}function No(_t,wt){var ie="";if(_t.style.cssText&&(ie+=_t.style.cssText),"string"==typeof wt)ie+=wt;else for(var we in wt)ie+="".concat(we,":").concat(wt[we],";");_t.style.cssText=ie}function qr(_t){if(_t){if(!this._introItems[this._currentStep])return;var wt=this._introItems[this._currentStep],ie=ii(wt.element,this._targetElement),we=this._options.helperElementPadding;Ve(wt.element)?Os(_t,"introjs-fixedTooltip"):Lo(_t,"introjs-fixedTooltip"),"floating"===wt.position&&(we=0),No(_t,{width:"".concat(ie.width+we,"px"),height:"".concat(ie.height+we,"px"),top:"".concat(ie.top-we/2,"px"),left:"".concat(ie.left-we/2,"px")})}}be("replace",function(_t,wt,ie){var we=ql?"$":"$0";return[function(di,qe){var si=nt(this),Li=null==di?void 0:te(di,Ys);return Li?B(Li,di,si,qe):B(wt,Lr(si),di,qe)},function(Ue,di){var qe=Je(this),si=Lr(Ue);if("string"==typeof di&&-1===ya(di,we)&&-1===ya(di,"$<")){var Li=ie(wt,qe,si,di);if(Li.done)return Li.value}var xi=Mt(di);xi||(di=Lr(di));var zi=qe.global;if(zi){var Jn=qe.unicode;qe.lastIndex=0}for(var Un=[];;){var qn=Ln(qe,si);if(null===qn||(Xs(Un,qn),!zi))break;""===Lr(qn[0])&&(qe.lastIndex=Zn(si,Yo(qe.lastIndex),Jn))}for(var Do="",Zr=0,ho=0;ho<Un.length;ho++){for(var Go=Lr((qn=Un[ho])[0]),po=ba(Uo(jo(qn.index),si.length),0),oa=[],ys=1;ys<qn.length;ys++)Xs(oa,Tu(qn[ys]));var ds=qn.groups;if(xi){var gl=qa([Go],oa,po,si);void 0!==ds&&Xs(gl,ds);var ou=Lr(is(di,void 0,gl))}else ou=Tl(Go,si,po,oa,ds,di);po>=Zr&&(Do+=Va(si,Zr,po)+ou,Zr=po+Go.length)}return Do+Va(si,Zr)}]},!hs||!Ks||ql);var tc=_i("unscopables"),Cu=Array.prototype;null==Cu[tc]&&fn.f(Cu,tc,{configurable:!0,value:jn(null)});var Uc=ws.includes;yo({target:"Array",proto:!0},{includes:function(wt){return Uc(this,wt,arguments.length>1?arguments[1]:void 0)}}),function(_t){Cu[tc][_t]=!0}("includes");var Su=Ja("slice"),ec=_i("species"),vc=s.Array,sh=Math.max;yo({target:"Array",proto:!0,forced:!Su},{slice:function(wt,ie){var si,Li,xi,we=he(this),Ue=Jr(we),di=Zs(wt,Ue),qe=Zs(void 0===ie?Ue:ie,Ue);if(er(we)&&((rs(si=we.constructor)&&(si===vc||er(si.prototype))||Nt(si)&&null===(si=si[ec]))&&(si=void 0),si===vc||void 0===si))return Gl(we,di,qe);for(Li=new(void 0===si?vc:si)(sh(qe-di,0)),xi=0;di<qe;di++,xi++)di in we&&rr(Li,xi,we[di]);return Li.length=xi,Li}});var Gu=s.TypeError,ah=function(_t){if(Za(_t))throw Gu("The method doesn't accept regular expressions");return _t},zl=_i("match"),os=yt("".indexOf);yo({target:"String",proto:!0,forced:!function(_t){var wt=/./;try{"/./"[_t](wt)}catch(ie){try{return wt[zl]=!1,"/./"[_t](wt)}catch(we){}}return!1}("includes")},{includes:function(wt){return!!~os(Lr(nt(this)),Lr(ah(wt)),arguments.length>1?arguments[1]:void 0)}});var bc=function(_t,wt){var ie=[][_t];return!!ie&&u(function(){ie.call(null,wt||function(){throw 1},1)})},ic=yt([].join),kl=Et!=Object,Ea=bc("join",",");yo({target:"Array",proto:!0,forced:kl||!Ea},{join:function(wt){return ic(he(this),void 0===wt?",":wt)}});var ha=yt(yt.bind),xa=yt([].push),Ga=function(_t){var wt=1==_t,ie=2==_t,we=3==_t,Ue=4==_t,di=6==_t,qe=7==_t,si=5==_t||di;return function(Li,xi,zi,Jn){for(var po,oa,Un=Fi(Li),qn=Et(Un),$o=function(_t,wt){return Ie(_t),void 0===wt?_t:ha?ha(_t,wt):function(){return _t.apply(wt,arguments)}}(xi,zi),Do=Jr(qn),Zr=0,ho=Jn||Ws,Go=wt?ho(Li,Do):ie||qe?ho(Li,0):void 0;Do>Zr;Zr++)if((si||Zr in qn)&&(oa=$o(po=qn[Zr],Zr,Un),_t))if(wt)Go[Zr]=oa;else if(oa)switch(_t){case 3:return!0;case 5:return po;case 6:return Zr;case 2:xa(Go,po)}else switch(_t){case 4:return!1;case 7:xa(Go,po)}return di?-1:we||Ue?Ue:Go}},iu=[Ga(0),Ga(1),Ga(2),Ga(3),Ga(4),Ga(5),Ga(6),Ga(7)][2];function Vr(_t,wt,ie,we,Ue){return _t.left+wt+ie.width>we.width?(Ue.style.left="".concat(we.width-ie.width-_t.left,"px"),!1):(Ue.style.left="".concat(wt,"px"),!0)}function Ta(_t,wt,ie,we){return _t.left+_t.width-wt-ie.width<0?(we.style.left="".concat(-_t.left,"px"),!1):(we.style.right="".concat(wt,"px"),!0)}yo({target:"Array",proto:!0,forced:!Ja("filter")},{filter:function(wt){return iu(this,wt,arguments.length>1?arguments[1]:void 0)}});var nc=Ja("splice"),Nl=s.TypeError,bs=Math.max,tl=Math.min,rc=9007199254740991,Th="Maximum allowed length exceeded";function ka(_t,wt){_t.includes(wt)&&_t.splice(_t.indexOf(wt),1)}function oc(_t,wt,ie){var we=this._options.positionPrecedence.slice(),Ue=_c(),di=ii(wt).height+10,qe=ii(wt).width+20,si=_t.getBoundingClientRect(),Li="floating";si.bottom+di>Ue.height&&ka(we,"bottom"),si.top-di<0&&ka(we,"top"),si.right+qe>Ue.width&&ka(we,"right"),si.left-qe<0&&ka(we,"left");var zi,Jn,xi=-1!==(Jn=(zi=ie||"").indexOf("-"))?zi.substr(Jn):"";return ie&&(ie=ie.split("-")[0]),we.length&&(Li=we.includes(ie)?ie:we[0]),["top","bottom"].includes(Li)&&(Li+=function(_t,wt,ie,we){var di=wt/2,qe=Math.min(ie.width,window.screen.width),si=["-left-aligned","-middle-aligned","-right-aligned"];return qe-_t<wt&&ka(si,"-left-aligned"),(_t<di||qe-_t<di)&&ka(si,"-middle-aligned"),_t<wt&&ka(si,"-right-aligned"),si.length?si.includes(we)?we:si[0]:"-middle-aligned"}(si.left,qe,Ue,xi)),Li}function xs(_t,wt,ie,we){var di,qe,si,Li,xi;if(we=we||!1,wt.style.top=null,wt.style.right=null,wt.style.bottom=null,wt.style.left=null,wt.style.marginLeft=null,wt.style.marginTop=null,ie.style.display="inherit",this._introItems[this._currentStep])switch(wt.className=["introjs-tooltip","string"==typeof(di=this._introItems[this._currentStep]).tooltipClass?di.tooltipClass:this._options.tooltipClass].filter(Boolean).join(" "),wt.setAttribute("role","dialog"),"floating"!==(xi=this._introItems[this._currentStep].position)&&this._options.autoPosition&&(xi=oc.call(this,_t,wt,xi)),si=ii(_t),qe=ii(wt),Li=_c(),Os(wt,"introjs-".concat(xi)),xi){case"top-right-aligned":ie.className="introjs-arrow bottom-right";var Jn=0;Ta(si,Jn,qe,wt),wt.style.bottom="".concat(si.height+20,"px");break;case"top-middle-aligned":ie.className="introjs-arrow bottom-middle";var Un=si.width/2-qe.width/2;we&&(Un+=5),Ta(si,Un,qe,wt)&&(wt.style.right=null,Vr(si,Un,qe,Li,wt)),wt.style.bottom="".concat(si.height+20,"px");break;case"top-left-aligned":case"top":ie.className="introjs-arrow bottom",Vr(si,we?0:15,qe,Li,wt),wt.style.bottom="".concat(si.height+20,"px");break;case"right":wt.style.left="".concat(si.width+20,"px"),si.top+qe.height>Li.height?(ie.className="introjs-arrow left-bottom",wt.style.top="-".concat(qe.height-si.height-20,"px")):ie.className="introjs-arrow left";break;case"left":!we&&!0===this._options.showStepNumbers&&(wt.style.top="15px"),si.top+qe.height>Li.height?(wt.style.top="-".concat(qe.height-si.height-20,"px"),ie.className="introjs-arrow right-bottom"):ie.className="introjs-arrow right",wt.style.right="".concat(si.width+20,"px");break;case"floating":ie.style.display="none",wt.style.left="50%",wt.style.top="50%",wt.style.marginLeft="-".concat(qe.width/2,"px"),wt.style.marginTop="-".concat(qe.height/2,"px");break;case"bottom-right-aligned":ie.className="introjs-arrow top-right",Ta(si,Jn=0,qe,wt),wt.style.top="".concat(si.height+20,"px");break;case"bottom-middle-aligned":ie.className="introjs-arrow top-middle",Un=si.width/2-qe.width/2,we&&(Un+=5),Ta(si,Un,qe,wt)&&(wt.style.right=null,Vr(si,Un,qe,Li,wt)),wt.style.top="".concat(si.height+20,"px");break;default:ie.className="introjs-arrow top",Vr(si,0,qe,Li,wt),wt.style.top="".concat(si.height+20,"px")}}function hl(){_(document.querySelectorAll(".introjs-showElement"),function(wt){Lo(wt,/introjs-[a-zA-Z]+/g)})}function Ar(_t,wt){var ie=document.createElement(_t);wt=wt||{};var we=/^(?:role|data-|aria-)/;for(var Ue in wt){var di=wt[Ue];"style"===Ue?No(ie,di):Ue.match(we)?ie.setAttribute(Ue,di):ie[Ue]=di}return ie}function sc(_t,wt,ie){if(ie){var we=wt.style.opacity||"1";No(wt,{opacity:"0"}),window.setTimeout(function(){No(wt,{opacity:we})},10)}_t.appendChild(wt)}function ac(){return parseInt(this._currentStep+1,10)/this._introItems.length*100}function yc(){var _t=document.querySelector(".introjs-disableInteraction");null===_t&&(_t=Ar("div",{className:"introjs-disableInteraction"}),this._targetElement.appendChild(_t)),qr.call(this,_t)}function Vc(_t){var wt=this,ie=Ar("div",{className:"introjs-bullets"});!1===this._options.showBullets&&(ie.style.display="none");var we=Ar("ul");we.setAttribute("role","tablist");var Ue=function(){wt.goToStep(this.getAttribute("data-stepnumber"))};return _(this._introItems,function(di,qe){var si=di.step,Li=Ar("li"),xi=Ar("a");Li.setAttribute("role","presentation"),xi.setAttribute("role","tab"),xi.onclick=Ue,qe===_t.step-1&&(xi.className="active"),it(xi),xi.innerHTML="&nbsp;",xi.setAttribute("data-stepnumber",si),Li.appendChild(xi),we.appendChild(Li)}),ie.appendChild(we),ie}function na(_t,wt){if(this._options.showBullets){var ie=document.querySelector(".introjs-bullets");ie.parentNode.replaceChild(Vc.call(this,wt),ie)}}function Ec(_t,wt){this._options.showBullets&&(_t.querySelector(".introjs-bullets li > a.active").className="",_t.querySelector('.introjs-bullets li > a[data-stepnumber="'.concat(wt.step,'"]')).className="active")}function Po(){var _t=Ar("div");_t.className="introjs-progress",!1===this._options.showProgress&&(_t.style.display="none");var wt=Ar("div",{className:"introjs-progressbar"});return this._options.progressBarAdditionalClass&&(wt.className+=" "+this._options.progressBarAdditionalClass),wt.setAttribute("role","progress"),wt.setAttribute("aria-valuemin",0),wt.setAttribute("aria-valuemax",100),wt.setAttribute("aria-valuenow",ac.call(this)),wt.style.cssText="width:".concat(ac.call(this),"%;"),_t.appendChild(wt),_t}function Tc(_t){_t.querySelector(".introjs-progress .introjs-progressbar").style.cssText="width:".concat(ac.call(this),"%;"),_t.querySelector(".introjs-progress .introjs-progressbar").setAttribute("aria-valuenow",ac.call(this))}function lc(_t){var wt=this;void 0!==this._introChangeCallback&&this._introChangeCallback.call(this,_t.element);var qe,si,Li,ie=this,we=document.querySelector(".introjs-helperLayer"),Ue=document.querySelector(".introjs-tooltipReferenceLayer"),di="introjs-helperLayer";if("string"==typeof _t.highlightClass&&(di+=" ".concat(_t.highlightClass)),"string"==typeof this._options.highlightClass&&(di+=" ".concat(this._options.highlightClass)),null!==we&&null!==Ue){var xi=Ue.querySelector(".introjs-helperNumberLayer"),zi=Ue.querySelector(".introjs-tooltiptext"),Jn=Ue.querySelector(".introjs-tooltip-title"),Un=Ue.querySelector(".introjs-arrow"),qn=Ue.querySelector(".introjs-tooltip");Li=Ue.querySelector(".introjs-skipbutton"),si=Ue.querySelector(".introjs-prevbutton"),qe=Ue.querySelector(".introjs-nextbutton"),we.className=di,qn.style.opacity=0,qn.style.display="none",xl.call(ie,_t),qr.call(ie,we),qr.call(ie,Ue),hl(),ie._lastShowElementTimer&&window.clearTimeout(ie._lastShowElementTimer),ie._lastShowElementTimer=window.setTimeout(function(){null!==xi&&(xi.innerHTML="".concat(_t.step," of ").concat(wt._introItems.length)),zi.innerHTML=_t.intro,Jn.innerHTML=_t.title,qn.style.display="block",xs.call(ie,_t.element,qn,Un),Ec.call(ie,Ue,_t),Tc.call(ie,Ue),qn.style.opacity=1,(null!=qe&&/introjs-donebutton/gi.test(qe.className)||null!=qe)&&qe.focus(),pt.call(ie,_t.scrollTo,_t,zi)},350)}else{var $o=Ar("div",{className:di}),Do=Ar("div",{className:"introjs-tooltipReferenceLayer"}),Zr=Ar("div",{className:"introjs-arrow"}),ho=Ar("div",{className:"introjs-tooltip"}),Go=Ar("div",{className:"introjs-tooltiptext"}),po=Ar("div",{className:"introjs-tooltip-header"}),oa=Ar("h1",{className:"introjs-tooltip-title"}),ys=Ar("div");No($o,{"box-shadow":"0 0 1px 2px rgba(33, 33, 33, 0.8), rgba(33, 33, 33, ".concat(ie._options.overlayOpacity.toString(),") 0 0 0 5000px")}),xl.call(ie,_t),qr.call(ie,$o),qr.call(ie,Do),sc(this._targetElement,$o,!0),sc(this._targetElement,Do),Go.innerHTML=_t.intro,oa.innerHTML=_t.title,ys.className="introjs-tooltipbuttons",!1===this._options.showButtons&&(ys.style.display="none"),po.appendChild(oa),ho.appendChild(po),ho.appendChild(Go),ho.appendChild(Vc.call(this,_t)),ho.appendChild(Po.call(this));var ds=Ar("div");!0===this._options.showStepNumbers&&(ds.className="introjs-helperNumberLayer",ds.innerHTML="".concat(_t.step," of ").concat(this._introItems.length),ho.appendChild(ds)),ho.appendChild(Zr),Do.appendChild(ho),(qe=Ar("a")).onclick=function(){ie._introItems.length-1!==ie._currentStep?Wa.call(ie):/introjs-donebutton/gi.test(qe.className)&&("function"==typeof ie._introCompleteCallback&&ie._introCompleteCallback.call(ie,ie._currentStep,"done"),pa.call(ie,ie._targetElement))},it(qe),qe.innerHTML=this._options.nextLabel,(si=Ar("a")).onclick=function(){0!==ie._currentStep&&Js.call(ie)},it(si),si.innerHTML=this._options.prevLabel,it(Li=Ar("a",{className:"introjs-skipbutton"})),Li.innerHTML=this._options.skipLabel,Li.onclick=function(){ie._introItems.length-1===ie._currentStep&&"function"==typeof ie._introCompleteCallback&&ie._introCompleteCallback.call(ie,ie._currentStep,"skip"),"function"==typeof ie._introSkipCallback&&ie._introSkipCallback.call(ie),pa.call(ie,ie._targetElement)},po.appendChild(Li),this._introItems.length>1&&ys.appendChild(si),ys.appendChild(qe),ho.appendChild(ys),xs.call(ie,_t.element,ho,Zr),pt.call(this,_t.scrollTo,_t,ho)}var gl=ie._targetElement.querySelector(".introjs-disableInteraction");gl&&gl.parentNode.removeChild(gl),_t.disableInteraction&&yc.call(ie),0===this._currentStep&&this._introItems.length>1?(null!=qe&&(qe.className="".concat(this._options.buttonClass," introjs-nextbutton"),qe.innerHTML=this._options.nextLabel),!0===this._options.hidePrev?(null!=si&&(si.className="".concat(this._options.buttonClass," introjs-prevbutton introjs-hidden")),null!=qe&&Os(qe,"introjs-fullbutton")):null!=si&&(si.className="".concat(this._options.buttonClass," introjs-prevbutton introjs-disabled"))):this._introItems.length-1===this._currentStep||1===this._introItems.length?(null!=si&&(si.className="".concat(this._options.buttonClass," introjs-prevbutton")),!0===this._options.hideNext?(null!=qe&&(qe.className="".concat(this._options.buttonClass," introjs-nextbutton introjs-hidden")),null!=si&&Os(si,"introjs-fullbutton")):null!=qe&&(!0===this._options.nextToDone?(qe.innerHTML=this._options.doneLabel,Os(qe,"".concat(this._options.buttonClass," introjs-nextbutton introjs-donebutton"))):qe.className="".concat(this._options.buttonClass," introjs-nextbutton introjs-disabled"))):(null!=si&&(si.className="".concat(this._options.buttonClass," introjs-prevbutton")),null!=qe&&(qe.className="".concat(this._options.buttonClass," introjs-nextbutton"),qe.innerHTML=this._options.nextLabel)),null!=si&&si.setAttribute("role","button"),null!=qe&&qe.setAttribute("role","button"),null!=Li&&Li.setAttribute("role","button"),null!=qe&&qe.focus(),function(_t){var wt=_t.element;Os(wt,"introjs-showElement");var ie=Oa(wt,"position");"absolute"!==ie&&"relative"!==ie&&"sticky"!==ie&&"fixed"!==ie&&Os(wt,"introjs-relativePosition")}(_t),void 0!==this._introAfterChangeCallback&&this._introAfterChangeCallback.call(this,_t.element)}function nu(_t){this._currentStep=_t-2,void 0!==this._introItems&&Wa.call(this)}function cc(_t){this._currentStepNumber=_t,void 0!==this._introItems&&Wa.call(this)}function Wa(){var _t=this;this._direction="forward",void 0!==this._currentStepNumber&&_(this._introItems,function(we,Ue){we.step===_t._currentStepNumber&&(_t._currentStep=Ue-1,_t._currentStepNumber=void 0)}),void 0===this._currentStep?this._currentStep=0:++this._currentStep;var wt=this._introItems[this._currentStep],ie=!0;return void 0!==this._introBeforeChangeCallback&&(ie=this._introBeforeChangeCallback.call(this,wt&&wt.element)),!1===ie?(--this._currentStep,!1):this._introItems.length<=this._currentStep?("function"==typeof this._introCompleteCallback&&this._introCompleteCallback.call(this,this._currentStep,"end"),void pa.call(this,this._targetElement)):void lc.call(this,wt)}function Js(){if(this._direction="backward",0===this._currentStep)return!1;--this._currentStep;var _t=this._introItems[this._currentStep],wt=!0;if(void 0!==this._introBeforeChangeCallback&&(wt=this._introBeforeChangeCallback.call(this,_t&&_t.element)),!1===wt)return++this._currentStep,!1;lc.call(this,_t)}function uc(){return this._currentStep}function dl(_t){var wt=void 0===_t.code?_t.which:_t.code;if(null===wt&&(wt=null===_t.charCode?_t.keyCode:_t.charCode),"Escape"!==wt&&27!==wt||!0!==this._options.exitOnEsc){if("ArrowLeft"===wt||37===wt)Js.call(this);else if("ArrowRight"===wt||39===wt)Wa.call(this);else if("Enter"===wt||"NumpadEnter"===wt||13===wt){var ie=_t.target||_t.srcElement;ie&&ie.className.match("introjs-prevbutton")?Js.call(this):ie&&ie.className.match("introjs-skipbutton")?(this._introItems.length-1===this._currentStep&&"function"==typeof this._introCompleteCallback&&this._introCompleteCallback.call(this,this._currentStep,"skip"),pa.call(this,this._targetElement)):ie&&ie.getAttribute("data-stepnumber")?ie.click():Wa.call(this),_t.preventDefault?_t.preventDefault():_t.returnValue=!1}}else pa.call(this,this._targetElement)}function Jo(_t){if(null===_t||"object"!==$(_t)||void 0!==_t.nodeType)return _t;var wt={};for(var ie in _t)wt[ie]=void 0!==window.jQuery&&_t[ie]instanceof window.jQuery?_t[ie]:Jo(_t[ie]);return wt}function el(_t){var wt=document.querySelector(".introjs-hints");return wt?wt.querySelectorAll(_t):[]}function hc(_t){var wt=el('.introjs-hint[data-step="'.concat(_t,'"]'))[0];il.call(this),wt&&Os(wt,"introjs-hidehint"),void 0!==this._hintCloseCallback&&this._hintCloseCallback.call(this,_t)}function Cc(){var _t=this;_(el(".introjs-hint"),function(ie){hc.call(_t,ie.getAttribute("data-step"))})}function Gc(){var _t=this,wt=el(".introjs-hint");wt&&wt.length?_(wt,function(ie){ru.call(_t,ie.getAttribute("data-step"))}):Wc.call(this,this._targetElement)}function ru(_t){var wt=el('.introjs-hint[data-step="'.concat(_t,'"]'))[0];wt&&Lo(wt,/introjs-hidehint/g)}function ra(){var _t=this;_(el(".introjs-hint"),function(ie){Fl.call(_t,ie.getAttribute("data-step"))}),e.off(document,"click",il,this,!1),e.off(window,"resize",dc,this,!0),this._hintsAutoRefreshFunction&&e.off(window,"scroll",this._hintsAutoRefreshFunction,this,!0)}function Fl(_t){var wt=el('.introjs-hint[data-step="'.concat(_t,'"]'))[0];wt&&wt.parentNode.removeChild(wt)}function jl(){var _t=this,wt=this,ie=document.querySelector(".introjs-hints");null===ie&&(ie=Ar("div",{className:"introjs-hints"}));_(this._introItems,function(Ue,di){if(!document.querySelector('.introjs-hint[data-step="'.concat(di,'"]'))){var qe=Ar("a",{className:"introjs-hint"});it(qe),qe.onclick=function(di){return function(qe){var si=qe||window.event;si.stopPropagation&&si.stopPropagation(),null!==si.cancelBubble&&(si.cancelBubble=!0),da.call(wt,di)}}(di),Ue.hintAnimation||Os(qe,"introjs-hint-no-anim"),Ve(Ue.element)&&Os(qe,"introjs-fixedhint");var si=Ar("div",{className:"introjs-hint-dot"}),Li=Ar("div",{className:"introjs-hint-pulse"});qe.appendChild(si),qe.appendChild(Li),qe.setAttribute("data-step",di),Ue.targetElement=Ue.element,Ue.element=qe,Sc.call(_t,Ue.hintPosition,qe,Ue.targetElement),ie.appendChild(qe)}}),document.body.appendChild(ie),void 0!==this._hintsAddedCallback&&this._hintsAddedCallback.call(this),this._options.hintAutoRefreshInterval>=0&&(this._hintsAutoRefreshFunction=function(_t,wt){var we,ie=this;return function(){for(var Ue=arguments.length,di=new Array(Ue),qe=0;qe<Ue;qe++)di[qe]=arguments[qe];clearTimeout(we),we=setTimeout(function(){_t.apply(ie,di)},wt)}}(function(){return dc.call(_t)},this._options.hintAutoRefreshInterval),e.on(window,"scroll",this._hintsAutoRefreshFunction,this,!0))}function Sc(_t,wt,ie){var we=wt.style,Ue=ii.call(this,ie);switch(_t){default:case"top-left":we.left="".concat(Ue.left,"px"),we.top="".concat(Ue.top,"px");break;case"top-right":we.left="".concat(Ue.left+Ue.width-20,"px"),we.top="".concat(Ue.top,"px");break;case"bottom-left":we.left="".concat(Ue.left,"px"),we.top="".concat(Ue.top+Ue.height-20,"px");break;case"bottom-right":we.left="".concat(Ue.left+Ue.width-20,"px"),we.top="".concat(Ue.top+Ue.height-20,"px");break;case"middle-left":we.left="".concat(Ue.left,"px"),we.top="".concat(Ue.top+(Ue.height-20)/2,"px");break;case"middle-right":we.left="".concat(Ue.left+Ue.width-20,"px"),we.top="".concat(Ue.top+(Ue.height-20)/2,"px");break;case"middle-middle":we.left="".concat(Ue.left+(Ue.width-20)/2,"px"),we.top="".concat(Ue.top+(Ue.height-20)/2,"px");break;case"bottom-middle":we.left="".concat(Ue.left+(Ue.width-20)/2,"px"),we.top="".concat(Ue.top+Ue.height-20,"px");break;case"top-middle":we.left="".concat(Ue.left+(Ue.width-20)/2,"px"),we.top="".concat(Ue.top,"px")}}function da(_t){var wt=document.querySelector('.introjs-hint[data-step="'.concat(_t,'"]')),ie=this._introItems[_t];void 0!==this._hintClickCallback&&this._hintClickCallback.call(this,wt,ie,_t);var we=il.call(this);if(parseInt(we,10)!==_t){var Ue=Ar("div",{className:"introjs-tooltip"}),di=Ar("div"),qe=Ar("div"),si=Ar("div");Ue.onclick=function(zi){zi.stopPropagation?zi.stopPropagation():zi.cancelBubble=!0},di.className="introjs-tooltiptext";var Li=Ar("p");if(Li.innerHTML=ie.hint,di.appendChild(Li),this._options.hintShowButton){var xi=Ar("a");xi.className=this._options.buttonClass,xi.setAttribute("role","button"),xi.innerHTML=this._options.hintButtonLabel,xi.onclick=hc.bind(this,_t),di.appendChild(xi)}qe.className="introjs-arrow",Ue.appendChild(qe),Ue.appendChild(di),this._currentStep=wt.getAttribute("data-step"),si.className="introjs-tooltipReferenceLayer introjs-hintReference",si.setAttribute("data-step",wt.getAttribute("data-step")),qr.call(this,si),si.appendChild(Ue),document.body.appendChild(si),xs.call(this,wt,Ue,qe,!0)}}function il(){var _t=document.querySelector(".introjs-hintReference");if(_t){var wt=_t.getAttribute("data-step");return _t.parentNode.removeChild(_t),wt}}function Wc(_t){var wt=this;if(this._introItems=[],this._options.hints)_(this._options.hints,function(we){var Ue=Jo(we);"string"==typeof Ue.element&&(Ue.element=document.querySelector(Ue.element)),Ue.hintPosition=Ue.hintPosition||wt._options.hintPosition,Ue.hintAnimation=Ue.hintAnimation||wt._options.hintAnimation,null!==Ue.element&&wt._introItems.push(Ue)});else{var ie=_t.querySelectorAll("*[data-hint]");if(!ie||!ie.length)return!1;_(ie,function(we){var Ue=we.getAttribute("data-hintanimation");Ue=Ue?"true"===Ue:wt._options.hintAnimation,wt._introItems.push({element:we,hint:we.getAttribute("data-hint"),hintPosition:we.getAttribute("data-hintposition")||wt._options.hintPosition,hintAnimation:Ue,tooltipClass:we.getAttribute("data-tooltipclass"),position:we.getAttribute("data-position")||wt._options.tooltipPosition})})}jl.call(this),e.on(document,"click",il,this,!1),e.on(window,"resize",dc,this,!0)}function dc(){var _t=this;_(this._introItems,function(wt){var ie=wt.targetElement;void 0!==ie&&Sc.call(_t,wt.hintPosition,wt.element,ie)})}yo({target:"Array",proto:!0,forced:!nc},{splice:function(wt,ie){var si,Li,xi,zi,Jn,Un,we=Fi(this),Ue=Jr(we),di=Zs(wt,Ue),qe=arguments.length;if(0===qe?si=Li=0:1===qe?(si=0,Li=Ue-di):(si=qe-2,Li=tl(bs(jo(ie),0),Ue-di)),Ue+si-Li>rc)throw Nl(Th);for(xi=Ws(we,Li),zi=0;zi<Li;zi++)(Jn=di+zi)in we&&rr(xi,zi,we[Jn]);if(xi.length=Li,si<Li){for(zi=di;zi<Ue-Li;zi++)Un=zi+si,(Jn=zi+Li)in we?we[Un]=we[Jn]:delete we[Un];for(zi=Ue;zi>Ue-Li+si;zi--)delete we[zi-1]}else if(si>Li)for(zi=Ue-Li;zi>di;zi--)Un=zi+si-1,(Jn=zi+Li-1)in we?we[Un]=we[Jn]:delete we[Un];for(zi=0;zi<si;zi++)we[zi+di]=arguments[zi+2];return we.length=Ue-Li+si,xi}});var zc=Math.floor,wc=function(_t,wt){var ie=_t.length,we=zc(ie/2);return ie<8?Ca(_t,wt):so(_t,wc(Gl(_t,0,we),wt),wc(Gl(_t,we),wt),wt)},Ca=function(_t,wt){for(var Ue,di,ie=_t.length,we=1;we<ie;){for(di=we,Ue=_t[we];di&&wt(_t[di-1],Ue)>0;)_t[di]=_t[--di];di!==we++&&(_t[di]=Ue)}return _t},so=function(_t,wt,ie,we){for(var Ue=wt.length,di=ie.length,qe=0,si=0;qe<Ue||si<di;)_t[qe+si]=qe<Ue&&si<di?we(wt[qe],ie[si])<=0?wt[qe++]:ie[si++]:qe<Ue?wt[qe++]:ie[si++];return _t},Bl=wc,Yl=Be.match(/firefox\/(\d+)/i),Rc=!!Yl&&+Yl[1],wu=/MSIE|Trident/.test(Be),fl=Be.match(/AppleWebKit\/(\d+)\./),Ru=!!fl&&+fl[1],Xl=[],Du=yt(Xl.sort),pc=yt(Xl.push),jc=u(function(){Xl.sort(void 0)}),Cl=u(function(){Xl.sort(null)}),Sl=bc("sort"),wl=!u(function(){if(Bt)return Bt<70;if(!(Rc&&Rc>3)){if(wu)return!0;if(Ru)return Ru<603;var wt,ie,we,Ue,_t="";for(wt=65;wt<76;wt++){switch(ie=String.fromCharCode(wt),wt){case 66:case 69:case 70:case 72:we=3;break;case 68:case 71:we=4;break;default:we=2}for(Ue=0;Ue<47;Ue++)Xl.push({k:ie+Ue,v:we})}for(Xl.sort(function(di,qe){return qe.v-di.v}),Ue=0;Ue<Xl.length;Ue++)ie=Xl[Ue].k.charAt(0),_t.charAt(_t.length-1)!==ie&&(_t+=ie);return"DGBEFHACIJK"!==_t}});function za(_t){var wt=this,ie=_t.querySelectorAll("*[data-intro]"),we=[];if(this._options.steps)_(this._options.steps,function(xi){var zi=Jo(xi);if(zi.step=we.length+1,zi.title=zi.title||"","string"==typeof zi.element&&(zi.element=document.querySelector(zi.element)),null==zi.element){var Jn=document.querySelector(".introjsFloatingElement");null===Jn&&(Jn=Ar("div",{className:"introjsFloatingElement"}),document.body.appendChild(Jn)),zi.element=Jn,zi.position="floating"}zi.position=zi.position||wt._options.tooltipPosition,zi.scrollTo=zi.scrollTo||wt._options.scrollTo,void 0===zi.disableInteraction&&(zi.disableInteraction=wt._options.disableInteraction),null!==zi.element&&we.push(zi)});else{var di;if(ie.length<1)return[];_(ie,function(xi){if((!wt._options.group||xi.getAttribute("data-intro-group")===wt._options.group)&&"none"!==xi.style.display){var zi=parseInt(xi.getAttribute("data-step"),10);di=xi.hasAttribute("data-disable-interaction")?!!xi.getAttribute("data-disable-interaction"):wt._options.disableInteraction,zi>0&&(we[zi-1]={element:xi,title:xi.getAttribute("data-title")||"",intro:xi.getAttribute("data-intro"),step:parseInt(xi.getAttribute("data-step"),10),tooltipClass:xi.getAttribute("data-tooltipclass"),highlightClass:xi.getAttribute("data-highlightclass"),position:xi.getAttribute("data-position")||wt._options.tooltipPosition,scrollTo:xi.getAttribute("data-scrollto")||wt._options.scrollTo,disableInteraction:di})}});var qe=0;_(ie,function(xi){if((!wt._options.group||xi.getAttribute("data-intro-group")===wt._options.group)&&null===xi.getAttribute("data-step")){for(;void 0!==we[qe];)qe++;di=xi.hasAttribute("data-disable-interaction")?!!xi.getAttribute("data-disable-interaction"):wt._options.disableInteraction,we[qe]={element:xi,title:xi.getAttribute("data-title")||"",intro:xi.getAttribute("data-intro"),step:qe+1,tooltipClass:xi.getAttribute("data-tooltipclass"),highlightClass:xi.getAttribute("data-highlightclass"),position:xi.getAttribute("data-position")||wt._options.tooltipPosition,scrollTo:xi.getAttribute("data-scrollto")||wt._options.scrollTo,disableInteraction:di}}})}for(var si=[],Li=0;Li<we.length;Li++)we[Li]&&si.push(we[Li]);return(we=si).sort(function(xi,zi){return xi.step-zi.step}),we}function Sa(_t){var wt=document.querySelector(".introjs-tooltipReferenceLayer"),ie=document.querySelector(".introjs-helperLayer"),we=document.querySelector(".introjs-disableInteraction");if(qr.call(this,ie),qr.call(this,wt),qr.call(this,we),_t&&(this._introItems=za.call(this,this._targetElement),na.call(this,wt,this._introItems[this._currentStep]),Tc.call(this,wt)),null!=this._currentStep){var Ue=document.querySelector(".introjs-arrow"),di=document.querySelector(".introjs-tooltip");di&&Ue&&xs.call(this,this._introItems[this._currentStep].element,di,Ue)}return dc.call(this),this}function nl(){Sa.call(this)}function Kl(_t,wt){if(_t&&_t.parentElement){var ie=_t.parentElement;wt?(No(_t,{opacity:"0"}),window.setTimeout(function(){try{ie.removeChild(_t)}catch(we){}},500)):ie.removeChild(_t)}}function pa(_t,wt){var ie=!0;if(void 0!==this._introBeforeExitCallback&&(ie=this._introBeforeExitCallback.call(this)),wt||!1!==ie){var we=_t.querySelectorAll(".introjs-overlay");we&&we.length&&_(we,function(Li){return Kl(Li)}),Kl(_t.querySelector(".introjs-helperLayer"),!0),Kl(_t.querySelector(".introjs-tooltipReferenceLayer")),Kl(_t.querySelector(".introjs-disableInteraction")),Kl(document.querySelector(".introjsFloatingElement")),hl(),e.off(window,"keydown",dl,this,!0),e.off(window,"resize",nl,this,!0),void 0!==this._introExitCallback&&this._introExitCallback.call(this),this._currentStep=void 0}}function Mu(_t){var wt=this,ie=Ar("div",{className:"introjs-overlay"});return No(ie,{top:0,bottom:0,left:0,right:0,position:"fixed"}),_t.appendChild(ie),!0===this._options.exitOnOverlayClick&&(No(ie,{cursor:"pointer"}),ie.onclick=function(){pa.call(wt,_t)}),!0}function Hl(_t){void 0!==this._introStartCallback&&this._introStartCallback.call(this,_t);var wt=za.call(this,_t);return 0===wt.length||(this._introItems=wt,Mu.call(this,_t)&&(Wa.call(this),this._options.keyboardNavigation&&e.on(window,"keydown",dl,this,!0),e.on(window,"resize",nl,this,!0))),!1}function ss(_t){this._targetElement=_t,this._introItems=[],this._options={nextLabel:"Next",prevLabel:"Back",skipLabel:"\xd7",doneLabel:"Done",hidePrev:!1,hideNext:!1,nextToDone:!0,tooltipPosition:"bottom",tooltipClass:"",group:"",highlightClass:"",exitOnEsc:!0,exitOnOverlayClick:!0,showStepNumbers:!1,keyboardNavigation:!0,showButtons:!0,showBullets:!0,showProgress:!1,scrollToElement:!0,scrollTo:"element",scrollPadding:30,overlayOpacity:.5,autoPosition:!0,positionPrecedence:["bottom","top","right","left"],disableInteraction:!1,helperElementPadding:10,hintPosition:"top-middle",hintButtonLabel:"Got it",hintShowButton:!0,hintAutoRefreshInterval:10,hintAnimation:!0,buttonClass:"introjs-button",progressBarAdditionalClass:!1}}yo({target:"Array",proto:!0,forced:jc||!Cl||!Sl||!wl},{sort:function(wt){void 0!==wt&&Ie(wt);var ie=Fi(this);if(wl)return void 0===wt?Du(ie):Du(ie,wt);var di,qe,we=[],Ue=Jr(ie);for(qe=0;qe<Ue;qe++)qe in ie&&pc(we,ie[qe]);for(Bl(we,function(_t){return function(wt,ie){return void 0===ie?-1:void 0===wt?1:void 0!==_t?+_t(wt,ie)||0:Lr(wt)>Lr(ie)?1:-1}}(wt)),di=we.length,qe=0;qe<di;)ie[qe]=we[qe++];for(;qe<Ue;)delete ie[qe++];return ie}});var Dc=function _t(wt){var ie;if("object"===$(wt))ie=new ss(wt);else if("string"==typeof wt){var we=document.querySelector(wt);if(!we)throw new Error("There is no element with given selector.");ie=new ss(we)}else ie=new ss(document.body);return _t.instances[C(ie,"introjs-instance")]=ie,ie};return Dc.version="4.3.0",Dc.instances={},Dc.fn=ss.prototype={clone:function(){return new ss(this)},setOption:function(wt,ie){return this._options[wt]=ie,this},setOptions:function(wt){return this._options=function(_t,wt){var we,ie={};for(we in _t)ie[we]=_t[we];for(we in wt)ie[we]=wt[we];return ie}(this._options,wt),this},start:function(){return Hl.call(this,this._targetElement),this},goToStep:function(wt){return nu.call(this,wt),this},addStep:function(wt){return this._options.steps||(this._options.steps=[]),this._options.steps.push(wt),this},addSteps:function(wt){if(wt.length){for(var ie=0;ie<wt.length;ie++)this.addStep(wt[ie]);return this}},goToStepNumber:function(wt){return cc.call(this,wt),this},nextStep:function(){return Wa.call(this),this},previousStep:function(){return Js.call(this),this},currentStep:function(){return uc.call(this)},exit:function(wt){return pa.call(this,this._targetElement,wt),this},refresh:function(wt){return Sa.call(this,wt),this},onbeforechange:function(wt){if("function"!=typeof wt)throw new Error("Provided callback for onbeforechange was not a function");return this._introBeforeChangeCallback=wt,this},onchange:function(wt){if("function"!=typeof wt)throw new Error("Provided callback for onchange was not a function.");return this._introChangeCallback=wt,this},onafterchange:function(wt){if("function"!=typeof wt)throw new Error("Provided callback for onafterchange was not a function");return this._introAfterChangeCallback=wt,this},oncomplete:function(wt){if("function"!=typeof wt)throw new Error("Provided callback for oncomplete was not a function.");return this._introCompleteCallback=wt,this},onhintsadded:function(wt){if("function"!=typeof wt)throw new Error("Provided callback for onhintsadded was not a function.");return this._hintsAddedCallback=wt,this},onhintclick:function(wt){if("function"!=typeof wt)throw new Error("Provided callback for onhintclick was not a function.");return this._hintClickCallback=wt,this},onhintclose:function(wt){if("function"!=typeof wt)throw new Error("Provided callback for onhintclose was not a function.");return this._hintCloseCallback=wt,this},onstart:function(wt){if("function"!=typeof wt)throw new Error("Provided callback for onstart was not a function.");return this._introStartCallback=wt,this},onexit:function(wt){if("function"!=typeof wt)throw new Error("Provided callback for onexit was not a function.");return this._introExitCallback=wt,this},onskip:function(wt){if("function"!=typeof wt)throw new Error("Provided callback for onskip was not a function.");return this._introSkipCallback=wt,this},onbeforeexit:function(wt){if("function"!=typeof wt)throw new Error("Provided callback for onbeforeexit was not a function.");return this._introBeforeExitCallback=wt,this},addHints:function(){return Wc.call(this,this._targetElement),this},hideHint:function(wt){return hc.call(this,wt),this},hideHints:function(){return Cc.call(this),this},showHint:function(wt){return ru.call(this,wt),this},showHints:function(){return Gc.call(this),this},removeHints:function(){return ra.call(this),this},removeHint:function(wt){return Fl().call(this,wt),this},showHintDialog:function(wt){return da.call(this,wt),this}},Dc}()},61135:(U,$,m)=>{"use strict";m.d($,{X:()=>_});var C=m(77579);class _ extends C.x{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const n=super._subscribe(t);return!n.closed&&t.next(this._value),n}getValue(){const{hasError:t,thrownError:n,_value:r}=this;if(t)throw n;return this._throwIfClosed(),r}next(t){super.next(this._value=t)}}},68306:(U,$,m)=>{"use strict";m.d($,{y:()=>x});var C=m(70930),_=m(50727),e=m(48822),t=m(44671);var s=m(42416),u=m(30576),y=m(72806);let x=(()=>{class rt{constructor(Ht){Ht&&(this._subscribe=Ht)}lift(Ht){const vt=new rt;return vt.source=this,vt.operator=Ht,vt}subscribe(Ht,vt,xt){const Wt=function(rt){return rt&&rt instanceof C.Lv||function(rt){return rt&&(0,u.m)(rt.next)&&(0,u.m)(rt.error)&&(0,u.m)(rt.complete)}(rt)&&(0,_.Nn)(rt)}(Ht)?Ht:new C.Hp(Ht,vt,xt);return(0,y.x)(()=>{const{operator:Jt,source:Ct}=this;Wt.add(Jt?Jt.call(Wt,Ct):Ct?this._subscribe(Wt):this._trySubscribe(Wt))}),Wt}_trySubscribe(Ht){try{return this._subscribe(Ht)}catch(vt){Ht.error(vt)}}forEach(Ht,vt){return new(vt=B(vt))((xt,Wt)=>{let Jt;Jt=this.subscribe(Ct=>{try{Ht(Ct)}catch(yt){Wt(yt),null==Jt||Jt.unsubscribe()}},Wt,xt)})}_subscribe(Ht){var vt;return null===(vt=this.source)||void 0===vt?void 0:vt.subscribe(Ht)}[e.L](){return this}pipe(...Ht){return function(rt){return 0===rt.length?t.y:1===rt.length?rt[0]:function(Ht){return rt.reduce((vt,xt)=>xt(vt),Ht)}}(Ht)(this)}toPromise(Ht){return new(Ht=B(Ht))((vt,xt)=>{let Wt;this.subscribe(Jt=>Wt=Jt,Jt=>xt(Jt),()=>vt(Wt))})}}return rt.create=St=>new rt(St),rt})();function B(rt){var St;return null!==(St=null!=rt?rt:s.v.Promise)&&void 0!==St?St:Promise}},77579:(U,$,m)=>{"use strict";m.d($,{x:()=>s});var C=m(68306),_=m(50727);const t=(0,m(83888).d)(y=>function(){y(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var n=m(38737),r=m(72806);let s=(()=>{class y extends C.y{constructor(){super(),this.closed=!1,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(B){const Q=new u(this,this);return Q.operator=B,Q}_throwIfClosed(){if(this.closed)throw new t}next(B){(0,r.x)(()=>{if(this._throwIfClosed(),!this.isStopped){const Q=this.observers.slice();for(const at of Q)at.next(B)}})}error(B){(0,r.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=B;const{observers:Q}=this;for(;Q.length;)Q.shift().error(B)}})}complete(){(0,r.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:B}=this;for(;B.length;)B.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=null}get observed(){var B;return(null===(B=this.observers)||void 0===B?void 0:B.length)>0}_trySubscribe(B){return this._throwIfClosed(),super._trySubscribe(B)}_subscribe(B){return this._throwIfClosed(),this._checkFinalizedStatuses(B),this._innerSubscribe(B)}_innerSubscribe(B){const{hasError:Q,isStopped:at,observers:rt}=this;return Q||at?_.Lc:(rt.push(B),new _.w0(()=>(0,n.P)(rt,B)))}_checkFinalizedStatuses(B){const{hasError:Q,thrownError:at,isStopped:rt}=this;Q?B.error(at):rt&&B.complete()}asObservable(){const B=new C.y;return B.source=this,B}}return y.create=(x,B)=>new u(x,B),y})();class u extends s{constructor(x,B){super(),this.destination=x,this.source=B}next(x){var B,Q;null===(Q=null===(B=this.destination)||void 0===B?void 0:B.next)||void 0===Q||Q.call(B,x)}error(x){var B,Q;null===(Q=null===(B=this.destination)||void 0===B?void 0:B.error)||void 0===Q||Q.call(B,x)}complete(){var x,B;null===(B=null===(x=this.destination)||void 0===x?void 0:x.complete)||void 0===B||B.call(x)}_subscribe(x){var B,Q;return null!==(Q=null===(B=this.source)||void 0===B?void 0:B.subscribe(x))&&void 0!==Q?Q:_.Lc}}},70930:(U,$,m)=>{"use strict";m.d($,{Hp:()=>at,Lv:()=>Q});var C=m(30576),_=m(50727),e=m(42416),t=m(87849),n=m(25032);const r=y("C",void 0,void 0);function y(xt,Wt,Jt){return{kind:xt,value:Wt,error:Jt}}var x=m(43410),B=m(72806);class Q extends _.w0{constructor(Wt){super(),this.isStopped=!1,Wt?(this.destination=Wt,(0,_.Nn)(Wt)&&Wt.add(this)):this.destination=vt}static create(Wt,Jt,Ct){return new at(Wt,Jt,Ct)}next(Wt){this.isStopped?Ht(y("N",Wt,void 0),this):this._next(Wt)}error(Wt){this.isStopped?Ht(y("E",void 0,Wt),this):(this.isStopped=!0,this._error(Wt))}complete(){this.isStopped?Ht(r,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Wt){this.destination.next(Wt)}_error(Wt){try{this.destination.error(Wt)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}class at extends Q{constructor(Wt,Jt,Ct){let yt;if(super(),(0,C.m)(Wt))yt=Wt;else if(Wt){let ot;({next:yt,error:Jt,complete:Ct}=Wt),this&&e.v.useDeprecatedNextContext?(ot=Object.create(Wt),ot.unsubscribe=()=>this.unsubscribe()):ot=Wt,yt=null==yt?void 0:yt.bind(ot),Jt=null==Jt?void 0:Jt.bind(ot),Ct=null==Ct?void 0:Ct.bind(ot)}this.destination={next:yt?rt(yt):n.Z,error:rt(null!=Jt?Jt:St),complete:Ct?rt(Ct):n.Z}}}function rt(xt,Wt){return(...Jt)=>{try{xt(...Jt)}catch(Ct){e.v.useDeprecatedSynchronousErrorHandling?(0,B.O)(Ct):(0,t.h)(Ct)}}}function St(xt){throw xt}function Ht(xt,Wt){const{onStoppedNotification:Jt}=e.v;Jt&&x.z.setTimeout(()=>Jt(xt,Wt))}const vt={closed:!0,next:n.Z,error:St,complete:n.Z}},50727:(U,$,m)=>{"use strict";m.d($,{Lc:()=>r,w0:()=>n,Nn:()=>s});var C=m(30576);const e=(0,m(83888).d)(y=>function(B){y(this),this.message=B?`${B.length} errors occurred during unsubscription:\n${B.map((Q,at)=>`${at+1}) ${Q.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=B});var t=m(38737);class n{constructor(x){this.initialTeardown=x,this.closed=!1,this._parentage=null,this._teardowns=null}unsubscribe(){let x;if(!this.closed){this.closed=!0;const{_parentage:B}=this;if(B)if(this._parentage=null,Array.isArray(B))for(const rt of B)rt.remove(this);else B.remove(this);const{initialTeardown:Q}=this;if((0,C.m)(Q))try{Q()}catch(rt){x=rt instanceof e?rt.errors:[rt]}const{_teardowns:at}=this;if(at){this._teardowns=null;for(const rt of at)try{u(rt)}catch(St){x=null!=x?x:[],St instanceof e?x=[...x,...St.errors]:x.push(St)}}if(x)throw new e(x)}}add(x){var B;if(x&&x!==this)if(this.closed)u(x);else{if(x instanceof n){if(x.closed||x._hasParent(this))return;x._addParent(this)}(this._teardowns=null!==(B=this._teardowns)&&void 0!==B?B:[]).push(x)}}_hasParent(x){const{_parentage:B}=this;return B===x||Array.isArray(B)&&B.includes(x)}_addParent(x){const{_parentage:B}=this;this._parentage=Array.isArray(B)?(B.push(x),B):B?[B,x]:x}_removeParent(x){const{_parentage:B}=this;B===x?this._parentage=null:Array.isArray(B)&&(0,t.P)(B,x)}remove(x){const{_teardowns:B}=this;B&&(0,t.P)(B,x),x instanceof n&&x._removeParent(this)}}n.EMPTY=(()=>{const y=new n;return y.closed=!0,y})();const r=n.EMPTY;function s(y){return y instanceof n||y&&"closed"in y&&(0,C.m)(y.remove)&&(0,C.m)(y.add)&&(0,C.m)(y.unsubscribe)}function u(y){(0,C.m)(y)?y():y.unsubscribe()}},42416:(U,$,m)=>{"use strict";m.d($,{v:()=>C});const C={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},39841:(U,$,m)=>{"use strict";m.d($,{a:()=>x});var C=m(68306),_=m(54742),e=m(32076),t=m(44671),n=m(83268),r=m(63269),s=m(31810),u=m(25403),y=m(39672);function x(...at){const rt=(0,r.yG)(at),St=(0,r.jO)(at),{args:Ht,keys:vt}=(0,_.D)(at);if(0===Ht.length)return(0,e.D)([],rt);const xt=new C.y(function(at,rt,St=t.y){return Ht=>{Q(rt,()=>{const{length:vt}=at,xt=new Array(vt);let Wt=vt,Jt=vt;for(let Ct=0;Ct<vt;Ct++)Q(rt,()=>{const yt=(0,e.D)(at[Ct],rt);let ot=!1;yt.subscribe(new u.Q(Ht,mt=>{xt[Ct]=mt,ot||(ot=!0,Jt--),Jt||Ht.next(St(xt.slice()))},()=>{--Wt||Ht.complete()}))},Ht)},Ht)}}(Ht,rt,vt?Wt=>(0,s.n)(vt,Wt):t.y));return St?xt.pipe((0,n.Z)(St)):xt}function Q(at,rt,St){at?(0,y.f)(St,at,rt):rt()}},97272:(U,$,m)=>{"use strict";m.d($,{z:()=>n});var C=m(8189),e=m(63269),t=m(32076);function n(...r){return(0,C.J)(1)((0,t.D)(r,(0,e.yG)(r)))}},49770:(U,$,m)=>{"use strict";m.d($,{P:()=>e});var C=m(68306),_=m(38421);function e(t){return new C.y(n=>{(0,_.Xf)(t()).subscribe(n)})}},60515:(U,$,m)=>{"use strict";m.d($,{E:()=>_});const _=new(m(68306).y)(n=>n.complete())},4128:(U,$,m)=>{"use strict";m.d($,{D:()=>u});var C=m(68306),_=m(54742),e=m(38421),t=m(63269),n=m(25403),r=m(83268),s=m(31810);function u(...y){const x=(0,t.jO)(y),{args:B,keys:Q}=(0,_.D)(y),at=new C.y(rt=>{const{length:St}=B;if(!St)return void rt.complete();const Ht=new Array(St);let vt=St,xt=St;for(let Wt=0;Wt<St;Wt++){let Jt=!1;(0,e.Xf)(B[Wt]).subscribe(new n.Q(rt,Ct=>{Jt||(Jt=!0,xt--),Ht[Wt]=Ct},()=>vt--,void 0,()=>{(!vt||!Jt)&&(xt||rt.next(Q?(0,s.n)(Q,Ht):Ht),rt.complete())}))}});return x?at.pipe((0,r.Z)(x)):at}},32076:(U,$,m)=>{"use strict";m.d($,{D:()=>mt});var C=m(38421),_=m(39672),e=m(54482),t=m(25403);function n(lt,Ut=0){return(0,e.e)((Rt,Et)=>{Rt.subscribe(new t.Q(Et,ht=>(0,_.f)(Et,lt,()=>Et.next(ht),Ut),()=>(0,_.f)(Et,lt,()=>Et.complete(),Ut),ht=>(0,_.f)(Et,lt,()=>Et.error(ht),Ut)))})}function r(lt,Ut=0){return(0,e.e)((Rt,Et)=>{Et.add(lt.schedule(()=>Rt.subscribe(Et),Ut))})}var y=m(68306),B=m(2202),Q=m(30576);function rt(lt,Ut){if(!lt)throw new Error("Iterable cannot be null");return new y.y(Rt=>{(0,_.f)(Rt,Ut,()=>{const Et=lt[Symbol.asyncIterator]();(0,_.f)(Rt,Ut,()=>{Et.next().then(ht=>{ht.done?Rt.complete():Rt.next(ht.value)})},0,!0)})})}var St=m(93670),Ht=m(28239),vt=m(81144),xt=m(26495),Wt=m(12206),Jt=m(44532),Ct=m(53260);function mt(lt,Ut){return Ut?function(lt,Ut){if(null!=lt){if((0,St.c)(lt))return function(lt,Ut){return(0,C.Xf)(lt).pipe(r(Ut),n(Ut))}(lt,Ut);if((0,vt.z)(lt))return function(lt,Ut){return new y.y(Rt=>{let Et=0;return Ut.schedule(function(){Et===lt.length?Rt.complete():(Rt.next(lt[Et++]),Rt.closed||this.schedule())})})}(lt,Ut);if((0,Ht.t)(lt))return function(lt,Ut){return(0,C.Xf)(lt).pipe(r(Ut),n(Ut))}(lt,Ut);if((0,Wt.D)(lt))return rt(lt,Ut);if((0,xt.T)(lt))return function(lt,Ut){return new y.y(Rt=>{let Et;return(0,_.f)(Rt,Ut,()=>{Et=lt[B.h](),(0,_.f)(Rt,Ut,()=>{let ht,nt;try{({value:ht,done:nt}=Et.next())}catch(he){return void Rt.error(he)}nt?Rt.complete():Rt.next(ht)},0,!0)}),()=>(0,Q.m)(null==Et?void 0:Et.return)&&Et.return()})}(lt,Ut);if((0,Ct.L)(lt))return function(lt,Ut){return rt((0,Ct.Q)(lt),Ut)}(lt,Ut)}throw(0,Jt.z)(lt)}(lt,Ut):(0,C.Xf)(lt)}},54968:(U,$,m)=>{"use strict";m.d($,{R:()=>x});var C=m(38421),_=m(68306),e=m(95577),t=m(81144),n=m(30576),r=m(83268);const s=["addListener","removeListener"],u=["addEventListener","removeEventListener"],y=["on","off"];function x(St,Ht,vt,xt){if((0,n.m)(vt)&&(xt=vt,vt=void 0),xt)return x(St,Ht,vt).pipe((0,r.Z)(xt));const[Wt,Jt]=function(St){return(0,n.m)(St.addEventListener)&&(0,n.m)(St.removeEventListener)}(St)?u.map(Ct=>yt=>St[Ct](Ht,yt,vt)):function(St){return(0,n.m)(St.addListener)&&(0,n.m)(St.removeListener)}(St)?s.map(B(St,Ht)):function(St){return(0,n.m)(St.on)&&(0,n.m)(St.off)}(St)?y.map(B(St,Ht)):[];if(!Wt&&(0,t.z)(St))return(0,e.z)(Ct=>x(Ct,Ht,vt))((0,C.Xf)(St));if(!Wt)throw new TypeError("Invalid event target");return new _.y(Ct=>{const yt=(...ot)=>Ct.next(1<ot.length?ot:ot[0]);return Wt(yt),()=>Jt(yt)})}function B(St,Ht){return vt=>xt=>St[vt](Ht,xt)}},38421:(U,$,m)=>{"use strict";m.d($,{Xf:()=>at});var C=m(35987),_=m(81144),e=m(28239),t=m(68306),n=m(93670),r=m(12206),s=m(44532),u=m(26495),y=m(53260),x=m(30576),B=m(87849),Q=m(48822);function at(Ct){if(Ct instanceof t.y)return Ct;if(null!=Ct){if((0,n.c)(Ct))return function(Ct){return new t.y(yt=>{const ot=Ct[Q.L]();if((0,x.m)(ot.subscribe))return ot.subscribe(yt);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Ct);if((0,_.z)(Ct))return function(Ct){return new t.y(yt=>{for(let ot=0;ot<Ct.length&&!yt.closed;ot++)yt.next(Ct[ot]);yt.complete()})}(Ct);if((0,e.t)(Ct))return function(Ct){return new t.y(yt=>{Ct.then(ot=>{yt.closed||(yt.next(ot),yt.complete())},ot=>yt.error(ot)).then(null,B.h)})}(Ct);if((0,r.D)(Ct))return xt(Ct);if((0,u.T)(Ct))return function(Ct){return new t.y(yt=>{for(const ot of Ct)if(yt.next(ot),yt.closed)return;yt.complete()})}(Ct);if((0,y.L)(Ct))return function(Ct){return xt((0,y.Q)(Ct))}(Ct)}throw(0,s.z)(Ct)}function xt(Ct){return new t.y(yt=>{(function(Ct,yt){var ot,mt,lt,Ut;return(0,C.mG)(this,void 0,void 0,function*(){try{for(ot=(0,C.KL)(Ct);!(mt=yield ot.next()).done;)if(yt.next(mt.value),yt.closed)return}catch(Rt){lt={error:Rt}}finally{try{mt&&!mt.done&&(Ut=ot.return)&&(yield Ut.call(ot))}finally{if(lt)throw lt.error}}yt.complete()})})(Ct,yt).catch(ot=>yt.error(ot))})}},56451:(U,$,m)=>{"use strict";m.d($,{T:()=>r});var C=m(8189),_=m(38421),e=m(60515),t=m(63269),n=m(32076);function r(...s){const u=(0,t.yG)(s),y=(0,t._6)(s,1/0),x=s;return x.length?1===x.length?(0,_.Xf)(x[0]):(0,C.J)(y)((0,n.D)(x,u)):e.E}},39646:(U,$,m)=>{"use strict";m.d($,{of:()=>e});var C=m(63269),_=m(32076);function e(...t){const n=(0,C.yG)(t);return(0,_.D)(t,n)}},5963:(U,$,m)=>{"use strict";m.d($,{H:()=>n});var C=m(68306),_=m(34986),e=m(93532);function n(r=0,s,u=_.P){let y=-1;return null!=s&&((0,e.K)(s)?u=s:y=s),new C.y(x=>{let B=function(r){return r instanceof Date&&!isNaN(r)}(r)?+r-u.now():r;B<0&&(B=0);let Q=0;return u.schedule(function(){x.closed||(x.next(Q++),0<=y?this.schedule(void 0,y):x.complete())},B)})}},25403:(U,$,m)=>{"use strict";m.d($,{Q:()=>_});var C=m(70930);class _ extends C.Lv{constructor(t,n,r,s,u){super(t),this.onFinalize=u,this._next=n?function(y){try{n(y)}catch(x){t.error(x)}}:super._next,this._error=s?function(y){try{s(y)}catch(x){t.error(x)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(y){t.error(y)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var t;const{closed:n}=this;super.unsubscribe(),!n&&(null===(t=this.onFinalize)||void 0===t||t.call(this))}}},70262:(U,$,m)=>{"use strict";m.d($,{K:()=>t});var C=m(38421),_=m(25403),e=m(54482);function t(n){return(0,e.e)((r,s)=>{let x,u=null,y=!1;u=r.subscribe(new _.Q(s,void 0,void 0,B=>{x=(0,C.Xf)(n(B,t(n)(r))),u?(u.unsubscribe(),u=null,x.subscribe(s)):y=!0})),y&&(u.unsubscribe(),u=null,x.subscribe(s))})}},24351:(U,$,m)=>{"use strict";m.d($,{b:()=>e});var C=m(95577),_=m(30576);function e(t,n){return(0,_.m)(n)?(0,C.z)(t,n,1):(0,C.z)(t,1)}},78372:(U,$,m)=>{"use strict";m.d($,{b:()=>t});var C=m(34986),_=m(54482),e=m(25403);function t(n,r=C.z){return(0,_.e)((s,u)=>{let y=null,x=null,B=null;const Q=()=>{if(y){y.unsubscribe(),y=null;const rt=x;x=null,u.next(rt)}};function at(){const rt=B+n,St=r.now();if(St<rt)return y=this.schedule(void 0,rt-St),void u.add(y);Q()}s.subscribe(new e.Q(u,rt=>{x=rt,B=r.now(),y||(y=r.schedule(at,n),u.add(y))},()=>{Q(),u.complete()},void 0,()=>{x=y=null}))})}},91005:(U,$,m)=>{"use strict";m.d($,{g:()=>Q});var C=m(34986),_=m(97272),e=m(95698),t=m(54482),n=m(25403),r=m(25032),u=m(69718),y=m(95577);function x(at,rt){return rt?St=>(0,_.z)(rt.pipe((0,e.q)(1),(0,t.e)((at,rt)=>{at.subscribe(new n.Q(rt,r.Z))})),St.pipe(x(at))):(0,y.z)((St,Ht)=>at(St,Ht).pipe((0,e.q)(1),(0,u.h)(St)))}var B=m(5963);function Q(at,rt=C.z){const St=(0,B.H)(at,rt);return x(()=>St)}},71884:(U,$,m)=>{"use strict";m.d($,{x:()=>t});var C=m(44671),_=m(54482),e=m(25403);function t(r,s=C.y){return r=null!=r?r:n,(0,_.e)((u,y)=>{let x,B=!0;u.subscribe(new e.Q(y,Q=>{const at=s(Q);(B||!r(x,at))&&(B=!1,x=at,y.next(Q))}))})}function n(r,s){return r===s}},39300:(U,$,m)=>{"use strict";m.d($,{h:()=>e});var C=m(54482),_=m(25403);function e(t,n){return(0,C.e)((r,s)=>{let u=0;r.subscribe(new _.Q(s,y=>t.call(n,y,u++)&&s.next(y)))})}},28746:(U,$,m)=>{"use strict";m.d($,{x:()=>_});var C=m(54482);function _(e){return(0,C.e)((t,n)=>{try{t.subscribe(n)}finally{n.add(e)}})}},54004:(U,$,m)=>{"use strict";m.d($,{U:()=>e});var C=m(54482),_=m(25403);function e(t,n){return(0,C.e)((r,s)=>{let u=0;r.subscribe(new _.Q(s,y=>{s.next(t.call(n,y,u++))}))})}},69718:(U,$,m)=>{"use strict";m.d($,{h:()=>_});var C=m(54004);function _(e){return(0,C.U)(()=>e)}},8189:(U,$,m)=>{"use strict";m.d($,{J:()=>e});var C=m(95577),_=m(44671);function e(t=1/0){return(0,C.z)(_.y,t)}},95577:(U,$,m)=>{"use strict";m.d($,{z:()=>u});var C=m(54004),_=m(38421),e=m(54482),n=(m(39672),m(25403)),s=m(30576);function u(y,x,B=1/0){return(0,s.m)(x)?u((Q,at)=>(0,C.U)((rt,St)=>x(Q,rt,at,St))((0,_.Xf)(y(Q,at))),B):("number"==typeof x&&(B=x),(0,e.e)((Q,at)=>function(y,x,B,Q,at,rt,St,Ht){const vt=[];let xt=0,Wt=0,Jt=!1;const Ct=()=>{Jt&&!vt.length&&!xt&&x.complete()},yt=mt=>xt<Q?ot(mt):vt.push(mt),ot=mt=>{xt++;let lt=!1;(0,_.Xf)(B(mt,Wt++)).subscribe(new n.Q(x,Ut=>{x.next(Ut)},()=>{lt=!0},void 0,()=>{if(lt)try{for(xt--;vt.length&&xt<Q;){const Ut=vt.shift();ot(Ut)}Ct()}catch(Ut){x.error(Ut)}}))};return y.subscribe(new n.Q(x,yt,()=>{Jt=!0,Ct()})),()=>{}}(Q,at,y,B)))}},13099:(U,$,m)=>{"use strict";m.d($,{B:()=>r});var C=m(32076),_=m(95698),e=m(77579),t=m(70930),n=m(54482);function r(u={}){const{connector:y=(()=>new e.x),resetOnError:x=!0,resetOnComplete:B=!0,resetOnRefCountZero:Q=!0}=u;return at=>{let rt=null,St=null,Ht=null,vt=0,xt=!1,Wt=!1;const Jt=()=>{null==St||St.unsubscribe(),St=null},Ct=()=>{Jt(),rt=Ht=null,xt=Wt=!1},yt=()=>{const ot=rt;Ct(),null==ot||ot.unsubscribe()};return(0,n.e)((ot,mt)=>{vt++,!Wt&&!xt&&Jt();const lt=Ht=null!=Ht?Ht:y();mt.add(()=>{vt--,0===vt&&!Wt&&!xt&&(St=s(yt,Q))}),lt.subscribe(mt),rt||(rt=new t.Hp({next:Ut=>lt.next(Ut),error:Ut=>{Wt=!0,Jt(),St=s(Ct,x,Ut),lt.error(Ut)},complete:()=>{xt=!0,Jt(),St=s(Ct,B),lt.complete()}}),(0,C.D)(ot).subscribe(rt))})(at)}}function s(u,y,...x){return!0===y?(u(),null):!1===y?null:y(...x).pipe((0,_.q)(1)).subscribe(()=>u())}},35684:(U,$,m)=>{"use strict";m.d($,{T:()=>_});var C=m(39300);function _(e){return(0,C.h)((t,n)=>e<=n)}},68675:(U,$,m)=>{"use strict";m.d($,{O:()=>t});var C=m(97272),_=m(63269),e=m(54482);function t(...n){const r=(0,_.yG)(n);return(0,e.e)((s,u)=>{(r?(0,C.z)(n,s,r):(0,C.z)(n,s)).subscribe(u)})}},63900:(U,$,m)=>{"use strict";m.d($,{w:()=>t});var C=m(38421),_=m(54482),e=m(25403);function t(n,r){return(0,_.e)((s,u)=>{let y=null,x=0,B=!1;const Q=()=>B&&!y&&u.complete();s.subscribe(new e.Q(u,at=>{null==y||y.unsubscribe();let rt=0;const St=x++;(0,C.Xf)(n(at,St)).subscribe(y=new e.Q(u,Ht=>u.next(r?r(at,Ht,St,rt++):Ht),()=>{y=null,Q()}))},()=>{B=!0,Q()}))})}},95698:(U,$,m)=>{"use strict";m.d($,{q:()=>t});var C=m(60515),_=m(54482),e=m(25403);function t(n){return n<=0?()=>C.E:(0,_.e)((r,s)=>{let u=0;r.subscribe(new e.Q(s,y=>{++u<=n&&(s.next(y),n<=u&&s.complete())}))})}},82722:(U,$,m)=>{"use strict";m.d($,{R:()=>n});var C=m(54482),_=m(25403),e=m(38421),t=m(25032);function n(r){return(0,C.e)((s,u)=>{(0,e.Xf)(r).subscribe(new _.Q(u,()=>u.complete(),t.Z)),!u.closed&&s.subscribe(u)})}},18505:(U,$,m)=>{"use strict";m.d($,{b:()=>n});var C=m(30576),_=m(54482),e=m(25403),t=m(44671);function n(r,s,u){const y=(0,C.m)(r)||s||u?{next:r,error:s,complete:u}:r;return y?(0,_.e)((x,B)=>{var Q;null===(Q=y.subscribe)||void 0===Q||Q.call(y);let at=!0;x.subscribe(new e.Q(B,rt=>{var St;null===(St=y.next)||void 0===St||St.call(y,rt),B.next(rt)},()=>{var rt;at=!1,null===(rt=y.complete)||void 0===rt||rt.call(y),B.complete()},rt=>{var St;at=!1,null===(St=y.error)||void 0===St||St.call(y,rt),B.error(rt)},()=>{var rt,St;at&&(null===(rt=y.unsubscribe)||void 0===rt||rt.call(y)),null===(St=y.finalize)||void 0===St||St.call(y)}))}):t.y}},84408:(U,$,m)=>{"use strict";m.d($,{o:()=>n});var C=m(50727);class _ extends C.w0{constructor(s,u){super()}schedule(s,u=0){return this}}const e={setInterval(...r){const{delegate:s}=e;return((null==s?void 0:s.setInterval)||setInterval)(...r)},clearInterval(r){const{delegate:s}=e;return((null==s?void 0:s.clearInterval)||clearInterval)(r)},delegate:void 0};var t=m(38737);class n extends _{constructor(s,u){super(s,u),this.scheduler=s,this.work=u,this.pending=!1}schedule(s,u=0){if(this.closed)return this;this.state=s;const y=this.id,x=this.scheduler;return null!=y&&(this.id=this.recycleAsyncId(x,y,u)),this.pending=!0,this.delay=u,this.id=this.id||this.requestAsyncId(x,this.id,u),this}requestAsyncId(s,u,y=0){return e.setInterval(s.flush.bind(s,this),y)}recycleAsyncId(s,u,y=0){if(null!=y&&this.delay===y&&!1===this.pending)return u;e.clearInterval(u)}execute(s,u){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const y=this._execute(s,u);if(y)return y;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(s,u){let x,y=!1;try{this.work(s)}catch(B){y=!0,x=B||new Error("Scheduled action threw falsy error")}if(y)return this.unsubscribe(),x}unsubscribe(){if(!this.closed){const{id:s,scheduler:u}=this,{actions:y}=u;this.work=this.state=this.scheduler=null,this.pending=!1,(0,t.P)(y,this),null!=s&&(this.id=this.recycleAsyncId(u,s,null)),this.delay=null,super.unsubscribe()}}}},97565:(U,$,m)=>{"use strict";m.d($,{v:()=>e});var C=m(26063);class _{constructor(n,r=_.now){this.schedulerActionCtor=n,this.now=r}schedule(n,r=0,s){return new this.schedulerActionCtor(this,n).schedule(s,r)}}_.now=C.l.now;class e extends _{constructor(n,r=_.now){super(n,r),this.actions=[],this._active=!1,this._scheduled=void 0}flush(n){const{actions:r}=this;if(this._active)return void r.push(n);let s;this._active=!0;do{if(s=n.execute(n.state,n.delay))break}while(n=r.shift());if(this._active=!1,s){for(;n=r.shift();)n.unsubscribe();throw s}}}},53101:(U,$,m)=>{"use strict";m.d($,{E:()=>rt});var C=m(84408);let e,_=1;const t={};function n(Ht){return Ht in t&&(delete t[Ht],!0)}const r={setImmediate(Ht){const vt=_++;return t[vt]=!0,e||(e=Promise.resolve()),e.then(()=>n(vt)&&Ht()),vt},clearImmediate(Ht){n(Ht)}},{setImmediate:u,clearImmediate:y}=r,x={setImmediate(...Ht){const{delegate:vt}=x;return((null==vt?void 0:vt.setImmediate)||u)(...Ht)},clearImmediate(Ht){const{delegate:vt}=x;return((null==vt?void 0:vt.clearImmediate)||y)(Ht)},delegate:void 0};var Q=m(97565);const rt=new class extends Q.v{flush(vt){this._active=!0,this._scheduled=void 0;const{actions:xt}=this;let Wt,Jt=-1;vt=vt||xt.shift();const Ct=xt.length;do{if(Wt=vt.execute(vt.state,vt.delay))break}while(++Jt<Ct&&(vt=xt.shift()));if(this._active=!1,Wt){for(;++Jt<Ct&&(vt=xt.shift());)vt.unsubscribe();throw Wt}}}(class extends C.o{constructor(vt,xt){super(vt,xt),this.scheduler=vt,this.work=xt}requestAsyncId(vt,xt,Wt=0){return null!==Wt&&Wt>0?super.requestAsyncId(vt,xt,Wt):(vt.actions.push(this),vt._scheduled||(vt._scheduled=x.setImmediate(vt.flush.bind(vt,void 0))))}recycleAsyncId(vt,xt,Wt=0){if(null!=Wt&&Wt>0||null==Wt&&this.delay>0)return super.recycleAsyncId(vt,xt,Wt);0===vt.actions.length&&(x.clearImmediate(xt),vt._scheduled=void 0)}})},34986:(U,$,m)=>{"use strict";m.d($,{z:()=>e,P:()=>t});var C=m(84408);const e=new(m(97565).v)(C.o),t=e},26063:(U,$,m)=>{"use strict";m.d($,{l:()=>C});const C={now:()=>(C.delegate||Date).now(),delegate:void 0}},43410:(U,$,m)=>{"use strict";m.d($,{z:()=>C});const C={setTimeout(..._){const{delegate:e}=C;return((null==e?void 0:e.setTimeout)||setTimeout)(..._)},clearTimeout(_){const{delegate:e}=C;return((null==e?void 0:e.clearTimeout)||clearTimeout)(_)},delegate:void 0}},2202:(U,$,m)=>{"use strict";m.d($,{h:()=>_});const _="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"},48822:(U,$,m)=>{"use strict";m.d($,{L:()=>C});const C="function"==typeof Symbol&&Symbol.observable||"@@observable"},63269:(U,$,m)=>{"use strict";m.d($,{jO:()=>t,yG:()=>n,_6:()=>r});var C=m(30576),_=m(93532);function e(s){return s[s.length-1]}function t(s){return(0,C.m)(e(s))?s.pop():void 0}function n(s){return(0,_.K)(e(s))?s.pop():void 0}function r(s,u){return"number"==typeof e(s)?s.pop():u}},54742:(U,$,m)=>{"use strict";m.d($,{D:()=>n});const{isArray:C}=Array,{getPrototypeOf:_,prototype:e,keys:t}=Object;function n(s){if(1===s.length){const u=s[0];if(C(u))return{args:u,keys:null};if(function(s){return s&&"object"==typeof s&&_(s)===e}(u)){const y=t(u);return{args:y.map(x=>u[x]),keys:y}}}return{args:s,keys:null}}},38737:(U,$,m)=>{"use strict";function C(_,e){if(_){const t=_.indexOf(e);0<=t&&_.splice(t,1)}}m.d($,{P:()=>C})},83888:(U,$,m)=>{"use strict";function C(_){const t=_(n=>{Error.call(n),n.stack=(new Error).stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}m.d($,{d:()=>C})},31810:(U,$,m)=>{"use strict";function C(_,e){return _.reduce((t,n,r)=>(t[n]=e[r],t),{})}m.d($,{n:()=>C})},72806:(U,$,m)=>{"use strict";m.d($,{x:()=>e,O:()=>t});var C=m(42416);let _=null;function e(n){if(C.v.useDeprecatedSynchronousErrorHandling){const r=!_;if(r&&(_={errorThrown:!1,error:null}),n(),r){const{errorThrown:s,error:u}=_;if(_=null,s)throw u}}else n()}function t(n){C.v.useDeprecatedSynchronousErrorHandling&&_&&(_.errorThrown=!0,_.error=n)}},39672:(U,$,m)=>{"use strict";function C(_,e,t,n=0,r=!1){const s=e.schedule(function(){t(),r?_.add(this.schedule(null,n)):this.unsubscribe()},n);if(_.add(s),!r)return s}m.d($,{f:()=>C})},44671:(U,$,m)=>{"use strict";function C(_){return _}m.d($,{y:()=>C})},81144:(U,$,m)=>{"use strict";m.d($,{z:()=>C});const C=_=>_&&"number"==typeof _.length&&"function"!=typeof _},12206:(U,$,m)=>{"use strict";m.d($,{D:()=>_});var C=m(30576);function _(e){return Symbol.asyncIterator&&(0,C.m)(null==e?void 0:e[Symbol.asyncIterator])}},30576:(U,$,m)=>{"use strict";function C(_){return"function"==typeof _}m.d($,{m:()=>C})},93670:(U,$,m)=>{"use strict";m.d($,{c:()=>e});var C=m(48822),_=m(30576);function e(t){return(0,_.m)(t[C.L])}},26495:(U,$,m)=>{"use strict";m.d($,{T:()=>e});var C=m(2202),_=m(30576);function e(t){return(0,_.m)(null==t?void 0:t[C.h])}},28239:(U,$,m)=>{"use strict";m.d($,{t:()=>_});var C=m(30576);function _(e){return(0,C.m)(null==e?void 0:e.then)}},53260:(U,$,m)=>{"use strict";m.d($,{Q:()=>e,L:()=>t});var C=m(35987),_=m(30576);function e(n){return(0,C.FC)(this,arguments,function*(){const s=n.getReader();try{for(;;){const{value:u,done:y}=yield(0,C.qq)(s.read());if(y)return yield(0,C.qq)(void 0);yield yield(0,C.qq)(u)}}finally{s.releaseLock()}})}function t(n){return(0,_.m)(null==n?void 0:n.getReader)}},93532:(U,$,m)=>{"use strict";m.d($,{K:()=>_});var C=m(30576);function _(e){return e&&(0,C.m)(e.schedule)}},54482:(U,$,m)=>{"use strict";m.d($,{A:()=>_,e:()=>e});var C=m(30576);function _(t){return(0,C.m)(null==t?void 0:t.lift)}function e(t){return n=>{if(_(n))return n.lift(function(r){try{return t(r,this)}catch(s){this.error(s)}});throw new TypeError("Unable to lift unknown Observable type")}}},83268:(U,$,m)=>{"use strict";m.d($,{Z:()=>t});var C=m(54004);const{isArray:_}=Array;function t(n){return(0,C.U)(r=>function(n,r){return _(r)?n(...r):n(r)}(n,r))}},25032:(U,$,m)=>{"use strict";function C(){}m.d($,{Z:()=>C})},87849:(U,$,m)=>{"use strict";m.d($,{h:()=>e});var C=m(42416),_=m(43410);function e(t){_.z.setTimeout(()=>{const{onUnhandledError:n}=C.v;if(!n)throw t;n(t)})}},44532:(U,$,m)=>{"use strict";function C(_){return new TypeError(`You provided ${null!==_&&"object"==typeof _?"an invalid object":`'${_}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}m.d($,{z:()=>C})},82734:function(U,$){var _;void 0!==(_=function(){"use strict";function t(x,B,Q){var at=new XMLHttpRequest;at.open("GET",x),at.responseType="blob",at.onload=function(){y(at.response,B,Q)},at.onerror=function(){console.error("could not download file")},at.send()}function n(x){var B=new XMLHttpRequest;B.open("HEAD",x,!1);try{B.send()}catch(Q){}return 200<=B.status&&299>=B.status}function r(x){try{x.dispatchEvent(new MouseEvent("click"))}catch(Q){var B=document.createEvent("MouseEvents");B.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),x.dispatchEvent(B)}}var s="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof global&&global.global===global?global:void 0,u=s.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),y=s.saveAs||("object"!=typeof window||window!==s?function(){}:"download"in HTMLAnchorElement.prototype&&!u?function(x,B,Q){var at=s.URL||s.webkitURL,rt=document.createElement("a");rt.download=B=B||x.name||"download",rt.rel="noopener","string"==typeof x?(rt.href=x,rt.origin===location.origin?r(rt):n(rt.href)?t(x,B,Q):r(rt,rt.target="_blank")):(rt.href=at.createObjectURL(x),setTimeout(function(){at.revokeObjectURL(rt.href)},4e4),setTimeout(function(){r(rt)},0))}:"msSaveOrOpenBlob"in navigator?function(x,B,Q){if(B=B||x.name||"download","string"!=typeof x)navigator.msSaveOrOpenBlob(function(x,B){return void 0===B?B={autoBom:!1}:"object"!=typeof B&&(console.warn("Deprecated: Expected third argument to be a object"),B={autoBom:!B}),B.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(x.type)?new Blob(["\ufeff",x],{type:x.type}):x}(x,Q),B);else if(n(x))t(x,B,Q);else{var at=document.createElement("a");at.href=x,at.target="_blank",setTimeout(function(){r(at)})}}:function(x,B,Q,at){if((at=at||open("","_blank"))&&(at.document.title=at.document.body.innerText="downloading..."),"string"==typeof x)return t(x,B,Q);var rt="application/octet-stream"===x.type,St=/constructor/i.test(s.HTMLElement)||s.safari,Ht=/CriOS\/[\d]+/.test(navigator.userAgent);if((Ht||rt&&St||u)&&"undefined"!=typeof FileReader){var vt=new FileReader;vt.onloadend=function(){var Jt=vt.result;Jt=Ht?Jt:Jt.replace(/^data:[^;]*;/,"data:attachment/file;"),at?at.location.href=Jt:location=Jt,at=null},vt.readAsDataURL(x)}else{var xt=s.URL||s.webkitURL,Wt=xt.createObjectURL(x);at?at.location=Wt:location.href=Wt,at=null,setTimeout(function(){xt.revokeObjectURL(Wt)},4e4)}});s.saveAs=y.saveAs=y,U.exports=y}.apply($,[]))&&(U.exports=_)},86942:(U,$,m)=>{"use strict";var C,_,e;m.r($),m.d($,{Synth:()=>C}),function(){var t=window.URL||window.webkitURL,n=window.Blob;if(!t||!n)throw new Error("This browser does not support AudioSynth");var r=!1,s=null,u=function(at,rt){return[new Uint8Array([rt,rt>>8]),new Uint8Array([rt,rt>>8,rt>>16,rt>>24])][at]},y=function(at,rt,St,Ht){Object.defineProperty(this,at,{value:rt,writable:!!St,enumerable:!!Ht})},x=function(at,rt,St){y.call(this,at,rt,St,!0)};e=function(){this.__init__.apply(this,arguments)};var B=y.bind(e.prototype),Q=x.bind(e.prototype);B("__init__",function(at,rt,St){if(!r)throw new Error("AudioSynthInstrument can only be instantiated from the createInstrument method of the AudioSynth object.");y.call(this,"_parent",at),x.call(this,"name",rt),y.call(this,"_soundID",St)}),Q("play",function(at,rt,St){return this._parent.play(this._soundID,at,rt,St)}),Q("generate",function(at,rt,St){return this._parent.generate(this._soundID,at,rt,St)}),B=y.bind((_=function at(){return s instanceof at?s:(this.__init__(),this)}).prototype),Q=x.bind(_.prototype),B("_debug",!1,!0),B("_bitsPerSample",16),B("_channels",1),B("_sampleRate",44100,!0),Q("setSampleRate",function(at){return this._sampleRate=Math.max(Math.min(0|at,44100),4e3),this._clearCache(),this._sampleRate}),Q("getSampleRate",function(){return this._sampleRate}),B("_volume",32768,!0),Q("setVolume",function(at){return at=parseFloat(at),isNaN(at)&&(at=0),at=Math.round(32768*at),this._volume=Math.max(Math.min(0|at,32768),0),this._clearCache(),this._volume}),Q("getVolume",function(){return Math.round(this._volume/32768*1e4)/1e4}),B("_notes",{C:261.63,"C#":277.18,D:293.66,"D#":311.13,E:329.63,F:349.23,"F#":369.99,G:392,"G#":415.3,A:440,"A#":466.16,B:493.88}),B("_fileCache",[],!0),B("_temp",{},!0),B("_sounds",[],!0),B("_mod",[function(at,rt,St,Ht){return Math.sin(2*Math.PI*(at/rt)*St+Ht)}]),B("_resizeCache",function(){for(var at=this._fileCache,rt=this._sounds.length;at.length<rt;){for(var St=[],Ht=0;Ht<8;Ht++){var vt={};for(var xt in this._notes)vt[xt]={};St.push(vt)}at.push(St)}}),B("_clearCache",function(){this._fileCache=[],this._resizeCache()}),Q("generate",function(at,rt,St,Ht){var vt=this._sounds[at];if(!vt)for(var xt=0;xt<this._sounds.length;xt++)if(this._sounds[xt].name==at){vt=this._sounds[xt],at=xt;break}if(!vt)throw new Error("Invalid sound or sound ID: "+at);var Wt=(new Date).valueOf();this._temp={},St|=0,St=Math.min(8,Math.max(1,St));var Jt=Ht?parseFloat(Ht):2;if(void 0===this._notes[rt])throw new Error(rt+" is not a valid note.");if(void 0!==this._fileCache[at][St-1][rt][Jt])return this._debug&&console.log((new Date).valueOf()-Wt,"ms to retrieve (cached)"),this._fileCache[at][St-1][rt][Jt];var Ct=this._notes[rt]*Math.pow(2,St-4),yt=this._sampleRate,ot=this._volume,mt=this._channels,lt=this._bitsPerSample,Ut=vt.attack(yt,Ct,ot),Rt=vt.dampen(yt,Ct,ot),Et=vt.wave,ht={modulate:this._mod,vars:this._temp},nt=0,Mt=new Uint8Array(new ArrayBuffer(Math.ceil(yt*Jt*2))),Nt=yt*Ut|0,de=yt*Jt|0;for(xt=0;xt!==Nt;xt++)nt=ot*(xt/(yt*Ut))*Et.call(ht,xt,yt,Ct,ot),Mt[xt<<1]=nt,Mt[1+(xt<<1)]=nt>>8;for(;xt!==de;xt++)nt=ot*Math.pow(1-(xt-yt*Ut)/(yt*(Jt-Ut)),Rt)*Et.call(ht,xt,yt,Ct,ot),Mt[xt<<1]=nt,Mt[1+(xt<<1)]=nt>>8;var ve=["RIFF",u(1,52),"WAVE","fmt ",u(1,16),u(0,1),u(0,mt),u(1,yt),u(1,yt*mt*lt/8),u(0,mt*lt/8),u(0,lt),"data",u(1,Mt.length*mt*lt/8),Mt],ue=new n(ve,{type:"audio/wav"}),Be=t.createObjectURL(ue);return this._fileCache[at][St-1][rt][Jt]=Be,this._debug&&console.log((new Date).valueOf()-Wt,"ms to generate"),Be}),Q("play",function(at,rt,St,Ht){var vt=this.generate(at,rt,St,Ht);return new Audio(vt).play(),!0}),Q("debug",function(){this._debug=!0}),Q("createInstrument",function(at){var rt=0,St=!1;if("string"==typeof at){for(var Ht=0;Ht<this._sounds.length;Ht++)if(this._sounds[Ht].name==at){St=!0,rt=Ht;break}}else this._sounds[at]&&(at=this._sounds[rt=at].name,St=!0);if(!St)throw new Error("Invalid sound or sound ID: "+at);r=!0;var vt=new e(this,at,rt);return r=!1,vt}),Q("listSounds",function(){for(var at=[],rt=0;rt<this._sounds.length;rt++)at.push(this._sounds[rt].name);return at}),B("__init__",function(){this._resizeCache()}),Q("loadSoundProfile",function(){for(var at=0,rt=arguments.length;at<rt;at++){var St=arguments[at];if(!(St instanceof Object))throw new Error("Invalid sound profile.");this._sounds.push(St)}return this._resizeCache(),!0}),Q("loadModulationFunction",function(){for(var at=0,rt=arguments.length;at<rt;at++){var St=arguments[at];if("function"!=typeof St)throw new Error("Invalid modulation function.");this._mod.push(St)}return!0}),s=new _,C=s}(),C.loadModulationFunction(function(t,n,r,s){return 1*Math.sin(2*Math.PI*(t/n*r)+s)},function(t,n,r,s){return 1*Math.sin(4*Math.PI*(t/n*r)+s)},function(t,n,r,s){return 1*Math.sin(8*Math.PI*(t/n*r)+s)},function(t,n,r,s){return 1*Math.sin(.5*Math.PI*(t/n*r)+s)},function(t,n,r,s){return 1*Math.sin(.25*Math.PI*(t/n*r)+s)},function(t,n,r,s){return.5*Math.sin(2*Math.PI*(t/n*r)+s)},function(t,n,r,s){return.5*Math.sin(4*Math.PI*(t/n*r)+s)},function(t,n,r,s){return.5*Math.sin(8*Math.PI*(t/n*r)+s)},function(t,n,r,s){return.5*Math.sin(.5*Math.PI*(t/n*r)+s)},function(t,n,r,s){return.5*Math.sin(.25*Math.PI*(t/n*r)+s)}),C.loadSoundProfile({name:"piano",attack:function(){return.002},dampen:function(t,n,r){return Math.pow(.5*Math.log(n*r/t),2)},wave:function(t,n,r,s){var u=this.modulate[0];return this.modulate[1](t,n,r,Math.pow(u(t,n,r,0),2)+.75*u(t,n,r,.25)+.1*u(t,n,r,.5))}},{name:"organ",attack:function(){return.3},dampen:function(t,n){return 1+.01*n},wave:function(t,n,r){var s=this.modulate[0];return this.modulate[1](t,n,r,s(t,n,r,0)+.5*s(t,n,r,.25)+.25*s(t,n,r,.5))}},{name:"acoustic",attack:function(){return.002},dampen:function(){return 1},wave:function(t,n,r){var s=this.vars;s.valueTable=s.valueTable?s.valueTable:[],void 0===s.playVal&&(s.playVal=0),void 0===s.periodCount&&(s.periodCount=0);var u=s.valueTable,y=s.playVal,x=s.periodCount,B=n/r,Q=Math.floor(100*(B-Math.floor(B))),at=!1;if(u.length<=Math.ceil(B))return u.push(2*Math.round(Math.random())-1),u[u.length-1];u[y]=.5*(u[y>=u.length-1?0:y+1]+u[y]),y>=Math.floor(B)&&(y<Math.ceil(B)?x%100>=Q&&(at=!0,u[y+1]=.5*(u[0]+u[y+1]),s.periodCount++):at=!0);var rt=u[y];return at?s.playVal=0:s.playVal++,rt}},{name:"edm",attack:function(){return.002},dampen:function(){return 1},wave:function(t,n,r){var s=this.modulate[0],u=this.modulate.slice(1);return u[0](t,n,r,u[9](t,n,r,u[2](t,n,r,Math.pow(s(t,n,r,0),3)+Math.pow(s(t,n,r,.5),5)+Math.pow(s(t,n,r,1),7)))+u[8](t,n,r,s(t,n,r,1.75)))}})},54364:function(U,$,m){var _,e;_=[m(46251)],void 0!==(e=function(t){"use strict";return t}.apply($,_))&&(U.exports=e)},46251:function(U,$){var _;void 0!==(_=function(){"use strict";var e={connectionTypes:{INPUT_VALUE:1,OUTPUT_VALUE:2,NEXT_STATEMENT:3,PREVIOUS_STATEMENT:4},constants:{},LINE_MODE_MULTIPLIER:40,PAGE_MODE_MULTIPLIER:125,DRAG_RADIUS:5,FLYOUT_DRAG_RADIUS:10,SNAP_RADIUS:28};return e.CONNECTING_SNAP_RADIUS=e.SNAP_RADIUS,e.CURRENT_CONNECTION_PREFERENCE=8,e.BUMP_DELAY=250,e.BUMP_RANDOMNESS=10,e.COLLAPSE_CHARS=30,e.LONGPRESS=750,e.SOUND_LIMIT=100,e.DRAG_STACK=!0,e.HSV_SATURATION=.45,e.HSV_VALUE=.65,e.SPRITE={width:96,height:124,url:"sprites.png"},e.constants.ALIGN={LEFT:-1,CENTRE:0,RIGHT:1},e.DRAG_NONE=0,e.DRAG_STICKY=1,e.DRAG_BEGIN=1,e.DRAG_FREE=2,e.OPPOSITE_TYPE=[],e.OPPOSITE_TYPE[e.connectionTypes.INPUT_VALUE]=e.connectionTypes.OUTPUT_VALUE,e.OPPOSITE_TYPE[e.connectionTypes.OUTPUT_VALUE]=e.connectionTypes.INPUT_VALUE,e.OPPOSITE_TYPE[e.connectionTypes.NEXT_STATEMENT]=e.connectionTypes.PREVIOUS_STATEMENT,e.OPPOSITE_TYPE[e.connectionTypes.PREVIOUS_STATEMENT]=e.connectionTypes.NEXT_STATEMENT,e.VARIABLE_CATEGORY_NAME="VARIABLE",e.VARIABLE_DYNAMIC_CATEGORY_NAME="VARIABLE_DYNAMIC",e.PROCEDURE_CATEGORY_NAME="PROCEDURE",e.RENAME_VARIABLE_ID="RENAME_VARIABLE_ID",e.DELETE_VARIABLE_ID="DELETE_VARIABLE_ID",e.constants.COLLAPSED_INPUT_NAME="_TEMP_COLLAPSED_INPUT",e.constants.COLLAPSED_FIELD_NAME="_TEMP_COLLAPSED_FIELD",e.utils={},e.utils.global=function(){return"object"==typeof self?self:"object"==typeof window?window:"object"==typeof global?global:this}(),e.Msg={},e.utils.global.Blockly||(e.utils.global.Blockly={}),e.utils.global.Blockly.Msg||(e.utils.global.Blockly.Msg=e.Msg),e.utils.colour={},e.utils.colour.parse=function(t){t=String(t).toLowerCase().trim();var n=e.utils.colour.names[t];if(n||(n="0x"==t.substring(0,2)?"#"+t.substring(2):t,/^#[0-9a-f]{6}$/.test(n="#"==n[0]?n:"#"+n)))return n;if(/^#[0-9a-f]{3}$/.test(n))return["#",n[1],n[1],n[2],n[2],n[3],n[3]].join("");var r=t.match(/^(?:rgb)?\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)$/);return r&&(t=Number(r[1]),n=Number(r[2]),r=Number(r[3]),0<=t&&256>t&&0<=n&&256>n&&0<=r&&256>r)?e.utils.colour.rgbToHex(t,n,r):null},e.utils.colour.rgbToHex=function(t,n,r){return n=t<<16|n<<8|r,16>t?"#"+(16777216|n).toString(16).substr(1):"#"+n.toString(16)},e.utils.colour.hexToRgb=function(t){return(t=e.utils.colour.parse(t))?[(t=parseInt(t.substr(1),16))>>16,t>>8&255,255&t]:[0,0,0]},e.utils.colour.hsvToHex=function(t,n,r){var s=0,u=0,y=0;if(0==n)y=u=s=r;else{var x=Math.floor(t/60),B=t/60-x;t=r*(1-n);var Q=r*(1-n*B);switch(n=r*(1-n*(1-B)),x){case 1:s=Q,u=r,y=t;break;case 2:s=t,u=r,y=n;break;case 3:s=t,u=Q,y=r;break;case 4:s=n,u=t,y=r;break;case 5:s=r,u=t,y=Q;break;case 6:case 0:s=r,u=n,y=t}}return e.utils.colour.rgbToHex(Math.floor(s),Math.floor(u),Math.floor(y))},e.utils.colour.blend=function(t,n,r){return(t=e.utils.colour.parse(t))&&(n=e.utils.colour.parse(n))?(t=e.utils.colour.hexToRgb(t),n=e.utils.colour.hexToRgb(n),e.utils.colour.rgbToHex(Math.round(n[0]+r*(t[0]-n[0])),Math.round(n[1]+r*(t[1]-n[1])),Math.round(n[2]+r*(t[2]-n[2])))):null},e.utils.colour.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00"},e.utils.Coordinate=function(t,n){this.x=t,this.y=n},e.utils.Coordinate.equals=function(t,n){return t==n||!(!t||!n)&&t.x==n.x&&t.y==n.y},e.utils.Coordinate.distance=function(t,n){var r=t.x-n.x;return t=t.y-n.y,Math.sqrt(r*r+t*t)},e.utils.Coordinate.magnitude=function(t){return Math.sqrt(t.x*t.x+t.y*t.y)},e.utils.Coordinate.difference=function(t,n){return new e.utils.Coordinate(t.x-n.x,t.y-n.y)},e.utils.Coordinate.sum=function(t,n){return new e.utils.Coordinate(t.x+n.x,t.y+n.y)},e.utils.Coordinate.prototype.clone=function(){return new e.utils.Coordinate(this.x,this.y)},e.utils.Coordinate.prototype.scale=function(t){return this.x*=t,this.y*=t,this},e.utils.Coordinate.prototype.translate=function(t,n){return this.x+=t,this.y+=n,this},e.utils.Rect=function(t,n,r,s){this.top=t,this.bottom=n,this.left=r,this.right=s},e.utils.Rect.prototype.contains=function(t,n){return t>=this.left&&t<=this.right&&n>=this.top&&n<=this.bottom},e.utils.Rect.prototype.intersects=function(t){return!(this.left>t.right||this.right<t.left||this.top>t.bottom||this.bottom<t.top)},e.utils.string={},e.utils.string.startsWith=function(t,n){return 0==t.lastIndexOf(n,0)},e.utils.string.shortestStringLength=function(t){return t.length?t.reduce(function(n,r){return n.length<r.length?n:r}).length:0},e.utils.string.commonWordPrefix=function(t,n){if(!t.length)return 0;if(1==t.length)return t[0].length;var r=0;n=n||e.utils.string.shortestStringLength(t);for(var s=0;s<n;s++){for(var u=t[0][s],y=1;y<t.length;y++)if(u!=t[y][s])return r;" "==u&&(r=s+1)}for(y=1;y<t.length;y++)if((u=t[y][s])&&" "!=u)return r;return n},e.utils.string.commonWordSuffix=function(t,n){if(!t.length)return 0;if(1==t.length)return t[0].length;var r=0;n=n||e.utils.string.shortestStringLength(t);for(var s=0;s<n;s++){for(var u=t[0].substr(-s-1,1),y=1;y<t.length;y++)if(u!=t[y].substr(-s-1,1))return r;" "==u&&(r=s+1)}for(y=1;y<t.length;y++)if((u=t[y].charAt(t[y].length-s-1))&&" "!=u)return r;return n},e.utils.string.wrap=function(t,n){t=t.split("\n");for(var r=0;r<t.length;r++)t[r]=e.utils.string.wrapLine_(t[r],n);return t.join("\n")},e.utils.string.wrapLine_=function(t,n){if(t.length<=n)return t;for(var r=t.trim().split(/\s+/),s=0;s<r.length;s++)r[s].length>n&&(n=r[s].length);s=-1/0;var u=1;do{var y=s,x=t;t=[];var B=r.length/u,Q=1;for(s=0;s<r.length-1;s++)Q<(s+1.5)/B?(Q++,t[s]=!0):t[s]=!1;t=e.utils.string.wrapMutate_(r,t,n),s=e.utils.string.wrapScore_(r,t,n),t=e.utils.string.wrapToText_(r,t),u++}while(s>y);return x},e.utils.string.wrapScore_=function(t,n,r){for(var s=[0],u=[],y=0;y<t.length;y++)s[s.length-1]+=t[y].length,!0===n[y]?(s.push(0),u.push(t[y].charAt(t[y].length-1))):!1===n[y]&&s[s.length-1]++;for(t=Math.max.apply(Math,s),y=n=0;y<s.length;y++)n-=2*Math.pow(Math.abs(r-s[y]),1.5),n-=Math.pow(t-s[y],1.5),-1!=".?!".indexOf(u[y])?n+=r/3:-1!=",;)]}".indexOf(u[y])&&(n+=r/4);return 1<s.length&&s[s.length-1]<=s[s.length-2]&&(n+=.5),n},e.utils.string.wrapMutate_=function(t,n,r){for(var u,s=e.utils.string.wrapScore_(t,n,r),y=0;y<n.length-1;y++)if(n[y]!=n[y+1]){var x=[].concat(n);x[y]=!x[y],x[y+1]=!x[y+1];var B=e.utils.string.wrapScore_(t,x,r);B>s&&(s=B,u=x)}return u?e.utils.string.wrapMutate_(t,u,r):n},e.utils.string.wrapToText_=function(t,n){for(var r=[],s=0;s<t.length;s++)r.push(t[s]),void 0!==n[s]&&r.push(n[s]?"\n":" ");return r.join("")},e.utils.Size=function(t,n){this.width=t,this.height=n},e.utils.Size.equals=function(t,n){return t==n||!(!t||!n)&&t.width==n.width&&t.height==n.height},e.utils.style={},e.utils.style.getSize=function(t){if("none"!=e.utils.style.getStyle_(t,"display"))return e.utils.style.getSizeWithDisplay_(t);var n=t.style,r=n.display,s=n.visibility,u=n.position;n.visibility="hidden",n.position="absolute",n.display="inline";var y=t.offsetWidth;return t=t.offsetHeight,n.display=r,n.position=u,n.visibility=s,new e.utils.Size(y,t)},e.utils.style.getSizeWithDisplay_=function(t){return new e.utils.Size(t.offsetWidth,t.offsetHeight)},e.utils.style.getStyle_=function(t,n){return e.utils.style.getComputedStyle(t,n)||e.utils.style.getCascadedStyle(t,n)||t.style&&t.style[n]},e.utils.style.getComputedStyle=function(t,n){return document.defaultView&&document.defaultView.getComputedStyle&&(t=document.defaultView.getComputedStyle(t,null))&&(t[n]||t.getPropertyValue(n))||""},e.utils.style.getCascadedStyle=function(t,n){return t.currentStyle?t.currentStyle[n]:null},e.utils.style.getPageOffset=function(t){var n=new e.utils.Coordinate(0,0);t=t.getBoundingClientRect();var r=document.documentElement;return r=new e.utils.Coordinate(window.pageXOffset||r.scrollLeft,window.pageYOffset||r.scrollTop),n.x=t.left+r.x,n.y=t.top+r.y,n},e.utils.style.getViewportPageOffset=function(){var t=document.body,n=document.documentElement;return new e.utils.Coordinate(t.scrollLeft||n.scrollLeft,t.scrollTop||n.scrollTop)},e.utils.style.setElementShown=function(t,n){t.style.display=n?"":"none"},e.utils.style.isRightToLeft=function(t){return"rtl"==e.utils.style.getStyle_(t,"direction")},e.utils.style.getBorderBox=function(t){var n=e.utils.style.getComputedStyle(t,"borderLeftWidth"),r=e.utils.style.getComputedStyle(t,"borderRightWidth"),s=e.utils.style.getComputedStyle(t,"borderTopWidth");return t=e.utils.style.getComputedStyle(t,"borderBottomWidth"),{top:parseFloat(s),right:parseFloat(r),bottom:parseFloat(t),left:parseFloat(n)}},e.utils.style.scrollIntoContainerView=function(t,n,r){t=e.utils.style.getContainerOffsetToScrollInto(t,n,r),n.scrollLeft=t.x,n.scrollTop=t.y},e.utils.style.getContainerOffsetToScrollInto=function(t,n,r){var s=e.utils.style.getPageOffset(t),u=e.utils.style.getPageOffset(n),y=e.utils.style.getBorderBox(n),x=s.x-u.x-y.left;return s=s.y-u.y-y.top,u=e.utils.style.getSizeWithDisplay_(t),t=n.clientWidth-u.width,u=n.clientHeight-u.height,y=n.scrollLeft,n=n.scrollTop,r?(y+=x-t/2,n+=s-u/2):(y+=Math.min(x,Math.max(x-t,0)),n+=Math.min(s,Math.max(s-u,0))),new e.utils.Coordinate(y,n)},e.utils.userAgent={},function(t){function n(s){return-1!=r.indexOf(s.toUpperCase())}e.utils.userAgent.raw=t;var r=e.utils.userAgent.raw.toUpperCase();e.utils.userAgent.IE=n("Trident")||n("MSIE"),e.utils.userAgent.EDGE=n("Edge"),e.utils.userAgent.JAVA_FX=n("JavaFX"),e.utils.userAgent.CHROME=(n("Chrome")||n("CriOS"))&&!e.utils.userAgent.EDGE,e.utils.userAgent.WEBKIT=n("WebKit")&&!e.utils.userAgent.EDGE,e.utils.userAgent.GECKO=n("Gecko")&&!e.utils.userAgent.WEBKIT&&!e.utils.userAgent.IE&&!e.utils.userAgent.EDGE,e.utils.userAgent.ANDROID=n("Android"),t=e.utils.global.navigator&&e.utils.global.navigator.maxTouchPoints,e.utils.userAgent.IPAD=n("iPad")||n("Macintosh")&&0<t,e.utils.userAgent.IPOD=n("iPod"),e.utils.userAgent.IPHONE=n("iPhone")&&!e.utils.userAgent.IPAD&&!e.utils.userAgent.IPOD,e.utils.userAgent.MAC=n("Macintosh"),e.utils.userAgent.TABLET=e.utils.userAgent.IPAD||e.utils.userAgent.ANDROID&&!n("Mobile")||n("Silk"),e.utils.userAgent.MOBILE=!e.utils.userAgent.TABLET&&(e.utils.userAgent.IPOD||e.utils.userAgent.IPHONE||e.utils.userAgent.ANDROID||n("IEMobile"))}(e.utils.global.navigator&&e.utils.global.navigator.userAgent||""),e.utils.noEvent=function(t){t.preventDefault(),t.stopPropagation()},e.utils.isTargetInput=function(t){return"textarea"==t.target.type||"text"==t.target.type||"number"==t.target.type||"email"==t.target.type||"password"==t.target.type||"search"==t.target.type||"tel"==t.target.type||"url"==t.target.type||t.target.isContentEditable||t.target.dataset&&"true"==t.target.dataset.isTextInput},e.utils.getRelativeXY=function(t){var n=new e.utils.Coordinate(0,0),r=t.getAttribute("x");return r&&(n.x=parseInt(r,10)),(r=t.getAttribute("y"))&&(n.y=parseInt(r,10)),(r=(r=t.getAttribute("transform"))&&r.match(e.utils.getRelativeXY.XY_REGEX_))&&(n.x+=Number(r[1]),r[3]&&(n.y+=Number(r[3]))),(t=t.getAttribute("style"))&&-1<t.indexOf("translate")&&(t=t.match(e.utils.getRelativeXY.XY_STYLE_REGEX_))&&(n.x+=Number(t[1]),t[3]&&(n.y+=Number(t[3]))),n},e.utils.getInjectionDivXY_=function(t){for(var n=0,r=0;t;){var s=e.utils.getRelativeXY(t);if(n+=s.x,r+=s.y,-1!=(" "+(t.getAttribute("class")||"")+" ").indexOf(" injectionDiv "))break;t=t.parentNode}return new e.utils.Coordinate(n,r)},e.utils.getRelativeXY.XY_REGEX_=/translate\(\s*([-+\d.e]+)([ ,]\s*([-+\d.e]+)\s*)?/,e.utils.getRelativeXY.XY_STYLE_REGEX_=/transform:\s*translate(?:3d)?\(\s*([-+\d.e]+)\s*px([ ,]\s*([-+\d.e]+)\s*px)?/,e.utils.isRightButton=function(t){return!(!t.ctrlKey||!e.utils.userAgent.MAC)||2==t.button},e.utils.mouseToSvg=function(t,n,r){var s=n.createSVGPoint();return s.x=t.clientX,s.y=t.clientY,r||(r=n.getScreenCTM().inverse()),s.matrixTransform(r)},e.utils.getScrollDeltaPixels=function(t){switch(t.deltaMode){default:return{x:t.deltaX,y:t.deltaY};case 1:return{x:t.deltaX*e.LINE_MODE_MULTIPLIER,y:t.deltaY*e.LINE_MODE_MULTIPLIER};case 2:return{x:t.deltaX*e.PAGE_MODE_MULTIPLIER,y:t.deltaY*e.PAGE_MODE_MULTIPLIER}}},e.utils.tokenizeInterpolation=function(t){return e.utils.tokenizeInterpolation_(t,!0)},e.utils.replaceMessageReferences=function(t){return"string"!=typeof t?t:(t=e.utils.tokenizeInterpolation_(t,!1)).length?String(t[0]):""},e.utils.checkMessageReferences=function(t){for(var n=!0,r=e.Msg,s=t.match(/%{BKY_[A-Z]\w*}/gi),u=0;u<s.length;u++)null==r[s[u].toUpperCase().slice(6,-1)]&&(console.warn("No message string for "+s[u]+" in "+t),n=!1);return n},e.utils.tokenizeInterpolation_=function(t,n){var r=[],s=t.split("");s.push("");var u=0;t=[];for(var y=null,x=0;x<s.length;x++){var B=s[x];0==u?"%"==B?((B=t.join(""))&&r.push(B),t.length=0,u=1):t.push(B):1==u?"%"==B?(t.push(B),u=0):n&&"0"<=B&&"9">=B?(u=2,y=B,(B=t.join(""))&&r.push(B),t.length=0):"{"==B?u=3:(t.push("%",B),u=0):2==u?"0"<=B&&"9">=B?y+=B:(r.push(parseInt(y,10)),x--,u=0):3==u&&(""==B?(t.splice(0,0,"%{"),x--,u=0):"}"!=B?t.push(B):(u=t.join(""),/[A-Z]\w*/i.test(u)?(B=u.toUpperCase(),(B=e.utils.string.startsWith(B,"BKY_")?B.substring(4):null)&&B in e.Msg?"string"==typeof(u=e.Msg[B])?Array.prototype.push.apply(r,e.utils.tokenizeInterpolation_(u,n)):r.push(n?String(u):u):r.push("%{"+u+"}")):r.push("%{"+u+"}"),u=t.length=0))}for((B=t.join(""))&&r.push(B),n=[],x=t.length=0;x<r.length;++x)"string"==typeof r[x]?t.push(r[x]):((B=t.join(""))&&n.push(B),t.length=0,n.push(r[x]));return(B=t.join(""))&&n.push(B),t.length=0,n},e.utils.genUid=function(){for(var t=e.utils.genUid.soup_.length,n=[],r=0;20>r;r++)n[r]=e.utils.genUid.soup_.charAt(Math.random()*t);return n.join("")},e.utils.genUid.soup_="!#$%()*+,-./:;=?@[]^_`{|}~ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e.utils.is3dSupported=function(){if(void 0!==e.utils.is3dSupported.cached_)return e.utils.is3dSupported.cached_;if(!e.utils.global.getComputedStyle)return!1;var t=document.createElement("p"),n="none",r={webkitTransform:"-webkit-transform",OTransform:"-o-transform",msTransform:"-ms-transform",MozTransform:"-moz-transform",transform:"transform"};for(var s in document.body.insertBefore(t,null),r)if(void 0!==t.style[s]){if(t.style[s]="translate3d(1px,1px,1px)",!(n=e.utils.global.getComputedStyle(t)))return document.body.removeChild(t),!1;n=n.getPropertyValue(r[s])}return document.body.removeChild(t),e.utils.is3dSupported.cached_="none"!==n,e.utils.is3dSupported.cached_},e.utils.runAfterPageLoad=function(t){if("object"!=typeof document)throw Error("Blockly.utils.runAfterPageLoad() requires browser document.");if("complete"==document.readyState)t();else var n=setInterval(function(){"complete"==document.readyState&&(clearInterval(n),t())},10)},e.utils.getViewportBBox=function(){var t=e.utils.style.getViewportPageOffset();return new e.utils.Rect(t.y,document.documentElement.clientHeight+t.y,t.x,document.documentElement.clientWidth+t.x)},e.utils.arrayRemove=function(t,n){return-1!=(n=t.indexOf(n))&&(t.splice(n,1),!0)},e.utils.getDocumentScroll=function(){var t=document.documentElement,n=window;return e.utils.userAgent.IE&&n.pageYOffset!=t.scrollTop?new e.utils.Coordinate(t.scrollLeft,t.scrollTop):new e.utils.Coordinate(n.pageXOffset||t.scrollLeft,n.pageYOffset||t.scrollTop)},e.utils.getBlockTypeCounts=function(t,n){var r=Object.create(null),s=t.getDescendants(!0);for(n&&(t=t.getNextBlock())&&(t=s.indexOf(t),s.splice(t,s.length-t)),t=0;n=s[t];t++)r[n.type]?r[n.type]++:r[n.type]=1;return r},e.utils.screenToWsCoordinates=function(t,n){var r=n.x;n=n.y;var s=t.getInjectionDiv().getBoundingClientRect();return r=new e.utils.Coordinate(r-s.left,n-s.top),n=t.getOriginOffsetInPixels(),e.utils.Coordinate.difference(r,n).scale(1/t.scale)},e.utils.parseBlockColour=function(t){var n="string"==typeof t?e.utils.replaceMessageReferences(t):t,r=Number(n);if(!isNaN(r)&&0<=r&&360>=r)return{hue:r,hex:e.utils.colour.hsvToHex(r,e.HSV_SATURATION,255*e.HSV_VALUE)};if(r=e.utils.colour.parse(n))return{hue:null,hex:r};throw r='Invalid colour: "'+n+'"',t!=n&&(r+=' (from "'+t+'")'),Error(r)},e.Touch={},e.Touch.TOUCH_ENABLED="ontouchstart"in e.utils.global||!!(e.utils.global.document&&document.documentElement&&"ontouchstart"in document.documentElement)||!(!e.utils.global.navigator||!e.utils.global.navigator.maxTouchPoints&&!e.utils.global.navigator.msMaxTouchPoints),e.Touch.touchIdentifier_=null,e.Touch.TOUCH_MAP={},e.utils.global.PointerEvent?e.Touch.TOUCH_MAP={mousedown:["pointerdown"],mouseenter:["pointerenter"],mouseleave:["pointerleave"],mousemove:["pointermove"],mouseout:["pointerout"],mouseover:["pointerover"],mouseup:["pointerup","pointercancel"],touchend:["pointerup"],touchcancel:["pointercancel"]}:e.Touch.TOUCH_ENABLED&&(e.Touch.TOUCH_MAP={mousedown:["touchstart"],mousemove:["touchmove"],mouseup:["touchend","touchcancel"]}),e.longPid_=0,e.longStart=function(t,n){e.longStop_(),t.changedTouches&&1!=t.changedTouches.length||(e.longPid_=setTimeout(function(){t.changedTouches&&(t.button=2,t.clientX=t.changedTouches[0].clientX,t.clientY=t.changedTouches[0].clientY),n&&n.handleRightClick(t)},e.LONGPRESS))},e.longStop_=function(){e.longPid_&&(clearTimeout(e.longPid_),e.longPid_=0)},e.Touch.clearTouchIdentifier=function(){e.Touch.touchIdentifier_=null},e.Touch.shouldHandleEvent=function(t){return!e.Touch.isMouseOrTouchEvent(t)||e.Touch.checkTouchIdentifier(t)},e.Touch.getTouchIdentifierFromEvent=function(t){return null!=t.pointerId?t.pointerId:t.changedTouches&&t.changedTouches[0]&&null!=t.changedTouches[0].identifier?t.changedTouches[0].identifier:"mouse"},e.Touch.checkTouchIdentifier=function(t){var n=e.Touch.getTouchIdentifierFromEvent(t);return null!=e.Touch.touchIdentifier_?e.Touch.touchIdentifier_==n:("mousedown"==t.type||"touchstart"==t.type||"pointerdown"==t.type)&&(e.Touch.touchIdentifier_=n,!0)},e.Touch.setClientFromTouch=function(t){if(e.utils.string.startsWith(t.type,"touch")){var n=t.changedTouches[0];t.clientX=n.clientX,t.clientY=n.clientY}},e.Touch.isMouseOrTouchEvent=function(t){return e.utils.string.startsWith(t.type,"touch")||e.utils.string.startsWith(t.type,"mouse")||e.utils.string.startsWith(t.type,"pointer")},e.Touch.isTouchEvent=function(t){return e.utils.string.startsWith(t.type,"touch")||e.utils.string.startsWith(t.type,"pointer")},e.Touch.splitEventByTouches=function(t){var n=[];if(t.changedTouches)for(var r=0;r<t.changedTouches.length;r++)n[r]={type:t.type,changedTouches:[t.changedTouches[r]],target:t.target,stopPropagation:function(){t.stopPropagation()},preventDefault:function(){t.preventDefault()}};else n.push(t);return n},e.browserEvents={},e.browserEvents.conditionalBind=function(t,n,r,s,u,y){var x=!1,B=function(Ht){var vt=!u;Ht=e.Touch.splitEventByTouches(Ht);for(var Wt,xt=0;Wt=Ht[xt];xt++)(!vt||e.Touch.shouldHandleEvent(Wt))&&(e.Touch.setClientFromTouch(Wt),r?s.call(r,Wt):s(Wt),x=!0)},Q=[];if(e.utils.global.PointerEvent&&n in e.Touch.TOUCH_MAP)for(var rt,at=0;rt=e.Touch.TOUCH_MAP[n][at];at++)t.addEventListener(rt,B,!1),Q.push([t,rt,B]);else if(t.addEventListener(n,B,!1),Q.push([t,n,B]),n in e.Touch.TOUCH_MAP){var St=function(Ht){B(Ht),x&&!y&&Ht.preventDefault()};for(at=0;rt=e.Touch.TOUCH_MAP[n][at];at++)t.addEventListener(rt,St,!1),Q.push([t,rt,St])}return Q},e.browserEvents.bind=function(t,n,r,s){var u=function(at){r?s.call(r,at):s(at)},y=[];if(e.utils.global.PointerEvent&&n in e.Touch.TOUCH_MAP)for(var B,x=0;B=e.Touch.TOUCH_MAP[n][x];x++)t.addEventListener(B,u,!1),y.push([t,B,u]);else if(t.addEventListener(n,u,!1),y.push([t,n,u]),n in e.Touch.TOUCH_MAP){var Q=function(at){if(at.changedTouches&&1==at.changedTouches.length){var rt=at.changedTouches[0];at.clientX=rt.clientX,at.clientY=rt.clientY}u(at),at.preventDefault()};for(x=0;B=e.Touch.TOUCH_MAP[n][x];x++)t.addEventListener(B,Q,!1),y.push([t,B,Q])}return y},e.browserEvents.unbind=function(t){for(;t.length;){var n=t.pop(),r=n[2];n[0].removeEventListener(n[1],r,!1)}return r},e.ComponentManager=function(){this.componentData_=Object.create(null),this.capabilityToComponentIds_=Object.create(null)},e.ComponentManager.prototype.addComponent=function(t,n){var r=t.component.id;if(!n&&this.componentData_[r])throw Error('Plugin "'+r+'" with capabilities "'+this.componentData_[r].capabilities+'" already added.');this.componentData_[r]=t,n=[];for(var s=0;s<t.capabilities.length;s++){var u=String(t.capabilities[s]).toLowerCase();n.push(u),void 0===this.capabilityToComponentIds_[u]?this.capabilityToComponentIds_[u]=[r]:this.capabilityToComponentIds_[u].push(r)}this.componentData_[r].capabilities=n},e.ComponentManager.prototype.removeComponent=function(t){var n=this.componentData_[t];if(n){for(var r=0;r<n.capabilities.length;r++){var s=String(n.capabilities[r]).toLowerCase();this.capabilityToComponentIds_[s].splice(this.capabilityToComponentIds_[s].indexOf(t),1)}delete this.componentData_[t]}},e.ComponentManager.prototype.addCapability=function(t,n){if(!this.getComponent(t))throw Error('Cannot add capability, "'+n+'". Plugin "'+t+'" has not been added to the ComponentManager');this.hasCapability(t,n)?console.warn('Plugin "'+t+'already has capability "'+n+'"'):(n=String(n).toLowerCase(),this.componentData_[t].capabilities.push(n),this.capabilityToComponentIds_[n].push(t))},e.ComponentManager.prototype.removeCapability=function(t,n){if(!this.getComponent(t))throw Error('Cannot remove capability, "'+n+'". Plugin "'+t+'" has not been added to the ComponentManager');this.hasCapability(t,n)?(n=String(n).toLowerCase(),this.componentData_[t].capabilities.splice(this.componentData_[t].capabilities.indexOf(n),1),this.capabilityToComponentIds_[n].splice(this.capabilityToComponentIds_[n].indexOf(t),1)):console.warn('Plugin "'+t+"doesn't have capability \""+n+'" to remove')},e.ComponentManager.prototype.hasCapability=function(t,n){return n=String(n).toLowerCase(),-1!==this.componentData_[t].capabilities.indexOf(n)},e.ComponentManager.prototype.getComponent=function(t){return this.componentData_[t]&&this.componentData_[t].component},e.ComponentManager.prototype.getComponents=function(t,n){if(t=String(t).toLowerCase(),!(t=this.capabilityToComponentIds_[t]))return[];var r=[];if(n){var s=[],u=this.componentData_;t.forEach(function(y){s.push(u[y])}),s.sort(function(y,x){return y.weight-x.weight}),s.forEach(function(y){r.push(y.component)})}else u=this.componentData_,t.forEach(function(y){r.push(u[y].component)});return r},e.ComponentManager.Capability=function(t){this.name_=t},e.ComponentManager.Capability.prototype.toString=function(){return this.name_},e.ComponentManager.Capability.POSITIONABLE=new e.ComponentManager.Capability("positionable"),e.ComponentManager.Capability.DRAG_TARGET=new e.ComponentManager.Capability("drag_target"),e.ComponentManager.Capability.DELETE_AREA=new e.ComponentManager.Capability("delete_area"),e.ComponentManager.Capability.AUTOHIDEABLE=new e.ComponentManager.Capability("autohideable"),e.utils.Svg=function(t){this.tagName_=t},e.utils.Svg.prototype.toString=function(){return this.tagName_},e.utils.Svg.ANIMATE=new e.utils.Svg("animate"),e.utils.Svg.CIRCLE=new e.utils.Svg("circle"),e.utils.Svg.CLIPPATH=new e.utils.Svg("clipPath"),e.utils.Svg.DEFS=new e.utils.Svg("defs"),e.utils.Svg.FECOMPOSITE=new e.utils.Svg("feComposite"),e.utils.Svg.FECOMPONENTTRANSFER=new e.utils.Svg("feComponentTransfer"),e.utils.Svg.FEFLOOD=new e.utils.Svg("feFlood"),e.utils.Svg.FEFUNCA=new e.utils.Svg("feFuncA"),e.utils.Svg.FEGAUSSIANBLUR=new e.utils.Svg("feGaussianBlur"),e.utils.Svg.FEPOINTLIGHT=new e.utils.Svg("fePointLight"),e.utils.Svg.FESPECULARLIGHTING=new e.utils.Svg("feSpecularLighting"),e.utils.Svg.FILTER=new e.utils.Svg("filter"),e.utils.Svg.FOREIGNOBJECT=new e.utils.Svg("foreignObject"),e.utils.Svg.G=new e.utils.Svg("g"),e.utils.Svg.IMAGE=new e.utils.Svg("image"),e.utils.Svg.LINE=new e.utils.Svg("line"),e.utils.Svg.PATH=new e.utils.Svg("path"),e.utils.Svg.PATTERN=new e.utils.Svg("pattern"),e.utils.Svg.POLYGON=new e.utils.Svg("polygon"),e.utils.Svg.RECT=new e.utils.Svg("rect"),e.utils.Svg.SVG=new e.utils.Svg("svg"),e.utils.Svg.TEXT=new e.utils.Svg("text"),e.utils.Svg.TSPAN=new e.utils.Svg("tspan"),e.utils.dom={},e.utils.dom.SVG_NS="http://www.w3.org/2000/svg",e.utils.dom.HTML_NS="http://www.w3.org/1999/xhtml",e.utils.dom.XLINK_NS="http://www.w3.org/1999/xlink",e.utils.dom.NodeType={ELEMENT_NODE:1,TEXT_NODE:3,COMMENT_NODE:8,DOCUMENT_POSITION_CONTAINED_BY:16},e.utils.dom.cacheWidths_=null,e.utils.dom.cacheReference_=0,e.utils.dom.canvasContext_=null,e.utils.dom.createSvgElement=function(t,n,r){for(var s in t=document.createElementNS(e.utils.dom.SVG_NS,String(t)),n)t.setAttribute(s,n[s]);return document.body.runtimeStyle&&(t.runtimeStyle=t.currentStyle=t.style),r&&r.appendChild(t),t},e.utils.dom.addClass=function(t,n){var r=t.getAttribute("class")||"";return-1==(" "+r+" ").indexOf(" "+n+" ")&&(r&&(r+=" "),t.setAttribute("class",r+n),!0)},e.utils.dom.removeClasses=function(t,n){n=n.split(" ");for(var r=0;r<n.length;r++)e.utils.dom.removeClass(t,n[r])},e.utils.dom.removeClass=function(t,n){var r=t.getAttribute("class");if(-1==(" "+r+" ").indexOf(" "+n+" "))return!1;r=r.split(/\s+/);for(var s=0;s<r.length;s++)r[s]&&r[s]!=n||(r.splice(s,1),s--);return r.length?t.setAttribute("class",r.join(" ")):t.removeAttribute("class"),!0},e.utils.dom.hasClass=function(t,n){return-1!=(" "+t.getAttribute("class")+" ").indexOf(" "+n+" ")},e.utils.dom.removeNode=function(t){return t&&t.parentNode?t.parentNode.removeChild(t):null},e.utils.dom.insertAfter=function(t,n){var r=n.nextSibling;if(!(n=n.parentNode))throw Error("Reference node has no parent.");r?n.insertBefore(t,r):n.appendChild(t)},e.utils.dom.containsNode=function(t,n){return!!(t.compareDocumentPosition(n)&e.utils.dom.NodeType.DOCUMENT_POSITION_CONTAINED_BY)},e.utils.dom.setCssTransform=function(t,n){t.style.transform=n,t.style["-webkit-transform"]=n},e.utils.dom.startTextWidthCache=function(){e.utils.dom.cacheReference_++,e.utils.dom.cacheWidths_||(e.utils.dom.cacheWidths_=Object.create(null))},e.utils.dom.stopTextWidthCache=function(){e.utils.dom.cacheReference_--,e.utils.dom.cacheReference_||(e.utils.dom.cacheWidths_=null)},e.utils.dom.getTextWidth=function(t){var r,n=t.textContent+"\n"+t.className.baseVal;if(e.utils.dom.cacheWidths_&&(r=e.utils.dom.cacheWidths_[n]))return r;try{r=e.utils.userAgent.IE||e.utils.userAgent.EDGE?t.getBBox().width:t.getComputedTextLength()}catch(s){return 8*t.textContent.length}return e.utils.dom.cacheWidths_&&(e.utils.dom.cacheWidths_[n]=r),r},e.utils.dom.getFastTextWidth=function(t,n,r,s){return e.utils.dom.getFastTextWidthWithSizeString(t,n+"pt",r,s)},e.utils.dom.getFastTextWidthWithSizeString=function(t,n,r,s){var y,u=t.textContent;return t=u+"\n"+t.className.baseVal,e.utils.dom.cacheWidths_&&(y=e.utils.dom.cacheWidths_[t])||(e.utils.dom.canvasContext_||((y=document.createElement("canvas")).className="blocklyComputeCanvas",document.body.appendChild(y),e.utils.dom.canvasContext_=y.getContext("2d")),e.utils.dom.canvasContext_.font=r+" "+n+" "+s,y=e.utils.dom.canvasContext_.measureText(u).width,e.utils.dom.cacheWidths_&&(e.utils.dom.cacheWidths_[t]=y)),y},e.utils.dom.measureFontMetrics=function(t,n,r,s){var u=document.createElement("span");u.style.font=r+" "+n+" "+s,u.textContent=t,(t=document.createElement("div")).style.width="1px",t.style.height="0px",(n=document.createElement("div")).setAttribute("style","position: fixed; top: 0; left: 0; display: flex;"),n.appendChild(u),n.appendChild(t),document.body.appendChild(n);try{r={},n.style.alignItems="baseline",r.baseline=t.offsetTop-u.offsetTop,n.style.alignItems="flex-end",r.height=t.offsetTop-u.offsetTop}finally{document.body.removeChild(n)}return r},e.utils.math={},e.utils.math.toRadians=function(t){return t*Math.PI/180},e.utils.math.toDegrees=function(t){return 180*t/Math.PI},e.utils.math.clamp=function(t,n,r){if(r<t){var s=r;r=t,t=s}return Math.max(t,Math.min(n,r))},e.DropDownDiv=function(){},e.DropDownDiv.boundsElement_=null,e.DropDownDiv.owner_=null,e.DropDownDiv.positionToField_=null,e.DropDownDiv.ARROW_SIZE=16,e.DropDownDiv.BORDER_SIZE=1,e.DropDownDiv.ARROW_HORIZONTAL_PADDING=12,e.DropDownDiv.PADDING_Y=16,e.DropDownDiv.ANIMATION_TIME=.25,e.DropDownDiv.animateOutTimer_=null,e.DropDownDiv.onHide_=null,e.DropDownDiv.rendererClassName_="",e.DropDownDiv.themeClassName_="",e.DropDownDiv.createDom=function(){if(!e.DropDownDiv.DIV_){var t=document.createElement("div");t.className="blocklyDropDownDiv",(e.parentContainer||document.body).appendChild(t),e.DropDownDiv.DIV_=t;var n=document.createElement("div");n.className="blocklyDropDownContent",t.appendChild(n),e.DropDownDiv.content_=n,(n=document.createElement("div")).className="blocklyDropDownArrow",t.appendChild(n),e.DropDownDiv.arrow_=n,e.DropDownDiv.DIV_.style.opacity=0,e.DropDownDiv.DIV_.style.transition="transform "+e.DropDownDiv.ANIMATION_TIME+"s, opacity "+e.DropDownDiv.ANIMATION_TIME+"s",t.addEventListener("focusin",function(){e.utils.dom.addClass(t,"blocklyFocused")}),t.addEventListener("focusout",function(){e.utils.dom.removeClass(t,"blocklyFocused")})}},e.DropDownDiv.setBoundsElement=function(t){e.DropDownDiv.boundsElement_=t},e.DropDownDiv.getContentDiv=function(){return e.DropDownDiv.content_},e.DropDownDiv.clearContent=function(){e.DropDownDiv.content_.textContent="",e.DropDownDiv.content_.style.width=""},e.DropDownDiv.setColour=function(t,n){e.DropDownDiv.DIV_.style.backgroundColor=t,e.DropDownDiv.DIV_.style.borderColor=n},e.DropDownDiv.showPositionedByBlock=function(t,n,r,s){return e.DropDownDiv.showPositionedByRect_(e.DropDownDiv.getScaledBboxOfBlock_(n),t,r,s)},e.DropDownDiv.showPositionedByField=function(t,n,r){return e.DropDownDiv.positionToField_=!0,e.DropDownDiv.showPositionedByRect_(e.DropDownDiv.getScaledBboxOfField_(t),t,n,r)},e.DropDownDiv.getScaledBboxOfBlock_=function(t){var n=t.getSvgRoot(),r=n.getBBox(),s=t.workspace.scale;return t=r.height*s,r=r.width*s,n=e.utils.style.getPageOffset(n),new e.utils.Rect(n.y,n.y+t,n.x,n.x+r)},e.DropDownDiv.getScaledBboxOfField_=function(t){return t=t.getScaledBBox(),new e.utils.Rect(t.top,t.bottom,t.left,t.right)},e.DropDownDiv.showPositionedByRect_=function(t,n,r,s){var u=t.left+(t.right-t.left)/2,y=t.bottom;t=t.top,s&&(t+=s);for(var x=(s=n.getSourceBlock()).workspace;x.options.parentWorkspace;)x=x.options.parentWorkspace;return e.DropDownDiv.setBoundsElement(x.getParentSvg().parentNode),e.DropDownDiv.show(n,s.RTL,u,y,u,t,r)},e.DropDownDiv.show=function(t,n,r,s,u,y,x){return e.DropDownDiv.owner_=t,e.DropDownDiv.onHide_=x||null,(t=e.DropDownDiv.DIV_).style.direction=n?"rtl":"ltr",n=e.getMainWorkspace(),e.DropDownDiv.rendererClassName_=n.getRenderer().getClassName(),e.DropDownDiv.themeClassName_=n.getTheme().getClassName(),e.utils.dom.addClass(t,e.DropDownDiv.rendererClassName_),e.utils.dom.addClass(t,e.DropDownDiv.themeClassName_),e.DropDownDiv.positionInternal_(r,s,u,y)},e.DropDownDiv.getBoundsInfo_=function(){var t=e.utils.style.getPageOffset(e.DropDownDiv.boundsElement_),n=e.utils.style.getSize(e.DropDownDiv.boundsElement_);return{left:t.x,right:t.x+n.width,top:t.y,bottom:t.y+n.height,width:n.width,height:n.height}},e.DropDownDiv.getPositionMetrics_=function(t,n,r,s){var u=e.DropDownDiv.getBoundsInfo_(),y=e.utils.style.getSize(e.DropDownDiv.DIV_);return n+y.height<u.bottom?e.DropDownDiv.getPositionBelowMetrics_(t,n,u,y):s-y.height>u.top?e.DropDownDiv.getPositionAboveMetrics_(r,s,u,y):n+y.height<document.documentElement.clientHeight?e.DropDownDiv.getPositionBelowMetrics_(t,n,u,y):s-y.height>document.documentElement.clientTop?e.DropDownDiv.getPositionAboveMetrics_(r,s,u,y):e.DropDownDiv.getPositionTopOfPageMetrics_(t,u,y)},e.DropDownDiv.getPositionBelowMetrics_=function(t,n,r,s){return{initialX:(t=e.DropDownDiv.getPositionX(t,r.left,r.right,s.width)).divX,initialY:n,finalX:t.divX,finalY:n+e.DropDownDiv.PADDING_Y,arrowX:t.arrowX,arrowY:-(e.DropDownDiv.ARROW_SIZE/2+e.DropDownDiv.BORDER_SIZE),arrowAtTop:!0,arrowVisible:!0}},e.DropDownDiv.getPositionAboveMetrics_=function(t,n,r,s){return{initialX:(t=e.DropDownDiv.getPositionX(t,r.left,r.right,s.width)).divX,initialY:n-s.height,finalX:t.divX,finalY:n-s.height-e.DropDownDiv.PADDING_Y,arrowX:t.arrowX,arrowY:s.height-2*e.DropDownDiv.BORDER_SIZE-e.DropDownDiv.ARROW_SIZE/2,arrowAtTop:!1,arrowVisible:!0}},e.DropDownDiv.getPositionTopOfPageMetrics_=function(t,n,r){return{initialX:(t=e.DropDownDiv.getPositionX(t,n.left,n.right,r.width)).divX,initialY:0,finalX:t.divX,finalY:0,arrowAtTop:null,arrowX:null,arrowY:null,arrowVisible:!1}},e.DropDownDiv.getPositionX=function(t,n,r,s){var u=t;return t=e.utils.math.clamp(n,t-s/2,r-s),{arrowX:s=e.utils.math.clamp(n=e.DropDownDiv.ARROW_HORIZONTAL_PADDING,(u-=e.DropDownDiv.ARROW_SIZE/2)-t,s-n-e.DropDownDiv.ARROW_SIZE),divX:t}},e.DropDownDiv.isVisible=function(){return!!e.DropDownDiv.owner_},e.DropDownDiv.hideIfOwner=function(t,n){return e.DropDownDiv.owner_===t&&(n?e.DropDownDiv.hideWithoutAnimation():e.DropDownDiv.hide(),!0)},e.DropDownDiv.hide=function(){var t=e.DropDownDiv.DIV_;t.style.transform="translate(0, 0)",t.style.opacity=0,e.DropDownDiv.animateOutTimer_=setTimeout(function(){e.DropDownDiv.hideWithoutAnimation()},1e3*e.DropDownDiv.ANIMATION_TIME),e.DropDownDiv.onHide_&&(e.DropDownDiv.onHide_(),e.DropDownDiv.onHide_=null)},e.DropDownDiv.hideWithoutAnimation=function(){if(e.DropDownDiv.isVisible()){e.DropDownDiv.animateOutTimer_&&clearTimeout(e.DropDownDiv.animateOutTimer_);var t=e.DropDownDiv.DIV_;t.style.transform="",t.style.left="",t.style.top="",t.style.opacity=0,t.style.display="none",t.style.backgroundColor="",t.style.borderColor="",e.DropDownDiv.onHide_&&(e.DropDownDiv.onHide_(),e.DropDownDiv.onHide_=null),e.DropDownDiv.clearContent(),e.DropDownDiv.owner_=null,e.DropDownDiv.rendererClassName_&&(e.utils.dom.removeClass(t,e.DropDownDiv.rendererClassName_),e.DropDownDiv.rendererClassName_=""),e.DropDownDiv.themeClassName_&&(e.utils.dom.removeClass(t,e.DropDownDiv.themeClassName_),e.DropDownDiv.themeClassName_=""),e.getMainWorkspace().markFocused()}},e.DropDownDiv.positionInternal_=function(t,n,r,s){(t=e.DropDownDiv.getPositionMetrics_(t,n,r,s)).arrowVisible?(e.DropDownDiv.arrow_.style.display="",e.DropDownDiv.arrow_.style.transform="translate("+t.arrowX+"px,"+t.arrowY+"px) rotate(45deg)",e.DropDownDiv.arrow_.setAttribute("class",t.arrowAtTop?"blocklyDropDownArrow blocklyArrowTop":"blocklyDropDownArrow blocklyArrowBottom")):e.DropDownDiv.arrow_.style.display="none",n=Math.floor(t.initialX),r=Math.floor(t.initialY),s=Math.floor(t.finalX);var u=Math.floor(t.finalY),y=e.DropDownDiv.DIV_;return y.style.left=n+"px",y.style.top=r+"px",y.style.display="block",y.style.opacity=1,y.style.transform="translate("+(s-n)+"px,"+(u-r)+"px)",!!t.arrowAtTop},e.DropDownDiv.repositionForWindowResize=function(){if(e.DropDownDiv.owner_){var t=e.DropDownDiv.owner_,n=t.getSourceBlock();t=e.DropDownDiv.positionToField_?e.DropDownDiv.getScaledBboxOfField_(t):e.DropDownDiv.getScaledBboxOfBlock_(n),e.DropDownDiv.positionInternal_(n=t.left+(t.right-t.left)/2,t.bottom,n,t.top)}else e.DropDownDiv.hide()},e.registry={},e.registry.typeMap_=Object.create(null),e.registry.DEFAULT="default",e.registry.Type=function(t){this.name_=t},e.registry.Type.prototype.toString=function(){return this.name_},e.registry.Type.CONNECTION_CHECKER=new e.registry.Type("connectionChecker"),e.registry.Type.CURSOR=new e.registry.Type("cursor"),e.registry.Type.EVENT=new e.registry.Type("event"),e.registry.Type.FIELD=new e.registry.Type("field"),e.registry.Type.RENDERER=new e.registry.Type("renderer"),e.registry.Type.TOOLBOX=new e.registry.Type("toolbox"),e.registry.Type.THEME=new e.registry.Type("theme"),e.registry.Type.TOOLBOX_ITEM=new e.registry.Type("toolboxItem"),e.registry.Type.FLYOUTS_VERTICAL_TOOLBOX=new e.registry.Type("flyoutsVerticalToolbox"),e.registry.Type.FLYOUTS_HORIZONTAL_TOOLBOX=new e.registry.Type("flyoutsHorizontalToolbox"),e.registry.Type.METRICS_MANAGER=new e.registry.Type("metricsManager"),e.registry.Type.BLOCK_DRAGGER=new e.registry.Type("blockDragger"),e.registry.register=function(t,n,r,s){if(!(t instanceof e.registry.Type)&&"string"!=typeof t||""==String(t).trim())throw Error('Invalid type "'+t+'". The type must be a non-empty string or a Blockly.registry.Type.');if(t=String(t).toLowerCase(),"string"!=typeof n||""==n.trim())throw Error('Invalid name "'+n+'". The name must be a non-empty string.');if(n=n.toLowerCase(),!r)throw Error("Can not register a null value");var u=e.registry.typeMap_[t];if(u||(u=e.registry.typeMap_[t]=Object.create(null)),e.registry.validate_(t,r),!s&&u[n])throw Error('Name "'+n+'" with type "'+t+'" already registered.');u[n]=r},e.registry.validate_=function(t,n){if(t===String(e.registry.Type.FIELD)&&"function"!=typeof n.fromJson)throw Error('Type "'+t+'" must have a fromJson function')},e.registry.unregister=function(t,n){t=String(t).toLowerCase(),n=n.toLowerCase();var r=e.registry.typeMap_[t];r&&r[n]?delete e.registry.typeMap_[t][n]:console.warn("Unable to unregister ["+n+"]["+t+"] from the registry.")},e.registry.getItem_=function(t,n,r){t=String(t).toLowerCase(),n=n.toLowerCase();var s=e.registry.typeMap_[t];if(!s||!s[n]){if(n="Unable to find ["+n+"]["+t+"] in the registry.",r)throw Error(n+" You must require or register a "+t+" plugin.");return console.warn(n),null}return s[n]},e.registry.hasItem=function(t,n){return t=String(t).toLowerCase(),n=n.toLowerCase(),!!(t=e.registry.typeMap_[t])&&!!t[n]},e.registry.getClass=function(t,n,r){return e.registry.getItem_(t,n,r)},e.registry.getObject=function(t,n,r){return e.registry.getItem_(t,n,r)},e.registry.getClassFromOptions=function(t,n,r){return"function"==typeof(n=n.plugins[t.toString()]||e.registry.DEFAULT)?n:e.registry.getClass(t,n,r)},e.Events={},e.Events.group_="",e.Events.recordUndo=!0,e.Events.disabled_=0,e.Events.CREATE="create",e.Events.BLOCK_CREATE=e.Events.CREATE,e.Events.DELETE="delete",e.Events.BLOCK_DELETE=e.Events.DELETE,e.Events.CHANGE="change",e.Events.BLOCK_CHANGE=e.Events.CHANGE,e.Events.MOVE="move",e.Events.BLOCK_MOVE=e.Events.MOVE,e.Events.VAR_CREATE="var_create",e.Events.VAR_DELETE="var_delete",e.Events.VAR_RENAME="var_rename",e.Events.UI="ui",e.Events.BLOCK_DRAG="drag",e.Events.SELECTED="selected",e.Events.CLICK="click",e.Events.MARKER_MOVE="marker_move",e.Events.BUBBLE_OPEN="bubble_open",e.Events.TRASHCAN_OPEN="trashcan_open",e.Events.TOOLBOX_ITEM_SELECT="toolbox_item_select",e.Events.THEME_CHANGE="theme_change",e.Events.VIEWPORT_CHANGE="viewport_change",e.Events.COMMENT_CREATE="comment_create",e.Events.COMMENT_DELETE="comment_delete",e.Events.COMMENT_CHANGE="comment_change",e.Events.COMMENT_MOVE="comment_move",e.Events.FINISHED_LOADING="finished_loading",e.Events.BUMP_EVENTS=[e.Events.BLOCK_CREATE,e.Events.BLOCK_MOVE,e.Events.COMMENT_CREATE,e.Events.COMMENT_MOVE],e.Events.FIRE_QUEUE_=[],e.Events.fire=function(t){e.Events.isEnabled()&&(e.Events.FIRE_QUEUE_.length||setTimeout(e.Events.fireNow_,0),e.Events.FIRE_QUEUE_.push(t))},e.Events.fireNow_=function(){for(var r,t=e.Events.filter(e.Events.FIRE_QUEUE_,!0),n=e.Events.FIRE_QUEUE_.length=0;r=t[n];n++)if(r.workspaceId){var s=e.Workspace.getById(r.workspaceId);s&&s.fireChangeListener(r)}},e.Events.filter=function(t,n){t=t.slice(),n||t.reverse();for(var y,r=[],s=Object.create(null),u=0;y=t[u];u++)if(!y.isNull()){var x=[y.isUiEvent?e.Events.UI:y.type,y.blockId,y.workspaceId].join(" "),B=s[x],Q=B?B.event:null;B?y.type==e.Events.MOVE&&B.index==u-1?(Q.newParentId=y.newParentId,Q.newInputName=y.newInputName,Q.newCoordinate=y.newCoordinate,B.index=u):y.type==e.Events.CHANGE&&y.element==Q.element&&y.name==Q.name?Q.newValue=y.newValue:y.type==e.Events.VIEWPORT_CHANGE?(Q.viewTop=y.viewTop,Q.viewLeft=y.viewLeft,Q.scale=y.scale,Q.oldScale=y.oldScale):(y.type!=e.Events.CLICK||Q.type!=e.Events.BUBBLE_OPEN)&&(s[x]={event:y,index:u},r.push(y)):(s[x]={event:y,index:u},r.push(y))}for(t=r.filter(function(at){return!at.isNull()}),n||t.reverse(),u=1;y=t[u];u++)y.type==e.Events.CHANGE&&"mutation"==y.element&&t.unshift(t.splice(u,1)[0]);return t},e.Events.clearPendingUndo=function(){for(var n,t=0;n=e.Events.FIRE_QUEUE_[t];t++)n.recordUndo=!1},e.Events.disable=function(){e.Events.disabled_++},e.Events.enable=function(){e.Events.disabled_--},e.Events.isEnabled=function(){return 0==e.Events.disabled_},e.Events.getGroup=function(){return e.Events.group_},e.Events.setGroup=function(t){e.Events.group_="boolean"==typeof t?t?e.utils.genUid():"":t},e.Events.getDescendantIds=function(t){var n=[];t=t.getDescendants(!1);for(var s,r=0;s=t[r];r++)n[r]=s.id;return n},e.Events.fromJson=function(t,n){var r=e.Events.get(t.type);if(!r)throw Error("Unknown event type.");return(r=new r).fromJson(t),r.workspaceId=n.id,r},e.Events.get=function(t){return e.registry.getClass(e.registry.Type.EVENT,t)},e.Events.disableOrphans=function(t){if((t.type==e.Events.MOVE||t.type==e.Events.CREATE)&&t.workspaceId){var n=e.Workspace.getById(t.workspaceId),r=n.getBlockById(t.blockId);if(r){t=e.Events.recordUndo;try{e.Events.recordUndo=!1;var s=r.getParent();if(s&&s.isEnabled()){var y,u=r.getDescendants(!1);for(n=0;y=u[n];n++)y.setEnabled(!0)}else if((r.outputConnection||r.previousConnection)&&!n.isDragging())do{r.setEnabled(!1),r=r.getNextBlock()}while(r)}finally{e.Events.recordUndo=t}}}},e.Events.Abstract=function(){this.isBlank=null,this.workspaceId=void 0,this.group=e.Events.getGroup(),this.recordUndo=e.Events.recordUndo},e.Events.Abstract.prototype.isUiEvent=!1,e.Events.Abstract.prototype.toJson=function(){var t={type:this.type};return this.group&&(t.group=this.group),t},e.Events.Abstract.prototype.fromJson=function(t){this.isBlank=!1,this.group=t.group},e.Events.Abstract.prototype.isNull=function(){return!1},e.Events.Abstract.prototype.run=function(t){},e.Events.Abstract.prototype.getEventWorkspace_=function(){if(this.workspaceId)var t=e.Workspace.getById(this.workspaceId);if(!t)throw Error("Workspace is null. Event must have been generated from real Blockly events.");return t},e.utils.object={},e.utils.object.inherits=function(t,n){t.superClass_=n.prototype,t.prototype=Object.create(n.prototype),t.prototype.constructor=t},e.utils.object.mixin=function(t,n){for(var r in n)t[r]=n[r]},e.utils.object.deepMerge=function(t,n){for(var r in n)t[r]=null!=n[r]&&"object"==typeof n[r]?e.utils.object.deepMerge(t[r]||Object.create(null),n[r]):n[r];return t},e.utils.object.values=function(t){return Object.values?Object.values(t):Object.keys(t).map(function(n){return t[n]})},e.utils.xml={},e.utils.xml.NAME_SPACE="https://developers.google.com/blockly/xml",e.utils.xml.document=function(){return document},e.utils.xml.createElement=function(t){return e.utils.xml.document().createElementNS(e.utils.xml.NAME_SPACE,t)},e.utils.xml.createTextNode=function(t){return e.utils.xml.document().createTextNode(t)},e.utils.xml.textToDomDocument=function(t){return(new DOMParser).parseFromString(t,"text/xml")},e.utils.xml.domToText=function(t){return(new XMLSerializer).serializeToString(t)},e.inputTypes={VALUE:e.connectionTypes.INPUT_VALUE,STATEMENT:e.connectionTypes.NEXT_STATEMENT,DUMMY:5},e.Xml={},e.Xml.workspaceToDom=function(t,n){var r=e.utils.xml.createElement("xml"),s=e.Xml.variablesToDom(e.Variables.allUsedVarModels(t));s.hasChildNodes()&&r.appendChild(s);var y,u=t.getTopComments(!0);for(s=0;y=u[s];s++)r.appendChild(y.toXmlWithXY(n));for(t=t.getTopBlocks(!0),s=0;u=t[s];s++)r.appendChild(e.Xml.blockToDomWithXY(u,n));return r},e.Xml.variablesToDom=function(t){for(var s,n=e.utils.xml.createElement("variables"),r=0;s=t[r];r++){var u=e.utils.xml.createElement("variable");u.appendChild(e.utils.xml.createTextNode(s.name)),s.type&&u.setAttribute("type",s.type),u.id=s.getId(),n.appendChild(u)}return n},e.Xml.blockToDomWithXY=function(t,n){if(t.isInsertionMarker()&&!(t=t.getChildren(!1)[0]))return new DocumentFragment;var r;t.workspace.RTL&&(r=t.workspace.getWidth()),n=e.Xml.blockToDom(t,n);var s=t.getRelativeToSurfaceXY();return n.setAttribute("x",Math.round(t.workspace.RTL?r-s.x:s.x)),n.setAttribute("y",Math.round(s.y)),n},e.Xml.fieldToDom_=function(t){if(t.isSerializable()){var n=e.utils.xml.createElement("field");return n.setAttribute("name",t.name||""),t.toXml(n)}return null},e.Xml.allFieldsToDom_=function(t,n){for(var s,r=0;s=t.inputList[r];r++)for(var y,u=0;y=s.fieldRow[u];u++)(y=e.Xml.fieldToDom_(y))&&n.appendChild(y)},e.Xml.blockToDom=function(t,n){if(t.isInsertionMarker())return(t=t.getChildren(!1)[0])?e.Xml.blockToDom(t):new DocumentFragment;var r=e.utils.xml.createElement(t.isShadow()?"shadow":"block");if(r.setAttribute("type",t.type),n||r.setAttribute("id",t.id),t.mutationToDom){var s=t.mutationToDom();s&&(s.hasChildNodes()||s.hasAttributes())&&r.appendChild(s)}if(e.Xml.allFieldsToDom_(t,r),s=t.getCommentText()){var u=t.commentModel.size,y=t.commentModel.pinned,x=e.utils.xml.createElement("comment");x.appendChild(e.utils.xml.createTextNode(s)),x.setAttribute("pinned",y),x.setAttribute("h",u.height),x.setAttribute("w",u.width),r.appendChild(x)}for(t.data&&((s=e.utils.xml.createElement("data")).appendChild(e.utils.xml.createTextNode(t.data)),r.appendChild(s)),s=0;u=t.inputList[s];s++){var B;if(y=!0,u.type!=e.inputTypes.DUMMY){var Q=u.connection.targetBlock();u.type==e.inputTypes.VALUE?B=e.utils.xml.createElement("value"):u.type==e.inputTypes.STATEMENT&&(B=e.utils.xml.createElement("statement")),!(x=u.connection.getShadowDom())||Q&&Q.isShadow()||B.appendChild(e.Xml.cloneShadow_(x,n)),Q&&(x=e.Xml.blockToDom(Q,n)).nodeType==e.utils.dom.NodeType.ELEMENT_NODE&&(B.appendChild(x),y=!1),B.setAttribute("name",u.name),y||r.appendChild(B)}}return null!=t.inputsInline&&t.inputsInline!=t.inputsInlineDefault&&r.setAttribute("inline",t.inputsInline),t.isCollapsed()&&r.setAttribute("collapsed",!0),t.isEnabled()||r.setAttribute("disabled",!0),t.isDeletable()||t.isShadow()||r.setAttribute("deletable",!1),t.isMovable()||t.isShadow()||r.setAttribute("movable",!1),t.isEditable()||r.setAttribute("editable",!1),(s=t.getNextBlock())&&(x=e.Xml.blockToDom(s,n)).nodeType==e.utils.dom.NodeType.ELEMENT_NODE&&((B=e.utils.xml.createElement("next")).appendChild(x),r.appendChild(B)),!(x=t.nextConnection&&t.nextConnection.getShadowDom())||s&&s.isShadow()||B.appendChild(e.Xml.cloneShadow_(x,n)),r},e.Xml.cloneShadow_=function(t,n){for(var s,r=t=t.cloneNode(!0);r;)if(n&&"shadow"==r.nodeName&&r.removeAttribute("id"),r.firstChild)r=r.firstChild;else{for(;r&&!r.nextSibling;)s=r,r=r.parentNode,s.nodeType==e.utils.dom.NodeType.TEXT_NODE&&""==s.data.trim()&&r.firstChild!=s&&e.utils.dom.removeNode(s);r&&(s=r,r=r.nextSibling,s.nodeType==e.utils.dom.NodeType.TEXT_NODE&&""==s.data.trim()&&e.utils.dom.removeNode(s))}return t},e.Xml.domToText=function(t){return e.utils.xml.domToText(t).replace(/<(\w+)([^<]*)\/>/g,"<$1$2></$1>")},e.Xml.domToPrettyText=function(t){t=e.Xml.domToText(t).split("<");for(var n="",r=1;r<t.length;r++){var s=t[r];"/"==s[0]&&(n=n.substring(2)),t[r]=n+"<"+s,"/"!=s[0]&&"/>"!=s.slice(-2)&&(n+="  ")}return(t=(t=t.join("\n")).replace(/(<(\w+)\b[^>]*>[^\n]*)\n *<\/\2>/g,"$1</$2>")).replace(/^\n/,"")},e.Xml.textToDom=function(t){var n=e.utils.xml.textToDomDocument(t);if(!n||!n.documentElement||n.getElementsByTagName("parsererror").length)throw Error("textToDom was unable to parse: "+t);return n.documentElement},e.Xml.clearWorkspaceAndLoadFromXml=function(t,n){return n.setResizesEnabled(!1),n.clear(),t=e.Xml.domToWorkspace(t,n),n.setResizesEnabled(!0),t},e.Xml.domToWorkspace=function(t,n){if(t instanceof e.Workspace){var r=t;t=n,n=r,console.warn("Deprecated call to Blockly.Xml.domToWorkspace, swap the arguments.")}var s;n.RTL&&(s=n.getWidth()),r=[],e.utils.dom.startTextWidthCache();var u=e.Events.getGroup();u||e.Events.setGroup(!0),n.setResizesEnabled&&n.setResizesEnabled(!1);var y=!0;try{for(var B,x=0;B=t.childNodes[x];x++){var Q=B.nodeName.toLowerCase(),at=B;if("block"==Q||"shadow"==Q&&!e.Events.recordUndo){var rt=e.Xml.domToBlock(at,n);r.push(rt.id);var St=at.hasAttribute("x")?parseInt(at.getAttribute("x"),10):10,Ht=at.hasAttribute("y")?parseInt(at.getAttribute("y"),10):10;isNaN(St)||isNaN(Ht)||rt.moveBy(n.RTL?s-St:St,Ht),y=!1}else{if("shadow"==Q)throw TypeError("Shadow block cannot be a top-level block.");if("comment"==Q)n.rendered?e.WorkspaceCommentSvg?e.WorkspaceCommentSvg.fromXml(at,n,s):console.warn("Missing require for Blockly.WorkspaceCommentSvg, ignoring workspace comment."):e.WorkspaceComment?e.WorkspaceComment.fromXml(at,n):console.warn("Missing require for Blockly.WorkspaceComment, ignoring workspace comment.");else if("variables"==Q){if(!y)throw Error("'variables' tag must exist once before block and shadow tag elements in the workspace XML, but it was found in another location.");e.Xml.domToVariables(at,n),y=!1}}}}finally{u||e.Events.setGroup(!1),e.utils.dom.stopTextWidthCache()}return n.setResizesEnabled&&n.setResizesEnabled(!0),e.Events.fire(new(e.Events.get(e.Events.FINISHED_LOADING))(n)),r},e.Xml.appendDomToWorkspace=function(t,n){var r;if(Object.prototype.hasOwnProperty.call(n,"scale")&&(r=n.getBlocksBoundingBox()),t=e.Xml.domToWorkspace(t,n),r&&r.top!=r.bottom){var s=r.bottom,u=n.RTL?r.right:r.left,y=1/0,x=-1/0,B=1/0;for(r=0;r<t.length;r++){var Q=n.getBlockById(t[r]).getRelativeToSurfaceXY();Q.y<B&&(B=Q.y),Q.x<y&&(y=Q.x),Q.x>x&&(x=Q.x)}for(s=s-B+10,u=n.RTL?u-x:u-y,r=0;r<t.length;r++)n.getBlockById(t[r]).moveBy(u,s)}return t},e.Xml.domToBlock=function(t,n){if(t instanceof e.Workspace){var r=t;t=n,n=r,console.warn("Deprecated call to Blockly.Xml.domToBlock, swap the arguments.")}e.Events.disable(),r=n.getAllVariables();try{var s=e.Xml.domToBlockHeadless_(t,n),u=s.getDescendants(!1);if(n.rendered){s.setConnectionTracking(!1);for(var y=u.length-1;0<=y;y--)u[y].initSvg();for(y=u.length-1;0<=y;y--)u[y].render(!1);setTimeout(function(){s.disposed||s.setConnectionTracking(!0)},1),s.updateDisabled(),n.resizeContents()}else for(y=u.length-1;0<=y;y--)u[y].initModel()}finally{e.Events.enable()}if(e.Events.isEnabled()){for(t=e.Variables.getAddedVariables(n,r),y=0;y<t.length;y++)n=t[y],e.Events.fire(new(e.Events.get(e.Events.VAR_CREATE))(n));e.Events.fire(new(e.Events.get(e.Events.CREATE))(s))}return s},e.Xml.domToVariables=function(t,n){for(var s,r=0;s=t.childNodes[r];r++)if(s.nodeType==e.utils.dom.NodeType.ELEMENT_NODE){var u=s.getAttribute("type"),y=s.getAttribute("id");n.createVariable(s.textContent,u,y)}},e.Xml.mapSupportedXmlTags_=function(t){for(var s,n={mutation:[],comment:[],data:[],field:[],input:[],next:[]},r=0;s=t.childNodes[r];r++)if(s.nodeType!=e.utils.dom.NodeType.TEXT_NODE)switch(s.nodeName.toLowerCase()){case"mutation":n.mutation.push(s);break;case"comment":if(!e.Comment){console.warn("Missing require for Blockly.Comment, ignoring block comment.");break}n.comment.push(s);break;case"data":n.data.push(s);break;case"title":case"field":n.field.push(s);break;case"value":case"statement":n.input.push(s);break;case"next":n.next.push(s);break;default:console.warn("Ignoring unknown tag: "+s.nodeName)}return n},e.Xml.applyMutationTagNodes_=function(t,n){for(var u,r=!1,s=0;u=t[s];s++)n.domToMutation&&(n.domToMutation(u),n.initSvg&&(r=!0));return r},e.Xml.applyCommentTagNodes_=function(t,n){for(var s,r=0;s=t[r];r++){var u=s.textContent,y="true"==s.getAttribute("pinned"),x=parseInt(s.getAttribute("w"),10);s=parseInt(s.getAttribute("h"),10),n.setCommentText(u),n.commentModel.pinned=y,isNaN(x)||isNaN(s)||(n.commentModel.size=new e.utils.Size(x,s)),y&&n.getCommentIcon&&!n.isInFlyout&&setTimeout(function(){n.getCommentIcon().setVisible(!0)},1)}},e.Xml.applyDataTagNodes_=function(t,n){for(var s,r=0;s=t[r];r++)n.data=s.textContent},e.Xml.applyFieldTagNodes_=function(t,n){for(var s,r=0;s=t[r];r++){var u=s.getAttribute("name");e.Xml.domToField_(n,u,s)}},e.Xml.findChildBlocks_=function(t){for(var s,n={childBlockElement:null,childShadowElement:null},r=0;s=t.childNodes[r];r++)s.nodeType==e.utils.dom.NodeType.ELEMENT_NODE&&("block"==s.nodeName.toLowerCase()?n.childBlockElement=s:"shadow"==s.nodeName.toLowerCase()&&(n.childShadowElement=s));return n},e.Xml.applyInputTagNodes_=function(t,n,r,s){for(var y,u=0;y=t[u];u++){var x=y.getAttribute("name"),B=r.getInput(x);if(!B){console.warn("Ignoring non-existent input "+x+" in block "+s);break}if((y=e.Xml.findChildBlocks_(y)).childBlockElement){if(!B.connection)throw TypeError("Input connection does not exist.");e.Xml.domToBlockHeadless_(y.childBlockElement,n,B.connection,!1)}y.childShadowElement&&B.connection.setShadowDom(y.childShadowElement)}},e.Xml.applyNextTagNodes_=function(t,n,r){for(var u,s=0;u=t[s];s++){if((u=e.Xml.findChildBlocks_(u)).childBlockElement){if(!r.nextConnection)throw TypeError("Next statement does not exist.");if(r.nextConnection.isConnected())throw TypeError("Next statement is already connected.");e.Xml.domToBlockHeadless_(u.childBlockElement,n,r.nextConnection,!0)}u.childShadowElement&&r.nextConnection&&r.nextConnection.setShadowDom(u.childShadowElement)}},e.Xml.domToBlockHeadless_=function(t,n,r,s){var u=t.getAttribute("type");if(!u)throw TypeError("Block type unspecified: "+t.outerHTML);var y=t.getAttribute("id");y=n.newBlock(u,y);var x=e.Xml.mapSupportedXmlTags_(t),B=e.Xml.applyMutationTagNodes_(x.mutation,y);if(e.Xml.applyCommentTagNodes_(x.comment,y),e.Xml.applyDataTagNodes_(x.data,y),r)if(s){if(!y.previousConnection)throw TypeError("Next block does not have previous statement.");r.connect(y.previousConnection)}else if(y.outputConnection)r.connect(y.outputConnection);else{if(!y.previousConnection)throw TypeError("Child block does not have output or previous statement.");r.connect(y.previousConnection)}if(e.Xml.applyFieldTagNodes_(x.field,y),e.Xml.applyInputTagNodes_(x.input,n,y,u),e.Xml.applyNextTagNodes_(x.next,n,y),B&&y.initSvg(),(n=t.getAttribute("inline"))&&y.setInputsInline("true"==n),(n=t.getAttribute("disabled"))&&y.setEnabled("true"!=n&&"disabled"!=n),(n=t.getAttribute("deletable"))&&y.setDeletable("true"==n),(n=t.getAttribute("movable"))&&y.setMovable("true"==n),(n=t.getAttribute("editable"))&&y.setEditable("true"==n),(n=t.getAttribute("collapsed"))&&y.setCollapsed("true"==n),"shadow"==t.nodeName.toLowerCase()){for(t=y.getChildren(!1),n=0;r=t[n];n++)if(!r.isShadow())throw TypeError("Shadow block not allowed non-shadow child.");if(y.getVarModels().length)throw TypeError("Shadow blocks cannot have variable references.");y.setShadow(!0)}return y},e.Xml.domToField_=function(t,n,r){var s=t.getField(n);s?s.fromXml(r):console.warn("Ignoring non-existent field "+n+" in block "+t.type)},e.Xml.deleteNext=function(t){for(var r,n=0;r=t.childNodes[n];n++)if("next"==r.nodeName.toLowerCase()){t.removeChild(r);break}},e.Events.BlockBase=function(t){e.Events.BlockBase.superClass_.constructor.call(this),this.blockId=(this.isBlank=void 0===t)?"":t.id,this.workspaceId=this.isBlank?"":t.workspace.id},e.utils.object.inherits(e.Events.BlockBase,e.Events.Abstract),e.Events.BlockBase.prototype.toJson=function(){var t=e.Events.BlockBase.superClass_.toJson.call(this);return t.blockId=this.blockId,t},e.Events.BlockBase.prototype.fromJson=function(t){e.Events.BlockBase.superClass_.fromJson.call(this,t),this.blockId=t.blockId},e.Events.BlockChange=function(t,n,r,s,u){e.Events.Change.superClass_.constructor.call(this,t),t&&(this.element=void 0===n?"":n,this.name=void 0===r?"":r,this.oldValue=void 0===s?"":s,this.newValue=void 0===u?"":u)},e.utils.object.inherits(e.Events.BlockChange,e.Events.BlockBase),e.Events.Change=e.Events.BlockChange,e.Events.BlockChange.prototype.type=e.Events.CHANGE,e.Events.BlockChange.prototype.toJson=function(){var t=e.Events.BlockChange.superClass_.toJson.call(this);return t.element=this.element,this.name&&(t.name=this.name),t.oldValue=this.oldValue,t.newValue=this.newValue,t},e.Events.BlockChange.prototype.fromJson=function(t){e.Events.BlockChange.superClass_.fromJson.call(this,t),this.element=t.element,this.name=t.name,this.oldValue=t.oldValue,this.newValue=t.newValue},e.Events.BlockChange.prototype.isNull=function(){return this.oldValue==this.newValue},e.Events.BlockChange.prototype.run=function(t){var n=this.getEventWorkspace_().getBlockById(this.blockId);if(n)switch(n.mutator&&n.mutator.setVisible(!1),t=t?this.newValue:this.oldValue,this.element){case"field":(n=n.getField(this.name))?n.setValue(t):console.warn("Can't set non-existent field: "+this.name);break;case"comment":n.setCommentText(t||null);break;case"collapsed":n.setCollapsed(!!t);break;case"disabled":n.setEnabled(!t);break;case"inline":n.setInputsInline(!!t);break;case"mutation":var r="";if(n.mutationToDom&&(r=(r=n.mutationToDom())&&e.Xml.domToText(r)),n.domToMutation){var s=e.Xml.textToDom(t||"<mutation/>");n.domToMutation(s)}e.Events.fire(new e.Events.BlockChange(n,"mutation",null,r,t));break;default:console.warn("Unknown change type: "+this.element)}else console.warn("Can't change non-existent block: "+this.blockId)},e.Events.Create=function(t){e.Events.Create.superClass_.constructor.call(this,t),t&&(t.isShadow()&&(this.recordUndo=!1),this.xml=t.workspace.rendered?e.Xml.blockToDomWithXY(t):e.Xml.blockToDom(t),this.ids=e.Events.getDescendantIds(t))},e.utils.object.inherits(e.Events.Create,e.Events.BlockBase),e.Events.BlockCreate=e.Events.Create,e.Events.Create.prototype.type=e.Events.CREATE,e.Events.Create.prototype.toJson=function(){var t=e.Events.Create.superClass_.toJson.call(this);return t.xml=e.Xml.domToText(this.xml),t.ids=this.ids,this.recordUndo||(t.recordUndo=this.recordUndo),t},e.Events.Create.prototype.fromJson=function(t){e.Events.Create.superClass_.fromJson.call(this,t),this.xml=e.Xml.textToDom(t.xml),this.ids=t.ids,void 0!==t.recordUndo&&(this.recordUndo=t.recordUndo)},e.Events.Create.prototype.run=function(t){var n=this.getEventWorkspace_();if(t)(t=e.utils.xml.createElement("xml")).appendChild(this.xml),e.Xml.domToWorkspace(t,n);else{t=0;for(var r;r=this.ids[t];t++){var s=n.getBlockById(r);s?s.dispose(!1):r==this.blockId&&console.warn("Can't uncreate non-existent block: "+r)}}},e.Events.Delete=function(t){if(e.Events.Delete.superClass_.constructor.call(this,t),t){if(t.getParent())throw Error("Connected blocks cannot be deleted.");t.isShadow()&&(this.recordUndo=!1),this.oldXml=t.workspace.rendered?e.Xml.blockToDomWithXY(t):e.Xml.blockToDom(t),this.ids=e.Events.getDescendantIds(t)}},e.utils.object.inherits(e.Events.Delete,e.Events.BlockBase),e.Events.BlockDelete=e.Events.Delete,e.Events.Delete.prototype.type=e.Events.DELETE,e.Events.Delete.prototype.toJson=function(){var t=e.Events.Delete.superClass_.toJson.call(this);return t.oldXml=e.Xml.domToText(this.oldXml),t.ids=this.ids,this.recordUndo||(t.recordUndo=this.recordUndo),t},e.Events.Delete.prototype.fromJson=function(t){e.Events.Delete.superClass_.fromJson.call(this,t),this.oldXml=e.Xml.textToDom(t.oldXml),this.ids=t.ids,void 0!==t.recordUndo&&(this.recordUndo=t.recordUndo)},e.Events.Delete.prototype.run=function(t){var n=this.getEventWorkspace_();if(t){t=0;for(var r;r=this.ids[t];t++){var s=n.getBlockById(r);s?s.dispose(!1):r==this.blockId&&console.warn("Can't delete non-existent block: "+r)}}else(t=e.utils.xml.createElement("xml")).appendChild(this.oldXml),e.Xml.domToWorkspace(t,n)},e.Events.Move=function(t){e.Events.Move.superClass_.constructor.call(this,t),t&&(t.isShadow()&&(this.recordUndo=!1),t=this.currentLocation_(),this.oldParentId=t.parentId,this.oldInputName=t.inputName,this.oldCoordinate=t.coordinate)},e.utils.object.inherits(e.Events.Move,e.Events.BlockBase),e.Events.BlockMove=e.Events.Move,e.Events.Move.prototype.type=e.Events.MOVE,e.Events.Move.prototype.toJson=function(){var t=e.Events.Move.superClass_.toJson.call(this);return this.newParentId&&(t.newParentId=this.newParentId),this.newInputName&&(t.newInputName=this.newInputName),this.newCoordinate&&(t.newCoordinate=Math.round(this.newCoordinate.x)+","+Math.round(this.newCoordinate.y)),this.recordUndo||(t.recordUndo=this.recordUndo),t},e.Events.Move.prototype.fromJson=function(t){if(e.Events.Move.superClass_.fromJson.call(this,t),this.newParentId=t.newParentId,this.newInputName=t.newInputName,t.newCoordinate){var n=t.newCoordinate.split(",");this.newCoordinate=new e.utils.Coordinate(Number(n[0]),Number(n[1]))}void 0!==t.recordUndo&&(this.recordUndo=t.recordUndo)},e.Events.Move.prototype.recordNew=function(){var t=this.currentLocation_();this.newParentId=t.parentId,this.newInputName=t.inputName,this.newCoordinate=t.coordinate},e.Events.Move.prototype.currentLocation_=function(){var t=this.getEventWorkspace_().getBlockById(this.blockId),n={},r=t.getParent();return r?(n.parentId=r.id,(t=r.getInputWithBlock(t))&&(n.inputName=t.name)):n.coordinate=t.getRelativeToSurfaceXY(),n},e.Events.Move.prototype.isNull=function(){return this.oldParentId==this.newParentId&&this.oldInputName==this.newInputName&&e.utils.Coordinate.equals(this.oldCoordinate,this.newCoordinate)},e.Events.Move.prototype.run=function(t){var n=this.getEventWorkspace_(),r=n.getBlockById(this.blockId);if(r){var s=t?this.newParentId:this.oldParentId,u=t?this.newInputName:this.oldInputName,y=t?this.newCoordinate:this.oldCoordinate;if(t=null,s&&!(t=n.getBlockById(s)))return void console.warn("Can't connect to non-existent block: "+s);if(r.getParent()&&r.unplug(),y)u=r.getRelativeToSurfaceXY(),r.moveBy(y.x-u.x,y.y-u.y);else{if(n=(r=r.outputConnection||r.previousConnection).type,u){if(t=t.getInput(u))var x=t.connection}else n==e.connectionTypes.PREVIOUS_STATEMENT&&(x=t.nextConnection);x?r.connect(x):console.warn("Can't connect to non-existent input: "+u)}}else console.warn("Can't move non-existent block: "+this.blockId)},e.registry.register(e.registry.Type.EVENT,e.Events.CREATE,e.Events.Create),e.registry.register(e.registry.Type.EVENT,e.Events.DELETE,e.Events.Delete),e.registry.register(e.registry.Type.EVENT,e.Events.CHANGE,e.Events.BlockChange),e.registry.register(e.registry.Type.EVENT,e.Events.MOVE,e.Events.Move),e.Events.FinishedLoading=function(t){this.isBlank=void 0===t,this.workspaceId=t?t.id:"",this.group=e.Events.getGroup(),this.recordUndo=!1},e.utils.object.inherits(e.Events.FinishedLoading,e.Events.Abstract),e.Events.FinishedLoading.prototype.type=e.Events.FINISHED_LOADING,e.Events.FinishedLoading.prototype.toJson=function(){var t={type:this.type};return this.group&&(t.group=this.group),this.workspaceId&&(t.workspaceId=this.workspaceId),t},e.Events.FinishedLoading.prototype.fromJson=function(t){this.isBlank=!1,this.workspaceId=t.workspaceId,this.group=t.group},e.registry.register(e.registry.Type.EVENT,e.Events.FINISHED_LOADING,e.Events.FinishedLoading),e.Events.UiBase=function(t){e.Events.UiBase.superClass_.constructor.call(this),this.isBlank=void 0===t,this.workspaceId=t||"",this.recordUndo=!1},e.utils.object.inherits(e.Events.UiBase,e.Events.Abstract),e.Events.UiBase.prototype.isUiEvent=!0,e.Events.Ui=function(t,n,r,s){e.Events.Ui.superClass_.constructor.call(this,t?t.workspace.id:void 0),this.blockId=t?t.id:null,this.element=void 0===n?"":n,this.oldValue=void 0===r?"":r,this.newValue=void 0===s?"":s},e.utils.object.inherits(e.Events.Ui,e.Events.UiBase),e.Events.Ui.prototype.type=e.Events.UI,e.Events.Ui.prototype.toJson=function(){var t=e.Events.Ui.superClass_.toJson.call(this);return t.element=this.element,void 0!==this.newValue&&(t.newValue=this.newValue),this.blockId&&(t.blockId=this.blockId),t},e.Events.Ui.prototype.fromJson=function(t){e.Events.Ui.superClass_.fromJson.call(this,t),this.element=t.element,this.newValue=t.newValue,this.blockId=t.blockId},e.registry.register(e.registry.Type.EVENT,e.Events.UI,e.Events.Ui),e.Events.VarBase=function(t){e.Events.VarBase.superClass_.constructor.call(this),this.varId=(this.isBlank=void 0===t)?"":t.getId(),this.workspaceId=this.isBlank?"":t.workspace.id},e.utils.object.inherits(e.Events.VarBase,e.Events.Abstract),e.Events.VarBase.prototype.toJson=function(){var t=e.Events.VarBase.superClass_.toJson.call(this);return t.varId=this.varId,t},e.Events.VarBase.prototype.fromJson=function(t){e.Events.VarBase.superClass_.toJson.call(this),this.varId=t.varId},e.Events.VarCreate=function(t){e.Events.VarCreate.superClass_.constructor.call(this,t),t&&(this.varType=t.type,this.varName=t.name)},e.utils.object.inherits(e.Events.VarCreate,e.Events.VarBase),e.Events.VarCreate.prototype.type=e.Events.VAR_CREATE,e.Events.VarCreate.prototype.toJson=function(){var t=e.Events.VarCreate.superClass_.toJson.call(this);return t.varType=this.varType,t.varName=this.varName,t},e.Events.VarCreate.prototype.fromJson=function(t){e.Events.VarCreate.superClass_.fromJson.call(this,t),this.varType=t.varType,this.varName=t.varName},e.Events.VarCreate.prototype.run=function(t){var n=this.getEventWorkspace_();t?n.createVariable(this.varName,this.varType,this.varId):n.deleteVariableById(this.varId)},e.Events.VarDelete=function(t){e.Events.VarDelete.superClass_.constructor.call(this,t),t&&(this.varType=t.type,this.varName=t.name)},e.utils.object.inherits(e.Events.VarDelete,e.Events.VarBase),e.Events.VarDelete.prototype.type=e.Events.VAR_DELETE,e.Events.VarDelete.prototype.toJson=function(){var t=e.Events.VarDelete.superClass_.toJson.call(this);return t.varType=this.varType,t.varName=this.varName,t},e.Events.VarDelete.prototype.fromJson=function(t){e.Events.VarDelete.superClass_.fromJson.call(this,t),this.varType=t.varType,this.varName=t.varName},e.Events.VarDelete.prototype.run=function(t){var n=this.getEventWorkspace_();t?n.deleteVariableById(this.varId):n.createVariable(this.varName,this.varType,this.varId)},e.Events.VarRename=function(t,n){e.Events.VarRename.superClass_.constructor.call(this,t),t&&(this.oldName=t.name,this.newName=void 0===n?"":n)},e.utils.object.inherits(e.Events.VarRename,e.Events.VarBase),e.Events.VarRename.prototype.type=e.Events.VAR_RENAME,e.Events.VarRename.prototype.toJson=function(){var t=e.Events.VarRename.superClass_.toJson.call(this);return t.oldName=this.oldName,t.newName=this.newName,t},e.Events.VarRename.prototype.fromJson=function(t){e.Events.VarRename.superClass_.fromJson.call(this,t),this.oldName=t.oldName,this.newName=t.newName},e.Events.VarRename.prototype.run=function(t){this.getEventWorkspace_().renameVariableById(this.varId,t?this.newName:this.oldName)},e.registry.register(e.registry.Type.EVENT,e.Events.VAR_CREATE,e.Events.VarCreate),e.registry.register(e.registry.Type.EVENT,e.Events.VAR_DELETE,e.Events.VarDelete),e.registry.register(e.registry.Type.EVENT,e.Events.VAR_RENAME,e.Events.VarRename),e.BlockDragSurfaceSvg=function(t){this.container_=t,this.createDom()},e.BlockDragSurfaceSvg.prototype.SVG_=null,e.BlockDragSurfaceSvg.prototype.dragGroup_=null,e.BlockDragSurfaceSvg.prototype.container_=null,e.BlockDragSurfaceSvg.prototype.scale_=1,e.BlockDragSurfaceSvg.prototype.surfaceXY_=null,e.BlockDragSurfaceSvg.prototype.childSurfaceXY_=new e.utils.Coordinate(0,0),e.BlockDragSurfaceSvg.prototype.createDom=function(){this.SVG_||(this.SVG_=e.utils.dom.createSvgElement(e.utils.Svg.SVG,{xmlns:e.utils.dom.SVG_NS,"xmlns:html":e.utils.dom.HTML_NS,"xmlns:xlink":e.utils.dom.XLINK_NS,version:"1.1",class:"blocklyBlockDragSurface"},this.container_),this.dragGroup_=e.utils.dom.createSvgElement(e.utils.Svg.G,{},this.SVG_))},e.BlockDragSurfaceSvg.prototype.setBlocksAndShow=function(t){if(this.dragGroup_.childNodes.length)throw Error("Already dragging a block.");this.dragGroup_.appendChild(t),this.SVG_.style.display="block",this.surfaceXY_=new e.utils.Coordinate(0,0)},e.BlockDragSurfaceSvg.prototype.translateAndScaleGroup=function(t,n,r){this.scale_=r,t=t.toFixed(0),n=n.toFixed(0),this.childSurfaceXY_.x=parseInt(t,10),this.childSurfaceXY_.y=parseInt(n,10),this.dragGroup_.setAttribute("transform","translate("+t+","+n+") scale("+r+")")},e.BlockDragSurfaceSvg.prototype.translateSurfaceInternal_=function(){var t=this.surfaceXY_.x,n=this.surfaceXY_.y;t=t.toFixed(0),n=n.toFixed(0),this.SVG_.style.display="block",e.utils.dom.setCssTransform(this.SVG_,"translate3d("+t+"px, "+n+"px, 0px)")},e.BlockDragSurfaceSvg.prototype.translateBy=function(t,n){this.surfaceXY_=new e.utils.Coordinate(this.surfaceXY_.x+t,this.surfaceXY_.y+n),this.translateSurfaceInternal_()},e.BlockDragSurfaceSvg.prototype.translateSurface=function(t,n){this.surfaceXY_=new e.utils.Coordinate(t*this.scale_,n*this.scale_),this.translateSurfaceInternal_()},e.BlockDragSurfaceSvg.prototype.getSurfaceTranslation=function(){var t=e.utils.getRelativeXY(this.SVG_);return new e.utils.Coordinate(t.x/this.scale_,t.y/this.scale_)},e.BlockDragSurfaceSvg.prototype.getGroup=function(){return this.dragGroup_},e.BlockDragSurfaceSvg.prototype.getSvgRoot=function(){return this.SVG_},e.BlockDragSurfaceSvg.prototype.getCurrentBlock=function(){return this.dragGroup_.firstChild},e.BlockDragSurfaceSvg.prototype.getWsTranslation=function(){return this.childSurfaceXY_.clone()},e.BlockDragSurfaceSvg.prototype.clearAndHide=function(t){if(t?t.appendChild(this.getCurrentBlock()):this.dragGroup_.removeChild(this.getCurrentBlock()),this.SVG_.style.display="none",this.dragGroup_.childNodes.length)throw Error("Drag group was not cleared.");this.surfaceXY_=null},e.Css={},e.Css.injected_=!1,e.Css.register=function(t){if(e.Css.injected_)throw Error("CSS already injected");Array.prototype.push.apply(e.Css.CONTENT,t),t.length=0},e.Css.inject=function(t,n){if(!e.Css.injected_){e.Css.injected_=!0;var r=e.Css.CONTENT.join("\n");e.Css.CONTENT.length=0,t&&(t=n.replace(/[\\/]$/,""),r=r.replace(/<<<PATH>>>/g,t),(t=document.createElement("style")).id="blockly-common-style",r=document.createTextNode(r),t.appendChild(r),document.head.insertBefore(t,document.head.firstChild))}},e.Css.CONTENT=[".blocklySvg {","background-color: #fff;","outline: none;","overflow: hidden;","position: absolute;","display: block;","}",".blocklyWidgetDiv {","display: none;","position: absolute;","z-index: 99999;","}",".injectionDiv {","height: 100%;","position: relative;","overflow: hidden;","touch-action: none;","}",".blocklyNonSelectable {","user-select: none;","-ms-user-select: none;","-webkit-user-select: none;","}",".blocklyWsDragSurface {","display: none;","position: absolute;","top: 0;","left: 0;","}",".blocklyWsDragSurface.blocklyOverflowVisible {","overflow: visible;","}",".blocklyBlockDragSurface {","display: none;","position: absolute;","top: 0;","left: 0;","right: 0;","bottom: 0;","overflow: visible !important;","z-index: 50;","}",".blocklyBlockCanvas.blocklyCanvasTransitioning,",".blocklyBubbleCanvas.blocklyCanvasTransitioning {","transition: transform .5s;","}",".blocklyTooltipDiv {","background-color: #ffffc7;","border: 1px solid #ddc;","box-shadow: 4px 4px 20px 1px rgba(0,0,0,.15);","color: #000;","display: none;","font: 9pt sans-serif;","opacity: .9;","padding: 2px;","position: absolute;","z-index: 100000;","}",".blocklyDropDownDiv {","position: absolute;","left: 0;","top: 0;","z-index: 1000;","display: none;","border: 1px solid;","border-color: #dadce0;","background-color: #fff;","border-radius: 2px;","padding: 4px;","box-shadow: 0 0 3px 1px rgba(0,0,0,.3);","}",".blocklyDropDownDiv.blocklyFocused {","box-shadow: 0 0 6px 1px rgba(0,0,0,.3);","}",".blocklyDropDownContent {","max-height: 300px;","overflow: auto;","overflow-x: hidden;","position: relative;","}",".blocklyDropDownArrow {","position: absolute;","left: 0;","top: 0;","width: 16px;","height: 16px;","z-index: -1;","background-color: inherit;","border-color: inherit;","}",".blocklyDropDownButton {","display: inline-block;","float: left;","padding: 0;","margin: 4px;","border-radius: 4px;","outline: none;","border: 1px solid;","transition: box-shadow .1s;","cursor: pointer;","}",".blocklyArrowTop {","border-top: 1px solid;","border-left: 1px solid;","border-top-left-radius: 4px;","border-color: inherit;","}",".blocklyArrowBottom {","border-bottom: 1px solid;","border-right: 1px solid;","border-bottom-right-radius: 4px;","border-color: inherit;","}",".blocklyResizeSE {","cursor: se-resize;","fill: #aaa;","}",".blocklyResizeSW {","cursor: sw-resize;","fill: #aaa;","}",".blocklyResizeLine {","stroke: #515A5A;","stroke-width: 1;","}",".blocklyHighlightedConnectionPath {","fill: none;","stroke: #fc3;","stroke-width: 4px;","}",".blocklyPathLight {","fill: none;","stroke-linecap: round;","stroke-width: 1;","}",".blocklySelected>.blocklyPathLight {","display: none;","}",".blocklyDraggable {",'cursor: url("<<<PATH>>>/handopen.cur"), auto;',"cursor: grab;","cursor: -webkit-grab;","}",".blocklyDragging {",'cursor: url("<<<PATH>>>/handclosed.cur"), auto;',"cursor: grabbing;","cursor: -webkit-grabbing;","}",".blocklyDraggable:active {",'cursor: url("<<<PATH>>>/handclosed.cur"), auto;',"cursor: grabbing;","cursor: -webkit-grabbing;","}",".blocklyBlockDragSurface .blocklyDraggable {",'cursor: url("<<<PATH>>>/handclosed.cur"), auto;',"cursor: grabbing;","cursor: -webkit-grabbing;","}",".blocklyDragging.blocklyDraggingDelete {",'cursor: url("<<<PATH>>>/handdelete.cur"), auto;',"}",".blocklyDragging>.blocklyPath,",".blocklyDragging>.blocklyPathLight {","fill-opacity: .8;","stroke-opacity: .8;","}",".blocklyDragging>.blocklyPathDark {","display: none;","}",".blocklyDisabled>.blocklyPath {","fill-opacity: .5;","stroke-opacity: .5;","}",".blocklyDisabled>.blocklyPathLight,",".blocklyDisabled>.blocklyPathDark {","display: none;","}",".blocklyInsertionMarker>.blocklyPath,",".blocklyInsertionMarker>.blocklyPathLight,",".blocklyInsertionMarker>.blocklyPathDark {","fill-opacity: .2;","stroke: none;","}",".blocklyMultilineText {","font-family: monospace;","}",".blocklyNonEditableText>text {","pointer-events: none;","}",".blocklyFlyout {","position: absolute;","z-index: 20;","}",".blocklyText text {","cursor: default;","}",".blocklySvg text,",".blocklyBlockDragSurface text {","user-select: none;","-ms-user-select: none;","-webkit-user-select: none;","cursor: inherit;","}",".blocklyHidden {","display: none;","}",".blocklyFieldDropdown:not(.blocklyHidden) {","display: block;","}",".blocklyIconGroup {","cursor: default;","}",".blocklyIconGroup:not(:hover),",".blocklyIconGroupReadonly {","opacity: .6;","}",".blocklyIconShape {","fill: #00f;","stroke: #fff;","stroke-width: 1px;","}",".blocklyIconSymbol {","fill: #fff;","}",".blocklyMinimalBody {","margin: 0;","padding: 0;","}",".blocklyHtmlInput {","border: none;","border-radius: 4px;","height: 100%;","margin: 0;","outline: none;","padding: 0;","width: 100%;","text-align: center;","display: block;","box-sizing: border-box;","}",".blocklyHtmlInput::-ms-clear {","display: none;","}",".blocklyMainBackground {","stroke-width: 1;","stroke: #c6c6c6;","}",".blocklyMutatorBackground {","fill: #fff;","stroke: #ddd;","stroke-width: 1;","}",".blocklyFlyoutBackground {","fill: #ddd;","fill-opacity: .8;","}",".blocklyMainWorkspaceScrollbar {","z-index: 20;","}",".blocklyFlyoutScrollbar {","z-index: 30;","}",".blocklyScrollbarHorizontal,",".blocklyScrollbarVertical {","position: absolute;","outline: none;","}",".blocklyScrollbarBackground {","opacity: 0;","}",".blocklyScrollbarHandle {","fill: #ccc;","}",".blocklyScrollbarBackground:hover+.blocklyScrollbarHandle,",".blocklyScrollbarHandle:hover {","fill: #bbb;","}",".blocklyFlyout .blocklyScrollbarHandle {","fill: #bbb;","}",".blocklyFlyout .blocklyScrollbarBackground:hover+.blocklyScrollbarHandle,",".blocklyFlyout .blocklyScrollbarHandle:hover {","fill: #aaa;","}",".blocklyInvalidInput {","background: #faa;","}",".blocklyVerticalMarker {","stroke-width: 3px;","fill: rgba(255,255,255,.5);","pointer-events: none;","}",".blocklyComputeCanvas {","position: absolute;","width: 0;","height: 0;","}",".blocklyNoPointerEvents {","pointer-events: none;","}",".blocklyContextMenu {","border-radius: 4px;","max-height: 100%;","}",".blocklyDropdownMenu {","border-radius: 2px;","padding: 0 !important;","}",".blocklyDropdownMenu .blocklyMenuItem {","padding-left: 28px;","}",".blocklyDropdownMenu .blocklyMenuItemRtl {","padding-left: 5px;","padding-right: 28px;","}",".blocklyWidgetDiv .blocklyMenu {","background: #fff;","border: 1px solid transparent;","box-shadow: 0 0 3px 1px rgba(0,0,0,.3);","font: normal 13px Arial, sans-serif;","margin: 0;","outline: none;","padding: 4px 0;","position: absolute;","overflow-y: auto;","overflow-x: hidden;","max-height: 100%;","z-index: 20000;","}",".blocklyWidgetDiv .blocklyMenu.blocklyFocused {","box-shadow: 0 0 6px 1px rgba(0,0,0,.3);","}",".blocklyDropDownDiv .blocklyMenu {","background: inherit;","border: inherit;",'font: normal 13px "Helvetica Neue", Helvetica, sans-serif;',"outline: none;","position: relative;","z-index: 20000;","}",".blocklyMenuItem {","border: none;","color: #000;","cursor: pointer;","list-style: none;","margin: 0;","min-width: 7em;","padding: 6px 15px;","white-space: nowrap;","}",".blocklyMenuItemDisabled {","color: #ccc;","cursor: inherit;","}",".blocklyMenuItemHighlight {","background-color: rgba(0,0,0,.1);","}",".blocklyMenuItemCheckbox {","height: 16px;","position: absolute;","width: 16px;","}",".blocklyMenuItemSelected .blocklyMenuItemCheckbox {","background: url(<<<PATH>>>/sprites.png) no-repeat -48px -16px;","float: left;","margin-left: -24px;","position: static;","}",".blocklyMenuItemRtl .blocklyMenuItemCheckbox {","float: right;","margin-right: -24px;","}"],e.Grid=function(t,n){this.gridPattern_=t,this.spacing_=n.spacing,this.length_=n.length,this.line2_=(this.line1_=t.firstChild)&&this.line1_.nextSibling,this.snapToGrid_=n.snap},e.Grid.prototype.scale_=1,e.Grid.prototype.dispose=function(){this.gridPattern_=null},e.Grid.prototype.shouldSnap=function(){return this.snapToGrid_},e.Grid.prototype.getSpacing=function(){return this.spacing_},e.Grid.prototype.getPatternId=function(){return this.gridPattern_.id},e.Grid.prototype.update=function(t){this.scale_=t;var n=this.spacing_*t||100;this.gridPattern_.setAttribute("width",n),this.gridPattern_.setAttribute("height",n);var r=(n=Math.floor(this.spacing_/2)+.5)-this.length_/2,s=n+this.length_/2;this.setLineAttributes_(this.line1_,t,r*=t,s*=t,n*=t,n),this.setLineAttributes_(this.line2_,t,n,n,r,s)},e.Grid.prototype.setLineAttributes_=function(t,n,r,s,u,y){t&&(t.setAttribute("stroke-width",n),t.setAttribute("x1",r),t.setAttribute("y1",u),t.setAttribute("x2",s),t.setAttribute("y2",y))},e.Grid.prototype.moveTo=function(t,n){this.gridPattern_.setAttribute("x",t),this.gridPattern_.setAttribute("y",n),(e.utils.userAgent.IE||e.utils.userAgent.EDGE)&&this.update(this.scale_)},e.Grid.createDom=function(t,n,r){return t=e.utils.dom.createSvgElement(e.utils.Svg.PATTERN,{id:"blocklyGridPattern"+t,patternUnits:"userSpaceOnUse"},r),0<n.length&&0<n.spacing?(e.utils.dom.createSvgElement(e.utils.Svg.LINE,{stroke:n.colour},t),1<n.length&&e.utils.dom.createSvgElement(e.utils.Svg.LINE,{stroke:n.colour},t)):e.utils.dom.createSvgElement(e.utils.Svg.LINE,{},t),t},e.Theme=function(t,n,r,s){this.name=t,this.blockStyles=n||Object.create(null),this.categoryStyles=r||Object.create(null),this.componentStyles=s||Object.create(null),this.fontStyle=Object.create(null),this.startHats=null,e.registry.register(e.registry.Type.THEME,t,this)},e.Theme.prototype.getClassName=function(){return this.name+"-theme"},e.Theme.prototype.setBlockStyle=function(t,n){this.blockStyles[t]=n},e.Theme.prototype.setCategoryStyle=function(t,n){this.categoryStyles[t]=n},e.Theme.prototype.getComponentStyle=function(t){return(t=this.componentStyles[t])&&"string"==typeof t&&this.getComponentStyle(t)?this.getComponentStyle(t):t?String(t):null},e.Theme.prototype.setComponentStyle=function(t,n){this.componentStyles[t]=n},e.Theme.prototype.setFontStyle=function(t){this.fontStyle=t},e.Theme.prototype.setStartHats=function(t){this.startHats=t},e.Theme.defineTheme=function(t,n){var r=new e.Theme(t),s=n.base;return s&&("string"==typeof s&&(s=e.registry.getObject(e.registry.Type.THEME,s)),s instanceof e.Theme&&(e.utils.object.deepMerge(r,s),r.name=t)),e.utils.object.deepMerge(r.blockStyles,n.blockStyles),e.utils.object.deepMerge(r.categoryStyles,n.categoryStyles),e.utils.object.deepMerge(r.componentStyles,n.componentStyles),e.utils.object.deepMerge(r.fontStyle,n.fontStyle),null!=n.startHats&&(r.startHats=n.startHats),r},e.Themes={},e.Themes.Classic={},e.Themes.Classic.defaultBlockStyles={colour_blocks:{colourPrimary:"20"},list_blocks:{colourPrimary:"260"},logic_blocks:{colourPrimary:"210"},loop_blocks:{colourPrimary:"120"},math_blocks:{colourPrimary:"230"},procedure_blocks:{colourPrimary:"290"},text_blocks:{colourPrimary:"160"},variable_blocks:{colourPrimary:"330"},variable_dynamic_blocks:{colourPrimary:"310"},hat_blocks:{colourPrimary:"330",hat:"cap"}},e.Themes.Classic.categoryStyles={colour_category:{colour:"20"},list_category:{colour:"260"},logic_category:{colour:"210"},loop_category:{colour:"120"},math_category:{colour:"230"},procedure_category:{colour:"290"},text_category:{colour:"160"},variable_category:{colour:"330"},variable_dynamic_category:{colour:"310"}},e.Themes.Classic=new e.Theme("classic",e.Themes.Classic.defaultBlockStyles,e.Themes.Classic.categoryStyles),e.utils.IdGenerator={},e.utils.IdGenerator.nextId_=0,e.utils.IdGenerator.getNextUniqueId=function(){return"blockly-"+(e.utils.IdGenerator.nextId_++).toString(36)},e.utils.Metrics=function(){},e.utils.toolbox={},e.utils.toolbox.CATEGORY_TOOLBOX_KIND="categoryToolbox",e.utils.toolbox.FLYOUT_TOOLBOX_KIND="flyoutToolbox",e.utils.toolbox.Position={TOP:0,BOTTOM:1,LEFT:2,RIGHT:3},e.utils.toolbox.convertToolboxDefToJson=function(t){return t?((t instanceof Element||"string"==typeof t)&&(t=e.utils.toolbox.parseToolboxTree(t),t=e.utils.toolbox.convertToToolboxJson_(t)),e.utils.toolbox.validateToolbox_(t),t):null},e.utils.toolbox.validateToolbox_=function(t){var n=t.kind;if(t=t.contents,n&&n!=e.utils.toolbox.FLYOUT_TOOLBOX_KIND&&n!=e.utils.toolbox.CATEGORY_TOOLBOX_KIND)throw Error("Invalid toolbox kind "+n+". Please supply either "+e.utils.toolbox.FLYOUT_TOOLBOX_KIND+" or "+e.utils.toolbox.CATEGORY_TOOLBOX_KIND);if(!t)throw Error("Toolbox must have a contents attribute.")},e.utils.toolbox.convertFlyoutDefToJsonArray=function(t){return t?t.contents?t.contents:Array.isArray(t)&&0<t.length&&!t[0].nodeType?t:e.utils.toolbox.xmlToJsonArray_(t):[]},e.utils.toolbox.hasCategories=function(t){if(!t)return!1;var n=t.kind;return n?n==e.utils.toolbox.CATEGORY_TOOLBOX_KIND:!!t.contents.filter(function(r){return"CATEGORY"==r.kind.toUpperCase()}).length},e.utils.toolbox.isCategoryCollapsible=function(t){return!(!t||!t.contents||!t.contents.filter(function(n){return"CATEGORY"==n.kind.toUpperCase()}).length)},e.utils.toolbox.convertToToolboxJson_=function(t){var n={contents:e.utils.toolbox.xmlToJsonArray_(t)};return t instanceof Node&&e.utils.toolbox.addAttributes_(t,n),n},e.utils.toolbox.xmlToJsonArray_=function(t){var s,n=[],r=t.childNodes;for(r||(r=t),t=0;s=r[t];t++)if(s.tagName){var u={},y=s.tagName.toUpperCase();u.kind=y,"BLOCK"==y?u.blockxml=s:s.childNodes&&0<s.childNodes.length&&(u.contents=e.utils.toolbox.xmlToJsonArray_(s)),e.utils.toolbox.addAttributes_(s,u),n.push(u)}return n},e.utils.toolbox.addAttributes_=function(t,n){for(var r=0;r<t.attributes.length;r++){var s=t.attributes[r];-1<s.nodeName.indexOf("css-")?(n.cssconfig=n.cssconfig||{},n.cssconfig[s.nodeName.replace("css-","")]=s.value):n[s.nodeName]=s.value}},e.utils.toolbox.parseToolboxTree=function(t){if(t){if("string"!=typeof t&&(e.utils.userAgent.IE&&t.outerHTML?t=t.outerHTML:t instanceof Element||(t=null)),"string"==typeof t&&"xml"!=(t=e.Xml.textToDom(t)).nodeName.toLowerCase())throw TypeError("Toolbox should be an <xml> document.")}else t=null;return t},e.Options=function(t){var n=!!t.readOnly;if(n)var r=null,s=!1,u=!1,y=!1,x=!1,B=!1,Q=!1;else{r=e.utils.toolbox.convertToolboxDefToJson(t.toolbox),s=e.utils.toolbox.hasCategories(r),void 0===(u=t.trashcan)&&(u=s);var at=t.maxTrashcanContents;u?void 0===at&&(at=32):at=0,void 0===(y=t.collapse)&&(y=s),void 0===(x=t.comments)&&(x=s),void 0===(B=t.disable)&&(B=s),void 0===(Q=t.sounds)&&(Q=!0)}var rt=!!t.rtl,St=t.horizontalLayout;void 0===St&&(St=!1);var Ht=t.toolboxPosition;Ht="end"!==Ht,Ht=St?Ht?e.utils.toolbox.Position.TOP:e.utils.toolbox.Position.BOTTOM:Ht==rt?e.utils.toolbox.Position.RIGHT:e.utils.toolbox.Position.LEFT;var vt=t.css;void 0===vt&&(vt=!0);var xt="https://blockly-demo.appspot.com/static/media/";t.media?xt=t.media:t.path&&(xt=t.path+"media/");var Wt=void 0===t.oneBasedIndex||!!t.oneBasedIndex,Jt=t.renderer||"geras",Ct=t.plugins||{};this.RTL=rt,this.oneBasedIndex=Wt,this.collapse=y,this.comments=x,this.disable=B,this.readOnly=n,this.maxBlocks=t.maxBlocks||1/0,this.maxInstances=t.maxInstances,this.pathToMedia=xt,this.hasCategories=s,this.moveOptions=e.Options.parseMoveOptions_(t,s),this.hasScrollbars=!!this.moveOptions.scrollbars,this.hasTrashcan=u,this.maxTrashcanContents=at,this.hasSounds=Q,this.hasCss=vt,this.horizontalLayout=St,this.languageTree=r,this.gridOptions=e.Options.parseGridOptions_(t),this.zoomOptions=e.Options.parseZoomOptions_(t),this.toolboxPosition=Ht,this.theme=e.Options.parseThemeOptions_(t),this.renderer=Jt,this.rendererOverrides=t.rendererOverrides,this.gridPattern=null,this.parentWorkspace=t.parentWorkspace,this.plugins=Ct},e.BlocklyOptions=function(){},e.Options.parseMoveOptions_=function(t,n){var r=t.move||{},s={};return void 0===r.scrollbars&&void 0===t.scrollbars?s.scrollbars=n:"object"==typeof r.scrollbars?(s.scrollbars={},s.scrollbars.horizontal=!!r.scrollbars.horizontal,s.scrollbars.vertical=!!r.scrollbars.vertical,s.scrollbars.horizontal&&s.scrollbars.vertical?s.scrollbars=!0:s.scrollbars.horizontal||s.scrollbars.vertical||(s.scrollbars=!1)):s.scrollbars=!!r.scrollbars||!!t.scrollbars,s.wheel=s.scrollbars&&void 0!==r.wheel?!!r.wheel:"object"==typeof s.scrollbars,s.drag=!(!s.scrollbars||void 0!==r.drag&&!r.drag),s},e.Options.parseZoomOptions_=function(t){var n={};return n.controls=void 0!==(t=t.zoom||{}).controls&&!!t.controls,n.wheel=void 0!==t.wheel&&!!t.wheel,n.startScale=void 0===t.startScale?1:Number(t.startScale),n.maxScale=void 0===t.maxScale?3:Number(t.maxScale),n.minScale=void 0===t.minScale?.3:Number(t.minScale),n.scaleSpeed=void 0===t.scaleSpeed?1.2:Number(t.scaleSpeed),n.pinch=void 0===t.pinch?n.wheel||n.controls:!!t.pinch,n},e.Options.parseGridOptions_=function(t){t=t.grid||{};var n={};return n.spacing=Number(t.spacing)||0,n.colour=t.colour||"#888",n.length=void 0===t.length?1:Number(t.length),n.snap=0<n.spacing&&!!t.snap,n},e.Options.parseThemeOptions_=function(t){return"string"==typeof(t=t.theme||e.Themes.Classic)?e.registry.getObject(e.registry.Type.THEME,t):t instanceof e.Theme?t:e.Theme.defineTheme(t.name||"builtin"+e.utils.IdGenerator.getNextUniqueId(),t)},e.Options.parseToolboxTree=function(t){return e.utils.deprecation.warn("Blockly.Options.parseToolboxTree","September 2020","September 2021","Blockly.utils.toolbox.parseToolboxTree"),e.utils.toolbox.parseToolboxTree(t)},e.ScrollbarPair=function(t,n,r,s,u){this.workspace_=t,r=void 0===r||r;var y=(n=void 0===n||n)&&r;n&&(this.hScroll=new e.Scrollbar(t,!0,y,s,u)),r&&(this.vScroll=new e.Scrollbar(t,!1,y,s,u)),y&&(this.corner_=e.utils.dom.createSvgElement(e.utils.Svg.RECT,{height:e.Scrollbar.scrollbarThickness,width:e.Scrollbar.scrollbarThickness,class:"blocklyScrollbarBackground"},null),e.utils.dom.insertAfter(this.corner_,t.getBubbleCanvas())),this.oldHostMetrics_=null},e.ScrollbarPair.prototype.dispose=function(){e.utils.dom.removeNode(this.corner_),this.oldHostMetrics_=this.workspace_=this.corner_=null,this.hScroll&&(this.hScroll.dispose(),this.hScroll=null),this.vScroll&&(this.vScroll.dispose(),this.vScroll=null)},e.ScrollbarPair.prototype.resize=function(){var t=this.workspace_.getMetrics();if(t){var n=!1,r=!1;if(this.oldHostMetrics_&&this.oldHostMetrics_.viewWidth==t.viewWidth&&this.oldHostMetrics_.viewHeight==t.viewHeight&&this.oldHostMetrics_.absoluteTop==t.absoluteTop&&this.oldHostMetrics_.absoluteLeft==t.absoluteLeft?(this.oldHostMetrics_&&this.oldHostMetrics_.scrollWidth==t.scrollWidth&&this.oldHostMetrics_.viewLeft==t.viewLeft&&this.oldHostMetrics_.scrollLeft==t.scrollLeft||(n=!0),this.oldHostMetrics_&&this.oldHostMetrics_.scrollHeight==t.scrollHeight&&this.oldHostMetrics_.viewTop==t.viewTop&&this.oldHostMetrics_.scrollTop==t.scrollTop||(r=!0)):r=n=!0,n||r){try{e.Events.disable(),this.hScroll&&n&&this.hScroll.resize(t),this.vScroll&&r&&this.vScroll.resize(t)}finally{e.Events.enable()}this.workspace_.maybeFireViewportChangeEvent()}this.hScroll&&this.vScroll&&(this.oldHostMetrics_&&this.oldHostMetrics_.viewWidth==t.viewWidth&&this.oldHostMetrics_.absoluteLeft==t.absoluteLeft||this.corner_.setAttribute("x",this.vScroll.position.x),this.oldHostMetrics_&&this.oldHostMetrics_.viewHeight==t.viewHeight&&this.oldHostMetrics_.absoluteTop==t.absoluteTop||this.corner_.setAttribute("y",this.hScroll.position.y)),this.oldHostMetrics_=t}},e.ScrollbarPair.prototype.canScrollHorizontally=function(){return!!this.hScroll},e.ScrollbarPair.prototype.canScrollVertically=function(){return!!this.vScroll},e.ScrollbarPair.prototype.setOrigin=function(t,n){this.hScroll&&this.hScroll.setOrigin(t,n),this.vScroll&&this.vScroll.setOrigin(t,n)},e.ScrollbarPair.prototype.set=function(t,n,r){this.hScroll&&this.hScroll.set(t,!1),this.vScroll&&this.vScroll.set(n,!1),(r||void 0===r)&&(t={},this.hScroll&&(t.x=this.hScroll.getRatio_()),this.vScroll&&(t.y=this.vScroll.getRatio_()),this.workspace_.setMetrics(t))},e.ScrollbarPair.prototype.setX=function(t){this.hScroll&&this.hScroll.set(t,!0)},e.ScrollbarPair.prototype.setY=function(t){this.vScroll&&this.vScroll.set(t,!0)},e.ScrollbarPair.prototype.setContainerVisible=function(t){this.hScroll&&this.hScroll.setContainerVisible(t),this.vScroll&&this.vScroll.setContainerVisible(t)},e.ScrollbarPair.prototype.isVisible=function(){var t=!1;return this.hScroll&&(t=this.hScroll.isVisible()),this.vScroll&&(t=t||this.vScroll.isVisible()),t},e.ScrollbarPair.prototype.resizeContent=function(t){this.hScroll&&this.hScroll.resizeContentHorizontal(t),this.vScroll&&this.vScroll.resizeContentVertical(t)},e.ScrollbarPair.prototype.resizeView=function(t){this.hScroll&&this.hScroll.resizeViewHorizontal(t),this.vScroll&&this.vScroll.resizeViewVertical(t)},e.Scrollbar=function(t,n,r,s,u){this.workspace_=t,this.pair_=r||!1,this.horizontal_=n,this.margin_=void 0!==u?u:e.Scrollbar.DEFAULT_SCROLLBAR_MARGIN,this.ratio=this.oldHostMetrics_=null,this.createDom_(s),this.position=new e.utils.Coordinate(0,0),t=e.Scrollbar.scrollbarThickness,n?(this.svgBackground_.setAttribute("height",t),this.outerSvg_.setAttribute("height",t),this.svgHandle_.setAttribute("height",t-5),this.svgHandle_.setAttribute("y",2.5),this.lengthAttribute_="width",this.positionAttribute_="x"):(this.svgBackground_.setAttribute("width",t),this.outerSvg_.setAttribute("width",t),this.svgHandle_.setAttribute("width",t-5),this.svgHandle_.setAttribute("x",2.5),this.lengthAttribute_="height",this.positionAttribute_="y"),this.onMouseDownBarWrapper_=e.browserEvents.conditionalBind(this.svgBackground_,"mousedown",this,this.onMouseDownBar_),this.onMouseDownHandleWrapper_=e.browserEvents.conditionalBind(this.svgHandle_,"mousedown",this,this.onMouseDownHandle_)},e.Scrollbar.prototype.origin_=new e.utils.Coordinate(0,0),e.Scrollbar.prototype.startDragMouse_=0,e.Scrollbar.prototype.scrollbarLength_=0,e.Scrollbar.prototype.handleLength_=0,e.Scrollbar.prototype.handlePosition_=0,e.Scrollbar.prototype.isVisible_=!0,e.Scrollbar.prototype.containerVisible_=!0,e.Scrollbar.scrollbarThickness=15,e.Touch.TOUCH_ENABLED&&(e.Scrollbar.scrollbarThickness=25),e.Scrollbar.DEFAULT_SCROLLBAR_MARGIN=.5,e.Scrollbar.metricsAreEquivalent_=function(t,n){return t.viewWidth==n.viewWidth&&t.viewHeight==n.viewHeight&&t.viewLeft==n.viewLeft&&t.viewTop==n.viewTop&&t.absoluteTop==n.absoluteTop&&t.absoluteLeft==n.absoluteLeft&&t.scrollWidth==n.scrollWidth&&t.scrollHeight==n.scrollHeight&&t.scrollLeft==n.scrollLeft&&t.scrollTop==n.scrollTop},e.Scrollbar.prototype.dispose=function(){this.cleanUp_(),e.browserEvents.unbind(this.onMouseDownBarWrapper_),this.onMouseDownBarWrapper_=null,e.browserEvents.unbind(this.onMouseDownHandleWrapper_),this.onMouseDownHandleWrapper_=null,e.utils.dom.removeNode(this.outerSvg_),this.svgBackground_=this.svgGroup_=this.outerSvg_=null,this.svgHandle_&&(this.workspace_.getThemeManager().unsubscribe(this.svgHandle_),this.svgHandle_=null),this.workspace_=null},e.Scrollbar.prototype.constrainHandleLength_=function(t){return 0>=t||isNaN(t)?0:Math.min(t,this.scrollbarLength_)},e.Scrollbar.prototype.setHandleLength_=function(t){this.handleLength_=t,this.svgHandle_.setAttribute(this.lengthAttribute_,this.handleLength_)},e.Scrollbar.prototype.constrainHandlePosition_=function(t){return 0>=t||isNaN(t)?0:Math.min(t,this.scrollbarLength_-this.handleLength_)},e.Scrollbar.prototype.setHandlePosition=function(t){this.handlePosition_=t,this.svgHandle_.setAttribute(this.positionAttribute_,this.handlePosition_)},e.Scrollbar.prototype.setScrollbarLength_=function(t){this.scrollbarLength_=t,this.outerSvg_.setAttribute(this.lengthAttribute_,this.scrollbarLength_),this.svgBackground_.setAttribute(this.lengthAttribute_,this.scrollbarLength_)},e.Scrollbar.prototype.setPosition=function(t,n){this.position.x=t,this.position.y=n,e.utils.dom.setCssTransform(this.outerSvg_,"translate("+(this.position.x+this.origin_.x)+"px,"+(this.position.y+this.origin_.y)+"px)")},e.Scrollbar.prototype.resize=function(t){!t&&!(t=this.workspace_.getMetrics())||this.oldHostMetrics_&&e.Scrollbar.metricsAreEquivalent_(t,this.oldHostMetrics_)||(this.horizontal_?this.resizeHorizontal_(t):this.resizeVertical_(t),this.oldHostMetrics_=t,this.updateMetrics_())},e.Scrollbar.prototype.requiresViewResize_=function(t){return!this.oldHostMetrics_||this.oldHostMetrics_.viewWidth!==t.viewWidth||this.oldHostMetrics_.viewHeight!==t.viewHeight||this.oldHostMetrics_.absoluteLeft!==t.absoluteLeft||this.oldHostMetrics_.absoluteTop!==t.absoluteTop},e.Scrollbar.prototype.resizeHorizontal_=function(t){this.requiresViewResize_(t)?this.resizeViewHorizontal(t):this.resizeContentHorizontal(t)},e.Scrollbar.prototype.resizeViewHorizontal=function(t){var n=t.viewWidth-2*this.margin_;this.pair_&&(n-=e.Scrollbar.scrollbarThickness),this.setScrollbarLength_(Math.max(0,n)),n=t.absoluteLeft+this.margin_,this.pair_&&this.workspace_.RTL&&(n+=e.Scrollbar.scrollbarThickness),this.setPosition(n,t.absoluteTop+t.viewHeight-e.Scrollbar.scrollbarThickness-this.margin_),this.resizeContentHorizontal(t)},e.Scrollbar.prototype.resizeContentHorizontal=function(t){if(t.viewWidth>=t.scrollWidth)this.setHandleLength_(this.scrollbarLength_),this.setHandlePosition(0),this.pair_||this.setVisible(!1);else{this.pair_||this.setVisible(!0);var n=this.scrollbarLength_*t.viewWidth/t.scrollWidth;n=this.constrainHandleLength_(n),this.setHandleLength_(n);var r=this.scrollbarLength_-this.handleLength_;t=this.constrainHandlePosition_(t=(t.viewLeft-t.scrollLeft)/(n=t.scrollWidth-t.viewWidth)*r),this.setHandlePosition(t),this.ratio=r/n}},e.Scrollbar.prototype.resizeVertical_=function(t){this.requiresViewResize_(t)?this.resizeViewVertical(t):this.resizeContentVertical(t)},e.Scrollbar.prototype.resizeViewVertical=function(t){var n=t.viewHeight-2*this.margin_;this.pair_&&(n-=e.Scrollbar.scrollbarThickness),this.setScrollbarLength_(Math.max(0,n)),this.setPosition(this.workspace_.RTL?t.absoluteLeft+this.margin_:t.absoluteLeft+t.viewWidth-e.Scrollbar.scrollbarThickness-this.margin_,t.absoluteTop+this.margin_),this.resizeContentVertical(t)},e.Scrollbar.prototype.resizeContentVertical=function(t){if(t.viewHeight>=t.scrollHeight)this.setHandleLength_(this.scrollbarLength_),this.setHandlePosition(0),this.pair_||this.setVisible(!1);else{this.pair_||this.setVisible(!0);var n=this.scrollbarLength_*t.viewHeight/t.scrollHeight;n=this.constrainHandleLength_(n),this.setHandleLength_(n);var r=this.scrollbarLength_-this.handleLength_;t=this.constrainHandlePosition_(t=(t.viewTop-t.scrollTop)/(n=t.scrollHeight-t.viewHeight)*r),this.setHandlePosition(t),this.ratio=r/n}},e.Scrollbar.prototype.createDom_=function(t){var n="blocklyScrollbar"+(this.horizontal_?"Horizontal":"Vertical");t&&(n+=" "+t),this.outerSvg_=e.utils.dom.createSvgElement(e.utils.Svg.SVG,{class:n},null),this.svgGroup_=e.utils.dom.createSvgElement(e.utils.Svg.G,{},this.outerSvg_),this.svgBackground_=e.utils.dom.createSvgElement(e.utils.Svg.RECT,{class:"blocklyScrollbarBackground"},this.svgGroup_),t=Math.floor((e.Scrollbar.scrollbarThickness-5)/2),this.svgHandle_=e.utils.dom.createSvgElement(e.utils.Svg.RECT,{class:"blocklyScrollbarHandle",rx:t,ry:t},this.svgGroup_),this.workspace_.getThemeManager().subscribe(this.svgHandle_,"scrollbarColour","fill"),this.workspace_.getThemeManager().subscribe(this.svgHandle_,"scrollbarOpacity","fill-opacity"),e.utils.dom.insertAfter(this.outerSvg_,this.workspace_.getParentSvg())},e.Scrollbar.prototype.isVisible=function(){return this.isVisible_},e.Scrollbar.prototype.setContainerVisible=function(t){var n=t!=this.containerVisible_;this.containerVisible_=t,n&&this.updateDisplay_()},e.Scrollbar.prototype.setVisible=function(t){var n=t!=this.isVisible();if(this.pair_)throw Error("Unable to toggle visibility of paired scrollbars.");this.isVisible_=t,n&&this.updateDisplay_()},e.Scrollbar.prototype.updateDisplay_=function(){this.containerVisible_&&this.isVisible()?this.outerSvg_.setAttribute("display","block"):this.outerSvg_.setAttribute("display","none")},e.Scrollbar.prototype.onMouseDownBar_=function(t){if(this.workspace_.markFocused(),e.Touch.clearTouchIdentifier(),this.cleanUp_(),e.utils.isRightButton(t))t.stopPropagation();else{var n=e.utils.mouseToSvg(t,this.workspace_.getParentSvg(),this.workspace_.getInverseScreenCTM());n=this.horizontal_?n.x:n.y;var r=e.utils.getInjectionDivXY_(this.svgHandle_),s=this.handlePosition_,u=.95*this.handleLength_;n<=(r=this.horizontal_?r.x:r.y)?s-=u:n>=r+this.handleLength_&&(s+=u),this.setHandlePosition(this.constrainHandlePosition_(s)),this.updateMetrics_(),t.stopPropagation(),t.preventDefault()}},e.Scrollbar.prototype.onMouseDownHandle_=function(t){this.workspace_.markFocused(),this.cleanUp_(),e.utils.isRightButton(t)?t.stopPropagation():(this.startDragHandle=this.handlePosition_,this.workspace_.setupDragSurface(),this.startDragMouse_=this.horizontal_?t.clientX:t.clientY,e.Scrollbar.onMouseUpWrapper_=e.browserEvents.conditionalBind(document,"mouseup",this,this.onMouseUpHandle_),e.Scrollbar.onMouseMoveWrapper_=e.browserEvents.conditionalBind(document,"mousemove",this,this.onMouseMoveHandle_),t.stopPropagation(),t.preventDefault())},e.Scrollbar.prototype.onMouseMoveHandle_=function(t){this.setHandlePosition(this.constrainHandlePosition_(this.startDragHandle+((this.horizontal_?t.clientX:t.clientY)-this.startDragMouse_))),this.updateMetrics_()},e.Scrollbar.prototype.onMouseUpHandle_=function(){this.workspace_.resetDragSurface(),e.Touch.clearTouchIdentifier(),this.cleanUp_()},e.Scrollbar.prototype.cleanUp_=function(){e.hideChaff(!0),e.Scrollbar.onMouseUpWrapper_&&(e.browserEvents.unbind(e.Scrollbar.onMouseUpWrapper_),e.Scrollbar.onMouseUpWrapper_=null),e.Scrollbar.onMouseMoveWrapper_&&(e.browserEvents.unbind(e.Scrollbar.onMouseMoveWrapper_),e.Scrollbar.onMouseMoveWrapper_=null)},e.Scrollbar.prototype.getRatio_=function(){var t=this.handlePosition_/(this.scrollbarLength_-this.handleLength_);return isNaN(t)&&(t=0),t},e.Scrollbar.prototype.updateMetrics_=function(){var t=this.getRatio_(),n={};this.horizontal_?n.x=t:n.y=t,this.workspace_.setMetrics(n)},e.Scrollbar.prototype.set=function(t,n){this.setHandlePosition(this.constrainHandlePosition_(t*this.ratio)),(n||void 0===n)&&this.updateMetrics_()},e.Scrollbar.prototype.setOrigin=function(t,n){this.origin_=new e.utils.Coordinate(t,n)},e.Tooltip={},e.Tooltip.visible=!1,e.Tooltip.blocked_=!1,e.Tooltip.LIMIT=50,e.Tooltip.mouseOutPid_=0,e.Tooltip.showPid_=0,e.Tooltip.lastX_=0,e.Tooltip.lastY_=0,e.Tooltip.element_=null,e.Tooltip.poisonedElement_=null,e.Tooltip.OFFSET_X=0,e.Tooltip.OFFSET_Y=10,e.Tooltip.RADIUS_OK=10,e.Tooltip.HOVER_MS=750,e.Tooltip.MARGINS=5,e.Tooltip.DIV=null,e.Tooltip.getTooltipOfObject=function(t){if(t=e.Tooltip.getTargetObject_(t)){for(t=t.tooltip;"function"==typeof t;)t=t();if("string"!=typeof t)throw Error("Tooltip function must return a string.");return t}return""},e.Tooltip.getTargetObject_=function(t){for(;t&&t.tooltip;){if("string"==typeof t.tooltip||"function"==typeof t.tooltip)return t;t=t.tooltip}return null},e.Tooltip.createDom=function(){e.Tooltip.DIV||(e.Tooltip.DIV=document.createElement("div"),e.Tooltip.DIV.className="blocklyTooltipDiv",(e.parentContainer||document.body).appendChild(e.Tooltip.DIV))},e.Tooltip.bindMouseEvents=function(t){t.mouseOverWrapper_=e.browserEvents.bind(t,"mouseover",null,e.Tooltip.onMouseOver_),t.mouseOutWrapper_=e.browserEvents.bind(t,"mouseout",null,e.Tooltip.onMouseOut_),t.addEventListener("mousemove",e.Tooltip.onMouseMove_,!1)},e.Tooltip.unbindMouseEvents=function(t){t&&(e.browserEvents.unbind(t.mouseOverWrapper_),e.browserEvents.unbind(t.mouseOutWrapper_),t.removeEventListener("mousemove",e.Tooltip.onMouseMove_))},e.Tooltip.onMouseOver_=function(t){e.Tooltip.blocked_||(t=e.Tooltip.getTargetObject_(t.currentTarget),e.Tooltip.element_!=t&&(e.Tooltip.hide(),e.Tooltip.poisonedElement_=null,e.Tooltip.element_=t),clearTimeout(e.Tooltip.mouseOutPid_))},e.Tooltip.onMouseOut_=function(t){e.Tooltip.blocked_||(e.Tooltip.mouseOutPid_=setTimeout(function(){e.Tooltip.element_=null,e.Tooltip.poisonedElement_=null,e.Tooltip.hide()},1),clearTimeout(e.Tooltip.showPid_))},e.Tooltip.onMouseMove_=function(t){if(e.Tooltip.element_&&e.Tooltip.element_.tooltip&&!e.Tooltip.blocked_)if(e.Tooltip.visible){var n=e.Tooltip.lastX_-t.pageX;t=e.Tooltip.lastY_-t.pageY,Math.sqrt(n*n+t*t)>e.Tooltip.RADIUS_OK&&e.Tooltip.hide()}else e.Tooltip.poisonedElement_!=e.Tooltip.element_&&(clearTimeout(e.Tooltip.showPid_),e.Tooltip.lastX_=t.pageX,e.Tooltip.lastY_=t.pageY,e.Tooltip.showPid_=setTimeout(e.Tooltip.show_,e.Tooltip.HOVER_MS))},e.Tooltip.dispose=function(){e.Tooltip.element_=null,e.Tooltip.poisonedElement_=null,e.Tooltip.hide()},e.Tooltip.hide=function(){e.Tooltip.visible&&(e.Tooltip.visible=!1,e.Tooltip.DIV&&(e.Tooltip.DIV.style.display="none")),e.Tooltip.showPid_&&clearTimeout(e.Tooltip.showPid_)},e.Tooltip.block=function(){e.Tooltip.hide(),e.Tooltip.blocked_=!0},e.Tooltip.unblock=function(){e.Tooltip.blocked_=!1},e.Tooltip.show_=function(){if(!e.Tooltip.blocked_&&(e.Tooltip.poisonedElement_=e.Tooltip.element_,e.Tooltip.DIV)){e.Tooltip.DIV.textContent="";var t=e.Tooltip.getTooltipOfObject(e.Tooltip.element_);t=(t=e.utils.string.wrap(t,e.Tooltip.LIMIT)).split("\n");for(var n=0;n<t.length;n++){var r=document.createElement("div");r.appendChild(document.createTextNode(t[n])),e.Tooltip.DIV.appendChild(r)}t=e.Tooltip.element_.RTL,n=document.documentElement.clientWidth,r=document.documentElement.clientHeight,e.Tooltip.DIV.style.direction=t?"rtl":"ltr",e.Tooltip.DIV.style.display="block",e.Tooltip.visible=!0;var s=e.Tooltip.lastX_;s=t?s-(e.Tooltip.OFFSET_X+e.Tooltip.DIV.offsetWidth):s+e.Tooltip.OFFSET_X;var u=e.Tooltip.lastY_+e.Tooltip.OFFSET_Y;u+e.Tooltip.DIV.offsetHeight>r+window.scrollY&&(u-=e.Tooltip.DIV.offsetHeight+2*e.Tooltip.OFFSET_Y),t?s=Math.max(e.Tooltip.MARGINS-window.scrollX,s):s+e.Tooltip.DIV.offsetWidth>n+window.scrollX-2*e.Tooltip.MARGINS&&(s=n-e.Tooltip.DIV.offsetWidth-2*e.Tooltip.MARGINS),e.Tooltip.DIV.style.top=u+"px",e.Tooltip.DIV.style.left=s+"px"}},e.utils.aria={},e.utils.aria.ARIA_PREFIX_="aria-",e.utils.aria.ROLE_ATTRIBUTE_="role",e.utils.aria.Role={GRID:"grid",GRIDCELL:"gridcell",GROUP:"group",LISTBOX:"listbox",MENU:"menu",MENUITEM:"menuitem",MENUITEMCHECKBOX:"menuitemcheckbox",OPTION:"option",PRESENTATION:"presentation",ROW:"row",TREE:"tree",TREEITEM:"treeitem"},e.utils.aria.State={ACTIVEDESCENDANT:"activedescendant",COLCOUNT:"colcount",DISABLED:"disabled",EXPANDED:"expanded",INVALID:"invalid",LABEL:"label",LABELLEDBY:"labelledby",LEVEL:"level",ORIENTATION:"orientation",POSINSET:"posinset",ROWCOUNT:"rowcount",SELECTED:"selected",SETSIZE:"setsize",VALUEMAX:"valuemax",VALUEMIN:"valuemin"},e.utils.aria.setRole=function(t,n){t.setAttribute(e.utils.aria.ROLE_ATTRIBUTE_,n)},e.utils.aria.setState=function(t,n,r){Array.isArray(r)&&(r=r.join(" ")),t.setAttribute(e.utils.aria.ARIA_PREFIX_+n,r)},e.IASTNodeLocation=function(){},e.IASTNodeLocationSvg=function(){},e.IASTNodeLocationWithBlock=function(){},e.IKeyboardAccessible=function(){},e.utils.deprecation={},e.utils.deprecation.warn=function(t,n,r,s){t=t+" was deprecated on "+n+" and will be deleted on "+r+".",s&&(t+="\nUse "+s+" instead."),console.warn(t)},e.Connection=function(t,n){this.sourceBlock_=t,this.type=n},e.Connection.CAN_CONNECT=0,e.Connection.REASON_SELF_CONNECTION=1,e.Connection.REASON_WRONG_TYPE=2,e.Connection.REASON_TARGET_NULL=3,e.Connection.REASON_CHECKS_FAILED=4,e.Connection.REASON_DIFFERENT_WORKSPACES=5,e.Connection.REASON_SHADOW_PARENT=6,e.Connection.REASON_DRAG_CHECKS_FAILED=7,e.Connection.prototype.targetConnection=null,e.Connection.prototype.disposed=!1,e.Connection.prototype.check_=null,e.Connection.prototype.shadowDom_=null,e.Connection.prototype.x=0,e.Connection.prototype.y=0,e.Connection.prototype.connect_=function(t){var B,n=e.connectionTypes.INPUT_VALUE,r=this.getSourceBlock(),s=t.getSourceBlock();if(t.isConnected()&&t.disconnect(),this.isConnected()){var u=this.getShadowDom(!0);this.shadowDom_=null;var y=this.targetBlock();if(y.isShadow())y.dispose(!1);else{this.disconnect();var x=y}this.shadowDom_=u}e.Events.isEnabled()&&(B=new(e.Events.get(e.Events.BLOCK_MOVE))(s)),e.Connection.connectReciprocally_(this,t),s.setParent(r),B&&(B.recordNew(),e.Events.fire(B)),x&&((s=e.Connection.getConnectionForOrphanedConnection(s,t=this.type===n?x.outputConnection:x.previousConnection))?t.connect(s):t.onFailedConnect(this))},e.Connection.prototype.dispose=function(){if(this.isConnected()){this.setShadowDom(null);var t=this.targetBlock();t&&t.unplug()}this.disposed=!0},e.Connection.prototype.getSourceBlock=function(){return this.sourceBlock_},e.Connection.prototype.isSuperior=function(){return this.type==e.connectionTypes.INPUT_VALUE||this.type==e.connectionTypes.NEXT_STATEMENT},e.Connection.prototype.isConnected=function(){return!!this.targetConnection},e.Connection.prototype.canConnectWithReason=function(t){return e.utils.deprecation.warn("Connection.prototype.canConnectWithReason","July 2020","July 2021","the workspace's connection checker"),this.getConnectionChecker().canConnectWithReason(this,t,!1)},e.Connection.prototype.checkConnection=function(t){e.utils.deprecation.warn("Connection.prototype.checkConnection","July 2020","July 2021","the workspace's connection checker");var n=this.getConnectionChecker(),r=n.canConnectWithReason(this,t,!1);if(r!=e.Connection.CAN_CONNECT)throw Error(n.getErrorMessage(r,this,t))},e.Connection.prototype.getConnectionChecker=function(){return this.sourceBlock_.workspace.connectionChecker},e.Connection.prototype.isConnectionAllowed=function(t){return e.utils.deprecation.warn("Connection.prototype.isConnectionAllowed","July 2020","July 2021","the workspace's connection checker"),this.getConnectionChecker().canConnect(this,t,!0)},e.Connection.prototype.onFailedConnect=function(t){},e.Connection.prototype.connect=function(t){if(this.targetConnection!=t&&this.getConnectionChecker().canConnect(this,t,!1)){var n=e.Events.getGroup();n||e.Events.setGroup(!0),this.isSuperior()?this.connect_(t):t.connect_(this),n||e.Events.setGroup(!1)}},e.Connection.connectReciprocally_=function(t,n){if(!t||!n)throw Error("Cannot connect null connections.");t.targetConnection=n,n.targetConnection=t},e.Connection.getSingleConnection_=function(t,n){for(var y,r=null,s=(n=n.outputConnection).getConnectionChecker(),u=0;y=t.inputList[u];u++)if((y=y.connection)&&s.canConnect(n,y,!1)){if(r)return null;r=y}return r},e.Connection.getConnectionForOrphanedOutput_=function(t,n){for(var r;r=e.Connection.getSingleConnection_(t,n);)if(!(t=r.targetBlock())||t.isShadow())return r;return null},e.Connection.getConnectionForOrphanedConnection=function(t,n){if(n.type===e.connectionTypes.OUTPUT_VALUE)return e.Connection.getConnectionForOrphanedOutput_(t,n.getSourceBlock());t=t.lastConnectionInStack(!0);var r=n.getConnectionChecker();return t&&r.canConnect(n,t,!1)?t:null},e.Connection.prototype.disconnect=function(){var t=this.targetConnection;if(!t)throw Error("Source connection not connected.");if(t.targetConnection!=this)throw Error("Target connection not connected to source connection.");if(this.isSuperior()){var n=this.sourceBlock_,r=t.getSourceBlock();t=this}else n=t.getSourceBlock(),r=this.sourceBlock_;var s=e.Events.getGroup();s||e.Events.setGroup(!0),this.disconnectInternal_(n,r),r.isShadow()||t.respawnShadow_(),s||e.Events.setGroup(!1)},e.Connection.prototype.disconnectInternal_=function(t,n){var r;e.Events.isEnabled()&&(r=new(e.Events.get(e.Events.BLOCK_MOVE))(n)),this.targetConnection=this.targetConnection.targetConnection=null,n.setParent(null),r&&(r.recordNew(),e.Events.fire(r))},e.Connection.prototype.respawnShadow_=function(){var t=this.getSourceBlock(),n=this.getShadowDom();if(t.workspace&&n)if((t=e.Xml.domToBlock(n,t.workspace)).outputConnection)this.connect(t.outputConnection);else{if(!t.previousConnection)throw Error("Child block does not have output or previous statement.");this.connect(t.previousConnection)}},e.Connection.prototype.targetBlock=function(){return this.isConnected()?this.targetConnection.getSourceBlock():null},e.Connection.prototype.checkType=function(t){return e.utils.deprecation.warn("Connection.prototype.checkType","October 2019","January 2021","the workspace's connection checker"),this.getConnectionChecker().canConnect(this,t,!1)},e.Connection.prototype.checkType_=function(t){return e.utils.deprecation.warn("Connection.prototype.checkType_","October 2019","January 2021","the workspace's connection checker"),this.checkType(t)},e.Connection.prototype.onCheckChanged_=function(){!this.isConnected()||this.targetConnection&&this.getConnectionChecker().canConnect(this,this.targetConnection,!1)||(this.isSuperior()?this.targetBlock():this.sourceBlock_).unplug()},e.Connection.prototype.setCheck=function(t){return t?(Array.isArray(t)||(t=[t]),this.check_=t,this.onCheckChanged_()):this.check_=null,this},e.Connection.prototype.getCheck=function(){return this.check_},e.Connection.prototype.setShadowDom=function(t){this.shadowDom_=t,(t=this.targetBlock())?t.isShadow()&&(t.dispose(!1),this.respawnShadow_()):this.respawnShadow_()},e.Connection.prototype.getShadowDom=function(t){return t&&this.targetBlock().isShadow()?e.Xml.blockToDom(this.targetBlock()):this.shadowDom_},e.Connection.prototype.neighbours=function(t){return[]},e.Connection.prototype.getParentInput=function(){for(var t=null,n=this.sourceBlock_.inputList,r=0;r<n.length;r++)if(n[r].connection===this){t=n[r];break}return t},e.Connection.prototype.toString=function(){var t=this.sourceBlock_;if(!t)return"Orphan Connection";if(t.outputConnection==this)var n="Output Connection of ";else if(t.previousConnection==this)n="Previous Connection of ";else if(t.nextConnection==this)n="Next Connection of ";else{n=null;for(var s,r=0;s=t.inputList[r];r++)if(s.connection==this){n=s;break}if(!n)return console.warn("Connection not actually connected to sourceBlock_"),"Orphan Connection";n='Input "'+n.name+'" connection on '}return n+t.toDevString()},e.IConnectionChecker=function(){},e.ConnectionChecker=function(){},e.ConnectionChecker.prototype.canConnect=function(t,n,r,s){return this.canConnectWithReason(t,n,r,s)==e.Connection.CAN_CONNECT},e.ConnectionChecker.prototype.canConnectWithReason=function(t,n,r,s){var u=this.doSafetyChecks(t,n);return u!=e.Connection.CAN_CONNECT?u:this.doTypeChecks(t,n)?r&&!this.doDragChecks(t,n,s||0)?e.Connection.REASON_DRAG_CHECKS_FAILED:e.Connection.CAN_CONNECT:e.Connection.REASON_CHECKS_FAILED},e.ConnectionChecker.prototype.getErrorMessage=function(t,n,r){switch(t){case e.Connection.REASON_SELF_CONNECTION:return"Attempted to connect a block to itself.";case e.Connection.REASON_DIFFERENT_WORKSPACES:return"Blocks not on same workspace.";case e.Connection.REASON_WRONG_TYPE:return"Attempt to connect incompatible types.";case e.Connection.REASON_TARGET_NULL:return"Target connection is null.";case e.Connection.REASON_CHECKS_FAILED:return"Connection checks failed. "+n+" expected "+n.getCheck()+", found "+r.getCheck();case e.Connection.REASON_SHADOW_PARENT:return"Connecting non-shadow to shadow block.";case e.Connection.REASON_DRAG_CHECKS_FAILED:return"Drag checks failed.";default:return"Unknown connection failure: this should never happen!"}},e.ConnectionChecker.prototype.doSafetyChecks=function(t,n){if(!t||!n)return e.Connection.REASON_TARGET_NULL;if(t.isSuperior())var r=t.getSourceBlock(),s=n.getSourceBlock();else s=t.getSourceBlock(),r=n.getSourceBlock();return r==s?e.Connection.REASON_SELF_CONNECTION:n.type!=e.OPPOSITE_TYPE[t.type]?e.Connection.REASON_WRONG_TYPE:r.workspace!==s.workspace?e.Connection.REASON_DIFFERENT_WORKSPACES:r.isShadow()&&!s.isShadow()?e.Connection.REASON_SHADOW_PARENT:e.Connection.CAN_CONNECT},e.ConnectionChecker.prototype.doTypeChecks=function(t,n){if(t=t.getCheck(),n=n.getCheck(),!t||!n)return!0;for(var r=0;r<t.length;r++)if(-1!=n.indexOf(t[r]))return!0;return!1},e.ConnectionChecker.prototype.doDragChecks=function(t,n,r){if(t.distanceFrom(n)>r||n.getSourceBlock().isInsertionMarker())return!1;switch(n.type){case e.connectionTypes.PREVIOUS_STATEMENT:return this.canConnectToPrevious_(t,n);case e.connectionTypes.OUTPUT_VALUE:if(n.isConnected()&&!n.targetBlock().isInsertionMarker()||t.isConnected())return!1;break;case e.connectionTypes.INPUT_VALUE:if(n.isConnected()&&!n.targetBlock().isMovable()&&!n.targetBlock().isShadow())return!1;break;case e.connectionTypes.NEXT_STATEMENT:if(n.isConnected()&&!t.getSourceBlock().nextConnection&&!n.targetBlock().isShadow()&&n.targetBlock().nextConnection)return!1;break;default:return!1}return-1==e.draggingConnections.indexOf(n)},e.ConnectionChecker.prototype.canConnectToPrevious_=function(t,n){return!(t.targetConnection||-1!=e.draggingConnections.indexOf(n)||n.targetConnection&&(!(t=n.targetBlock()).isInsertionMarker()||t.getPreviousBlock()))},e.registry.register(e.registry.Type.CONNECTION_CHECKER,e.registry.DEFAULT,e.ConnectionChecker),e.VariableMap=function(t){this.variableMap_=Object.create(null),this.workspace=t},e.VariableMap.prototype.clear=function(){this.variableMap_=Object.create(null)},e.VariableMap.prototype.renameVariable=function(t,n){var r=this.getVariable(n,t.type),s=this.workspace.getAllBlocks(!1);e.Events.setGroup(!0);try{r&&r.getId()!=t.getId()?this.renameVariableWithConflict_(t,n,r,s):this.renameVariableAndUses_(t,n,s)}finally{e.Events.setGroup(!1)}},e.VariableMap.prototype.renameVariableById=function(t,n){var r=this.getVariableById(t);if(!r)throw Error("Tried to rename a variable that didn't exist. ID: "+t);this.renameVariable(r,n)},e.VariableMap.prototype.renameVariableAndUses_=function(t,n,r){for(e.Events.fire(new(e.Events.get(e.Events.VAR_RENAME))(t,n)),t.name=n,n=0;n<r.length;n++)r[n].updateVarName(t)},e.VariableMap.prototype.renameVariableWithConflict_=function(t,n,r,s){var u=t.type;for(n!=r.name&&this.renameVariableAndUses_(r,n,s),n=0;n<s.length;n++)s[n].renameVarById(t.getId(),r.getId());e.Events.fire(new(e.Events.get(e.Events.VAR_DELETE))(t)),t=this.getVariablesOfType(u).indexOf(t),this.variableMap_[u].splice(t,1)},e.VariableMap.prototype.createVariable=function(t,n,r){var s=this.getVariable(t,n);if(s){if(r&&s.getId()!=r)throw Error('Variable "'+t+'" is already in use and its id is "'+s.getId()+'" which conflicts with the passed in id, "'+r+'".');return s}if(r&&this.getVariableById(r))throw Error('Variable id, "'+r+'", is already in use.');return s=r||e.utils.genUid(),s=new e.VariableModel(this.workspace,t,n=n||"",s),(t=this.variableMap_[n]||[]).push(s),delete this.variableMap_[n],this.variableMap_[n]=t,s},e.VariableMap.prototype.deleteVariable=function(t){for(var s,n=this.variableMap_[t.type],r=0;s=n[r];r++)if(s.getId()==t.getId()){n.splice(r,1),e.Events.fire(new(e.Events.get(e.Events.VAR_DELETE))(t));break}},e.VariableMap.prototype.deleteVariableById=function(t){var n=this.getVariableById(t);if(n){var u,r=n.name,s=this.getVariableUsesById(t);for(t=0;u=s[t];t++)if("procedures_defnoreturn"==u.type||"procedures_defreturn"==u.type)return t=u.getFieldValue("NAME"),r=e.Msg.CANNOT_DELETE_VARIABLE_PROCEDURE.replace("%1",r).replace("%2",t),void e.alert(r);var y=this;1<s.length?(r=e.Msg.DELETE_VARIABLE_CONFIRMATION.replace("%1",String(s.length)).replace("%2",r),e.confirm(r,function(x){x&&n&&y.deleteVariableInternal(n,s)})):y.deleteVariableInternal(n,s)}else console.warn("Can't delete non-existent variable: "+t)},e.VariableMap.prototype.deleteVariableInternal=function(t,n){var r=e.Events.getGroup();r||e.Events.setGroup(!0);try{for(var s=0;s<n.length;s++)n[s].dispose(!0);this.deleteVariable(t)}finally{r||e.Events.setGroup(!1)}},e.VariableMap.prototype.getVariable=function(t,n){if(n=this.variableMap_[n||""])for(var s,r=0;s=n[r];r++)if(e.Names.equals(s.name,t))return s;return null},e.VariableMap.prototype.getVariableById=function(t){for(var n=Object.keys(this.variableMap_),r=0;r<n.length;r++)for(var y,s=n[r],u=0;y=this.variableMap_[s][u];u++)if(y.getId()==t)return y;return null},e.VariableMap.prototype.getVariablesOfType=function(t){return(t=this.variableMap_[t||""])?t.slice():[]},e.VariableMap.prototype.getVariableTypes=function(t){var n={};e.utils.object.mixin(n,this.variableMap_),t&&t.getPotentialVariableMap()&&e.utils.object.mixin(n,t.getPotentialVariableMap().variableMap_),t=Object.keys(n),n=!1;for(var r=0;r<t.length;r++)""==t[r]&&(n=!0);return n||t.push(""),t},e.VariableMap.prototype.getAllVariables=function(){var n,t=[];for(n in this.variableMap_)t=t.concat(this.variableMap_[n]);return t},e.VariableMap.prototype.getAllVariableNames=function(){var n,t=[];for(n in this.variableMap_)for(var u,r=this.variableMap_[n],s=0;u=r[s];s++)t.push(u.name);return t},e.VariableMap.prototype.getVariableUsesById=function(t){for(var n=[],r=this.workspace.getAllBlocks(!1),s=0;s<r.length;s++){var u=r[s].getVarModels();if(u)for(var y=0;y<u.length;y++)u[y].getId()==t&&n.push(r[s])}return n},e.Workspace=function(t){this.id=e.utils.genUid(),e.Workspace.WorkspaceDB_[this.id]=this,this.options=t||new e.Options({}),this.RTL=!!this.options.RTL,this.horizontalLayout=!!this.options.horizontalLayout,this.toolboxPosition=this.options.toolboxPosition,this.connectionChecker=new(e.registry.getClassFromOptions(e.registry.Type.CONNECTION_CHECKER,this.options,!0))(this),this.topBlocks_=[],this.topComments_=[],this.commentDB_=Object.create(null),this.listeners_=[],this.undoStack_=[],this.redoStack_=[],this.blockDB_=Object.create(null),this.typedBlocksDB_=Object.create(null),this.variableMap_=new e.VariableMap(this),this.potentialVariableMap_=null},e.Workspace.prototype.rendered=!1,e.Workspace.prototype.isClearing=!1,e.Workspace.prototype.MAX_UNDO=1024,e.Workspace.prototype.connectionDBList=null,e.Workspace.prototype.dispose=function(){this.listeners_.length=0,this.clear(),delete e.Workspace.WorkspaceDB_[this.id]},e.Workspace.SCAN_ANGLE=3,e.Workspace.prototype.sortObjects_=function(t,n){return t=t.getRelativeToSurfaceXY(),n=n.getRelativeToSurfaceXY(),t.y+e.Workspace.prototype.sortObjects_.offset*t.x-(n.y+e.Workspace.prototype.sortObjects_.offset*n.x)},e.Workspace.prototype.addTopBlock=function(t){this.topBlocks_.push(t)},e.Workspace.prototype.removeTopBlock=function(t){if(!e.utils.arrayRemove(this.topBlocks_,t))throw Error("Block not present in workspace's list of top-most blocks.")},e.Workspace.prototype.getTopBlocks=function(t){var n=[].concat(this.topBlocks_);return t&&1<n.length&&(this.sortObjects_.offset=Math.sin(e.utils.math.toRadians(e.Workspace.SCAN_ANGLE)),this.RTL&&(this.sortObjects_.offset*=-1),n.sort(this.sortObjects_)),n},e.Workspace.prototype.addTypedBlock=function(t){this.typedBlocksDB_[t.type]||(this.typedBlocksDB_[t.type]=[]),this.typedBlocksDB_[t.type].push(t)},e.Workspace.prototype.removeTypedBlock=function(t){this.typedBlocksDB_[t.type].splice(this.typedBlocksDB_[t.type].indexOf(t),1),this.typedBlocksDB_[t.type].length||delete this.typedBlocksDB_[t.type]},e.Workspace.prototype.getBlocksByType=function(t,n){return this.typedBlocksDB_[t]?(t=this.typedBlocksDB_[t].slice(0),n&&1<t.length&&(this.sortObjects_.offset=Math.sin(e.utils.math.toRadians(e.Workspace.SCAN_ANGLE)),this.RTL&&(this.sortObjects_.offset*=-1),t.sort(this.sortObjects_)),t):[]},e.Workspace.prototype.addTopComment=function(t){this.topComments_.push(t),this.commentDB_[t.id]&&console.warn('Overriding an existing comment on this workspace, with id "'+t.id+'"'),this.commentDB_[t.id]=t},e.Workspace.prototype.removeTopComment=function(t){if(!e.utils.arrayRemove(this.topComments_,t))throw Error("Comment not present in workspace's list of top-most comments.");delete this.commentDB_[t.id]},e.Workspace.prototype.getTopComments=function(t){var n=[].concat(this.topComments_);return t&&1<n.length&&(this.sortObjects_.offset=Math.sin(e.utils.math.toRadians(e.Workspace.SCAN_ANGLE)),this.RTL&&(this.sortObjects_.offset*=-1),n.sort(this.sortObjects_)),n},e.Workspace.prototype.getAllBlocks=function(t){if(t){t=this.getTopBlocks(!0);for(var n=[],r=0;r<t.length;r++)n.push.apply(n,t[r].getDescendants(!0))}else for(n=this.getTopBlocks(!1),r=0;r<n.length;r++)n.push.apply(n,n[r].getChildren(!1));return n.filter(function(s){return!s.isInsertionMarker()})},e.Workspace.prototype.clear=function(){this.isClearing=!0;try{var t=e.Events.getGroup();for(t||e.Events.setGroup(!0);this.topBlocks_.length;)this.topBlocks_[0].dispose(!1);for(;this.topComments_.length;)this.topComments_[this.topComments_.length-1].dispose(!1);t||e.Events.setGroup(!1),this.variableMap_.clear(),this.potentialVariableMap_&&this.potentialVariableMap_.clear()}finally{this.isClearing=!1}},e.Workspace.prototype.renameVariableById=function(t,n){this.variableMap_.renameVariableById(t,n)},e.Workspace.prototype.createVariable=function(t,n,r){return this.variableMap_.createVariable(t,n,r)},e.Workspace.prototype.getVariableUsesById=function(t){return this.variableMap_.getVariableUsesById(t)},e.Workspace.prototype.deleteVariableById=function(t){this.variableMap_.deleteVariableById(t)},e.Workspace.prototype.getVariable=function(t,n){return this.variableMap_.getVariable(t,n)},e.Workspace.prototype.getVariableById=function(t){return this.variableMap_.getVariableById(t)},e.Workspace.prototype.getVariablesOfType=function(t){return this.variableMap_.getVariablesOfType(t)},e.Workspace.prototype.getVariableTypes=function(){return this.variableMap_.getVariableTypes(this)},e.Workspace.prototype.getAllVariables=function(){return this.variableMap_.getAllVariables()},e.Workspace.prototype.getAllVariableNames=function(){return this.variableMap_.getAllVariableNames()},e.Workspace.prototype.getWidth=function(){return 0},e.Workspace.prototype.newBlock=function(t,n){return new e.Block(this,t,n)},e.Workspace.prototype.remainingCapacity=function(){return isNaN(this.options.maxBlocks)?1/0:this.options.maxBlocks-this.getAllBlocks(!1).length},e.Workspace.prototype.remainingCapacityOfType=function(t){return this.options.maxInstances?(void 0!==this.options.maxInstances[t]?this.options.maxInstances[t]:1/0)-this.getBlocksByType(t,!1).length:1/0},e.Workspace.prototype.isCapacityAvailable=function(t){if(!this.hasBlockLimits())return!0;var r,n=0;for(r in t){if(t[r]>this.remainingCapacityOfType(r))return!1;n+=t[r]}return!(n>this.remainingCapacity())},e.Workspace.prototype.hasBlockLimits=function(){return this.options.maxBlocks!=1/0||!!this.options.maxInstances},e.Workspace.prototype.getUndoStack=function(){return this.undoStack_},e.Workspace.prototype.getRedoStack=function(){return this.redoStack_},e.Workspace.prototype.undo=function(t){var n=t?this.redoStack_:this.undoStack_,r=t?this.undoStack_:this.redoStack_,s=n.pop();if(s){for(var u=[s];n.length&&s.group&&s.group==n[n.length-1].group;)u.push(n.pop());for(n=0;s=u[n];n++)r.push(s);u=e.Events.filter(u,t),e.Events.recordUndo=!1;try{for(n=0;s=u[n];n++)s.run(t)}finally{e.Events.recordUndo=!0}}},e.Workspace.prototype.clearUndo=function(){this.undoStack_.length=0,this.redoStack_.length=0,e.Events.clearPendingUndo()},e.Workspace.prototype.addChangeListener=function(t){return this.listeners_.push(t),t},e.Workspace.prototype.removeChangeListener=function(t){e.utils.arrayRemove(this.listeners_,t)},e.Workspace.prototype.fireChangeListener=function(t){if(t.recordUndo)for(this.undoStack_.push(t),this.redoStack_.length=0;this.undoStack_.length>this.MAX_UNDO&&0<=this.MAX_UNDO;)this.undoStack_.shift();for(var r,n=0;r=this.listeners_[n];n++)r(t)},e.Workspace.prototype.getBlockById=function(t){return this.blockDB_[t]||null},e.Workspace.prototype.setBlockById=function(t,n){this.blockDB_[t]=n},e.Workspace.prototype.removeBlockById=function(t){delete this.blockDB_[t]},e.Workspace.prototype.getCommentById=function(t){return this.commentDB_[t]||null},e.Workspace.prototype.allInputsFilled=function(t){for(var s,n=this.getTopBlocks(!1),r=0;s=n[r];r++)if(!s.allInputsFilled(t))return!1;return!0},e.Workspace.prototype.getPotentialVariableMap=function(){return this.potentialVariableMap_},e.Workspace.prototype.createPotentialVariableMap=function(){this.potentialVariableMap_=new e.VariableMap(this)},e.Workspace.prototype.getVariableMap=function(){return this.variableMap_},e.Workspace.prototype.setVariableMap=function(t){this.variableMap_=t},e.Workspace.WorkspaceDB_=Object.create(null),e.Workspace.getById=function(t){return e.Workspace.WorkspaceDB_[t]||null},e.Workspace.getAll=function(){var n,t=[];for(n in e.Workspace.WorkspaceDB_)t.push(e.Workspace.WorkspaceDB_[n]);return t},e.WorkspaceDragSurfaceSvg=function(t){this.container_=t,this.createDom()},e.WorkspaceDragSurfaceSvg.prototype.SVG_=null,e.WorkspaceDragSurfaceSvg.prototype.container_=null,e.WorkspaceDragSurfaceSvg.prototype.createDom=function(){this.SVG_||(this.SVG_=e.utils.dom.createSvgElement(e.utils.Svg.SVG,{xmlns:e.utils.dom.SVG_NS,"xmlns:html":e.utils.dom.HTML_NS,"xmlns:xlink":e.utils.dom.XLINK_NS,version:"1.1",class:"blocklyWsDragSurface blocklyOverflowVisible"},null),this.container_.appendChild(this.SVG_))},e.WorkspaceDragSurfaceSvg.prototype.translateSurface=function(t,n){t=t.toFixed(0),n=n.toFixed(0),this.SVG_.style.display="block",e.utils.dom.setCssTransform(this.SVG_,"translate3d("+t+"px, "+n+"px, 0px)")},e.WorkspaceDragSurfaceSvg.prototype.getSurfaceTranslation=function(){return e.utils.getRelativeXY(this.SVG_)},e.WorkspaceDragSurfaceSvg.prototype.clearAndHide=function(t){if(!t)throw Error("Couldn't clear and hide the drag surface: missing new surface.");var n=this.SVG_.childNodes[0],r=this.SVG_.childNodes[1];if(!(n&&r&&e.utils.dom.hasClass(n,"blocklyBlockCanvas")&&e.utils.dom.hasClass(r,"blocklyBubbleCanvas")))throw Error("Couldn't clear and hide the drag surface. A node was missing.");if(null!=this.previousSibling_?e.utils.dom.insertAfter(n,this.previousSibling_):t.insertBefore(n,t.firstChild),e.utils.dom.insertAfter(r,n),this.SVG_.style.display="none",this.SVG_.childNodes.length)throw Error("Drag surface was not cleared.");e.utils.dom.setCssTransform(this.SVG_,""),this.previousSibling_=null},e.WorkspaceDragSurfaceSvg.prototype.setContentsAndShow=function(t,n,r,s,u,y){if(this.SVG_.childNodes.length)throw Error("Already dragging a block.");this.previousSibling_=r,t.setAttribute("transform","translate(0, 0) scale("+y+")"),n.setAttribute("transform","translate(0, 0) scale("+y+")"),this.SVG_.setAttribute("width",s),this.SVG_.setAttribute("height",u),this.SVG_.appendChild(t),this.SVG_.appendChild(n),this.SVG_.style.display="block"},e.blockRendering={},e.blockRendering.useDebugger=!1,e.blockRendering.register=function(t,n){e.registry.register(e.registry.Type.RENDERER,t,n)},e.blockRendering.unregister=function(t){e.registry.unregister(e.registry.Type.RENDERER,t)},e.blockRendering.startDebugger=function(){e.blockRendering.useDebugger=!0},e.blockRendering.stopDebugger=function(){e.blockRendering.useDebugger=!1},e.blockRendering.init=function(t,n,r){return(t=new(e.registry.getClass(e.registry.Type.RENDERER,t))(t)).init(n,r),t},e.ASTNode=function(t,n,r){if(!n)throw Error("Cannot create a node without a location.");this.type_=t,this.isConnection_=e.ASTNode.isConnectionType_(t),this.location_=n,this.wsCoordinate_=null,this.processParams_(r||null)},e.ASTNode.types={FIELD:"field",BLOCK:"block",INPUT:"input",OUTPUT:"output",NEXT:"next",PREVIOUS:"previous",STACK:"stack",WORKSPACE:"workspace"},e.ASTNode.NAVIGATE_ALL_FIELDS=!1,e.ASTNode.DEFAULT_OFFSET_Y=-20,e.ASTNode.isConnectionType_=function(t){switch(t){case e.ASTNode.types.PREVIOUS:case e.ASTNode.types.NEXT:case e.ASTNode.types.INPUT:case e.ASTNode.types.OUTPUT:return!0}return!1},e.ASTNode.createFieldNode=function(t){return t?new e.ASTNode(e.ASTNode.types.FIELD,t):null},e.ASTNode.createConnectionNode=function(t){if(!t)return null;var n=t.type;return n==e.connectionTypes.INPUT_VALUE||n==e.connectionTypes.NEXT_STATEMENT&&t.getParentInput()?e.ASTNode.createInputNode(t.getParentInput()):n==e.connectionTypes.NEXT_STATEMENT?new e.ASTNode(e.ASTNode.types.NEXT,t):n==e.connectionTypes.OUTPUT_VALUE?new e.ASTNode(e.ASTNode.types.OUTPUT,t):n==e.connectionTypes.PREVIOUS_STATEMENT?new e.ASTNode(e.ASTNode.types.PREVIOUS,t):null},e.ASTNode.createInputNode=function(t){return t&&t.connection?new e.ASTNode(e.ASTNode.types.INPUT,t.connection):null},e.ASTNode.createBlockNode=function(t){return t?new e.ASTNode(e.ASTNode.types.BLOCK,t):null},e.ASTNode.createStackNode=function(t){return t?new e.ASTNode(e.ASTNode.types.STACK,t):null},e.ASTNode.createWorkspaceNode=function(t,n){return n&&t?new e.ASTNode(e.ASTNode.types.WORKSPACE,t,{wsCoordinate:n}):null},e.ASTNode.createTopNode=function(t){var n=t.previousConnection||t.outputConnection;return n?e.ASTNode.createConnectionNode(n):e.ASTNode.createBlockNode(t)},e.ASTNode.prototype.processParams_=function(t){t&&t.wsCoordinate&&(this.wsCoordinate_=t.wsCoordinate)},e.ASTNode.prototype.getLocation=function(){return this.location_},e.ASTNode.prototype.getType=function(){return this.type_},e.ASTNode.prototype.getWsCoordinate=function(){return this.wsCoordinate_},e.ASTNode.prototype.isConnection=function(){return this.isConnection_},e.ASTNode.prototype.findNextForInput_=function(){var r,t=this.location_.getParentInput(),n=t.getSourceBlock();for(t=n.inputList.indexOf(t)+1;r=n.inputList[t];t++){for(var y,s=r.fieldRow,u=0;y=s[u];u++)if(y.isClickable()||e.ASTNode.NAVIGATE_ALL_FIELDS)return e.ASTNode.createFieldNode(y);if(r.connection)return e.ASTNode.createInputNode(r)}return null},e.ASTNode.prototype.findNextForField_=function(){var t=this.location_,n=t.getParentInput(),r=t.getSourceBlock(),s=r.inputList.indexOf(n);for(t=n.fieldRow.indexOf(t)+1;n=r.inputList[s];s++){for(var u=n.fieldRow;t<u.length;){if(u[t].isClickable()||e.ASTNode.NAVIGATE_ALL_FIELDS)return e.ASTNode.createFieldNode(u[t]);t++}if(t=0,n.connection)return e.ASTNode.createInputNode(n)}return null},e.ASTNode.prototype.findPrevForInput_=function(){for(var s,t=this.location_.getParentInput(),n=t.getSourceBlock(),r=n.inputList.indexOf(t);s=n.inputList[r];r--){if(s.connection&&s!==t)return e.ASTNode.createInputNode(s);for(var y,u=(s=s.fieldRow).length-1;y=s[u];u--)if(y.isClickable()||e.ASTNode.NAVIGATE_ALL_FIELDS)return e.ASTNode.createFieldNode(y)}return null},e.ASTNode.prototype.findPrevForField_=function(){var u,t=this.location_,n=t.getParentInput(),r=t.getSourceBlock(),s=r.inputList.indexOf(n);for(t=n.fieldRow.indexOf(t)-1;u=r.inputList[s];s--){if(u.connection&&u!==n)return e.ASTNode.createInputNode(u);for(u=u.fieldRow;-1<t;){if(u[t].isClickable()||e.ASTNode.NAVIGATE_ALL_FIELDS)return e.ASTNode.createFieldNode(u[t]);t--}0<=s-1&&(t=r.inputList[s-1].fieldRow.length-1)}return null},e.ASTNode.prototype.navigateBetweenStacks_=function(t){var n=this.getLocation();if(n instanceof e.Block||(n=n.getSourceBlock()),!n||!n.workspace)return null;var r=n.getRootBlock();n=r.workspace.getTopBlocks(!0);for(var u,s=0;u=n[s];s++)if(r.id==u.id)return-1==(t=s+(t?1:-1))||t==n.length?null:e.ASTNode.createStackNode(n[t]);throw Error("Couldn't find "+(t?"next":"previous")+" stack?!")},e.ASTNode.prototype.findTopASTNodeForBlock_=function(t){var n=t.previousConnection||t.outputConnection;return n?e.ASTNode.createConnectionNode(n):e.ASTNode.createBlockNode(t)},e.ASTNode.prototype.getOutAstNodeForBlock_=function(t){if(!t)return null;var n=(t=t.getTopStackBlock()).previousConnection||t.outputConnection;return n&&n.targetConnection&&n.targetConnection.getParentInput()?e.ASTNode.createInputNode(n.targetConnection.getParentInput()):e.ASTNode.createStackNode(t)},e.ASTNode.prototype.findFirstFieldOrInput_=function(t){t=t.inputList;for(var r,n=0;r=t[n];n++){for(var y,s=r.fieldRow,u=0;y=s[u];u++)if(y.isClickable()||e.ASTNode.NAVIGATE_ALL_FIELDS)return e.ASTNode.createFieldNode(y);if(r.connection)return e.ASTNode.createInputNode(r)}return null},e.ASTNode.prototype.getSourceBlock=function(){return this.getType()===e.ASTNode.types.BLOCK||this.getType()===e.ASTNode.types.STACK?this.getLocation():this.getType()===e.ASTNode.types.WORKSPACE?null:this.getLocation().getSourceBlock()},e.ASTNode.prototype.next=function(){switch(this.type_){case e.ASTNode.types.STACK:return this.navigateBetweenStacks_(!0);case e.ASTNode.types.OUTPUT:var t=this.location_;return e.ASTNode.createBlockNode(t.getSourceBlock());case e.ASTNode.types.FIELD:return this.findNextForField_();case e.ASTNode.types.INPUT:return this.findNextForInput_();case e.ASTNode.types.BLOCK:return e.ASTNode.createConnectionNode(this.location_.nextConnection);case e.ASTNode.types.PREVIOUS:return e.ASTNode.createBlockNode((t=this.location_).getSourceBlock());case e.ASTNode.types.NEXT:return e.ASTNode.createConnectionNode((t=this.location_).targetConnection)}return null},e.ASTNode.prototype.in=function(){switch(this.type_){case e.ASTNode.types.WORKSPACE:var t=this.location_.getTopBlocks(!0);if(0<t.length)return e.ASTNode.createStackNode(t[0]);break;case e.ASTNode.types.STACK:return this.findTopASTNodeForBlock_(t=this.location_);case e.ASTNode.types.BLOCK:return this.findFirstFieldOrInput_(t=this.location_);case e.ASTNode.types.INPUT:return e.ASTNode.createConnectionNode(this.location_.targetConnection)}return null},e.ASTNode.prototype.prev=function(){switch(this.type_){case e.ASTNode.types.STACK:return this.navigateBetweenStacks_(!1);case e.ASTNode.types.FIELD:return this.findPrevForField_();case e.ASTNode.types.INPUT:return this.findPrevForInput_();case e.ASTNode.types.BLOCK:var t=this.location_;return e.ASTNode.createConnectionNode(t.previousConnection||t.outputConnection);case e.ASTNode.types.PREVIOUS:if((t=(t=this.location_).targetConnection)&&!t.getParentInput())return e.ASTNode.createConnectionNode(t);break;case e.ASTNode.types.NEXT:return e.ASTNode.createBlockNode((t=this.location_).getSourceBlock())}return null},e.ASTNode.prototype.out=function(){switch(this.type_){case e.ASTNode.types.STACK:var t=this.location_,n=t.getRelativeToSurfaceXY();return n=new e.utils.Coordinate(n.x,n.y+e.ASTNode.DEFAULT_OFFSET_Y),e.ASTNode.createWorkspaceNode(t.workspace,n);case e.ASTNode.types.OUTPUT:return(n=(t=this.location_).targetConnection)?e.ASTNode.createConnectionNode(n):e.ASTNode.createStackNode(t.getSourceBlock());case e.ASTNode.types.FIELD:return e.ASTNode.createBlockNode(this.location_.getSourceBlock());case e.ASTNode.types.INPUT:return e.ASTNode.createBlockNode((t=this.location_).getSourceBlock());case e.ASTNode.types.BLOCK:return this.getOutAstNodeForBlock_(t=this.location_);case e.ASTNode.types.PREVIOUS:case e.ASTNode.types.NEXT:return this.getOutAstNodeForBlock_((t=this.location_).getSourceBlock())}return null},e.Blocks=Object.create(null),e.Extensions={},e.Extensions.ALL_=Object.create(null),e.Extensions.register=function(t,n){if("string"!=typeof t||""==t.trim())throw Error('Error: Invalid extension name "'+t+'"');if(e.Extensions.ALL_[t])throw Error('Error: Extension "'+t+'" is already registered.');if("function"!=typeof n)throw Error('Error: Extension "'+t+'" must be a function');e.Extensions.ALL_[t]=n},e.Extensions.registerMixin=function(t,n){if(!n||"object"!=typeof n)throw Error('Error: Mixin "'+t+'" must be a object');e.Extensions.register(t,function(){this.mixin(n)})},e.Extensions.registerMutator=function(t,n,r,s){var u='Error when registering mutator "'+t+'": ';e.Extensions.checkHasFunction_(u,n.domToMutation,"domToMutation"),e.Extensions.checkHasFunction_(u,n.mutationToDom,"mutationToDom");var y=e.Extensions.checkMutatorDialog_(n,u);if(r&&"function"!=typeof r)throw Error('Extension "'+t+'" is not a function');e.Extensions.register(t,function(){if(y){if(!e.Mutator)throw Error(u+"Missing require for Blockly.Mutator");this.setMutator(new e.Mutator(s||[]))}this.mixin(n),r&&r.apply(this)})},e.Extensions.unregister=function(t){e.Extensions.ALL_[t]?delete e.Extensions.ALL_[t]:console.warn('No extension mapping for name "'+t+'" found to unregister')},e.Extensions.apply=function(t,n,r){var s=e.Extensions.ALL_[t];if("function"!=typeof s)throw Error('Error: Extension "'+t+'" not found.');if(r)e.Extensions.checkNoMutatorProperties_(t,n);else var u=e.Extensions.getMutatorProperties_(n);if(s.apply(n),r)e.Extensions.checkBlockHasMutatorProperties_('Error after applying mutator "'+t+'": ',n);else if(!e.Extensions.mutatorPropertiesMatch_(u,n))throw Error('Error when applying extension "'+t+'": mutation properties changed when applying a non-mutator extension.')},e.Extensions.checkHasFunction_=function(t,n,r){if(!n)throw Error(t+'missing required property "'+r+'"');if("function"!=typeof n)throw Error(t+'" required property "'+r+'" must be a function')},e.Extensions.checkNoMutatorProperties_=function(t,n){if(e.Extensions.getMutatorProperties_(n).length)throw Error('Error: tried to apply mutation "'+t+'" to a block that already has mutator functions.  Block id: '+n.id)},e.Extensions.checkMutatorDialog_=function(t,n){var r=void 0!==t.compose,s=void 0!==t.decompose;if(r&&s){if("function"!=typeof t.compose)throw Error(n+"compose must be a function.");if("function"!=typeof t.decompose)throw Error(n+"decompose must be a function.");return!0}if(!r&&!s)return!1;throw Error(n+'Must have both or neither of "compose" and "decompose"')},e.Extensions.checkBlockHasMutatorProperties_=function(t,n){if("function"!=typeof n.domToMutation)throw Error(t+'Applying a mutator didn\'t add "domToMutation"');if("function"!=typeof n.mutationToDom)throw Error(t+'Applying a mutator didn\'t add "mutationToDom"');e.Extensions.checkMutatorDialog_(n,t)},e.Extensions.getMutatorProperties_=function(t){var n=[];return void 0!==t.domToMutation&&n.push(t.domToMutation),void 0!==t.mutationToDom&&n.push(t.mutationToDom),void 0!==t.compose&&n.push(t.compose),void 0!==t.decompose&&n.push(t.decompose),n},e.Extensions.mutatorPropertiesMatch_=function(t,n){if((n=e.Extensions.getMutatorProperties_(n)).length!=t.length)return!1;for(var r=0;r<n.length;r++)if(t[r]!=n[r])return!1;return!0},e.Extensions.buildTooltipForDropdown=function(t,n){var r=[];return"object"==typeof document&&e.utils.runAfterPageLoad(function(){for(var s in n)e.utils.checkMessageReferences(n[s])}),function(){this.type&&-1==r.indexOf(this.type)&&(e.Extensions.checkDropdownOptionsInTable_(this,t,n),r.push(this.type)),this.setTooltip(function(){var s=String(this.getFieldValue(t)),u=n[s];return null==u?-1==r.indexOf(this.type)&&(s="No tooltip mapping for value "+s+" of field "+t,null!=this.type&&(s+=" of block type "+this.type),console.warn(s+".")):u=e.utils.replaceMessageReferences(u),u}.bind(this))}},e.Extensions.checkDropdownOptionsInTable_=function(t,n,r){var s=t.getField(n);if(!s.isOptionListDynamic()){s=s.getOptions();for(var u=0;u<s.length;++u){var y=s[u][1];null==r[y]&&console.warn("No tooltip mapping for value "+y+" of field "+n+" of block type "+t.type)}}},e.Extensions.buildTooltipWithFieldText=function(t,n){return"object"==typeof document&&e.utils.runAfterPageLoad(function(){e.utils.checkMessageReferences(t)}),function(){this.setTooltip(function(){var r=this.getField(n);return e.utils.replaceMessageReferences(t).replace("%1",r?r.getText():"")}.bind(this))}},e.Extensions.extensionParentTooltip_=function(){this.tooltipWhenNotConnected_=this.tooltip,this.setTooltip(function(){var t=this.getParent();return t&&t.getInputsInline()&&t.tooltip||this.tooltipWhenNotConnected_}.bind(this))},e.Extensions.register("parent_tooltip_when_inline",e.Extensions.extensionParentTooltip_),e.fieldRegistry={},e.fieldRegistry.register=function(t,n){e.registry.register(e.registry.Type.FIELD,t,n)},e.fieldRegistry.unregister=function(t){e.registry.unregister(e.registry.Type.FIELD,t)},e.fieldRegistry.fromJson=function(t){var n=e.registry.getObject(e.registry.Type.FIELD,t.type);return n?n.fromJson(t):(console.warn("Blockly could not create a field of type "+t.type+". The field is probably not being registered. This could be because the file is not loaded, the field does not register itself (Issue #1584), or the registration is not being reached."),null)},e.IDeletable=function(){},e.blockAnimations={},e.blockAnimations.disconnectPid_=0,e.blockAnimations.disconnectGroup_=null,e.blockAnimations.disposeUiEffect=function(t){var n=t.workspace,r=t.getSvgRoot();n.getAudioManager().play("delete"),t=n.getSvgXY(r),(r=r.cloneNode(!0)).translateX_=t.x,r.translateY_=t.y,r.setAttribute("transform","translate("+t.x+","+t.y+")"),n.getParentSvg().appendChild(r),r.bBox_=r.getBBox(),e.blockAnimations.disposeUiStep_(r,n.RTL,new Date,n.scale)},e.blockAnimations.disposeUiStep_=function(t,n,r,s){var u=(new Date-r)/150;1<u?e.utils.dom.removeNode(t):(t.setAttribute("transform","translate("+(t.translateX_+(n?-1:1)*t.bBox_.width*s/2*u)+","+(t.translateY_+t.bBox_.height*s*u)+") scale("+(1-u)*s+")"),setTimeout(e.blockAnimations.disposeUiStep_,10,t,n,r,s))},e.blockAnimations.connectionUiEffect=function(t){var n=t.workspace,r=n.scale;if(n.getAudioManager().play("click"),!(1>r)){var s=n.getSvgXY(t.getSvgRoot());t.outputConnection?(s.x+=(t.RTL?3:-3)*r,s.y+=13*r):t.previousConnection&&(s.x+=(t.RTL?-23:23)*r,s.y+=3*r),t=e.utils.dom.createSvgElement(e.utils.Svg.CIRCLE,{cx:s.x,cy:s.y,r:0,fill:"none",stroke:"#888","stroke-width":10},n.getParentSvg()),e.blockAnimations.connectionUiStep_(t,new Date,r)}},e.blockAnimations.connectionUiStep_=function(t,n,r){var s=(new Date-n)/150;1<s?e.utils.dom.removeNode(t):(t.setAttribute("r",25*s*r),t.style.opacity=1-s,e.blockAnimations.disconnectPid_=setTimeout(e.blockAnimations.connectionUiStep_,10,t,n,r))},e.blockAnimations.disconnectUiEffect=function(t){if(t.workspace.getAudioManager().play("disconnect"),!(1>t.workspace.scale)){var n=t.getHeightWidth().height;n=Math.atan(10/n)/Math.PI*180,t.RTL||(n*=-1),e.blockAnimations.disconnectUiStep_(t.getSvgRoot(),n,new Date)}},e.blockAnimations.disconnectUiStep_=function(t,n,r){var s=(new Date-r)/200;1<s?t.skew_="":(t.skew_="skewX("+Math.round(Math.sin(s*Math.PI*3)*(1-s)*n)+")",e.blockAnimations.disconnectGroup_=t,e.blockAnimations.disconnectPid_=setTimeout(e.blockAnimations.disconnectUiStep_,10,t,n,r)),t.setAttribute("transform",t.translate_+t.skew_)},e.blockAnimations.disconnectUiStop=function(){if(e.blockAnimations.disconnectGroup_){clearTimeout(e.blockAnimations.disconnectPid_);var t=e.blockAnimations.disconnectGroup_;t.skew_="",t.setAttribute("transform",t.translate_),e.blockAnimations.disconnectGroup_=null}},e.Events.BlockDrag=function(t,n,r){e.Events.BlockDrag.superClass_.constructor.call(this,t?t.workspace.id:void 0),this.blockId=t?t.id:null,this.isStart=n,this.blocks=r},e.utils.object.inherits(e.Events.BlockDrag,e.Events.UiBase),e.Events.BlockDrag.prototype.type=e.Events.BLOCK_DRAG,e.Events.BlockDrag.prototype.toJson=function(){var t=e.Events.BlockDrag.superClass_.toJson.call(this);return t.isStart=this.isStart,t.blockId=this.blockId,t.blocks=this.blocks,t},e.Events.BlockDrag.prototype.fromJson=function(t){e.Events.BlockDrag.superClass_.fromJson.call(this,t),this.isStart=t.isStart,this.blockId=t.blockId,this.blocks=t.blocks},e.registry.register(e.registry.Type.EVENT,e.Events.BLOCK_DRAG,e.Events.BlockDrag),e.IBlockDragger=function(){},e.InsertionMarkerManager=function(t){this.topBlock_=e.selected=t,this.workspace_=t.workspace,this.lastMarker_=this.lastOnStack_=null,this.firstMarker_=this.createMarkerBlock_(this.topBlock_),this.localConnection_=this.closestConnection_=null,this.wouldDeleteBlock_=!1,this.fadedBlock_=this.highlightedBlock_=this.markerConnection_=null,this.availableConnections_=this.initAvailableConnections_()},e.InsertionMarkerManager.PREVIEW_TYPE={INSERTION_MARKER:0,INPUT_OUTLINE:1,REPLACEMENT_FADE:2},e.InsertionMarkerManager.DUPLICATE_BLOCK_ERROR="The insertion marker manager tried to create a marker but the result is missing %1. If you are using a mutator, make sure your domToMutation method is properly defined.",e.InsertionMarkerManager.prototype.dispose=function(){this.availableConnections_.length=0,e.Events.disable();try{this.firstMarker_&&this.firstMarker_.dispose(),this.lastMarker_&&this.lastMarker_.dispose()}finally{e.Events.enable()}},e.InsertionMarkerManager.prototype.updateAvailableConnections=function(){this.availableConnections_=this.initAvailableConnections_()},e.InsertionMarkerManager.prototype.wouldDeleteBlock=function(){return this.wouldDeleteBlock_},e.InsertionMarkerManager.prototype.wouldConnectBlock=function(){return!!this.closestConnection_},e.InsertionMarkerManager.prototype.applyConnections=function(){if(this.closestConnection_&&(e.Events.disable(),this.hidePreview_(),e.Events.enable(),this.localConnection_.connect(this.closestConnection_),this.topBlock_.rendered)){var t=this.localConnection_.isSuperior()?this.closestConnection_:this.localConnection_;e.blockAnimations.connectionUiEffect(t.getSourceBlock()),this.topBlock_.getRootBlock().bringToFront()}},e.InsertionMarkerManager.prototype.update=function(t,n){var r=this.getCandidate_(t);((this.wouldDeleteBlock_=this.shouldDelete_(r,n))||this.shouldUpdatePreviews_(r,t))&&(e.Events.disable(),this.maybeHidePreview_(r),this.maybeShowPreview_(r),e.Events.enable())},e.InsertionMarkerManager.prototype.createMarkerBlock_=function(t){var n=t.type;e.Events.disable();try{var r=this.workspace_.newBlock(n);if(r.setInsertionMarker(!0),t.mutationToDom){var s=t.mutationToDom();s&&r.domToMutation(s)}for(n=0;n<t.inputList.length;n++){var u=t.inputList[n];if(u.name!=e.constants.COLLAPSED_INPUT_NAME){var y=r.inputList[n];if(!y)throw Error(e.InsertionMarkerManager.DUPLICATE_BLOCK_ERROR.replace("%1","an input"));for(s=0;s<u.fieldRow.length;s++){var x=u.fieldRow[s],B=y.fieldRow[s];if(!B)throw Error(e.InsertionMarkerManager.DUPLICATE_BLOCK_ERROR.replace("%1","a field"));B.setValue(x.getValue())}}}r.setCollapsed(t.isCollapsed()),r.setInputsInline(t.getInputsInline()),r.initSvg(),r.getSvgRoot().setAttribute("visibility","hidden")}finally{e.Events.enable()}return r},e.InsertionMarkerManager.prototype.initAvailableConnections_=function(){var t=this.topBlock_.getConnections_(!1),n=this.topBlock_.lastConnectionInStack(!0);if(n&&n!=this.topBlock_.nextConnection){if(t.push(n),this.lastOnStack_=n,this.lastMarker_){e.Events.disable();try{this.lastMarker_.dispose()}finally{e.Events.enable()}}this.lastMarker_=this.createMarkerBlock_(n.getSourceBlock())}return t},e.InsertionMarkerManager.prototype.shouldUpdatePreviews_=function(t,n){var r=t.local,s=t.closest;return t=t.radius,r&&s?this.localConnection_&&this.closestConnection_?!(this.closestConnection_==s&&this.localConnection_==r||(r=this.localConnection_.x+n.x-this.closestConnection_.x,n=this.localConnection_.y+n.y-this.closestConnection_.y,n=Math.sqrt(r*r+n*n),s&&t>n-e.CURRENT_CONNECTION_PREFERENCE)):!this.localConnection_&&!this.closestConnection_||(console.error("Only one of localConnection_ and closestConnection_ was set."),console.error("Returning true from shouldUpdatePreviews, but it's not clear why."),!0):!(!this.localConnection_||!this.closestConnection_)},e.InsertionMarkerManager.prototype.getCandidate_=function(t){for(var n=this.getStartRadius_(),r=null,s=null,u=0;u<this.availableConnections_.length;u++){var y=this.availableConnections_[u],x=y.closest(n,t);x.connection&&(r=x.connection,s=y,n=x.radius)}return{closest:r,local:s,radius:n}},e.InsertionMarkerManager.prototype.getStartRadius_=function(){return this.closestConnection_&&this.localConnection_?e.CONNECTING_SNAP_RADIUS:e.SNAP_RADIUS},e.InsertionMarkerManager.prototype.shouldDelete_=function(t,n){return!(!n||!this.workspace_.getComponentManager().hasCapability(n.id,e.ComponentManager.Capability.DELETE_AREA))&&n.wouldDelete(this.topBlock_,t&&!!t.closest)},e.InsertionMarkerManager.prototype.maybeShowPreview_=function(t){if(!this.wouldDeleteBlock_){var n=t.closest;t=t.local,n&&(n==this.closestConnection_||n.getSourceBlock().isInsertionMarker()?console.log("Trying to connect to an insertion marker"):(this.closestConnection_=n,this.localConnection_=t,this.showPreview_()))}},e.InsertionMarkerManager.prototype.showPreview_=function(){var t=this.closestConnection_,n=this.workspace_.getRenderer();switch(n.getConnectionPreviewMethod(t,this.localConnection_,this.topBlock_)){case e.InsertionMarkerManager.PREVIEW_TYPE.INPUT_OUTLINE:this.showInsertionInputOutline_();break;case e.InsertionMarkerManager.PREVIEW_TYPE.INSERTION_MARKER:this.showInsertionMarker_();break;case e.InsertionMarkerManager.PREVIEW_TYPE.REPLACEMENT_FADE:this.showReplacementFade_()}t&&n.shouldHighlightConnection(t)&&t.highlight()},e.InsertionMarkerManager.prototype.maybeHidePreview_=function(t){if(t.closest){var n=this.closestConnection_!=t.closest;t=this.localConnection_!=t.local,this.closestConnection_&&this.localConnection_&&(n||t||this.wouldDeleteBlock_)&&this.hidePreview_()}else this.hidePreview_();this.localConnection_=this.closestConnection_=this.markerConnection_=null},e.InsertionMarkerManager.prototype.hidePreview_=function(){this.closestConnection_&&this.closestConnection_.targetBlock()&&this.workspace_.getRenderer().shouldHighlightConnection(this.closestConnection_)&&this.closestConnection_.unhighlight(),this.fadedBlock_?this.hideReplacementFade_():this.highlightedBlock_?this.hideInsertionInputOutline_():this.markerConnection_&&this.hideInsertionMarker_()},e.InsertionMarkerManager.prototype.showInsertionMarker_=function(){var t=this.localConnection_,n=this.closestConnection_,r=this.lastOnStack_&&t==this.lastOnStack_?this.lastMarker_:this.firstMarker_;if((t=r.getMatchingConnection(t.getSourceBlock(),t))==this.markerConnection_)throw Error("Made it to showInsertionMarker_ even though the marker isn't changing");r.render(),r.rendered=!0,r.getSvgRoot().setAttribute("visibility","visible"),t&&n&&r.positionNearConnection(t,n),n&&t.connect(n),this.markerConnection_=t},e.InsertionMarkerManager.prototype.hideInsertionMarker_=function(){if(this.markerConnection_){var t=this.markerConnection_,n=t.getSourceBlock(),r=n.nextConnection,s=n.previousConnection,u=n.outputConnection;if(u=t.type==e.connectionTypes.INPUT_VALUE&&!(u&&u.targetConnection),!(t!=r||s&&s.targetConnection)||u?t.targetBlock().unplug(!1):t.type==e.connectionTypes.NEXT_STATEMENT&&t!=r?((r=t.targetConnection).getSourceBlock().unplug(!1),s=s?s.targetConnection:null,n.unplug(!0),s&&s.connect(r)):n.unplug(!0),t.targetConnection)throw Error("markerConnection_ still connected at the end of disconnectInsertionMarker");this.markerConnection_=null,(t=n.getSvgRoot())&&t.setAttribute("visibility","hidden")}else console.log("No insertion marker connection to disconnect")},e.InsertionMarkerManager.prototype.showInsertionInputOutline_=function(){var t=this.closestConnection_;this.highlightedBlock_=t.getSourceBlock(),this.highlightedBlock_.highlightShapeForInput(t,!0)},e.InsertionMarkerManager.prototype.hideInsertionInputOutline_=function(){this.highlightedBlock_.highlightShapeForInput(this.closestConnection_,!1),this.highlightedBlock_=null},e.InsertionMarkerManager.prototype.showReplacementFade_=function(){this.fadedBlock_=this.closestConnection_.targetBlock(),this.fadedBlock_.fadeForReplacement(!0)},e.InsertionMarkerManager.prototype.hideReplacementFade_=function(){this.fadedBlock_.fadeForReplacement(!1),this.fadedBlock_=null},e.InsertionMarkerManager.prototype.getInsertionMarkers=function(){var t=[];return this.firstMarker_&&t.push(this.firstMarker_),this.lastMarker_&&t.push(this.lastMarker_),t},e.BlockDragger=function(t,n){this.draggingBlock_=t,this.workspace_=n,this.draggedConnectionManager_=new e.InsertionMarkerManager(this.draggingBlock_),this.dragTarget_=null,this.wouldDeleteBlock_=!1,this.startXY_=this.draggingBlock_.getRelativeToSurfaceXY(),this.dragIconData_=e.BlockDragger.initIconData_(t)},e.BlockDragger.prototype.dispose=function(){this.dragIconData_.length=0,this.draggedConnectionManager_&&this.draggedConnectionManager_.dispose()},e.BlockDragger.initIconData_=function(t){var n=[];t=t.getDescendants(!1);for(var s,r=0;s=t[r];r++){s=s.getIcons();for(var u=0;u<s.length;u++){var y={location:s[u].getIconLocation(),icon:s[u]};n.push(y)}}return n},e.BlockDragger.prototype.startDrag=function(t,n){e.Events.getGroup()||e.Events.setGroup(!0),this.fireDragStartEvent_(),this.workspace_.isMutator&&this.draggingBlock_.bringToFront(),e.utils.dom.startTextWidthCache(),this.workspace_.setResizesEnabled(!1),e.blockAnimations.disconnectUiStop(),this.shouldDisconnect_(n)&&this.disconnectBlock_(n,t),this.draggingBlock_.setDragging(!0),this.draggingBlock_.moveToDragSurface()},e.BlockDragger.prototype.shouldDisconnect_=function(t){return!!(this.draggingBlock_.getParent()||t&&this.draggingBlock_.nextConnection&&this.draggingBlock_.nextConnection.targetBlock())},e.BlockDragger.prototype.disconnectBlock_=function(t,n){this.draggingBlock_.unplug(t),t=this.pixelsToWorkspaceUnits_(n),t=e.utils.Coordinate.sum(this.startXY_,t),this.draggingBlock_.translate(t.x,t.y),e.blockAnimations.disconnectUiEffect(this.draggingBlock_),this.draggedConnectionManager_.updateAvailableConnections()},e.BlockDragger.prototype.fireDragStartEvent_=function(){var t=new(e.Events.get(e.Events.BLOCK_DRAG))(this.draggingBlock_,!0,this.draggingBlock_.getDescendants(!1));e.Events.fire(t)},e.BlockDragger.prototype.drag=function(t,n){n=this.pixelsToWorkspaceUnits_(n);var r=e.utils.Coordinate.sum(this.startXY_,n);this.draggingBlock_.moveDuringDrag(r),this.dragIcons_(n),r=this.dragTarget_,this.dragTarget_=this.workspace_.getDragTarget(t),this.draggedConnectionManager_.update(n,this.dragTarget_),t=this.wouldDeleteBlock_,this.wouldDeleteBlock_=this.draggedConnectionManager_.wouldDeleteBlock(),t!=this.wouldDeleteBlock_&&this.updateCursorDuringBlockDrag_(),this.dragTarget_!==r&&(r&&r.onDragExit(this.draggingBlock_),this.dragTarget_&&this.dragTarget_.onDragEnter(this.draggingBlock_)),this.dragTarget_&&this.dragTarget_.onDragOver(this.draggingBlock_)},e.BlockDragger.prototype.endDrag=function(t,n){if(this.drag(t,n),this.dragIconData_=[],this.fireDragEndEvent_(),e.utils.dom.stopTextWidthCache(),e.blockAnimations.disconnectUiStop(),this.dragTarget_&&this.dragTarget_.shouldPreventMove(this.draggingBlock_))t=this.startXY_;else{var r=(t=this.getNewLocationAfterDrag_(n)).delta;t=t.newLocation}this.draggingBlock_.moveOffDragSurface(t),this.dragTarget_&&this.dragTarget_.onDrop(this.draggingBlock_),this.maybeDeleteBlock_()||(this.draggingBlock_.setDragging(!1),r?this.updateBlockAfterMove_(r):e.bumpObjectIntoBounds_(this.draggingBlock_.workspace,this.workspace_.getMetricsManager().getScrollMetrics(!0),this.draggingBlock_)),this.workspace_.setResizesEnabled(!0),e.Events.setGroup(!1)},e.BlockDragger.prototype.getNewLocationAfterDrag_=function(t){var n={};return n.delta=this.pixelsToWorkspaceUnits_(t),n.newLocation=e.utils.Coordinate.sum(this.startXY_,n.delta),n},e.BlockDragger.prototype.maybeDeleteBlock_=function(){return!!this.wouldDeleteBlock_&&(this.fireMoveEvent_(),this.draggingBlock_.dispose(!1,!0),e.draggingConnections=[],!0)},e.BlockDragger.prototype.updateBlockAfterMove_=function(t){this.draggingBlock_.moveConnections(t.x,t.y),this.fireMoveEvent_(),this.draggedConnectionManager_.wouldConnectBlock()?this.draggedConnectionManager_.applyConnections():this.draggingBlock_.render(),this.draggingBlock_.scheduleSnapAndBump()},e.BlockDragger.prototype.fireDragEndEvent_=function(){var t=new(e.Events.get(e.Events.BLOCK_DRAG))(this.draggingBlock_,!1,this.draggingBlock_.getDescendants(!1));e.Events.fire(t)},e.BlockDragger.prototype.updateToolboxStyle_=function(t){var n=this.workspace_.getToolbox();if(n){var r=this.draggingBlock_.isDeletable()?"blocklyToolboxDelete":"blocklyToolboxGrab";t&&"function"==typeof n.removeStyle?n.removeStyle(r):t||"function"!=typeof n.addStyle||n.addStyle(r)}},e.BlockDragger.prototype.fireMoveEvent_=function(){var t=new(e.Events.get(e.Events.BLOCK_MOVE))(this.draggingBlock_);t.oldCoordinate=this.startXY_,t.recordNew(),e.Events.fire(t)},e.BlockDragger.prototype.updateCursorDuringBlockDrag_=function(){this.draggingBlock_.setDeleteStyle(this.wouldDeleteBlock_)},e.BlockDragger.prototype.pixelsToWorkspaceUnits_=function(t){return t=new e.utils.Coordinate(t.x/this.workspace_.scale,t.y/this.workspace_.scale),this.workspace_.isMutator&&t.scale(1/this.workspace_.options.parentWorkspace.scale),t},e.BlockDragger.prototype.dragIcons_=function(t){for(var n=0;n<this.dragIconData_.length;n++){var r=this.dragIconData_[n];r.icon.setIconLocation(e.utils.Coordinate.sum(r.location,t))}},e.BlockDragger.prototype.getInsertionMarkers=function(){return this.draggedConnectionManager_&&this.draggedConnectionManager_.getInsertionMarkers?this.draggedConnectionManager_.getInsertionMarkers():[]},e.registry.register(e.registry.Type.BLOCK_DRAGGER,e.registry.DEFAULT,e.BlockDragger),e.IContextMenu=function(){},e.IDraggable=function(){},e.IBubble=function(){},e.Bubble=function(t,n,r,s,u,y){this.workspace_=t,this.content_=n,this.shape_=r,this.onMouseDownResizeWrapper_=this.onMouseDownBubbleWrapper_=this.moveCallback_=this.resizeCallback_=null,this.disposed=!1,r=e.Bubble.ARROW_ANGLE,this.workspace_.RTL&&(r=-r),this.arrow_radians_=e.utils.math.toRadians(r),t.getBubbleCanvas().appendChild(this.createDom_(n,!(!u||!y))),this.setAnchorLocation(s),u&&y||(u=(t=this.content_.getBBox()).width+2*e.Bubble.BORDER_WIDTH,y=t.height+2*e.Bubble.BORDER_WIDTH),this.setBubbleSize(u,y),this.positionBubble_(),this.renderArrow_(),this.rendered_=!0},e.Bubble.BORDER_WIDTH=6,e.Bubble.ARROW_THICKNESS=5,e.Bubble.ARROW_ANGLE=20,e.Bubble.ARROW_BEND=4,e.Bubble.ANCHOR_RADIUS=8,e.Bubble.onMouseUpWrapper_=null,e.Bubble.onMouseMoveWrapper_=null,e.Bubble.unbindDragEvents_=function(){e.Bubble.onMouseUpWrapper_&&(e.browserEvents.unbind(e.Bubble.onMouseUpWrapper_),e.Bubble.onMouseUpWrapper_=null),e.Bubble.onMouseMoveWrapper_&&(e.browserEvents.unbind(e.Bubble.onMouseMoveWrapper_),e.Bubble.onMouseMoveWrapper_=null)},e.Bubble.bubbleMouseUp_=function(t){e.Touch.clearTouchIdentifier(),e.Bubble.unbindDragEvents_()},e.Bubble.prototype.rendered_=!1,e.Bubble.prototype.anchorXY_=null,e.Bubble.prototype.relativeLeft_=0,e.Bubble.prototype.relativeTop_=0,e.Bubble.prototype.width_=0,e.Bubble.prototype.height_=0,e.Bubble.prototype.autoLayout_=!0,e.Bubble.prototype.createDom_=function(t,n){this.bubbleGroup_=e.utils.dom.createSvgElement(e.utils.Svg.G,{},null);var r={filter:"url(#"+this.workspace_.getRenderer().getConstants().embossFilterId+")"};return e.utils.userAgent.JAVA_FX&&(r={}),r=e.utils.dom.createSvgElement(e.utils.Svg.G,r,this.bubbleGroup_),this.bubbleArrow_=e.utils.dom.createSvgElement(e.utils.Svg.PATH,{},r),this.bubbleBack_=e.utils.dom.createSvgElement(e.utils.Svg.RECT,{class:"blocklyDraggable",x:0,y:0,rx:e.Bubble.BORDER_WIDTH,ry:e.Bubble.BORDER_WIDTH},r),n?(this.resizeGroup_=e.utils.dom.createSvgElement(e.utils.Svg.G,{class:this.workspace_.RTL?"blocklyResizeSW":"blocklyResizeSE"},this.bubbleGroup_),e.utils.dom.createSvgElement(e.utils.Svg.POLYGON,{points:"0,x x,x x,0".replace(/x/g,(n=2*e.Bubble.BORDER_WIDTH).toString())},this.resizeGroup_),e.utils.dom.createSvgElement(e.utils.Svg.LINE,{class:"blocklyResizeLine",x1:n/3,y1:n-1,x2:n-1,y2:n/3},this.resizeGroup_),e.utils.dom.createSvgElement(e.utils.Svg.LINE,{class:"blocklyResizeLine",x1:2*n/3,y1:n-1,x2:n-1,y2:2*n/3},this.resizeGroup_)):this.resizeGroup_=null,this.workspace_.options.readOnly||(this.onMouseDownBubbleWrapper_=e.browserEvents.conditionalBind(this.bubbleBack_,"mousedown",this,this.bubbleMouseDown_),this.resizeGroup_&&(this.onMouseDownResizeWrapper_=e.browserEvents.conditionalBind(this.resizeGroup_,"mousedown",this,this.resizeMouseDown_))),this.bubbleGroup_.appendChild(t),this.bubbleGroup_},e.Bubble.prototype.getSvgRoot=function(){return this.bubbleGroup_},e.Bubble.prototype.setSvgId=function(t){this.bubbleGroup_.dataset&&(this.bubbleGroup_.dataset.blockId=t)},e.Bubble.prototype.bubbleMouseDown_=function(t){var n=this.workspace_.getGesture(t);n&&n.handleBubbleStart(t,this)},e.Bubble.prototype.showContextMenu=function(t){},e.Bubble.prototype.isDeletable=function(){return!1},e.Bubble.prototype.setDeleteStyle=function(t){},e.Bubble.prototype.resizeMouseDown_=function(t){this.promote(),e.Bubble.unbindDragEvents_(),e.utils.isRightButton(t)||(this.workspace_.startDrag(t,new e.utils.Coordinate(this.workspace_.RTL?-this.width_:this.width_,this.height_)),e.Bubble.onMouseUpWrapper_=e.browserEvents.conditionalBind(document,"mouseup",this,e.Bubble.bubbleMouseUp_),e.Bubble.onMouseMoveWrapper_=e.browserEvents.conditionalBind(document,"mousemove",this,this.resizeMouseMove_),e.hideChaff()),t.stopPropagation()},e.Bubble.prototype.resizeMouseMove_=function(t){this.autoLayout_=!1,t=this.workspace_.moveDrag(t),this.setBubbleSize(this.workspace_.RTL?-t.x:t.x,t.y),this.workspace_.RTL&&this.positionBubble_()},e.Bubble.prototype.registerResizeEvent=function(t){this.resizeCallback_=t},e.Bubble.prototype.registerMoveEvent=function(t){this.moveCallback_=t},e.Bubble.prototype.promote=function(){var t=this.bubbleGroup_.parentNode;return t.lastChild!==this.bubbleGroup_&&(t.appendChild(this.bubbleGroup_),!0)},e.Bubble.prototype.setAnchorLocation=function(t){this.anchorXY_=t,this.rendered_&&this.positionBubble_()},e.Bubble.prototype.layoutBubble_=function(){var t=this.workspace_.getMetricsManager().getViewMetrics(!0),n=this.getOptimalRelativeLeft_(t),r=this.getOptimalRelativeTop_(t),s=this.shape_.getBBox(),u={x:n,y:-this.height_-this.workspace_.getRenderer().getConstants().MIN_BLOCK_HEIGHT},y={x:-this.width_-30,y:r};r={x:s.width,y:r};var x={x:n,y:s.height};n=s.width<s.height?r:x,s=s.width<s.height?x:r,r=this.getOverlap_(u,t),x=this.getOverlap_(y,t);var B=this.getOverlap_(n,t);t=this.getOverlap_(s,t),r==(t=Math.max(r,x,B,t))?(this.relativeLeft_=u.x,this.relativeTop_=u.y):x==t?(this.relativeLeft_=y.x,this.relativeTop_=y.y):B==t?(this.relativeLeft_=n.x,this.relativeTop_=n.y):(this.relativeLeft_=s.x,this.relativeTop_=s.y)},e.Bubble.prototype.getOverlap_=function(t,n){var r=this.workspace_.RTL?this.anchorXY_.x-t.x-this.width_:t.x+this.anchorXY_.x;return t=t.y+this.anchorXY_.y,Math.max(0,Math.min(1,(Math.min(r+this.width_,n.left+n.width)-Math.max(r,n.left))*(Math.min(t+this.height_,n.top+n.height)-Math.max(t,n.top))/(this.width_*this.height_)))},e.Bubble.prototype.getOptimalRelativeLeft_=function(t){var n=-this.width_/4;if(this.width_>t.width)return n;if(this.workspace_.RTL)var r=this.anchorXY_.x-n,s=r-this.width_,u=t.left+t.width,y=t.left+e.Scrollbar.scrollbarThickness/this.workspace_.scale;else r=(s=n+this.anchorXY_.x)+this.width_,y=t.left,u=t.left+t.width-e.Scrollbar.scrollbarThickness/this.workspace_.scale;return this.workspace_.RTL?s<y?n=-(y-this.anchorXY_.x+this.width_):r>u&&(n=-(u-this.anchorXY_.x)):s<y?n=y-this.anchorXY_.x:r>u&&(n=u-this.anchorXY_.x-this.width_),n},e.Bubble.prototype.getOptimalRelativeTop_=function(t){var n=-this.height_/4;if(this.height_>t.height)return n;var r=this.anchorXY_.y+n,u=t.top;t=t.top+t.height-e.Scrollbar.scrollbarThickness/this.workspace_.scale;var y=this.anchorXY_.y;return r<u?n=u-y:r+this.height_>t&&(n=t-y-this.height_),n},e.Bubble.prototype.positionBubble_=function(){var t=this.anchorXY_.x;this.moveTo(t=this.workspace_.RTL?t-(this.relativeLeft_+this.width_):t+this.relativeLeft_,this.relativeTop_+this.anchorXY_.y)},e.Bubble.prototype.moveTo=function(t,n){this.bubbleGroup_.setAttribute("transform","translate("+t+","+n+")")},e.Bubble.prototype.setDragging=function(t){!t&&this.moveCallback_&&this.moveCallback_()},e.Bubble.prototype.getBubbleSize=function(){return new e.utils.Size(this.width_,this.height_)},e.Bubble.prototype.setBubbleSize=function(t,n){var r=2*e.Bubble.BORDER_WIDTH;t=Math.max(t,r+45),n=Math.max(n,r+20),this.width_=t,this.height_=n,this.bubbleBack_.setAttribute("width",t),this.bubbleBack_.setAttribute("height",n),this.resizeGroup_&&this.resizeGroup_.setAttribute("transform",this.workspace_.RTL?"translate("+2*e.Bubble.BORDER_WIDTH+","+(n-r)+") scale(-1 1)":"translate("+(t-r)+","+(n-r)+")"),this.autoLayout_&&this.layoutBubble_(),this.positionBubble_(),this.renderArrow_(),this.resizeCallback_&&this.resizeCallback_()},e.Bubble.prototype.renderArrow_=function(){var t=[],n=this.width_/2,r=this.height_/2,s=-this.relativeLeft_,u=-this.relativeTop_;if(n==s&&r==u)t.push("M "+n+","+r);else{u-=r,s-=n,this.workspace_.RTL&&(s*=-1);var y=Math.sqrt(u*u+s*s),x=Math.acos(s/y);0>u&&(x=2*Math.PI-x);var B=x+Math.PI/2;B>2*Math.PI&&(B-=2*Math.PI);var Q=Math.sin(B),at=Math.cos(B),rt=this.getBubbleSize();B=(rt.width+rt.height)/e.Bubble.ARROW_THICKNESS,B=Math.min(B,rt.width,rt.height)/4,s=n+(rt=1-e.Bubble.ANCHOR_RADIUS/y)*s,u=r+rt*u,rt=n+B*at;var St=r+B*Q;n-=B*at,r-=B*Q,(Q=x+this.arrow_radians_)>2*Math.PI&&(Q-=2*Math.PI),x=Math.sin(Q)*y/e.Bubble.ARROW_BEND,y=Math.cos(Q)*y/e.Bubble.ARROW_BEND,t.push("M"+rt+","+St),t.push("C"+(rt+y)+","+(St+x)+" "+s+","+u+" "+s+","+u),t.push("C"+s+","+u+" "+(n+y)+","+(r+x)+" "+n+","+r)}t.push("z"),this.bubbleArrow_.setAttribute("d",t.join(" "))},e.Bubble.prototype.setColour=function(t){this.bubbleBack_.setAttribute("fill",t),this.bubbleArrow_.setAttribute("fill",t)},e.Bubble.prototype.dispose=function(){this.onMouseDownBubbleWrapper_&&e.browserEvents.unbind(this.onMouseDownBubbleWrapper_),this.onMouseDownResizeWrapper_&&e.browserEvents.unbind(this.onMouseDownResizeWrapper_),e.Bubble.unbindDragEvents_(),e.utils.dom.removeNode(this.bubbleGroup_),this.disposed=!0},e.Bubble.prototype.moveDuringDrag=function(t,n){t?t.translateSurface(n.x,n.y):this.moveTo(n.x,n.y),this.relativeLeft_=this.workspace_.RTL?this.anchorXY_.x-n.x-this.width_:n.x-this.anchorXY_.x,this.relativeTop_=n.y-this.anchorXY_.y,this.renderArrow_()},e.Bubble.prototype.getRelativeToSurfaceXY=function(){return new e.utils.Coordinate(this.workspace_.RTL?-this.relativeLeft_+this.anchorXY_.x-this.width_:this.anchorXY_.x+this.relativeLeft_,this.anchorXY_.y+this.relativeTop_)},e.Bubble.prototype.setAutoLayout=function(t){this.autoLayout_=t},e.Bubble.textToDom=function(t){var n=e.utils.dom.createSvgElement(e.utils.Svg.TEXT,{class:"blocklyText blocklyBubbleText blocklyNoPointerEvents",y:e.Bubble.BORDER_WIDTH},null);t=t.split("\n");for(var r=0;r<t.length;r++){var s=e.utils.dom.createSvgElement(e.utils.Svg.TSPAN,{dy:"1em",x:e.Bubble.BORDER_WIDTH},n),u=document.createTextNode(t[r]);s.appendChild(u)}return n},e.Bubble.createNonEditableBubble=function(t,n,r){if((r=new e.Bubble(n.workspace,t,n.pathObject.svgPath,r,null,null)).setSvgId(n.id),n.RTL){n=t.getBBox().width;for(var u,s=0;u=t.childNodes[s];s++)u.setAttribute("text-anchor","end"),u.setAttribute("x",n+e.Bubble.BORDER_WIDTH)}return r},e.Events.CommentBase=function(t){this.commentId=(this.isBlank=void 0===t)?"":t.id,this.workspaceId=this.isBlank?"":t.workspace.id,this.group=e.Events.getGroup(),this.recordUndo=e.Events.recordUndo},e.utils.object.inherits(e.Events.CommentBase,e.Events.Abstract),e.Events.CommentBase.prototype.toJson=function(){var t=e.Events.CommentBase.superClass_.toJson.call(this);return this.commentId&&(t.commentId=this.commentId),t},e.Events.CommentBase.prototype.fromJson=function(t){e.Events.CommentBase.superClass_.fromJson.call(this,t),this.commentId=t.commentId},e.Events.CommentChange=function(t,n,r){e.Events.CommentChange.superClass_.constructor.call(this,t),t&&(this.oldContents_=void 0===n?"":n,this.newContents_=void 0===r?"":r)},e.utils.object.inherits(e.Events.CommentChange,e.Events.CommentBase),e.Events.CommentChange.prototype.type=e.Events.COMMENT_CHANGE,e.Events.CommentChange.prototype.toJson=function(){var t=e.Events.CommentChange.superClass_.toJson.call(this);return t.oldContents=this.oldContents_,t.newContents=this.newContents_,t},e.Events.CommentChange.prototype.fromJson=function(t){e.Events.CommentChange.superClass_.fromJson.call(this,t),this.oldContents_=t.oldContents,this.newContents_=t.newContents},e.Events.CommentChange.prototype.isNull=function(){return this.oldContents_==this.newContents_},e.Events.CommentChange.prototype.run=function(t){var n=this.getEventWorkspace_().getCommentById(this.commentId);n?n.setContent(t?this.newContents_:this.oldContents_):console.warn("Can't change non-existent comment: "+this.commentId)},e.Events.CommentCreate=function(t){e.Events.CommentCreate.superClass_.constructor.call(this,t),t&&(this.xml=t.toXmlWithXY())},e.utils.object.inherits(e.Events.CommentCreate,e.Events.CommentBase),e.Events.CommentCreate.prototype.type=e.Events.COMMENT_CREATE,e.Events.CommentCreate.prototype.toJson=function(){var t=e.Events.CommentCreate.superClass_.toJson.call(this);return t.xml=e.Xml.domToText(this.xml),t},e.Events.CommentCreate.prototype.fromJson=function(t){e.Events.CommentCreate.superClass_.fromJson.call(this,t),this.xml=e.Xml.textToDom(t.xml)},e.Events.CommentCreate.prototype.run=function(t){e.Events.CommentCreateDeleteHelper(this,t)},e.Events.CommentCreateDeleteHelper=function(t,n){var r=t.getEventWorkspace_();n?((n=e.utils.xml.createElement("xml")).appendChild(t.xml),e.Xml.domToWorkspace(n,r)):(r=r.getCommentById(t.commentId))?r.dispose(!1,!1):console.warn("Can't uncreate non-existent comment: "+t.commentId)},e.Events.CommentDelete=function(t){e.Events.CommentDelete.superClass_.constructor.call(this,t),t&&(this.xml=t.toXmlWithXY())},e.utils.object.inherits(e.Events.CommentDelete,e.Events.CommentBase),e.Events.CommentDelete.prototype.type=e.Events.COMMENT_DELETE,e.Events.CommentDelete.prototype.toJson=function(){return e.Events.CommentDelete.superClass_.toJson.call(this)},e.Events.CommentDelete.prototype.fromJson=function(t){e.Events.CommentDelete.superClass_.fromJson.call(this,t)},e.Events.CommentDelete.prototype.run=function(t){e.Events.CommentCreateDeleteHelper(this,!t)},e.Events.CommentMove=function(t){e.Events.CommentMove.superClass_.constructor.call(this,t),t&&(this.comment_=t,this.oldCoordinate_=t.getXY(),this.newCoordinate_=null)},e.utils.object.inherits(e.Events.CommentMove,e.Events.CommentBase),e.Events.CommentMove.prototype.recordNew=function(){if(!this.comment_)throw Error("Tried to record the new position of a comment on the same event twice.");this.newCoordinate_=this.comment_.getXY(),this.comment_=null},e.Events.CommentMove.prototype.type=e.Events.COMMENT_MOVE,e.Events.CommentMove.prototype.setOldCoordinate=function(t){this.oldCoordinate_=t},e.Events.CommentMove.prototype.toJson=function(){var t=e.Events.CommentMove.superClass_.toJson.call(this);return this.oldCoordinate_&&(t.oldCoordinate=Math.round(this.oldCoordinate_.x)+","+Math.round(this.oldCoordinate_.y)),this.newCoordinate_&&(t.newCoordinate=Math.round(this.newCoordinate_.x)+","+Math.round(this.newCoordinate_.y)),t},e.Events.CommentMove.prototype.fromJson=function(t){if(e.Events.CommentMove.superClass_.fromJson.call(this,t),t.oldCoordinate){var n=t.oldCoordinate.split(",");this.oldCoordinate_=new e.utils.Coordinate(Number(n[0]),Number(n[1]))}t.newCoordinate&&(n=t.newCoordinate.split(","),this.newCoordinate_=new e.utils.Coordinate(Number(n[0]),Number(n[1])))},e.Events.CommentMove.prototype.isNull=function(){return e.utils.Coordinate.equals(this.oldCoordinate_,this.newCoordinate_)},e.Events.CommentMove.prototype.run=function(t){var n=this.getEventWorkspace_().getCommentById(this.commentId);if(n){t=t?this.newCoordinate_:this.oldCoordinate_;var r=n.getXY();n.moveBy(t.x-r.x,t.y-r.y)}else console.warn("Can't move non-existent comment: "+this.commentId)},e.registry.register(e.registry.Type.EVENT,e.Events.COMMENT_CREATE,e.Events.CommentCreate),e.registry.register(e.registry.Type.EVENT,e.Events.COMMENT_CHANGE,e.Events.CommentChange),e.registry.register(e.registry.Type.EVENT,e.Events.COMMENT_MOVE,e.Events.CommentMove),e.registry.register(e.registry.Type.EVENT,e.Events.COMMENT_DELETE,e.Events.CommentDelete),e.BubbleDragger=function(t,n){this.draggingBubble_=t,this.workspace_=n,this.dragTarget_=null,this.wouldDeleteBubble_=!1,this.startXY_=this.draggingBubble_.getRelativeToSurfaceXY(),this.dragSurface_=e.utils.is3dSupported()&&n.getBlockDragSurface()?n.getBlockDragSurface():null},e.BubbleDragger.prototype.dispose=function(){this.dragSurface_=this.workspace_=this.draggingBubble_=null},e.BubbleDragger.prototype.startBubbleDrag=function(){e.Events.getGroup()||e.Events.setGroup(!0),this.workspace_.setResizesEnabled(!1),this.draggingBubble_.setAutoLayout(!1),this.dragSurface_&&this.moveToDragSurface_(),this.draggingBubble_.setDragging&&this.draggingBubble_.setDragging(!0)},e.BubbleDragger.prototype.dragBubble=function(t,n){n=this.pixelsToWorkspaceUnits_(n),n=e.utils.Coordinate.sum(this.startXY_,n),this.draggingBubble_.moveDuringDrag(this.dragSurface_,n),n=this.dragTarget_,this.dragTarget_=this.workspace_.getDragTarget(t),t=this.wouldDeleteBubble_,this.wouldDeleteBubble_=this.shouldDelete_(this.dragTarget_),t!=this.wouldDeleteBubble_&&this.updateCursorDuringBubbleDrag_(),this.dragTarget_!==n&&(n&&n.onDragExit(this.draggingBubble_),this.dragTarget_&&this.dragTarget_.onDragEnter(this.draggingBubble_)),this.dragTarget_&&this.dragTarget_.onDragOver(this.draggingBubble_)},e.BubbleDragger.prototype.shouldDelete_=function(t){return!(!t||!this.workspace_.getComponentManager().hasCapability(t.id,e.ComponentManager.Capability.DELETE_AREA))&&t.wouldDelete(this.draggingBubble_,!1)},e.BubbleDragger.prototype.updateCursorDuringBubbleDrag_=function(){this.draggingBubble_.setDeleteStyle(this.wouldDeleteBubble_)},e.BubbleDragger.prototype.endBubbleDrag=function(t,n){this.dragBubble(t,n),this.dragTarget_&&this.dragTarget_.shouldPreventMove(this.draggingBubble_)?t=this.startXY_:(t=this.pixelsToWorkspaceUnits_(n),t=e.utils.Coordinate.sum(this.startXY_,t)),this.draggingBubble_.moveTo(t.x,t.y),this.dragTarget_&&this.dragTarget_.onDrop(this.draggingBubble_),this.wouldDeleteBubble_?(this.fireMoveEvent_(),this.draggingBubble_.dispose(!1,!0)):(this.dragSurface_&&this.dragSurface_.clearAndHide(this.workspace_.getBubbleCanvas()),this.draggingBubble_.setDragging&&this.draggingBubble_.setDragging(!1),this.fireMoveEvent_()),this.workspace_.setResizesEnabled(!0),e.Events.setGroup(!1)},e.BubbleDragger.prototype.fireMoveEvent_=function(){if(this.draggingBubble_.isComment){var t=new(e.Events.get(e.Events.COMMENT_MOVE))(this.draggingBubble_);t.setOldCoordinate(this.startXY_),t.recordNew(),e.Events.fire(t)}},e.BubbleDragger.prototype.pixelsToWorkspaceUnits_=function(t){return t=new e.utils.Coordinate(t.x/this.workspace_.scale,t.y/this.workspace_.scale),this.workspace_.isMutator&&t.scale(1/this.workspace_.options.parentWorkspace.scale),t},e.BubbleDragger.prototype.moveToDragSurface_=function(){this.draggingBubble_.moveTo(0,0),this.dragSurface_.translateSurface(this.startXY_.x,this.startXY_.y),this.dragSurface_.setBlocksAndShow(this.draggingBubble_.getSvgRoot())},e.Events.Click=function(t,n,r){e.Events.Click.superClass_.constructor.call(this,t?t.workspace.id:n),this.blockId=t?t.id:null,this.targetType=r},e.utils.object.inherits(e.Events.Click,e.Events.UiBase),e.Events.Click.prototype.type=e.Events.CLICK,e.Events.Click.prototype.toJson=function(){var t=e.Events.Click.superClass_.toJson.call(this);return t.targetType=this.targetType,this.blockId&&(t.blockId=this.blockId),t},e.Events.Click.prototype.fromJson=function(t){e.Events.Click.superClass_.fromJson.call(this,t),this.targetType=t.targetType,this.blockId=t.blockId},e.registry.register(e.registry.Type.EVENT,e.Events.CLICK,e.Events.Click),e.WorkspaceDragger=function(t){this.workspace_=t,this.horizontalScrollEnabled_=this.workspace_.isMovableHorizontally(),this.verticalScrollEnabled_=this.workspace_.isMovableVertically(),this.startScrollXY_=new e.utils.Coordinate(t.scrollX,t.scrollY)},e.WorkspaceDragger.prototype.dispose=function(){this.workspace_=null},e.WorkspaceDragger.prototype.startDrag=function(){e.selected&&e.selected.unselect(),this.workspace_.setupDragSurface()},e.WorkspaceDragger.prototype.endDrag=function(t){this.drag(t),this.workspace_.resetDragSurface()},e.WorkspaceDragger.prototype.drag=function(t){if(t=e.utils.Coordinate.sum(this.startScrollXY_,t),this.horizontalScrollEnabled_&&this.verticalScrollEnabled_)this.workspace_.scroll(t.x,t.y);else if(this.horizontalScrollEnabled_)this.workspace_.scroll(t.x,this.workspace_.scrollY);else{if(!this.verticalScrollEnabled_)throw new TypeError("Invalid state.");this.workspace_.scroll(this.workspace_.scrollX,t.y)}},e.Gesture=function(t,n){this.mouseDownXY_=null,this.currentDragDeltaXY_=new e.utils.Coordinate(0,0),this.startWorkspace_=this.targetBlock_=this.startBlock_=this.startField_=this.startBubble_=null,this.creatorWorkspace_=n,this.isDraggingBubble_=this.isDraggingBlock_=this.isDraggingWorkspace_=this.hasExceededDragRadius_=!1,this.mostRecentEvent_=t,this.flyout_=this.workspaceDragger_=this.blockDragger_=this.bubbleDragger_=this.onUpWrapper_=this.onMoveWrapper_=null,this.isEnding_=this.hasStarted_=this.calledUpdateIsDragging_=!1,this.healStack_=!e.DRAG_STACK},e.Gesture.prototype.dispose=function(){e.Touch.clearTouchIdentifier(),e.Tooltip.unblock(),this.creatorWorkspace_.clearGesture(),this.onMoveWrapper_&&e.browserEvents.unbind(this.onMoveWrapper_),this.onUpWrapper_&&e.browserEvents.unbind(this.onUpWrapper_),this.blockDragger_&&this.blockDragger_.dispose(),this.workspaceDragger_&&this.workspaceDragger_.dispose(),this.bubbleDragger_&&this.bubbleDragger_.dispose()},e.Gesture.prototype.updateFromEvent_=function(t){var n=new e.utils.Coordinate(t.clientX,t.clientY);this.updateDragDelta_(n)&&(this.updateIsDragging_(),e.longStop_()),this.mostRecentEvent_=t},e.Gesture.prototype.updateDragDelta_=function(t){return this.currentDragDeltaXY_=e.utils.Coordinate.difference(t,this.mouseDownXY_),!this.hasExceededDragRadius_&&(this.hasExceededDragRadius_=e.utils.Coordinate.magnitude(this.currentDragDeltaXY_)>(this.flyout_?e.FLYOUT_DRAG_RADIUS:e.DRAG_RADIUS))},e.Gesture.prototype.updateIsDraggingFromFlyout_=function(){return!(!this.targetBlock_||!this.flyout_.isBlockCreatable_(this.targetBlock_)||this.flyout_.isScrollable()&&!this.flyout_.isDragTowardWorkspace(this.currentDragDeltaXY_)||(this.startWorkspace_=this.flyout_.targetWorkspace,this.startWorkspace_.updateScreenCalculationsIfScrolled(),e.Events.getGroup()||e.Events.setGroup(!0),this.startBlock_=null,this.targetBlock_=this.flyout_.createBlock(this.targetBlock_),this.targetBlock_.select(),0))},e.Gesture.prototype.updateIsDraggingBubble_=function(){return!!this.startBubble_&&(this.isDraggingBubble_=!0,this.startDraggingBubble_(),!0)},e.Gesture.prototype.updateIsDraggingBlock_=function(){return!!this.targetBlock_&&(this.flyout_?this.isDraggingBlock_=this.updateIsDraggingFromFlyout_():this.targetBlock_.isMovable()&&(this.isDraggingBlock_=!0),!!this.isDraggingBlock_&&(this.startDraggingBlock_(),!0))},e.Gesture.prototype.updateIsDraggingWorkspace_=function(){(this.flyout_?this.flyout_.isScrollable():this.startWorkspace_&&this.startWorkspace_.isDraggable())&&(this.workspaceDragger_=new e.WorkspaceDragger(this.startWorkspace_),this.isDraggingWorkspace_=!0,this.workspaceDragger_.startDrag())},e.Gesture.prototype.updateIsDragging_=function(){if(this.calledUpdateIsDragging_)throw Error("updateIsDragging_ should only be called once per gesture.");this.calledUpdateIsDragging_=!0,this.updateIsDraggingBubble_()||this.updateIsDraggingBlock_()||this.updateIsDraggingWorkspace_()},e.Gesture.prototype.startDraggingBlock_=function(){this.blockDragger_=new(e.registry.getClassFromOptions(e.registry.Type.BLOCK_DRAGGER,this.creatorWorkspace_.options,!0))(this.targetBlock_,this.startWorkspace_),this.blockDragger_.startDrag(this.currentDragDeltaXY_,this.healStack_),this.blockDragger_.drag(this.mostRecentEvent_,this.currentDragDeltaXY_)},e.Gesture.prototype.startDraggingBubble_=function(){this.bubbleDragger_=new e.BubbleDragger(this.startBubble_,this.startWorkspace_),this.bubbleDragger_.startBubbleDrag(),this.bubbleDragger_.dragBubble(this.mostRecentEvent_,this.currentDragDeltaXY_)},e.Gesture.prototype.doStart=function(t){e.utils.isTargetInput(t)?this.cancel():(this.hasStarted_=!0,e.blockAnimations.disconnectUiStop(),this.startWorkspace_.updateScreenCalculationsIfScrolled(),this.startWorkspace_.isMutator&&this.startWorkspace_.resize(),e.hideChaff(!!this.flyout_),this.startWorkspace_.markFocused(),this.mostRecentEvent_=t,e.Tooltip.block(),this.targetBlock_&&this.targetBlock_.select(),e.utils.isRightButton(t)?this.handleRightClick(t):("touchstart"!=t.type.toLowerCase()&&"pointerdown"!=t.type.toLowerCase()||"mouse"==t.pointerType||e.longStart(t,this),this.mouseDownXY_=new e.utils.Coordinate(t.clientX,t.clientY),this.healStack_=t.altKey||t.ctrlKey||t.metaKey,this.bindMouseEvents(t)))},e.Gesture.prototype.bindMouseEvents=function(t){this.onMoveWrapper_=e.browserEvents.conditionalBind(document,"mousemove",null,this.handleMove.bind(this)),this.onUpWrapper_=e.browserEvents.conditionalBind(document,"mouseup",null,this.handleUp.bind(this)),t.preventDefault(),t.stopPropagation()},e.Gesture.prototype.handleMove=function(t){this.updateFromEvent_(t),this.isDraggingWorkspace_?this.workspaceDragger_.drag(this.currentDragDeltaXY_):this.isDraggingBlock_?this.blockDragger_.drag(this.mostRecentEvent_,this.currentDragDeltaXY_):this.isDraggingBubble_&&this.bubbleDragger_.dragBubble(this.mostRecentEvent_,this.currentDragDeltaXY_),t.preventDefault(),t.stopPropagation()},e.Gesture.prototype.handleUp=function(t){this.updateFromEvent_(t),e.longStop_(),this.isEnding_?console.log("Trying to end a gesture recursively."):(this.isEnding_=!0,this.isDraggingBubble_?this.bubbleDragger_.endBubbleDrag(t,this.currentDragDeltaXY_):this.isDraggingBlock_?this.blockDragger_.endDrag(t,this.currentDragDeltaXY_):this.isDraggingWorkspace_?this.workspaceDragger_.endDrag(this.currentDragDeltaXY_):this.isBubbleClick_()?this.doBubbleClick_():this.isFieldClick_()?this.doFieldClick_():this.isBlockClick_()?this.doBlockClick_():this.isWorkspaceClick_()&&this.doWorkspaceClick_(t),t.preventDefault(),t.stopPropagation(),this.dispose())},e.Gesture.prototype.cancel=function(){this.isEnding_||(e.longStop_(),this.isDraggingBubble_?this.bubbleDragger_.endBubbleDrag(this.mostRecentEvent_,this.currentDragDeltaXY_):this.isDraggingBlock_?this.blockDragger_.endDrag(this.mostRecentEvent_,this.currentDragDeltaXY_):this.isDraggingWorkspace_&&this.workspaceDragger_.endDrag(this.currentDragDeltaXY_),this.dispose())},e.Gesture.prototype.handleRightClick=function(t){this.targetBlock_?(this.bringBlockToFront_(),e.hideChaff(!!this.flyout_),this.targetBlock_.showContextMenu(t)):this.startBubble_?this.startBubble_.showContextMenu(t):this.startWorkspace_&&!this.flyout_&&(e.hideChaff(),this.startWorkspace_.showContextMenu(t)),t.preventDefault(),t.stopPropagation(),this.dispose()},e.Gesture.prototype.handleWsStart=function(t,n){if(this.hasStarted_)throw Error("Tried to call gesture.handleWsStart, but the gesture had already been started.");this.setStartWorkspace_(n),this.mostRecentEvent_=t,this.doStart(t)},e.Gesture.prototype.fireWorkspaceClick_=function(t){e.Events.fire(new(e.Events.get(e.Events.CLICK))(null,t.id,"workspace"))},e.Gesture.prototype.handleFlyoutStart=function(t,n){if(this.hasStarted_)throw Error("Tried to call gesture.handleFlyoutStart, but the gesture had already been started.");this.setStartFlyout_(n),this.handleWsStart(t,n.getWorkspace())},e.Gesture.prototype.handleBlockStart=function(t,n){if(this.hasStarted_)throw Error("Tried to call gesture.handleBlockStart, but the gesture had already been started.");this.setStartBlock(n),this.mostRecentEvent_=t},e.Gesture.prototype.handleBubbleStart=function(t,n){if(this.hasStarted_)throw Error("Tried to call gesture.handleBubbleStart, but the gesture had already been started.");this.setStartBubble(n),this.mostRecentEvent_=t},e.Gesture.prototype.doBubbleClick_=function(){this.startBubble_.setFocus&&this.startBubble_.setFocus(),this.startBubble_.select&&this.startBubble_.select()},e.Gesture.prototype.doFieldClick_=function(){this.startField_.showEditor(this.mostRecentEvent_),this.bringBlockToFront_()},e.Gesture.prototype.doBlockClick_=function(){if(this.flyout_&&this.flyout_.autoClose)this.targetBlock_.isEnabled()&&(e.Events.getGroup()||e.Events.setGroup(!0),this.flyout_.createBlock(this.targetBlock_).scheduleSnapAndBump());else{var t=new(e.Events.get(e.Events.CLICK))(this.startBlock_,this.startWorkspace_.id,"block");e.Events.fire(t)}this.bringBlockToFront_(),e.Events.setGroup(!1)},e.Gesture.prototype.doWorkspaceClick_=function(t){t=this.creatorWorkspace_,e.selected&&e.selected.unselect(),this.fireWorkspaceClick_(this.startWorkspace_||t)},e.Gesture.prototype.bringBlockToFront_=function(){this.targetBlock_&&!this.flyout_&&this.targetBlock_.bringToFront()},e.Gesture.prototype.setStartField=function(t){if(this.hasStarted_)throw Error("Tried to call gesture.setStartField, but the gesture had already been started.");this.startField_||(this.startField_=t)},e.Gesture.prototype.setStartBubble=function(t){this.startBubble_||(this.startBubble_=t)},e.Gesture.prototype.setStartBlock=function(t){this.startBlock_||this.startBubble_||(this.startBlock_=t,t.isInFlyout&&t!=t.getRootBlock()?this.setTargetBlock_(t.getRootBlock()):this.setTargetBlock_(t))},e.Gesture.prototype.setTargetBlock_=function(t){t.isShadow()?this.setTargetBlock_(t.getParent()):this.targetBlock_=t},e.Gesture.prototype.setStartWorkspace_=function(t){this.startWorkspace_||(this.startWorkspace_=t)},e.Gesture.prototype.setStartFlyout_=function(t){this.flyout_||(this.flyout_=t)},e.Gesture.prototype.isBubbleClick_=function(){return!!this.startBubble_&&!this.hasExceededDragRadius_},e.Gesture.prototype.isBlockClick_=function(){return!!this.startBlock_&&!this.hasExceededDragRadius_&&!this.isFieldClick_()},e.Gesture.prototype.isFieldClick_=function(){return!!this.startField_&&this.startField_.isClickable()&&!this.hasExceededDragRadius_&&(!this.flyout_||!this.flyout_.autoClose)},e.Gesture.prototype.isWorkspaceClick_=function(){return!(this.startBlock_||this.startBubble_||this.startField_||this.hasExceededDragRadius_)},e.Gesture.prototype.isDragging=function(){return this.isDraggingWorkspace_||this.isDraggingBlock_||this.isDraggingBubble_},e.Gesture.prototype.hasStarted=function(){return this.hasStarted_},e.Gesture.prototype.getInsertionMarkers=function(){return this.blockDragger_?this.blockDragger_.getInsertionMarkers():[]},e.Gesture.prototype.getCurrentDragger=function(){return this.isDraggingBlock_?this.blockDragger_:this.isDraggingWorkspace_?this.workspaceDragger_:this.isDraggingBubble_?this.bubbleDragger_:null},e.Gesture.inProgress=function(){for(var r,t=e.Workspace.getAll(),n=0;r=t[n];n++)if(r.currentGesture_)return!0;return!1},e.IRegistrable=function(){},e.Marker=function(){this.drawer_=this.curNode_=this.colour=null,this.type="marker"},e.Marker.prototype.setDrawer=function(t){this.drawer_=t},e.Marker.prototype.getDrawer=function(){return this.drawer_},e.Marker.prototype.getCurNode=function(){return this.curNode_},e.Marker.prototype.setCurNode=function(t){var n=this.curNode_;this.curNode_=t,this.drawer_&&this.drawer_.draw(n,this.curNode_)},e.Marker.prototype.draw=function(){this.drawer_&&this.drawer_.draw(this.curNode_,this.curNode_)},e.Marker.prototype.hide=function(){this.drawer_&&this.drawer_.hide()},e.Marker.prototype.dispose=function(){this.getDrawer()&&this.getDrawer().dispose()},e.Cursor=function(){e.Cursor.superClass_.constructor.call(this),this.type="cursor"},e.utils.object.inherits(e.Cursor,e.Marker),e.Cursor.prototype.next=function(){var t=this.getCurNode();if(!t)return null;for(t=t.next();t&&t.next()&&(t.getType()==e.ASTNode.types.NEXT||t.getType()==e.ASTNode.types.BLOCK);)t=t.next();return t&&this.setCurNode(t),t},e.Cursor.prototype.in=function(){var t=this.getCurNode();return t?((t.getType()==e.ASTNode.types.PREVIOUS||t.getType()==e.ASTNode.types.OUTPUT)&&(t=t.next()),(t=t.in())&&this.setCurNode(t),t):null},e.Cursor.prototype.prev=function(){var t=this.getCurNode();if(!t)return null;for(t=t.prev();t&&t.prev()&&(t.getType()==e.ASTNode.types.NEXT||t.getType()==e.ASTNode.types.BLOCK);)t=t.prev();return t&&this.setCurNode(t),t},e.Cursor.prototype.out=function(){var t=this.getCurNode();return t?((t=t.out())&&t.getType()==e.ASTNode.types.BLOCK&&(t=t.prev()||t),t&&this.setCurNode(t),t):null},e.registry.register(e.registry.Type.CURSOR,e.registry.DEFAULT,e.Cursor),e.MarkerManager=function(t){this.cursorSvg_=this.cursor_=null,this.markers_=Object.create(null),this.workspace_=t},e.MarkerManager.LOCAL_MARKER="local_marker_1",e.MarkerManager.prototype.registerMarker=function(t,n){this.markers_[t]&&this.unregisterMarker(t),n.setDrawer(this.workspace_.getRenderer().makeMarkerDrawer(this.workspace_,n)),this.setMarkerSvg(n.getDrawer().createDom()),this.markers_[t]=n},e.MarkerManager.prototype.unregisterMarker=function(t){var n=this.markers_[t];if(!n)throw Error("Marker with ID "+t+" does not exist. Can only unregister markers that exist.");n.dispose(),delete this.markers_[t]},e.MarkerManager.prototype.getCursor=function(){return this.cursor_},e.MarkerManager.prototype.getMarker=function(t){return this.markers_[t]||null},e.MarkerManager.prototype.setCursor=function(t){this.cursor_&&this.cursor_.getDrawer()&&this.cursor_.getDrawer().dispose(),(this.cursor_=t)&&(t=this.workspace_.getRenderer().makeMarkerDrawer(this.workspace_,this.cursor_),this.cursor_.setDrawer(t),this.setCursorSvg(this.cursor_.getDrawer().createDom()))},e.MarkerManager.prototype.setCursorSvg=function(t){t?(this.workspace_.getBlockCanvas().appendChild(t),this.cursorSvg_=t):this.cursorSvg_=null},e.MarkerManager.prototype.setMarkerSvg=function(t){t?this.workspace_.getBlockCanvas()&&(this.cursorSvg_?this.workspace_.getBlockCanvas().insertBefore(t,this.cursorSvg_):this.workspace_.getBlockCanvas().appendChild(t)):this.markerSvg_=null},e.MarkerManager.prototype.updateMarkers=function(){this.workspace_.keyboardAccessibilityMode&&this.cursorSvg_&&this.workspace_.getCursor().draw()},e.MarkerManager.prototype.dispose=function(){for(var r,t=Object.keys(this.markers_),n=0;r=t[n];n++)this.unregisterMarker(r);this.markers_=null,this.cursor_&&(this.cursor_.dispose(),this.cursor_=null)},e.WidgetDiv={},e.WidgetDiv.owner_=null,e.WidgetDiv.dispose_=null,e.WidgetDiv.rendererClassName_="",e.WidgetDiv.themeClassName_="",e.WidgetDiv.createDom=function(){e.WidgetDiv.DIV||(e.WidgetDiv.DIV=document.createElement("div"),e.WidgetDiv.DIV.className="blocklyWidgetDiv",(e.parentContainer||document.body).appendChild(e.WidgetDiv.DIV))},e.WidgetDiv.show=function(t,n,r){e.WidgetDiv.hide(),e.WidgetDiv.owner_=t,e.WidgetDiv.dispose_=r,(t=e.WidgetDiv.DIV).style.direction=n?"rtl":"ltr",t.style.display="block",n=e.getMainWorkspace(),e.WidgetDiv.rendererClassName_=n.getRenderer().getClassName(),e.WidgetDiv.themeClassName_=n.getTheme().getClassName(),e.utils.dom.addClass(t,e.WidgetDiv.rendererClassName_),e.utils.dom.addClass(t,e.WidgetDiv.themeClassName_)},e.WidgetDiv.hide=function(){if(e.WidgetDiv.isVisible()){e.WidgetDiv.owner_=null;var t=e.WidgetDiv.DIV;t.style.display="none",t.style.left="",t.style.top="",e.WidgetDiv.dispose_&&e.WidgetDiv.dispose_(),e.WidgetDiv.dispose_=null,t.textContent="",e.WidgetDiv.rendererClassName_&&(e.utils.dom.removeClass(t,e.WidgetDiv.rendererClassName_),e.WidgetDiv.rendererClassName_=""),e.WidgetDiv.themeClassName_&&(e.utils.dom.removeClass(t,e.WidgetDiv.themeClassName_),e.WidgetDiv.themeClassName_=""),e.getMainWorkspace().markFocused()}},e.WidgetDiv.isVisible=function(){return!!e.WidgetDiv.owner_},e.WidgetDiv.hideIfOwner=function(t){e.WidgetDiv.owner_==t&&e.WidgetDiv.hide()},e.WidgetDiv.positionInternal_=function(t,n,r){e.WidgetDiv.DIV.style.left=t+"px",e.WidgetDiv.DIV.style.top=n+"px",e.WidgetDiv.DIV.style.height=r+"px"},e.WidgetDiv.positionWithAnchor=function(t,n,r,s){var u=e.WidgetDiv.calculateY_(t,n,r);t=e.WidgetDiv.calculateX_(t,n,r,s),0>u?e.WidgetDiv.positionInternal_(t,0,r.height+u):e.WidgetDiv.positionInternal_(t,u,r.height)},e.WidgetDiv.calculateX_=function(t,n,r,s){return s?(n=Math.max(n.right-r.width,t.left),Math.min(n,t.right-r.width)):(n=Math.min(n.left,t.right-r.width),Math.max(n,t.left))},e.WidgetDiv.calculateY_=function(t,n,r){return n.bottom+r.height>=t.bottom?n.top-r.height:n.bottom},e.Field=function(t,n,r){this.value_=this.DEFAULT_VALUE,this.tooltip_=this.validator_=null,this.size_=new e.utils.Size(0,0),this.constants_=this.mouseDownWrapper_=this.textContent_=this.textElement_=this.borderRect_=this.fieldGroup_=this.markerSvg_=this.cursorSvg_=null,r&&this.configure_(r),this.setValue(t),n&&this.setValidator(n)},e.Field.prototype.DEFAULT_VALUE=null,e.Field.prototype.name=void 0,e.Field.prototype.disposed=!1,e.Field.prototype.maxDisplayLength=50,e.Field.prototype.sourceBlock_=null,e.Field.prototype.isDirty_=!0,e.Field.prototype.visible_=!0,e.Field.prototype.clickTarget_=null,e.Field.NBSP="\xa0",e.Field.prototype.EDITABLE=!0,e.Field.prototype.SERIALIZABLE=!1,e.Field.prototype.configure_=function(t){var n=t.tooltip;"string"==typeof n&&(n=e.utils.replaceMessageReferences(t.tooltip)),n&&this.setTooltip(n)},e.Field.prototype.setSourceBlock=function(t){if(this.sourceBlock_)throw Error("Field already bound to a block.");this.sourceBlock_=t},e.Field.prototype.getConstants=function(){return!this.constants_&&this.sourceBlock_&&this.sourceBlock_.workspace&&this.sourceBlock_.workspace.rendered&&(this.constants_=this.sourceBlock_.workspace.getRenderer().getConstants()),this.constants_},e.Field.prototype.getSourceBlock=function(){return this.sourceBlock_},e.Field.prototype.init=function(){this.fieldGroup_||(this.fieldGroup_=e.utils.dom.createSvgElement(e.utils.Svg.G,{},null),this.isVisible()||(this.fieldGroup_.style.display="none"),this.sourceBlock_.getSvgRoot().appendChild(this.fieldGroup_),this.initView(),this.updateEditable(),this.setTooltip(this.tooltip_),this.bindEvents_(),this.initModel())},e.Field.prototype.initView=function(){this.createBorderRect_(),this.createTextElement_()},e.Field.prototype.initModel=function(){},e.Field.prototype.createBorderRect_=function(){this.borderRect_=e.utils.dom.createSvgElement(e.utils.Svg.RECT,{rx:this.getConstants().FIELD_BORDER_RECT_RADIUS,ry:this.getConstants().FIELD_BORDER_RECT_RADIUS,x:0,y:0,height:this.size_.height,width:this.size_.width,class:"blocklyFieldRect"},this.fieldGroup_)},e.Field.prototype.createTextElement_=function(){this.textElement_=e.utils.dom.createSvgElement(e.utils.Svg.TEXT,{class:"blocklyText"},this.fieldGroup_),this.getConstants().FIELD_TEXT_BASELINE_CENTER&&this.textElement_.setAttribute("dominant-baseline","central"),this.textContent_=document.createTextNode(""),this.textElement_.appendChild(this.textContent_)},e.Field.prototype.bindEvents_=function(){e.Tooltip.bindMouseEvents(this.getClickTarget_()),this.mouseDownWrapper_=e.browserEvents.conditionalBind(this.getClickTarget_(),"mousedown",this,this.onMouseDown_)},e.Field.prototype.fromXml=function(t){this.setValue(t.textContent)},e.Field.prototype.toXml=function(t){return t.textContent=this.getValue(),t},e.Field.prototype.dispose=function(){e.DropDownDiv.hideIfOwner(this),e.WidgetDiv.hideIfOwner(this),e.Tooltip.unbindMouseEvents(this.getClickTarget_()),this.mouseDownWrapper_&&e.browserEvents.unbind(this.mouseDownWrapper_),e.utils.dom.removeNode(this.fieldGroup_),this.disposed=!0},e.Field.prototype.updateEditable=function(){var t=this.fieldGroup_;this.EDITABLE&&t&&(this.sourceBlock_.isEditable()?(e.utils.dom.addClass(t,"blocklyEditableText"),e.utils.dom.removeClass(t,"blocklyNonEditableText"),t.style.cursor=this.CURSOR):(e.utils.dom.addClass(t,"blocklyNonEditableText"),e.utils.dom.removeClass(t,"blocklyEditableText"),t.style.cursor=""))},e.Field.prototype.isClickable=function(){return!!this.sourceBlock_&&this.sourceBlock_.isEditable()&&!!this.showEditor_&&"function"==typeof this.showEditor_},e.Field.prototype.isCurrentlyEditable=function(){return this.EDITABLE&&!!this.sourceBlock_&&this.sourceBlock_.isEditable()},e.Field.prototype.isSerializable=function(){var t=!1;return this.name&&(this.SERIALIZABLE?t=!0:this.EDITABLE&&(console.warn("Detected an editable field that was not serializable. Please define SERIALIZABLE property as true on all editable custom fields. Proceeding with serialization."),t=!0)),t},e.Field.prototype.isVisible=function(){return this.visible_},e.Field.prototype.setVisible=function(t){if(this.visible_!=t){this.visible_=t;var n=this.getSvgRoot();n&&(n.style.display=t?"block":"none")}},e.Field.prototype.setValidator=function(t){this.validator_=t},e.Field.prototype.getValidator=function(){return this.validator_},e.Field.prototype.getSvgRoot=function(){return this.fieldGroup_},e.Field.prototype.applyColour=function(){},e.Field.prototype.render_=function(){this.textContent_&&(this.textContent_.nodeValue=this.getDisplayText_()),this.updateSize_()},e.Field.prototype.showEditor=function(t){this.isClickable()&&this.showEditor_(t)},e.Field.prototype.updateSize_=function(t){var n=this.getConstants(),r=2*(t=null!=t?t:this.borderRect_?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0),s=n.FIELD_TEXT_HEIGHT,u=0;this.textElement_&&(r+=u=e.utils.dom.getFastTextWidth(this.textElement_,n.FIELD_TEXT_FONTSIZE,n.FIELD_TEXT_FONTWEIGHT,n.FIELD_TEXT_FONTFAMILY)),this.borderRect_&&(s=Math.max(s,n.FIELD_BORDER_RECT_HEIGHT)),this.size_.height=s,this.size_.width=r,this.positionTextElement_(t,u),this.positionBorderRect_()},e.Field.prototype.positionTextElement_=function(t,n){if(this.textElement_){var r=this.getConstants(),s=this.size_.height/2;this.textElement_.setAttribute("x",this.sourceBlock_.RTL?this.size_.width-n-t:t),this.textElement_.setAttribute("y",r.FIELD_TEXT_BASELINE_CENTER?s:s-r.FIELD_TEXT_HEIGHT/2+r.FIELD_TEXT_BASELINE)}},e.Field.prototype.positionBorderRect_=function(){this.borderRect_&&(this.borderRect_.setAttribute("width",this.size_.width),this.borderRect_.setAttribute("height",this.size_.height),this.borderRect_.setAttribute("rx",this.getConstants().FIELD_BORDER_RECT_RADIUS),this.borderRect_.setAttribute("ry",this.getConstants().FIELD_BORDER_RECT_RADIUS))},e.Field.prototype.getSize=function(){return this.isVisible()?(this.isDirty_?(this.render_(),this.isDirty_=!1):this.visible_&&0==this.size_.width&&(console.warn("Deprecated use of setting size_.width to 0 to rerender a field. Set field.isDirty_ to true instead."),this.render_()),this.size_):new e.utils.Size(0,0)},e.Field.prototype.getScaledBBox=function(){if(this.borderRect_)t=this.borderRect_.getBoundingClientRect(),r=e.utils.style.getPageOffset(this.borderRect_),s=t.width,t=t.height;else{var t=this.sourceBlock_.getHeightWidth(),n=this.sourceBlock_.workspace.scale,r=this.getAbsoluteXY_(),s=t.width*n;t=t.height*n,e.utils.userAgent.GECKO?(r.x+=1.5*n,r.y+=1.5*n):e.utils.userAgent.EDGE||e.utils.userAgent.IE||(r.x-=.5*n,r.y-=.5*n),s+=1*n,t+=1*n}return new e.utils.Rect(r.y,r.y+t,r.x,r.x+s)},e.Field.prototype.getDisplayText_=function(){var t=this.getText();return t?(t.length>this.maxDisplayLength&&(t=t.substring(0,this.maxDisplayLength-2)+"\u2026"),t=t.replace(/\s/g,e.Field.NBSP),this.sourceBlock_&&this.sourceBlock_.RTL&&(t+="\u200f"),t):e.Field.NBSP},e.Field.prototype.getText=function(){if(this.getText_){var t=this.getText_.call(this);if(null!==t)return String(t)}return String(this.getValue())},e.Field.prototype.markDirty=function(){this.isDirty_=!0,this.constants_=null},e.Field.prototype.forceRerender=function(){this.isDirty_=!0,this.sourceBlock_&&this.sourceBlock_.rendered&&(this.sourceBlock_.render(),this.sourceBlock_.bumpNeighbours(),this.updateMarkers_())},e.Field.prototype.setValue=function(t){if(null!==t){var n=this.doClassValidation_(t);if(!((t=this.processValidation_(t,n))instanceof Error)){if((n=this.getValidator())&&(n=n.call(this,t),(t=this.processValidation_(t,n))instanceof Error))return;if(!(n=this.sourceBlock_)||!n.disposed){var r=this.getValue();r===t?this.doValueUpdate_(t):(n&&e.Events.isEnabled()&&e.Events.fire(new(e.Events.get(e.Events.BLOCK_CHANGE))(n,"field",this.name||null,r,t)),this.doValueUpdate_(t),this.isDirty_&&this.forceRerender())}}}},e.Field.prototype.processValidation_=function(t,n){return null===n?(this.doValueInvalid_(t),this.isDirty_&&this.forceRerender(),Error()):(void 0!==n&&(t=n),t)},e.Field.prototype.getValue=function(){return this.value_},e.Field.prototype.doClassValidation_=function(t){return null==t?null:t},e.Field.prototype.doValueUpdate_=function(t){this.value_=t,this.isDirty_=!0},e.Field.prototype.doValueInvalid_=function(t){},e.Field.prototype.onMouseDown_=function(t){this.sourceBlock_&&this.sourceBlock_.workspace&&(t=this.sourceBlock_.workspace.getGesture(t))&&t.setStartField(this)},e.Field.prototype.setTooltip=function(t){t||""===t||(t=this.sourceBlock_);var n=this.getClickTarget_();n?n.tooltip=t:this.tooltip_=t},e.Field.prototype.getTooltip=function(){var t=this.getClickTarget_();return e.Tooltip.getTooltipOfObject(t||{tooltip:this.tooltip_})},e.Field.prototype.getClickTarget_=function(){return this.clickTarget_||this.getSvgRoot()},e.Field.prototype.getAbsoluteXY_=function(){return e.utils.style.getPageOffset(this.getClickTarget_())},e.Field.prototype.referencesVariables=function(){return!1},e.Field.prototype.getParentInput=function(){for(var t=null,n=this.sourceBlock_,r=n.inputList,s=0;s<n.inputList.length;s++)for(var u=r[s],y=u.fieldRow,x=0;x<y.length;x++)if(y[x]===this){t=u;break}return t},e.Field.prototype.getFlipRtl=function(){return!1},e.Field.prototype.isTabNavigable=function(){return!1},e.Field.prototype.onShortcut=function(t){return!1},e.Field.prototype.setCursorSvg=function(t){t?(this.fieldGroup_.appendChild(t),this.cursorSvg_=t):this.cursorSvg_=null},e.Field.prototype.setMarkerSvg=function(t){t?(this.fieldGroup_.appendChild(t),this.markerSvg_=t):this.markerSvg_=null},e.Field.prototype.updateMarkers_=function(){var t=this.sourceBlock_.workspace;t.keyboardAccessibilityMode&&this.cursorSvg_&&t.getCursor().draw(),t.keyboardAccessibilityMode&&this.markerSvg_&&t.getMarker(e.MarkerManager.LOCAL_MARKER).draw()},e.FieldLabel=function(t,n,r){this.class_=null,e.FieldLabel.superClass_.constructor.call(this,t,null,r),r||(this.class_=n||null)},e.utils.object.inherits(e.FieldLabel,e.Field),e.FieldLabel.prototype.DEFAULT_VALUE="",e.FieldLabel.fromJson=function(t){var n=e.utils.replaceMessageReferences(t.text);return new e.FieldLabel(n,void 0,t)},e.FieldLabel.prototype.EDITABLE=!1,e.FieldLabel.prototype.configure_=function(t){e.FieldLabel.superClass_.configure_.call(this,t),this.class_=t.class},e.FieldLabel.prototype.initView=function(){this.createTextElement_(),this.class_&&e.utils.dom.addClass(this.textElement_,this.class_)},e.FieldLabel.prototype.doClassValidation_=function(t){return null==t?null:String(t)},e.FieldLabel.prototype.setClass=function(t){this.textElement_&&(this.class_&&e.utils.dom.removeClass(this.textElement_,this.class_),t&&e.utils.dom.addClass(this.textElement_,t)),this.class_=t},e.fieldRegistry.register("field_label",e.FieldLabel),e.Input=function(t,n,r,s){if(t!=e.inputTypes.DUMMY&&!n)throw Error("Value inputs and statement inputs must have non-empty name.");this.type=t,this.name=n,this.sourceBlock_=r,this.connection=s,this.fieldRow=[]},e.Input.prototype.align=e.constants.ALIGN.LEFT,e.Input.prototype.visible_=!0,e.Input.prototype.getSourceBlock=function(){return this.sourceBlock_},e.Input.prototype.appendField=function(t,n){return this.insertFieldAt(this.fieldRow.length,t,n),this},e.Input.prototype.insertFieldAt=function(t,n,r){if(0>t||t>this.fieldRow.length)throw Error("index "+t+" out of bounds.");return(n||""==n&&r)&&("string"==typeof n&&(n=e.fieldRegistry.fromJson({type:"field_label",text:n})),n.setSourceBlock(this.sourceBlock_),this.sourceBlock_.rendered&&(n.init(),n.applyColour()),n.name=r,n.setVisible(this.isVisible()),n.prefixField&&(t=this.insertFieldAt(t,n.prefixField)),this.fieldRow.splice(t,0,n),++t,n.suffixField&&(t=this.insertFieldAt(t,n.suffixField)),this.sourceBlock_.rendered&&(this.sourceBlock_=this.sourceBlock_,this.sourceBlock_.render(),this.sourceBlock_.bumpNeighbours())),t},e.Input.prototype.removeField=function(t,n){for(var s,r=0;s=this.fieldRow[r];r++)if(s.name===t)return s.dispose(),this.fieldRow.splice(r,1),this.sourceBlock_.rendered&&(this.sourceBlock_=this.sourceBlock_,this.sourceBlock_.render(),this.sourceBlock_.bumpNeighbours()),!0;if(n)return!1;throw Error('Field "'+t+'" not found.')},e.Input.prototype.isVisible=function(){return this.visible_},e.Input.prototype.setVisible=function(t){var n=[];if(this.visible_==t)return n;this.visible_=t;for(var s,r=0;s=this.fieldRow[r];r++)s.setVisible(t);return this.connection&&(this.connection=this.connection,t?n=this.connection.startTrackingAll():this.connection.stopTrackingAll(),r=this.connection.targetBlock())&&(r.getSvgRoot().style.display=t?"block":"none"),n},e.Input.prototype.markDirty=function(){for(var n,t=0;n=this.fieldRow[t];t++)n.markDirty()},e.Input.prototype.setCheck=function(t){if(!this.connection)throw Error("This input does not have a connection.");return this.connection.setCheck(t),this},e.Input.prototype.setAlign=function(t){return this.align=t,this.sourceBlock_.rendered&&(this.sourceBlock_=this.sourceBlock_,this.sourceBlock_.render()),this},e.Input.prototype.setShadowDom=function(t){if(!this.connection)throw Error("This input does not have a connection.");return this.connection.setShadowDom(t),this},e.Input.prototype.getShadowDom=function(){if(!this.connection)throw Error("This input does not have a connection.");return this.connection.getShadowDom()},e.Input.prototype.init=function(){if(this.sourceBlock_.workspace.rendered)for(var t=0;t<this.fieldRow.length;t++)this.fieldRow[t].init()},e.Input.prototype.dispose=function(){for(var n,t=0;n=this.fieldRow[t];t++)n.dispose();this.connection&&this.connection.dispose(),this.sourceBlock_=null},e.Block=function(t,n,r){if(e.Generator&&void 0!==e.Generator.prototype[n])throw Error('Block prototypeName "'+n+'" conflicts with Blockly.Generator members.');if(this.id=r&&!t.getBlockById(r)?r:e.utils.genUid(),t.setBlockById(this.id,this),this.previousConnection=this.nextConnection=this.outputConnection=null,this.inputList=[],this.inputsInline=void 0,this.disabled=!1,this.tooltip="",this.contextMenu=!0,this.parentBlock_=null,this.childBlocks_=[],this.editable_=this.movable_=this.deletable_=!0,this.collapsed_=this.isShadow_=!1,this.comment=this.outputShape_=null,this.commentModel={text:null,pinned:!1,size:new e.utils.Size(160,80)},this.xy_=new e.utils.Coordinate(0,0),this.workspace=t,this.isInFlyout=t.isFlyout,this.isInMutator=t.isMutator,this.RTL=t.RTL,this.isInsertionMarker_=!1,this.hat=void 0,this.rendered=null,this.statementInputCount=0,n){if(this.type=n,!(r=e.Blocks[n])||"object"!=typeof r)throw TypeError("Unknown block type: "+n);e.utils.object.mixin(this,r)}t.addTopBlock(this),t.addTypedBlock(this),(t=e.Events.getGroup())||e.Events.setGroup(!0),n=e.Events.recordUndo;try{"function"==typeof this.init&&(e.Events.recordUndo=!1,this.init(),e.Events.recordUndo=n),e.Events.isEnabled()&&e.Events.fire(new(e.Events.get(e.Events.BLOCK_CREATE))(this))}finally{t||e.Events.setGroup(!1),e.Events.recordUndo=n}this.inputsInlineDefault=this.inputsInline,"function"==typeof this.onchange&&this.setOnChange(this.onchange)},e.Block.COLLAPSED_INPUT_NAME=e.constants.COLLAPSED_INPUT_NAME,e.Block.COLLAPSED_FIELD_NAME=e.constants.COLLAPSED_FIELD_NAME,e.Block.prototype.data=null,e.Block.prototype.disposed=!1,e.Block.prototype.hue_=null,e.Block.prototype.colour_="#000000",e.Block.prototype.styleName_="",e.Block.prototype.dispose=function(t){if(this.workspace){this.onchangeWrapper_&&this.workspace.removeChangeListener(this.onchangeWrapper_),this.unplug(t),e.Events.isEnabled()&&e.Events.fire(new(e.Events.get(e.Events.BLOCK_DELETE))(this)),e.Events.disable();try{this.workspace&&(this.workspace.removeTopBlock(this),this.workspace.removeTypedBlock(this),this.workspace.removeBlockById(this.id),this.workspace=null),e.selected==this&&(e.selected=null);for(var n=this.childBlocks_.length-1;0<=n;n--)this.childBlocks_[n].dispose(!1);n=0;for(var r;r=this.inputList[n];n++)r.dispose();this.inputList.length=0;var u,s=this.getConnections_(!0);for(n=0;u=s[n];n++)u.dispose()}finally{e.Events.enable(),this.disposed=!0}}},e.Block.prototype.initModel=function(){for(var n,t=0;n=this.inputList[t];t++)for(var s,r=0;s=n.fieldRow[r];r++)s.initModel&&s.initModel()},e.Block.prototype.unplug=function(t){this.outputConnection?this.unplugFromRow_(t):this.previousConnection&&this.unplugFromStack_(t)},e.Block.prototype.unplugFromRow_=function(t){var n=null;this.outputConnection.isConnected()&&(n=this.outputConnection.targetConnection,this.outputConnection.disconnect()),n&&t&&(t=this.getOnlyValueConnection_())&&t.isConnected()&&!t.targetBlock().isShadow()&&((t=t.targetConnection).disconnect(),this.workspace.connectionChecker.canConnect(t,n,!1)?n.connect(t):t.onFailedConnect(n))},e.Block.prototype.getOnlyValueConnection_=function(){for(var t=null,n=0;n<this.inputList.length;n++){var r=this.inputList[n].connection;if(r&&r.type==e.connectionTypes.INPUT_VALUE&&r.targetConnection){if(t)return null;t=r}}return t},e.Block.prototype.unplugFromStack_=function(t){var n=null;this.previousConnection.isConnected()&&(n=this.previousConnection.targetConnection,this.previousConnection.disconnect());var r=this.getNextBlock();t&&r&&!r.isShadow()&&((t=this.nextConnection.targetConnection).disconnect(),n&&this.workspace.connectionChecker.canConnect(n,t,!1)&&n.connect(t))},e.Block.prototype.getConnections_=function(t){t=[],this.outputConnection&&t.push(this.outputConnection),this.previousConnection&&t.push(this.previousConnection),this.nextConnection&&t.push(this.nextConnection);for(var r,n=0;r=this.inputList[n];n++)r.connection&&t.push(r.connection);return t},e.Block.prototype.lastConnectionInStack=function(t){for(var n=this.nextConnection;n;){var r=n.targetBlock();if(!r||t&&r.isShadow())return n;n=r.nextConnection}return null},e.Block.prototype.bumpNeighbours=function(){},e.Block.prototype.getParent=function(){return this.parentBlock_},e.Block.prototype.getInputWithBlock=function(t){for(var r,n=0;r=this.inputList[n];n++)if(r.connection&&r.connection.targetBlock()==t)return r;return null},e.Block.prototype.getSurroundParent=function(){var t=this;do{var n=t;if(!(t=t.getParent()))return null}while(t.getNextBlock()==n);return t},e.Block.prototype.getNextBlock=function(){return this.nextConnection&&this.nextConnection.targetBlock()},e.Block.prototype.getPreviousBlock=function(){return this.previousConnection&&this.previousConnection.targetBlock()},e.Block.prototype.getFirstStatementConnection=function(){for(var n,t=0;n=this.inputList[t];t++)if(n.connection&&n.connection.type==e.connectionTypes.NEXT_STATEMENT)return n.connection;return null},e.Block.prototype.getRootBlock=function(){var t=this;do{var n=t;t=n.parentBlock_}while(t);return n},e.Block.prototype.getTopStackBlock=function(){var t=this;do{var n=t.getPreviousBlock()}while(n&&n.getNextBlock()==t&&(t=n));return t},e.Block.prototype.getChildren=function(t){if(!t)return this.childBlocks_;t=[];for(var r,n=0;r=this.inputList[n];n++)r.connection&&(r=r.connection.targetBlock())&&t.push(r);return(n=this.getNextBlock())&&t.push(n),t},e.Block.prototype.setParent=function(t){if(t!=this.parentBlock_){if(this.parentBlock_){if(e.utils.arrayRemove(this.parentBlock_.childBlocks_,this),this.previousConnection&&this.previousConnection.isConnected())throw Error("Still connected to previous block.");if(this.outputConnection&&this.outputConnection.isConnected())throw Error("Still connected to parent block.");this.parentBlock_=null}else this.workspace.removeTopBlock(this);(this.parentBlock_=t)?t.childBlocks_.push(this):this.workspace.addTopBlock(this)}},e.Block.prototype.getDescendants=function(t){for(var s,n=[this],r=this.getChildren(t),u=0;s=r[u];u++)n.push.apply(n,s.getDescendants(t));return n},e.Block.prototype.isDeletable=function(){return this.deletable_&&!this.isShadow_&&!(this.workspace&&this.workspace.options.readOnly)},e.Block.prototype.setDeletable=function(t){this.deletable_=t},e.Block.prototype.isMovable=function(){return this.movable_&&!this.isShadow_&&!(this.workspace&&this.workspace.options.readOnly)},e.Block.prototype.setMovable=function(t){this.movable_=t},e.Block.prototype.isDuplicatable=function(){return!this.workspace.hasBlockLimits()||this.workspace.isCapacityAvailable(e.utils.getBlockTypeCounts(this,!0))},e.Block.prototype.isShadow=function(){return this.isShadow_},e.Block.prototype.setShadow=function(t){this.isShadow_=t},e.Block.prototype.isInsertionMarker=function(){return this.isInsertionMarker_},e.Block.prototype.setInsertionMarker=function(t){this.isInsertionMarker_=t},e.Block.prototype.isEditable=function(){return this.editable_&&!(this.workspace&&this.workspace.options.readOnly)},e.Block.prototype.setEditable=function(t){this.editable_=t,t=0;for(var n;n=this.inputList[t];t++)for(var s,r=0;s=n.fieldRow[r];r++)s.updateEditable()},e.Block.prototype.isDisposed=function(){return this.disposed},e.Block.prototype.getMatchingConnection=function(t,n){var r=this.getConnections_(!0);if(t=t.getConnections_(!0),r.length!=t.length)throw Error("Connection lists did not match in length.");for(var s=0;s<t.length;s++)if(t[s]==n)return r[s];return null},e.Block.prototype.setHelpUrl=function(t){this.helpUrl=t},e.Block.prototype.setTooltip=function(t){this.tooltip=t},e.Block.prototype.getTooltip=function(){return e.Tooltip.getTooltipOfObject(this)},e.Block.prototype.getColour=function(){return this.colour_},e.Block.prototype.getStyleName=function(){return this.styleName_},e.Block.prototype.getHue=function(){return this.hue_},e.Block.prototype.setColour=function(t){t=e.utils.parseBlockColour(t),this.hue_=t.hue,this.colour_=t.hex},e.Block.prototype.setStyle=function(t){this.styleName_=t},e.Block.prototype.setOnChange=function(t){if(t&&"function"!=typeof t)throw Error("onchange must be a function.");this.onchangeWrapper_&&this.workspace.removeChangeListener(this.onchangeWrapper_),(this.onchange=t)&&(this.onchangeWrapper_=t.bind(this),this.workspace.addChangeListener(this.onchangeWrapper_))},e.Block.prototype.getField=function(t){if("string"!=typeof t)throw TypeError("Blockly.Block.prototype.getField expects a string with the field name but received "+(void 0===t?"nothing":t+" of type "+typeof t)+" instead");for(var r,n=0;r=this.inputList[n];n++)for(var u,s=0;u=r.fieldRow[s];s++)if(u.name===t)return u;return null},e.Block.prototype.getVars=function(){for(var r,t=[],n=0;r=this.inputList[n];n++)for(var u,s=0;u=r.fieldRow[s];s++)u.referencesVariables()&&t.push(u.getValue());return t},e.Block.prototype.getVarModels=function(){for(var r,t=[],n=0;r=this.inputList[n];n++)for(var u,s=0;u=r.fieldRow[s];s++)u.referencesVariables()&&(u=this.workspace.getVariableById(u.getValue()))&&t.push(u);return t},e.Block.prototype.updateVarName=function(t){for(var r,n=0;r=this.inputList[n];n++)for(var u,s=0;u=r.fieldRow[s];s++)u.referencesVariables()&&t.getId()==u.getValue()&&u.refreshVariableName()},e.Block.prototype.renameVarById=function(t,n){for(var s,r=0;s=this.inputList[r];r++)for(var y,u=0;y=s.fieldRow[u];u++)y.referencesVariables()&&t==y.getValue()&&y.setValue(n)},e.Block.prototype.getFieldValue=function(t){return(t=this.getField(t))?t.getValue():null},e.Block.prototype.setFieldValue=function(t,n){var r=this.getField(n);if(!r)throw Error('Field "'+n+'" not found.');r.setValue(t)},e.Block.prototype.setPreviousStatement=function(t,n){if(t){if(void 0===n&&(n=null),!this.previousConnection){if(this.outputConnection)throw Error("Remove output connection prior to adding previous connection.");this.previousConnection=this.makeConnection_(e.connectionTypes.PREVIOUS_STATEMENT)}this.previousConnection.setCheck(n)}else if(this.previousConnection){if(this.previousConnection.isConnected())throw Error("Must disconnect previous statement before removing connection.");this.previousConnection.dispose(),this.previousConnection=null}},e.Block.prototype.setNextStatement=function(t,n){if(t)void 0===n&&(n=null),this.nextConnection||(this.nextConnection=this.makeConnection_(e.connectionTypes.NEXT_STATEMENT)),this.nextConnection.setCheck(n);else if(this.nextConnection){if(this.nextConnection.isConnected())throw Error("Must disconnect next statement before removing connection.");this.nextConnection.dispose(),this.nextConnection=null}},e.Block.prototype.setOutput=function(t,n){if(t){if(void 0===n&&(n=null),!this.outputConnection){if(this.previousConnection)throw Error("Remove previous connection prior to adding output connection.");this.outputConnection=this.makeConnection_(e.connectionTypes.OUTPUT_VALUE)}this.outputConnection.setCheck(n)}else if(this.outputConnection){if(this.outputConnection.isConnected())throw Error("Must disconnect output value before removing connection.");this.outputConnection.dispose(),this.outputConnection=null}},e.Block.prototype.setInputsInline=function(t){this.inputsInline!=t&&(e.Events.fire(new(e.Events.get(e.Events.BLOCK_CHANGE))(this,"inline",null,this.inputsInline,t)),this.inputsInline=t)},e.Block.prototype.getInputsInline=function(){if(null!=this.inputsInline)return this.inputsInline;for(var t=1;t<this.inputList.length;t++)if(this.inputList[t-1].type==e.inputTypes.DUMMY&&this.inputList[t].type==e.inputTypes.DUMMY)return!1;for(t=1;t<this.inputList.length;t++)if(this.inputList[t-1].type==e.inputTypes.VALUE&&this.inputList[t].type==e.inputTypes.DUMMY)return!0;return!1},e.Block.prototype.setOutputShape=function(t){this.outputShape_=t},e.Block.prototype.getOutputShape=function(){return this.outputShape_},e.Block.prototype.isEnabled=function(){return!this.disabled},e.Block.prototype.setEnabled=function(t){this.isEnabled()!=t&&(e.Events.fire(new(e.Events.get(e.Events.BLOCK_CHANGE))(this,"disabled",null,this.disabled,!t)),this.disabled=!t)},e.Block.prototype.getInheritedDisabled=function(){for(var t=this.getSurroundParent();t;){if(t.disabled)return!0;t=t.getSurroundParent()}return!1},e.Block.prototype.isCollapsed=function(){return this.collapsed_},e.Block.prototype.setCollapsed=function(t){this.collapsed_!=t&&(e.Events.fire(new(e.Events.get(e.Events.BLOCK_CHANGE))(this,"collapsed",null,this.collapsed_,t)),this.collapsed_=t)},e.Block.prototype.toString=function(t,n){function r(at){var rt=at.getCheck();return!rt&&at.targetConnection&&(rt=at.targetConnection.getCheck()),!!rt&&(-1!=rt.indexOf("Boolean")||-1!=rt.indexOf("Number"))}function s(){x&&x.getType()==B.getType()&&x.getLocation()==B.getLocation()&&(x=null)}var u=[];n=n||"?";var y=e.ASTNode.NAVIGATE_ALL_FIELDS;e.ASTNode.NAVIGATE_ALL_FIELDS=!0;for(var x=e.ASTNode.createBlockNode(this),B=x;x;){switch(x.getType()){case e.ASTNode.types.INPUT:var Q=x.getLocation();x.in()?r(Q)&&u.push("("):u.push(n);break;case e.ASTNode.types.FIELD:(Q=x.getLocation()).name!=e.constants.COLLAPSED_FIELD_NAME&&u.push(Q.getText())}if(!(x=(Q=x).in()||Q.next())){for(x=Q.out(),s();x&&!x.next();)x=x.out(),s(),x&&x.getType()==e.ASTNode.types.INPUT&&r(x.getLocation())&&u.push(")");x&&(x=x.next())}}for(e.ASTNode.NAVIGATE_ALL_FIELDS=y,n=2;n<u.length;n++)"("==u[n-2]&&")"==u[n]&&(u[n-2]=u[n-1],u.splice(n-1,2));return u=(u=u.reduce(function(at,rt){return at+("("==at.substr(-1)||")"==rt?"":" ")+rt},"")).trim()||"???",t&&u.length>t&&(u=u.substring(0,t-3)+"..."),u},e.Block.prototype.appendValueInput=function(t){return this.appendInput_(e.inputTypes.VALUE,t)},e.Block.prototype.appendStatementInput=function(t){return this.appendInput_(e.inputTypes.STATEMENT,t)},e.Block.prototype.appendDummyInput=function(t){return this.appendInput_(e.inputTypes.DUMMY,t||"")},e.Block.prototype.jsonInit=function(t){var n=t.type?'Block "'+t.type+'": ':"";if(t.output&&t.previousStatement)throw Error(n+"Must not have both an output and a previousStatement.");if(t.style&&t.style.hat&&(this.hat=t.style.hat,t.style=null),t.style&&t.colour)throw Error(n+"Must not have both a colour and a style.");t.style?this.jsonInitStyle_(t,n):this.jsonInitColour_(t,n);for(var r=0;void 0!==t["message"+r];)this.interpolate_(t["message"+r],t["args"+r]||[],t["lastDummyAlign"+r],n),r++;if(void 0!==t.inputsInline&&this.setInputsInline(t.inputsInline),void 0!==t.output&&this.setOutput(!0,t.output),void 0!==t.outputShape&&this.setOutputShape(t.outputShape),void 0!==t.previousStatement&&this.setPreviousStatement(!0,t.previousStatement),void 0!==t.nextStatement&&this.setNextStatement(!0,t.nextStatement),void 0!==t.tooltip&&(r=e.utils.replaceMessageReferences(r=t.tooltip),this.setTooltip(r)),void 0!==t.enableContextMenu&&(this.contextMenu=!!(r=t.enableContextMenu)),void 0!==t.helpUrl&&(r=e.utils.replaceMessageReferences(r=t.helpUrl),this.setHelpUrl(r)),"string"==typeof t.extensions&&(console.warn(n+"JSON attribute 'extensions' should be an array of strings. Found raw string in JSON for '"+t.type+"' block."),t.extensions=[t.extensions]),void 0!==t.mutator&&e.Extensions.apply(t.mutator,this,!0),t=t.extensions,Array.isArray(t))for(n=0;n<t.length;++n)e.Extensions.apply(t[n],this,!1)},e.Block.prototype.jsonInitColour_=function(t,n){if("colour"in t)if(void 0===t.colour)console.warn(n+"Undefined colour value.");else{t=t.colour;try{this.setColour(t)}catch(r){console.warn(n+"Illegal colour value: ",t)}}},e.Block.prototype.jsonInitStyle_=function(t,n){t=t.style;try{this.setStyle(t)}catch(r){console.warn(n+"Style does not exist: ",t)}},e.Block.prototype.mixin=function(t,n){if(void 0!==n&&"boolean"!=typeof n)throw Error("opt_disableCheck must be a boolean if provided");if(!n){for(var r in n=[],t)void 0!==this[r]&&n.push(r);if(n.length)throw Error("Mixin will overwrite block members: "+JSON.stringify(n))}e.utils.object.mixin(this,t)},e.Block.prototype.interpolate_=function(t,n,r,s){t=e.utils.tokenizeInterpolation(t),this.validateTokens_(t,n.length),n=this.interpolateArguments_(t,n,r),r=[],t=0;for(var u;u=n[t];t++)if(this.isInputKeyword_(u.type)){if(u=this.inputFromJson_(u,s)){for(var x,y=0;x=r[y];y++)u.appendField(x[0],x[1]);r.length=0}}else(y=this.fieldFromJson_(u))&&r.push([y,u.name])},e.Block.prototype.validateTokens_=function(t,n){for(var r=[],s=0,u=0;u<t.length;u++){var y=t[u];if("number"==typeof y){if(1>y||y>n)throw Error('Block "'+this.type+'": Message index %'+y+" out of range.");if(r[y])throw Error('Block "'+this.type+'": Message index %'+y+" duplicated.");r[y]=!0,s++}}if(s!=n)throw Error('Block "'+this.type+'": Message does not reference all '+n+" arg(s).")},e.Block.prototype.interpolateArguments_=function(t,n,r){for(var s=[],u=0;u<t.length;u++){var y=t[u];"number"==typeof y&&(y=n[y-1]),("string"!=typeof y||(y=this.stringToFieldJson_(y)))&&s.push(y)}return(t=s.length)&&!this.isInputKeyword_(s[t-1].type)&&(t={type:"input_dummy"},r&&(t.align=r),s.push(t)),s},e.Block.prototype.fieldFromJson_=function(t){var n=e.fieldRegistry.fromJson(t);return!n&&t.alt?"string"==typeof t.alt?(t=this.stringToFieldJson_(t.alt))?this.fieldFromJson_(t):null:this.fieldFromJson_(t.alt):n},e.Block.prototype.inputFromJson_=function(t,n){var r={LEFT:e.constants.ALIGN.LEFT,RIGHT:e.constants.ALIGN.RIGHT,CENTRE:e.constants.ALIGN.CENTRE,CENTER:e.constants.ALIGN.CENTRE},s=null;switch(t.type){case"input_value":s=this.appendValueInput(t.name);break;case"input_statement":s=this.appendStatementInput(t.name);break;case"input_dummy":s=this.appendDummyInput(t.name)}return s?(t.check&&s.setCheck(t.check),t.align&&(void 0===(r=r[t.align.toUpperCase()])?console.warn(n+"Illegal align value: ",t.align):s.setAlign(r)),s):null},e.Block.prototype.isInputKeyword_=function(t){return"input_value"==t||"input_statement"==t||"input_dummy"==t},e.Block.prototype.stringToFieldJson_=function(t){return(t=t.trim())?{type:"field_label",text:t}:null},e.Block.prototype.appendInput_=function(t,n){var r=null;return(t==e.inputTypes.VALUE||t==e.inputTypes.STATEMENT)&&(r=this.makeConnection_(t)),t==e.inputTypes.STATEMENT&&this.statementInputCount++,t=new e.Input(t,n,this,r),this.inputList.push(t),t},e.Block.prototype.moveInputBefore=function(t,n){if(t!=n){for(var y,r=-1,s=n?-1:this.inputList.length,u=0;y=this.inputList[u];u++)if(y.name==t){if(r=u,-1!=s)break}else if(n&&y.name==n&&(s=u,-1!=r))break;if(-1==r)throw Error('Named input "'+t+'" not found.');if(-1==s)throw Error('Reference input "'+n+'" not found.');this.moveNumberedInputBefore(r,s)}},e.Block.prototype.moveNumberedInputBefore=function(t,n){if(t==n)throw Error("Can't move input to itself.");if(t>=this.inputList.length)throw RangeError("Input index "+t+" out of bounds.");if(n>this.inputList.length)throw RangeError("Reference input "+n+" out of bounds.");var r=this.inputList[t];this.inputList.splice(t,1),t<n&&n--,this.inputList.splice(n,0,r)},e.Block.prototype.removeInput=function(t,n){for(var s,r=0;s=this.inputList[r];r++)if(s.name==t)return s.type==e.inputTypes.STATEMENT&&this.statementInputCount--,s.dispose(),this.inputList.splice(r,1),!0;if(n)return!1;throw Error("Input not found: "+t)},e.Block.prototype.getInput=function(t){for(var r,n=0;r=this.inputList[n];n++)if(r.name==t)return r;return null},e.Block.prototype.getInputTargetBlock=function(t){return(t=this.getInput(t))&&t.connection&&t.connection.targetBlock()},e.Block.prototype.getCommentText=function(){return this.commentModel.text},e.Block.prototype.setCommentText=function(t){this.commentModel.text!=t&&(e.Events.fire(new(e.Events.get(e.Events.BLOCK_CHANGE))(this,"comment",null,this.commentModel.text,t)),this.comment=this.commentModel.text=t)},e.Block.prototype.setWarningText=function(t,n){},e.Block.prototype.setMutator=function(t){},e.Block.prototype.getRelativeToSurfaceXY=function(){return this.xy_},e.Block.prototype.moveBy=function(t,n){if(this.parentBlock_)throw Error("Block has parent.");var r=new(e.Events.get(e.Events.BLOCK_MOVE))(this);this.xy_.translate(t,n),r.recordNew(),e.Events.fire(r)},e.Block.prototype.makeConnection_=function(t){return new e.Connection(this,t)},e.Block.prototype.allInputsFilled=function(t){if(void 0===t&&(t=!0),!t&&this.isShadow())return!1;for(var r,n=0;r=this.inputList[n];n++)if(r.connection&&(!(r=r.connection.targetBlock())||!r.allInputsFilled(t)))return!1;return!(n=this.getNextBlock())||n.allInputsFilled(t)},e.Block.prototype.toDevString=function(){var t=this.type?'"'+this.type+'" block':"Block";return this.id&&(t+=' (id="'+this.id+'")'),t},e.blockRendering.IPathObject=function(t,n){},e.utils.KeyCodes={WIN_KEY_FF_LINUX:0,MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PLUS_SIGN:43,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,FF_SEMICOLON:59,FF_EQUALS:61,FF_DASH:173,FF_HASH:163,QUESTION_MARK:63,AT_SIGN:64,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SCROLL_LOCK:145,FIRST_MEDIA_KEY:166,LAST_MEDIA_KEY:183,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,TILDE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,WIN_KEY:224,MAC_FF_META:224,MAC_WK_CMD_LEFT:91,MAC_WK_CMD_RIGHT:93,WIN_IME:229,VK_NONAME:252,PHANTOM:255},e.Menu=function(){this.menuItems_=[],this.roleName_=this.element_=this.onKeyDownHandler_=this.mouseLeaveHandler_=this.mouseEnterHandler_=this.clickHandler_=this.mouseOverHandler_=this.highlightedItem_=this.openingCoords=null},e.Menu.prototype.addChild=function(t){this.menuItems_.push(t)},e.Menu.prototype.render=function(t){var n=document.createElement("div");n.className="blocklyMenu goog-menu blocklyNonSelectable",n.tabIndex=0,this.roleName_&&e.utils.aria.setRole(n,this.roleName_),this.element_=n;for(var s,r=0;s=this.menuItems_[r];r++)n.appendChild(s.createDom());this.mouseOverHandler_=e.browserEvents.conditionalBind(n,"mouseover",this,this.handleMouseOver_,!0),this.clickHandler_=e.browserEvents.conditionalBind(n,"click",this,this.handleClick_,!0),this.mouseEnterHandler_=e.browserEvents.conditionalBind(n,"mouseenter",this,this.handleMouseEnter_,!0),this.mouseLeaveHandler_=e.browserEvents.conditionalBind(n,"mouseleave",this,this.handleMouseLeave_,!0),this.onKeyDownHandler_=e.browserEvents.conditionalBind(n,"keydown",this,this.handleKeyEvent_),t.appendChild(n)},e.Menu.prototype.getElement=function(){return this.element_},e.Menu.prototype.focus=function(){var t=this.getElement();t&&(t.focus({preventScroll:!0}),e.utils.dom.addClass(t,"blocklyFocused"))},e.Menu.prototype.blur_=function(){var t=this.getElement();t&&(t.blur(),e.utils.dom.removeClass(t,"blocklyFocused"))},e.Menu.prototype.setRole=function(t){this.roleName_=t},e.Menu.prototype.dispose=function(){this.mouseOverHandler_&&(e.browserEvents.unbind(this.mouseOverHandler_),this.mouseOverHandler_=null),this.clickHandler_&&(e.browserEvents.unbind(this.clickHandler_),this.clickHandler_=null),this.mouseEnterHandler_&&(e.browserEvents.unbind(this.mouseEnterHandler_),this.mouseEnterHandler_=null),this.mouseLeaveHandler_&&(e.browserEvents.unbind(this.mouseLeaveHandler_),this.mouseLeaveHandler_=null),this.onKeyDownHandler_&&(e.browserEvents.unbind(this.onKeyDownHandler_),this.onKeyDownHandler_=null);for(var n,t=0;n=this.menuItems_[t];t++)n.dispose();this.element_=null},e.Menu.prototype.getMenuItem_=function(t){for(var n=this.getElement();t&&t!=n;){if(e.utils.dom.hasClass(t,"blocklyMenuItem"))for(var s,r=0;s=this.menuItems_[r];r++)if(s.getElement()==t)return s;t=t.parentElement}return null},e.Menu.prototype.setHighlighted=function(t){var n=this.highlightedItem_;n&&(n.setHighlighted(!1),this.highlightedItem_=null),t&&(t.setHighlighted(!0),this.highlightedItem_=t,n=this.getElement(),e.utils.style.scrollIntoContainerView(t.getElement(),n),e.utils.aria.setState(n,e.utils.aria.State.ACTIVEDESCENDANT,t.getId()))},e.Menu.prototype.highlightNext=function(){var t=this.menuItems_.indexOf(this.highlightedItem_);this.highlightHelper_(t,1)},e.Menu.prototype.highlightPrevious=function(){var t=this.menuItems_.indexOf(this.highlightedItem_);this.highlightHelper_(0>t?this.menuItems_.length:t,-1)},e.Menu.prototype.highlightFirst_=function(){this.highlightHelper_(-1,1)},e.Menu.prototype.highlightLast_=function(){this.highlightHelper_(this.menuItems_.length,-1)},e.Menu.prototype.highlightHelper_=function(t,n){t+=n;for(var r;r=this.menuItems_[t];){if(r.isEnabled()){this.setHighlighted(r);break}t+=n}},e.Menu.prototype.handleMouseOver_=function(t){(t=this.getMenuItem_(t.target))&&(t.isEnabled()?this.highlightedItem_!=t&&this.setHighlighted(t):this.setHighlighted(null))},e.Menu.prototype.handleClick_=function(t){var n=this.openingCoords;if(this.openingCoords=null,n&&"number"==typeof t.clientX){var r=new e.utils.Coordinate(t.clientX,t.clientY);if(1>e.utils.Coordinate.distance(n,r))return}(t=this.getMenuItem_(t.target))&&t.performAction()},e.Menu.prototype.handleMouseEnter_=function(t){this.focus()},e.Menu.prototype.handleMouseLeave_=function(t){this.getElement()&&(this.blur_(),this.setHighlighted(null))},e.Menu.prototype.handleKeyEvent_=function(t){if(this.menuItems_.length&&!(t.shiftKey||t.ctrlKey||t.metaKey||t.altKey)){var n=this.highlightedItem_;switch(t.keyCode){case e.utils.KeyCodes.ENTER:case e.utils.KeyCodes.SPACE:n&&n.performAction();break;case e.utils.KeyCodes.UP:this.highlightPrevious();break;case e.utils.KeyCodes.DOWN:this.highlightNext();break;case e.utils.KeyCodes.PAGE_UP:case e.utils.KeyCodes.HOME:this.highlightFirst_();break;case e.utils.KeyCodes.PAGE_DOWN:case e.utils.KeyCodes.END:this.highlightLast_();break;default:return}t.preventDefault(),t.stopPropagation()}},e.Menu.prototype.getSize=function(){var t=this.getElement(),n=e.utils.style.getSize(t);return n.height=t.scrollHeight,n},e.MenuItem=function(t,n){this.content_=t,this.value_=n,this.enabled_=!0,this.element_=null,this.rightToLeft_=!1,this.roleName_=null,this.highlight_=this.checked_=this.checkable_=!1,this.actionHandler_=null},e.MenuItem.prototype.createDom=function(){var t=document.createElement("div");t.id=e.utils.IdGenerator.getNextUniqueId(),this.element_=t,t.className="blocklyMenuItem goog-menuitem "+(this.enabled_?"":"blocklyMenuItemDisabled goog-menuitem-disabled ")+(this.checked_?"blocklyMenuItemSelected goog-option-selected ":"")+(this.highlight_?"blocklyMenuItemHighlight goog-menuitem-highlight ":"")+(this.rightToLeft_?"blocklyMenuItemRtl goog-menuitem-rtl ":"");var n=document.createElement("div");if(n.className="blocklyMenuItemContent goog-menuitem-content",this.checkable_){var r=document.createElement("div");r.className="blocklyMenuItemCheckbox goog-menuitem-checkbox",n.appendChild(r)}return r=this.content_,"string"==typeof this.content_&&(r=document.createTextNode(this.content_)),n.appendChild(r),t.appendChild(n),this.roleName_&&e.utils.aria.setRole(t,this.roleName_),e.utils.aria.setState(t,e.utils.aria.State.SELECTED,this.checkable_&&this.checked_||!1),e.utils.aria.setState(t,e.utils.aria.State.DISABLED,!this.enabled_),t},e.MenuItem.prototype.dispose=function(){this.element_=null},e.MenuItem.prototype.getElement=function(){return this.element_},e.MenuItem.prototype.getId=function(){return this.element_.id},e.MenuItem.prototype.getValue=function(){return this.value_},e.MenuItem.prototype.setRightToLeft=function(t){this.rightToLeft_=t},e.MenuItem.prototype.setRole=function(t){this.roleName_=t},e.MenuItem.prototype.setCheckable=function(t){this.checkable_=t},e.MenuItem.prototype.setChecked=function(t){this.checked_=t},e.MenuItem.prototype.setHighlighted=function(t){this.highlight_=t;var n=this.getElement();n&&this.isEnabled()&&(t?(e.utils.dom.addClass(n,"blocklyMenuItemHighlight"),e.utils.dom.addClass(n,"goog-menuitem-highlight")):(e.utils.dom.removeClass(n,"blocklyMenuItemHighlight"),e.utils.dom.removeClass(n,"goog-menuitem-highlight")))},e.MenuItem.prototype.isEnabled=function(){return this.enabled_},e.MenuItem.prototype.setEnabled=function(t){this.enabled_=t},e.MenuItem.prototype.performAction=function(){this.isEnabled()&&this.actionHandler_&&this.actionHandler_(this)},e.MenuItem.prototype.onAction=function(t,n){this.actionHandler_=t.bind(n)},e.ContextMenu={},e.ContextMenu.currentBlock=null,e.ContextMenu.menu_=null,e.ContextMenu.show=function(t,n,r){if(e.WidgetDiv.show(e.ContextMenu,r,e.ContextMenu.dispose),n.length){var s=e.ContextMenu.populate_(n,r);e.ContextMenu.menu_=s,e.ContextMenu.position_(s,t,r),setTimeout(function(){s.focus()},1),e.ContextMenu.currentBlock=null}else e.ContextMenu.hide()},e.ContextMenu.populate_=function(t,n){var r=new e.Menu;r.setRole(e.utils.aria.Role.MENU);for(var u,s=0;u=t[s];s++){var y=new e.MenuItem(u.text);y.setRightToLeft(n),y.setRole(e.utils.aria.Role.MENUITEM),r.addChild(y),y.setEnabled(u.enabled),u.enabled&&y.onAction(function(x){e.ContextMenu.hide(),this.callback(this.scope)},u)}return r},e.ContextMenu.position_=function(t,n,r){var s=e.utils.getViewportBBox();n=new e.utils.Rect(n.clientY+s.top,n.clientY+s.top,n.clientX+s.left,n.clientX+s.left),e.ContextMenu.createWidget_(t);var u=t.getSize();r&&(n.left+=u.width,n.right+=u.width,s.left+=u.width,s.right+=u.width),e.WidgetDiv.positionWithAnchor(s,n,u,r),t.focus()},e.ContextMenu.createWidget_=function(t){t.render(e.WidgetDiv.DIV);var n=t.getElement();e.utils.dom.addClass(n,"blocklyContextMenu"),e.browserEvents.conditionalBind(n,"contextmenu",null,e.utils.noEvent),t.focus()},e.ContextMenu.hide=function(){e.WidgetDiv.hideIfOwner(e.ContextMenu),e.ContextMenu.currentBlock=null},e.ContextMenu.dispose=function(){e.ContextMenu.menu_&&(e.ContextMenu.menu_.dispose(),e.ContextMenu.menu_=null)},e.ContextMenu.callbackFactory=function(t,n){return function(){e.Events.disable();try{var r=e.Xml.domToBlock(n,t.workspace),s=t.getRelativeToSurfaceXY();s.x=t.RTL?s.x-e.SNAP_RADIUS:s.x+e.SNAP_RADIUS,s.y+=2*e.SNAP_RADIUS,r.moveBy(s.x,s.y)}finally{e.Events.enable()}e.Events.isEnabled()&&!r.isShadow()&&e.Events.fire(new(e.Events.get(e.Events.BLOCK_CREATE))(r)),r.select()}},e.ContextMenu.commentDeleteOption=function(t){return{text:e.Msg.REMOVE_COMMENT,enabled:!0,callback:function(){e.Events.setGroup(!0),t.dispose(!0,!0),e.Events.setGroup(!1)}}},e.ContextMenu.commentDuplicateOption=function(t){return{text:e.Msg.DUPLICATE_COMMENT,enabled:!0,callback:function(){e.duplicate(t)}}},e.ContextMenu.workspaceCommentOption=function(t,n){if(!e.WorkspaceCommentSvg)throw Error("Missing require for Blockly.WorkspaceCommentSvg");var r={enabled:!e.utils.userAgent.IE};return r.text=e.Msg.ADD_COMMENT,r.callback=function(){var s=new e.WorkspaceCommentSvg(t,e.Msg.WORKSPACE_COMMENT_DEFAULT_TEXT,e.WorkspaceCommentSvg.DEFAULT_SIZE,e.WorkspaceCommentSvg.DEFAULT_SIZE),u=t.getInjectionDiv().getBoundingClientRect();u=new e.utils.Coordinate(n.clientX-u.left,n.clientY-u.top);var y=t.getOriginOffsetInPixels();(u=e.utils.Coordinate.difference(u,y)).scale(1/t.scale),s.moveBy(u.x,u.y),t.rendered&&(s.initSvg(),s.render(),s.select())},r},e.ContextMenuRegistry=function(){e.ContextMenuRegistry.registry=this,this.registry_=Object.create(null)},e.ContextMenuRegistry.ScopeType={BLOCK:"block",WORKSPACE:"workspace"},e.ContextMenuRegistry.registry=null,e.ContextMenuRegistry.prototype.register=function(t){if(this.registry_[t.id])throw Error('Menu item with ID "'+t.id+'" is already registered.');this.registry_[t.id]=t},e.ContextMenuRegistry.prototype.unregister=function(t){if(!this.registry_[t])throw Error('Menu item with ID "'+t+'" not found.');delete this.registry_[t]},e.ContextMenuRegistry.prototype.getItem=function(t){return this.registry_[t]||null},e.ContextMenuRegistry.prototype.getContextMenuOptions=function(t,n){var r=[],s=this.registry_;return Object.keys(s).forEach(function(u){if(t==(u=s[u]).scopeType){var y=u.preconditionFn(n);"hidden"!=y&&(u={text:"function"==typeof u.displayText?u.displayText(n):u.displayText,enabled:"enabled"==y,callback:u.callback,scope:n,weight:u.weight},r.push(u))}}),r.sort(function(u,y){return u.weight-y.weight}),r},new e.ContextMenuRegistry,e.Events.Selected=function(t,n,r){e.Events.Selected.superClass_.constructor.call(this,r),this.oldElementId=t,this.newElementId=n},e.utils.object.inherits(e.Events.Selected,e.Events.UiBase),e.Events.Selected.prototype.type=e.Events.SELECTED,e.Events.Selected.prototype.toJson=function(){var t=e.Events.Selected.superClass_.toJson.call(this);return t.oldElementId=this.oldElementId,t.newElementId=this.newElementId,t},e.Events.Selected.prototype.fromJson=function(t){e.Events.Selected.superClass_.fromJson.call(this,t),this.oldElementId=t.oldElementId,this.newElementId=t.newElementId},e.registry.register(e.registry.Type.EVENT,e.Events.SELECTED,e.Events.Selected),e.IBoundedElement=function(){},e.ICopyable=function(){},e.RenderedConnection=function(t,n){e.RenderedConnection.superClass_.constructor.call(this,t,n),this.db_=t.workspace.connectionDBList[n],this.dbOpposite_=t.workspace.connectionDBList[e.OPPOSITE_TYPE[n]],this.offsetInBlock_=new e.utils.Coordinate(0,0),this.trackedState_=e.RenderedConnection.TrackedState.WILL_TRACK,this.targetConnection=null},e.utils.object.inherits(e.RenderedConnection,e.Connection),e.RenderedConnection.TrackedState={WILL_TRACK:-1,UNTRACKED:0,TRACKED:1},e.RenderedConnection.prototype.dispose=function(){e.RenderedConnection.superClass_.dispose.call(this),this.trackedState_==e.RenderedConnection.TrackedState.TRACKED&&this.db_.removeConnection(this,this.y)},e.RenderedConnection.prototype.getSourceBlock=function(){return e.RenderedConnection.superClass_.getSourceBlock.call(this)},e.RenderedConnection.prototype.targetBlock=function(){return e.RenderedConnection.superClass_.targetBlock.call(this)},e.RenderedConnection.prototype.distanceFrom=function(t){var n=this.x-t.x;return t=this.y-t.y,Math.sqrt(n*n+t*t)},e.RenderedConnection.prototype.bumpAwayFrom=function(t){if(!this.sourceBlock_.workspace.isDragging()){var n=this.sourceBlock_.getRootBlock();if(!n.isInFlyout){var r=!1;if(!n.isMovable()){if(!(n=t.getSourceBlock().getRootBlock()).isMovable())return;t=this,r=!0}var s=e.selected==n;s||n.addSelect();var u=t.x+e.SNAP_RADIUS+Math.floor(Math.random()*e.BUMP_RANDOMNESS)-this.x,y=t.y+e.SNAP_RADIUS+Math.floor(Math.random()*e.BUMP_RANDOMNESS)-this.y;r&&(y=-y),n.RTL&&(u=t.x-e.SNAP_RADIUS-Math.floor(Math.random()*e.BUMP_RANDOMNESS)-this.x),n.moveBy(u,y),s||n.removeSelect()}}},e.RenderedConnection.prototype.moveTo=function(t,n){this.trackedState_==e.RenderedConnection.TrackedState.WILL_TRACK?(this.db_.addConnection(this,n),this.trackedState_=e.RenderedConnection.TrackedState.TRACKED):this.trackedState_==e.RenderedConnection.TrackedState.TRACKED&&(this.db_.removeConnection(this,this.y),this.db_.addConnection(this,n)),this.x=t,this.y=n},e.RenderedConnection.prototype.moveBy=function(t,n){this.moveTo(this.x+t,this.y+n)},e.RenderedConnection.prototype.moveToOffset=function(t){this.moveTo(t.x+this.offsetInBlock_.x,t.y+this.offsetInBlock_.y)},e.RenderedConnection.prototype.setOffsetInBlock=function(t,n){this.offsetInBlock_.x=t,this.offsetInBlock_.y=n},e.RenderedConnection.prototype.getOffsetInBlock=function(){return this.offsetInBlock_},e.RenderedConnection.prototype.tighten=function(){var t=this.targetConnection.x-this.x,n=this.targetConnection.y-this.y;if(0!=t||0!=n){var r=this.targetBlock(),s=r.getSvgRoot();if(!s)throw Error("block is not rendered.");s=e.utils.getRelativeXY(s),r.getSvgRoot().setAttribute("transform","translate("+(s.x-t)+","+(s.y-n)+")"),r.moveConnections(-t,-n)}},e.RenderedConnection.prototype.closest=function(t,n){return this.dbOpposite_.searchForClosest(this,t,n)},e.RenderedConnection.prototype.highlight=function(){var t=this.sourceBlock_.workspace.getRenderer().getConstants(),n=t.shapeFor(this);n=this.type==e.connectionTypes.INPUT_VALUE||this.type==e.connectionTypes.OUTPUT_VALUE?e.utils.svgPaths.moveBy(0,-(t=t.TAB_OFFSET_FROM_TOP))+e.utils.svgPaths.lineOnAxis("v",t)+n.pathDown+e.utils.svgPaths.lineOnAxis("v",t):e.utils.svgPaths.moveBy(-(t=t.NOTCH_OFFSET_LEFT-t.CORNER_RADIUS),0)+e.utils.svgPaths.lineOnAxis("h",t)+n.pathLeft+e.utils.svgPaths.lineOnAxis("h",t),t=this.sourceBlock_.getRelativeToSurfaceXY(),e.Connection.highlightedPath_=e.utils.dom.createSvgElement(e.utils.Svg.PATH,{class:"blocklyHighlightedConnectionPath",d:n,transform:"translate("+(this.x-t.x)+","+(this.y-t.y)+")"+(this.sourceBlock_.RTL?" scale(-1 1)":"")},this.sourceBlock_.getSvgRoot())},e.RenderedConnection.prototype.unhighlight=function(){e.utils.dom.removeNode(e.Connection.highlightedPath_),delete e.Connection.highlightedPath_},e.RenderedConnection.prototype.setTracking=function(t){t&&this.trackedState_==e.RenderedConnection.TrackedState.TRACKED||!t&&this.trackedState_==e.RenderedConnection.TrackedState.UNTRACKED||this.sourceBlock_.isInFlyout||(t?(this.db_.addConnection(this,this.y),this.trackedState_=e.RenderedConnection.TrackedState.TRACKED):(this.trackedState_==e.RenderedConnection.TrackedState.TRACKED&&this.db_.removeConnection(this,this.y),this.trackedState_=e.RenderedConnection.TrackedState.UNTRACKED))},e.RenderedConnection.prototype.stopTrackingAll=function(){if(this.setTracking(!1),this.targetConnection)for(var t=this.targetBlock().getDescendants(!1),n=0;n<t.length;n++){for(var r=t[n],s=r.getConnections_(!0),u=0;u<s.length;u++)s[u].setTracking(!1);for(r=r.getIcons(),u=0;u<r.length;u++)r[u].setVisible(!1)}},e.RenderedConnection.prototype.startTrackingAll=function(){this.setTracking(!0);var t=[];if(this.type!=e.connectionTypes.INPUT_VALUE&&this.type!=e.connectionTypes.NEXT_STATEMENT)return t;var n=this.targetBlock();if(n){if(n.isCollapsed()){var r=[];n.outputConnection&&r.push(n.outputConnection),n.nextConnection&&r.push(n.nextConnection),n.previousConnection&&r.push(n.previousConnection)}else r=n.getConnections_(!0);for(var s=0;s<r.length;s++)t.push.apply(t,r[s].startTrackingAll());t.length||(t[0]=n)}return t},e.RenderedConnection.prototype.isConnectionAllowed=function(t,n){return e.utils.deprecation.warn("RenderedConnection.prototype.isConnectionAllowed","July 2020","July 2021","Blockly.Workspace.prototype.getConnectionChecker().canConnect"),!(this.distanceFrom(t)>n)&&e.RenderedConnection.superClass_.isConnectionAllowed.call(this,t)},e.RenderedConnection.prototype.onFailedConnect=function(t){var n=this.getSourceBlock();if(e.Events.recordUndo){var r=e.Events.getGroup();setTimeout(function(){n.isDisposed()||n.getParent()||(e.Events.setGroup(r),this.bumpAwayFrom(t),e.Events.setGroup(!1))}.bind(this),e.BUMP_DELAY)}},e.RenderedConnection.prototype.disconnectInternal_=function(t,n){e.RenderedConnection.superClass_.disconnectInternal_.call(this,t,n),t.rendered&&t.render(),n.rendered&&(n.updateDisabled(),n.render(),n.getSvgRoot().style.display="block")},e.RenderedConnection.prototype.respawnShadow_=function(){e.RenderedConnection.superClass_.respawnShadow_.call(this);var t=this.targetBlock();t&&(t.initSvg(),t.render(!1),(t=this.getSourceBlock()).rendered&&t.render())},e.RenderedConnection.prototype.neighbours=function(t){return this.dbOpposite_.getNeighbours(this,t)},e.RenderedConnection.prototype.connect_=function(t){e.RenderedConnection.superClass_.connect_.call(this,t);var n=this.getSourceBlock();t=t.getSourceBlock();var r=n.rendered,s=t.rendered;r&&n.updateDisabled(),s&&t.updateDisabled(),r&&s&&(this.type==e.connectionTypes.NEXT_STATEMENT||this.type==e.connectionTypes.PREVIOUS_STATEMENT?t.render():n.render()),(n=n.getInputWithBlock(t))&&(n=n.isVisible(),t.getSvgRoot().style.display=n?"block":"none")},e.RenderedConnection.prototype.onCheckChanged_=function(){!this.isConnected()||this.targetConnection&&this.getConnectionChecker().canConnect(this,this.targetConnection,!1)||((this.isSuperior()?this.targetBlock():this.sourceBlock_).unplug(),this.sourceBlock_.bumpNeighbours())},e.BasicCursor=function(){e.BasicCursor.superClass_.constructor.call(this)},e.utils.object.inherits(e.BasicCursor,e.Cursor),e.BasicCursor.registrationName="basicCursor",e.BasicCursor.prototype.next=function(){var t=this.getCurNode();return t?((t=this.getNextNode_(t,this.validNode_))&&this.setCurNode(t),t):null},e.BasicCursor.prototype.in=function(){return this.next()},e.BasicCursor.prototype.prev=function(){var t=this.getCurNode();return t?((t=this.getPreviousNode_(t,this.validNode_))&&this.setCurNode(t),t):null},e.BasicCursor.prototype.out=function(){return this.prev()},e.BasicCursor.prototype.getNextNode_=function(t,n){if(!t)return null;var r=t.in()||t.next();return n(r)?r:r?this.getNextNode_(r,n):n(t=this.findSiblingOrParent_(t.out()))?t:t?this.getNextNode_(t,n):null},e.BasicCursor.prototype.getPreviousNode_=function(t,n){if(!t)return null;var r=t.prev();return n(r=r?this.getRightMostChild_(r):t.out())?r:r?this.getPreviousNode_(r,n):null},e.BasicCursor.prototype.validNode_=function(t){var n=!1;return((t=t&&t.getType())==e.ASTNode.types.OUTPUT||t==e.ASTNode.types.INPUT||t==e.ASTNode.types.FIELD||t==e.ASTNode.types.NEXT||t==e.ASTNode.types.PREVIOUS||t==e.ASTNode.types.WORKSPACE)&&(n=!0),n},e.BasicCursor.prototype.findSiblingOrParent_=function(t){return t?t.next()||this.findSiblingOrParent_(t.out()):null},e.BasicCursor.prototype.getRightMostChild_=function(t){if(!t.in())return t;for(t=t.in();t.next();)t=t.next();return this.getRightMostChild_(t)},e.registry.register(e.registry.Type.CURSOR,e.BasicCursor.registrationName,e.BasicCursor),e.TabNavigateCursor=function(){e.TabNavigateCursor.superClass_.constructor.call(this)},e.utils.object.inherits(e.TabNavigateCursor,e.BasicCursor),e.TabNavigateCursor.prototype.validNode_=function(t){var n=!1,r=t&&t.getType();return t&&(t=t.getLocation(),r==e.ASTNode.types.FIELD&&t&&t.isTabNavigable()&&t.isClickable()&&(n=!0)),n},e.BlockSvg=function(t,n,r){this.svgGroup_=e.utils.dom.createSvgElement(e.utils.Svg.G,{},null),this.svgGroup_.translate_="",this.style=t.getRenderer().getConstants().getBlockStyle(null),this.pathObject=t.getRenderer().makePathObject(this.svgGroup_,this.style),this.renderIsInProgress_=this.rendered=!1,this.workspace=t,this.previousConnection=this.nextConnection=this.outputConnection=null,this.useDragSurface_=e.utils.is3dSupported()&&!!t.getBlockDragSurface();var s=this.pathObject.svgPath;s.tooltip=this,e.Tooltip.bindMouseEvents(s),e.BlockSvg.superClass_.constructor.call(this,t,n,r),this.svgGroup_.dataset?this.svgGroup_.dataset.id=this.id:e.utils.userAgent.IE&&this.svgGroup_.setAttribute("data-id",this.id)},e.utils.object.inherits(e.BlockSvg,e.Block),e.BlockSvg.prototype.height=0,e.BlockSvg.prototype.width=0,e.BlockSvg.prototype.warningTextDb_=null,e.BlockSvg.INLINE=-1,e.BlockSvg.COLLAPSED_WARNING_ID="TEMP_COLLAPSED_WARNING_",e.BlockSvg.prototype.initSvg=function(){if(!this.workspace.rendered)throw TypeError("Workspace is headless.");for(var n,t=0;n=this.inputList[t];t++)n.init();for(n=this.getIcons(),t=0;t<n.length;t++)n[t].createIcon();this.applyColour(),this.pathObject.updateMovable(this.isMovable()),t=this.getSvgRoot(),this.workspace.options.readOnly||this.eventsInit_||!t||e.browserEvents.conditionalBind(t,"mousedown",this,this.onMouseDown_),this.eventsInit_=!0,t.parentNode||this.workspace.getCanvas().appendChild(t)},e.BlockSvg.prototype.getColourSecondary=function(){return this.style.colourSecondary},e.BlockSvg.prototype.getColourTertiary=function(){return this.style.colourTertiary},e.BlockSvg.prototype.getColourShadow=function(){return e.utils.deprecation.warn("BlockSvg.prototype.getColourShadow","January 2020","January 2021","style.colourSecondary"),this.getColourSecondary()},e.BlockSvg.prototype.getColourBorder=function(){return e.utils.deprecation.warn("BlockSvg.prototype.getColourBorder","January 2020","January 2021","style.colourTertiary"),{colourBorder:this.getColourTertiary(),colourLight:null,colourDark:null}},e.BlockSvg.prototype.select=function(){if(this.isShadow()&&this.getParent())this.getParent().select();else if(e.selected!=this){var t=null;if(e.selected){t=e.selected.id,e.Events.disable();try{e.selected.unselect()}finally{e.Events.enable()}}t=new(e.Events.get(e.Events.SELECTED))(t,this.id,this.workspace.id),e.Events.fire(t),e.selected=this,this.addSelect()}},e.BlockSvg.prototype.unselect=function(){if(e.selected==this){var t=new(e.Events.get(e.Events.SELECTED))(this.id,null,this.workspace.id);t.workspaceId=this.workspace.id,e.Events.fire(t),e.selected=null,this.removeSelect()}},e.BlockSvg.prototype.mutator=null,e.BlockSvg.prototype.comment=null,e.BlockSvg.prototype.commentIcon_=null,e.BlockSvg.prototype.warning=null,e.BlockSvg.prototype.getIcons=function(){var t=[];return this.mutator&&t.push(this.mutator),this.commentIcon_&&t.push(this.commentIcon_),this.warning&&t.push(this.warning),t},e.BlockSvg.prototype.setParent=function(t){var n=this.parentBlock_;if(t!=n){e.utils.dom.startTextWidthCache(),e.BlockSvg.superClass_.setParent.call(this,t),e.utils.dom.stopTextWidthCache();var r=this.getSvgRoot();if(!this.workspace.isClearing&&r){var s=this.getRelativeToSurfaceXY();t?(t.getSvgRoot().appendChild(r),t=this.getRelativeToSurfaceXY(),this.moveConnections(t.x-s.x,t.y-s.y)):n&&(this.workspace.getCanvas().appendChild(r),this.translate(s.x,s.y)),this.applyColour()}}},e.BlockSvg.prototype.getRelativeToSurfaceXY=function(){var t=0,n=0,r=this.useDragSurface_?this.workspace.getBlockDragSurface().getGroup():null,s=this.getSvgRoot();if(s)do{var u=e.utils.getRelativeXY(s);t+=u.x,n+=u.y,this.useDragSurface_&&this.workspace.getBlockDragSurface().getCurrentBlock()==s&&(t+=(u=this.workspace.getBlockDragSurface().getSurfaceTranslation()).x,n+=u.y),s=s.parentNode}while(s&&s!=this.workspace.getCanvas()&&s!=r);return new e.utils.Coordinate(t,n)},e.BlockSvg.prototype.moveBy=function(t,n){if(this.parentBlock_)throw Error("Block has parent.");var r=e.Events.isEnabled();if(r)var s=new(e.Events.get(e.Events.BLOCK_MOVE))(this);var u=this.getRelativeToSurfaceXY();this.translate(u.x+t,u.y+n),this.moveConnections(t,n),r&&(s.recordNew(),e.Events.fire(s)),this.workspace.resizeContents()},e.BlockSvg.prototype.translate=function(t,n){this.getSvgRoot().setAttribute("transform","translate("+t+","+n+")")},e.BlockSvg.prototype.moveToDragSurface=function(){if(this.useDragSurface_){var t=this.getRelativeToSurfaceXY();this.clearTransformAttributes_(),this.workspace.getBlockDragSurface().translateSurface(t.x,t.y),(t=this.getSvgRoot())&&this.workspace.getBlockDragSurface().setBlocksAndShow(t)}},e.BlockSvg.prototype.moveTo=function(t){var n=this.getRelativeToSurfaceXY();this.moveBy(t.x-n.x,t.y-n.y)},e.BlockSvg.prototype.moveOffDragSurface=function(t){this.useDragSurface_&&(this.translate(t.x,t.y),this.workspace.getBlockDragSurface().clearAndHide(this.workspace.getCanvas()))},e.BlockSvg.prototype.moveDuringDrag=function(t){this.useDragSurface_?this.workspace.getBlockDragSurface().translateSurface(t.x,t.y):(this.svgGroup_.translate_="translate("+t.x+","+t.y+")",this.svgGroup_.setAttribute("transform",this.svgGroup_.translate_+this.svgGroup_.skew_))},e.BlockSvg.prototype.clearTransformAttributes_=function(){this.getSvgRoot().removeAttribute("transform")},e.BlockSvg.prototype.snapToGrid=function(){if(this.workspace&&!this.workspace.isDragging()&&!this.getParent()&&!this.isInFlyout){var t=this.workspace.getGrid();if(t&&t.shouldSnap()){var n=t.getSpacing(),r=n/2,s=this.getRelativeToSurfaceXY();t=Math.round((s.x-r)/n)*n+r-s.x,n=Math.round((s.y-r)/n)*n+r-s.y,t=Math.round(t),n=Math.round(n),0==t&&0==n||this.moveBy(t,n)}}},e.BlockSvg.prototype.getBoundingRectangle=function(){var t=this.getRelativeToSurfaceXY(),n=this.getHeightWidth();if(this.RTL)var r=t.x-n.width,s=t.x;else r=t.x,s=t.x+n.width;return new e.utils.Rect(t.y,t.y+n.height,r,s)},e.BlockSvg.prototype.markDirty=function(){this.pathObject.constants=this.workspace.getRenderer().getConstants();for(var n,t=0;n=this.inputList[t];t++)n.markDirty()},e.BlockSvg.prototype.setCollapsed=function(t){this.collapsed_!=t&&(e.BlockSvg.superClass_.setCollapsed.call(this,t),t?this.rendered&&this.render():this.updateCollapsed_())},e.BlockSvg.prototype.updateCollapsed_=function(){for(var u,t=this.isCollapsed(),n=e.constants.COLLAPSED_INPUT_NAME,r=e.constants.COLLAPSED_FIELD_NAME,s=0;u=this.inputList[s];s++)u.name!=n&&u.setVisible(!t);if(t){for(u=this.getIcons(),s=0;t=u[s];s++)t.setVisible(!1);s=this.toString(e.COLLAPSE_CHARS),(u=this.getField(r))?u.setValue(s):(u=this.getInput(n)||this.appendDummyInput(n)).appendField(new e.FieldLabel(s),r)}else this.updateDisabled(),this.removeInput(n)},e.BlockSvg.prototype.tab=function(t,n){var r=new e.TabNavigateCursor;r.setCurNode(e.ASTNode.createFieldNode(t)),t=r.getCurNode(),n?r.next():r.prev(),(n=r.getCurNode())&&n!==t&&(n.getLocation().showEditor(),this.workspace.keyboardAccessibilityMode&&this.workspace.getCursor().setCurNode(n))},e.BlockSvg.prototype.onMouseDown_=function(t){var n=this.workspace&&this.workspace.getGesture(t);n&&n.handleBlockStart(t,this)},e.BlockSvg.prototype.showHelp=function(){var t="function"==typeof this.helpUrl?this.helpUrl():this.helpUrl;t&&window.open(t)},e.BlockSvg.prototype.generateContextMenu=function(){if(this.workspace.options.readOnly||!this.contextMenu)return null;var t=e.ContextMenuRegistry.registry.getContextMenuOptions(e.ContextMenuRegistry.ScopeType.BLOCK,{block:this});return this.customContextMenu&&this.customContextMenu(t),t},e.BlockSvg.prototype.showContextMenu=function(t){var n=this.generateContextMenu();n&&n.length&&(e.ContextMenu.show(t,n,this.RTL),e.ContextMenu.currentBlock=this)},e.BlockSvg.prototype.moveConnections=function(t,n){if(this.rendered){for(var r=this.getConnections_(!1),s=0;s<r.length;s++)r[s].moveBy(t,n);for(r=this.getIcons(),s=0;s<r.length;s++)r[s].computeIconLocation();for(s=0;s<this.childBlocks_.length;s++)this.childBlocks_[s].moveConnections(t,n)}},e.BlockSvg.prototype.setDragging=function(t){if(t){var n=this.getSvgRoot();n.translate_="",n.skew_="",e.draggingConnections=e.draggingConnections.concat(this.getConnections_(!0)),e.utils.dom.addClass(this.svgGroup_,"blocklyDragging")}else e.draggingConnections=[],e.utils.dom.removeClass(this.svgGroup_,"blocklyDragging");for(n=0;n<this.childBlocks_.length;n++)this.childBlocks_[n].setDragging(t)},e.BlockSvg.prototype.setMovable=function(t){e.BlockSvg.superClass_.setMovable.call(this,t),this.pathObject.updateMovable(t)},e.BlockSvg.prototype.setEditable=function(t){e.BlockSvg.superClass_.setEditable.call(this,t),t=this.getIcons();for(var n=0;n<t.length;n++)t[n].updateEditable()},e.BlockSvg.prototype.setShadow=function(t){e.BlockSvg.superClass_.setShadow.call(this,t),this.applyColour()},e.BlockSvg.prototype.setInsertionMarker=function(t){this.isInsertionMarker_!=t&&(this.isInsertionMarker_=t)&&(this.setColour(this.workspace.getRenderer().getConstants().INSERTION_MARKER_COLOUR),this.pathObject.updateInsertionMarker(!0))},e.BlockSvg.prototype.getSvgRoot=function(){return this.svgGroup_},e.BlockSvg.prototype.dispose=function(t,n){if(this.workspace){e.Tooltip.dispose(),e.Tooltip.unbindMouseEvents(this.pathObject.svgPath),e.utils.dom.startTextWidthCache();var r=this.workspace;if(e.selected==this&&(this.unselect(),this.workspace.cancelCurrentGesture()),e.ContextMenu.currentBlock==this&&e.ContextMenu.hide(),n&&this.rendered&&(this.unplug(t),e.blockAnimations.disposeUiEffect(this)),this.rendered=!1,this.warningTextDb_){for(var s in this.warningTextDb_)clearTimeout(this.warningTextDb_[s]);this.warningTextDb_=null}for(n=this.getIcons(),s=0;s<n.length;s++)n[s].dispose();e.BlockSvg.superClass_.dispose.call(this,!!t),e.utils.dom.removeNode(this.svgGroup_),r.resizeContents(),this.svgGroup_=null,e.utils.dom.stopTextWidthCache()}},e.BlockSvg.prototype.toCopyData=function(){if(this.isInsertionMarker_)return null;var t=e.Xml.blockToDom(this,!0);e.Xml.deleteNext(t);var n=this.getRelativeToSurfaceXY();return t.setAttribute("x",this.RTL?-n.x:n.x),t.setAttribute("y",n.y),{xml:t,source:this.workspace,typeCounts:e.utils.getBlockTypeCounts(this,!0)}},e.BlockSvg.prototype.applyColour=function(){this.pathObject.applyColour(this);for(var t=this.getIcons(),n=0;n<t.length;n++)t[n].applyColour();for(t=0;n=this.inputList[t];t++)for(var s,r=0;s=n.fieldRow[r];r++)s.applyColour()},e.BlockSvg.prototype.updateDisabled=function(){var t=this.getChildren(!1);if(this.applyColour(),!this.isCollapsed())for(var r,n=0;r=t[n];n++)r.rendered&&r.updateDisabled()},e.BlockSvg.prototype.getCommentIcon=function(){return this.commentIcon_},e.BlockSvg.prototype.setCommentText=function(t){if(!e.Comment)throw Error("Missing require for Blockly.Comment");this.commentModel.text!=t&&(e.BlockSvg.superClass_.setCommentText.call(this,t),!!this.commentIcon_==(t=null!=t)?this.commentIcon_.updateText():(t?this.comment=this.commentIcon_=new e.Comment(this):(this.commentIcon_.dispose(),this.comment=this.commentIcon_=null),this.rendered&&(this.render(),this.bumpNeighbours())))},e.BlockSvg.prototype.setWarningText=function(t,n){if(!e.Warning)throw Error("Missing require for Blockly.Warning");this.warningTextDb_||(this.warningTextDb_=Object.create(null));var r=n||"";if(r)this.warningTextDb_[r]&&(clearTimeout(this.warningTextDb_[r]),delete this.warningTextDb_[r]);else for(var s in this.warningTextDb_)clearTimeout(this.warningTextDb_[s]),delete this.warningTextDb_[s];if(this.workspace.isDragging()){var u=this;this.warningTextDb_[r]=setTimeout(function(){u.workspace&&(delete u.warningTextDb_[r],u.setWarningText(t,r))},100)}else{if(this.isInFlyout&&(t=null),n=!1,"string"==typeof t){s=this.getSurroundParent();for(var y=null;s;)s.isCollapsed()&&(y=s),s=s.getSurroundParent();y&&y.setWarningText(e.Msg.COLLAPSED_WARNINGS_WARNING,e.BlockSvg.COLLAPSED_WARNING_ID),this.warning||(this.warning=new e.Warning(this),n=!0),this.warning.setText(t,r)}else this.warning&&!r?(this.warning.dispose(),n=!0):this.warning&&(n=this.warning.getText(),this.warning.setText("",r),(s=this.warning.getText())||this.warning.dispose(),n=n!=s);n&&this.rendered&&(this.render(),this.bumpNeighbours())}},e.BlockSvg.prototype.setMutator=function(t){this.mutator&&this.mutator!==t&&this.mutator.dispose(),t&&(t.setBlock(this),this.mutator=t,t.createIcon()),this.rendered&&(this.render(),this.bumpNeighbours())},e.BlockSvg.prototype.setEnabled=function(t){this.isEnabled()!=t&&(e.BlockSvg.superClass_.setEnabled.call(this,t),this.rendered&&!this.getInheritedDisabled()&&this.updateDisabled())},e.BlockSvg.prototype.setHighlighted=function(t){this.rendered&&this.pathObject.updateHighlighted(t)},e.BlockSvg.prototype.addSelect=function(){this.pathObject.updateSelected(!0)},e.BlockSvg.prototype.removeSelect=function(){this.pathObject.updateSelected(!1)},e.BlockSvg.prototype.setDeleteStyle=function(t){this.pathObject.updateDraggingDelete(t)},e.BlockSvg.prototype.getColour=function(){return this.style.colourPrimary},e.BlockSvg.prototype.setColour=function(t){e.BlockSvg.superClass_.setColour.call(this,t),t=this.workspace.getRenderer().getConstants().getBlockStyleForColour(this.colour_),this.pathObject.setStyle(t.style),this.style=t.style,this.styleName_=t.name,this.applyColour()},e.BlockSvg.prototype.setStyle=function(t){var n=this.workspace.getRenderer().getConstants().getBlockStyle(t);if(this.styleName_=t,!n)throw Error("Invalid style name: "+t);this.hat=n.hat,this.pathObject.setStyle(n),this.colour_=n.colourPrimary,this.style=n,this.applyColour()},e.BlockSvg.prototype.bringToFront=function(){var t=this;do{var n=t.getSvgRoot(),r=n.parentNode,s=r.childNodes;s[s.length-1]!==n&&r.appendChild(n),t=t.getParent()}while(t)},e.BlockSvg.prototype.setPreviousStatement=function(t,n){e.BlockSvg.superClass_.setPreviousStatement.call(this,t,n),this.rendered&&(this.render(),this.bumpNeighbours())},e.BlockSvg.prototype.setNextStatement=function(t,n){e.BlockSvg.superClass_.setNextStatement.call(this,t,n),this.rendered&&(this.render(),this.bumpNeighbours())},e.BlockSvg.prototype.setOutput=function(t,n){e.BlockSvg.superClass_.setOutput.call(this,t,n),this.rendered&&(this.render(),this.bumpNeighbours())},e.BlockSvg.prototype.setInputsInline=function(t){e.BlockSvg.superClass_.setInputsInline.call(this,t),this.rendered&&(this.render(),this.bumpNeighbours())},e.BlockSvg.prototype.removeInput=function(t,n){return t=e.BlockSvg.superClass_.removeInput.call(this,t,n),this.rendered&&(this.render(),this.bumpNeighbours()),t},e.BlockSvg.prototype.moveNumberedInputBefore=function(t,n){e.BlockSvg.superClass_.moveNumberedInputBefore.call(this,t,n),this.rendered&&(this.render(),this.bumpNeighbours())},e.BlockSvg.prototype.appendInput_=function(t,n){return t=e.BlockSvg.superClass_.appendInput_.call(this,t,n),this.rendered&&(this.render(),this.bumpNeighbours()),t},e.BlockSvg.prototype.setConnectionTracking=function(t){if(this.previousConnection&&this.previousConnection.setTracking(t),this.outputConnection&&this.outputConnection.setTracking(t),this.nextConnection){this.nextConnection.setTracking(t);var n=this.nextConnection.targetBlock();n&&n.setConnectionTracking(t)}if(!this.collapsed_)for(n=0;n<this.inputList.length;n++){var r=this.inputList[n].connection;r&&(r.setTracking(t),(r=r.targetBlock())&&r.setConnectionTracking(t))}},e.BlockSvg.prototype.getConnections_=function(t){var n=[];if((t||this.rendered)&&(this.outputConnection&&n.push(this.outputConnection),this.previousConnection&&n.push(this.previousConnection),this.nextConnection&&n.push(this.nextConnection),t||!this.collapsed_)){t=0;for(var r;r=this.inputList[t];t++)r.connection&&n.push(r.connection)}return n},e.BlockSvg.prototype.lastConnectionInStack=function(t){return e.BlockSvg.superClass_.lastConnectionInStack.call(this,t)},e.BlockSvg.prototype.getMatchingConnection=function(t,n){return e.BlockSvg.superClass_.getMatchingConnection.call(this,t,n)},e.BlockSvg.prototype.makeConnection_=function(t){return new e.RenderedConnection(this,t)},e.BlockSvg.prototype.bumpNeighbours=function(){if(this.workspace&&!this.workspace.isDragging()){var t=this.getRootBlock();if(!t.isInFlyout)for(var s,n=this.getConnections_(!1),r=0;s=n[r];r++){s.isConnected()&&s.isSuperior()&&s.targetBlock().bumpNeighbours();for(var x,u=s.neighbours(e.SNAP_RADIUS),y=0;x=u[y];y++)s.isConnected()&&x.isConnected()||x.getSourceBlock().getRootBlock()!=t&&(s.isSuperior()?x.bumpAwayFrom(s):s.bumpAwayFrom(x))}}},e.BlockSvg.prototype.scheduleSnapAndBump=function(){var t=this,n=e.Events.getGroup();setTimeout(function(){e.Events.setGroup(n),t.snapToGrid(),e.Events.setGroup(!1)},e.BUMP_DELAY/2),setTimeout(function(){e.Events.setGroup(n),t.bumpNeighbours(),e.Events.setGroup(!1)},e.BUMP_DELAY)},e.BlockSvg.prototype.positionNearConnection=function(t,n){t.type!=e.connectionTypes.NEXT_STATEMENT&&t.type!=e.connectionTypes.INPUT_VALUE||this.moveBy(n.x-t.x,n.y-t.y)},e.BlockSvg.prototype.getParent=function(){return e.BlockSvg.superClass_.getParent.call(this)},e.BlockSvg.prototype.getRootBlock=function(){return e.BlockSvg.superClass_.getRootBlock.call(this)},e.BlockSvg.prototype.render=function(t){if(!this.renderIsInProgress_){this.renderIsInProgress_=!0;try{if(this.rendered=!0,e.utils.dom.startTextWidthCache(),this.isCollapsed()&&this.updateCollapsed_(),this.workspace.getRenderer().render(this),this.updateConnectionLocations_(),!1!==t){var n=this.getParent();n?n.render(!0):this.workspace.resizeContents()}e.utils.dom.stopTextWidthCache(),this.updateMarkers_()}finally{this.renderIsInProgress_=!1}}},e.BlockSvg.prototype.updateMarkers_=function(){this.workspace.keyboardAccessibilityMode&&this.pathObject.cursorSvg&&this.workspace.getCursor().draw(),this.workspace.keyboardAccessibilityMode&&this.pathObject.markerSvg&&this.workspace.getMarker(e.MarkerManager.LOCAL_MARKER).draw()},e.BlockSvg.prototype.updateConnectionLocations_=function(){var t=this.getRelativeToSurfaceXY();this.previousConnection&&this.previousConnection.moveToOffset(t),this.outputConnection&&this.outputConnection.moveToOffset(t);for(var n=0;n<this.inputList.length;n++){var r=this.inputList[n].connection;r&&(r.moveToOffset(t),r.isConnected()&&r.tighten())}this.nextConnection&&(this.nextConnection.moveToOffset(t),this.nextConnection.isConnected()&&this.nextConnection.tighten())},e.BlockSvg.prototype.setCursorSvg=function(t){this.pathObject.setCursorSvg(t)},e.BlockSvg.prototype.setMarkerSvg=function(t){this.pathObject.setMarkerSvg(t)},e.BlockSvg.prototype.getHeightWidth=function(){var t=this.height,n=this.width,r=this.getNextBlock();if(r){r=r.getHeightWidth();var s=this.workspace.getRenderer().getConstants().NOTCH_HEIGHT;t+=r.height-s,n=Math.max(n,r.width)}return{height:t,width:n}},e.BlockSvg.prototype.fadeForReplacement=function(t){this.pathObject.updateReplacementFade(t)},e.BlockSvg.prototype.highlightShapeForInput=function(t,n){this.pathObject.updateShapeForInputHighlight(t,n)},e.ConnectionDB=function(t){this.connections_=[],this.connectionChecker_=t},e.ConnectionDB.prototype.addConnection=function(t,n){n=this.calculateIndexForYPos_(n),this.connections_.splice(n,0,t)},e.ConnectionDB.prototype.findIndexOfConnection_=function(t,n){if(!this.connections_.length)return-1;var r=this.calculateIndexForYPos_(n);if(r>=this.connections_.length)return-1;n=t.y;for(var s=r;0<=s&&this.connections_[s].y==n;){if(this.connections_[s]==t)return s;s--}for(s=r;s<this.connections_.length&&this.connections_[s].y==n;){if(this.connections_[s]==t)return s;s++}return-1},e.ConnectionDB.prototype.calculateIndexForYPos_=function(t){if(!this.connections_.length)return 0;for(var n=0,r=this.connections_.length;n<r;){var s=Math.floor((n+r)/2);if(this.connections_[s].y<t)n=s+1;else{if(!(this.connections_[s].y>t)){n=s;break}r=s}}return n},e.ConnectionDB.prototype.removeConnection=function(t,n){if(-1==(t=this.findIndexOfConnection_(t,n)))throw Error("Unable to find connection in connectionDB.");this.connections_.splice(t,1)},e.ConnectionDB.prototype.getNeighbours=function(t,n){function r(at){var rt=u-s[at].x,St=y-s[at].y;return Math.sqrt(rt*rt+St*St)<=n&&Q.push(s[at]),St<n}var s=this.connections_,u=t.x,y=t.y;t=0;for(var x=s.length-2,B=x;t<B;)s[B].y<y?t=B:x=B,B=Math.floor((t+x)/2);var Q=[];if(x=t=B,s.length){for(;0<=t&&r(t);)t--;do{x++}while(x<s.length&&r(x))}return Q},e.ConnectionDB.prototype.isInYRange_=function(t,n,r){return Math.abs(this.connections_[t].y-n)<=r},e.ConnectionDB.prototype.searchForClosest=function(t,n,r){if(!this.connections_.length)return{connection:null,radius:n};var s=t.y,u=t.x;t.x=u+r.x,t.y=s+r.y;var y=this.calculateIndexForYPos_(t.y);r=null;for(var B,x=n,Q=y-1;0<=Q&&this.isInYRange_(Q,t.y,n);)this.connectionChecker_.canConnect(t,B=this.connections_[Q],!0,x)&&(r=B,x=B.distanceFrom(t)),Q--;for(;y<this.connections_.length&&this.isInYRange_(y,t.y,n);)this.connectionChecker_.canConnect(t,B=this.connections_[y],!0,x)&&(r=B,x=B.distanceFrom(t)),y++;return t.x=u,t.y=s,{connection:r,radius:x}},e.ConnectionDB.init=function(t){var n=[];return n[e.connectionTypes.INPUT_VALUE]=new e.ConnectionDB(t),n[e.connectionTypes.OUTPUT_VALUE]=new e.ConnectionDB(t),n[e.connectionTypes.NEXT_STATEMENT]=new e.ConnectionDB(t),n[e.connectionTypes.PREVIOUS_STATEMENT]=new e.ConnectionDB(t),n},e.Events.ThemeChange=function(t,n){e.Events.ThemeChange.superClass_.constructor.call(this,n),this.themeName=t},e.utils.object.inherits(e.Events.ThemeChange,e.Events.UiBase),e.Events.ThemeChange.prototype.type=e.Events.THEME_CHANGE,e.Events.ThemeChange.prototype.toJson=function(){var t=e.Events.ThemeChange.superClass_.toJson.call(this);return t.themeName=this.themeName,t},e.Events.ThemeChange.prototype.fromJson=function(t){e.Events.ThemeChange.superClass_.fromJson.call(this,t),this.themeName=t.themeName},e.registry.register(e.registry.Type.EVENT,e.Events.THEME_CHANGE,e.Events.ThemeChange),e.Events.ViewportChange=function(t,n,r,s,u){e.Events.ViewportChange.superClass_.constructor.call(this,s),this.viewTop=t,this.viewLeft=n,this.scale=r,this.oldScale=u},e.utils.object.inherits(e.Events.ViewportChange,e.Events.UiBase),e.Events.ViewportChange.prototype.type=e.Events.VIEWPORT_CHANGE,e.Events.ViewportChange.prototype.toJson=function(){var t=e.Events.ViewportChange.superClass_.toJson.call(this);return t.viewTop=this.viewTop,t.viewLeft=this.viewLeft,t.scale=this.scale,t.oldScale=this.oldScale,t},e.Events.ViewportChange.prototype.fromJson=function(t){e.Events.ViewportChange.superClass_.fromJson.call(this,t),this.viewTop=t.viewTop,this.viewLeft=t.viewLeft,this.scale=t.scale,this.oldScale=t.oldScale},e.registry.register(e.registry.Type.EVENT,e.Events.VIEWPORT_CHANGE,e.Events.ViewportChange),e.IMetricsManager=function(){},e.MetricsManager=function(t){this.workspace_=t},e.MetricsManager.prototype.getDimensionsPx_=function(t){var n=0,r=0;return t&&(n=t.getWidth(),r=t.getHeight()),new e.utils.Size(n,r)},e.MetricsManager.prototype.getFlyoutMetrics=function(t){return{width:(t=this.getDimensionsPx_(this.workspace_.getFlyout(t))).width,height:t.height,position:this.workspace_.toolboxPosition}},e.MetricsManager.prototype.getToolboxMetrics=function(){var t=this.getDimensionsPx_(this.workspace_.getToolbox());return{width:t.width,height:t.height,position:this.workspace_.toolboxPosition}},e.MetricsManager.prototype.getSvgMetrics=function(){return this.workspace_.getCachedParentSvgSize()},e.MetricsManager.prototype.getAbsoluteMetrics=function(){var t=0,n=this.getToolboxMetrics(),r=this.getFlyoutMetrics(!0),s=!!this.workspace_.getToolbox(),u=!!this.workspace_.getFlyout(!0),y=s?n.position:r.position,x=y==e.utils.toolbox.Position.LEFT;return y=y==e.utils.toolbox.Position.TOP,s&&x?t=n.width:u&&x&&(t=r.width),x=0,s&&y?x=n.height:u&&y&&(x=r.height),{top:x,left:t}},e.MetricsManager.prototype.getViewMetrics=function(t){t=t?this.workspace_.scale:1;var n=this.getSvgMetrics(),r=this.getToolboxMetrics(),s=this.getFlyoutMetrics(!0),u=this.workspace_.getToolbox()?r.position:s.position;return this.workspace_.getToolbox()?u==e.utils.toolbox.Position.TOP||u==e.utils.toolbox.Position.BOTTOM?n.height-=r.height:(u==e.utils.toolbox.Position.LEFT||u==e.utils.toolbox.Position.RIGHT)&&(n.width-=r.width):this.workspace_.getFlyout(!0)&&(u==e.utils.toolbox.Position.TOP||u==e.utils.toolbox.Position.BOTTOM?n.height-=s.height:(u==e.utils.toolbox.Position.LEFT||u==e.utils.toolbox.Position.RIGHT)&&(n.width-=s.width)),{height:n.height/t,width:n.width/t,top:-this.workspace_.scrollY/t,left:-this.workspace_.scrollX/t}},e.MetricsManager.prototype.getContentMetrics=function(t){t=t?1:this.workspace_.scale;var n=this.workspace_.getBlocksBoundingBox();return{height:(n.bottom-n.top)*t,width:(n.right-n.left)*t,top:n.top*t,left:n.left*t}},e.MetricsManager.prototype.hasFixedEdges=function(){return!this.workspace_.isMovableHorizontally()||!this.workspace_.isMovableVertically()},e.MetricsManager.prototype.getComputedFixedEdges_=function(t){if(!this.hasFixedEdges())return{};var n=this.workspace_.isMovableHorizontally(),r=this.workspace_.isMovableVertically();t=t||this.getViewMetrics(!1);var s={};return r||(s.top=t.top,s.bottom=t.top+t.height),n||(s.left=t.left,s.right=t.left+t.width),s},e.MetricsManager.prototype.getPaddedContent_=function(t,n){var r=n.top+n.height,s=n.left+n.width,u=t.width,y=u/2,x=(t=t.height)/2;return{top:Math.min(n.top-x,r-t),bottom:Math.max(r+x,n.top+t),left:Math.min(n.left-y,s-u),right:Math.max(s+y,n.left+u)}},e.MetricsManager.prototype.getScrollMetrics=function(t,n,r){t=t?this.workspace_.scale:1,n=n||this.getViewMetrics(!1);var s=r||this.getContentMetrics();r=this.getComputedFixedEdges_(n),n=this.getPaddedContent_(n,s);var u=void 0!==r.left?r.left:n.left;return{top:(s=void 0!==r.top?r.top:n.top)/t,left:u/t,width:((void 0!==r.right?r.right:n.right)-u)/t,height:((void 0!==r.bottom?r.bottom:n.bottom)-s)/t}},e.MetricsManager.prototype.getUiMetrics=function(){return{viewMetrics:this.getViewMetrics(),absoluteMetrics:this.getAbsoluteMetrics(),toolboxMetrics:this.getToolboxMetrics()}},e.MetricsManager.prototype.getMetrics=function(){var t=this.getToolboxMetrics(),n=this.getFlyoutMetrics(!0),r=this.getSvgMetrics(),s=this.getAbsoluteMetrics(),u=this.getViewMetrics(),y=this.getContentMetrics(),x=this.getScrollMetrics(!1,u,y);return{contentHeight:y.height,contentWidth:y.width,contentTop:y.top,contentLeft:y.left,scrollHeight:x.height,scrollWidth:x.width,scrollTop:x.top,scrollLeft:x.left,viewHeight:u.height,viewWidth:u.width,viewTop:u.top,viewLeft:u.left,absoluteTop:s.top,absoluteLeft:s.left,svgHeight:r.height,svgWidth:r.width,toolboxWidth:t.width,toolboxHeight:t.height,toolboxPosition:t.position,flyoutWidth:n.width,flyoutHeight:n.height}},e.registry.register(e.registry.Type.METRICS_MANAGER,e.registry.DEFAULT,e.MetricsManager),e.FlyoutMetricsManager=function(t,n){this.flyout_=n,e.FlyoutMetricsManager.superClass_.constructor.call(this,t)},e.utils.object.inherits(e.FlyoutMetricsManager,e.MetricsManager),e.FlyoutMetricsManager.prototype.getBoundingBox_=function(){try{var t=this.workspace_.getCanvas().getBBox()}catch(n){t={height:0,y:0,width:0,x:0}}return t},e.FlyoutMetricsManager.prototype.getContentMetrics=function(t){var n=this.getBoundingBox_();return{height:n.height*(t=t?1:this.workspace_.scale),width:n.width*t,top:n.y*t,left:n.x*t}},e.FlyoutMetricsManager.prototype.getScrollMetrics=function(t,n,r){return{height:((n=r||this.getContentMetrics()).height+2*(r=this.flyout_.MARGIN*this.workspace_.scale))/(t=t?this.workspace_.scale:1),width:(n.width+n.left+r)/t,top:0,left:0}},e.ThemeManager=function(t,n){this.workspace_=t,this.theme_=n,this.subscribedWorkspaces_=[],this.componentDB_=Object.create(null)},e.ThemeManager.prototype.getTheme=function(){return this.theme_},e.ThemeManager.prototype.setTheme=function(t){var r,n=this.theme_;for(this.theme_=t,(t=this.workspace_.getInjectionDiv())&&(n&&e.utils.dom.removeClass(t,n.getClassName()),e.utils.dom.addClass(t,this.theme_.getClassName())),n=0;t=this.subscribedWorkspaces_[n];n++)t.refreshTheme();for(n=0,t=Object.keys(this.componentDB_);r=t[n];n++)for(var u,s=0;u=this.componentDB_[r][s];s++){var y=u.element;u=u.propertyName;var x=this.theme_&&this.theme_.getComponentStyle(r);y.style[u]=x||""}e.hideChaff()},e.ThemeManager.prototype.subscribeWorkspace=function(t){this.subscribedWorkspaces_.push(t)},e.ThemeManager.prototype.unsubscribeWorkspace=function(t){if(0>(t=this.subscribedWorkspaces_.indexOf(t)))throw Error("Cannot unsubscribe a workspace that hasn't been subscribed.");this.subscribedWorkspaces_.splice(t,1)},e.ThemeManager.prototype.subscribe=function(t,n,r){this.componentDB_[n]||(this.componentDB_[n]=[]),this.componentDB_[n].push({element:t,propertyName:r}),n=this.theme_&&this.theme_.getComponentStyle(n),t.style[r]=n||""},e.ThemeManager.prototype.unsubscribe=function(t){if(t)for(var s,n=Object.keys(this.componentDB_),r=0;s=n[r];r++){for(var u=this.componentDB_[s],y=u.length-1;0<=y;y--)u[y].element===t&&u.splice(y,1);this.componentDB_[s].length||delete this.componentDB_[s]}},e.ThemeManager.prototype.dispose=function(){this.componentDB_=this.subscribedWorkspaces_=this.theme_=this.owner_=null},e.TouchGesture=function(t,n){e.TouchGesture.superClass_.constructor.call(this,t,n),this.isMultiTouch_=!1,this.cachedPoints_=Object.create(null),this.startDistance_=this.previousScale_=0,this.isPinchZoomEnabled_=this.onStartWrapper_=null},e.utils.object.inherits(e.TouchGesture,e.Gesture),e.TouchGesture.ZOOM_IN_MULTIPLIER=5,e.TouchGesture.ZOOM_OUT_MULTIPLIER=6,e.TouchGesture.prototype.doStart=function(t){this.isPinchZoomEnabled_=this.startWorkspace_.options.zoomOptions&&this.startWorkspace_.options.zoomOptions.pinch,e.TouchGesture.superClass_.doStart.call(this,t),!this.isEnding_&&e.Touch.isTouchEvent(t)&&this.handleTouchStart(t)},e.TouchGesture.prototype.bindMouseEvents=function(t){this.onStartWrapper_=e.browserEvents.conditionalBind(document,"mousedown",null,this.handleStart.bind(this),!0),this.onMoveWrapper_=e.browserEvents.conditionalBind(document,"mousemove",null,this.handleMove.bind(this),!0),this.onUpWrapper_=e.browserEvents.conditionalBind(document,"mouseup",null,this.handleUp.bind(this),!0),t.preventDefault(),t.stopPropagation()},e.TouchGesture.prototype.handleStart=function(t){!this.isDragging()&&e.Touch.isTouchEvent(t)&&(this.handleTouchStart(t),this.isMultiTouch()&&e.longStop_())},e.TouchGesture.prototype.handleMove=function(t){this.isDragging()?e.Touch.shouldHandleEvent(t)&&e.TouchGesture.superClass_.handleMove.call(this,t):this.isMultiTouch()?(e.Touch.isTouchEvent(t)&&this.handleTouchMove(t),e.longStop_()):e.TouchGesture.superClass_.handleMove.call(this,t)},e.TouchGesture.prototype.handleUp=function(t){e.Touch.isTouchEvent(t)&&!this.isDragging()&&this.handleTouchEnd(t),!this.isMultiTouch()||this.isDragging()?e.Touch.shouldHandleEvent(t)&&e.TouchGesture.superClass_.handleUp.call(this,t):(t.preventDefault(),t.stopPropagation(),this.dispose())},e.TouchGesture.prototype.isMultiTouch=function(){return this.isMultiTouch_},e.TouchGesture.prototype.dispose=function(){e.TouchGesture.superClass_.dispose.call(this),this.onStartWrapper_&&e.browserEvents.unbind(this.onStartWrapper_)},e.TouchGesture.prototype.handleTouchStart=function(t){var n=e.Touch.getTouchIdentifierFromEvent(t);this.cachedPoints_[n]=this.getTouchPoint(t),2==(n=Object.keys(this.cachedPoints_)).length&&(this.startDistance_=e.utils.Coordinate.distance(this.cachedPoints_[n[0]],this.cachedPoints_[n[1]]),this.isMultiTouch_=!0,t.preventDefault())},e.TouchGesture.prototype.handleTouchMove=function(t){var n=e.Touch.getTouchIdentifierFromEvent(t);this.cachedPoints_[n]=this.getTouchPoint(t),n=Object.keys(this.cachedPoints_),this.isPinchZoomEnabled_&&2===n.length?this.handlePinch_(t):e.TouchGesture.superClass_.handleMove.call(this,t)},e.TouchGesture.prototype.handlePinch_=function(t){var n=Object.keys(this.cachedPoints_);if(n=e.utils.Coordinate.distance(this.cachedPoints_[n[0]],this.cachedPoints_[n[1]])/this.startDistance_,0<this.previousScale_&&1/0>this.previousScale_){var r=n-this.previousScale_;r=0<r?r*e.TouchGesture.ZOOM_IN_MULTIPLIER:r*e.TouchGesture.ZOOM_OUT_MULTIPLIER;var s=this.startWorkspace_,u=e.utils.mouseToSvg(t,s.getParentSvg(),s.getInverseScreenCTM());s.zoom(u.x,u.y,r)}this.previousScale_=n,t.preventDefault()},e.TouchGesture.prototype.handleTouchEnd=function(t){t=e.Touch.getTouchIdentifierFromEvent(t),this.cachedPoints_[t]&&delete this.cachedPoints_[t],2>Object.keys(this.cachedPoints_).length&&(this.cachedPoints_=Object.create(null),this.previousScale_=0)},e.TouchGesture.prototype.getTouchPoint=function(t){return this.startWorkspace_?new e.utils.Coordinate(t.pageX?t.pageX:t.changedTouches[0].pageX,t.pageY?t.pageY:t.changedTouches[0].pageY):null},e.WorkspaceAudio=function(t){this.parentWorkspace_=t,this.SOUNDS_=Object.create(null)},e.WorkspaceAudio.prototype.lastSound_=null,e.WorkspaceAudio.prototype.dispose=function(){this.SOUNDS_=this.parentWorkspace_=null},e.WorkspaceAudio.prototype.load=function(t,n){if(t.length){try{var r=new e.utils.global.Audio}catch(B){return}for(var s,u=0;u<t.length;u++){var y=t[u],x=y.match(/\.(\w+)$/);if(x&&r.canPlayType("audio/"+x[1])){s=new e.utils.global.Audio(y);break}}s&&s.play&&(this.SOUNDS_[n]=s)}},e.WorkspaceAudio.prototype.preload=function(){for(var t in this.SOUNDS_){var n=this.SOUNDS_[t];n.volume=.01;var r=n.play();if(void 0!==r?r.then(n.pause).catch(function(){}):n.pause(),e.utils.userAgent.IPAD||e.utils.userAgent.IPHONE)break}},e.WorkspaceAudio.prototype.play=function(t,n){var r=this.SOUNDS_[t];r?(t=new Date,null!=this.lastSound_&&t-this.lastSound_<e.SOUND_LIMIT||(this.lastSound_=t,(r=e.utils.userAgent.IPAD||e.utils.userAgent.ANDROID?r:r.cloneNode()).volume=void 0===n?1:n,r.play())):this.parentWorkspace_&&this.parentWorkspace_.getAudioManager().play(t,n)},e.WorkspaceSvg=function(t,n,r){e.WorkspaceSvg.superClass_.constructor.call(this,t),this.metricsManager_=new(e.registry.getClassFromOptions(e.registry.Type.METRICS_MANAGER,t,!0))(this),this.getMetrics=t.getMetrics||this.metricsManager_.getMetrics.bind(this.metricsManager_),this.setMetrics=t.setMetrics||e.WorkspaceSvg.setTopLevelWorkspaceMetrics_,this.componentManager_=new e.ComponentManager,this.connectionDBList=e.ConnectionDB.init(this.connectionChecker),n&&(this.blockDragSurface_=n),r&&(this.workspaceDragSurface_=r),this.useWorkspaceDragSurface_=!!this.workspaceDragSurface_&&e.utils.is3dSupported(),this.highlightedBlocks_=[],this.audioManager_=new e.WorkspaceAudio(t.parentWorkspace),this.grid_=this.options.gridPattern?new e.Grid(this.options.gridPattern,t.gridOptions):null,this.markerManager_=new e.MarkerManager(this),this.toolboxCategoryCallbacks_=Object.create(null),this.flyoutButtonCallbacks_=Object.create(null),e.Variables&&e.Variables.flyoutCategory&&this.registerToolboxCategoryCallback(e.VARIABLE_CATEGORY_NAME,e.Variables.flyoutCategory),e.VariablesDynamic&&e.VariablesDynamic.flyoutCategory&&this.registerToolboxCategoryCallback(e.VARIABLE_DYNAMIC_CATEGORY_NAME,e.VariablesDynamic.flyoutCategory),e.Procedures&&e.Procedures.flyoutCategory&&(this.registerToolboxCategoryCallback(e.PROCEDURE_CATEGORY_NAME,e.Procedures.flyoutCategory),this.addChangeListener(e.Procedures.mutatorOpenListener)),this.themeManager_=this.options.parentWorkspace?this.options.parentWorkspace.getThemeManager():new e.ThemeManager(this,this.options.theme||e.Themes.Classic),this.themeManager_.subscribeWorkspace(this),this.renderer_=e.blockRendering.init(this.options.renderer||"geras",this.getTheme(),this.options.rendererOverrides),this.cachedParentSvg_=null,this.keyboardAccessibilityMode=!1,this.topBoundedElements_=[],this.dragTargetAreas_=[],this.cachedParentSvgSize_=new e.utils.Size(0,0)},e.utils.object.inherits(e.WorkspaceSvg,e.Workspace),e.WorkspaceSvg.prototype.resizeHandlerWrapper_=null,e.WorkspaceSvg.prototype.rendered=!0,e.WorkspaceSvg.prototype.isVisible_=!0,e.WorkspaceSvg.prototype.isFlyout=!1,e.WorkspaceSvg.prototype.isMutator=!1,e.WorkspaceSvg.prototype.resizesEnabled_=!0,e.WorkspaceSvg.prototype.scrollX=0,e.WorkspaceSvg.prototype.scrollY=0,e.WorkspaceSvg.prototype.startScrollX=0,e.WorkspaceSvg.prototype.startScrollY=0,e.WorkspaceSvg.prototype.dragDeltaXY_=null,e.WorkspaceSvg.prototype.scale=1,e.WorkspaceSvg.prototype.oldScale_=1,e.WorkspaceSvg.prototype.oldTop_=0,e.WorkspaceSvg.prototype.oldLeft_=0,e.WorkspaceSvg.prototype.trashcan=null,e.WorkspaceSvg.prototype.scrollbar=null,e.WorkspaceSvg.prototype.flyout_=null,e.WorkspaceSvg.prototype.toolbox_=null,e.WorkspaceSvg.prototype.currentGesture_=null,e.WorkspaceSvg.prototype.blockDragSurface_=null,e.WorkspaceSvg.prototype.workspaceDragSurface_=null,e.WorkspaceSvg.prototype.useWorkspaceDragSurface_=!1,e.WorkspaceSvg.prototype.isDragSurfaceActive_=!1,e.WorkspaceSvg.prototype.injectionDiv_=null,e.WorkspaceSvg.prototype.lastRecordedPageScroll_=null,e.WorkspaceSvg.prototype.targetWorkspace=null,e.WorkspaceSvg.prototype.inverseScreenCTM_=null,e.WorkspaceSvg.prototype.inverseScreenCTMDirty_=!0,e.WorkspaceSvg.prototype.getMarkerManager=function(){return this.markerManager_},e.WorkspaceSvg.prototype.getMetricsManager=function(){return this.metricsManager_},e.WorkspaceSvg.prototype.setMetricsManager=function(t){this.metricsManager_=t,this.getMetrics=this.metricsManager_.getMetrics.bind(this.metricsManager_)},e.WorkspaceSvg.prototype.getComponentManager=function(){return this.componentManager_},e.WorkspaceSvg.prototype.setCursorSvg=function(t){this.markerManager_.setCursorSvg(t)},e.WorkspaceSvg.prototype.setMarkerSvg=function(t){this.markerManager_.setMarkerSvg(t)},e.WorkspaceSvg.prototype.getMarker=function(t){return this.markerManager_?this.markerManager_.getMarker(t):null},e.WorkspaceSvg.prototype.getCursor=function(){return this.markerManager_?this.markerManager_.getCursor():null},e.WorkspaceSvg.prototype.getRenderer=function(){return this.renderer_},e.WorkspaceSvg.prototype.getThemeManager=function(){return this.themeManager_},e.WorkspaceSvg.prototype.getTheme=function(){return this.themeManager_.getTheme()},e.WorkspaceSvg.prototype.setTheme=function(t){t||(t=e.Themes.Classic),this.themeManager_.setTheme(t)},e.WorkspaceSvg.prototype.refreshTheme=function(){this.svgGroup_&&this.renderer_.refreshDom(this.svgGroup_,this.getTheme()),this.updateBlockStyles_(this.getAllBlocks(!1).filter(function(n){return!!n.getStyleName()})),this.refreshToolboxSelection(),this.toolbox_&&this.toolbox_.refreshTheme(),this.isVisible()&&this.setVisible(!0);var t=new(e.Events.get(e.Events.THEME_CHANGE))(this.getTheme().name,this.id);e.Events.fire(t)},e.WorkspaceSvg.prototype.updateBlockStyles_=function(t){for(var r,n=0;r=t[n];n++){var s=r.getStyleName();s&&(r.setStyle(s),r.mutator&&r.mutator.updateBlockStyle())}},e.WorkspaceSvg.prototype.getInverseScreenCTM=function(){if(this.inverseScreenCTMDirty_){var t=this.getParentSvg().getScreenCTM();t&&(this.inverseScreenCTM_=t.inverse(),this.inverseScreenCTMDirty_=!1)}return this.inverseScreenCTM_},e.WorkspaceSvg.prototype.updateInverseScreenCTM=function(){this.inverseScreenCTMDirty_=!0},e.WorkspaceSvg.prototype.isVisible=function(){return this.isVisible_},e.WorkspaceSvg.prototype.getSvgXY=function(t){var n=0,r=0,s=1;(e.utils.dom.containsNode(this.getCanvas(),t)||e.utils.dom.containsNode(this.getBubbleCanvas(),t))&&(s=this.scale);do{var u=e.utils.getRelativeXY(t);(t==this.getCanvas()||t==this.getBubbleCanvas())&&(s=1),n+=u.x*s,r+=u.y*s,t=t.parentNode}while(t&&t!=this.getParentSvg());return new e.utils.Coordinate(n,r)},e.WorkspaceSvg.prototype.getCachedParentSvgSize=function(){var t=this.cachedParentSvgSize_;return new e.utils.Size(t.width,t.height)},e.WorkspaceSvg.prototype.getOriginOffsetInPixels=function(){return e.utils.getInjectionDivXY_(this.getCanvas())},e.WorkspaceSvg.prototype.getInjectionDiv=function(){if(!this.injectionDiv_)for(var t=this.svgGroup_;t;){if(-1!=(" "+(t.getAttribute("class")||"")+" ").indexOf(" injectionDiv ")){this.injectionDiv_=t;break}t=t.parentNode}return this.injectionDiv_},e.WorkspaceSvg.prototype.getBlockCanvas=function(){return this.svgBlockCanvas_},e.WorkspaceSvg.prototype.setResizeHandlerWrapper=function(t){this.resizeHandlerWrapper_=t},e.WorkspaceSvg.prototype.createDom=function(t){return this.svgGroup_=e.utils.dom.createSvgElement(e.utils.Svg.G,{class:"blocklyWorkspace"},null),t&&(this.svgBackground_=e.utils.dom.createSvgElement(e.utils.Svg.RECT,{height:"100%",width:"100%",class:t},this.svgGroup_),"blocklyMainBackground"==t&&this.grid_?this.svgBackground_.style.fill="url(#"+this.grid_.getPatternId()+")":this.themeManager_.subscribe(this.svgBackground_,"workspaceBackgroundColour","fill")),this.svgBlockCanvas_=e.utils.dom.createSvgElement(e.utils.Svg.G,{class:"blocklyBlockCanvas"},this.svgGroup_),this.svgBubbleCanvas_=e.utils.dom.createSvgElement(e.utils.Svg.G,{class:"blocklyBubbleCanvas"},this.svgGroup_),this.isFlyout||(e.browserEvents.conditionalBind(this.svgGroup_,"mousedown",this,this.onMouseDown_,!1,!0),e.browserEvents.conditionalBind(this.svgGroup_,"wheel",this,this.onMouseWheel_)),this.options.hasCategories&&(this.toolbox_=new(e.registry.getClassFromOptions(e.registry.Type.TOOLBOX,this.options,!0))(this)),this.grid_&&this.grid_.update(this.scale),this.recordDragTargets(),(t=e.registry.getClassFromOptions(e.registry.Type.CURSOR,this.options))&&this.markerManager_.setCursor(new t),this.renderer_.createDom(this.svgGroup_,this.getTheme()),this.svgGroup_},e.WorkspaceSvg.prototype.dispose=function(){if(this.rendered=!1,this.currentGesture_&&this.currentGesture_.cancel(),this.svgGroup_&&(e.utils.dom.removeNode(this.svgGroup_),this.svgGroup_=null),this.svgBubbleCanvas_=this.svgBlockCanvas_=null,this.toolbox_&&(this.toolbox_.dispose(),this.toolbox_=null),this.flyout_&&(this.flyout_.dispose(),this.flyout_=null),this.trashcan&&(this.trashcan.dispose(),this.trashcan=null),this.scrollbar&&(this.scrollbar.dispose(),this.scrollbar=null),this.zoomControls_&&(this.zoomControls_.dispose(),this.zoomControls_=null),this.audioManager_&&(this.audioManager_.dispose(),this.audioManager_=null),this.grid_&&(this.grid_.dispose(),this.grid_=null),this.renderer_.dispose(),this.markerManager_&&(this.markerManager_.dispose(),this.markerManager_=null),e.WorkspaceSvg.superClass_.dispose.call(this),this.themeManager_&&(this.themeManager_.unsubscribeWorkspace(this),this.themeManager_.unsubscribe(this.svgBackground_),this.options.parentWorkspace||(this.themeManager_.dispose(),this.themeManager_=null)),this.flyoutButtonCallbacks_=this.toolboxCategoryCallbacks_=this.connectionDBList=null,!this.options.parentWorkspace){var t=this.getParentSvg();t&&t.parentNode&&e.utils.dom.removeNode(t.parentNode)}this.resizeHandlerWrapper_&&(e.browserEvents.unbind(this.resizeHandlerWrapper_),this.resizeHandlerWrapper_=null)},e.WorkspaceSvg.prototype.newBlock=function(t,n){return new e.BlockSvg(this,t,n)},e.WorkspaceSvg.prototype.addTrashcan=function(){if(!e.Trashcan)throw Error("Missing require for Blockly.Trashcan");this.trashcan=new e.Trashcan(this);var t=this.trashcan.createDom();this.svgGroup_.insertBefore(t,this.svgBlockCanvas_)},e.WorkspaceSvg.prototype.addZoomControls=function(){if(!e.ZoomControls)throw Error("Missing require for Blockly.ZoomControls");this.zoomControls_=new e.ZoomControls(this);var t=this.zoomControls_.createDom();this.svgGroup_.appendChild(t)},e.WorkspaceSvg.prototype.addFlyout=function(t){var n=new e.Options({parentWorkspace:this,rtl:this.RTL,oneBasedIndex:this.options.oneBasedIndex,horizontalLayout:this.horizontalLayout,renderer:this.options.renderer,rendererOverrides:this.options.rendererOverrides,move:{scrollbars:!0}});return n.toolboxPosition=this.options.toolboxPosition,this.flyout_=this.horizontalLayout?new(e.registry.getClassFromOptions(e.registry.Type.FLYOUTS_HORIZONTAL_TOOLBOX,this.options,!0))(n):new(e.registry.getClassFromOptions(e.registry.Type.FLYOUTS_VERTICAL_TOOLBOX,this.options,!0))(n),this.flyout_.autoClose=!1,this.flyout_.getWorkspace().setVisible(!0),this.flyout_.createDom(t)},e.WorkspaceSvg.prototype.getFlyout=function(t){return this.flyout_||t?this.flyout_:this.toolbox_?this.toolbox_.getFlyout():null},e.WorkspaceSvg.prototype.getToolbox=function(){return this.toolbox_},e.WorkspaceSvg.prototype.updateScreenCalculations_=function(){this.updateInverseScreenCTM(),this.recordDragTargets()},e.WorkspaceSvg.prototype.resizeContents=function(){this.resizesEnabled_&&this.rendered&&(this.scrollbar&&this.scrollbar.resize(),this.updateInverseScreenCTM())},e.WorkspaceSvg.prototype.resize=function(){this.toolbox_&&this.toolbox_.position(),this.flyout_&&this.flyout_.position();for(var u,t=this.componentManager_.getComponents(e.ComponentManager.Capability.POSITIONABLE,!0),n=this.getMetricsManager().getUiMetrics(),r=[],s=0;u=t[s];s++)u.position(n,r),(u=u.getBoundingRectangle())&&r.push(u);this.scrollbar&&this.scrollbar.resize(),this.updateScreenCalculations_()},e.WorkspaceSvg.prototype.updateScreenCalculationsIfScrolled=function(){var t=e.utils.getDocumentScroll();e.utils.Coordinate.equals(this.lastRecordedPageScroll_,t)||(this.lastRecordedPageScroll_=t,this.updateScreenCalculations_())},e.WorkspaceSvg.prototype.getCanvas=function(){return this.svgBlockCanvas_},e.WorkspaceSvg.prototype.setCachedParentSvgSize=function(t,n){var r=this.getParentSvg();t&&(this.cachedParentSvgSize_.width=t,r.cachedWidth_=t),n&&(this.cachedParentSvgSize_.height=n,r.cachedHeight_=n)},e.WorkspaceSvg.prototype.getBubbleCanvas=function(){return this.svgBubbleCanvas_},e.WorkspaceSvg.prototype.getParentSvg=function(){if(!this.cachedParentSvg_)for(var t=this.svgGroup_;t;){if("svg"==t.tagName){this.cachedParentSvg_=t;break}t=t.parentNode}return this.cachedParentSvg_},e.WorkspaceSvg.prototype.maybeFireViewportChangeEvent=function(){if(e.Events.isEnabled()){var t=this.scale,n=-this.scrollY,r=-this.scrollX;if(!(t==this.oldScale_&&1>Math.abs(n-this.oldTop_)&&1>Math.abs(r-this.oldLeft_))){var s=new(e.Events.get(e.Events.VIEWPORT_CHANGE))(n,r,t,this.id,this.oldScale_);this.oldScale_=t,this.oldTop_=n,this.oldLeft_=r,e.Events.fire(s)}}},e.WorkspaceSvg.prototype.translate=function(t,n){if(this.useWorkspaceDragSurface_&&this.isDragSurfaceActive_)this.workspaceDragSurface_.translateSurface(t,n);else{var r="translate("+t+","+n+") scale("+this.scale+")";this.svgBlockCanvas_.setAttribute("transform",r),this.svgBubbleCanvas_.setAttribute("transform",r)}this.blockDragSurface_&&this.blockDragSurface_.translateAndScaleGroup(t,n,this.scale),this.grid_&&this.grid_.moveTo(t,n),this.maybeFireViewportChangeEvent()},e.WorkspaceSvg.prototype.resetDragSurface=function(){if(this.useWorkspaceDragSurface_){this.isDragSurfaceActive_=!1;var t=this.workspaceDragSurface_.getSurfaceTranslation();this.workspaceDragSurface_.clearAndHide(this.svgGroup_),this.svgBlockCanvas_.setAttribute("transform",t="translate("+t.x+","+t.y+") scale("+this.scale+")"),this.svgBubbleCanvas_.setAttribute("transform",t)}},e.WorkspaceSvg.prototype.setupDragSurface=function(){if(this.useWorkspaceDragSurface_&&!this.isDragSurfaceActive_){this.isDragSurfaceActive_=!0;var t=this.svgBlockCanvas_.previousSibling,n=parseInt(this.getParentSvg().getAttribute("width"),10),r=parseInt(this.getParentSvg().getAttribute("height"),10),s=e.utils.getRelativeXY(this.getCanvas());this.workspaceDragSurface_.setContentsAndShow(this.getCanvas(),this.getBubbleCanvas(),t,n,r,this.scale),this.workspaceDragSurface_.translateSurface(s.x,s.y)}},e.WorkspaceSvg.prototype.getBlockDragSurface=function(){return this.blockDragSurface_},e.WorkspaceSvg.prototype.getWidth=function(){var t=this.getMetrics();return t?t.viewWidth/this.scale:0},e.WorkspaceSvg.prototype.setVisible=function(t){if(this.isVisible_=t,this.svgGroup_)if(this.scrollbar&&this.scrollbar.setContainerVisible(t),this.getFlyout()&&this.getFlyout().setContainerVisible(t),this.getParentSvg().style.display=t?"block":"none",this.toolbox_&&this.toolbox_.setVisible(t),t){for(var n=(t=this.getAllBlocks(!1)).length-1;0<=n;n--)t[n].markDirty();this.render(),this.toolbox_&&this.toolbox_.position()}else e.hideChaff(!0)},e.WorkspaceSvg.prototype.render=function(){for(var t=this.getAllBlocks(!1),n=t.length-1;0<=n;n--)t[n].render(!1);if(this.currentGesture_)for(t=this.currentGesture_.getInsertionMarkers(),n=0;n<t.length;n++)t[n].render(!1);this.markerManager_.updateMarkers()},e.WorkspaceSvg.prototype.highlightBlock=function(t,n){if(void 0===n){for(var s,r=0;s=this.highlightedBlocks_[r];r++)s.setHighlighted(!1);this.highlightedBlocks_.length=0}(s=t?this.getBlockById(t):null)&&((t=void 0===n||n)?-1==this.highlightedBlocks_.indexOf(s)&&this.highlightedBlocks_.push(s):e.utils.arrayRemove(this.highlightedBlocks_,s),s.setHighlighted(t))},e.WorkspaceSvg.prototype.paste=function(t){!this.rendered||!t.tagName||t.getElementsByTagName("block").length>=this.remainingCapacity()||(this.currentGesture_&&this.currentGesture_.cancel(),"comment"==t.tagName.toLowerCase()?this.pasteWorkspaceComment_(t):this.pasteBlock_(t))},e.WorkspaceSvg.prototype.pasteBlock_=function(t){e.Events.disable();try{var n=e.Xml.domToBlock(t,this),r=parseInt(t.getAttribute("x"),10),s=parseInt(t.getAttribute("y"),10);if(!isNaN(r)&&!isNaN(s)){this.RTL&&(r=-r);do{t=!1;for(var x,u=this.getAllBlocks(!1),y=0;x=u[y];y++){var B=x.getRelativeToSurfaceXY();if(1>=Math.abs(r-B.x)&&1>=Math.abs(s-B.y)){t=!0;break}}if(!t){var at,Q=n.getConnections_(!1);for(y=0;at=Q[y];y++)if(at.closest(e.SNAP_RADIUS,new e.utils.Coordinate(r,s)).connection){t=!0;break}}t&&(r=this.RTL?r-e.SNAP_RADIUS:r+e.SNAP_RADIUS,s+=2*e.SNAP_RADIUS)}while(t);n.moveBy(r,s)}}finally{e.Events.enable()}e.Events.isEnabled()&&!n.isShadow()&&e.Events.fire(new(e.Events.get(e.Events.BLOCK_CREATE))(n)),n.select()},e.WorkspaceSvg.prototype.pasteWorkspaceComment_=function(t){e.Events.disable();try{var n=e.WorkspaceCommentSvg.fromXml(t,this),r=parseInt(t.getAttribute("x"),10),s=parseInt(t.getAttribute("y"),10);isNaN(r)||isNaN(s)||(this.RTL&&(r=-r),n.moveBy(r+50,s+50))}finally{e.Events.enable()}e.Events.isEnabled()&&e.WorkspaceComment.fireCreateEvent(n),n.select()},e.WorkspaceSvg.prototype.refreshToolboxSelection=function(){var t=this.isFlyout?this.targetWorkspace:this;t&&!t.currentGesture_&&t.toolbox_&&t.toolbox_.getFlyout()&&t.toolbox_.refreshSelection()},e.WorkspaceSvg.prototype.renameVariableById=function(t,n){e.WorkspaceSvg.superClass_.renameVariableById.call(this,t,n),this.refreshToolboxSelection()},e.WorkspaceSvg.prototype.deleteVariableById=function(t){e.WorkspaceSvg.superClass_.deleteVariableById.call(this,t),this.refreshToolboxSelection()},e.WorkspaceSvg.prototype.createVariable=function(t,n,r){return t=e.WorkspaceSvg.superClass_.createVariable.call(this,t,n,r),this.refreshToolboxSelection(),t},e.WorkspaceSvg.prototype.recordDeleteAreas=function(){e.utils.deprecation.warn("WorkspaceSvg.prototype.recordDeleteAreas","June 2021","June 2022","WorkspaceSvg.prototype.recordDragTargets"),this.recordDragTargets()},e.WorkspaceSvg.prototype.recordDragTargets=function(){var t=this.componentManager_.getComponents(e.ComponentManager.Capability.DRAG_TARGET,!0);this.dragTargetAreas_=[];for(var r,n=0;r=t[n];n++){var s=r.getClientRect();s&&this.dragTargetAreas_.push({component:r,clientRect:s})}},e.WorkspaceSvg.prototype.getDragTarget=function(t){for(var r,n=0;r=this.dragTargetAreas_[n];n++)if(r.clientRect.contains(t.clientX,t.clientY))return r.component;return null},e.WorkspaceSvg.prototype.onMouseDown_=function(t){var n=this.getGesture(t);n&&n.handleWsStart(t,this)},e.WorkspaceSvg.prototype.startDrag=function(t,n){(t=e.utils.mouseToSvg(t,this.getParentSvg(),this.getInverseScreenCTM())).x/=this.scale,t.y/=this.scale,this.dragDeltaXY_=e.utils.Coordinate.difference(n,t)},e.WorkspaceSvg.prototype.moveDrag=function(t){return(t=e.utils.mouseToSvg(t,this.getParentSvg(),this.getInverseScreenCTM())).x/=this.scale,t.y/=this.scale,e.utils.Coordinate.sum(this.dragDeltaXY_,t)},e.WorkspaceSvg.prototype.isDragging=function(){return null!=this.currentGesture_&&this.currentGesture_.isDragging()},e.WorkspaceSvg.prototype.isDraggable=function(){return this.options.moveOptions&&this.options.moveOptions.drag},e.WorkspaceSvg.prototype.isMovable=function(){return this.options.moveOptions&&!!this.options.moveOptions.scrollbars||this.options.moveOptions&&this.options.moveOptions.wheel||this.options.moveOptions&&this.options.moveOptions.drag||this.options.zoomOptions&&this.options.zoomOptions.wheel||this.options.zoomOptions&&this.options.zoomOptions.pinch},e.WorkspaceSvg.prototype.isMovableHorizontally=function(){var t=!!this.scrollbar;return this.isMovable()&&(!t||t&&this.scrollbar.canScrollHorizontally())},e.WorkspaceSvg.prototype.isMovableVertically=function(){var t=!!this.scrollbar;return this.isMovable()&&(!t||t&&this.scrollbar.canScrollVertically())},e.WorkspaceSvg.prototype.onMouseWheel_=function(t){if(e.Gesture.inProgress())t.preventDefault(),t.stopPropagation();else{var n=this.options.zoomOptions&&this.options.zoomOptions.wheel,r=this.options.moveOptions&&this.options.moveOptions.wheel;if(n||r){var s=e.utils.getScrollDeltaPixels(t);!n||!t.ctrlKey&&r?(n=this.scrollX-s.x,r=this.scrollY-s.y,t.shiftKey&&!s.x&&(n=this.scrollX-s.y,r=this.scrollY),this.scroll(n,r)):(s=-s.y/50,n=e.utils.mouseToSvg(t,this.getParentSvg(),this.getInverseScreenCTM()),this.zoom(n.x,n.y,s)),t.preventDefault()}}},e.WorkspaceSvg.prototype.getBlocksBoundingBox=function(){var t=this.getTopBoundedElements();if(!t.length)return new e.utils.Rect(0,0,0,0);for(var n=t[0].getBoundingRectangle(),r=1;r<t.length;r++){var s=t[r];s.isInsertionMarker&&s.isInsertionMarker()||((s=s.getBoundingRectangle()).top<n.top&&(n.top=s.top),s.bottom>n.bottom&&(n.bottom=s.bottom),s.left<n.left&&(n.left=s.left),s.right>n.right&&(n.right=s.right))}return n},e.WorkspaceSvg.prototype.cleanUp=function(){this.setResizesEnabled(!1),e.Events.setGroup(!0);for(var s,t=this.getTopBlocks(!0),n=0,r=0;s=t[r];r++)if(s.isMovable()){var u=s.getRelativeToSurfaceXY();s.moveBy(-u.x,n-u.y),s.snapToGrid(),n=s.getRelativeToSurfaceXY().y+s.getHeightWidth().height+this.renderer_.getConstants().MIN_BLOCK_HEIGHT}e.Events.setGroup(!1),this.setResizesEnabled(!0)},e.WorkspaceSvg.prototype.showContextMenu=function(t){if(!this.options.readOnly&&!this.isFlyout){var n=e.ContextMenuRegistry.registry.getContextMenuOptions(e.ContextMenuRegistry.ScopeType.WORKSPACE,{workspace:this});this.configureContextMenu&&this.configureContextMenu(n,t),e.ContextMenu.show(t,n,this.RTL)}},e.WorkspaceSvg.prototype.updateToolbox=function(t){if(t=e.utils.toolbox.convertToolboxDefToJson(t)){if(!this.options.languageTree)throw Error("Existing toolbox is null.  Can't create new toolbox.");if(e.utils.toolbox.hasCategories(t)){if(!this.toolbox_)throw Error("Existing toolbox has no categories.  Can't change mode.");this.options.languageTree=t,this.toolbox_.render(t)}else{if(!this.flyout_)throw Error("Existing toolbox has categories.  Can't change mode.");this.options.languageTree=t,this.flyout_.show(t)}}else if(this.options.languageTree)throw Error("Can't nullify an existing toolbox.")},e.WorkspaceSvg.prototype.markFocused=function(){this.options.parentWorkspace?this.options.parentWorkspace.markFocused():(e.mainWorkspace=this,this.setBrowserFocus())},e.WorkspaceSvg.prototype.setBrowserFocus=function(){document.activeElement&&document.activeElement.blur&&document.activeElement.blur();try{this.getParentSvg().focus({preventScroll:!0})}catch(t){try{this.getParentSvg().parentNode.setActive()}catch(n){this.getParentSvg().parentNode.focus({preventScroll:!0})}}},e.WorkspaceSvg.prototype.zoom=function(t,n,r){r=Math.pow(this.options.zoomOptions.scaleSpeed,r);var s=this.scale*r;if(this.scale!=s){s>this.options.zoomOptions.maxScale?r=this.options.zoomOptions.maxScale/this.scale:s<this.options.zoomOptions.minScale&&(r=this.options.zoomOptions.minScale/this.scale);var u=this.getCanvas().getCTM(),y=this.getParentSvg().createSVGPoint();y.x=t,y.y=n,y=y.matrixTransform(u.inverse()),u=u.translate((t=y.x)*(1-r),(n=y.y)*(1-r)).scale(r),this.scrollX=u.e,this.scrollY=u.f,this.setScale(s)}},e.WorkspaceSvg.prototype.zoomCenter=function(t){var n=this.getMetrics();if(this.flyout_){var r=n.svgWidth?n.svgWidth/2:0;n=n.svgHeight?n.svgHeight/2:0}else r=n.viewWidth/2+n.absoluteLeft,n=n.viewHeight/2+n.absoluteTop;this.zoom(r,n,t)},e.WorkspaceSvg.prototype.zoomToFit=function(){if(this.isMovable()){var t=this.getMetrics(),n=t.viewWidth;t=t.viewHeight;var r=this.getBlocksBoundingBox(),s=r.right-r.left;if(r=r.bottom-r.top,s){this.flyout_&&(this.horizontalLayout?(t+=this.flyout_.getHeight(),r+=this.flyout_.getHeight()/this.scale):(n+=this.flyout_.getWidth(),s+=this.flyout_.getWidth()/this.scale)),n/=s,t/=r,e.Events.disable();try{this.setScale(Math.min(n,t)),this.scrollCenter()}finally{e.Events.enable()}this.maybeFireViewportChangeEvent()}}else console.warn("Tried to move a non-movable workspace. This could result in blocks becoming inaccessible.")},e.WorkspaceSvg.prototype.beginCanvasTransition=function(){e.utils.dom.addClass(this.svgBlockCanvas_,"blocklyCanvasTransitioning"),e.utils.dom.addClass(this.svgBubbleCanvas_,"blocklyCanvasTransitioning")},e.WorkspaceSvg.prototype.endCanvasTransition=function(){e.utils.dom.removeClass(this.svgBlockCanvas_,"blocklyCanvasTransitioning"),e.utils.dom.removeClass(this.svgBubbleCanvas_,"blocklyCanvasTransitioning")},e.WorkspaceSvg.prototype.scrollCenter=function(){if(this.isMovable()){var t=this.getMetrics(),n=(t.scrollWidth-t.viewWidth)/2,r=(t.scrollHeight-t.viewHeight)/2;this.scroll(n=-n-t.scrollLeft,r=-r-t.scrollTop)}else console.warn("Tried to move a non-movable workspace. This could result in blocks becoming inaccessible.")},e.WorkspaceSvg.prototype.centerOnBlock=function(t){if(this.isMovable()){if(t=t?this.getBlockById(t):null){var n=t.getRelativeToSurfaceXY(),r=t.getHeightWidth(),s=this.scale;t=(n.x+(this.RTL?-1:1)*r.width/2)*s,n=(n.y+r.height/2)*s,r=this.getMetrics(),this.scroll(-(t-r.viewWidth/2),-(n-r.viewHeight/2))}}else console.warn("Tried to move a non-movable workspace. This could result in blocks becoming inaccessible.")},e.WorkspaceSvg.prototype.setScale=function(t){this.options.zoomOptions.maxScale&&t>this.options.zoomOptions.maxScale?t=this.options.zoomOptions.maxScale:this.options.zoomOptions.minScale&&t<this.options.zoomOptions.minScale&&(t=this.options.zoomOptions.minScale),this.scale=t,e.hideChaff(!1),this.flyout_&&(this.flyout_.reflow(),this.recordDragTargets()),this.grid_&&this.grid_.update(this.scale),t=this.getMetrics(),this.scrollX-=t.absoluteLeft,this.scrollY-=t.absoluteTop,t.viewLeft+=t.absoluteLeft,t.viewTop+=t.absoluteTop,this.scroll(this.scrollX,this.scrollY),this.scrollbar&&(this.flyout_?this.scrollbar.resizeView(t):this.scrollbar.resizeContent(t))},e.WorkspaceSvg.prototype.getScale=function(){return this.options.parentWorkspace?this.options.parentWorkspace.getScale():this.scale},e.WorkspaceSvg.prototype.scroll=function(t,n){e.hideChaff(!0);var r=this.getMetrics();t=Math.min(t,-r.scrollLeft),n=Math.min(n,-r.scrollTop);var s=r.scrollTop+Math.max(0,r.scrollHeight-r.viewHeight);t=Math.max(t,-(r.scrollLeft+Math.max(0,r.scrollWidth-r.viewWidth))),n=Math.max(n,-s),this.scrollX=t,this.scrollY=n,this.scrollbar&&this.scrollbar.set(-(t+r.scrollLeft),-(n+r.scrollTop),!1),this.translate(t+=r.absoluteLeft,n+=r.absoluteTop)},e.WorkspaceSvg.setTopLevelWorkspaceMetrics_=function(t){var n=this.getMetrics();"number"==typeof t.x&&(this.scrollX=-(n.scrollLeft+(n.scrollWidth-n.viewWidth)*t.x)),"number"==typeof t.y&&(this.scrollY=-(n.scrollTop+(n.scrollHeight-n.viewHeight)*t.y)),this.translate(this.scrollX+n.absoluteLeft,this.scrollY+n.absoluteTop)},e.WorkspaceSvg.prototype.getBlockById=function(t){return e.WorkspaceSvg.superClass_.getBlockById.call(this,t)},e.WorkspaceSvg.prototype.getTopBlocks=function(t){return e.WorkspaceSvg.superClass_.getTopBlocks.call(this,t)},e.WorkspaceSvg.prototype.addTopBlock=function(t){this.addTopBoundedElement(t),e.WorkspaceSvg.superClass_.addTopBlock.call(this,t)},e.WorkspaceSvg.prototype.removeTopBlock=function(t){this.removeTopBoundedElement(t),e.WorkspaceSvg.superClass_.removeTopBlock.call(this,t)},e.WorkspaceSvg.prototype.addTopComment=function(t){this.addTopBoundedElement(t),e.WorkspaceSvg.superClass_.addTopComment.call(this,t)},e.WorkspaceSvg.prototype.removeTopComment=function(t){this.removeTopBoundedElement(t),e.WorkspaceSvg.superClass_.removeTopComment.call(this,t)},e.WorkspaceSvg.prototype.addTopBoundedElement=function(t){this.topBoundedElements_.push(t)},e.WorkspaceSvg.prototype.removeTopBoundedElement=function(t){e.utils.arrayRemove(this.topBoundedElements_,t)},e.WorkspaceSvg.prototype.getTopBoundedElements=function(){return[].concat(this.topBoundedElements_)},e.WorkspaceSvg.prototype.setResizesEnabled=function(t){var n=!this.resizesEnabled_&&t;this.resizesEnabled_=t,n&&this.resizeContents()},e.WorkspaceSvg.prototype.clear=function(){this.setResizesEnabled(!1),e.WorkspaceSvg.superClass_.clear.call(this),this.topBoundedElements_=[],this.setResizesEnabled(!0)},e.WorkspaceSvg.prototype.registerButtonCallback=function(t,n){if("function"!=typeof n)throw TypeError("Button callbacks must be functions.");this.flyoutButtonCallbacks_[t]=n},e.WorkspaceSvg.prototype.getButtonCallback=function(t){return(t=this.flyoutButtonCallbacks_[t])?t:null},e.WorkspaceSvg.prototype.removeButtonCallback=function(t){this.flyoutButtonCallbacks_[t]=null},e.WorkspaceSvg.prototype.registerToolboxCategoryCallback=function(t,n){if("function"!=typeof n)throw TypeError("Toolbox category callbacks must be functions.");this.toolboxCategoryCallbacks_[t]=n},e.WorkspaceSvg.prototype.getToolboxCategoryCallback=function(t){return this.toolboxCategoryCallbacks_[t]||null},e.WorkspaceSvg.prototype.removeToolboxCategoryCallback=function(t){this.toolboxCategoryCallbacks_[t]=null},e.WorkspaceSvg.prototype.getGesture=function(t){var n="mousedown"==t.type||"touchstart"==t.type||"pointerdown"==t.type,r=this.currentGesture_;return r?n&&r.hasStarted()?(console.warn("Tried to start the same gesture twice."),r.cancel(),null):r:n?this.currentGesture_=new e.TouchGesture(t,this):null},e.WorkspaceSvg.prototype.clearGesture=function(){this.currentGesture_=null},e.WorkspaceSvg.prototype.cancelCurrentGesture=function(){this.currentGesture_&&this.currentGesture_.cancel()},e.WorkspaceSvg.prototype.getAudioManager=function(){return this.audioManager_},e.WorkspaceSvg.prototype.getGrid=function(){return this.grid_},e.inject=function(t,n){if(e.checkBlockColourConstants(),"string"==typeof t&&(t=document.getElementById(t)||document.querySelector(t)),!t||!e.utils.dom.containsNode(document,t))throw Error("Error: container is not in current document.");n=new e.Options(n||{});var r=document.createElement("div");r.className="injectionDiv",r.tabIndex=0,e.utils.aria.setState(r,e.utils.aria.State.LABEL,e.Msg.WORKSPACE_ARIA_LABEL),t.appendChild(r),t=e.createDom_(r,n);var s=new e.BlockDragSurfaceSvg(r),u=new e.WorkspaceDragSurfaceSvg(r),y=e.createMainWorkspace_(t,n,s,u);return e.init_(y),e.mainWorkspace=y,e.svgResize(y),r.addEventListener("focusin",function(){e.mainWorkspace=y}),y},e.createDom_=function(t,n){t.setAttribute("dir","LTR"),e.Css.inject(n.hasCss,n.pathToMedia),t=e.utils.dom.createSvgElement(e.utils.Svg.SVG,{xmlns:e.utils.dom.SVG_NS,"xmlns:html":e.utils.dom.HTML_NS,"xmlns:xlink":e.utils.dom.XLINK_NS,version:"1.1",class:"blocklySvg",tabindex:"0"},t);var r=e.utils.dom.createSvgElement(e.utils.Svg.DEFS,{},t),s=String(Math.random()).substring(2);return n.gridPattern=e.Grid.createDom(s,n.gridOptions,r),t},e.createMainWorkspace_=function(t,n,r,s){return n.parentWorkspace=null,(n=new e.WorkspaceSvg(n,r,s)).scale=(r=n.options).zoomOptions.startScale,t.appendChild(n.createDom("blocklyMainBackground")),e.utils.dom.addClass(n.getInjectionDiv(),n.getRenderer().getClassName()),e.utils.dom.addClass(n.getInjectionDiv(),n.getTheme().getClassName()),!r.hasCategories&&r.languageTree&&(s=n.addFlyout(e.utils.Svg.SVG),e.utils.dom.insertAfter(s,t)),r.hasTrashcan&&n.addTrashcan(),r.zoomOptions&&r.zoomOptions.controls&&n.addZoomControls(),n.getThemeManager().subscribe(t,"workspaceBackgroundColour","background-color"),n.translate(0,0),n.addChangeListener(e.bumpIntoBoundsHandler_(n)),e.svgResize(n),e.WidgetDiv.createDom(),e.DropDownDiv.createDom(),e.Tooltip.createDom(),n},e.extractObjectFromEvent_=function(t,n){var r=null;switch(n.type){case e.Events.BLOCK_CREATE:case e.Events.BLOCK_MOVE:(r=t.getBlockById(n.blockId))&&(r=r.getRootBlock());break;case e.Events.COMMENT_CREATE:case e.Events.COMMENT_MOVE:r=t.getCommentById(n.commentId)}return r},e.bumpTopObjectsIntoBounds_=function(t){var n=t.getMetricsManager();if(n.hasFixedEdges()&&!t.isDragging()){n=n.getScrollMetrics(!0);for(var u,r=t.getTopBoundedElements(),s=0;u=r[s];s++)e.bumpObjectIntoBounds_(t,n,u)}},e.bumpIntoBoundsHandler_=function(t){return function(n){var r=t.getMetricsManager();if(r.hasFixedEdges()&&!t.isDragging())if(-1!==e.Events.BUMP_EVENTS.indexOf(n.type)){r=r.getScrollMetrics(!0);var s=e.extractObjectFromEvent_(t,n);if(s){var u=e.Events.getGroup();e.Events.setGroup(n.group),e.bumpObjectIntoBounds_(t,r,s)&&!n.group&&console.warn("Moved object in bounds but there was no event group. This may break undo."),null!==u&&e.Events.setGroup(u)}}else n.type===e.Events.VIEWPORT_CHANGE&&n.scale>n.oldScale&&e.bumpTopObjectsIntoBounds_(t)}},e.bumpObjectIntoBounds_=function(t,n,r){var s=r.getBoundingRectangle(),u=s.right-s.left,y=e.utils.math.clamp(n.top,s.top,n.top+n.height-(s.bottom-s.top))-s.top,x=n.left;return n=n.left+n.width-u,t.RTL?x=Math.min(n,x):n=Math.max(x,n),!(!(t=e.utils.math.clamp(x,s.left,n)-s.left)&&!y||(r.moveBy(t,y),0))},e.init_=function(t){var n=t.options,r=t.getParentSvg();if(e.browserEvents.conditionalBind(r.parentNode,"contextmenu",null,function(u){e.utils.isTargetInput(u)||u.preventDefault()}),r=e.browserEvents.conditionalBind(window,"resize",null,function(){e.hideChaff(!0),e.svgResize(t),e.bumpTopObjectsIntoBounds_(t)}),t.setResizeHandlerWrapper(r),e.inject.bindDocumentEvents_(),n.languageTree){r=t.getToolbox();var s=t.getFlyout(!0);r?r.init():s&&(s.init(t),s.show(n.languageTree),"function"==typeof s.scrollToStart&&s.scrollToStart())}n.hasTrashcan&&t.trashcan.init(),n.zoomOptions&&n.zoomOptions.controls&&t.zoomControls_.init(),n.moveOptions&&n.moveOptions.scrollbars?(t.scrollbar=new e.ScrollbarPair(t,!0===n.moveOptions.scrollbars||!!n.moveOptions.scrollbars.horizontal,!0===n.moveOptions.scrollbars||!!n.moveOptions.scrollbars.vertical,"blocklyMainWorkspaceScrollbar"),t.scrollbar.resize()):t.setMetrics({x:.5,y:.5}),n.hasSounds&&e.inject.loadSounds_(n.pathToMedia,t)},e.inject.bindDocumentEvents_=function(){e.documentEventsBound_||(e.browserEvents.conditionalBind(document,"scroll",null,function(){for(var r,t=e.Workspace.getAll(),n=0;r=t[n];n++)r.updateInverseScreenCTM&&r.updateInverseScreenCTM()}),e.browserEvents.conditionalBind(document,"keydown",null,e.onKeyDown),e.browserEvents.bind(document,"touchend",null,e.longStop_),e.browserEvents.bind(document,"touchcancel",null,e.longStop_),e.utils.userAgent.IPAD&&e.browserEvents.conditionalBind(window,"orientationchange",document,function(){e.svgResize(e.getMainWorkspace())})),e.documentEventsBound_=!0},e.inject.loadSounds_=function(t,n){var r=n.getAudioManager();r.load([t+"click.mp3",t+"click.wav",t+"click.ogg"],"click"),r.load([t+"disconnect.wav",t+"disconnect.mp3",t+"disconnect.ogg"],"disconnect"),r.load([t+"delete.mp3",t+"delete.ogg",t+"delete.wav"],"delete");var s=[];t=function(){for(;s.length;)e.browserEvents.unbind(s.pop());r.preload()},s.push(e.browserEvents.conditionalBind(document,"mousemove",null,t,!0)),s.push(e.browserEvents.conditionalBind(document,"touchstart",null,t,!0))},e.Names=function(t,n){if(this.variablePrefix_=n||"",this.reservedDict_=Object.create(null),t)for(t=t.split(","),n=0;n<t.length;n++)this.reservedDict_[t[n]]=!0;this.reset()},e.Names.DEVELOPER_VARIABLE_TYPE="DEVELOPER_VARIABLE",e.Names.prototype.reset=function(){this.db_=Object.create(null),this.dbReverse_=Object.create(null),this.variableMap_=null},e.Names.prototype.setVariableMap=function(t){this.variableMap_=t},e.Names.prototype.getNameForUserVariable_=function(t){return this.variableMap_?(t=this.variableMap_.getVariableById(t))?t.name:null:(console.warn("Deprecated call to Blockly.Names.prototype.getName without defining a variable map. To fix, add the following code in your generator's init() function:\nBlockly.YourGeneratorName.nameDB_.setVariableMap(workspace.getVariableMap());"),null)},e.Names.prototype.populateVariables=function(t){t=e.Variables.allUsedVarModels(t);for(var n=0;n<t.length;n++)this.getName(t[n].getId(),e.VARIABLE_CATEGORY_NAME)},e.Names.prototype.populateProcedures=function(t){t=(t=e.Procedures.allProcedures(t))[0].concat(t[1]);for(var n=0;n<t.length;n++)this.getName(t[n][0],e.PROCEDURE_CATEGORY_NAME)},e.Names.prototype.getName=function(t,n){var r=t;n==e.VARIABLE_CATEGORY_NAME&&(t=this.getNameForUserVariable_(t))&&(r=t),t=r.toLowerCase();var s=n==e.VARIABLE_CATEGORY_NAME||n==e.Names.DEVELOPER_VARIABLE_TYPE?this.variablePrefix_:"";n in this.db_||(this.db_[n]=Object.create(null));var u=this.db_[n];return t in u?s+u[t]:(n=this.getDistinctName(r,n),u[t]=n.substr(s.length),n)},e.Names.prototype.getUserNames=function(t){return Object.keys(this.db_[t]||{})},e.Names.prototype.getDistinctName=function(t,n){t=this.safeName_(t);for(var r="";this.dbReverse_[t+r]||t+r in this.reservedDict_;)r=r?r+1:2;return this.dbReverse_[t+=r]=!0,(n==e.VARIABLE_CATEGORY_NAME||n==e.Names.DEVELOPER_VARIABLE_TYPE?this.variablePrefix_:"")+t},e.Names.prototype.safeName_=function(t){return t?(t=encodeURI(t.replace(/ /g,"_")).replace(/[^\w]/g,"_"),-1!="0123456789".indexOf(t[0])&&(t="my_"+t)):t=e.Msg.UNNAMED_KEY||"unnamed",t},e.Names.equals=function(t,n){return t.toLowerCase()==n.toLowerCase()},e.Procedures={},e.Procedures.NAME_TYPE=e.PROCEDURE_CATEGORY_NAME,e.Procedures.DEFAULT_ARG="x",e.Procedures.allProcedures=function(t){var n=t.getBlocksByType("procedures_defnoreturn",!1).map(function(r){return r.getProcedureDef()});return t=t.getBlocksByType("procedures_defreturn",!1).map(function(r){return r.getProcedureDef()}),n.sort(e.Procedures.procTupleComparator_),t.sort(e.Procedures.procTupleComparator_),[n,t]},e.Procedures.procTupleComparator_=function(t,n){return t[0].localeCompare(n[0],void 0,{sensitivity:"base"})},e.Procedures.findLegalName=function(t,n){if(n.isInFlyout)return t;for(t=t||e.Msg.UNNAMED_KEY||"unnamed";!e.Procedures.isLegalName_(t,n.workspace,n);){var r=t.match(/^(.*?)(\d+)$/);t=r?r[1]+(parseInt(r[2],10)+1):t+"2"}return t},e.Procedures.isLegalName_=function(t,n,r){return!e.Procedures.isNameUsed(t,n,r)},e.Procedures.isNameUsed=function(t,n,r){n=n.getAllBlocks(!1);for(var s=0;s<n.length;s++)if(n[s]!=r&&n[s].getProcedureDef){var u=n[s].getProcedureDef();if(e.Names.equals(u[0],t))return!0}return!1},e.Procedures.rename=function(t){t=t.trim();var n=e.Procedures.findLegalName(t,this.getSourceBlock()),r=this.getValue();if(r!=t&&r!=n){t=this.getSourceBlock().workspace.getAllBlocks(!1);for(var s=0;s<t.length;s++)t[s].renameProcedure&&t[s].renameProcedure(r,n)}return n},e.Procedures.flyoutCategory=function(t){function n(y,x){for(var B=0;B<y.length;B++){var Q=y[B][0],at=y[B][1],rt=e.utils.xml.createElement("block");rt.setAttribute("type",x),rt.setAttribute("gap",16);var St=e.utils.xml.createElement("mutation");for(St.setAttribute("name",Q),rt.appendChild(St),Q=0;Q<at.length;Q++){var Ht=e.utils.xml.createElement("arg");Ht.setAttribute("name",at[Q]),St.appendChild(Ht)}r.push(rt)}}var r=[];if(e.Blocks.procedures_defnoreturn){var s=e.utils.xml.createElement("block");s.setAttribute("type","procedures_defnoreturn"),s.setAttribute("gap",16);var u=e.utils.xml.createElement("field");u.setAttribute("name","NAME"),u.appendChild(e.utils.xml.createTextNode(e.Msg.PROCEDURES_DEFNORETURN_PROCEDURE)),s.appendChild(u),r.push(s)}return e.Blocks.procedures_defreturn&&((s=e.utils.xml.createElement("block")).setAttribute("type","procedures_defreturn"),s.setAttribute("gap",16),(u=e.utils.xml.createElement("field")).setAttribute("name","NAME"),u.appendChild(e.utils.xml.createTextNode(e.Msg.PROCEDURES_DEFRETURN_PROCEDURE)),s.appendChild(u),r.push(s)),e.Blocks.procedures_ifreturn&&((s=e.utils.xml.createElement("block")).setAttribute("type","procedures_ifreturn"),s.setAttribute("gap",16),r.push(s)),r.length&&r[r.length-1].setAttribute("gap",24),n((t=e.Procedures.allProcedures(t))[0],"procedures_callnoreturn"),n(t[1],"procedures_callreturn"),r},e.Procedures.updateMutatorFlyout_=function(t){for(var u,n=[],r=t.getBlocksByType("procedures_mutatorarg",!1),s=0;u=r[s];s++)n.push(u.getFieldValue("NAME"));r=e.utils.xml.createElement("xml"),(s=e.utils.xml.createElement("block")).setAttribute("type","procedures_mutatorarg"),(u=e.utils.xml.createElement("field")).setAttribute("name","NAME"),n=e.Variables.generateUniqueNameFromOptions(e.Procedures.DEFAULT_ARG,n),n=e.utils.xml.createTextNode(n),u.appendChild(n),s.appendChild(u),r.appendChild(s),t.updateToolbox(r)},e.Procedures.mutatorOpenListener=function(t){if(t.type==e.Events.BUBBLE_OPEN&&"mutator"===t.bubbleType&&t.isOpen){var n=(t=e.Workspace.getById(t.workspaceId).getBlockById(t.blockId)).type;("procedures_defnoreturn"==n||"procedures_defreturn"==n)&&(t=t.mutator.getWorkspace(),e.Procedures.updateMutatorFlyout_(t),t.addChangeListener(e.Procedures.mutatorChangeListener_))}},e.Procedures.mutatorChangeListener_=function(t){(t.type==e.Events.BLOCK_CREATE||t.type==e.Events.BLOCK_DELETE||t.type==e.Events.BLOCK_CHANGE)&&(t=e.Workspace.getById(t.workspaceId),e.Procedures.updateMutatorFlyout_(t))},e.Procedures.getCallers=function(t,n){var r=[];n=n.getAllBlocks(!1);for(var s=0;s<n.length;s++)if(n[s].getProcedureCall){var u=n[s].getProcedureCall();u&&e.Names.equals(u,t)&&r.push(n[s])}return r},e.Procedures.mutateCallers=function(t){var u,n=e.Events.recordUndo,r=t.getProcedureDef()[0],s=t.mutationToDom(!0);for(t=e.Procedures.getCallers(r,t.workspace),r=0;u=t[r];r++){var y=u.mutationToDom();y=y&&e.Xml.domToText(y),u.domToMutation(s);var x=u.mutationToDom();y!=(x=x&&e.Xml.domToText(x))&&(e.Events.recordUndo=!1,e.Events.fire(new(e.Events.get(e.Events.BLOCK_CHANGE))(u,"mutation",null,y,x)),e.Events.recordUndo=n)}},e.Procedures.getDefinition=function(t,n){n=n.getAllBlocks(!1);for(var r=0;r<n.length;r++)if(n[r].getProcedureDef){var s=n[r].getProcedureDef();if(s&&e.Names.equals(s[0],t))return n[r]}return null},e.ShortcutRegistry=function(){e.ShortcutRegistry.registry=this,this.registry_=Object.create(null),this.keyMap_=Object.create(null)},e.ShortcutRegistry.modifierKeys={Shift:e.utils.KeyCodes.SHIFT,Control:e.utils.KeyCodes.CTRL,Alt:e.utils.KeyCodes.ALT,Meta:e.utils.KeyCodes.META},e.ShortcutRegistry.prototype.register=function(t,n){if(this.registry_[t.name]&&!n)throw Error('Shortcut with name "'+t.name+'" already exists.');this.registry_[t.name]=t},e.ShortcutRegistry.prototype.unregister=function(t){return this.registry_[t]?(this.removeAllKeyMappings(t),delete this.registry_[t],!0):(console.warn('Keyboard shortcut with name "'+t+'" not found.'),!1)},e.ShortcutRegistry.prototype.addKeyMapping=function(t,n,r){t=String(t);var s=this.keyMap_[t];if(s&&!r)throw Error('Shortcut with name "'+n+'" collides with shortcuts '+s.toString());s&&r?s.unshift(n):this.keyMap_[t]=[n]},e.ShortcutRegistry.prototype.removeKeyMapping=function(t,n,r){var s=this.keyMap_[t];if(!s&&!r)return console.warn('No keyboard shortcut with name "'+n+'" registered with key code "'+t+'"'),!1;var u=s.indexOf(n);return-1<u?(s.splice(u,1),0==s.length&&delete this.keyMap_[t],!0):(r||console.warn('No keyboard shortcut with name "'+n+'" registered with key code "'+t+'"'),!1)},e.ShortcutRegistry.prototype.removeAllKeyMappings=function(t){for(var n in this.keyMap_)this.removeKeyMapping(n,t,!0)},e.ShortcutRegistry.prototype.setKeyMap=function(t){this.keyMap_=t},e.ShortcutRegistry.prototype.getKeyMap=function(){return e.utils.object.deepMerge(Object.create(null),this.keyMap_)},e.ShortcutRegistry.prototype.getRegistry=function(){return e.utils.object.deepMerge(Object.create(null),this.registry_)},e.ShortcutRegistry.prototype.onKeyDown=function(t,n){var r=this.serializeKeyEvent_(n);if(!(r=this.getShortcutNamesByKeyCode(r)))return!1;for(var u,s=0;u=r[s];s++)if((!(u=this.registry_[u]).preconditionFn||u.preconditionFn(t))&&u.callback&&u.callback(t,n,u))return!0;return!1},e.ShortcutRegistry.prototype.getShortcutNamesByKeyCode=function(t){return this.keyMap_[t]||[]},e.ShortcutRegistry.prototype.getKeyCodesByShortcutName=function(t){var r,n=[];for(r in this.keyMap_)-1<this.keyMap_[r].indexOf(t)&&n.push(r);return n},e.ShortcutRegistry.prototype.serializeKeyEvent_=function(t){var r,n="";for(r in e.ShortcutRegistry.modifierKeys)t.getModifierState(r)&&(""!=n&&(n+="+"),n+=r);return""!=n&&t.keyCode?n=n+"+"+t.keyCode:t.keyCode&&(n=t.keyCode.toString()),n},e.ShortcutRegistry.prototype.checkModifiers_=function(t){for(var s,n=e.utils.object.values(e.ShortcutRegistry.modifierKeys),r=0;s=t[r];r++)if(0>n.indexOf(s))throw Error(s+" is not a valid modifier key.")},e.ShortcutRegistry.prototype.createSerializedKey=function(t,n){var r="";if(n)for(var s in this.checkModifiers_(n),e.ShortcutRegistry.modifierKeys)-1<n.indexOf(e.ShortcutRegistry.modifierKeys[s])&&(""!=r&&(r+="+"),r+=s);return""!=r&&t?r=r+"+"+t:t&&(r=t.toString()),r},new e.ShortcutRegistry,e.VariableModel=function(t,n,r,s){this.workspace=t,this.name=n,this.type=r||"",this.id_=s||e.utils.genUid(),e.Events.fire(new(e.Events.get(e.Events.VAR_CREATE))(this))},e.VariableModel.prototype.getId=function(){return this.id_},e.VariableModel.compareByName=function(t,n){return t.name.localeCompare(n.name,void 0,{sensitivity:"base"})},e.Variables={},e.Variables.NAME_TYPE=e.VARIABLE_CATEGORY_NAME,e.Variables.allUsedVarModels=function(t){var n=t.getAllBlocks(!1);t=Object.create(null);for(var r=0;r<n.length;r++){var s=n[r].getVarModels();if(s)for(var u=0;u<s.length;u++){var y=s[u],x=y.getId();x&&(t[x]=y)}}for(x in n=[],t)n.push(t[x]);return n},e.Variables.ALL_DEVELOPER_VARS_WARNINGS_BY_BLOCK_TYPE_={},e.Variables.allDeveloperVariables=function(t){t=t.getAllBlocks(!1);for(var s,n=Object.create(null),r=0;s=t[r];r++){var u=s.getDeveloperVariables;if(!u&&s.getDeveloperVars&&(u=s.getDeveloperVars,e.Variables.ALL_DEVELOPER_VARS_WARNINGS_BY_BLOCK_TYPE_[s.type]||(console.warn("Function getDeveloperVars() deprecated. Use getDeveloperVariables() (block type '"+s.type+"')"),e.Variables.ALL_DEVELOPER_VARS_WARNINGS_BY_BLOCK_TYPE_[s.type]=!0)),u)for(s=u(),u=0;u<s.length;u++)n[s[u]]=!0}return Object.keys(n)},e.Variables.flyoutCategory=function(t){var n=[],r=document.createElement("button");return r.setAttribute("text","%{BKY_NEW_VARIABLE}"),r.setAttribute("callbackKey","CREATE_VARIABLE"),t.registerButtonCallback("CREATE_VARIABLE",function(s){e.Variables.createVariableButtonHandler(s.getTargetWorkspace())}),n.push(r),t=e.Variables.flyoutCategoryBlocks(t),n.concat(t)},e.Variables.flyoutCategoryBlocks=function(t){var n=[];if(0<(t=t.getVariablesOfType("")).length){var r=t[t.length-1];if(e.Blocks.variables_set){var s=e.utils.xml.createElement("block");s.setAttribute("type","variables_set"),s.setAttribute("gap",e.Blocks.math_change?8:24),s.appendChild(e.Variables.generateVariableFieldDom(r)),n.push(s)}if(e.Blocks.math_change&&((s=e.utils.xml.createElement("block")).setAttribute("type","math_change"),s.setAttribute("gap",e.Blocks.variables_get?20:8),s.appendChild(e.Variables.generateVariableFieldDom(r)),r=e.Xml.textToDom('<value name="DELTA"><shadow type="math_number"><field name="NUM">1</field></shadow></value>'),s.appendChild(r),n.push(s)),e.Blocks.variables_get){t.sort(e.VariableModel.compareByName),r=0;for(var u;u=t[r];r++)(s=e.utils.xml.createElement("block")).setAttribute("type","variables_get"),s.setAttribute("gap",8),s.appendChild(e.Variables.generateVariableFieldDom(u)),n.push(s)}}return n},e.Variables.VAR_LETTER_OPTIONS="ijkmnopqrstuvwxyzabcdefgh",e.Variables.generateUniqueName=function(t){return e.Variables.generateUniqueNameFromOptions(e.Variables.VAR_LETTER_OPTIONS.charAt(0),t.getAllVariableNames())},e.Variables.generateUniqueNameFromOptions=function(t,n){if(!n.length)return t;for(var r=e.Variables.VAR_LETTER_OPTIONS,s="",u=r.indexOf(t);;){for(var y=!1,x=0;x<n.length;x++)if(n[x].toLowerCase()==t){y=!0;break}if(!y)return t;++u==r.length&&(u=0,s=Number(s)+1),t=r.charAt(u)+s}},e.Variables.createVariableButtonHandler=function(t,n,r){var s=r||"",u=function(y){e.Variables.promptName(e.Msg.NEW_VARIABLE_TITLE,y,function(x){if(x){var B=e.Variables.nameUsedWithAnyType(x,t);if(B){if(B.type==s)var Q=e.Msg.VARIABLE_ALREADY_EXISTS.replace("%1",B.name);else Q=(Q=e.Msg.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE).replace("%1",B.name).replace("%2",B.type);e.alert(Q,function(){u(x)})}else t.createVariable(x,s),n&&n(x)}else n&&n(null)})};u("")},e.Variables.createVariable=e.Variables.createVariableButtonHandler,e.Variables.renameVariable=function(t,n,r){var s=function(u){var y=e.Msg.RENAME_VARIABLE_TITLE.replace("%1",n.name);e.Variables.promptName(y,u,function(x){if(x){var B=e.Variables.nameUsedWithOtherType_(x,n.type,t);B?(B=e.Msg.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE.replace("%1",B.name).replace("%2",B.type),e.alert(B,function(){s(x)})):(t.renameVariableById(n.getId(),x),r&&r(x))}else r&&r(null)})};s("")},e.Variables.promptName=function(t,n,r){e.prompt(t,n,function(s){s&&((s=s.replace(/[\s\xa0]+/g," ").trim())==e.Msg.RENAME_VARIABLE||s==e.Msg.NEW_VARIABLE)&&(s=null),r(s)})},e.Variables.nameUsedWithOtherType_=function(t,n,r){r=r.getVariableMap().getAllVariables(),t=t.toLowerCase();for(var u,s=0;u=r[s];s++)if(u.name.toLowerCase()==t&&u.type!=n)return u;return null},e.Variables.nameUsedWithAnyType=function(t,n){n=n.getVariableMap().getAllVariables(),t=t.toLowerCase();for(var s,r=0;s=n[r];r++)if(s.name.toLowerCase()==t)return s;return null},e.Variables.generateVariableFieldDom=function(t){var n=e.utils.xml.createElement("field");return n.setAttribute("name","VAR"),n.setAttribute("id",t.getId()),n.setAttribute("variabletype",t.type),t=e.utils.xml.createTextNode(t.name),n.appendChild(t),n},e.Variables.getOrCreateVariablePackage=function(t,n,r,s){var u=e.Variables.getVariable(t,n,r,s);return u||(u=e.Variables.createVariable_(t,n,r,s)),u},e.Variables.getVariable=function(t,n,r,s){var u=t.getPotentialVariableMap(),y=null;if(n&&(!(y=t.getVariableById(n))&&u&&(y=u.getVariableById(n)),y))return y;if(r){if(null==s)throw Error("Tried to look up a variable by name without a type");!(y=t.getVariable(r,s))&&u&&(y=u.getVariable(r,s))}return y},e.Variables.createVariable_=function(t,n,r,s){var u=t.getPotentialVariableMap();return r||(r=e.Variables.generateUniqueName(t.isFlyout?t.targetWorkspace:t)),u?u.createVariable(r,s,n):t.createVariable(r,s,n)},e.Variables.getAddedVariables=function(t,n){t=t.getAllVariables();var r=[];if(n.length!=t.length)for(var s=0;s<t.length;s++){var u=t[s];-1==n.indexOf(u)&&r.push(u)}return r},e.VERSION="6.20210701.0",e.mainWorkspace=null,e.selected=null,e.draggingConnections=[],e.clipboardXml_=null,e.clipboardSource_=null,e.clipboardTypeCounts_=null,e.cache3dSupported_=null,e.parentContainer=null,e.svgSize=function(t){return e.utils.deprecation.warn("Blockly.svgSize","March 2021","March 2022","workspace.getCachedParentSvgSize"),new e.utils.Size(t.cachedWidth_,t.cachedHeight_)},e.resizeSvgContents=function(t){t.resizeContents()},e.svgResize=function(t){for(;t.options.parentWorkspace;)t=t.options.parentWorkspace;var n=t.getParentSvg(),r=t.getCachedParentSvgSize(),s=n.parentNode;if(s){var u=s.offsetWidth;s=s.offsetHeight,r.width!=u&&(n.setAttribute("width",u+"px"),t.setCachedParentSvgSize(u,null)),r.height!=s&&(n.setAttribute("height",s+"px"),t.setCachedParentSvgSize(null,s)),t.resize()}},e.onKeyDown=function(t){var n=e.mainWorkspace;n&&!(e.utils.isTargetInput(t)||n.rendered&&!n.isVisible())&&e.ShortcutRegistry.registry.onKeyDown(n,t)},e.deleteBlock=function(t){t.workspace.isFlyout||(e.Events.setGroup(!0),e.hideChaff(),t.dispose(!t.outputConnection,!0),e.Events.setGroup(!1))},e.copy=function(t){(t=t.toCopyData())&&(e.clipboardXml_=t.xml,e.clipboardSource_=t.source,e.clipboardTypeCounts_=t.typeCounts)},e.paste=function(){if(!e.clipboardXml_)return!1;var t=e.clipboardSource_;return t.isFlyout&&(t=t.targetWorkspace),!(!e.clipboardTypeCounts_||!t.isCapacityAvailable(e.clipboardTypeCounts_)||(e.Events.setGroup(!0),t.paste(e.clipboardXml_),e.Events.setGroup(!1),0))},e.duplicate=function(t){var n=e.clipboardXml_,r=e.clipboardSource_;e.copy(t),t.workspace.paste(e.clipboardXml_),e.clipboardXml_=n,e.clipboardSource_=r},e.onContextMenu_=function(t){e.utils.isTargetInput(t)||t.preventDefault()},e.hideChaff=function(t){e.Tooltip.hide(),e.WidgetDiv.hide(),e.DropDownDiv.hideWithoutAnimation();var n=!!t;e.getMainWorkspace().getComponentManager().getComponents(e.ComponentManager.Capability.AUTOHIDEABLE,!0).forEach(function(r){r.autoHide(n)})},e.getMainWorkspace=function(){return e.mainWorkspace},e.alert=function(t,n){alert(t),n&&n()},e.confirm=function(t,n){n(confirm(t))},e.prompt=function(t,n,r){r(prompt(t,n))},e.jsonInitFactory_=function(t){return function(){this.jsonInit(t)}},e.defineBlocksWithJsonArray=function(t){for(var n=0;n<t.length;n++){var r=t[n];if(r){var s=r.type;null==s||""===s?console.warn("Block definition #"+n+" in JSON array is missing a type attribute. Skipping."):(e.Blocks[s]&&console.warn("Block definition #"+n+' in JSON array overwrites prior definition of "'+s+'".'),e.Blocks[s]={init:e.jsonInitFactory_(r)})}else console.warn("Block definition #"+n+" in JSON array is "+r+". Skipping.")}},e.isNumber=function(t){return/^\s*-?\d+(\.\d+)?\s*$/.test(t)},e.hueToHex=function(t){return e.utils.colour.hsvToHex(t,e.HSV_SATURATION,255*e.HSV_VALUE)},e.checkBlockColourConstants=function(){e.checkBlockColourConstant_("LOGIC_HUE",["Blocks","logic","HUE"],void 0),e.checkBlockColourConstant_("LOGIC_HUE",["Constants","Logic","HUE"],210),e.checkBlockColourConstant_("LOOPS_HUE",["Blocks","loops","HUE"],void 0),e.checkBlockColourConstant_("LOOPS_HUE",["Constants","Loops","HUE"],120),e.checkBlockColourConstant_("MATH_HUE",["Blocks","math","HUE"],void 0),e.checkBlockColourConstant_("MATH_HUE",["Constants","Math","HUE"],230),e.checkBlockColourConstant_("TEXTS_HUE",["Blocks","texts","HUE"],void 0),e.checkBlockColourConstant_("TEXTS_HUE",["Constants","Text","HUE"],160),e.checkBlockColourConstant_("LISTS_HUE",["Blocks","lists","HUE"],void 0),e.checkBlockColourConstant_("LISTS_HUE",["Constants","Lists","HUE"],260),e.checkBlockColourConstant_("COLOUR_HUE",["Blocks","colour","HUE"],void 0),e.checkBlockColourConstant_("COLOUR_HUE",["Constants","Colour","HUE"],20),e.checkBlockColourConstant_("VARIABLES_HUE",["Blocks","variables","HUE"],void 0),e.checkBlockColourConstant_("VARIABLES_HUE",["Constants","Variables","HUE"],330),e.checkBlockColourConstant_("VARIABLES_DYNAMIC_HUE",["Constants","VariablesDynamic","HUE"],310),e.checkBlockColourConstant_("PROCEDURES_HUE",["Blocks","procedures","HUE"],void 0)},e.checkBlockColourConstant_=function(t,n,r){for(var s="Blockly",u=e,y=0;y<n.length;++y)s+="."+n[y],u&&(u=u[n[y]]);u&&u!==r&&(t=(void 0===r?'%1 has been removed. Use Blockly.Msg["%2"].':'%1 is deprecated and unused. Override Blockly.Msg["%2"].').replace("%1",s).replace("%2",t),console.warn(t))},e.setParentContainer=function(t){e.parentContainer=t},e.bindEvent_=e.browserEvents.bind,e.unbindEvent_=e.browserEvents.unbind,e.bindEventWithChecks_=e.browserEvents.conditionalBind,e.ALIGN_LEFT=e.constants.ALIGN.LEFT,e.ALIGN_CENTRE=e.constants.ALIGN.CENTRE,e.ALIGN_RIGHT=e.constants.ALIGN.RIGHT,e.INPUT_VALUE=e.connectionTypes.INPUT_VALUE,e.OUTPUT_VALUE=e.connectionTypes.OUTPUT_VALUE,e.NEXT_STATEMENT=e.connectionTypes.NEXT_STATEMENT,e.PREVIOUS_STATEMENT=e.connectionTypes.PREVIOUS_STATEMENT,e.DUMMY_INPUT=e.inputTypes.DUMMY,e.TOOLBOX_AT_TOP=e.utils.toolbox.Position.TOP,e.TOOLBOX_AT_BOTTOM=e.utils.toolbox.Position.BOTTOM,e.TOOLBOX_AT_LEFT=e.utils.toolbox.Position.LEFT,e.TOOLBOX_AT_RIGHT=e.utils.toolbox.Position.RIGHT,e.Events.BubbleOpen=function(t,n,r){e.Events.BubbleOpen.superClass_.constructor.call(this,t?t.workspace.id:void 0),this.blockId=t?t.id:null,this.isOpen=n,this.bubbleType=r},e.utils.object.inherits(e.Events.BubbleOpen,e.Events.UiBase),e.Events.BubbleOpen.prototype.type=e.Events.BUBBLE_OPEN,e.Events.BubbleOpen.prototype.toJson=function(){var t=e.Events.BubbleOpen.superClass_.toJson.call(this);return t.isOpen=this.isOpen,t.bubbleType=this.bubbleType,t.blockId=this.blockId,t},e.Events.BubbleOpen.prototype.fromJson=function(t){e.Events.BubbleOpen.superClass_.fromJson.call(this,t),this.isOpen=t.isOpen,this.bubbleType=t.bubbleType,this.blockId=t.blockId},e.registry.register(e.registry.Type.EVENT,e.Events.BUBBLE_OPEN,e.Events.BubbleOpen),e.Icon=function(t){this.block_=t,this.iconGroup_=null},e.Icon.prototype.collapseHidden=!0,e.Icon.prototype.SIZE=17,e.Icon.prototype.bubble_=null,e.Icon.prototype.iconXY_=null,e.Icon.prototype.createIcon=function(){this.iconGroup_||(this.iconGroup_=e.utils.dom.createSvgElement(e.utils.Svg.G,{class:"blocklyIconGroup"},null),this.block_.isInFlyout&&e.utils.dom.addClass(this.iconGroup_,"blocklyIconGroupReadonly"),this.drawIcon_(this.iconGroup_),this.block_.getSvgRoot().appendChild(this.iconGroup_),e.browserEvents.conditionalBind(this.iconGroup_,"mouseup",this,this.iconClick_),this.updateEditable())},e.Icon.prototype.dispose=function(){e.utils.dom.removeNode(this.iconGroup_),this.iconGroup_=null,this.setVisible(!1),this.block_=null},e.Icon.prototype.updateEditable=function(){},e.Icon.prototype.isVisible=function(){return!!this.bubble_},e.Icon.prototype.iconClick_=function(t){this.block_.workspace.isDragging()||this.block_.isInFlyout||e.utils.isRightButton(t)||this.setVisible(!this.isVisible())},e.Icon.prototype.applyColour=function(){this.isVisible()&&this.bubble_.setColour(this.block_.style.colourPrimary)},e.Icon.prototype.setIconLocation=function(t){this.iconXY_=t,this.isVisible()&&this.bubble_.setAnchorLocation(t)},e.Icon.prototype.computeIconLocation=function(){var t=this.block_.getRelativeToSurfaceXY(),n=e.utils.getRelativeXY(this.iconGroup_);t=new e.utils.Coordinate(t.x+n.x+this.SIZE/2,t.y+n.y+this.SIZE/2),e.utils.Coordinate.equals(this.getIconLocation(),t)||this.setIconLocation(t)},e.Icon.prototype.getIconLocation=function(){return this.iconXY_},e.Icon.prototype.getCorrectedSize=function(){return new e.utils.Size(e.Icon.prototype.SIZE,e.Icon.prototype.SIZE-2)},e.Warning=function(t){e.Warning.superClass_.constructor.call(this,t),this.createIcon(),this.text_=Object.create(null)},e.utils.object.inherits(e.Warning,e.Icon),e.Warning.prototype.collapseHidden=!1,e.Warning.prototype.drawIcon_=function(t){e.utils.dom.createSvgElement(e.utils.Svg.PATH,{class:"blocklyIconShape",d:"M2,15Q-1,15 0.5,12L6.5,1.7Q8,-1 9.5,1.7L15.5,12Q17,15 14,15z"},t),e.utils.dom.createSvgElement(e.utils.Svg.PATH,{class:"blocklyIconSymbol",d:"m7,4.8v3.16l0.27,2.27h1.46l0.27,-2.27v-3.16z"},t),e.utils.dom.createSvgElement(e.utils.Svg.RECT,{class:"blocklyIconSymbol",x:"7",y:"11",height:"2",width:"2"},t)},e.Warning.prototype.setVisible=function(t){t!=this.isVisible()&&(e.Events.fire(new(e.Events.get(e.Events.BUBBLE_OPEN))(this.block_,t,"warning")),t?this.createBubble_():this.disposeBubble_())},e.Warning.prototype.createBubble_=function(){this.paragraphElement_=e.Bubble.textToDom(this.getText()),this.bubble_=e.Bubble.createNonEditableBubble(this.paragraphElement_,this.block_,this.iconXY_),this.applyColour()},e.Warning.prototype.disposeBubble_=function(){this.bubble_.dispose(),this.paragraphElement_=this.bubble_=null},e.Warning.prototype.setText=function(t,n){this.text_[n]!=t&&(t?this.text_[n]=t:delete this.text_[n],this.isVisible()&&(this.setVisible(!1),this.setVisible(!0)))},e.Warning.prototype.getText=function(){var n,t=[];for(n in this.text_)t.push(this.text_[n]);return t.join("\n")},e.Warning.prototype.dispose=function(){this.block_.warning=null,e.Icon.prototype.dispose.call(this)},e.Comment=function(t){e.Comment.superClass_.constructor.call(this,t),this.model_=t.commentModel,this.model_.text=this.model_.text||"",this.cachedText_="",this.onInputWrapper_=this.onChangeWrapper_=this.onWheelWrapper_=this.onMouseUpWrapper_=null,this.createIcon()},e.utils.object.inherits(e.Comment,e.Icon),e.Comment.prototype.drawIcon_=function(t){e.utils.dom.createSvgElement(e.utils.Svg.CIRCLE,{class:"blocklyIconShape",r:"8",cx:"8",cy:"8"},t),e.utils.dom.createSvgElement(e.utils.Svg.PATH,{class:"blocklyIconSymbol",d:"m6.8,10h2c0.003,-0.617 0.271,-0.962 0.633,-1.266 2.875,-2.4050.607,-5.534 -3.765,-3.874v1.7c3.12,-1.657 3.698,0.118 2.336,1.25-1.201,0.998 -1.201,1.528 -1.204,2.19z"},t),e.utils.dom.createSvgElement(e.utils.Svg.RECT,{class:"blocklyIconSymbol",x:"6.8",y:"10.78",height:"2",width:"2"},t)},e.Comment.prototype.createEditor_=function(){this.foreignObject_=e.utils.dom.createSvgElement(e.utils.Svg.FOREIGNOBJECT,{x:e.Bubble.BORDER_WIDTH,y:e.Bubble.BORDER_WIDTH},null);var t=document.createElementNS(e.utils.dom.HTML_NS,"body");t.setAttribute("xmlns",e.utils.dom.HTML_NS),t.className="blocklyMinimalBody";var n=this.textarea_=document.createElementNS(e.utils.dom.HTML_NS,"textarea");return n.className="blocklyCommentTextarea",n.setAttribute("dir",this.block_.RTL?"RTL":"LTR"),n.value=this.model_.text,this.resizeTextarea_(),t.appendChild(n),this.foreignObject_.appendChild(t),this.onMouseUpWrapper_=e.browserEvents.conditionalBind(n,"mouseup",this,this.startEdit_,!0,!0),this.onWheelWrapper_=e.browserEvents.conditionalBind(n,"wheel",this,function(r){r.stopPropagation()}),this.onChangeWrapper_=e.browserEvents.conditionalBind(n,"change",this,function(r){this.cachedText_!=this.model_.text&&e.Events.fire(new(e.Events.get(e.Events.BLOCK_CHANGE))(this.block_,"comment",null,this.cachedText_,this.model_.text))}),this.onInputWrapper_=e.browserEvents.conditionalBind(n,"input",this,function(r){this.model_.text=n.value}),setTimeout(n.focus.bind(n),0),this.foreignObject_},e.Comment.prototype.updateEditable=function(){e.Comment.superClass_.updateEditable.call(this),this.isVisible()&&(this.disposeBubble_(),this.createBubble_())},e.Comment.prototype.onBubbleResize_=function(){this.isVisible()&&(this.model_.size=this.bubble_.getBubbleSize(),this.resizeTextarea_())},e.Comment.prototype.resizeTextarea_=function(){var t=this.model_.size,n=2*e.Bubble.BORDER_WIDTH,r=t.width-n;t=t.height-n,this.foreignObject_.setAttribute("width",r),this.foreignObject_.setAttribute("height",t),this.textarea_.style.width=r-4+"px",this.textarea_.style.height=t-4+"px"},e.Comment.prototype.setVisible=function(t){t!=this.isVisible()&&(e.Events.fire(new(e.Events.get(e.Events.BUBBLE_OPEN))(this.block_,t,"comment")),(this.model_.pinned=t)?this.createBubble_():this.disposeBubble_())},e.Comment.prototype.createBubble_=function(){!this.block_.isEditable()||e.utils.userAgent.IE?this.createNonEditableBubble_():this.createEditableBubble_()},e.Comment.prototype.createEditableBubble_=function(){this.bubble_=new e.Bubble(this.block_.workspace,this.createEditor_(),this.block_.pathObject.svgPath,this.iconXY_,this.model_.size.width,this.model_.size.height),this.bubble_.setSvgId(this.block_.id),this.bubble_.registerResizeEvent(this.onBubbleResize_.bind(this)),this.applyColour()},e.Comment.prototype.createNonEditableBubble_=function(){this.paragraphElement_=e.Bubble.textToDom(this.block_.getCommentText()),this.bubble_=e.Bubble.createNonEditableBubble(this.paragraphElement_,this.block_,this.iconXY_),this.applyColour()},e.Comment.prototype.disposeBubble_=function(){this.onMouseUpWrapper_&&(e.browserEvents.unbind(this.onMouseUpWrapper_),this.onMouseUpWrapper_=null),this.onWheelWrapper_&&(e.browserEvents.unbind(this.onWheelWrapper_),this.onWheelWrapper_=null),this.onChangeWrapper_&&(e.browserEvents.unbind(this.onChangeWrapper_),this.onChangeWrapper_=null),this.onInputWrapper_&&(e.browserEvents.unbind(this.onInputWrapper_),this.onInputWrapper_=null),this.bubble_.dispose(),this.paragraphElement_=this.foreignObject_=this.textarea_=this.bubble_=null},e.Comment.prototype.startEdit_=function(t){this.bubble_.promote()&&this.textarea_.focus(),this.cachedText_=this.model_.text},e.Comment.prototype.getBubbleSize=function(){return this.model_.size},e.Comment.prototype.setBubbleSize=function(t,n){this.bubble_?this.bubble_.setBubbleSize(t,n):(this.model_.size.width=t,this.model_.size.height=n)},e.Comment.prototype.updateText=function(){this.textarea_?this.textarea_.value=this.model_.text:this.paragraphElement_&&(this.paragraphElement_.firstChild.textContent=this.model_.text)},e.Comment.prototype.dispose=function(){this.block_.comment=null,e.Icon.prototype.dispose.call(this)},e.Css.register(".blocklyCommentTextarea {,background-color: #fef49c;,border: 0;,outline: 0;,margin: 0;,padding: 3px;,resize: none;,display: block;,text-overflow: hidden;,}".split(",")),e.IComponent=function(){},e.IDragTarget=function(){},e.DragTarget=function(){},e.DragTarget.prototype.onDragEnter=function(t){},e.DragTarget.prototype.onDragOver=function(t){},e.DragTarget.prototype.onDragExit=function(t){},e.DragTarget.prototype.onDrop=function(t){},e.DragTarget.prototype.shouldPreventMove=function(t){return!1},e.IDeleteArea=function(){},e.DeleteArea=function(){e.DeleteArea.superClass_.constructor.call(this),this.wouldDelete_=!1},e.utils.object.inherits(e.DeleteArea,e.DragTarget),e.DeleteArea.prototype.wouldDelete=function(t,n){return t instanceof e.BlockSvg?(t=!t.getParent()&&t.isDeletable(),this.updateWouldDelete_(t&&!n)):this.updateWouldDelete_(t.isDeletable()),this.wouldDelete_},e.DeleteArea.prototype.updateWouldDelete_=function(t){this.wouldDelete_=t},e.IFlyout=function(){},e.Flyout=function(t){e.Flyout.superClass_.constructor.call(this),t.setMetrics=this.setMetrics_.bind(this),this.workspace_=new e.WorkspaceSvg(t),this.workspace_.setMetricsManager(new e.FlyoutMetricsManager(this.workspace_,this)),this.workspace_.isFlyout=!0,this.workspace_.setVisible(this.isVisible_),this.id=e.utils.genUid(),this.RTL=!!t.RTL,this.horizontalLayout=!1,this.toolboxPosition_=t.toolboxPosition,this.eventWrappers_=[],this.mats_=[],this.buttons_=[],this.listeners_=[],this.permanentlyDisabled_=[],this.tabWidth_=this.workspace_.getRenderer().getConstants().TAB_WIDTH,this.targetWorkspace=null},e.utils.object.inherits(e.Flyout,e.DeleteArea),e.Flyout.prototype.autoClose=!0,e.Flyout.prototype.isVisible_=!1,e.Flyout.prototype.containerVisible_=!0,e.Flyout.prototype.CORNER_RADIUS=8,e.Flyout.prototype.MARGIN=e.Flyout.prototype.CORNER_RADIUS,e.Flyout.prototype.GAP_X=3*e.Flyout.prototype.MARGIN,e.Flyout.prototype.GAP_Y=3*e.Flyout.prototype.MARGIN,e.Flyout.prototype.SCROLLBAR_MARGIN=2.5,e.Flyout.prototype.width_=0,e.Flyout.prototype.height_=0,e.Flyout.prototype.dragAngleRange_=70,e.Flyout.prototype.createDom=function(t){return this.svgGroup_=e.utils.dom.createSvgElement(t,{class:"blocklyFlyout",style:"display: none"},null),this.svgBackground_=e.utils.dom.createSvgElement(e.utils.Svg.PATH,{class:"blocklyFlyoutBackground"},this.svgGroup_),this.svgGroup_.appendChild(this.workspace_.createDom()),this.workspace_.getThemeManager().subscribe(this.svgBackground_,"flyoutBackgroundColour","fill"),this.workspace_.getThemeManager().subscribe(this.svgBackground_,"flyoutOpacity","fill-opacity"),this.svgGroup_},e.Flyout.prototype.init=function(t){this.targetWorkspace=t,this.workspace_.targetWorkspace=t,this.workspace_.scrollbar=new e.ScrollbarPair(this.workspace_,this.horizontalLayout,!this.horizontalLayout,"blocklyFlyoutScrollbar",this.SCROLLBAR_MARGIN),this.hide(),Array.prototype.push.apply(this.eventWrappers_,e.browserEvents.conditionalBind(this.svgGroup_,"wheel",this,this.wheel_)),this.autoClose||(this.filterWrapper_=this.filterForCapacity_.bind(this),this.targetWorkspace.addChangeListener(this.filterWrapper_)),Array.prototype.push.apply(this.eventWrappers_,e.browserEvents.conditionalBind(this.svgBackground_,"mousedown",this,this.onMouseDown_)),this.workspace_.getGesture=this.targetWorkspace.getGesture.bind(this.targetWorkspace),this.workspace_.setVariableMap(this.targetWorkspace.getVariableMap()),this.workspace_.createPotentialVariableMap(),t.getComponentManager().addComponent({component:this,weight:1,capabilities:[e.ComponentManager.Capability.DELETE_AREA,e.ComponentManager.Capability.DRAG_TARGET]})},e.Flyout.prototype.dispose=function(){this.hide(),this.workspace_.getComponentManager().removeComponent(this.id),e.browserEvents.unbind(this.eventWrappers_),this.filterWrapper_&&(this.targetWorkspace.removeChangeListener(this.filterWrapper_),this.filterWrapper_=null),this.workspace_&&(this.workspace_.getThemeManager().unsubscribe(this.svgBackground_),this.workspace_.targetWorkspace=null,this.workspace_.dispose(),this.workspace_=null),this.svgGroup_&&(e.utils.dom.removeNode(this.svgGroup_),this.svgGroup_=null),this.targetWorkspace=this.svgBackground_=null},e.Flyout.prototype.getWidth=function(){return this.width_},e.Flyout.prototype.getHeight=function(){return this.height_},e.Flyout.prototype.getFlyoutScale=function(){return this.targetWorkspace.scale},e.Flyout.prototype.getWorkspace=function(){return this.workspace_},e.Flyout.prototype.isVisible=function(){return this.isVisible_},e.Flyout.prototype.setVisible=function(t){var n=t!=this.isVisible();this.isVisible_=t,n&&(this.autoClose||this.workspace_.recordDragTargets(),this.updateDisplay_())},e.Flyout.prototype.setContainerVisible=function(t){var n=t!=this.containerVisible_;this.containerVisible_=t,n&&this.updateDisplay_()},e.Flyout.prototype.updateDisplay_=function(){var t=!!this.containerVisible_&&this.isVisible();this.svgGroup_.style.display=t?"block":"none",this.workspace_.scrollbar.setContainerVisible(t)},e.Flyout.prototype.positionAt_=function(t,n,r,s){this.svgGroup_.setAttribute("width",t),this.svgGroup_.setAttribute("height",n),this.workspace_.setCachedParentSvgSize(t,n),"svg"==this.svgGroup_.tagName?e.utils.dom.setCssTransform(this.svgGroup_,"translate("+r+"px,"+s+"px)"):this.svgGroup_.setAttribute("transform","translate("+r+","+s+")"),(t=this.workspace_.scrollbar)&&(t.setOrigin(r,s),t.resize(),t.hScroll&&t.hScroll.setPosition(t.hScroll.position.x,t.hScroll.position.y),t.vScroll&&t.vScroll.setPosition(t.vScroll.position.x,t.vScroll.position.y))},e.Flyout.prototype.hide=function(){if(this.isVisible()){this.setVisible(!1);for(var n,t=0;n=this.listeners_[t];t++)e.browserEvents.unbind(n);this.listeners_.length=0,this.reflowWrapper_&&(this.workspace_.removeChangeListener(this.reflowWrapper_),this.reflowWrapper_=null)}},e.Flyout.prototype.show=function(t){this.workspace_.setResizesEnabled(!1),this.hide(),this.clearOldBlocks_(),"string"==typeof t&&(t=this.getDynamicCategoryContents_(t)),this.setVisible(!0),t=e.utils.toolbox.convertFlyoutDefToJsonArray(t),t=this.createFlyoutInfo_(t),this.layout_(t.contents,t.gaps),this.listeners_.push(e.browserEvents.conditionalBind(this.svgBackground_,"mouseover",this,function(){for(var s,n=this.workspace_.getTopBlocks(!1),r=0;s=n[r];r++)s.removeSelect()})),this.horizontalLayout?this.height_=0:this.width_=0,this.workspace_.setResizesEnabled(!0),this.reflow(),this.filterForCapacity_(),this.position(),this.reflowWrapper_=this.reflow.bind(this),this.workspace_.addChangeListener(this.reflowWrapper_)},e.Flyout.prototype.createFlyoutInfo_=function(t){var n=[],r=[];this.permanentlyDisabled_.length=0;for(var y,s=this.horizontalLayout?this.GAP_X:this.GAP_Y,u=0;y=t[u];u++)switch(y.custom&&(y=this.getDynamicCategoryContents_(y.custom),y=e.utils.toolbox.convertFlyoutDefToJsonArray(y),t.splice.apply(t,[u,1].concat(y)),y=t[u]),y.kind.toUpperCase()){case"BLOCK":var x=y,B=this.getBlockXml_(x);y=this.createBlock_(B),x=parseInt(x.gap||B.getAttribute("gap"),10),r.push(isNaN(x)?s:x),n.push({type:"block",block:y});break;case"SEP":this.addSeparatorGap_(y,r,s);break;case"LABEL":y=this.createButton_(y,!0),n.push({type:"button",button:y}),r.push(s);break;case"BUTTON":y=this.createButton_(y,!1),n.push({type:"button",button:y}),r.push(s)}return{contents:n,gaps:r}},e.Flyout.prototype.getDynamicCategoryContents_=function(t){if("function"!=typeof(t=this.workspace_.targetWorkspace.getToolboxCategoryCallback(t)))throw TypeError("Couldn't find a callback function when opening a toolbox category.");if(t=t(this.workspace_.targetWorkspace),!Array.isArray(t))throw new TypeError("Result of toolbox category callback must be an array.");return t},e.Flyout.prototype.createButton_=function(t,n){if(!e.FlyoutButton)throw Error("Missing require for Blockly.FlyoutButton");return new e.FlyoutButton(this.workspace_,this.targetWorkspace,t,n)},e.Flyout.prototype.createBlock_=function(t){return(t=e.Xml.domToBlock(t,this.workspace_)).isEnabled()||this.permanentlyDisabled_.push(t),t},e.Flyout.prototype.getBlockXml_=function(t){var n=null,r=t.blockxml;if(r&&"string"!=typeof r?n=r:r&&"string"==typeof r?(n=e.Xml.textToDom(r),t.blockxml=n):t.type&&((n=e.utils.xml.createElement("xml")).setAttribute("type",t.type),n.setAttribute("disabled",t.disabled),t.blockxml=n),!n)throw Error("Error: Invalid block definition. Block definition must have blockxml or type.");return n},e.Flyout.prototype.addSeparatorGap_=function(t,n,r){t=parseInt(t.gap,10),!isNaN(t)&&0<n.length?n[n.length-1]=t:n.push(r)},e.Flyout.prototype.clearOldBlocks_=function(){for(var r,t=this.workspace_.getTopBlocks(!1),n=0;r=t[n];n++)r.workspace==this.workspace_&&r.dispose(!1,!1);for(n=0;n<this.mats_.length;n++)(t=this.mats_[n])&&(e.Tooltip.unbindMouseEvents(t),e.utils.dom.removeNode(t));for(n=this.mats_.length=0;t=this.buttons_[n];n++)t.dispose();this.buttons_.length=0,this.workspace_.getPotentialVariableMap().clear()},e.Flyout.prototype.addBlockListeners_=function(t,n,r){this.listeners_.push(e.browserEvents.conditionalBind(t,"mousedown",null,this.blockMouseDown_(n))),this.listeners_.push(e.browserEvents.conditionalBind(r,"mousedown",null,this.blockMouseDown_(n))),this.listeners_.push(e.browserEvents.bind(t,"mouseenter",n,n.addSelect)),this.listeners_.push(e.browserEvents.bind(t,"mouseleave",n,n.removeSelect)),this.listeners_.push(e.browserEvents.bind(r,"mouseenter",n,n.addSelect)),this.listeners_.push(e.browserEvents.bind(r,"mouseleave",n,n.removeSelect))},e.Flyout.prototype.blockMouseDown_=function(t){var n=this;return function(r){var s=n.targetWorkspace.getGesture(r);s&&(s.setStartBlock(t),s.handleFlyoutStart(r,n))}},e.Flyout.prototype.onMouseDown_=function(t){var n=this.targetWorkspace.getGesture(t);n&&n.handleFlyoutStart(t,this)},e.Flyout.prototype.isBlockCreatable_=function(t){return t.isEnabled()},e.Flyout.prototype.createBlock=function(t){var n=null;e.Events.disable();var r=this.targetWorkspace.getAllVariables();this.targetWorkspace.setResizesEnabled(!1);try{n=this.placeNewBlock_(t)}finally{e.Events.enable()}if(e.hideChaff(),t=e.Variables.getAddedVariables(this.targetWorkspace,r),e.Events.isEnabled()){for(e.Events.setGroup(!0),r=0;r<t.length;r++){var s=t[r];e.Events.fire(new(e.Events.get(e.Events.VAR_CREATE))(s))}e.Events.fire(new(e.Events.get(e.Events.BLOCK_CREATE))(n))}return this.autoClose?this.hide():this.filterForCapacity_(),n},e.Flyout.prototype.initFlyoutButton_=function(t,n,r){var s=t.createDom();t.moveTo(n,r),t.show(),this.listeners_.push(e.browserEvents.conditionalBind(s,"mousedown",this,this.onMouseDown_)),this.buttons_.push(t)},e.Flyout.prototype.createRect_=function(t,n,r,s,u){return(n=e.utils.dom.createSvgElement(e.utils.Svg.RECT,{"fill-opacity":0,x:n,y:r,height:s.height,width:s.width},null)).tooltip=t,e.Tooltip.bindMouseEvents(n),this.workspace_.getCanvas().insertBefore(n,t.getSvgRoot()),t.flyoutRect_=n,this.mats_[u]=n},e.Flyout.prototype.moveRectToBlock_=function(t,n){var r=n.getHeightWidth();t.setAttribute("width",r.width),t.setAttribute("height",r.height),n=n.getRelativeToSurfaceXY(),t.setAttribute("y",n.y),t.setAttribute("x",this.RTL?n.x-r.width:n.x)},e.Flyout.prototype.filterForCapacity_=function(){for(var r,t=this.workspace_.getTopBlocks(!1),n=0;r=t[n];n++)if(-1==this.permanentlyDisabled_.indexOf(r))for(var s=this.targetWorkspace.isCapacityAvailable(e.utils.getBlockTypeCounts(r));r;)r.setEnabled(s),r=r.getNextBlock()},e.Flyout.prototype.reflow=function(){this.reflowWrapper_&&this.workspace_.removeChangeListener(this.reflowWrapper_),this.reflowInternal_(),this.reflowWrapper_&&this.workspace_.addChangeListener(this.reflowWrapper_)},e.Flyout.prototype.isScrollable=function(){return!!this.workspace_.scrollbar&&this.workspace_.scrollbar.isVisible()},e.Flyout.prototype.placeNewBlock_=function(t){var n=this.targetWorkspace;if(!t.getSvgRoot())throw Error("oldBlock is not rendered.");var r=e.Xml.blockToDom(t,!0);if(n.setResizesEnabled(!1),!(r=e.Xml.domToBlock(r,n)).getSvgRoot())throw Error("block is not rendered.");var s=n.getOriginOffsetInPixels(),u=this.workspace_.getOriginOffsetInPixels();return(t=t.getRelativeToSurfaceXY()).scale(this.workspace_.scale),t=e.utils.Coordinate.sum(u,t),(s=e.utils.Coordinate.difference(t,s)).scale(1/n.scale),r.moveBy(s.x,s.y),r},e.HorizontalFlyout=function(t){e.HorizontalFlyout.superClass_.constructor.call(this,t),this.horizontalLayout=!0},e.utils.object.inherits(e.HorizontalFlyout,e.Flyout),e.HorizontalFlyout.prototype.setMetrics_=function(t){if(this.isVisible()){var n=this.workspace_.getMetricsManager(),r=n.getScrollMetrics(),s=n.getViewMetrics();n=n.getAbsoluteMetrics(),"number"==typeof t.x&&(this.workspace_.scrollX=-(r.left+(r.width-s.width)*t.x)),this.workspace_.translate(this.workspace_.scrollX+n.left,this.workspace_.scrollY+n.top)}},e.HorizontalFlyout.prototype.getX=function(){return 0},e.HorizontalFlyout.prototype.getY=function(){if(!this.isVisible())return 0;var t=this.targetWorkspace.getMetricsManager(),n=t.getAbsoluteMetrics(),r=t.getViewMetrics();t=t.getToolboxMetrics();var s=this.toolboxPosition_==e.utils.toolbox.Position.TOP;return this.targetWorkspace.toolboxPosition==this.toolboxPosition_?this.targetWorkspace.getToolbox()?s?t.height:r.height-this.height_:s?0:r.height:s?0:r.height+n.top-this.height_},e.HorizontalFlyout.prototype.position=function(){if(this.isVisible()&&this.targetWorkspace.isVisible()){var t=this.targetWorkspace.getMetricsManager().getViewMetrics();this.width_=t.width,this.setBackgroundPath_(t.width-2*this.CORNER_RADIUS,this.height_-this.CORNER_RADIUS),t=this.getX();var n=this.getY();this.positionAt_(this.width_,this.height_,t,n)}},e.HorizontalFlyout.prototype.setBackgroundPath_=function(t,n){var r=this.toolboxPosition_==e.utils.toolbox.Position.TOP,s=["M 0,"+(r?0:this.CORNER_RADIUS)];r?(s.push("h",t+2*this.CORNER_RADIUS),s.push("v",n),s.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,-this.CORNER_RADIUS,this.CORNER_RADIUS),s.push("h",-t),s.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,-this.CORNER_RADIUS,-this.CORNER_RADIUS)):(s.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,this.CORNER_RADIUS,-this.CORNER_RADIUS),s.push("h",t),s.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,this.CORNER_RADIUS,this.CORNER_RADIUS),s.push("v",n),s.push("h",-t-2*this.CORNER_RADIUS)),s.push("z"),this.svgBackground_.setAttribute("d",s.join(" "))},e.HorizontalFlyout.prototype.scrollToStart=function(){this.workspace_.scrollbar.setX(this.RTL?1/0:0)},e.HorizontalFlyout.prototype.wheel_=function(t){var n=e.utils.getScrollDeltaPixels(t);if(n=n.x||n.y){var r=this.workspace_.getMetricsManager(),s=r.getScrollMetrics();n=r.getViewMetrics().left-s.left+n,this.workspace_.scrollbar.setX(n),e.WidgetDiv.hide(),e.DropDownDiv.hideWithoutAnimation()}t.preventDefault(),t.stopPropagation()},e.HorizontalFlyout.prototype.layout_=function(t,n){this.workspace_.scale=this.targetWorkspace.scale;var r=this.MARGIN,s=r+this.tabWidth_;this.RTL&&(t=t.reverse());for(var y,u=0;y=t[u];u++)if("block"==y.type){for(var Q,x=(y=y.block).getDescendants(!1),B=0;Q=x[B];B++)Q.isInFlyout=!0;y.render(),x=y.getSvgRoot(),B=y.getHeightWidth(),Q=y.outputConnection?this.tabWidth_:0,y.moveBy(Q=this.RTL?s+B.width:s-Q,r),Q=this.createRect_(y,Q,r,B,u),s+=B.width+n[u],this.addBlockListeners_(x,y,Q)}else"button"==y.type&&(this.initFlyoutButton_(y.button,s,r),s+=y.button.width+n[u])},e.HorizontalFlyout.prototype.isDragTowardWorkspace=function(t){t=Math.atan2(t.y,t.x)/Math.PI*180;var n=this.dragAngleRange_;return t<90+n&&t>90-n||t>-90-n&&t<-90+n},e.HorizontalFlyout.prototype.getClientRect=function(){if(!this.svgGroup_||this.autoClose||!this.isVisible())return null;var t=this.svgGroup_.getBoundingClientRect(),n=t.top;return this.toolboxPosition_==e.utils.toolbox.Position.TOP?new e.utils.Rect(-1e9,n+t.height,-1e9,1e9):new e.utils.Rect(n,1e9,-1e9,1e9)},e.HorizontalFlyout.prototype.reflowInternal_=function(){this.workspace_.scale=this.getFlyoutScale();for(var s,t=0,n=this.workspace_.getTopBlocks(!1),r=0;s=n[r];r++)t=Math.max(t,s.getHeightWidth().height);if(t+=1.5*this.MARGIN,t*=this.workspace_.scale,this.height_!=(t+=e.Scrollbar.scrollbarThickness)){for(r=0;s=n[r];r++)s.flyoutRect_&&this.moveRectToBlock_(s.flyoutRect_,s);this.targetWorkspace.toolboxPosition!=this.toolboxPosition_||this.toolboxPosition_!=e.utils.toolbox.Position.TOP||this.targetWorkspace.getToolbox()||this.targetWorkspace.translate(this.targetWorkspace.scrollX,this.targetWorkspace.scrollY+t),this.height_=t,this.position(),this.targetWorkspace.recordDragTargets()}},e.registry.register(e.registry.Type.FLYOUTS_HORIZONTAL_TOOLBOX,e.registry.DEFAULT,e.HorizontalFlyout),e.VerticalFlyout=function(t){e.VerticalFlyout.superClass_.constructor.call(this,t)},e.utils.object.inherits(e.VerticalFlyout,e.Flyout),e.VerticalFlyout.registryName="verticalFlyout",e.VerticalFlyout.prototype.setMetrics_=function(t){if(this.isVisible()){var n=this.workspace_.getMetricsManager(),r=n.getScrollMetrics(),s=n.getViewMetrics();n=n.getAbsoluteMetrics(),"number"==typeof t.y&&(this.workspace_.scrollY=-(r.top+(r.height-s.height)*t.y)),this.workspace_.translate(this.workspace_.scrollX+n.left,this.workspace_.scrollY+n.top)}},e.VerticalFlyout.prototype.getX=function(){if(!this.isVisible())return 0;var t=this.targetWorkspace.getMetricsManager(),n=t.getAbsoluteMetrics(),r=t.getViewMetrics();return t=t.getToolboxMetrics(),this.targetWorkspace.toolboxPosition==this.toolboxPosition_?this.targetWorkspace.getToolbox()?this.toolboxPosition_==e.utils.toolbox.Position.LEFT?t.width:r.width-this.width_:this.toolboxPosition_==e.utils.toolbox.Position.LEFT?0:r.width:this.toolboxPosition_==e.utils.toolbox.Position.LEFT?0:r.width+n.left-this.width_},e.VerticalFlyout.prototype.getY=function(){return 0},e.VerticalFlyout.prototype.position=function(){if(this.isVisible()&&this.targetWorkspace.isVisible()){var t=this.targetWorkspace.getMetricsManager().getViewMetrics();this.height_=t.height,this.setBackgroundPath_(this.width_-this.CORNER_RADIUS,t.height-2*this.CORNER_RADIUS),t=this.getX();var n=this.getY();this.positionAt_(this.width_,this.height_,t,n)}},e.VerticalFlyout.prototype.setBackgroundPath_=function(t,n){var r=this.toolboxPosition_==e.utils.toolbox.Position.RIGHT,s=t+this.CORNER_RADIUS;(s=["M "+(r?s:0)+",0"]).push("h",r?-t:t),s.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,r?0:1,r?-this.CORNER_RADIUS:this.CORNER_RADIUS,this.CORNER_RADIUS),s.push("v",Math.max(0,n)),s.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,r?0:1,r?this.CORNER_RADIUS:-this.CORNER_RADIUS,this.CORNER_RADIUS),s.push("h",r?t:-t),s.push("z"),this.svgBackground_.setAttribute("d",s.join(" "))},e.VerticalFlyout.prototype.scrollToStart=function(){this.workspace_.scrollbar.setY(0)},e.VerticalFlyout.prototype.wheel_=function(t){var n=e.utils.getScrollDeltaPixels(t);if(n.y){var r=this.workspace_.getMetricsManager(),s=r.getScrollMetrics();n=r.getViewMetrics().top-s.top+n.y,this.workspace_.scrollbar.setY(n),e.WidgetDiv.hide(),e.DropDownDiv.hideWithoutAnimation()}t.preventDefault(),t.stopPropagation()},e.VerticalFlyout.prototype.layout_=function(t,n){this.workspace_.scale=this.targetWorkspace.scale;for(var y,r=this.MARGIN,s=this.RTL?r:r+this.tabWidth_,u=0;y=t[u];u++)if("block"==y.type){for(var Q,x=(y=y.block).getDescendants(!1),B=0;Q=x[B];B++)Q.isInFlyout=!0;y.render(),x=y.getSvgRoot(),B=y.getHeightWidth(),y.moveBy(Q=y.outputConnection?s-this.tabWidth_:s,r),Q=this.createRect_(y,this.RTL?Q-B.width:Q,r,B,u),this.addBlockListeners_(x,y,Q),r+=B.height+n[u]}else"button"==y.type&&(this.initFlyoutButton_(y.button,s,r),r+=y.button.height+n[u])},e.VerticalFlyout.prototype.isDragTowardWorkspace=function(t){t=Math.atan2(t.y,t.x)/Math.PI*180;var n=this.dragAngleRange_;return t<n&&t>-n||t<-180+n||t>180-n},e.VerticalFlyout.prototype.getClientRect=function(){if(!this.svgGroup_||this.autoClose||!this.isVisible())return null;var t=this.svgGroup_.getBoundingClientRect(),n=t.left;return this.toolboxPosition_==e.utils.toolbox.Position.LEFT?new e.utils.Rect(-1e9,1e9,-1e9,n+t.width):new e.utils.Rect(-1e9,1e9,n,1e9)},e.VerticalFlyout.prototype.reflowInternal_=function(){this.workspace_.scale=this.getFlyoutScale();for(var s,t=0,n=this.workspace_.getTopBlocks(!1),r=0;s=n[r];r++){var u=s.getHeightWidth().width;s.outputConnection&&(u-=this.tabWidth_),t=Math.max(t,u)}for(r=0;s=this.buttons_[r];r++)t=Math.max(t,s.width);if(t+=1.5*this.MARGIN+this.tabWidth_,t*=this.workspace_.scale,this.width_!=(t+=e.Scrollbar.scrollbarThickness)){for(r=0;s=n[r];r++){if(this.RTL){u=s.getRelativeToSurfaceXY().x;var y=t/this.workspace_.scale-this.MARGIN;s.outputConnection||(y-=this.tabWidth_),s.moveBy(y-u,0)}s.flyoutRect_&&this.moveRectToBlock_(s.flyoutRect_,s)}if(this.RTL)for(r=0;s=this.buttons_[r];r++)n=s.getPosition().y,s.moveTo(t/this.workspace_.scale-s.width-this.MARGIN-this.tabWidth_,n);this.targetWorkspace.toolboxPosition!=this.toolboxPosition_||this.toolboxPosition_!=e.utils.toolbox.Position.LEFT||this.targetWorkspace.getToolbox()||this.targetWorkspace.translate(this.targetWorkspace.scrollX+t,this.targetWorkspace.scrollY),this.width_=t,this.position(),this.targetWorkspace.recordDragTargets()}},e.registry.register(e.registry.Type.FLYOUTS_VERTICAL_TOOLBOX,e.registry.DEFAULT,e.VerticalFlyout),e.FlyoutButton=function(t,n,r,s){this.workspace_=t,this.targetWorkspace_=n,this.text_=r.text,this.position_=new e.utils.Coordinate(0,0),this.isLabel_=s,this.callbackKey_=r.callbackKey||r.callbackkey,this.cssClass_=r["web-class"]||null,this.onMouseUpWrapper_=null,this.info=r},e.FlyoutButton.MARGIN_X=5,e.FlyoutButton.MARGIN_Y=2,e.FlyoutButton.prototype.width=0,e.FlyoutButton.prototype.height=0,e.FlyoutButton.prototype.createDom=function(){var t=this.isLabel_?"blocklyFlyoutLabel":"blocklyFlyoutButton";if(this.cssClass_&&(t+=" "+this.cssClass_),this.svgGroup_=e.utils.dom.createSvgElement(e.utils.Svg.G,{class:t},this.workspace_.getCanvas()),!this.isLabel_)var n=e.utils.dom.createSvgElement(e.utils.Svg.RECT,{class:"blocklyFlyoutButtonShadow",rx:4,ry:4,x:1,y:1},this.svgGroup_);t=e.utils.dom.createSvgElement(e.utils.Svg.RECT,{class:this.isLabel_?"blocklyFlyoutLabelBackground":"blocklyFlyoutButtonBackground",rx:4,ry:4},this.svgGroup_);var r=e.utils.dom.createSvgElement(e.utils.Svg.TEXT,{class:this.isLabel_?"blocklyFlyoutLabelText":"blocklyText",x:0,y:0,"text-anchor":"middle"},this.svgGroup_),s=e.utils.replaceMessageReferences(this.text_);this.workspace_.RTL&&(s+="\u200f"),r.textContent=s,this.isLabel_&&(this.svgText_=r,this.workspace_.getThemeManager().subscribe(this.svgText_,"flyoutForegroundColour","fill"));var u=e.utils.style.getComputedStyle(r,"fontSize"),y=e.utils.style.getComputedStyle(r,"fontWeight"),x=e.utils.style.getComputedStyle(r,"fontFamily");return this.width=e.utils.dom.getFastTextWidthWithSizeString(r,u,y,x),s=e.utils.dom.measureFontMetrics(s,u,y,x),this.height=s.height,this.isLabel_||(this.width+=2*e.FlyoutButton.MARGIN_X,this.height+=2*e.FlyoutButton.MARGIN_Y,n.setAttribute("width",this.width),n.setAttribute("height",this.height)),t.setAttribute("width",this.width),t.setAttribute("height",this.height),r.setAttribute("x",this.width/2),r.setAttribute("y",this.height/2-s.height/2+s.baseline),this.updateTransform_(),this.onMouseUpWrapper_=e.browserEvents.conditionalBind(this.svgGroup_,"mouseup",this,this.onMouseUp_),this.svgGroup_},e.FlyoutButton.prototype.show=function(){this.updateTransform_(),this.svgGroup_.setAttribute("display","block")},e.FlyoutButton.prototype.updateTransform_=function(){this.svgGroup_.setAttribute("transform","translate("+this.position_.x+","+this.position_.y+")")},e.FlyoutButton.prototype.moveTo=function(t,n){this.position_.x=t,this.position_.y=n,this.updateTransform_()},e.FlyoutButton.prototype.isLabel=function(){return this.isLabel_},e.FlyoutButton.prototype.getPosition=function(){return this.position_},e.FlyoutButton.prototype.getButtonText=function(){return this.text_},e.FlyoutButton.prototype.getTargetWorkspace=function(){return this.targetWorkspace_},e.FlyoutButton.prototype.dispose=function(){this.onMouseUpWrapper_&&e.browserEvents.unbind(this.onMouseUpWrapper_),this.svgGroup_&&e.utils.dom.removeNode(this.svgGroup_),this.svgText_&&this.workspace_.getThemeManager().unsubscribe(this.svgText_)},e.FlyoutButton.prototype.onMouseUp_=function(t){(t=this.targetWorkspace_.getGesture(t))&&t.cancel(),this.isLabel_&&this.callbackKey_?console.warn("Labels should not have callbacks. Label text: "+this.text_):this.isLabel_||this.callbackKey_&&this.targetWorkspace_.getButtonCallback(this.callbackKey_)?this.isLabel_||this.targetWorkspace_.getButtonCallback(this.callbackKey_)(this):console.warn("Buttons should have callbacks. Button text: "+this.text_)},e.Css.register(".blocklyFlyoutButton {,fill: #888;,cursor: default;,},.blocklyFlyoutButtonShadow {,fill: #666;,},.blocklyFlyoutButton:hover {,fill: #aaa;,},.blocklyFlyoutLabel {,cursor: default;,},.blocklyFlyoutLabelBackground {,opacity: 0;,}".split(",")),e.Generator=function(t){this.name_=t,this.FUNCTION_NAME_PLACEHOLDER_REGEXP_=new RegExp(this.FUNCTION_NAME_PLACEHOLDER_,"g")},e.Generator.prototype.INFINITE_LOOP_TRAP=null,e.Generator.prototype.STATEMENT_PREFIX=null,e.Generator.prototype.STATEMENT_SUFFIX=null,e.Generator.prototype.INDENT="  ",e.Generator.prototype.COMMENT_WRAP=60,e.Generator.prototype.ORDER_OVERRIDES=[],e.Generator.prototype.isInitialized=null,e.Generator.prototype.workspaceToCode=function(t){t||(console.warn("No workspace specified in workspaceToCode call.  Guessing."),t=e.getMainWorkspace());var n=[];this.init(t),t=t.getTopBlocks(!0);for(var s,r=0;s=t[r];r++){var u=this.blockToCode(s);Array.isArray(u)&&(u=u[0]),u&&(s.outputConnection&&(u=this.scrubNakedValue(u),this.STATEMENT_PREFIX&&!s.suppressPrefixSuffix&&(u=this.injectId(this.STATEMENT_PREFIX,s)+u),this.STATEMENT_SUFFIX&&!s.suppressPrefixSuffix&&(u+=this.injectId(this.STATEMENT_SUFFIX,s))),n.push(u))}return n=n.join("\n"),(n=(n=(n=this.finish(n)).replace(/^\s+\n/,"")).replace(/\n\s+$/,"\n")).replace(/[ \t]+\n/g,"\n")},e.Generator.prototype.prefixLines=function(t,n){return n+t.replace(/(?!\n$)\n/g,"\n"+n)},e.Generator.prototype.allNestedComments=function(t){var n=[];t=t.getDescendants(!0);for(var r=0;r<t.length;r++){var s=t[r].getCommentText();s&&n.push(s)}return n.length&&n.push(""),n.join("\n")},e.Generator.prototype.blockToCode=function(t,n){if(!1===this.isInitialized&&console.warn("Generator init was not called before blockToCode was called."),!t)return"";if(!t.isEnabled())return n?"":this.blockToCode(t.getNextBlock());if(t.isInsertionMarker())return n?"":this.blockToCode(t.getChildren(!1)[0]);var r=this[t.type];if("function"!=typeof r)throw Error('Language "'+this.name_+'" does not know how to generate code for block type "'+t.type+'".');if(r=r.call(t,t),Array.isArray(r)){if(!t.outputConnection)throw TypeError("Expecting string from statement block: "+t.type);return[this.scrub_(t,r[0],n),r[1]]}if("string"==typeof r)return this.STATEMENT_PREFIX&&!t.suppressPrefixSuffix&&(r=this.injectId(this.STATEMENT_PREFIX,t)+r),this.STATEMENT_SUFFIX&&!t.suppressPrefixSuffix&&(r+=this.injectId(this.STATEMENT_SUFFIX,t)),this.scrub_(t,r,n);if(null===r)return"";throw SyntaxError("Invalid code generated: "+r)},e.Generator.prototype.valueToCode=function(t,n,r){if(isNaN(r))throw TypeError("Expecting valid order from block: "+t.type);var s=t.getInputTargetBlock(n);if(!s||""===(n=this.blockToCode(s)))return"";if(!Array.isArray(n))throw TypeError("Expecting tuple from value block: "+s.type);if(t=n[0],n=n[1],isNaN(n))throw TypeError("Expecting valid order from value block: "+s.type);if(!t)return"";s=!1;var u=Math.floor(r),y=Math.floor(n);if(u<=y&&(u!=y||0!=u&&99!=u))for(s=!0,u=0;u<this.ORDER_OVERRIDES.length;u++)if(this.ORDER_OVERRIDES[u][0]==r&&this.ORDER_OVERRIDES[u][1]==n){s=!1;break}return s&&(t="("+t+")"),t},e.Generator.prototype.statementToCode=function(t,n){if(t=t.getInputTargetBlock(n),"string"!=typeof(n=this.blockToCode(t)))throw TypeError("Expecting code from statement block: "+(t&&t.type));return n&&(n=this.prefixLines(n,this.INDENT)),n},e.Generator.prototype.addLoopTrap=function(t,n){return this.INFINITE_LOOP_TRAP&&(t=this.prefixLines(this.injectId(this.INFINITE_LOOP_TRAP,n),this.INDENT)+t),this.STATEMENT_SUFFIX&&!n.suppressPrefixSuffix&&(t=this.prefixLines(this.injectId(this.STATEMENT_SUFFIX,n),this.INDENT)+t),this.STATEMENT_PREFIX&&!n.suppressPrefixSuffix&&(t+=this.prefixLines(this.injectId(this.STATEMENT_PREFIX,n),this.INDENT)),t},e.Generator.prototype.injectId=function(t,n){return n=n.id.replace(/\$/g,"$$$$"),t.replace(/%1/g,"'"+n+"'")},e.Generator.prototype.RESERVED_WORDS_="",e.Generator.prototype.addReservedWords=function(t){this.RESERVED_WORDS_+=t+","},e.Generator.prototype.FUNCTION_NAME_PLACEHOLDER_="{leCUI8hutHZI4480Dc}",Object.defineProperty(e.Generator.prototype,"variableDB_",{get:function(){return e.utils.deprecation.warn("variableDB_","May 2021","May 2026","nameDB_"),this.nameDB_},set:function(t){e.utils.deprecation.warn("variableDB_","May 2021","May 2026","nameDB_"),this.nameDB_=t}}),e.Generator.prototype.provideFunction_=function(t,n){if(!this.definitions_[t]){var s,r=this.nameDB_.getDistinctName(t,e.PROCEDURE_CATEGORY_NAME);for(this.functionNames_[t]=r,n=n.join("\n").replace(this.FUNCTION_NAME_PLACEHOLDER_REGEXP_,r);s!=n;)s=n,n=n.replace(/^(( {2})*) {2}/gm,"$1\0");n=n.replace(/\0/g,this.INDENT),this.definitions_[t]=n}return this.functionNames_[t]},e.Generator.prototype.init=function(t){this.definitions_=Object.create(null),this.functionNames_=Object.create(null)},e.Generator.prototype.scrub_=function(t,n,r){return n},e.Generator.prototype.finish=function(t){return delete this.definitions_,delete this.functionNames_,t},e.Generator.prototype.scrubNakedValue=function(t){return t},e.IToolboxItem=function(){},e.ISelectableToolboxItem=function(){},e.ICollapsibleToolboxItem=function(){},e.ToolboxItem=function(t,n,r){this.id_=t.toolboxitemid||e.utils.IdGenerator.getNextUniqueId(),this.level_=(this.parent_=r||null)?this.parent_.getLevel()+1:0,this.toolboxItemDef_=t,this.parentToolbox_=n,this.workspace_=this.parentToolbox_.getWorkspace()},e.ToolboxItem.prototype.init=function(){},e.ToolboxItem.prototype.getDiv=function(){return null},e.ToolboxItem.prototype.getId=function(){return this.id_},e.ToolboxItem.prototype.getParent=function(){return null},e.ToolboxItem.prototype.getLevel=function(){return this.level_},e.ToolboxItem.prototype.isSelectable=function(){return!1},e.ToolboxItem.prototype.isCollapsible=function(){return!1},e.ToolboxItem.prototype.dispose=function(){},e.ToolboxCategory=function(t,n,r){e.ToolboxCategory.superClass_.constructor.call(this,t,n,r),this.name_=e.utils.replaceMessageReferences(t.name),this.colour_=this.getColour_(t),this.labelDom_=this.iconDom_=this.rowContents_=this.rowDiv_=this.htmlDiv_=null,this.cssConfig_=this.makeDefaultCssConfig_(),e.utils.object.mixin(this.cssConfig_,t.cssconfig||t.cssConfig),this.isDisabled_=this.isHidden_=!1,this.flyoutItems_=[],this.parseContents_(t)},e.utils.object.inherits(e.ToolboxCategory,e.ToolboxItem),e.ToolboxCategory.registrationName="category",e.ToolboxCategory.nestedPadding=19,e.ToolboxCategory.borderWidth=8,e.ToolboxCategory.defaultBackgroundColour="#57e",e.ToolboxCategory.prototype.makeDefaultCssConfig_=function(){return{container:"blocklyToolboxCategory",row:"blocklyTreeRow",rowcontentcontainer:"blocklyTreeRowContentContainer",icon:"blocklyTreeIcon",label:"blocklyTreeLabel",contents:"blocklyToolboxContents",selected:"blocklyTreeSelected",openicon:"blocklyTreeIconOpen",closedicon:"blocklyTreeIconClosed"}},e.ToolboxCategory.prototype.parseContents_=function(t){var n=t.contents;if(t.custom)this.flyoutItems_=t.custom;else if(n){t=0;for(var r;r=n[t];t++)this.flyoutItems_.push(r)}},e.ToolboxCategory.prototype.init=function(){this.createDom_(),"true"==this.toolboxItemDef_.hidden&&this.hide()},e.ToolboxCategory.prototype.createDom_=function(){return this.htmlDiv_=this.createContainer_(),e.utils.aria.setRole(this.htmlDiv_,e.utils.aria.Role.TREEITEM),e.utils.aria.setState(this.htmlDiv_,e.utils.aria.State.SELECTED,!1),e.utils.aria.setState(this.htmlDiv_,e.utils.aria.State.LEVEL,this.level_),this.rowDiv_=this.createRowContainer_(),this.rowDiv_.style.pointerEvents="auto",this.htmlDiv_.appendChild(this.rowDiv_),this.rowContents_=this.createRowContentsContainer_(),this.rowContents_.style.pointerEvents="none",this.rowDiv_.appendChild(this.rowContents_),this.iconDom_=this.createIconDom_(),e.utils.aria.setRole(this.iconDom_,e.utils.aria.Role.PRESENTATION),this.rowContents_.appendChild(this.iconDom_),this.labelDom_=this.createLabelDom_(this.name_),this.rowContents_.appendChild(this.labelDom_),e.utils.aria.setState(this.htmlDiv_,e.utils.aria.State.LABELLEDBY,this.labelDom_.getAttribute("id")),this.addColourBorder_(this.colour_),this.htmlDiv_},e.ToolboxCategory.prototype.createContainer_=function(){var t=document.createElement("div");return e.utils.dom.addClass(t,this.cssConfig_.container),t},e.ToolboxCategory.prototype.createRowContainer_=function(){var t=document.createElement("div");e.utils.dom.addClass(t,this.cssConfig_.row);var n=e.ToolboxCategory.nestedPadding*this.getLevel();return n=n.toString()+"px",this.workspace_.RTL?t.style.paddingRight=n:t.style.paddingLeft=n,t},e.ToolboxCategory.prototype.createRowContentsContainer_=function(){var t=document.createElement("div");return e.utils.dom.addClass(t,this.cssConfig_.rowcontentcontainer),t},e.ToolboxCategory.prototype.createIconDom_=function(){var t=document.createElement("span");return this.parentToolbox_.isHorizontal()||e.utils.dom.addClass(t,this.cssConfig_.icon),t.style.display="inline-block",t},e.ToolboxCategory.prototype.createLabelDom_=function(t){var n=document.createElement("span");return n.setAttribute("id",this.getId()+".label"),n.textContent=t,e.utils.dom.addClass(n,this.cssConfig_.label),n},e.ToolboxCategory.prototype.refreshTheme=function(){this.colour_=this.getColour_(this.toolboxItemDef_),this.addColourBorder_(this.colour_)},e.ToolboxCategory.prototype.addColourBorder_=function(t){t&&(t=e.ToolboxCategory.borderWidth+"px solid "+(t||"#ddd"),this.workspace_.RTL?this.rowDiv_.style.borderRight=t:this.rowDiv_.style.borderLeft=t)},e.ToolboxCategory.prototype.getColour_=function(t){var n=t.categorystyle||t.categoryStyle;return(t=t.colour)&&n?(console.warn('Toolbox category "'+this.name_+'" must not have both a style and a colour'),""):n?this.getColourfromStyle_(n):this.parseColour_(t)},e.ToolboxCategory.prototype.getColourfromStyle_=function(t){var n=this.workspace_.getTheme();if(t&&n){if((n=n.categoryStyles[t])&&n.colour)return this.parseColour_(n.colour);console.warn('Style "'+t+'" must exist and contain a colour value')}return""},e.ToolboxCategory.prototype.getClickTarget=function(){return this.rowDiv_},e.ToolboxCategory.prototype.parseColour_=function(t){if(null==(t=e.utils.replaceMessageReferences(t))||""===t)return"";var n=Number(t);return isNaN(n)?(n=e.utils.colour.parse(t))?n:(console.warn('Toolbox category "'+this.name_+'" has unrecognized colour attribute: '+t),""):e.hueToHex(n)},e.ToolboxCategory.prototype.openIcon_=function(t){t&&(e.utils.dom.removeClasses(t,this.cssConfig_.closedicon),e.utils.dom.addClass(t,this.cssConfig_.openicon))},e.ToolboxCategory.prototype.closeIcon_=function(t){t&&(e.utils.dom.removeClasses(t,this.cssConfig_.openicon),e.utils.dom.addClass(t,this.cssConfig_.closedicon))},e.ToolboxCategory.prototype.setVisible_=function(t){this.htmlDiv_.style.display=t?"block":"none",this.isHidden_=!t,this.parentToolbox_.getSelectedItem()==this&&this.parentToolbox_.clearSelection()},e.ToolboxCategory.prototype.hide=function(){this.setVisible_(!1)},e.ToolboxCategory.prototype.show=function(){this.setVisible_(!0)},e.ToolboxCategory.prototype.isVisible=function(){return!this.isHidden_&&this.allAncestorsExpanded_()},e.ToolboxCategory.prototype.allAncestorsExpanded_=function(){for(var t=this;t.getParent();)if(!(t=t.getParent()).isExpanded())return!1;return!0},e.ToolboxCategory.prototype.isSelectable=function(){return this.isVisible()&&!this.isDisabled_},e.ToolboxCategory.prototype.onClick=function(t){},e.ToolboxCategory.prototype.setSelected=function(t){if(t){var n=this.parseColour_(e.ToolboxCategory.defaultBackgroundColour);this.rowDiv_.style.backgroundColor=this.colour_||n,e.utils.dom.addClass(this.rowDiv_,this.cssConfig_.selected)}else this.rowDiv_.style.backgroundColor="",e.utils.dom.removeClass(this.rowDiv_,this.cssConfig_.selected);e.utils.aria.setState(this.htmlDiv_,e.utils.aria.State.SELECTED,t)},e.ToolboxCategory.prototype.setDisabled=function(t){this.isDisabled_=t,this.getDiv().setAttribute("disabled",t),t?this.getDiv().setAttribute("disabled","true"):this.getDiv().removeAttribute("disabled")},e.ToolboxCategory.prototype.getName=function(){return this.name_},e.ToolboxCategory.prototype.getParent=function(){return this.parent_},e.ToolboxCategory.prototype.getDiv=function(){return this.htmlDiv_},e.ToolboxCategory.prototype.getContents=function(){return this.flyoutItems_},e.ToolboxCategory.prototype.updateFlyoutContents=function(t){this.flyoutItems_=[],"string"==typeof t?this.toolboxItemDef_.custom=t:(delete this.toolboxItemDef_.custom,this.toolboxItemDef_.contents=e.utils.toolbox.convertFlyoutDefToJsonArray(t)),this.parseContents_(this.toolboxItemDef_)},e.ToolboxCategory.prototype.dispose=function(){e.utils.dom.removeNode(this.htmlDiv_)},e.Css.register([".blocklyTreeRow:not(.blocklyTreeSelected):hover {","background-color: rgba(255, 255, 255, 0.2);","}",'.blocklyToolboxDiv[layout="h"] .blocklyToolboxCategory {',"margin: 1px 5px 1px 0;","}",'.blocklyToolboxDiv[dir="RTL"][layout="h"] .blocklyToolboxCategory {',"margin: 1px 0 1px 5px;","}",".blocklyTreeRow {","height: 22px;","line-height: 22px;","margin-bottom: 3px;","padding-right: 8px;","white-space: nowrap;","}",'.blocklyToolboxDiv[dir="RTL"] .blocklyTreeRow {',"margin-left: 8px;","padding-right: 0px","}",".blocklyTreeIcon {","background-image: url(<<<PATH>>>/sprites.png);","height: 16px;","vertical-align: middle;","visibility: hidden;","width: 16px;","}",".blocklyTreeIconClosed {","background-position: -32px -1px;","}",'.blocklyToolboxDiv[dir="RTL"] .blocklyTreeIconClosed {',"background-position: 0 -1px;","}",".blocklyTreeSelected>.blocklyTreeIconClosed {","background-position: -32px -17px;","}",'.blocklyToolboxDiv[dir="RTL"] .blocklyTreeSelected>.blocklyTreeIconClosed {',"background-position: 0 -17px;","}",".blocklyTreeIconOpen {","background-position: -16px -1px;","}",".blocklyTreeSelected>.blocklyTreeIconOpen {","background-position: -16px -17px;","}",".blocklyTreeLabel {","cursor: default;","font: 16px sans-serif;","padding: 0 3px;","vertical-align: middle;","}",".blocklyToolboxDelete .blocklyTreeLabel {",'cursor: url("<<<PATH>>>/handdelete.cur"), auto;',"}",".blocklyTreeSelected .blocklyTreeLabel {","color: #fff;","}"]),e.registry.register(e.registry.Type.TOOLBOX_ITEM,e.ToolboxCategory.registrationName,e.ToolboxCategory),e.ToolboxSeparator=function(t,n){e.ToolboxSeparator.superClass_.constructor.call(this,t,n),this.cssConfig_={container:"blocklyTreeSeparator"},e.utils.object.mixin(this.cssConfig_,t.cssconfig||t.cssConfig)},e.utils.object.inherits(e.ToolboxSeparator,e.ToolboxItem),e.ToolboxSeparator.registrationName="sep",e.ToolboxSeparator.prototype.init=function(){this.createDom_()},e.ToolboxSeparator.prototype.createDom_=function(){var t=document.createElement("div");return e.utils.dom.addClass(t,this.cssConfig_.container),this.htmlDiv_=t},e.ToolboxSeparator.prototype.getDiv=function(){return this.htmlDiv_},e.ToolboxSeparator.prototype.dispose=function(){e.utils.dom.removeNode(this.htmlDiv_)},e.Css.register('.blocklyTreeSeparator {,border-bottom: solid #e5e5e5 1px;,height: 0;,margin: 5px 0;,},.blocklyToolboxDiv[layout="h"] .blocklyTreeSeparator {,border-right: solid #e5e5e5 1px;,border-bottom: none;,height: auto;,margin: 0 5px 0 5px;,padding: 5px 0;,width: 0;,}'.split(",")),e.registry.register(e.registry.Type.TOOLBOX_ITEM,e.ToolboxSeparator.registrationName,e.ToolboxSeparator),e.CollapsibleToolboxCategory=function(t,n,r){this.subcategoriesDiv_=null,this.expanded_=!1,this.toolboxItems_=[],e.CollapsibleToolboxCategory.superClass_.constructor.call(this,t,n,r)},e.utils.object.inherits(e.CollapsibleToolboxCategory,e.ToolboxCategory),e.CollapsibleToolboxCategory.registrationName="collapsibleCategory",e.CollapsibleToolboxCategory.prototype.makeDefaultCssConfig_=function(){var t=e.CollapsibleToolboxCategory.superClass_.makeDefaultCssConfig_.call(this);return t.contents="blocklyToolboxContents",t},e.CollapsibleToolboxCategory.prototype.parseContents_=function(t){var n=t.contents,r=!0;if(t.custom)this.flyoutItems_=t.custom;else if(n){t=0;for(var s;s=n[t];t++)!e.registry.hasItem(e.registry.Type.TOOLBOX_ITEM,s.kind)||s.kind.toLowerCase()==e.ToolboxSeparator.registrationName&&r?(this.flyoutItems_.push(s),r=!0):(this.createToolboxItem_(s),r=!1)}},e.CollapsibleToolboxCategory.prototype.createToolboxItem_=function(t){var n=t.kind;"CATEGORY"==n.toUpperCase()&&e.utils.toolbox.isCategoryCollapsible(t)&&(n=e.CollapsibleToolboxCategory.registrationName),t=new(e.registry.getClass(e.registry.Type.TOOLBOX_ITEM,n))(t,this.parentToolbox_,this),this.toolboxItems_.push(t)},e.CollapsibleToolboxCategory.prototype.init=function(){e.CollapsibleToolboxCategory.superClass_.init.call(this),this.setExpanded("true"==this.toolboxItemDef_.expanded||this.toolboxItemDef_.expanded)},e.CollapsibleToolboxCategory.prototype.createDom_=function(){e.CollapsibleToolboxCategory.superClass_.createDom_.call(this);var t=this.getChildToolboxItems();return this.subcategoriesDiv_=this.createSubCategoriesDom_(t),e.utils.aria.setRole(this.subcategoriesDiv_,e.utils.aria.Role.GROUP),this.htmlDiv_.appendChild(this.subcategoriesDiv_),this.htmlDiv_},e.CollapsibleToolboxCategory.prototype.createIconDom_=function(){var t=document.createElement("span");return this.parentToolbox_.isHorizontal()||(e.utils.dom.addClass(t,this.cssConfig_.icon),t.style.visibility="visible"),t.style.display="inline-block",t},e.CollapsibleToolboxCategory.prototype.createSubCategoriesDom_=function(t){var n=document.createElement("div");e.utils.dom.addClass(n,this.cssConfig_.contents);for(var r=0;r<t.length;r++){var s=t[r];s.init();var u=s.getDiv();n.appendChild(u),s.getClickTarget&&s.getClickTarget().setAttribute("id",s.getId())}return n},e.CollapsibleToolboxCategory.prototype.setExpanded=function(t){this.expanded_!=t&&((this.expanded_=t)?(this.subcategoriesDiv_.style.display="block",this.openIcon_(this.iconDom_)):(this.subcategoriesDiv_.style.display="none",this.closeIcon_(this.iconDom_)),e.utils.aria.setState(this.htmlDiv_,e.utils.aria.State.EXPANDED,t),this.parentToolbox_.handleToolboxItemResize())},e.CollapsibleToolboxCategory.prototype.setVisible_=function(t){this.htmlDiv_.style.display=t?"block":"none";for(var r,n=0;r=this.getChildToolboxItems()[n];n++)r.setVisible_(t);this.isHidden_=!t,this.parentToolbox_.getSelectedItem()==this&&this.parentToolbox_.clearSelection()},e.CollapsibleToolboxCategory.prototype.isExpanded=function(){return this.expanded_},e.CollapsibleToolboxCategory.prototype.isCollapsible=function(){return!0},e.CollapsibleToolboxCategory.prototype.onClick=function(t){this.toggleExpanded()},e.CollapsibleToolboxCategory.prototype.toggleExpanded=function(){this.setExpanded(!this.expanded_)},e.CollapsibleToolboxCategory.prototype.getDiv=function(){return this.htmlDiv_},e.CollapsibleToolboxCategory.prototype.getChildToolboxItems=function(){return this.toolboxItems_},e.registry.register(e.registry.Type.TOOLBOX_ITEM,e.CollapsibleToolboxCategory.registrationName,e.CollapsibleToolboxCategory),e.Events.ToolboxItemSelect=function(t,n,r){e.Events.ToolboxItemSelect.superClass_.constructor.call(this,r),this.oldItem=t,this.newItem=n},e.utils.object.inherits(e.Events.ToolboxItemSelect,e.Events.UiBase),e.Events.ToolboxItemSelect.prototype.type=e.Events.TOOLBOX_ITEM_SELECT,e.Events.ToolboxItemSelect.prototype.toJson=function(){var t=e.Events.ToolboxItemSelect.superClass_.toJson.call(this);return t.oldItem=this.oldItem,t.newItem=this.newItem,t},e.Events.ToolboxItemSelect.prototype.fromJson=function(t){e.Events.ToolboxItemSelect.superClass_.fromJson.call(this,t),this.oldItem=t.oldItem,this.newItem=t.newItem},e.registry.register(e.registry.Type.EVENT,e.Events.TOOLBOX_ITEM_SELECT,e.Events.ToolboxItemSelect),e.IAutoHideable=function(){},e.IStyleable=function(){},e.IToolbox=function(){},e.Toolbox=function(t){e.Toolbox.superClass_.constructor.call(this),this.workspace_=t,this.id="toolbox",this.toolboxDef_=t.options.languageTree||{contents:[]},this.horizontalLayout_=t.options.horizontalLayout,this.contentsDiv_=this.HtmlDiv=null,this.isVisible_=!1,this.contents_=[],this.height_=this.width_=0,this.RTL=t.options.RTL,this.flyout_=null,this.contentMap_=Object.create(null),this.toolboxPosition=t.options.toolboxPosition,this.previouslySelectedItem_=this.selectedItem_=null,this.boundEvents_=[]},e.utils.object.inherits(e.Toolbox,e.DeleteArea),e.Toolbox.prototype.onShortcut=function(t){return!1},e.Toolbox.prototype.init=function(){var t=this.workspace_,n=t.getParentSvg();this.flyout_=this.createFlyout_(),this.HtmlDiv=this.createDom_(this.workspace_),e.utils.dom.insertAfter(this.flyout_.createDom("svg"),n),this.setVisible(!0),this.flyout_.init(t),this.render(this.toolboxDef_),(t=t.getThemeManager()).subscribe(this.HtmlDiv,"toolboxBackgroundColour","background-color"),t.subscribe(this.HtmlDiv,"toolboxForegroundColour","color"),this.workspace_.getComponentManager().addComponent({component:this,weight:1,capabilities:[e.ComponentManager.Capability.AUTOHIDEABLE,e.ComponentManager.Capability.DELETE_AREA,e.ComponentManager.Capability.DRAG_TARGET]})},e.Toolbox.prototype.createDom_=function(t){t=t.getParentSvg();var n=this.createContainer_();return this.contentsDiv_=this.createContentsContainer_(),this.contentsDiv_.tabIndex=0,e.utils.aria.setRole(this.contentsDiv_,e.utils.aria.Role.TREE),n.appendChild(this.contentsDiv_),t.parentNode.insertBefore(n,t),this.attachEvents_(n,this.contentsDiv_),n},e.Toolbox.prototype.createContainer_=function(){var t=document.createElement("div");return t.setAttribute("layout",this.isHorizontal()?"h":"v"),e.utils.dom.addClass(t,"blocklyToolboxDiv"),e.utils.dom.addClass(t,"blocklyNonSelectable"),t.setAttribute("dir",this.RTL?"RTL":"LTR"),t},e.Toolbox.prototype.createContentsContainer_=function(){var t=document.createElement("div");return e.utils.dom.addClass(t,"blocklyToolboxContents"),this.isHorizontal()&&(t.style.flexDirection="row"),t},e.Toolbox.prototype.attachEvents_=function(t,n){t=e.browserEvents.conditionalBind(t,"click",this,this.onClick_,!1,!0),this.boundEvents_.push(t),n=e.browserEvents.conditionalBind(n,"keydown",this,this.onKeyDown_,!1,!0),this.boundEvents_.push(n)},e.Toolbox.prototype.onClick_=function(t){if(e.utils.isRightButton(t)||t.target==this.HtmlDiv)e.hideChaff(!1);else{var n=t.target.getAttribute("id");n&&(n=this.getToolboxItemById(n)).isSelectable()&&(this.setSelectedItem(n),n.onClick(t)),e.hideChaff(!0)}e.Touch.clearTouchIdentifier()},e.Toolbox.prototype.onKeyDown_=function(t){var n=!1;switch(t.keyCode){case e.utils.KeyCodes.DOWN:n=this.selectNext_();break;case e.utils.KeyCodes.UP:n=this.selectPrevious_();break;case e.utils.KeyCodes.LEFT:n=this.selectParent_();break;case e.utils.KeyCodes.RIGHT:n=this.selectChild_();break;case e.utils.KeyCodes.ENTER:case e.utils.KeyCodes.SPACE:this.selectedItem_&&this.selectedItem_.isCollapsible()&&(this.selectedItem_.toggleExpanded(),n=!0);break;default:n=!1}!n&&this.selectedItem_&&this.selectedItem_.onKeyDown&&(n=this.selectedItem_.onKeyDown(t)),n&&t.preventDefault()},e.Toolbox.prototype.createFlyout_=function(){var t=this.workspace_,n=new e.Options({parentWorkspace:t,rtl:t.RTL,oneBasedIndex:t.options.oneBasedIndex,horizontalLayout:t.horizontalLayout,renderer:t.options.renderer,rendererOverrides:t.options.rendererOverrides,move:{scrollbars:!0}});return n.toolboxPosition=t.options.toolboxPosition,new(e.registry.getClassFromOptions(t.horizontalLayout?e.registry.Type.FLYOUTS_HORIZONTAL_TOOLBOX:e.registry.Type.FLYOUTS_VERTICAL_TOOLBOX,t.options,!0))(n)},e.Toolbox.prototype.render=function(t){this.toolboxDef_=t;for(var n=0;n<this.contents_.length;n++){var r=this.contents_[n];r&&r.dispose()}this.contents_=[],this.contentMap_=Object.create(null),this.renderContents_(t.contents),this.position(),this.handleToolboxItemResize()},e.Toolbox.prototype.renderContents_=function(t){for(var s,n=document.createDocumentFragment(),r=0;s=t[r];r++)this.createToolboxItem_(s,n);this.contentsDiv_.appendChild(n)},e.Toolbox.prototype.createToolboxItem_=function(t,n){var r=t.kind;"CATEGORY"==r.toUpperCase()&&e.utils.toolbox.isCategoryCollapsible(t)&&(r=e.CollapsibleToolboxCategory.registrationName),(r=e.registry.getClass(e.registry.Type.TOOLBOX_ITEM,r.toLowerCase()))&&(t=new r(t,this),this.addToolboxItem_(t),t.init(),(r=t.getDiv())&&n.appendChild(r),t.getClickTarget&&t.getClickTarget().setAttribute("id",t.getId()))},e.Toolbox.prototype.addToolboxItem_=function(t){if(this.contents_.push(t),this.contentMap_[t.getId()]=t,t.isCollapsible())for(var r,n=0;r=t.getChildToolboxItems()[n];n++)this.addToolboxItem_(r)},e.Toolbox.prototype.getToolboxItems=function(){return this.contents_},e.Toolbox.prototype.addStyle=function(t){e.utils.dom.addClass(this.HtmlDiv,t)},e.Toolbox.prototype.removeStyle=function(t){e.utils.dom.removeClass(this.HtmlDiv,t)},e.Toolbox.prototype.getClientRect=function(){if(!this.HtmlDiv||!this.isVisible_)return null;var t=this.HtmlDiv.getBoundingClientRect(),n=t.top,r=n+t.height,s=t.left;return t=s+t.width,this.toolboxPosition==e.utils.toolbox.Position.TOP?new e.utils.Rect(-1e7,r,-1e7,1e7):this.toolboxPosition==e.utils.toolbox.Position.BOTTOM?new e.utils.Rect(n,1e7,-1e7,1e7):this.toolboxPosition==e.utils.toolbox.Position.LEFT?new e.utils.Rect(-1e7,1e7,-1e7,t):new e.utils.Rect(-1e7,1e7,s,1e7)},e.Toolbox.prototype.wouldDelete=function(t,n){return this.updateWouldDelete_(t instanceof e.BlockSvg?!t.getParent()&&t.isDeletable():t.isDeletable()),this.wouldDelete_},e.Toolbox.prototype.onDragEnter=function(t){this.updateCursorDeleteStyle_(!0)},e.Toolbox.prototype.onDragExit=function(t){this.updateCursorDeleteStyle_(!1)},e.Toolbox.prototype.onDrop=function(t){this.updateCursorDeleteStyle_(!1)},e.Toolbox.prototype.updateWouldDelete_=function(t){t!==this.wouldDelete_&&(this.updateCursorDeleteStyle_(!1),this.wouldDelete_=t,this.updateCursorDeleteStyle_(!0))},e.Toolbox.prototype.updateCursorDeleteStyle_=function(t){var n=this.wouldDelete_?"blocklyToolboxDelete":"blocklyToolboxGrab";t?this.addStyle(n):this.removeStyle(n)},e.Toolbox.prototype.getToolboxItemById=function(t){return this.contentMap_[t]||null},e.Toolbox.prototype.getWidth=function(){return this.width_},e.Toolbox.prototype.getHeight=function(){return this.height_},e.Toolbox.prototype.getFlyout=function(){return this.flyout_},e.Toolbox.prototype.getWorkspace=function(){return this.workspace_},e.Toolbox.prototype.getSelectedItem=function(){return this.selectedItem_},e.Toolbox.prototype.getPreviouslySelectedItem=function(){return this.previouslySelectedItem_},e.Toolbox.prototype.isHorizontal=function(){return this.horizontalLayout_},e.Toolbox.prototype.position=function(){var t=this.workspace_.getMetrics(),n=this.HtmlDiv;n&&(this.horizontalLayout_?(n.style.left="0",n.style.height="auto",n.style.width="100%",this.height_=n.offsetHeight,this.width_=t.viewWidth,this.toolboxPosition==e.utils.toolbox.Position.TOP?n.style.top="0":n.style.bottom="0"):(this.toolboxPosition==e.utils.toolbox.Position.RIGHT?n.style.right="0":n.style.left="0",n.style.height="100%",this.width_=n.offsetWidth,this.height_=t.viewHeight),this.flyout_.position())},e.Toolbox.prototype.handleToolboxItemResize=function(){var t=this.workspace_,n=this.HtmlDiv.getBoundingClientRect();t.translate(this.toolboxPosition==e.utils.toolbox.Position.LEFT?t.scrollX+n.width:t.scrollX,this.toolboxPosition==e.utils.toolbox.Position.TOP?t.scrollY+n.height:t.scrollY),e.svgResize(t)},e.Toolbox.prototype.clearSelection=function(){this.setSelectedItem(null)},e.Toolbox.prototype.refreshTheme=function(){for(var t=0;t<this.contents_.length;t++){var n=this.contents_[t];n.refreshTheme&&n.refreshTheme()}},e.Toolbox.prototype.refreshSelection=function(){this.selectedItem_&&this.selectedItem_.isSelectable()&&this.selectedItem_.getContents().length&&this.flyout_.show(this.selectedItem_.getContents())},e.Toolbox.prototype.setVisible=function(t){this.isVisible_!==t&&(this.HtmlDiv.style.display=t?"block":"none",this.isVisible_=t,this.workspace_.recordDragTargets())},e.Toolbox.prototype.autoHide=function(t){!t&&this.flyout_&&this.flyout_.autoClose&&this.clearSelection()},e.Toolbox.prototype.setSelectedItem=function(t){var n=this.selectedItem_;!t&&!n||t&&!t.isSelectable()||(this.shouldDeselectItem_(n,t)&&null!=n&&this.deselectItem_(n),this.shouldSelectItem_(n,t)&&null!=t&&this.selectItem_(n,t),this.updateFlyout_(n,t),this.fireSelectEvent_(n,t))},e.Toolbox.prototype.shouldDeselectItem_=function(t,n){return null!=t&&(!t.isCollapsible()||t!=n)},e.Toolbox.prototype.shouldSelectItem_=function(t,n){return null!=n&&n!=t},e.Toolbox.prototype.deselectItem_=function(t){this.selectedItem_=null,this.previouslySelectedItem_=t,t.setSelected(!1),e.utils.aria.setState(this.contentsDiv_,e.utils.aria.State.ACTIVEDESCENDANT,"")},e.Toolbox.prototype.selectItem_=function(t,n){this.selectedItem_=n,this.previouslySelectedItem_=t,n.setSelected(!0),e.utils.aria.setState(this.contentsDiv_,e.utils.aria.State.ACTIVEDESCENDANT,n.getId())},e.Toolbox.prototype.selectItemByPosition=function(t){-1<t&&t<this.contents_.length&&(t=this.contents_[t]).isSelectable()&&this.setSelectedItem(t)},e.Toolbox.prototype.updateFlyout_=function(t,n){(t!=n||n.isCollapsible())&&n&&n.getContents().length?(this.flyout_.show(n.getContents()),this.flyout_.scrollToStart()):this.flyout_.hide()},e.Toolbox.prototype.fireSelectEvent_=function(t,n){var r=t&&t.getName(),s=n&&n.getName();t==n&&(s=null),t=new(e.Events.get(e.Events.TOOLBOX_ITEM_SELECT))(r,s,this.workspace_.id),e.Events.fire(t)},e.Toolbox.prototype.selectParent_=function(){return!(!this.selectedItem_||(this.selectedItem_.isCollapsible()&&this.selectedItem_.isExpanded()?(this.selectedItem_.setExpanded(!1),0):!this.selectedItem_.getParent()||!this.selectedItem_.getParent().isSelectable()||(this.setSelectedItem(this.selectedItem_.getParent()),0)))},e.Toolbox.prototype.selectChild_=function(){if(!this.selectedItem_||!this.selectedItem_.isCollapsible())return!1;var t=this.selectedItem_;return t.isExpanded()?this.selectNext_():t.setExpanded(!0),!0},e.Toolbox.prototype.selectNext_=function(){if(!this.selectedItem_)return!1;var t=this.contents_.indexOf(this.selectedItem_)+1;if(-1<t&&t<this.contents_.length){for(var n=this.contents_[t];n&&!n.isSelectable();)n=this.contents_[++t];if(n&&n.isSelectable())return this.setSelectedItem(n),!0}return!1},e.Toolbox.prototype.selectPrevious_=function(){if(!this.selectedItem_)return!1;var t=this.contents_.indexOf(this.selectedItem_)-1;if(-1<t&&t<this.contents_.length){for(var n=this.contents_[t];n&&!n.isSelectable();)n=this.contents_[--t];if(n&&n.isSelectable())return this.setSelectedItem(n),!0}return!1},e.Toolbox.prototype.dispose=function(){this.workspace_.getComponentManager().removeComponent("toolbox"),this.flyout_.dispose();for(var t=0;t<this.contents_.length;t++)this.contents_[t].dispose();for(t=0;t<this.boundEvents_.length;t++)e.browserEvents.unbind(this.boundEvents_[t]);this.boundEvents_=[],this.contents_=[],this.workspace_.getThemeManager().unsubscribe(this.HtmlDiv),e.utils.dom.removeNode(this.HtmlDiv)},e.Css.register([".blocklyToolboxDelete {",'cursor: url("<<<PATH>>>/handdelete.cur"), auto;',"}",".blocklyToolboxGrab {",'cursor: url("<<<PATH>>>/handclosed.cur"), auto;',"cursor: grabbing;","cursor: -webkit-grabbing;","}",".blocklyToolboxDiv {","background-color: #ddd;","overflow-x: visible;","overflow-y: auto;","padding: 4px 0 4px 0;","position: absolute;","z-index: 70;","-webkit-tap-highlight-color: transparent;","}",".blocklyToolboxContents {","display: flex;","flex-wrap: wrap;","flex-direction: column;","}",".blocklyToolboxContents:focus {","outline: none;","}"]),e.registry.register(e.registry.Type.TOOLBOX,e.registry.DEFAULT,e.Toolbox),e.Events.TrashcanOpen=function(t,n){e.Events.TrashcanOpen.superClass_.constructor.call(this,n),this.isOpen=t},e.utils.object.inherits(e.Events.TrashcanOpen,e.Events.UiBase),e.Events.TrashcanOpen.prototype.type=e.Events.TRASHCAN_OPEN,e.Events.TrashcanOpen.prototype.toJson=function(){var t=e.Events.TrashcanOpen.superClass_.toJson.call(this);return t.isOpen=this.isOpen,t},e.Events.TrashcanOpen.prototype.fromJson=function(t){e.Events.TrashcanOpen.superClass_.fromJson.call(this,t),this.isOpen=t.isOpen},e.registry.register(e.registry.Type.EVENT,e.Events.TRASHCAN_OPEN,e.Events.TrashcanOpen),e.IPositionable=function(){},e.uiPosition={},e.uiPosition.verticalPosition={TOP:0,BOTTOM:1},e.uiPosition.horizontalPosition={LEFT:0,RIGHT:1},e.uiPosition.bumpDirection={UP:0,DOWN:1},e.uiPosition.getStartPositionRect=function(t,n,r,s,u,y){var x=y.scrollbar&&y.scrollbar.canScrollVertically();return t.horizontal===e.uiPosition.horizontalPosition.LEFT?(r=u.absoluteMetrics.left+r,x&&y.RTL&&(r+=e.Scrollbar.scrollbarThickness)):(r=u.absoluteMetrics.left+u.viewMetrics.width-n.width-r,x&&!y.RTL&&(r-=e.Scrollbar.scrollbarThickness)),t.vertical===e.uiPosition.verticalPosition.TOP?t=u.absoluteMetrics.top+s:(t=u.absoluteMetrics.top+u.viewMetrics.height-n.height-s,y.scrollbar&&y.scrollbar.canScrollHorizontally()&&(t-=e.Scrollbar.scrollbarThickness)),new e.utils.Rect(t,t+n.height,r,r+n.width)},e.uiPosition.getCornerOppositeToolbox=function(t,n){return{horizontal:n.toolboxMetrics.position===e.utils.toolbox.Position.LEFT||t.horizontalLayout&&!t.RTL?e.uiPosition.horizontalPosition.RIGHT:e.uiPosition.horizontalPosition.LEFT,vertical:n.toolboxMetrics.position===e.utils.toolbox.Position.BOTTOM?e.uiPosition.verticalPosition.TOP:e.uiPosition.verticalPosition.BOTTOM}},e.uiPosition.bumpPositionRect=function(t,n,r,s){for(var Q,u=t.left,y=t.right-t.left,x=t.bottom-t.top,B=0;Q=s[B];B++)t.intersects(Q)&&(t=new e.utils.Rect(t=r===e.uiPosition.bumpDirection.UP?Q.top-x-n:Q.bottom+n,t+x,u,u+y),B=-1);return t},e.Trashcan=function(t){e.Trashcan.superClass_.constructor.call(this),this.workspace_=t,this.id="trashcan",this.contents_=[],this.flyout=null,0>=this.workspace_.options.maxTrashcanContents||(t=new e.Options({scrollbars:!0,parentWorkspace:this.workspace_,rtl:this.workspace_.RTL,oneBasedIndex:this.workspace_.options.oneBasedIndex,renderer:this.workspace_.options.renderer,rendererOverrides:this.workspace_.options.rendererOverrides,move:{scrollbars:!0}}),this.workspace_.horizontalLayout?(t.toolboxPosition=this.workspace_.toolboxPosition==e.utils.toolbox.Position.TOP?e.utils.toolbox.Position.BOTTOM:e.utils.toolbox.Position.TOP,this.flyout=new(e.registry.getClassFromOptions(e.registry.Type.FLYOUTS_HORIZONTAL_TOOLBOX,this.workspace_.options,!0))(t)):(t.toolboxPosition=this.workspace_.toolboxPosition==e.utils.toolbox.Position.RIGHT?e.utils.toolbox.Position.LEFT:e.utils.toolbox.Position.RIGHT,this.flyout=new(e.registry.getClassFromOptions(e.registry.Type.FLYOUTS_VERTICAL_TOOLBOX,this.workspace_.options,!0))(t)),this.workspace_.addChangeListener(this.onDelete_.bind(this)))},e.utils.object.inherits(e.Trashcan,e.DeleteArea),e.Trashcan.prototype.WIDTH_=47,e.Trashcan.prototype.BODY_HEIGHT_=44,e.Trashcan.prototype.LID_HEIGHT_=16,e.Trashcan.prototype.MARGIN_VERTICAL_=20,e.Trashcan.prototype.MARGIN_HORIZONTAL_=20,e.Trashcan.prototype.MARGIN_HOTSPOT_=10,e.Trashcan.prototype.SPRITE_LEFT_=0,e.Trashcan.prototype.SPRITE_TOP_=32,e.Trashcan.prototype.HAS_BLOCKS_LID_ANGLE_=.1,e.Trashcan.ANIMATION_LENGTH_=80,e.Trashcan.ANIMATION_FRAMES_=4,e.Trashcan.OPACITY_MIN_=.4,e.Trashcan.OPACITY_MAX_=.8,e.Trashcan.MAX_LID_ANGLE_=45,e.Trashcan.prototype.isLidOpen=!1,e.Trashcan.prototype.minOpenness_=0,e.Trashcan.prototype.svgGroup_=null,e.Trashcan.prototype.svgLid_=null,e.Trashcan.prototype.lidTask_=0,e.Trashcan.prototype.lidOpen_=0,e.Trashcan.prototype.left_=0,e.Trashcan.prototype.top_=0,e.Trashcan.prototype.initialized_=!1,e.Trashcan.prototype.createDom=function(){this.svgGroup_=e.utils.dom.createSvgElement(e.utils.Svg.G,{class:"blocklyTrash"},null);var t=String(Math.random()).substring(2),n=e.utils.dom.createSvgElement(e.utils.Svg.CLIPPATH,{id:"blocklyTrashBodyClipPath"+t},this.svgGroup_);e.utils.dom.createSvgElement(e.utils.Svg.RECT,{width:this.WIDTH_,height:this.BODY_HEIGHT_,y:this.LID_HEIGHT_},n);var r=e.utils.dom.createSvgElement(e.utils.Svg.IMAGE,{width:e.SPRITE.width,x:-this.SPRITE_LEFT_,height:e.SPRITE.height,y:-this.SPRITE_TOP_,"clip-path":"url(#blocklyTrashBodyClipPath"+t+")"},this.svgGroup_);return r.setAttributeNS(e.utils.dom.XLINK_NS,"xlink:href",this.workspace_.options.pathToMedia+e.SPRITE.url),n=e.utils.dom.createSvgElement(e.utils.Svg.CLIPPATH,{id:"blocklyTrashLidClipPath"+t},this.svgGroup_),e.utils.dom.createSvgElement(e.utils.Svg.RECT,{width:this.WIDTH_,height:this.LID_HEIGHT_},n),this.svgLid_=e.utils.dom.createSvgElement(e.utils.Svg.IMAGE,{width:e.SPRITE.width,x:-this.SPRITE_LEFT_,height:e.SPRITE.height,y:-this.SPRITE_TOP_,"clip-path":"url(#blocklyTrashLidClipPath"+t+")"},this.svgGroup_),this.svgLid_.setAttributeNS(e.utils.dom.XLINK_NS,"xlink:href",this.workspace_.options.pathToMedia+e.SPRITE.url),e.browserEvents.bind(this.svgGroup_,"mousedown",this,this.blockMouseDownWhenOpenable_),e.browserEvents.bind(this.svgGroup_,"mouseup",this,this.click),e.browserEvents.bind(r,"mouseover",this,this.mouseOver_),e.browserEvents.bind(r,"mouseout",this,this.mouseOut_),this.animateLid_(),this.svgGroup_},e.Trashcan.prototype.init=function(){0<this.workspace_.options.maxTrashcanContents&&(e.utils.dom.insertAfter(this.flyout.createDom(e.utils.Svg.SVG),this.workspace_.getParentSvg()),this.flyout.init(this.workspace_)),this.workspace_.getComponentManager().addComponent({component:this,weight:1,capabilities:[e.ComponentManager.Capability.AUTOHIDEABLE,e.ComponentManager.Capability.DELETE_AREA,e.ComponentManager.Capability.DRAG_TARGET,e.ComponentManager.Capability.POSITIONABLE]}),this.initialized_=!0,this.setLidOpen(!1)},e.Trashcan.prototype.dispose=function(){this.workspace_.getComponentManager().removeComponent("trashcan"),this.svgGroup_&&(e.utils.dom.removeNode(this.svgGroup_),this.svgGroup_=null),this.workspace_=this.svgLid_=null,clearTimeout(this.lidTask_)},e.Trashcan.prototype.hasContents_=function(){return!!this.contents_.length},e.Trashcan.prototype.contentsIsOpen=function(){return this.flyout.isVisible()},e.Trashcan.prototype.openFlyout=function(){if(!this.contentsIsOpen()){var t=this.contents_.map(e.Xml.textToDom);this.flyout.show(t),this.fireUiEvent_(!0)}},e.Trashcan.prototype.closeFlyout=function(){this.contentsIsOpen()&&(this.flyout.hide(),this.fireUiEvent_(!1))},e.Trashcan.prototype.autoHide=function(t){!t&&this.flyout&&this.closeFlyout()},e.Trashcan.prototype.emptyContents=function(){this.hasContents_()&&(this.contents_.length=0,this.setMinOpenness_(0),this.closeFlyout())},e.Trashcan.prototype.position=function(t,n){if(this.initialized_){var r=e.uiPosition.getCornerOppositeToolbox(this.workspace_,t);t=e.uiPosition.getStartPositionRect(r,new e.utils.Size(this.WIDTH_,this.BODY_HEIGHT_+this.LID_HEIGHT_),this.MARGIN_HORIZONTAL_,this.MARGIN_VERTICAL_,t,this.workspace_),n=e.uiPosition.bumpPositionRect(t,this.MARGIN_VERTICAL_,r.vertical===e.uiPosition.verticalPosition.TOP?e.uiPosition.bumpDirection.DOWN:e.uiPosition.bumpDirection.UP,n),this.top_=n.top,this.left_=n.left,this.svgGroup_.setAttribute("transform","translate("+this.left_+","+this.top_+")")}},e.Trashcan.prototype.getBoundingRectangle=function(){return new e.utils.Rect(this.top_,this.top_+this.BODY_HEIGHT_+this.LID_HEIGHT_,this.left_,this.left_+this.WIDTH_)},e.Trashcan.prototype.getClientRect=function(){if(!this.svgGroup_)return null;var t=this.svgGroup_.getBoundingClientRect(),n=t.top+this.SPRITE_TOP_-this.MARGIN_HOTSPOT_;return new e.utils.Rect(n,n+this.LID_HEIGHT_+this.BODY_HEIGHT_+2*this.MARGIN_HOTSPOT_,t=t.left+this.SPRITE_LEFT_-this.MARGIN_HOTSPOT_,t+this.WIDTH_+2*this.MARGIN_HOTSPOT_)},e.Trashcan.prototype.onDragOver=function(t){this.setLidOpen(this.wouldDelete_)},e.Trashcan.prototype.onDragExit=function(t){this.setLidOpen(!1)},e.Trashcan.prototype.onDrop=function(t){setTimeout(this.setLidOpen.bind(this,!1),100)},e.Trashcan.prototype.setLidOpen=function(t){this.isLidOpen!=t&&(clearTimeout(this.lidTask_),this.isLidOpen=t,this.animateLid_())},e.Trashcan.prototype.animateLid_=function(){var t=e.Trashcan.ANIMATION_FRAMES_,n=1/(t+1);this.lidOpen_+=this.isLidOpen?n:-n,this.lidOpen_=Math.min(Math.max(this.lidOpen_,this.minOpenness_),1),this.setLidAngle_(this.lidOpen_*e.Trashcan.MAX_LID_ANGLE_),this.svgGroup_.style.opacity=(n=e.Trashcan.OPACITY_MIN_)+this.lidOpen_*(e.Trashcan.OPACITY_MAX_-n),this.lidOpen_>this.minOpenness_&&1>this.lidOpen_&&(this.lidTask_=setTimeout(this.animateLid_.bind(this),e.Trashcan.ANIMATION_LENGTH_/t))},e.Trashcan.prototype.setLidAngle_=function(t){var n=this.workspace_.toolboxPosition==e.utils.toolbox.Position.RIGHT||this.workspace_.horizontalLayout&&this.workspace_.RTL;this.svgLid_.setAttribute("transform","rotate("+(n?-t:t)+","+(n?4:this.WIDTH_-4)+","+(this.LID_HEIGHT_-2)+")")},e.Trashcan.prototype.setMinOpenness_=function(t){this.minOpenness_=t,this.isLidOpen||this.setLidAngle_(t*e.Trashcan.MAX_LID_ANGLE_)},e.Trashcan.prototype.closeLid=function(){this.setLidOpen(!1)},e.Trashcan.prototype.click=function(){this.hasContents_()&&this.openFlyout()},e.Trashcan.prototype.fireUiEvent_=function(t){t=new(e.Events.get(e.Events.TRASHCAN_OPEN))(t,this.workspace_.id),e.Events.fire(t)},e.Trashcan.prototype.blockMouseDownWhenOpenable_=function(t){!this.contentsIsOpen()&&this.hasContents_()&&t.stopPropagation()},e.Trashcan.prototype.mouseOver_=function(){this.hasContents_()&&this.setLidOpen(!0)},e.Trashcan.prototype.mouseOut_=function(){this.setLidOpen(!1)},e.Trashcan.prototype.onDelete_=function(t){if(!(0>=this.workspace_.options.maxTrashcanContents)&&t.type==e.Events.BLOCK_DELETE&&t.oldXml.tagName&&"shadow"!=t.oldXml.tagName.toLowerCase()&&(t=this.cleanBlockXML_(t.oldXml),-1==this.contents_.indexOf(t))){for(this.contents_.unshift(t);this.contents_.length>this.workspace_.options.maxTrashcanContents;)this.contents_.pop();this.setMinOpenness_(this.HAS_BLOCKS_LID_ANGLE_)}},e.Trashcan.prototype.cleanBlockXML_=function(t){for(var n=t=t.cloneNode(!0);n;){n.removeAttribute&&(n.removeAttribute("x"),n.removeAttribute("y"),n.removeAttribute("id"),n.removeAttribute("disabled"),"comment"==n.nodeName&&(n.removeAttribute("h"),n.removeAttribute("w"),n.removeAttribute("pinned")));var r=n.firstChild||n.nextSibling;if(!r)for(r=n.parentNode;r;){if(r.nextSibling){r=r.nextSibling;break}r=r.parentNode}n=r}return e.Xml.domToText(t)},e.VariablesDynamic={},e.VariablesDynamic.onCreateVariableButtonClick_String=function(t){e.Variables.createVariableButtonHandler(t.getTargetWorkspace(),void 0,"String")},e.VariablesDynamic.onCreateVariableButtonClick_Number=function(t){e.Variables.createVariableButtonHandler(t.getTargetWorkspace(),void 0,"Number")},e.VariablesDynamic.onCreateVariableButtonClick_Colour=function(t){e.Variables.createVariableButtonHandler(t.getTargetWorkspace(),void 0,"Colour")},e.VariablesDynamic.flyoutCategory=function(t){var n=[],r=document.createElement("button");return r.setAttribute("text",e.Msg.NEW_STRING_VARIABLE),r.setAttribute("callbackKey","CREATE_VARIABLE_STRING"),n.push(r),(r=document.createElement("button")).setAttribute("text",e.Msg.NEW_NUMBER_VARIABLE),r.setAttribute("callbackKey","CREATE_VARIABLE_NUMBER"),n.push(r),(r=document.createElement("button")).setAttribute("text",e.Msg.NEW_COLOUR_VARIABLE),r.setAttribute("callbackKey","CREATE_VARIABLE_COLOUR"),n.push(r),t.registerButtonCallback("CREATE_VARIABLE_STRING",e.VariablesDynamic.onCreateVariableButtonClick_String),t.registerButtonCallback("CREATE_VARIABLE_NUMBER",e.VariablesDynamic.onCreateVariableButtonClick_Number),t.registerButtonCallback("CREATE_VARIABLE_COLOUR",e.VariablesDynamic.onCreateVariableButtonClick_Colour),t=e.VariablesDynamic.flyoutCategoryBlocks(t),n.concat(t)},e.VariablesDynamic.flyoutCategoryBlocks=function(t){var n=[];if(0<(t=t.getAllVariables()).length){if(e.Blocks.variables_set_dynamic){var r=t[t.length-1],s=e.utils.xml.createElement("block");s.setAttribute("type","variables_set_dynamic"),s.setAttribute("gap",24),s.appendChild(e.Variables.generateVariableFieldDom(r)),n.push(s)}if(e.Blocks.variables_get_dynamic){t.sort(e.VariableModel.compareByName),r=0;for(var u;u=t[r];r++)(s=e.utils.xml.createElement("block")).setAttribute("type","variables_get_dynamic"),s.setAttribute("gap",8),s.appendChild(e.Variables.generateVariableFieldDom(u)),n.push(s)}}return n},e.ZoomControls=function(t){this.workspace_=t,this.id="zoomControls",this.zoomResetGroup_=this.zoomOutGroup_=this.zoomInGroup_=this.onZoomOutWrapper_=this.onZoomInWrapper_=this.onZoomResetWrapper_=null},e.ZoomControls.prototype.WIDTH_=32,e.ZoomControls.prototype.HEIGHT_=32,e.ZoomControls.prototype.SMALL_SPACING_=2,e.ZoomControls.prototype.LARGE_SPACING_=11,e.ZoomControls.prototype.MARGIN_VERTICAL_=20,e.ZoomControls.prototype.MARGIN_HORIZONTAL_=20,e.ZoomControls.prototype.svgGroup_=null,e.ZoomControls.prototype.left_=0,e.ZoomControls.prototype.top_=0,e.ZoomControls.prototype.initialized_=!1,e.ZoomControls.prototype.createDom=function(){this.svgGroup_=e.utils.dom.createSvgElement(e.utils.Svg.G,{},null);var t=String(Math.random()).substring(2);return this.createZoomOutSvg_(t),this.createZoomInSvg_(t),this.workspace_.isMovable()&&this.createZoomResetSvg_(t),this.svgGroup_},e.ZoomControls.prototype.init=function(){this.workspace_.getComponentManager().addComponent({component:this,weight:2,capabilities:[e.ComponentManager.Capability.POSITIONABLE]}),this.initialized_=!0},e.ZoomControls.prototype.dispose=function(){this.workspace_.getComponentManager().removeComponent("zoomControls"),this.svgGroup_&&e.utils.dom.removeNode(this.svgGroup_),this.onZoomResetWrapper_&&e.browserEvents.unbind(this.onZoomResetWrapper_),this.onZoomInWrapper_&&e.browserEvents.unbind(this.onZoomInWrapper_),this.onZoomOutWrapper_&&e.browserEvents.unbind(this.onZoomOutWrapper_)},e.ZoomControls.prototype.getBoundingRectangle=function(){var t=this.SMALL_SPACING_+2*this.HEIGHT_;return this.zoomResetGroup_&&(t+=this.LARGE_SPACING_+this.HEIGHT_),new e.utils.Rect(this.top_,this.top_+t,this.left_,this.left_+this.WIDTH_)},e.ZoomControls.prototype.position=function(t,n){if(this.initialized_){var r=e.uiPosition.getCornerOppositeToolbox(this.workspace_,t),s=this.SMALL_SPACING_+2*this.HEIGHT_;this.zoomResetGroup_&&(s+=this.LARGE_SPACING_+this.HEIGHT_),t=e.uiPosition.getStartPositionRect(r,new e.utils.Size(this.WIDTH_,s),this.MARGIN_HORIZONTAL_,this.MARGIN_VERTICAL_,t,this.workspace_),n=e.uiPosition.bumpPositionRect(t,this.MARGIN_VERTICAL_,(r=r.vertical)===e.uiPosition.verticalPosition.TOP?e.uiPosition.bumpDirection.DOWN:e.uiPosition.bumpDirection.UP,n),r===e.uiPosition.verticalPosition.TOP?(this.zoomInGroup_.setAttribute("transform","translate(0, "+(r=this.SMALL_SPACING_+this.HEIGHT_)+")"),this.zoomResetGroup_&&this.zoomResetGroup_.setAttribute("transform","translate(0, "+(r+this.LARGE_SPACING_+this.HEIGHT_)+")")):(this.zoomInGroup_.setAttribute("transform","translate(0, "+(r=this.zoomResetGroup_?this.LARGE_SPACING_+this.HEIGHT_:0)+")"),this.zoomOutGroup_.setAttribute("transform","translate(0, "+(r+this.SMALL_SPACING_+this.HEIGHT_)+")")),this.top_=n.top,this.left_=n.left,this.svgGroup_.setAttribute("transform","translate("+this.left_+","+this.top_+")")}},e.ZoomControls.prototype.createZoomOutSvg_=function(t){this.zoomOutGroup_=e.utils.dom.createSvgElement(e.utils.Svg.G,{class:"blocklyZoom"},this.svgGroup_);var n=e.utils.dom.createSvgElement(e.utils.Svg.CLIPPATH,{id:"blocklyZoomoutClipPath"+t},this.zoomOutGroup_);e.utils.dom.createSvgElement(e.utils.Svg.RECT,{width:32,height:32},n),e.utils.dom.createSvgElement(e.utils.Svg.IMAGE,{width:e.SPRITE.width,height:e.SPRITE.height,x:-64,y:-92,"clip-path":"url(#blocklyZoomoutClipPath"+t+")"},this.zoomOutGroup_).setAttributeNS(e.utils.dom.XLINK_NS,"xlink:href",this.workspace_.options.pathToMedia+e.SPRITE.url),this.onZoomOutWrapper_=e.browserEvents.conditionalBind(this.zoomOutGroup_,"mousedown",null,this.zoom_.bind(this,-1))},e.ZoomControls.prototype.createZoomInSvg_=function(t){this.zoomInGroup_=e.utils.dom.createSvgElement(e.utils.Svg.G,{class:"blocklyZoom"},this.svgGroup_);var n=e.utils.dom.createSvgElement(e.utils.Svg.CLIPPATH,{id:"blocklyZoominClipPath"+t},this.zoomInGroup_);e.utils.dom.createSvgElement(e.utils.Svg.RECT,{width:32,height:32},n),e.utils.dom.createSvgElement(e.utils.Svg.IMAGE,{width:e.SPRITE.width,height:e.SPRITE.height,x:-32,y:-92,"clip-path":"url(#blocklyZoominClipPath"+t+")"},this.zoomInGroup_).setAttributeNS(e.utils.dom.XLINK_NS,"xlink:href",this.workspace_.options.pathToMedia+e.SPRITE.url),this.onZoomInWrapper_=e.browserEvents.conditionalBind(this.zoomInGroup_,"mousedown",null,this.zoom_.bind(this,1))},e.ZoomControls.prototype.zoom_=function(t,n){this.workspace_.markFocused(),this.workspace_.zoomCenter(t),this.fireZoomEvent_(),e.Touch.clearTouchIdentifier(),n.stopPropagation(),n.preventDefault()},e.ZoomControls.prototype.createZoomResetSvg_=function(t){this.zoomResetGroup_=e.utils.dom.createSvgElement(e.utils.Svg.G,{class:"blocklyZoom"},this.svgGroup_);var n=e.utils.dom.createSvgElement(e.utils.Svg.CLIPPATH,{id:"blocklyZoomresetClipPath"+t},this.zoomResetGroup_);e.utils.dom.createSvgElement(e.utils.Svg.RECT,{width:32,height:32},n),e.utils.dom.createSvgElement(e.utils.Svg.IMAGE,{width:e.SPRITE.width,height:e.SPRITE.height,y:-92,"clip-path":"url(#blocklyZoomresetClipPath"+t+")"},this.zoomResetGroup_).setAttributeNS(e.utils.dom.XLINK_NS,"xlink:href",this.workspace_.options.pathToMedia+e.SPRITE.url),this.onZoomResetWrapper_=e.browserEvents.conditionalBind(this.zoomResetGroup_,"mousedown",null,this.resetZoom_.bind(this))},e.ZoomControls.prototype.resetZoom_=function(t){this.workspace_.markFocused();var n=Math.log(this.workspace_.options.zoomOptions.startScale/this.workspace_.scale)/Math.log(this.workspace_.options.zoomOptions.scaleSpeed);this.workspace_.beginCanvasTransition(),this.workspace_.zoomCenter(n),this.workspace_.scrollCenter(),setTimeout(this.workspace_.endCanvasTransition.bind(this.workspace_),500),this.fireZoomEvent_(),e.Touch.clearTouchIdentifier(),t.stopPropagation(),t.preventDefault()},e.ZoomControls.prototype.fireZoomEvent_=function(){var t=new(e.Events.get(e.Events.CLICK))(null,this.workspace_.id,"zoom_controls");e.Events.fire(t)},e.Css.register([".blocklyZoom>image, .blocklyZoom>svg>image {","opacity: .4;","}",".blocklyZoom>image:hover, .blocklyZoom>svg>image:hover {","opacity: .6;","}",".blocklyZoom>image:active, .blocklyZoom>svg>image:active {","opacity: .8;","}"]),e.ShortcutItems={},e.ShortcutItems.names={ESCAPE:"escape",DELETE:"delete",COPY:"copy",CUT:"cut",PASTE:"paste",UNDO:"undo",REDO:"redo"},e.ShortcutItems.registerEscape=function(){var t={name:e.ShortcutItems.names.ESCAPE,preconditionFn:function(n){return!n.options.readOnly},callback:function(){return e.hideChaff(),!0}};e.ShortcutRegistry.registry.register(t),e.ShortcutRegistry.registry.addKeyMapping(e.utils.KeyCodes.ESC,t.name)},e.ShortcutItems.registerDelete=function(){var t={name:e.ShortcutItems.names.DELETE,preconditionFn:function(n){return!n.options.readOnly&&e.selected&&e.selected.isDeletable()},callback:function(n,r){return r.preventDefault(),!e.Gesture.inProgress()&&(e.deleteBlock(e.selected),!0)}};e.ShortcutRegistry.registry.register(t),e.ShortcutRegistry.registry.addKeyMapping(e.utils.KeyCodes.DELETE,t.name),e.ShortcutRegistry.registry.addKeyMapping(e.utils.KeyCodes.BACKSPACE,t.name)},e.ShortcutItems.registerCopy=function(){var t={name:e.ShortcutItems.names.COPY,preconditionFn:function(r){return!r.options.readOnly&&!e.Gesture.inProgress()&&e.selected&&e.selected.isDeletable()&&e.selected.isMovable()},callback:function(r,s){return s.preventDefault(),e.hideChaff(),e.copy(e.selected),!0}};e.ShortcutRegistry.registry.register(t);var n=e.ShortcutRegistry.registry.createSerializedKey(e.utils.KeyCodes.C,[e.utils.KeyCodes.CTRL]);e.ShortcutRegistry.registry.addKeyMapping(n,t.name),n=e.ShortcutRegistry.registry.createSerializedKey(e.utils.KeyCodes.C,[e.utils.KeyCodes.ALT]),e.ShortcutRegistry.registry.addKeyMapping(n,t.name),n=e.ShortcutRegistry.registry.createSerializedKey(e.utils.KeyCodes.C,[e.utils.KeyCodes.META]),e.ShortcutRegistry.registry.addKeyMapping(n,t.name)},e.ShortcutItems.registerCut=function(){var t={name:e.ShortcutItems.names.CUT,preconditionFn:function(r){return!r.options.readOnly&&!e.Gesture.inProgress()&&e.selected&&e.selected.isDeletable()&&e.selected.isMovable()&&!e.selected.workspace.isFlyout},callback:function(){return e.copy(e.selected),e.deleteBlock(e.selected),!0}};e.ShortcutRegistry.registry.register(t);var n=e.ShortcutRegistry.registry.createSerializedKey(e.utils.KeyCodes.X,[e.utils.KeyCodes.CTRL]);e.ShortcutRegistry.registry.addKeyMapping(n,t.name),n=e.ShortcutRegistry.registry.createSerializedKey(e.utils.KeyCodes.X,[e.utils.KeyCodes.ALT]),e.ShortcutRegistry.registry.addKeyMapping(n,t.name),n=e.ShortcutRegistry.registry.createSerializedKey(e.utils.KeyCodes.X,[e.utils.KeyCodes.META]),e.ShortcutRegistry.registry.addKeyMapping(n,t.name)},e.ShortcutItems.registerPaste=function(){var t={name:e.ShortcutItems.names.PASTE,preconditionFn:function(r){return!r.options.readOnly&&!e.Gesture.inProgress()},callback:function(){return e.paste()}};e.ShortcutRegistry.registry.register(t);var n=e.ShortcutRegistry.registry.createSerializedKey(e.utils.KeyCodes.V,[e.utils.KeyCodes.CTRL]);e.ShortcutRegistry.registry.addKeyMapping(n,t.name),n=e.ShortcutRegistry.registry.createSerializedKey(e.utils.KeyCodes.V,[e.utils.KeyCodes.ALT]),e.ShortcutRegistry.registry.addKeyMapping(n,t.name),n=e.ShortcutRegistry.registry.createSerializedKey(e.utils.KeyCodes.V,[e.utils.KeyCodes.META]),e.ShortcutRegistry.registry.addKeyMapping(n,t.name)},e.ShortcutItems.registerUndo=function(){var t={name:e.ShortcutItems.names.UNDO,preconditionFn:function(r){return!r.options.readOnly&&!e.Gesture.inProgress()},callback:function(r){return e.hideChaff(),r.undo(!1),!0}};e.ShortcutRegistry.registry.register(t);var n=e.ShortcutRegistry.registry.createSerializedKey(e.utils.KeyCodes.Z,[e.utils.KeyCodes.CTRL]);e.ShortcutRegistry.registry.addKeyMapping(n,t.name),n=e.ShortcutRegistry.registry.createSerializedKey(e.utils.KeyCodes.Z,[e.utils.KeyCodes.ALT]),e.ShortcutRegistry.registry.addKeyMapping(n,t.name),n=e.ShortcutRegistry.registry.createSerializedKey(e.utils.KeyCodes.Z,[e.utils.KeyCodes.META]),e.ShortcutRegistry.registry.addKeyMapping(n,t.name)},e.ShortcutItems.registerRedo=function(){var t={name:e.ShortcutItems.names.REDO,preconditionFn:function(r){return!e.Gesture.inProgress()&&!r.options.readOnly},callback:function(r){return e.hideChaff(),r.undo(!0),!0}};e.ShortcutRegistry.registry.register(t);var n=e.ShortcutRegistry.registry.createSerializedKey(e.utils.KeyCodes.Z,[e.utils.KeyCodes.SHIFT,e.utils.KeyCodes.CTRL]);e.ShortcutRegistry.registry.addKeyMapping(n,t.name),n=e.ShortcutRegistry.registry.createSerializedKey(e.utils.KeyCodes.Z,[e.utils.KeyCodes.SHIFT,e.utils.KeyCodes.ALT]),e.ShortcutRegistry.registry.addKeyMapping(n,t.name),n=e.ShortcutRegistry.registry.createSerializedKey(e.utils.KeyCodes.Z,[e.utils.KeyCodes.SHIFT,e.utils.KeyCodes.META]),e.ShortcutRegistry.registry.addKeyMapping(n,t.name),n=e.ShortcutRegistry.registry.createSerializedKey(e.utils.KeyCodes.Y,[e.utils.KeyCodes.CTRL]),e.ShortcutRegistry.registry.addKeyMapping(n,t.name)},e.ShortcutItems.registerDefaultShortcuts=function(){e.ShortcutItems.registerEscape(),e.ShortcutItems.registerDelete(),e.ShortcutItems.registerCopy(),e.ShortcutItems.registerCut(),e.ShortcutItems.registerPaste(),e.ShortcutItems.registerUndo(),e.ShortcutItems.registerRedo()},e.ShortcutItems.registerDefaultShortcuts(),e.ContextMenuItems={},e.ContextMenuItems.registerUndo=function(){e.ContextMenuRegistry.registry.register({displayText:function(){return e.Msg.UNDO},preconditionFn:function(t){return 0<t.workspace.getUndoStack().length?"enabled":"disabled"},callback:function(t){t.workspace.undo(!1)},scopeType:e.ContextMenuRegistry.ScopeType.WORKSPACE,id:"undoWorkspace",weight:1})},e.ContextMenuItems.registerRedo=function(){e.ContextMenuRegistry.registry.register({displayText:function(){return e.Msg.REDO},preconditionFn:function(t){return 0<t.workspace.getRedoStack().length?"enabled":"disabled"},callback:function(t){t.workspace.undo(!0)},scopeType:e.ContextMenuRegistry.ScopeType.WORKSPACE,id:"redoWorkspace",weight:2})},e.ContextMenuItems.registerCleanup=function(){e.ContextMenuRegistry.registry.register({displayText:function(){return e.Msg.CLEAN_UP},preconditionFn:function(t){return t.workspace.isMovable()?1<t.workspace.getTopBlocks(!1).length?"enabled":"disabled":"hidden"},callback:function(t){t.workspace.cleanUp()},scopeType:e.ContextMenuRegistry.ScopeType.WORKSPACE,id:"cleanWorkspace",weight:3})},e.ContextMenuItems.toggleOption_=function(t,n){for(var r=0,s=0;s<n.length;s++)for(var u=n[s];u;)setTimeout(u.setCollapsed.bind(u,t),r),u=u.getNextBlock(),r+=10},e.ContextMenuItems.registerCollapse=function(){e.ContextMenuRegistry.registry.register({displayText:function(){return e.Msg.COLLAPSE_ALL},preconditionFn:function(t){if(t.workspace.options.collapse){t=t.workspace.getTopBlocks(!1);for(var n=0;n<t.length;n++)for(var r=t[n];r;){if(!r.isCollapsed())return"enabled";r=r.getNextBlock()}return"disabled"}return"hidden"},callback:function(t){e.ContextMenuItems.toggleOption_(!0,t.workspace.getTopBlocks(!0))},scopeType:e.ContextMenuRegistry.ScopeType.WORKSPACE,id:"collapseWorkspace",weight:4})},e.ContextMenuItems.registerExpand=function(){e.ContextMenuRegistry.registry.register({displayText:function(){return e.Msg.EXPAND_ALL},preconditionFn:function(t){if(t.workspace.options.collapse){t=t.workspace.getTopBlocks(!1);for(var n=0;n<t.length;n++)for(var r=t[n];r;){if(r.isCollapsed())return"enabled";r=r.getNextBlock()}return"disabled"}return"hidden"},callback:function(t){e.ContextMenuItems.toggleOption_(!1,t.workspace.getTopBlocks(!0))},scopeType:e.ContextMenuRegistry.ScopeType.WORKSPACE,id:"expandWorkspace",weight:5})},e.ContextMenuItems.addDeletableBlocks_=function(t,n){if(t.isDeletable())Array.prototype.push.apply(n,t.getDescendants(!1));else{t=t.getChildren(!1);for(var r=0;r<t.length;r++)e.ContextMenuItems.addDeletableBlocks_(t[r],n)}},e.ContextMenuItems.getDeletableBlocks_=function(t){var n=[];t=t.getTopBlocks(!0);for(var r=0;r<t.length;r++)e.ContextMenuItems.addDeletableBlocks_(t[r],n);return n},e.ContextMenuItems.deleteNext_=function(t,n){e.Events.setGroup(n);var r=t.shift();r&&(r.workspace?(r.dispose(!1,!0),setTimeout(e.ContextMenuItems.deleteNext_,10,t,n)):e.ContextMenuItems.deleteNext_(t,n)),e.Events.setGroup(!1)},e.ContextMenuItems.registerDeleteAll=function(){e.ContextMenuRegistry.registry.register({displayText:function(t){if(t.workspace)return 1==(t=e.ContextMenuItems.getDeletableBlocks_(t.workspace).length)?e.Msg.DELETE_BLOCK:e.Msg.DELETE_X_BLOCKS.replace("%1",String(t))},preconditionFn:function(t){if(t.workspace)return 0<e.ContextMenuItems.getDeletableBlocks_(t.workspace).length?"enabled":"disabled"},callback:function(t){if(t.workspace){t.workspace.cancelCurrentGesture();var n=e.ContextMenuItems.getDeletableBlocks_(t.workspace),r=e.utils.genUid();2>n.length?e.ContextMenuItems.deleteNext_(n,r):e.confirm(e.Msg.DELETE_ALL_BLOCKS.replace("%1",n.length),function(s){s&&e.ContextMenuItems.deleteNext_(n,r)})}},scopeType:e.ContextMenuRegistry.ScopeType.WORKSPACE,id:"workspaceDelete",weight:6})},e.ContextMenuItems.registerWorkspaceOptions_=function(){e.ContextMenuItems.registerUndo(),e.ContextMenuItems.registerRedo(),e.ContextMenuItems.registerCleanup(),e.ContextMenuItems.registerCollapse(),e.ContextMenuItems.registerExpand(),e.ContextMenuItems.registerDeleteAll()},e.ContextMenuItems.registerDuplicate=function(){e.ContextMenuRegistry.registry.register({displayText:function(){return e.Msg.DUPLICATE_BLOCK},preconditionFn:function(t){return!(t=t.block).isInFlyout&&t.isDeletable()&&t.isMovable()?t.isDuplicatable()?"enabled":"disabled":"hidden"},callback:function(t){t.block&&e.duplicate(t.block)},scopeType:e.ContextMenuRegistry.ScopeType.BLOCK,id:"blockDuplicate",weight:1})},e.ContextMenuItems.registerComment=function(){e.ContextMenuRegistry.registry.register({displayText:function(t){return t.block.getCommentIcon()?e.Msg.REMOVE_COMMENT:e.Msg.ADD_COMMENT},preconditionFn:function(t){return t=t.block,e.utils.userAgent.IE||t.isInFlyout||!t.workspace.options.comments||t.isCollapsed()||!t.isEditable()?"hidden":"enabled"},callback:function(t){(t=t.block).getCommentIcon()?t.setCommentText(null):t.setCommentText("")},scopeType:e.ContextMenuRegistry.ScopeType.BLOCK,id:"blockComment",weight:2})},e.ContextMenuItems.registerInline=function(){e.ContextMenuRegistry.registry.register({displayText:function(t){return t.block.getInputsInline()?e.Msg.EXTERNAL_INPUTS:e.Msg.INLINE_INPUTS},preconditionFn:function(t){if(!(t=t.block).isInFlyout&&t.isMovable()&&!t.isCollapsed())for(var n=1;n<t.inputList.length;n++)if(t.inputList[n-1].type!=e.inputTypes.STATEMENT&&t.inputList[n].type!=e.inputTypes.STATEMENT)return"enabled";return"hidden"},callback:function(t){t.block.setInputsInline(!t.block.getInputsInline())},scopeType:e.ContextMenuRegistry.ScopeType.BLOCK,id:"blockInline",weight:3})},e.ContextMenuItems.registerCollapseExpandBlock=function(){e.ContextMenuRegistry.registry.register({displayText:function(t){return t.block.isCollapsed()?e.Msg.EXPAND_BLOCK:e.Msg.COLLAPSE_BLOCK},preconditionFn:function(t){return!(t=t.block).isInFlyout&&t.isMovable()&&t.workspace.options.collapse?"enabled":"hidden"},callback:function(t){t.block.setCollapsed(!t.block.isCollapsed())},scopeType:e.ContextMenuRegistry.ScopeType.BLOCK,id:"blockCollapseExpand",weight:4})},e.ContextMenuItems.registerDisable=function(){e.ContextMenuRegistry.registry.register({displayText:function(t){return t.block.isEnabled()?e.Msg.DISABLE_BLOCK:e.Msg.ENABLE_BLOCK},preconditionFn:function(t){return!(t=t.block).isInFlyout&&t.workspace.options.disable&&t.isEditable()?t.getInheritedDisabled()?"disabled":"enabled":"hidden"},callback:function(t){t=t.block;var n=e.Events.getGroup();n||e.Events.setGroup(!0),t.setEnabled(!t.isEnabled()),n||e.Events.setGroup(!1)},scopeType:e.ContextMenuRegistry.ScopeType.BLOCK,id:"blockDisable",weight:5})},e.ContextMenuItems.registerDelete=function(){e.ContextMenuRegistry.registry.register({displayText:function(t){var n=t.block;return t=n.getDescendants(!1).length,(n=n.getNextBlock())&&(t-=n.getDescendants(!1).length),1==t?e.Msg.DELETE_BLOCK:e.Msg.DELETE_X_BLOCKS.replace("%1",String(t))},preconditionFn:function(t){return!t.block.isInFlyout&&t.block.isDeletable()?"enabled":"hidden"},callback:function(t){e.Events.setGroup(!0),t.block&&e.deleteBlock(t.block),e.Events.setGroup(!1)},scopeType:e.ContextMenuRegistry.ScopeType.BLOCK,id:"blockDelete",weight:6})},e.ContextMenuItems.registerHelp=function(){e.ContextMenuRegistry.registry.register({displayText:function(){return e.Msg.HELP},preconditionFn:function(t){return("function"==typeof(t=t.block).helpUrl?t.helpUrl():t.helpUrl)?"enabled":"hidden"},callback:function(t){t.block.showHelp()},scopeType:e.ContextMenuRegistry.ScopeType.BLOCK,id:"blockHelp",weight:7})},e.ContextMenuItems.registerBlockOptions_=function(){e.ContextMenuItems.registerDuplicate(),e.ContextMenuItems.registerComment(),e.ContextMenuItems.registerInline(),e.ContextMenuItems.registerCollapseExpandBlock(),e.ContextMenuItems.registerDisable(),e.ContextMenuItems.registerDelete(),e.ContextMenuItems.registerHelp()},e.ContextMenuItems.registerDefaultOptions=function(){e.ContextMenuItems.registerWorkspaceOptions_(),e.ContextMenuItems.registerBlockOptions_()},e.ContextMenuItems.registerDefaultOptions(),e.Mutator=function(t){e.Mutator.superClass_.constructor.call(this,null),this.quarkNames_=t},e.utils.object.inherits(e.Mutator,e.Icon),e.Mutator.prototype.workspace_=null,e.Mutator.prototype.workspaceWidth_=0,e.Mutator.prototype.workspaceHeight_=0,e.Mutator.prototype.setBlock=function(t){this.block_=t},e.Mutator.prototype.getWorkspace=function(){return this.workspace_},e.Mutator.prototype.drawIcon_=function(t){e.utils.dom.createSvgElement(e.utils.Svg.RECT,{class:"blocklyIconShape",rx:"4",ry:"4",height:"16",width:"16"},t),e.utils.dom.createSvgElement(e.utils.Svg.PATH,{class:"blocklyIconSymbol",d:"m4.203,7.296 0,1.368 -0.92,0.677 -0.11,0.41 0.9,1.559 0.41,0.11 1.043,-0.457 1.187,0.683 0.127,1.134 0.3,0.3 1.8,0 0.3,-0.299 0.127,-1.138 1.185,-0.682 1.046,0.458 0.409,-0.11 0.9,-1.559 -0.11,-0.41 -0.92,-0.677 0,-1.366 0.92,-0.677 0.11,-0.41 -0.9,-1.559 -0.409,-0.109 -1.046,0.458 -1.185,-0.682 -0.127,-1.138 -0.3,-0.299 -1.8,0 -0.3,0.3 -0.126,1.135 -1.187,0.682 -1.043,-0.457 -0.41,0.11 -0.899,1.559 0.108,0.409z"},t),e.utils.dom.createSvgElement(e.utils.Svg.CIRCLE,{class:"blocklyIconShape",r:"2.7",cx:"8",cy:"8"},t)},e.Mutator.prototype.iconClick_=function(t){this.block_.isEditable()&&e.Icon.prototype.iconClick_.call(this,t)},e.Mutator.prototype.createEditor_=function(){if(this.svgDialog_=e.utils.dom.createSvgElement(e.utils.Svg.SVG,{x:e.Bubble.BORDER_WIDTH,y:e.Bubble.BORDER_WIDTH},null),this.quarkNames_.length)for(var r,t=e.utils.xml.createElement("xml"),n=0;r=this.quarkNames_[n];n++){var s=e.utils.xml.createElement("block");s.setAttribute("type",r),t.appendChild(s)}else t=null;return(n=new e.Options({disable:!1,parentWorkspace:this.block_.workspace,media:this.block_.workspace.options.pathToMedia,rtl:this.block_.RTL,horizontalLayout:!1,renderer:this.block_.workspace.options.renderer,rendererOverrides:this.block_.workspace.options.rendererOverrides})).toolboxPosition=this.block_.RTL?e.utils.toolbox.Position.RIGHT:e.utils.toolbox.Position.LEFT,(r=!!t)&&(n.languageTree=e.utils.toolbox.convertToolboxDefToJson(t)),this.workspace_=new e.WorkspaceSvg(n),this.workspace_.isMutator=!0,this.workspace_.addChangeListener(e.Events.disableOrphans),t=r?this.workspace_.addFlyout(e.utils.Svg.G):null,n=this.workspace_.createDom("blocklyMutatorBackground"),t&&n.insertBefore(t,this.workspace_.svgBlockCanvas_),this.svgDialog_.appendChild(n),this.svgDialog_},e.Mutator.prototype.updateEditable=function(){e.Mutator.superClass_.updateEditable.call(this),this.block_.isInFlyout||(this.block_.isEditable()?this.iconGroup_&&e.utils.dom.removeClass(this.iconGroup_,"blocklyIconGroupReadonly"):(this.setVisible(!1),this.iconGroup_&&e.utils.dom.addClass(this.iconGroup_,"blocklyIconGroupReadonly")))},e.Mutator.prototype.resizeBubble_=function(){var t=2*e.Bubble.BORDER_WIDTH,n=this.workspace_.getCanvas().getBBox(),r=n.width+n.x,s=n.height+3*t,u=this.workspace_.getFlyout();if(u){var y=u.getWorkspace().getMetricsManager().getScrollMetrics();s=Math.max(s,y.height+20),r+=u.getWidth()}this.block_.RTL&&(r=-n.x),r+=3*t,(Math.abs(this.workspaceWidth_-r)>t||Math.abs(this.workspaceHeight_-s)>t)&&(this.workspaceWidth_=r,this.workspaceHeight_=s,this.bubble_.setBubbleSize(r+t,s+t),this.svgDialog_.setAttribute("width",this.workspaceWidth_),this.svgDialog_.setAttribute("height",this.workspaceHeight_),this.workspace_.setCachedParentSvgSize(this.workspaceWidth_,this.workspaceHeight_)),this.block_.RTL&&(t="translate("+this.workspaceWidth_+",0)",this.workspace_.getCanvas().setAttribute("transform",t)),this.workspace_.resize()},e.Mutator.prototype.onBubbleMove_=function(){this.workspace_&&this.workspace_.recordDragTargets()},e.Mutator.prototype.setVisible=function(t){if(t!=this.isVisible())if(e.Events.fire(new(e.Events.get(e.Events.BUBBLE_OPEN))(this.block_,t,"mutator")),t){this.bubble_=new e.Bubble(this.block_.workspace,this.createEditor_(),this.block_.pathObject.svgPath,this.iconXY_,null,null),this.bubble_.setSvgId(this.block_.id),this.bubble_.registerMoveEvent(this.onBubbleMove_.bind(this));var n=this.workspace_.options.languageTree;t=this.workspace_.getFlyout(),n&&(t.init(this.workspace_),t.show(n)),this.rootBlock_=this.block_.decompose(this.workspace_),n=this.rootBlock_.getDescendants(!1);for(var s,r=0;s=n[r];r++)s.render();if(this.rootBlock_.setMovable(!1),this.rootBlock_.setDeletable(!1),t?(n=2*t.CORNER_RADIUS,t=this.rootBlock_.RTL?t.getWidth()+n:n):t=n=16,this.block_.RTL&&(t=-t),this.rootBlock_.moveBy(t,n),this.block_.saveConnections){var u=this,y=this.block_;y.saveConnections(this.rootBlock_),this.sourceListener_=function(){y.saveConnections(u.rootBlock_)},this.block_.workspace.addChangeListener(this.sourceListener_)}this.resizeBubble_(),this.workspace_.addChangeListener(this.workspaceChanged_.bind(this)),this.applyColour()}else this.svgDialog_=null,this.workspace_.dispose(),this.rootBlock_=this.workspace_=null,this.bubble_.dispose(),this.bubble_=null,this.workspaceHeight_=this.workspaceWidth_=0,this.sourceListener_&&(this.block_.workspace.removeChangeListener(this.sourceListener_),this.sourceListener_=null)},e.Mutator.prototype.workspaceChanged_=function(t){if(!(t.isUiEvent||t.type==e.Events.CHANGE&&"disabled"==t.element)){if(!this.workspace_.isDragging()){t=this.workspace_.getTopBlocks(!1);for(var r,n=0;r=t[n];n++){var s=r.getRelativeToSurfaceXY();if(20>s.y&&r.moveBy(0,20-s.y),r.RTL){var u=-20,y=this.workspace_.getFlyout();y&&(u-=y.getWidth()),s.x>u&&r.moveBy(u-s.x,0)}else 20>s.x&&r.moveBy(20-s.x,0)}}if(this.rootBlock_.workspace==this.workspace_){if(e.Events.setGroup(!0),t=(t=(r=this.block_).mutationToDom())&&e.Xml.domToText(t),n=r.rendered,r.rendered=!1,r.compose(this.rootBlock_),r.rendered=n,r.initSvg(),r.rendered&&r.render(),t!=(n=(n=r.mutationToDom())&&e.Xml.domToText(n))){e.Events.fire(new(e.Events.get(e.Events.BLOCK_CHANGE))(r,"mutation",null,t,n));var x=e.Events.getGroup();setTimeout(function(){e.Events.setGroup(x),r.bumpNeighbours(),e.Events.setGroup(!1)},e.BUMP_DELAY)}this.workspace_.isDragging()||this.resizeBubble_(),e.Events.setGroup(!1)}}},e.Mutator.prototype.dispose=function(){this.block_.mutator=null,e.Icon.prototype.dispose.call(this)},e.Mutator.prototype.updateBlockStyle=function(){var t=this.workspace_;if(t&&t.getAllBlocks(!1)){for(var s,n=t.getAllBlocks(!1),r=0;s=n[r];r++)s.setStyle(s.getStyleName());if(r=t.getFlyout())for(t=r.workspace_.getAllBlocks(!1),r=0;s=t[r];r++)s.setStyle(s.getStyleName())}},e.Mutator.reconnect=function(t,n,r){if(!t||!t.getSourceBlock().workspace)return!1;r=n.getInput(r).connection;var s=t.targetBlock();return!(s&&s!=n||r.targetConnection==t||(r.isConnected()&&r.disconnect(),r.connect(t),0))},e.Mutator.findParentWs=function(t){var n=null;if(t&&t.options){var r=t.options.parentWorkspace;t.isFlyout?r&&r.options&&(n=r.options.parentWorkspace):r&&(n=r)}return n},e.FieldTextInput=function(t,n,r){this.spellcheck_=!0,e.FieldTextInput.superClass_.constructor.call(this,t,n,r),this.onKeyInputWrapper_=this.onKeyDownWrapper_=this.htmlInput_=null,this.fullBlockClickTarget_=!1,this.workspace_=null},e.utils.object.inherits(e.FieldTextInput,e.Field),e.FieldTextInput.prototype.DEFAULT_VALUE="",e.FieldTextInput.fromJson=function(t){var n=e.utils.replaceMessageReferences(t.text);return new e.FieldTextInput(n,void 0,t)},e.FieldTextInput.prototype.SERIALIZABLE=!0,e.FieldTextInput.BORDERRADIUS=4,e.FieldTextInput.prototype.CURSOR="text",e.FieldTextInput.prototype.configure_=function(t){e.FieldTextInput.superClass_.configure_.call(this,t),"boolean"==typeof t.spellcheck&&(this.spellcheck_=t.spellcheck)},e.FieldTextInput.prototype.initView=function(){if(this.getConstants().FULL_BLOCK_FIELDS){for(var s,t=0,n=0,r=0;s=this.sourceBlock_.inputList[r];r++){for(var u=0;s.fieldRow[u];u++)t++;s.connection&&n++}this.fullBlockClickTarget_=1>=t&&this.sourceBlock_.outputConnection&&!n}else this.fullBlockClickTarget_=!1;this.fullBlockClickTarget_?this.clickTarget_=this.sourceBlock_.getSvgRoot():this.createBorderRect_(),this.createTextElement_()},e.FieldTextInput.prototype.doClassValidation_=function(t){return null==t?null:String(t)},e.FieldTextInput.prototype.doValueInvalid_=function(t){this.isBeingEdited_&&(this.isTextValid_=!1,t=this.value_,this.value_=this.htmlInput_.untypedDefaultValue_,this.sourceBlock_&&e.Events.isEnabled()&&e.Events.fire(new(e.Events.get(e.Events.BLOCK_CHANGE))(this.sourceBlock_,"field",this.name||null,t,this.value_)))},e.FieldTextInput.prototype.doValueUpdate_=function(t){this.isTextValid_=!0,this.value_=t,this.isBeingEdited_||(this.isDirty_=!0)},e.FieldTextInput.prototype.applyColour=function(){this.sourceBlock_&&this.getConstants().FULL_BLOCK_FIELDS&&(this.borderRect_?this.borderRect_.setAttribute("stroke",this.sourceBlock_.style.colourTertiary):this.sourceBlock_.pathObject.svgPath.setAttribute("fill",this.getConstants().FIELD_BORDER_RECT_COLOUR))},e.FieldTextInput.prototype.render_=function(){if(e.FieldTextInput.superClass_.render_.call(this),this.isBeingEdited_){this.resizeEditor_();var t=this.htmlInput_;this.isTextValid_?(e.utils.dom.removeClass(t,"blocklyInvalidInput"),e.utils.aria.setState(t,e.utils.aria.State.INVALID,!1)):(e.utils.dom.addClass(t,"blocklyInvalidInput"),e.utils.aria.setState(t,e.utils.aria.State.INVALID,!0))}},e.FieldTextInput.prototype.setSpellcheck=function(t){t!=this.spellcheck_&&(this.spellcheck_=t,this.htmlInput_&&this.htmlInput_.setAttribute("spellcheck",this.spellcheck_))},e.FieldTextInput.prototype.showEditor_=function(t,n){this.workspace_=this.sourceBlock_.workspace,!(t=n||!1)&&(e.utils.userAgent.MOBILE||e.utils.userAgent.ANDROID||e.utils.userAgent.IPAD)?this.showPromptEditor_():this.showInlineEditor_(t)},e.FieldTextInput.prototype.showPromptEditor_=function(){e.prompt(e.Msg.CHANGE_VALUE_TITLE,this.getText(),function(t){this.setValue(this.getValueFromEditorText_(t))}.bind(this))},e.FieldTextInput.prototype.showInlineEditor_=function(t){e.WidgetDiv.show(this,this.sourceBlock_.RTL,this.widgetDispose_.bind(this)),this.htmlInput_=this.widgetCreate_(),this.isBeingEdited_=!0,t||(this.htmlInput_.focus({preventScroll:!0}),this.htmlInput_.select())},e.FieldTextInput.prototype.widgetCreate_=function(){var t=e.WidgetDiv.DIV;e.utils.dom.addClass(this.getClickTarget_(),"editing");var n=document.createElement("input");n.className="blocklyHtmlInput",n.setAttribute("spellcheck",this.spellcheck_);var r=this.workspace_.getScale(),s=this.getConstants().FIELD_TEXT_FONTSIZE*r+"pt";if(t.style.fontSize=s,n.style.fontSize=s,s=e.FieldTextInput.BORDERRADIUS*r+"px",this.fullBlockClickTarget_){s=((s=this.getScaledBBox()).bottom-s.top)/2+"px";var u=this.sourceBlock_.getParent()?this.sourceBlock_.getParent().style.colourTertiary:this.sourceBlock_.style.colourTertiary;n.style.border=1*r+"px solid "+u,t.style.borderRadius=s,t.style.transition="box-shadow 0.25s ease 0s",this.getConstants().FIELD_TEXTINPUT_BOX_SHADOW&&(t.style.boxShadow="rgba(255, 255, 255, 0.3) 0px 0px 0px "+4*r+"px")}return n.style.borderRadius=s,t.appendChild(n),n.value=n.defaultValue=this.getEditorText_(this.value_),n.untypedDefaultValue_=this.value_,n.oldValue_=null,this.resizeEditor_(),this.bindInputEvents_(n),n},e.FieldTextInput.prototype.widgetDispose_=function(){this.isBeingEdited_=!1,this.isTextValid_=!0,this.forceRerender(),this.onFinishEditing_&&this.onFinishEditing_(this.value_),this.unbindInputEvents_();var t=e.WidgetDiv.DIV.style;t.width="auto",t.height="auto",t.fontSize="",t.transition="",t.boxShadow="",this.htmlInput_=null,e.utils.dom.removeClass(this.getClickTarget_(),"editing")},e.FieldTextInput.prototype.bindInputEvents_=function(t){this.onKeyDownWrapper_=e.browserEvents.conditionalBind(t,"keydown",this,this.onHtmlInputKeyDown_),this.onKeyInputWrapper_=e.browserEvents.conditionalBind(t,"input",this,this.onHtmlInputChange_)},e.FieldTextInput.prototype.unbindInputEvents_=function(){this.onKeyDownWrapper_&&(e.browserEvents.unbind(this.onKeyDownWrapper_),this.onKeyDownWrapper_=null),this.onKeyInputWrapper_&&(e.browserEvents.unbind(this.onKeyInputWrapper_),this.onKeyInputWrapper_=null)},e.FieldTextInput.prototype.onHtmlInputKeyDown_=function(t){t.keyCode==e.utils.KeyCodes.ENTER?(e.WidgetDiv.hide(),e.DropDownDiv.hideWithoutAnimation()):t.keyCode==e.utils.KeyCodes.ESC?(this.setValue(this.htmlInput_.untypedDefaultValue_),e.WidgetDiv.hide(),e.DropDownDiv.hideWithoutAnimation()):t.keyCode==e.utils.KeyCodes.TAB&&(e.WidgetDiv.hide(),e.DropDownDiv.hideWithoutAnimation(),this.sourceBlock_.tab(this,!t.shiftKey),t.preventDefault())},e.FieldTextInput.prototype.onHtmlInputChange_=function(t){(t=this.htmlInput_.value)!==this.htmlInput_.oldValue_&&(this.htmlInput_.oldValue_=t,e.Events.setGroup(!0),t=this.getValueFromEditorText_(t),this.setValue(t),this.forceRerender(),this.resizeEditor_(),e.Events.setGroup(!1))},e.FieldTextInput.prototype.setEditorValue_=function(t){this.isDirty_=!0,this.isBeingEdited_&&(this.htmlInput_.value=this.getEditorText_(t)),this.setValue(t)},e.FieldTextInput.prototype.resizeEditor_=function(){var t=e.WidgetDiv.DIV,n=this.getScaledBBox();t.style.width=n.right-n.left+"px",t.style.height=n.bottom-n.top+"px",n=new e.utils.Coordinate(this.sourceBlock_.RTL?n.right-t.offsetWidth:n.left,n.top),t.style.left=n.x+"px",t.style.top=n.y+"px"},e.FieldTextInput.prototype.isTabNavigable=function(){return!0},e.FieldTextInput.prototype.getText_=function(){return this.isBeingEdited_&&this.htmlInput_?this.htmlInput_.value:null},e.FieldTextInput.prototype.getEditorText_=function(t){return String(t)},e.FieldTextInput.prototype.getValueFromEditorText_=function(t){return t},e.fieldRegistry.register("field_input",e.FieldTextInput),e.FieldAngle=function(t,n,r){this.clockwise_=e.FieldAngle.CLOCKWISE,this.offset_=e.FieldAngle.OFFSET,this.wrap_=e.FieldAngle.WRAP,this.round_=e.FieldAngle.ROUND,e.FieldAngle.superClass_.constructor.call(this,t,n,r),this.moveSurfaceWrapper_=this.clickSurfaceWrapper_=this.clickWrapper_=this.line_=this.gauge_=this.editor_=null},e.utils.object.inherits(e.FieldAngle,e.FieldTextInput),e.FieldAngle.prototype.DEFAULT_VALUE=0,e.FieldAngle.fromJson=function(t){return new e.FieldAngle(t.angle,void 0,t)},e.FieldAngle.prototype.SERIALIZABLE=!0,e.FieldAngle.ROUND=15,e.FieldAngle.HALF=50,e.FieldAngle.CLOCKWISE=!1,e.FieldAngle.OFFSET=0,e.FieldAngle.WRAP=360,e.FieldAngle.RADIUS=e.FieldAngle.HALF-1,e.FieldAngle.prototype.configure_=function(t){switch(e.FieldAngle.superClass_.configure_.call(this,t),t.mode){case"compass":this.clockwise_=!0,this.offset_=90;break;case"protractor":this.clockwise_=!1,this.offset_=0}var n=t.clockwise;"boolean"==typeof n&&(this.clockwise_=n),null!=(n=t.offset)&&(n=Number(n),isNaN(n)||(this.offset_=n)),null!=(n=t.wrap)&&(n=Number(n),isNaN(n)||(this.wrap_=n)),null!=(t=t.round)&&(t=Number(t),isNaN(t)||(this.round_=t))},e.FieldAngle.prototype.initView=function(){e.FieldAngle.superClass_.initView.call(this),this.symbol_=e.utils.dom.createSvgElement(e.utils.Svg.TSPAN,{},null),this.symbol_.appendChild(document.createTextNode("\xb0")),this.textElement_.appendChild(this.symbol_)},e.FieldAngle.prototype.render_=function(){e.FieldAngle.superClass_.render_.call(this),this.updateGraph_()},e.FieldAngle.prototype.showEditor_=function(t){e.FieldAngle.superClass_.showEditor_.call(this,t,e.utils.userAgent.MOBILE||e.utils.userAgent.ANDROID||e.utils.userAgent.IPAD),this.dropdownCreate_(),e.DropDownDiv.getContentDiv().appendChild(this.editor_),e.DropDownDiv.setColour(this.sourceBlock_.style.colourPrimary,this.sourceBlock_.style.colourTertiary),e.DropDownDiv.showPositionedByField(this,this.dropdownDispose_.bind(this)),this.updateGraph_()},e.FieldAngle.prototype.dropdownCreate_=function(){var t=e.utils.dom.createSvgElement(e.utils.Svg.SVG,{xmlns:e.utils.dom.SVG_NS,"xmlns:html":e.utils.dom.HTML_NS,"xmlns:xlink":e.utils.dom.XLINK_NS,version:"1.1",height:2*e.FieldAngle.HALF+"px",width:2*e.FieldAngle.HALF+"px",style:"touch-action: none"},null),n=e.utils.dom.createSvgElement(e.utils.Svg.CIRCLE,{cx:e.FieldAngle.HALF,cy:e.FieldAngle.HALF,r:e.FieldAngle.RADIUS,class:"blocklyAngleCircle"},t);this.gauge_=e.utils.dom.createSvgElement(e.utils.Svg.PATH,{class:"blocklyAngleGauge"},t),this.line_=e.utils.dom.createSvgElement(e.utils.Svg.LINE,{x1:e.FieldAngle.HALF,y1:e.FieldAngle.HALF,class:"blocklyAngleLine"},t);for(var r=0;360>r;r+=15)e.utils.dom.createSvgElement(e.utils.Svg.LINE,{x1:e.FieldAngle.HALF+e.FieldAngle.RADIUS,y1:e.FieldAngle.HALF,x2:e.FieldAngle.HALF+e.FieldAngle.RADIUS-(r%45==0?10:5),y2:e.FieldAngle.HALF,class:"blocklyAngleMarks",transform:"rotate("+r+","+e.FieldAngle.HALF+","+e.FieldAngle.HALF+")"},t);this.clickWrapper_=e.browserEvents.conditionalBind(t,"click",this,this.hide_),this.clickSurfaceWrapper_=e.browserEvents.conditionalBind(n,"click",this,this.onMouseMove_,!0,!0),this.moveSurfaceWrapper_=e.browserEvents.conditionalBind(n,"mousemove",this,this.onMouseMove_,!0,!0),this.editor_=t},e.FieldAngle.prototype.dropdownDispose_=function(){this.clickWrapper_&&(e.browserEvents.unbind(this.clickWrapper_),this.clickWrapper_=null),this.clickSurfaceWrapper_&&(e.browserEvents.unbind(this.clickSurfaceWrapper_),this.clickSurfaceWrapper_=null),this.moveSurfaceWrapper_&&(e.browserEvents.unbind(this.moveSurfaceWrapper_),this.moveSurfaceWrapper_=null),this.line_=this.gauge_=null},e.FieldAngle.prototype.hide_=function(){e.DropDownDiv.hideIfOwner(this),e.WidgetDiv.hide()},e.FieldAngle.prototype.onMouseMove_=function(t){var n=this.gauge_.ownerSVGElement.getBoundingClientRect(),r=t.clientX-n.left-e.FieldAngle.HALF;t=t.clientY-n.top-e.FieldAngle.HALF,n=Math.atan(-t/r),isNaN(n)||(n=e.utils.math.toDegrees(n),0>r?n+=180:0<t&&(n+=360),this.displayMouseOrKeyboardValue_(n=this.clockwise_?this.offset_+360-n:360-(this.offset_-n)))},e.FieldAngle.prototype.displayMouseOrKeyboardValue_=function(t){this.round_&&(t=Math.round(t/this.round_)*this.round_),(t=this.wrapValue_(t))!=this.value_&&this.setEditorValue_(t)},e.FieldAngle.prototype.updateGraph_=function(){if(this.gauge_){var t=Number(this.getText())+this.offset_,n=e.utils.math.toRadians(t%360);t=["M ",e.FieldAngle.HALF,",",e.FieldAngle.HALF];var r=e.FieldAngle.HALF,s=e.FieldAngle.HALF;if(!isNaN(n)){var u=Number(this.clockwise_),y=e.utils.math.toRadians(this.offset_),x=Math.cos(y)*e.FieldAngle.RADIUS,B=Math.sin(y)*-e.FieldAngle.RADIUS;u&&(n=2*y-n),r+=Math.cos(n)*e.FieldAngle.RADIUS,s-=Math.sin(n)*e.FieldAngle.RADIUS,n=Math.abs(Math.floor((n-y)/Math.PI)%2),u&&(n=1-n),t.push(" l ",x,",",B," A ",e.FieldAngle.RADIUS,",",e.FieldAngle.RADIUS," 0 ",n," ",u," ",r,",",s," z")}this.gauge_.setAttribute("d",t.join("")),this.line_.setAttribute("x2",r),this.line_.setAttribute("y2",s)}},e.FieldAngle.prototype.onHtmlInputKeyDown_=function(t){var n;if(e.FieldAngle.superClass_.onHtmlInputKeyDown_.call(this,t),t.keyCode===e.utils.KeyCodes.LEFT?n=this.sourceBlock_.RTL?1:-1:t.keyCode===e.utils.KeyCodes.RIGHT?n=this.sourceBlock_.RTL?-1:1:t.keyCode===e.utils.KeyCodes.DOWN?n=-1:t.keyCode===e.utils.KeyCodes.UP&&(n=1),n){var r=this.getValue();this.displayMouseOrKeyboardValue_(r+n*this.round_),t.preventDefault(),t.stopPropagation()}},e.FieldAngle.prototype.doClassValidation_=function(t){return t=Number(t),isNaN(t)||!isFinite(t)?null:this.wrapValue_(t)},e.FieldAngle.prototype.wrapValue_=function(t){return 0>(t%=360)&&(t+=360),t>this.wrap_&&(t-=360),t},e.Css.register(".blocklyAngleCircle {,stroke: #444;,stroke-width: 1;,fill: #ddd;,fill-opacity: .8;,},.blocklyAngleMarks {,stroke: #444;,stroke-width: 1;,},.blocklyAngleGauge {,fill: #f88;,fill-opacity: .8;,pointer-events: none;,},.blocklyAngleLine {,stroke: #f00;,stroke-width: 2;,stroke-linecap: round;,pointer-events: none;,}".split(",")),e.fieldRegistry.register("field_angle",e.FieldAngle),e.FieldCheckbox=function(t,n,r){this.checkChar_=null,e.FieldCheckbox.superClass_.constructor.call(this,t,n,r)},e.utils.object.inherits(e.FieldCheckbox,e.Field),e.FieldCheckbox.prototype.DEFAULT_VALUE=!1,e.FieldCheckbox.fromJson=function(t){return new e.FieldCheckbox(t.checked,void 0,t)},e.FieldCheckbox.CHECK_CHAR="\u2713",e.FieldCheckbox.prototype.SERIALIZABLE=!0,e.FieldCheckbox.prototype.CURSOR="default",e.FieldCheckbox.prototype.configure_=function(t){e.FieldCheckbox.superClass_.configure_.call(this,t),t.checkCharacter&&(this.checkChar_=t.checkCharacter)},e.FieldCheckbox.prototype.initView=function(){e.FieldCheckbox.superClass_.initView.call(this),e.utils.dom.addClass(this.textElement_,"blocklyCheckbox"),this.textElement_.style.display=this.value_?"block":"none"},e.FieldCheckbox.prototype.render_=function(){this.textContent_&&(this.textContent_.nodeValue=this.getDisplayText_()),this.updateSize_(this.getConstants().FIELD_CHECKBOX_X_OFFSET)},e.FieldCheckbox.prototype.getDisplayText_=function(){return this.checkChar_||e.FieldCheckbox.CHECK_CHAR},e.FieldCheckbox.prototype.setCheckCharacter=function(t){this.checkChar_=t,this.forceRerender()},e.FieldCheckbox.prototype.showEditor_=function(){this.setValue(!this.value_)},e.FieldCheckbox.prototype.doClassValidation_=function(t){return!0===t||"TRUE"===t?"TRUE":!1===t||"FALSE"===t?"FALSE":null},e.FieldCheckbox.prototype.doValueUpdate_=function(t){this.value_=this.convertValueToBool_(t),this.textElement_&&(this.textElement_.style.display=this.value_?"block":"none")},e.FieldCheckbox.prototype.getValue=function(){return this.value_?"TRUE":"FALSE"},e.FieldCheckbox.prototype.getValueBoolean=function(){return this.value_},e.FieldCheckbox.prototype.getText=function(){return String(this.convertValueToBool_(this.value_))},e.FieldCheckbox.prototype.convertValueToBool_=function(t){return"string"==typeof t?"TRUE"==t:!!t},e.fieldRegistry.register("field_checkbox",e.FieldCheckbox),e.FieldColour=function(t,n,r){e.FieldColour.superClass_.constructor.call(this,t,n,r),this.onKeyDownWrapper_=this.onMouseLeaveWrapper_=this.onMouseEnterWrapper_=this.onMouseMoveWrapper_=this.onClickWrapper_=this.highlightedIndex_=this.picker_=null},e.utils.object.inherits(e.FieldColour,e.Field),e.FieldColour.fromJson=function(t){return new e.FieldColour(t.colour,void 0,t)},e.FieldColour.prototype.SERIALIZABLE=!0,e.FieldColour.prototype.CURSOR="default",e.FieldColour.prototype.isDirty_=!1,e.FieldColour.prototype.colours_=null,e.FieldColour.prototype.titles_=null,e.FieldColour.prototype.columns_=0,e.FieldColour.prototype.configure_=function(t){e.FieldColour.superClass_.configure_.call(this,t),t.colourOptions&&(this.colours_=t.colourOptions,this.titles_=t.colourTitles),t.columns&&(this.columns_=t.columns)},e.FieldColour.prototype.initView=function(){this.size_=new e.utils.Size(this.getConstants().FIELD_COLOUR_DEFAULT_WIDTH,this.getConstants().FIELD_COLOUR_DEFAULT_HEIGHT),this.getConstants().FIELD_COLOUR_FULL_BLOCK?this.clickTarget_=this.sourceBlock_.getSvgRoot():(this.createBorderRect_(),this.borderRect_.style.fillOpacity="1")},e.FieldColour.prototype.applyColour=function(){this.getConstants().FIELD_COLOUR_FULL_BLOCK?(this.sourceBlock_.pathObject.svgPath.setAttribute("fill",this.getValue()),this.sourceBlock_.pathObject.svgPath.setAttribute("stroke","#fff")):this.borderRect_&&(this.borderRect_.style.fill=this.getValue())},e.FieldColour.prototype.doClassValidation_=function(t){return"string"!=typeof t?null:e.utils.colour.parse(t)},e.FieldColour.prototype.doValueUpdate_=function(t){this.value_=t,this.borderRect_?this.borderRect_.style.fill=t:this.sourceBlock_&&this.sourceBlock_.rendered&&(this.sourceBlock_.pathObject.svgPath.setAttribute("fill",t),this.sourceBlock_.pathObject.svgPath.setAttribute("stroke","#fff"))},e.FieldColour.prototype.getText=function(){var t=this.value_;return/^#(.)\1(.)\2(.)\3$/.test(t)&&(t="#"+t[1]+t[3]+t[5]),t},e.FieldColour.COLOURS="#ffffff #cccccc #c0c0c0 #999999 #666666 #333333 #000000 #ffcccc #ff6666 #ff0000 #cc0000 #990000 #660000 #330000 #ffcc99 #ff9966 #ff9900 #ff6600 #cc6600 #993300 #663300 #ffff99 #ffff66 #ffcc66 #ffcc33 #cc9933 #996633 #663333 #ffffcc #ffff33 #ffff00 #ffcc00 #999900 #666600 #333300 #99ff99 #66ff99 #33ff33 #33cc00 #009900 #006600 #003300 #99ffff #33ffff #66cccc #00cccc #339999 #336666 #003333 #ccffff #66ffff #33ccff #3366ff #3333ff #000099 #000066 #ccccff #9999ff #6666cc #6633ff #6600cc #333399 #330099 #ffccff #ff99ff #cc66cc #cc33cc #993399 #663366 #330033".split(" "),e.FieldColour.prototype.DEFAULT_VALUE=e.FieldColour.COLOURS[0],e.FieldColour.TITLES=[],e.FieldColour.COLUMNS=7,e.FieldColour.prototype.setColours=function(t,n){return this.colours_=t,n&&(this.titles_=n),this},e.FieldColour.prototype.setColumns=function(t){return this.columns_=t,this},e.FieldColour.prototype.showEditor_=function(){this.dropdownCreate_(),e.DropDownDiv.getContentDiv().appendChild(this.picker_),e.DropDownDiv.showPositionedByField(this,this.dropdownDispose_.bind(this)),this.picker_.focus({preventScroll:!0})},e.FieldColour.prototype.onClick_=function(t){null!==(t=(t=t.target)&&t.label)&&(this.setValue(t),e.DropDownDiv.hideIfOwner(this))},e.FieldColour.prototype.onKeyDown_=function(t){var n=!1;t.keyCode===e.utils.KeyCodes.UP?(this.moveHighlightBy_(0,-1),n=!0):t.keyCode===e.utils.KeyCodes.DOWN?(this.moveHighlightBy_(0,1),n=!0):t.keyCode===e.utils.KeyCodes.LEFT?(this.moveHighlightBy_(-1,0),n=!0):t.keyCode===e.utils.KeyCodes.RIGHT?(this.moveHighlightBy_(1,0),n=!0):t.keyCode===e.utils.KeyCodes.ENTER&&((n=this.getHighlighted_())&&null!==(n=n&&n.label)&&this.setValue(n),e.DropDownDiv.hideWithoutAnimation(),n=!0),n&&t.stopPropagation()},e.FieldColour.prototype.moveHighlightBy_=function(t,n){var r=this.colours_||e.FieldColour.COLOURS,s=this.columns_||e.FieldColour.COLUMNS,u=this.highlightedIndex_%s,y=Math.floor(this.highlightedIndex_/s);u+=t,y+=n,0>t?0>u&&0<y?(u=s-1,y--):0>u&&(u=0):0<t?u>s-1&&y<Math.floor(r.length/s)-1?(u=0,y++):u>s-1&&u--:0>n?0>y&&(y=0):0<n&&y>Math.floor(r.length/s)-1&&(y=Math.floor(r.length/s)-1),this.setHighlightedCell_(this.picker_.childNodes[y].childNodes[u],y*s+u)},e.FieldColour.prototype.onMouseMove_=function(t){var n=(t=t.target)&&Number(t.getAttribute("data-index"));null!==n&&n!==this.highlightedIndex_&&this.setHighlightedCell_(t,n)},e.FieldColour.prototype.onMouseEnter_=function(){this.picker_.focus({preventScroll:!0})},e.FieldColour.prototype.onMouseLeave_=function(){this.picker_.blur();var t=this.getHighlighted_();t&&e.utils.dom.removeClass(t,"blocklyColourHighlighted")},e.FieldColour.prototype.getHighlighted_=function(){var t=this.columns_||e.FieldColour.COLUMNS,n=this.picker_.childNodes[Math.floor(this.highlightedIndex_/t)];return n?n.childNodes[this.highlightedIndex_%t]:null},e.FieldColour.prototype.setHighlightedCell_=function(t,n){var r=this.getHighlighted_();r&&e.utils.dom.removeClass(r,"blocklyColourHighlighted"),e.utils.dom.addClass(t,"blocklyColourHighlighted"),this.highlightedIndex_=n,e.utils.aria.setState(this.picker_,e.utils.aria.State.ACTIVEDESCENDANT,t.getAttribute("id"))},e.FieldColour.prototype.dropdownCreate_=function(){var t=this.columns_||e.FieldColour.COLUMNS,n=this.colours_||e.FieldColour.COLOURS,r=this.titles_||e.FieldColour.TITLES,s=this.getValue(),u=document.createElement("table");u.className="blocklyColourTable",u.tabIndex=0,u.dir="ltr",e.utils.aria.setRole(u,e.utils.aria.Role.GRID),e.utils.aria.setState(u,e.utils.aria.State.EXPANDED,!0),e.utils.aria.setState(u,e.utils.aria.State.ROWCOUNT,Math.floor(n.length/t)),e.utils.aria.setState(u,e.utils.aria.State.COLCOUNT,t);for(var y,x=0;x<n.length;x++){x%t==0&&(y=document.createElement("tr"),e.utils.aria.setRole(y,e.utils.aria.Role.ROW),u.appendChild(y));var B=document.createElement("td");y.appendChild(B),B.label=n[x],B.title=r[x]||n[x],B.id=e.utils.IdGenerator.getNextUniqueId(),B.setAttribute("data-index",x),e.utils.aria.setRole(B,e.utils.aria.Role.GRIDCELL),e.utils.aria.setState(B,e.utils.aria.State.LABEL,n[x]),e.utils.aria.setState(B,e.utils.aria.State.SELECTED,n[x]==s),B.style.backgroundColor=n[x],n[x]==s&&(B.className="blocklyColourSelected",this.highlightedIndex_=x)}this.onClickWrapper_=e.browserEvents.conditionalBind(u,"click",this,this.onClick_,!0),this.onMouseMoveWrapper_=e.browserEvents.conditionalBind(u,"mousemove",this,this.onMouseMove_,!0),this.onMouseEnterWrapper_=e.browserEvents.conditionalBind(u,"mouseenter",this,this.onMouseEnter_,!0),this.onMouseLeaveWrapper_=e.browserEvents.conditionalBind(u,"mouseleave",this,this.onMouseLeave_,!0),this.onKeyDownWrapper_=e.browserEvents.conditionalBind(u,"keydown",this,this.onKeyDown_),this.picker_=u},e.FieldColour.prototype.dropdownDispose_=function(){this.onClickWrapper_&&(e.browserEvents.unbind(this.onClickWrapper_),this.onClickWrapper_=null),this.onMouseMoveWrapper_&&(e.browserEvents.unbind(this.onMouseMoveWrapper_),this.onMouseMoveWrapper_=null),this.onMouseEnterWrapper_&&(e.browserEvents.unbind(this.onMouseEnterWrapper_),this.onMouseEnterWrapper_=null),this.onMouseLeaveWrapper_&&(e.browserEvents.unbind(this.onMouseLeaveWrapper_),this.onMouseLeaveWrapper_=null),this.onKeyDownWrapper_&&(e.browserEvents.unbind(this.onKeyDownWrapper_),this.onKeyDownWrapper_=null),this.highlightedIndex_=this.picker_=null},e.Css.register([".blocklyColourTable {","border-collapse: collapse;","display: block;","outline: none;","padding: 1px;","}",".blocklyColourTable>tr>td {","border: .5px solid #888;","box-sizing: border-box;","cursor: pointer;","display: inline-block;","height: 20px;","padding: 0;","width: 20px;","}",".blocklyColourTable>tr>td.blocklyColourHighlighted {","border-color: #eee;","box-shadow: 2px 2px 7px 2px rgba(0,0,0,.3);","position: relative;","}",".blocklyColourSelected, .blocklyColourSelected:hover {","border-color: #eee !important;","outline: 1px solid #333;","position: relative;","}"]),e.fieldRegistry.register("field_colour",e.FieldColour),e.FieldDropdown=function(t,n,r){"function"!=typeof t&&e.FieldDropdown.validateOptions_(t),this.menuGenerator_=t,this.suffixField=this.prefixField=this.generatedOptions_=null,this.trimOptions_(),this.selectedOption_=this.getOptions(!1)[0],e.FieldDropdown.superClass_.constructor.call(this,this.selectedOption_[1],n,r),this.svgArrow_=this.arrow_=this.imageElement_=this.menu_=this.selectedMenuItem_=null},e.utils.object.inherits(e.FieldDropdown,e.Field),e.FieldDropdown.fromJson=function(t){return new e.FieldDropdown(t.options,void 0,t)},e.FieldDropdown.prototype.fromXml=function(t){this.isOptionListDynamic()&&this.getOptions(!1),this.setValue(t.textContent)},e.FieldDropdown.prototype.SERIALIZABLE=!0,e.FieldDropdown.CHECKMARK_OVERHANG=25,e.FieldDropdown.MAX_MENU_HEIGHT_VH=.45,e.FieldDropdown.IMAGE_Y_OFFSET=5,e.FieldDropdown.IMAGE_Y_PADDING=2*e.FieldDropdown.IMAGE_Y_OFFSET,e.FieldDropdown.ARROW_CHAR=e.utils.userAgent.ANDROID?"\u25bc":"\u25be",e.FieldDropdown.prototype.CURSOR="default",e.FieldDropdown.prototype.initView=function(){this.shouldAddBorderRect_()?this.createBorderRect_():this.clickTarget_=this.sourceBlock_.getSvgRoot(),this.createTextElement_(),this.imageElement_=e.utils.dom.createSvgElement(e.utils.Svg.IMAGE,{},this.fieldGroup_),this.getConstants().FIELD_DROPDOWN_SVG_ARROW?this.createSVGArrow_():this.createTextArrow_(),this.borderRect_&&e.utils.dom.addClass(this.borderRect_,"blocklyDropdownRect")},e.FieldDropdown.prototype.shouldAddBorderRect_=function(){return!this.getConstants().FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW||this.getConstants().FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW&&!this.sourceBlock_.isShadow()},e.FieldDropdown.prototype.createTextArrow_=function(){this.arrow_=e.utils.dom.createSvgElement(e.utils.Svg.TSPAN,{},this.textElement_),this.arrow_.appendChild(document.createTextNode(this.sourceBlock_.RTL?e.FieldDropdown.ARROW_CHAR+" ":" "+e.FieldDropdown.ARROW_CHAR)),this.sourceBlock_.RTL?this.textElement_.insertBefore(this.arrow_,this.textContent_):this.textElement_.appendChild(this.arrow_)},e.FieldDropdown.prototype.createSVGArrow_=function(){this.svgArrow_=e.utils.dom.createSvgElement(e.utils.Svg.IMAGE,{height:this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE+"px",width:this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE+"px"},this.fieldGroup_),this.svgArrow_.setAttributeNS(e.utils.dom.XLINK_NS,"xlink:href",this.getConstants().FIELD_DROPDOWN_SVG_ARROW_DATAURI)},e.FieldDropdown.prototype.showEditor_=function(t){if(this.dropdownCreate_(),this.menu_.openingCoords=t&&"number"==typeof t.clientX?new e.utils.Coordinate(t.clientX,t.clientY):null,this.menu_.render(e.DropDownDiv.getContentDiv()),t=this.menu_.getElement(),e.utils.dom.addClass(t,"blocklyDropdownMenu"),this.getConstants().FIELD_DROPDOWN_COLOURED_DIV){t=this.sourceBlock_.isShadow()?this.sourceBlock_.getParent().getColour():this.sourceBlock_.getColour();var n=this.sourceBlock_.isShadow()?this.sourceBlock_.getParent().style.colourTertiary:this.sourceBlock_.style.colourTertiary;e.DropDownDiv.setColour(t,n)}e.DropDownDiv.showPositionedByField(this,this.dropdownDispose_.bind(this)),this.menu_.focus(),this.selectedMenuItem_&&this.menu_.setHighlighted(this.selectedMenuItem_),this.applyColour()},e.FieldDropdown.prototype.dropdownCreate_=function(){var t=new e.Menu;t.setRole(e.utils.aria.Role.LISTBOX),this.menu_=t;var n=this.getOptions(!1);this.selectedMenuItem_=null;for(var r=0;r<n.length;r++){var s=n[r][0],u=n[r][1];if("object"==typeof s){var y=new Image(s.width,s.height);y.src=s.src,y.alt=s.alt||"",s=y}(s=new e.MenuItem(s,u)).setRole(e.utils.aria.Role.OPTION),s.setRightToLeft(this.sourceBlock_.RTL),s.setCheckable(!0),t.addChild(s),s.setChecked(u==this.value_),u==this.value_&&(this.selectedMenuItem_=s),s.onAction(this.handleMenuActionEvent_,this)}},e.FieldDropdown.prototype.dropdownDispose_=function(){this.menu_&&this.menu_.dispose(),this.selectedMenuItem_=this.menu_=null,this.applyColour()},e.FieldDropdown.prototype.handleMenuActionEvent_=function(t){e.DropDownDiv.hideIfOwner(this,!0),this.onItemSelected_(this.menu_,t)},e.FieldDropdown.prototype.onItemSelected_=function(t,n){this.setValue(n.getValue())},e.FieldDropdown.prototype.trimOptions_=function(){var t=this.menuGenerator_;if(Array.isArray(t)){for(var n=!1,r=0;r<t.length;r++){var s=t[r][0];"string"==typeof s?t[r][0]=e.utils.replaceMessageReferences(s):(null!=s.alt&&(t[r][0].alt=e.utils.replaceMessageReferences(s.alt)),n=!0)}if(!(n||2>t.length)){for(n=[],r=0;r<t.length;r++)n.push(t[r][0]);r=e.utils.string.shortestStringLength(n),s=e.utils.string.commonWordPrefix(n,r);var u=e.utils.string.commonWordSuffix(n,r);!s&&!u||r<=s+u||(s&&(this.prefixField=n[0].substring(0,s-1)),u&&(this.suffixField=n[0].substr(1-u)),this.menuGenerator_=e.FieldDropdown.applyTrim_(t,s,u))}}},e.FieldDropdown.applyTrim_=function(t,n,r){for(var s=[],u=0;u<t.length;u++){var y=t[u][0],x=t[u][1];y=y.substring(n,y.length-r),s[u]=[y,x]}return s},e.FieldDropdown.prototype.isOptionListDynamic=function(){return"function"==typeof this.menuGenerator_},e.FieldDropdown.prototype.getOptions=function(t){return this.isOptionListDynamic()?(this.generatedOptions_&&t||(this.generatedOptions_=this.menuGenerator_.call(this),e.FieldDropdown.validateOptions_(this.generatedOptions_)),this.generatedOptions_):this.menuGenerator_},e.FieldDropdown.prototype.doClassValidation_=function(t){for(var u,n=!1,r=this.getOptions(!0),s=0;u=r[s];s++)if(u[1]==t){n=!0;break}return n?t:(this.sourceBlock_&&console.warn("Cannot set the dropdown's value to an unavailable option. Block type: "+this.sourceBlock_.type+", Field name: "+this.name+", Value: "+t),null)},e.FieldDropdown.prototype.doValueUpdate_=function(t){e.FieldDropdown.superClass_.doValueUpdate_.call(this,t),t=this.getOptions(!0);for(var r,n=0;r=t[n];n++)r[1]==this.value_&&(this.selectedOption_=r)},e.FieldDropdown.prototype.applyColour=function(){this.borderRect_&&(this.borderRect_.setAttribute("stroke",this.sourceBlock_.style.colourTertiary),this.borderRect_.setAttribute("fill",this.menu_?this.sourceBlock_.style.colourTertiary:"transparent")),this.sourceBlock_&&this.arrow_&&(this.arrow_.style.fill=this.sourceBlock_.isShadow()?this.sourceBlock_.style.colourSecondary:this.sourceBlock_.style.colourPrimary)},e.FieldDropdown.prototype.render_=function(){this.textContent_.nodeValue="",this.imageElement_.style.display="none";var t=this.selectedOption_&&this.selectedOption_[0];t&&"object"==typeof t?this.renderSelectedImage_(t):this.renderSelectedText_(),this.positionBorderRect_()},e.FieldDropdown.prototype.renderSelectedImage_=function(t){this.imageElement_.style.display="",this.imageElement_.setAttributeNS(e.utils.dom.XLINK_NS,"xlink:href",t.src),this.imageElement_.setAttribute("height",t.height),this.imageElement_.setAttribute("width",t.width);var n=Number(t.height);t=Number(t.width);var r=!!this.borderRect_,s=Math.max(r?this.getConstants().FIELD_DROPDOWN_BORDER_RECT_HEIGHT:0,n+e.FieldDropdown.IMAGE_Y_PADDING);r=r?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0;var u=this.svgArrow_?this.positionSVGArrow_(t+r,s/2-this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE/2):e.utils.dom.getFastTextWidth(this.arrow_,this.getConstants().FIELD_TEXT_FONTSIZE,this.getConstants().FIELD_TEXT_FONTWEIGHT,this.getConstants().FIELD_TEXT_FONTFAMILY);this.size_.width=t+u+2*r,this.size_.height=s;var y=0;this.sourceBlock_.RTL?this.imageElement_.setAttribute("x",r+u):(y=t+u,this.textElement_.setAttribute("text-anchor","end"),this.imageElement_.setAttribute("x",r)),this.imageElement_.setAttribute("y",s/2-n/2),this.positionTextElement_(y+r,t+u)},e.FieldDropdown.prototype.renderSelectedText_=function(){this.textContent_.nodeValue=this.getDisplayText_(),e.utils.dom.addClass(this.textElement_,"blocklyDropdownText"),this.textElement_.setAttribute("text-anchor","start");var t=!!this.borderRect_,n=Math.max(t?this.getConstants().FIELD_DROPDOWN_BORDER_RECT_HEIGHT:0,this.getConstants().FIELD_TEXT_HEIGHT),r=e.utils.dom.getFastTextWidth(this.textElement_,this.getConstants().FIELD_TEXT_FONTSIZE,this.getConstants().FIELD_TEXT_FONTWEIGHT,this.getConstants().FIELD_TEXT_FONTFAMILY);t=t?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0;var s=0;this.svgArrow_&&(s=this.positionSVGArrow_(r+t,n/2-this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE/2)),this.size_.width=r+s+2*t,this.size_.height=n,this.positionTextElement_(t,r)},e.FieldDropdown.prototype.positionSVGArrow_=function(t,n){if(!this.svgArrow_)return 0;var r=this.borderRect_?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0,s=this.getConstants().FIELD_DROPDOWN_SVG_ARROW_PADDING,u=this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE;return this.svgArrow_.setAttribute("transform","translate("+(this.sourceBlock_.RTL?r:t+s)+","+n+")"),u+s},e.FieldDropdown.prototype.getText_=function(){if(!this.selectedOption_)return null;var t=this.selectedOption_[0];return"object"==typeof t?t.alt:t},e.FieldDropdown.validateOptions_=function(t){if(!Array.isArray(t))throw TypeError("FieldDropdown options must be an array.");if(!t.length)throw TypeError("FieldDropdown options must not be an empty array.");for(var n=!1,r=0;r<t.length;++r){var s=t[r];Array.isArray(s)?"string"!=typeof s[1]?(n=!0,console.error("Invalid option["+r+"]: Each FieldDropdown option id must be a string. Found "+s[1]+" in: ",s)):s[0]&&"string"!=typeof s[0]&&"string"!=typeof s[0].src&&(n=!0,console.error("Invalid option["+r+"]: Each FieldDropdown option must have a string label or image description. Found"+s[0]+" in: ",s)):(n=!0,console.error("Invalid option["+r+"]: Each FieldDropdown option must be an array. Found: ",s))}if(n)throw TypeError("Found invalid FieldDropdown options.")},e.fieldRegistry.register("field_dropdown",e.FieldDropdown),e.FieldLabelSerializable=function(t,n,r){e.FieldLabelSerializable.superClass_.constructor.call(this,t,n,r)},e.utils.object.inherits(e.FieldLabelSerializable,e.FieldLabel),e.FieldLabelSerializable.fromJson=function(t){var n=e.utils.replaceMessageReferences(t.text);return new e.FieldLabelSerializable(n,void 0,t)},e.FieldLabelSerializable.prototype.EDITABLE=!1,e.FieldLabelSerializable.prototype.SERIALIZABLE=!0,e.fieldRegistry.register("field_label_serializable",e.FieldLabelSerializable),e.FieldImage=function(t,n,r,s,u,y,x){if(!t)throw Error("Src value of an image field is required");if(t=e.utils.replaceMessageReferences(t),r=Number(e.utils.replaceMessageReferences(r)),n=Number(e.utils.replaceMessageReferences(n)),isNaN(r)||isNaN(n))throw Error("Height and width values of an image field must cast to numbers.");if(0>=r||0>=n)throw Error("Height and width values of an image field must be greater than 0.");this.flipRtl_=!1,this.altText_="",e.FieldImage.superClass_.constructor.call(this,t,null,x),x||(this.flipRtl_=!!y,this.altText_=e.utils.replaceMessageReferences(s)||""),this.size_=new e.utils.Size(n,r+e.FieldImage.Y_PADDING),this.imageHeight_=r,this.clickHandler_=null,"function"==typeof u&&(this.clickHandler_=u),this.imageElement_=null},e.utils.object.inherits(e.FieldImage,e.Field),e.FieldImage.prototype.DEFAULT_VALUE="",e.FieldImage.fromJson=function(t){return new e.FieldImage(t.src,t.width,t.height,void 0,void 0,void 0,t)},e.FieldImage.Y_PADDING=1,e.FieldImage.prototype.EDITABLE=!1,e.FieldImage.prototype.isDirty_=!1,e.FieldImage.prototype.configure_=function(t){e.FieldImage.superClass_.configure_.call(this,t),this.flipRtl_=!!t.flipRtl,this.altText_=e.utils.replaceMessageReferences(t.alt)||""},e.FieldImage.prototype.initView=function(){this.imageElement_=e.utils.dom.createSvgElement(e.utils.Svg.IMAGE,{height:this.imageHeight_+"px",width:this.size_.width+"px",alt:this.altText_},this.fieldGroup_),this.imageElement_.setAttributeNS(e.utils.dom.XLINK_NS,"xlink:href",this.value_),this.clickHandler_&&(this.imageElement_.style.cursor="pointer")},e.FieldImage.prototype.updateSize_=function(){},e.FieldImage.prototype.doClassValidation_=function(t){return"string"!=typeof t?null:t},e.FieldImage.prototype.doValueUpdate_=function(t){this.value_=t,this.imageElement_&&this.imageElement_.setAttributeNS(e.utils.dom.XLINK_NS,"xlink:href",String(this.value_))},e.FieldImage.prototype.getFlipRtl=function(){return this.flipRtl_},e.FieldImage.prototype.setAlt=function(t){t!=this.altText_&&(this.altText_=t||"",this.imageElement_&&this.imageElement_.setAttribute("alt",this.altText_))},e.FieldImage.prototype.showEditor_=function(){this.clickHandler_&&this.clickHandler_(this)},e.FieldImage.prototype.setOnClickHandler=function(t){this.clickHandler_=t},e.FieldImage.prototype.getText_=function(){return this.altText_},e.fieldRegistry.register("field_image",e.FieldImage),e.FieldMultilineInput=function(t,n,r){e.FieldMultilineInput.superClass_.constructor.call(this,t,n,r),this.textGroup_=null,this.maxLines_=1/0,this.isOverflowedY_=!1},e.utils.object.inherits(e.FieldMultilineInput,e.FieldTextInput),e.FieldMultilineInput.prototype.configure_=function(t){e.FieldMultilineInput.superClass_.configure_.call(this,t),t.maxLines&&this.setMaxLines(t.maxLines)},e.FieldMultilineInput.fromJson=function(t){var n=e.utils.replaceMessageReferences(t.text);return new e.FieldMultilineInput(n,void 0,t)},e.FieldMultilineInput.prototype.toXml=function(t){return t.textContent=this.getValue().replace(/\n/g,"&#10;"),t},e.FieldMultilineInput.prototype.fromXml=function(t){this.setValue(t.textContent.replace(/&#10;/g,"\n"))},e.FieldMultilineInput.prototype.initView=function(){this.createBorderRect_(),this.textGroup_=e.utils.dom.createSvgElement(e.utils.Svg.G,{class:"blocklyEditableText"},this.fieldGroup_)},e.FieldMultilineInput.prototype.getDisplayText_=function(){var t=this.getText();if(!t)return e.Field.NBSP;var n=t.split("\n");t="";for(var r=this.isOverflowedY_?this.maxLines_:n.length,s=0;s<r;s++){var u=n[s];u.length>this.maxDisplayLength?u=u.substring(0,this.maxDisplayLength-4)+"...":this.isOverflowedY_&&s===r-1&&(u=u.substring(0,u.length-3)+"..."),t+=u=u.replace(/\s/g,e.Field.NBSP),s!==r-1&&(t+="\n")}return this.sourceBlock_.RTL&&(t+="\u200f"),t},e.FieldMultilineInput.prototype.doValueUpdate_=function(t){e.FieldMultilineInput.superClass_.doValueUpdate_.call(this,t),this.isOverflowedY_=this.value_.split("\n").length>this.maxLines_},e.FieldMultilineInput.prototype.render_=function(){for(var t;t=this.textGroup_.firstChild;)this.textGroup_.removeChild(t);t=this.getDisplayText_().split("\n");for(var n=0,r=0;r<t.length;r++){var s=this.getConstants().FIELD_TEXT_HEIGHT+this.getConstants().FIELD_BORDER_RECT_Y_PADDING;e.utils.dom.createSvgElement(e.utils.Svg.TEXT,{class:"blocklyText blocklyMultilineText",x:this.getConstants().FIELD_BORDER_RECT_X_PADDING,y:n+this.getConstants().FIELD_BORDER_RECT_Y_PADDING,dy:this.getConstants().FIELD_TEXT_BASELINE},this.textGroup_).appendChild(document.createTextNode(t[r])),n+=s}this.isBeingEdited_&&(t=this.htmlInput_,this.isOverflowedY_?e.utils.dom.addClass(t,"blocklyHtmlTextAreaInputOverflowedY"):e.utils.dom.removeClass(t,"blocklyHtmlTextAreaInputOverflowedY")),this.updateSize_(),this.isBeingEdited_&&(this.sourceBlock_.RTL?setTimeout(this.resizeEditor_.bind(this),0):this.resizeEditor_(),t=this.htmlInput_,this.isTextValid_?(e.utils.dom.removeClass(t,"blocklyInvalidInput"),e.utils.aria.setState(t,e.utils.aria.State.INVALID,!1)):(e.utils.dom.addClass(t,"blocklyInvalidInput"),e.utils.aria.setState(t,e.utils.aria.State.INVALID,!0)))},e.FieldMultilineInput.prototype.updateSize_=function(){for(var t=this.textGroup_.childNodes,n=0,r=0,s=0;s<t.length;s++){var u=e.utils.dom.getTextWidth(t[s]);u>n&&(n=u),r+=this.getConstants().FIELD_TEXT_HEIGHT+(0<s?this.getConstants().FIELD_BORDER_RECT_Y_PADDING:0)}if(this.isBeingEdited_){t=this.value_.split("\n"),u=e.utils.dom.createSvgElement(e.utils.Svg.TEXT,{class:"blocklyText blocklyMultilineText"});var y=this.getConstants().FIELD_TEXT_FONTSIZE,x=this.getConstants().FIELD_TEXT_FONTWEIGHT,B=this.getConstants().FIELD_TEXT_FONTFAMILY;for(s=0;s<t.length;s++){t[s].length>this.maxDisplayLength&&(t[s]=t[s].substring(0,this.maxDisplayLength)),u.textContent=t[s];var Q=e.utils.dom.getFastTextWidth(u,y,x,B);Q>n&&(n=Q)}n+=this.htmlInput_.offsetWidth-this.htmlInput_.clientWidth}this.borderRect_&&(r+=2*this.getConstants().FIELD_BORDER_RECT_Y_PADDING,n+=2*this.getConstants().FIELD_BORDER_RECT_X_PADDING,this.borderRect_.setAttribute("width",n),this.borderRect_.setAttribute("height",r)),this.size_.width=n,this.size_.height=r,this.positionBorderRect_()},e.FieldMultilineInput.prototype.showEditor_=function(t,n){e.FieldMultilineInput.superClass_.showEditor_.call(this,t,n),this.forceRerender()},e.FieldMultilineInput.prototype.widgetCreate_=function(){var t=e.WidgetDiv.DIV,n=this.workspace_.getScale(),r=document.createElement("textarea");r.className="blocklyHtmlInput blocklyHtmlTextAreaInput",r.setAttribute("spellcheck",this.spellcheck_);var s=this.getConstants().FIELD_TEXT_FONTSIZE*n+"pt";t.style.fontSize=s,r.style.fontSize=s,r.style.borderRadius=e.FieldTextInput.BORDERRADIUS*n+"px",s=this.getConstants().FIELD_BORDER_RECT_X_PADDING*n;var u=this.getConstants().FIELD_BORDER_RECT_Y_PADDING*n/2;return r.style.padding=u+"px "+s+"px "+u+"px "+s+"px",s=this.getConstants().FIELD_TEXT_HEIGHT+this.getConstants().FIELD_BORDER_RECT_Y_PADDING,r.style.lineHeight=s*n+"px",t.appendChild(r),r.value=r.defaultValue=this.getEditorText_(this.value_),r.untypedDefaultValue_=this.value_,r.oldValue_=null,e.utils.userAgent.GECKO?setTimeout(this.resizeEditor_.bind(this),0):this.resizeEditor_(),this.bindInputEvents_(r),r},e.FieldMultilineInput.prototype.setMaxLines=function(t){"number"==typeof t&&0<t&&t!==this.maxLines_&&(this.maxLines_=t,this.forceRerender())},e.FieldMultilineInput.prototype.getMaxLines=function(){return this.maxLines_},e.FieldMultilineInput.prototype.onHtmlInputKeyDown_=function(t){t.keyCode!==e.utils.KeyCodes.ENTER&&e.FieldMultilineInput.superClass_.onHtmlInputKeyDown_.call(this,t)},e.Css.register(".blocklyHtmlTextAreaInput {,font-family: monospace;,resize: none;,overflow: hidden;,height: 100%;,text-align: left;,},.blocklyHtmlTextAreaInputOverflowedY {,overflow-y: scroll;,}".split(",")),e.fieldRegistry.register("field_multilinetext",e.FieldMultilineInput),e.FieldNumber=function(t,n,r,s,u,y){this.min_=-1/0,this.max_=1/0,this.precision_=0,this.decimalPlaces_=null,e.FieldNumber.superClass_.constructor.call(this,t,u,y),y||this.setConstraints(n,r,s)},e.utils.object.inherits(e.FieldNumber,e.FieldTextInput),e.FieldNumber.prototype.DEFAULT_VALUE=0,e.FieldNumber.fromJson=function(t){return new e.FieldNumber(t.value,void 0,void 0,void 0,void 0,t)},e.FieldNumber.prototype.SERIALIZABLE=!0,e.FieldNumber.prototype.configure_=function(t){e.FieldNumber.superClass_.configure_.call(this,t),this.setMinInternal_(t.min),this.setMaxInternal_(t.max),this.setPrecisionInternal_(t.precision)},e.FieldNumber.prototype.setConstraints=function(t,n,r){this.setMinInternal_(t),this.setMaxInternal_(n),this.setPrecisionInternal_(r),this.setValue(this.getValue())},e.FieldNumber.prototype.setMin=function(t){this.setMinInternal_(t),this.setValue(this.getValue())},e.FieldNumber.prototype.setMinInternal_=function(t){null==t?this.min_=-1/0:(t=Number(t),isNaN(t)||(this.min_=t))},e.FieldNumber.prototype.getMin=function(){return this.min_},e.FieldNumber.prototype.setMax=function(t){this.setMaxInternal_(t),this.setValue(this.getValue())},e.FieldNumber.prototype.setMaxInternal_=function(t){null==t?this.max_=1/0:(t=Number(t),isNaN(t)||(this.max_=t))},e.FieldNumber.prototype.getMax=function(){return this.max_},e.FieldNumber.prototype.setPrecision=function(t){this.setPrecisionInternal_(t),this.setValue(this.getValue())},e.FieldNumber.prototype.setPrecisionInternal_=function(t){this.precision_=Number(t)||0;var n=String(this.precision_);-1!=n.indexOf("e")&&(n=this.precision_.toLocaleString("en-US",{maximumFractionDigits:20}));var r=n.indexOf(".");this.decimalPlaces_=-1==r?t?0:null:n.length-r-1},e.FieldNumber.prototype.getPrecision=function(){return this.precision_},e.FieldNumber.prototype.doClassValidation_=function(t){return null===t||(t=(t=(t=(t=String(t)).replace(/O/gi,"0")).replace(/,/g,"")).replace(/infinity/i,"Infinity"),t=Number(t||0),isNaN(t))?null:(t=Math.min(Math.max(t,this.min_),this.max_),this.precision_&&isFinite(t)&&(t=Math.round(t/this.precision_)*this.precision_),null!=this.decimalPlaces_&&(t=Number(t.toFixed(this.decimalPlaces_))),t)},e.FieldNumber.prototype.widgetCreate_=function(){var t=e.FieldNumber.superClass_.widgetCreate_.call(this);return-1/0<this.min_&&e.utils.aria.setState(t,e.utils.aria.State.VALUEMIN,this.min_),1/0>this.max_&&e.utils.aria.setState(t,e.utils.aria.State.VALUEMAX,this.max_),t},e.fieldRegistry.register("field_number",e.FieldNumber),e.FieldVariable=function(t,n,r,s,u){this.menuGenerator_=e.FieldVariable.dropdownCreate,this.defaultVariableName="string"==typeof t?t:"",this.size_=new e.utils.Size(0,0),u&&this.configure_(u),n&&this.setValidator(n),u||this.setTypes_(r,s)},e.utils.object.inherits(e.FieldVariable,e.FieldDropdown),e.FieldVariable.fromJson=function(t){var n=e.utils.replaceMessageReferences(t.variable);return new e.FieldVariable(n,void 0,void 0,void 0,t)},e.FieldVariable.prototype.SERIALIZABLE=!0,e.FieldVariable.prototype.configure_=function(t){e.FieldVariable.superClass_.configure_.call(this,t),this.setTypes_(t.variableTypes,t.defaultType)},e.FieldVariable.prototype.initModel=function(){if(!this.variable_){var t=e.Variables.getOrCreateVariablePackage(this.sourceBlock_.workspace,null,this.defaultVariableName,this.defaultType_);this.doValueUpdate_(t.getId())}},e.FieldVariable.prototype.shouldAddBorderRect_=function(){return e.FieldVariable.superClass_.shouldAddBorderRect_.call(this)&&(!this.getConstants().FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW||"variables_get"!=this.sourceBlock_.type)},e.FieldVariable.prototype.fromXml=function(t){var n=t.getAttribute("id"),r=t.textContent,s=t.getAttribute("variabletype")||t.getAttribute("variableType")||"";if(n=e.Variables.getOrCreateVariablePackage(this.sourceBlock_.workspace,n,r,s),null!=s&&s!==n.type)throw Error("Serialized variable type with id '"+n.getId()+"' had type "+n.type+", and does not match variable field that references it: "+e.Xml.domToText(t)+".");this.setValue(n.getId())},e.FieldVariable.prototype.toXml=function(t){return this.initModel(),t.id=this.variable_.getId(),t.textContent=this.variable_.name,this.variable_.type&&t.setAttribute("variabletype",this.variable_.type),t},e.FieldVariable.prototype.setSourceBlock=function(t){if(t.isShadow())throw Error("Variable fields are not allowed to exist on shadow blocks.");e.FieldVariable.superClass_.setSourceBlock.call(this,t)},e.FieldVariable.prototype.getValue=function(){return this.variable_?this.variable_.getId():null},e.FieldVariable.prototype.getText=function(){return this.variable_?this.variable_.name:""},e.FieldVariable.prototype.getVariable=function(){return this.variable_},e.FieldVariable.prototype.getValidator=function(){return this.variable_?this.validator_:null},e.FieldVariable.prototype.doClassValidation_=function(t){if(null===t)return null;var n=e.Variables.getVariable(this.sourceBlock_.workspace,t);return n?this.typeIsAllowed_(n=n.type)?t:(console.warn("Variable type doesn't match this field!  Type was "+n),null):(console.warn("Variable id doesn't point to a real variable! ID was "+t),null)},e.FieldVariable.prototype.doValueUpdate_=function(t){this.variable_=e.Variables.getVariable(this.sourceBlock_.workspace,t),e.FieldVariable.superClass_.doValueUpdate_.call(this,t)},e.FieldVariable.prototype.typeIsAllowed_=function(t){var n=this.getVariableTypes_();if(!n)return!0;for(var r=0;r<n.length;r++)if(t==n[r])return!0;return!1},e.FieldVariable.prototype.getVariableTypes_=function(){var t=this.variableTypes;if(null===t&&this.sourceBlock_&&this.sourceBlock_.workspace)return this.sourceBlock_.workspace.getVariableTypes();if(0==(t=t||[""]).length)throw t=this.getText(),Error("'variableTypes' of field variable "+t+" was an empty list");return t},e.FieldVariable.prototype.setTypes_=function(t,n){if(n=n||"",null==t||null==t)t=null;else{if(!Array.isArray(t))throw Error("'variableTypes' was not an array in the definition of a FieldVariable");for(var r=!1,s=0;s<t.length;s++)t[s]==n&&(r=!0);if(!r)throw Error("Invalid default type '"+n+"' in the definition of a FieldVariable")}this.defaultType_=n,this.variableTypes=t},e.FieldVariable.prototype.refreshVariableName=function(){this.forceRerender()},e.FieldVariable.dropdownCreate=function(){if(!this.variable_)throw Error("Tried to call dropdownCreate on a variable field with no variable selected.");var t=this.getText(),n=[];if(this.sourceBlock_&&this.sourceBlock_.workspace)for(var r=this.getVariableTypes_(),s=0;s<r.length;s++){var u=this.sourceBlock_.workspace.getVariablesOfType(r[s]);n=n.concat(u)}for(n.sort(e.VariableModel.compareByName),r=[],s=0;s<n.length;s++)r[s]=[n[s].name,n[s].getId()];return r.push([e.Msg.RENAME_VARIABLE,e.RENAME_VARIABLE_ID]),e.Msg.DELETE_VARIABLE&&r.push([e.Msg.DELETE_VARIABLE.replace("%1",t),e.DELETE_VARIABLE_ID]),r},e.FieldVariable.prototype.onItemSelected_=function(t,n){if(t=n.getValue(),this.sourceBlock_&&this.sourceBlock_.workspace){if(t==e.RENAME_VARIABLE_ID)return void e.Variables.renameVariable(this.sourceBlock_.workspace,this.variable_);if(t==e.DELETE_VARIABLE_ID)return void this.sourceBlock_.workspace.deleteVariableById(this.variable_.getId())}this.setValue(t)},e.FieldVariable.prototype.referencesVariables=function(){return!0},e.fieldRegistry.register("field_variable",e.FieldVariable),e.utils.svgPaths={},e.utils.svgPaths.point=function(t,n){return" "+t+","+n+" "},e.utils.svgPaths.curve=function(t,n){return" "+t+n.join("")},e.utils.svgPaths.moveTo=function(t,n){return" M "+t+","+n+" "},e.utils.svgPaths.moveBy=function(t,n){return" m "+t+","+n+" "},e.utils.svgPaths.lineTo=function(t,n){return" l "+t+","+n+" "},e.utils.svgPaths.line=function(t){return" l"+t.join("")},e.utils.svgPaths.lineOnAxis=function(t,n){return" "+t+" "+n+" "},e.utils.svgPaths.arc=function(t,n,r,s){return t+" "+r+" "+r+" "+n+s},e.blockRendering.ConstantProvider=function(){this.NO_PADDING=0,this.SMALL_PADDING=3,this.MEDIUM_PADDING=5,this.MEDIUM_LARGE_PADDING=8,this.LARGE_PADDING=10,this.TALL_INPUT_FIELD_OFFSET_Y=this.MEDIUM_PADDING,this.TAB_HEIGHT=15,this.TAB_OFFSET_FROM_TOP=5,this.TAB_VERTICAL_OVERLAP=2.5,this.TAB_WIDTH=8,this.NOTCH_WIDTH=15,this.NOTCH_HEIGHT=4,this.MIN_BLOCK_WIDTH=12,this.EMPTY_BLOCK_SPACER_HEIGHT=16,this.DUMMY_INPUT_SHADOW_MIN_HEIGHT=this.DUMMY_INPUT_MIN_HEIGHT=this.TAB_HEIGHT,this.CORNER_RADIUS=8,this.STATEMENT_INPUT_NOTCH_OFFSET=this.NOTCH_OFFSET_LEFT=15,this.STATEMENT_BOTTOM_SPACER=0,this.STATEMENT_INPUT_PADDING_LEFT=20,this.BETWEEN_STATEMENT_PADDING_Y=4,this.TOP_ROW_MIN_HEIGHT=this.MEDIUM_PADDING,this.TOP_ROW_PRECEDES_STATEMENT_MIN_HEIGHT=this.LARGE_PADDING,this.BOTTOM_ROW_MIN_HEIGHT=this.MEDIUM_PADDING,this.BOTTOM_ROW_AFTER_STATEMENT_MIN_HEIGHT=this.LARGE_PADDING,this.ADD_START_HATS=!1,this.START_HAT_HEIGHT=15,this.START_HAT_WIDTH=100,this.SPACER_DEFAULT_HEIGHT=15,this.MIN_BLOCK_HEIGHT=24,this.EMPTY_INLINE_INPUT_PADDING=14.5,this.EMPTY_INLINE_INPUT_HEIGHT=this.TAB_HEIGHT+11,this.EXTERNAL_VALUE_INPUT_PADDING=2,this.EMPTY_STATEMENT_INPUT_HEIGHT=this.MIN_BLOCK_HEIGHT,this.START_POINT=e.utils.svgPaths.moveBy(0,0),this.JAGGED_TEETH_HEIGHT=12,this.JAGGED_TEETH_WIDTH=6,this.FIELD_TEXT_FONTSIZE=11,this.FIELD_TEXT_FONTWEIGHT="normal",this.FIELD_TEXT_FONTFAMILY="sans-serif",this.FIELD_TEXT_BASELINE=this.FIELD_TEXT_HEIGHT=-1,this.FIELD_BORDER_RECT_RADIUS=4,this.FIELD_BORDER_RECT_HEIGHT=16,this.FIELD_BORDER_RECT_X_PADDING=5,this.FIELD_BORDER_RECT_Y_PADDING=3,this.FIELD_BORDER_RECT_COLOUR="#fff",this.FIELD_TEXT_BASELINE_CENTER=!e.utils.userAgent.IE&&!e.utils.userAgent.EDGE,this.FIELD_DROPDOWN_BORDER_RECT_HEIGHT=this.FIELD_BORDER_RECT_HEIGHT,this.FIELD_DROPDOWN_SVG_ARROW=this.FIELD_DROPDOWN_COLOURED_DIV=this.FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW=!1,this.FIELD_DROPDOWN_SVG_ARROW_PADDING=this.FIELD_BORDER_RECT_X_PADDING,this.FIELD_DROPDOWN_SVG_ARROW_SIZE=12,this.FIELD_DROPDOWN_SVG_ARROW_DATAURI="data:image/svg+xml;base64,PHN2ZyBpZD0iTGF5ZXJfMSIgZGF0YS1uYW1lPSJMYXllciAxIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMi43MSIgaGVpZ2h0PSI4Ljc5IiB2aWV3Qm94PSIwIDAgMTIuNzEgOC43OSI+PHRpdGxlPmRyb3Bkb3duLWFycm93PC90aXRsZT48ZyBvcGFjaXR5PSIwLjEiPjxwYXRoIGQ9Ik0xMi43MSwyLjQ0QTIuNDEsMi40MSwwLDAsMSwxMiw0LjE2TDguMDgsOC4wOGEyLjQ1LDIuNDUsMCwwLDEtMy40NSwwTDAuNzIsNC4xNkEyLjQyLDIuNDIsMCwwLDEsMCwyLjQ0LDIuNDgsMi40OCwwLDAsMSwuNzEuNzFDMSwwLjQ3LDEuNDMsMCw2LjM2LDBTMTEuNzUsMC40NiwxMiwuNzFBMi40NCwyLjQ0LDAsMCwxLDEyLjcxLDIuNDRaIiBmaWxsPSIjMjMxZjIwIi8+PC9nPjxwYXRoIGQ9Ik02LjM2LDcuNzlhMS40MywxLjQzLDAsMCwxLTEtLjQyTDEuNDIsMy40NWExLjQ0LDEuNDQsMCwwLDEsMC0yYzAuNTYtLjU2LDkuMzEtMC41Niw5Ljg3LDBhMS40NCwxLjQ0LDAsMCwxLDAsMkw3LjM3LDcuMzdBMS40MywxLjQzLDAsMCwxLDYuMzYsNy43OVoiIGZpbGw9IiNmZmYiLz48L3N2Zz4=",this.FIELD_COLOUR_FULL_BLOCK=this.FIELD_TEXTINPUT_BOX_SHADOW=!1,this.FIELD_COLOUR_DEFAULT_WIDTH=26,this.FIELD_COLOUR_DEFAULT_HEIGHT=this.FIELD_BORDER_RECT_HEIGHT,this.FIELD_CHECKBOX_X_OFFSET=this.FIELD_BORDER_RECT_X_PADDING-3,this.randomIdentifier=String(Math.random()).substring(2),this.embossFilterId="",this.embossFilter_=null,this.disabledPatternId="",this.disabledPattern_=null,this.debugFilterId="",this.cssNode_=this.debugFilter_=null,this.CURSOR_COLOUR="#cc0a0a",this.MARKER_COLOUR="#4286f4",this.CURSOR_WS_WIDTH=100,this.WS_CURSOR_HEIGHT=5,this.CURSOR_STACK_PADDING=10,this.CURSOR_BLOCK_PADDING=2,this.CURSOR_STROKE_WIDTH=4,this.FULL_BLOCK_FIELDS=!1,this.INSERTION_MARKER_COLOUR="#000000",this.INSERTION_MARKER_OPACITY=.2,this.SHAPES={PUZZLE:1,NOTCH:2}},e.blockRendering.ConstantProvider.prototype.init=function(){this.JAGGED_TEETH=this.makeJaggedTeeth(),this.NOTCH=this.makeNotch(),this.START_HAT=this.makeStartHat(),this.PUZZLE_TAB=this.makePuzzleTab(),this.INSIDE_CORNERS=this.makeInsideCorners(),this.OUTSIDE_CORNERS=this.makeOutsideCorners()},e.blockRendering.ConstantProvider.prototype.setTheme=function(t){this.blockStyles=Object.create(null);var r,n=t.blockStyles;for(r in n)this.blockStyles[r]=this.validatedBlockStyle_(n[r]);this.setDynamicProperties_(t)},e.blockRendering.ConstantProvider.prototype.setDynamicProperties_=function(t){this.setFontConstants_(t),this.setComponentConstants_(t),this.ADD_START_HATS=null!=t.startHats?t.startHats:this.ADD_START_HATS},e.blockRendering.ConstantProvider.prototype.setFontConstants_=function(t){this.FIELD_TEXT_FONTFAMILY=t.fontStyle&&null!=t.fontStyle.family?t.fontStyle.family:this.FIELD_TEXT_FONTFAMILY,this.FIELD_TEXT_FONTWEIGHT=t.fontStyle&&null!=t.fontStyle.weight?t.fontStyle.weight:this.FIELD_TEXT_FONTWEIGHT,this.FIELD_TEXT_FONTSIZE=t.fontStyle&&null!=t.fontStyle.size?t.fontStyle.size:this.FIELD_TEXT_FONTSIZE,t=e.utils.dom.measureFontMetrics("Hg",this.FIELD_TEXT_FONTSIZE+"pt",this.FIELD_TEXT_FONTWEIGHT,this.FIELD_TEXT_FONTFAMILY),this.FIELD_TEXT_HEIGHT=t.height,this.FIELD_TEXT_BASELINE=t.baseline},e.blockRendering.ConstantProvider.prototype.setComponentConstants_=function(t){this.CURSOR_COLOUR=t.getComponentStyle("cursorColour")||this.CURSOR_COLOUR,this.MARKER_COLOUR=t.getComponentStyle("markerColour")||this.MARKER_COLOUR,this.INSERTION_MARKER_COLOUR=t.getComponentStyle("insertionMarkerColour")||this.INSERTION_MARKER_COLOUR,this.INSERTION_MARKER_OPACITY=Number(t.getComponentStyle("insertionMarkerOpacity"))||this.INSERTION_MARKER_OPACITY},e.blockRendering.ConstantProvider.prototype.getBlockStyleForColour=function(t){var n="auto_"+t;return this.blockStyles[n]||(this.blockStyles[n]=this.createBlockStyle_(t)),{style:this.blockStyles[n],name:n}},e.blockRendering.ConstantProvider.prototype.getBlockStyle=function(t){return this.blockStyles[t||""]||(t&&0==t.indexOf("auto_")?this.getBlockStyleForColour(t.substring(5)).style:this.createBlockStyle_("#000000"))},e.blockRendering.ConstantProvider.prototype.createBlockStyle_=function(t){return this.validatedBlockStyle_({colourPrimary:t})},e.blockRendering.ConstantProvider.prototype.validatedBlockStyle_=function(t){var n={};return t&&e.utils.object.mixin(n,t),t=e.utils.parseBlockColour(n.colourPrimary||"#000"),n.colourPrimary=t.hex,n.colourSecondary=n.colourSecondary?e.utils.parseBlockColour(n.colourSecondary).hex:this.generateSecondaryColour_(n.colourPrimary),n.colourTertiary=n.colourTertiary?e.utils.parseBlockColour(n.colourTertiary).hex:this.generateTertiaryColour_(n.colourPrimary),n.hat=n.hat||"",n},e.blockRendering.ConstantProvider.prototype.generateSecondaryColour_=function(t){return e.utils.colour.blend("#fff",t,.6)||t},e.blockRendering.ConstantProvider.prototype.generateTertiaryColour_=function(t){return e.utils.colour.blend("#fff",t,.3)||t},e.blockRendering.ConstantProvider.prototype.dispose=function(){this.embossFilter_&&e.utils.dom.removeNode(this.embossFilter_),this.disabledPattern_&&e.utils.dom.removeNode(this.disabledPattern_),this.debugFilter_&&e.utils.dom.removeNode(this.debugFilter_),this.cssNode_=null},e.blockRendering.ConstantProvider.prototype.makeJaggedTeeth=function(){var t=this.JAGGED_TEETH_HEIGHT,n=this.JAGGED_TEETH_WIDTH;return{height:t,width:n,path:e.utils.svgPaths.line([e.utils.svgPaths.point(n,t/4),e.utils.svgPaths.point(2*-n,t/2),e.utils.svgPaths.point(n,t/4)])}},e.blockRendering.ConstantProvider.prototype.makeStartHat=function(){var t=this.START_HAT_HEIGHT,n=this.START_HAT_WIDTH;return{height:t,width:n,path:e.utils.svgPaths.curve("c",[e.utils.svgPaths.point(30,-t),e.utils.svgPaths.point(70,-t),e.utils.svgPaths.point(n,0)])}},e.blockRendering.ConstantProvider.prototype.makePuzzleTab=function(){function t(y){var x=-(y=y?-1:1),B=r/2,Q=B+2.5,at=B+.5,rt=e.utils.svgPaths.point(-n,y*B);return B=e.utils.svgPaths.point(n,y*B),e.utils.svgPaths.curve("c",[e.utils.svgPaths.point(0,y*Q),e.utils.svgPaths.point(-n,x*at),rt])+e.utils.svgPaths.curve("s",[e.utils.svgPaths.point(n,2.5*x),B])}var n=this.TAB_WIDTH,r=this.TAB_HEIGHT,s=t(!0),u=t(!1);return{type:this.SHAPES.PUZZLE,width:n,height:r,pathDown:u,pathUp:s}},e.blockRendering.ConstantProvider.prototype.makeNotch=function(){function t(x){return e.utils.svgPaths.line([e.utils.svgPaths.point(x*s,r),e.utils.svgPaths.point(3*x,0),e.utils.svgPaths.point(x*s,-r)])}var n=this.NOTCH_WIDTH,r=this.NOTCH_HEIGHT,s=(n-3)/2,u=t(1),y=t(-1);return{type:this.SHAPES.NOTCH,width:n,height:r,pathLeft:u,pathRight:y}},e.blockRendering.ConstantProvider.prototype.makeInsideCorners=function(){var t=this.CORNER_RADIUS;return{width:t,height:t,pathTop:e.utils.svgPaths.arc("a","0 0,0",t,e.utils.svgPaths.point(-t,t)),pathBottom:e.utils.svgPaths.arc("a","0 0,0",t,e.utils.svgPaths.point(t,t))}},e.blockRendering.ConstantProvider.prototype.makeOutsideCorners=function(){var t=this.CORNER_RADIUS,n=e.utils.svgPaths.moveBy(0,t)+e.utils.svgPaths.arc("a","0 0,1",t,e.utils.svgPaths.point(t,-t)),r=e.utils.svgPaths.arc("a","0 0,1",t,e.utils.svgPaths.point(t,t)),s=e.utils.svgPaths.arc("a","0 0,1",t,e.utils.svgPaths.point(-t,-t));return{topLeft:n,topRight:r,bottomRight:e.utils.svgPaths.arc("a","0 0,1",t,e.utils.svgPaths.point(-t,t)),bottomLeft:s,rightHeight:t}},e.blockRendering.ConstantProvider.prototype.shapeFor=function(t){switch(t.type){case e.connectionTypes.INPUT_VALUE:case e.connectionTypes.OUTPUT_VALUE:return this.PUZZLE_TAB;case e.connectionTypes.PREVIOUS_STATEMENT:case e.connectionTypes.NEXT_STATEMENT:return this.NOTCH;default:throw Error("Unknown connection type")}},e.blockRendering.ConstantProvider.prototype.createDom=function(t,n,r){this.injectCSS_(n,r),t=e.utils.dom.createSvgElement(e.utils.Svg.DEFS,{},t),n=e.utils.dom.createSvgElement(e.utils.Svg.FILTER,{id:"blocklyEmbossFilter"+this.randomIdentifier},t),e.utils.dom.createSvgElement(e.utils.Svg.FEGAUSSIANBLUR,{in:"SourceAlpha",stdDeviation:1,result:"blur"},n),r=e.utils.dom.createSvgElement(e.utils.Svg.FESPECULARLIGHTING,{in:"blur",surfaceScale:1,specularConstant:.5,specularExponent:10,"lighting-color":"white",result:"specOut"},n),e.utils.dom.createSvgElement(e.utils.Svg.FEPOINTLIGHT,{x:-5e3,y:-1e4,z:2e4},r),e.utils.dom.createSvgElement(e.utils.Svg.FECOMPOSITE,{in:"specOut",in2:"SourceAlpha",operator:"in",result:"specOut"},n),e.utils.dom.createSvgElement(e.utils.Svg.FECOMPOSITE,{in:"SourceGraphic",in2:"specOut",operator:"arithmetic",k1:0,k2:1,k3:1,k4:0},n),this.embossFilterId=n.id,this.embossFilter_=n,n=e.utils.dom.createSvgElement(e.utils.Svg.PATTERN,{id:"blocklyDisabledPattern"+this.randomIdentifier,patternUnits:"userSpaceOnUse",width:10,height:10},t),e.utils.dom.createSvgElement(e.utils.Svg.RECT,{width:10,height:10,fill:"#aaa"},n),e.utils.dom.createSvgElement(e.utils.Svg.PATH,{d:"M 0 0 L 10 10 M 10 0 L 0 10",stroke:"#cc0"},n),this.disabledPatternId=n.id,this.disabledPattern_=n,e.blockRendering.Debug&&(t=e.utils.dom.createSvgElement(e.utils.Svg.FILTER,{id:"blocklyDebugFilter"+this.randomIdentifier,height:"160%",width:"180%",y:"-30%",x:"-40%"},t),n=e.utils.dom.createSvgElement(e.utils.Svg.FECOMPONENTTRANSFER,{result:"outBlur"},t),e.utils.dom.createSvgElement(e.utils.Svg.FEFUNCA,{type:"table",tableValues:"0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1"},n),e.utils.dom.createSvgElement(e.utils.Svg.FEFLOOD,{"flood-color":"#ff0000","flood-opacity":.5,result:"outColor"},t),e.utils.dom.createSvgElement(e.utils.Svg.FECOMPOSITE,{in:"outColor",in2:"outBlur",operator:"in",result:"outGlow"},t),this.debugFilterId=t.id,this.debugFilter_=t)},e.blockRendering.ConstantProvider.prototype.injectCSS_=function(t,n){n=this.getCSS_(n),t="blockly-renderer-style-"+t,this.cssNode_=document.getElementById(t);var r=n.join("\n");this.cssNode_?this.cssNode_.firstChild.textContent=r:((n=document.createElement("style")).id=t,t=document.createTextNode(r),n.appendChild(t),document.head.insertBefore(n,document.head.firstChild),this.cssNode_=n)},e.blockRendering.ConstantProvider.prototype.getCSS_=function(t){return[t+" .blocklyText, ",t+" .blocklyFlyoutLabelText {","font: "+this.FIELD_TEXT_FONTWEIGHT+" "+this.FIELD_TEXT_FONTSIZE+"pt "+this.FIELD_TEXT_FONTFAMILY+";","}",t+" .blocklyText {","fill: #fff;","}",t+" .blocklyNonEditableText>rect,",t+" .blocklyEditableText>rect {","fill: "+this.FIELD_BORDER_RECT_COLOUR+";","fill-opacity: .6;","stroke: none;","}",t+" .blocklyNonEditableText>text,",t+" .blocklyEditableText>text {","fill: #000;","}",t+" .blocklyFlyoutLabelText {","fill: #000;","}",t+" .blocklyText.blocklyBubbleText {","fill: #000;","}",t+" .blocklyEditableText:not(.editing):hover>rect {","stroke: #fff;","stroke-width: 2;","}",t+" .blocklyHtmlInput {","font-family: "+this.FIELD_TEXT_FONTFAMILY+";","font-weight: "+this.FIELD_TEXT_FONTWEIGHT+";","}",t+" .blocklySelected>.blocklyPath {","stroke: #fc3;","stroke-width: 3px;","}",t+" .blocklyHighlightedConnectionPath {","stroke: #fc3;","}",t+" .blocklyReplaceable .blocklyPath {","fill-opacity: .5;","}",t+" .blocklyReplaceable .blocklyPathLight,",t+" .blocklyReplaceable .blocklyPathDark {","display: none;","}",t+" .blocklyInsertionMarker>.blocklyPath {","fill-opacity: "+this.INSERTION_MARKER_OPACITY+";","stroke: none;","}"]},e.blockRendering.Types={NONE:0,FIELD:1,HAT:2,ICON:4,SPACER:8,BETWEEN_ROW_SPACER:16,IN_ROW_SPACER:32,EXTERNAL_VALUE_INPUT:64,INPUT:128,INLINE_INPUT:256,STATEMENT_INPUT:512,CONNECTION:1024,PREVIOUS_CONNECTION:2048,NEXT_CONNECTION:4096,OUTPUT_CONNECTION:8192,CORNER:16384,LEFT_SQUARE_CORNER:32768,LEFT_ROUND_CORNER:65536,RIGHT_SQUARE_CORNER:131072,RIGHT_ROUND_CORNER:262144,JAGGED_EDGE:524288,ROW:1048576,TOP_ROW:2097152,BOTTOM_ROW:4194304,INPUT_ROW:8388608},e.blockRendering.Types.LEFT_CORNER=e.blockRendering.Types.LEFT_SQUARE_CORNER|e.blockRendering.Types.LEFT_ROUND_CORNER,e.blockRendering.Types.RIGHT_CORNER=e.blockRendering.Types.RIGHT_SQUARE_CORNER|e.blockRendering.Types.RIGHT_ROUND_CORNER,e.blockRendering.Types.nextTypeValue_=16777216,e.blockRendering.Types.getType=function(t){return Object.prototype.hasOwnProperty.call(e.blockRendering.Types,t)||(e.blockRendering.Types[t]=e.blockRendering.Types.nextTypeValue_,e.blockRendering.Types.nextTypeValue_<<=1),e.blockRendering.Types[t]},e.blockRendering.Types.isField=function(t){return t.type&e.blockRendering.Types.FIELD},e.blockRendering.Types.isHat=function(t){return t.type&e.blockRendering.Types.HAT},e.blockRendering.Types.isIcon=function(t){return t.type&e.blockRendering.Types.ICON},e.blockRendering.Types.isSpacer=function(t){return t.type&e.blockRendering.Types.SPACER},e.blockRendering.Types.isInRowSpacer=function(t){return t.type&e.blockRendering.Types.IN_ROW_SPACER},e.blockRendering.Types.isInput=function(t){return t.type&e.blockRendering.Types.INPUT},e.blockRendering.Types.isExternalInput=function(t){return t.type&e.blockRendering.Types.EXTERNAL_VALUE_INPUT},e.blockRendering.Types.isInlineInput=function(t){return t.type&e.blockRendering.Types.INLINE_INPUT},e.blockRendering.Types.isStatementInput=function(t){return t.type&e.blockRendering.Types.STATEMENT_INPUT},e.blockRendering.Types.isPreviousConnection=function(t){return t.type&e.blockRendering.Types.PREVIOUS_CONNECTION},e.blockRendering.Types.isNextConnection=function(t){return t.type&e.blockRendering.Types.NEXT_CONNECTION},e.blockRendering.Types.isPreviousOrNextConnection=function(t){return t.type&(e.blockRendering.Types.PREVIOUS_CONNECTION|e.blockRendering.Types.NEXT_CONNECTION)},e.blockRendering.Types.isLeftRoundedCorner=function(t){return t.type&e.blockRendering.Types.LEFT_ROUND_CORNER},e.blockRendering.Types.isRightRoundedCorner=function(t){return t.type&e.blockRendering.Types.RIGHT_ROUND_CORNER},e.blockRendering.Types.isLeftSquareCorner=function(t){return t.type&e.blockRendering.Types.LEFT_SQUARE_CORNER},e.blockRendering.Types.isRightSquareCorner=function(t){return t.type&e.blockRendering.Types.RIGHT_SQUARE_CORNER},e.blockRendering.Types.isCorner=function(t){return t.type&e.blockRendering.Types.CORNER},e.blockRendering.Types.isJaggedEdge=function(t){return t.type&e.blockRendering.Types.JAGGED_EDGE},e.blockRendering.Types.isRow=function(t){return t.type&e.blockRendering.Types.ROW},e.blockRendering.Types.isBetweenRowSpacer=function(t){return t.type&e.blockRendering.Types.BETWEEN_ROW_SPACER},e.blockRendering.Types.isTopRow=function(t){return t.type&e.blockRendering.Types.TOP_ROW},e.blockRendering.Types.isBottomRow=function(t){return t.type&e.blockRendering.Types.BOTTOM_ROW},e.blockRendering.Types.isTopOrBottomRow=function(t){return t.type&(e.blockRendering.Types.TOP_ROW|e.blockRendering.Types.BOTTOM_ROW)},e.blockRendering.Types.isInputRow=function(t){return t.type&e.blockRendering.Types.INPUT_ROW},e.blockRendering.Measurable=function(t){this.height=this.width=0,this.type=e.blockRendering.Types.NONE,this.centerline=this.xPos=0,this.constants_=t,this.notchOffset=this.constants_.NOTCH_OFFSET_LEFT},e.blockRendering.Connection=function(t,n){e.blockRendering.Connection.superClass_.constructor.call(this,t),this.connectionModel=n,this.shape=this.constants_.shapeFor(n),this.isDynamicShape=!!this.shape.isDynamic,this.type|=e.blockRendering.Types.CONNECTION},e.utils.object.inherits(e.blockRendering.Connection,e.blockRendering.Measurable),e.blockRendering.OutputConnection=function(t,n){e.blockRendering.OutputConnection.superClass_.constructor.call(this,t,n),this.type|=e.blockRendering.Types.OUTPUT_CONNECTION,this.height=this.isDynamicShape?0:this.shape.height,this.startX=this.width=this.isDynamicShape?0:this.shape.width,this.connectionOffsetY=this.constants_.TAB_OFFSET_FROM_TOP,this.connectionOffsetX=0},e.utils.object.inherits(e.blockRendering.OutputConnection,e.blockRendering.Connection),e.blockRendering.PreviousConnection=function(t,n){e.blockRendering.PreviousConnection.superClass_.constructor.call(this,t,n),this.type|=e.blockRendering.Types.PREVIOUS_CONNECTION,this.height=this.shape.height,this.width=this.shape.width},e.utils.object.inherits(e.blockRendering.PreviousConnection,e.blockRendering.Connection),e.blockRendering.NextConnection=function(t,n){e.blockRendering.NextConnection.superClass_.constructor.call(this,t,n),this.type|=e.blockRendering.Types.NEXT_CONNECTION,this.height=this.shape.height,this.width=this.shape.width},e.utils.object.inherits(e.blockRendering.NextConnection,e.blockRendering.Connection),e.blockRendering.InputConnection=function(t,n){e.blockRendering.InputConnection.superClass_.constructor.call(this,t,n.connection),this.type|=e.blockRendering.Types.INPUT,this.input=n,this.align=n.align,(this.connectedBlock=n.connection&&n.connection.targetBlock()?n.connection.targetBlock():null)?(t=this.connectedBlock.getHeightWidth(),this.connectedBlockWidth=t.width,this.connectedBlockHeight=t.height):this.connectedBlockHeight=this.connectedBlockWidth=0,this.connectionOffsetY=this.connectionOffsetX=0},e.utils.object.inherits(e.blockRendering.InputConnection,e.blockRendering.Connection),e.blockRendering.InlineInput=function(t,n){e.blockRendering.InlineInput.superClass_.constructor.call(this,t,n),this.type|=e.blockRendering.Types.INLINE_INPUT,this.connectedBlock?(this.width=this.connectedBlockWidth,this.height=this.connectedBlockHeight):(this.height=this.constants_.EMPTY_INLINE_INPUT_HEIGHT,this.width=this.constants_.EMPTY_INLINE_INPUT_PADDING),this.connectionHeight=this.isDynamicShape?this.shape.height(this.height):this.shape.height,this.connectionWidth=this.isDynamicShape?this.shape.width(this.height):this.shape.width,this.connectedBlock||(this.width+=this.connectionWidth*(this.isDynamicShape?2:1)),this.connectionOffsetY=this.isDynamicShape?this.shape.connectionOffsetY(this.connectionHeight):this.constants_.TAB_OFFSET_FROM_TOP,this.connectionOffsetX=this.isDynamicShape?this.shape.connectionOffsetX(this.connectionWidth):0},e.utils.object.inherits(e.blockRendering.InlineInput,e.blockRendering.InputConnection),e.blockRendering.StatementInput=function(t,n){e.blockRendering.StatementInput.superClass_.constructor.call(this,t,n),this.type|=e.blockRendering.Types.STATEMENT_INPUT,this.height=this.connectedBlock?this.connectedBlockHeight+this.constants_.STATEMENT_BOTTOM_SPACER:this.constants_.EMPTY_STATEMENT_INPUT_HEIGHT,this.width=this.constants_.STATEMENT_INPUT_NOTCH_OFFSET+this.shape.width},e.utils.object.inherits(e.blockRendering.StatementInput,e.blockRendering.InputConnection),e.blockRendering.ExternalValueInput=function(t,n){e.blockRendering.ExternalValueInput.superClass_.constructor.call(this,t,n),this.type|=e.blockRendering.Types.EXTERNAL_VALUE_INPUT,this.height=this.connectedBlock?this.connectedBlockHeight-this.constants_.TAB_OFFSET_FROM_TOP-this.constants_.MEDIUM_PADDING:this.shape.height,this.width=this.shape.width+this.constants_.EXTERNAL_VALUE_INPUT_PADDING,this.connectionOffsetY=this.constants_.TAB_OFFSET_FROM_TOP,this.connectionHeight=this.shape.height,this.connectionWidth=this.shape.width},e.utils.object.inherits(e.blockRendering.ExternalValueInput,e.blockRendering.InputConnection),e.blockRendering.Icon=function(t,n){e.blockRendering.Icon.superClass_.constructor.call(this,t),this.icon=n,this.isVisible=n.isVisible(),this.type|=e.blockRendering.Types.ICON,t=n.getCorrectedSize(),this.height=t.height,this.width=t.width},e.utils.object.inherits(e.blockRendering.Icon,e.blockRendering.Measurable),e.blockRendering.JaggedEdge=function(t){e.blockRendering.JaggedEdge.superClass_.constructor.call(this,t),this.type|=e.blockRendering.Types.JAGGED_EDGE,this.height=this.constants_.JAGGED_TEETH.height,this.width=this.constants_.JAGGED_TEETH.width},e.utils.object.inherits(e.blockRendering.JaggedEdge,e.blockRendering.Measurable),e.blockRendering.Field=function(t,n,r){e.blockRendering.Field.superClass_.constructor.call(this,t),this.field=n,this.isEditable=n.EDITABLE,this.flipRtl=n.getFlipRtl(),this.type|=e.blockRendering.Types.FIELD,t=this.field.getSize(),this.height=t.height,this.width=t.width,this.parentInput=r},e.utils.object.inherits(e.blockRendering.Field,e.blockRendering.Measurable),e.blockRendering.Hat=function(t){e.blockRendering.Hat.superClass_.constructor.call(this,t),this.type|=e.blockRendering.Types.HAT,this.height=this.constants_.START_HAT.height,this.width=this.constants_.START_HAT.width,this.ascenderHeight=this.height},e.utils.object.inherits(e.blockRendering.Hat,e.blockRendering.Measurable),e.blockRendering.SquareCorner=function(t,n){e.blockRendering.SquareCorner.superClass_.constructor.call(this,t),this.type=(n&&"left"!=n?e.blockRendering.Types.RIGHT_SQUARE_CORNER:e.blockRendering.Types.LEFT_SQUARE_CORNER)|e.blockRendering.Types.CORNER,this.width=this.height=this.constants_.NO_PADDING},e.utils.object.inherits(e.blockRendering.SquareCorner,e.blockRendering.Measurable),e.blockRendering.RoundCorner=function(t,n){e.blockRendering.RoundCorner.superClass_.constructor.call(this,t),this.type=(n&&"left"!=n?e.blockRendering.Types.RIGHT_ROUND_CORNER:e.blockRendering.Types.LEFT_ROUND_CORNER)|e.blockRendering.Types.CORNER,this.width=this.constants_.CORNER_RADIUS,this.height=this.constants_.CORNER_RADIUS/2},e.utils.object.inherits(e.blockRendering.RoundCorner,e.blockRendering.Measurable),e.blockRendering.InRowSpacer=function(t,n){e.blockRendering.InRowSpacer.superClass_.constructor.call(this,t),this.type=this.type|e.blockRendering.Types.SPACER|e.blockRendering.Types.IN_ROW_SPACER,this.width=n,this.height=this.constants_.SPACER_DEFAULT_HEIGHT},e.utils.object.inherits(e.blockRendering.InRowSpacer,e.blockRendering.Measurable),e.blockRendering.Row=function(t){this.type=e.blockRendering.Types.ROW,this.elements=[],this.xPos=this.yPos=this.widthWithConnectedBlocks=this.minWidth=this.minHeight=this.width=this.height=0,this.hasJaggedEdge=this.hasDummyInput=this.hasInlineInput=this.hasStatement=this.hasExternalInput=!1,this.constants_=t,this.notchOffset=this.constants_.NOTCH_OFFSET_LEFT,this.align=null},e.blockRendering.Row.prototype.measure=function(){throw Error("Unexpected attempt to measure a base Row.")},e.blockRendering.Row.prototype.getLastInput=function(){for(var n,t=this.elements.length-1;n=this.elements[t];t--)if(e.blockRendering.Types.isInput(n))return n;return null},e.blockRendering.Row.prototype.startsWithElemSpacer=function(){return!0},e.blockRendering.Row.prototype.endsWithElemSpacer=function(){return!0},e.blockRendering.Row.prototype.getFirstSpacer=function(){for(var n,t=0;n=this.elements[t];t++)if(e.blockRendering.Types.isSpacer(n))return n;return null},e.blockRendering.Row.prototype.getLastSpacer=function(){for(var n,t=this.elements.length-1;n=this.elements[t];t--)if(e.blockRendering.Types.isSpacer(n))return n;return null},e.blockRendering.TopRow=function(t){e.blockRendering.TopRow.superClass_.constructor.call(this,t),this.type|=e.blockRendering.Types.TOP_ROW,this.ascenderHeight=this.capline=0,this.hasPreviousConnection=!1,this.connection=null},e.utils.object.inherits(e.blockRendering.TopRow,e.blockRendering.Row),e.blockRendering.TopRow.prototype.hasLeftSquareCorner=function(t){var n=(t.hat?"cap"===t.hat:this.constants_.ADD_START_HATS)&&!t.outputConnection&&!t.previousConnection,r=t.getPreviousBlock();return!!t.outputConnection||n||!!r&&r.getNextBlock()==t},e.blockRendering.TopRow.prototype.hasRightSquareCorner=function(t){return!0},e.blockRendering.TopRow.prototype.measure=function(){for(var u,t=0,n=0,r=0,s=0;u=this.elements[s];s++)n+=u.width,e.blockRendering.Types.isSpacer(u)||(e.blockRendering.Types.isHat(u)?r=Math.max(r,u.ascenderHeight):t=Math.max(t,u.height));this.width=Math.max(this.minWidth,n),this.height=Math.max(this.minHeight,t)+r,this.capline=this.ascenderHeight=r,this.widthWithConnectedBlocks=this.width},e.blockRendering.TopRow.prototype.startsWithElemSpacer=function(){return!1},e.blockRendering.TopRow.prototype.endsWithElemSpacer=function(){return!1},e.blockRendering.BottomRow=function(t){e.blockRendering.BottomRow.superClass_.constructor.call(this,t),this.type|=e.blockRendering.Types.BOTTOM_ROW,this.hasNextConnection=!1,this.connection=null,this.baseline=this.descenderHeight=0},e.utils.object.inherits(e.blockRendering.BottomRow,e.blockRendering.Row),e.blockRendering.BottomRow.prototype.hasLeftSquareCorner=function(t){return!!t.outputConnection||!!t.getNextBlock()},e.blockRendering.BottomRow.prototype.hasRightSquareCorner=function(t){return!0},e.blockRendering.BottomRow.prototype.measure=function(){for(var u,t=0,n=0,r=0,s=0;u=this.elements[s];s++)n+=u.width,e.blockRendering.Types.isSpacer(u)||(e.blockRendering.Types.isNextConnection(u)?r=Math.max(r,u.height):t=Math.max(t,u.height));this.width=Math.max(this.minWidth,n),this.height=Math.max(this.minHeight,t)+r,this.descenderHeight=r,this.widthWithConnectedBlocks=this.width},e.blockRendering.BottomRow.prototype.startsWithElemSpacer=function(){return!1},e.blockRendering.BottomRow.prototype.endsWithElemSpacer=function(){return!1},e.blockRendering.SpacerRow=function(t,n,r){e.blockRendering.SpacerRow.superClass_.constructor.call(this,t),this.type=this.type|e.blockRendering.Types.SPACER|e.blockRendering.Types.BETWEEN_ROW_SPACER,this.width=r,this.height=n,this.followsStatement=!1,this.widthWithConnectedBlocks=0,this.elements=[new e.blockRendering.InRowSpacer(this.constants_,r)]},e.utils.object.inherits(e.blockRendering.SpacerRow,e.blockRendering.Row),e.blockRendering.SpacerRow.prototype.measure=function(){},e.blockRendering.InputRow=function(t){e.blockRendering.InputRow.superClass_.constructor.call(this,t),this.type|=e.blockRendering.Types.INPUT_ROW,this.connectedBlockWidths=0},e.utils.object.inherits(e.blockRendering.InputRow,e.blockRendering.Row),e.blockRendering.InputRow.prototype.measure=function(){this.width=this.minWidth,this.height=this.minHeight;for(var r,t=0,n=0;r=this.elements[n];n++)this.width+=r.width,e.blockRendering.Types.isInput(r)&&(e.blockRendering.Types.isStatementInput(r)?t+=r.connectedBlockWidth:e.blockRendering.Types.isExternalInput(r)&&0!=r.connectedBlockWidth&&(t+=r.connectedBlockWidth-r.connectionWidth)),e.blockRendering.Types.isSpacer(r)||(this.height=Math.max(this.height,r.height));this.connectedBlockWidths=t,this.widthWithConnectedBlocks=this.width+t},e.blockRendering.InputRow.prototype.endsWithElemSpacer=function(){return!this.hasExternalInput&&!this.hasStatement},e.blockRendering.RenderInfo=function(t,n){this.block_=n,this.renderer_=t,this.constants_=this.renderer_.getConstants(),this.outputConnection=n.outputConnection?new e.blockRendering.OutputConnection(this.constants_,n.outputConnection):null,this.isInline=n.getInputsInline()&&!n.isCollapsed(),this.isCollapsed=n.isCollapsed(),this.isInsertionMarker=n.isInsertionMarker(),this.RTL=n.RTL,this.statementEdge=this.width=this.widthWithChildren=this.height=0,this.rows=[],this.inputRows=[],this.hiddenIcons=[],this.topRow=new e.blockRendering.TopRow(this.constants_),this.bottomRow=new e.blockRendering.BottomRow(this.constants_),this.startY=this.startX=0},e.blockRendering.RenderInfo.prototype.getRenderer=function(){return this.renderer_},e.blockRendering.RenderInfo.prototype.measure=function(){this.createRows_(),this.addElemSpacing_(),this.addRowSpacing_(),this.computeBounds_(),this.alignRowElements_(),this.finalize_()},e.blockRendering.RenderInfo.prototype.createRows_=function(){this.populateTopRow_(),this.rows.push(this.topRow);var t=new e.blockRendering.InputRow(this.constants_);this.inputRows.push(t);for(var s,n=this.block_.getIcons(),r=0;s=n[r];r++){var u=new e.blockRendering.Icon(this.constants_,s);this.isCollapsed&&s.collapseHidden?this.hiddenIcons.push(u):t.elements.push(u)}for(s=null,r=0;n=this.block_.inputList[r];r++)if(n.isVisible()){for(this.shouldStartNewRow_(n,s)&&(this.rows.push(t),t=new e.blockRendering.InputRow(this.constants_),this.inputRows.push(t)),s=0;u=n.fieldRow[s];s++)t.elements.push(new e.blockRendering.Field(this.constants_,u,n));this.addInput_(n,t),s=n}this.isCollapsed&&(t.hasJaggedEdge=!0,t.elements.push(new e.blockRendering.JaggedEdge(this.constants_))),(t.elements.length||t.hasDummyInput)&&this.rows.push(t),this.populateBottomRow_(),this.rows.push(this.bottomRow)},e.blockRendering.RenderInfo.prototype.populateTopRow_=function(){var t=!!this.block_.previousConnection,n=(this.block_.hat?"cap"===this.block_.hat:this.constants_.ADD_START_HATS)&&!this.outputConnection&&!t,r=this.topRow.hasLeftSquareCorner(this.block_)?e.blockRendering.SquareCorner:e.blockRendering.RoundCorner;this.topRow.elements.push(new r(this.constants_)),n?(t=new e.blockRendering.Hat(this.constants_),this.topRow.elements.push(t),this.topRow.capline=t.ascenderHeight):t&&(this.topRow.hasPreviousConnection=!0,this.topRow.connection=new e.blockRendering.PreviousConnection(this.constants_,this.block_.previousConnection),this.topRow.elements.push(this.topRow.connection)),this.topRow.minHeight=this.block_.inputList.length&&this.block_.inputList[0].type==e.inputTypes.STATEMENT&&!this.block_.isCollapsed()?this.constants_.TOP_ROW_PRECEDES_STATEMENT_MIN_HEIGHT:this.constants_.TOP_ROW_MIN_HEIGHT,r=this.topRow.hasRightSquareCorner(this.block_)?e.blockRendering.SquareCorner:e.blockRendering.RoundCorner,this.topRow.elements.push(new r(this.constants_,"right"))},e.blockRendering.RenderInfo.prototype.populateBottomRow_=function(){this.bottomRow.hasNextConnection=!!this.block_.nextConnection,this.bottomRow.minHeight=this.block_.inputList.length&&this.block_.inputList[this.block_.inputList.length-1].type==e.inputTypes.STATEMENT?this.constants_.BOTTOM_ROW_AFTER_STATEMENT_MIN_HEIGHT:this.constants_.BOTTOM_ROW_MIN_HEIGHT,this.bottomRow.hasLeftSquareCorner(this.block_)?this.bottomRow.elements.push(new e.blockRendering.SquareCorner(this.constants_)):this.bottomRow.elements.push(new e.blockRendering.RoundCorner(this.constants_)),this.bottomRow.hasNextConnection&&(this.bottomRow.connection=new e.blockRendering.NextConnection(this.constants_,this.block_.nextConnection),this.bottomRow.elements.push(this.bottomRow.connection)),this.bottomRow.hasRightSquareCorner(this.block_)?this.bottomRow.elements.push(new e.blockRendering.SquareCorner(this.constants_,"right")):this.bottomRow.elements.push(new e.blockRendering.RoundCorner(this.constants_,"right"))},e.blockRendering.RenderInfo.prototype.addInput_=function(t,n){this.isInline&&t.type==e.inputTypes.VALUE?(n.elements.push(new e.blockRendering.InlineInput(this.constants_,t)),n.hasInlineInput=!0):t.type==e.inputTypes.STATEMENT?(n.elements.push(new e.blockRendering.StatementInput(this.constants_,t)),n.hasStatement=!0):t.type==e.inputTypes.VALUE?(n.elements.push(new e.blockRendering.ExternalValueInput(this.constants_,t)),n.hasExternalInput=!0):t.type==e.inputTypes.DUMMY&&(n.minHeight=Math.max(n.minHeight,t.getSourceBlock()&&t.getSourceBlock().isShadow()?this.constants_.DUMMY_INPUT_SHADOW_MIN_HEIGHT:this.constants_.DUMMY_INPUT_MIN_HEIGHT),n.hasDummyInput=!0),null==n.align&&(n.align=t.align)},e.blockRendering.RenderInfo.prototype.shouldStartNewRow_=function(t,n){return!(!n||t.type!=e.inputTypes.STATEMENT&&n.type!=e.inputTypes.STATEMENT&&(t.type!=e.inputTypes.VALUE&&t.type!=e.inputTypes.DUMMY||this.isInline))},e.blockRendering.RenderInfo.prototype.addElemSpacing_=function(){for(var n,t=0;n=this.rows[t];t++){var r=n.elements;if(n.elements=[],n.startsWithElemSpacer()&&n.elements.push(new e.blockRendering.InRowSpacer(this.constants_,this.getInRowSpacing_(null,r[0]))),r.length){for(var s=0;s<r.length-1;s++){n.elements.push(r[s]);var u=this.getInRowSpacing_(r[s],r[s+1]);n.elements.push(new e.blockRendering.InRowSpacer(this.constants_,u))}n.elements.push(r[r.length-1]),n.endsWithElemSpacer()&&n.elements.push(new e.blockRendering.InRowSpacer(this.constants_,this.getInRowSpacing_(r[r.length-1],null)))}}},e.blockRendering.RenderInfo.prototype.getInRowSpacing_=function(t,n){if(!t&&n&&e.blockRendering.Types.isStatementInput(n))return this.constants_.STATEMENT_INPUT_PADDING_LEFT;if(t&&e.blockRendering.Types.isInput(t)&&!n){if(e.blockRendering.Types.isExternalInput(t))return this.constants_.NO_PADDING;if(e.blockRendering.Types.isInlineInput(t))return this.constants_.LARGE_PADDING;if(e.blockRendering.Types.isStatementInput(t))return this.constants_.NO_PADDING}return t&&e.blockRendering.Types.isLeftSquareCorner(t)&&n&&(e.blockRendering.Types.isPreviousConnection(n)||e.blockRendering.Types.isNextConnection(n))?n.notchOffset:t&&e.blockRendering.Types.isLeftRoundedCorner(t)&&n&&(e.blockRendering.Types.isPreviousConnection(n)||e.blockRendering.Types.isNextConnection(n))?n.notchOffset-this.constants_.CORNER_RADIUS:this.constants_.MEDIUM_PADDING},e.blockRendering.RenderInfo.prototype.computeBounds_=function(){for(var u,t=0,n=0,r=0,s=0;u=this.rows[s];s++){if(u.measure(),n=Math.max(n,u.width),u.hasStatement){var y=u.getLastInput();t=Math.max(t,u.width-y.width)}r=Math.max(r,u.widthWithConnectedBlocks)}for(this.statementEdge=t,this.width=n,s=0;u=this.rows[s];s++)u.hasStatement&&(u.statementEdge=this.statementEdge);this.widthWithChildren=Math.max(n,r),this.outputConnection&&(this.startX=this.outputConnection.width,this.width+=this.outputConnection.width,this.widthWithChildren+=this.outputConnection.width)},e.blockRendering.RenderInfo.prototype.alignRowElements_=function(){for(var n,t=0;n=this.rows[t];t++)if(n.hasStatement)this.alignStatementRow_(n);else{var r=n.width;0<(r=this.getDesiredRowWidth_(n)-r)&&this.addAlignmentPadding_(n,r),e.blockRendering.Types.isTopOrBottomRow(n)&&(n.widthWithConnectedBlocks=n.width)}},e.blockRendering.RenderInfo.prototype.getDesiredRowWidth_=function(t){return this.width-this.startX},e.blockRendering.RenderInfo.prototype.addAlignmentPadding_=function(t,n){var r=t.getFirstSpacer(),s=t.getLastSpacer();(t.hasExternalInput||t.hasStatement)&&(t.widthWithConnectedBlocks+=n),t.align==e.constants.ALIGN.LEFT?s.width+=n:t.align==e.constants.ALIGN.CENTRE?(r.width+=n/2,s.width+=n/2):t.align==e.constants.ALIGN.RIGHT?r.width+=n:s.width+=n,t.width+=n},e.blockRendering.RenderInfo.prototype.alignStatementRow_=function(t){var n=t.getLastInput(),r=t.width-n.width,s=this.statementEdge;0<(r=s-r)&&this.addAlignmentPadding_(t,r),r=t.width,s=this.getDesiredRowWidth_(t),n.width+=s-r,n.height=Math.max(n.height,t.height),t.width+=s-r,t.widthWithConnectedBlocks=Math.max(t.width,this.statementEdge+t.connectedBlockWidths)},e.blockRendering.RenderInfo.prototype.addRowSpacing_=function(){var t=this.rows;this.rows=[];for(var n=0;n<t.length;n++)this.rows.push(t[n]),n!=t.length-1&&this.rows.push(this.makeSpacerRow_(t[n],t[n+1]))},e.blockRendering.RenderInfo.prototype.makeSpacerRow_=function(t,n){var r=this.getSpacerRowHeight_(t,n),s=this.getSpacerRowWidth_(t,n);return r=new e.blockRendering.SpacerRow(this.constants_,r,s),t.hasStatement&&(r.followsStatement=!0),n.hasStatement&&(r.precedesStatement=!0),r},e.blockRendering.RenderInfo.prototype.getSpacerRowWidth_=function(t,n){return this.width-this.startX},e.blockRendering.RenderInfo.prototype.getSpacerRowHeight_=function(t,n){return this.constants_.MEDIUM_PADDING},e.blockRendering.RenderInfo.prototype.getElemCenterline_=function(t,n){return e.blockRendering.Types.isSpacer(n)?t.yPos+n.height/2:e.blockRendering.Types.isBottomRow(t)?(t=t.yPos+t.height-t.descenderHeight,e.blockRendering.Types.isNextConnection(n)?t+n.height/2:t-n.height/2):e.blockRendering.Types.isTopRow(t)?e.blockRendering.Types.isHat(n)?t.capline-n.height/2:t.capline+n.height/2:t.yPos+t.height/2},e.blockRendering.RenderInfo.prototype.recordElemPositions_=function(t){for(var s,n=t.xPos,r=0;s=t.elements[r];r++)e.blockRendering.Types.isSpacer(s)&&(s.height=t.height),s.xPos=n,s.centerline=this.getElemCenterline_(t,s),n+=s.width},e.blockRendering.RenderInfo.prototype.finalize_=function(){for(var s,t=0,n=0,r=0;s=this.rows[r];r++)s.yPos=n,s.xPos=this.startX,n+=s.height,t=Math.max(t,s.widthWithConnectedBlocks),this.recordElemPositions_(s);this.outputConnection&&this.block_.nextConnection&&this.block_.nextConnection.isConnected()&&(t=Math.max(t,this.block_.nextConnection.targetBlock().getHeightWidth().width)),this.widthWithChildren=t+this.startX,this.height=n,this.startY=this.topRow.capline,this.bottomRow.baseline=n-this.bottomRow.descenderHeight},e.blockRendering.Debug=function(t){this.debugElements_=[],this.svgRoot_=null,this.constants_=t},e.blockRendering.Debug.config={rowSpacers:!0,elemSpacers:!0,rows:!0,elems:!0,connections:!0,blockBounds:!0,connectedBlockBounds:!0,render:!0},e.blockRendering.Debug.prototype.clearElems=function(){for(var n,t=0;n=this.debugElements_[t];t++)e.utils.dom.removeNode(n);this.debugElements_=[]},e.blockRendering.Debug.prototype.drawSpacerRow=function(t,n,r){if(e.blockRendering.Debug.config.rowSpacers){var s=Math.abs(t.height),u=0>t.height;u&&(n-=s),this.debugElements_.push(e.utils.dom.createSvgElement(e.utils.Svg.RECT,{class:"rowSpacerRect blockRenderDebug",x:r?-(t.xPos+t.width):t.xPos,y:n,width:t.width,height:s,stroke:u?"black":"blue",fill:"blue","fill-opacity":"0.5","stroke-width":"1px"},this.svgRoot_))}},e.blockRendering.Debug.prototype.drawSpacerElem=function(t,n,r){if(e.blockRendering.Debug.config.elemSpacers){n=Math.abs(t.width);var s=0>t.width,u=s?t.xPos-n:t.xPos;r&&(u=-(u+n)),this.debugElements_.push(e.utils.dom.createSvgElement(e.utils.Svg.RECT,{class:"elemSpacerRect blockRenderDebug",x:u,y:t.centerline-t.height/2,width:n,height:t.height,stroke:"pink",fill:s?"black":"pink","fill-opacity":"0.5","stroke-width":"1px"},this.svgRoot_))}},e.blockRendering.Debug.prototype.drawRenderedElem=function(t,n){if(e.blockRendering.Debug.config.elems){var r=t.xPos;n&&(r=-(r+t.width)),this.debugElements_.push(e.utils.dom.createSvgElement(e.utils.Svg.RECT,{class:"rowRenderingRect blockRenderDebug",x:r,y:n=t.centerline-t.height/2,width:t.width,height:t.height,stroke:"black",fill:"none","stroke-width":"1px"},this.svgRoot_)),e.blockRendering.Types.isField(t)&&t.field instanceof e.FieldLabel&&this.debugElements_.push(e.utils.dom.createSvgElement(e.utils.Svg.RECT,{class:"rowRenderingRect blockRenderDebug",x:r,y:n+this.constants_.FIELD_TEXT_BASELINE,width:t.width,height:"0.1px",stroke:"red",fill:"none","stroke-width":"0.5px"},this.svgRoot_))}e.blockRendering.Types.isInput(t)&&e.blockRendering.Debug.config.connections&&this.drawConnection(t.connectionModel)},e.blockRendering.Debug.prototype.drawConnection=function(t){if(e.blockRendering.Debug.config.connections){if(t.type==e.connectionTypes.INPUT_VALUE)var n=4,r="magenta",s="none";else t.type==e.connectionTypes.OUTPUT_VALUE?(n=2,s=r="magenta"):t.type==e.connectionTypes.NEXT_STATEMENT?(n=4,r="goldenrod",s="none"):t.type==e.connectionTypes.PREVIOUS_STATEMENT&&(n=2,s=r="goldenrod");this.debugElements_.push(e.utils.dom.createSvgElement(e.utils.Svg.CIRCLE,{class:"blockRenderDebug",cx:t.offsetInBlock_.x,cy:t.offsetInBlock_.y,r:n,fill:s,stroke:r},this.svgRoot_))}},e.blockRendering.Debug.prototype.drawRenderedRow=function(t,n,r){e.blockRendering.Debug.config.rows&&(this.debugElements_.push(e.utils.dom.createSvgElement(e.utils.Svg.RECT,{class:"elemRenderingRect blockRenderDebug",x:r?-(t.xPos+t.width):t.xPos,y:t.yPos,width:t.width,height:t.height,stroke:"red",fill:"none","stroke-width":"1px"},this.svgRoot_)),e.blockRendering.Types.isTopOrBottomRow(t)||e.blockRendering.Debug.config.connectedBlockBounds&&this.debugElements_.push(e.utils.dom.createSvgElement(e.utils.Svg.RECT,{class:"connectedBlockWidth blockRenderDebug",x:r?-(t.xPos+t.widthWithConnectedBlocks):t.xPos,y:t.yPos,width:t.widthWithConnectedBlocks,height:t.height,stroke:this.randomColour_,fill:"none","stroke-width":"1px","stroke-dasharray":"3,3"},this.svgRoot_)))},e.blockRendering.Debug.prototype.drawRowWithElements=function(t,n,r){for(var s=0,u=t.elements.length;s<u;s++){var y=t.elements[s];y?e.blockRendering.Types.isSpacer(y)?this.drawSpacerElem(y,t.height,r):this.drawRenderedElem(y,r):console.warn("A row has an undefined or null element.",t,y)}this.drawRenderedRow(t,n,r)},e.blockRendering.Debug.prototype.drawBoundingBox=function(t){if(e.blockRendering.Debug.config.blockBounds){var n=t.RTL?-t.width:0;this.debugElements_.push(e.utils.dom.createSvgElement(e.utils.Svg.RECT,{class:"blockBoundingBox blockRenderDebug",x:n,y:0,width:t.width,height:t.height,stroke:"black",fill:"none","stroke-width":"1px","stroke-dasharray":"5,5"},this.svgRoot_)),e.blockRendering.Debug.config.connectedBlockBounds&&this.debugElements_.push(e.utils.dom.createSvgElement(e.utils.Svg.RECT,{class:"blockRenderDebug",x:n=t.RTL?-t.widthWithChildren:0,y:0,width:t.widthWithChildren,height:t.height,stroke:"#DF57BC",fill:"none","stroke-width":"1px","stroke-dasharray":"3,3"},this.svgRoot_))}},e.blockRendering.Debug.prototype.drawDebug=function(t,n){this.clearElems(),this.svgRoot_=t.getSvgRoot(),this.randomColour_="#"+Math.floor(16777215*Math.random()).toString(16);for(var u,r=0,s=0;u=n.rows[s];s++)e.blockRendering.Types.isBetweenRowSpacer(u)?this.drawSpacerRow(u,r,n.RTL):this.drawRowWithElements(u,r,n.RTL),r+=u.height;t.previousConnection&&this.drawConnection(t.previousConnection),t.nextConnection&&this.drawConnection(t.nextConnection),t.outputConnection&&this.drawConnection(t.outputConnection),n.rightSide&&this.drawRenderedElem(n.rightSide,n.RTL),this.drawBoundingBox(n),this.drawRender(t.pathObject.svgPath)},e.blockRendering.Debug.prototype.drawRender=function(t){e.blockRendering.Debug.config.render&&(t.setAttribute("filter","url(#"+this.constants_.debugFilterId+")"),setTimeout(function(){t.setAttribute("filter","")},100))},e.blockRendering.Drawer=function(t,n){this.block_=t,this.info_=n,this.topLeft_=t.getRelativeToSurfaceXY(),this.inlinePath_=this.outlinePath_="",this.constants_=n.getRenderer().getConstants()},e.blockRendering.Drawer.prototype.draw=function(){this.hideHiddenIcons_(),this.drawOutline_(),this.drawInternals_(),this.block_.pathObject.setPath(this.outlinePath_+"\n"+this.inlinePath_),this.info_.RTL&&this.block_.pathObject.flipRTL(),e.blockRendering.useDebugger&&this.block_.renderingDebugger.drawDebug(this.block_,this.info_),this.recordSizeOnBlock_()},e.blockRendering.Drawer.prototype.recordSizeOnBlock_=function(){this.block_.height=this.info_.height,this.block_.width=this.info_.widthWithChildren},e.blockRendering.Drawer.prototype.hideHiddenIcons_=function(){for(var n,t=0;n=this.info_.hiddenIcons[t];t++)n.icon.iconGroup_.setAttribute("display","none")},e.blockRendering.Drawer.prototype.drawOutline_=function(){this.drawTop_();for(var t=1;t<this.info_.rows.length-1;t++){var n=this.info_.rows[t];n.hasJaggedEdge?this.drawJaggedEdge_(n):n.hasStatement?this.drawStatementInput_(n):n.hasExternalInput?this.drawValueInput_(n):this.drawRightSideRow_(n)}this.drawBottom_(),this.drawLeft_()},e.blockRendering.Drawer.prototype.drawTop_=function(){var t=this.info_.topRow,n=t.elements;this.positionPreviousConnection_(),this.outlinePath_+=e.utils.svgPaths.moveBy(t.xPos,this.info_.startY);for(var s,r=0;s=n[r];r++)e.blockRendering.Types.isLeftRoundedCorner(s)?this.outlinePath_+=this.constants_.OUTSIDE_CORNERS.topLeft:e.blockRendering.Types.isRightRoundedCorner(s)?this.outlinePath_+=this.constants_.OUTSIDE_CORNERS.topRight:e.blockRendering.Types.isPreviousConnection(s)?this.outlinePath_+=s.shape.pathLeft:e.blockRendering.Types.isHat(s)?this.outlinePath_+=this.constants_.START_HAT.path:e.blockRendering.Types.isSpacer(s)&&(this.outlinePath_+=e.utils.svgPaths.lineOnAxis("h",s.width));this.outlinePath_+=e.utils.svgPaths.lineOnAxis("v",t.height)},e.blockRendering.Drawer.prototype.drawJaggedEdge_=function(t){this.outlinePath_+=this.constants_.JAGGED_TEETH.path+e.utils.svgPaths.lineOnAxis("v",t.height-this.constants_.JAGGED_TEETH.height)},e.blockRendering.Drawer.prototype.drawValueInput_=function(t){var n=t.getLastInput();this.positionExternalValueConnection_(t);var r="function"==typeof n.shape.pathDown?n.shape.pathDown(n.height):n.shape.pathDown;this.outlinePath_+=e.utils.svgPaths.lineOnAxis("H",n.xPos+n.width)+r+e.utils.svgPaths.lineOnAxis("v",t.height-n.connectionHeight)},e.blockRendering.Drawer.prototype.drawStatementInput_=function(t){var n=t.getLastInput(),r=n.xPos+n.notchOffset+n.shape.width;n=n.shape.pathRight+e.utils.svgPaths.lineOnAxis("h",-(n.notchOffset-this.constants_.INSIDE_CORNERS.width))+this.constants_.INSIDE_CORNERS.pathTop;var s=t.height-2*this.constants_.INSIDE_CORNERS.height;this.outlinePath_+=e.utils.svgPaths.lineOnAxis("H",r)+n+e.utils.svgPaths.lineOnAxis("v",s)+this.constants_.INSIDE_CORNERS.pathBottom+e.utils.svgPaths.lineOnAxis("H",t.xPos+t.width),this.positionStatementInputConnection_(t)},e.blockRendering.Drawer.prototype.drawRightSideRow_=function(t){this.outlinePath_+=e.utils.svgPaths.lineOnAxis("V",t.yPos+t.height)},e.blockRendering.Drawer.prototype.drawBottom_=function(){var t=this.info_.bottomRow,n=t.elements;this.positionNextConnection_();for(var y,r=0,s="",u=n.length-1;y=n[u];u--)e.blockRendering.Types.isNextConnection(y)?s+=y.shape.pathRight:e.blockRendering.Types.isLeftSquareCorner(y)?s+=e.utils.svgPaths.lineOnAxis("H",t.xPos):e.blockRendering.Types.isLeftRoundedCorner(y)?s+=this.constants_.OUTSIDE_CORNERS.bottomLeft:e.blockRendering.Types.isRightRoundedCorner(y)?(s+=this.constants_.OUTSIDE_CORNERS.bottomRight,r=this.constants_.OUTSIDE_CORNERS.rightHeight):e.blockRendering.Types.isSpacer(y)&&(s+=e.utils.svgPaths.lineOnAxis("h",-1*y.width));this.outlinePath_+=e.utils.svgPaths.lineOnAxis("V",t.baseline-r),this.outlinePath_+=s},e.blockRendering.Drawer.prototype.drawLeft_=function(){var t=this.info_.outputConnection;if(this.positionOutputConnection_(),t){var n=t.connectionOffsetY+t.height;t="function"==typeof t.shape.pathUp?t.shape.pathUp(t.height):t.shape.pathUp,this.outlinePath_+=e.utils.svgPaths.lineOnAxis("V",n)+t}this.outlinePath_+="z"},e.blockRendering.Drawer.prototype.drawInternals_=function(){for(var n,t=0;n=this.info_.rows[t];t++)for(var s,r=0;s=n.elements[r];r++)e.blockRendering.Types.isInlineInput(s)?this.drawInlineInput_(s):(e.blockRendering.Types.isIcon(s)||e.blockRendering.Types.isField(s))&&this.layoutField_(s)},e.blockRendering.Drawer.prototype.layoutField_=function(t){if(e.blockRendering.Types.isField(t))var n=t.field.getSvgRoot();else e.blockRendering.Types.isIcon(t)&&(n=t.icon.iconGroup_);var r=t.centerline-t.height/2,s=t.xPos,u="";this.info_.RTL&&(s=-(s+t.width),t.flipRtl&&(s+=t.width,u="scale(-1 1)")),e.blockRendering.Types.isIcon(t)?(n.setAttribute("display","block"),n.setAttribute("transform","translate("+s+","+r+")"),t.icon.computeIconLocation()):n.setAttribute("transform","translate("+s+","+r+")"+u),this.info_.isInsertionMarker&&n.setAttribute("display","none")},e.blockRendering.Drawer.prototype.drawInlineInput_=function(t){var n=t.width,r=t.height,s=t.connectionOffsetY,u=t.connectionHeight+s;this.inlinePath_+=e.utils.svgPaths.moveTo(t.xPos+t.connectionWidth,t.centerline-r/2)+e.utils.svgPaths.lineOnAxis("v",s)+t.shape.pathDown+e.utils.svgPaths.lineOnAxis("v",r-u)+e.utils.svgPaths.lineOnAxis("h",n-t.connectionWidth)+e.utils.svgPaths.lineOnAxis("v",-r)+"z",this.positionInlineInputConnection_(t)},e.blockRendering.Drawer.prototype.positionInlineInputConnection_=function(t){if(t.connectionModel){var r=t.xPos+t.connectionWidth+t.connectionOffsetX;this.info_.RTL&&(r*=-1),t.connectionModel.setOffsetInBlock(r,t.centerline-t.height/2+t.connectionOffsetY)}},e.blockRendering.Drawer.prototype.positionStatementInputConnection_=function(t){var n=t.getLastInput();if(n.connectionModel){var r=t.xPos+t.statementEdge+n.notchOffset;this.info_.RTL&&(r*=-1),n.connectionModel.setOffsetInBlock(r,t.yPos)}},e.blockRendering.Drawer.prototype.positionExternalValueConnection_=function(t){var n=t.getLastInput();if(n.connectionModel){var r=t.xPos+t.width;this.info_.RTL&&(r*=-1),n.connectionModel.setOffsetInBlock(r,t.yPos)}},e.blockRendering.Drawer.prototype.positionPreviousConnection_=function(){var t=this.info_.topRow;if(t.connection){var n=t.xPos+t.notchOffset;t.connection.connectionModel.setOffsetInBlock(this.info_.RTL?-n:n,0)}},e.blockRendering.Drawer.prototype.positionNextConnection_=function(){var t=this.info_.bottomRow;if(t.connection){var n=t.connection,r=n.xPos;n.connectionModel.setOffsetInBlock(this.info_.RTL?-r:r,t.baseline)}},e.blockRendering.Drawer.prototype.positionOutputConnection_=function(){if(this.info_.outputConnection){var t=this.info_.startX+this.info_.outputConnection.connectionOffsetX;this.block_.outputConnection.setOffsetInBlock(this.info_.RTL?-t:t,this.info_.outputConnection.connectionOffsetY)}},e.Events.MarkerMove=function(t,n,r,s){var u=t?t.workspace.id:void 0;s&&s.getType()==e.ASTNode.types.WORKSPACE&&(u=s.getLocation().id),e.Events.MarkerMove.superClass_.constructor.call(this,u),this.blockId=t?t.id:null,this.oldNode=r,this.newNode=s,this.isCursor=n},e.utils.object.inherits(e.Events.MarkerMove,e.Events.UiBase),e.Events.MarkerMove.prototype.type=e.Events.MARKER_MOVE,e.Events.MarkerMove.prototype.toJson=function(){var t=e.Events.MarkerMove.superClass_.toJson.call(this);return t.isCursor=this.isCursor,t.blockId=this.blockId,t.oldNode=this.oldNode,t.newNode=this.newNode,t},e.Events.MarkerMove.prototype.fromJson=function(t){e.Events.MarkerMove.superClass_.fromJson.call(this,t),this.isCursor=t.isCursor,this.blockId=t.blockId,this.oldNode=t.oldNode,this.newNode=t.newNode},e.registry.register(e.registry.Type.EVENT,e.Events.MARKER_MOVE,e.Events.MarkerMove),e.blockRendering.MarkerSvg=function(t,n,r){this.workspace_=t,this.marker_=r,this.parent_=null,this.constants_=n,this.currentMarkerSvg=null,t=this.isCursor()?this.constants_.CURSOR_COLOUR:this.constants_.MARKER_COLOUR,this.colour_=r.colour||t},e.blockRendering.MarkerSvg.CURSOR_CLASS="blocklyCursor",e.blockRendering.MarkerSvg.MARKER_CLASS="blocklyMarker",e.blockRendering.MarkerSvg.HEIGHT_MULTIPLIER=.75,e.blockRendering.MarkerSvg.prototype.getSvgRoot=function(){return this.svgGroup_},e.blockRendering.MarkerSvg.prototype.getMarker=function(){return this.marker_},e.blockRendering.MarkerSvg.prototype.isCursor=function(){return"cursor"==this.marker_.type},e.blockRendering.MarkerSvg.prototype.createDom=function(){var t=this.isCursor()?e.blockRendering.MarkerSvg.CURSOR_CLASS:e.blockRendering.MarkerSvg.MARKER_CLASS;return this.svgGroup_=e.utils.dom.createSvgElement(e.utils.Svg.G,{class:t},null),this.createDomInternal_(),this.svgGroup_},e.blockRendering.MarkerSvg.prototype.setParent_=function(t){this.isCursor()?(this.parent_&&this.parent_.setCursorSvg(null),t.setCursorSvg(this.getSvgRoot())):(this.parent_&&this.parent_.setMarkerSvg(null),t.setMarkerSvg(this.getSvgRoot())),this.parent_=t},e.blockRendering.MarkerSvg.prototype.draw=function(t,n){if(n){this.constants_=this.workspace_.getRenderer().getConstants();var r=this.isCursor()?this.constants_.CURSOR_COLOUR:this.constants_.MARKER_COLOUR;this.colour_=this.marker_.colour||r,this.applyColour_(n),this.showAtLocation_(n),this.fireMarkerEvent_(t,n),void 0!==(t=this.currentMarkerSvg.childNodes[0])&&t.beginElement&&t.beginElement()}else this.hide()},e.blockRendering.MarkerSvg.prototype.showAtLocation_=function(t){var n=t.getLocation().type;t.getType()==e.ASTNode.types.BLOCK?this.showWithBlock_(t):t.getType()==e.ASTNode.types.OUTPUT?this.showWithOutput_(t):n==e.connectionTypes.INPUT_VALUE?this.showWithInput_(t):n==e.connectionTypes.NEXT_STATEMENT?this.showWithNext_(t):t.getType()==e.ASTNode.types.PREVIOUS?this.showWithPrevious_(t):t.getType()==e.ASTNode.types.FIELD?this.showWithField_(t):t.getType()==e.ASTNode.types.WORKSPACE?this.showWithCoordinates_(t):t.getType()==e.ASTNode.types.STACK&&this.showWithStack_(t)},e.blockRendering.MarkerSvg.prototype.showWithBlockPrevOutput_=function(t){var n=(t=t.getSourceBlock()).width,r=t.height,s=r*e.blockRendering.MarkerSvg.HEIGHT_MULTIPLIER,u=this.constants_.CURSOR_BLOCK_PADDING;if(t.previousConnection){var y=this.constants_.shapeFor(t.previousConnection);this.positionPrevious_(n,u,s,y)}else t.outputConnection?(y=this.constants_.shapeFor(t.outputConnection),this.positionOutput_(n,r,y)):this.positionBlock_(n,u,s);this.setParent_(t),this.showCurrent_()},e.blockRendering.MarkerSvg.prototype.showWithBlock_=function(t){this.showWithBlockPrevOutput_(t)},e.blockRendering.MarkerSvg.prototype.showWithPrevious_=function(t){this.showWithBlockPrevOutput_(t)},e.blockRendering.MarkerSvg.prototype.showWithOutput_=function(t){this.showWithBlockPrevOutput_(t)},e.blockRendering.MarkerSvg.prototype.showWithCoordinates_=function(t){var n=t.getWsCoordinate();t=n.x,this.workspace_.RTL&&(t-=this.constants_.CURSOR_WS_WIDTH),this.positionLine_(t,n=n.y,this.constants_.CURSOR_WS_WIDTH),this.setParent_(this.workspace_),this.showCurrent_()},e.blockRendering.MarkerSvg.prototype.showWithField_=function(t){var n=(t=t.getLocation()).getSize().width,r=t.getSize().height;this.positionRect_(0,0,n,r),this.setParent_(t),this.showCurrent_()},e.blockRendering.MarkerSvg.prototype.showWithInput_=function(t){var n=(t=t.getLocation()).getSourceBlock();this.positionInput_(t),this.setParent_(n),this.showCurrent_()},e.blockRendering.MarkerSvg.prototype.showWithNext_=function(t){var n=t.getLocation();t=n.getSourceBlock();var r=0;n=n.getOffsetInBlock().y;var s=t.getHeightWidth().width;this.workspace_.RTL&&(r=-s),this.positionLine_(r,n,s),this.setParent_(t),this.showCurrent_()},e.blockRendering.MarkerSvg.prototype.showWithStack_=function(t){var n=(t=t.getLocation()).getHeightWidth(),r=n.width+this.constants_.CURSOR_STACK_PADDING,s=-this.constants_.CURSOR_STACK_PADDING/2,y=s;this.workspace_.RTL&&(y=-(r+s)),this.positionRect_(y,-this.constants_.CURSOR_STACK_PADDING/2,r,n=n.height+this.constants_.CURSOR_STACK_PADDING),this.setParent_(t),this.showCurrent_()},e.blockRendering.MarkerSvg.prototype.showCurrent_=function(){this.hide(),this.currentMarkerSvg.style.display=""},e.blockRendering.MarkerSvg.prototype.positionBlock_=function(t,n,r){t=e.utils.svgPaths.moveBy(-n,r)+e.utils.svgPaths.lineOnAxis("V",-n)+e.utils.svgPaths.lineOnAxis("H",t+2*n)+e.utils.svgPaths.lineOnAxis("V",r),this.markerBlock_.setAttribute("d",t),this.workspace_.RTL&&this.flipRtl_(this.markerBlock_),this.currentMarkerSvg=this.markerBlock_},e.blockRendering.MarkerSvg.prototype.positionInput_=function(t){var n=t.getOffsetInBlock().x,r=t.getOffsetInBlock().y;t=e.utils.svgPaths.moveTo(0,0)+this.constants_.shapeFor(t).pathDown,this.markerInput_.setAttribute("d",t),this.markerInput_.setAttribute("transform","translate("+n+","+r+")"+(this.workspace_.RTL?" scale(-1 1)":"")),this.currentMarkerSvg=this.markerInput_},e.blockRendering.MarkerSvg.prototype.positionLine_=function(t,n,r){this.markerSvgLine_.setAttribute("x",t),this.markerSvgLine_.setAttribute("y",n),this.markerSvgLine_.setAttribute("width",r),this.currentMarkerSvg=this.markerSvgLine_},e.blockRendering.MarkerSvg.prototype.positionOutput_=function(t,n,r){t=e.utils.svgPaths.moveBy(t,0)+e.utils.svgPaths.lineOnAxis("h",-(t-r.width))+e.utils.svgPaths.lineOnAxis("v",this.constants_.TAB_OFFSET_FROM_TOP)+r.pathDown+e.utils.svgPaths.lineOnAxis("V",n)+e.utils.svgPaths.lineOnAxis("H",t),this.markerBlock_.setAttribute("d",t),this.workspace_.RTL&&this.flipRtl_(this.markerBlock_),this.currentMarkerSvg=this.markerBlock_},e.blockRendering.MarkerSvg.prototype.positionPrevious_=function(t,n,r,s){t=e.utils.svgPaths.moveBy(-n,r)+e.utils.svgPaths.lineOnAxis("V",-n)+e.utils.svgPaths.lineOnAxis("H",this.constants_.NOTCH_OFFSET_LEFT)+s.pathLeft+e.utils.svgPaths.lineOnAxis("H",t+2*n)+e.utils.svgPaths.lineOnAxis("V",r),this.markerBlock_.setAttribute("d",t),this.workspace_.RTL&&this.flipRtl_(this.markerBlock_),this.currentMarkerSvg=this.markerBlock_},e.blockRendering.MarkerSvg.prototype.positionRect_=function(t,n,r,s){this.markerSvgRect_.setAttribute("x",t),this.markerSvgRect_.setAttribute("y",n),this.markerSvgRect_.setAttribute("width",r),this.markerSvgRect_.setAttribute("height",s),this.currentMarkerSvg=this.markerSvgRect_},e.blockRendering.MarkerSvg.prototype.flipRtl_=function(t){t.setAttribute("transform","scale(-1 1)")},e.blockRendering.MarkerSvg.prototype.hide=function(){this.markerSvgLine_.style.display="none",this.markerSvgRect_.style.display="none",this.markerInput_.style.display="none",this.markerBlock_.style.display="none"},e.blockRendering.MarkerSvg.prototype.fireMarkerEvent_=function(t,n){var r=n.getSourceBlock();t=new(e.Events.get(e.Events.MARKER_MOVE))(r,this.isCursor(),t,n),e.Events.fire(t)},e.blockRendering.MarkerSvg.prototype.getBlinkProperties_=function(){return{attributeType:"XML",attributeName:"fill",dur:"1s",values:this.colour_+";transparent;transparent;",repeatCount:"indefinite"}},e.blockRendering.MarkerSvg.prototype.createDomInternal_=function(){if(this.markerSvg_=e.utils.dom.createSvgElement(e.utils.Svg.G,{width:this.constants_.CURSOR_WS_WIDTH,height:this.constants_.WS_CURSOR_HEIGHT},this.svgGroup_),this.markerSvgLine_=e.utils.dom.createSvgElement(e.utils.Svg.RECT,{width:this.constants_.CURSOR_WS_WIDTH,height:this.constants_.WS_CURSOR_HEIGHT,style:"display: none"},this.markerSvg_),this.markerSvgRect_=e.utils.dom.createSvgElement(e.utils.Svg.RECT,{class:"blocklyVerticalMarker",rx:10,ry:10,style:"display: none"},this.markerSvg_),this.markerInput_=e.utils.dom.createSvgElement(e.utils.Svg.PATH,{transform:"",style:"display: none"},this.markerSvg_),this.markerBlock_=e.utils.dom.createSvgElement(e.utils.Svg.PATH,{transform:"",style:"display: none",fill:"none","stroke-width":this.constants_.CURSOR_STROKE_WIDTH},this.markerSvg_),this.isCursor()){var t=this.getBlinkProperties_();e.utils.dom.createSvgElement(e.utils.Svg.ANIMATE,t,this.markerSvgLine_),e.utils.dom.createSvgElement(e.utils.Svg.ANIMATE,t,this.markerInput_),t.attributeName="stroke",e.utils.dom.createSvgElement(e.utils.Svg.ANIMATE,t,this.markerBlock_)}return this.markerSvg_},e.blockRendering.MarkerSvg.prototype.applyColour_=function(t){this.markerSvgLine_.setAttribute("fill",this.colour_),this.markerSvgRect_.setAttribute("stroke",this.colour_),this.markerInput_.setAttribute("fill",this.colour_),this.markerBlock_.setAttribute("stroke",this.colour_),this.isCursor()&&(this.markerSvgLine_.firstChild.setAttribute("values",t=this.colour_+";transparent;transparent;"),this.markerInput_.firstChild.setAttribute("values",t),this.markerBlock_.firstChild.setAttribute("values",t))},e.blockRendering.MarkerSvg.prototype.dispose=function(){this.svgGroup_&&e.utils.dom.removeNode(this.svgGroup_)},e.blockRendering.PathObject=function(t,n,r){this.constants=r,this.svgRoot=t,this.svgPath=e.utils.dom.createSvgElement(e.utils.Svg.PATH,{class:"blocklyPath"},this.svgRoot),this.style=n,this.markerSvg=this.cursorSvg=null},e.blockRendering.PathObject.prototype.setPath=function(t){this.svgPath.setAttribute("d",t)},e.blockRendering.PathObject.prototype.flipRTL=function(){this.svgPath.setAttribute("transform","scale(-1 1)")},e.blockRendering.PathObject.prototype.setCursorSvg=function(t){t?(this.svgRoot.appendChild(t),this.cursorSvg=t):this.cursorSvg=null},e.blockRendering.PathObject.prototype.setMarkerSvg=function(t){t?(this.cursorSvg?this.svgRoot.insertBefore(t,this.cursorSvg):this.svgRoot.appendChild(t),this.markerSvg=t):this.markerSvg=null},e.blockRendering.PathObject.prototype.applyColour=function(t){this.svgPath.setAttribute("stroke",this.style.colourTertiary),this.svgPath.setAttribute("fill",this.style.colourPrimary),this.updateShadow_(t.isShadow()),this.updateDisabled_(!t.isEnabled()||t.getInheritedDisabled())},e.blockRendering.PathObject.prototype.setStyle=function(t){this.style=t},e.blockRendering.PathObject.prototype.setClass_=function(t,n){n?e.utils.dom.addClass(this.svgRoot,t):e.utils.dom.removeClass(this.svgRoot,t)},e.blockRendering.PathObject.prototype.updateHighlighted=function(t){this.svgPath.setAttribute("filter",t?"url(#"+this.constants.embossFilterId+")":"none")},e.blockRendering.PathObject.prototype.updateShadow_=function(t){t&&(this.svgPath.setAttribute("stroke","none"),this.svgPath.setAttribute("fill",this.style.colourSecondary))},e.blockRendering.PathObject.prototype.updateDisabled_=function(t){this.setClass_("blocklyDisabled",t),t&&this.svgPath.setAttribute("fill","url(#"+this.constants.disabledPatternId+")")},e.blockRendering.PathObject.prototype.updateSelected=function(t){this.setClass_("blocklySelected",t)},e.blockRendering.PathObject.prototype.updateDraggingDelete=function(t){this.setClass_("blocklyDraggingDelete",t)},e.blockRendering.PathObject.prototype.updateInsertionMarker=function(t){this.setClass_("blocklyInsertionMarker",t)},e.blockRendering.PathObject.prototype.updateMovable=function(t){this.setClass_("blocklyDraggable",t)},e.blockRendering.PathObject.prototype.updateReplacementFade=function(t){this.setClass_("blocklyReplaceable",t)},e.blockRendering.PathObject.prototype.updateShapeForInputHighlight=function(t,n){},e.blockRendering.Renderer=function(t){this.name=t,this.overrides=this.constants_=null},e.blockRendering.Renderer.prototype.getClassName=function(){return this.name+"-renderer"},e.blockRendering.Renderer.prototype.init=function(t,n){this.constants_=this.makeConstants_(),n&&(this.overrides=n,e.utils.object.mixin(this.constants_,n)),this.constants_.setTheme(t),this.constants_.init()},e.blockRendering.Renderer.prototype.createDom=function(t,n){this.constants_.createDom(t,this.name+"-"+n.name,"."+this.getClassName()+"."+n.getClassName())},e.blockRendering.Renderer.prototype.refreshDom=function(t,n){var r=this.getConstants();r.dispose(),this.constants_=this.makeConstants_(),this.overrides&&e.utils.object.mixin(this.constants_,this.overrides),this.constants_.randomIdentifier=r.randomIdentifier,this.constants_.setTheme(n),this.constants_.init(),this.createDom(t,n)},e.blockRendering.Renderer.prototype.dispose=function(){this.constants_&&this.constants_.dispose()},e.blockRendering.Renderer.prototype.makeConstants_=function(){return new e.blockRendering.ConstantProvider},e.blockRendering.Renderer.prototype.makeRenderInfo_=function(t){return new e.blockRendering.RenderInfo(this,t)},e.blockRendering.Renderer.prototype.makeDrawer_=function(t,n){return new e.blockRendering.Drawer(t,n)},e.blockRendering.Renderer.prototype.makeDebugger_=function(){if(!e.blockRendering.Debug)throw Error("Missing require for Blockly.blockRendering.Debug");return new e.blockRendering.Debug(this.getConstants())},e.blockRendering.Renderer.prototype.makeMarkerDrawer=function(t,n){return new e.blockRendering.MarkerSvg(t,this.getConstants(),n)},e.blockRendering.Renderer.prototype.makePathObject=function(t,n){return new e.blockRendering.PathObject(t,n,this.constants_)},e.blockRendering.Renderer.prototype.getConstants=function(){return this.constants_},e.blockRendering.Renderer.prototype.shouldHighlightConnection=function(t){return!0},e.blockRendering.Renderer.prototype.orphanCanConnectAtEnd=function(t,n,r){return!!e.Connection.getConnectionForOrphanedConnection(t,r===e.connectionTypes.OUTPUT_VALUE?n.outputConnection:n.previousConnection)},e.blockRendering.Renderer.prototype.getConnectionPreviewMethod=function(t,n,r){return n.type==e.connectionTypes.OUTPUT_VALUE||n.type==e.connectionTypes.PREVIOUS_STATEMENT?!t.isConnected()||this.orphanCanConnectAtEnd(r,t.targetBlock(),n.type)?e.InsertionMarkerManager.PREVIEW_TYPE.INSERTION_MARKER:e.InsertionMarkerManager.PREVIEW_TYPE.REPLACEMENT_FADE:e.InsertionMarkerManager.PREVIEW_TYPE.INSERTION_MARKER},e.blockRendering.Renderer.prototype.render=function(t){e.blockRendering.useDebugger&&!t.renderingDebugger&&(t.renderingDebugger=this.makeDebugger_());var n=this.makeRenderInfo_(t);n.measure(),this.makeDrawer_(t,n).draw()},e.geras={},e.geras.ConstantProvider=function(){e.geras.ConstantProvider.superClass_.constructor.call(this),this.FIELD_TEXT_BASELINE_CENTER=!1,this.DARK_PATH_OFFSET=1,this.MAX_BOTTOM_WIDTH=30,this.STATEMENT_BOTTOM_SPACER=-this.NOTCH_HEIGHT/2},e.utils.object.inherits(e.geras.ConstantProvider,e.blockRendering.ConstantProvider),e.geras.ConstantProvider.prototype.getCSS_=function(t){return e.geras.ConstantProvider.superClass_.getCSS_.call(this,t).concat([t+" .blocklyInsertionMarker>.blocklyPathLight,",t+" .blocklyInsertionMarker>.blocklyPathDark {","fill-opacity: "+this.INSERTION_MARKER_OPACITY+";","stroke: none;","}"])},e.geras.Highlighter=function(t){this.info_=t,this.inlineSteps_=this.steps_="",this.RTL_=this.info_.RTL,t=t.getRenderer(),this.constants_=t.getConstants(),this.highlightConstants_=t.getHighlightConstants(),this.highlightOffset_=this.highlightConstants_.OFFSET,this.outsideCornerPaths_=this.highlightConstants_.OUTSIDE_CORNER,this.insideCornerPaths_=this.highlightConstants_.INSIDE_CORNER,this.puzzleTabPaths_=this.highlightConstants_.PUZZLE_TAB,this.notchPaths_=this.highlightConstants_.NOTCH,this.startPaths_=this.highlightConstants_.START_HAT,this.jaggedTeethPaths_=this.highlightConstants_.JAGGED_TEETH},e.geras.Highlighter.prototype.getPath=function(){return this.steps_+"\n"+this.inlineSteps_},e.geras.Highlighter.prototype.drawTopCorner=function(t){this.steps_+=e.utils.svgPaths.moveBy(t.xPos,this.info_.startY);for(var r,n=0;r=t.elements[n];n++)e.blockRendering.Types.isLeftSquareCorner(r)?this.steps_+=this.highlightConstants_.START_POINT:e.blockRendering.Types.isLeftRoundedCorner(r)?this.steps_+=this.outsideCornerPaths_.topLeft(this.RTL_):e.blockRendering.Types.isPreviousConnection(r)?this.steps_+=this.notchPaths_.pathLeft:e.blockRendering.Types.isHat(r)?this.steps_+=this.startPaths_.path(this.RTL_):e.blockRendering.Types.isSpacer(r)&&0!=r.width&&(this.steps_+=e.utils.svgPaths.lineOnAxis("H",r.xPos+r.width-this.highlightOffset_));this.steps_+=e.utils.svgPaths.lineOnAxis("H",t.xPos+t.width-this.highlightOffset_)},e.geras.Highlighter.prototype.drawJaggedEdge_=function(t){this.info_.RTL&&(this.steps_+=this.jaggedTeethPaths_.pathLeft+e.utils.svgPaths.lineOnAxis("v",t.height-this.jaggedTeethPaths_.height-this.highlightOffset_))},e.geras.Highlighter.prototype.drawValueInput=function(t){var n=t.getLastInput();if(this.RTL_){var r=t.height-n.connectionHeight;this.steps_+=e.utils.svgPaths.moveTo(n.xPos+n.width-this.highlightOffset_,t.yPos)+this.puzzleTabPaths_.pathDown(this.RTL_)+e.utils.svgPaths.lineOnAxis("v",r)}else this.steps_+=e.utils.svgPaths.moveTo(n.xPos+n.width,t.yPos)+this.puzzleTabPaths_.pathDown(this.RTL_)},e.geras.Highlighter.prototype.drawStatementInput=function(t){var n=t.getLastInput();if(this.RTL_){var r=t.height-2*this.insideCornerPaths_.height;this.steps_+=e.utils.svgPaths.moveTo(n.xPos,t.yPos)+this.insideCornerPaths_.pathTop(this.RTL_)+e.utils.svgPaths.lineOnAxis("v",r)+this.insideCornerPaths_.pathBottom(this.RTL_)+e.utils.svgPaths.lineTo(t.width-n.xPos-this.insideCornerPaths_.width,0)}else this.steps_+=e.utils.svgPaths.moveTo(n.xPos,t.yPos+t.height)+this.insideCornerPaths_.pathBottom(this.RTL_)+e.utils.svgPaths.lineTo(t.width-n.xPos-this.insideCornerPaths_.width,0)},e.geras.Highlighter.prototype.drawRightSideRow=function(t){var n=t.xPos+t.width-this.highlightOffset_;t.followsStatement&&(this.steps_+=e.utils.svgPaths.lineOnAxis("H",n)),this.RTL_&&(this.steps_+=e.utils.svgPaths.lineOnAxis("H",n),t.height>this.highlightOffset_&&(this.steps_+=e.utils.svgPaths.lineOnAxis("V",t.yPos+t.height-this.highlightOffset_)))},e.geras.Highlighter.prototype.drawBottomRow=function(t){if(this.RTL_)this.steps_+=e.utils.svgPaths.lineOnAxis("V",t.baseline-this.highlightOffset_);else{var n=this.info_.bottomRow.elements[0];e.blockRendering.Types.isLeftSquareCorner(n)?this.steps_+=e.utils.svgPaths.moveTo(t.xPos+this.highlightOffset_,t.baseline-this.highlightOffset_):e.blockRendering.Types.isLeftRoundedCorner(n)&&(this.steps_+=e.utils.svgPaths.moveTo(t.xPos,t.baseline),this.steps_+=this.outsideCornerPaths_.bottomLeft())}},e.geras.Highlighter.prototype.drawLeft=function(){var t=this.info_.outputConnection;t&&(t=t.connectionOffsetY+t.height,this.RTL_?this.steps_+=e.utils.svgPaths.moveTo(this.info_.startX,t):(this.steps_+=e.utils.svgPaths.moveTo(this.info_.startX+this.highlightOffset_,this.info_.bottomRow.baseline-this.highlightOffset_),this.steps_+=e.utils.svgPaths.lineOnAxis("V",t)),this.steps_+=this.puzzleTabPaths_.pathUp(this.RTL_)),this.RTL_||(e.blockRendering.Types.isLeftRoundedCorner((t=this.info_.topRow).elements[0])?this.steps_+=e.utils.svgPaths.lineOnAxis("V",this.outsideCornerPaths_.height):this.steps_+=e.utils.svgPaths.lineOnAxis("V",t.capline+this.highlightOffset_))},e.geras.Highlighter.prototype.drawInlineInput=function(t){var n=this.highlightOffset_,r=t.xPos+t.connectionWidth,s=t.centerline-t.height/2,u=t.width-t.connectionWidth,y=s+n;this.RTL_?(s=t.connectionOffsetY-n,t=t.height-(t.connectionOffsetY+t.connectionHeight)+n,this.inlineSteps_+=e.utils.svgPaths.moveTo(r-n,y)+e.utils.svgPaths.lineOnAxis("v",s)+this.puzzleTabPaths_.pathDown(this.RTL_)+e.utils.svgPaths.lineOnAxis("v",t)+e.utils.svgPaths.lineOnAxis("h",u)):this.inlineSteps_+=e.utils.svgPaths.moveTo(t.xPos+t.width+n,y)+e.utils.svgPaths.lineOnAxis("v",t.height)+e.utils.svgPaths.lineOnAxis("h",-u)+e.utils.svgPaths.moveTo(r,s+t.connectionOffsetY)+this.puzzleTabPaths_.pathDown(this.RTL_)},e.geras.InlineInput=function(t,n){e.geras.InlineInput.superClass_.constructor.call(this,t,n),this.connectedBlock&&(this.width+=this.constants_.DARK_PATH_OFFSET,this.height+=this.constants_.DARK_PATH_OFFSET)},e.utils.object.inherits(e.geras.InlineInput,e.blockRendering.InlineInput),e.geras.StatementInput=function(t,n){e.geras.StatementInput.superClass_.constructor.call(this,t,n),this.connectedBlock&&(this.height+=this.constants_.DARK_PATH_OFFSET)},e.utils.object.inherits(e.geras.StatementInput,e.blockRendering.StatementInput),e.geras.RenderInfo=function(t,n){e.geras.RenderInfo.superClass_.constructor.call(this,t,n)},e.utils.object.inherits(e.geras.RenderInfo,e.blockRendering.RenderInfo),e.geras.RenderInfo.prototype.getRenderer=function(){return this.renderer_},e.geras.RenderInfo.prototype.populateBottomRow_=function(){e.geras.RenderInfo.superClass_.populateBottomRow_.call(this),this.block_.inputList.length&&this.block_.inputList[this.block_.inputList.length-1].type==e.inputTypes.STATEMENT||(this.bottomRow.minHeight=this.constants_.MEDIUM_PADDING-this.constants_.DARK_PATH_OFFSET)},e.geras.RenderInfo.prototype.addInput_=function(t,n){this.isInline&&t.type==e.inputTypes.VALUE?(n.elements.push(new e.geras.InlineInput(this.constants_,t)),n.hasInlineInput=!0):t.type==e.inputTypes.STATEMENT?(n.elements.push(new e.geras.StatementInput(this.constants_,t)),n.hasStatement=!0):t.type==e.inputTypes.VALUE?(n.elements.push(new e.blockRendering.ExternalValueInput(this.constants_,t)),n.hasExternalInput=!0):t.type==e.inputTypes.DUMMY&&(n.minHeight=Math.max(n.minHeight,this.constants_.DUMMY_INPUT_MIN_HEIGHT),n.hasDummyInput=!0),this.isInline||null!=n.align||(n.align=t.align)},e.geras.RenderInfo.prototype.addElemSpacing_=function(){for(var r,t=!1,n=0;r=this.rows[n];n++)r.hasExternalInput&&(t=!0);for(n=0;r=this.rows[n];n++){var s=r.elements;if(r.elements=[],r.startsWithElemSpacer()&&r.elements.push(new e.blockRendering.InRowSpacer(this.constants_,this.getInRowSpacing_(null,s[0]))),s.length){for(var u=0;u<s.length-1;u++){r.elements.push(s[u]);var y=this.getInRowSpacing_(s[u],s[u+1]);r.elements.push(new e.blockRendering.InRowSpacer(this.constants_,y))}r.elements.push(s[s.length-1]),r.endsWithElemSpacer()&&(y=this.getInRowSpacing_(s[s.length-1],null),t&&r.hasDummyInput&&(y+=this.constants_.TAB_WIDTH),r.elements.push(new e.blockRendering.InRowSpacer(this.constants_,y)))}}},e.geras.RenderInfo.prototype.getInRowSpacing_=function(t,n){if(!t)return n&&e.blockRendering.Types.isField(n)&&n.isEditable?this.constants_.MEDIUM_PADDING:n&&e.blockRendering.Types.isInlineInput(n)?this.constants_.MEDIUM_LARGE_PADDING:n&&e.blockRendering.Types.isStatementInput(n)?this.constants_.STATEMENT_INPUT_PADDING_LEFT:this.constants_.LARGE_PADDING;if(!e.blockRendering.Types.isInput(t)&&(!n||e.blockRendering.Types.isStatementInput(n)))return e.blockRendering.Types.isField(t)&&t.isEditable?this.constants_.MEDIUM_PADDING:e.blockRendering.Types.isIcon(t)?2*this.constants_.LARGE_PADDING+1:e.blockRendering.Types.isHat(t)?this.constants_.NO_PADDING:e.blockRendering.Types.isPreviousOrNextConnection(t)?this.constants_.LARGE_PADDING:e.blockRendering.Types.isLeftRoundedCorner(t)?this.constants_.MIN_BLOCK_WIDTH:e.blockRendering.Types.isJaggedEdge(t)?this.constants_.NO_PADDING:this.constants_.LARGE_PADDING;if(e.blockRendering.Types.isInput(t)&&!n){if(e.blockRendering.Types.isExternalInput(t))return this.constants_.NO_PADDING;if(e.blockRendering.Types.isInlineInput(t))return this.constants_.LARGE_PADDING;if(e.blockRendering.Types.isStatementInput(t))return this.constants_.NO_PADDING}if(!e.blockRendering.Types.isInput(t)&&n&&e.blockRendering.Types.isInput(n)){if(e.blockRendering.Types.isField(t)&&t.isEditable){if(e.blockRendering.Types.isInlineInput(n)||e.blockRendering.Types.isExternalInput(n))return this.constants_.SMALL_PADDING}else{if(e.blockRendering.Types.isInlineInput(n)||e.blockRendering.Types.isExternalInput(n))return this.constants_.MEDIUM_LARGE_PADDING;if(e.blockRendering.Types.isStatementInput(n))return this.constants_.LARGE_PADDING}return this.constants_.LARGE_PADDING-1}if(e.blockRendering.Types.isIcon(t)&&n&&!e.blockRendering.Types.isInput(n))return this.constants_.LARGE_PADDING;if(e.blockRendering.Types.isInlineInput(t)&&n&&e.blockRendering.Types.isField(n))return n.isEditable?this.constants_.MEDIUM_PADDING:this.constants_.LARGE_PADDING;if(e.blockRendering.Types.isLeftSquareCorner(t)&&n){if(e.blockRendering.Types.isHat(n))return this.constants_.NO_PADDING;if(e.blockRendering.Types.isPreviousConnection(n))return n.notchOffset;if(e.blockRendering.Types.isNextConnection(n))return n.notchOffset+(this.RTL?1:-1)*this.constants_.DARK_PATH_OFFSET/2}if(e.blockRendering.Types.isLeftRoundedCorner(t)&&n){if(e.blockRendering.Types.isPreviousConnection(n))return n.notchOffset-this.constants_.CORNER_RADIUS;if(e.blockRendering.Types.isNextConnection(n))return n.notchOffset-this.constants_.CORNER_RADIUS+(this.RTL?1:-1)*this.constants_.DARK_PATH_OFFSET/2}return e.blockRendering.Types.isField(t)&&n&&e.blockRendering.Types.isField(n)&&t.isEditable==n.isEditable||n&&e.blockRendering.Types.isJaggedEdge(n)?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING},e.geras.RenderInfo.prototype.getSpacerRowHeight_=function(t,n){return e.blockRendering.Types.isTopRow(t)&&e.blockRendering.Types.isBottomRow(n)?this.constants_.EMPTY_BLOCK_SPACER_HEIGHT:e.blockRendering.Types.isTopRow(t)||e.blockRendering.Types.isBottomRow(n)?this.constants_.NO_PADDING:t.hasExternalInput&&n.hasExternalInput?this.constants_.LARGE_PADDING:!t.hasStatement&&n.hasStatement?this.constants_.BETWEEN_STATEMENT_PADDING_Y:t.hasStatement&&n.hasStatement||!t.hasStatement&&n.hasDummyInput||t.hasDummyInput?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING},e.geras.RenderInfo.prototype.getElemCenterline_=function(t,n){if(e.blockRendering.Types.isSpacer(n))return t.yPos+n.height/2;if(e.blockRendering.Types.isBottomRow(t))return t=t.yPos+t.height-t.descenderHeight,e.blockRendering.Types.isNextConnection(n)?t+n.height/2:t-n.height/2;if(e.blockRendering.Types.isTopRow(t))return e.blockRendering.Types.isHat(n)?t.capline-n.height/2:t.capline+n.height/2;var r=t.yPos;return e.blockRendering.Types.isField(n)||e.blockRendering.Types.isIcon(n)?(r+=n.height/2,(t.hasInlineInput||t.hasStatement)&&n.height+this.constants_.TALL_INPUT_FIELD_OFFSET_Y<=t.height&&(r+=this.constants_.TALL_INPUT_FIELD_OFFSET_Y)):r=e.blockRendering.Types.isInlineInput(n)?r+n.height/2:r+t.height/2,r},e.geras.RenderInfo.prototype.alignRowElements_=function(){if(this.isInline){for(var s,t=0,n=null,r=this.rows.length-1;s=this.rows[r];r--)s.nextRightEdge=t,e.blockRendering.Types.isInputRow(s)&&(s.hasStatement&&this.alignStatementRow_(s),n&&n.hasStatement&&s.width<n.width?s.nextRightEdge=n.width:t=s.width,n=s);for(r=t=0;s=this.rows[r];r++)s.hasStatement?t=this.getDesiredRowWidth_(s):e.blockRendering.Types.isSpacer(s)?s.width=Math.max(t,s.nextRightEdge):(0<(t=Math.max(t,s.nextRightEdge)-s.width)&&this.addAlignmentPadding_(s,t),t=s.width)}else e.geras.RenderInfo.superClass_.alignRowElements_.call(this)},e.geras.RenderInfo.prototype.getDesiredRowWidth_=function(t){return this.isInline&&t.hasStatement?this.statementEdge+this.constants_.MAX_BOTTOM_WIDTH+this.startX:e.geras.RenderInfo.superClass_.getDesiredRowWidth_.call(this,t)},e.geras.RenderInfo.prototype.finalize_=function(){for(var s,t=0,n=0,r=0;s=this.rows[r];r++){s.yPos=n,s.xPos=this.startX,n+=s.height,t=Math.max(t,s.widthWithConnectedBlocks);var u=n-this.topRow.ascenderHeight;s==this.bottomRow&&u<this.constants_.MIN_BLOCK_HEIGHT&&(this.bottomRow.height+=u=this.constants_.MIN_BLOCK_HEIGHT-u,n+=u),this.recordElemPositions_(s)}this.outputConnection&&this.block_.nextConnection&&this.block_.nextConnection.isConnected()&&(t=Math.max(t,this.block_.nextConnection.targetBlock().getHeightWidth().width-this.constants_.DARK_PATH_OFFSET)),this.bottomRow.baseline=n-this.bottomRow.descenderHeight,this.widthWithChildren=t+this.startX+this.constants_.DARK_PATH_OFFSET,this.width+=this.constants_.DARK_PATH_OFFSET,this.height=n+this.constants_.DARK_PATH_OFFSET,this.startY=this.topRow.capline},e.geras.Drawer=function(t,n){e.geras.Drawer.superClass_.constructor.call(this,t,n),this.highlighter_=new e.geras.Highlighter(n)},e.utils.object.inherits(e.geras.Drawer,e.blockRendering.Drawer),e.geras.Drawer.prototype.draw=function(){this.hideHiddenIcons_(),this.drawOutline_(),this.drawInternals_();var t=this.block_.pathObject;t.setPath(this.outlinePath_+"\n"+this.inlinePath_),t.setHighlightPath(this.highlighter_.getPath()),this.info_.RTL&&t.flipRTL(),e.blockRendering.useDebugger&&this.block_.renderingDebugger.drawDebug(this.block_,this.info_),this.recordSizeOnBlock_()},e.geras.Drawer.prototype.drawTop_=function(){this.highlighter_.drawTopCorner(this.info_.topRow),this.highlighter_.drawRightSideRow(this.info_.topRow),e.geras.Drawer.superClass_.drawTop_.call(this)},e.geras.Drawer.prototype.drawJaggedEdge_=function(t){this.highlighter_.drawJaggedEdge_(t),e.geras.Drawer.superClass_.drawJaggedEdge_.call(this,t)},e.geras.Drawer.prototype.drawValueInput_=function(t){this.highlighter_.drawValueInput(t),e.geras.Drawer.superClass_.drawValueInput_.call(this,t)},e.geras.Drawer.prototype.drawStatementInput_=function(t){this.highlighter_.drawStatementInput(t),e.geras.Drawer.superClass_.drawStatementInput_.call(this,t)},e.geras.Drawer.prototype.drawRightSideRow_=function(t){this.highlighter_.drawRightSideRow(t),this.outlinePath_+=e.utils.svgPaths.lineOnAxis("H",t.xPos+t.width)+e.utils.svgPaths.lineOnAxis("V",t.yPos+t.height)},e.geras.Drawer.prototype.drawBottom_=function(){this.highlighter_.drawBottomRow(this.info_.bottomRow),e.geras.Drawer.superClass_.drawBottom_.call(this)},e.geras.Drawer.prototype.drawLeft_=function(){this.highlighter_.drawLeft(),e.geras.Drawer.superClass_.drawLeft_.call(this)},e.geras.Drawer.prototype.drawInlineInput_=function(t){this.highlighter_.drawInlineInput(t),e.geras.Drawer.superClass_.drawInlineInput_.call(this,t)},e.geras.Drawer.prototype.positionInlineInputConnection_=function(t){if(t.connectionModel){var r=t.xPos+t.connectionWidth+this.constants_.DARK_PATH_OFFSET;this.info_.RTL&&(r*=-1),t.connectionModel.setOffsetInBlock(r,t.centerline-t.height/2+t.connectionOffsetY+this.constants_.DARK_PATH_OFFSET)}},e.geras.Drawer.prototype.positionStatementInputConnection_=function(t){var n=t.getLastInput();if(n.connectionModel){var r=t.xPos+t.statementEdge+n.notchOffset;n.connectionModel.setOffsetInBlock(r=this.info_.RTL?-1*r:r+this.constants_.DARK_PATH_OFFSET,t.yPos+this.constants_.DARK_PATH_OFFSET)}},e.geras.Drawer.prototype.positionExternalValueConnection_=function(t){var n=t.getLastInput();if(n.connectionModel){var r=t.xPos+t.width+this.constants_.DARK_PATH_OFFSET;this.info_.RTL&&(r*=-1),n.connectionModel.setOffsetInBlock(r,t.yPos)}},e.geras.Drawer.prototype.positionNextConnection_=function(){var t=this.info_.bottomRow;if(t.connection){var n=t.connection,r=n.xPos;n.connectionModel.setOffsetInBlock((this.info_.RTL?-r:r)+this.constants_.DARK_PATH_OFFSET/2,t.baseline+this.constants_.DARK_PATH_OFFSET)}},e.geras.HighlightConstantProvider=function(t){this.constantProvider=t,this.OFFSET=.5,this.START_POINT=e.utils.svgPaths.moveBy(this.OFFSET,this.OFFSET)},e.geras.HighlightConstantProvider.prototype.init=function(){this.INSIDE_CORNER=this.makeInsideCorner(),this.OUTSIDE_CORNER=this.makeOutsideCorner(),this.PUZZLE_TAB=this.makePuzzleTab(),this.NOTCH=this.makeNotch(),this.JAGGED_TEETH=this.makeJaggedTeeth(),this.START_HAT=this.makeStartHat()},e.geras.HighlightConstantProvider.prototype.makeInsideCorner=function(){var t=this.constantProvider.CORNER_RADIUS,n=this.OFFSET,r=(1-Math.SQRT1_2)*(t+n)-n,s=e.utils.svgPaths.moveBy(r,r)+e.utils.svgPaths.arc("a","0 0,0",t,e.utils.svgPaths.point(-r-n,t-r)),u=e.utils.svgPaths.arc("a","0 0,0",t+n,e.utils.svgPaths.point(t+n,t+n)),y=e.utils.svgPaths.moveBy(r,-r)+e.utils.svgPaths.arc("a","0 0,0",t+n,e.utils.svgPaths.point(t-r,r+n));return{width:t+n,height:t,pathTop:function(x){return x?s:""},pathBottom:function(x){return x?u:y}}},e.geras.HighlightConstantProvider.prototype.makeOutsideCorner=function(){var t=this.constantProvider.CORNER_RADIUS,n=this.OFFSET,r=(1-Math.SQRT1_2)*(t-n)+n,s=e.utils.svgPaths.moveBy(r,r)+e.utils.svgPaths.arc("a","0 0,1",t-n,e.utils.svgPaths.point(t-r,-r+n)),u=e.utils.svgPaths.moveBy(n,t)+e.utils.svgPaths.arc("a","0 0,1",t-n,e.utils.svgPaths.point(t,-t+n)),y=-r,x=e.utils.svgPaths.moveBy(r,y)+e.utils.svgPaths.arc("a","0 0,1",t-n,e.utils.svgPaths.point(-r+n,-y-t));return{height:t,topLeft:function(B){return B?s:u},bottomLeft:function(){return x}}},e.geras.HighlightConstantProvider.prototype.makePuzzleTab=function(){var t=this.constantProvider.TAB_WIDTH,n=this.constantProvider.TAB_HEIGHT,r=e.utils.svgPaths.moveBy(-2,3.4-n)+e.utils.svgPaths.lineTo(-.45*t,-2.1),s=e.utils.svgPaths.lineOnAxis("v",2.5)+e.utils.svgPaths.moveBy(.97*-t,2.5)+e.utils.svgPaths.curve("q",[e.utils.svgPaths.point(.05*-t,10),e.utils.svgPaths.point(.3*t,9.5)])+e.utils.svgPaths.moveBy(.67*t,-1.9)+e.utils.svgPaths.lineOnAxis("v",2.5),u=e.utils.svgPaths.lineOnAxis("v",-1.5)+e.utils.svgPaths.moveBy(-.92*t,-.5)+e.utils.svgPaths.curve("q",[e.utils.svgPaths.point(-.19*t,-5.5),e.utils.svgPaths.point(0,-11)])+e.utils.svgPaths.moveBy(.92*t,1),y=e.utils.svgPaths.moveBy(-5,n-.7)+e.utils.svgPaths.lineTo(.46*t,-2.1);return{width:t,height:n,pathUp:function(x){return x?r:u},pathDown:function(x){return x?s:y}}},e.geras.HighlightConstantProvider.prototype.makeNotch=function(){return{pathLeft:e.utils.svgPaths.lineOnAxis("h",this.OFFSET)+this.constantProvider.NOTCH.pathLeft}},e.geras.HighlightConstantProvider.prototype.makeJaggedTeeth=function(){return{pathLeft:e.utils.svgPaths.lineTo(5.1,2.6)+e.utils.svgPaths.moveBy(-10.2,6.8)+e.utils.svgPaths.lineTo(5.1,2.6),height:12,width:10.2}},e.geras.HighlightConstantProvider.prototype.makeStartHat=function(){var t=this.constantProvider.START_HAT.height,n=e.utils.svgPaths.moveBy(25,-8.7)+e.utils.svgPaths.curve("c",[e.utils.svgPaths.point(29.7,-6.2),e.utils.svgPaths.point(57.2,-.5),e.utils.svgPaths.point(75,8.7)]),r=e.utils.svgPaths.curve("c",[e.utils.svgPaths.point(17.8,-9.2),e.utils.svgPaths.point(45.3,-14.9),e.utils.svgPaths.point(75,-8.7)])+e.utils.svgPaths.moveTo(100.5,t+.5);return{path:function(s){return s?n:r}}},e.geras.PathObject=function(t,n,r){this.constants=r,this.svgRoot=t,this.svgPathDark=e.utils.dom.createSvgElement(e.utils.Svg.PATH,{class:"blocklyPathDark",transform:"translate(1,1)"},this.svgRoot),this.svgPath=e.utils.dom.createSvgElement(e.utils.Svg.PATH,{class:"blocklyPath"},this.svgRoot),this.svgPathLight=e.utils.dom.createSvgElement(e.utils.Svg.PATH,{class:"blocklyPathLight"},this.svgRoot),this.colourDark="#000000",this.style=n},e.utils.object.inherits(e.geras.PathObject,e.blockRendering.PathObject),e.geras.PathObject.prototype.setPath=function(t){this.svgPath.setAttribute("d",t),this.svgPathDark.setAttribute("d",t)},e.geras.PathObject.prototype.setHighlightPath=function(t){this.svgPathLight.setAttribute("d",t)},e.geras.PathObject.prototype.flipRTL=function(){this.svgPath.setAttribute("transform","scale(-1 1)"),this.svgPathLight.setAttribute("transform","scale(-1 1)"),this.svgPathDark.setAttribute("transform","translate(1,1) scale(-1 1)")},e.geras.PathObject.prototype.applyColour=function(t){this.svgPathLight.style.display="",this.svgPathDark.style.display="",this.svgPathLight.setAttribute("stroke",this.style.colourTertiary),this.svgPathDark.setAttribute("fill",this.colourDark),e.geras.PathObject.superClass_.applyColour.call(this,t),this.svgPath.setAttribute("stroke","none")},e.geras.PathObject.prototype.setStyle=function(t){this.style=t,this.colourDark=e.utils.colour.blend("#000",this.style.colourPrimary,.2)||this.colourDark},e.geras.PathObject.prototype.updateHighlighted=function(t){t?(this.svgPath.setAttribute("filter","url(#"+this.constants.embossFilterId+")"),this.svgPathLight.style.display="none"):(this.svgPath.setAttribute("filter","none"),this.svgPathLight.style.display="inline")},e.geras.PathObject.prototype.updateShadow_=function(t){t&&(this.svgPathLight.style.display="none",this.svgPathDark.setAttribute("fill",this.style.colourSecondary),this.svgPath.setAttribute("stroke","none"),this.svgPath.setAttribute("fill",this.style.colourSecondary))},e.geras.PathObject.prototype.updateDisabled_=function(t){e.geras.PathObject.superClass_.updateDisabled_.call(this,t),t&&this.svgPath.setAttribute("stroke","none")},e.geras.Renderer=function(t){e.geras.Renderer.superClass_.constructor.call(this,t),this.highlightConstants_=null},e.utils.object.inherits(e.geras.Renderer,e.blockRendering.Renderer),e.geras.Renderer.prototype.init=function(t,n){e.geras.Renderer.superClass_.init.call(this,t,n),this.highlightConstants_=this.makeHighlightConstants_(),this.highlightConstants_.init()},e.geras.Renderer.prototype.refreshDom=function(t,n){e.geras.Renderer.superClass_.refreshDom.call(this,t,n),this.getHighlightConstants().init()},e.geras.Renderer.prototype.makeConstants_=function(){return new e.geras.ConstantProvider},e.geras.Renderer.prototype.makeRenderInfo_=function(t){return new e.geras.RenderInfo(this,t)},e.geras.Renderer.prototype.makeDrawer_=function(t,n){return new e.geras.Drawer(t,n)},e.geras.Renderer.prototype.makePathObject=function(t,n){return new e.geras.PathObject(t,n,this.getConstants())},e.geras.Renderer.prototype.makeHighlightConstants_=function(){return new e.geras.HighlightConstantProvider(this.getConstants())},e.geras.Renderer.prototype.getHighlightConstants=function(){return this.highlightConstants_},e.blockRendering.register("geras",e.geras.Renderer),e.thrasos={},e.thrasos.RenderInfo=function(t,n){e.thrasos.RenderInfo.superClass_.constructor.call(this,t,n)},e.utils.object.inherits(e.thrasos.RenderInfo,e.blockRendering.RenderInfo),e.thrasos.RenderInfo.prototype.getRenderer=function(){return this.renderer_},e.thrasos.RenderInfo.prototype.addElemSpacing_=function(){for(var r,t=!1,n=0;r=this.rows[n];n++)r.hasExternalInput&&(t=!0);for(n=0;r=this.rows[n];n++){var s=r.elements;r.elements=[],r.startsWithElemSpacer()&&r.elements.push(new e.blockRendering.InRowSpacer(this.constants_,this.getInRowSpacing_(null,s[0])));for(var u=0;u<s.length-1;u++){r.elements.push(s[u]);var y=this.getInRowSpacing_(s[u],s[u+1]);r.elements.push(new e.blockRendering.InRowSpacer(this.constants_,y))}r.elements.push(s[s.length-1]),r.endsWithElemSpacer()&&(y=this.getInRowSpacing_(s[s.length-1],null),t&&r.hasDummyInput&&(y+=this.constants_.TAB_WIDTH),r.elements.push(new e.blockRendering.InRowSpacer(this.constants_,y)))}},e.thrasos.RenderInfo.prototype.getInRowSpacing_=function(t,n){if(!t)return n&&e.blockRendering.Types.isField(n)&&n.isEditable?this.constants_.MEDIUM_PADDING:n&&e.blockRendering.Types.isInlineInput(n)?this.constants_.MEDIUM_LARGE_PADDING:n&&e.blockRendering.Types.isStatementInput(n)?this.constants_.STATEMENT_INPUT_PADDING_LEFT:this.constants_.LARGE_PADDING;if(!e.blockRendering.Types.isInput(t)&&!n)return e.blockRendering.Types.isField(t)&&t.isEditable?this.constants_.MEDIUM_PADDING:e.blockRendering.Types.isIcon(t)?2*this.constants_.LARGE_PADDING+1:e.blockRendering.Types.isHat(t)?this.constants_.NO_PADDING:e.blockRendering.Types.isPreviousOrNextConnection(t)?this.constants_.LARGE_PADDING:e.blockRendering.Types.isLeftRoundedCorner(t)?this.constants_.MIN_BLOCK_WIDTH:e.blockRendering.Types.isJaggedEdge(t)?this.constants_.NO_PADDING:this.constants_.LARGE_PADDING;if(e.blockRendering.Types.isInput(t)&&!n){if(e.blockRendering.Types.isExternalInput(t))return this.constants_.NO_PADDING;if(e.blockRendering.Types.isInlineInput(t))return this.constants_.LARGE_PADDING;if(e.blockRendering.Types.isStatementInput(t))return this.constants_.NO_PADDING}if(!e.blockRendering.Types.isInput(t)&&n&&e.blockRendering.Types.isInput(n)){if(e.blockRendering.Types.isField(t)&&t.isEditable){if(e.blockRendering.Types.isInlineInput(n)||e.blockRendering.Types.isExternalInput(n))return this.constants_.SMALL_PADDING}else{if(e.blockRendering.Types.isInlineInput(n)||e.blockRendering.Types.isExternalInput(n))return this.constants_.MEDIUM_LARGE_PADDING;if(e.blockRendering.Types.isStatementInput(n))return this.constants_.LARGE_PADDING}return this.constants_.LARGE_PADDING-1}if(e.blockRendering.Types.isIcon(t)&&n&&!e.blockRendering.Types.isInput(n))return this.constants_.LARGE_PADDING;if(e.blockRendering.Types.isInlineInput(t)&&n&&e.blockRendering.Types.isField(n))return n.isEditable?this.constants_.MEDIUM_PADDING:this.constants_.LARGE_PADDING;if(e.blockRendering.Types.isLeftSquareCorner(t)&&n){if(e.blockRendering.Types.isHat(n))return this.constants_.NO_PADDING;if(e.blockRendering.Types.isPreviousConnection(n)||e.blockRendering.Types.isNextConnection(n))return n.notchOffset}return e.blockRendering.Types.isLeftRoundedCorner(t)&&n?n.notchOffset-this.constants_.CORNER_RADIUS:e.blockRendering.Types.isField(t)&&n&&e.blockRendering.Types.isField(n)&&t.isEditable==n.isEditable||n&&e.blockRendering.Types.isJaggedEdge(n)?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING},e.thrasos.RenderInfo.prototype.getSpacerRowHeight_=function(t,n){return e.blockRendering.Types.isTopRow(t)&&e.blockRendering.Types.isBottomRow(n)?this.constants_.EMPTY_BLOCK_SPACER_HEIGHT:e.blockRendering.Types.isTopRow(t)||e.blockRendering.Types.isBottomRow(n)?this.constants_.NO_PADDING:t.hasExternalInput&&n.hasExternalInput?this.constants_.LARGE_PADDING:!t.hasStatement&&n.hasStatement?this.constants_.BETWEEN_STATEMENT_PADDING_Y:t.hasStatement&&n.hasStatement||t.hasDummyInput||n.hasDummyInput?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING},e.thrasos.RenderInfo.prototype.getElemCenterline_=function(t,n){if(e.blockRendering.Types.isSpacer(n))return t.yPos+n.height/2;if(e.blockRendering.Types.isBottomRow(t))return t=t.yPos+t.height-t.descenderHeight,e.blockRendering.Types.isNextConnection(n)?t+n.height/2:t-n.height/2;if(e.blockRendering.Types.isTopRow(t))return e.blockRendering.Types.isHat(n)?t.capline-n.height/2:t.capline+n.height/2;var r=t.yPos;return e.blockRendering.Types.isField(n)&&t.hasStatement?r+(this.constants_.TALL_INPUT_FIELD_OFFSET_Y+n.height/2):r+t.height/2},e.thrasos.RenderInfo.prototype.finalize_=function(){for(var s,t=0,n=0,r=0;s=this.rows[r];r++){s.yPos=n,s.xPos=this.startX,n+=s.height,t=Math.max(t,s.widthWithConnectedBlocks);var u=n-this.topRow.ascenderHeight;s==this.bottomRow&&u<this.constants_.MIN_BLOCK_HEIGHT&&(this.bottomRow.height+=u=this.constants_.MIN_BLOCK_HEIGHT-u,n+=u),this.recordElemPositions_(s)}this.outputConnection&&this.block_.nextConnection&&this.block_.nextConnection.isConnected()&&(t=Math.max(t,this.block_.nextConnection.targetBlock().getHeightWidth().width)),this.bottomRow.baseline=n-this.bottomRow.descenderHeight,this.widthWithChildren=t+this.startX,this.height=n,this.startY=this.topRow.capline},e.thrasos.Renderer=function(t){e.thrasos.Renderer.superClass_.constructor.call(this,t)},e.utils.object.inherits(e.thrasos.Renderer,e.blockRendering.Renderer),e.thrasos.Renderer.prototype.makeRenderInfo_=function(t){return new e.thrasos.RenderInfo(this,t)},e.blockRendering.register("thrasos",e.thrasos.Renderer),e.zelos={},e.zelos.ConstantProvider=function(){e.zelos.ConstantProvider.superClass_.constructor.call(this),this.SMALL_PADDING=this.GRID_UNIT=4,this.MEDIUM_PADDING=2*this.GRID_UNIT,this.MEDIUM_LARGE_PADDING=3*this.GRID_UNIT,this.LARGE_PADDING=4*this.GRID_UNIT,this.CORNER_RADIUS=1*this.GRID_UNIT,this.NOTCH_WIDTH=9*this.GRID_UNIT,this.NOTCH_HEIGHT=2*this.GRID_UNIT,this.STATEMENT_INPUT_NOTCH_OFFSET=this.NOTCH_OFFSET_LEFT=3*this.GRID_UNIT,this.MIN_BLOCK_WIDTH=2*this.GRID_UNIT,this.MIN_BLOCK_HEIGHT=12*this.GRID_UNIT,this.EMPTY_STATEMENT_INPUT_HEIGHT=6*this.GRID_UNIT,this.TAB_OFFSET_FROM_TOP=0,this.TOP_ROW_MIN_HEIGHT=this.CORNER_RADIUS,this.TOP_ROW_PRECEDES_STATEMENT_MIN_HEIGHT=this.LARGE_PADDING,this.BOTTOM_ROW_MIN_HEIGHT=this.CORNER_RADIUS,this.BOTTOM_ROW_AFTER_STATEMENT_MIN_HEIGHT=6*this.GRID_UNIT,this.STATEMENT_BOTTOM_SPACER=-this.NOTCH_HEIGHT,this.STATEMENT_INPUT_SPACER_MIN_WIDTH=40*this.GRID_UNIT,this.STATEMENT_INPUT_PADDING_LEFT=4*this.GRID_UNIT,this.EMPTY_INLINE_INPUT_PADDING=4*this.GRID_UNIT,this.EMPTY_INLINE_INPUT_HEIGHT=8*this.GRID_UNIT,this.DUMMY_INPUT_MIN_HEIGHT=8*this.GRID_UNIT,this.DUMMY_INPUT_SHADOW_MIN_HEIGHT=6*this.GRID_UNIT,this.CURSOR_WS_WIDTH=20*this.GRID_UNIT,this.CURSOR_COLOUR="#ffa200",this.CURSOR_RADIUS=5,this.JAGGED_TEETH_WIDTH=this.JAGGED_TEETH_HEIGHT=0,this.START_HAT_HEIGHT=22,this.START_HAT_WIDTH=96,this.SHAPES={HEXAGONAL:1,ROUND:2,SQUARE:3,PUZZLE:4,NOTCH:5},this.SHAPE_IN_SHAPE_PADDING={1:{0:5*this.GRID_UNIT,1:2*this.GRID_UNIT,2:5*this.GRID_UNIT,3:5*this.GRID_UNIT},2:{0:3*this.GRID_UNIT,1:3*this.GRID_UNIT,2:1*this.GRID_UNIT,3:2*this.GRID_UNIT},3:{0:2*this.GRID_UNIT,1:2*this.GRID_UNIT,2:2*this.GRID_UNIT,3:2*this.GRID_UNIT}},this.FULL_BLOCK_FIELDS=!0,this.FIELD_TEXT_FONTSIZE=3*this.GRID_UNIT,this.FIELD_TEXT_FONTWEIGHT="bold",this.FIELD_TEXT_FONTFAMILY='"Helvetica Neue", "Segoe UI", Helvetica, sans-serif',this.FIELD_BORDER_RECT_RADIUS=this.CORNER_RADIUS,this.FIELD_BORDER_RECT_X_PADDING=2*this.GRID_UNIT,this.FIELD_BORDER_RECT_Y_PADDING=1.625*this.GRID_UNIT,this.FIELD_BORDER_RECT_HEIGHT=8*this.GRID_UNIT,this.FIELD_DROPDOWN_BORDER_RECT_HEIGHT=8*this.GRID_UNIT,this.FIELD_DROPDOWN_SVG_ARROW=this.FIELD_DROPDOWN_COLOURED_DIV=this.FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW=!0,this.FIELD_DROPDOWN_SVG_ARROW_PADDING=this.FIELD_BORDER_RECT_X_PADDING,this.FIELD_COLOUR_FULL_BLOCK=this.FIELD_TEXTINPUT_BOX_SHADOW=!0,this.FIELD_COLOUR_DEFAULT_WIDTH=2*this.GRID_UNIT,this.FIELD_COLOUR_DEFAULT_HEIGHT=4*this.GRID_UNIT,this.FIELD_CHECKBOX_X_OFFSET=1*this.GRID_UNIT,this.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH=12*this.GRID_UNIT,this.SELECTED_GLOW_COLOUR="#fff200",this.SELECTED_GLOW_SIZE=.5,this.REPLACEMENT_GLOW_COLOUR="#fff200",this.REPLACEMENT_GLOW_SIZE=2,this.selectedGlowFilterId="",this.selectedGlowFilter_=null,this.replacementGlowFilterId="",this.replacementGlowFilter_=null},e.utils.object.inherits(e.zelos.ConstantProvider,e.blockRendering.ConstantProvider),e.zelos.ConstantProvider.prototype.setFontConstants_=function(t){e.zelos.ConstantProvider.superClass_.setFontConstants_.call(this,t),this.FIELD_DROPDOWN_BORDER_RECT_HEIGHT=this.FIELD_BORDER_RECT_HEIGHT=this.FIELD_TEXT_HEIGHT+2*this.FIELD_BORDER_RECT_Y_PADDING},e.zelos.ConstantProvider.prototype.init=function(){e.zelos.ConstantProvider.superClass_.init.call(this),this.HEXAGONAL=this.makeHexagonal(),this.ROUNDED=this.makeRounded(),this.SQUARED=this.makeSquared(),this.STATEMENT_INPUT_NOTCH_OFFSET=this.NOTCH_OFFSET_LEFT+this.INSIDE_CORNERS.rightWidth},e.zelos.ConstantProvider.prototype.setDynamicProperties_=function(t){e.zelos.ConstantProvider.superClass_.setDynamicProperties_.call(this,t),this.SELECTED_GLOW_COLOUR=t.getComponentStyle("selectedGlowColour")||this.SELECTED_GLOW_COLOUR;var n=Number(t.getComponentStyle("selectedGlowSize"));this.SELECTED_GLOW_SIZE=n&&!isNaN(n)?n:this.SELECTED_GLOW_SIZE,this.REPLACEMENT_GLOW_COLOUR=t.getComponentStyle("replacementGlowColour")||this.REPLACEMENT_GLOW_COLOUR,this.REPLACEMENT_GLOW_SIZE=(t=Number(t.getComponentStyle("replacementGlowSize")))&&!isNaN(t)?t:this.REPLACEMENT_GLOW_SIZE},e.zelos.ConstantProvider.prototype.dispose=function(){e.zelos.ConstantProvider.superClass_.dispose.call(this),this.selectedGlowFilter_&&e.utils.dom.removeNode(this.selectedGlowFilter_),this.replacementGlowFilter_&&e.utils.dom.removeNode(this.replacementGlowFilter_)},e.zelos.ConstantProvider.prototype.makeStartHat=function(){var t=this.START_HAT_HEIGHT,n=this.START_HAT_WIDTH;return{height:t,width:n,path:e.utils.svgPaths.curve("c",[e.utils.svgPaths.point(25,-t),e.utils.svgPaths.point(71,-t),e.utils.svgPaths.point(n,0)])}},e.zelos.ConstantProvider.prototype.makeHexagonal=function(){function t(r,s,u){var y=r/2;return e.utils.svgPaths.lineTo(-(u=u?-1:1)*(y=y>n?n:y),r=(s?-1:1)*r/2)+e.utils.svgPaths.lineTo(u*y,r)}var n=this.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH;return{type:this.SHAPES.HEXAGONAL,isDynamic:!0,width:function(r){return(r/=2)>n?n:r},height:function(r){return r},connectionOffsetY:function(r){return r/2},connectionOffsetX:function(r){return-r},pathDown:function(r){return t(r,!1,!1)},pathUp:function(r){return t(r,!0,!1)},pathRightDown:function(r){return t(r,!1,!0)},pathRightUp:function(r){return t(r,!1,!0)}}},e.zelos.ConstantProvider.prototype.makeRounded=function(){function t(s,u,y){var x=s>r?s-r:0;return e.utils.svgPaths.arc("a","0 0,1",s=(s>r?r:s)/2,e.utils.svgPaths.point((u?-1:1)*s,(u?-1:1)*s))+e.utils.svgPaths.lineOnAxis("v",(y?1:-1)*x)+e.utils.svgPaths.arc("a","0 0,1",s,e.utils.svgPaths.point((u?1:-1)*s,(u?-1:1)*s))}var n=this.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH,r=2*n;return{type:this.SHAPES.ROUND,isDynamic:!0,width:function(s){return(s/=2)>n?n:s},height:function(s){return s},connectionOffsetY:function(s){return s/2},connectionOffsetX:function(s){return-s},pathDown:function(s){return t(s,!1,!1)},pathUp:function(s){return t(s,!0,!1)},pathRightDown:function(s){return t(s,!1,!0)},pathRightUp:function(s){return t(s,!1,!0)}}},e.zelos.ConstantProvider.prototype.makeSquared=function(){function t(r,s,u){return r-=2*n,e.utils.svgPaths.arc("a","0 0,1",n,e.utils.svgPaths.point((s?-1:1)*n,(s?-1:1)*n))+e.utils.svgPaths.lineOnAxis("v",(u?1:-1)*r)+e.utils.svgPaths.arc("a","0 0,1",n,e.utils.svgPaths.point((s?1:-1)*n,(s?-1:1)*n))}var n=this.CORNER_RADIUS;return{type:this.SHAPES.SQUARE,isDynamic:!0,width:function(r){return n},height:function(r){return r},connectionOffsetY:function(r){return r/2},connectionOffsetX:function(r){return-r},pathDown:function(r){return t(r,!1,!1)},pathUp:function(r){return t(r,!0,!1)},pathRightDown:function(r){return t(r,!1,!0)},pathRightUp:function(r){return t(r,!1,!0)}}},e.zelos.ConstantProvider.prototype.shapeFor=function(t){var n=t.getCheck();switch(!n&&t.targetConnection&&(n=t.targetConnection.getCheck()),t.type){case e.connectionTypes.INPUT_VALUE:case e.connectionTypes.OUTPUT_VALUE:if(null!=(t=t.getSourceBlock().getOutputShape()))switch(t){case this.SHAPES.HEXAGONAL:return this.HEXAGONAL;case this.SHAPES.ROUND:return this.ROUNDED;case this.SHAPES.SQUARE:return this.SQUARED}return n&&-1!=n.indexOf("Boolean")?this.HEXAGONAL:(n&&-1!=n.indexOf("Number")||n&&n.indexOf("String"),this.ROUNDED);case e.connectionTypes.PREVIOUS_STATEMENT:case e.connectionTypes.NEXT_STATEMENT:return this.NOTCH;default:throw Error("Unknown type")}},e.zelos.ConstantProvider.prototype.makeNotch=function(){function t(at){return e.utils.svgPaths.curve("c",[e.utils.svgPaths.point(at*u/2,0),e.utils.svgPaths.point(at*u*3/4,x/2),e.utils.svgPaths.point(at*u,x)])+e.utils.svgPaths.line([e.utils.svgPaths.point(at*u,y)])+e.utils.svgPaths.curve("c",[e.utils.svgPaths.point(at*u/4,x/2),e.utils.svgPaths.point(at*u/2,x),e.utils.svgPaths.point(at*u,x)])+e.utils.svgPaths.lineOnAxis("h",at*s)+e.utils.svgPaths.curve("c",[e.utils.svgPaths.point(at*u/2,0),e.utils.svgPaths.point(at*u*3/4,-x/2),e.utils.svgPaths.point(at*u,-x)])+e.utils.svgPaths.line([e.utils.svgPaths.point(at*u,-y)])+e.utils.svgPaths.curve("c",[e.utils.svgPaths.point(at*u/4,-x/2),e.utils.svgPaths.point(at*u/2,-x),e.utils.svgPaths.point(at*u,-x)])}var n=this.NOTCH_WIDTH,r=this.NOTCH_HEIGHT,s=n/3,u=s/3,y=r/2,x=y/2,B=t(1),Q=t(-1);return{type:this.SHAPES.NOTCH,width:n,height:r,pathLeft:B,pathRight:Q}},e.zelos.ConstantProvider.prototype.makeInsideCorners=function(){var t=this.CORNER_RADIUS,n=e.utils.svgPaths.arc("a","0 0,0",t,e.utils.svgPaths.point(-t,t)),r=e.utils.svgPaths.arc("a","0 0,1",t,e.utils.svgPaths.point(-t,t));return{width:t,height:t,pathTop:n,pathBottom:e.utils.svgPaths.arc("a","0 0,0",t,e.utils.svgPaths.point(t,t)),rightWidth:t,rightHeight:t,pathTopRight:r,pathBottomRight:e.utils.svgPaths.arc("a","0 0,1",t,e.utils.svgPaths.point(t,t))}},e.zelos.ConstantProvider.prototype.generateSecondaryColour_=function(t){return e.utils.colour.blend("#000",t,.15)||t},e.zelos.ConstantProvider.prototype.generateTertiaryColour_=function(t){return e.utils.colour.blend("#000",t,.25)||t},e.zelos.ConstantProvider.prototype.createDom=function(t,n,r){e.zelos.ConstantProvider.superClass_.createDom.call(this,t,n,r),t=e.utils.dom.createSvgElement(e.utils.Svg.DEFS,{},t),n=e.utils.dom.createSvgElement(e.utils.Svg.FILTER,{id:"blocklySelectedGlowFilter"+this.randomIdentifier,height:"160%",width:"180%",y:"-30%",x:"-40%"},t),e.utils.dom.createSvgElement(e.utils.Svg.FEGAUSSIANBLUR,{in:"SourceGraphic",stdDeviation:this.SELECTED_GLOW_SIZE},n),r=e.utils.dom.createSvgElement(e.utils.Svg.FECOMPONENTTRANSFER,{result:"outBlur"},n),e.utils.dom.createSvgElement(e.utils.Svg.FEFUNCA,{type:"table",tableValues:"0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1"},r),e.utils.dom.createSvgElement(e.utils.Svg.FEFLOOD,{"flood-color":this.SELECTED_GLOW_COLOUR,"flood-opacity":1,result:"outColor"},n),e.utils.dom.createSvgElement(e.utils.Svg.FECOMPOSITE,{in:"outColor",in2:"outBlur",operator:"in",result:"outGlow"},n),this.selectedGlowFilterId=n.id,this.selectedGlowFilter_=n,t=e.utils.dom.createSvgElement(e.utils.Svg.FILTER,{id:"blocklyReplacementGlowFilter"+this.randomIdentifier,height:"160%",width:"180%",y:"-30%",x:"-40%"},t),e.utils.dom.createSvgElement(e.utils.Svg.FEGAUSSIANBLUR,{in:"SourceGraphic",stdDeviation:this.REPLACEMENT_GLOW_SIZE},t),n=e.utils.dom.createSvgElement(e.utils.Svg.FECOMPONENTTRANSFER,{result:"outBlur"},t),e.utils.dom.createSvgElement(e.utils.Svg.FEFUNCA,{type:"table",tableValues:"0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1"},n),e.utils.dom.createSvgElement(e.utils.Svg.FEFLOOD,{"flood-color":this.REPLACEMENT_GLOW_COLOUR,"flood-opacity":1,result:"outColor"},t),e.utils.dom.createSvgElement(e.utils.Svg.FECOMPOSITE,{in:"outColor",in2:"outBlur",operator:"in",result:"outGlow"},t),e.utils.dom.createSvgElement(e.utils.Svg.FECOMPOSITE,{in:"SourceGraphic",in2:"outGlow",operator:"over"},t),this.replacementGlowFilterId=t.id,this.replacementGlowFilter_=t},e.zelos.ConstantProvider.prototype.getCSS_=function(t){return[t+" .blocklyText,",t+" .blocklyFlyoutLabelText {","font: "+this.FIELD_TEXT_FONTWEIGHT+" "+this.FIELD_TEXT_FONTSIZE+"pt "+this.FIELD_TEXT_FONTFAMILY+";","}",t+" .blocklyText {","fill: #fff;","}",t+" .blocklyNonEditableText>rect:not(.blocklyDropdownRect),",t+" .blocklyEditableText>rect:not(.blocklyDropdownRect) {","fill: "+this.FIELD_BORDER_RECT_COLOUR+";","}",t+" .blocklyNonEditableText>text,",t+" .blocklyEditableText>text,",t+" .blocklyNonEditableText>g>text,",t+" .blocklyEditableText>g>text {","fill: #575E75;","}",t+" .blocklyFlyoutLabelText {","fill: #575E75;","}",t+" .blocklyText.blocklyBubbleText {","fill: #575E75;","}",t+" .blocklyDraggable:not(.blocklyDisabled)"," .blocklyEditableText:not(.editing):hover>rect,",t+" .blocklyDraggable:not(.blocklyDisabled)"," .blocklyEditableText:not(.editing):hover>.blocklyPath {","stroke: #fff;","stroke-width: 2;","}",t+" .blocklyHtmlInput {","font-family: "+this.FIELD_TEXT_FONTFAMILY+";","font-weight: "+this.FIELD_TEXT_FONTWEIGHT+";","color: #575E75;","}",t+" .blocklyDropdownText {","fill: #fff !important;","}",t+".blocklyWidgetDiv .goog-menuitem,",t+".blocklyDropDownDiv .goog-menuitem {","font-family: "+this.FIELD_TEXT_FONTFAMILY+";","}",t+".blocklyDropDownDiv .goog-menuitem-content {","color: #fff;","}",t+" .blocklyHighlightedConnectionPath {","stroke: "+this.SELECTED_GLOW_COLOUR+";","}",t+" .blocklyDisabled > .blocklyOutlinePath {","fill: url(#blocklyDisabledPattern"+this.randomIdentifier+")","}",t+" .blocklyInsertionMarker>.blocklyPath {","fill-opacity: "+this.INSERTION_MARKER_OPACITY+";","stroke: none;","}"]},e.zelos.TopRow=function(t){e.zelos.TopRow.superClass_.constructor.call(this,t)},e.utils.object.inherits(e.zelos.TopRow,e.blockRendering.TopRow),e.zelos.TopRow.prototype.endsWithElemSpacer=function(){return!1},e.zelos.TopRow.prototype.hasLeftSquareCorner=function(t){return!!t.outputConnection||(t.hat?"cap"===t.hat:this.constants_.ADD_START_HATS)&&!t.outputConnection&&!t.previousConnection},e.zelos.TopRow.prototype.hasRightSquareCorner=function(t){return!!t.outputConnection&&!t.statementInputCount&&!t.nextConnection},e.zelos.BottomRow=function(t){e.zelos.BottomRow.superClass_.constructor.call(this,t)},e.utils.object.inherits(e.zelos.BottomRow,e.blockRendering.BottomRow),e.zelos.BottomRow.prototype.endsWithElemSpacer=function(){return!1},e.zelos.BottomRow.prototype.hasLeftSquareCorner=function(t){return!!t.outputConnection},e.zelos.BottomRow.prototype.hasRightSquareCorner=function(t){return!!t.outputConnection&&!t.statementInputCount&&!t.nextConnection},e.zelos.RightConnectionShape=function(t){e.zelos.RightConnectionShape.superClass_.constructor.call(this,t),this.type|=e.blockRendering.Types.getType("RIGHT_CONNECTION"),this.width=this.height=0},e.utils.object.inherits(e.zelos.RightConnectionShape,e.blockRendering.Measurable),e.zelos.RenderInfo=function(t,n){e.zelos.RenderInfo.superClass_.constructor.call(this,t,n),this.topRow=new e.zelos.TopRow(this.constants_),this.bottomRow=new e.zelos.BottomRow(this.constants_),this.isInline=!0,this.isMultiRow=!n.getInputsInline()||n.isCollapsed(),this.hasStatementInput=0<n.statementInputCount,this.rightSide=this.outputConnection?new e.zelos.RightConnectionShape(this.constants_):null},e.utils.object.inherits(e.zelos.RenderInfo,e.blockRendering.RenderInfo),e.zelos.RenderInfo.prototype.getRenderer=function(){return this.renderer_},e.zelos.RenderInfo.prototype.measure=function(){this.createRows_(),this.addElemSpacing_(),this.addRowSpacing_(),this.adjustXPosition_(),this.computeBounds_(),this.alignRowElements_(),this.finalize_()},e.zelos.RenderInfo.prototype.shouldStartNewRow_=function(t,n){return!!n&&(t.type==e.inputTypes.STATEMENT||n.type==e.inputTypes.STATEMENT||(t.type==e.inputTypes.VALUE||t.type==e.inputTypes.DUMMY)&&(!this.isInline||this.isMultiRow))},e.zelos.RenderInfo.prototype.getDesiredRowWidth_=function(t){return t.hasStatement?this.width-this.startX-(this.constants_.INSIDE_CORNERS.rightWidth||0):e.zelos.RenderInfo.superClass_.getDesiredRowWidth_.call(this,t)},e.zelos.RenderInfo.prototype.getInRowSpacing_=function(t,n){return t&&n||!this.outputConnection||!this.outputConnection.isDynamicShape||this.hasStatementInput||this.bottomRow.hasNextConnection?!t&&n&&e.blockRendering.Types.isStatementInput(n)?this.constants_.STATEMENT_INPUT_PADDING_LEFT:t&&e.blockRendering.Types.isLeftRoundedCorner(t)&&n&&(e.blockRendering.Types.isPreviousConnection(n)||e.blockRendering.Types.isNextConnection(n))?n.notchOffset-this.constants_.CORNER_RADIUS:t&&e.blockRendering.Types.isLeftSquareCorner(t)&&n&&e.blockRendering.Types.isHat(n)?this.constants_.NO_PADDING:this.constants_.MEDIUM_PADDING:this.constants_.NO_PADDING},e.zelos.RenderInfo.prototype.getSpacerRowHeight_=function(t,n){if(e.blockRendering.Types.isTopRow(t)&&e.blockRendering.Types.isBottomRow(n))return this.constants_.EMPTY_BLOCK_SPACER_HEIGHT;var r=e.blockRendering.Types.isInputRow(t)&&t.hasStatement,s=e.blockRendering.Types.isInputRow(n)&&n.hasStatement;return s||r?(t=Math.max(this.constants_.NOTCH_HEIGHT,this.constants_.INSIDE_CORNERS.rightHeight||0),s&&r?Math.max(t,this.constants_.DUMMY_INPUT_MIN_HEIGHT):t):e.blockRendering.Types.isTopRow(t)?t.hasPreviousConnection||this.outputConnection&&!this.hasStatementInput?this.constants_.NO_PADDING:Math.abs(this.constants_.NOTCH_HEIGHT-this.constants_.CORNER_RADIUS):e.blockRendering.Types.isBottomRow(n)?this.outputConnection?!n.hasNextConnection&&this.hasStatementInput?Math.abs(this.constants_.NOTCH_HEIGHT-this.constants_.CORNER_RADIUS):this.constants_.NO_PADDING:Math.max(this.topRow.minHeight,Math.max(this.constants_.NOTCH_HEIGHT,this.constants_.CORNER_RADIUS))-this.constants_.CORNER_RADIUS:this.constants_.MEDIUM_PADDING},e.zelos.RenderInfo.prototype.getSpacerRowWidth_=function(t,n){var r=this.width-this.startX;return e.blockRendering.Types.isInputRow(t)&&t.hasStatement||e.blockRendering.Types.isInputRow(n)&&n.hasStatement?Math.max(r,this.constants_.STATEMENT_INPUT_SPACER_MIN_WIDTH):r},e.zelos.RenderInfo.prototype.getElemCenterline_=function(t,n){if(t.hasStatement&&!e.blockRendering.Types.isSpacer(n)&&!e.blockRendering.Types.isStatementInput(n))return t.yPos+this.constants_.EMPTY_STATEMENT_INPUT_HEIGHT/2;if(e.blockRendering.Types.isInlineInput(n)){var r=n.connectedBlock;if(r&&r.outputConnection&&r.nextConnection)return t.yPos+r.height/2}return e.zelos.RenderInfo.superClass_.getElemCenterline_.call(this,t,n)},e.zelos.RenderInfo.prototype.addInput_=function(t,n){t.type==e.inputTypes.DUMMY&&n.hasDummyInput&&n.align==e.constants.ALIGN.LEFT&&t.align==e.constants.ALIGN.RIGHT&&(n.rightAlignedDummyInput=t),e.zelos.RenderInfo.superClass_.addInput_.call(this,t,n)},e.zelos.RenderInfo.prototype.addAlignmentPadding_=function(t,n){if(t.rightAlignedDummyInput){for(var r,u,s=0;(u=t.elements[s])&&(e.blockRendering.Types.isSpacer(u)&&(r=u),!e.blockRendering.Types.isField(u)||u.parentInput!=t.rightAlignedDummyInput);s++);if(r)return r.width+=n,void(t.width+=n)}e.zelos.RenderInfo.superClass_.addAlignmentPadding_.call(this,t,n)},e.zelos.RenderInfo.prototype.adjustXPosition_=function(){for(var t=this.constants_.NOTCH_OFFSET_LEFT+this.constants_.NOTCH_WIDTH,n=t,r=2;r<this.rows.length-1;r+=2){var s=this.rows[r-1],u=this.rows[r],y=this.rows[r+1];if(s=2==r?!!this.topRow.hasPreviousConnection:!!s.followsStatement,y=r+2>=this.rows.length-1?!!this.bottomRow.hasNextConnection:!!y.precedesStatement,e.blockRendering.Types.isInputRow(u)&&u.hasStatement)u.measure(),n=u.width-u.getLastInput().width+t;else if(s&&(2==r||y)&&e.blockRendering.Types.isInputRow(u)&&!u.hasStatement){y=u.xPos,s=null;for(var B,x=0;B=u.elements[x];x++)e.blockRendering.Types.isSpacer(B)&&(s=B),!(s&&(e.blockRendering.Types.isField(B)||e.blockRendering.Types.isInput(B))&&y<n)||e.blockRendering.Types.isField(B)&&(B.field instanceof e.FieldLabel||B.field instanceof e.FieldImage)||(s.width+=n-y),y+=B.width}}},e.zelos.RenderInfo.prototype.finalizeOutputConnection_=function(){if(this.outputConnection&&this.outputConnection.isDynamicShape){for(var r,t=0,n=0;r=this.rows[n];n++)r.yPos=t,t+=r.height;this.height=t,t=this.outputConnection.shape.height(n=this.bottomRow.hasNextConnection?this.height-this.bottomRow.descenderHeight:this.height),n=this.outputConnection.shape.width(n),this.outputConnection.height=t,this.outputConnection.width=n,this.outputConnection.startX=n,this.outputConnection.connectionOffsetY=this.outputConnection.shape.connectionOffsetY(t),this.outputConnection.connectionOffsetX=this.outputConnection.shape.connectionOffsetX(n),r=0,this.hasStatementInput||this.bottomRow.hasNextConnection||(r=n,this.rightSide.height=t,this.rightSide.width=r,this.rightSide.centerline=t/2,this.rightSide.xPos=this.width+r),this.startX=n,this.width+=n+r,this.widthWithChildren+=n+r}},e.zelos.RenderInfo.prototype.finalizeHorizontalAlignment_=function(){if(this.outputConnection&&!this.hasStatementInput&&!this.bottomRow.hasNextConnection){for(var r,t=0,n=0;r=this.rows[n];n++)if(e.blockRendering.Types.isInputRow(r)){t=r.elements[r.elements.length-2];var s=this.getNegativeSpacing_(r.elements[1]),u=this.getNegativeSpacing_(t),y=this.constants_.MIN_BLOCK_WIDTH+2*this.outputConnection.width;this.width-(t=s+u)<y&&(s=(t=this.width-y)/2,u=t/2),r.elements.unshift(new e.blockRendering.InRowSpacer(this.constants_,-s)),r.elements.push(new e.blockRendering.InRowSpacer(this.constants_,-u))}if(t)for(this.width-=t,this.widthWithChildren-=t,this.rightSide.xPos-=t,n=0;r=this.rows[n];n++)e.blockRendering.Types.isTopOrBottomRow(r)&&(r.elements[1].width-=t,r.elements[1].widthWithConnectedBlocks-=t),r.width-=t,r.widthWithConnectedBlocks-=t}},e.zelos.RenderInfo.prototype.getNegativeSpacing_=function(t){if(!t)return 0;var n=this.outputConnection.width,r=this.outputConnection.shape.type,s=this.constants_;if(this.isMultiRow&&1<this.inputRows.length)return r===s.SHAPES.ROUND?n-(r=this.height/2>(r=this.constants_.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH)?r:this.height/2)*(1-Math.sin(Math.acos((r-this.constants_.SMALL_PADDING)/r))):0;if(e.blockRendering.Types.isInlineInput(t)){var u=t.connectedBlock;return t=u?u.pathObject.outputShapeType:t.shape.type,u&&u.outputConnection&&(u.statementInputCount||u.nextConnection)||r==s.SHAPES.HEXAGONAL&&r!=t?0:n-this.constants_.SHAPE_IN_SHAPE_PADDING[r][t]}return e.blockRendering.Types.isField(t)?r==s.SHAPES.ROUND&&t.field instanceof e.FieldTextInput?n-2.75*s.GRID_UNIT:n-this.constants_.SHAPE_IN_SHAPE_PADDING[r][0]:e.blockRendering.Types.isIcon(t)?this.constants_.SMALL_PADDING:0},e.zelos.RenderInfo.prototype.finalizeVerticalAlignment_=function(){if(!this.outputConnection)for(var t=2;t<this.rows.length-1;t+=2){var n=this.rows[t-1],r=this.rows[t],s=this.rows[t+1],u=2==t,y=t+2>=this.rows.length-1?!!this.bottomRow.hasNextConnection:!!s.precedesStatement;if(u?this.topRow.hasPreviousConnection:n.followsStatement){var x=3==r.elements.length&&(r.elements[1].field instanceof e.FieldLabel||r.elements[1].field instanceof e.FieldImage);if(!u&&x)n.height-=this.constants_.SMALL_PADDING,s.height-=this.constants_.SMALL_PADDING,r.height-=this.constants_.MEDIUM_PADDING;else if(u||y){if(y){for(u=!1,y=0;x=r.elements[y];y++)if(e.blockRendering.Types.isInlineInput(x)&&x.connectedBlock&&!x.connectedBlock.isShadow()&&40<=x.connectedBlock.getHeightWidth().height){u=!0;break}u&&(n.height-=this.constants_.SMALL_PADDING,s.height-=this.constants_.SMALL_PADDING)}}else n.height+=this.constants_.SMALL_PADDING}}},e.zelos.RenderInfo.prototype.finalize_=function(){this.finalizeOutputConnection_(),this.finalizeHorizontalAlignment_(),this.finalizeVerticalAlignment_(),e.zelos.RenderInfo.superClass_.finalize_.call(this),this.rightSide&&(this.widthWithChildren+=this.rightSide.width)},e.zelos.Drawer=function(t,n){e.zelos.Drawer.superClass_.constructor.call(this,t,n)},e.utils.object.inherits(e.zelos.Drawer,e.blockRendering.Drawer),e.zelos.Drawer.prototype.draw=function(){var t=this.block_.pathObject;t.beginDrawing(),this.hideHiddenIcons_(),this.drawOutline_(),this.drawInternals_(),t.setPath(this.outlinePath_+"\n"+this.inlinePath_),this.info_.RTL&&t.flipRTL(),e.blockRendering.useDebugger&&this.block_.renderingDebugger.drawDebug(this.block_,this.info_),this.recordSizeOnBlock_(),this.info_.outputConnection&&(t.outputShapeType=this.info_.outputConnection.shape.type),t.endDrawing()},e.zelos.Drawer.prototype.drawOutline_=function(){this.info_.outputConnection&&this.info_.outputConnection.isDynamicShape&&!this.info_.hasStatementInput&&!this.info_.bottomRow.hasNextConnection?(this.drawFlatTop_(),this.drawRightDynamicConnection_(),this.drawFlatBottom_(),this.drawLeftDynamicConnection_()):e.zelos.Drawer.superClass_.drawOutline_.call(this)},e.zelos.Drawer.prototype.drawLeft_=function(){this.info_.outputConnection&&this.info_.outputConnection.isDynamicShape?this.drawLeftDynamicConnection_():e.zelos.Drawer.superClass_.drawLeft_.call(this)},e.zelos.Drawer.prototype.drawRightSideRow_=function(t){if(!(0>=t.height))if(t.precedesStatement||t.followsStatement){var n=this.constants_.INSIDE_CORNERS.rightHeight;this.outlinePath_+=(t.followsStatement?this.constants_.INSIDE_CORNERS.pathBottomRight:"")+(0<(n=t.height-(t.precedesStatement?n:0))?e.utils.svgPaths.lineOnAxis("V",t.yPos+n):"")+(t.precedesStatement?this.constants_.INSIDE_CORNERS.pathTopRight:"")}else this.outlinePath_+=e.utils.svgPaths.lineOnAxis("V",t.yPos+t.height)},e.zelos.Drawer.prototype.drawRightDynamicConnection_=function(){this.outlinePath_+=this.info_.outputConnection.shape.pathRightDown(this.info_.outputConnection.height)},e.zelos.Drawer.prototype.drawLeftDynamicConnection_=function(){this.positionOutputConnection_(),this.outlinePath_+=this.info_.outputConnection.shape.pathUp(this.info_.outputConnection.height),this.outlinePath_+="z"},e.zelos.Drawer.prototype.drawFlatTop_=function(){var t=this.info_.topRow;this.positionPreviousConnection_(),this.outlinePath_+=e.utils.svgPaths.moveBy(t.xPos,this.info_.startY),this.outlinePath_+=e.utils.svgPaths.lineOnAxis("h",t.width)},e.zelos.Drawer.prototype.drawFlatBottom_=function(){var t=this.info_.bottomRow;this.positionNextConnection_(),this.outlinePath_+=e.utils.svgPaths.lineOnAxis("V",t.baseline),this.outlinePath_+=e.utils.svgPaths.lineOnAxis("h",-t.width)},e.zelos.Drawer.prototype.drawInlineInput_=function(t){this.positionInlineInputConnection_(t);var n=t.input.name;if(!t.connectedBlock&&!this.info_.isInsertionMarker){var r=t.width-2*t.connectionWidth;t=e.utils.svgPaths.moveTo(t.xPos+t.connectionWidth,t.centerline-t.height/2)+e.utils.svgPaths.lineOnAxis("h",r)+t.shape.pathRightDown(t.height)+e.utils.svgPaths.lineOnAxis("h",-r)+t.shape.pathUp(t.height)+"z",this.block_.pathObject.setOutlinePath(n,t)}},e.zelos.Drawer.prototype.drawStatementInput_=function(t){var n=t.getLastInput(),r=n.xPos+n.notchOffset+n.shape.width,s=n.shape.pathRight+e.utils.svgPaths.lineOnAxis("h",-(n.notchOffset-this.constants_.INSIDE_CORNERS.width))+this.constants_.INSIDE_CORNERS.pathTop,u=t.height-2*this.constants_.INSIDE_CORNERS.height;n=this.constants_.INSIDE_CORNERS.pathBottom+e.utils.svgPaths.lineOnAxis("h",n.notchOffset-this.constants_.INSIDE_CORNERS.width)+(n.connectedBottomNextConnection?"":n.shape.pathLeft),this.outlinePath_+=e.utils.svgPaths.lineOnAxis("H",r)+s+e.utils.svgPaths.lineOnAxis("v",u)+n+e.utils.svgPaths.lineOnAxis("H",t.xPos+t.width),this.positionStatementInputConnection_(t)},e.zelos.MarkerSvg=function(t,n,r){e.zelos.MarkerSvg.superClass_.constructor.call(this,t,n,r)},e.utils.object.inherits(e.zelos.MarkerSvg,e.blockRendering.MarkerSvg),e.zelos.MarkerSvg.prototype.showWithInputOutput_=function(t){var n=t.getSourceBlock();t=t.getLocation().getOffsetInBlock(),this.positionCircle_(t.x,t.y),this.setParent_(n),this.showCurrent_()},e.zelos.MarkerSvg.prototype.showWithOutput_=function(t){this.showWithInputOutput_(t)},e.zelos.MarkerSvg.prototype.showWithInput_=function(t){this.showWithInputOutput_(t)},e.zelos.MarkerSvg.prototype.showWithBlock_=function(t){var n=(t=t.getLocation()).getHeightWidth();this.positionRect_(0,0,n.width,n.height),this.setParent_(t),this.showCurrent_()},e.zelos.MarkerSvg.prototype.positionCircle_=function(t,n){this.markerCircle_.setAttribute("cx",t),this.markerCircle_.setAttribute("cy",n),this.currentMarkerSvg=this.markerCircle_},e.zelos.MarkerSvg.prototype.hide=function(){e.zelos.MarkerSvg.superClass_.hide.call(this),this.markerCircle_.style.display="none"},e.zelos.MarkerSvg.prototype.createDomInternal_=function(){if(e.zelos.MarkerSvg.superClass_.createDomInternal_.call(this),this.markerCircle_=e.utils.dom.createSvgElement(e.utils.Svg.CIRCLE,{r:this.constants_.CURSOR_RADIUS,style:"display: none","stroke-width":this.constants_.CURSOR_STROKE_WIDTH},this.markerSvg_),this.isCursor()){var t=this.getBlinkProperties_();e.utils.dom.createSvgElement(e.utils.Svg.ANIMATE,t,this.markerCircle_)}return this.markerSvg_},e.zelos.MarkerSvg.prototype.applyColour_=function(t){e.zelos.MarkerSvg.superClass_.applyColour_.call(this,t),this.markerCircle_.setAttribute("fill",this.colour_),this.markerCircle_.setAttribute("stroke",this.colour_),this.isCursor()&&this.markerCircle_.firstChild.setAttribute("values",this.colour_+";transparent;transparent;")},e.zelos.PathObject=function(t,n,r){e.zelos.PathObject.superClass_.constructor.call(this,t,n,r),this.constants=r,this.svgPathSelected_=null,this.outlines_=Object.create(null),this.outputShapeType=this.remainingOutlines_=null},e.utils.object.inherits(e.zelos.PathObject,e.blockRendering.PathObject),e.zelos.PathObject.prototype.setPath=function(t){e.zelos.PathObject.superClass_.setPath.call(this,t),this.svgPathSelected_&&this.svgPathSelected_.setAttribute("d",t)},e.zelos.PathObject.prototype.applyColour=function(t){for(var n in e.zelos.PathObject.superClass_.applyColour.call(this,t),t.isShadow()&&t.getParent()&&this.svgPath.setAttribute("stroke",t.getParent().style.colourTertiary),this.outlines_)this.outlines_[n].setAttribute("fill",this.style.colourTertiary)},e.zelos.PathObject.prototype.flipRTL=function(){for(var t in e.zelos.PathObject.superClass_.flipRTL.call(this),this.outlines_)this.outlines_[t].setAttribute("transform","scale(-1 1)")},e.zelos.PathObject.prototype.updateSelected=function(t){this.setClass_("blocklySelected",t),t?this.svgPathSelected_||(this.svgPathSelected_=this.svgPath.cloneNode(!0),this.svgPathSelected_.setAttribute("fill","none"),this.svgPathSelected_.setAttribute("filter","url(#"+this.constants.selectedGlowFilterId+")"),this.svgRoot.appendChild(this.svgPathSelected_)):this.svgPathSelected_&&(this.svgRoot.removeChild(this.svgPathSelected_),this.svgPathSelected_=null)},e.zelos.PathObject.prototype.updateReplacementFade=function(t){this.setClass_("blocklyReplaceable",t),t?this.svgPath.setAttribute("filter","url(#"+this.constants.replacementGlowFilterId+")"):this.svgPath.removeAttribute("filter")},e.zelos.PathObject.prototype.updateShapeForInputHighlight=function(t,n){t=t.getParentInput().name,(t=this.getOutlinePath_(t))&&(n?t.setAttribute("filter","url(#"+this.constants.replacementGlowFilterId+")"):t.removeAttribute("filter"))},e.zelos.PathObject.prototype.beginDrawing=function(){for(var t in this.remainingOutlines_=Object.create(null),this.outlines_)this.remainingOutlines_[t]=1},e.zelos.PathObject.prototype.endDrawing=function(){if(this.remainingOutlines_)for(var t in this.remainingOutlines_)this.removeOutlinePath_(t);this.remainingOutlines_=null},e.zelos.PathObject.prototype.setOutlinePath=function(t,n){(t=this.getOutlinePath_(t)).setAttribute("d",n),t.setAttribute("fill",this.style.colourTertiary)},e.zelos.PathObject.prototype.getOutlinePath_=function(t){return this.outlines_[t]||(this.outlines_[t]=e.utils.dom.createSvgElement(e.utils.Svg.PATH,{class:"blocklyOutlinePath",d:""},this.svgRoot)),this.remainingOutlines_&&delete this.remainingOutlines_[t],this.outlines_[t]},e.zelos.PathObject.prototype.removeOutlinePath_=function(t){this.outlines_[t].parentNode.removeChild(this.outlines_[t]),delete this.outlines_[t]},e.zelos.Renderer=function(t){e.zelos.Renderer.superClass_.constructor.call(this,t)},e.utils.object.inherits(e.zelos.Renderer,e.blockRendering.Renderer),e.zelos.Renderer.prototype.makeConstants_=function(){return new e.zelos.ConstantProvider},e.zelos.Renderer.prototype.makeRenderInfo_=function(t){return new e.zelos.RenderInfo(this,t)},e.zelos.Renderer.prototype.makeDrawer_=function(t,n){return new e.zelos.Drawer(t,n)},e.zelos.Renderer.prototype.makeMarkerDrawer=function(t,n){return new e.zelos.MarkerSvg(t,this.getConstants(),n)},e.zelos.Renderer.prototype.makePathObject=function(t,n){return new e.zelos.PathObject(t,n,this.getConstants())},e.zelos.Renderer.prototype.shouldHighlightConnection=function(t){return t.type!=e.connectionTypes.INPUT_VALUE&&t.type!==e.connectionTypes.OUTPUT_VALUE},e.zelos.Renderer.prototype.getConnectionPreviewMethod=function(t,n,r){return n.type==e.connectionTypes.OUTPUT_VALUE?t.isConnected()?e.InsertionMarkerManager.PREVIEW_TYPE.REPLACEMENT_FADE:e.InsertionMarkerManager.PREVIEW_TYPE.INPUT_OUTLINE:e.zelos.Renderer.superClass_.getConnectionPreviewMethod(t,n,r)},e.blockRendering.register("zelos",e.zelos.Renderer),e.Themes.Dark=e.Theme.defineTheme("dark",{base:e.Themes.Classic,componentStyles:{workspaceBackgroundColour:"#1e1e1e",toolboxBackgroundColour:"blackBackground",toolboxForegroundColour:"#fff",flyoutBackgroundColour:"#252526",flyoutForegroundColour:"#ccc",flyoutOpacity:1,scrollbarColour:"#797979",insertionMarkerColour:"#fff",insertionMarkerOpacity:.3,scrollbarOpacity:.4,cursorColour:"#d0d0d0",blackBackground:"#333"}}),e.Themes.Deuteranopia={},e.Themes.Deuteranopia.defaultBlockStyles={colour_blocks:{colourPrimary:"#f2a72c",colourSecondary:"#f1c172",colourTertiary:"#da921c"},list_blocks:{colourPrimary:"#7d65ab",colourSecondary:"#a88be0",colourTertiary:"#66518e"},logic_blocks:{colourPrimary:"#9fd2f1",colourSecondary:"#c0e0f4",colourTertiary:"#74bae5"},loop_blocks:{colourPrimary:"#795a07",colourSecondary:"#ac8726",colourTertiary:"#c4a03f"},math_blocks:{colourPrimary:"#e6da39",colourSecondary:"#f3ec8e",colourTertiary:"#f2eeb7"},procedure_blocks:{colourPrimary:"#590721",colourSecondary:"#8c475d",colourTertiary:"#885464"},text_blocks:{colourPrimary:"#058863",colourSecondary:"#5ecfaf",colourTertiary:"#04684c"},variable_blocks:{colourPrimary:"#47025a",colourSecondary:"#820fa1",colourTertiary:"#8e579d"},variable_dynamic_blocks:{colourPrimary:"#47025a",colourSecondary:"#820fa1",colourTertiary:"#8e579d"}},e.Themes.Deuteranopia.categoryStyles={colour_category:{colour:"#f2a72c"},list_category:{colour:"#7d65ab"},logic_category:{colour:"#9fd2f1"},loop_category:{colour:"#795a07"},math_category:{colour:"#e6da39"},procedure_category:{colour:"#590721"},text_category:{colour:"#058863"},variable_category:{colour:"#47025a"},variable_dynamic_category:{colour:"#47025a"}},e.Themes.Deuteranopia=new e.Theme("deuteranopia",e.Themes.Deuteranopia.defaultBlockStyles,e.Themes.Deuteranopia.categoryStyles),e.Themes.HighContrast={},e.Themes.HighContrast.defaultBlockStyles={colour_blocks:{colourPrimary:"#a52714",colourSecondary:"#FB9B8C",colourTertiary:"#FBE1DD"},list_blocks:{colourPrimary:"#4a148c",colourSecondary:"#AD7BE9",colourTertiary:"#CDB6E9"},logic_blocks:{colourPrimary:"#01579b",colourSecondary:"#64C7FF",colourTertiary:"#C5EAFF"},loop_blocks:{colourPrimary:"#33691e",colourSecondary:"#9AFF78",colourTertiary:"#E1FFD7"},math_blocks:{colourPrimary:"#1a237e",colourSecondary:"#8A9EFF",colourTertiary:"#DCE2FF"},procedure_blocks:{colourPrimary:"#006064",colourSecondary:"#77E6EE",colourTertiary:"#CFECEE"},text_blocks:{colourPrimary:"#004d40",colourSecondary:"#5ae27c",colourTertiary:"#D2FFDD"},variable_blocks:{colourPrimary:"#880e4f",colourSecondary:"#FF73BE",colourTertiary:"#FFD4EB"},variable_dynamic_blocks:{colourPrimary:"#880e4f",colourSecondary:"#FF73BE",colourTertiary:"#FFD4EB"},hat_blocks:{colourPrimary:"#880e4f",colourSecondary:"#FF73BE",colourTertiary:"#FFD4EB",hat:"cap"}},e.Themes.HighContrast.categoryStyles={colour_category:{colour:"#a52714"},list_category:{colour:"#4a148c"},logic_category:{colour:"#01579b"},loop_category:{colour:"#33691e"},math_category:{colour:"#1a237e"},procedure_category:{colour:"#006064"},text_category:{colour:"#004d40"},variable_category:{colour:"#880e4f"},variable_dynamic_category:{colour:"#880e4f"}},e.Themes.HighContrast=new e.Theme("highcontrast",e.Themes.HighContrast.defaultBlockStyles,e.Themes.HighContrast.categoryStyles),e.Themes.HighContrast.setComponentStyle("selectedGlowColour","#000000"),e.Themes.HighContrast.setComponentStyle("selectedGlowSize",1),e.Themes.HighContrast.setComponentStyle("replacementGlowColour","#000000"),e.Themes.HighContrast.setFontStyle({family:null,weight:null,size:16}),e.Themes.Tritanopia={},e.Themes.Tritanopia.defaultBlockStyles={colour_blocks:{colourPrimary:"#05427f",colourSecondary:"#2974c0",colourTertiary:"#2d74bb"},list_blocks:{colourPrimary:"#b69ce8",colourSecondary:"#ccbaef",colourTertiary:"#9176c5"},logic_blocks:{colourPrimary:"#9fd2f1",colourSecondary:"#c0e0f4",colourTertiary:"#74bae5"},loop_blocks:{colourPrimary:"#aa1846",colourSecondary:"#d36185",colourTertiary:"#7c1636"},math_blocks:{colourPrimary:"#e6da39",colourSecondary:"#f3ec8e",colourTertiary:"#f2eeb7"},procedure_blocks:{colourPrimary:"#590721",colourSecondary:"#8c475d",colourTertiary:"#885464"},text_blocks:{colourPrimary:"#058863",colourSecondary:"#5ecfaf",colourTertiary:"#04684c"},variable_blocks:{colourPrimary:"#4b2d84",colourSecondary:"#816ea7",colourTertiary:"#83759e"},variable_dynamic_blocks:{colourPrimary:"#4b2d84",colourSecondary:"#816ea7",colourTertiary:"#83759e"}},e.Themes.Tritanopia.categoryStyles={colour_category:{colour:"#05427f"},list_category:{colour:"#b69ce8"},logic_category:{colour:"#9fd2f1"},loop_category:{colour:"#aa1846"},math_category:{colour:"#e6da39"},procedure_category:{colour:"#590721"},text_category:{colour:"#058863"},variable_category:{colour:"#4b2d84"},variable_dynamic_category:{colour:"#4b2d84"}},e.Themes.Tritanopia=new e.Theme("tritanopia",e.Themes.Tritanopia.defaultBlockStyles,e.Themes.Tritanopia.categoryStyles),e.requires={},e}.apply($,[]))&&(U.exports=_)},24773:function(U,$,m){var _,e;_=[m(93677)],void 0!==(e=function(t){"use strict";return t.Blocks={},t.Blocks}.apply($,_))&&(U.exports=e)},93677:function(U,$,m){var _,e;_=[m(46251)],void 0!==(e=function(t){"use strict";return t.Blocks.colour={},t.Constants={},t.Constants.Colour={},t.Constants.Colour.HUE=20,t.defineBlocksWithJsonArray([{type:"colour_picker",message0:"%1",args0:[{type:"field_colour",name:"COLOUR",colour:"#ff0000"}],output:"Colour",helpUrl:"%{BKY_COLOUR_PICKER_HELPURL}",style:"colour_blocks",tooltip:"%{BKY_COLOUR_PICKER_TOOLTIP}",extensions:["parent_tooltip_when_inline"]},{type:"colour_random",message0:"%{BKY_COLOUR_RANDOM_TITLE}",output:"Colour",helpUrl:"%{BKY_COLOUR_RANDOM_HELPURL}",style:"colour_blocks",tooltip:"%{BKY_COLOUR_RANDOM_TOOLTIP}"},{type:"colour_rgb",message0:"%{BKY_COLOUR_RGB_TITLE} %{BKY_COLOUR_RGB_RED} %1 %{BKY_COLOUR_RGB_GREEN} %2 %{BKY_COLOUR_RGB_BLUE} %3",args0:[{type:"input_value",name:"RED",check:"Number",align:"RIGHT"},{type:"input_value",name:"GREEN",check:"Number",align:"RIGHT"},{type:"input_value",name:"BLUE",check:"Number",align:"RIGHT"}],output:"Colour",helpUrl:"%{BKY_COLOUR_RGB_HELPURL}",style:"colour_blocks",tooltip:"%{BKY_COLOUR_RGB_TOOLTIP}"},{type:"colour_blend",message0:"%{BKY_COLOUR_BLEND_TITLE} %{BKY_COLOUR_BLEND_COLOUR1} %1 %{BKY_COLOUR_BLEND_COLOUR2} %2 %{BKY_COLOUR_BLEND_RATIO} %3",args0:[{type:"input_value",name:"COLOUR1",check:"Colour",align:"RIGHT"},{type:"input_value",name:"COLOUR2",check:"Colour",align:"RIGHT"},{type:"input_value",name:"RATIO",check:"Number",align:"RIGHT"}],output:"Colour",helpUrl:"%{BKY_COLOUR_BLEND_HELPURL}",style:"colour_blocks",tooltip:"%{BKY_COLOUR_BLEND_TOOLTIP}"}]),t.Constants.Lists={},t.Constants.Lists.HUE=260,t.defineBlocksWithJsonArray([{type:"lists_create_empty",message0:"%{BKY_LISTS_CREATE_EMPTY_TITLE}",output:"Array",style:"list_blocks",tooltip:"%{BKY_LISTS_CREATE_EMPTY_TOOLTIP}",helpUrl:"%{BKY_LISTS_CREATE_EMPTY_HELPURL}"},{type:"lists_repeat",message0:"%{BKY_LISTS_REPEAT_TITLE}",args0:[{type:"input_value",name:"ITEM"},{type:"input_value",name:"NUM",check:"Number"}],output:"Array",style:"list_blocks",tooltip:"%{BKY_LISTS_REPEAT_TOOLTIP}",helpUrl:"%{BKY_LISTS_REPEAT_HELPURL}"},{type:"lists_reverse",message0:"%{BKY_LISTS_REVERSE_MESSAGE0}",args0:[{type:"input_value",name:"LIST",check:"Array"}],output:"Array",inputsInline:!0,style:"list_blocks",tooltip:"%{BKY_LISTS_REVERSE_TOOLTIP}",helpUrl:"%{BKY_LISTS_REVERSE_HELPURL}"},{type:"lists_isEmpty",message0:"%{BKY_LISTS_ISEMPTY_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Boolean",style:"list_blocks",tooltip:"%{BKY_LISTS_ISEMPTY_TOOLTIP}",helpUrl:"%{BKY_LISTS_ISEMPTY_HELPURL}"},{type:"lists_length",message0:"%{BKY_LISTS_LENGTH_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Number",style:"list_blocks",tooltip:"%{BKY_LISTS_LENGTH_TOOLTIP}",helpUrl:"%{BKY_LISTS_LENGTH_HELPURL}"}]),t.Blocks.lists_create_with={init:function(){this.setHelpUrl(t.Msg.LISTS_CREATE_WITH_HELPURL),this.setStyle("list_blocks"),this.itemCount_=3,this.updateShape_(),this.setOutput(!0,"Array"),this.setMutator(new t.Mutator(["lists_create_with_item"])),this.setTooltip(t.Msg.LISTS_CREATE_WITH_TOOLTIP)},mutationToDom:function(){var n=t.utils.xml.createElement("mutation");return n.setAttribute("items",this.itemCount_),n},domToMutation:function(n){this.itemCount_=parseInt(n.getAttribute("items"),10),this.updateShape_()},decompose:function(n){var r=n.newBlock("lists_create_with_container");r.initSvg();for(var s=r.getInput("STACK").connection,u=0;u<this.itemCount_;u++){var y=n.newBlock("lists_create_with_item");y.initSvg(),s.connect(y.previousConnection),s=y.nextConnection}return r},compose:function(n){var r=n.getInputTargetBlock("STACK");for(n=[];r&&!r.isInsertionMarker();)n.push(r.valueConnection_),r=r.nextConnection&&r.nextConnection.targetBlock();for(r=0;r<this.itemCount_;r++){var s=this.getInput("ADD"+r).connection.targetConnection;s&&-1==n.indexOf(s)&&s.disconnect()}for(this.itemCount_=n.length,this.updateShape_(),r=0;r<this.itemCount_;r++)t.Mutator.reconnect(n[r],this,"ADD"+r)},saveConnections:function(n){n=n.getInputTargetBlock("STACK");for(var r=0;n;){var s=this.getInput("ADD"+r);n.valueConnection_=s&&s.connection.targetConnection,r++,n=n.nextConnection&&n.nextConnection.targetBlock()}},updateShape_:function(){this.itemCount_&&this.getInput("EMPTY")?this.removeInput("EMPTY"):this.itemCount_||this.getInput("EMPTY")||this.appendDummyInput("EMPTY").appendField(t.Msg.LISTS_CREATE_EMPTY_TITLE);for(var n=0;n<this.itemCount_;n++)if(!this.getInput("ADD"+n)){var r=this.appendValueInput("ADD"+n).setAlign(t.ALIGN_RIGHT);0==n&&r.appendField(t.Msg.LISTS_CREATE_WITH_INPUT_WITH)}for(;this.getInput("ADD"+n);)this.removeInput("ADD"+n),n++}},t.Blocks.lists_create_with_container={init:function(){this.setStyle("list_blocks"),this.appendDummyInput().appendField(t.Msg.LISTS_CREATE_WITH_CONTAINER_TITLE_ADD),this.appendStatementInput("STACK"),this.setTooltip(t.Msg.LISTS_CREATE_WITH_CONTAINER_TOOLTIP),this.contextMenu=!1}},t.Blocks.lists_create_with_item={init:function(){this.setStyle("list_blocks"),this.appendDummyInput().appendField(t.Msg.LISTS_CREATE_WITH_ITEM_TITLE),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(t.Msg.LISTS_CREATE_WITH_ITEM_TOOLTIP),this.contextMenu=!1}},t.Blocks.lists_indexOf={init:function(){var n=[[t.Msg.LISTS_INDEX_OF_FIRST,"FIRST"],[t.Msg.LISTS_INDEX_OF_LAST,"LAST"]];this.setHelpUrl(t.Msg.LISTS_INDEX_OF_HELPURL),this.setStyle("list_blocks"),this.setOutput(!0,"Number"),this.appendValueInput("VALUE").setCheck("Array").appendField(t.Msg.LISTS_INDEX_OF_INPUT_IN_LIST),this.appendValueInput("FIND").appendField(new t.FieldDropdown(n),"END"),this.setInputsInline(!0);var r=this;this.setTooltip(function(){return t.Msg.LISTS_INDEX_OF_TOOLTIP.replace("%1",r.workspace.options.oneBasedIndex?"0":"-1")})}},t.Blocks.lists_getIndex={init:function(){var n=[[t.Msg.LISTS_GET_INDEX_GET,"GET"],[t.Msg.LISTS_GET_INDEX_GET_REMOVE,"GET_REMOVE"],[t.Msg.LISTS_GET_INDEX_REMOVE,"REMOVE"]];this.WHERE_OPTIONS=[[t.Msg.LISTS_GET_INDEX_FROM_START,"FROM_START"],[t.Msg.LISTS_GET_INDEX_FROM_END,"FROM_END"],[t.Msg.LISTS_GET_INDEX_FIRST,"FIRST"],[t.Msg.LISTS_GET_INDEX_LAST,"LAST"],[t.Msg.LISTS_GET_INDEX_RANDOM,"RANDOM"]],this.setHelpUrl(t.Msg.LISTS_GET_INDEX_HELPURL),this.setStyle("list_blocks"),n=new t.FieldDropdown(n,function(s){s="REMOVE"==s,this.getSourceBlock().updateStatement_(s)}),this.appendValueInput("VALUE").setCheck("Array").appendField(t.Msg.LISTS_GET_INDEX_INPUT_IN_LIST),this.appendDummyInput().appendField(n,"MODE").appendField("","SPACE"),this.appendDummyInput("AT"),t.Msg.LISTS_GET_INDEX_TAIL&&this.appendDummyInput("TAIL").appendField(t.Msg.LISTS_GET_INDEX_TAIL),this.setInputsInline(!0),this.setOutput(!0),this.updateAt_(!0);var r=this;this.setTooltip(function(){var s=r.getFieldValue("MODE"),u=r.getFieldValue("WHERE"),y="";switch(s+" "+u){case"GET FROM_START":case"GET FROM_END":y=t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FROM;break;case"GET FIRST":y=t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FIRST;break;case"GET LAST":y=t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_LAST;break;case"GET RANDOM":y=t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_RANDOM;break;case"GET_REMOVE FROM_START":case"GET_REMOVE FROM_END":y=t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FROM;break;case"GET_REMOVE FIRST":y=t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FIRST;break;case"GET_REMOVE LAST":y=t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_LAST;break;case"GET_REMOVE RANDOM":y=t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_RANDOM;break;case"REMOVE FROM_START":case"REMOVE FROM_END":y=t.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FROM;break;case"REMOVE FIRST":y=t.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FIRST;break;case"REMOVE LAST":y=t.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_LAST;break;case"REMOVE RANDOM":y=t.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_RANDOM}return("FROM_START"==u||"FROM_END"==u)&&(y+="  "+("FROM_START"==u?t.Msg.LISTS_INDEX_FROM_START_TOOLTIP:t.Msg.LISTS_INDEX_FROM_END_TOOLTIP).replace("%1",r.workspace.options.oneBasedIndex?"#1":"#0")),y})},mutationToDom:function(){var n=t.utils.xml.createElement("mutation");n.setAttribute("statement",!this.outputConnection);var r=this.getInput("AT").type==t.INPUT_VALUE;return n.setAttribute("at",r),n},domToMutation:function(n){var r="true"==n.getAttribute("statement");this.updateStatement_(r),n="false"!=n.getAttribute("at"),this.updateAt_(n)},updateStatement_:function(n){n!=!this.outputConnection&&(this.unplug(!0,!0),n?(this.setOutput(!1),this.setPreviousStatement(!0),this.setNextStatement(!0)):(this.setPreviousStatement(!1),this.setNextStatement(!1),this.setOutput(!0)))},updateAt_:function(n){this.removeInput("AT"),this.removeInput("ORDINAL",!0),n?(this.appendValueInput("AT").setCheck("Number"),t.Msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL").appendField(t.Msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT");var r=new t.FieldDropdown(this.WHERE_OPTIONS,function(s){var u="FROM_START"==s||"FROM_END"==s;if(u!=n){var y=this.getSourceBlock();return y.updateAt_(u),y.setFieldValue(s,"WHERE"),null}});this.getInput("AT").appendField(r,"WHERE"),t.Msg.LISTS_GET_INDEX_TAIL&&this.moveInputBefore("TAIL",null)}},t.Blocks.lists_setIndex={init:function(){var n=[[t.Msg.LISTS_SET_INDEX_SET,"SET"],[t.Msg.LISTS_SET_INDEX_INSERT,"INSERT"]];this.WHERE_OPTIONS=[[t.Msg.LISTS_GET_INDEX_FROM_START,"FROM_START"],[t.Msg.LISTS_GET_INDEX_FROM_END,"FROM_END"],[t.Msg.LISTS_GET_INDEX_FIRST,"FIRST"],[t.Msg.LISTS_GET_INDEX_LAST,"LAST"],[t.Msg.LISTS_GET_INDEX_RANDOM,"RANDOM"]],this.setHelpUrl(t.Msg.LISTS_SET_INDEX_HELPURL),this.setStyle("list_blocks"),this.appendValueInput("LIST").setCheck("Array").appendField(t.Msg.LISTS_SET_INDEX_INPUT_IN_LIST),this.appendDummyInput().appendField(new t.FieldDropdown(n),"MODE").appendField("","SPACE"),this.appendDummyInput("AT"),this.appendValueInput("TO").appendField(t.Msg.LISTS_SET_INDEX_INPUT_TO),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(t.Msg.LISTS_SET_INDEX_TOOLTIP),this.updateAt_(!0);var r=this;this.setTooltip(function(){var s=r.getFieldValue("MODE"),u=r.getFieldValue("WHERE"),y="";switch(s+" "+u){case"SET FROM_START":case"SET FROM_END":y=t.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FROM;break;case"SET FIRST":y=t.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FIRST;break;case"SET LAST":y=t.Msg.LISTS_SET_INDEX_TOOLTIP_SET_LAST;break;case"SET RANDOM":y=t.Msg.LISTS_SET_INDEX_TOOLTIP_SET_RANDOM;break;case"INSERT FROM_START":case"INSERT FROM_END":y=t.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FROM;break;case"INSERT FIRST":y=t.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FIRST;break;case"INSERT LAST":y=t.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_LAST;break;case"INSERT RANDOM":y=t.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_RANDOM}return("FROM_START"==u||"FROM_END"==u)&&(y+="  "+t.Msg.LISTS_INDEX_FROM_START_TOOLTIP.replace("%1",r.workspace.options.oneBasedIndex?"#1":"#0")),y})},mutationToDom:function(){var n=t.utils.xml.createElement("mutation"),r=this.getInput("AT").type==t.INPUT_VALUE;return n.setAttribute("at",r),n},domToMutation:function(n){n="false"!=n.getAttribute("at"),this.updateAt_(n)},updateAt_:function(n){this.removeInput("AT"),this.removeInput("ORDINAL",!0),n?(this.appendValueInput("AT").setCheck("Number"),t.Msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL").appendField(t.Msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT");var r=new t.FieldDropdown(this.WHERE_OPTIONS,function(s){var u="FROM_START"==s||"FROM_END"==s;if(u!=n){var y=this.getSourceBlock();return y.updateAt_(u),y.setFieldValue(s,"WHERE"),null}});this.moveInputBefore("AT","TO"),this.getInput("ORDINAL")&&this.moveInputBefore("ORDINAL","TO"),this.getInput("AT").appendField(r,"WHERE")}},t.Blocks.lists_getSublist={init:function(){this.WHERE_OPTIONS_1=[[t.Msg.LISTS_GET_SUBLIST_START_FROM_START,"FROM_START"],[t.Msg.LISTS_GET_SUBLIST_START_FROM_END,"FROM_END"],[t.Msg.LISTS_GET_SUBLIST_START_FIRST,"FIRST"]],this.WHERE_OPTIONS_2=[[t.Msg.LISTS_GET_SUBLIST_END_FROM_START,"FROM_START"],[t.Msg.LISTS_GET_SUBLIST_END_FROM_END,"FROM_END"],[t.Msg.LISTS_GET_SUBLIST_END_LAST,"LAST"]],this.setHelpUrl(t.Msg.LISTS_GET_SUBLIST_HELPURL),this.setStyle("list_blocks"),this.appendValueInput("LIST").setCheck("Array").appendField(t.Msg.LISTS_GET_SUBLIST_INPUT_IN_LIST),this.appendDummyInput("AT1"),this.appendDummyInput("AT2"),t.Msg.LISTS_GET_SUBLIST_TAIL&&this.appendDummyInput("TAIL").appendField(t.Msg.LISTS_GET_SUBLIST_TAIL),this.setInputsInline(!0),this.setOutput(!0,"Array"),this.updateAt_(1,!0),this.updateAt_(2,!0),this.setTooltip(t.Msg.LISTS_GET_SUBLIST_TOOLTIP)},mutationToDom:function(){var n=t.utils.xml.createElement("mutation"),r=this.getInput("AT1").type==t.INPUT_VALUE;return n.setAttribute("at1",r),r=this.getInput("AT2").type==t.INPUT_VALUE,n.setAttribute("at2",r),n},domToMutation:function(n){var r="true"==n.getAttribute("at1");n="true"==n.getAttribute("at2"),this.updateAt_(1,r),this.updateAt_(2,n)},updateAt_:function(n,r){this.removeInput("AT"+n),this.removeInput("ORDINAL"+n,!0),r?(this.appendValueInput("AT"+n).setCheck("Number"),t.Msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL"+n).appendField(t.Msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT"+n);var s=new t.FieldDropdown(this["WHERE_OPTIONS_"+n],function(u){var y="FROM_START"==u||"FROM_END"==u;if(y!=r){var x=this.getSourceBlock();return x.updateAt_(n,y),x.setFieldValue(u,"WHERE"+n),null}});this.getInput("AT"+n).appendField(s,"WHERE"+n),1==n&&(this.moveInputBefore("AT1","AT2"),this.getInput("ORDINAL1")&&this.moveInputBefore("ORDINAL1","AT2")),t.Msg.LISTS_GET_SUBLIST_TAIL&&this.moveInputBefore("TAIL",null)}},t.Blocks.lists_sort={init:function(){this.jsonInit({message0:t.Msg.LISTS_SORT_TITLE,args0:[{type:"field_dropdown",name:"TYPE",options:[[t.Msg.LISTS_SORT_TYPE_NUMERIC,"NUMERIC"],[t.Msg.LISTS_SORT_TYPE_TEXT,"TEXT"],[t.Msg.LISTS_SORT_TYPE_IGNORECASE,"IGNORE_CASE"]]},{type:"field_dropdown",name:"DIRECTION",options:[[t.Msg.LISTS_SORT_ORDER_ASCENDING,"1"],[t.Msg.LISTS_SORT_ORDER_DESCENDING,"-1"]]},{type:"input_value",name:"LIST",check:"Array"}],output:"Array",style:"list_blocks",tooltip:t.Msg.LISTS_SORT_TOOLTIP,helpUrl:t.Msg.LISTS_SORT_HELPURL})}},t.Blocks.lists_split={init:function(){var n=this,r=new t.FieldDropdown([[t.Msg.LISTS_SPLIT_LIST_FROM_TEXT,"SPLIT"],[t.Msg.LISTS_SPLIT_TEXT_FROM_LIST,"JOIN"]],function(s){n.updateType_(s)});this.setHelpUrl(t.Msg.LISTS_SPLIT_HELPURL),this.setStyle("list_blocks"),this.appendValueInput("INPUT").setCheck("String").appendField(r,"MODE"),this.appendValueInput("DELIM").setCheck("String").appendField(t.Msg.LISTS_SPLIT_WITH_DELIMITER),this.setInputsInline(!0),this.setOutput(!0,"Array"),this.setTooltip(function(){var s=n.getFieldValue("MODE");if("SPLIT"==s)return t.Msg.LISTS_SPLIT_TOOLTIP_SPLIT;if("JOIN"==s)return t.Msg.LISTS_SPLIT_TOOLTIP_JOIN;throw Error("Unknown mode: "+s)})},updateType_:function(n){if(this.getFieldValue("MODE")!=n){var r=this.getInput("INPUT").connection;r.setShadowDom(null);var s=r.targetBlock();s&&(r.disconnect(),s.isShadow()?s.dispose():this.bumpNeighbours())}"SPLIT"==n?(this.outputConnection.setCheck("Array"),this.getInput("INPUT").setCheck("String")):(this.outputConnection.setCheck("String"),this.getInput("INPUT").setCheck("Array"))},mutationToDom:function(){var n=t.utils.xml.createElement("mutation");return n.setAttribute("mode",this.getFieldValue("MODE")),n},domToMutation:function(n){this.updateType_(n.getAttribute("mode"))}},t.Blocks.logic={},t.Constants.Logic={},t.Constants.Logic.HUE=210,t.defineBlocksWithJsonArray([{type:"logic_boolean",message0:"%1",args0:[{type:"field_dropdown",name:"BOOL",options:[["%{BKY_LOGIC_BOOLEAN_TRUE}","TRUE"],["%{BKY_LOGIC_BOOLEAN_FALSE}","FALSE"]]}],output:"Boolean",style:"logic_blocks",tooltip:"%{BKY_LOGIC_BOOLEAN_TOOLTIP}",helpUrl:"%{BKY_LOGIC_BOOLEAN_HELPURL}"},{type:"controls_if",message0:"%{BKY_CONTROLS_IF_MSG_IF} %1",args0:[{type:"input_value",name:"IF0",check:"Boolean"}],message1:"%{BKY_CONTROLS_IF_MSG_THEN} %1",args1:[{type:"input_statement",name:"DO0"}],previousStatement:null,nextStatement:null,style:"logic_blocks",helpUrl:"%{BKY_CONTROLS_IF_HELPURL}",mutator:"controls_if_mutator",extensions:["controls_if_tooltip"]},{type:"controls_ifelse",message0:"%{BKY_CONTROLS_IF_MSG_IF} %1",args0:[{type:"input_value",name:"IF0",check:"Boolean"}],message1:"%{BKY_CONTROLS_IF_MSG_THEN} %1",args1:[{type:"input_statement",name:"DO0"}],message2:"%{BKY_CONTROLS_IF_MSG_ELSE} %1",args2:[{type:"input_statement",name:"ELSE"}],previousStatement:null,nextStatement:null,style:"logic_blocks",tooltip:"%{BKYCONTROLS_IF_TOOLTIP_2}",helpUrl:"%{BKY_CONTROLS_IF_HELPURL}",extensions:["controls_if_tooltip"]},{type:"logic_compare",message0:"%1 %2 %3",args0:[{type:"input_value",name:"A"},{type:"field_dropdown",name:"OP",options:[["=","EQ"],["\u2260","NEQ"],["\u200f<","LT"],["\u200f\u2264","LTE"],["\u200f>","GT"],["\u200f\u2265","GTE"]]},{type:"input_value",name:"B"}],inputsInline:!0,output:"Boolean",style:"logic_blocks",helpUrl:"%{BKY_LOGIC_COMPARE_HELPURL}",extensions:["logic_compare","logic_op_tooltip"]},{type:"logic_operation",message0:"%1 %2 %3",args0:[{type:"input_value",name:"A",check:"Boolean"},{type:"field_dropdown",name:"OP",options:[["%{BKY_LOGIC_OPERATION_AND}","AND"],["%{BKY_LOGIC_OPERATION_OR}","OR"]]},{type:"input_value",name:"B",check:"Boolean"}],inputsInline:!0,output:"Boolean",style:"logic_blocks",helpUrl:"%{BKY_LOGIC_OPERATION_HELPURL}",extensions:["logic_op_tooltip"]},{type:"logic_negate",message0:"%{BKY_LOGIC_NEGATE_TITLE}",args0:[{type:"input_value",name:"BOOL",check:"Boolean"}],output:"Boolean",style:"logic_blocks",tooltip:"%{BKY_LOGIC_NEGATE_TOOLTIP}",helpUrl:"%{BKY_LOGIC_NEGATE_HELPURL}"},{type:"logic_null",message0:"%{BKY_LOGIC_NULL}",output:null,style:"logic_blocks",tooltip:"%{BKY_LOGIC_NULL_TOOLTIP}",helpUrl:"%{BKY_LOGIC_NULL_HELPURL}"},{type:"logic_ternary",message0:"%{BKY_LOGIC_TERNARY_CONDITION} %1",args0:[{type:"input_value",name:"IF",check:"Boolean"}],message1:"%{BKY_LOGIC_TERNARY_IF_TRUE} %1",args1:[{type:"input_value",name:"THEN"}],message2:"%{BKY_LOGIC_TERNARY_IF_FALSE} %1",args2:[{type:"input_value",name:"ELSE"}],output:null,style:"logic_blocks",tooltip:"%{BKY_LOGIC_TERNARY_TOOLTIP}",helpUrl:"%{BKY_LOGIC_TERNARY_HELPURL}",extensions:["logic_ternary"]}]),t.defineBlocksWithJsonArray([{type:"controls_if_if",message0:"%{BKY_CONTROLS_IF_IF_TITLE_IF}",nextStatement:null,enableContextMenu:!1,style:"logic_blocks",tooltip:"%{BKY_CONTROLS_IF_IF_TOOLTIP}"},{type:"controls_if_elseif",message0:"%{BKY_CONTROLS_IF_ELSEIF_TITLE_ELSEIF}",previousStatement:null,nextStatement:null,enableContextMenu:!1,style:"logic_blocks",tooltip:"%{BKY_CONTROLS_IF_ELSEIF_TOOLTIP}"},{type:"controls_if_else",message0:"%{BKY_CONTROLS_IF_ELSE_TITLE_ELSE}",previousStatement:null,enableContextMenu:!1,style:"logic_blocks",tooltip:"%{BKY_CONTROLS_IF_ELSE_TOOLTIP}"}]),t.Constants.Logic.TOOLTIPS_BY_OP={EQ:"%{BKY_LOGIC_COMPARE_TOOLTIP_EQ}",NEQ:"%{BKY_LOGIC_COMPARE_TOOLTIP_NEQ}",LT:"%{BKY_LOGIC_COMPARE_TOOLTIP_LT}",LTE:"%{BKY_LOGIC_COMPARE_TOOLTIP_LTE}",GT:"%{BKY_LOGIC_COMPARE_TOOLTIP_GT}",GTE:"%{BKY_LOGIC_COMPARE_TOOLTIP_GTE}",AND:"%{BKY_LOGIC_OPERATION_TOOLTIP_AND}",OR:"%{BKY_LOGIC_OPERATION_TOOLTIP_OR}"},t.Extensions.register("logic_op_tooltip",t.Extensions.buildTooltipForDropdown("OP",t.Constants.Logic.TOOLTIPS_BY_OP)),t.Constants.Logic.CONTROLS_IF_MUTATOR_MIXIN={elseifCount_:0,elseCount_:0,suppressPrefixSuffix:!0,mutationToDom:function(){if(!this.elseifCount_&&!this.elseCount_)return null;var n=t.utils.xml.createElement("mutation");return this.elseifCount_&&n.setAttribute("elseif",this.elseifCount_),this.elseCount_&&n.setAttribute("else",1),n},domToMutation:function(n){this.elseifCount_=parseInt(n.getAttribute("elseif"),10)||0,this.elseCount_=parseInt(n.getAttribute("else"),10)||0,this.rebuildShape_()},decompose:function(n){var r=n.newBlock("controls_if_if");r.initSvg();for(var s=r.nextConnection,u=1;u<=this.elseifCount_;u++){var y=n.newBlock("controls_if_elseif");y.initSvg(),s.connect(y.previousConnection),s=y.nextConnection}return this.elseCount_&&((n=n.newBlock("controls_if_else")).initSvg(),s.connect(n.previousConnection)),r},compose:function(n){n=n.nextConnection.targetBlock(),this.elseCount_=this.elseifCount_=0;for(var r=[null],s=[null],u=null;n&&!n.isInsertionMarker();){switch(n.type){case"controls_if_elseif":this.elseifCount_++,r.push(n.valueConnection_),s.push(n.statementConnection_);break;case"controls_if_else":this.elseCount_++,u=n.statementConnection_;break;default:throw TypeError("Unknown block type: "+n.type)}n=n.nextConnection&&n.nextConnection.targetBlock()}this.updateShape_(),this.reconnectChildBlocks_(r,s,u)},saveConnections:function(n){n=n.nextConnection.targetBlock();for(var r=1;n;){switch(n.type){case"controls_if_elseif":var s=this.getInput("IF"+r),u=this.getInput("DO"+r);n.valueConnection_=s&&s.connection.targetConnection,n.statementConnection_=u&&u.connection.targetConnection,r++;break;case"controls_if_else":u=this.getInput("ELSE"),n.statementConnection_=u&&u.connection.targetConnection;break;default:throw TypeError("Unknown block type: "+n.type)}n=n.nextConnection&&n.nextConnection.targetBlock()}},rebuildShape_:function(){var n=[null],r=[null],s=null;this.getInput("ELSE")&&(s=this.getInput("ELSE").connection.targetConnection);for(var u=1;this.getInput("IF"+u);){var y=this.getInput("IF"+u),x=this.getInput("DO"+u);n.push(y.connection.targetConnection),r.push(x.connection.targetConnection),u++}this.updateShape_(),this.reconnectChildBlocks_(n,r,s)},updateShape_:function(){this.getInput("ELSE")&&this.removeInput("ELSE");for(var n=1;this.getInput("IF"+n);)this.removeInput("IF"+n),this.removeInput("DO"+n),n++;for(n=1;n<=this.elseifCount_;n++)this.appendValueInput("IF"+n).setCheck("Boolean").appendField(t.Msg.CONTROLS_IF_MSG_ELSEIF),this.appendStatementInput("DO"+n).appendField(t.Msg.CONTROLS_IF_MSG_THEN);this.elseCount_&&this.appendStatementInput("ELSE").appendField(t.Msg.CONTROLS_IF_MSG_ELSE)},reconnectChildBlocks_:function(n,r,s){for(var u=1;u<=this.elseifCount_;u++)t.Mutator.reconnect(n[u],this,"IF"+u),t.Mutator.reconnect(r[u],this,"DO"+u);t.Mutator.reconnect(s,this,"ELSE")}},t.Extensions.registerMutator("controls_if_mutator",t.Constants.Logic.CONTROLS_IF_MUTATOR_MIXIN,null,["controls_if_elseif","controls_if_else"]),t.Constants.Logic.CONTROLS_IF_TOOLTIP_EXTENSION=function(){this.setTooltip(function(){return this.elseifCount_||this.elseCount_?!this.elseifCount_&&this.elseCount_?t.Msg.CONTROLS_IF_TOOLTIP_2:this.elseifCount_&&!this.elseCount_?t.Msg.CONTROLS_IF_TOOLTIP_3:this.elseifCount_&&this.elseCount_?t.Msg.CONTROLS_IF_TOOLTIP_4:"":t.Msg.CONTROLS_IF_TOOLTIP_1}.bind(this))},t.Extensions.register("controls_if_tooltip",t.Constants.Logic.CONTROLS_IF_TOOLTIP_EXTENSION),t.Constants.Logic.LOGIC_COMPARE_ONCHANGE_MIXIN={onchange:function(n){this.prevBlocks_||(this.prevBlocks_=[null,null]);var r=this.getInputTargetBlock("A"),s=this.getInputTargetBlock("B");r&&s&&!this.workspace.connectionChecker.doTypeChecks(r.outputConnection,s.outputConnection)&&(t.Events.setGroup(n.group),(n=this.prevBlocks_[0])!==r&&(r.unplug(),!n||n.isDisposed()||n.isShadow()||this.getInput("A").connection.connect(n.outputConnection)),(r=this.prevBlocks_[1])!==s&&(s.unplug(),!r||r.isDisposed()||r.isShadow()||this.getInput("B").connection.connect(r.outputConnection)),this.bumpNeighbours(),t.Events.setGroup(!1)),this.prevBlocks_[0]=this.getInputTargetBlock("A"),this.prevBlocks_[1]=this.getInputTargetBlock("B")}},t.Constants.Logic.LOGIC_COMPARE_EXTENSION=function(){this.mixin(t.Constants.Logic.LOGIC_COMPARE_ONCHANGE_MIXIN)},t.Extensions.register("logic_compare",t.Constants.Logic.LOGIC_COMPARE_EXTENSION),t.Constants.Logic.LOGIC_TERNARY_ONCHANGE_MIXIN={prevParentConnection_:null,onchange:function(n){var r=this.getInputTargetBlock("THEN"),s=this.getInputTargetBlock("ELSE"),u=this.outputConnection.targetConnection;if((r||s)&&u)for(var y=0;2>y;y++){var x=1==y?r:s;x&&!x.workspace.connectionChecker.doTypeChecks(x.outputConnection,u)&&(t.Events.setGroup(n.group),u===this.prevParentConnection_?(this.unplug(),u.getSourceBlock().bumpNeighbours()):(x.unplug(),x.bumpNeighbours()),t.Events.setGroup(!1))}this.prevParentConnection_=u}},t.Extensions.registerMixin("logic_ternary",t.Constants.Logic.LOGIC_TERNARY_ONCHANGE_MIXIN),t.Blocks.loops={},t.Constants.Loops={},t.Constants.Loops.HUE=120,t.defineBlocksWithJsonArray([{type:"controls_repeat_ext",message0:"%{BKY_CONTROLS_REPEAT_TITLE}",args0:[{type:"input_value",name:"TIMES",check:"Number"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",tooltip:"%{BKY_CONTROLS_REPEAT_TOOLTIP}",helpUrl:"%{BKY_CONTROLS_REPEAT_HELPURL}"},{type:"controls_repeat",message0:"%{BKY_CONTROLS_REPEAT_TITLE}",args0:[{type:"field_number",name:"TIMES",value:10,min:0,precision:1}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",tooltip:"%{BKY_CONTROLS_REPEAT_TOOLTIP}",helpUrl:"%{BKY_CONTROLS_REPEAT_HELPURL}"},{type:"controls_whileUntil",message0:"%1 %2",args0:[{type:"field_dropdown",name:"MODE",options:[["%{BKY_CONTROLS_WHILEUNTIL_OPERATOR_WHILE}","WHILE"],["%{BKY_CONTROLS_WHILEUNTIL_OPERATOR_UNTIL}","UNTIL"]]},{type:"input_value",name:"BOOL",check:"Boolean"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_WHILEUNTIL_HELPURL}",extensions:["controls_whileUntil_tooltip"]},{type:"controls_for",message0:"%{BKY_CONTROLS_FOR_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:null},{type:"input_value",name:"FROM",check:"Number",align:"RIGHT"},{type:"input_value",name:"TO",check:"Number",align:"RIGHT"},{type:"input_value",name:"BY",check:"Number",align:"RIGHT"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],inputsInline:!0,previousStatement:null,nextStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_FOR_HELPURL}",extensions:["contextMenu_newGetVariableBlock","controls_for_tooltip"]},{type:"controls_forEach",message0:"%{BKY_CONTROLS_FOREACH_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:null},{type:"input_value",name:"LIST",check:"Array"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_FOREACH_HELPURL}",extensions:["contextMenu_newGetVariableBlock","controls_forEach_tooltip"]},{type:"controls_flow_statements",message0:"%1",args0:[{type:"field_dropdown",name:"FLOW",options:[["%{BKY_CONTROLS_FLOW_STATEMENTS_OPERATOR_BREAK}","BREAK"],["%{BKY_CONTROLS_FLOW_STATEMENTS_OPERATOR_CONTINUE}","CONTINUE"]]}],previousStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_FLOW_STATEMENTS_HELPURL}",extensions:["controls_flow_tooltip","controls_flow_in_loop_check"]}]),t.Constants.Loops.WHILE_UNTIL_TOOLTIPS={WHILE:"%{BKY_CONTROLS_WHILEUNTIL_TOOLTIP_WHILE}",UNTIL:"%{BKY_CONTROLS_WHILEUNTIL_TOOLTIP_UNTIL}"},t.Extensions.register("controls_whileUntil_tooltip",t.Extensions.buildTooltipForDropdown("MODE",t.Constants.Loops.WHILE_UNTIL_TOOLTIPS)),t.Constants.Loops.BREAK_CONTINUE_TOOLTIPS={BREAK:"%{BKY_CONTROLS_FLOW_STATEMENTS_TOOLTIP_BREAK}",CONTINUE:"%{BKY_CONTROLS_FLOW_STATEMENTS_TOOLTIP_CONTINUE}"},t.Extensions.register("controls_flow_tooltip",t.Extensions.buildTooltipForDropdown("FLOW",t.Constants.Loops.BREAK_CONTINUE_TOOLTIPS)),t.Constants.Loops.CUSTOM_CONTEXT_MENU_CREATE_VARIABLES_GET_MIXIN={customContextMenu:function(n){if(!this.isInFlyout){var r=this.getField("VAR").getVariable(),s=r.name;if(!this.isCollapsed()&&null!=s){var u={enabled:!0};u.text=t.Msg.VARIABLES_SET_CREATE_GET.replace("%1",s),r=t.Variables.generateVariableFieldDom(r),(s=t.utils.xml.createElement("block")).setAttribute("type","variables_get"),s.appendChild(r),u.callback=t.ContextMenu.callbackFactory(this,s),n.push(u)}}}},t.Extensions.registerMixin("contextMenu_newGetVariableBlock",t.Constants.Loops.CUSTOM_CONTEXT_MENU_CREATE_VARIABLES_GET_MIXIN),t.Extensions.register("controls_for_tooltip",t.Extensions.buildTooltipWithFieldText("%{BKY_CONTROLS_FOR_TOOLTIP}","VAR")),t.Extensions.register("controls_forEach_tooltip",t.Extensions.buildTooltipWithFieldText("%{BKY_CONTROLS_FOREACH_TOOLTIP}","VAR")),t.Constants.Loops.CONTROL_FLOW_IN_LOOP_CHECK_MIXIN={LOOP_TYPES:["controls_repeat","controls_repeat_ext","controls_forEach","controls_for","controls_whileUntil"],suppressPrefixSuffix:!0,getSurroundLoop:function(n){do{if(-1!=t.Constants.Loops.CONTROL_FLOW_IN_LOOP_CHECK_MIXIN.LOOP_TYPES.indexOf(n.type))return n;n=n.getSurroundParent()}while(n);return null},onchange:function(n){if(this.workspace.isDragging&&!this.workspace.isDragging()&&n.type==t.Events.BLOCK_MOVE){var r=t.Constants.Loops.CONTROL_FLOW_IN_LOOP_CHECK_MIXIN.getSurroundLoop(this);if(this.setWarningText(r?null:t.Msg.CONTROLS_FLOW_STATEMENTS_WARNING),!this.isInFlyout){var s=t.Events.getGroup();t.Events.setGroup(n.group),this.setEnabled(r),t.Events.setGroup(s)}}}},t.Extensions.registerMixin("controls_flow_in_loop_check",t.Constants.Loops.CONTROL_FLOW_IN_LOOP_CHECK_MIXIN),t.Blocks.math={},t.Constants.Math={},t.Constants.Math.HUE=230,t.defineBlocksWithJsonArray([{type:"math_number",message0:"%1",args0:[{type:"field_number",name:"NUM",value:0}],output:"Number",helpUrl:"%{BKY_MATH_NUMBER_HELPURL}",style:"math_blocks",tooltip:"%{BKY_MATH_NUMBER_TOOLTIP}",extensions:["parent_tooltip_when_inline"]},{type:"math_arithmetic",message0:"%1 %2 %3",args0:[{type:"input_value",name:"A",check:"Number"},{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_ADDITION_SYMBOL}","ADD"],["%{BKY_MATH_SUBTRACTION_SYMBOL}","MINUS"],["%{BKY_MATH_MULTIPLICATION_SYMBOL}","MULTIPLY"],["%{BKY_MATH_DIVISION_SYMBOL}","DIVIDE"],["%{BKY_MATH_POWER_SYMBOL}","POWER"]]},{type:"input_value",name:"B",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_ARITHMETIC_HELPURL}",extensions:["math_op_tooltip"]},{type:"math_single",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_SINGLE_OP_ROOT}","ROOT"],["%{BKY_MATH_SINGLE_OP_ABSOLUTE}","ABS"],["-","NEG"],["ln","LN"],["log10","LOG10"],["e^","EXP"],["10^","POW10"]]},{type:"input_value",name:"NUM",check:"Number"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_SINGLE_HELPURL}",extensions:["math_op_tooltip"]},{type:"math_trig",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_TRIG_SIN}","SIN"],["%{BKY_MATH_TRIG_COS}","COS"],["%{BKY_MATH_TRIG_TAN}","TAN"],["%{BKY_MATH_TRIG_ASIN}","ASIN"],["%{BKY_MATH_TRIG_ACOS}","ACOS"],["%{BKY_MATH_TRIG_ATAN}","ATAN"]]},{type:"input_value",name:"NUM",check:"Number"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_TRIG_HELPURL}",extensions:["math_op_tooltip"]},{type:"math_constant",message0:"%1",args0:[{type:"field_dropdown",name:"CONSTANT",options:[["\u03c0","PI"],["e","E"],["\u03c6","GOLDEN_RATIO"],["sqrt(2)","SQRT2"],["sqrt(\xbd)","SQRT1_2"],["\u221e","INFINITY"]]}],output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_CONSTANT_TOOLTIP}",helpUrl:"%{BKY_MATH_CONSTANT_HELPURL}"},{type:"math_number_property",message0:"%1 %2",args0:[{type:"input_value",name:"NUMBER_TO_CHECK",check:"Number"},{type:"field_dropdown",name:"PROPERTY",options:[["%{BKY_MATH_IS_EVEN}","EVEN"],["%{BKY_MATH_IS_ODD}","ODD"],["%{BKY_MATH_IS_PRIME}","PRIME"],["%{BKY_MATH_IS_WHOLE}","WHOLE"],["%{BKY_MATH_IS_POSITIVE}","POSITIVE"],["%{BKY_MATH_IS_NEGATIVE}","NEGATIVE"],["%{BKY_MATH_IS_DIVISIBLE_BY}","DIVISIBLE_BY"]]}],inputsInline:!0,output:"Boolean",style:"math_blocks",tooltip:"%{BKY_MATH_IS_TOOLTIP}",mutator:"math_is_divisibleby_mutator"},{type:"math_change",message0:"%{BKY_MATH_CHANGE_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_MATH_CHANGE_TITLE_ITEM}"},{type:"input_value",name:"DELTA",check:"Number"}],previousStatement:null,nextStatement:null,style:"variable_blocks",helpUrl:"%{BKY_MATH_CHANGE_HELPURL}",extensions:["math_change_tooltip"]},{type:"math_round",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_ROUND_OPERATOR_ROUND}","ROUND"],["%{BKY_MATH_ROUND_OPERATOR_ROUNDUP}","ROUNDUP"],["%{BKY_MATH_ROUND_OPERATOR_ROUNDDOWN}","ROUNDDOWN"]]},{type:"input_value",name:"NUM",check:"Number"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_ROUND_HELPURL}",tooltip:"%{BKY_MATH_ROUND_TOOLTIP}"},{type:"math_on_list",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_ONLIST_OPERATOR_SUM}","SUM"],["%{BKY_MATH_ONLIST_OPERATOR_MIN}","MIN"],["%{BKY_MATH_ONLIST_OPERATOR_MAX}","MAX"],["%{BKY_MATH_ONLIST_OPERATOR_AVERAGE}","AVERAGE"],["%{BKY_MATH_ONLIST_OPERATOR_MEDIAN}","MEDIAN"],["%{BKY_MATH_ONLIST_OPERATOR_MODE}","MODE"],["%{BKY_MATH_ONLIST_OPERATOR_STD_DEV}","STD_DEV"],["%{BKY_MATH_ONLIST_OPERATOR_RANDOM}","RANDOM"]]},{type:"input_value",name:"LIST",check:"Array"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_ONLIST_HELPURL}",mutator:"math_modes_of_list_mutator",extensions:["math_op_tooltip"]},{type:"math_modulo",message0:"%{BKY_MATH_MODULO_TITLE}",args0:[{type:"input_value",name:"DIVIDEND",check:"Number"},{type:"input_value",name:"DIVISOR",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_MODULO_TOOLTIP}",helpUrl:"%{BKY_MATH_MODULO_HELPURL}"},{type:"math_constrain",message0:"%{BKY_MATH_CONSTRAIN_TITLE}",args0:[{type:"input_value",name:"VALUE",check:"Number"},{type:"input_value",name:"LOW",check:"Number"},{type:"input_value",name:"HIGH",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_CONSTRAIN_TOOLTIP}",helpUrl:"%{BKY_MATH_CONSTRAIN_HELPURL}"},{type:"math_random_int",message0:"%{BKY_MATH_RANDOM_INT_TITLE}",args0:[{type:"input_value",name:"FROM",check:"Number"},{type:"input_value",name:"TO",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_RANDOM_INT_TOOLTIP}",helpUrl:"%{BKY_MATH_RANDOM_INT_HELPURL}"},{type:"math_random_float",message0:"%{BKY_MATH_RANDOM_FLOAT_TITLE_RANDOM}",output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_RANDOM_FLOAT_TOOLTIP}",helpUrl:"%{BKY_MATH_RANDOM_FLOAT_HELPURL}"},{type:"math_atan2",message0:"%{BKY_MATH_ATAN2_TITLE}",args0:[{type:"input_value",name:"X",check:"Number"},{type:"input_value",name:"Y",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_ATAN2_TOOLTIP}",helpUrl:"%{BKY_MATH_ATAN2_HELPURL}"}]),t.Constants.Math.TOOLTIPS_BY_OP={ADD:"%{BKY_MATH_ARITHMETIC_TOOLTIP_ADD}",MINUS:"%{BKY_MATH_ARITHMETIC_TOOLTIP_MINUS}",MULTIPLY:"%{BKY_MATH_ARITHMETIC_TOOLTIP_MULTIPLY}",DIVIDE:"%{BKY_MATH_ARITHMETIC_TOOLTIP_DIVIDE}",POWER:"%{BKY_MATH_ARITHMETIC_TOOLTIP_POWER}",ROOT:"%{BKY_MATH_SINGLE_TOOLTIP_ROOT}",ABS:"%{BKY_MATH_SINGLE_TOOLTIP_ABS}",NEG:"%{BKY_MATH_SINGLE_TOOLTIP_NEG}",LN:"%{BKY_MATH_SINGLE_TOOLTIP_LN}",LOG10:"%{BKY_MATH_SINGLE_TOOLTIP_LOG10}",EXP:"%{BKY_MATH_SINGLE_TOOLTIP_EXP}",POW10:"%{BKY_MATH_SINGLE_TOOLTIP_POW10}",SIN:"%{BKY_MATH_TRIG_TOOLTIP_SIN}",COS:"%{BKY_MATH_TRIG_TOOLTIP_COS}",TAN:"%{BKY_MATH_TRIG_TOOLTIP_TAN}",ASIN:"%{BKY_MATH_TRIG_TOOLTIP_ASIN}",ACOS:"%{BKY_MATH_TRIG_TOOLTIP_ACOS}",ATAN:"%{BKY_MATH_TRIG_TOOLTIP_ATAN}",SUM:"%{BKY_MATH_ONLIST_TOOLTIP_SUM}",MIN:"%{BKY_MATH_ONLIST_TOOLTIP_MIN}",MAX:"%{BKY_MATH_ONLIST_TOOLTIP_MAX}",AVERAGE:"%{BKY_MATH_ONLIST_TOOLTIP_AVERAGE}",MEDIAN:"%{BKY_MATH_ONLIST_TOOLTIP_MEDIAN}",MODE:"%{BKY_MATH_ONLIST_TOOLTIP_MODE}",STD_DEV:"%{BKY_MATH_ONLIST_TOOLTIP_STD_DEV}",RANDOM:"%{BKY_MATH_ONLIST_TOOLTIP_RANDOM}"},t.Extensions.register("math_op_tooltip",t.Extensions.buildTooltipForDropdown("OP",t.Constants.Math.TOOLTIPS_BY_OP)),t.Constants.Math.IS_DIVISIBLEBY_MUTATOR_MIXIN={mutationToDom:function(){var n=t.utils.xml.createElement("mutation"),r="DIVISIBLE_BY"==this.getFieldValue("PROPERTY");return n.setAttribute("divisor_input",r),n},domToMutation:function(n){n="true"==n.getAttribute("divisor_input"),this.updateShape_(n)},updateShape_:function(n){var r=this.getInput("DIVISOR");n?r||this.appendValueInput("DIVISOR").setCheck("Number"):r&&this.removeInput("DIVISOR")}},t.Constants.Math.IS_DIVISIBLE_MUTATOR_EXTENSION=function(){this.getField("PROPERTY").setValidator(function(n){n="DIVISIBLE_BY"==n,this.getSourceBlock().updateShape_(n)})},t.Extensions.registerMutator("math_is_divisibleby_mutator",t.Constants.Math.IS_DIVISIBLEBY_MUTATOR_MIXIN,t.Constants.Math.IS_DIVISIBLE_MUTATOR_EXTENSION),t.Extensions.register("math_change_tooltip",t.Extensions.buildTooltipWithFieldText("%{BKY_MATH_CHANGE_TOOLTIP}","VAR")),t.Constants.Math.LIST_MODES_MUTATOR_MIXIN={updateType_:function(n){this.outputConnection.setCheck("MODE"==n?"Array":"Number")},mutationToDom:function(){var n=t.utils.xml.createElement("mutation");return n.setAttribute("op",this.getFieldValue("OP")),n},domToMutation:function(n){this.updateType_(n.getAttribute("op"))}},t.Constants.Math.LIST_MODES_MUTATOR_EXTENSION=function(){this.getField("OP").setValidator(function(n){this.updateType_(n)}.bind(this))},t.Extensions.registerMutator("math_modes_of_list_mutator",t.Constants.Math.LIST_MODES_MUTATOR_MIXIN,t.Constants.Math.LIST_MODES_MUTATOR_EXTENSION),t.Blocks.procedures={},t.Blocks.procedures_defnoreturn={init:function(){var n=t.Procedures.findLegalName("",this);(n=new t.FieldTextInput(n,t.Procedures.rename)).setSpellcheck(!1),this.appendDummyInput().appendField(t.Msg.PROCEDURES_DEFNORETURN_TITLE).appendField(n,"NAME").appendField("","PARAMS"),this.setMutator(new t.Mutator(["procedures_mutatorarg"])),(this.workspace.options.comments||this.workspace.options.parentWorkspace&&this.workspace.options.parentWorkspace.options.comments)&&t.Msg.PROCEDURES_DEFNORETURN_COMMENT&&this.setCommentText(t.Msg.PROCEDURES_DEFNORETURN_COMMENT),this.setStyle("procedure_blocks"),this.setTooltip(t.Msg.PROCEDURES_DEFNORETURN_TOOLTIP),this.setHelpUrl(t.Msg.PROCEDURES_DEFNORETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.setStatements_(!0),this.statementConnection_=null},setStatements_:function(n){this.hasStatements_!==n&&(n?(this.appendStatementInput("STACK").appendField(t.Msg.PROCEDURES_DEFNORETURN_DO),this.getInput("RETURN")&&this.moveInputBefore("STACK","RETURN")):this.removeInput("STACK",!0),this.hasStatements_=n)},updateParams_:function(){var n="";this.arguments_.length&&(n=t.Msg.PROCEDURES_BEFORE_PARAMS+" "+this.arguments_.join(", ")),t.Events.disable();try{this.setFieldValue(n,"PARAMS")}finally{t.Events.enable()}},mutationToDom:function(n){var r=t.utils.xml.createElement("mutation");n&&r.setAttribute("name",this.getFieldValue("NAME"));for(var s=0;s<this.argumentVarModels_.length;s++){var u=t.utils.xml.createElement("arg"),y=this.argumentVarModels_[s];u.setAttribute("name",y.name),u.setAttribute("varid",y.getId()),n&&this.paramIds_&&u.setAttribute("paramId",this.paramIds_[s]),r.appendChild(u)}return this.hasStatements_||r.setAttribute("statements","false"),r},domToMutation:function(n){this.arguments_=[],this.argumentVarModels_=[];for(var s,r=0;s=n.childNodes[r];r++)if("arg"==s.nodeName.toLowerCase()){var u=s.getAttribute("name");s=s.getAttribute("varid")||s.getAttribute("varId"),this.arguments_.push(u),null!=(s=t.Variables.getOrCreateVariablePackage(this.workspace,s,u,""))?this.argumentVarModels_.push(s):console.log("Failed to create a variable with name "+u+", ignoring.")}this.updateParams_(),t.Procedures.mutateCallers(this),this.setStatements_("false"!==n.getAttribute("statements"))},decompose:function(n){var r=t.utils.xml.createElement("block");r.setAttribute("type","procedures_mutatorcontainer");var s=t.utils.xml.createElement("statement");s.setAttribute("name","STACK"),r.appendChild(s);for(var u=0;u<this.arguments_.length;u++){var y=t.utils.xml.createElement("block");y.setAttribute("type","procedures_mutatorarg");var x=t.utils.xml.createElement("field");x.setAttribute("name","NAME");var B=t.utils.xml.createTextNode(this.arguments_[u]);x.appendChild(B),y.appendChild(x),x=t.utils.xml.createElement("next"),y.appendChild(x),s.appendChild(y),s=x}return n=t.Xml.domToBlock(r,n),"procedures_defreturn"==this.type?n.setFieldValue(this.hasStatements_,"STATEMENTS"):n.removeInput("STATEMENT_INPUT"),t.Procedures.mutateCallers(this),n},compose:function(n){this.arguments_=[],this.paramIds_=[],this.argumentVarModels_=[];for(var r=n.getInputTargetBlock("STACK");r&&!r.isInsertionMarker();){var s=r.getFieldValue("NAME");this.arguments_.push(s),s=this.workspace.getVariable(s,""),this.argumentVarModels_.push(s),this.paramIds_.push(r.id),r=r.nextConnection&&r.nextConnection.targetBlock()}this.updateParams_(),t.Procedures.mutateCallers(this),null!==(n=n.getFieldValue("STATEMENTS"))&&this.hasStatements_!=(n="TRUE"==n)&&(n?(this.setStatements_(!0),t.Mutator.reconnect(this.statementConnection_,this,"STACK"),this.statementConnection_=null):(n=this.getInput("STACK").connection,(this.statementConnection_=n.targetConnection)&&((n=n.targetBlock()).unplug(),n.bumpNeighbours()),this.setStatements_(!1)))},getProcedureDef:function(){return[this.getFieldValue("NAME"),this.arguments_,!1]},getVars:function(){return this.arguments_},getVarModels:function(){return this.argumentVarModels_},renameVarById:function(n,r){var s=this.workspace.getVariableById(n);if(""==s.type){s=s.name,r=this.workspace.getVariableById(r);for(var u=!1,y=0;y<this.argumentVarModels_.length;y++)this.argumentVarModels_[y].getId()==n&&(this.arguments_[y]=r.name,this.argumentVarModels_[y]=r,u=!0);u&&(this.displayRenamedVar_(s,r.name),t.Procedures.mutateCallers(this))}},updateVarName:function(n){for(var r=n.name,s=!1,u=0;u<this.argumentVarModels_.length;u++)if(this.argumentVarModels_[u].getId()==n.getId()){var y=this.arguments_[u];this.arguments_[u]=r,s=!0}s&&(this.displayRenamedVar_(y,r),t.Procedures.mutateCallers(this))},displayRenamedVar_:function(n,r){if(this.updateParams_(),this.mutator&&this.mutator.isVisible())for(var y,s=this.mutator.workspace_.getAllBlocks(!1),u=0;y=s[u];u++)"procedures_mutatorarg"==y.type&&t.Names.equals(n,y.getFieldValue("NAME"))&&y.setFieldValue(r,"NAME")},customContextMenu:function(n){if(!this.isInFlyout){var r={enabled:!0},s=this.getFieldValue("NAME");r.text=t.Msg.PROCEDURES_CREATE_DO.replace("%1",s);var u=t.utils.xml.createElement("mutation");for(u.setAttribute("name",s),s=0;s<this.arguments_.length;s++){var y=t.utils.xml.createElement("arg");y.setAttribute("name",this.arguments_[s]),u.appendChild(y)}if((s=t.utils.xml.createElement("block")).setAttribute("type",this.callType_),s.appendChild(u),r.callback=t.ContextMenu.callbackFactory(this,s),n.push(r),!this.isCollapsed())for(s=0;s<this.argumentVarModels_.length;s++)(r={enabled:!0}).text=t.Msg.VARIABLES_SET_CREATE_GET.replace("%1",(u=this.argumentVarModels_[s]).name),u=t.Variables.generateVariableFieldDom(u),(y=t.utils.xml.createElement("block")).setAttribute("type","variables_get"),y.appendChild(u),r.callback=t.ContextMenu.callbackFactory(this,y),n.push(r)}},callType_:"procedures_callnoreturn"},t.Blocks.procedures_defreturn={init:function(){var n=t.Procedures.findLegalName("",this);(n=new t.FieldTextInput(n,t.Procedures.rename)).setSpellcheck(!1),this.appendDummyInput().appendField(t.Msg.PROCEDURES_DEFRETURN_TITLE).appendField(n,"NAME").appendField("","PARAMS"),this.appendValueInput("RETURN").setAlign(t.ALIGN_RIGHT).appendField(t.Msg.PROCEDURES_DEFRETURN_RETURN),this.setMutator(new t.Mutator(["procedures_mutatorarg"])),(this.workspace.options.comments||this.workspace.options.parentWorkspace&&this.workspace.options.parentWorkspace.options.comments)&&t.Msg.PROCEDURES_DEFRETURN_COMMENT&&this.setCommentText(t.Msg.PROCEDURES_DEFRETURN_COMMENT),this.setStyle("procedure_blocks"),this.setTooltip(t.Msg.PROCEDURES_DEFRETURN_TOOLTIP),this.setHelpUrl(t.Msg.PROCEDURES_DEFRETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.setStatements_(!0),this.statementConnection_=null},setStatements_:t.Blocks.procedures_defnoreturn.setStatements_,updateParams_:t.Blocks.procedures_defnoreturn.updateParams_,mutationToDom:t.Blocks.procedures_defnoreturn.mutationToDom,domToMutation:t.Blocks.procedures_defnoreturn.domToMutation,decompose:t.Blocks.procedures_defnoreturn.decompose,compose:t.Blocks.procedures_defnoreturn.compose,getProcedureDef:function(){return[this.getFieldValue("NAME"),this.arguments_,!0]},getVars:t.Blocks.procedures_defnoreturn.getVars,getVarModels:t.Blocks.procedures_defnoreturn.getVarModels,renameVarById:t.Blocks.procedures_defnoreturn.renameVarById,updateVarName:t.Blocks.procedures_defnoreturn.updateVarName,displayRenamedVar_:t.Blocks.procedures_defnoreturn.displayRenamedVar_,customContextMenu:t.Blocks.procedures_defnoreturn.customContextMenu,callType_:"procedures_callreturn"},t.Blocks.procedures_mutatorcontainer={init:function(){this.appendDummyInput().appendField(t.Msg.PROCEDURES_MUTATORCONTAINER_TITLE),this.appendStatementInput("STACK"),this.appendDummyInput("STATEMENT_INPUT").appendField(t.Msg.PROCEDURES_ALLOW_STATEMENTS).appendField(new t.FieldCheckbox("TRUE"),"STATEMENTS"),this.setStyle("procedure_blocks"),this.setTooltip(t.Msg.PROCEDURES_MUTATORCONTAINER_TOOLTIP),this.contextMenu=!1}},t.Blocks.procedures_mutatorarg={init:function(){var n=new t.FieldTextInput(t.Procedures.DEFAULT_ARG,this.validator_);n.oldShowEditorFn_=n.showEditor_,n.showEditor_=function(){this.createdVariables_=[],this.oldShowEditorFn_()},this.appendDummyInput().appendField(t.Msg.PROCEDURES_MUTATORARG_TITLE).appendField(n,"NAME"),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setStyle("procedure_blocks"),this.setTooltip(t.Msg.PROCEDURES_MUTATORARG_TOOLTIP),this.contextMenu=!1,n.onFinishEditing_=this.deleteIntermediateVars_,n.createdVariables_=[],n.onFinishEditing_("x")},validator_:function(n){var r=this.getSourceBlock(),s=t.Mutator.findParentWs(r.workspace);if(!(n=n.replace(/[\s\xa0]+/g," ").replace(/^ | $/g,"")))return null;for(var u=(r.workspace.targetWorkspace||r.workspace).getAllBlocks(!1),y=n.toLowerCase(),x=0;x<u.length;x++)if(u[x].id!=this.getSourceBlock().id){var B=u[x].getFieldValue("NAME");if(B&&B.toLowerCase()==y)return null}return r.isInFlyout||((r=s.getVariable(n,""))&&r.name!=n&&s.renameVariableById(r.getId(),n),r||(r=s.createVariable(n,""))&&this.createdVariables_&&this.createdVariables_.push(r)),n},deleteIntermediateVars_:function(n){var r=t.Mutator.findParentWs(this.getSourceBlock().workspace);if(r)for(var s=0;s<this.createdVariables_.length;s++){var u=this.createdVariables_[s];u.name!=n&&r.deleteVariableById(u.getId())}}},t.Blocks.procedures_callnoreturn={init:function(){this.appendDummyInput("TOPROW").appendField("","NAME"),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setStyle("procedure_blocks"),this.setHelpUrl(t.Msg.PROCEDURES_CALLNORETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.quarkConnections_={},this.quarkIds_=null,this.previousEnabledState_=!0},getProcedureCall:function(){return this.getFieldValue("NAME")},renameProcedure:function(n,r){t.Names.equals(n,this.getProcedureCall())&&(this.setFieldValue(r,"NAME"),this.setTooltip((this.outputConnection?t.Msg.PROCEDURES_CALLRETURN_TOOLTIP:t.Msg.PROCEDURES_CALLNORETURN_TOOLTIP).replace("%1",r)))},setProcedureParameters_:function(n,r){var s=t.Procedures.getDefinition(this.getProcedureCall(),this.workspace),u=s&&s.mutator&&s.mutator.isVisible();if(u||(this.quarkConnections_={},this.quarkIds_=null),r)if(n.join("\n")==this.arguments_.join("\n"))this.quarkIds_=r;else{if(r.length!=n.length)throw RangeError("paramNames and paramIds must be the same length.");this.setCollapsed(!1),this.quarkIds_||(this.quarkConnections_={},this.quarkIds_=[]),s=this.rendered,this.rendered=!1;for(var y=0;y<this.arguments_.length;y++){var x=this.getInput("ARG"+y);x&&(this.quarkConnections_[this.quarkIds_[y]]=x=x.connection.targetConnection,u&&x&&-1==r.indexOf(this.quarkIds_[y])&&(x.disconnect(),x.getSourceBlock().bumpNeighbours()))}for(this.arguments_=[].concat(n),this.argumentVarModels_=[],y=0;y<this.arguments_.length;y++)n=t.Variables.getOrCreateVariablePackage(this.workspace,null,this.arguments_[y],""),this.argumentVarModels_.push(n);if(this.updateShape_(),this.quarkIds_=r)for(y=0;y<this.arguments_.length;y++)(r=this.quarkIds_[y])in this.quarkConnections_&&(t.Mutator.reconnect(x=this.quarkConnections_[r],this,"ARG"+y)||delete this.quarkConnections_[r]);(this.rendered=s)&&this.render()}},updateShape_:function(){for(var n=0;n<this.arguments_.length;n++){var r=this.getField("ARGNAME"+n);if(r){t.Events.disable();try{r.setValue(this.arguments_[n])}finally{t.Events.enable()}}else r=new t.FieldLabel(this.arguments_[n]),this.appendValueInput("ARG"+n).setAlign(t.ALIGN_RIGHT).appendField(r,"ARGNAME"+n).init()}for(;this.getInput("ARG"+n);)this.removeInput("ARG"+n),n++;(n=this.getInput("TOPROW"))&&(this.arguments_.length?this.getField("WITH")||(n.appendField(t.Msg.PROCEDURES_CALL_BEFORE_PARAMS,"WITH"),n.init()):this.getField("WITH")&&n.removeField("WITH"))},mutationToDom:function(){var n=t.utils.xml.createElement("mutation");n.setAttribute("name",this.getProcedureCall());for(var r=0;r<this.arguments_.length;r++){var s=t.utils.xml.createElement("arg");s.setAttribute("name",this.arguments_[r]),n.appendChild(s)}return n},domToMutation:function(n){var r=n.getAttribute("name");this.renameProcedure(this.getProcedureCall(),r),r=[];for(var y,s=[],u=0;y=n.childNodes[u];u++)"arg"==y.nodeName.toLowerCase()&&(r.push(y.getAttribute("name")),s.push(y.getAttribute("paramId")));this.setProcedureParameters_(r,s)},getVars:function(){return this.arguments_},getVarModels:function(){return this.argumentVarModels_},onchange:function(n){if(this.workspace&&!this.workspace.isFlyout&&n.recordUndo)if(n.type==t.Events.BLOCK_CREATE&&-1!=n.ids.indexOf(this.id)){var r=this.getProcedureCall();if(!(r=t.Procedures.getDefinition(r,this.workspace))||r.type==this.defType_&&JSON.stringify(r.getVars())==JSON.stringify(this.arguments_)||(r=null),!r){t.Events.setGroup(n.group),n=t.utils.xml.createElement("xml"),(r=t.utils.xml.createElement("block")).setAttribute("type",this.defType_);var s=this.getRelativeToSurfaceXY(),u=s.y+2*t.SNAP_RADIUS;r.setAttribute("x",s.x+t.SNAP_RADIUS*(this.RTL?-1:1)),r.setAttribute("y",u),s=this.mutationToDom(),r.appendChild(s),(s=t.utils.xml.createElement("field")).setAttribute("name","NAME"),(u=this.getProcedureCall())||(u=t.Procedures.findLegalName("",this),this.renameProcedure("",u)),s.appendChild(t.utils.xml.createTextNode(u)),r.appendChild(s),n.appendChild(r),t.Xml.domToWorkspace(n,this.workspace),t.Events.setGroup(!1)}}else n.type==t.Events.BLOCK_DELETE?(r=this.getProcedureCall(),(r=t.Procedures.getDefinition(r,this.workspace))||(t.Events.setGroup(n.group),this.dispose(!0),t.Events.setGroup(!1))):n.type==t.Events.CHANGE&&"disabled"==n.element&&(r=this.getProcedureCall(),(r=t.Procedures.getDefinition(r,this.workspace))&&r.id==n.blockId&&((r=t.Events.getGroup())&&console.log("Saw an existing group while responding to a definition change"),t.Events.setGroup(n.group),n.newValue?(this.previousEnabledState_=this.isEnabled(),this.setEnabled(!1)):this.setEnabled(this.previousEnabledState_),t.Events.setGroup(r)))},customContextMenu:function(n){if(this.workspace.isMovable()){var r={enabled:!0};r.text=t.Msg.PROCEDURES_HIGHLIGHT_DEF;var s=this.getProcedureCall(),u=this.workspace;r.callback=function(){var y=t.Procedures.getDefinition(s,u);y&&(u.centerOnBlock(y.id),y.select())},n.push(r)}},defType_:"procedures_defnoreturn"},t.Blocks.procedures_callreturn={init:function(){this.appendDummyInput("TOPROW").appendField("","NAME"),this.setOutput(!0),this.setStyle("procedure_blocks"),this.setHelpUrl(t.Msg.PROCEDURES_CALLRETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.quarkConnections_={},this.quarkIds_=null,this.previousEnabledState_=!0},getProcedureCall:t.Blocks.procedures_callnoreturn.getProcedureCall,renameProcedure:t.Blocks.procedures_callnoreturn.renameProcedure,setProcedureParameters_:t.Blocks.procedures_callnoreturn.setProcedureParameters_,updateShape_:t.Blocks.procedures_callnoreturn.updateShape_,mutationToDom:t.Blocks.procedures_callnoreturn.mutationToDom,domToMutation:t.Blocks.procedures_callnoreturn.domToMutation,getVars:t.Blocks.procedures_callnoreturn.getVars,getVarModels:t.Blocks.procedures_callnoreturn.getVarModels,onchange:t.Blocks.procedures_callnoreturn.onchange,customContextMenu:t.Blocks.procedures_callnoreturn.customContextMenu,defType_:"procedures_defreturn"},t.Blocks.procedures_ifreturn={init:function(){this.appendValueInput("CONDITION").setCheck("Boolean").appendField(t.Msg.CONTROLS_IF_MSG_IF),this.appendValueInput("VALUE").appendField(t.Msg.PROCEDURES_DEFRETURN_RETURN),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setStyle("procedure_blocks"),this.setTooltip(t.Msg.PROCEDURES_IFRETURN_TOOLTIP),this.setHelpUrl(t.Msg.PROCEDURES_IFRETURN_HELPURL),this.hasReturnValue_=!0},mutationToDom:function(){var n=t.utils.xml.createElement("mutation");return n.setAttribute("value",Number(this.hasReturnValue_)),n},domToMutation:function(n){this.hasReturnValue_=1==n.getAttribute("value"),this.hasReturnValue_||(this.removeInput("VALUE"),this.appendDummyInput("VALUE").appendField(t.Msg.PROCEDURES_DEFRETURN_RETURN))},onchange:function(n){if(this.workspace.isDragging&&!this.workspace.isDragging()){n=!1;var r=this;do{if(-1!=this.FUNCTION_TYPES.indexOf(r.type)){n=!0;break}r=r.getSurroundParent()}while(r);n?("procedures_defnoreturn"==r.type&&this.hasReturnValue_?(this.removeInput("VALUE"),this.appendDummyInput("VALUE").appendField(t.Msg.PROCEDURES_DEFRETURN_RETURN),this.hasReturnValue_=!1):"procedures_defreturn"!=r.type||this.hasReturnValue_||(this.removeInput("VALUE"),this.appendValueInput("VALUE").appendField(t.Msg.PROCEDURES_DEFRETURN_RETURN),this.hasReturnValue_=!0),this.setWarningText(null),this.isInFlyout||this.setEnabled(!0)):(this.setWarningText(t.Msg.PROCEDURES_IFRETURN_WARNING),this.isInFlyout||this.getInheritedDisabled()||this.setEnabled(!1))}},FUNCTION_TYPES:["procedures_defnoreturn","procedures_defreturn"]},t.Blocks.texts={},t.Constants.Text={},t.Constants.Text.HUE=160,t.defineBlocksWithJsonArray([{type:"text",message0:"%1",args0:[{type:"field_input",name:"TEXT",text:""}],output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_TEXT_HELPURL}",tooltip:"%{BKY_TEXT_TEXT_TOOLTIP}",extensions:["text_quotes","parent_tooltip_when_inline"]},{type:"text_multiline",message0:"%1 %2",args0:[{type:"field_image",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAARCAYAAADpPU2iAAAABGdBTUEAALGPC/xhBQAAAAlwSFlzAAAdhgAAHYYBXaITgQAAABh0RVh0U29mdHdhcmUAcGFpbnQubmV0IDQuMS42/U4J6AAAAP1JREFUOE+Vks0KQUEYhjmRIja4ABtZ2dm5A3t3Ia6AUm7CylYuQRaUhZSlLZJiQbFAyRnPN33y01HOW08z8873zpwzM4F3GWOCruvGIE4/rLaV+Nq1hVGMBqzhqlxgCys4wJA65xnogMHsQ5lujnYHTejBBCK2mE4abjCgMGhNxHgDFWjDSG07kdfVa2pZMf4ZyMAdWmpZMfYOsLiDMYMjlMB+K613QISRhTnITnsYg5yUd0DETmEoMlkFOeIT/A58iyK5E18BuTBfgYXfwNJv4P9/oEBerLylOnRhygmGdPpTTBZAPkde61lbQe4moWUvYUZYLfUNftIY4zwA5X2Z9AYnQrEAAAAASUVORK5CYII=",width:12,height:17,alt:"\xb6"},{type:"field_multilinetext",name:"TEXT",text:""}],output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_TEXT_HELPURL}",tooltip:"%{BKY_TEXT_TEXT_TOOLTIP}",extensions:["parent_tooltip_when_inline"]},{type:"text_join",message0:"",output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_JOIN_HELPURL}",tooltip:"%{BKY_TEXT_JOIN_TOOLTIP}",mutator:"text_join_mutator"},{type:"text_create_join_container",message0:"%{BKY_TEXT_CREATE_JOIN_TITLE_JOIN} %1 %2",args0:[{type:"input_dummy"},{type:"input_statement",name:"STACK"}],style:"text_blocks",tooltip:"%{BKY_TEXT_CREATE_JOIN_TOOLTIP}",enableContextMenu:!1},{type:"text_create_join_item",message0:"%{BKY_TEXT_CREATE_JOIN_ITEM_TITLE_ITEM}",previousStatement:null,nextStatement:null,style:"text_blocks",tooltip:"%{BKY_TEXT_CREATE_JOIN_ITEM_TOOLTIP}",enableContextMenu:!1},{type:"text_append",message0:"%{BKY_TEXT_APPEND_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_TEXT_APPEND_VARIABLE}"},{type:"input_value",name:"TEXT"}],previousStatement:null,nextStatement:null,style:"text_blocks",extensions:["text_append_tooltip"]},{type:"text_length",message0:"%{BKY_TEXT_LENGTH_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Number",style:"text_blocks",tooltip:"%{BKY_TEXT_LENGTH_TOOLTIP}",helpUrl:"%{BKY_TEXT_LENGTH_HELPURL}"},{type:"text_isEmpty",message0:"%{BKY_TEXT_ISEMPTY_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Boolean",style:"text_blocks",tooltip:"%{BKY_TEXT_ISEMPTY_TOOLTIP}",helpUrl:"%{BKY_TEXT_ISEMPTY_HELPURL}"},{type:"text_indexOf",message0:"%{BKY_TEXT_INDEXOF_TITLE}",args0:[{type:"input_value",name:"VALUE",check:"String"},{type:"field_dropdown",name:"END",options:[["%{BKY_TEXT_INDEXOF_OPERATOR_FIRST}","FIRST"],["%{BKY_TEXT_INDEXOF_OPERATOR_LAST}","LAST"]]},{type:"input_value",name:"FIND",check:"String"}],output:"Number",style:"text_blocks",helpUrl:"%{BKY_TEXT_INDEXOF_HELPURL}",inputsInline:!0,extensions:["text_indexOf_tooltip"]},{type:"text_charAt",message0:"%{BKY_TEXT_CHARAT_TITLE}",args0:[{type:"input_value",name:"VALUE",check:"String"},{type:"field_dropdown",name:"WHERE",options:[["%{BKY_TEXT_CHARAT_FROM_START}","FROM_START"],["%{BKY_TEXT_CHARAT_FROM_END}","FROM_END"],["%{BKY_TEXT_CHARAT_FIRST}","FIRST"],["%{BKY_TEXT_CHARAT_LAST}","LAST"],["%{BKY_TEXT_CHARAT_RANDOM}","RANDOM"]]}],output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_CHARAT_HELPURL}",inputsInline:!0,mutator:"text_charAt_mutator"}]),t.Blocks.text_getSubstring={init:function(){this.WHERE_OPTIONS_1=[[t.Msg.TEXT_GET_SUBSTRING_START_FROM_START,"FROM_START"],[t.Msg.TEXT_GET_SUBSTRING_START_FROM_END,"FROM_END"],[t.Msg.TEXT_GET_SUBSTRING_START_FIRST,"FIRST"]],this.WHERE_OPTIONS_2=[[t.Msg.TEXT_GET_SUBSTRING_END_FROM_START,"FROM_START"],[t.Msg.TEXT_GET_SUBSTRING_END_FROM_END,"FROM_END"],[t.Msg.TEXT_GET_SUBSTRING_END_LAST,"LAST"]],this.setHelpUrl(t.Msg.TEXT_GET_SUBSTRING_HELPURL),this.setStyle("text_blocks"),this.appendValueInput("STRING").setCheck("String").appendField(t.Msg.TEXT_GET_SUBSTRING_INPUT_IN_TEXT),this.appendDummyInput("AT1"),this.appendDummyInput("AT2"),t.Msg.TEXT_GET_SUBSTRING_TAIL&&this.appendDummyInput("TAIL").appendField(t.Msg.TEXT_GET_SUBSTRING_TAIL),this.setInputsInline(!0),this.setOutput(!0,"String"),this.updateAt_(1,!0),this.updateAt_(2,!0),this.setTooltip(t.Msg.TEXT_GET_SUBSTRING_TOOLTIP)},mutationToDom:function(){var n=t.utils.xml.createElement("mutation"),r=this.getInput("AT1").type==t.INPUT_VALUE;return n.setAttribute("at1",r),r=this.getInput("AT2").type==t.INPUT_VALUE,n.setAttribute("at2",r),n},domToMutation:function(n){var r="true"==n.getAttribute("at1");n="true"==n.getAttribute("at2"),this.updateAt_(1,r),this.updateAt_(2,n)},updateAt_:function(n,r){this.removeInput("AT"+n),this.removeInput("ORDINAL"+n,!0),r?(this.appendValueInput("AT"+n).setCheck("Number"),t.Msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL"+n).appendField(t.Msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT"+n),2==n&&t.Msg.TEXT_GET_SUBSTRING_TAIL&&(this.removeInput("TAIL",!0),this.appendDummyInput("TAIL").appendField(t.Msg.TEXT_GET_SUBSTRING_TAIL));var s=new t.FieldDropdown(this["WHERE_OPTIONS_"+n],function(u){var y="FROM_START"==u||"FROM_END"==u;if(y!=r){var x=this.getSourceBlock();return x.updateAt_(n,y),x.setFieldValue(u,"WHERE"+n),null}});this.getInput("AT"+n).appendField(s,"WHERE"+n),1==n&&(this.moveInputBefore("AT1","AT2"),this.getInput("ORDINAL1")&&this.moveInputBefore("ORDINAL1","AT2"))}},t.Blocks.text_changeCase={init:function(){var n=[[t.Msg.TEXT_CHANGECASE_OPERATOR_UPPERCASE,"UPPERCASE"],[t.Msg.TEXT_CHANGECASE_OPERATOR_LOWERCASE,"LOWERCASE"],[t.Msg.TEXT_CHANGECASE_OPERATOR_TITLECASE,"TITLECASE"]];this.setHelpUrl(t.Msg.TEXT_CHANGECASE_HELPURL),this.setStyle("text_blocks"),this.appendValueInput("TEXT").setCheck("String").appendField(new t.FieldDropdown(n),"CASE"),this.setOutput(!0,"String"),this.setTooltip(t.Msg.TEXT_CHANGECASE_TOOLTIP)}},t.Blocks.text_trim={init:function(){var n=[[t.Msg.TEXT_TRIM_OPERATOR_BOTH,"BOTH"],[t.Msg.TEXT_TRIM_OPERATOR_LEFT,"LEFT"],[t.Msg.TEXT_TRIM_OPERATOR_RIGHT,"RIGHT"]];this.setHelpUrl(t.Msg.TEXT_TRIM_HELPURL),this.setStyle("text_blocks"),this.appendValueInput("TEXT").setCheck("String").appendField(new t.FieldDropdown(n),"MODE"),this.setOutput(!0,"String"),this.setTooltip(t.Msg.TEXT_TRIM_TOOLTIP)}},t.Blocks.text_print={init:function(){this.jsonInit({message0:t.Msg.TEXT_PRINT_TITLE,args0:[{type:"input_value",name:"TEXT"}],previousStatement:null,nextStatement:null,style:"text_blocks",tooltip:t.Msg.TEXT_PRINT_TOOLTIP,helpUrl:t.Msg.TEXT_PRINT_HELPURL})}},t.Blocks.text_prompt_ext={init:function(){var n=[[t.Msg.TEXT_PROMPT_TYPE_TEXT,"TEXT"],[t.Msg.TEXT_PROMPT_TYPE_NUMBER,"NUMBER"]];this.setHelpUrl(t.Msg.TEXT_PROMPT_HELPURL),this.setStyle("text_blocks");var r=this;n=new t.FieldDropdown(n,function(s){r.updateType_(s)}),this.appendValueInput("TEXT").appendField(n,"TYPE"),this.setOutput(!0,"String"),this.setTooltip(function(){return"TEXT"==r.getFieldValue("TYPE")?t.Msg.TEXT_PROMPT_TOOLTIP_TEXT:t.Msg.TEXT_PROMPT_TOOLTIP_NUMBER})},updateType_:function(n){this.outputConnection.setCheck("NUMBER"==n?"Number":"String")},mutationToDom:function(){var n=t.utils.xml.createElement("mutation");return n.setAttribute("type",this.getFieldValue("TYPE")),n},domToMutation:function(n){this.updateType_(n.getAttribute("type"))}},t.Blocks.text_prompt={init:function(){this.mixin(t.Constants.Text.QUOTE_IMAGE_MIXIN);var n=[[t.Msg.TEXT_PROMPT_TYPE_TEXT,"TEXT"],[t.Msg.TEXT_PROMPT_TYPE_NUMBER,"NUMBER"]],r=this;this.setHelpUrl(t.Msg.TEXT_PROMPT_HELPURL),this.setStyle("text_blocks"),n=new t.FieldDropdown(n,function(s){r.updateType_(s)}),this.appendDummyInput().appendField(n,"TYPE").appendField(this.newQuote_(!0)).appendField(new t.FieldTextInput(""),"TEXT").appendField(this.newQuote_(!1)),this.setOutput(!0,"String"),this.setTooltip(function(){return"TEXT"==r.getFieldValue("TYPE")?t.Msg.TEXT_PROMPT_TOOLTIP_TEXT:t.Msg.TEXT_PROMPT_TOOLTIP_NUMBER})},updateType_:t.Blocks.text_prompt_ext.updateType_,mutationToDom:t.Blocks.text_prompt_ext.mutationToDom,domToMutation:t.Blocks.text_prompt_ext.domToMutation},t.Blocks.text_count={init:function(){this.jsonInit({message0:t.Msg.TEXT_COUNT_MESSAGE0,args0:[{type:"input_value",name:"SUB",check:"String"},{type:"input_value",name:"TEXT",check:"String"}],output:"Number",inputsInline:!0,style:"text_blocks",tooltip:t.Msg.TEXT_COUNT_TOOLTIP,helpUrl:t.Msg.TEXT_COUNT_HELPURL})}},t.Blocks.text_replace={init:function(){this.jsonInit({message0:t.Msg.TEXT_REPLACE_MESSAGE0,args0:[{type:"input_value",name:"FROM",check:"String"},{type:"input_value",name:"TO",check:"String"},{type:"input_value",name:"TEXT",check:"String"}],output:"String",inputsInline:!0,style:"text_blocks",tooltip:t.Msg.TEXT_REPLACE_TOOLTIP,helpUrl:t.Msg.TEXT_REPLACE_HELPURL})}},t.Blocks.text_reverse={init:function(){this.jsonInit({message0:t.Msg.TEXT_REVERSE_MESSAGE0,args0:[{type:"input_value",name:"TEXT",check:"String"}],output:"String",inputsInline:!0,style:"text_blocks",tooltip:t.Msg.TEXT_REVERSE_TOOLTIP,helpUrl:t.Msg.TEXT_REVERSE_HELPURL})}},t.Constants.Text.QUOTE_IMAGE_MIXIN={QUOTE_IMAGE_LEFT_DATAURI:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAKCAQAAAAqJXdxAAAAn0lEQVQI1z3OMa5BURSF4f/cQhAKjUQhuQmFNwGJEUi0RKN5rU7FHKhpjEH3TEMtkdBSCY1EIv8r7nFX9e29V7EBAOvu7RPjwmWGH/VuF8CyN9/OAdvqIXYLvtRaNjx9mMTDyo+NjAN1HNcl9ZQ5oQMM3dgDUqDo1l8DzvwmtZN7mnD+PkmLa+4mhrxVA9fRowBWmVBhFy5gYEjKMfz9AylsaRRgGzvZAAAAAElFTkSuQmCC",QUOTE_IMAGE_RIGHT_DATAURI:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAKCAQAAAAqJXdxAAAAqUlEQVQI1z3KvUpCcRiA8ef9E4JNHhI0aFEacm1o0BsI0Slx8wa8gLauoDnoBhq7DcfWhggONDmJJgqCPA7neJ7p934EOOKOnM8Q7PDElo/4x4lFb2DmuUjcUzS3URnGib9qaPNbuXvBO3sGPHJDRG6fGVdMSeWDP2q99FQdFrz26Gu5Tq7dFMzUvbXy8KXeAj57cOklgA+u1B5AoslLtGIHQMaCVnwDnADZIFIrXsoXrgAAAABJRU5ErkJggg==",QUOTE_IMAGE_WIDTH:12,QUOTE_IMAGE_HEIGHT:12,quoteField_:function(n){for(var s,r=0;s=this.inputList[r];r++)for(var y,u=0;y=s.fieldRow[u];u++)if(n==y.name)return s.insertFieldAt(u,this.newQuote_(!0)),void s.insertFieldAt(u+2,this.newQuote_(!1));console.warn('field named "'+n+'" not found in '+this.toDevString())},newQuote_:function(n){return new t.FieldImage((n=this.RTL?!n:n)?this.QUOTE_IMAGE_LEFT_DATAURI:this.QUOTE_IMAGE_RIGHT_DATAURI,this.QUOTE_IMAGE_WIDTH,this.QUOTE_IMAGE_HEIGHT,n?"\u201c":"\u201d")}},t.Constants.Text.TEXT_QUOTES_EXTENSION=function(){this.mixin(t.Constants.Text.QUOTE_IMAGE_MIXIN),this.quoteField_("TEXT")},t.Constants.Text.TEXT_JOIN_MUTATOR_MIXIN={mutationToDom:function(){var n=t.utils.xml.createElement("mutation");return n.setAttribute("items",this.itemCount_),n},domToMutation:function(n){this.itemCount_=parseInt(n.getAttribute("items"),10),this.updateShape_()},decompose:function(n){var r=n.newBlock("text_create_join_container");r.initSvg();for(var s=r.getInput("STACK").connection,u=0;u<this.itemCount_;u++){var y=n.newBlock("text_create_join_item");y.initSvg(),s.connect(y.previousConnection),s=y.nextConnection}return r},compose:function(n){var r=n.getInputTargetBlock("STACK");for(n=[];r&&!r.isInsertionMarker();)n.push(r.valueConnection_),r=r.nextConnection&&r.nextConnection.targetBlock();for(r=0;r<this.itemCount_;r++){var s=this.getInput("ADD"+r).connection.targetConnection;s&&-1==n.indexOf(s)&&s.disconnect()}for(this.itemCount_=n.length,this.updateShape_(),r=0;r<this.itemCount_;r++)t.Mutator.reconnect(n[r],this,"ADD"+r)},saveConnections:function(n){n=n.getInputTargetBlock("STACK");for(var r=0;n;){var s=this.getInput("ADD"+r);n.valueConnection_=s&&s.connection.targetConnection,r++,n=n.nextConnection&&n.nextConnection.targetBlock()}},updateShape_:function(){this.itemCount_&&this.getInput("EMPTY")?this.removeInput("EMPTY"):this.itemCount_||this.getInput("EMPTY")||this.appendDummyInput("EMPTY").appendField(this.newQuote_(!0)).appendField(this.newQuote_(!1));for(var n=0;n<this.itemCount_;n++)if(!this.getInput("ADD"+n)){var r=this.appendValueInput("ADD"+n).setAlign(t.ALIGN_RIGHT);0==n&&r.appendField(t.Msg.TEXT_JOIN_TITLE_CREATEWITH)}for(;this.getInput("ADD"+n);)this.removeInput("ADD"+n),n++}},t.Constants.Text.TEXT_JOIN_EXTENSION=function(){this.mixin(t.Constants.Text.QUOTE_IMAGE_MIXIN),this.itemCount_=2,this.updateShape_(),this.setMutator(new t.Mutator(["text_create_join_item"]))},t.Extensions.register("text_append_tooltip",t.Extensions.buildTooltipWithFieldText("%{BKY_TEXT_APPEND_TOOLTIP}","VAR")),t.Constants.Text.TEXT_INDEXOF_TOOLTIP_EXTENSION=function(){var n=this;this.setTooltip(function(){return t.Msg.TEXT_INDEXOF_TOOLTIP.replace("%1",n.workspace.options.oneBasedIndex?"0":"-1")})},t.Constants.Text.TEXT_CHARAT_MUTATOR_MIXIN={mutationToDom:function(){var n=t.utils.xml.createElement("mutation");return n.setAttribute("at",!!this.isAt_),n},domToMutation:function(n){n="false"!=n.getAttribute("at"),this.updateAt_(n)},updateAt_:function(n){this.removeInput("AT",!0),this.removeInput("ORDINAL",!0),n&&(this.appendValueInput("AT").setCheck("Number"),t.Msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL").appendField(t.Msg.ORDINAL_NUMBER_SUFFIX)),t.Msg.TEXT_CHARAT_TAIL&&(this.removeInput("TAIL",!0),this.appendDummyInput("TAIL").appendField(t.Msg.TEXT_CHARAT_TAIL)),this.isAt_=n}},t.Constants.Text.TEXT_CHARAT_EXTENSION=function(){this.getField("WHERE").setValidator(function(r){(r="FROM_START"==r||"FROM_END"==r)!=this.isAt_&&this.getSourceBlock().updateAt_(r)}),this.updateAt_(!0);var n=this;this.setTooltip(function(){var r=n.getFieldValue("WHERE"),s=t.Msg.TEXT_CHARAT_TOOLTIP;return("FROM_START"==r||"FROM_END"==r)&&(r="FROM_START"==r?t.Msg.LISTS_INDEX_FROM_START_TOOLTIP:t.Msg.LISTS_INDEX_FROM_END_TOOLTIP)&&(s+="  "+r.replace("%1",n.workspace.options.oneBasedIndex?"#1":"#0")),s})},t.Extensions.register("text_indexOf_tooltip",t.Constants.Text.TEXT_INDEXOF_TOOLTIP_EXTENSION),t.Extensions.register("text_quotes",t.Constants.Text.TEXT_QUOTES_EXTENSION),t.Extensions.registerMutator("text_join_mutator",t.Constants.Text.TEXT_JOIN_MUTATOR_MIXIN,t.Constants.Text.TEXT_JOIN_EXTENSION),t.Extensions.registerMutator("text_charAt_mutator",t.Constants.Text.TEXT_CHARAT_MUTATOR_MIXIN,t.Constants.Text.TEXT_CHARAT_EXTENSION),t.Blocks.variables={},t.Constants.Variables={},t.Constants.Variables.HUE=330,t.defineBlocksWithJsonArray([{type:"variables_get",message0:"%1",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"}],output:null,style:"variable_blocks",helpUrl:"%{BKY_VARIABLES_GET_HELPURL}",tooltip:"%{BKY_VARIABLES_GET_TOOLTIP}",extensions:["contextMenu_variableSetterGetter"]},{type:"variables_set",message0:"%{BKY_VARIABLES_SET}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"},{type:"input_value",name:"VALUE"}],previousStatement:null,nextStatement:null,style:"variable_blocks",tooltip:"%{BKY_VARIABLES_SET_TOOLTIP}",helpUrl:"%{BKY_VARIABLES_SET_HELPURL}",extensions:["contextMenu_variableSetterGetter"]}]),t.Constants.Variables.CUSTOM_CONTEXT_MENU_VARIABLE_GETTER_SETTER_MIXIN={customContextMenu:function(n){if(this.isInFlyout)("variables_get"==this.type||"variables_get_reporter"==this.type)&&(r={text:t.Msg.RENAME_VARIABLE,enabled:!0,callback:t.Constants.Variables.RENAME_OPTION_CALLBACK_FACTORY(this)},y=this.getField("VAR").getText(),u={text:t.Msg.DELETE_VARIABLE.replace("%1",y),enabled:!0,callback:t.Constants.Variables.DELETE_OPTION_CALLBACK_FACTORY(this)},n.unshift(r),n.unshift(u));else{if("variables_get"==this.type)var r="variables_set",s=t.Msg.VARIABLES_GET_CREATE_SET;else r="variables_get",s=t.Msg.VARIABLES_SET_CREATE_GET;var u={enabled:0<this.workspace.remainingCapacity()},y=this.getField("VAR").getText();u.text=s.replace("%1",y),(s=t.utils.xml.createElement("field")).setAttribute("name","VAR"),s.appendChild(t.utils.xml.createTextNode(y)),(y=t.utils.xml.createElement("block")).setAttribute("type",r),y.appendChild(s),u.callback=t.ContextMenu.callbackFactory(this,y),n.push(u)}}},t.Constants.Variables.RENAME_OPTION_CALLBACK_FACTORY=function(n){return function(){var r=n.workspace,s=n.getField("VAR").getVariable();t.Variables.renameVariable(r,s)}},t.Constants.Variables.DELETE_OPTION_CALLBACK_FACTORY=function(n){return function(){var r=n.workspace,s=n.getField("VAR").getVariable();r.deleteVariableById(s.getId()),r.refreshToolboxSelection()}},t.Extensions.registerMixin("contextMenu_variableSetterGetter",t.Constants.Variables.CUSTOM_CONTEXT_MENU_VARIABLE_GETTER_SETTER_MIXIN),t.Constants.VariablesDynamic={},t.Constants.VariablesDynamic.HUE=310,t.defineBlocksWithJsonArray([{type:"variables_get_dynamic",message0:"%1",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"}],output:null,style:"variable_dynamic_blocks",helpUrl:"%{BKY_VARIABLES_GET_HELPURL}",tooltip:"%{BKY_VARIABLES_GET_TOOLTIP}",extensions:["contextMenu_variableDynamicSetterGetter"]},{type:"variables_set_dynamic",message0:"%{BKY_VARIABLES_SET}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"},{type:"input_value",name:"VALUE"}],previousStatement:null,nextStatement:null,style:"variable_dynamic_blocks",tooltip:"%{BKY_VARIABLES_SET_TOOLTIP}",helpUrl:"%{BKY_VARIABLES_SET_HELPURL}",extensions:["contextMenu_variableDynamicSetterGetter"]}]),t.Constants.VariablesDynamic.CUSTOM_CONTEXT_MENU_VARIABLE_GETTER_SETTER_MIXIN={customContextMenu:function(n){if(this.isInFlyout)("variables_get_dynamic"==this.type||"variables_get_reporter_dynamic"==this.type)&&(r={text:t.Msg.RENAME_VARIABLE,enabled:!0,callback:t.Constants.Variables.RENAME_OPTION_CALLBACK_FACTORY(this)},x=this.getField("VAR").getText(),y={text:t.Msg.DELETE_VARIABLE.replace("%1",x),enabled:!0,callback:t.Constants.Variables.DELETE_OPTION_CALLBACK_FACTORY(this)},n.unshift(r),n.unshift(y));else{var r=this.getFieldValue("VAR"),s=this.workspace.getVariableById(r).type;if("variables_get_dynamic"==this.type){r="variables_set_dynamic";var u=t.Msg.VARIABLES_GET_CREATE_SET}else r="variables_get_dynamic",u=t.Msg.VARIABLES_SET_CREATE_GET;var y={enabled:0<this.workspace.remainingCapacity()},x=this.getField("VAR").getText();y.text=u.replace("%1",x),(u=t.utils.xml.createElement("field")).setAttribute("name","VAR"),u.setAttribute("variabletype",s),u.appendChild(t.utils.xml.createTextNode(x)),(x=t.utils.xml.createElement("block")).setAttribute("type",r),x.appendChild(u),y.callback=t.ContextMenu.callbackFactory(this,x),n.push(y)}},onchange:function(n){n=this.getFieldValue("VAR"),n=t.Variables.getVariable(this.workspace,n),"variables_get_dynamic"==this.type?this.outputConnection.setCheck(n.type):this.getInput("VALUE").connection.setCheck(n.type)}},t.Constants.VariablesDynamic.RENAME_OPTION_CALLBACK_FACTORY=function(n){return function(){var r=n.workspace,s=n.getField("VAR").getVariable();t.Variables.renameVariable(r,s)}},t.Constants.VariablesDynamic.DELETE_OPTION_CALLBACK_FACTORY=function(n){return function(){var r=n.workspace,s=n.getField("VAR").getVariable();r.deleteVariableById(s.getId()),r.refreshToolboxSelection()}},t.Extensions.registerMixin("contextMenu_variableDynamicSetterGetter",t.Constants.VariablesDynamic.CUSTOM_CONTEXT_MENU_VARIABLE_GETTER_SETTER_MIXIN),t.Blocks}.apply($,_))&&(U.exports=e)},5962:function(U,$,m){var _,e;_=[m(68207),m(39809),m(24773),m(20147)],void 0!==(e=function(t,n,r,s){"use strict";return t.setLocale(n),t.Blocks=t.Blocks||{},Object.keys(r).forEach(function(u){t.Blocks[u]=r[u]}),t.JavaScript=s,t}.apply($,_))&&(U.exports=e)},68207:function(U,$,m){var _,e;_=[m(54364)],void 0!==(e=function(t){"use strict";return t.setLocale=function(n){t.Msg=t.Msg||{},Object.keys(n).forEach(function(r){t.Msg[r]=n[r]})},t}.apply($,_))&&(U.exports=e)},68699:function(U,$,m){var _,e;_=[m(5962)],void 0!==(e=function(t){"use strict";return t}.apply($,_))&&(U.exports=e)},20147:function(U,$,m){var _,e;_=[m(68207),m(19242)],void 0!==(e=function(t,n){"use strict";return t.JavaScript=n,n}.apply($,_))&&(U.exports=e)},19242:function(U,$,m){var _,e;_=[m(46251)],void 0!==(e=function(t){"use strict";return t.JavaScript=new t.Generator("JavaScript"),t.JavaScript.addReservedWords("break,case,catch,class,const,continue,debugger,default,delete,do,else,export,extends,finally,for,function,if,import,in,instanceof,new,return,super,switch,this,throw,try,typeof,var,void,while,with,yield,enum,implements,interface,let,package,private,protected,public,static,await,null,true,false,arguments,"+Object.getOwnPropertyNames(t.utils.global).join(",")),t.JavaScript.ORDER_ATOMIC=0,t.JavaScript.ORDER_NEW=1.1,t.JavaScript.ORDER_MEMBER=1.2,t.JavaScript.ORDER_FUNCTION_CALL=2,t.JavaScript.ORDER_INCREMENT=3,t.JavaScript.ORDER_DECREMENT=3,t.JavaScript.ORDER_BITWISE_NOT=4.1,t.JavaScript.ORDER_UNARY_PLUS=4.2,t.JavaScript.ORDER_UNARY_NEGATION=4.3,t.JavaScript.ORDER_LOGICAL_NOT=4.4,t.JavaScript.ORDER_TYPEOF=4.5,t.JavaScript.ORDER_VOID=4.6,t.JavaScript.ORDER_DELETE=4.7,t.JavaScript.ORDER_AWAIT=4.8,t.JavaScript.ORDER_EXPONENTIATION=5,t.JavaScript.ORDER_MULTIPLICATION=5.1,t.JavaScript.ORDER_DIVISION=5.2,t.JavaScript.ORDER_MODULUS=5.3,t.JavaScript.ORDER_SUBTRACTION=6.1,t.JavaScript.ORDER_ADDITION=6.2,t.JavaScript.ORDER_BITWISE_SHIFT=7,t.JavaScript.ORDER_RELATIONAL=8,t.JavaScript.ORDER_IN=8,t.JavaScript.ORDER_INSTANCEOF=8,t.JavaScript.ORDER_EQUALITY=9,t.JavaScript.ORDER_BITWISE_AND=10,t.JavaScript.ORDER_BITWISE_XOR=11,t.JavaScript.ORDER_BITWISE_OR=12,t.JavaScript.ORDER_LOGICAL_AND=13,t.JavaScript.ORDER_LOGICAL_OR=14,t.JavaScript.ORDER_CONDITIONAL=15,t.JavaScript.ORDER_ASSIGNMENT=16,t.JavaScript.ORDER_YIELD=17,t.JavaScript.ORDER_COMMA=18,t.JavaScript.ORDER_NONE=99,t.JavaScript.ORDER_OVERRIDES=[[t.JavaScript.ORDER_FUNCTION_CALL,t.JavaScript.ORDER_MEMBER],[t.JavaScript.ORDER_FUNCTION_CALL,t.JavaScript.ORDER_FUNCTION_CALL],[t.JavaScript.ORDER_MEMBER,t.JavaScript.ORDER_MEMBER],[t.JavaScript.ORDER_MEMBER,t.JavaScript.ORDER_FUNCTION_CALL],[t.JavaScript.ORDER_LOGICAL_NOT,t.JavaScript.ORDER_LOGICAL_NOT],[t.JavaScript.ORDER_MULTIPLICATION,t.JavaScript.ORDER_MULTIPLICATION],[t.JavaScript.ORDER_ADDITION,t.JavaScript.ORDER_ADDITION],[t.JavaScript.ORDER_LOGICAL_AND,t.JavaScript.ORDER_LOGICAL_AND],[t.JavaScript.ORDER_LOGICAL_OR,t.JavaScript.ORDER_LOGICAL_OR]],t.JavaScript.isInitialized=!1,t.JavaScript.init=function(n){Object.getPrototypeOf(this).init.call(this),this.nameDB_?this.nameDB_.reset():this.nameDB_=new t.Names(this.RESERVED_WORDS_),this.nameDB_.setVariableMap(n.getVariableMap()),this.nameDB_.populateVariables(n),this.nameDB_.populateProcedures(n);for(var r=[],s=t.Variables.allDeveloperVariables(n),u=0;u<s.length;u++)r.push(this.nameDB_.getName(s[u],t.Names.DEVELOPER_VARIABLE_TYPE));for(n=t.Variables.allUsedVarModels(n),u=0;u<n.length;u++)r.push(this.nameDB_.getName(n[u].getId(),t.VARIABLE_CATEGORY_NAME));r.length&&(this.definitions_.variables="var "+r.join(", ")+";"),this.isInitialized=!0},t.JavaScript.finish=function(n){var r=t.utils.object.values(this.definitions_);return n=Object.getPrototypeOf(this).finish.call(this,n),this.isInitialized=!1,this.nameDB_.reset(),r.join("\n\n")+"\n\n\n"+n},t.JavaScript.scrubNakedValue=function(n){return n+";\n"},t.JavaScript.quote_=function(n){return"'"+(n=n.replace(/\\/g,"\\\\").replace(/\n/g,"\\\n").replace(/'/g,"\\'"))+"'"},t.JavaScript.multiline_quote_=function(n){return n.split(/\n/g).map(this.quote_).join(" + '\\n' +\n")},t.JavaScript.scrub_=function(n,r,s){var u="";if(!n.outputConnection||!n.outputConnection.targetConnection){var y=n.getCommentText();y&&(y=t.utils.string.wrap(y,this.COMMENT_WRAP-3),u+=this.prefixLines(y+"\n","// "));for(var x=0;x<n.inputList.length;x++)n.inputList[x].type==t.inputTypes.VALUE&&(y=n.inputList[x].connection.targetBlock())&&(y=this.allNestedComments(y))&&(u+=this.prefixLines(y,"// "))}return n=n.nextConnection&&n.nextConnection.targetBlock(),u+r+(s?"":this.blockToCode(n))},t.JavaScript.getAdjusted=function(n,r,s,u,y){s=s||0,y=y||this.ORDER_NONE,n.workspace.options.oneBasedIndex&&s--;var x=n.workspace.options.oneBasedIndex?"1":"0";if(n=0<s?this.valueToCode(n,r,this.ORDER_ADDITION)||x:0>s?this.valueToCode(n,r,this.ORDER_SUBTRACTION)||x:u?this.valueToCode(n,r,this.ORDER_UNARY_NEGATION)||x:this.valueToCode(n,r,y)||x,t.isNumber(n))n=Number(n)+s,u&&(n=-n);else{if(0<s){n=n+" + "+s;var B=this.ORDER_ADDITION}else 0>s&&(n=n+" - "+-s,B=this.ORDER_SUBTRACTION);u&&(n=s?"-("+n+")":"-"+n,B=this.ORDER_UNARY_NEGATION),B=Math.floor(B),y=Math.floor(y),B&&y>=B&&(n="("+n+")")}return n},t.JavaScript.colour={},t.JavaScript.colour_picker=function(n){return[t.JavaScript.quote_(n.getFieldValue("COLOUR")),t.JavaScript.ORDER_ATOMIC]},t.JavaScript.colour_random=function(n){return[t.JavaScript.provideFunction_("colourRandom",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"() {","  var num = Math.floor(Math.random() * Math.pow(2, 24));","  return '#' + ('00000' + num.toString(16)).substr(-6);","}"])+"()",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.colour_rgb=function(n){var r=t.JavaScript.valueToCode(n,"RED",t.JavaScript.ORDER_NONE)||0,s=t.JavaScript.valueToCode(n,"GREEN",t.JavaScript.ORDER_NONE)||0;return n=t.JavaScript.valueToCode(n,"BLUE",t.JavaScript.ORDER_NONE)||0,[t.JavaScript.provideFunction_("colourRgb",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(r, g, b) {","  r = Math.max(Math.min(Number(r), 100), 0) * 2.55;","  g = Math.max(Math.min(Number(g), 100), 0) * 2.55;","  b = Math.max(Math.min(Number(b), 100), 0) * 2.55;","  r = ('0' + (Math.round(r) || 0).toString(16)).slice(-2);","  g = ('0' + (Math.round(g) || 0).toString(16)).slice(-2);","  b = ('0' + (Math.round(b) || 0).toString(16)).slice(-2);","  return '#' + r + g + b;","}"])+"("+r+", "+s+", "+n+")",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.colour_blend=function(n){var r=t.JavaScript.valueToCode(n,"COLOUR1",t.JavaScript.ORDER_NONE)||"'#000000'",s=t.JavaScript.valueToCode(n,"COLOUR2",t.JavaScript.ORDER_NONE)||"'#000000'";return n=t.JavaScript.valueToCode(n,"RATIO",t.JavaScript.ORDER_NONE)||.5,[t.JavaScript.provideFunction_("colourBlend",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(c1, c2, ratio) {","  ratio = Math.max(Math.min(Number(ratio), 1), 0);","  var r1 = parseInt(c1.substring(1, 3), 16);","  var g1 = parseInt(c1.substring(3, 5), 16);","  var b1 = parseInt(c1.substring(5, 7), 16);","  var r2 = parseInt(c2.substring(1, 3), 16);","  var g2 = parseInt(c2.substring(3, 5), 16);","  var b2 = parseInt(c2.substring(5, 7), 16);","  var r = Math.round(r1 * (1 - ratio) + r2 * ratio);","  var g = Math.round(g1 * (1 - ratio) + g2 * ratio);","  var b = Math.round(b1 * (1 - ratio) + b2 * ratio);","  r = ('0' + (r || 0).toString(16)).slice(-2);","  g = ('0' + (g || 0).toString(16)).slice(-2);","  b = ('0' + (b || 0).toString(16)).slice(-2);","  return '#' + r + g + b;","}"])+"("+r+", "+s+", "+n+")",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.lists={},t.JavaScript.lists_create_empty=function(n){return["[]",t.JavaScript.ORDER_ATOMIC]},t.JavaScript.lists_create_with=function(n){for(var r=Array(n.itemCount_),s=0;s<n.itemCount_;s++)r[s]=t.JavaScript.valueToCode(n,"ADD"+s,t.JavaScript.ORDER_NONE)||"null";return["["+r.join(", ")+"]",t.JavaScript.ORDER_ATOMIC]},t.JavaScript.lists_repeat=function(n){return[t.JavaScript.provideFunction_("listsRepeat",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(value, n) {","  var array = [];","  for (var i = 0; i < n; i++) {","    array[i] = value;","  }","  return array;","}"])+"("+(t.JavaScript.valueToCode(n,"ITEM",t.JavaScript.ORDER_NONE)||"null")+", "+(n=t.JavaScript.valueToCode(n,"NUM",t.JavaScript.ORDER_NONE)||"0")+")",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.lists_length=function(n){return[(t.JavaScript.valueToCode(n,"VALUE",t.JavaScript.ORDER_MEMBER)||"[]")+".length",t.JavaScript.ORDER_MEMBER]},t.JavaScript.lists_isEmpty=function(n){return["!"+(t.JavaScript.valueToCode(n,"VALUE",t.JavaScript.ORDER_MEMBER)||"[]")+".length",t.JavaScript.ORDER_LOGICAL_NOT]},t.JavaScript.lists_indexOf=function(n){var r="FIRST"==n.getFieldValue("END")?"indexOf":"lastIndexOf",s=t.JavaScript.valueToCode(n,"FIND",t.JavaScript.ORDER_NONE)||"''";return r=(t.JavaScript.valueToCode(n,"VALUE",t.JavaScript.ORDER_MEMBER)||"[]")+"."+r+"("+s+")",n.workspace.options.oneBasedIndex?[r+" + 1",t.JavaScript.ORDER_ADDITION]:[r,t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.lists_getIndex=function(n){var r=n.getFieldValue("MODE")||"GET",s=n.getFieldValue("WHERE")||"FROM_START",u=t.JavaScript.valueToCode(n,"VALUE","RANDOM"==s?t.JavaScript.ORDER_NONE:t.JavaScript.ORDER_MEMBER)||"[]";switch(s){case"FIRST":if("GET"==r)return[u+"[0]",t.JavaScript.ORDER_MEMBER];if("GET_REMOVE"==r)return[u+".shift()",t.JavaScript.ORDER_MEMBER];if("REMOVE"==r)return u+".shift();\n";break;case"LAST":if("GET"==r)return[u+".slice(-1)[0]",t.JavaScript.ORDER_MEMBER];if("GET_REMOVE"==r)return[u+".pop()",t.JavaScript.ORDER_MEMBER];if("REMOVE"==r)return u+".pop();\n";break;case"FROM_START":if(n=t.JavaScript.getAdjusted(n,"AT"),"GET"==r)return[u+"["+n+"]",t.JavaScript.ORDER_MEMBER];if("GET_REMOVE"==r)return[u+".splice("+n+", 1)[0]",t.JavaScript.ORDER_FUNCTION_CALL];if("REMOVE"==r)return u+".splice("+n+", 1);\n";break;case"FROM_END":if(n=t.JavaScript.getAdjusted(n,"AT",1,!0),"GET"==r)return[u+".slice("+n+")[0]",t.JavaScript.ORDER_FUNCTION_CALL];if("GET_REMOVE"==r)return[u+".splice("+n+", 1)[0]",t.JavaScript.ORDER_FUNCTION_CALL];if("REMOVE"==r)return u+".splice("+n+", 1);";break;case"RANDOM":if(u=t.JavaScript.provideFunction_("listsGetRandomItem",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(list, remove) {","  var x = Math.floor(Math.random() * list.length);","  if (remove) {","    return list.splice(x, 1)[0];","  } else {","    return list[x];","  }","}"])+"("+u+", "+("GET"!=r)+")","GET"==r||"GET_REMOVE"==r)return[u,t.JavaScript.ORDER_FUNCTION_CALL];if("REMOVE"==r)return u+";\n"}throw Error("Unhandled combination (lists_getIndex).")},t.JavaScript.lists_setIndex=function(n){function r(){if(s.match(/^\w+$/))return"";var B=t.JavaScript.nameDB_.getDistinctName("tmpList",t.VARIABLE_CATEGORY_NAME),Q="var "+B+" = "+s+";\n";return s=B,Q}var s=t.JavaScript.valueToCode(n,"LIST",t.JavaScript.ORDER_MEMBER)||"[]",u=n.getFieldValue("MODE")||"GET",y=n.getFieldValue("WHERE")||"FROM_START",x=t.JavaScript.valueToCode(n,"TO",t.JavaScript.ORDER_ASSIGNMENT)||"null";switch(y){case"FIRST":if("SET"==u)return s+"[0] = "+x+";\n";if("INSERT"==u)return s+".unshift("+x+");\n";break;case"LAST":if("SET"==u)return(n=r())+(s+"[")+s+".length - 1] = "+x+";\n";if("INSERT"==u)return s+".push("+x+");\n";break;case"FROM_START":if(y=t.JavaScript.getAdjusted(n,"AT"),"SET"==u)return s+"["+y+"] = "+x+";\n";if("INSERT"==u)return s+".splice("+y+", 0, "+x+");\n";break;case"FROM_END":if(y=t.JavaScript.getAdjusted(n,"AT",1,!1,t.JavaScript.ORDER_SUBTRACTION),n=r(),"SET"==u)return n+(s+"[")+s+".length - "+y+"] = "+x+";\n";if("INSERT"==u)return n+(s+".splice(")+s+".length - "+y+", 0, "+x+");\n";break;case"RANDOM":if(n=r(),n+="var "+(y=t.JavaScript.nameDB_.getDistinctName("tmpX",t.VARIABLE_CATEGORY_NAME))+" = Math.floor(Math.random() * "+s+".length);\n","SET"==u)return n+(s+"[")+y+"] = "+x+";\n";if("INSERT"==u)return n+(s+".splice(")+y+", 0, "+x+");\n"}throw Error("Unhandled combination (lists_setIndex).")},t.JavaScript.lists.getIndex_=function(n,r,s){return"FIRST"==r?"0":"FROM_END"==r?n+".length - 1 - "+s:"LAST"==r?n+".length - 1":s},t.JavaScript.lists_getSublist=function(n){var r=t.JavaScript.valueToCode(n,"LIST",t.JavaScript.ORDER_MEMBER)||"[]",s=n.getFieldValue("WHERE1"),u=n.getFieldValue("WHERE2");if("FIRST"==s&&"LAST"==u)r+=".slice(0)";else if(r.match(/^\w+$/)||"FROM_END"!=s&&"FROM_START"==u){switch(s){case"FROM_START":var y=t.JavaScript.getAdjusted(n,"AT1");break;case"FROM_END":y=r+".length - "+(y=t.JavaScript.getAdjusted(n,"AT1",1,!1,t.JavaScript.ORDER_SUBTRACTION));break;case"FIRST":y="0";break;default:throw Error("Unhandled option (lists_getSublist).")}switch(u){case"FROM_START":n=t.JavaScript.getAdjusted(n,"AT2",1);break;case"FROM_END":n=r+".length - "+(n=t.JavaScript.getAdjusted(n,"AT2",0,!1,t.JavaScript.ORDER_SUBTRACTION));break;case"LAST":n=r+".length";break;default:throw Error("Unhandled option (lists_getSublist).")}r=r+".slice("+y+", "+n+")"}else{y=t.JavaScript.getAdjusted(n,"AT1"),n=t.JavaScript.getAdjusted(n,"AT2");var x=t.JavaScript.lists.getIndex_,B={FIRST:"First",LAST:"Last",FROM_START:"FromStart",FROM_END:"FromEnd"};r=t.JavaScript.provideFunction_("subsequence"+B[s]+B[u],["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(sequence"+("FROM_END"==s||"FROM_START"==s?", at1":"")+("FROM_END"==u||"FROM_START"==u?", at2":"")+") {","  var start = "+x("sequence",s,"at1")+";","  var end = "+x("sequence",u,"at2")+" + 1;","  return sequence.slice(start, end);","}"])+"("+r+("FROM_END"==s||"FROM_START"==s?", "+y:"")+("FROM_END"==u||"FROM_START"==u?", "+n:"")+")"}return[r,t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.lists_sort=function(n){var r=t.JavaScript.valueToCode(n,"LIST",t.JavaScript.ORDER_FUNCTION_CALL)||"[]",s="1"===n.getFieldValue("DIRECTION")?1:-1;return n=n.getFieldValue("TYPE"),[r+".slice().sort("+t.JavaScript.provideFunction_("listsGetSortCompare",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(type, direction) {","  var compareFuncs = {",'    "NUMERIC": function(a, b) {',"        return Number(a) - Number(b); },",'    "TEXT": function(a, b) {',"        return a.toString() > b.toString() ? 1 : -1; },",'    "IGNORE_CASE": function(a, b) {',"        return a.toString().toLowerCase() > b.toString().toLowerCase() ? 1 : -1; },","  };","  var compare = compareFuncs[type];","  return function(a, b) { return compare(a, b) * direction; }","}"])+'("'+n+'", '+s+"))",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.lists_split=function(n){var r=t.JavaScript.valueToCode(n,"INPUT",t.JavaScript.ORDER_MEMBER),s=t.JavaScript.valueToCode(n,"DELIM",t.JavaScript.ORDER_NONE)||"''";if("SPLIT"==(n=n.getFieldValue("MODE")))r||(r="''"),n="split";else{if("JOIN"!=n)throw Error("Unknown mode: "+n);r||(r="[]"),n="join"}return[r+"."+n+"("+s+")",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.lists_reverse=function(n){return[(t.JavaScript.valueToCode(n,"LIST",t.JavaScript.ORDER_FUNCTION_CALL)||"[]")+".slice().reverse()",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.logic={},t.JavaScript.controls_if=function(n){var r=0,s="";t.JavaScript.STATEMENT_PREFIX&&(s+=t.JavaScript.injectId(t.JavaScript.STATEMENT_PREFIX,n));do{var u=t.JavaScript.valueToCode(n,"IF"+r,t.JavaScript.ORDER_NONE)||"false",y=t.JavaScript.statementToCode(n,"DO"+r);t.JavaScript.STATEMENT_SUFFIX&&(y=t.JavaScript.prefixLines(t.JavaScript.injectId(t.JavaScript.STATEMENT_SUFFIX,n),t.JavaScript.INDENT)+y),s+=(0<r?" else ":"")+"if ("+u+") {\n"+y+"}",++r}while(n.getInput("IF"+r));return(n.getInput("ELSE")||t.JavaScript.STATEMENT_SUFFIX)&&(y=t.JavaScript.statementToCode(n,"ELSE"),t.JavaScript.STATEMENT_SUFFIX&&(y=t.JavaScript.prefixLines(t.JavaScript.injectId(t.JavaScript.STATEMENT_SUFFIX,n),t.JavaScript.INDENT)+y),s+=" else {\n"+y+"}"),s+"\n"},t.JavaScript.controls_ifelse=t.JavaScript.controls_if,t.JavaScript.logic_compare=function(n){var r={EQ:"==",NEQ:"!=",LT:"<",LTE:"<=",GT:">",GTE:">="}[n.getFieldValue("OP")],s="=="==r||"!="==r?t.JavaScript.ORDER_EQUALITY:t.JavaScript.ORDER_RELATIONAL;return[(t.JavaScript.valueToCode(n,"A",s)||"0")+" "+r+" "+(n=t.JavaScript.valueToCode(n,"B",s)||"0"),s]},t.JavaScript.logic_operation=function(n){var r="AND"==n.getFieldValue("OP")?"&&":"||",s="&&"==r?t.JavaScript.ORDER_LOGICAL_AND:t.JavaScript.ORDER_LOGICAL_OR,u=t.JavaScript.valueToCode(n,"A",s);if(n=t.JavaScript.valueToCode(n,"B",s),u||n){var y="&&"==r?"true":"false";u||(u=y),n||(n=y)}else n=u="false";return[u+" "+r+" "+n,s]},t.JavaScript.logic_negate=function(n){var r=t.JavaScript.ORDER_LOGICAL_NOT;return["!"+(t.JavaScript.valueToCode(n,"BOOL",r)||"true"),r]},t.JavaScript.logic_boolean=function(n){return["TRUE"==n.getFieldValue("BOOL")?"true":"false",t.JavaScript.ORDER_ATOMIC]},t.JavaScript.logic_null=function(n){return["null",t.JavaScript.ORDER_ATOMIC]},t.JavaScript.logic_ternary=function(n){return[(t.JavaScript.valueToCode(n,"IF",t.JavaScript.ORDER_CONDITIONAL)||"false")+" ? "+(t.JavaScript.valueToCode(n,"THEN",t.JavaScript.ORDER_CONDITIONAL)||"null")+" : "+(n=t.JavaScript.valueToCode(n,"ELSE",t.JavaScript.ORDER_CONDITIONAL)||"null"),t.JavaScript.ORDER_CONDITIONAL]},t.JavaScript.loops={},t.JavaScript.controls_repeat_ext=function(n){var r=n.getField("TIMES")?String(Number(n.getFieldValue("TIMES"))):t.JavaScript.valueToCode(n,"TIMES",t.JavaScript.ORDER_ASSIGNMENT)||"0",s=t.JavaScript.statementToCode(n,"DO");s=t.JavaScript.addLoopTrap(s,n),n="";var u=t.JavaScript.nameDB_.getDistinctName("count",t.VARIABLE_CATEGORY_NAME),y=r;return r.match(/^\w+$/)||t.isNumber(r)||(n+="var "+(y=t.JavaScript.nameDB_.getDistinctName("repeat_end",t.VARIABLE_CATEGORY_NAME))+" = "+r+";\n"),n+"for (var "+u+" = 0; "+u+" < "+y+"; "+u+"++) {\n"+s+"}\n"},t.JavaScript.controls_repeat=t.JavaScript.controls_repeat_ext,t.JavaScript.controls_whileUntil=function(n){var r="UNTIL"==n.getFieldValue("MODE"),s=t.JavaScript.valueToCode(n,"BOOL",r?t.JavaScript.ORDER_LOGICAL_NOT:t.JavaScript.ORDER_NONE)||"false",u=t.JavaScript.statementToCode(n,"DO");return r&&(s="!"+s),"while ("+s+") {\n"+(u=t.JavaScript.addLoopTrap(u,n))+"}\n"},t.JavaScript.controls_for=function(n){var r=t.JavaScript.nameDB_.getName(n.getFieldValue("VAR"),t.VARIABLE_CATEGORY_NAME),s=t.JavaScript.valueToCode(n,"FROM",t.JavaScript.ORDER_ASSIGNMENT)||"0",u=t.JavaScript.valueToCode(n,"TO",t.JavaScript.ORDER_ASSIGNMENT)||"0",y=t.JavaScript.valueToCode(n,"BY",t.JavaScript.ORDER_ASSIGNMENT)||"1",x=t.JavaScript.statementToCode(n,"DO");if(x=t.JavaScript.addLoopTrap(x,n),t.isNumber(s)&&t.isNumber(u)&&t.isNumber(y)){var B=Number(s)<=Number(u);n="for ("+r+" = "+s+"; "+r+(B?" <= ":" >= ")+u+"; "+r,n=(1==(r=Math.abs(Number(y)))?n+(B?"++":"--"):n+(B?" += ":" -= ")+r)+") {\n"+x+"}\n"}else n="",B=s,s.match(/^\w+$/)||t.isNumber(s)||(n+="var "+(B=t.JavaScript.nameDB_.getDistinctName(r+"_start",t.VARIABLE_CATEGORY_NAME))+" = "+s+";\n"),s=u,u.match(/^\w+$/)||t.isNumber(u)||(n+="var "+(s=t.JavaScript.nameDB_.getDistinctName(r+"_end",t.VARIABLE_CATEGORY_NAME))+" = "+u+";\n"),n+="var "+(u=t.JavaScript.nameDB_.getDistinctName(r+"_inc",t.VARIABLE_CATEGORY_NAME))+" = ",n=(n=t.isNumber(y)?n+(Math.abs(y)+";\n"):n+"Math.abs("+y+");\n")+"if ("+B+" > "+s+") {\n"+(t.JavaScript.INDENT+u)+" = -"+u+";\n",n+="}\n",n+="for ("+r+" = "+B+"; "+u+" >= 0 ? "+r+" <= "+s+" : "+r+" >= "+s+"; "+r+" += "+u+") {\n"+x+"}\n";return n},t.JavaScript.controls_forEach=function(n){var r=t.JavaScript.nameDB_.getName(n.getFieldValue("VAR"),t.VARIABLE_CATEGORY_NAME),s=t.JavaScript.valueToCode(n,"LIST",t.JavaScript.ORDER_ASSIGNMENT)||"[]",u=t.JavaScript.statementToCode(n,"DO");u=t.JavaScript.addLoopTrap(u,n),n="";var y=s;return s.match(/^\w+$/)||(n+="var "+(y=t.JavaScript.nameDB_.getDistinctName(r+"_list",t.VARIABLE_CATEGORY_NAME))+" = "+s+";\n"),n+"for (var "+(s=t.JavaScript.nameDB_.getDistinctName(r+"_index",t.VARIABLE_CATEGORY_NAME))+" in "+y+") {\n"+(u=t.JavaScript.INDENT+r+" = "+y+"["+s+"];\n"+u)+"}\n"},t.JavaScript.controls_flow_statements=function(n){var r="";if(t.JavaScript.STATEMENT_PREFIX&&(r+=t.JavaScript.injectId(t.JavaScript.STATEMENT_PREFIX,n)),t.JavaScript.STATEMENT_SUFFIX&&(r+=t.JavaScript.injectId(t.JavaScript.STATEMENT_SUFFIX,n)),t.JavaScript.STATEMENT_PREFIX){var s=t.Constants.Loops.CONTROL_FLOW_IN_LOOP_CHECK_MIXIN.getSurroundLoop(n);s&&!s.suppressPrefixSuffix&&(r+=t.JavaScript.injectId(t.JavaScript.STATEMENT_PREFIX,s))}switch(n.getFieldValue("FLOW")){case"BREAK":return r+"break;\n";case"CONTINUE":return r+"continue;\n"}throw Error("Unknown flow statement.")},t.JavaScript.math={},t.JavaScript.math_number=function(n){return[n=Number(n.getFieldValue("NUM")),0<=n?t.JavaScript.ORDER_ATOMIC:t.JavaScript.ORDER_UNARY_NEGATION]},t.JavaScript.math_arithmetic=function(n){var r={ADD:[" + ",t.JavaScript.ORDER_ADDITION],MINUS:[" - ",t.JavaScript.ORDER_SUBTRACTION],MULTIPLY:[" * ",t.JavaScript.ORDER_MULTIPLICATION],DIVIDE:[" / ",t.JavaScript.ORDER_DIVISION],POWER:[null,t.JavaScript.ORDER_NONE]}[n.getFieldValue("OP")],s=r[0],u=t.JavaScript.valueToCode(n,"A",r=r[1])||"0";return n=t.JavaScript.valueToCode(n,"B",r)||"0",s?[u+s+n,r]:["Math.pow("+u+", "+n+")",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.math_single=function(n){var r=n.getFieldValue("OP");if("NEG"==r)return"-"==(n=t.JavaScript.valueToCode(n,"NUM",t.JavaScript.ORDER_UNARY_NEGATION)||"0")[0]&&(n=" "+n),["-"+n,t.JavaScript.ORDER_UNARY_NEGATION];switch(n="SIN"==r||"COS"==r||"TAN"==r?t.JavaScript.valueToCode(n,"NUM",t.JavaScript.ORDER_DIVISION)||"0":t.JavaScript.valueToCode(n,"NUM",t.JavaScript.ORDER_NONE)||"0",r){case"ABS":var s="Math.abs("+n+")";break;case"ROOT":s="Math.sqrt("+n+")";break;case"LN":s="Math.log("+n+")";break;case"EXP":s="Math.exp("+n+")";break;case"POW10":s="Math.pow(10,"+n+")";break;case"ROUND":s="Math.round("+n+")";break;case"ROUNDUP":s="Math.ceil("+n+")";break;case"ROUNDDOWN":s="Math.floor("+n+")";break;case"SIN":s="Math.sin("+n+" / 180 * Math.PI)";break;case"COS":s="Math.cos("+n+" / 180 * Math.PI)";break;case"TAN":s="Math.tan("+n+" / 180 * Math.PI)"}if(s)return[s,t.JavaScript.ORDER_FUNCTION_CALL];switch(r){case"LOG10":s="Math.log("+n+") / Math.log(10)";break;case"ASIN":s="Math.asin("+n+") / Math.PI * 180";break;case"ACOS":s="Math.acos("+n+") / Math.PI * 180";break;case"ATAN":s="Math.atan("+n+") / Math.PI * 180";break;default:throw Error("Unknown math operator: "+r)}return[s,t.JavaScript.ORDER_DIVISION]},t.JavaScript.math_constant=function(n){return{PI:["Math.PI",t.JavaScript.ORDER_MEMBER],E:["Math.E",t.JavaScript.ORDER_MEMBER],GOLDEN_RATIO:["(1 + Math.sqrt(5)) / 2",t.JavaScript.ORDER_DIVISION],SQRT2:["Math.SQRT2",t.JavaScript.ORDER_MEMBER],SQRT1_2:["Math.SQRT1_2",t.JavaScript.ORDER_MEMBER],INFINITY:["Infinity",t.JavaScript.ORDER_ATOMIC]}[n.getFieldValue("CONSTANT")]},t.JavaScript.math_number_property=function(n){var r=t.JavaScript.valueToCode(n,"NUMBER_TO_CHECK",t.JavaScript.ORDER_MODULUS)||"0",s=n.getFieldValue("PROPERTY");if("PRIME"==s)return[t.JavaScript.provideFunction_("mathIsPrime",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(n) {","  // https://en.wikipedia.org/wiki/Primality_test#Naive_methods","  if (n == 2 || n == 3) {","    return true;","  }","  // False if n is NaN, negative, is 1, or not whole.","  // And false if n is divisible by 2 or 3.","  if (isNaN(n) || n <= 1 || n % 1 != 0 || n % 2 == 0 || n % 3 == 0) {","    return false;","  }","  // Check all the numbers of form 6k +/- 1, up to sqrt(n).","  for (var x = 6; x <= Math.sqrt(n) + 1; x += 6) {","    if (n % (x - 1) == 0 || n % (x + 1) == 0) {","      return false;","    }","  }","  return true;","}"])+"("+r+")",t.JavaScript.ORDER_FUNCTION_CALL];switch(s){case"EVEN":var u=r+" % 2 == 0";break;case"ODD":u=r+" % 2 == 1";break;case"WHOLE":u=r+" % 1 == 0";break;case"POSITIVE":u=r+" > 0";break;case"NEGATIVE":u=r+" < 0";break;case"DIVISIBLE_BY":u=r+" % "+(n=t.JavaScript.valueToCode(n,"DIVISOR",t.JavaScript.ORDER_MODULUS)||"0")+" == 0"}return[u,t.JavaScript.ORDER_EQUALITY]},t.JavaScript.math_change=function(n){var r=t.JavaScript.valueToCode(n,"DELTA",t.JavaScript.ORDER_ADDITION)||"0";return(n=t.JavaScript.nameDB_.getName(n.getFieldValue("VAR"),t.VARIABLE_CATEGORY_NAME))+" = (typeof "+n+" == 'number' ? "+n+" : 0) + "+r+";\n"},t.JavaScript.math_round=t.JavaScript.math_single,t.JavaScript.math_trig=t.JavaScript.math_single,t.JavaScript.math_on_list=function(n){var r=n.getFieldValue("OP");switch(r){case"SUM":n=t.JavaScript.valueToCode(n,"LIST",t.JavaScript.ORDER_MEMBER)||"[]",n+=".reduce(function(x, y) {return x + y;})";break;case"MIN":n="Math.min.apply(null, "+(n=t.JavaScript.valueToCode(n,"LIST",t.JavaScript.ORDER_NONE)||"[]")+")";break;case"MAX":n="Math.max.apply(null, "+(n=t.JavaScript.valueToCode(n,"LIST",t.JavaScript.ORDER_NONE)||"[]")+")";break;case"AVERAGE":n=(r=t.JavaScript.provideFunction_("mathMean",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(myList) {","  return myList.reduce(function(x, y) {return x + y;}) / myList.length;","}"]))+"("+(n=t.JavaScript.valueToCode(n,"LIST",t.JavaScript.ORDER_NONE)||"[]")+")";break;case"MEDIAN":n=(r=t.JavaScript.provideFunction_("mathMedian",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(myList) {","  var localList = myList.filter(function (x) {return typeof x == 'number';});","  if (!localList.length) return null;","  localList.sort(function(a, b) {return b - a;});","  if (localList.length % 2 == 0) {","    return (localList[localList.length / 2 - 1] + localList[localList.length / 2]) / 2;","  } else {","    return localList[(localList.length - 1) / 2];","  }","}"]))+"("+(n=t.JavaScript.valueToCode(n,"LIST",t.JavaScript.ORDER_NONE)||"[]")+")";break;case"MODE":n=(r=t.JavaScript.provideFunction_("mathModes",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(values) {","  var modes = [];","  var counts = [];","  var maxCount = 0;","  for (var i = 0; i < values.length; i++) {","    var value = values[i];","    var found = false;","    var thisCount;","    for (var j = 0; j < counts.length; j++) {","      if (counts[j][0] === value) {","        thisCount = ++counts[j][1];","        found = true;","        break;","      }","    }","    if (!found) {","      counts.push([value, 1]);","      thisCount = 1;","    }","    maxCount = Math.max(thisCount, maxCount);","  }","  for (var j = 0; j < counts.length; j++) {","    if (counts[j][1] == maxCount) {","        modes.push(counts[j][0]);","    }","  }","  return modes;","}"]))+"("+(n=t.JavaScript.valueToCode(n,"LIST",t.JavaScript.ORDER_NONE)||"[]")+")";break;case"STD_DEV":n=(r=t.JavaScript.provideFunction_("mathStandardDeviation",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(numbers) {","  var n = numbers.length;","  if (!n) return null;","  var mean = numbers.reduce(function(x, y) {return x + y;}) / n;","  var variance = 0;","  for (var j = 0; j < n; j++) {","    variance += Math.pow(numbers[j] - mean, 2);","  }","  variance = variance / n;","  return Math.sqrt(variance);","}"]))+"("+(n=t.JavaScript.valueToCode(n,"LIST",t.JavaScript.ORDER_NONE)||"[]")+")";break;case"RANDOM":n=(r=t.JavaScript.provideFunction_("mathRandomList",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(list) {","  var x = Math.floor(Math.random() * list.length);","  return list[x];","}"]))+"("+(n=t.JavaScript.valueToCode(n,"LIST",t.JavaScript.ORDER_NONE)||"[]")+")";break;default:throw Error("Unknown operator: "+r)}return[n,t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.math_modulo=function(n){return[(t.JavaScript.valueToCode(n,"DIVIDEND",t.JavaScript.ORDER_MODULUS)||"0")+" % "+(n=t.JavaScript.valueToCode(n,"DIVISOR",t.JavaScript.ORDER_MODULUS)||"0"),t.JavaScript.ORDER_MODULUS]},t.JavaScript.math_constrain=function(n){return["Math.min(Math.max("+(t.JavaScript.valueToCode(n,"VALUE",t.JavaScript.ORDER_NONE)||"0")+", "+(t.JavaScript.valueToCode(n,"LOW",t.JavaScript.ORDER_NONE)||"0")+"), "+(n=t.JavaScript.valueToCode(n,"HIGH",t.JavaScript.ORDER_NONE)||"Infinity")+")",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.math_random_int=function(n){var r=t.JavaScript.valueToCode(n,"FROM",t.JavaScript.ORDER_NONE)||"0";return n=t.JavaScript.valueToCode(n,"TO",t.JavaScript.ORDER_NONE)||"0",[t.JavaScript.provideFunction_("mathRandomInt",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(a, b) {","  if (a > b) {","    // Swap a and b to ensure a is smaller.","    var c = a;","    a = b;","    b = c;","  }","  return Math.floor(Math.random() * (b - a + 1) + a);","}"])+"("+r+", "+n+")",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.math_random_float=function(n){return["Math.random()",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.math_atan2=function(n){var r=t.JavaScript.valueToCode(n,"X",t.JavaScript.ORDER_NONE)||"0";return["Math.atan2("+(t.JavaScript.valueToCode(n,"Y",t.JavaScript.ORDER_NONE)||"0")+", "+r+") / Math.PI * 180",t.JavaScript.ORDER_DIVISION]},t.JavaScript.procedures={},t.JavaScript.procedures_defreturn=function(n){var r=t.JavaScript.nameDB_.getName(n.getFieldValue("NAME"),t.PROCEDURE_CATEGORY_NAME),s="";t.JavaScript.STATEMENT_PREFIX&&(s+=t.JavaScript.injectId(t.JavaScript.STATEMENT_PREFIX,n)),t.JavaScript.STATEMENT_SUFFIX&&(s+=t.JavaScript.injectId(t.JavaScript.STATEMENT_SUFFIX,n)),s&&(s=t.JavaScript.prefixLines(s,t.JavaScript.INDENT));var u="";t.JavaScript.INFINITE_LOOP_TRAP&&(u=t.JavaScript.prefixLines(t.JavaScript.injectId(t.JavaScript.INFINITE_LOOP_TRAP,n),t.JavaScript.INDENT));var y=t.JavaScript.statementToCode(n,"STACK"),x=t.JavaScript.valueToCode(n,"RETURN",t.JavaScript.ORDER_NONE)||"",B="";y&&x&&(B=s),x&&(x=t.JavaScript.INDENT+"return "+x+";\n");for(var Q=[],at=n.getVars(),rt=0;rt<at.length;rt++)Q[rt]=t.JavaScript.nameDB_.getName(at[rt],t.VARIABLE_CATEGORY_NAME);return s="function "+r+"("+Q.join(", ")+") {\n"+s+u+y+B+x+"}",s=t.JavaScript.scrub_(n,s),t.JavaScript.definitions_["%"+r]=s,null},t.JavaScript.procedures_defnoreturn=t.JavaScript.procedures_defreturn,t.JavaScript.procedures_callreturn=function(n){for(var r=t.JavaScript.nameDB_.getName(n.getFieldValue("NAME"),t.PROCEDURE_CATEGORY_NAME),s=[],u=n.getVars(),y=0;y<u.length;y++)s[y]=t.JavaScript.valueToCode(n,"ARG"+y,t.JavaScript.ORDER_NONE)||"null";return[r+"("+s.join(", ")+")",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.procedures_callnoreturn=function(n){return t.JavaScript.procedures_callreturn(n)[0]+";\n"},t.JavaScript.procedures_ifreturn=function(n){var r="if ("+(t.JavaScript.valueToCode(n,"CONDITION",t.JavaScript.ORDER_NONE)||"false")+") {\n";return t.JavaScript.STATEMENT_SUFFIX&&(r+=t.JavaScript.prefixLines(t.JavaScript.injectId(t.JavaScript.STATEMENT_SUFFIX,n),t.JavaScript.INDENT)),n.hasReturnValue_?(n=t.JavaScript.valueToCode(n,"VALUE",t.JavaScript.ORDER_NONE)||"null",r+=t.JavaScript.INDENT+"return "+n+";\n"):r+=t.JavaScript.INDENT+"return;\n",r+"}\n"},t.JavaScript.texts={},t.JavaScript.text=function(n){return[t.JavaScript.quote_(n.getFieldValue("TEXT")),t.JavaScript.ORDER_ATOMIC]},t.JavaScript.text_multiline=function(n){var r=-1!=(n=t.JavaScript.multiline_quote_(n.getFieldValue("TEXT"))).indexOf("+")?t.JavaScript.ORDER_ADDITION:t.JavaScript.ORDER_ATOMIC;return[n,r]},t.JavaScript.text.forceString_=function(n){return t.JavaScript.text.forceString_.strRegExp.test(n)?[n,t.JavaScript.ORDER_ATOMIC]:["String("+n+")",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.text.forceString_.strRegExp=/^\s*'([^']|\\')*'\s*$/,t.JavaScript.text_join=function(n){switch(n.itemCount_){case 0:return["''",t.JavaScript.ORDER_ATOMIC];case 1:return n=t.JavaScript.valueToCode(n,"ADD0",t.JavaScript.ORDER_NONE)||"''",t.JavaScript.text.forceString_(n);case 2:var r=t.JavaScript.valueToCode(n,"ADD0",t.JavaScript.ORDER_NONE)||"''";return n=t.JavaScript.valueToCode(n,"ADD1",t.JavaScript.ORDER_NONE)||"''",[n=t.JavaScript.text.forceString_(r)[0]+" + "+t.JavaScript.text.forceString_(n)[0],t.JavaScript.ORDER_ADDITION];default:r=Array(n.itemCount_);for(var s=0;s<n.itemCount_;s++)r[s]=t.JavaScript.valueToCode(n,"ADD"+s,t.JavaScript.ORDER_NONE)||"''";return[n="["+r.join(",")+"].join('')",t.JavaScript.ORDER_FUNCTION_CALL]}},t.JavaScript.text_append=function(n){var r=t.JavaScript.nameDB_.getName(n.getFieldValue("VAR"),t.VARIABLE_CATEGORY_NAME);return n=t.JavaScript.valueToCode(n,"TEXT",t.JavaScript.ORDER_NONE)||"''",r+" += "+t.JavaScript.text.forceString_(n)[0]+";\n"},t.JavaScript.text_length=function(n){return[(t.JavaScript.valueToCode(n,"VALUE",t.JavaScript.ORDER_MEMBER)||"''")+".length",t.JavaScript.ORDER_MEMBER]},t.JavaScript.text_isEmpty=function(n){return["!"+(t.JavaScript.valueToCode(n,"VALUE",t.JavaScript.ORDER_MEMBER)||"''")+".length",t.JavaScript.ORDER_LOGICAL_NOT]},t.JavaScript.text_indexOf=function(n){var r="FIRST"==n.getFieldValue("END")?"indexOf":"lastIndexOf",s=t.JavaScript.valueToCode(n,"FIND",t.JavaScript.ORDER_NONE)||"''";return r=(t.JavaScript.valueToCode(n,"VALUE",t.JavaScript.ORDER_MEMBER)||"''")+"."+r+"("+s+")",n.workspace.options.oneBasedIndex?[r+" + 1",t.JavaScript.ORDER_ADDITION]:[r,t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.text_charAt=function(n){var r=n.getFieldValue("WHERE")||"FROM_START",s=t.JavaScript.valueToCode(n,"VALUE","RANDOM"==r?t.JavaScript.ORDER_NONE:t.JavaScript.ORDER_MEMBER)||"''";switch(r){case"FIRST":return[s+".charAt(0)",t.JavaScript.ORDER_FUNCTION_CALL];case"LAST":return[s+".slice(-1)",t.JavaScript.ORDER_FUNCTION_CALL];case"FROM_START":return[s+".charAt("+(n=t.JavaScript.getAdjusted(n,"AT"))+")",t.JavaScript.ORDER_FUNCTION_CALL];case"FROM_END":return[s+".slice("+(n=t.JavaScript.getAdjusted(n,"AT",1,!0))+").charAt(0)",t.JavaScript.ORDER_FUNCTION_CALL];case"RANDOM":return[t.JavaScript.provideFunction_("textRandomLetter",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(text) {","  var x = Math.floor(Math.random() * text.length);","  return text[x];","}"])+"("+s+")",t.JavaScript.ORDER_FUNCTION_CALL]}throw Error("Unhandled option (text_charAt).")},t.JavaScript.text.getIndex_=function(n,r,s){return"FIRST"==r?"0":"FROM_END"==r?n+".length - 1 - "+s:"LAST"==r?n+".length - 1":s},t.JavaScript.text_getSubstring=function(n){var r=n.getFieldValue("WHERE1"),s=n.getFieldValue("WHERE2"),u="FROM_END"!=r&&"LAST"!=r&&"FROM_END"!=s&&"LAST"!=s,y=t.JavaScript.valueToCode(n,"STRING",u?t.JavaScript.ORDER_MEMBER:t.JavaScript.ORDER_NONE)||"''";if("FIRST"==r&&"LAST"==s)return[y,t.JavaScript.ORDER_NONE];if(y.match(/^'?\w+'?$/)||u){switch(r){case"FROM_START":u=t.JavaScript.getAdjusted(n,"AT1");break;case"FROM_END":u=y+".length - "+(u=t.JavaScript.getAdjusted(n,"AT1",1,!1,t.JavaScript.ORDER_SUBTRACTION));break;case"FIRST":u="0";break;default:throw Error("Unhandled option (text_getSubstring).")}switch(s){case"FROM_START":n=t.JavaScript.getAdjusted(n,"AT2",1);break;case"FROM_END":n=y+".length - "+(n=t.JavaScript.getAdjusted(n,"AT2",0,!1,t.JavaScript.ORDER_SUBTRACTION));break;case"LAST":n=y+".length";break;default:throw Error("Unhandled option (text_getSubstring).")}r=y+".slice("+u+", "+n+")"}else{u=t.JavaScript.getAdjusted(n,"AT1"),n=t.JavaScript.getAdjusted(n,"AT2");var x=t.JavaScript.text.getIndex_,B={FIRST:"First",LAST:"Last",FROM_START:"FromStart",FROM_END:"FromEnd"};r=t.JavaScript.provideFunction_("subsequence"+B[r]+B[s],["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(sequence"+("FROM_END"==r||"FROM_START"==r?", at1":"")+("FROM_END"==s||"FROM_START"==s?", at2":"")+") {","  var start = "+x("sequence",r,"at1")+";","  var end = "+x("sequence",s,"at2")+" + 1;","  return sequence.slice(start, end);","}"])+"("+y+("FROM_END"==r||"FROM_START"==r?", "+u:"")+("FROM_END"==s||"FROM_START"==s?", "+n:"")+")"}return[r,t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.text_changeCase=function(n){var r={UPPERCASE:".toUpperCase()",LOWERCASE:".toLowerCase()",TITLECASE:null}[n.getFieldValue("CASE")];return n=t.JavaScript.valueToCode(n,"TEXT",r?t.JavaScript.ORDER_MEMBER:t.JavaScript.ORDER_NONE)||"''",[r?n+r:t.JavaScript.provideFunction_("textToTitleCase",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(str) {","  return str.replace(/\\S+/g,","      function(txt) {return txt[0].toUpperCase() + txt.substring(1).toLowerCase();});","}"])+"("+n+")",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.text_trim=function(n){var r={LEFT:".replace(/^[\\s\\xa0]+/, '')",RIGHT:".replace(/[\\s\\xa0]+$/, '')",BOTH:".trim()"}[n.getFieldValue("MODE")];return[(t.JavaScript.valueToCode(n,"TEXT",t.JavaScript.ORDER_MEMBER)||"''")+r,t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.text_print=function(n){return"window.alert("+(t.JavaScript.valueToCode(n,"TEXT",t.JavaScript.ORDER_NONE)||"''")+");\n"},t.JavaScript.text_prompt_ext=function(n){var r="window.prompt("+(n.getField("TEXT")?t.JavaScript.quote_(n.getFieldValue("TEXT")):t.JavaScript.valueToCode(n,"TEXT",t.JavaScript.ORDER_NONE)||"''")+")";return"NUMBER"==n.getFieldValue("TYPE")&&(r="Number("+r+")"),[r,t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.text_prompt=t.JavaScript.text_prompt_ext,t.JavaScript.text_count=function(n){var r=t.JavaScript.valueToCode(n,"TEXT",t.JavaScript.ORDER_NONE)||"''";return n=t.JavaScript.valueToCode(n,"SUB",t.JavaScript.ORDER_NONE)||"''",[t.JavaScript.provideFunction_("textCount",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(haystack, needle) {","  if (needle.length === 0) {","    return haystack.length + 1;","  } else {","    return haystack.split(needle).length - 1;","  }","}"])+"("+r+", "+n+")",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.text_replace=function(n){var r=t.JavaScript.valueToCode(n,"TEXT",t.JavaScript.ORDER_NONE)||"''",s=t.JavaScript.valueToCode(n,"FROM",t.JavaScript.ORDER_NONE)||"''";return n=t.JavaScript.valueToCode(n,"TO",t.JavaScript.ORDER_NONE)||"''",[t.JavaScript.provideFunction_("textReplace",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(haystack, needle, replacement) {",'  needle = needle.replace(/([-()\\[\\]{}+?*.$\\^|,:#<!\\\\])/g,"\\\\$1")','                 .replace(/\\x08/g,"\\\\x08");',"  return haystack.replace(new RegExp(needle, 'g'), replacement);","}"])+"("+r+", "+s+", "+n+")",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.text_reverse=function(n){return[(t.JavaScript.valueToCode(n,"TEXT",t.JavaScript.ORDER_MEMBER)||"''")+".split('').reverse().join('')",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.variables={},t.JavaScript.variables_get=function(n){return[t.JavaScript.nameDB_.getName(n.getFieldValue("VAR"),t.VARIABLE_CATEGORY_NAME),t.JavaScript.ORDER_ATOMIC]},t.JavaScript.variables_set=function(n){var r=t.JavaScript.valueToCode(n,"VALUE",t.JavaScript.ORDER_ASSIGNMENT)||"0";return t.JavaScript.nameDB_.getName(n.getFieldValue("VAR"),t.VARIABLE_CATEGORY_NAME)+" = "+r+";\n"},t.JavaScript.variablesDynamic={},t.JavaScript.variables_get_dynamic=t.JavaScript.variables_get,t.JavaScript.variables_set_dynamic=t.JavaScript.variables_set,t.JavaScript}.apply($,_))&&(U.exports=e)},39809:function(U,$,m){var _,e;_=[m(68207)],void 0!==(e=function(t){return(t={Msg:{}}).Msg.ADD_COMMENT="Add Comment",t.Msg.CANNOT_DELETE_VARIABLE_PROCEDURE="Can't delete the variable '%1' because it's part of the definition of the function '%2'",t.Msg.CHANGE_VALUE_TITLE="Change value:",t.Msg.CLEAN_UP="Clean up Blocks",t.Msg.COLLAPSED_WARNINGS_WARNING="Collapsed blocks contain warnings.",t.Msg.COLLAPSE_ALL="Collapse Blocks",t.Msg.COLLAPSE_BLOCK="Collapse Block",t.Msg.COLOUR_BLEND_COLOUR1="colour 1",t.Msg.COLOUR_BLEND_COLOUR2="colour 2",t.Msg.COLOUR_BLEND_HELPURL="https://meyerweb.com/eric/tools/color-blend/#:::rgbp",t.Msg.COLOUR_BLEND_RATIO="ratio",t.Msg.COLOUR_BLEND_TITLE="blend",t.Msg.COLOUR_BLEND_TOOLTIP="Blends two colours together with a given ratio (0.0 - 1.0).",t.Msg.COLOUR_PICKER_HELPURL="https://en.wikipedia.org/wiki/Color",t.Msg.COLOUR_PICKER_TOOLTIP="Choose a colour from the palette.",t.Msg.COLOUR_RANDOM_HELPURL="http://randomcolour.com",t.Msg.COLOUR_RANDOM_TITLE="random colour",t.Msg.COLOUR_RANDOM_TOOLTIP="Choose a colour at random.",t.Msg.COLOUR_RGB_BLUE="blue",t.Msg.COLOUR_RGB_GREEN="green",t.Msg.COLOUR_RGB_HELPURL="https://www.december.com/html/spec/colorpercompact.html",t.Msg.COLOUR_RGB_RED="red",t.Msg.COLOUR_RGB_TITLE="colour with",t.Msg.COLOUR_RGB_TOOLTIP="Create a colour with the specified amount of red, green, and blue. All values must be between 0 and 100.",t.Msg.CONTROLS_FLOW_STATEMENTS_HELPURL="https://github.com/google/blockly/wiki/Loops#loop-termination-blocks",t.Msg.CONTROLS_FLOW_STATEMENTS_OPERATOR_BREAK="break out of loop",t.Msg.CONTROLS_FLOW_STATEMENTS_OPERATOR_CONTINUE="continue with next iteration of loop",t.Msg.CONTROLS_FLOW_STATEMENTS_TOOLTIP_BREAK="Break out of the containing loop.",t.Msg.CONTROLS_FLOW_STATEMENTS_TOOLTIP_CONTINUE="Skip the rest of this loop, and continue with the next iteration.",t.Msg.CONTROLS_FLOW_STATEMENTS_WARNING="Warning: This block may only be used within a loop.",t.Msg.CONTROLS_FOREACH_HELPURL="https://github.com/google/blockly/wiki/Loops#for-each",t.Msg.CONTROLS_FOREACH_TITLE="for each item %1 in list %2",t.Msg.CONTROLS_FOREACH_TOOLTIP="For each item in a list, set the variable '%1' to the item, and then do some statements.",t.Msg.CONTROLS_FOR_HELPURL="https://github.com/google/blockly/wiki/Loops#count-with",t.Msg.CONTROLS_FOR_TITLE="count with %1 from %2 to %3 by %4",t.Msg.CONTROLS_FOR_TOOLTIP="Have the variable '%1' take on the values from the start number to the end number, counting by the specified interval, and do the specified blocks.",t.Msg.CONTROLS_IF_ELSEIF_TOOLTIP="Add a condition to the if block.",t.Msg.CONTROLS_IF_ELSE_TOOLTIP="Add a final, catch-all condition to the if block.",t.Msg.CONTROLS_IF_HELPURL="https://github.com/google/blockly/wiki/IfElse",t.Msg.CONTROLS_IF_IF_TOOLTIP="Add, remove, or reorder sections to reconfigure this if block.",t.Msg.CONTROLS_IF_MSG_ELSE="else",t.Msg.CONTROLS_IF_MSG_ELSEIF="else if",t.Msg.CONTROLS_IF_MSG_IF="if",t.Msg.CONTROLS_IF_TOOLTIP_1="If a value is true, then do some statements.",t.Msg.CONTROLS_IF_TOOLTIP_2="If a value is true, then do the first block of statements. Otherwise, do the second block of statements.",t.Msg.CONTROLS_IF_TOOLTIP_3="If the first value is true, then do the first block of statements. Otherwise, if the second value is true, do the second block of statements.",t.Msg.CONTROLS_IF_TOOLTIP_4="If the first value is true, then do the first block of statements. Otherwise, if the second value is true, do the second block of statements. If none of the values are true, do the last block of statements.",t.Msg.CONTROLS_REPEAT_HELPURL="https://en.wikipedia.org/wiki/For_loop",t.Msg.CONTROLS_REPEAT_INPUT_DO="do",t.Msg.CONTROLS_REPEAT_TITLE="repeat %1 times",t.Msg.CONTROLS_REPEAT_TOOLTIP="Do some statements several times.",t.Msg.CONTROLS_WHILEUNTIL_HELPURL="https://github.com/google/blockly/wiki/Loops#repeat",t.Msg.CONTROLS_WHILEUNTIL_OPERATOR_UNTIL="repeat until",t.Msg.CONTROLS_WHILEUNTIL_OPERATOR_WHILE="repeat while",t.Msg.CONTROLS_WHILEUNTIL_TOOLTIP_UNTIL="While a value is false, then do some statements.",t.Msg.CONTROLS_WHILEUNTIL_TOOLTIP_WHILE="While a value is true, then do some statements.",t.Msg.DELETE_ALL_BLOCKS="Delete all %1 blocks?",t.Msg.DELETE_BLOCK="Delete Block",t.Msg.DELETE_VARIABLE="Delete the '%1' variable",t.Msg.DELETE_VARIABLE_CONFIRMATION="Delete %1 uses of the '%2' variable?",t.Msg.DELETE_X_BLOCKS="Delete %1 Blocks",t.Msg.DISABLE_BLOCK="Disable Block",t.Msg.DUPLICATE_BLOCK="Duplicate",t.Msg.DUPLICATE_COMMENT="Duplicate Comment",t.Msg.ENABLE_BLOCK="Enable Block",t.Msg.EXPAND_ALL="Expand Blocks",t.Msg.EXPAND_BLOCK="Expand Block",t.Msg.EXTERNAL_INPUTS="External Inputs",t.Msg.HELP="Help",t.Msg.INLINE_INPUTS="Inline Inputs",t.Msg.IOS_CANCEL="Cancel",t.Msg.IOS_ERROR="Error",t.Msg.IOS_OK="OK",t.Msg.IOS_PROCEDURES_ADD_INPUT="+ Add Input",t.Msg.IOS_PROCEDURES_ALLOW_STATEMENTS="Allow statements",t.Msg.IOS_PROCEDURES_DUPLICATE_INPUTS_ERROR="This function has duplicate inputs.",t.Msg.IOS_PROCEDURES_INPUTS="INPUTS",t.Msg.IOS_VARIABLES_ADD_BUTTON="Add",t.Msg.IOS_VARIABLES_ADD_VARIABLE="+ Add Variable",t.Msg.IOS_VARIABLES_DELETE_BUTTON="Delete",t.Msg.IOS_VARIABLES_EMPTY_NAME_ERROR="You can't use an empty variable name.",t.Msg.IOS_VARIABLES_RENAME_BUTTON="Rename",t.Msg.IOS_VARIABLES_VARIABLE_NAME="Variable name",t.Msg.LISTS_CREATE_EMPTY_HELPURL="https://github.com/google/blockly/wiki/Lists#create-empty-list",t.Msg.LISTS_CREATE_EMPTY_TITLE="create empty list",t.Msg.LISTS_CREATE_EMPTY_TOOLTIP="Returns a list, of length 0, containing no data records",t.Msg.LISTS_CREATE_WITH_CONTAINER_TITLE_ADD="list",t.Msg.LISTS_CREATE_WITH_CONTAINER_TOOLTIP="Add, remove, or reorder sections to reconfigure this list block.",t.Msg.LISTS_CREATE_WITH_HELPURL="https://github.com/google/blockly/wiki/Lists#create-list-with",t.Msg.LISTS_CREATE_WITH_INPUT_WITH="create list with",t.Msg.LISTS_CREATE_WITH_ITEM_TOOLTIP="Add an item to the list.",t.Msg.LISTS_CREATE_WITH_TOOLTIP="Create a list with any number of items.",t.Msg.LISTS_GET_INDEX_FIRST="first",t.Msg.LISTS_GET_INDEX_FROM_END="# from end",t.Msg.LISTS_GET_INDEX_FROM_START="#",t.Msg.LISTS_GET_INDEX_GET="get",t.Msg.LISTS_GET_INDEX_GET_REMOVE="get and remove",t.Msg.LISTS_GET_INDEX_LAST="last",t.Msg.LISTS_GET_INDEX_RANDOM="random",t.Msg.LISTS_GET_INDEX_REMOVE="remove",t.Msg.LISTS_GET_INDEX_TAIL="",t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FIRST="Returns the first item in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FROM="Returns the item at the specified position in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_LAST="Returns the last item in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_RANDOM="Returns a random item in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FIRST="Removes and returns the first item in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FROM="Removes and returns the item at the specified position in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_LAST="Removes and returns the last item in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_RANDOM="Removes and returns a random item in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FIRST="Removes the first item in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FROM="Removes the item at the specified position in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_LAST="Removes the last item in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_RANDOM="Removes a random item in a list.",t.Msg.LISTS_GET_SUBLIST_END_FROM_END="to # from end",t.Msg.LISTS_GET_SUBLIST_END_FROM_START="to #",t.Msg.LISTS_GET_SUBLIST_END_LAST="to last",t.Msg.LISTS_GET_SUBLIST_HELPURL="https://github.com/google/blockly/wiki/Lists#getting-a-sublist",t.Msg.LISTS_GET_SUBLIST_START_FIRST="get sub-list from first",t.Msg.LISTS_GET_SUBLIST_START_FROM_END="get sub-list from # from end",t.Msg.LISTS_GET_SUBLIST_START_FROM_START="get sub-list from #",t.Msg.LISTS_GET_SUBLIST_TAIL="",t.Msg.LISTS_GET_SUBLIST_TOOLTIP="Creates a copy of the specified portion of a list.",t.Msg.LISTS_INDEX_FROM_END_TOOLTIP="%1 is the last item.",t.Msg.LISTS_INDEX_FROM_START_TOOLTIP="%1 is the first item.",t.Msg.LISTS_INDEX_OF_FIRST="find first occurrence of item",t.Msg.LISTS_INDEX_OF_HELPURL="https://github.com/google/blockly/wiki/Lists#getting-items-from-a-list",t.Msg.LISTS_INDEX_OF_LAST="find last occurrence of item",t.Msg.LISTS_INDEX_OF_TOOLTIP="Returns the index of the first/last occurrence of the item in the list. Returns %1 if item is not found.",t.Msg.LISTS_INLIST="in list",t.Msg.LISTS_ISEMPTY_HELPURL="https://github.com/google/blockly/wiki/Lists#is-empty",t.Msg.LISTS_ISEMPTY_TITLE="%1 is empty",t.Msg.LISTS_ISEMPTY_TOOLTIP="Returns true if the list is empty.",t.Msg.LISTS_LENGTH_HELPURL="https://github.com/google/blockly/wiki/Lists#length-of",t.Msg.LISTS_LENGTH_TITLE="length of %1",t.Msg.LISTS_LENGTH_TOOLTIP="Returns the length of a list.",t.Msg.LISTS_REPEAT_HELPURL="https://github.com/google/blockly/wiki/Lists#create-list-with",t.Msg.LISTS_REPEAT_TITLE="create list with item %1 repeated %2 times",t.Msg.LISTS_REPEAT_TOOLTIP="Creates a list consisting of the given value repeated the specified number of times.",t.Msg.LISTS_REVERSE_HELPURL="https://github.com/google/blockly/wiki/Lists#reversing-a-list",t.Msg.LISTS_REVERSE_MESSAGE0="reverse %1",t.Msg.LISTS_REVERSE_TOOLTIP="Reverse a copy of a list.",t.Msg.LISTS_SET_INDEX_HELPURL="https://github.com/google/blockly/wiki/Lists#in-list--set",t.Msg.LISTS_SET_INDEX_INPUT_TO="as",t.Msg.LISTS_SET_INDEX_INSERT="insert at",t.Msg.LISTS_SET_INDEX_SET="set",t.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FIRST="Inserts the item at the start of a list.",t.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FROM="Inserts the item at the specified position in a list.",t.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_LAST="Append the item to the end of a list.",t.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_RANDOM="Inserts the item randomly in a list.",t.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FIRST="Sets the first item in a list.",t.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FROM="Sets the item at the specified position in a list.",t.Msg.LISTS_SET_INDEX_TOOLTIP_SET_LAST="Sets the last item in a list.",t.Msg.LISTS_SET_INDEX_TOOLTIP_SET_RANDOM="Sets a random item in a list.",t.Msg.LISTS_SORT_HELPURL="https://github.com/google/blockly/wiki/Lists#sorting-a-list",t.Msg.LISTS_SORT_ORDER_ASCENDING="ascending",t.Msg.LISTS_SORT_ORDER_DESCENDING="descending",t.Msg.LISTS_SORT_TITLE="sort %1 %2 %3",t.Msg.LISTS_SORT_TOOLTIP="Sort a copy of a list.",t.Msg.LISTS_SORT_TYPE_IGNORECASE="alphabetic, ignore case",t.Msg.LISTS_SORT_TYPE_NUMERIC="numeric",t.Msg.LISTS_SORT_TYPE_TEXT="alphabetic",t.Msg.LISTS_SPLIT_HELPURL="https://github.com/google/blockly/wiki/Lists#splitting-strings-and-joining-lists",t.Msg.LISTS_SPLIT_LIST_FROM_TEXT="make list from text",t.Msg.LISTS_SPLIT_TEXT_FROM_LIST="make text from list",t.Msg.LISTS_SPLIT_TOOLTIP_JOIN="Join a list of texts into one text, separated by a delimiter.",t.Msg.LISTS_SPLIT_TOOLTIP_SPLIT="Split text into a list of texts, breaking at each delimiter.",t.Msg.LISTS_SPLIT_WITH_DELIMITER="with delimiter",t.Msg.LOGIC_BOOLEAN_FALSE="false",t.Msg.LOGIC_BOOLEAN_HELPURL="https://github.com/google/blockly/wiki/Logic#values",t.Msg.LOGIC_BOOLEAN_TOOLTIP="Returns either true or false.",t.Msg.LOGIC_BOOLEAN_TRUE="true",t.Msg.LOGIC_COMPARE_HELPURL="https://en.wikipedia.org/wiki/Inequality_(mathematics)",t.Msg.LOGIC_COMPARE_TOOLTIP_EQ="Return true if both inputs equal each other.",t.Msg.LOGIC_COMPARE_TOOLTIP_GT="Return true if the first input is greater than the second input.",t.Msg.LOGIC_COMPARE_TOOLTIP_GTE="Return true if the first input is greater than or equal to the second input.",t.Msg.LOGIC_COMPARE_TOOLTIP_LT="Return true if the first input is smaller than the second input.",t.Msg.LOGIC_COMPARE_TOOLTIP_LTE="Return true if the first input is smaller than or equal to the second input.",t.Msg.LOGIC_COMPARE_TOOLTIP_NEQ="Return true if both inputs are not equal to each other.",t.Msg.LOGIC_NEGATE_HELPURL="https://github.com/google/blockly/wiki/Logic#not",t.Msg.LOGIC_NEGATE_TITLE="not %1",t.Msg.LOGIC_NEGATE_TOOLTIP="Returns true if the input is false. Returns false if the input is true.",t.Msg.LOGIC_NULL="null",t.Msg.LOGIC_NULL_HELPURL="https://en.wikipedia.org/wiki/Nullable_type",t.Msg.LOGIC_NULL_TOOLTIP="Returns null.",t.Msg.LOGIC_OPERATION_AND="and",t.Msg.LOGIC_OPERATION_HELPURL="https://github.com/google/blockly/wiki/Logic#logical-operations",t.Msg.LOGIC_OPERATION_OR="or",t.Msg.LOGIC_OPERATION_TOOLTIP_AND="Return true if both inputs are true.",t.Msg.LOGIC_OPERATION_TOOLTIP_OR="Return true if at least one of the inputs is true.",t.Msg.LOGIC_TERNARY_CONDITION="test",t.Msg.LOGIC_TERNARY_HELPURL="https://en.wikipedia.org/wiki/%3F:",t.Msg.LOGIC_TERNARY_IF_FALSE="if false",t.Msg.LOGIC_TERNARY_IF_TRUE="if true",t.Msg.LOGIC_TERNARY_TOOLTIP="Check the condition in 'test'. If the condition is true, returns the 'if true' value; otherwise returns the 'if false' value.",t.Msg.MATH_ADDITION_SYMBOL="+",t.Msg.MATH_ARITHMETIC_HELPURL="https://en.wikipedia.org/wiki/Arithmetic",t.Msg.MATH_ARITHMETIC_TOOLTIP_ADD="Return the sum of the two numbers.",t.Msg.MATH_ARITHMETIC_TOOLTIP_DIVIDE="Return the quotient of the two numbers.",t.Msg.MATH_ARITHMETIC_TOOLTIP_MINUS="Return the difference of the two numbers.",t.Msg.MATH_ARITHMETIC_TOOLTIP_MULTIPLY="Return the product of the two numbers.",t.Msg.MATH_ARITHMETIC_TOOLTIP_POWER="Return the first number raised to the power of the second number.",t.Msg.MATH_ATAN2_HELPURL="https://en.wikipedia.org/wiki/Atan2",t.Msg.MATH_ATAN2_TITLE="atan2 of X:%1 Y:%2",t.Msg.MATH_ATAN2_TOOLTIP="Return the arctangent of point (X, Y) in degrees from -180 to 180.",t.Msg.MATH_CHANGE_HELPURL="https://en.wikipedia.org/wiki/Programming_idiom#Incrementing_a_counter",t.Msg.MATH_CHANGE_TITLE="change %1 by %2",t.Msg.MATH_CHANGE_TOOLTIP="Add a number to variable '%1'.",t.Msg.MATH_CONSTANT_HELPURL="https://en.wikipedia.org/wiki/Mathematical_constant",t.Msg.MATH_CONSTANT_TOOLTIP="Return one of the common constants: \u03c0 (3.141\u2026), e (2.718\u2026), \u03c6 (1.618\u2026), sqrt(2) (1.414\u2026), sqrt(\xbd) (0.707\u2026), or \u221e (infinity).",t.Msg.MATH_CONSTRAIN_HELPURL="https://en.wikipedia.org/wiki/Clamping_(graphics)",t.Msg.MATH_CONSTRAIN_TITLE="constrain %1 low %2 high %3",t.Msg.MATH_CONSTRAIN_TOOLTIP="Constrain a number to be between the specified limits (inclusive).",t.Msg.MATH_DIVISION_SYMBOL="\xf7",t.Msg.MATH_IS_DIVISIBLE_BY="is divisible by",t.Msg.MATH_IS_EVEN="is even",t.Msg.MATH_IS_NEGATIVE="is negative",t.Msg.MATH_IS_ODD="is odd",t.Msg.MATH_IS_POSITIVE="is positive",t.Msg.MATH_IS_PRIME="is prime",t.Msg.MATH_IS_TOOLTIP="Check if a number is an even, odd, prime, whole, positive, negative, or if it is divisible by certain number. Returns true or false.",t.Msg.MATH_IS_WHOLE="is whole",t.Msg.MATH_MODULO_HELPURL="https://en.wikipedia.org/wiki/Modulo_operation",t.Msg.MATH_MODULO_TITLE="remainder of %1 \xf7 %2",t.Msg.MATH_MODULO_TOOLTIP="Return the remainder from dividing the two numbers.",t.Msg.MATH_MULTIPLICATION_SYMBOL="\xd7",t.Msg.MATH_NUMBER_HELPURL="https://en.wikipedia.org/wiki/Number",t.Msg.MATH_NUMBER_TOOLTIP="A number.",t.Msg.MATH_ONLIST_HELPURL="",t.Msg.MATH_ONLIST_OPERATOR_AVERAGE="average of list",t.Msg.MATH_ONLIST_OPERATOR_MAX="max of list",t.Msg.MATH_ONLIST_OPERATOR_MEDIAN="median of list",t.Msg.MATH_ONLIST_OPERATOR_MIN="min of list",t.Msg.MATH_ONLIST_OPERATOR_MODE="modes of list",t.Msg.MATH_ONLIST_OPERATOR_RANDOM="random item of list",t.Msg.MATH_ONLIST_OPERATOR_STD_DEV="standard deviation of list",t.Msg.MATH_ONLIST_OPERATOR_SUM="sum of list",t.Msg.MATH_ONLIST_TOOLTIP_AVERAGE="Return the average (arithmetic mean) of the numeric values in the list.",t.Msg.MATH_ONLIST_TOOLTIP_MAX="Return the largest number in the list.",t.Msg.MATH_ONLIST_TOOLTIP_MEDIAN="Return the median number in the list.",t.Msg.MATH_ONLIST_TOOLTIP_MIN="Return the smallest number in the list.",t.Msg.MATH_ONLIST_TOOLTIP_MODE="Return a list of the most common item(s) in the list.",t.Msg.MATH_ONLIST_TOOLTIP_RANDOM="Return a random element from the list.",t.Msg.MATH_ONLIST_TOOLTIP_STD_DEV="Return the standard deviation of the list.",t.Msg.MATH_ONLIST_TOOLTIP_SUM="Return the sum of all the numbers in the list.",t.Msg.MATH_POWER_SYMBOL="^",t.Msg.MATH_RANDOM_FLOAT_HELPURL="https://en.wikipedia.org/wiki/Random_number_generation",t.Msg.MATH_RANDOM_FLOAT_TITLE_RANDOM="random fraction",t.Msg.MATH_RANDOM_FLOAT_TOOLTIP="Return a random fraction between 0.0 (inclusive) and 1.0 (exclusive).",t.Msg.MATH_RANDOM_INT_HELPURL="https://en.wikipedia.org/wiki/Random_number_generation",t.Msg.MATH_RANDOM_INT_TITLE="random integer from %1 to %2",t.Msg.MATH_RANDOM_INT_TOOLTIP="Return a random integer between the two specified limits, inclusive.",t.Msg.MATH_ROUND_HELPURL="https://en.wikipedia.org/wiki/Rounding",t.Msg.MATH_ROUND_OPERATOR_ROUND="round",t.Msg.MATH_ROUND_OPERATOR_ROUNDDOWN="round down",t.Msg.MATH_ROUND_OPERATOR_ROUNDUP="round up",t.Msg.MATH_ROUND_TOOLTIP="Round a number up or down.",t.Msg.MATH_SINGLE_HELPURL="https://en.wikipedia.org/wiki/Square_root",t.Msg.MATH_SINGLE_OP_ABSOLUTE="absolute",t.Msg.MATH_SINGLE_OP_ROOT="square root",t.Msg.MATH_SINGLE_TOOLTIP_ABS="Return the absolute value of a number.",t.Msg.MATH_SINGLE_TOOLTIP_EXP="Return e to the power of a number.",t.Msg.MATH_SINGLE_TOOLTIP_LN="Return the natural logarithm of a number.",t.Msg.MATH_SINGLE_TOOLTIP_LOG10="Return the base 10 logarithm of a number.",t.Msg.MATH_SINGLE_TOOLTIP_NEG="Return the negation of a number.",t.Msg.MATH_SINGLE_TOOLTIP_POW10="Return 10 to the power of a number.",t.Msg.MATH_SINGLE_TOOLTIP_ROOT="Return the square root of a number.",t.Msg.MATH_SUBTRACTION_SYMBOL="-",t.Msg.MATH_TRIG_ACOS="acos",t.Msg.MATH_TRIG_ASIN="asin",t.Msg.MATH_TRIG_ATAN="atan",t.Msg.MATH_TRIG_COS="cos",t.Msg.MATH_TRIG_HELPURL="https://en.wikipedia.org/wiki/Trigonometric_functions",t.Msg.MATH_TRIG_SIN="sin",t.Msg.MATH_TRIG_TAN="tan",t.Msg.MATH_TRIG_TOOLTIP_ACOS="Return the arccosine of a number.",t.Msg.MATH_TRIG_TOOLTIP_ASIN="Return the arcsine of a number.",t.Msg.MATH_TRIG_TOOLTIP_ATAN="Return the arctangent of a number.",t.Msg.MATH_TRIG_TOOLTIP_COS="Return the cosine of a degree (not radian).",t.Msg.MATH_TRIG_TOOLTIP_SIN="Return the sine of a degree (not radian).",t.Msg.MATH_TRIG_TOOLTIP_TAN="Return the tangent of a degree (not radian).",t.Msg.NEW_COLOUR_VARIABLE="Create colour variable...",t.Msg.NEW_NUMBER_VARIABLE="Create number variable...",t.Msg.NEW_STRING_VARIABLE="Create string variable...",t.Msg.NEW_VARIABLE="Create variable...",t.Msg.NEW_VARIABLE_TITLE="New variable name:",t.Msg.NEW_VARIABLE_TYPE_TITLE="New variable type:",t.Msg.ORDINAL_NUMBER_SUFFIX="",t.Msg.PROCEDURES_ALLOW_STATEMENTS="allow statements",t.Msg.PROCEDURES_BEFORE_PARAMS="with:",t.Msg.PROCEDURES_CALLNORETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",t.Msg.PROCEDURES_CALLNORETURN_TOOLTIP="Run the user-defined function '%1'.",t.Msg.PROCEDURES_CALLRETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",t.Msg.PROCEDURES_CALLRETURN_TOOLTIP="Run the user-defined function '%1' and use its output.",t.Msg.PROCEDURES_CALL_BEFORE_PARAMS="with:",t.Msg.PROCEDURES_CREATE_DO="Create '%1'",t.Msg.PROCEDURES_DEFNORETURN_COMMENT="Describe this function...",t.Msg.PROCEDURES_DEFNORETURN_DO="",t.Msg.PROCEDURES_DEFNORETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",t.Msg.PROCEDURES_DEFNORETURN_PROCEDURE="do something",t.Msg.PROCEDURES_DEFNORETURN_TITLE="to",t.Msg.PROCEDURES_DEFNORETURN_TOOLTIP="Creates a function with no output.",t.Msg.PROCEDURES_DEFRETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",t.Msg.PROCEDURES_DEFRETURN_RETURN="return",t.Msg.PROCEDURES_DEFRETURN_TOOLTIP="Creates a function with an output.",t.Msg.PROCEDURES_DEF_DUPLICATE_WARNING="Warning: This function has duplicate parameters.",t.Msg.PROCEDURES_HIGHLIGHT_DEF="Highlight function definition",t.Msg.PROCEDURES_IFRETURN_HELPURL="http://c2.com/cgi/wiki?GuardClause",t.Msg.PROCEDURES_IFRETURN_TOOLTIP="If a value is true, then return a second value.",t.Msg.PROCEDURES_IFRETURN_WARNING="Warning: This block may be used only within a function definition.",t.Msg.PROCEDURES_MUTATORARG_TITLE="input name:",t.Msg.PROCEDURES_MUTATORARG_TOOLTIP="Add an input to the function.",t.Msg.PROCEDURES_MUTATORCONTAINER_TITLE="inputs",t.Msg.PROCEDURES_MUTATORCONTAINER_TOOLTIP="Add, remove, or reorder inputs to this function.",t.Msg.REDO="Redo",t.Msg.REMOVE_COMMENT="Remove Comment",t.Msg.RENAME_VARIABLE="Rename variable...",t.Msg.RENAME_VARIABLE_TITLE="Rename all '%1' variables to:",t.Msg.TEXT_APPEND_HELPURL="https://github.com/google/blockly/wiki/Text#text-modification",t.Msg.TEXT_APPEND_TITLE="to %1 append text %2",t.Msg.TEXT_APPEND_TOOLTIP="Append some text to variable '%1'.",t.Msg.TEXT_CHANGECASE_HELPURL="https://github.com/google/blockly/wiki/Text#adjusting-text-case",t.Msg.TEXT_CHANGECASE_OPERATOR_LOWERCASE="to lower case",t.Msg.TEXT_CHANGECASE_OPERATOR_TITLECASE="to Title Case",t.Msg.TEXT_CHANGECASE_OPERATOR_UPPERCASE="to UPPER CASE",t.Msg.TEXT_CHANGECASE_TOOLTIP="Return a copy of the text in a different case.",t.Msg.TEXT_CHARAT_FIRST="get first letter",t.Msg.TEXT_CHARAT_FROM_END="get letter # from end",t.Msg.TEXT_CHARAT_FROM_START="get letter #",t.Msg.TEXT_CHARAT_HELPURL="https://github.com/google/blockly/wiki/Text#extracting-text",t.Msg.TEXT_CHARAT_LAST="get last letter",t.Msg.TEXT_CHARAT_RANDOM="get random letter",t.Msg.TEXT_CHARAT_TAIL="",t.Msg.TEXT_CHARAT_TITLE="in text %1 %2",t.Msg.TEXT_CHARAT_TOOLTIP="Returns the letter at the specified position.",t.Msg.TEXT_COUNT_HELPURL="https://github.com/google/blockly/wiki/Text#counting-substrings",t.Msg.TEXT_COUNT_MESSAGE0="count %1 in %2",t.Msg.TEXT_COUNT_TOOLTIP="Count how many times some text occurs within some other text.",t.Msg.TEXT_CREATE_JOIN_ITEM_TOOLTIP="Add an item to the text.",t.Msg.TEXT_CREATE_JOIN_TITLE_JOIN="join",t.Msg.TEXT_CREATE_JOIN_TOOLTIP="Add, remove, or reorder sections to reconfigure this text block.",t.Msg.TEXT_GET_SUBSTRING_END_FROM_END="to letter # from end",t.Msg.TEXT_GET_SUBSTRING_END_FROM_START="to letter #",t.Msg.TEXT_GET_SUBSTRING_END_LAST="to last letter",t.Msg.TEXT_GET_SUBSTRING_HELPURL="https://github.com/google/blockly/wiki/Text#extracting-a-region-of-text",t.Msg.TEXT_GET_SUBSTRING_INPUT_IN_TEXT="in text",t.Msg.TEXT_GET_SUBSTRING_START_FIRST="get substring from first letter",t.Msg.TEXT_GET_SUBSTRING_START_FROM_END="get substring from letter # from end",t.Msg.TEXT_GET_SUBSTRING_START_FROM_START="get substring from letter #",t.Msg.TEXT_GET_SUBSTRING_TAIL="",t.Msg.TEXT_GET_SUBSTRING_TOOLTIP="Returns a specified portion of the text.",t.Msg.TEXT_INDEXOF_HELPURL="https://github.com/google/blockly/wiki/Text#finding-text",t.Msg.TEXT_INDEXOF_OPERATOR_FIRST="find first occurrence of text",t.Msg.TEXT_INDEXOF_OPERATOR_LAST="find last occurrence of text",t.Msg.TEXT_INDEXOF_TITLE="in text %1 %2 %3",t.Msg.TEXT_INDEXOF_TOOLTIP="Returns the index of the first/last occurrence of the first text in the second text. Returns %1 if text is not found.",t.Msg.TEXT_ISEMPTY_HELPURL="https://github.com/google/blockly/wiki/Text#checking-for-empty-text",t.Msg.TEXT_ISEMPTY_TITLE="%1 is empty",t.Msg.TEXT_ISEMPTY_TOOLTIP="Returns true if the provided text is empty.",t.Msg.TEXT_JOIN_HELPURL="https://github.com/google/blockly/wiki/Text#text-creation",t.Msg.TEXT_JOIN_TITLE_CREATEWITH="create text with",t.Msg.TEXT_JOIN_TOOLTIP="Create a piece of text by joining together any number of items.",t.Msg.TEXT_LENGTH_HELPURL="https://github.com/google/blockly/wiki/Text#text-modification",t.Msg.TEXT_LENGTH_TITLE="length of %1",t.Msg.TEXT_LENGTH_TOOLTIP="Returns the number of letters (including spaces) in the provided text.",t.Msg.TEXT_PRINT_HELPURL="https://github.com/google/blockly/wiki/Text#printing-text",t.Msg.TEXT_PRINT_TITLE="print %1",t.Msg.TEXT_PRINT_TOOLTIP="Print the specified text, number or other value.",t.Msg.TEXT_PROMPT_HELPURL="https://github.com/google/blockly/wiki/Text#getting-input-from-the-user",t.Msg.TEXT_PROMPT_TOOLTIP_NUMBER="Prompt for user for a number.",t.Msg.TEXT_PROMPT_TOOLTIP_TEXT="Prompt for user for some text.",t.Msg.TEXT_PROMPT_TYPE_NUMBER="prompt for number with message",t.Msg.TEXT_PROMPT_TYPE_TEXT="prompt for text with message",t.Msg.TEXT_REPLACE_HELPURL="https://github.com/google/blockly/wiki/Text#replacing-substrings",t.Msg.TEXT_REPLACE_MESSAGE0="replace %1 with %2 in %3",t.Msg.TEXT_REPLACE_TOOLTIP="Replace all occurances of some text within some other text.",t.Msg.TEXT_REVERSE_HELPURL="https://github.com/google/blockly/wiki/Text#reversing-text",t.Msg.TEXT_REVERSE_MESSAGE0="reverse %1",t.Msg.TEXT_REVERSE_TOOLTIP="Reverses the order of the characters in the text.",t.Msg.TEXT_TEXT_HELPURL="https://en.wikipedia.org/wiki/String_(computer_science)",t.Msg.TEXT_TEXT_TOOLTIP="A letter, word, or line of text.",t.Msg.TEXT_TRIM_HELPURL="https://github.com/google/blockly/wiki/Text#trimming-removing-spaces",t.Msg.TEXT_TRIM_OPERATOR_BOTH="trim spaces from both sides of",t.Msg.TEXT_TRIM_OPERATOR_LEFT="trim spaces from left side of",t.Msg.TEXT_TRIM_OPERATOR_RIGHT="trim spaces from right side of",t.Msg.TEXT_TRIM_TOOLTIP="Return a copy of the text with spaces removed from one or both ends.",t.Msg.TODAY="Today",t.Msg.UNDO="Undo",t.Msg.UNNAMED_KEY="unnamed",t.Msg.VARIABLES_DEFAULT_NAME="item",t.Msg.VARIABLES_GET_CREATE_SET="Create 'set %1'",t.Msg.VARIABLES_GET_HELPURL="https://github.com/google/blockly/wiki/Variables#get",t.Msg.VARIABLES_GET_TOOLTIP="Returns the value of this variable.",t.Msg.VARIABLES_SET="set %1 to %2",t.Msg.VARIABLES_SET_CREATE_GET="Create 'get %1'",t.Msg.VARIABLES_SET_HELPURL="https://github.com/google/blockly/wiki/Variables#set",t.Msg.VARIABLES_SET_TOOLTIP="Sets this variable to be equal to the input.",t.Msg.VARIABLE_ALREADY_EXISTS="A variable named '%1' already exists.",t.Msg.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE="A variable named '%1' already exists for another type: '%2'.",t.Msg.WORKSPACE_ARIA_LABEL="Blockly Workspace",t.Msg.WORKSPACE_COMMENT_DEFAULT_TEXT="Say something...",t.Msg.CONTROLS_FOREACH_INPUT_DO=t.Msg.CONTROLS_REPEAT_INPUT_DO,t.Msg.CONTROLS_FOR_INPUT_DO=t.Msg.CONTROLS_REPEAT_INPUT_DO,t.Msg.CONTROLS_IF_ELSEIF_TITLE_ELSEIF=t.Msg.CONTROLS_IF_MSG_ELSEIF,t.Msg.CONTROLS_IF_ELSE_TITLE_ELSE=t.Msg.CONTROLS_IF_MSG_ELSE,t.Msg.CONTROLS_IF_IF_TITLE_IF=t.Msg.CONTROLS_IF_MSG_IF,t.Msg.CONTROLS_IF_MSG_THEN=t.Msg.CONTROLS_REPEAT_INPUT_DO,t.Msg.CONTROLS_WHILEUNTIL_INPUT_DO=t.Msg.CONTROLS_REPEAT_INPUT_DO,t.Msg.LISTS_CREATE_WITH_ITEM_TITLE=t.Msg.VARIABLES_DEFAULT_NAME,t.Msg.LISTS_GET_INDEX_HELPURL=t.Msg.LISTS_INDEX_OF_HELPURL,t.Msg.LISTS_GET_INDEX_INPUT_IN_LIST=t.Msg.LISTS_INLIST,t.Msg.LISTS_GET_SUBLIST_INPUT_IN_LIST=t.Msg.LISTS_INLIST,t.Msg.LISTS_INDEX_OF_INPUT_IN_LIST=t.Msg.LISTS_INLIST,t.Msg.LISTS_SET_INDEX_INPUT_IN_LIST=t.Msg.LISTS_INLIST,t.Msg.MATH_CHANGE_TITLE_ITEM=t.Msg.VARIABLES_DEFAULT_NAME,t.Msg.PROCEDURES_DEFRETURN_COMMENT=t.Msg.PROCEDURES_DEFNORETURN_COMMENT,t.Msg.PROCEDURES_DEFRETURN_DO=t.Msg.PROCEDURES_DEFNORETURN_DO,t.Msg.PROCEDURES_DEFRETURN_PROCEDURE=t.Msg.PROCEDURES_DEFNORETURN_PROCEDURE,t.Msg.PROCEDURES_DEFRETURN_TITLE=t.Msg.PROCEDURES_DEFNORETURN_TITLE,t.Msg.TEXT_APPEND_VARIABLE=t.Msg.VARIABLES_DEFAULT_NAME,t.Msg.TEXT_CREATE_JOIN_ITEM_TITLE_ITEM=t.Msg.VARIABLES_DEFAULT_NAME,t.Msg.MATH_HUE="230",t.Msg.LOOPS_HUE="120",t.Msg.LISTS_HUE="260",t.Msg.LOGIC_HUE="210",t.Msg.VARIABLES_HUE="330",t.Msg.TEXTS_HUE="160",t.Msg.PROCEDURES_HUE="290",t.Msg.COLOUR_HUE="20",t.Msg.VARIABLES_DYNAMIC_HUE="310",t.Msg}.apply($,_))&&(U.exports=e)},34686:U=>{!function(){"use strict";U.exports=function(m){return(m instanceof Buffer?m:Buffer.from(m.toString(),"binary")).toString("base64")}}()},72167:(U,$,m)=>{"use strict";var C=m(23141),_=m(74141),e=_(C("String.prototype.indexOf"));U.exports=function(n,r){var s=C(n,!!r);return"function"==typeof s&&e(n,".prototype.")>-1?_(s):s}},74141:(U,$,m)=>{"use strict";var C=m(37341),_=m(23141),e=_("%Function.prototype.apply%"),t=_("%Function.prototype.call%"),n=_("%Reflect.apply%",!0)||C.call(t,e),r=_("%Object.getOwnPropertyDescriptor%",!0),s=_("%Object.defineProperty%",!0),u=_("%Math.max%");if(s)try{s({},"a",{value:1})}catch(x){s=null}U.exports=function(B){var Q=n(C,t,arguments);if(r&&s){var at=r(Q,"length");at.configurable&&s(Q,"length",{value:1+u(0,B.length-(arguments.length-1))})}return Q};var y=function(){return n(C,e,arguments)};s?s(U.exports,"apply",{value:y}):U.exports.apply=y},88941:(U,$)=>{"use strict";$.parse=function(s,u){if("string"!=typeof s)throw new TypeError("argument str must be a string");for(var y={},x=u||{},B=s.split(_),Q=x.decode||m,at=0;at<B.length;at++){var rt=B[at],St=rt.indexOf("=");if(!(St<0)){var Ht=rt.substr(0,St).trim(),vt=rt.substr(++St,rt.length).trim();'"'==vt[0]&&(vt=vt.slice(1,-1)),null==y[Ht]&&(y[Ht]=r(vt,Q))}}return y},$.serialize=function(s,u,y){var x=y||{},B=x.encode||C;if("function"!=typeof B)throw new TypeError("option encode is invalid");if(!e.test(s))throw new TypeError("argument name is invalid");var Q=B(u);if(Q&&!e.test(Q))throw new TypeError("argument val is invalid");var at=s+"="+Q;if(null!=x.maxAge){var rt=x.maxAge-0;if(isNaN(rt)||!isFinite(rt))throw new TypeError("option maxAge is invalid");at+="; Max-Age="+Math.floor(rt)}if(x.domain){if(!e.test(x.domain))throw new TypeError("option domain is invalid");at+="; Domain="+x.domain}if(x.path){if(!e.test(x.path))throw new TypeError("option path is invalid");at+="; Path="+x.path}if(x.expires){if("function"!=typeof x.expires.toUTCString)throw new TypeError("option expires is invalid");at+="; Expires="+x.expires.toUTCString()}if(x.httpOnly&&(at+="; HttpOnly"),x.secure&&(at+="; Secure"),x.sameSite)switch("string"==typeof x.sameSite?x.sameSite.toLowerCase():x.sameSite){case!0:at+="; SameSite=Strict";break;case"lax":at+="; SameSite=Lax";break;case"strict":at+="; SameSite=Strict";break;case"none":at+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return at};var m=decodeURIComponent,C=encodeURIComponent,_=/; */,e=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;function r(s,u){try{return u(s)}catch(y){return s}}},25491:(U,$,m)=>{var C=m(47471);U.exports=C},73223:(U,$,m)=>{var C=m(37722);U.exports=C},14053:(U,$,m)=>{var C=m(91081);U.exports=C},23997:(U,$,m)=>{var C=m(3352);U.exports=C},38806:(U,$,m)=>{var C=m(35558);U.exports=C},62347:(U,$,m)=>{var C=m(49127);U.exports=C},69803:(U,$,m)=>{var C=m(46726);U.exports=C},52944:(U,$,m)=>{var C=m(87968);U.exports=C},11072:(U,$,m)=>{var C=m(81040);U.exports=C},78562:(U,$,m)=>{var C=m(18047);U.exports=C},84120:(U,$,m)=>{var C=m(16521);U.exports=C},84377:(U,$,m)=>{var C=m(32825);U.exports=C},54012:(U,$,m)=>{var C=m(70977);U.exports=C},2687:(U,$,m)=>{var C=m(35019);U.exports=C},49949:(U,$,m)=>{var C=m(11830);U.exports=C},15525:(U,$,m)=>{var C=m(61453);U.exports=C},75426:(U,$,m)=>{m(80651),m(48161);var C=m(35060);U.exports=C.Array.from},11529:(U,$,m)=>{m(71006);var C=m(35060);U.exports=C.Array.isArray},73534:(U,$,m)=>{m(56874);var C=m(15547);U.exports=C("Array").concat},66213:(U,$,m)=>{m(71420),m(42271);var C=m(15547);U.exports=C("Array").entries},60212:(U,$,m)=>{m(7100);var C=m(15547);U.exports=C("Array").filter},67373:(U,$,m)=>{m(96648);var C=m(15547);U.exports=C("Array").find},88191:(U,$,m)=>{m(58665);var C=m(15547);U.exports=C("Array").forEach},41581:(U,$,m)=>{m(85124);var C=m(15547);U.exports=C("Array").includes},91855:(U,$,m)=>{m(89815);var C=m(15547);U.exports=C("Array").indexOf},77466:(U,$,m)=>{m(81171);var C=m(15547);U.exports=C("Array").map},68097:(U,$,m)=>{m(21311);var C=m(15547);U.exports=C("Array").slice},70747:(U,$,m)=>{m(19314);var C=m(15547);U.exports=C("Array").splice},45347:(U,$,m)=>{m(71420),m(80651);var C=m(56958);U.exports=C},36022:(U,$,m)=>{var C=m(76185),_=m(73534),e=Array.prototype;U.exports=function(t){var n=t.concat;return t===e||C(e,t)&&n===e.concat?_:n}},73301:(U,$,m)=>{var C=m(76185),_=m(60212),e=Array.prototype;U.exports=function(t){var n=t.filter;return t===e||C(e,t)&&n===e.filter?_:n}},38387:(U,$,m)=>{var C=m(76185),_=m(67373),e=Array.prototype;U.exports=function(t){var n=t.find;return t===e||C(e,t)&&n===e.find?_:n}},1629:(U,$,m)=>{var C=m(76185),_=m(41581),e=m(73459),t=Array.prototype,n=String.prototype;U.exports=function(r){var s=r.includes;return r===t||C(t,r)&&s===t.includes?_:"string"==typeof r||r===n||C(n,r)&&s===n.includes?e:s}},66338:(U,$,m)=>{var C=m(76185),_=m(91855),e=Array.prototype;U.exports=function(t){var n=t.indexOf;return t===e||C(e,t)&&n===e.indexOf?_:n}},57378:(U,$,m)=>{var C=m(76185),_=m(77466),e=Array.prototype;U.exports=function(t){var n=t.map;return t===e||C(e,t)&&n===e.map?_:n}},70093:(U,$,m)=>{var C=m(76185),_=m(68097),e=Array.prototype;U.exports=function(t){var n=t.slice;return t===e||C(e,t)&&n===e.slice?_:n}},16172:(U,$,m)=>{var C=m(76185),_=m(70747),e=Array.prototype;U.exports=function(t){var n=t.splice;return t===e||C(e,t)&&n===e.splice?_:n}},7706:(U,$,m)=>{var C=m(76185),_=m(9464),e=String.prototype;U.exports=function(t){var n=t.startsWith;return"string"==typeof t||t===e||C(e,t)&&n===e.startsWith?_:n}},22730:(U,$,m)=>{m(86061);var C=m(35060),_=m(30547);C.JSON||(C.JSON={stringify:JSON.stringify}),U.exports=function(t,n,r){return _(C.JSON.stringify,null,arguments)}},66619:(U,$,m)=>{m(7923);var C=m(35060);U.exports=C.Object.assign},4040:(U,$,m)=>{m(13227);var _=m(35060).Object,e=U.exports=function(n,r){return _.defineProperties(n,r)};_.defineProperties.sham&&(e.sham=!0)},7420:(U,$,m)=>{m(24526);var _=m(35060).Object,e=U.exports=function(n,r,s){return _.defineProperty(n,r,s)};_.defineProperty.sham&&(e.sham=!0)},2011:(U,$,m)=>{m(50042);var C=m(35060);U.exports=C.Object.entries},95595:(U,$,m)=>{m(49711);var _=m(35060).Object,e=U.exports=function(n,r){return _.getOwnPropertyDescriptor(n,r)};_.getOwnPropertyDescriptor.sham&&(e.sham=!0)},42093:(U,$,m)=>{m(10130);var C=m(35060);U.exports=C.Object.getOwnPropertyDescriptors},93296:(U,$,m)=>{m(83136);var C=m(35060);U.exports=C.Object.getOwnPropertySymbols},31159:(U,$,m)=>{m(68126);var C=m(35060);U.exports=C.Object.keys},9850:(U,$,m)=>{m(84722),m(71420),m(42271),m(17569),m(52568),m(64111),m(1395),m(80651);var C=m(35060);U.exports=C.Promise},73459:(U,$,m)=>{m(11568);var C=m(15547);U.exports=C("String").includes},9464:(U,$,m)=>{m(72068);var C=m(15547);U.exports=C("String").startsWith},18297:(U,$,m)=>{m(56874),m(42271),m(83136),m(9266),m(87189),m(94898),m(57133),m(3766),m(49342),m(84765),m(83606),m(25909),m(42383),m(98547),m(73418),m(82266),m(30797),m(85504),m(15551),m(61897);var C=m(35060);U.exports=C.Symbol},5933:(U,$,m)=>{m(71420),m(42271),m(80651),m(3766);var C=m(14525);U.exports=C.f("iterator")},70238:(U,$,m)=>{m(71420),m(42271),m(29960);var C=m(35060);U.exports=C.WeakMap},4517:(U,$,m)=>{var C=m(25491);U.exports=C},31584:(U,$,m)=>{var C=m(73223);U.exports=C},46025:(U,$,m)=>{var C=m(14053);U.exports=C},81613:(U,$,m)=>{var C=m(23997);U.exports=C},19775:(U,$,m)=>{var C=m(38806);U.exports=C},9483:(U,$,m)=>{var C=m(62347);U.exports=C},60061:(U,$,m)=>{var C=m(69803);U.exports=C},27254:(U,$,m)=>{var C=m(52944);U.exports=C},62691:(U,$,m)=>{var C=m(11072);U.exports=C},98244:(U,$,m)=>{var C=m(78562);U.exports=C},79668:(U,$,m)=>{var C=m(84120);U.exports=C},5797:(U,$,m)=>{var C=m(84377);U.exports=C},35248:(U,$,m)=>{var C=m(54012);U.exports=C},58316:(U,$,m)=>{var C=m(2687);m(38669),m(33483),m(65193),m(30389),U.exports=C},51479:(U,$,m)=>{var C=m(49949);m(59108),m(98488),m(65802),m(38772),m(96398),m(79699),m(86669),U.exports=C},35392:(U,$,m)=>{var C=m(15525);U.exports=C},80866:(U,$,m)=>{var C=m(22743),_=m(24732),e=m(99727),t=C.TypeError;U.exports=function(n){if(_(n))return n;throw t(e(n)+" is not a function")}},77498:(U,$,m)=>{var C=m(22743),_=m(67459),e=m(99727),t=C.TypeError;U.exports=function(n){if(_(n))return n;throw t(e(n)+" is not a constructor")}},58995:(U,$,m)=>{var C=m(22743),_=m(24732),e=C.String,t=C.TypeError;U.exports=function(n){if("object"==typeof n||_(n))return n;throw t("Can't set "+e(n)+" as a prototype")}},70677:U=>{U.exports=function(){}},43017:(U,$,m)=>{var C=m(22743),_=m(76185),e=C.TypeError;U.exports=function(t,n){if(_(n,t))return t;throw e("Incorrect invocation")}},10157:(U,$,m)=>{var C=m(22743),_=m(78103),e=C.String,t=C.TypeError;U.exports=function(n){if(_(n))return n;throw t(e(n)+" is not an object")}},35877:(U,$,m)=>{var C=m(31469);U.exports=C(function(){if("function"==typeof ArrayBuffer){var _=new ArrayBuffer(8);Object.isExtensible(_)&&Object.defineProperty(_,"a",{value:8})}})},19875:(U,$,m)=>{"use strict";var C=m(53877).forEach,e=m(52995)("forEach");U.exports=e?[].forEach:function(n){return C(this,n,arguments.length>1?arguments[1]:void 0)}},96397:(U,$,m)=>{"use strict";var C=m(22743),_=m(21137),e=m(85246),t=m(49402),n=m(3570),r=m(83672),s=m(67459),u=m(33706),y=m(3115),x=m(74471),B=m(56958),Q=C.Array;U.exports=function(rt){var St=t(rt),Ht=s(this),vt=arguments.length,xt=vt>1?arguments[1]:void 0,Wt=void 0!==xt;Wt&&(xt=_(xt,vt>2?arguments[2]:void 0));var yt,ot,mt,lt,Ut,Rt,Jt=B(St),Ct=0;if(!Jt||this==Q&&r(Jt))for(yt=u(St),ot=Ht?new this(yt):Q(yt);yt>Ct;Ct++)Rt=Wt?xt(St[Ct],Ct):St[Ct],y(ot,Ct,Rt);else for(Ut=(lt=x(St,Jt)).next,ot=Ht?new this:[];!(mt=e(Ut,lt)).done;Ct++)Rt=Wt?n(lt,xt,[mt.value,Ct],!0):mt.value,y(ot,Ct,Rt);return ot.length=Ct,ot}},68047:(U,$,m)=>{var C=m(35197),_=m(83889),e=m(33706),t=function(n){return function(r,s,u){var Q,y=C(r),x=e(y),B=_(u,x);if(n&&s!=s){for(;x>B;)if((Q=y[B++])!=Q)return!0}else for(;x>B;B++)if((n||B in y)&&y[B]===s)return n||B||0;return!n&&-1}};U.exports={includes:t(!0),indexOf:t(!1)}},53877:(U,$,m)=>{var C=m(21137),_=m(31588),e=m(23767),t=m(49402),n=m(33706),r=m(4414),s=_([].push),u=function(y){var x=1==y,B=2==y,Q=3==y,at=4==y,rt=6==y,St=7==y,Ht=5==y||rt;return function(vt,xt,Wt,Jt){for(var Et,ht,Ct=t(vt),yt=e(Ct),ot=C(xt,Wt),mt=n(yt),lt=0,Ut=Jt||r,Rt=x?Ut(vt,mt):B||St?Ut(vt,0):void 0;mt>lt;lt++)if((Ht||lt in yt)&&(ht=ot(Et=yt[lt],lt,Ct),y))if(x)Rt[lt]=ht;else if(ht)switch(y){case 3:return!0;case 5:return Et;case 6:return lt;case 2:s(Rt,Et)}else switch(y){case 4:return!1;case 7:s(Rt,Et)}return rt?-1:Q||at?at:Rt}};U.exports={forEach:u(0),map:u(1),filter:u(2),some:u(3),every:u(4),find:u(5),findIndex:u(6),filterReject:u(7)}},85367:(U,$,m)=>{var C=m(31469),_=m(7084),e=m(10322),t=_("species");U.exports=function(n){return e>=51||!C(function(){var r=[];return(r.constructor={})[t]=function(){return{foo:1}},1!==r[n](Boolean).foo})}},52995:(U,$,m)=>{"use strict";var C=m(31469);U.exports=function(_,e){var t=[][_];return!!t&&C(function(){t.call(null,e||function(){throw 1},1)})}},11566:(U,$,m)=>{var C=m(22743),_=m(83889),e=m(33706),t=m(3115),n=C.Array,r=Math.max;U.exports=function(s,u,y){for(var x=e(s),B=_(u,x),Q=_(void 0===y?x:y,x),at=n(r(Q-B,0)),rt=0;B<Q;B++,rt++)t(at,rt,s[B]);return at.length=rt,at}},90840:(U,$,m)=>{var C=m(31588);U.exports=C([].slice)},69274:(U,$,m)=>{var C=m(11566),_=Math.floor,e=function(r,s){var u=r.length,y=_(u/2);return u<8?t(r,s):n(r,e(C(r,0,y),s),e(C(r,y),s),s)},t=function(r,s){for(var x,B,u=r.length,y=1;y<u;){for(B=y,x=r[y];B&&s(r[B-1],x)>0;)r[B]=r[--B];B!==y++&&(r[B]=x)}return r},n=function(r,s,u,y){for(var x=s.length,B=u.length,Q=0,at=0;Q<x||at<B;)r[Q+at]=Q<x&&at<B?y(s[Q],u[at])<=0?s[Q++]:u[at++]:Q<x?s[Q++]:u[at++];return r};U.exports=e},68921:(U,$,m)=>{var C=m(22743),_=m(10371),e=m(67459),t=m(78103),r=m(7084)("species"),s=C.Array;U.exports=function(u){var y;return _(u)&&(e(y=u.constructor)&&(y===s||_(y.prototype))||t(y)&&null===(y=y[r]))&&(y=void 0),void 0===y?s:y}},4414:(U,$,m)=>{var C=m(68921);U.exports=function(_,e){return new(C(_))(0===e?0:e)}},3570:(U,$,m)=>{var C=m(10157),_=m(14964);U.exports=function(e,t,n,r){try{return r?t(C(n)[0],n[1]):t(n)}catch(s){_(e,"throw",s)}}},4402:(U,$,m)=>{var _=m(7084)("iterator"),e=!1;try{var t=0,n={next:function(){return{done:!!t++}},return:function(){e=!0}};n[_]=function(){return this},Array.from(n,function(){throw 2})}catch(r){}U.exports=function(r,s){if(!s&&!e)return!1;var u=!1;try{var y={};y[_]=function(){return{next:function(){return{done:u=!0}}}},r(y)}catch(x){}return u}},50181:(U,$,m)=>{var C=m(31588),_=C({}.toString),e=C("".slice);U.exports=function(t){return e(_(t),8,-1)}},80063:(U,$,m)=>{var C=m(22743),_=m(57575),e=m(24732),t=m(50181),r=m(7084)("toStringTag"),s=C.Object,u="Arguments"==t(function(){return arguments}());U.exports=_?t:function(x){var B,Q,at;return void 0===x?"Undefined":null===x?"Null":"string"==typeof(Q=function(x,B){try{return x[B]}catch(Q){}}(B=s(x),r))?Q:u?t(B):"Object"==(at=t(B))&&e(B.callee)?"Arguments":at}},79087:(U,$,m)=>{var _=m(31588)("".replace),e=String(Error("zxcasd").stack),t=/\n\s*at [^:]*:[^\n]*/,n=t.test(e);U.exports=function(r,s){if(n&&"string"==typeof r)for(;s--;)r=_(r,t,"");return r}},75925:(U,$,m)=>{"use strict";var C=m(31588),_=m(70658),e=m(33613).getWeakData,t=m(10157),n=m(78103),r=m(43017),s=m(99883),u=m(53877),y=m(44030),x=m(34520),B=x.set,Q=x.getterFor,at=u.find,rt=u.findIndex,St=C([].splice),Ht=0,vt=function(Jt){return Jt.frozen||(Jt.frozen=new xt)},xt=function(){this.entries=[]},Wt=function(Jt,Ct){return at(Jt.entries,function(yt){return yt[0]===Ct})};xt.prototype={get:function(Jt){var Ct=Wt(this,Jt);if(Ct)return Ct[1]},has:function(Jt){return!!Wt(this,Jt)},set:function(Jt,Ct){var yt=Wt(this,Jt);yt?yt[1]=Ct:this.entries.push([Jt,Ct])},delete:function(Jt){var Ct=rt(this.entries,function(yt){return yt[0]===Jt});return~Ct&&St(this.entries,Ct,1),!!~Ct}},U.exports={getConstructor:function(Jt,Ct,yt,ot){var mt=Jt(function(Et,ht){r(Et,lt),B(Et,{type:Ct,id:Ht++,frozen:void 0}),null!=ht&&s(ht,Et[ot],{that:Et,AS_ENTRIES:yt})}),lt=mt.prototype,Ut=Q(Ct),Rt=function(Et,ht,nt){var he=Ut(Et),Mt=e(t(ht),!0);return!0===Mt?vt(he).set(ht,nt):Mt[he.id]=nt,Et};return _(lt,{delete:function(Et){var ht=Ut(this);if(!n(Et))return!1;var nt=e(Et);return!0===nt?vt(ht).delete(Et):nt&&y(nt,ht.id)&&delete nt[ht.id]},has:function(ht){var nt=Ut(this);if(!n(ht))return!1;var he=e(ht);return!0===he?vt(nt).has(ht):he&&y(he,nt.id)}}),_(lt,yt?{get:function(ht){var nt=Ut(this);if(n(ht)){var he=e(ht);return!0===he?vt(nt).get(ht):he?he[nt.id]:void 0}},set:function(ht,nt){return Rt(this,ht,nt)}}:{add:function(ht){return Rt(this,ht,!0)}}),mt}}},66657:(U,$,m)=>{"use strict";var C=m(70147),_=m(22743),e=m(33613),t=m(31469),n=m(78204),r=m(99883),s=m(43017),u=m(24732),y=m(78103),x=m(63598),B=m(13528).f,Q=m(53877).forEach,at=m(25847),rt=m(34520),St=rt.set,Ht=rt.getterFor;U.exports=function(vt,xt,Wt){var Ut,Jt=-1!==vt.indexOf("Map"),Ct=-1!==vt.indexOf("Weak"),yt=Jt?"set":"add",ot=_[vt],mt=ot&&ot.prototype,lt={};if(at&&u(ot)&&(Ct||mt.forEach&&!t(function(){(new ot).entries().next()}))){var Rt=(Ut=xt(function(ht,nt){St(s(ht,Rt),{type:vt,collection:new ot}),null!=nt&&r(nt,ht[yt],{that:ht,AS_ENTRIES:Jt})})).prototype,Et=Ht(vt);Q(["add","clear","delete","forEach","get","has","set","keys","values","entries"],function(ht){var nt="add"==ht||"set"==ht;ht in mt&&(!Ct||"clear"!=ht)&&n(Rt,ht,function(he,Mt){var Nt=Et(this).collection;if(!nt&&Ct&&!y(he))return"get"==ht&&void 0;var de=Nt[ht](0===he?0:he,Mt);return nt?this:de})}),Ct||B(Rt,"size",{configurable:!0,get:function(){return Et(this).collection.size}})}else Ut=Wt.getConstructor(xt,vt,Jt,yt),e.enable();return x(Ut,vt,!1,!0),lt[vt]=Ut,C({global:!0,forced:!0},lt),Ct||Wt.setStrong(Ut,vt,Jt),Ut}},47902:(U,$,m)=>{var C=m(44030),_=m(68566),e=m(26552),t=m(13528);U.exports=function(n,r,s){for(var u=_(r),y=t.f,x=e.f,B=0;B<u.length;B++){var Q=u[B];!C(n,Q)&&(!s||!C(s,Q))&&y(n,Q,x(r,Q))}}},15268:(U,$,m)=>{var _=m(7084)("match");U.exports=function(e){var t=/./;try{"/./"[e](t)}catch(n){try{return t[_]=!1,"/./"[e](t)}catch(r){}}return!1}},87275:(U,$,m)=>{var C=m(31469);U.exports=!C(function(){function _(){}return _.prototype.constructor=null,Object.getPrototypeOf(new _)!==_.prototype})},690:(U,$,m)=>{"use strict";var C=m(39336).IteratorPrototype,_=m(80332),e=m(41137),t=m(63598),n=m(44362),r=function(){return this};U.exports=function(s,u,y,x){var B=u+" Iterator";return s.prototype=_(C,{next:e(+!x,y)}),t(s,B,!1,!0),n[B]=r,s}},78204:(U,$,m)=>{var C=m(25847),_=m(13528),e=m(41137);U.exports=C?function(t,n,r){return _.f(t,n,e(1,r))}:function(t,n,r){return t[n]=r,t}},41137:U=>{U.exports=function($,m){return{enumerable:!(1&$),configurable:!(2&$),writable:!(4&$),value:m}}},3115:(U,$,m)=>{"use strict";var C=m(73540),_=m(13528),e=m(41137);U.exports=function(t,n,r){var s=C(n);s in t?_.f(t,s,e(0,r)):t[s]=r}},52928:(U,$,m)=>{"use strict";var C=m(70147),_=m(85246),e=m(92838),t=m(56089),n=m(24732),r=m(690),s=m(84361),u=m(91100),y=m(63598),x=m(78204),B=m(51121),Q=m(7084),at=m(44362),rt=m(39336),St=t.PROPER,Ht=t.CONFIGURABLE,vt=rt.IteratorPrototype,xt=rt.BUGGY_SAFARI_ITERATORS,Wt=Q("iterator"),Ct="values",yt="entries",ot=function(){return this};U.exports=function(mt,lt,Ut,Rt,Et,ht,nt){r(Ut,lt,Rt);var Ne,Qe,Di,he=function(Ze){if(Ze===Et&&ue)return ue;if(!xt&&Ze in de)return de[Ze];switch(Ze){case"keys":case Ct:case yt:return function(){return new Ut(this,Ze)}}return function(){return new Ut(this)}},Mt=lt+" Iterator",Nt=!1,de=mt.prototype,ve=de[Wt]||de["@@iterator"]||Et&&de[Et],ue=!xt&&ve||he(Et),Be="Array"==lt&&de.entries||ve;if(Be&&(Ne=s(Be.call(new mt)))!==Object.prototype&&Ne.next&&(!e&&s(Ne)!==vt&&(u?u(Ne,vt):n(Ne[Wt])||B(Ne,Wt,ot)),y(Ne,Mt,!0,!0),e&&(at[Mt]=ot)),St&&Et==Ct&&ve&&ve.name!==Ct&&(!e&&Ht?x(de,"name",Ct):(Nt=!0,ue=function(){return _(ve,this)})),Et)if(Qe={values:he(Ct),keys:ht?ue:he("keys"),entries:he(yt)},nt)for(Di in Qe)(xt||Nt||!(Di in de))&&B(de,Di,Qe[Di]);else C({target:lt,proto:!0,forced:xt||Nt},Qe);return(!e||nt)&&de[Wt]!==ue&&B(de,Wt,ue,{name:Et}),at[lt]=ue,Qe}},59478:(U,$,m)=>{var C=m(35060),_=m(44030),e=m(14525),t=m(13528).f;U.exports=function(n){var r=C.Symbol||(C.Symbol={});_(r,n)||t(r,n,{value:e.f(n)})}},25847:(U,$,m)=>{var C=m(31469);U.exports=!C(function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})},97947:(U,$,m)=>{var C=m(22743),_=m(78103),e=C.document,t=_(e)&&_(e.createElement);U.exports=function(n){return t?e.createElement(n):{}}},9113:U=>{U.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},28150:U=>{U.exports="object"==typeof window},93221:(U,$,m)=>{var C=m(91339),_=m(22743);U.exports=/ipad|iphone|ipod/i.test(C)&&void 0!==_.Pebble},49612:(U,$,m)=>{var C=m(91339);U.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(C)},70751:(U,$,m)=>{var C=m(50181),_=m(22743);U.exports="process"==C(_.process)},25330:(U,$,m)=>{var C=m(91339);U.exports=/web0s(?!.*chrome)/i.test(C)},91339:(U,$,m)=>{var C=m(85697);U.exports=C("navigator","userAgent")||""},10322:(U,$,m)=>{var s,u,C=m(22743),_=m(91339),e=C.process,t=C.Deno,n=e&&e.versions||t&&t.version,r=n&&n.v8;r&&(u=(s=r.split("."))[0]>0&&s[0]<4?1:+(s[0]+s[1])),!u&&_&&(!(s=_.match(/Edge\/(\d+)/))||s[1]>=74)&&(s=_.match(/Chrome\/(\d+)/))&&(u=+s[1]),U.exports=u},15547:(U,$,m)=>{var C=m(35060);U.exports=function(_){return C[_+"Prototype"]}},44169:U=>{U.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},92335:(U,$,m)=>{var C=m(31469),_=m(41137);U.exports=!C(function(){var e=Error("a");return!("stack"in e)||(Object.defineProperty(e,"stack",_(1,7)),7!==e.stack)})},70147:(U,$,m)=>{"use strict";var C=m(22743),_=m(30547),e=m(31588),t=m(24732),n=m(26552).f,r=m(35059),s=m(35060),u=m(21137),y=m(78204),x=m(44030),B=function(Q){var at=function(rt,St,Ht){if(this instanceof at){switch(arguments.length){case 0:return new Q;case 1:return new Q(rt);case 2:return new Q(rt,St)}return new Q(rt,St,Ht)}return _(Q,this,arguments)};return at.prototype=Q.prototype,at};U.exports=function(Q,at){var yt,ot,mt,lt,Ut,Rt,Et,ht,rt=Q.target,St=Q.global,Ht=Q.stat,vt=Q.proto,xt=St?C:Ht?C[rt]:(C[rt]||{}).prototype,Wt=St?s:s[rt]||y(s,rt,{})[rt],Jt=Wt.prototype;for(mt in at)yt=!r(St?mt:rt+(Ht?".":"#")+mt,Q.forced)&&xt&&x(xt,mt),Ut=Wt[mt],yt&&(Rt=Q.noTargetGet?(ht=n(xt,mt))&&ht.value:xt[mt]),lt=yt&&Rt?Rt:at[mt],(!yt||typeof Ut!=typeof lt)&&(Et=Q.bind&&yt?u(lt,C):Q.wrap&&yt?B(lt):vt&&t(lt)?e(lt):lt,(Q.sham||lt&&lt.sham||Ut&&Ut.sham)&&y(Et,"sham",!0),y(Wt,mt,Et),vt&&(x(s,ot=rt+"Prototype")||y(s,ot,{}),y(s[ot],mt,lt),Q.real&&Jt&&!Jt[mt]&&y(Jt,mt,lt)))}},31469:U=>{U.exports=function($){try{return!!$()}catch(m){return!0}}},23216:(U,$,m)=>{var C=m(31469);U.exports=!C(function(){return Object.isExtensible(Object.preventExtensions({}))})},30547:U=>{var $=Function.prototype,m=$.apply,_=$.call;U.exports="object"==typeof Reflect&&Reflect.apply||($.bind?_.bind(m):function(){return _.apply(m,arguments)})},21137:(U,$,m)=>{var C=m(31588),_=m(80866),e=C(C.bind);U.exports=function(t,n){return _(t),void 0===n?t:e?e(t,n):function(){return t.apply(n,arguments)}}},85246:U=>{var $=Function.prototype.call;U.exports=$.bind?$.bind($):function(){return $.apply($,arguments)}},56089:(U,$,m)=>{var C=m(25847),_=m(44030),e=Function.prototype,t=C&&Object.getOwnPropertyDescriptor,n=_(e,"name"),r=n&&"something"===function(){}.name,s=n&&(!C||C&&t(e,"name").configurable);U.exports={EXISTS:n,PROPER:r,CONFIGURABLE:s}},31588:U=>{var $=Function.prototype,m=$.bind,C=$.call,_=m&&m.bind(C);U.exports=m?function(e){return e&&_(C,e)}:function(e){return e&&function(){return C.apply(e,arguments)}}},85697:(U,$,m)=>{var C=m(35060),_=m(22743),e=m(24732),t=function(n){return e(n)?n:void 0};U.exports=function(n,r){return arguments.length<2?t(C[n])||t(_[n]):C[n]&&C[n][r]||_[n]&&_[n][r]}},56958:(U,$,m)=>{var C=m(80063),_=m(30047),e=m(44362),n=m(7084)("iterator");U.exports=function(r){if(null!=r)return _(r,n)||_(r,"@@iterator")||e[C(r)]}},74471:(U,$,m)=>{var C=m(22743),_=m(85246),e=m(80866),t=m(10157),n=m(99727),r=m(56958),s=C.TypeError;U.exports=function(u,y){var x=arguments.length<2?r(u):y;if(e(x))return t(_(x,u));throw s(n(u)+" is not iterable")}},30047:(U,$,m)=>{var C=m(80866);U.exports=function(_,e){var t=_[e];return null==t?void 0:C(t)}},22743:U=>{var $=function(m){return m&&m.Math==Math&&m};U.exports=$("object"==typeof globalThis&&globalThis)||$("object"==typeof window&&window)||$("object"==typeof self&&self)||$("object"==typeof global&&global)||function(){return this}()||Function("return this")()},44030:(U,$,m)=>{var C=m(31588),_=m(49402),e=C({}.hasOwnProperty);U.exports=Object.hasOwn||function(n,r){return e(_(n),r)}},89675:U=>{U.exports={}},18819:(U,$,m)=>{var C=m(22743);U.exports=function(_,e){var t=C.console;t&&t.error&&(1==arguments.length?t.error(_):t.error(_,e))}},93074:(U,$,m)=>{var C=m(85697);U.exports=C("document","documentElement")},5223:(U,$,m)=>{var C=m(25847),_=m(31469),e=m(97947);U.exports=!C&&!_(function(){return 7!=Object.defineProperty(e("div"),"a",{get:function(){return 7}}).a})},23767:(U,$,m)=>{var C=m(22743),_=m(31588),e=m(31469),t=m(50181),n=C.Object,r=_("".split);U.exports=e(function(){return!n("z").propertyIsEnumerable(0)})?function(s){return"String"==t(s)?r(s,""):n(s)}:n},13271:(U,$,m)=>{var C=m(31588),_=m(24732),e=m(65732),t=C(Function.toString);_(e.inspectSource)||(e.inspectSource=function(n){return t(n)}),U.exports=e.inspectSource},42783:(U,$,m)=>{var C=m(78103),_=m(78204);U.exports=function(e,t){C(t)&&"cause"in t&&_(e,"cause",t.cause)}},33613:(U,$,m)=>{var C=m(70147),_=m(31588),e=m(89675),t=m(78103),n=m(44030),r=m(13528).f,s=m(42769),u=m(24281),y=m(19086),x=m(7226),B=m(23216),Q=!1,at=x("meta"),rt=0,St=function(Ct){r(Ct,at,{value:{objectID:"O"+rt++,weakData:{}}})},Jt=U.exports={enable:function(){Jt.enable=function(){},Q=!0;var Ct=s.f,yt=_([].splice),ot={};ot[at]=1,Ct(ot).length&&(s.f=function(mt){for(var lt=Ct(mt),Ut=0,Rt=lt.length;Ut<Rt;Ut++)if(lt[Ut]===at){yt(lt,Ut,1);break}return lt},C({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:u.f}))},fastKey:function(Ct,yt){if(!t(Ct))return"symbol"==typeof Ct?Ct:("string"==typeof Ct?"S":"P")+Ct;if(!n(Ct,at)){if(!y(Ct))return"F";if(!yt)return"E";St(Ct)}return Ct[at].objectID},getWeakData:function(Ct,yt){if(!n(Ct,at)){if(!y(Ct))return!0;if(!yt)return!1;St(Ct)}return Ct[at].weakData},onFreeze:function(Ct){return B&&Q&&y(Ct)&&!n(Ct,at)&&St(Ct),Ct}};e[at]=!0},34520:(U,$,m)=>{var at,rt,St,C=m(63185),_=m(22743),e=m(31588),t=m(78103),n=m(78204),r=m(44030),s=m(65732),u=m(35027),y=m(89675),x="Object already initialized",B=_.TypeError;if(C||s.state){var xt=s.state||(s.state=new(0,_.WeakMap)),Wt=e(xt.get),Jt=e(xt.has),Ct=e(xt.set);at=function(ot,mt){if(Jt(xt,ot))throw new B(x);return mt.facade=ot,Ct(xt,ot,mt),mt},rt=function(ot){return Wt(xt,ot)||{}},St=function(ot){return Jt(xt,ot)}}else{var yt=u("state");y[yt]=!0,at=function(ot,mt){if(r(ot,yt))throw new B(x);return mt.facade=ot,n(ot,yt,mt),mt},rt=function(ot){return r(ot,yt)?ot[yt]:{}},St=function(ot){return r(ot,yt)}}U.exports={set:at,get:rt,has:St,enforce:function(ot){return St(ot)?rt(ot):at(ot,{})},getterFor:function(ot){return function(mt){var lt;if(!t(mt)||(lt=rt(mt)).type!==ot)throw B("Incompatible receiver, "+ot+" required");return lt}}}},83672:(U,$,m)=>{var C=m(7084),_=m(44362),e=C("iterator"),t=Array.prototype;U.exports=function(n){return void 0!==n&&(_.Array===n||t[e]===n)}},10371:(U,$,m)=>{var C=m(50181);U.exports=Array.isArray||function(e){return"Array"==C(e)}},24732:U=>{U.exports=function($){return"function"==typeof $}},67459:(U,$,m)=>{var C=m(31588),_=m(31469),e=m(24732),t=m(80063),n=m(85697),r=m(13271),s=function(){},u=[],y=n("Reflect","construct"),x=/^\s*(?:class|function)\b/,B=C(x.exec),Q=!x.exec(s),at=function(Ht){if(!e(Ht))return!1;try{return y(s,u,Ht),!0}catch(vt){return!1}},rt=function(Ht){if(!e(Ht))return!1;switch(t(Ht)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return Q||!!B(x,r(Ht))}catch(vt){return!0}};rt.sham=!0,U.exports=!y||_(function(){var St;return at(at.call)||!at(Object)||!at(function(){St=!0})||St})?rt:at},35059:(U,$,m)=>{var C=m(31469),_=m(24732),e=/#|\.prototype\./,t=function(y,x){var B=r[n(y)];return B==u||B!=s&&(_(x)?C(x):!!x)},n=t.normalize=function(y){return String(y).replace(e,".").toLowerCase()},r=t.data={},s=t.NATIVE="N",u=t.POLYFILL="P";U.exports=t},78103:(U,$,m)=>{var C=m(24732);U.exports=function(_){return"object"==typeof _?null!==_:C(_)}},92838:U=>{U.exports=!0},82888:(U,$,m)=>{var C=m(78103),_=m(50181),t=m(7084)("match");U.exports=function(n){var r;return C(n)&&(void 0!==(r=n[t])?!!r:"RegExp"==_(n))}},90094:(U,$,m)=>{var C=m(22743),_=m(85697),e=m(24732),t=m(76185),n=m(43587),r=C.Object;U.exports=n?function(s){return"symbol"==typeof s}:function(s){var u=_("Symbol");return e(u)&&t(u.prototype,r(s))}},99883:(U,$,m)=>{var C=m(22743),_=m(21137),e=m(85246),t=m(10157),n=m(99727),r=m(83672),s=m(33706),u=m(76185),y=m(74471),x=m(56958),B=m(14964),Q=C.TypeError,at=function(St,Ht){this.stopped=St,this.result=Ht},rt=at.prototype;U.exports=function(St,Ht,vt){var ot,mt,lt,Ut,Rt,Et,ht,Wt=!(!vt||!vt.AS_ENTRIES),Jt=!(!vt||!vt.IS_ITERATOR),Ct=!(!vt||!vt.INTERRUPTED),yt=_(Ht,vt&&vt.that),nt=function(Mt){return ot&&B(ot,"normal",Mt),new at(!0,Mt)},he=function(Mt){return Wt?(t(Mt),Ct?yt(Mt[0],Mt[1],nt):yt(Mt[0],Mt[1])):Ct?yt(Mt,nt):yt(Mt)};if(Jt)ot=St;else{if(!(mt=x(St)))throw Q(n(St)+" is not iterable");if(r(mt)){for(lt=0,Ut=s(St);Ut>lt;lt++)if((Rt=he(St[lt]))&&u(rt,Rt))return Rt;return new at(!1)}ot=y(St,mt)}for(Et=ot.next;!(ht=e(Et,ot)).done;){try{Rt=he(ht.value)}catch(Mt){B(ot,"throw",Mt)}if("object"==typeof Rt&&Rt&&u(rt,Rt))return Rt}return new at(!1)}},14964:(U,$,m)=>{var C=m(85246),_=m(10157),e=m(30047);U.exports=function(t,n,r){var s,u;_(t);try{if(!(s=e(t,"return"))){if("throw"===n)throw r;return r}s=C(s,t)}catch(y){u=!0,s=y}if("throw"===n)throw r;if(u)throw s;return _(s),r}},39336:(U,$,m)=>{"use strict";var x,B,Q,C=m(31469),_=m(24732),e=m(80332),t=m(84361),n=m(51121),r=m(7084),s=m(92838),u=r("iterator"),y=!1;[].keys&&("next"in(Q=[].keys())?(B=t(t(Q)))!==Object.prototype&&(x=B):y=!0),null==x||C(function(){var rt={};return x[u].call(rt)!==rt})?x={}:s&&(x=e(x)),_(x[u])||n(x,u,function(){return this}),U.exports={IteratorPrototype:x,BUGGY_SAFARI_ITERATORS:y}},44362:U=>{U.exports={}},33706:(U,$,m)=>{var C=m(61468);U.exports=function(_){return C(_.length)}},72845:(U,$,m)=>{var St,Ht,vt,xt,Wt,Jt,Ct,yt,C=m(22743),_=m(21137),e=m(26552).f,t=m(76401).set,n=m(49612),r=m(93221),s=m(25330),u=m(70751),y=C.MutationObserver||C.WebKitMutationObserver,x=C.document,B=C.process,Q=C.Promise,at=e(C,"queueMicrotask"),rt=at&&at.value;rt||(St=function(){var ot,mt;for(u&&(ot=B.domain)&&ot.exit();Ht;){mt=Ht.fn,Ht=Ht.next;try{mt()}catch(lt){throw Ht?xt():vt=void 0,lt}}vt=void 0,ot&&ot.enter()},n||u||s||!y||!x?!r&&Q&&Q.resolve?((Ct=Q.resolve(void 0)).constructor=Q,yt=_(Ct.then,Ct),xt=function(){yt(St)}):u?xt=function(){B.nextTick(St)}:(t=_(t,C),xt=function(){t(St)}):(Wt=!0,Jt=x.createTextNode(""),new y(St).observe(Jt,{characterData:!0}),xt=function(){Jt.data=Wt=!Wt})),U.exports=rt||function(ot){var mt={fn:ot,next:void 0};vt&&(vt.next=mt),Ht||(Ht=mt,xt()),vt=mt}},38977:(U,$,m)=>{var C=m(22743);U.exports=C.Promise},62581:(U,$,m)=>{var C=m(10322),_=m(31469);U.exports=!!Object.getOwnPropertySymbols&&!_(function(){var e=Symbol();return!String(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&C&&C<41})},2049:(U,$,m)=>{var C=m(31469),_=m(7084),e=m(92838),t=_("iterator");U.exports=!C(function(){var n=new URL("b?a=1&b=2&c=3","http://a"),r=n.searchParams,s="";return n.pathname="c%20d",r.forEach(function(u,y){r.delete("b"),s+=y+u}),e&&!n.toJSON||!r.sort||"http://a/c%20d?a=1&c=3"!==n.href||"3"!==r.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!r[t]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://\u0442\u0435\u0441\u0442").host||"#%D0%B1"!==new URL("http://a#\u0431").hash||"a1c3"!==s||"x"!==new URL("http://x",void 0).host})},63185:(U,$,m)=>{var C=m(22743),_=m(24732),e=m(13271),t=C.WeakMap;U.exports=_(t)&&/native code/.test(e(t))},39802:(U,$,m)=>{"use strict";var C=m(80866),_=function(e){var t,n;this.promise=new e(function(r,s){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=r,n=s}),this.resolve=C(t),this.reject=C(n)};U.exports.f=function(e){return new _(e)}},58823:(U,$,m)=>{var C=m(94506);U.exports=function(_,e){return void 0===_?arguments.length<2?"":e:C(_)}},43353:(U,$,m)=>{var C=m(22743),_=m(82888),e=C.TypeError;U.exports=function(t){if(_(t))throw e("The method doesn't accept regular expressions");return t}},94347:(U,$,m)=>{"use strict";var C=m(25847),_=m(31588),e=m(85246),t=m(31469),n=m(77978),r=m(30233),s=m(19664),u=m(49402),y=m(23767),x=Object.assign,B=Object.defineProperty,Q=_([].concat);U.exports=!x||t(function(){if(C&&1!==x({b:1},x(B({},"a",{enumerable:!0,get:function(){B(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var at={},rt={},St=Symbol(),Ht="abcdefghijklmnopqrst";return at[St]=7,Ht.split("").forEach(function(vt){rt[vt]=vt}),7!=x({},at)[St]||n(x({},rt)).join("")!=Ht})?function(rt,St){for(var Ht=u(rt),vt=arguments.length,xt=1,Wt=r.f,Jt=s.f;vt>xt;)for(var lt,Ct=y(arguments[xt++]),yt=Wt?Q(n(Ct),Wt(Ct)):n(Ct),ot=yt.length,mt=0;ot>mt;)lt=yt[mt++],(!C||e(Jt,Ct,lt))&&(Ht[lt]=Ct[lt]);return Ht}:x},80332:(U,$,m)=>{var vt,C=m(10157),_=m(68453),e=m(44169),t=m(89675),n=m(93074),r=m(97947),s=m(35027),x="prototype",B="script",Q=s("IE_PROTO"),at=function(){},rt=function(Wt){return"<"+B+">"+Wt+"</"+B+">"},St=function(Wt){Wt.write(rt("")),Wt.close();var Jt=Wt.parentWindow.Object;return Wt=null,Jt},xt=function(){try{vt=new ActiveXObject("htmlfile")}catch(Jt){}xt="undefined"!=typeof document?document.domain&&vt?St(vt):function(){var Ct,Wt=r("iframe");return Wt.style.display="none",n.appendChild(Wt),Wt.src=String("javascript:"),(Ct=Wt.contentWindow.document).open(),Ct.write(rt("document.F=Object")),Ct.close(),Ct.F}():St(vt);for(var Wt=e.length;Wt--;)delete xt[x][e[Wt]];return xt()};t[Q]=!0,U.exports=Object.create||function(Jt,Ct){var yt;return null!==Jt?(at[x]=C(Jt),yt=new at,at[x]=null,yt[Q]=Jt):yt=xt(),void 0===Ct?yt:_(yt,Ct)}},68453:(U,$,m)=>{var C=m(25847),_=m(13528),e=m(10157),t=m(35197),n=m(77978);U.exports=C?Object.defineProperties:function(s,u){e(s);for(var at,y=t(u),x=n(u),B=x.length,Q=0;B>Q;)_.f(s,at=x[Q++],y[at]);return s}},13528:(U,$,m)=>{var C=m(22743),_=m(25847),e=m(5223),t=m(10157),n=m(73540),r=C.TypeError,s=Object.defineProperty;$.f=_?s:function(y,x,B){if(t(y),x=n(x),t(B),e)try{return s(y,x,B)}catch(Q){}if("get"in B||"set"in B)throw r("Accessors not supported");return"value"in B&&(y[x]=B.value),y}},26552:(U,$,m)=>{var C=m(25847),_=m(85246),e=m(19664),t=m(41137),n=m(35197),r=m(73540),s=m(44030),u=m(5223),y=Object.getOwnPropertyDescriptor;$.f=C?y:function(B,Q){if(B=n(B),Q=r(Q),u)try{return y(B,Q)}catch(at){}if(s(B,Q))return t(!_(e.f,B,Q),B[Q])}},24281:(U,$,m)=>{var C=m(50181),_=m(35197),e=m(42769).f,t=m(11566),n="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];U.exports.f=function(u){return n&&"Window"==C(u)?function(s){try{return e(s)}catch(u){return t(n)}}(u):e(_(u))}},42769:(U,$,m)=>{var C=m(1991),e=m(44169).concat("length","prototype");$.f=Object.getOwnPropertyNames||function(n){return C(n,e)}},30233:(U,$)=>{$.f=Object.getOwnPropertySymbols},84361:(U,$,m)=>{var C=m(22743),_=m(44030),e=m(24732),t=m(49402),n=m(35027),r=m(87275),s=n("IE_PROTO"),u=C.Object,y=u.prototype;U.exports=r?u.getPrototypeOf:function(x){var B=t(x);if(_(B,s))return B[s];var Q=B.constructor;return e(Q)&&B instanceof Q?Q.prototype:B instanceof u?y:null}},19086:(U,$,m)=>{var C=m(31469),_=m(78103),e=m(50181),t=m(35877),n=Object.isExtensible,r=C(function(){n(1)});U.exports=r||t?function(u){return!(!_(u)||t&&"ArrayBuffer"==e(u))&&(!n||n(u))}:n},76185:(U,$,m)=>{var C=m(31588);U.exports=C({}.isPrototypeOf)},1991:(U,$,m)=>{var C=m(31588),_=m(44030),e=m(35197),t=m(68047).indexOf,n=m(89675),r=C([].push);U.exports=function(s,u){var Q,y=e(s),x=0,B=[];for(Q in y)!_(n,Q)&&_(y,Q)&&r(B,Q);for(;u.length>x;)_(y,Q=u[x++])&&(~t(B,Q)||r(B,Q));return B}},77978:(U,$,m)=>{var C=m(1991),_=m(44169);U.exports=Object.keys||function(t){return C(t,_)}},19664:(U,$)=>{"use strict";var m={}.propertyIsEnumerable,C=Object.getOwnPropertyDescriptor,_=C&&!m.call({1:2},1);$.f=_?function(t){var n=C(this,t);return!!n&&n.enumerable}:m},91100:(U,$,m)=>{var C=m(31588),_=m(10157),e=m(58995);U.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var r,t=!1,n={};try{(r=C(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(n,[]),t=n instanceof Array}catch(s){}return function(u,y){return _(u),e(y),t?r(u,y):u.__proto__=y,u}}():void 0)},6936:(U,$,m)=>{var C=m(25847),_=m(31588),e=m(77978),t=m(35197),r=_(m(19664).f),s=_([].push),u=function(y){return function(x){for(var Ht,B=t(x),Q=e(B),at=Q.length,rt=0,St=[];at>rt;)Ht=Q[rt++],(!C||r(B,Ht))&&s(St,y?[Ht,B[Ht]]:B[Ht]);return St}};U.exports={entries:u(!0),values:u(!1)}},93005:(U,$,m)=>{"use strict";var C=m(57575),_=m(80063);U.exports=C?{}.toString:function(){return"[object "+_(this)+"]"}},75671:(U,$,m)=>{var C=m(22743),_=m(85246),e=m(24732),t=m(78103),n=C.TypeError;U.exports=function(r,s){var u,y;if("string"===s&&e(u=r.toString)&&!t(y=_(u,r))||e(u=r.valueOf)&&!t(y=_(u,r))||"string"!==s&&e(u=r.toString)&&!t(y=_(u,r)))return y;throw n("Can't convert object to primitive value")}},68566:(U,$,m)=>{var C=m(85697),_=m(31588),e=m(42769),t=m(30233),n=m(10157),r=_([].concat);U.exports=C("Reflect","ownKeys")||function(u){var y=e.f(n(u)),x=t.f;return x?r(y,x(u)):y}},35060:U=>{U.exports={}},50819:U=>{U.exports=function($){try{return{error:!1,value:$()}}catch(m){return{error:!0,value:m}}}},92273:(U,$,m)=>{var C=m(10157),_=m(78103),e=m(39802);U.exports=function(t,n){if(C(t),_(n)&&n.constructor===t)return n;var r=e.f(t);return(0,r.resolve)(n),r.promise}},75893:U=>{var $=function(){this.head=null,this.tail=null};$.prototype={add:function(m){var C={item:m,next:null};this.head?this.tail.next=C:this.head=C,this.tail=C},get:function(){var m=this.head;if(m)return this.head=m.next,this.tail===m&&(this.tail=null),m.item}},U.exports=$},70658:(U,$,m)=>{var C=m(51121);U.exports=function(_,e,t){for(var n in e)t&&t.unsafe&&_[n]?_[n]=e[n]:C(_,n,e[n],t);return _}},51121:(U,$,m)=>{var C=m(78204);U.exports=function(_,e,t,n){n&&n.enumerable?_[e]=t:C(_,e,t)}},86213:(U,$,m)=>{var _=m(22743).TypeError;U.exports=function(e){if(null==e)throw _("Can't call method on "+e);return e}},41728:(U,$,m)=>{var C=m(22743),_=Object.defineProperty;U.exports=function(e,t){try{_(C,e,{value:t,configurable:!0,writable:!0})}catch(n){C[e]=t}return t}},13961:(U,$,m)=>{"use strict";var C=m(85697),_=m(13528),e=m(7084),t=m(25847),n=e("species");U.exports=function(r){var s=C(r);t&&s&&!s[n]&&(0,_.f)(s,n,{configurable:!0,get:function(){return this}})}},63598:(U,$,m)=>{var C=m(57575),_=m(13528).f,e=m(78204),t=m(44030),n=m(93005),s=m(7084)("toStringTag");U.exports=function(u,y,x,B){if(u){var Q=x?u:u.prototype;t(Q,s)||_(Q,s,{configurable:!0,value:y}),B&&!C&&e(Q,"toString",n)}}},35027:(U,$,m)=>{var C=m(843),_=m(7226),e=C("keys");U.exports=function(t){return e[t]||(e[t]=_(t))}},65732:(U,$,m)=>{var C=m(22743),_=m(41728),e="__core-js_shared__",t=C[e]||_(e,{});U.exports=t},843:(U,$,m)=>{var C=m(92838),_=m(65732);(U.exports=function(e,t){return _[e]||(_[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.20.1",mode:C?"pure":"global",copyright:"\xa9 2021 Denis Pushkarev (zloirock.ru)"})},85972:(U,$,m)=>{var C=m(10157),_=m(77498),t=m(7084)("species");U.exports=function(n,r){var u,s=C(n).constructor;return void 0===s||null==(u=C(s)[t])?r:_(u)}},93071:(U,$,m)=>{var C=m(31588),_=m(21524),e=m(94506),t=m(86213),n=C("".charAt),r=C("".charCodeAt),s=C("".slice),u=function(y){return function(x,B){var St,Ht,Q=e(t(x)),at=_(B),rt=Q.length;return at<0||at>=rt?y?"":void 0:(St=r(Q,at))<55296||St>56319||at+1===rt||(Ht=r(Q,at+1))<56320||Ht>57343?y?n(Q,at):St:y?s(Q,at,at+2):Ht-56320+(St-55296<<10)+65536}};U.exports={codeAt:u(!1),charAt:u(!0)}},76401:(U,$,m)=>{var yt,ot,mt,lt,C=m(22743),_=m(30547),e=m(21137),t=m(24732),n=m(44030),r=m(31469),s=m(93074),u=m(90840),y=m(97947),x=m(49612),B=m(70751),Q=C.setImmediate,at=C.clearImmediate,rt=C.process,St=C.Dispatch,Ht=C.Function,vt=C.MessageChannel,xt=C.String,Wt=0,Jt={},Ct="onreadystatechange";try{yt=C.location}catch(nt){}var Ut=function(nt){if(n(Jt,nt)){var he=Jt[nt];delete Jt[nt],he()}},Rt=function(nt){return function(){Ut(nt)}},Et=function(nt){Ut(nt.data)},ht=function(nt){C.postMessage(xt(nt),yt.protocol+"//"+yt.host)};(!Q||!at)&&(Q=function(he){var Mt=u(arguments,1);return Jt[++Wt]=function(){_(t(he)?he:Ht(he),void 0,Mt)},ot(Wt),Wt},at=function(he){delete Jt[he]},B?ot=function(nt){rt.nextTick(Rt(nt))}:St&&St.now?ot=function(nt){St.now(Rt(nt))}:vt&&!x?(lt=(mt=new vt).port2,mt.port1.onmessage=Et,ot=e(lt.postMessage,lt)):C.addEventListener&&t(C.postMessage)&&!C.importScripts&&yt&&"file:"!==yt.protocol&&!r(ht)?(ot=ht,C.addEventListener("message",Et,!1)):ot=Ct in y("script")?function(nt){s.appendChild(y("script"))[Ct]=function(){s.removeChild(this),Ut(nt)}}:function(nt){setTimeout(Rt(nt),0)}),U.exports={set:Q,clear:at}},83889:(U,$,m)=>{var C=m(21524),_=Math.max,e=Math.min;U.exports=function(t,n){var r=C(t);return r<0?_(r+n,0):e(r,n)}},35197:(U,$,m)=>{var C=m(23767),_=m(86213);U.exports=function(e){return C(_(e))}},21524:U=>{var $=Math.ceil,m=Math.floor;U.exports=function(C){var _=+C;return _!=_||0===_?0:(_>0?m:$)(_)}},61468:(U,$,m)=>{var C=m(21524),_=Math.min;U.exports=function(e){return e>0?_(C(e),9007199254740991):0}},49402:(U,$,m)=>{var C=m(22743),_=m(86213),e=C.Object;U.exports=function(t){return e(_(t))}},25696:(U,$,m)=>{var C=m(22743),_=m(85246),e=m(78103),t=m(90094),n=m(30047),r=m(75671),s=m(7084),u=C.TypeError,y=s("toPrimitive");U.exports=function(x,B){if(!e(x)||t(x))return x;var at,Q=n(x,y);if(Q){if(void 0===B&&(B="default"),at=_(Q,x,B),!e(at)||t(at))return at;throw u("Can't convert object to primitive value")}return void 0===B&&(B="number"),r(x,B)}},73540:(U,$,m)=>{var C=m(25696),_=m(90094);U.exports=function(e){var t=C(e,"string");return _(t)?t:t+""}},57575:(U,$,m)=>{var e={};e[m(7084)("toStringTag")]="z",U.exports="[object z]"===String(e)},94506:(U,$,m)=>{var C=m(22743),_=m(80063),e=C.String;U.exports=function(t){if("Symbol"===_(t))throw TypeError("Cannot convert a Symbol value to a string");return e(t)}},99727:(U,$,m)=>{var _=m(22743).String;U.exports=function(e){try{return _(e)}catch(t){return"Object"}}},7226:(U,$,m)=>{var C=m(31588),_=0,e=Math.random(),t=C(1..toString);U.exports=function(n){return"Symbol("+(void 0===n?"":n)+")_"+t(++_+e,36)}},43587:(U,$,m)=>{var C=m(62581);U.exports=C&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},14525:(U,$,m)=>{var C=m(7084);$.f=C},7084:(U,$,m)=>{var C=m(22743),_=m(843),e=m(44030),t=m(7226),n=m(62581),r=m(43587),s=_("wks"),u=C.Symbol,y=u&&u.for,x=r?u:u&&u.withoutSetter||t;U.exports=function(B){if(!e(s,B)||!n&&"string"!=typeof s[B]){var Q="Symbol."+B;s[B]=n&&e(u,B)?u[B]:r&&y?y(Q):x(Q)}return s[B]}},84722:(U,$,m)=>{"use strict";var C=m(70147),_=m(22743),e=m(76185),t=m(84361),n=m(91100),r=m(47902),s=m(80332),u=m(78204),y=m(41137),x=m(79087),B=m(42783),Q=m(99883),at=m(58823),rt=m(7084),St=m(92335),Ht=rt("toStringTag"),vt=_.Error,xt=[].push,Wt=function(yt,ot){var Ut,mt=arguments.length>2?arguments[2]:void 0,lt=e(Jt,this);n?Ut=n(new vt,lt?t(this):Jt):(Ut=lt?this:s(Jt),u(Ut,Ht,"Error")),void 0!==ot&&u(Ut,"message",at(ot)),St&&u(Ut,"stack",x(Ut.stack,1)),B(Ut,mt);var Rt=[];return Q(yt,xt,{that:Rt}),u(Ut,"errors",Rt),Ut};n?n(Wt,vt):r(Wt,vt,{name:!0});var Jt=Wt.prototype=s(vt.prototype,{constructor:y(1,Wt),message:y(1,""),name:y(1,"AggregateError")});C({global:!0},{AggregateError:Wt})},56874:(U,$,m)=>{"use strict";var C=m(70147),_=m(22743),e=m(31469),t=m(10371),n=m(78103),r=m(49402),s=m(33706),u=m(3115),y=m(4414),x=m(85367),B=m(7084),Q=m(10322),at=B("isConcatSpreadable"),rt=9007199254740991,St="Maximum allowed index exceeded",Ht=_.TypeError,vt=Q>=51||!e(function(){var Ct=[];return Ct[at]=!1,Ct.concat()[0]!==Ct}),xt=x("concat"),Wt=function(Ct){if(!n(Ct))return!1;var yt=Ct[at];return void 0!==yt?!!yt:t(Ct)};C({target:"Array",proto:!0,forced:!vt||!xt},{concat:function(yt){var Ut,Rt,Et,ht,nt,ot=r(this),mt=y(ot,0),lt=0;for(Ut=-1,Et=arguments.length;Ut<Et;Ut++)if(Wt(nt=-1===Ut?ot:arguments[Ut])){if(lt+(ht=s(nt))>rt)throw Ht(St);for(Rt=0;Rt<ht;Rt++,lt++)Rt in nt&&u(mt,lt,nt[Rt])}else{if(lt>=rt)throw Ht(St);u(mt,lt++,nt)}return mt.length=lt,mt}})},7100:(U,$,m)=>{"use strict";var C=m(70147),_=m(53877).filter;C({target:"Array",proto:!0,forced:!m(85367)("filter")},{filter:function(r){return _(this,r,arguments.length>1?arguments[1]:void 0)}})},96648:(U,$,m)=>{"use strict";var C=m(70147),_=m(53877).find,e=m(70677),t="find",n=!0;t in[]&&Array(1)[t](function(){n=!1}),C({target:"Array",proto:!0,forced:n},{find:function(s){return _(this,s,arguments.length>1?arguments[1]:void 0)}}),e(t)},58665:(U,$,m)=>{"use strict";var C=m(70147),_=m(19875);C({target:"Array",proto:!0,forced:[].forEach!=_},{forEach:_})},48161:(U,$,m)=>{var C=m(70147),_=m(96397);C({target:"Array",stat:!0,forced:!m(4402)(function(n){Array.from(n)})},{from:_})},85124:(U,$,m)=>{"use strict";var C=m(70147),_=m(68047).includes,e=m(70677);C({target:"Array",proto:!0},{includes:function(n){return _(this,n,arguments.length>1?arguments[1]:void 0)}}),e("includes")},89815:(U,$,m)=>{"use strict";var C=m(70147),_=m(31588),e=m(68047).indexOf,t=m(52995),n=_([].indexOf),r=!!n&&1/n([1],1,-0)<0,s=t("indexOf");C({target:"Array",proto:!0,forced:r||!s},{indexOf:function(y){var x=arguments.length>1?arguments[1]:void 0;return r?n(this,y,x)||0:e(this,y,x)}})},71006:(U,$,m)=>{m(70147)({target:"Array",stat:!0},{isArray:m(10371)})},71420:(U,$,m)=>{"use strict";var C=m(35197),_=m(70677),e=m(44362),t=m(34520),n=m(13528).f,r=m(52928),s=m(92838),u=m(25847),y="Array Iterator",x=t.set,B=t.getterFor(y);U.exports=r(Array,"Array",function(at,rt){x(this,{type:y,target:C(at),index:0,kind:rt})},function(){var at=B(this),rt=at.target,St=at.kind,Ht=at.index++;return!rt||Ht>=rt.length?(at.target=void 0,{value:void 0,done:!0}):"keys"==St?{value:Ht,done:!1}:"values"==St?{value:rt[Ht],done:!1}:{value:[Ht,rt[Ht]],done:!1}},"values");var Q=e.Arguments=e.Array;if(_("keys"),_("values"),_("entries"),!s&&u&&"values"!==Q.name)try{n(Q,"name",{value:"values"})}catch(at){}},81171:(U,$,m)=>{"use strict";var C=m(70147),_=m(53877).map;C({target:"Array",proto:!0,forced:!m(85367)("map")},{map:function(r){return _(this,r,arguments.length>1?arguments[1]:void 0)}})},21311:(U,$,m)=>{"use strict";var C=m(70147),_=m(22743),e=m(10371),t=m(67459),n=m(78103),r=m(83889),s=m(33706),u=m(35197),y=m(3115),x=m(7084),B=m(85367),Q=m(90840),at=B("slice"),rt=x("species"),St=_.Array,Ht=Math.max;C({target:"Array",proto:!0,forced:!at},{slice:function(xt,Wt){var mt,lt,Ut,Jt=u(this),Ct=s(Jt),yt=r(xt,Ct),ot=r(void 0===Wt?Ct:Wt,Ct);if(e(Jt)&&((t(mt=Jt.constructor)&&(mt===St||e(mt.prototype))||n(mt)&&null===(mt=mt[rt]))&&(mt=void 0),mt===St||void 0===mt))return Q(Jt,yt,ot);for(lt=new(void 0===mt?St:mt)(Ht(ot-yt,0)),Ut=0;yt<ot;yt++,Ut++)yt in Jt&&y(lt,Ut,Jt[yt]);return lt.length=Ut,lt}})},19314:(U,$,m)=>{"use strict";var C=m(70147),_=m(22743),e=m(83889),t=m(21524),n=m(33706),r=m(49402),s=m(4414),u=m(3115),x=m(85367)("splice"),B=_.TypeError,Q=Math.max,at=Math.min,rt=9007199254740991,St="Maximum allowed length exceeded";C({target:"Array",proto:!0,forced:!x},{splice:function(vt,xt){var ot,mt,lt,Ut,Rt,Et,Wt=r(this),Jt=n(Wt),Ct=e(vt,Jt),yt=arguments.length;if(0===yt?ot=mt=0:1===yt?(ot=0,mt=Jt-Ct):(ot=yt-2,mt=at(Q(t(xt),0),Jt-Ct)),Jt+ot-mt>rt)throw B(St);for(lt=s(Wt,mt),Ut=0;Ut<mt;Ut++)(Rt=Ct+Ut)in Wt&&u(lt,Ut,Wt[Rt]);if(lt.length=mt,ot<mt){for(Ut=Ct;Ut<Jt-mt;Ut++)Et=Ut+ot,(Rt=Ut+mt)in Wt?Wt[Et]=Wt[Rt]:delete Wt[Et];for(Ut=Jt;Ut>Jt-mt+ot;Ut--)delete Wt[Ut-1]}else if(ot>mt)for(Ut=Jt-mt;Ut>Ct;Ut--)Et=Ut+ot-1,(Rt=Ut+mt-1)in Wt?Wt[Et]=Wt[Rt]:delete Wt[Et];for(Ut=0;Ut<ot;Ut++)Wt[Ut+Ct]=arguments[Ut+2];return Wt.length=Jt-mt+ot,lt}})},86061:(U,$,m)=>{var C=m(70147),_=m(22743),e=m(85697),t=m(30547),n=m(31588),r=m(31469),s=_.Array,u=e("JSON","stringify"),y=n(/./.exec),x=n("".charAt),B=n("".charCodeAt),Q=n("".replace),at=n(1..toString),rt=/[\uD800-\uDFFF]/g,St=/^[\uD800-\uDBFF]$/,Ht=/^[\uDC00-\uDFFF]$/,vt=function(Wt,Jt,Ct){var yt=x(Ct,Jt-1),ot=x(Ct,Jt+1);return y(St,Wt)&&!y(Ht,ot)||y(Ht,Wt)&&!y(St,yt)?"\\u"+at(B(Wt,0),16):Wt},xt=r(function(){return'"\\udf06\\ud834"'!==u("\udf06\ud834")||'"\\udead"'!==u("\udead")});u&&C({target:"JSON",stat:!0,forced:xt},{stringify:function(Jt,Ct,yt){for(var ot=0,mt=arguments.length,lt=s(mt);ot<mt;ot++)lt[ot]=arguments[ot];var Ut=t(u,null,lt);return"string"==typeof Ut?Q(Ut,rt,vt):Ut}})},85504:(U,$,m)=>{var C=m(22743);m(63598)(C.JSON,"JSON",!0)},15551:()=>{},7923:(U,$,m)=>{var C=m(70147),_=m(94347);C({target:"Object",stat:!0,forced:Object.assign!==_},{assign:_})},13227:(U,$,m)=>{var C=m(70147),_=m(25847);C({target:"Object",stat:!0,forced:!_,sham:!_},{defineProperties:m(68453)})},24526:(U,$,m)=>{var C=m(70147),_=m(25847);C({target:"Object",stat:!0,forced:!_,sham:!_},{defineProperty:m(13528).f})},50042:(U,$,m)=>{var C=m(70147),_=m(6936).entries;C({target:"Object",stat:!0},{entries:function(t){return _(t)}})},49711:(U,$,m)=>{var C=m(70147),_=m(31469),e=m(35197),t=m(26552).f,n=m(25847),r=_(function(){t(1)});C({target:"Object",stat:!0,forced:!n||r,sham:!n},{getOwnPropertyDescriptor:function(y,x){return t(e(y),x)}})},10130:(U,$,m)=>{var C=m(70147),_=m(25847),e=m(68566),t=m(35197),n=m(26552),r=m(3115);C({target:"Object",stat:!0,sham:!_},{getOwnPropertyDescriptors:function(u){for(var rt,St,y=t(u),x=n.f,B=e(y),Q={},at=0;B.length>at;)void 0!==(St=x(y,rt=B[at++]))&&r(Q,rt,St);return Q}})},68126:(U,$,m)=>{var C=m(70147),_=m(49402),e=m(77978);C({target:"Object",stat:!0,forced:m(31469)(function(){e(1)})},{keys:function(s){return e(_(s))}})},42271:()=>{},52568:(U,$,m)=>{"use strict";var C=m(70147),_=m(85246),e=m(80866),t=m(39802),n=m(50819),r=m(99883);C({target:"Promise",stat:!0},{allSettled:function(u){var y=this,x=t.f(y),B=x.resolve,Q=x.reject,at=n(function(){var rt=e(y.resolve),St=[],Ht=0,vt=1;r(u,function(xt){var Wt=Ht++,Jt=!1;vt++,_(rt,y,xt).then(function(Ct){Jt||(Jt=!0,St[Wt]={status:"fulfilled",value:Ct},--vt||B(St))},function(Ct){Jt||(Jt=!0,St[Wt]={status:"rejected",reason:Ct},--vt||B(St))})}),--vt||B(St)});return at.error&&Q(at.value),x.promise}})},64111:(U,$,m)=>{"use strict";var C=m(70147),_=m(80866),e=m(85697),t=m(85246),n=m(39802),r=m(50819),s=m(99883),u="No one promise resolved";C({target:"Promise",stat:!0},{any:function(x){var B=this,Q=e("AggregateError"),at=n.f(B),rt=at.resolve,St=at.reject,Ht=r(function(){var vt=_(B.resolve),xt=[],Wt=0,Jt=1,Ct=!1;s(x,function(yt){var ot=Wt++,mt=!1;Jt++,t(vt,B,yt).then(function(lt){mt||Ct||(Ct=!0,rt(lt))},function(lt){mt||Ct||(mt=!0,xt[ot]=lt,--Jt||St(new Q(xt,u)))})}),--Jt||St(new Q(xt,u))});return Ht.error&&St(Ht.value),at.promise}})},1395:(U,$,m)=>{"use strict";var C=m(70147),_=m(92838),e=m(38977),t=m(31469),n=m(85697),r=m(24732),s=m(85972),u=m(92273),y=m(51121);if(C({target:"Promise",proto:!0,real:!0,forced:!!e&&t(function(){e.prototype.finally.call({then:function(){}},function(){})})},{finally:function(Q){var at=s(this,n("Promise")),rt=r(Q);return this.then(rt?function(St){return u(at,Q()).then(function(){return St})}:Q,rt?function(St){return u(at,Q()).then(function(){throw St})}:Q)}}),!_&&r(e)){var B=n("Promise").prototype.finally;e.prototype.finally!==B&&y(e.prototype,"finally",B,{unsafe:!0})}},17569:(U,$,m)=>{"use strict";var ne,me,ye,Zt,C=m(70147),_=m(92838),e=m(22743),t=m(85697),n=m(85246),r=m(38977),s=m(51121),u=m(70658),y=m(91100),x=m(63598),B=m(13961),Q=m(80866),at=m(24732),rt=m(78103),St=m(43017),Ht=m(13271),vt=m(99883),xt=m(4402),Wt=m(85972),Jt=m(76401).set,Ct=m(72845),yt=m(92273),ot=m(18819),mt=m(39802),lt=m(50819),Ut=m(75893),Rt=m(34520),Et=m(35059),ht=m(7084),nt=m(28150),he=m(70751),Mt=m(10322),Nt=ht("species"),de="Promise",ve=Rt.getterFor(de),ue=Rt.set,Be=Rt.getterFor(de),Ne=r&&r.prototype,Qe=r,Di=Ne,Ze=e.TypeError,Le=e.document,gi=e.process,Bt=mt.f,Te=Bt,$t=!!(Le&&Le.createEvent&&e.dispatchEvent),_e=at(e.PromiseRejectionEvent),At="unhandledrejection",ke=!1,ce=Et(de,function(){var je=Ht(Qe),Ii=je!==String(Qe);if(!Ii&&66===Mt||_&&!Di.finally)return!0;if(Mt>=51&&/native code/.test(je))return!1;var _i=new Qe(function(fe){fe(1)}),Ui=function(fe){fe(function(){},function(){})};return(_i.constructor={})[Nt]=Ui,!(ke=_i.then(function(){})instanceof Ui)||!Ii&&nt&&!_e}),ei=ce||!xt(function(je){Qe.all(je).catch(function(){})}),ni=function(je){var Ii;return!(!rt(je)||!at(Ii=je.then))&&Ii},Fi=function(je,Ii){var Lt,ae,Ae,_i=Ii.value,Ui=1==Ii.state,$e=Ui?je.ok:je.fail,fe=je.resolve,kt=je.reject,ct=je.domain;try{$e?(Ui||(2===Ii.rejection&&Zi(Ii),Ii.rejection=1),!0===$e?Lt=_i:(ct&&ct.enter(),Lt=$e(_i),ct&&(ct.exit(),Ae=!0)),Lt===je.promise?kt(Ze("Promise-chain cycle")):(ae=ni(Lt))?n(ae,Lt,fe,kt):fe(Lt)):kt(_i)}catch(Wi){ct&&!Ae&&ct.exit(),kt(Wi)}},wi=function(je,Ii){je.notified||(je.notified=!0,Ct(function(){for(var Ui,_i=je.reactions;Ui=_i.get();)Fi(Ui,je);je.notified=!1,Ii&&!je.rejection&&pn(je)}))},yi=function(je,Ii,_i){var Ui,$e;$t?((Ui=Le.createEvent("Event")).promise=Ii,Ui.reason=_i,Ui.initEvent(je,!1,!0),e.dispatchEvent(Ui)):Ui={promise:Ii,reason:_i},!_e&&($e=e["on"+je])?$e(Ui):je===At&&ot("Unhandled promise rejection",_i)},pn=function(je){n(Jt,e,function(){var $e,Ii=je.facade,_i=je.value;if(mi(je)&&($e=lt(function(){he?gi.emit("unhandledRejection",_i,Ii):yi(At,Ii,_i)}),je.rejection=he||mi(je)?2:1,$e.error))throw $e.value})},mi=function(je){return 1!==je.rejection&&!je.parent},Zi=function(je){n(Jt,e,function(){var Ii=je.facade;he?gi.emit("rejectionHandled",Ii):yi("rejectionhandled",Ii,je.value)})},Ce=function(je,Ii,_i){return function(Ui){je(Ii,Ui,_i)}},Oe=function(je,Ii,_i){je.done||(je.done=!0,_i&&(je=_i),je.value=Ii,je.state=2,wi(je,!0))},Ci=function(je,Ii,_i){if(!je.done){je.done=!0,_i&&(je=_i);try{if(je.facade===Ii)throw Ze("Promise can't be resolved itself");var Ui=ni(Ii);Ui?Ct(function(){var $e={done:!1};try{n(Ui,Ii,Ce(Ci,$e,je),Ce(Oe,$e,je))}catch(fe){Oe($e,fe,je)}}):(je.value=Ii,je.state=1,wi(je,!1))}catch($e){Oe({done:!1},$e,je)}}};if(ce&&(Qe=function(Ii){St(this,Di),Q(Ii),n(ne,this);var _i=ve(this);try{Ii(Ce(Ci,_i),Ce(Oe,_i))}catch(Ui){Oe(_i,Ui)}},(ne=function(Ii){ue(this,{type:de,done:!1,notified:!1,parent:!1,reactions:new Ut,rejection:!1,state:0,value:void 0})}).prototype=u(Di=Qe.prototype,{then:function(Ii,_i){var Ui=Be(this),$e=Bt(Wt(this,Qe));return Ui.parent=!0,$e.ok=!at(Ii)||Ii,$e.fail=at(_i)&&_i,$e.domain=he?gi.domain:void 0,0==Ui.state?Ui.reactions.add($e):Ct(function(){Fi($e,Ui)}),$e.promise},catch:function(je){return this.then(void 0,je)}}),me=function(){var je=new ne,Ii=ve(je);this.promise=je,this.resolve=Ce(Ci,Ii),this.reject=Ce(Oe,Ii)},mt.f=Bt=function(je){return je===Qe||je===ye?new me(je):Te(je)},!_&&at(r)&&Ne!==Object.prototype)){Zt=Ne.then,ke||(s(Ne,"then",function(Ii,_i){var Ui=this;return new Qe(function($e,fe){n(Zt,Ui,$e,fe)}).then(Ii,_i)},{unsafe:!0}),s(Ne,"catch",Di.catch,{unsafe:!0}));try{delete Ne.constructor}catch(je){}y&&y(Ne,Di)}C({global:!0,wrap:!0,forced:ce},{Promise:Qe}),x(Qe,de,!1,!0),B(de),ye=t(de),C({target:de,stat:!0,forced:ce},{reject:function(Ii){var _i=Bt(this);return n(_i.reject,void 0,Ii),_i.promise}}),C({target:de,stat:!0,forced:_||ce},{resolve:function(Ii){return yt(_&&this===ye?Qe:this,Ii)}}),C({target:de,stat:!0,forced:ei},{all:function(Ii){var _i=this,Ui=Bt(_i),$e=Ui.resolve,fe=Ui.reject,kt=lt(function(){var ct=Q(_i.resolve),Lt=[],ae=0,Ae=1;vt(Ii,function(Wi){var Qi=ae++,yn=!1;Ae++,n(ct,_i,Wi).then(function(tr){yn||(yn=!0,Lt[Qi]=tr,--Ae||$e(Lt))},fe)}),--Ae||$e(Lt)});return kt.error&&fe(kt.value),Ui.promise},race:function(Ii){var _i=this,Ui=Bt(_i),$e=Ui.reject,fe=lt(function(){var kt=Q(_i.resolve);vt(Ii,function(ct){n(kt,_i,ct).then(Ui.resolve,$e)})});return fe.error&&$e(fe.value),Ui.promise}})},61897:()=>{},11568:(U,$,m)=>{"use strict";var C=m(70147),_=m(31588),e=m(43353),t=m(86213),n=m(94506),r=m(15268),s=_("".indexOf);C({target:"String",proto:!0,forced:!r("includes")},{includes:function(y){return!!~s(n(t(this)),n(e(y)),arguments.length>1?arguments[1]:void 0)}})},80651:(U,$,m)=>{"use strict";var C=m(93071).charAt,_=m(94506),e=m(34520),t=m(52928),n="String Iterator",r=e.set,s=e.getterFor(n);t(String,"String",function(u){r(this,{type:n,string:_(u),index:0})},function(){var Q,y=s(this),x=y.string,B=y.index;return B>=x.length?{value:void 0,done:!0}:(Q=C(x,B),y.index+=Q.length,{value:Q,done:!1})})},72068:(U,$,m)=>{"use strict";var St,C=m(70147),_=m(31588),e=m(26552).f,t=m(61468),n=m(94506),r=m(43353),s=m(86213),u=m(15268),y=m(92838),x=_("".startsWith),B=_("".slice),Q=Math.min,at=u("startsWith");C({target:"String",proto:!0,forced:!(!y&&!at&&(St=e(String.prototype,"startsWith"),St&&!St.writable)||at)},{startsWith:function(Ht){var vt=n(s(this));r(Ht);var xt=t(Q(arguments.length>1?arguments[1]:void 0,vt.length)),Wt=n(Ht);return x?x(vt,Wt,xt):B(vt,xt,xt+Wt.length)===Wt}})},9266:(U,$,m)=>{m(59478)("asyncIterator")},87189:()=>{},94898:(U,$,m)=>{m(59478)("hasInstance")},57133:(U,$,m)=>{m(59478)("isConcatSpreadable")},3766:(U,$,m)=>{m(59478)("iterator")},83136:(U,$,m)=>{"use strict";var C=m(70147),_=m(22743),e=m(85697),t=m(30547),n=m(85246),r=m(31588),s=m(92838),u=m(25847),y=m(62581),x=m(31469),B=m(44030),Q=m(10371),at=m(24732),rt=m(78103),St=m(76185),Ht=m(90094),vt=m(10157),xt=m(49402),Wt=m(35197),Jt=m(73540),Ct=m(94506),yt=m(41137),ot=m(80332),mt=m(77978),lt=m(42769),Ut=m(24281),Rt=m(30233),Et=m(26552),ht=m(13528),nt=m(19664),he=m(90840),Mt=m(51121),Nt=m(843),de=m(35027),ve=m(89675),ue=m(7226),Be=m(7084),Ne=m(14525),Qe=m(59478),Di=m(63598),Ze=m(34520),Le=m(53877).forEach,gi=de("hidden"),Bt="Symbol",Te="prototype",$t=Be("toPrimitive"),_e=Ze.set,At=Ze.getterFor(Bt),pe=Object[Te],ze=_.Symbol,hi=ze&&ze[Te],Ie=_.TypeError,te=_.QObject,ee=e("JSON","stringify"),ke=Et.f,ne=ht.f,me=Ut.f,ye=nt.f,Zt=r([].push),ce=Nt("symbols"),ei=Nt("op-symbols"),ni=Nt("string-to-symbol-registry"),Fi=Nt("symbol-to-string-registry"),wi=Nt("wks"),yi=!te||!te[Te]||!te[Te].findChild,pn=u&&x(function(){return 7!=ot(ne({},"a",{get:function(){return ne(this,"a",{value:7}).a}})).a})?function(fe,kt,ct){var Lt=ke(pe,kt);Lt&&delete pe[kt],ne(fe,kt,ct),Lt&&fe!==pe&&ne(pe,kt,Lt)}:ne,mi=function(fe,kt){var ct=ce[fe]=ot(hi);return _e(ct,{type:Bt,tag:fe,description:kt}),u||(ct.description=kt),ct},Zi=function(kt,ct,Lt){kt===pe&&Zi(ei,ct,Lt),vt(kt);var ae=Jt(ct);return vt(Lt),B(ce,ae)?(Lt.enumerable?(B(kt,gi)&&kt[gi][ae]&&(kt[gi][ae]=!1),Lt=ot(Lt,{enumerable:yt(0,!1)})):(B(kt,gi)||ne(kt,gi,yt(1,{})),kt[gi][ae]=!0),pn(kt,ae,Lt)):ne(kt,ae,Lt)},Ce=function(kt,ct){vt(kt);var Lt=Wt(ct),ae=mt(Lt).concat(_i(Lt));return Le(ae,function(Ae){(!u||n(Ci,Lt,Ae))&&Zi(kt,Ae,Lt[Ae])}),kt},Ci=function(kt){var ct=Jt(kt),Lt=n(ye,this,ct);return!(this===pe&&B(ce,ct)&&!B(ei,ct))&&(!(Lt||!B(this,ct)||!B(ce,ct)||B(this,gi)&&this[gi][ct])||Lt)},je=function(kt,ct){var Lt=Wt(kt),ae=Jt(ct);if(Lt!==pe||!B(ce,ae)||B(ei,ae)){var Ae=ke(Lt,ae);return Ae&&B(ce,ae)&&!(B(Lt,gi)&&Lt[gi][ae])&&(Ae.enumerable=!0),Ae}},Ii=function(kt){var ct=me(Wt(kt)),Lt=[];return Le(ct,function(ae){!B(ce,ae)&&!B(ve,ae)&&Zt(Lt,ae)}),Lt},_i=function(kt){var ct=kt===pe,Lt=me(ct?ei:Wt(kt)),ae=[];return Le(Lt,function(Ae){B(ce,Ae)&&(!ct||B(pe,Ae))&&Zt(ae,ce[Ae])}),ae};if(y||(Mt(hi=(ze=function(){if(St(hi,this))throw Ie("Symbol is not a constructor");var kt=arguments.length&&void 0!==arguments[0]?Ct(arguments[0]):void 0,ct=ue(kt),Lt=function(ae){this===pe&&n(Lt,ei,ae),B(this,gi)&&B(this[gi],ct)&&(this[gi][ct]=!1),pn(this,ct,yt(1,ae))};return u&&yi&&pn(pe,ct,{configurable:!0,set:Lt}),mi(ct,kt)})[Te],"toString",function(){return At(this).tag}),Mt(ze,"withoutSetter",function(fe){return mi(ue(fe),fe)}),nt.f=Ci,ht.f=Zi,Et.f=je,lt.f=Ut.f=Ii,Rt.f=_i,Ne.f=function(fe){return mi(Be(fe),fe)},u&&(ne(hi,"description",{configurable:!0,get:function(){return At(this).description}}),s||Mt(pe,"propertyIsEnumerable",Ci,{unsafe:!0}))),C({global:!0,wrap:!0,forced:!y,sham:!y},{Symbol:ze}),Le(mt(wi),function(fe){Qe(fe)}),C({target:Bt,stat:!0,forced:!y},{for:function(fe){var kt=Ct(fe);if(B(ni,kt))return ni[kt];var ct=ze(kt);return ni[kt]=ct,Fi[ct]=kt,ct},keyFor:function(kt){if(!Ht(kt))throw Ie(kt+" is not a symbol");if(B(Fi,kt))return Fi[kt]},useSetter:function(){yi=!0},useSimple:function(){yi=!1}}),C({target:"Object",stat:!0,forced:!y,sham:!u},{create:function(kt,ct){return void 0===ct?ot(kt):Ce(ot(kt),ct)},defineProperty:Zi,defineProperties:Ce,getOwnPropertyDescriptor:je}),C({target:"Object",stat:!0,forced:!y},{getOwnPropertyNames:Ii,getOwnPropertySymbols:_i}),C({target:"Object",stat:!0,forced:x(function(){Rt.f(1)})},{getOwnPropertySymbols:function(kt){return Rt.f(xt(kt))}}),ee&&C({target:"JSON",stat:!0,forced:!y||x(function(){var fe=ze();return"[null]"!=ee([fe])||"{}"!=ee({a:fe})||"{}"!=ee(Object(fe))})},{stringify:function(kt,ct,Lt){var ae=he(arguments),Ae=ct;if((rt(ct)||void 0!==kt)&&!Ht(kt))return Q(ct)||(ct=function(Wi,Qi){if(at(Ae)&&(Qi=n(Ae,this,Wi,Qi)),!Ht(Qi))return Qi}),ae[1]=ct,t(ee,null,ae)}}),!hi[$t]){var $e=hi.valueOf;Mt(hi,$t,function(fe){return n($e,this)})}Di(ze,Bt),ve[gi]=!0},84765:(U,$,m)=>{m(59478)("matchAll")},49342:(U,$,m)=>{m(59478)("match")},83606:(U,$,m)=>{m(59478)("replace")},25909:(U,$,m)=>{m(59478)("search")},42383:(U,$,m)=>{m(59478)("species")},98547:(U,$,m)=>{m(59478)("split")},73418:(U,$,m)=>{m(59478)("toPrimitive")},82266:(U,$,m)=>{m(59478)("toStringTag")},30797:(U,$,m)=>{m(59478)("unscopables")},29960:(U,$,m)=>{"use strict";var Q,C=m(22743),_=m(31588),e=m(70658),t=m(33613),n=m(66657),r=m(75925),s=m(78103),u=m(19086),y=m(34520).enforce,x=m(63185),B=!C.ActiveXObject&&"ActiveXObject"in C,at=function(Jt){return function(){return Jt(this,arguments.length?arguments[0]:void 0)}},rt=n("WeakMap",at,r);if(x&&B){Q=r.getConstructor(at,"WeakMap",!0),t.enable();var St=rt.prototype,Ht=_(St.delete),vt=_(St.has),xt=_(St.get),Wt=_(St.set);e(St,{delete:function(Jt){if(s(Jt)&&!u(Jt)){var Ct=y(this);return Ct.frozen||(Ct.frozen=new Q),Ht(this,Jt)||Ct.frozen.delete(Jt)}return Ht(this,Jt)},has:function(Ct){if(s(Ct)&&!u(Ct)){var yt=y(this);return yt.frozen||(yt.frozen=new Q),vt(this,Ct)||yt.frozen.has(Ct)}return vt(this,Ct)},get:function(Ct){if(s(Ct)&&!u(Ct)){var yt=y(this);return yt.frozen||(yt.frozen=new Q),vt(this,Ct)?xt(this,Ct):yt.frozen.get(Ct)}return xt(this,Ct)},set:function(Ct,yt){if(s(Ct)&&!u(Ct)){var ot=y(this);ot.frozen||(ot.frozen=new Q),vt(this,Ct)?Wt(this,Ct,yt):ot.frozen.set(Ct,yt)}else Wt(this,Ct,yt);return this}})}},38669:(U,$,m)=>{m(84722)},33483:(U,$,m)=>{m(52568)},30389:(U,$,m)=>{m(64111)},65193:(U,$,m)=>{"use strict";var C=m(70147),_=m(39802),e=m(50819);C({target:"Promise",stat:!0},{try:function(t){var n=_.f(this),r=e(t);return(r.error?n.reject:n.resolve)(r.value),n.promise}})},59108:(U,$,m)=>{m(59478)("asyncDispose")},98488:(U,$,m)=>{m(59478)("dispose")},65802:(U,$,m)=>{m(59478)("matcher")},38772:(U,$,m)=>{m(59478)("metadata")},96398:(U,$,m)=>{m(59478)("observable")},79699:(U,$,m)=>{m(59478)("patternMatch")},86669:(U,$,m)=>{m(59478)("replaceAll")},72760:(U,$,m)=>{m(71420);var C=m(9113),_=m(22743),e=m(80063),t=m(78204),n=m(44362),s=m(7084)("toStringTag");for(var u in C){var y=_[u],x=y&&y.prototype;x&&e(x)!==s&&t(x,s,u),n[u]=n.Array}},17606:(U,$,m)=>{"use strict";m(71420);var C=m(70147),_=m(22743),e=m(85697),t=m(85246),n=m(31588),r=m(2049),s=m(51121),u=m(70658),y=m(63598),x=m(690),B=m(34520),Q=m(43017),at=m(24732),rt=m(44030),St=m(21137),Ht=m(80063),vt=m(10157),xt=m(78103),Wt=m(94506),Jt=m(80332),Ct=m(41137),yt=m(74471),ot=m(56958),mt=m(7084),lt=m(69274),Ut=mt("iterator"),Rt="URLSearchParams",Et=Rt+"Iterator",ht=B.set,nt=B.getterFor(Rt),he=B.getterFor(Et),Mt=e("fetch"),Nt=e("Request"),de=e("Headers"),ve=Nt&&Nt.prototype,ue=de&&de.prototype,Be=_.RegExp,Ne=_.TypeError,Qe=_.decodeURIComponent,Di=_.encodeURIComponent,Ze=n("".charAt),Le=n([].join),gi=n([].push),Bt=n("".replace),Te=n([].shift),$t=n([].splice),_e=n("".split),At=n("".slice),pe=/\+/g,ze=Array(4),hi=function(mi){return ze[mi-1]||(ze[mi-1]=Be("((?:%[\\da-f]{2}){"+mi+"})","gi"))},Ie=function(mi){try{return Qe(mi)}catch(Zi){return mi}},te=function(mi){var Zi=Bt(mi,pe," "),Ce=4;try{return Qe(Zi)}catch(Oe){for(;Ce;)Zi=Bt(Zi,hi(Ce--),Ie);return Zi}},ee=/[!'()~]|%20/g,ke={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},ne=function(mi){return ke[mi]},me=function(mi){return Bt(Di(mi),ee,ne)},ye=function(mi,Zi){if(mi<Zi)throw Ne("Not enough arguments")},Zt=x(function(Zi,Ce){ht(this,{type:Et,iterator:yt(nt(Zi).entries),kind:Ce})},"Iterator",function(){var Zi=he(this),Ce=Zi.kind,Oe=Zi.iterator.next(),Ci=Oe.value;return Oe.done||(Oe.value="keys"===Ce?Ci.key:"values"===Ce?Ci.value:[Ci.key,Ci.value]),Oe},!0),ce=function(mi){this.entries=[],this.url=null,void 0!==mi&&(xt(mi)?this.parseObject(mi):this.parseQuery("string"==typeof mi?"?"===Ze(mi,0)?At(mi,1):mi:Wt(mi)))};ce.prototype={type:Rt,bindURL:function(mi){this.url=mi,this.update()},parseObject:function(mi){var Ce,Oe,Ci,je,Ii,_i,Ui,Zi=ot(mi);if(Zi)for(Oe=(Ce=yt(mi,Zi)).next;!(Ci=t(Oe,Ce)).done;){if(je=yt(vt(Ci.value)),(_i=t(Ii=je.next,je)).done||(Ui=t(Ii,je)).done||!t(Ii,je).done)throw Ne("Expected sequence with length 2");gi(this.entries,{key:Wt(_i.value),value:Wt(Ui.value)})}else for(var $e in mi)rt(mi,$e)&&gi(this.entries,{key:$e,value:Wt(mi[$e])})},parseQuery:function(mi){if(mi)for(var Oe,Ci,Zi=_e(mi,"&"),Ce=0;Ce<Zi.length;)(Oe=Zi[Ce++]).length&&(Ci=_e(Oe,"="),gi(this.entries,{key:te(Te(Ci)),value:te(Le(Ci,"="))}))},serialize:function(){for(var Oe,mi=this.entries,Zi=[],Ce=0;Ce<mi.length;)Oe=mi[Ce++],gi(Zi,me(Oe.key)+"="+me(Oe.value));return Le(Zi,"&")},update:function(){this.entries.length=0,this.parseQuery(this.url.query)},updateURL:function(){this.url&&this.url.update()}};var ei=function(){Q(this,ni);var Zi=arguments.length>0?arguments[0]:void 0;ht(this,new ce(Zi))},ni=ei.prototype;if(u(ni,{append:function(Zi,Ce){ye(arguments.length,2);var Oe=nt(this);gi(Oe.entries,{key:Wt(Zi),value:Wt(Ce)}),Oe.updateURL()},delete:function(mi){ye(arguments.length,1);for(var Zi=nt(this),Ce=Zi.entries,Oe=Wt(mi),Ci=0;Ci<Ce.length;)Ce[Ci].key===Oe?$t(Ce,Ci,1):Ci++;Zi.updateURL()},get:function(Zi){ye(arguments.length,1);for(var Ce=nt(this).entries,Oe=Wt(Zi),Ci=0;Ci<Ce.length;Ci++)if(Ce[Ci].key===Oe)return Ce[Ci].value;return null},getAll:function(Zi){ye(arguments.length,1);for(var Ce=nt(this).entries,Oe=Wt(Zi),Ci=[],je=0;je<Ce.length;je++)Ce[je].key===Oe&&gi(Ci,Ce[je].value);return Ci},has:function(Zi){ye(arguments.length,1);for(var Ce=nt(this).entries,Oe=Wt(Zi),Ci=0;Ci<Ce.length;)if(Ce[Ci++].key===Oe)return!0;return!1},set:function(Zi,Ce){ye(arguments.length,1);for(var $e,Oe=nt(this),Ci=Oe.entries,je=!1,Ii=Wt(Zi),_i=Wt(Ce),Ui=0;Ui<Ci.length;Ui++)($e=Ci[Ui]).key===Ii&&(je?$t(Ci,Ui--,1):(je=!0,$e.value=_i));je||gi(Ci,{key:Ii,value:_i}),Oe.updateURL()},sort:function(){var Zi=nt(this);lt(Zi.entries,function(Ce,Oe){return Ce.key>Oe.key?1:-1}),Zi.updateURL()},forEach:function(Zi){for(var je,Ce=nt(this).entries,Oe=St(Zi,arguments.length>1?arguments[1]:void 0),Ci=0;Ci<Ce.length;)Oe((je=Ce[Ci++]).value,je.key,this)},keys:function(){return new Zt(this,"keys")},values:function(){return new Zt(this,"values")},entries:function(){return new Zt(this,"entries")}},{enumerable:!0}),s(ni,Ut,ni.entries,{name:"entries"}),s(ni,"toString",function(){return nt(this).serialize()},{enumerable:!0}),y(ei,Rt),C({global:!0,forced:!r},{URLSearchParams:ei}),!r&&at(de)){var Fi=n(ue.has),wi=n(ue.set),yi=function(mi){if(xt(mi)){var Ce,Zi=mi.body;if(Ht(Zi)===Rt)return Ce=mi.headers?new de(mi.headers):new de,Fi(Ce,"content-type")||wi(Ce,"content-type","application/x-www-form-urlencoded;charset=UTF-8"),Jt(mi,{body:Ct(0,Wt(Zi)),headers:Ct(0,Ce)})}return mi};if(at(Mt)&&C({global:!0,enumerable:!0,forced:!0},{fetch:function(Zi){return Mt(Zi,arguments.length>1?yi(arguments[1]):{})}}),at(Nt)){var pn=function(Zi){return Q(this,ve),new Nt(Zi,arguments.length>1?yi(arguments[1]):{})};ve.constructor=pn,pn.prototype=ve,C({global:!0,forced:!0},{Request:pn})}}U.exports={URLSearchParams:ei,getState:nt}},47471:(U,$,m)=>{var C=m(75426);U.exports=C},37722:(U,$,m)=>{var C=m(11529);U.exports=C},93049:(U,$,m)=>{var C=m(66213);U.exports=C},34863:(U,$,m)=>{var C=m(88191);U.exports=C},91081:(U,$,m)=>{var C=m(45347);m(72760),U.exports=C},21049:(U,$,m)=>{var C=m(36022);U.exports=C},43175:(U,$,m)=>{m(72760);var C=m(80063),_=m(44030),e=m(76185),t=m(93049),n=Array.prototype,r={DOMTokenList:!0,NodeList:!0};U.exports=function(s){var u=s.entries;return s===n||e(n,s)&&u===n.entries||_(r,C(s))?t:u}},3352:(U,$,m)=>{var C=m(73301);U.exports=C},13566:(U,$,m)=>{var C=m(38387);U.exports=C},35558:(U,$,m)=>{m(72760);var C=m(80063),_=m(44030),e=m(76185),t=m(34863),n=Array.prototype,r={DOMTokenList:!0,NodeList:!0};U.exports=function(s){var u=s.forEach;return s===n||e(n,s)&&u===n.forEach||_(r,C(s))?t:u}},70201:(U,$,m)=>{var C=m(1629);U.exports=C},49127:(U,$,m)=>{var C=m(66338);U.exports=C},21570:(U,$,m)=>{var C=m(57378);U.exports=C},46726:(U,$,m)=>{var C=m(70093);U.exports=C},38366:(U,$,m)=>{var C=m(16172);U.exports=C},63317:(U,$,m)=>{var C=m(7706);U.exports=C},68687:(U,$,m)=>{var C=m(22730);U.exports=C},15256:(U,$,m)=>{var C=m(66619);U.exports=C},87968:(U,$,m)=>{var C=m(4040);U.exports=C},81040:(U,$,m)=>{var C=m(7420);U.exports=C},21929:(U,$,m)=>{var C=m(2011);U.exports=C},18047:(U,$,m)=>{var C=m(95595);U.exports=C},16521:(U,$,m)=>{var C=m(42093);U.exports=C},32825:(U,$,m)=>{var C=m(93296);U.exports=C},70977:(U,$,m)=>{var C=m(31159);U.exports=C},35019:(U,$,m)=>{var C=m(9850);m(72760),U.exports=C},11830:(U,$,m)=>{var C=m(18297);m(72760),U.exports=C},61453:(U,$,m)=>{var C=m(5933);m(72760),U.exports=C},24733:(U,$,m)=>{var C=m(74107);m(72760),U.exports=C},65623:(U,$,m)=>{var C=m(70238);m(72760),U.exports=C},74107:(U,$,m)=>{m(17606);var C=m(35060);U.exports=C.URLSearchParams},76400:function(){var U;U="undefined"!=typeof self?self:this,function(m){var C_searchParams="URLSearchParams"in U,C_iterable="Symbol"in U&&"iterator"in Symbol,C_blob="FileReader"in U&&"Blob"in U&&function(){try{return new Blob,!0}catch(mt){return!1}}(),C_formData="FormData"in U,C_arrayBuffer="ArrayBuffer"in U;if(C_arrayBuffer)var e=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],t=ArrayBuffer.isView||function(mt){return mt&&e.indexOf(Object.prototype.toString.call(mt))>-1};function n(mt){if("string"!=typeof mt&&(mt=String(mt)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(mt))throw new TypeError("Invalid character in header field name");return mt.toLowerCase()}function r(mt){return"string"!=typeof mt&&(mt=String(mt)),mt}function s(mt){var lt={next:function(){var Ut=mt.shift();return{done:void 0===Ut,value:Ut}}};return C_iterable&&(lt[Symbol.iterator]=function(){return lt}),lt}function u(mt){this.map={},mt instanceof u?mt.forEach(function(lt,Ut){this.append(Ut,lt)},this):Array.isArray(mt)?mt.forEach(function(lt){this.append(lt[0],lt[1])},this):mt&&Object.getOwnPropertyNames(mt).forEach(function(lt){this.append(lt,mt[lt])},this)}function y(mt){if(mt.bodyUsed)return Promise.reject(new TypeError("Already read"));mt.bodyUsed=!0}function x(mt){return new Promise(function(lt,Ut){mt.onload=function(){lt(mt.result)},mt.onerror=function(){Ut(mt.error)}})}function B(mt){var lt=new FileReader,Ut=x(lt);return lt.readAsArrayBuffer(mt),Ut}function rt(mt){if(mt.slice)return mt.slice(0);var lt=new Uint8Array(mt.byteLength);return lt.set(new Uint8Array(mt)),lt.buffer}function St(){return this.bodyUsed=!1,this._initBody=function(mt){this._bodyInit=mt,mt?"string"==typeof mt?this._bodyText=mt:C_blob&&Blob.prototype.isPrototypeOf(mt)?this._bodyBlob=mt:C_formData&&FormData.prototype.isPrototypeOf(mt)?this._bodyFormData=mt:C_searchParams&&URLSearchParams.prototype.isPrototypeOf(mt)?this._bodyText=mt.toString():C_arrayBuffer&&C_blob&&function(mt){return mt&&DataView.prototype.isPrototypeOf(mt)}(mt)?(this._bodyArrayBuffer=rt(mt.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):C_arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(mt)||t(mt))?this._bodyArrayBuffer=rt(mt):this._bodyText=mt=Object.prototype.toString.call(mt):this._bodyText="",this.headers.get("content-type")||("string"==typeof mt?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):C_searchParams&&URLSearchParams.prototype.isPrototypeOf(mt)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},C_blob&&(this.blob=function(){var mt=y(this);if(mt)return mt;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?y(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(B)}),this.text=function(){var mt=y(this);if(mt)return mt;if(this._bodyBlob)return function(mt){var lt=new FileReader,Ut=x(lt);return lt.readAsText(mt),Ut}(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(function(mt){for(var lt=new Uint8Array(mt),Ut=new Array(lt.length),Rt=0;Rt<lt.length;Rt++)Ut[Rt]=String.fromCharCode(lt[Rt]);return Ut.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},C_formData&&(this.formData=function(){return this.text().then(Wt)}),this.json=function(){return this.text().then(JSON.parse)},this}u.prototype.append=function(mt,lt){mt=n(mt),lt=r(lt);var Ut=this.map[mt];this.map[mt]=Ut?Ut+", "+lt:lt},u.prototype.delete=function(mt){delete this.map[n(mt)]},u.prototype.get=function(mt){return mt=n(mt),this.has(mt)?this.map[mt]:null},u.prototype.has=function(mt){return this.map.hasOwnProperty(n(mt))},u.prototype.set=function(mt,lt){this.map[n(mt)]=r(lt)},u.prototype.forEach=function(mt,lt){for(var Ut in this.map)this.map.hasOwnProperty(Ut)&&mt.call(lt,this.map[Ut],Ut,this)},u.prototype.keys=function(){var mt=[];return this.forEach(function(lt,Ut){mt.push(Ut)}),s(mt)},u.prototype.values=function(){var mt=[];return this.forEach(function(lt){mt.push(lt)}),s(mt)},u.prototype.entries=function(){var mt=[];return this.forEach(function(lt,Ut){mt.push([Ut,lt])}),s(mt)},C_iterable&&(u.prototype[Symbol.iterator]=u.prototype.entries);var Ht=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function xt(mt,lt){var Ut=(lt=lt||{}).body;if(mt instanceof xt){if(mt.bodyUsed)throw new TypeError("Already read");this.url=mt.url,this.credentials=mt.credentials,lt.headers||(this.headers=new u(mt.headers)),this.method=mt.method,this.mode=mt.mode,this.signal=mt.signal,!Ut&&null!=mt._bodyInit&&(Ut=mt._bodyInit,mt.bodyUsed=!0)}else this.url=String(mt);if(this.credentials=lt.credentials||this.credentials||"same-origin",(lt.headers||!this.headers)&&(this.headers=new u(lt.headers)),this.method=function(mt){var lt=mt.toUpperCase();return Ht.indexOf(lt)>-1?lt:mt}(lt.method||this.method||"GET"),this.mode=lt.mode||this.mode||null,this.signal=lt.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&Ut)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(Ut)}function Wt(mt){var lt=new FormData;return mt.trim().split("&").forEach(function(Ut){if(Ut){var Rt=Ut.split("="),Et=Rt.shift().replace(/\+/g," "),ht=Rt.join("=").replace(/\+/g," ");lt.append(decodeURIComponent(Et),decodeURIComponent(ht))}}),lt}function Jt(mt){var lt=new u;return mt.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(Rt){var Et=Rt.split(":"),ht=Et.shift().trim();if(ht){var nt=Et.join(":").trim();lt.append(ht,nt)}}),lt}function Ct(mt,lt){lt||(lt={}),this.type="default",this.status=void 0===lt.status?200:lt.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in lt?lt.statusText:"OK",this.headers=new u(lt.headers),this.url=lt.url||"",this._initBody(mt)}xt.prototype.clone=function(){return new xt(this,{body:this._bodyInit})},St.call(xt.prototype),St.call(Ct.prototype),Ct.prototype.clone=function(){return new Ct(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new u(this.headers),url:this.url})},Ct.error=function(){var mt=new Ct(null,{status:0,statusText:""});return mt.type="error",mt};var yt=[301,302,303,307,308];Ct.redirect=function(mt,lt){if(-1===yt.indexOf(lt))throw new RangeError("Invalid status code");return new Ct(null,{status:lt,headers:{location:mt}})},m.DOMException=U.DOMException;try{new m.DOMException}catch(mt){m.DOMException=function(lt,Ut){this.message=lt,this.name=Ut;var Rt=Error(lt);this.stack=Rt.stack},m.DOMException.prototype=Object.create(Error.prototype),m.DOMException.prototype.constructor=m.DOMException}function ot(mt,lt){return new Promise(function(Ut,Rt){var Et=new xt(mt,lt);if(Et.signal&&Et.signal.aborted)return Rt(new m.DOMException("Aborted","AbortError"));var ht=new XMLHttpRequest;function nt(){ht.abort()}ht.onload=function(){var he={status:ht.status,statusText:ht.statusText,headers:Jt(ht.getAllResponseHeaders()||"")};he.url="responseURL"in ht?ht.responseURL:he.headers.get("X-Request-URL"),Ut(new Ct("response"in ht?ht.response:ht.responseText,he))},ht.onerror=function(){Rt(new TypeError("Network request failed"))},ht.ontimeout=function(){Rt(new TypeError("Network request failed"))},ht.onabort=function(){Rt(new m.DOMException("Aborted","AbortError"))},ht.open(Et.method,Et.url,!0),"include"===Et.credentials?ht.withCredentials=!0:"omit"===Et.credentials&&(ht.withCredentials=!1),"responseType"in ht&&C_blob&&(ht.responseType="blob"),Et.headers.forEach(function(he,Mt){ht.setRequestHeader(Mt,he)}),Et.signal&&(Et.signal.addEventListener("abort",nt),ht.onreadystatechange=function(){4===ht.readyState&&Et.signal.removeEventListener("abort",nt)}),ht.send(void 0===Et._bodyInit?null:Et._bodyInit)})}ot.polyfill=!0,U.fetch||(U.fetch=ot,U.Headers=u,U.Request=xt,U.Response=Ct),m.Headers=u,m.Request=xt,m.Response=Ct,m.fetch=ot,Object.defineProperty(m,"__esModule",{value:!0})}({})},89986:U=>{"use strict";function $(t){return t instanceof Buffer||t instanceof Date||t instanceof RegExp}function m(t){if(t instanceof Buffer){var n=Buffer.alloc?Buffer.alloc(t.length):new Buffer(t.length);return t.copy(n),n}if(t instanceof Date)return new Date(t.getTime());if(t instanceof RegExp)return new RegExp(t);throw new Error("Unexpected situation")}function C(t){var n=[];return t.forEach(function(r,s){n[s]="object"==typeof r&&null!==r?Array.isArray(r)?C(r):$(r)?m(r):e({},r):r}),n}function _(t,n){return"__proto__"===n?void 0:t[n]}var e=U.exports=function(){if(arguments.length<1||"object"!=typeof arguments[0])return!1;if(arguments.length<2)return arguments[0];var r,s,t=arguments[0],n=Array.prototype.slice.call(arguments,1);return n.forEach(function(y){"object"!=typeof y||null===y||Array.isArray(y)||Object.keys(y).forEach(function(x){if(s=_(t,x),(r=_(y,x))!==t)return"object"!=typeof r||null===r?void(t[x]=r):Array.isArray(r)?void(t[x]=C(r)):$(r)?void(t[x]=m(r)):"object"!=typeof s||null===s||Array.isArray(s)?void(t[x]=e({},r)):void(t[x]=e(s,r))})}),t}},66939:U=>{"use strict";var $="Function.prototype.bind called on incompatible ",m=Array.prototype.slice,C=Object.prototype.toString,_="[object Function]";U.exports=function(t){var n=this;if("function"!=typeof n||C.call(n)!==_)throw new TypeError($+n);for(var s,r=m.call(arguments,1),u=function(){if(this instanceof s){var at=n.apply(this,r.concat(m.call(arguments)));return Object(at)===at?at:this}return n.apply(t,r.concat(m.call(arguments)))},y=Math.max(0,n.length-r.length),x=[],B=0;B<y;B++)x.push("$"+B);if(s=Function("binder","return function ("+x.join(",")+"){ return binder.apply(this,arguments); }")(u),n.prototype){var Q=function(){};Q.prototype=n.prototype,s.prototype=new Q,Q.prototype=null}return s}},37341:(U,$,m)=>{"use strict";var C=m(66939);U.exports=Function.prototype.bind||C},23141:(U,$,m)=>{"use strict";var C,_=SyntaxError,e=Function,t=TypeError,n=function(Ut){try{return e('"use strict"; return ('+Ut+").constructor;")()}catch(Rt){}},r=Object.getOwnPropertyDescriptor;if(r)try{r({},"")}catch(Ut){r=null}var s=function(){throw new t},u=r?function(){try{return s}catch(Ut){try{return r(arguments,"callee").get}catch(Rt){return s}}}():s,y=m(73165)(),x=Object.getPrototypeOf||function(Ut){return Ut.__proto__},B={},Q="undefined"==typeof Uint8Array?C:x(Uint8Array),at={"%AggregateError%":"undefined"==typeof AggregateError?C:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?C:ArrayBuffer,"%ArrayIteratorPrototype%":y?x([][Symbol.iterator]()):C,"%AsyncFromSyncIteratorPrototype%":C,"%AsyncFunction%":B,"%AsyncGenerator%":B,"%AsyncGeneratorFunction%":B,"%AsyncIteratorPrototype%":B,"%Atomics%":"undefined"==typeof Atomics?C:Atomics,"%BigInt%":"undefined"==typeof BigInt?C:BigInt,"%Boolean%":Boolean,"%DataView%":"undefined"==typeof DataView?C:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":"undefined"==typeof Float32Array?C:Float32Array,"%Float64Array%":"undefined"==typeof Float64Array?C:Float64Array,"%FinalizationRegistry%":"undefined"==typeof FinalizationRegistry?C:FinalizationRegistry,"%Function%":e,"%GeneratorFunction%":B,"%Int8Array%":"undefined"==typeof Int8Array?C:Int8Array,"%Int16Array%":"undefined"==typeof Int16Array?C:Int16Array,"%Int32Array%":"undefined"==typeof Int32Array?C:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":y?x(x([][Symbol.iterator]())):C,"%JSON%":"object"==typeof JSON?JSON:C,"%Map%":"undefined"==typeof Map?C:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&y?x((new Map)[Symbol.iterator]()):C,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?C:Promise,"%Proxy%":"undefined"==typeof Proxy?C:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":"undefined"==typeof Reflect?C:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"==typeof Set?C:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&y?x((new Set)[Symbol.iterator]()):C,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?C:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":y?x(""[Symbol.iterator]()):C,"%Symbol%":y?Symbol:C,"%SyntaxError%":_,"%ThrowTypeError%":u,"%TypedArray%":Q,"%TypeError%":t,"%Uint8Array%":"undefined"==typeof Uint8Array?C:Uint8Array,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?C:Uint8ClampedArray,"%Uint16Array%":"undefined"==typeof Uint16Array?C:Uint16Array,"%Uint32Array%":"undefined"==typeof Uint32Array?C:Uint32Array,"%URIError%":URIError,"%WeakMap%":"undefined"==typeof WeakMap?C:WeakMap,"%WeakRef%":"undefined"==typeof WeakRef?C:WeakRef,"%WeakSet%":"undefined"==typeof WeakSet?C:WeakSet},rt=function Ut(Rt){var Et;if("%AsyncFunction%"===Rt)Et=n("async function () {}");else if("%GeneratorFunction%"===Rt)Et=n("function* () {}");else if("%AsyncGeneratorFunction%"===Rt)Et=n("async function* () {}");else if("%AsyncGenerator%"===Rt){var ht=Ut("%AsyncGeneratorFunction%");ht&&(Et=ht.prototype)}else if("%AsyncIteratorPrototype%"===Rt){var nt=Ut("%AsyncGenerator%");nt&&(Et=x(nt.prototype))}return at[Rt]=Et,Et},St={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},Ht=m(37341),vt=m(91279),xt=Ht.call(Function.call,Array.prototype.concat),Wt=Ht.call(Function.apply,Array.prototype.splice),Jt=Ht.call(Function.call,String.prototype.replace),Ct=Ht.call(Function.call,String.prototype.slice),yt=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,ot=/\\(\\)?/g,mt=function(Rt){var Et=Ct(Rt,0,1),ht=Ct(Rt,-1);if("%"===Et&&"%"!==ht)throw new _("invalid intrinsic syntax, expected closing `%`");if("%"===ht&&"%"!==Et)throw new _("invalid intrinsic syntax, expected opening `%`");var nt=[];return Jt(Rt,yt,function(he,Mt,Nt,de){nt[nt.length]=Nt?Jt(de,ot,"$1"):Mt||he}),nt},lt=function(Rt,Et){var nt,ht=Rt;if(vt(St,ht)&&(ht="%"+(nt=St[ht])[0]+"%"),vt(at,ht)){var he=at[ht];if(he===B&&(he=rt(ht)),void 0===he&&!Et)throw new t("intrinsic "+Rt+" exists, but is not available. Please file an issue!");return{alias:nt,name:ht,value:he}}throw new _("intrinsic "+Rt+" does not exist!")};U.exports=function(Rt,Et){if("string"!=typeof Rt||0===Rt.length)throw new t("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof Et)throw new t('"allowMissing" argument must be a boolean');var ht=mt(Rt),nt=ht.length>0?ht[0]:"",he=lt("%"+nt+"%",Et),Mt=he.name,Nt=he.value,de=!1,ve=he.alias;ve&&(nt=ve[0],Wt(ht,xt([0,1],ve)));for(var ue=1,Be=!0;ue<ht.length;ue+=1){var Ne=ht[ue],Qe=Ct(Ne,0,1),Di=Ct(Ne,-1);if(('"'===Qe||"'"===Qe||"`"===Qe||'"'===Di||"'"===Di||"`"===Di)&&Qe!==Di)throw new _("property names with quotes must have matching quotes");if(("constructor"===Ne||!Be)&&(de=!0),vt(at,Mt="%"+(nt+="."+Ne)+"%"))Nt=at[Mt];else if(null!=Nt){if(!(Ne in Nt)){if(!Et)throw new t("base intrinsic for "+Rt+" exists, but the property is not available.");return}if(r&&ue+1>=ht.length){var Ze=r(Nt,Ne);Nt=(Be=!!Ze)&&"get"in Ze&&!("originalValue"in Ze.get)?Ze.get:Nt[Ne]}else Be=vt(Nt,Ne),Nt=Nt[Ne];Be&&!de&&(at[Mt]=Nt)}}return Nt}},73165:(U,$,m)=>{"use strict";var C="undefined"!=typeof Symbol&&Symbol,_=m(43918);U.exports=function(){return"function"==typeof C&&"function"==typeof Symbol&&"symbol"==typeof C("foo")&&"symbol"==typeof Symbol("bar")&&_()}},43918:U=>{"use strict";U.exports=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var m={},C=Symbol("test"),_=Object(C);if("string"==typeof C||"[object Symbol]"!==Object.prototype.toString.call(C)||"[object Symbol]"!==Object.prototype.toString.call(_))return!1;for(C in m[C]=42,m)return!1;if("function"==typeof Object.keys&&0!==Object.keys(m).length||"function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(m).length)return!1;var t=Object.getOwnPropertySymbols(m);if(1!==t.length||t[0]!==C||!Object.prototype.propertyIsEnumerable.call(m,C))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var n=Object.getOwnPropertyDescriptor(m,C);if(42!==n.value||!0!==n.enumerable)return!1}return!0}},91279:(U,$,m)=>{"use strict";var C=m(37341);U.exports=C.call(Function.call,Object.prototype.hasOwnProperty)},9976:(U,$,m)=>{var e=m(66463)(m(75719),"DataView");U.exports=e},35705:(U,$,m)=>{var C=m(51089),_=m(2564),e=m(65929),t=m(1422),n=m(24795);function r(s){var u=-1,y=null==s?0:s.length;for(this.clear();++u<y;){var x=s[u];this.set(x[0],x[1])}}r.prototype.clear=C,r.prototype.delete=_,r.prototype.get=e,r.prototype.has=t,r.prototype.set=n,U.exports=r},64616:(U,$,m)=>{var C=m(45909),_=m(62578),e=m(20701),t=m(17438),n=m(60369);function r(s){var u=-1,y=null==s?0:s.length;for(this.clear();++u<y;){var x=s[u];this.set(x[0],x[1])}}r.prototype.clear=C,r.prototype.delete=_,r.prototype.get=e,r.prototype.has=t,r.prototype.set=n,U.exports=r},61805:(U,$,m)=>{var e=m(66463)(m(75719),"Map");U.exports=e},90923:(U,$,m)=>{var C=m(68791),_=m(3805),e=m(9274),t=m(31967),n=m(27537);function r(s){var u=-1,y=null==s?0:s.length;for(this.clear();++u<y;){var x=s[u];this.set(x[0],x[1])}}r.prototype.clear=C,r.prototype.delete=_,r.prototype.get=e,r.prototype.has=t,r.prototype.set=n,U.exports=r},49845:(U,$,m)=>{var e=m(66463)(m(75719),"Promise");U.exports=e},79716:(U,$,m)=>{var e=m(66463)(m(75719),"Set");U.exports=e},3824:(U,$,m)=>{var C=m(64616),_=m(25411),e=m(79582),t=m(26415),n=m(30666),r=m(58669);function s(u){var y=this.__data__=new C(u);this.size=y.size}s.prototype.clear=_,s.prototype.delete=e,s.prototype.get=t,s.prototype.has=n,s.prototype.set=r,U.exports=s},87425:(U,$,m)=>{var C=m(75719);U.exports=C.Symbol},2236:(U,$,m)=>{var C=m(75719);U.exports=C.Uint8Array},65626:(U,$,m)=>{var e=m(66463)(m(75719),"WeakMap");U.exports=e},57990:U=>{U.exports=function(m,C){for(var _=-1,e=null==m?0:m.length;++_<e&&!1!==C(m[_],_,m););return m}},92161:U=>{U.exports=function(m,C){for(var _=-1,e=null==m?0:m.length,t=0,n=[];++_<e;){var r=m[_];C(r,_,m)&&(n[t++]=r)}return n}},75715:(U,$,m)=>{var C=m(93784),_=m(93832),e=m(83684),t=m(18666),n=m(28207),r=m(78558),u=Object.prototype.hasOwnProperty;U.exports=function(x,B){var Q=e(x),at=!Q&&_(x),rt=!Q&&!at&&t(x),St=!Q&&!at&&!rt&&r(x),Ht=Q||at||rt||St,vt=Ht?C(x.length,String):[],xt=vt.length;for(var Wt in x)(B||u.call(x,Wt))&&(!Ht||!("length"==Wt||rt&&("offset"==Wt||"parent"==Wt)||St&&("buffer"==Wt||"byteLength"==Wt||"byteOffset"==Wt)||n(Wt,xt)))&&vt.push(Wt);return vt}},72437:U=>{U.exports=function(m,C){for(var _=-1,e=null==m?0:m.length,t=Array(e);++_<e;)t[_]=C(m[_],_,m);return t}},85271:U=>{U.exports=function(m,C){for(var _=-1,e=C.length,t=m.length;++_<e;)m[t+_]=C[_];return m}},82407:(U,$,m)=>{var C=m(92034),_=m(79106),t=Object.prototype.hasOwnProperty;U.exports=function(r,s,u){var y=r[s];(!t.call(r,s)||!_(y,u)||void 0===u&&!(s in r))&&C(r,s,u)}},84760:(U,$,m)=>{var C=m(79106);U.exports=function(e,t){for(var n=e.length;n--;)if(C(e[n][0],t))return n;return-1}},54883:(U,$,m)=>{var C=m(21492),_=m(63344);U.exports=function(t,n){return t&&C(n,_(n),t)}},26031:(U,$,m)=>{var C=m(21492),_=m(39479);U.exports=function(t,n){return t&&C(n,_(n),t)}},92034:(U,$,m)=>{var C=m(90086);U.exports=function(e,t,n){"__proto__"==t&&C?C(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}},74857:(U,$,m)=>{var C=m(3824),_=m(57990),e=m(82407),t=m(54883),n=m(26031),r=m(20416),s=m(14601),u=m(36377),y=m(54646),x=m(20419),B=m(80553),Q=m(40691),at=m(49965),rt=m(40349),St=m(31743),Ht=m(83684),vt=m(18666),xt=m(15261),Wt=m(6264),Jt=m(57221),Ct=m(63344),yt=m(39479),Ut="[object Arguments]",he="[object Function]",ve="[object Object]",Ie={};Ie[Ut]=Ie["[object Array]"]=Ie["[object ArrayBuffer]"]=Ie["[object DataView]"]=Ie["[object Boolean]"]=Ie["[object Date]"]=Ie["[object Float32Array]"]=Ie["[object Float64Array]"]=Ie["[object Int8Array]"]=Ie["[object Int16Array]"]=Ie["[object Int32Array]"]=Ie["[object Map]"]=Ie["[object Number]"]=Ie[ve]=Ie["[object RegExp]"]=Ie["[object Set]"]=Ie["[object String]"]=Ie["[object Symbol]"]=Ie["[object Uint8Array]"]=Ie["[object Uint8ClampedArray]"]=Ie["[object Uint16Array]"]=Ie["[object Uint32Array]"]=!0,Ie["[object Error]"]=Ie[he]=Ie["[object WeakMap]"]=!1,U.exports=function te(ee,ke,ne,me,ye,Zt){var ce,ei=1&ke,ni=2&ke,Fi=4&ke;if(ne&&(ce=ye?ne(ee,me,ye,Zt):ne(ee)),void 0!==ce)return ce;if(!Wt(ee))return ee;var wi=Ht(ee);if(wi){if(ce=at(ee),!ei)return s(ee,ce)}else{var yi=Q(ee),pn=yi==he||"[object GeneratorFunction]"==yi;if(vt(ee))return r(ee,ei);if(yi==ve||yi==Ut||pn&&!ye){if(ce=ni||pn?{}:St(ee),!ei)return ni?y(ee,n(ce,ee)):u(ee,t(ce,ee))}else{if(!Ie[yi])return ye?ee:{};ce=rt(ee,yi,ei)}}Zt||(Zt=new C);var mi=Zt.get(ee);if(mi)return mi;Zt.set(ee,ce),Jt(ee)?ee.forEach(function(Oe){ce.add(te(Oe,ke,ne,Oe,ee,Zt))}):xt(ee)&&ee.forEach(function(Oe,Ci){ce.set(Ci,te(Oe,ke,ne,Ci,ee,Zt))});var Ce=wi?void 0:(Fi?ni?B:x:ni?yt:Ct)(ee);return _(Ce||ee,function(Oe,Ci){Ce&&(Oe=ee[Ci=Oe]),e(ce,Ci,te(Oe,ke,ne,Ci,ee,Zt))}),ce}},85602:(U,$,m)=>{var C=m(6264),_=Object.create,e=function(){function t(){}return function(n){if(!C(n))return{};if(_)return _(n);t.prototype=n;var r=new t;return t.prototype=void 0,r}}();U.exports=e},17046:(U,$,m)=>{var C=m(57783),_=m(97046);U.exports=function(t,n){for(var r=0,s=(n=C(n,t)).length;null!=t&&r<s;)t=t[_(n[r++])];return r&&r==s?t:void 0}},27879:(U,$,m)=>{var C=m(85271),_=m(83684);U.exports=function(t,n,r){var s=n(t);return _(t)?s:C(s,r(t))}},40232:(U,$,m)=>{var C=m(87425),_=m(98329),e=m(78295),r=C?C.toStringTag:void 0;U.exports=function(u){return null==u?void 0===u?"[object Undefined]":"[object Null]":r&&r in Object(u)?_(u):e(u)}},81065:(U,$,m)=>{var C=m(40232),_=m(22308);U.exports=function(n){return _(n)&&"[object Arguments]"==C(n)}},16612:(U,$,m)=>{var C=m(40691),_=m(22308);U.exports=function(n){return _(n)&&"[object Map]"==C(n)}},23796:(U,$,m)=>{var C=m(88066),_=m(98031),e=m(6264),t=m(65295),r=/^\[object .+?Constructor\]$/,B=RegExp("^"+Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");U.exports=function(at){return!(!e(at)||_(at))&&(C(at)?B:r).test(t(at))}},26987:(U,$,m)=>{var C=m(40691),_=m(22308);U.exports=function(n){return _(n)&&"[object Set]"==C(n)}},11264:(U,$,m)=>{var C=m(40232),_=m(67818),e=m(22308),Et={};Et["[object Float32Array]"]=Et["[object Float64Array]"]=Et["[object Int8Array]"]=Et["[object Int16Array]"]=Et["[object Int32Array]"]=Et["[object Uint8Array]"]=Et["[object Uint8ClampedArray]"]=Et["[object Uint16Array]"]=Et["[object Uint32Array]"]=!0,Et["[object Arguments]"]=Et["[object Array]"]=Et["[object ArrayBuffer]"]=Et["[object Boolean]"]=Et["[object DataView]"]=Et["[object Date]"]=Et["[object Error]"]=Et["[object Function]"]=Et["[object Map]"]=Et["[object Number]"]=Et["[object Object]"]=Et["[object RegExp]"]=Et["[object Set]"]=Et["[object String]"]=Et["[object WeakMap]"]=!1,U.exports=function(nt){return e(nt)&&_(nt.length)&&!!Et[C(nt)]}},16249:(U,$,m)=>{var C=m(27877),_=m(73595),t=Object.prototype.hasOwnProperty;U.exports=function(r){if(!C(r))return _(r);var s=[];for(var u in Object(r))t.call(r,u)&&"constructor"!=u&&s.push(u);return s}},90374:(U,$,m)=>{var C=m(6264),_=m(27877),e=m(47098),n=Object.prototype.hasOwnProperty;U.exports=function(s){if(!C(s))return e(s);var u=_(s),y=[];for(var x in s)"constructor"==x&&(u||!n.call(s,x))||y.push(x);return y}},93784:U=>{U.exports=function(m,C){for(var _=-1,e=Array(m);++_<m;)e[_]=C(_);return e}},15825:(U,$,m)=>{var C=m(87425),_=m(72437),e=m(83684),t=m(38380),r=C?C.prototype:void 0,s=r?r.toString:void 0;U.exports=function u(y){if("string"==typeof y)return y;if(e(y))return _(y,u)+"";if(t(y))return s?s.call(y):"";var x=y+"";return"0"==x&&1/y==-1/0?"-0":x}},81279:U=>{U.exports=function(m){return function(C){return m(C)}}},57783:(U,$,m)=>{var C=m(83684),_=m(92615),e=m(4113),t=m(30381);U.exports=function(r,s){return C(r)?r:_(r,s)?[r]:e(t(r))}},2050:(U,$,m)=>{var C=m(2236);U.exports=function(e){var t=new e.constructor(e.byteLength);return new C(t).set(new C(e)),t}},20416:(U,$,m)=>{U=m.nmd(U);var C=m(75719),_=$&&!$.nodeType&&$,e=_&&U&&!U.nodeType&&U,n=e&&e.exports===_?C.Buffer:void 0,r=n?n.allocUnsafe:void 0;U.exports=function(u,y){if(y)return u.slice();var x=u.length,B=r?r(x):new u.constructor(x);return u.copy(B),B}},85975:(U,$,m)=>{var C=m(2050);U.exports=function(e,t){var n=t?C(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}},57092:U=>{var $=/\w*$/;U.exports=function(C){var _=new C.constructor(C.source,$.exec(C));return _.lastIndex=C.lastIndex,_}},954:(U,$,m)=>{var C=m(87425),_=C?C.prototype:void 0,e=_?_.valueOf:void 0;U.exports=function(n){return e?Object(e.call(n)):{}}},76009:(U,$,m)=>{var C=m(2050);U.exports=function(e,t){var n=t?C(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}},14601:U=>{U.exports=function(m,C){var _=-1,e=m.length;for(C||(C=Array(e));++_<e;)C[_]=m[_];return C}},21492:(U,$,m)=>{var C=m(82407),_=m(92034);U.exports=function(t,n,r,s){var u=!r;r||(r={});for(var y=-1,x=n.length;++y<x;){var B=n[y],Q=s?s(r[B],t[B],B,r,t):void 0;void 0===Q&&(Q=t[B]),u?_(r,B,Q):C(r,B,Q)}return r}},36377:(U,$,m)=>{var C=m(21492),_=m(640);U.exports=function(t,n){return C(t,_(t),n)}},54646:(U,$,m)=>{var C=m(21492),_=m(87884);U.exports=function(t,n){return C(t,_(t),n)}},66092:(U,$,m)=>{var C=m(75719);U.exports=C["__core-js_shared__"]},90086:(U,$,m)=>{var C=m(66463),_=function(){try{var e=C(Object,"defineProperty");return e({},"",{}),e}catch(t){}}();U.exports=_},15307:U=>{var $="object"==typeof global&&global&&global.Object===Object&&global;U.exports=$},20419:(U,$,m)=>{var C=m(27879),_=m(640),e=m(63344);U.exports=function(n){return C(n,e,_)}},80553:(U,$,m)=>{var C=m(27879),_=m(87884),e=m(39479);U.exports=function(n){return C(n,e,_)}},90327:(U,$,m)=>{var C=m(40497);U.exports=function(e,t){var n=e.__data__;return C(t)?n["string"==typeof t?"string":"hash"]:n.map}},66463:(U,$,m)=>{var C=m(23796),_=m(47820);U.exports=function(t,n){var r=_(t,n);return C(r)?r:void 0}},566:(U,$,m)=>{var _=m(75854)(Object.getPrototypeOf,Object);U.exports=_},98329:(U,$,m)=>{var C=m(87425),_=Object.prototype,e=_.hasOwnProperty,t=_.toString,n=C?C.toStringTag:void 0;U.exports=function(s){var u=e.call(s,n),y=s[n];try{s[n]=void 0;var x=!0}catch(Q){}var B=t.call(s);return x&&(u?s[n]=y:delete s[n]),B}},640:(U,$,m)=>{var C=m(92161),_=m(35587),t=Object.prototype.propertyIsEnumerable,n=Object.getOwnPropertySymbols;U.exports=n?function(s){return null==s?[]:(s=Object(s),C(n(s),function(u){return t.call(s,u)}))}:_},87884:(U,$,m)=>{var C=m(85271),_=m(566),e=m(640),t=m(35587);U.exports=Object.getOwnPropertySymbols?function(s){for(var u=[];s;)C(u,e(s)),s=_(s);return u}:t},40691:(U,$,m)=>{var C=m(9976),_=m(61805),e=m(49845),t=m(79716),n=m(65626),r=m(40232),s=m(65295),u="[object Map]",x="[object Promise]",B="[object Set]",Q="[object WeakMap]",at="[object DataView]",rt=s(C),St=s(_),Ht=s(e),vt=s(t),xt=s(n),Wt=r;(C&&Wt(new C(new ArrayBuffer(1)))!=at||_&&Wt(new _)!=u||e&&Wt(e.resolve())!=x||t&&Wt(new t)!=B||n&&Wt(new n)!=Q)&&(Wt=function(Jt){var Ct=r(Jt),yt="[object Object]"==Ct?Jt.constructor:void 0,ot=yt?s(yt):"";if(ot)switch(ot){case rt:return at;case St:return u;case Ht:return x;case vt:return B;case xt:return Q}return Ct}),U.exports=Wt},47820:U=>{U.exports=function(m,C){return null==m?void 0:m[C]}},51089:(U,$,m)=>{var C=m(13947);U.exports=function(){this.__data__=C?C(null):{},this.size=0}},2564:U=>{U.exports=function(m){var C=this.has(m)&&delete this.__data__[m];return this.size-=C?1:0,C}},65929:(U,$,m)=>{var C=m(13947),t=Object.prototype.hasOwnProperty;U.exports=function(r){var s=this.__data__;if(C){var u=s[r];return"__lodash_hash_undefined__"===u?void 0:u}return t.call(s,r)?s[r]:void 0}},1422:(U,$,m)=>{var C=m(13947),e=Object.prototype.hasOwnProperty;U.exports=function(n){var r=this.__data__;return C?void 0!==r[n]:e.call(r,n)}},24795:(U,$,m)=>{var C=m(13947);U.exports=function(t,n){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=C&&void 0===n?"__lodash_hash_undefined__":n,this}},49965:U=>{var m=Object.prototype.hasOwnProperty;U.exports=function(_){var e=_.length,t=new _.constructor(e);return e&&"string"==typeof _[0]&&m.call(_,"index")&&(t.index=_.index,t.input=_.input),t}},40349:(U,$,m)=>{var C=m(2050),_=m(85975),e=m(57092),t=m(954),n=m(76009);U.exports=function(Ut,Rt,Et){var ht=Ut.constructor;switch(Rt){case"[object ArrayBuffer]":return C(Ut);case"[object Boolean]":case"[object Date]":return new ht(+Ut);case"[object DataView]":return _(Ut,Et);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return n(Ut,Et);case"[object Map]":case"[object Set]":return new ht;case"[object Number]":case"[object String]":return new ht(Ut);case"[object RegExp]":return e(Ut);case"[object Symbol]":return t(Ut)}}},31743:(U,$,m)=>{var C=m(85602),_=m(566),e=m(27877);U.exports=function(n){return"function"!=typeof n.constructor||e(n)?{}:C(_(n))}},28207:U=>{var m=/^(?:0|[1-9]\d*)$/;U.exports=function(_,e){var t=typeof _;return!!(e=null==e?9007199254740991:e)&&("number"==t||"symbol"!=t&&m.test(_))&&_>-1&&_%1==0&&_<e}},92615:(U,$,m)=>{var C=m(83684),_=m(38380),e=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,t=/^\w*$/;U.exports=function(r,s){if(C(r))return!1;var u=typeof r;return!("number"!=u&&"symbol"!=u&&"boolean"!=u&&null!=r&&!_(r))||t.test(r)||!e.test(r)||null!=s&&r in Object(s)}},40497:U=>{U.exports=function(m){var C=typeof m;return"string"==C||"number"==C||"symbol"==C||"boolean"==C?"__proto__"!==m:null===m}},98031:(U,$,m)=>{var t,C=m(66092),_=(t=/[^.]+$/.exec(C&&C.keys&&C.keys.IE_PROTO||""))?"Symbol(src)_1."+t:"";U.exports=function(t){return!!_&&_ in t}},27877:U=>{var $=Object.prototype;U.exports=function(C){var _=C&&C.constructor;return C===("function"==typeof _&&_.prototype||$)}},45909:U=>{U.exports=function(){this.__data__=[],this.size=0}},62578:(U,$,m)=>{var C=m(84760),e=Array.prototype.splice;U.exports=function(n){var r=this.__data__,s=C(r,n);return!(s<0||(s==r.length-1?r.pop():e.call(r,s,1),--this.size,0))}},20701:(U,$,m)=>{var C=m(84760);U.exports=function(e){var t=this.__data__,n=C(t,e);return n<0?void 0:t[n][1]}},17438:(U,$,m)=>{var C=m(84760);U.exports=function(e){return C(this.__data__,e)>-1}},60369:(U,$,m)=>{var C=m(84760);U.exports=function(e,t){var n=this.__data__,r=C(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this}},68791:(U,$,m)=>{var C=m(35705),_=m(64616),e=m(61805);U.exports=function(){this.size=0,this.__data__={hash:new C,map:new(e||_),string:new C}}},3805:(U,$,m)=>{var C=m(90327);U.exports=function(e){var t=C(this,e).delete(e);return this.size-=t?1:0,t}},9274:(U,$,m)=>{var C=m(90327);U.exports=function(e){return C(this,e).get(e)}},31967:(U,$,m)=>{var C=m(90327);U.exports=function(e){return C(this,e).has(e)}},27537:(U,$,m)=>{var C=m(90327);U.exports=function(e,t){var n=C(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this}},48815:(U,$,m)=>{var C=m(40917);U.exports=function(t){var n=C(t,function(s){return 500===r.size&&r.clear(),s}),r=n.cache;return n}},13947:(U,$,m)=>{var _=m(66463)(Object,"create");U.exports=_},73595:(U,$,m)=>{var _=m(75854)(Object.keys,Object);U.exports=_},47098:U=>{U.exports=function(m){var C=[];if(null!=m)for(var _ in Object(m))C.push(_);return C}},56520:(U,$,m)=>{U=m.nmd(U);var C=m(15307),_=$&&!$.nodeType&&$,e=_&&U&&!U.nodeType&&U,n=e&&e.exports===_&&C.process,r=function(){try{return e&&e.require&&e.require("util").types||n&&n.binding&&n.binding("util")}catch(u){}}();U.exports=r},78295:U=>{var m=Object.prototype.toString;U.exports=function(_){return m.call(_)}},75854:U=>{U.exports=function(m,C){return function(_){return m(C(_))}}},75719:(U,$,m)=>{var C=m(15307),_="object"==typeof self&&self&&self.Object===Object&&self,e=C||_||Function("return this")();U.exports=e},25411:(U,$,m)=>{var C=m(64616);U.exports=function(){this.__data__=new C,this.size=0}},79582:U=>{U.exports=function(m){var C=this.__data__,_=C.delete(m);return this.size=C.size,_}},26415:U=>{U.exports=function(m){return this.__data__.get(m)}},30666:U=>{U.exports=function(m){return this.__data__.has(m)}},58669:(U,$,m)=>{var C=m(64616),_=m(61805),e=m(90923);U.exports=function(r,s){var u=this.__data__;if(u instanceof C){var y=u.__data__;if(!_||y.length<199)return y.push([r,s]),this.size=++u.size,this;u=this.__data__=new e(y)}return u.set(r,s),this.size=u.size,this}},4113:(U,$,m)=>{var C=m(48815),_=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,e=/\\(\\)?/g,t=C(function(n){var r=[];return 46===n.charCodeAt(0)&&r.push(""),n.replace(_,function(s,u,y,x){r.push(y?x.replace(e,"$1"):u||s)}),r});U.exports=t},97046:(U,$,m)=>{var C=m(38380);U.exports=function(t){if("string"==typeof t||C(t))return t;var n=t+"";return"0"==n&&1/t==-1/0?"-0":n}},65295:U=>{var m=Function.prototype.toString;U.exports=function(_){if(null!=_){try{return m.call(_)}catch(e){}try{return _+""}catch(e){}}return""}},69380:(U,$,m)=>{var C=m(74857);U.exports=function(n){return C(n,5)}},79106:U=>{U.exports=function(m,C){return m===C||m!=m&&C!=C}},36817:(U,$,m)=>{var C=m(17046);U.exports=function(e,t,n){var r=null==e?void 0:C(e,t);return void 0===r?n:r}},93832:(U,$,m)=>{var C=m(81065),_=m(22308),e=Object.prototype,t=e.hasOwnProperty,n=e.propertyIsEnumerable,r=C(function(){return arguments}())?C:function(s){return _(s)&&t.call(s,"callee")&&!n.call(s,"callee")};U.exports=r},83684:U=>{U.exports=Array.isArray},49300:(U,$,m)=>{var C=m(88066),_=m(67818);U.exports=function(t){return null!=t&&_(t.length)&&!C(t)}},18666:(U,$,m)=>{U=m.nmd(U);var C=m(75719),_=m(93320),e=$&&!$.nodeType&&$,t=e&&U&&!U.nodeType&&U,r=t&&t.exports===e?C.Buffer:void 0;U.exports=(r?r.isBuffer:void 0)||_},65359:(U,$,m)=>{var C=m(16249),_=m(40691),e=m(93832),t=m(83684),n=m(49300),r=m(18666),s=m(27877),u=m(78558),Q=Object.prototype.hasOwnProperty;U.exports=function(rt){if(null==rt)return!0;if(n(rt)&&(t(rt)||"string"==typeof rt||"function"==typeof rt.splice||r(rt)||u(rt)||e(rt)))return!rt.length;var St=_(rt);if("[object Map]"==St||"[object Set]"==St)return!rt.size;if(s(rt))return!C(rt).length;for(var Ht in rt)if(Q.call(rt,Ht))return!1;return!0}},88066:(U,$,m)=>{var C=m(40232),_=m(6264);U.exports=function(u){if(!_(u))return!1;var y=C(u);return"[object Function]"==y||"[object GeneratorFunction]"==y||"[object AsyncFunction]"==y||"[object Proxy]"==y}},67818:U=>{U.exports=function(C){return"number"==typeof C&&C>-1&&C%1==0&&C<=9007199254740991}},15261:(U,$,m)=>{var C=m(16612),_=m(81279),e=m(56520),t=e&&e.isMap,n=t?_(t):C;U.exports=n},6264:U=>{U.exports=function(m){var C=typeof m;return null!=m&&("object"==C||"function"==C)}},22308:U=>{U.exports=function(m){return null!=m&&"object"==typeof m}},27935:(U,$,m)=>{var C=m(40232),_=m(566),e=m(22308),s=Function.prototype.toString,u=Object.prototype.hasOwnProperty,y=s.call(Object);U.exports=function(B){if(!e(B)||"[object Object]"!=C(B))return!1;var Q=_(B);if(null===Q)return!0;var at=u.call(Q,"constructor")&&Q.constructor;return"function"==typeof at&&at instanceof at&&s.call(at)==y}},57221:(U,$,m)=>{var C=m(26987),_=m(81279),e=m(56520),t=e&&e.isSet,n=t?_(t):C;U.exports=n},38380:(U,$,m)=>{var C=m(40232),_=m(22308);U.exports=function(n){return"symbol"==typeof n||_(n)&&"[object Symbol]"==C(n)}},78558:(U,$,m)=>{var C=m(11264),_=m(81279),e=m(56520),t=e&&e.isTypedArray,n=t?_(t):C;U.exports=n},63344:(U,$,m)=>{var C=m(75715),_=m(16249),e=m(49300);U.exports=function(n){return e(n)?C(n):_(n)}},39479:(U,$,m)=>{var C=m(75715),_=m(90374),e=m(49300);U.exports=function(n){return e(n)?C(n,!0):_(n)}},40917:(U,$,m)=>{var C=m(90923);function e(t,n){if("function"!=typeof t||null!=n&&"function"!=typeof n)throw new TypeError("Expected a function");var r=function(){var s=arguments,u=n?n.apply(this,s):s[0],y=r.cache;if(y.has(u))return y.get(u);var x=t.apply(this,s);return r.cache=y.set(u,x)||y,x};return r.cache=new(e.Cache||C),r}e.Cache=C,U.exports=e},35587:U=>{U.exports=function(){return[]}},93320:U=>{U.exports=function(){return!1}},30381:(U,$,m)=>{var C=m(15825);U.exports=function(e){return null==e?"":C(e)}},50847:(U,$,m)=>{var C="function"==typeof Map&&Map.prototype,_=Object.getOwnPropertyDescriptor&&C?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,e=C&&_&&"function"==typeof _.get?_.get:null,t=C&&Map.prototype.forEach,n="function"==typeof Set&&Set.prototype,r=Object.getOwnPropertyDescriptor&&n?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,s=n&&r&&"function"==typeof r.get?r.get:null,u=n&&Set.prototype.forEach,x="function"==typeof WeakMap&&WeakMap.prototype?WeakMap.prototype.has:null,Q="function"==typeof WeakSet&&WeakSet.prototype?WeakSet.prototype.has:null,rt="function"==typeof WeakRef&&WeakRef.prototype?WeakRef.prototype.deref:null,St=Boolean.prototype.valueOf,Ht=Object.prototype.toString,vt=Function.prototype.toString,xt=String.prototype.match,Wt=String.prototype.slice,Jt=String.prototype.replace,Ct=String.prototype.toUpperCase,yt=String.prototype.toLowerCase,ot=RegExp.prototype.test,mt=Array.prototype.concat,lt=Array.prototype.join,Ut=Array.prototype.slice,Rt=Math.floor,Et="function"==typeof BigInt?BigInt.prototype.valueOf:null,ht=Object.getOwnPropertySymbols,nt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?Symbol.prototype.toString:null,he="function"==typeof Symbol&&"object"==typeof Symbol.iterator,Mt="function"==typeof Symbol&&Symbol.toStringTag&&(Symbol,1)?Symbol.toStringTag:null,Nt=Object.prototype.propertyIsEnumerable,de=("function"==typeof Reflect?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(Ce){return Ce.__proto__}:null);function ve(Ce,Oe){if(Ce===1/0||Ce===-1/0||Ce!=Ce||Ce&&Ce>-1e3&&Ce<1e3||ot.call(/e/,Oe))return Oe;var Ci=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if("number"==typeof Ce){var je=Ce<0?-Rt(-Ce):Rt(Ce);if(je!==Ce){var Ii=String(je),_i=Wt.call(Oe,Ii.length+1);return Jt.call(Ii,Ci,"$&_")+"."+Jt.call(Jt.call(_i,/([0-9]{3})/g,"$&_"),/_$/,"")}}return Jt.call(Oe,Ci,"$&_")}var ue=m(52175).custom,Be=ue&&_e(ue)?ue:null;function Ne(Ce,Oe,Ci){var je="double"===(Ci.quoteStyle||Oe)?'"':"'";return je+Ce+je}function Qe(Ce){return Jt.call(String(Ce),/"/g,"&quot;")}function Di(Ce){return!("[object Array]"!==hi(Ce)||Mt&&"object"==typeof Ce&&Mt in Ce)}function _e(Ce){if(he)return Ce&&"object"==typeof Ce&&Ce instanceof Symbol;if("symbol"==typeof Ce)return!0;if(!Ce||"object"!=typeof Ce||!nt)return!1;try{return nt.call(Ce),!0}catch(Oe){}return!1}U.exports=function Ce(Oe,Ci,je,Ii){var _i=Ci||{};if(ze(_i,"quoteStyle")&&"single"!==_i.quoteStyle&&"double"!==_i.quoteStyle)throw new TypeError('option "quoteStyle" must be "single" or "double"');if(ze(_i,"maxStringLength")&&("number"==typeof _i.maxStringLength?_i.maxStringLength<0&&_i.maxStringLength!==1/0:null!==_i.maxStringLength))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var Ui=!ze(_i,"customInspect")||_i.customInspect;if("boolean"!=typeof Ui&&"symbol"!==Ui)throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(ze(_i,"indent")&&null!==_i.indent&&"\t"!==_i.indent&&!(parseInt(_i.indent,10)===_i.indent&&_i.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(ze(_i,"numericSeparator")&&"boolean"!=typeof _i.numericSeparator)throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var $e=_i.numericSeparator;if(void 0===Oe)return"undefined";if(null===Oe)return"null";if("boolean"==typeof Oe)return Oe?"true":"false";if("string"==typeof Oe)return ce(Oe,_i);if("number"==typeof Oe){if(0===Oe)return 1/0/Oe>0?"0":"-0";var fe=String(Oe);return $e?ve(Oe,fe):fe}if("bigint"==typeof Oe){var kt=String(Oe)+"n";return $e?ve(Oe,kt):kt}var ct=void 0===_i.depth?5:_i.depth;if(void 0===je&&(je=0),je>=ct&&ct>0&&"object"==typeof Oe)return Di(Oe)?"[Array]":"[Object]";var Lt=function(Ce,Oe){var Ci;if("\t"===Ce.indent)Ci="\t";else{if(!("number"==typeof Ce.indent&&Ce.indent>0))return null;Ci=lt.call(Array(Ce.indent+1)," ")}return{base:Ci,prev:lt.call(Array(Oe+1),Ci)}}(_i,je);if(void 0===Ii)Ii=[];else if(te(Ii,Oe)>=0)return"[Circular]";function ae(mo,kr,ur){if(kr&&(Ii=Ut.call(Ii)).push(kr),ur){var Mo={depth:_i.depth};return ze(_i,"quoteStyle")&&(Mo.quoteStyle=_i.quoteStyle),Ce(mo,Mo,je+1,Ii)}return Ce(mo,_i,je+1,Ii)}if("function"==typeof Oe){var Ae=function(Ce){if(Ce.name)return Ce.name;var Oe=xt.call(vt.call(Ce),/^function\s*([\w$]+)/);return Oe?Oe[1]:null}(Oe),Wi=Zi(Oe,ae);return"[Function"+(Ae?": "+Ae:" (anonymous)")+"]"+(Wi.length>0?" { "+lt.call(Wi,", ")+" }":"")}if(_e(Oe)){var Qi=he?Jt.call(String(Oe),/^(Symbol\(.*\))_[^)]*$/,"$1"):nt.call(Oe);return"object"!=typeof Oe||he?Qi:ni(Qi)}if(function(Ce){return!(!Ce||"object"!=typeof Ce)&&("undefined"!=typeof HTMLElement&&Ce instanceof HTMLElement||"string"==typeof Ce.nodeName&&"function"==typeof Ce.getAttribute)}(Oe)){for(var yn="<"+yt.call(String(Oe.nodeName)),tr=Oe.attributes||[],li=0;li<tr.length;li++)yn+=" "+tr[li].name+"="+Ne(Qe(tr[li].value),"double",_i);return yn+=">",Oe.childNodes&&Oe.childNodes.length&&(yn+="..."),yn+"</"+yt.call(String(Oe.nodeName))+">"}if(Di(Oe)){if(0===Oe.length)return"[]";var Je=Zi(Oe,ae);return Lt&&!function(Ce){for(var Oe=0;Oe<Ce.length;Oe++)if(te(Ce[Oe],"\n")>=0)return!1;return!0}(Je)?"["+mi(Je,Lt)+"]":"[ "+lt.call(Je,", ")+" ]"}if(function(Ce){return!("[object Error]"!==hi(Ce)||Mt&&"object"==typeof Ce&&Mt in Ce)}(Oe)){var xe=Zi(Oe,ae);return"cause"in Oe&&!Nt.call(Oe,"cause")?"{ ["+String(Oe)+"] "+lt.call(mt.call("[cause]: "+ae(Oe.cause),xe),", ")+" }":0===xe.length?"["+String(Oe)+"]":"{ ["+String(Oe)+"] "+lt.call(xe,", ")+" }"}if("object"==typeof Oe&&Ui){if(Be&&"function"==typeof Oe[Be])return Oe[Be]();if("symbol"!==Ui&&"function"==typeof Oe.inspect)return Oe.inspect()}if(function(Ce){if(!e||!Ce||"object"!=typeof Ce)return!1;try{e.call(Ce);try{s.call(Ce)}catch(Oe){return!0}return Ce instanceof Map}catch(Oe){}return!1}(Oe)){var ui=[];return t.call(Oe,function(mo,kr){ui.push(ae(kr,Oe,!0)+" => "+ae(mo,Oe))}),wi("Map",e.call(Oe),ui,Lt)}if(function(Ce){if(!s||!Ce||"object"!=typeof Ce)return!1;try{s.call(Ce);try{e.call(Ce)}catch(Oe){return!0}return Ce instanceof Set}catch(Oe){}return!1}(Oe)){var ki=[];return u.call(Oe,function(mo){ki.push(ae(mo,Oe))}),wi("Set",s.call(Oe),ki,Lt)}if(function(Ce){if(!x||!Ce||"object"!=typeof Ce)return!1;try{x.call(Ce,x);try{Q.call(Ce,Q)}catch(Oe){return!0}return Ce instanceof WeakMap}catch(Oe){}return!1}(Oe))return Fi("WeakMap");if(function(Ce){if(!Q||!Ce||"object"!=typeof Ce)return!1;try{Q.call(Ce,Q);try{x.call(Ce,x)}catch(Oe){return!0}return Ce instanceof WeakSet}catch(Oe){}return!1}(Oe))return Fi("WeakSet");if(function(Ce){if(!rt||!Ce||"object"!=typeof Ce)return!1;try{return rt.call(Ce),!0}catch(Oe){}return!1}(Oe))return Fi("WeakRef");if(function(Ce){return!("[object Number]"!==hi(Ce)||Mt&&"object"==typeof Ce&&Mt in Ce)}(Oe))return ni(ae(Number(Oe)));if(function(Ce){if(!Ce||"object"!=typeof Ce||!Et)return!1;try{return Et.call(Ce),!0}catch(Oe){}return!1}(Oe))return ni(ae(Et.call(Oe)));if(function(Ce){return!("[object Boolean]"!==hi(Ce)||Mt&&"object"==typeof Ce&&Mt in Ce)}(Oe))return ni(St.call(Oe));if(function(Ce){return!("[object String]"!==hi(Ce)||Mt&&"object"==typeof Ce&&Mt in Ce)}(Oe))return ni(ae(String(Oe)));if(!function(Ce){return!("[object Date]"!==hi(Ce)||Mt&&"object"==typeof Ce&&Mt in Ce)}(Oe)&&!function(Ce){return!("[object RegExp]"!==hi(Ce)||Mt&&"object"==typeof Ce&&Mt in Ce)}(Oe)){var fn=Zi(Oe,ae),An=de?de(Oe)===Object.prototype:Oe instanceof Object||Oe.constructor===Object,ar=Oe instanceof Object?"":"null prototype",Tr=!An&&Mt&&Object(Oe)===Oe&&Mt in Oe?Wt.call(hi(Oe),8,-1):ar?"Object":"",no=(An||"function"!=typeof Oe.constructor?"":Oe.constructor.name?Oe.constructor.name+" ":"")+(Tr||ar?"["+lt.call(mt.call([],Tr||[],ar||[]),": ")+"] ":"");return 0===fn.length?no+"{}":Lt?no+"{"+mi(fn,Lt)+"}":no+"{ "+lt.call(fn,", ")+" }"}return String(Oe)};var pe=Object.prototype.hasOwnProperty||function(Ce){return Ce in this};function ze(Ce,Oe){return pe.call(Ce,Oe)}function hi(Ce){return Ht.call(Ce)}function te(Ce,Oe){if(Ce.indexOf)return Ce.indexOf(Oe);for(var Ci=0,je=Ce.length;Ci<je;Ci++)if(Ce[Ci]===Oe)return Ci;return-1}function ce(Ce,Oe){if(Ce.length>Oe.maxStringLength){var Ci=Ce.length-Oe.maxStringLength,je="... "+Ci+" more character"+(Ci>1?"s":"");return ce(Wt.call(Ce,0,Oe.maxStringLength),Oe)+je}return Ne(Jt.call(Jt.call(Ce,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,ei),"single",Oe)}function ei(Ce){var Oe=Ce.charCodeAt(0),Ci={8:"b",9:"t",10:"n",12:"f",13:"r"}[Oe];return Ci?"\\"+Ci:"\\x"+(Oe<16?"0":"")+Ct.call(Oe.toString(16))}function ni(Ce){return"Object("+Ce+")"}function Fi(Ce){return Ce+" { ? }"}function wi(Ce,Oe,Ci,je){return Ce+" ("+Oe+") {"+(je?mi(Ci,je):lt.call(Ci,", "))+"}"}function mi(Ce,Oe){if(0===Ce.length)return"";var Ci="\n"+Oe.prev+Oe.base;return Ci+lt.call(Ce,","+Ci)+"\n"+Oe.prev}function Zi(Ce,Oe){var Ci=Di(Ce),je=[];if(Ci){je.length=Ce.length;for(var Ii=0;Ii<Ce.length;Ii++)je[Ii]=ze(Ce,Ii)?Oe(Ce[Ii],Ce):""}var Ui,_i="function"==typeof ht?ht(Ce):[];if(he){Ui={};for(var $e=0;$e<_i.length;$e++)Ui["$"+_i[$e]]=_i[$e]}for(var fe in Ce)!ze(Ce,fe)||Ci&&String(Number(fe))===fe&&fe<Ce.length||he&&Ui["$"+fe]instanceof Symbol||(ot.call(/[^\w$]/,fe)?je.push(Oe(fe,Ce)+": "+Oe(Ce[fe],Ce)):je.push(fe+": "+Oe(Ce[fe],Ce)));if("function"==typeof ht)for(var kt=0;kt<_i.length;kt++)Nt.call(Ce,_i[kt])&&je.push("["+Oe(_i[kt])+"]: "+Oe(Ce[_i[kt]],Ce));return je}},66352:U=>{"use strict";function $(m,C){return Object.prototype.hasOwnProperty.call(m,C)}U.exports=function(m,C,_,e){_=_||"=";var t={};if("string"!=typeof m||0===m.length)return t;var n=/\+/g;m=m.split(C=C||"&");var r=1e3;e&&"number"==typeof e.maxKeys&&(r=e.maxKeys);var s=m.length;r>0&&s>r&&(s=r);for(var u=0;u<s;++u){var B,Q,at,rt,y=m[u].replace(n,"%20"),x=y.indexOf(_);x>=0?(B=y.substr(0,x),Q=y.substr(x+1)):(B=y,Q=""),at=decodeURIComponent(B),rt=decodeURIComponent(Q),$(t,at)?Array.isArray(t[at])?t[at].push(rt):t[at]=[t[at],rt]:t[at]=rt}return t}},17519:U=>{"use strict";var $=function(m){switch(typeof m){case"string":return m;case"boolean":return m?"true":"false";case"number":return isFinite(m)?m:"";default:return""}};U.exports=function(m,C,_,e){return C=C||"&",_=_||"=",null===m&&(m=void 0),"object"==typeof m?Object.keys(m).map(function(t){var n=encodeURIComponent($(t))+_;return Array.isArray(m[t])?m[t].map(function(r){return n+encodeURIComponent($(r))}).join(C):n+encodeURIComponent($(m[t]))}).join(C):e?encodeURIComponent($(e))+_+encodeURIComponent($(m)):""}},10569:(U,$,m)=>{"use strict";$.decode=$.parse=m(66352),$.encode=$.stringify=m(17519)},43510:U=>{var $=function(m){"use strict";var e,C=Object.prototype,_=C.hasOwnProperty,t="function"==typeof Symbol?Symbol:{},n=t.iterator||"@@iterator",r=t.asyncIterator||"@@asyncIterator",s=t.toStringTag||"@@toStringTag";function u(Mt,Nt,de){return Object.defineProperty(Mt,Nt,{value:de,enumerable:!0,configurable:!0,writable:!0}),Mt[Nt]}try{u({},"")}catch(Mt){u=function(Nt,de,ve){return Nt[de]=ve}}function y(Mt,Nt,de,ve){var Be=Object.create((Nt&&Nt.prototype instanceof Ht?Nt:Ht).prototype),Ne=new ht(ve||[]);return Be._invoke=function(Mt,Nt,de){var ve=B;return function(Be,Ne){if(ve===at)throw new Error("Generator is already running");if(ve===rt){if("throw"===Be)throw Ne;return he()}for(de.method=Be,de.arg=Ne;;){var Qe=de.delegate;if(Qe){var Di=Ut(Qe,de);if(Di){if(Di===St)continue;return Di}}if("next"===de.method)de.sent=de._sent=de.arg;else if("throw"===de.method){if(ve===B)throw ve=rt,de.arg;de.dispatchException(de.arg)}else"return"===de.method&&de.abrupt("return",de.arg);ve=at;var Ze=x(Mt,Nt,de);if("normal"===Ze.type){if(ve=de.done?rt:Q,Ze.arg===St)continue;return{value:Ze.arg,done:de.done}}"throw"===Ze.type&&(ve=rt,de.method="throw",de.arg=Ze.arg)}}}(Mt,de,Ne),Be}function x(Mt,Nt,de){try{return{type:"normal",arg:Mt.call(Nt,de)}}catch(ve){return{type:"throw",arg:ve}}}m.wrap=y;var B="suspendedStart",Q="suspendedYield",at="executing",rt="completed",St={};function Ht(){}function vt(){}function xt(){}var Wt={};u(Wt,n,function(){return this});var Jt=Object.getPrototypeOf,Ct=Jt&&Jt(Jt(nt([])));Ct&&Ct!==C&&_.call(Ct,n)&&(Wt=Ct);var yt=xt.prototype=Ht.prototype=Object.create(Wt);function ot(Mt){["next","throw","return"].forEach(function(Nt){u(Mt,Nt,function(de){return this._invoke(Nt,de)})})}function mt(Mt,Nt){function de(Be,Ne,Qe,Di){var Ze=x(Mt[Be],Mt,Ne);if("throw"!==Ze.type){var Le=Ze.arg,gi=Le.value;return gi&&"object"==typeof gi&&_.call(gi,"__await")?Nt.resolve(gi.__await).then(function(Bt){de("next",Bt,Qe,Di)},function(Bt){de("throw",Bt,Qe,Di)}):Nt.resolve(gi).then(function(Bt){Le.value=Bt,Qe(Le)},function(Bt){return de("throw",Bt,Qe,Di)})}Di(Ze.arg)}var ve;this._invoke=function(Be,Ne){function Qe(){return new Nt(function(Di,Ze){de(Be,Ne,Di,Ze)})}return ve=ve?ve.then(Qe,Qe):Qe()}}function Ut(Mt,Nt){var de=Mt.iterator[Nt.method];if(de===e){if(Nt.delegate=null,"throw"===Nt.method){if(Mt.iterator.return&&(Nt.method="return",Nt.arg=e,Ut(Mt,Nt),"throw"===Nt.method))return St;Nt.method="throw",Nt.arg=new TypeError("The iterator does not provide a 'throw' method")}return St}var ve=x(de,Mt.iterator,Nt.arg);if("throw"===ve.type)return Nt.method="throw",Nt.arg=ve.arg,Nt.delegate=null,St;var ue=ve.arg;return ue?ue.done?(Nt[Mt.resultName]=ue.value,Nt.next=Mt.nextLoc,"return"!==Nt.method&&(Nt.method="next",Nt.arg=e),Nt.delegate=null,St):ue:(Nt.method="throw",Nt.arg=new TypeError("iterator result is not an object"),Nt.delegate=null,St)}function Rt(Mt){var Nt={tryLoc:Mt[0]};1 in Mt&&(Nt.catchLoc=Mt[1]),2 in Mt&&(Nt.finallyLoc=Mt[2],Nt.afterLoc=Mt[3]),this.tryEntries.push(Nt)}function Et(Mt){var Nt=Mt.completion||{};Nt.type="normal",delete Nt.arg,Mt.completion=Nt}function ht(Mt){this.tryEntries=[{tryLoc:"root"}],Mt.forEach(Rt,this),this.reset(!0)}function nt(Mt){if(Mt){var Nt=Mt[n];if(Nt)return Nt.call(Mt);if("function"==typeof Mt.next)return Mt;if(!isNaN(Mt.length)){var de=-1,ve=function ue(){for(;++de<Mt.length;)if(_.call(Mt,de))return ue.value=Mt[de],ue.done=!1,ue;return ue.value=e,ue.done=!0,ue};return ve.next=ve}}return{next:he}}function he(){return{value:e,done:!0}}return vt.prototype=xt,u(yt,"constructor",xt),u(xt,"constructor",vt),vt.displayName=u(xt,s,"GeneratorFunction"),m.isGeneratorFunction=function(Mt){var Nt="function"==typeof Mt&&Mt.constructor;return!!Nt&&(Nt===vt||"GeneratorFunction"===(Nt.displayName||Nt.name))},m.mark=function(Mt){return Object.setPrototypeOf?Object.setPrototypeOf(Mt,xt):(Mt.__proto__=xt,u(Mt,s,"GeneratorFunction")),Mt.prototype=Object.create(yt),Mt},m.awrap=function(Mt){return{__await:Mt}},ot(mt.prototype),u(mt.prototype,r,function(){return this}),m.AsyncIterator=mt,m.async=function(Mt,Nt,de,ve,ue){void 0===ue&&(ue=Promise);var Be=new mt(y(Mt,Nt,de,ve),ue);return m.isGeneratorFunction(Nt)?Be:Be.next().then(function(Ne){return Ne.done?Ne.value:Be.next()})},ot(yt),u(yt,s,"Generator"),u(yt,n,function(){return this}),u(yt,"toString",function(){return"[object Generator]"}),m.keys=function(Mt){var Nt=[];for(var de in Mt)Nt.push(de);return Nt.reverse(),function ve(){for(;Nt.length;){var ue=Nt.pop();if(ue in Mt)return ve.value=ue,ve.done=!1,ve}return ve.done=!0,ve}},m.values=nt,ht.prototype={constructor:ht,reset:function(Mt){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(Et),!Mt)for(var Nt in this)"t"===Nt.charAt(0)&&_.call(this,Nt)&&!isNaN(+Nt.slice(1))&&(this[Nt]=e)},stop:function(){this.done=!0;var Nt=this.tryEntries[0].completion;if("throw"===Nt.type)throw Nt.arg;return this.rval},dispatchException:function(Mt){if(this.done)throw Mt;var Nt=this;function de(Di,Ze){return Be.type="throw",Be.arg=Mt,Nt.next=Di,Ze&&(Nt.method="next",Nt.arg=e),!!Ze}for(var ve=this.tryEntries.length-1;ve>=0;--ve){var ue=this.tryEntries[ve],Be=ue.completion;if("root"===ue.tryLoc)return de("end");if(ue.tryLoc<=this.prev){var Ne=_.call(ue,"catchLoc"),Qe=_.call(ue,"finallyLoc");if(Ne&&Qe){if(this.prev<ue.catchLoc)return de(ue.catchLoc,!0);if(this.prev<ue.finallyLoc)return de(ue.finallyLoc)}else if(Ne){if(this.prev<ue.catchLoc)return de(ue.catchLoc,!0)}else{if(!Qe)throw new Error("try statement without catch or finally");if(this.prev<ue.finallyLoc)return de(ue.finallyLoc)}}}},abrupt:function(Mt,Nt){for(var de=this.tryEntries.length-1;de>=0;--de){var ve=this.tryEntries[de];if(ve.tryLoc<=this.prev&&_.call(ve,"finallyLoc")&&this.prev<ve.finallyLoc){var ue=ve;break}}ue&&("break"===Mt||"continue"===Mt)&&ue.tryLoc<=Nt&&Nt<=ue.finallyLoc&&(ue=null);var Be=ue?ue.completion:{};return Be.type=Mt,Be.arg=Nt,ue?(this.method="next",this.next=ue.finallyLoc,St):this.complete(Be)},complete:function(Mt,Nt){if("throw"===Mt.type)throw Mt.arg;return"break"===Mt.type||"continue"===Mt.type?this.next=Mt.arg:"return"===Mt.type?(this.rval=this.arg=Mt.arg,this.method="return",this.next="end"):"normal"===Mt.type&&Nt&&(this.next=Nt),St},finish:function(Mt){for(var Nt=this.tryEntries.length-1;Nt>=0;--Nt){var de=this.tryEntries[Nt];if(de.finallyLoc===Mt)return this.complete(de.completion,de.afterLoc),Et(de),St}},catch:function(Mt){for(var Nt=this.tryEntries.length-1;Nt>=0;--Nt){var de=this.tryEntries[Nt];if(de.tryLoc===Mt){var ve=de.completion;if("throw"===ve.type){var ue=ve.arg;Et(de)}return ue}}throw new Error("illegal catch attempt")},delegateYield:function(Mt,Nt,de){return this.delegate={iterator:nt(Mt),resultName:Nt,nextLoc:de},"next"===this.method&&(this.arg=e),St}},m}(U.exports);try{regeneratorRuntime=$}catch(m){"object"==typeof globalThis?globalThis.regeneratorRuntime=$:Function("r","regeneratorRuntime = r")($)}},83030:(U,$,m)=>{"use strict";var C=m(23141),_=m(72167),e=m(50847),t=C("%TypeError%"),n=C("%WeakMap%",!0),r=C("%Map%",!0),s=_("WeakMap.prototype.get",!0),u=_("WeakMap.prototype.set",!0),y=_("WeakMap.prototype.has",!0),x=_("Map.prototype.get",!0),B=_("Map.prototype.set",!0),Q=_("Map.prototype.has",!0),at=function(vt,xt){for(var Jt,Wt=vt;null!==(Jt=Wt.next);Wt=Jt)if(Jt.key===xt)return Wt.next=Jt.next,Jt.next=vt.next,vt.next=Jt,Jt};U.exports=function(){var xt,Wt,Jt,Ct={assert:function(yt){if(!Ct.has(yt))throw new t("Side channel does not contain "+e(yt))},get:function(yt){if(n&&yt&&("object"==typeof yt||"function"==typeof yt)){if(xt)return s(xt,yt)}else if(r){if(Wt)return x(Wt,yt)}else if(Jt)return function(vt,xt){var Wt=at(vt,xt);return Wt&&Wt.value}(Jt,yt)},has:function(yt){if(n&&yt&&("object"==typeof yt||"function"==typeof yt)){if(xt)return y(xt,yt)}else if(r){if(Wt)return Q(Wt,yt)}else if(Jt)return function(vt,xt){return!!at(vt,xt)}(Jt,yt);return!1},set:function(yt,ot){n&&yt&&("object"==typeof yt||"function"==typeof yt)?(xt||(xt=new n),u(xt,yt,ot)):r?(Wt||(Wt=new r),B(Wt,yt,ot)):(Jt||(Jt={key:{},next:null}),function(vt,xt,Wt){var Jt=at(vt,xt);Jt?Jt.value=Wt:vt.next={key:xt,next:vt.next,value:Wt}}(Jt,yt,ot))}};return Ct}},10695:(U,$,m)=>{"use strict";m.r($),m.d($,{default:()=>as,helpers:()=>ks});var C={};m.r(C),m.d(C,{JsonPatchError:()=>Po,_areEquals:()=>pl,applyOperation:()=>Wa,applyPatch:()=>Js,applyReducer:()=>uc,deepClone:()=>Tc,getValueByPointer:()=>cc,validate:()=>Jo,validator:()=>dl});var _={};m.r(_),m.d(_,{compare:()=>il,generate:()=>Sc,observe:()=>jl,unobserve:()=>Fl});var e={};m.r(e),m.d(e,{cookie:()=>Kt,header:()=>Vt,path:()=>Y,query:()=>ut});var t=m(90986),n=m(96915),r=m(40715),s=m(77901),u=m(88577),y=m(95942),x=m(46188),B=m(8797);function Q(S,H,j){return H in S?B(S,H,{value:j,enumerable:!0,configurable:!0,writable:!0}):S[H]=j,S}function at(S,H){var j=t(S);if(n){var et=n(S);H&&(et=r(et).call(et,function(ft){return s(S,ft).enumerable})),j.push.apply(j,et)}return j}function rt(S){for(var H=1;H<arguments.length;H++){var j,et,ft=null!=arguments[H]?arguments[H]:{};H%2?u(j=at(Object(ft),!0)).call(j,function(Yt){Q(S,Yt,ft[Yt])}):y?x(S,y(ft)):u(et=at(Object(ft))).call(et,function(Yt){B(S,Yt,s(ft,Yt))})}return S}var St=m(12782),Ht=m.n(St),vt=m(81836),xt=m.n(vt),Wt=m(20434),Jt=m(45698),Ct=m(92909),yt=m(10278),ot=m(48735),mt=m(49067);function lt(S,H){(null==H||H>S.length)&&(H=S.length);for(var j=0,et=new Array(H);j<H;j++)et[j]=S[j];return et}function Ut(S,H){var j;if(S){if("string"==typeof S)return lt(S,H);var et=ot(j=Object.prototype.toString.call(S)).call(j,8,-1);if("Object"===et&&S.constructor&&(et=S.constructor.name),"Map"===et||"Set"===et)return mt(S);if("Arguments"===et||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(et))return lt(S,H)}}function Rt(S,H){var j=void 0!==Jt&&Ct(S)||S["@@iterator"];if(!j){if(yt(S)||(j=Ut(S))||H&&S&&"number"==typeof S.length){j&&(S=j);var et=0,ft=function(){};return{s:ft,n:function(){return et>=S.length?{done:!0}:{done:!1,value:S[et++]}},e:function(Re){throw Re},f:ft}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var re,Yt=!0,jt=!1;return{s:function(){j=j.call(S)},n:function(){var Re=j.next();return Yt=Re.done,Re},e:function(Re){jt=!0,re=Re},f:function(){try{!Yt&&null!=j.return&&j.return()}finally{if(jt)throw re}}}}var Et=m(48972);function ht(S){return(ht="function"==typeof Jt&&"symbol"==typeof Et?function(H){return typeof H}:function(H){return H&&"function"==typeof Jt&&H.constructor===Jt&&H!==Jt.prototype?"symbol":typeof H})(S)}function Nt(S,H){return function(S){if(yt(S))return S}(S)||function(S,H){var j=null==S?null:void 0!==Jt&&Ct(S)||S["@@iterator"];if(null!=j){var jt,re,et=[],ft=!0,Yt=!1;try{for(j=j.call(S);!(ft=(jt=j.next()).done)&&(et.push(jt.value),!H||et.length!==H);ft=!0);}catch(Se){Yt=!0,re=Se}finally{try{!ft&&null!=j.return&&j.return()}finally{if(Yt)throw re}}return et}}(S,H)||Ut(S,H)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var de=m(62917);function ve(S,H,j,et,ft,Yt,jt){try{var re=S[Yt](jt),Se=re.value}catch(Re){return void j(Re)}re.done?H(Se):de.resolve(Se).then(et,ft)}function ue(S){return function(){var H=this,j=arguments;return new de(function(et,ft){var Yt=S.apply(H,j);function jt(Se){ve(Yt,et,ft,jt,re,"next",Se)}function re(Se){ve(Yt,et,ft,jt,re,"throw",Se)}jt(void 0)})}}var Be=m(59680),Ne=m.n(Be),Qe=m(40750),Di=m.n(Qe),Ze=m(20036),Le=m.n(Ze),gi=m(70433),Bt=m.n(gi),Te=m(25710),$t=m.n(Te),_e=m(55742),At=m.n(_e),pe=m(32472),ze=m.n(pe),hi=m(82476),Ie=m.n(hi),te=m(27733),ee=m.n(te),ke=m(55672),ne=m.n(ke),ye=(m(76400),m(7029)),Zt=m.n(ye);function ce(S){return null==S}var je={isNothing:ce,isObject:function(S){return"object"==typeof S&&null!==S},toArray:function(S){return Array.isArray(S)?S:ce(S)?[]:[S]},repeat:function(S,H){var et,j="";for(et=0;et<H;et+=1)j+=S;return j},isNegativeZero:function(S){return 0===S&&Number.NEGATIVE_INFINITY===1/S},extend:function(S,H){var j,et,ft,Yt;if(H)for(j=0,et=(Yt=Object.keys(H)).length;j<et;j+=1)S[ft=Yt[j]]=H[ft];return S}};function Ii(S,H){var j="",et=S.reason||"(unknown reason)";return S.mark?(S.mark.name&&(j+='in "'+S.mark.name+'" '),j+="("+(S.mark.line+1)+":"+(S.mark.column+1)+")",!H&&S.mark.snippet&&(j+="\n\n"+S.mark.snippet),et+" "+j):et}function _i(S,H){Error.call(this),this.name="YAMLException",this.reason=S,this.mark=H,this.message=Ii(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack||""}(_i.prototype=Object.create(Error.prototype)).constructor=_i,_i.prototype.toString=function(H){return this.name+": "+Ii(this,H)};var Ui=_i;function $e(S,H,j,et,ft){var Yt="",jt="",re=Math.floor(ft/2)-1;return et-H>re&&(H=et-re+(Yt=" ... ").length),j-et>re&&(j=et+re-(jt=" ...").length),{str:Yt+S.slice(H,j).replace(/\t/g,"\u2192")+jt,pos:et-H+Yt.length}}function fe(S,H){return je.repeat(" ",H-S.length)+S}var Lt=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],ae=["scalar","sequence","mapping"],Qi=function(S,H){if(H=H||{},Object.keys(H).forEach(function(j){if(-1===Lt.indexOf(j))throw new Ui('Unknown option "'+j+'" is met in definition of "'+S+'" YAML type.')}),this.options=H,this.tag=S,this.kind=H.kind||null,this.resolve=H.resolve||function(){return!0},this.construct=H.construct||function(j){return j},this.instanceOf=H.instanceOf||null,this.predicate=H.predicate||null,this.represent=H.represent||null,this.representName=H.representName||null,this.defaultStyle=H.defaultStyle||null,this.multi=H.multi||!1,this.styleAliases=function(S){var H={};return null!==S&&Object.keys(S).forEach(function(j){S[j].forEach(function(et){H[String(et)]=j})}),H}(H.styleAliases||null),-1===ae.indexOf(this.kind))throw new Ui('Unknown kind "'+this.kind+'" is specified for "'+S+'" YAML type.')};function yn(S,H){var j=[];return S[H].forEach(function(et){var ft=j.length;j.forEach(function(Yt,jt){Yt.tag===et.tag&&Yt.kind===et.kind&&Yt.multi===et.multi&&(ft=jt)}),j[ft]=et}),j}function li(S){return this.extend(S)}li.prototype.extend=function(H){var j=[],et=[];if(H instanceof Qi)et.push(H);else if(Array.isArray(H))et=et.concat(H);else{if(!H||!Array.isArray(H.implicit)&&!Array.isArray(H.explicit))throw new Ui("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");H.implicit&&(j=j.concat(H.implicit)),H.explicit&&(et=et.concat(H.explicit))}j.forEach(function(Yt){if(!(Yt instanceof Qi))throw new Ui("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(Yt.loadKind&&"scalar"!==Yt.loadKind)throw new Ui("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(Yt.multi)throw new Ui("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),et.forEach(function(Yt){if(!(Yt instanceof Qi))throw new Ui("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var ft=Object.create(li.prototype);return ft.implicit=(this.implicit||[]).concat(j),ft.explicit=(this.explicit||[]).concat(et),ft.compiledImplicit=yn(ft,"implicit"),ft.compiledExplicit=yn(ft,"explicit"),ft.compiledTypeMap=function(){var H,j,S={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}};function et(ft){ft.multi?(S.multi[ft.kind].push(ft),S.multi.fallback.push(ft)):S[ft.kind][ft.tag]=S.fallback[ft.tag]=ft}for(H=0,j=arguments.length;H<j;H+=1)arguments[H].forEach(et);return S}(ft.compiledImplicit,ft.compiledExplicit),ft};var Je=li,xe=new Qi("tag:yaml.org,2002:str",{kind:"scalar",construct:function(S){return null!==S?S:""}}),ui=new Qi("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(S){return null!==S?S:[]}}),ki=new Qi("tag:yaml.org,2002:map",{kind:"mapping",construct:function(S){return null!==S?S:{}}}),fn=new Je({explicit:[xe,ui,ki]}),eo=new Qi("tag:yaml.org,2002:null",{kind:"scalar",resolve:function(S){if(null===S)return!0;var H=S.length;return 1===H&&"~"===S||4===H&&("null"===S||"Null"===S||"NULL"===S)},construct:function(){return null},predicate:function(S){return null===S},represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"}),ur=new Qi("tag:yaml.org,2002:bool",{kind:"scalar",resolve:function(S){if(null===S)return!1;var H=S.length;return 4===H&&("true"===S||"True"===S||"TRUE"===S)||5===H&&("false"===S||"False"===S||"FALSE"===S)},construct:function(S){return"true"===S||"True"===S||"TRUE"===S},predicate:function(S){return"[object Boolean]"===Object.prototype.toString.call(S)},represent:{lowercase:function(S){return S?"true":"false"},uppercase:function(S){return S?"TRUE":"FALSE"},camelcase:function(S){return S?"True":"False"}},defaultStyle:"lowercase"});function Mo(S){return 48<=S&&S<=57||65<=S&&S<=70||97<=S&&S<=102}function sr(S){return 48<=S&&S<=55}function Ai(S){return 48<=S&&S<=57}var pr=new Qi("tag:yaml.org,2002:int",{kind:"scalar",resolve:function(S){if(null===S)return!1;var ft,H=S.length,j=0,et=!1;if(!H)return!1;if(("-"===(ft=S[j])||"+"===ft)&&(ft=S[++j]),"0"===ft){if(j+1===H)return!0;if("b"===(ft=S[++j])){for(j++;j<H;j++)if("_"!==(ft=S[j])){if("0"!==ft&&"1"!==ft)return!1;et=!0}return et&&"_"!==ft}if("x"===ft){for(j++;j<H;j++)if("_"!==(ft=S[j])){if(!Mo(S.charCodeAt(j)))return!1;et=!0}return et&&"_"!==ft}if("o"===ft){for(j++;j<H;j++)if("_"!==(ft=S[j])){if(!sr(S.charCodeAt(j)))return!1;et=!0}return et&&"_"!==ft}}if("_"===ft)return!1;for(;j<H;j++)if("_"!==(ft=S[j])){if(!Ai(S.charCodeAt(j)))return!1;et=!0}return!(!et||"_"===ft)},construct:function(S){var et,H=S,j=1;if(-1!==H.indexOf("_")&&(H=H.replace(/_/g,"")),("-"===(et=H[0])||"+"===et)&&("-"===et&&(j=-1),et=(H=H.slice(1))[0]),"0"===H)return 0;if("0"===et){if("b"===H[1])return j*parseInt(H.slice(2),2);if("x"===H[1])return j*parseInt(H.slice(2),16);if("o"===H[1])return j*parseInt(H.slice(2),8)}return j*parseInt(H,10)},predicate:function(S){return"[object Number]"===Object.prototype.toString.call(S)&&S%1==0&&!je.isNegativeZero(S)},represent:{binary:function(S){return S>=0?"0b"+S.toString(2):"-0b"+S.toString(2).slice(1)},octal:function(S){return S>=0?"0o"+S.toString(8):"-0o"+S.toString(8).slice(1)},decimal:function(S){return S.toString(10)},hexadecimal:function(S){return S>=0?"0x"+S.toString(16).toUpperCase():"-0x"+S.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),Dr=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$"),Vi=/^[-+]?[0-9]+e/,oe=new Qi("tag:yaml.org,2002:float",{kind:"scalar",resolve:function(S){return!(null===S||!Dr.test(S)||"_"===S[S.length-1])},construct:function(S){var H,j;return j="-"===(H=S.replace(/_/g,"").toLowerCase())[0]?-1:1,"+-".indexOf(H[0])>=0&&(H=H.slice(1)),".inf"===H?1===j?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:".nan"===H?NaN:j*parseFloat(H,10)},predicate:function(S){return"[object Number]"===Object.prototype.toString.call(S)&&(S%1!=0||je.isNegativeZero(S))},represent:function(S,H){var j;if(isNaN(S))switch(H){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===S)switch(H){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===S)switch(H){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(je.isNegativeZero(S))return"-0.0";return j=S.toString(10),Vi.test(j)?j.replace("e",".e"):j},defaultStyle:"lowercase"}),He=fn.extend({implicit:[eo,ur,pr,oe]}),Oi=He,Ji=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),Yi=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$"),Fn=new Qi("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:function(S){return null!==S&&(null!==Ji.exec(S)||null!==Yi.exec(S))},construct:function(S){var H,j,et,ft,Yt,jt,re,pi,Se=0,Re=null;if(null===(H=Ji.exec(S))&&(H=Yi.exec(S)),null===H)throw new Error("Date resolve error");if(j=+H[1],et=+H[2]-1,ft=+H[3],!H[4])return new Date(Date.UTC(j,et,ft));if(Yt=+H[4],jt=+H[5],re=+H[6],H[7]){for(Se=H[7].slice(0,3);Se.length<3;)Se+="0";Se=+Se}return H[9]&&(Re=6e4*(60*+H[10]+ +(H[11]||0)),"-"===H[9]&&(Re=-Re)),pi=new Date(Date.UTC(j,et,ft,Yt,jt,re,Se)),Re&&pi.setTime(pi.getTime()-Re),pi},instanceOf:Date,represent:function(S){return S.toISOString()}}),jo=new Qi("tag:yaml.org,2002:merge",{kind:"scalar",resolve:function(S){return"<<"===S||null===S}}),ro="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\n\r",Jr=new Qi("tag:yaml.org,2002:binary",{kind:"scalar",resolve:function(S){if(null===S)return!1;var H,j,et=0,ft=S.length,Yt=ro;for(j=0;j<ft;j++)if(!((H=Yt.indexOf(S.charAt(j)))>64)){if(H<0)return!1;et+=6}return et%8==0},construct:function(S){var H,j,et=S.replace(/[\r\n=]/g,""),ft=et.length,Yt=ro,jt=0,re=[];for(H=0;H<ft;H++)H%4==0&&H&&(re.push(jt>>16&255),re.push(jt>>8&255),re.push(255&jt)),jt=jt<<6|Yt.indexOf(et.charAt(H));return 0==(j=ft%4*6)?(re.push(jt>>16&255),re.push(jt>>8&255),re.push(255&jt)):18===j?(re.push(jt>>10&255),re.push(jt>>2&255)):12===j&&re.push(jt>>4&255),new Uint8Array(re)},predicate:function(S){return"[object Uint8Array]"===Object.prototype.toString.call(S)},represent:function(S){var et,ft,H="",j=0,Yt=S.length,jt=ro;for(et=0;et<Yt;et++)et%3==0&&et&&(H+=jt[j>>18&63],H+=jt[j>>12&63],H+=jt[j>>6&63],H+=jt[63&j]),j=(j<<8)+S[et];return 0==(ft=Yt%3)?(H+=jt[j>>18&63],H+=jt[j>>12&63],H+=jt[j>>6&63],H+=jt[63&j]):2===ft?(H+=jt[j>>10&63],H+=jt[j>>4&63],H+=jt[j<<2&63],H+=jt[64]):1===ft&&(H+=jt[j>>2&63],H+=jt[j<<4&63],H+=jt[64],H+=jt[64]),H}}),Ss=Object.prototype.hasOwnProperty,ws=Object.prototype.toString,ns=new Qi("tag:yaml.org,2002:omap",{kind:"sequence",resolve:function(S){if(null===S)return!0;var j,et,ft,Yt,jt,H=[],re=S;for(j=0,et=re.length;j<et;j+=1){if(jt=!1,"[object Object]"!==ws.call(ft=re[j]))return!1;for(Yt in ft)if(Ss.call(ft,Yt)){if(jt)return!1;jt=!0}if(!jt)return!1;if(-1!==H.indexOf(Yt))return!1;H.push(Yt)}return!0},construct:function(S){return null!==S?S:[]}}),Ho=Object.prototype.toString,Ka=new Qi("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:function(S){if(null===S)return!0;var H,j,et,ft,Yt,jt=S;for(Yt=new Array(jt.length),H=0,j=jt.length;H<j;H+=1){if("[object Object]"!==Ho.call(et=jt[H])||1!==(ft=Object.keys(et)).length)return!1;Yt[H]=[ft[0],et[ft[0]]]}return!0},construct:function(S){if(null===S)return[];var H,j,et,ft,Yt,jt=S;for(Yt=new Array(jt.length),H=0,j=jt.length;H<j;H+=1)et=jt[H],ft=Object.keys(et),Yt[H]=[ft[0],et[ft[0]]];return Yt}}),Qo=Object.prototype.hasOwnProperty,Fs=new Qi("tag:yaml.org,2002:set",{kind:"mapping",resolve:function(S){if(null===S)return!0;var H,j=S;for(H in j)if(Qo.call(j,H)&&null!==j[H])return!1;return!0},construct:function(S){return null!==S?S:{}}}),Pa=Oi.extend({implicit:[Fn,jo],explicit:[Jr,ns,Ka,Fs]}),Bs=Object.prototype.hasOwnProperty,yo=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,Hs=/[\x85\u2028\u2029]/,Xo=/[,\[\]\{\}]/,Rs=/^(?:!|!!|![a-z\-]+!)$/i,zo=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function xo(S){return Object.prototype.toString.call(S)}function Eo(S){return 10===S||13===S}function Ds(S){return 9===S||32===S}function lo(S){return 9===S||32===S||10===S||13===S}function gs(S){return 44===S||91===S||93===S||123===S||125===S}function Lr(S){var H;return 48<=S&&S<=57?S-48:97<=(H=32|S)&&H<=102?H-97+10:-1}function aa(S){return 120===S?2:117===S?4:85===S?8:0}function jr(S){return 48<=S&&S<=57?S-48:-1}function la(S){return 48===S?"\0":97===S?"\x07":98===S?"\b":116===S||9===S?"\t":110===S?"\n":118===S?"\v":102===S?"\f":114===S?"\r":101===S?"\x1b":32===S?" ":34===S?'"':47===S?"/":92===S?"\\":78===S?"\x85":95===S?"\xa0":76===S?"\u2028":80===S?"\u2029":""}function vl(S){return S<=65535?String.fromCharCode(S):String.fromCharCode(55296+(S-65536>>10),56320+(S-65536&1023))}for(var us=new Array(256),Ko=new Array(256),ms=0;ms<256;ms++)us[ms]=la(ms)?1:0,Ko[ms]=la(ms);function bl(S,H){this.input=S,this.filename=H.filename||null,this.schema=H.schema||Pa,this.onWarning=H.onWarning||null,this.legacy=H.legacy||!1,this.json=H.json||!1,this.listener=H.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=S.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function Nr(S,H){var j={name:S.filename,buffer:S.input.slice(0,-1),position:S.position,line:S.line,column:S.position-S.lineStart};return j.snippet=function(S,H){if(H=Object.create(H||null),!S.buffer)return null;H.maxLength||(H.maxLength=79),"number"!=typeof H.indent&&(H.indent=1),"number"!=typeof H.linesBefore&&(H.linesBefore=3),"number"!=typeof H.linesAfter&&(H.linesAfter=2);for(var Yt,j=/\r?\n|\r|\0/g,et=[0],ft=[],jt=-1;Yt=j.exec(S.buffer);)ft.push(Yt.index),et.push(Yt.index+Yt[0].length),S.position<=Yt.index&&jt<0&&(jt=et.length-2);jt<0&&(jt=et.length-1);var Se,Re,re="",ri=Math.min(S.line+H.linesAfter,ft.length).toString().length,ai=H.maxLength-(H.indent+ri+3);for(Se=1;Se<=H.linesBefore&&!(jt-Se<0);Se++)Re=$e(S.buffer,et[jt-Se],ft[jt-Se],S.position-(et[jt]-et[jt-Se]),ai),re=je.repeat(" ",H.indent)+fe((S.line-Se+1).toString(),ri)+" | "+Re.str+"\n"+re;for(Re=$e(S.buffer,et[jt],ft[jt],S.position,ai),re+=je.repeat(" ",H.indent)+fe((S.line+1).toString(),ri)+" | "+Re.str+"\n",re+=je.repeat("-",H.indent+ri+3+Re.pos)+"^\n",Se=1;Se<=H.linesAfter&&!(jt+Se>=ft.length);Se++)Re=$e(S.buffer,et[jt+Se],ft[jt+Se],S.position-(et[jt]-et[jt+Se]),ai),re+=je.repeat(" ",H.indent)+fe((S.line+Se+1).toString(),ri)+" | "+Re.str+"\n";return re.replace(/\n$/,"")}(j),new Ui(H,j)}function xn(S,H){throw Nr(S,H)}function _a(S,H){S.onWarning&&S.onWarning.call(null,Nr(S,H))}var Ot={YAML:function(H,j,et){var ft,Yt,jt;null!==H.version&&xn(H,"duplication of %YAML directive"),1!==et.length&&xn(H,"YAML directive accepts exactly one argument"),null===(ft=/^([0-9]+)\.([0-9]+)$/.exec(et[0]))&&xn(H,"ill-formed argument of the YAML directive"),Yt=parseInt(ft[1],10),jt=parseInt(ft[2],10),1!==Yt&&xn(H,"unacceptable YAML version of the document"),H.version=et[0],H.checkLineBreaks=jt<2,1!==jt&&2!==jt&&_a(H,"unsupported YAML version of the document")},TAG:function(H,j,et){var ft,Yt;2!==et.length&&xn(H,"TAG directive accepts exactly two arguments"),Yt=et[1],Rs.test(ft=et[0])||xn(H,"ill-formed tag handle (first argument) of the TAG directive"),Bs.call(H.tagMap,ft)&&xn(H,'there is a previously declared suffix for "'+ft+'" tag handle'),zo.test(Yt)||xn(H,"ill-formed tag prefix (second argument) of the TAG directive");try{Yt=decodeURIComponent(Yt)}catch(jt){xn(H,"tag prefix is malformed: "+Yt)}H.tagMap[ft]=Yt}};function Z(S,H,j,et){var ft,Yt,jt,re;if(H<j){if(re=S.input.slice(H,j),et)for(ft=0,Yt=re.length;ft<Yt;ft+=1)9===(jt=re.charCodeAt(ft))||32<=jt&&jt<=1114111||xn(S,"expected valid JSON character");else yo.test(re)&&xn(S,"the stream contains non-printable characters");S.result+=re}}function V(S,H,j,et){var ft,Yt,jt,re;for(je.isObject(j)||xn(S,"cannot merge mappings; the provided source object is unacceptable"),jt=0,re=(ft=Object.keys(j)).length;jt<re;jt+=1)Bs.call(H,Yt=ft[jt])||(H[Yt]=j[Yt],et[Yt]=!0)}function z(S,H,j,et,ft,Yt,jt,re,Se){var Re,ri;if(Array.isArray(ft))for(Re=0,ri=(ft=Array.prototype.slice.call(ft)).length;Re<ri;Re+=1)Array.isArray(ft[Re])&&xn(S,"nested arrays are not supported inside keys"),"object"==typeof ft&&"[object Object]"===xo(ft[Re])&&(ft[Re]="[object Object]");if("object"==typeof ft&&"[object Object]"===xo(ft)&&(ft="[object Object]"),ft=String(ft),null===H&&(H={}),"tag:yaml.org,2002:merge"===et)if(Array.isArray(Yt))for(Re=0,ri=Yt.length;Re<ri;Re+=1)V(S,H,Yt[Re],j);else V(S,H,Yt,j);else!S.json&&!Bs.call(j,ft)&&Bs.call(H,ft)&&(S.line=jt||S.line,S.lineStart=re||S.lineStart,S.position=Se||S.position,xn(S,"duplicated mapping key")),"__proto__"===ft?Object.defineProperty(H,ft,{configurable:!0,enumerable:!0,writable:!0,value:Yt}):H[ft]=Yt,delete j[ft];return H}function It(S){var H;10===(H=S.input.charCodeAt(S.position))?S.position++:13===H?(S.position++,10===S.input.charCodeAt(S.position)&&S.position++):xn(S,"a line break is expected"),S.line+=1,S.lineStart=S.position,S.firstTabInLine=-1}function Fe(S,H,j){for(var et=0,ft=S.input.charCodeAt(S.position);0!==ft;){for(;Ds(ft);)9===ft&&-1===S.firstTabInLine&&(S.firstTabInLine=S.position),ft=S.input.charCodeAt(++S.position);if(H&&35===ft)do{ft=S.input.charCodeAt(++S.position)}while(10!==ft&&13!==ft&&0!==ft);if(!Eo(ft))break;for(It(S),ft=S.input.charCodeAt(S.position),et++,S.lineIndent=0;32===ft;)S.lineIndent++,ft=S.input.charCodeAt(++S.position)}return-1!==j&&0!==et&&S.lineIndent<j&&_a(S,"deficient indentation"),et}function bi(S){var j,H=S.position;return!(45!==(j=S.input.charCodeAt(H))&&46!==j||j!==S.input.charCodeAt(H+1)||j!==S.input.charCodeAt(H+2)||(H+=3,j=S.input.charCodeAt(H),0!==j&&!lo(j)))}function cn(S,H){1===H?S.result+=" ":H>1&&(S.result+=je.repeat("\n",H-1))}function hr(S,H){var j,Se,et=S.tag,ft=S.anchor,Yt=[],re=!1;if(-1!==S.firstTabInLine)return!1;for(null!==S.anchor&&(S.anchorMap[S.anchor]=Yt),Se=S.input.charCodeAt(S.position);0!==Se&&(-1!==S.firstTabInLine&&(S.position=S.firstTabInLine,xn(S,"tab characters must not be used in indentation")),45===Se&&lo(S.input.charCodeAt(S.position+1)));)if(re=!0,S.position++,Fe(S,!0,-1)&&S.lineIndent<=H)Yt.push(null),Se=S.input.charCodeAt(S.position);else if(j=S.line,ts(S,H,3,!1,!0),Yt.push(S.result),Fe(S,!0,-1),Se=S.input.charCodeAt(S.position),(S.line===j||S.lineIndent>H)&&0!==Se)xn(S,"bad indentation of a sequence entry");else if(S.lineIndent<H)break;return!!re&&(S.tag=et,S.anchor=ft,S.kind="sequence",S.result=Yt,!0)}function Hn(S){var H,ft,Yt,jt,j=!1,et=!1;if(33!==(jt=S.input.charCodeAt(S.position)))return!1;if(null!==S.tag&&xn(S,"duplication of a tag property"),60===(jt=S.input.charCodeAt(++S.position))?(j=!0,jt=S.input.charCodeAt(++S.position)):33===jt?(et=!0,ft="!!",jt=S.input.charCodeAt(++S.position)):ft="!",H=S.position,j){do{jt=S.input.charCodeAt(++S.position)}while(0!==jt&&62!==jt);S.position<S.length?(Yt=S.input.slice(H,S.position),jt=S.input.charCodeAt(++S.position)):xn(S,"unexpected end of the stream within a verbatim tag")}else{for(;0!==jt&&!lo(jt);)33===jt&&(et?xn(S,"tag suffix cannot contain exclamation marks"):(ft=S.input.slice(H-1,S.position+1),Rs.test(ft)||xn(S,"named tag handle cannot contain such characters"),et=!0,H=S.position+1)),jt=S.input.charCodeAt(++S.position);Yt=S.input.slice(H,S.position),Xo.test(Yt)&&xn(S,"tag suffix cannot contain flow indicator characters")}Yt&&!zo.test(Yt)&&xn(S,"tag name cannot contain such characters: "+Yt);try{Yt=decodeURIComponent(Yt)}catch(re){xn(S,"tag name is malformed: "+Yt)}return j?S.tag=Yt:Bs.call(S.tagMap,ft)?S.tag=S.tagMap[ft]+Yt:"!"===ft?S.tag="!"+Yt:"!!"===ft?S.tag="tag:yaml.org,2002:"+Yt:xn(S,'undeclared tag handle "'+ft+'"'),!0}function Us(S){var H,j;if(38!==(j=S.input.charCodeAt(S.position)))return!1;for(null!==S.anchor&&xn(S,"duplication of an anchor property"),j=S.input.charCodeAt(++S.position),H=S.position;0!==j&&!lo(j)&&!gs(j);)j=S.input.charCodeAt(++S.position);return S.position===H&&xn(S,"name of an anchor node must contain at least one character"),S.anchor=S.input.slice(H,S.position),!0}function ts(S,H,j,et,ft){var Yt,jt,re,ai,pi,Ri,ji,nn,rn,Se=1,Re=!1,ri=!1;if(null!==S.listener&&S.listener("open",S),S.tag=null,S.anchor=null,S.kind=null,S.result=null,Yt=jt=re=4===j||3===j,et&&Fe(S,!0,-1)&&(Re=!0,S.lineIndent>H?Se=1:S.lineIndent===H?Se=0:S.lineIndent<H&&(Se=-1)),1===Se)for(;Hn(S)||Us(S);)Fe(S,!0,-1)?(Re=!0,re=Yt,S.lineIndent>H?Se=1:S.lineIndent===H?Se=0:S.lineIndent<H&&(Se=-1)):re=!1;if(re&&(re=Re||ft),(1===Se||4===j)&&(nn=1===j||2===j?H:H+1,rn=S.position-S.lineStart,1===Se?re&&(hr(S,rn)||function(S,H,j){var et,ft,Yt,jt,re,Se,on,Re=S.tag,ri=S.anchor,ai={},pi=Object.create(null),Ri=null,ji=null,nn=null,rn=!1,Mn=!1;if(-1!==S.firstTabInLine)return!1;for(null!==S.anchor&&(S.anchorMap[S.anchor]=ai),on=S.input.charCodeAt(S.position);0!==on;){if(!rn&&-1!==S.firstTabInLine&&(S.position=S.firstTabInLine,xn(S,"tab characters must not be used in indentation")),et=S.input.charCodeAt(S.position+1),Yt=S.line,63!==on&&58!==on||!lo(et)){if(jt=S.line,re=S.lineStart,Se=S.position,!ts(S,j,2,!1,!0))break;if(S.line===Yt){for(on=S.input.charCodeAt(S.position);Ds(on);)on=S.input.charCodeAt(++S.position);if(58===on)lo(on=S.input.charCodeAt(++S.position))||xn(S,"a whitespace character is expected after the key-value separator within a block mapping"),rn&&(z(S,ai,pi,Ri,ji,null,jt,re,Se),Ri=ji=nn=null),Mn=!0,rn=!1,ft=!1,Ri=S.tag,ji=S.result;else{if(!Mn)return S.tag=Re,S.anchor=ri,!0;xn(S,"can not read an implicit mapping pair; a colon is missed")}}else{if(!Mn)return S.tag=Re,S.anchor=ri,!0;xn(S,"can not read a block mapping entry; a multiline key may not be an implicit key")}}else 63===on?(rn&&(z(S,ai,pi,Ri,ji,null,jt,re,Se),Ri=ji=nn=null),Mn=!0,rn=!0,ft=!0):rn?(rn=!1,ft=!0):xn(S,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),S.position+=1,on=et;if((S.line===Yt||S.lineIndent>H)&&(rn&&(jt=S.line,re=S.lineStart,Se=S.position),ts(S,H,4,!0,ft)&&(rn?ji=S.result:nn=S.result),rn||(z(S,ai,pi,Ri,ji,nn,jt,re,Se),Ri=ji=nn=null),Fe(S,!0,-1),on=S.input.charCodeAt(S.position)),(S.line===Yt||S.lineIndent>H)&&0!==on)xn(S,"bad indentation of a mapping entry");else if(S.lineIndent<H)break}return rn&&z(S,ai,pi,Ri,ji,null,jt,re,Se),Mn&&(S.tag=Re,S.anchor=ri,S.kind="mapping",S.result=ai),Mn}(S,rn,nn))||function(S,H){var et,ft,Yt,re,ri,ai,pi,Ri,nn,rn,Mn,on,j=!0,jt=S.tag,Se=S.anchor,ji=Object.create(null);if(91===(on=S.input.charCodeAt(S.position)))ri=93,Ri=!1,re=[];else{if(123!==on)return!1;ri=125,Ri=!0,re={}}for(null!==S.anchor&&(S.anchorMap[S.anchor]=re),on=S.input.charCodeAt(++S.position);0!==on;){if(Fe(S,!0,H),(on=S.input.charCodeAt(S.position))===ri)return S.position++,S.tag=jt,S.anchor=Se,S.kind=Ri?"mapping":"sequence",S.result=re,!0;j?44===on&&xn(S,"expected the node content, but found ','"):xn(S,"missed comma between flow collection entries"),Mn=null,ai=pi=!1,63===on&&lo(S.input.charCodeAt(S.position+1))&&(ai=pi=!0,S.position++,Fe(S,!0,H)),et=S.line,ft=S.lineStart,Yt=S.position,ts(S,H,1,!1,!0),rn=S.tag,nn=S.result,Fe(S,!0,H),on=S.input.charCodeAt(S.position),(pi||S.line===et)&&58===on&&(ai=!0,on=S.input.charCodeAt(++S.position),Fe(S,!0,H),ts(S,H,1,!1,!0),Mn=S.result),Ri?z(S,re,ji,rn,nn,Mn,et,ft,Yt):re.push(ai?z(S,null,ji,rn,nn,Mn,et,ft,Yt):nn),Fe(S,!0,H),44===(on=S.input.charCodeAt(S.position))?(j=!0,on=S.input.charCodeAt(++S.position)):j=!1}xn(S,"unexpected end of the stream within a flow collection")}(S,nn)?ri=!0:(jt&&function(S,H){var j,et,ri,ai,ft=1,Yt=!1,jt=!1,re=H,Se=0,Re=!1;if(124===(ai=S.input.charCodeAt(S.position)))et=!1;else{if(62!==ai)return!1;et=!0}for(S.kind="scalar",S.result="";0!==ai;)if(43===(ai=S.input.charCodeAt(++S.position))||45===ai)1===ft?ft=43===ai?3:2:xn(S,"repeat of a chomping mode identifier");else{if(!((ri=jr(ai))>=0))break;0===ri?xn(S,"bad explicit indentation width of a block scalar; it cannot be less than one"):jt?xn(S,"repeat of an indentation width identifier"):(re=H+ri-1,jt=!0)}if(Ds(ai)){do{ai=S.input.charCodeAt(++S.position)}while(Ds(ai));if(35===ai)do{ai=S.input.charCodeAt(++S.position)}while(!Eo(ai)&&0!==ai)}for(;0!==ai;){for(It(S),S.lineIndent=0,ai=S.input.charCodeAt(S.position);(!jt||S.lineIndent<re)&&32===ai;)S.lineIndent++,ai=S.input.charCodeAt(++S.position);if(!jt&&S.lineIndent>re&&(re=S.lineIndent),Eo(ai))Se++;else{if(S.lineIndent<re){3===ft?S.result+=je.repeat("\n",Yt?1+Se:Se):1===ft&&Yt&&(S.result+="\n");break}for(et?Ds(ai)?(Re=!0,S.result+=je.repeat("\n",Yt?1+Se:Se)):Re?(Re=!1,S.result+=je.repeat("\n",Se+1)):0===Se?Yt&&(S.result+=" "):S.result+=je.repeat("\n",Se):S.result+=je.repeat("\n",Yt?1+Se:Se),Yt=!0,jt=!0,Se=0,j=S.position;!Eo(ai)&&0!==ai;)ai=S.input.charCodeAt(++S.position);Z(S,j,S.position,!1)}}return!0}(S,nn)||function(S,H){var j,et,ft;if(39!==(j=S.input.charCodeAt(S.position)))return!1;for(S.kind="scalar",S.result="",S.position++,et=ft=S.position;0!==(j=S.input.charCodeAt(S.position));)if(39===j){if(Z(S,et,S.position,!0),39!==(j=S.input.charCodeAt(++S.position)))return!0;et=S.position,S.position++,ft=S.position}else Eo(j)?(Z(S,et,ft,!0),cn(S,Fe(S,!1,H)),et=ft=S.position):S.position===S.lineStart&&bi(S)?xn(S,"unexpected end of the document within a single quoted scalar"):(S.position++,ft=S.position);xn(S,"unexpected end of the stream within a single quoted scalar")}(S,nn)||function(S,H){var j,et,ft,Yt,jt,re;if(34!==(re=S.input.charCodeAt(S.position)))return!1;for(S.kind="scalar",S.result="",S.position++,j=et=S.position;0!==(re=S.input.charCodeAt(S.position));){if(34===re)return Z(S,j,S.position,!0),S.position++,!0;if(92===re){if(Z(S,j,S.position,!0),Eo(re=S.input.charCodeAt(++S.position)))Fe(S,!1,H);else if(re<256&&us[re])S.result+=Ko[re],S.position++;else if((jt=aa(re))>0){for(ft=jt,Yt=0;ft>0;ft--)(jt=Lr(re=S.input.charCodeAt(++S.position)))>=0?Yt=(Yt<<4)+jt:xn(S,"expected hexadecimal character");S.result+=vl(Yt),S.position++}else xn(S,"unknown escape sequence");j=et=S.position}else Eo(re)?(Z(S,j,et,!0),cn(S,Fe(S,!1,H)),j=et=S.position):S.position===S.lineStart&&bi(S)?xn(S,"unexpected end of the document within a double quoted scalar"):(S.position++,et=S.position)}xn(S,"unexpected end of the stream within a double quoted scalar")}(S,nn)?ri=!0:function(S){var H,j,et;if(42!==(et=S.input.charCodeAt(S.position)))return!1;for(et=S.input.charCodeAt(++S.position),H=S.position;0!==et&&!lo(et)&&!gs(et);)et=S.input.charCodeAt(++S.position);return S.position===H&&xn(S,"name of an alias node must contain at least one character"),j=S.input.slice(H,S.position),Bs.call(S.anchorMap,j)||xn(S,'unidentified alias "'+j+'"'),S.result=S.anchorMap[j],Fe(S,!0,-1),!0}(S)?(ri=!0,(null!==S.tag||null!==S.anchor)&&xn(S,"alias node should not have any properties")):function(S,H,j){var ft,Yt,jt,re,Se,Re,ri,Ri,ai=S.kind,pi=S.result;if(lo(Ri=S.input.charCodeAt(S.position))||gs(Ri)||35===Ri||38===Ri||42===Ri||33===Ri||124===Ri||62===Ri||39===Ri||34===Ri||37===Ri||64===Ri||96===Ri||(63===Ri||45===Ri)&&(lo(ft=S.input.charCodeAt(S.position+1))||j&&gs(ft)))return!1;for(S.kind="scalar",S.result="",Yt=jt=S.position,re=!1;0!==Ri;){if(58===Ri){if(lo(ft=S.input.charCodeAt(S.position+1))||j&&gs(ft))break}else if(35===Ri){if(lo(S.input.charCodeAt(S.position-1)))break}else{if(S.position===S.lineStart&&bi(S)||j&&gs(Ri))break;if(Eo(Ri)){if(Se=S.line,Re=S.lineStart,ri=S.lineIndent,Fe(S,!1,-1),S.lineIndent>=H){re=!0,Ri=S.input.charCodeAt(S.position);continue}S.position=jt,S.line=Se,S.lineStart=Re,S.lineIndent=ri;break}}re&&(Z(S,Yt,jt,!1),cn(S,S.line-Se),Yt=jt=S.position,re=!1),Ds(Ri)||(jt=S.position+1),Ri=S.input.charCodeAt(++S.position)}return Z(S,Yt,jt,!1),!!S.result||(S.kind=ai,S.result=pi,!1)}(S,nn,1===j)&&(ri=!0,null===S.tag&&(S.tag="?")),null!==S.anchor&&(S.anchorMap[S.anchor]=S.result)):0===Se&&(ri=re&&hr(S,rn))),null===S.tag)null!==S.anchor&&(S.anchorMap[S.anchor]=S.result);else if("?"===S.tag){for(null!==S.result&&"scalar"!==S.kind&&xn(S,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+S.kind+'"'),ai=0,pi=S.implicitTypes.length;ai<pi;ai+=1)if((ji=S.implicitTypes[ai]).resolve(S.result)){S.result=ji.construct(S.result),S.tag=ji.tag,null!==S.anchor&&(S.anchorMap[S.anchor]=S.result);break}}else if("!"!==S.tag){if(Bs.call(S.typeMap[S.kind||"fallback"],S.tag))ji=S.typeMap[S.kind||"fallback"][S.tag];else for(ji=null,ai=0,pi=(Ri=S.typeMap.multi[S.kind||"fallback"]).length;ai<pi;ai+=1)if(S.tag.slice(0,Ri[ai].tag.length)===Ri[ai].tag){ji=Ri[ai];break}ji||xn(S,"unknown tag !<"+S.tag+">"),null!==S.result&&ji.kind!==S.kind&&xn(S,"unacceptable node kind for !<"+S.tag+'> tag; it should be "'+ji.kind+'", not "'+S.kind+'"'),ji.resolve(S.result,S.tag)?(S.result=ji.construct(S.result,S.tag),null!==S.anchor&&(S.anchorMap[S.anchor]=S.result)):xn(S,"cannot resolve a node with !<"+S.tag+"> explicit tag")}return null!==S.listener&&S.listener("close",S),null!==S.tag||null!==S.anchor||ri}function ll(S){var j,et,ft,jt,H=S.position,Yt=!1;for(S.version=null,S.checkLineBreaks=S.legacy,S.tagMap=Object.create(null),S.anchorMap=Object.create(null);0!==(jt=S.input.charCodeAt(S.position))&&(Fe(S,!0,-1),jt=S.input.charCodeAt(S.position),!(S.lineIndent>0||37!==jt));){for(Yt=!0,jt=S.input.charCodeAt(++S.position),j=S.position;0!==jt&&!lo(jt);)jt=S.input.charCodeAt(++S.position);for(ft=[],(et=S.input.slice(j,S.position)).length<1&&xn(S,"directive name must not be less than one character in length");0!==jt;){for(;Ds(jt);)jt=S.input.charCodeAt(++S.position);if(35===jt){do{jt=S.input.charCodeAt(++S.position)}while(0!==jt&&!Eo(jt));break}if(Eo(jt))break;for(j=S.position;0!==jt&&!lo(jt);)jt=S.input.charCodeAt(++S.position);ft.push(S.input.slice(j,S.position))}0!==jt&&It(S),Bs.call(Ot,et)?Ot[et](S,et,ft):_a(S,'unknown document directive "'+et+'"')}Fe(S,!0,-1),0===S.lineIndent&&45===S.input.charCodeAt(S.position)&&45===S.input.charCodeAt(S.position+1)&&45===S.input.charCodeAt(S.position+2)?(S.position+=3,Fe(S,!0,-1)):Yt&&xn(S,"directives end mark is expected"),ts(S,S.lineIndent-1,4,!1,!0),Fe(S,!0,-1),S.checkLineBreaks&&Hs.test(S.input.slice(H,S.position))&&_a(S,"non-ASCII line breaks are interpreted as content"),S.documents.push(S.result),S.position===S.lineStart&&bi(S)?46===S.input.charCodeAt(S.position)&&(S.position+=3,Fe(S,!0,-1)):S.position<S.length-1&&xn(S,"end of the stream or a document separator is expected")}function Vs(S,H){H=H||{},0!==(S=String(S)).length&&(10!==S.charCodeAt(S.length-1)&&13!==S.charCodeAt(S.length-1)&&(S+="\n"),65279===S.charCodeAt(0)&&(S=S.slice(1)));var j=new bl(S,H),et=S.indexOf("\0");for(-1!==et&&(j.position=et,xn(j,"null byte is not allowed in input")),j.input+="\0";32===j.input.charCodeAt(j.position);)j.lineIndent+=1,j.position+=1;for(;j.position<j.length-1;)ll(j);return j.documents}var K={loadAll:function(S,H,j){null!==H&&"object"==typeof H&&void 0===j&&(j=H,H=null);var et=Vs(S,j);if("function"!=typeof H)return et;for(var ft=0,Yt=et.length;ft<Yt;ft+=1)H(et[ft])},load:function(S,H){var j=Vs(S,H);if(0!==j.length){if(1===j.length)return j[0];throw new Ui("expected a single document in the stream, but found more")}}},gt=Object.prototype.toString,Qt=Object.prototype.hasOwnProperty,co={0:"\\0",7:"\\a",8:"\\b",9:"\\t",10:"\\n",11:"\\v",12:"\\f",13:"\\r",27:"\\e",34:'\\"',92:"\\\\",133:"\\N",160:"\\_",8232:"\\L",8233:"\\P"},Ja=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],Dn=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function or(S){var H,j,et;if(H=S.toString(16).toUpperCase(),S<=255)j="x",et=2;else if(S<=65535)j="u",et=4;else{if(!(S<=4294967295))throw new Ui("code point within a string may not be greater than 0xFFFFFFFF");j="U",et=8}return"\\"+j+je.repeat("0",et-H.length)+H}function es(S){this.schema=S.schema||Pa,this.indent=Math.max(1,S.indent||2),this.noArrayIndent=S.noArrayIndent||!1,this.skipInvalid=S.skipInvalid||!1,this.flowLevel=je.isNothing(S.flowLevel)?-1:S.flowLevel,this.styleMap=function(S,H){var j,et,ft,Yt,jt,re,Se;if(null===H)return{};for(j={},ft=0,Yt=(et=Object.keys(H)).length;ft<Yt;ft+=1)jt=et[ft],re=String(H[jt]),"!!"===jt.slice(0,2)&&(jt="tag:yaml.org,2002:"+jt.slice(2)),(Se=S.compiledTypeMap.fallback[jt])&&Qt.call(Se.styleAliases,re)&&(re=Se.styleAliases[re]),j[jt]=re;return j}(this.schema,S.styles||null),this.sortKeys=S.sortKeys||!1,this.lineWidth=S.lineWidth||80,this.noRefs=S.noRefs||!1,this.noCompatMode=S.noCompatMode||!1,this.condenseFlow=S.condenseFlow||!1,this.quotingType='"'===S.quotingType?2:1,this.forceQuotes=S.forceQuotes||!1,this.replacer="function"==typeof S.replacer?S.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function Mr(S,H){for(var jt,j=je.repeat(" ",H),et=0,ft=-1,Yt="",re=S.length;et<re;)-1===(ft=S.indexOf("\n",et))?(jt=S.slice(et),et=re):(jt=S.slice(et,ft+1),et=ft+1),jt.length&&"\n"!==jt&&(Yt+=j),Yt+=jt;return Yt}function ta(S,H){return"\n"+je.repeat(" ",S.indent*H)}function yl(S){return 32===S||9===S}function $a(S){return 32<=S&&S<=126||161<=S&&S<=55295&&8232!==S&&8233!==S||57344<=S&&S<=65533&&65279!==S||65536<=S&&S<=1114111}function Ur(S){return $a(S)&&65279!==S&&13!==S&&10!==S}function ca(S,H,j){var et=Ur(S),ft=et&&!yl(S);return(j?et:et&&44!==S&&91!==S&&93!==S&&123!==S&&125!==S)&&35!==S&&!(58===H&&!ft)||Ur(H)&&!yl(H)&&35===S||58===H&&ft}function As(S,H){var et,j=S.charCodeAt(H);return j>=55296&&j<=56319&&H+1<S.length&&(et=S.charCodeAt(H+1))>=56320&&et<=57343?1024*(j-55296)+et-56320+65536:j}function va(S){return/^\n* /.test(S)}function Ia(S,H,j,et,ft){S.dump=function(){if(0===H.length)return 2===S.quotingType?'""':"''";if(!S.noCompatMode&&(-1!==Ja.indexOf(H)||Dn.test(H)))return 2===S.quotingType?'"'+H+'"':"'"+H+"'";var Yt=S.indent*Math.max(1,j),jt=-1===S.lineWidth?-1:Math.max(Math.min(S.lineWidth,40),S.lineWidth-Yt);switch(function(S,H,j,et,ft,Yt,jt,re){var Se,Re=0,ri=null,ai=!1,pi=!1,Ri=-1!==et,ji=-1,nn=function(S){return $a(S)&&65279!==S&&!yl(S)&&45!==S&&63!==S&&58!==S&&44!==S&&91!==S&&93!==S&&123!==S&&125!==S&&35!==S&&38!==S&&42!==S&&33!==S&&124!==S&&61!==S&&62!==S&&39!==S&&34!==S&&37!==S&&64!==S&&96!==S}(As(S,0))&&function(S){return!yl(S)&&58!==S}(As(S,S.length-1));if(H||jt)for(Se=0;Se<S.length;Re>=65536?Se+=2:Se++){if(!$a(Re=As(S,Se)))return 5;nn=nn&&ca(Re,ri,re),ri=Re}else{for(Se=0;Se<S.length;Re>=65536?Se+=2:Se++){if(10===(Re=As(S,Se)))ai=!0,Ri&&(pi=pi||Se-ji-1>et&&" "!==S[ji+1],ji=Se);else if(!$a(Re))return 5;nn=nn&&ca(Re,ri,re),ri=Re}pi=pi||Ri&&Se-ji-1>et&&" "!==S[ji+1]}return ai||pi?j>9&&va(S)?5:jt?2===Yt?5:2:pi?4:3:!nn||jt||ft(S)?2===Yt?5:2:1}(H,et||S.flowLevel>-1&&j>=S.flowLevel,S.indent,jt,function(Re){return function(S,H){var j,et;for(j=0,et=S.implicitTypes.length;j<et;j+=1)if(S.implicitTypes[j].resolve(H))return!0;return!1}(S,Re)},S.quotingType,S.forceQuotes&&!et,ft)){case 1:return H;case 2:return"'"+H.replace(/'/g,"''")+"'";case 3:return"|"+Zl(H,S.indent)+Ma(Mr(H,Yt));case 4:return">"+Zl(H,S.indent)+Ma(Mr(function(S,H){for(var Yt,jt,j=/(\n+)([^\n]*)/g,et=(Re=void 0,Re=S.indexOf("\n"),j.lastIndex=Re=-1!==Re?Re:S.length,Gl(S.slice(0,Re),H)),ft="\n"===S[0]||" "===S[0];jt=j.exec(S);){var Se=jt[2];Yt=" "===Se[0],et+=jt[1]+(ft||Yt||""===Se?"":"\n")+Gl(Se,H),ft=Yt}var Re;return et}(H,jt),Yt));case 5:return'"'+function(S){for(var et,H="",j=0,ft=0;ft<S.length;j>=65536?ft+=2:ft++)j=As(S,ft),!(et=co[j])&&$a(j)?(H+=S[ft],j>=65536&&(H+=S[ft+1])):H+=et||or(j);return H}(H)+'"';default:throw new Ui("impossible error: invalid scalar style")}}()}function Zl(S,H){var j=va(S)?String(H):"",et="\n"===S[S.length-1];return j+(!et||"\n"!==S[S.length-2]&&"\n"!==S?et?"":"-":"+")+"\n"}function Ma(S){return"\n"===S[S.length-1]?S.slice(0,-1):S}function Gl(S,H){if(""===S||" "===S[0])return S;for(var et,Yt,j=/ [^ ]/g,ft=0,jt=0,re=0,Se="";et=j.exec(S);)(re=et.index)-ft>H&&(Se+="\n"+S.slice(ft,Yt=jt>ft?jt:re),ft=Yt+1),jt=re;return Se+="\n",(Se+=S.length-ft>H&&jt>ft?S.slice(ft,jt)+"\n"+S.slice(jt+1):S.slice(ft)).slice(1)}function Ua(S,H,j){var et,ft,Yt,jt,re,Se;for(Yt=0,jt=(ft=j?S.explicitTypes:S.implicitTypes).length;Yt<jt;Yt+=1)if(((re=ft[Yt]).instanceOf||re.predicate)&&(!re.instanceOf||"object"==typeof H&&H instanceof re.instanceOf)&&(!re.predicate||re.predicate(H))){if(S.tag=j?re.multi&&re.representName?re.representName(H):re.tag:"?",re.represent){if(Se=S.styleMap[re.tag]||re.defaultStyle,"[object Function]"===gt.call(re.represent))et=re.represent(H,Se);else{if(!Qt.call(re.represent,Se))throw new Ui("!<"+re.tag+'> tag resolver accepts not "'+Se+'" style');et=re.represent[Se](H,Se)}S.dump=et}return!0}return!1}function js(S,H,j,et,ft,Yt,jt){S.tag=null,S.dump=j,Ua(S,j,!1)||Ua(S,j,!0);var Re,re=gt.call(S.dump),Se=et;et&&(et=S.flowLevel<0||S.flowLevel>H);var ai,pi,ri="[object Object]"===re||"[object Array]"===re;if(ri&&(pi=-1!==(ai=S.duplicates.indexOf(j))),(null!==S.tag&&"?"!==S.tag||pi||2!==S.indent&&H>0)&&(ft=!1),pi&&S.usedDuplicates[ai])S.dump="*ref_"+ai;else{if(ri&&pi&&!S.usedDuplicates[ai]&&(S.usedDuplicates[ai]=!0),"[object Object]"===re)et&&0!==Object.keys(S.dump).length?(function(S,H,j,et){var re,Se,Re,ri,ai,pi,ft="",Yt=S.tag,jt=Object.keys(j);if(!0===S.sortKeys)jt.sort();else if("function"==typeof S.sortKeys)jt.sort(S.sortKeys);else if(S.sortKeys)throw new Ui("sortKeys must be a boolean or a function");for(re=0,Se=jt.length;re<Se;re+=1)pi="",(!et||""!==ft)&&(pi+=ta(S,H)),ri=j[Re=jt[re]],S.replacer&&(ri=S.replacer.call(j,Re,ri)),js(S,H+1,Re,!0,!0,!0)&&((ai=null!==S.tag&&"?"!==S.tag||S.dump&&S.dump.length>1024)&&(S.dump&&10===S.dump.charCodeAt(0)?pi+="?":pi+="? "),pi+=S.dump,ai&&(pi+=ta(S,H)),js(S,H+1,ri,!0,ai)&&(S.dump&&10===S.dump.charCodeAt(0)?pi+=":":pi+=": ",ft+=pi+=S.dump));S.tag=Yt,S.dump=ft||"{}"}(S,H,S.dump,ft),pi&&(S.dump="&ref_"+ai+S.dump)):(function(S,H,j){var jt,re,Se,Re,ri,et="",ft=S.tag,Yt=Object.keys(j);for(jt=0,re=Yt.length;jt<re;jt+=1)ri="",""!==et&&(ri+=", "),S.condenseFlow&&(ri+='"'),Re=j[Se=Yt[jt]],S.replacer&&(Re=S.replacer.call(j,Se,Re)),js(S,H,Se,!1,!1)&&(S.dump.length>1024&&(ri+="? "),ri+=S.dump+(S.condenseFlow?'"':"")+":"+(S.condenseFlow?"":" "),js(S,H,Re,!1,!1)&&(et+=ri+=S.dump));S.tag=ft,S.dump="{"+et+"}"}(S,H,S.dump),pi&&(S.dump="&ref_"+ai+" "+S.dump));else if("[object Array]"===re)et&&0!==S.dump.length?(function(S,H,j,et){var jt,re,Se,ft="",Yt=S.tag;for(jt=0,re=j.length;jt<re;jt+=1)Se=j[jt],S.replacer&&(Se=S.replacer.call(j,String(jt),Se)),(js(S,H+1,Se,!0,!0,!1,!0)||void 0===Se&&js(S,H+1,null,!0,!0,!1,!0))&&((!et||""!==ft)&&(ft+=ta(S,H)),S.dump&&10===S.dump.charCodeAt(0)?ft+="-":ft+="- ",ft+=S.dump);S.tag=Yt,S.dump=ft||"[]"}(S,S.noArrayIndent&&!jt&&H>0?H-1:H,S.dump,ft),pi&&(S.dump="&ref_"+ai+S.dump)):(function(S,H,j){var Yt,jt,re,et="",ft=S.tag;for(Yt=0,jt=j.length;Yt<jt;Yt+=1)re=j[Yt],S.replacer&&(re=S.replacer.call(j,String(Yt),re)),(js(S,H,re,!1,!1)||void 0===re&&js(S,H,null,!1,!1))&&(""!==et&&(et+=","+(S.condenseFlow?"":" ")),et+=S.dump);S.tag=ft,S.dump="["+et+"]"}(S,H,S.dump),pi&&(S.dump="&ref_"+ai+" "+S.dump));else{if("[object String]"!==re){if("[object Undefined]"===re)return!1;if(S.skipInvalid)return!1;throw new Ui("unacceptable kind of an object to dump "+re)}"?"!==S.tag&&Ia(S,S.dump,H,Yt,Se)}null!==S.tag&&"?"!==S.tag&&(Re=encodeURI("!"===S.tag[0]?S.tag.slice(1):S.tag).replace(/!/g,"%21"),Re="!"===S.tag[0]?"!"+Re:"tag:yaml.org,2002:"===Re.slice(0,18)?"!!"+Re.slice(18):"!<"+Re+">",S.dump=Re+" "+S.dump)}return!0}function Aa(S,H){var ft,Yt,j=[],et=[];for(Os(S,j,et),ft=0,Yt=et.length;ft<Yt;ft+=1)H.duplicates.push(j[et[ft]]);H.usedDuplicates=new Array(Yt)}function Os(S,H,j){var et,ft,Yt;if(null!==S&&"object"==typeof S)if(-1!==(ft=H.indexOf(S)))-1===j.indexOf(ft)&&j.push(ft);else if(H.push(S),Array.isArray(S))for(ft=0,Yt=S.length;ft<Yt;ft+=1)Os(S[ft],H,j);else for(ft=0,Yt=(et=Object.keys(S)).length;ft<Yt;ft+=1)Os(S[et[ft]],H,j)}function xl(S,H){return function(){throw new Error("Function yaml."+S+" is removed in js-yaml 4. Use yaml."+H+" instead, which is now safe by default.")}}const uo={Type:Qi,Schema:Je,FAILSAFE_SCHEMA:fn,JSON_SCHEMA:He,CORE_SCHEMA:Oi,DEFAULT_SCHEMA:Pa,load:K.load,loadAll:K.loadAll,dump:function(S,H){var j=new es(H=H||{});j.noRefs||Aa(S,j);var et=S;return j.replacer&&(et=j.replacer.call({"":et},"",et)),js(j,0,et,!0,!0)?j.dump+"\n":""},YAMLException:Ui,types:{binary:Jr,float:oe,map:ki,null:eo,pairs:Ka,set:Fs,timestamp:Fn,bool:ur,int:pr,merge:jo,omap:ns,seq:ui,str:xe},safeLoad:xl("safeLoad","load"),safeLoadAll:xl("safeLoadAll","loadAll"),safeDump:xl("safeDump","dump")},Tl="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:window,{FormData:Ys,Blob:ba,File:Uo}=Tl;function Va(S){return function(S){if(yt(S))return lt(S)}(S)||function(S){if(void 0!==Jt&&null!=Ct(S)||null!=S["@@iterator"])return mt(S)}(S)||Ut(S)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Tu=m(63759),Ks=m.n(Tu),ql=function(H){return":/?#[]@!$&'()*+,;=".indexOf(H)>-1},hs=function(H){return/^[a-z0-9\-._~]+$/i.test(H)};function Lo(S){var H,j=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},et=j.escape,ft=arguments.length>2?arguments[2]:void 0;return"number"==typeof S&&(S=S.toString()),"string"==typeof S&&S.length&&et?ft?JSON.parse(S):At()(H=Va(S)).call(H,function(Yt){var jt,re;if(hs(Yt)||ql(Yt)&&"unsafe"===et)return Yt;var Se=new TextEncoder;return At()(jt=At()(re=Bt()(Se.encode(Yt))).call(re,function(ri){var ai;return Ks()(ai="0".concat(ri.toString(16).toUpperCase())).call(ai,-2)})).call(jt,function(ri){return"%".concat(ri)}).join("")}).join(""):S}function No(S){var H=S.value;return Array.isArray(H)?function(S){var H=S.key,j=S.value,et=S.style,ft=S.explode,Yt=S.escape,jt=function(ai){return Lo(ai,{escape:Yt})};if("simple"===et)return At()(j).call(j,function(ri){return jt(ri)}).join(",");if("label"===et)return".".concat(At()(j).call(j,function(ri){return jt(ri)}).join("."));if("matrix"===et)return At()(j).call(j,function(ri){return jt(ri)}).reduce(function(ri,ai){var pi,Ri,ji;return!ri||ft?Ie()(Ri=Ie()(ji="".concat(ri||"",";")).call(ji,H,"=")).call(Ri,ai):Ie()(pi="".concat(ri,",")).call(pi,ai)},"");if("form"===et){var re=ft?"&".concat(H,"="):",";return At()(j).call(j,function(ri){return jt(ri)}).join(re)}if("spaceDelimited"===et){var Se=ft?"".concat(H,"="):"";return At()(j).call(j,function(ri){return jt(ri)}).join(" ".concat(Se))}if("pipeDelimited"===et){var Re=ft?"".concat(H,"="):"";return At()(j).call(j,function(ri){return jt(ri)}).join("|".concat(Re))}}(S):"object"===ht(H)?function(S){var H=S.key,j=S.value,et=S.style,ft=S.explode,Yt=S.escape,jt=function(Re){return Lo(Re,{escape:Yt})},re=ze()(j);return"simple"===et?re.reduce(function(Se,Re){var ri,ai,pi,Ri=jt(j[Re]),ji=ft?"=":",",nn=Se?"".concat(Se,","):"";return Ie()(ri=Ie()(ai=Ie()(pi="".concat(nn)).call(pi,Re)).call(ai,ji)).call(ri,Ri)},""):"label"===et?re.reduce(function(Se,Re){var ri,ai,pi,Ri=jt(j[Re]),ji=ft?"=":".",nn=Se?"".concat(Se,"."):".";return Ie()(ri=Ie()(ai=Ie()(pi="".concat(nn)).call(pi,Re)).call(ai,ji)).call(ri,Ri)},""):"matrix"===et&&ft?re.reduce(function(Se,Re){var ri,ai,pi=jt(j[Re]),Ri=Se?"".concat(Se,";"):";";return Ie()(ri=Ie()(ai="".concat(Ri)).call(ai,Re,"=")).call(ri,pi)},""):"matrix"===et?re.reduce(function(Se,Re){var ri,ai,pi=jt(j[Re]),Ri=Se?"".concat(Se,","):";".concat(H,"=");return Ie()(ri=Ie()(ai="".concat(Ri)).call(ai,Re,",")).call(ri,pi)},""):"form"===et?re.reduce(function(Se,Re){var ri,ai,pi,Ri,ji=jt(j[Re]),nn=Se?Ie()(ri="".concat(Se)).call(ri,ft?"&":","):"",rn=ft?"=":",";return Ie()(ai=Ie()(pi=Ie()(Ri="".concat(nn)).call(Ri,Re)).call(pi,rn)).call(ai,ji)},""):void 0}(S):function(S){var jt,H=S.key,j=S.value,et=S.style,ft=S.escape,Yt=function(Se){return Lo(Se,{escape:ft})};return"simple"===et?Yt(j):"label"===et?".".concat(Yt(j)):"matrix"===et?Ie()(jt=";".concat(H,"=")).call(jt,Yt(j)):"form"===et||"deepObject"===et?Yt(j):void 0}(S)}const Uc=function(H,j){j.body=H};var Su={serializeRes:ah,mergeInQueryOrForm:Ga};function ec(S){return vc.apply(this,arguments)}function vc(){return vc=ue(Ne().mark(function S(H){var j,ft,Yt,jt,re=arguments;return Ne().wrap(function(Re){for(;;)switch(Re.prev=Re.next){case 0:if(j=re.length>1&&void 0!==re[1]?re[1]:{},"object"===ht(H)&&(H=(j=H).url),j.headers=j.headers||{},Su.mergeInQueryOrForm(j),j.headers&&ze()(j.headers).forEach(function(ri){var ai=j.headers[ri];"string"==typeof ai&&(j.headers[ri]=ai.replace(/\n+/g," "))}),!j.requestInterceptor){Re.next=12;break}return Re.next=8,j.requestInterceptor(j);case 8:if(Re.t0=Re.sent,Re.t0){Re.next=11;break}Re.t0=j;case 11:j=Re.t0;case 12:return/multipart\/form-data/i.test(j.headers["content-type"]||j.headers["Content-Type"])&&j.body instanceof Ys&&(delete j.headers["content-type"],delete j.headers["Content-Type"]),Re.prev=14,Re.next=17,(j.userFetch||fetch)(j.url,j);case 17:return ft=Re.sent,Re.next=20,Su.serializeRes(ft,H,j);case 20:if(ft=Re.sent,!j.responseInterceptor){Re.next=28;break}return Re.next=24,j.responseInterceptor(ft);case 24:if(Re.t1=Re.sent,Re.t1){Re.next=27;break}Re.t1=ft;case 27:ft=Re.t1;case 28:Re.next=39;break;case 30:if(Re.prev=30,Re.t2=Re.catch(14),ft){Re.next=34;break}throw Re.t2;case 34:throw(Yt=new Error(ft.statusText||"response status is ".concat(ft.status))).status=ft.status,Yt.statusCode=ft.status,Yt.responseError=Re.t2,Yt;case 39:if(ft.ok){Re.next=45;break}throw(jt=new Error(ft.statusText||"response status is ".concat(ft.status))).status=ft.status,jt.statusCode=ft.status,jt.response=ft,jt;case 45:return Re.abrupt("return",ft);case 46:case"end":return Re.stop()}},S,null,[[14,30]])})),vc.apply(this,arguments)}var sh=function(){var H=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return/(json|xml|yaml|text)\b/.test(H)};function Gu(S,H){return H&&(0===H.indexOf("application/json")||H.indexOf("+json")>0)?JSON.parse(S):uo.load(S)}function ah(S,H){var j=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},et=j.loadSpec,ft=void 0!==et&&et,Yt={ok:S.ok,url:S.url||H,status:S.status,statusText:S.statusText,headers:eu(S.headers)},jt=Yt.headers["content-type"],re=ft||sh(jt),Se=re?S.text:S.blob||S.buffer;return Se.call(S).then(function(Re){if(Yt.text=Re,Yt.data=Re,re)try{var ri=Gu(Re,jt);Yt.body=ri,Yt.obj=ri}catch(ai){Yt.parseError=ai}return Yt})}function zl(S){return Di()(S).call(S,", ")?S.split(", "):S}function eu(){var S=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return"function"!=typeof Le()(S)?{}:Bt()(Le()(S).call(S)).reduce(function(H,j){var et=Nt(j,2);return H[et[0]]=zl(et[1]),H},{})}function os(S,H){return!H&&"undefined"!=typeof navigator&&(H=navigator),H&&"ReactNative"===H.product?!(!S||"object"!==ht(S)||"string"!=typeof S.uri):!!(void 0!==Uo&&S instanceof Uo||void 0!==ba&&S instanceof ba||ArrayBuffer.isView(S))||null!==S&&"object"===ht(S)&&"function"==typeof S.pipe}function bc(S,H){return Array.isArray(S)&&S.some(function(j){return os(j,H)})}var ic={form:",",spaceDelimited:"%20",pipeDelimited:"|"},kl={csv:",",ssv:"%20",tsv:"%09",pipes:"|"};function Ea(S,H){var j=arguments.length>2&&void 0!==arguments[2]&&arguments[2],et=H.collectionFormat,ft=H.allowEmptyValue,Yt=H.serializationOption,jt=H.encoding,re="object"!==ht(H)||Array.isArray(H)?H:H.value,Se=j?function(ji){return ji.toString()}:function(ji){return encodeURIComponent(ji)},Re=Se(S);if(void 0===re&&ft)return[[Re,""]];if(os(re)||bc(re))return[[Re,re]];if(Yt)return ha(S,re,j,Yt);if(jt){if([ht(jt.style),ht(jt.explode),ht(jt.allowReserved)].some(function(ji){return"undefined"!==ji})){var ri=jt.style,ai=jt.explode,pi=jt.allowReserved;return ha(S,re,j,{style:ri,explode:ai,allowReserved:pi})}if(jt.contentType){if("application/json"===jt.contentType){var Ri="string"==typeof re?re:$t()(re);return[[Re,Se(Ri)]]}return[[Re,Se(re.toString())]]}return"object"!==ht(re)?[[Re,Se(re)]]:Array.isArray(re)&&re.every(function(ji){return"object"!==ht(ji)})?[[Re,At()(re).call(re,Se).join(",")]]:[[Re,Se($t()(re))]]}return"object"!==ht(re)?[[Re,Se(re)]]:Array.isArray(re)?"multi"===et?[[Re,At()(re).call(re,Se)]]:[[Re,At()(re).call(re,Se).join(kl[et||"csv"])]]:[[Re,""]]}function ha(S,H,j,et){var ft,ri,ai,Yt=et.style||"form",jt=void 0===et.explode?"form"===Yt:et.explode,re=!j&&(et&&et.allowReserved?"unsafe":"reserved"),Se=function(Ri){return Lo(Ri,{escape:re})},Re=j?function(pi){return pi}:function(pi){return Lo(pi,{escape:re})};return"object"!==ht(H)?[[Re(S),Se(H)]]:Array.isArray(H)?jt?[[Re(S),At()(H).call(H,Se)]]:[[Re(S),At()(H).call(H,Se).join(ic[Yt])]]:"deepObject"===Yt?At()(ri=ze()(H)).call(ri,function(pi){var Ri;return[Re(Ie()(Ri="".concat(S,"[")).call(Ri,pi,"]")),Se(H[pi])]}):jt?At()(ai=ze()(H)).call(ai,function(pi){return[Re(pi),Se(H[pi])]}):[[Re(S),At()(ft=ze()(H)).call(ft,function(pi){var Ri;return[Ie()(Ri="".concat(Re(pi),",")).call(Ri,Se(H[pi]))]}).join(",")]]}function So(S){return ee()(S).reduce(function(H,j){var re,et=Nt(j,2),jt=Rt(Ea(et[0],et[1],!0));try{for(jt.s();!(re=jt.n()).done;){var Se=Nt(re.value,2),Re=Se[0],ri=Se[1];if(Array.isArray(ri)){var pi,ai=Rt(ri);try{for(ai.s();!(pi=ai.n()).done;){var Ri=pi.value;if(ArrayBuffer.isView(Ri)){var ji=new ba([Ri]);H.append(Re,ji)}else H.append(Re,Ri)}}catch(rn){ai.e(rn)}finally{ai.f()}}else if(ArrayBuffer.isView(ri)){var nn=new ba([ri]);H.append(Re,nn)}else H.append(Re,ri)}}catch(rn){jt.e(rn)}finally{jt.f()}return H},new Ys)}function xa(S){var H=ze()(S).reduce(function(j,et){var Yt,ft=Rt(Ea(et,S[et]));try{for(ft.s();!(Yt=ft.n()).done;){var jt=Nt(Yt.value,2);j[jt[0]]=jt[1]}}catch(Re){ft.e(Re)}finally{ft.f()}return j},{});return Zt().stringify(H,{encode:!1,indices:!1})||""}function Ga(){var S=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},H=S.url,j=void 0===H?"":H,et=S.query,ft=S.form,Yt=function(){for(var on=arguments.length,Or=new Array(on),Kr=0;Kr<on;Kr++)Or[Kr]=arguments[Kr];var ls=ne()(Or).call(Or,function(go){return go}).join("&");return ls?"?".concat(ls):""};if(ft){var jt=ze()(ft).some(function(Mn){var on=ft[Mn].value;return os(on)||bc(on)}),re=S.headers["content-type"]||S.headers["Content-Type"];if(jt||/multipart\/form-data/i.test(re)){var Se=So(S.form);Uc(Se,S)}else S.body=xa(ft);delete S.form}if(et){var Re=j.split("?"),ri=Nt(Re,2),ai=ri[0],pi=ri[1],Ri="";if(pi){var ji=Zt().parse(pi),nn=ze()(et);nn.forEach(function(Mn){return delete ji[Mn]}),Ri=Zt().stringify(ji,{encode:!0})}var rn=Yt(Ri,xa(et));S.url=ai+rn,delete S.query}return S}function iu(S,H){if(!(S instanceof H))throw new TypeError("Cannot call a class as a function")}function ia(S,H){for(var j=0;j<H.length;j++){var et=H[j];et.enumerable=et.enumerable||!1,et.configurable=!0,"value"in et&&(et.writable=!0),B(S,et.key,et)}}function Vr(S,H,j){return H&&ia(S.prototype,H),j&&ia(S,j),B(S,"prototype",{writable:!1}),S}var S,Ta=m(77464),nc=m.n(Ta),Nl=m(78927),bs=m.n(Nl),tl=m(67489),rc=m.n(tl),Th=(S=function(H,j){return(S=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(et,ft){et.__proto__=ft}||function(et,ft){for(var Yt in ft)ft.hasOwnProperty(Yt)&&(et[Yt]=ft[Yt])})(H,j)},function(H,j){function et(){this.constructor=H}S(H,j),H.prototype=null===j?Object.create(j):(et.prototype=j.prototype,new et)}),ka=Object.prototype.hasOwnProperty;function Pl(S,H){return ka.call(S,H)}function oc(S){if(Array.isArray(S)){for(var j=new Array(S.length),H=0;H<j.length;H++)j[H]=""+H;return j}if(Object.keys)return Object.keys(S);for(var et in j=[],S)Pl(S,et)&&j.push(et);return j}function xs(S){switch(typeof S){case"object":return JSON.parse(JSON.stringify(S));case"undefined":return null;default:return S}}function hl(S){for(var et,H=0,j=S.length;H<j;){if(!((et=S.charCodeAt(H))>=48&&et<=57))return!1;H++}return!0}function Ar(S){return-1===S.indexOf("/")&&-1===S.indexOf("~")?S:S.replace(/~/g,"~0").replace(/\//g,"~1")}function sc(S){return S.replace(/~1/g,"/").replace(/~0/g,"~")}function Vc(S){if(void 0===S)return!0;if(S)if(Array.isArray(S)){for(var H=0,j=S.length;H<j;H++)if(Vc(S[H]))return!0}else if("object"==typeof S){var et=oc(S),ft=et.length;for(H=0;H<ft;H++)if(Vc(S[et[H]]))return!0}return!1}function na(S,H){var j=[S];for(var et in H){var ft="object"==typeof H[et]?JSON.stringify(H[et],null,2):H[et];void 0!==ft&&j.push(et+": "+ft)}return j.join("\n")}var Ec=function(S){function H(j,et,ft,Yt,jt){var re=this.constructor,Se=S.call(this,na(j,{name:et,index:ft,operation:Yt,tree:jt}))||this;return Se.name=et,Se.index=ft,Se.operation=Yt,Se.tree=jt,Object.setPrototypeOf(Se,re.prototype),Se.message=na(j,{name:et,index:ft,operation:Yt,tree:jt}),Se}return Th(H,S),H}(Error),Po=Ec,Tc=xs,lc={add:function(S,H,j){return S[H]=this.value,{newDocument:j}},remove:function(S,H,j){var et=S[H];return delete S[H],{newDocument:j,removed:et}},replace:function(S,H,j){var et=S[H];return S[H]=this.value,{newDocument:j,removed:et}},move:function(S,H,j){var et=cc(j,this.path);et&&(et=xs(et));var ft=Wa(j,{op:"remove",path:this.from}).removed;return Wa(j,{op:"add",path:this.path,value:ft}),{newDocument:j,removed:et}},copy:function(S,H,j){var et=cc(j,this.from);return Wa(j,{op:"add",path:this.path,value:xs(et)}),{newDocument:j}},test:function(S,H,j){return{newDocument:j,test:pl(S[H],this.value)}},_get:function(S,H,j){return this.value=S[H],{newDocument:j}}},nu={add:function(S,H,j){return hl(H)?S.splice(H,0,this.value):S[H]=this.value,{newDocument:j,index:H}},remove:function(S,H,j){return{newDocument:j,removed:S.splice(H,1)[0]}},replace:function(S,H,j){var et=S[H];return S[H]=this.value,{newDocument:j,removed:et}},move:lc.move,copy:lc.copy,test:lc.test,_get:lc._get};function cc(S,H){if(""==H)return S;var j={op:"_get",path:H};return Wa(S,j),j.value}function Wa(S,H,j,et,ft,Yt){if(void 0===j&&(j=!1),void 0===et&&(et=!0),void 0===ft&&(ft=!0),void 0===Yt&&(Yt=0),j&&("function"==typeof j?j(H,0,S,H.path):dl(H,0)),""===H.path){var jt={newDocument:S};if("add"===H.op)return jt.newDocument=H.value,jt;if("replace"===H.op)return jt.newDocument=H.value,jt.removed=S,jt;if("move"===H.op||"copy"===H.op)return jt.newDocument=cc(S,H.from),"move"===H.op&&(jt.removed=S),jt;if("test"===H.op){if(jt.test=pl(S,H.value),!1===jt.test)throw new Po("Test operation failed","TEST_OPERATION_FAILED",Yt,H,S);return jt.newDocument=S,jt}if("remove"===H.op)return jt.removed=S,jt.newDocument=null,jt;if("_get"===H.op)return H.value=S,jt;if(j)throw new Po("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",Yt,H,S);return jt}et||(S=xs(S));var Se=(H.path||"").split("/"),Re=S,ri=1,ai=Se.length,pi=void 0,Ri=void 0,ji=void 0;for(ji="function"==typeof j?j:dl;;){if((Ri=Se[ri])&&-1!=Ri.indexOf("~")&&(Ri=sc(Ri)),ft&&"__proto__"==Ri)throw new TypeError("JSON-Patch: modifying `__proto__` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(j&&void 0===pi&&(void 0===Re[Ri]?pi=Se.slice(0,ri).join("/"):ri==ai-1&&(pi=H.path),void 0!==pi&&ji(H,0,S,pi)),ri++,Array.isArray(Re)){if("-"===Ri)Ri=Re.length;else{if(j&&!hl(Ri))throw new Po("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",Yt,H,S);hl(Ri)&&(Ri=~~Ri)}if(ri>=ai){if(j&&"add"===H.op&&Ri>Re.length)throw new Po("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",Yt,H,S);if(!1===(jt=nu[H.op].call(H,Re,Ri,S)).test)throw new Po("Test operation failed","TEST_OPERATION_FAILED",Yt,H,S);return jt}}else if(ri>=ai){if(!1===(jt=lc[H.op].call(H,Re,Ri,S)).test)throw new Po("Test operation failed","TEST_OPERATION_FAILED",Yt,H,S);return jt}if(Re=Re[Ri],j&&ri<ai&&(!Re||"object"!=typeof Re))throw new Po("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",Yt,H,S)}}function Js(S,H,j,et,ft){if(void 0===et&&(et=!0),void 0===ft&&(ft=!0),j&&!Array.isArray(H))throw new Po("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");et||(S=xs(S));for(var Yt=new Array(H.length),jt=0,re=H.length;jt<re;jt++)Yt[jt]=Wa(S,H[jt],j,!0,ft,jt),S=Yt[jt].newDocument;return Yt.newDocument=S,Yt}function uc(S,H,j){var et=Wa(S,H);if(!1===et.test)throw new Po("Test operation failed","TEST_OPERATION_FAILED",j,H,S);return et.newDocument}function dl(S,H,j,et){if("object"!=typeof S||null===S||Array.isArray(S))throw new Po("Operation is not an object","OPERATION_NOT_AN_OBJECT",H,S,j);if(!lc[S.op])throw new Po("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",H,S,j);if("string"!=typeof S.path)throw new Po("Operation `path` property is not a string","OPERATION_PATH_INVALID",H,S,j);if(0!==S.path.indexOf("/")&&S.path.length>0)throw new Po('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",H,S,j);if(("move"===S.op||"copy"===S.op)&&"string"!=typeof S.from)throw new Po("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",H,S,j);if(("add"===S.op||"replace"===S.op||"test"===S.op)&&void 0===S.value)throw new Po("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",H,S,j);if(("add"===S.op||"replace"===S.op||"test"===S.op)&&Vc(S.value))throw new Po("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",H,S,j);if(j)if("add"==S.op){var ft=S.path.split("/").length,Yt=et.split("/").length;if(ft!==Yt+1&&ft!==Yt)throw new Po("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",H,S,j)}else if("replace"===S.op||"remove"===S.op||"_get"===S.op){if(S.path!==et)throw new Po("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",H,S,j)}else if("move"===S.op||"copy"===S.op){var re=Jo([{op:"_get",path:S.from,value:void 0}],j);if(re&&"OPERATION_PATH_UNRESOLVABLE"===re.name)throw new Po("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",H,S,j)}}function Jo(S,H,j){try{if(!Array.isArray(S))throw new Po("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(H)Js(xs(H),xs(S),j||!0);else{j=j||dl;for(var et=0;et<S.length;et++)j(S[et],et,H,void 0)}}catch(ft){if(ft instanceof Po)return ft;throw ft}}function pl(S,H){if(S===H)return!0;if(S&&H&&"object"==typeof S&&"object"==typeof H){var ft,Yt,jt,j=Array.isArray(S),et=Array.isArray(H);if(j&&et){if((Yt=S.length)!=H.length)return!1;for(ft=Yt;0!=ft--;)if(!pl(S[ft],H[ft]))return!1;return!0}if(j!=et)return!1;var re=Object.keys(S);if((Yt=re.length)!==Object.keys(H).length)return!1;for(ft=Yt;0!=ft--;)if(!H.hasOwnProperty(re[ft]))return!1;for(ft=Yt;0!=ft--;)if(!pl(S[jt=re[ft]],H[jt]))return!1;return!0}return S!=S&&H!=H}var el=new WeakMap,hc=function(H){this.observers=new Map,this.obj=H},Cc=function(H,j){this.callback=H,this.observer=j};function Fl(S,H){H.unobserve()}function jl(S,H){var et,ft=function(S){return el.get(S)}(S);if(ft){var Yt=function(S,H){return S.observers.get(H)}(ft,H);et=Yt&&Yt.observer}else ft=new hc(S),el.set(S,ft);if(et)return et;if(et={},ft.value=xs(S),H){et.callback=H,et.next=null;var jt=function(){Sc(et)},re=function(){clearTimeout(et.next),et.next=setTimeout(jt)};"undefined"!=typeof window&&(window.addEventListener("mouseup",re),window.addEventListener("keyup",re),window.addEventListener("mousedown",re),window.addEventListener("keydown",re),window.addEventListener("change",re))}return et.patches=[],et.object=S,et.unobserve=function(){Sc(et),clearTimeout(et.next),function(S,H){S.observers.delete(H.callback)}(ft,et),"undefined"!=typeof window&&(window.removeEventListener("mouseup",re),window.removeEventListener("keyup",re),window.removeEventListener("mousedown",re),window.removeEventListener("keydown",re),window.removeEventListener("change",re))},ft.observers.set(H,new Cc(H,et)),et}function Sc(S,H){void 0===H&&(H=!1);var j=el.get(S.object);da(j.value,S.object,S.patches,"",H),S.patches.length&&Js(j.value,S.patches);var et=S.patches;return et.length>0&&(S.patches=[],S.callback&&S.callback(et)),et}function da(S,H,j,et,ft){if(H!==S){"function"==typeof H.toJSON&&(H=H.toJSON());for(var Yt=oc(H),jt=oc(S),Se=!1,Re=jt.length-1;Re>=0;Re--){var ai=S[ri=jt[Re]];if(!Pl(H,ri)||void 0===H[ri]&&void 0!==ai&&!1===Array.isArray(H))Array.isArray(S)===Array.isArray(H)?(ft&&j.push({op:"test",path:et+"/"+Ar(ri),value:xs(ai)}),j.push({op:"remove",path:et+"/"+Ar(ri)}),Se=!0):(ft&&j.push({op:"test",path:et,value:S}),j.push({op:"replace",path:et,value:H}));else{var pi=H[ri];"object"==typeof ai&&null!=ai&&"object"==typeof pi&&null!=pi&&Array.isArray(ai)===Array.isArray(pi)?da(ai,pi,j,et+"/"+Ar(ri),ft):ai!==pi&&(ft&&j.push({op:"test",path:et+"/"+Ar(ri),value:xs(ai)}),j.push({op:"replace",path:et+"/"+Ar(ri),value:xs(pi)}))}}if(Se||Yt.length!=jt.length)for(Re=0;Re<Yt.length;Re++){var ri;!Pl(S,ri=Yt[Re])&&void 0!==H[ri]&&j.push({op:"add",path:et+"/"+Ar(ri),value:xs(H[ri])})}}}function il(S,H,j){void 0===j&&(j=!1);var et=[];return da(S,H,et,"",j),et}Object.assign({},C,_,{JsonPatchError:Ec,deepClone:xs,escapePathComponent:Ar,unescapePathComponent:sc});var dc=m(89986),zc=m.n(dc),wc=m(69380),Ca=m.n(wc);const so={add:function(S,H){return{op:"add",path:S,value:H}},replace:wu,remove:function(S){return{op:"remove",path:S}},merge:function(S,H){return{type:"mutation",op:"merge",path:S,value:H}},mergeDeep:function(S,H){return{type:"mutation",op:"mergeDeep",path:S,value:H}},context:function(S,H){return{type:"context",path:S,value:H}},getIn:function(S,H){return H.reduce(function(j,et){return void 0!==et&&j?j[et]:j},S)},applyPatch:function(S,H,j){if(j=j||{},"merge"===(H=rt(rt({},H),{},{path:H.path&&Yl(H.path)})).op){var et=Ue(S,H.path);Ht()(et,H.value),Js(S,[wu(H.path,et)])}else if("mergeDeep"===H.op){var ft=Ue(S,H.path);for(var Yt in H.value){var jt=H.value[Yt],re=Array.isArray(jt);if(re){var Se=ft[Yt]||[];ft[Yt]=Ie()(Se).call(Se,jt)}else if(pa(jt)&&!re){var Re=rt({},ft[Yt]);for(var ri in jt){if(Object.prototype.hasOwnProperty.call(Re,ri)){Re=zc()(Ca()(Re),jt);break}Ht()(Re,Q({},ri,jt[ri]))}ft[Yt]=Re}else ft[Yt]=jt}}else if("add"===H.op&&""===H.path&&pa(H.value)){Js(S,ze()(H.value).reduce(function(rn,Mn){return rn.push({op:"add",path:"/".concat(Yl(Mn)),value:H.value[Mn]}),rn},[]))}else if("replace"===H.op&&""===H.path){var Ri=H.value;j.allowMetaPatches&&H.meta&&wt(H)&&(Array.isArray(H.value)||pa(H.value))&&(Ri=rt(rt({},Ri),H.meta)),S=Ri}else if(Js(S,[H]),j.allowMetaPatches&&H.meta&&wt(H)&&(Array.isArray(H.value)||pa(H.value))){var nn=rt(rt({},Ue(S,H.path)),H.meta);Js(S,[wu(H.path,nn)])}return S},parentPathMatch:function(S,H){if(!Array.isArray(H))return!1;for(var j=0,et=H.length;j<et;j+=1)if(H[j]!==S[j])return!1;return!0},flatten:nl,fullyNormalizeArray:function(S){return Kl(nl(Sa(S)))},normalizeArray:Sa,isPromise:function(S){return pa(S)&&Hl(S.then)},forEachNew:function(S,H){try{return Cl(S,wl,H)}catch(j){return j}},forEachNewPrimitive:function(S,H){try{return Cl(S,Sl,H)}catch(j){return j}},isJsonPatch:ss,isContextPatch:function(S){return we(S)&&"context"===S.type},isPatch:we,isMutation:_t,isAdditiveMutation:wt,isGenerator:function(S){return"[object GeneratorFunction]"===Object.prototype.toString.call(S)},isFunction:Hl,isObject:pa,isError:function(S){return S instanceof Error}};function Yl(S){return Array.isArray(S)?S.length<1?"":"/".concat(At()(S).call(S,function(H){return(H+"").replace(/~/g,"~0").replace(/\//g,"~1")}).join("/")):S}function wu(S,H,j){return{op:"replace",path:S,value:H,meta:j}}function Cl(S,H,j){var et;return Kl(nl(At()(et=ne()(S).call(S,wt)).call(et,function(re){return H(re.value,j,re.path)})||[]))}function Sl(S,H,j){return j=j||[],Array.isArray(S)?At()(S).call(S,function(ft,Yt){return Sl(ft,H,Ie()(j).call(j,Yt))}):pa(S)?At()(et=ze()(S)).call(et,function(ft){return Sl(S[ft],H,Ie()(j).call(j,ft))}):H(S,j[j.length-1],j);var et}function wl(S,H,j){var et=[];if((j=j||[]).length>0){var ft=H(S,j[j.length-1],j);ft&&(et=Ie()(et).call(et,ft))}if(Array.isArray(S)){var Yt=At()(S).call(S,function(Se,Re){return wl(Se,H,Ie()(j).call(j,Re))});Yt&&(et=Ie()(et).call(et,Yt))}else if(pa(S)){var jt,re=At()(jt=ze()(S)).call(jt,function(Se){return wl(S[Se],H,Ie()(j).call(j,Se))});re&&(et=Ie()(et).call(et,re))}return nl(et)}function Sa(S){return Array.isArray(S)?S:[S]}function nl(S){var H;return Ie()(H=[]).apply(H,Va(At()(S).call(S,function(j){return Array.isArray(j)?nl(j):j})))}function Kl(S){return ne()(S).call(S,function(H){return void 0!==H})}function pa(S){return S&&"object"===ht(S)}function Hl(S){return S&&"function"==typeof S}function ss(S){if(we(S)){var H=S.op;return"add"===H||"remove"===H||"replace"===H}return!1}function _t(S){return ss(S)||we(S)&&"mutation"===S.type}function wt(S){return _t(S)&&("add"===S.op||"replace"===S.op||"merge"===S.op||"mergeDeep"===S.op)}function we(S){return S&&"object"===ht(S)}function Ue(S,H){try{return cc(S,H)}catch(j){return console.error(j),{}}}var di=m(74580),qe=m.n(di),si=m(79921),Li=m.n(si);function xi(S,H){function j(){Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack;for(var et=arguments.length,ft=new Array(et),Yt=0;Yt<et;Yt++)ft[Yt]=arguments[Yt];this.message=ft[0],H&&H.apply(this,ft)}return(j.prototype=new Error).name=S,j.prototype.constructor=j,j}var zi=m(3394),Jn=m.n(zi),Un=["properties"],qn=["properties"],$o=["definitions","parameters","responses","securityDefinitions","components/schemas","components/responses","components/parameters","components/securitySchemes"],Do=["schema/example","items/example"];function Zr(S){var H=S[S.length-1],j=S[S.length-2],et=S.join("/");return Un.indexOf(H)>-1&&-1===qn.indexOf(j)||$o.indexOf(et)>-1||Do.some(function(ft){return et.indexOf(ft)>-1})}function Go(S,H){var j,ft=Nt(S.split("#"),2),jt=ft[1],re=Wt.resolve(ft[0]||"",H||"");return jt?Ie()(j="".concat(re,"#")).call(j,jt):re}var po="application/json, application/yaml",oa=new RegExp("^([a-z]+://|//)","i"),ys=xi("JSONRefError",function(H,j,et){this.originalError=et,Ht()(this,j||{})}),ds={},gl=new(qe()),ou=[function(S){return"paths"===S[0]&&"responses"===S[3]&&"examples"===S[5]},function(S){return"paths"===S[0]&&"responses"===S[3]&&"content"===S[5]&&"example"===S[7]},function(S){return"paths"===S[0]&&"responses"===S[3]&&"content"===S[5]&&"examples"===S[7]&&"value"===S[9]},function(S){return"paths"===S[0]&&"requestBody"===S[3]&&"content"===S[4]&&"example"===S[6]},function(S){return"paths"===S[0]&&"requestBody"===S[3]&&"content"===S[4]&&"examples"===S[6]&&"value"===S[8]},function(S){return"paths"===S[0]&&"parameters"===S[2]&&"example"===S[4]},function(S){return"paths"===S[0]&&"parameters"===S[3]&&"example"===S[5]},function(S){return"paths"===S[0]&&"parameters"===S[2]&&"examples"===S[4]&&"value"===S[6]},function(S){return"paths"===S[0]&&"parameters"===S[3]&&"examples"===S[5]&&"value"===S[7]},function(S){return"paths"===S[0]&&"parameters"===S[2]&&"content"===S[4]&&"example"===S[6]},function(S){return"paths"===S[0]&&"parameters"===S[2]&&"content"===S[4]&&"examples"===S[6]&&"value"===S[8]},function(S){return"paths"===S[0]&&"parameters"===S[3]&&"content"===S[4]&&"example"===S[7]},function(S){return"paths"===S[0]&&"parameters"===S[3]&&"content"===S[5]&&"examples"===S[7]&&"value"===S[9]}],zu={key:"$ref",plugin:function(H,j,et,ft){var Yt=ft.getInstance(),jt=Ks()(et).call(et,0,-1);if(!Zr(jt)&&!function(H){return ou.some(function(j){return j(H)})}(jt)){var Se=ft.getContext(et).baseDoc;if("string"!=typeof H)return new ys("$ref: must be a string (JSON-Ref)",{$ref:H,baseDoc:Se,fullPath:et});var pi,Ri,ji,Re=Ou(H),ri=Re[0],ai=Re[1]||"";try{pi=Se||ri?Ic(ri,Se):null}catch(on){return su(on,{pointer:ai,$ref:H,basePath:pi,fullPath:et})}if(function(S,H,j,et){var ft,Yt,jt=gl.get(et);jt||gl.set(et,jt={});var re=function(S){return 0===S.length?"":"/".concat(At()(S).call(S,ku).join("/"))}(j),Se=Ie()(ft="".concat(H||"<specmap-base>","#")).call(ft,S),Re=re.replace(/allOf\/\d+\/?/g,"");if(H===et.contextTree.get([]).baseDoc&&Zo(Re,S))return!0;var ai="",pi=j.some(function(Ri){var ji;return ai=Ie()(ji="".concat(ai,"/")).call(ji,ku(Ri)),jt[ai]&&jt[ai].some(function(nn){return Zo(nn,Se)||Zo(Se,nn)})});if(pi)return!0;jt[Re]=Ie()(Yt=jt[Re]||[]).call(Yt,Se)}(ai,pi,jt,ft)&&!Yt.useCircularStructures){var nn=Go(H,pi);return H===nn?null:so.replace(et,nn)}if(null==pi?(ji=au(ai),void 0===(Ri=ft.get(ji))&&(Ri=new ys("Could not resolve reference: ".concat(H),{pointer:ai,$ref:H,baseDoc:Se,fullPath:et}))):Ri=null!=(Ri=ju(pi,ai)).__value?Ri.__value:Ri.catch(function(on){throw su(on,{pointer:ai,$ref:H,baseDoc:Se,fullPath:et})}),Ri instanceof Error)return[so.remove(et),Ri];var rn=Go(H,pi),Mn=so.replace(jt,Ri,{$$ref:rn});if(pi&&pi!==Se)return[Mn,so.context(jt,{baseDoc:pi})];try{if(!function(S,H){var j=[S];return H.path.reduce(function(ft,Yt){return j.push(ft[Yt]),ft[Yt]},S),function et(ft){return so.isObject(ft)&&(j.indexOf(ft)>=0||ze()(ft).some(function(Yt){return et(ft[Yt])}))}(H.value)}(ft.state,Mn)||Yt.useCircularStructures)return Mn}catch(on){return null}}}},Au=Ht()(zu,{docCache:ds,absoluteify:Ic,clearCache:function(S){void 0!==S?delete ds[S]:ze()(ds).forEach(function(H){delete ds[H]})},JSONRefError:ys,wrapError:su,getDoc:Yu,split:Ou,extractFromDoc:ju,fetchJSON:function(S){return fetch(S,{headers:{Accept:po},loadSpec:!0}).then(function(H){return H.text()}).then(function(H){return uo.load(H)})},extract:hh,jsonPointerToArray:au,unescapeJsonPointerToken:Yc});const uh=Au;function Ic(S,H){if(!oa.test(S)){var j;if(!H)throw new ys(Ie()(j="Tried to resolve a relative URL, without having a basePath. path: '".concat(S,"' basePath: '")).call(j,H,"'"));return Wt.resolve(H,S)}return S}function su(S,H){var j,et;return j=S&&S.response&&S.response.body?Ie()(et="".concat(S.response.body.code," ")).call(et,S.response.body.message):S.message,new ys("Could not resolve reference: ".concat(j),H,S)}function Ou(S){return(S+"").split("#")}function ju(S,H){var j=ds[S];if(j&&!so.isPromise(j))try{var et=hh(H,j);return Ht()(bs().resolve(et),{__value:et})}catch(ft){return bs().reject(ft)}return Yu(S).then(function(ft){return hh(H,ft)})}function Yu(S){var H=ds[S];return H?so.isPromise(H)?H:bs().resolve(H):(ds[S]=Au.fetchJSON(S).then(function(j){return ds[S]=j,j}),ds[S])}function hh(S,H){var j=au(S);if(j.length<1)return H;var et=so.getIn(H,j);if(void 0===et)throw new ys("Could not resolve pointer: ".concat(S," does not exist in document"),{pointer:S});return et}function au(S){var H;if("string"!=typeof S)throw new TypeError("Expected a string, got a ".concat(ht(S)));return"/"===S[0]&&(S=S.substr(1)),""===S?[]:At()(H=S.split("/")).call(H,Yc)}function Yc(S){return"string"!=typeof S?S:new(Li())("=".concat(S.replace(/~1/g,"/").replace(/~0/g,"~"))).get("")}function ku(S){var H,j=new(Li())([["",S.replace(/~/g,"~0").replace(/\//g,"~1")]]);return Ks()(H=j.toString()).call(H,1)}function Zo(S,H){if(function(H){return!H||"/"===H||"#"===H}(H))return!0;var j=S.charAt(H.length),et=Ks()(H).call(H,-1);return 0===S.indexOf(H)&&(!j||"/"===j||"#"===j)&&"#"!==et}var Xc=m(65359),Sh=m.n(Xc);const Ku={key:"allOf",plugin:function(H,j,et,ft,Yt){if(!Yt.meta||!Yt.meta.$$ref){var jt=Ks()(et).call(et,0,-1);if(!Zr(jt)){if(!Array.isArray(H)){var re=new TypeError("allOf must be an array");return re.fullPath=et,re}var Se=!1,Re=Yt.value;if(jt.forEach(function(pi){!Re||(Re=Re[pi])}),Re=rt({},Re),!Sh()(Re)){delete Re.allOf;var ai,ri=[];return ri.push(ft.replace(jt,{})),H.forEach(function(pi,Ri){if(!ft.isObject(pi)){if(Se)return null;Se=!0;var ji=new TypeError("Elements in allOf must be objects");return ji.fullPath=et,ri.push(ji)}ri.push(ft.mergeDeep(jt,pi));var rn=function(S,H){var j=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},et=j.specmap,ft=j.getBaseUrlForNodePath,Yt=void 0===ft?function(Re){var ri;return et.getContext(Ie()(ri=[]).call(ri,Va(H),Va(Re))).baseDoc}:ft,jt=j.targetKeys,re=void 0===jt?["$ref","$$ref"]:jt,Se=[];return Jn()(S).forEach(function(){if(Di()(re).call(re,this.key)&&"string"==typeof this.node){var ri=this.path,ai=Ie()(H).call(H,this.path),pi=Go(this.node,Yt(ri));Se.push(et.replace(ai,pi))}}),Se}(pi,Ks()(et).call(et,0,-1),{getBaseUrlForNodePath:function(on){var Or;return ft.getContext(Ie()(Or=[]).call(Or,Va(et),[Ri],Va(on))).baseDoc},specmap:ft});ri.push.apply(ri,Va(rn))}),ri.push(ft.mergeDeep(jt,Re)),Re.$$ref||ri.push(ft.remove(Ie()(ai=[]).call(ai,jt,"$$ref"))),ri}}}}},dh={key:"parameters",plugin:function(H,j,et,ft){if(Array.isArray(H)&&H.length){var Yt=Ht()([],H),jt=Ks()(et).call(et,0,-1),re=rt({},so.getIn(ft.spec,jt));return H.forEach(function(Se,Re){try{Yt[Re].default=ft.parameterMacro(re,Se)}catch(ai){var ri=new Error(ai);return ri.fullPath=et,ri}}),so.replace(et,Yt)}return so.replace(et,H)}},wh={key:"properties",plugin:function(H,j,et,ft){var Yt=rt({},H);for(var jt in H)try{Yt[jt].default=ft.modelPropertyMacro(Yt[jt])}catch(Re){var re=new Error(Re);return re.fullPath=et,re}return so.replace(et,Yt)}};var Rh=function(){function S(H){iu(this,S),this.root=Ju(H||{})}return Vr(S,[{key:"set",value:function(j,et){var ft=this.getParent(j,!0);if(ft){var Yt=j[j.length-1],jt=ft.children;jt[Yt]?Nu(jt[Yt],et,ft):jt[Yt]=Ju(et,ft)}else Nu(this.root,et,null)}},{key:"get",value:function(j){if((j=j||[]).length<1)return this.root.value;for(var ft,Yt,et=this.root,jt=0;jt<j.length&&(ft=et.children)[Yt=j[jt]];jt+=1)et=ft[Yt];return et&&et.protoValue}},{key:"getParent",value:function(j,et){return!j||j.length<1?null:j.length<2?this.root:Ks()(j).call(j,0,-1).reduce(function(ft,Yt){if(!ft)return ft;var jt=ft.children;return!jt[Yt]&&et&&(jt[Yt]=Ju(null,ft)),jt[Yt]},this.root)}}]),S}();function Ju(S,H){return Nu({children:{}},S,H)}function Nu(S,H,j){return S.value=H||{},S.protoValue=j?rt(rt({},j.protoValue),S.value):S.value,ze()(S.children).forEach(function(et){var ft=S.children[et];S.children[et]=Nu(ft,ft.value,S)}),S}var Mc=function(){},fa=function(){function S(H){var et,ft,j=this;iu(this,S),Ht()(this,{spec:"",debugLevel:"info",plugins:[],pluginHistory:{},errors:[],mutations:[],promisedPatches:[],state:{},patches:[],context:{},contextTree:new Rh,showDebug:!1,allPatches:[],pluginProp:"specMap",libMethods:Ht()(Object.create(this),so,{getInstance:function(){return j}}),allowMetaPatches:!1},H),this.get=this._get.bind(this),this.getContext=this._getContext.bind(this),this.hasRun=this._hasRun.bind(this),this.wrappedPlugins=ne()(et=At()(ft=this.plugins).call(ft,this.wrapPlugin.bind(this))).call(et,so.isFunction),this.patches.push(so.add([],this.spec)),this.patches.push(so.context([],this.context)),this.updatePatches(this.patches)}return Vr(S,[{key:"debug",value:function(j){if(this.debugLevel===j){for(var et,ft=arguments.length,Yt=new Array(ft>1?ft-1:0),jt=1;jt<ft;jt++)Yt[jt-1]=arguments[jt];(et=console).log.apply(et,Yt)}}},{key:"verbose",value:function(j){if("verbose"===this.debugLevel){for(var et,ft,Yt=arguments.length,jt=new Array(Yt>1?Yt-1:0),re=1;re<Yt;re++)jt[re-1]=arguments[re];(et=console).log.apply(et,Ie()(ft=["[".concat(j,"]   ")]).call(ft,jt))}}},{key:"wrapPlugin",value:function(j,et){var jt,Se,Re,ft=this.pathDiscriminator,Yt=null;return j[this.pluginProp]?(Yt=j,jt=j[this.pluginProp]):so.isFunction(j)?jt=j:so.isObject(j)&&(Se=j,Re=function(ai,pi){return!Array.isArray(ai)||ai.every(function(Ri,ji){return Ri===pi[ji]})},jt=Ne().mark(function ri(ai,pi){var Ri,ji,nn,rn,Mn,on;return Ne().wrap(function(Kr){for(;;)switch(Kr.prev=Kr.next){case 0:on=function(go,xr,Fo){var Ra,Ls,se,Fr,Ns,$s,xc,kc,Hu,Qu,Ah,Il,od;return Ne().wrap(function(Na){for(;;)switch(Na.prev=Na.next){case 0:if(so.isObject(go)){Na.next=6;break}if(Se.key!==xr[xr.length-1]){Na.next=4;break}return Na.next=4,Se.plugin(go,Se.key,xr,pi);case 4:Na.next=30;break;case 6:Ls=xr[Ra=xr.length-1],se=xr.indexOf("properties"),Fr="properties"===Ls&&Ra===se,Ns=pi.allowMetaPatches&&ji[go.$$ref],$s=0,xc=ze()(go);case 12:if(!($s<xc.length)){Na.next=30;break}if(Hu=go[kc=xc[$s]],Qu=Ie()(xr).call(xr,kc),Ah=so.isObject(Hu),Il=go.$$ref,Ns){Na.next=22;break}if(!Ah){Na.next=22;break}return pi.allowMetaPatches&&Il&&(ji[Il]=!0),Na.delegateYield(on(Hu,Qu,Fo),"t0",22);case 22:if(Fr||kc!==Se.key){Na.next=27;break}if(od=Re(ft,xr),ft&&!od){Na.next=27;break}return Na.next=27,Se.plugin(Hu,kc,Qu,pi,Fo);case 27:$s++,Na.next=12;break;case 30:case"end":return Na.stop()}},Ri)},Ri=Ne().mark(on),ji={},nn=Rt(ne()(ai).call(ai,so.isAdditiveMutation)),Kr.prev=4,nn.s();case 6:if((rn=nn.n()).done){Kr.next=11;break}return Kr.delegateYield(on((Mn=rn.value).value,Mn.path,Mn),"t0",9);case 9:Kr.next=6;break;case 11:Kr.next=16;break;case 13:Kr.prev=13,Kr.t1=Kr.catch(4),nn.e(Kr.t1);case 16:return Kr.prev=16,nn.f(),Kr.finish(16);case 19:case"end":return Kr.stop()}},ri,null,[[4,13,16,19]])})),Ht()(jt.bind(Yt),{pluginName:j.name||et,isGenerator:so.isGenerator(jt)})}},{key:"nextPlugin",value:function(){var j,et=this;return nc()(j=this.wrappedPlugins).call(j,function(ft){return et.getMutationsForPlugin(ft).length>0})}},{key:"nextPromisedPatch",value:function(){var j;if(this.promisedPatches.length>0)return bs().race(At()(j=this.promisedPatches).call(j,function(et){return et.value}))}},{key:"getPluginHistory",value:function(j){var et=this.constructor.getPluginName(j);return this.pluginHistory[et]||[]}},{key:"getPluginRunCount",value:function(j){return this.getPluginHistory(j).length}},{key:"getPluginHistoryTip",value:function(j){var et=this.getPluginHistory(j);return et&&et[et.length-1]||{}}},{key:"getPluginMutationIndex",value:function(j){var et=this.getPluginHistoryTip(j).mutationIndex;return"number"!=typeof et?-1:et}},{key:"updatePluginHistory",value:function(j,et){var ft=this.constructor.getPluginName(j);this.pluginHistory[ft]=this.pluginHistory[ft]||[],this.pluginHistory[ft].push(et)}},{key:"updatePatches",value:function(j){var et=this;so.normalizeArray(j).forEach(function(ft){if(ft instanceof Error)et.errors.push(ft);else try{if(!so.isObject(ft))return void et.debug("updatePatches","Got a non-object patch",ft);if(et.showDebug&&et.allPatches.push(ft),so.isPromise(ft.value))return et.promisedPatches.push(ft),void et.promisedPatchThen(ft);if(so.isContextPatch(ft))return void et.setContext(ft.path,ft.value);if(so.isMutation(ft))return void et.updateMutations(ft)}catch(Yt){console.error(Yt),et.errors.push(Yt)}})}},{key:"updateMutations",value:function(j){"object"===ht(j.value)&&!Array.isArray(j.value)&&this.allowMetaPatches&&(j.value=rt({},j.value));var et=so.applyPatch(this.state,j,{allowMetaPatches:this.allowMetaPatches});et&&(this.mutations.push(j),this.state=et)}},{key:"removePromisedPatch",value:function(j){var et,ft=this.promisedPatches.indexOf(j);ft<0?this.debug("Tried to remove a promisedPatch that isn't there!"):rc()(et=this.promisedPatches).call(et,ft,1)}},{key:"promisedPatchThen",value:function(j){var et=this;return j.value=j.value.then(function(ft){var Yt=rt(rt({},j),{},{value:ft});et.removePromisedPatch(j),et.updatePatches(Yt)}).catch(function(ft){et.removePromisedPatch(j),et.updatePatches(ft)}),j.value}},{key:"getMutations",value:function(j,et){var ft;return j=j||0,"number"!=typeof et&&(et=this.mutations.length),Ks()(ft=this.mutations).call(ft,j,et)}},{key:"getCurrentMutations",value:function(){return this.getMutationsForPlugin(this.getCurrentPlugin())}},{key:"getMutationsForPlugin",value:function(j){var et=this.getPluginMutationIndex(j);return this.getMutations(et+1)}},{key:"getCurrentPlugin",value:function(){return this.currentPlugin}},{key:"getLib",value:function(){return this.libMethods}},{key:"_get",value:function(j){return so.getIn(this.state,j)}},{key:"_getContext",value:function(j){return this.contextTree.get(j)}},{key:"setContext",value:function(j,et){return this.contextTree.set(j,et)}},{key:"_hasRun",value:function(j){return this.getPluginRunCount(this.getCurrentPlugin())>(j||0)}},{key:"dispatch",value:function(){var re,j=this,et=this,ft=this.nextPlugin();if(!ft){var Yt=this.nextPromisedPatch();if(Yt)return Yt.then(function(){return j.dispatch()}).catch(function(){return j.dispatch()});var jt={spec:this.state,errors:this.errors};return this.showDebug&&(jt.patches=this.allPatches),bs().resolve(jt)}if(et.pluginCount=et.pluginCount||{},et.pluginCount[ft]=(et.pluginCount[ft]||0)+1,et.pluginCount[ft]>100)return bs().resolve({spec:et.state,errors:Ie()(re=et.errors).call(re,new Error("We've reached a hard limit of ".concat(100," plugin runs")))});if(ft!==this.currentPlugin&&this.promisedPatches.length){var Se,Re=At()(Se=this.promisedPatches).call(Se,function(pi){return pi.value});return bs().all(At()(Re).call(Re,function(pi){return pi.then(Mc,Mc)})).then(function(){return j.dispatch()})}return function(){et.currentPlugin=ft;var pi=et.getCurrentMutations(),Ri=et.mutations.length-1;try{if(ft.isGenerator){var nn,ji=Rt(ft(pi,et.getLib()));try{for(ji.s();!(nn=ji.n()).done;)ai(nn.value)}catch(on){ji.e(on)}finally{ji.f()}}else ai(ft(pi,et.getLib()))}catch(on){console.error(on),ai([Ht()(Object.create(on),{plugin:ft})])}finally{et.updatePluginHistory(ft,{mutationIndex:Ri})}return et.dispatch()}();function ai(pi){pi&&(pi=so.fullyNormalizeArray(pi),et.updatePatches(pi,ft))}}}],[{key:"getPluginName",value:function(j){return j.pluginName}},{key:"getPatchesOfType",value:function(j,et){return ne()(j).call(j,et)}}]),S}(),Ul={refs:uh,allOf:Ku,parameters:dh,properties:wh},$u=m(6264),sa=m.n($u),Rl=function(H){return String.prototype.toLowerCase.call(H)},cu=function(H){return H.replace(/[^\w]/gi,"_")};function uu(S){var H=S.openapi;return!!H&&xt()(H).call(H,"3")}function hu(S,H){var j=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",et=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},ft=et.v2OperationIdCompatibilityMode;if(!S||"object"!==ht(S))return null;var Yt=(S.operationId||"").replace(/\s/g,"");return Yt.length?cu(S.operationId):ph(H,j,{v2OperationIdCompatibilityMode:ft})}function ph(S,H){var j,et=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},ft=et.v2OperationIdCompatibilityMode;if(ft){var Yt,jt,re=Ie()(Yt="".concat(H.toLowerCase(),"_")).call(Yt,S).replace(/[\s!@#$%^&*()_+=[{\]};:<>|./?,\\'""-]/g,"_");return(re=re||Ie()(jt="".concat(S.substring(1),"_")).call(jt,H)).replace(/((_){2,})/g,"_").replace(/^(_)*/g,"").replace(/([_])*$/g,"")}return Ie()(j="".concat(Rl(H))).call(j,cu(S))}function Gr(S,H){var j;return Ie()(j="".concat(Rl(H),"-")).call(j,S)}function Ac(S,H,j){if(!S||"object"!==ht(S)||!S.paths||"object"!==ht(S.paths))return null;var et=S.paths;for(var ft in et)for(var Yt in et[ft])if("PARAMETERS"!==Yt.toUpperCase()){var jt=et[ft][Yt];if(jt&&"object"===ht(jt)){var re={spec:S,pathName:ft,method:Yt.toUpperCase(),operation:jt},Se=H(re);if(j&&Se)return re}}}function ml(S){var H=S.spec,j=H.paths,et={};if(!j||H.$$normalized)return S;for(var ft in j){var Yt=j[ft];if(sa()(Yt)){var jt=Yt.parameters,re=function(ai){var pi=Yt[ai];if(!sa()(pi))return"continue";var Ri=hu(pi,ft,ai);if(Ri){et[Ri]?et[Ri].push(pi):et[Ri]=[pi];var ji=et[Ri];if(ji.length>1)ji.forEach(function(Ls,se){var Fr;Ls.__originalOperationId=Ls.__originalOperationId||Ls.operationId,Ls.operationId=Ie()(Fr="".concat(Ri)).call(Fr,se+1)});else if(void 0!==pi.operationId){var nn=ji[0];nn.__originalOperationId=nn.__originalOperationId||pi.operationId,nn.operationId=Ri}}if("parameters"!==ai){var rn=[],Mn={};for(var on in H)("produces"===on||"consumes"===on||"security"===on)&&(Mn[on]=H[on],rn.push(Mn));if(jt&&(Mn.parameters=jt,rn.push(Mn)),rn.length){var Kr,Or=Rt(rn);try{for(Or.s();!(Kr=Or.n()).done;){var ls=Kr.value;for(var go in ls)if(pi[go]){if("parameters"===go){var Fo,xr=Rt(ls[go]);try{var Ra=function(){var se=Fo.value;pi[go].some(function(Ns){return Ns.name&&Ns.name===se.name||Ns.$ref&&Ns.$ref===se.$ref||Ns.$$ref&&Ns.$$ref===se.$$ref||Ns===se})||pi[go].push(se)};for(xr.s();!(Fo=xr.n()).done;)Ra()}catch(Ls){xr.e(Ls)}finally{xr.f()}}}else pi[go]=ls[go]}}catch(Ls){Or.e(Ls)}finally{Or.f()}}}};for(var Se in Yt)re(Se)}}return H.$$normalized=!0,S}function du(S){var H=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},j=H.requestInterceptor,et=H.responseInterceptor,ft=S.withCredentials?"include":"same-origin";return function(Yt){return S({url:Yt,loadSpec:!0,requestInterceptor:j,responseInterceptor:et,headers:{Accept:po},credentials:ft}).then(function(jt){return jt.body})}}function Pu(S){var j=S.spec,ft=S.mode,Yt=S.allowMetaPatches,jt=void 0===Yt||Yt,re=S.pathDiscriminator,Se=S.modelPropertyMacro,Re=S.parameterMacro,ri=S.requestInterceptor,ai=S.responseInterceptor,pi=S.skipNormalization,Ri=S.useCircularStructures,ji=S.http,nn=S.baseDoc;return nn=nn||S.url,ji=S.fetch||ji||ec,j?rn(j):du(ji,{requestInterceptor:ri,responseInterceptor:ai})(nn).then(rn);function rn(Mn){nn&&(Ul.refs.docCache[nn]=Mn),Ul.refs.fetchJSON=du(ji,{requestInterceptor:ri,responseInterceptor:ai});var on=[Ul.refs];return"function"==typeof Re&&on.push(Ul.parameters),"function"==typeof Se&&on.push(Ul.properties),"strict"!==ft&&on.push(Ul.allOf),function(S){return new fa(S).dispatch()}({spec:Mn,context:{baseDoc:nn},plugins:on,allowMetaPatches:jt,pathDiscriminator:re,parameterMacro:Re,modelPropertyMacro:Se,useCircularStructures:Ri}).then(pi?function(){var Or=ue(Ne().mark(function Kr(ls){return Ne().wrap(function(xr){for(;;)switch(xr.prev=xr.next){case 0:return xr.abrupt("return",ls);case 1:case"end":return xr.stop()}},Kr)}));return function(Kr){return Or.apply(this,arguments)}}():ml)}}var gh=m(36817),Dl=m.n(gh);function Oc(){return Oc=ue(Ne().mark(function S(H,j){var et,ft,ai,pi,Ri,ji,nn=arguments;return Ne().wrap(function(Mn){for(;;)switch(Mn.prev=Mn.next){case 0:return ft=(et=nn.length>2&&void 0!==nn[2]?nn[2]:{}).returnEntireTree,ai={pathDiscriminator:j,baseDoc:et.baseDoc,requestInterceptor:et.requestInterceptor,responseInterceptor:et.responseInterceptor,parameterMacro:et.parameterMacro,modelPropertyMacro:et.modelPropertyMacro,useCircularStructures:et.useCircularStructures},pi=ml({spec:H}),Ri=pi.spec,Mn.next=6,Pu(rt(rt({},ai),{},{spec:Ri,allowMetaPatches:!0,skipNormalization:!0}));case 6:return ji=Mn.sent,!ft&&Array.isArray(j)&&j.length&&(ji.spec=Dl()(ji.spec,j)||null),Mn.abrupt("return",ji);case 9:case"end":return Mn.stop()}},S)})),Oc.apply(this,arguments)}var Ih=function(){return null},fu_mapTagOperations=function(S){var H=S.spec,j=S.cb,et=void 0===j?Ih:j,ft=S.defaultTag,Yt=void 0===ft?"default":ft,jt=S.v2OperationIdCompatibilityMode,re={},Se={};return Ac(H,function(Re){var ri=Re.pathName,ai=Re.method,pi=Re.operation,Ri=pi.tags?function(H){return Array.isArray(H)?H:[H]}(pi.tags):[Yt];Ri.forEach(function(ji){if("string"==typeof ji){Se[ji]=Se[ji]||{};var on,nn=Se[ji],rn=hu(pi,ri,ai,{v2OperationIdCompatibilityMode:jt}),Mn=et({spec:H,pathName:ri,method:ai,operation:pi,operationId:rn});if(re[rn])re[rn]+=1,nn[Ie()(on="".concat(rn)).call(on,re[rn])]=Mn;else if(void 0!==nn[rn]){var Or,Kr,ls=re[rn]||1;re[rn]=ls+1,nn[Ie()(Or="".concat(rn)).call(Or,re[rn])]=Mn;var go=nn[rn];delete nn[rn],nn[Ie()(Kr="".concat(rn)).call(Kr,ls)]=go}else nn[rn]=Mn}})}),Se},fu_makeExecute=function(){var S=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(H){var j=H.pathName,et=H.method,ft=H.operationId;return function(Yt){var jt=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},re=S.requestInterceptor,Se=S.responseInterceptor,Re=S.userFetch;return S.execute(rt({spec:S.spec,requestInterceptor:re,responseInterceptor:Se,userFetch:Re,pathName:j,method:et,parameters:Yt,operationId:ft},jt))}}},Qc=m(25918);var vo=m(27935),Vl=m.n(vo),mh=m(88941);const _h={body:function(S){S.req.body=S.value},header:function(S){var H=S.req,j=S.parameter,et=S.value;H.headers=H.headers||{},void 0!==et&&(H.headers[j.name]=et)},query:function(S){var H=S.req,j=S.value,et=S.parameter;if(H.query=H.query||{},!1===j&&"boolean"===et.type&&(j="false"),0===j&&["number","integer"].indexOf(et.type)>-1&&(j="0"),j)H.query[et.name]={collectionFormat:et.collectionFormat,value:j};else if(et.allowEmptyValue&&void 0!==j){var ft=et.name;H.query[ft]=H.query[ft]||{},H.query[ft].allowEmptyValue=!0}},path:function(S){var H=S.req,j=S.value;H.url=H.url.split("{".concat(S.parameter.name,"}")).join(encodeURIComponent(j))},formData:function(S){var H=S.req,j=S.value,et=S.parameter;(j||et.allowEmptyValue)&&(H.form=H.form||{},H.form[et.name]={value:j,allowEmptyValue:et.allowEmptyValue,collectionFormat:et.collectionFormat})}};function N(S,H){return Di()(H).call(H,"application/json")?"string"==typeof S?S:$t()(S):S.toString()}function Y(S){var H=S.req,j=S.value,et=S.parameter,ft=et.name,Yt=et.style,jt=et.explode,re=et.content;if(re){var Se=ze()(re)[0];H.url=H.url.split("{".concat(ft,"}")).join(Lo(N(j,Se),{escape:!0}))}else{var Re=No({key:et.name,value:j,style:Yt||"simple",explode:jt||!1,escape:!0});H.url=H.url.split("{".concat(ft,"}")).join(Re)}}function ut(S){var H=S.req,j=S.value,et=S.parameter;if(H.query=H.query||{},et.content){var ft=ze()(et.content)[0];H.query[et.name]=N(j,ft)}else if(!1===j&&(j="false"),0===j&&(j="0"),j)H.query[et.name]={value:j,serializationOption:{style:et.style,explode:et.explode,allowReserved:et.allowReserved}};else if(et.allowEmptyValue&&void 0!==j){var Se=et.name;H.query[Se]=H.query[Se]||{},H.query[Se].allowEmptyValue=!0}}var Tt=["accept","authorization","content-type"];function Vt(S){var H=S.req,j=S.parameter,et=S.value;if(H.headers=H.headers||{},!(Tt.indexOf(j.name.toLowerCase())>-1)){if(j.content){var ft=ze()(j.content)[0];return void(H.headers[j.name]=N(et,ft))}void 0!==et&&(H.headers[j.name]=No({key:j.name,value:et,style:j.style||"simple",explode:void 0!==j.explode&&j.explode,escape:!1}))}}function Kt(S){var H=S.req,j=S.parameter,et=S.value;H.headers=H.headers||{};var ft=ht(et);if(j.content){var Yt,jt=ze()(j.content)[0];H.headers.Cookie=Ie()(Yt="".concat(j.name,"=")).call(Yt,N(et,jt))}else if("undefined"!==ft){var re="object"===ft&&!Array.isArray(et)&&j.explode?"":"".concat(j.name,"=");H.headers.Cookie=re+No({key:j.name,value:et,escape:!1,style:j.style||"form",explode:void 0!==j.explode&&j.explode})}}var Me=m(34686),Xe=m.n(Me);var an=["http","fetch","spec","operationId","pathName","method","parameters","securities"],mn=function(H){return Array.isArray(H)?H:[]},Cn=xi("OperationNotFoundError",function(H,j,et){this.originalError=et,Ht()(this,j||{})}),Xn={buildRequest:mr};function mr(S){var H,j,et=S.spec,ft=S.operationId,Yt=S.responseContentType,jt=S.scheme,re=S.requestInterceptor,Se=S.responseInterceptor,Re=S.contextUrl,ri=S.userFetch,ai=S.server,pi=S.serverVariables,Ri=S.http,ji=S.parameters,nn=S.parameterBuilders,rn=uu(et);nn||(nn=rn?e:_h);var on={url:"",credentials:Ri&&Ri.withCredentials?"include":"same-origin",headers:{},cookies:{}};re&&(on.requestInterceptor=re),Se&&(on.responseInterceptor=Se),ri&&(on.userFetch=ri);var Or=function(S,H){return S&&S.paths?function(S,H){return Ac(S,H,!0)||null}(S,function(j){var et=j.pathName,ft=j.method,Yt=j.operation;if(!Yt||"object"!==ht(Yt))return!1;var jt=Yt.operationId;return[hu(Yt,et,ft),Gr(et,ft),jt].some(function(Re){return Re&&Re===H})}):null}(et,ft);if(!Or)throw new Cn("Operation ".concat(ft," not found"));var Kr=Or.operation,ls=void 0===Kr?{}:Kr,go=Or.method,xr=Or.pathName;if(on.url+=Es({spec:et,scheme:jt,contextUrl:Re,server:ai,serverVariables:pi,pathName:xr,method:go}),!ft)return delete on.cookies,on;on.url+=xr,on.method="".concat(go).toUpperCase(),ji=ji||{};var Fo=et.paths[xr]||{};Yt&&(on.headers.accept=Yt);var Ra=function(H){var j={};H.forEach(function(ft){j[ft.in]||(j[ft.in]={}),j[ft.in][ft.name]=ft});var et=[];return ze()(j).forEach(function(ft){ze()(j[ft]).forEach(function(Yt){et.push(j[ft][Yt])})}),et}(Ie()(H=Ie()(j=[]).call(j,mn(ls.parameters))).call(H,mn(Fo.parameters)));Ra.forEach(function(Fr){var $s,xc,Ns=nn[Fr.in];if("body"===Fr.in&&Fr.schema&&Fr.schema.properties&&($s=ji),void 0===($s=Fr&&Fr.name&&ji[Fr.name]))$s=Fr&&Fr.name&&ji[Ie()(xc="".concat(Fr.in,".")).call(xc,Fr.name)];else if(function(H,j){return ne()(j).call(j,function(et){return et.name===H})}(Fr.name,Ra).length>1){var kc;console.warn(Ie()(kc="Parameter '".concat(Fr.name,"' is ambiguous because the defined spec has more than one parameter with the name: '")).call(kc,Fr.name,"' and the passed-in parameter values did not define an 'in' value."))}if(null!==$s){if(void 0!==Fr.default&&void 0===$s&&($s=Fr.default),void 0===$s&&Fr.required&&!Fr.allowEmptyValue)throw new Error("Required parameter ".concat(Fr.name," is not provided"));if(rn&&Fr.schema&&"object"===Fr.schema.type&&"string"==typeof $s)try{$s=JSON.parse($s)}catch(Hu){throw new Error("Could not parse object parameter value string as JSON")}Ns&&Ns({req:on,parameter:Fr,value:$s,operation:ls,spec:et})}});var Ls=rt(rt({},S),{},{operation:ls});if((on=rn?function(S,H){var j=S.operation,et=S.requestBody,jt=S.attachContentTypeForEmptyPayload,re=S.requestContentType;H=function(S){var H=S.request,j=S.securities,et=void 0===j?{}:j,ft=S.operation,Yt=void 0===ft?{}:ft,jt=S.spec,re=rt({},H),Se=et.authorized,Re=void 0===Se?{}:Se,ri=Yt.security||jt.security||[],ai=Re&&!!ze()(Re).length,pi=Dl()(jt,["components","securitySchemes"])||{};return re.headers=re.headers||{},re.query=re.query||{},ze()(et).length&&ai&&ri&&(!Array.isArray(Yt.security)||Yt.security.length)?(ri.forEach(function(Ri){ze()(Ri).forEach(function(ji){var nn=Re[ji],rn=pi[ji];if(nn){var Mn=nn.value||nn,on=rn.type;if(nn)if("apiKey"===on)"query"===rn.in&&(re.query[rn.name]=Mn),"header"===rn.in&&(re.headers[rn.name]=Mn),"cookie"===rn.in&&(re.cookies[rn.name]=Mn);else if("http"===on){if(/^basic$/i.test(rn.scheme)){var Or,Kr=Mn.username||"",ls=Mn.password||"",go=Xe()(Ie()(Or="".concat(Kr,":")).call(Or,ls));re.headers.Authorization="Basic ".concat(go)}/^bearer$/i.test(rn.scheme)&&(re.headers.Authorization="Bearer ".concat(Mn))}else if("oauth2"===on||"openIdConnect"===on){var xr,Fo=nn.token||{},Ls=Fo[rn["x-tokenName"]||"access_token"],se=Fo.token_type;(!se||"bearer"===se.toLowerCase())&&(se="Bearer"),re.headers.Authorization=Ie()(xr="".concat(se," ")).call(xr,Ls)}}})}),re):H}({request:H,securities:S.securities,operation:j,spec:S.spec});var Se=j.requestBody||{},Re=ze()(Se.content||{}),ri=re&&Re.indexOf(re)>-1;if(et||jt){if(re&&ri)H.headers["Content-Type"]=re;else if(!re){var ai=Re[0];ai&&(H.headers["Content-Type"]=ai,re=ai)}}else re&&ri&&(H.headers["Content-Type"]=re);if(!S.responseContentType&&j.responses){var pi,Ri=ne()(pi=ee()(j.responses)).call(pi,function(nn){var rn=Nt(nn,2),on=rn[1],Or=parseInt(rn[0],10);return Or>=200&&Or<300&&Vl()(on.content)}).reduce(function(nn,rn){var on=Nt(rn,2)[1];return Ie()(nn).call(nn,ze()(on.content))},[]);Ri.length>0&&(H.headers.accept=Ri.join(", "))}if(et)if(re){if(Re.indexOf(re)>-1)if("application/x-www-form-urlencoded"===re||"multipart/form-data"===re)if("object"===ht(et)){var ji=(Se.content[re]||{}).encoding||{};H.form={},ze()(et).forEach(function(nn){H.form[nn]={value:et[nn],encoding:ji[nn]||{}}})}else H.form=et;else H.body=et}else H.body=et;return H}(Ls,on):function(S,H){var Se,Re,j=S.spec,et=S.operation,Yt=S.requestContentType,jt=S.responseContentType,re=S.attachContentTypeForEmptyPayload;if(H=function(S){var H=S.request,j=S.securities,et=void 0===j?{}:j,ft=S.operation,Yt=void 0===ft?{}:ft,jt=S.spec,re=rt({},H),Se=et.authorized,Re=void 0===Se?{}:Se,ri=et.specSecurity,pi=Yt.security||(void 0===ri?[]:ri),Ri=Re&&!!ze()(Re).length,ji=jt.securityDefinitions;return re.headers=re.headers||{},re.query=re.query||{},ze()(et).length&&Ri&&pi&&(!Array.isArray(Yt.security)||Yt.security.length)?(pi.forEach(function(nn){ze()(nn).forEach(function(rn){var Mn=Re[rn];if(Mn){var on=Mn.token,Or=Mn.value||Mn,Kr=ji[rn],ls=Kr.type,xr=on&&on[Kr["x-tokenName"]||"access_token"],Fo=on&&on.token_type;if(Mn)if("apiKey"===ls){var Ra="query"===Kr.in?"query":"headers";re[Ra]=re[Ra]||{},re[Ra][Kr.name]=Or}else if("basic"===ls)if(Or.header)re.headers.authorization=Or.header;else{var Ls,se=Or.username||"",Fr=Or.password||"";Or.base64=Xe()(Ie()(Ls="".concat(se,":")).call(Ls,Fr)),re.headers.authorization="Basic ".concat(Or.base64)}else if("oauth2"===ls&&xr){var Ns;Fo=Fo&&"bearer"!==Fo.toLowerCase()?Fo:"Bearer",re.headers.authorization=Ie()(Ns="".concat(Fo," ")).call(Ns,xr)}}})}),re):H}({request:H,securities:S.securities,operation:et,spec:j}),H.body||H.form||re)if(Yt)H.headers["Content-Type"]=Yt;else if(Array.isArray(et.consumes)){var ri=Nt(et.consumes,1);H.headers["Content-Type"]=ri[0]}else if(Array.isArray(j.consumes)){var ai=Nt(j.consumes,1);H.headers["Content-Type"]=ai[0]}else et.parameters&&ne()(Se=et.parameters).call(Se,function(rn){return"file"===rn.type}).length?H.headers["Content-Type"]="multipart/form-data":et.parameters&&ne()(Re=et.parameters).call(Re,function(rn){return"formData"===rn.in}).length&&(H.headers["Content-Type"]="application/x-www-form-urlencoded");else if(Yt){var pi,Ri,ji=et.parameters&&ne()(pi=et.parameters).call(pi,function(rn){return"body"===rn.in}).length>0,nn=et.parameters&&ne()(Ri=et.parameters).call(Ri,function(rn){return"formData"===rn.in}).length>0;(ji||nn)&&(H.headers["Content-Type"]=Yt)}return!jt&&Array.isArray(et.produces)&&et.produces.length>0&&(H.headers.accept=et.produces.join(", ")),H}(Ls,on)).cookies&&ze()(on.cookies).length){var se=ze()(on.cookies).reduce(function(Fr,Ns){return Fr+(Fr?"&":"")+mh.serialize(Ns,on.cookies[Ns])},"");on.headers.Cookie=se}return on.cookies&&delete on.cookies,Ga(on),on}var fo=function(H){return H?H.replace(/\W/g,""):null};function Es(S){return uu(S.spec)?function(S){var H=S.spec,j=S.pathName,et=S.method,ft=S.server,Yt=S.contextUrl,jt=S.serverVariables,re=void 0===jt?{}:jt,Se=Dl()(H,["paths",j,(et||"").toLowerCase(),"servers"])||Dl()(H,["paths",j,"servers"])||Dl()(H,["servers"]),Re="",ri=null;if(ft&&Se&&Se.length){var ai=At()(Se).call(Se,function(ji){return ji.url});ai.indexOf(ft)>-1&&(Re=ft,ri=Se[ai.indexOf(ft)])}if(!Re&&Se&&Se.length){Re=Se[0].url;var pi=Nt(Se,1);ri=pi[0]}if(Re.indexOf("{")>-1){var Ri=function(S){for(var et,H=[],j=/{([^}]+)}/g;et=j.exec(S);)H.push(et[1]);return H}(Re);Ri.forEach(function(ji){if(ri.variables&&ri.variables[ji]){var rn=re[ji]||ri.variables[ji].default,Mn=new RegExp("{".concat(ji,"}"),"g");Re=Re.replace(Mn,rn)}})}return function(){var re,Se,S=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",H=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",j=Wt.parse(S&&H?Wt.resolve(H,S):S),et=Wt.parse(H),ft=fo(j.protocol)||fo(et.protocol)||"",Yt=j.host||et.host,jt=j.pathname||"";return"/"===(re=ft&&Yt?Ie()(Se="".concat(ft,"://")).call(Se,Yt+jt):jt)[re.length-1]?Ks()(re).call(re,0,-1):re}(Re,Yt)}(S):function(S){var ri,ai,H=S.spec,j=S.scheme,et=S.contextUrl,Yt=Wt.parse(void 0===et?"":et),jt=Array.isArray(H.schemes)?H.schemes[0]:null,re=j||jt||fo(Yt.protocol)||"http",Se=H.host||Yt.host||"",Re=H.basePath||"";return"/"===(ri=re&&Se?Ie()(ai="".concat(re,"://")).call(ai,Se+Re):Re)[ri.length-1]?Ks()(ri).call(ri,0,-1):ri}(S)}function Xr(S){var H=this,j=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("string"==typeof S?j.url=S:j=S,!(this instanceof Xr))return new Xr(j);Ht()(this,j);var et=this.resolve().then(function(){return H.disableInterfaces||Ht()(H,Xr.makeApisTagOperation(H)),H});return et.client=this,et}Xr.makeHttp=function(S,H,j){return j=j||function(et){return et},H=H||function(et){return et},function(et){return"string"==typeof et&&(et={url:et}),Su.mergeInQueryOrForm(et),et=H(et),j(S(et))}}.bind(null,Xr.http=ec),Xr.resolve=Pu,Xr.resolveSubtree=function(S,H){return Oc.apply(this,arguments)},Xr.execute=function(S){var H=S.http,j=S.fetch,et=S.spec,ft=S.operationId,Yt=S.pathName,jt=S.method,re=S.parameters,Se=S.securities,Re=function(S,H){if(null==S)return{};var et,ft,j=function(S,H){if(null==S)return{};var ft,Yt,j={},et=t(S);for(Yt=0;Yt<et.length;Yt++)ft=et[Yt],!(Qc(H).call(H,ft)>=0)&&(j[ft]=S[ft]);return j}(S,H);if(n){var Yt=n(S);for(ft=0;ft<Yt.length;ft++)et=Yt[ft],!(Qc(H).call(H,et)>=0)&&(!Object.prototype.propertyIsEnumerable.call(S,et)||(j[et]=S[et]))}return j}(S,an),ri=H||j||ec;Yt&&jt&&!ft&&(ft=Gr(Yt,jt));var ai=Xn.buildRequest(rt({spec:et,operationId:ft,parameters:re,securities:Se,http:ri},Re));return ai.body&&(Vl()(ai.body)||Array.isArray(ai.body))&&(ai.body=$t()(ai.body)),ri(ai)},Xr.serializeRes=ah,Xr.serializeHeaders=eu,Xr.clearCache=function(){Ul.refs.clearCache()},Xr.makeApisTagOperation=function(){var S=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},H=fu_makeExecute(S);return{apis:fu_mapTagOperations({v2OperationIdCompatibilityMode:S.v2OperationIdCompatibilityMode,spec:S.spec,cb:H})}},Xr.buildRequest=mr,Xr.helpers={opId:hu},Xr.getBaseUrl=Es,(Xr.prototype={http:ec,execute:function(H){return this.applyDefaults(),Xr.execute(rt({spec:this.spec,http:this.http,securities:{authorized:this.authorizations},contextUrl:"string"==typeof this.url?this.url:void 0,requestInterceptor:this.requestInterceptor||null,responseInterceptor:this.responseInterceptor||null},H))},resolve:function(){var H=this,j=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Xr.resolve(rt({spec:this.spec,url:this.url,http:this.http||this.fetch,allowMetaPatches:this.allowMetaPatches,useCircularStructures:this.useCircularStructures,requestInterceptor:this.requestInterceptor||null,responseInterceptor:this.responseInterceptor||null,skipNormalization:this.skipNormalization||!1},j)).then(function(et){return H.originalSpec=H.spec,H.spec=et.spec,H.errors=et.errors,H})}}).applyDefaults=function(){var H=this.spec,j=this.url;if(j&&xt()(j).call(j,"http")){var et=Wt.parse(j);H.host||(H.host=et.host),H.schemes||(H.schemes=[et.protocol.replace(":","")]),H.basePath||(H.basePath="/")}};var ks=Xr.helpers;const as=Xr},31365:U=>{"use strict";var $=String.prototype.replace,m=/%20/g;U.exports={default:"RFC3986",formatters:{RFC1738:function(_){return $.call(_,m,"+")},RFC3986:function(_){return String(_)}},RFC1738:"RFC1738",RFC3986:"RFC3986"}},7029:(U,$,m)=>{"use strict";var C=m(21333),_=m(62127),e=m(31365);U.exports={formats:e,parse:_,stringify:C}},62127:(U,$,m)=>{"use strict";var C=m(7260),_=Object.prototype.hasOwnProperty,e=Array.isArray,t={allowDots:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:C.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},r=function(at,rt){return at&&"string"==typeof at&&rt.comma&&at.indexOf(",")>-1?at.split(","):at},B=function(rt,St,Ht,vt){if(rt){var xt=Ht.allowDots?rt.replace(/\.([^.[]+)/g,"[$1]"):rt,Jt=/(\[[^[\]]*])/g,Ct=Ht.depth>0&&/(\[[^[\]]*])/.exec(xt),yt=Ct?xt.slice(0,Ct.index):xt,ot=[];if(yt){if(!Ht.plainObjects&&_.call(Object.prototype,yt)&&!Ht.allowPrototypes)return;ot.push(yt)}for(var mt=0;Ht.depth>0&&null!==(Ct=Jt.exec(xt))&&mt<Ht.depth;){if(mt+=1,!Ht.plainObjects&&_.call(Object.prototype,Ct[1].slice(1,-1))&&!Ht.allowPrototypes)return;ot.push(Ct[1])}return Ct&&ot.push("["+xt.slice(Ct.index)+"]"),function(at,rt,St,Ht){for(var vt=Ht?rt:r(rt,St),xt=at.length-1;xt>=0;--xt){var Wt,Jt=at[xt];if("[]"===Jt&&St.parseArrays)Wt=[].concat(vt);else{Wt=St.plainObjects?Object.create(null):{};var Ct="["===Jt.charAt(0)&&"]"===Jt.charAt(Jt.length-1)?Jt.slice(1,-1):Jt,yt=parseInt(Ct,10);St.parseArrays||""!==Ct?!isNaN(yt)&&Jt!==Ct&&String(yt)===Ct&&yt>=0&&St.parseArrays&&yt<=St.arrayLimit?(Wt=[])[yt]=vt:Wt[Ct]=vt:Wt={0:vt}}vt=Wt}return vt}(ot,St,Ht,vt)}};U.exports=function(at,rt){var St=function(rt){if(!rt)return t;if(null!=rt.decoder&&"function"!=typeof rt.decoder)throw new TypeError("Decoder has to be a function.");if(void 0!==rt.charset&&"utf-8"!==rt.charset&&"iso-8859-1"!==rt.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");return{allowDots:void 0===rt.allowDots?t.allowDots:!!rt.allowDots,allowPrototypes:"boolean"==typeof rt.allowPrototypes?rt.allowPrototypes:t.allowPrototypes,allowSparse:"boolean"==typeof rt.allowSparse?rt.allowSparse:t.allowSparse,arrayLimit:"number"==typeof rt.arrayLimit?rt.arrayLimit:t.arrayLimit,charset:void 0===rt.charset?t.charset:rt.charset,charsetSentinel:"boolean"==typeof rt.charsetSentinel?rt.charsetSentinel:t.charsetSentinel,comma:"boolean"==typeof rt.comma?rt.comma:t.comma,decoder:"function"==typeof rt.decoder?rt.decoder:t.decoder,delimiter:"string"==typeof rt.delimiter||C.isRegExp(rt.delimiter)?rt.delimiter:t.delimiter,depth:"number"==typeof rt.depth||!1===rt.depth?+rt.depth:t.depth,ignoreQueryPrefix:!0===rt.ignoreQueryPrefix,interpretNumericEntities:"boolean"==typeof rt.interpretNumericEntities?rt.interpretNumericEntities:t.interpretNumericEntities,parameterLimit:"number"==typeof rt.parameterLimit?rt.parameterLimit:t.parameterLimit,parseArrays:!1!==rt.parseArrays,plainObjects:"boolean"==typeof rt.plainObjects?rt.plainObjects:t.plainObjects,strictNullHandling:"boolean"==typeof rt.strictNullHandling?rt.strictNullHandling:t.strictNullHandling}}(rt);if(""===at||null==at)return St.plainObjects?Object.create(null):{};for(var Ht="string"==typeof at?function(rt,St){var Ct,Ht={},Wt=(St.ignoreQueryPrefix?rt.replace(/^\?/,""):rt).split(St.delimiter,St.parameterLimit===1/0?void 0:St.parameterLimit),Jt=-1,yt=St.charset;if(St.charsetSentinel)for(Ct=0;Ct<Wt.length;++Ct)0===Wt[Ct].indexOf("utf8=")&&("utf8=%E2%9C%93"===Wt[Ct]?yt="utf-8":"utf8=%26%2310003%3B"===Wt[Ct]&&(yt="iso-8859-1"),Jt=Ct,Ct=Wt.length);for(Ct=0;Ct<Wt.length;++Ct)if(Ct!==Jt){var Ut,Rt,ot=Wt[Ct],mt=ot.indexOf("]="),lt=-1===mt?ot.indexOf("="):mt+1;-1===lt?(Ut=St.decoder(ot,t.decoder,yt,"key"),Rt=St.strictNullHandling?null:""):(Ut=St.decoder(ot.slice(0,lt),t.decoder,yt,"key"),Rt=C.maybeMap(r(ot.slice(lt+1),St),function(Et){return St.decoder(Et,t.decoder,yt,"value")})),Rt&&St.interpretNumericEntities&&"iso-8859-1"===yt&&(Rt=Rt.replace(/&#(\d+);/g,function(rt,St){return String.fromCharCode(parseInt(St,10))})),ot.indexOf("[]=")>-1&&(Rt=e(Rt)?[Rt]:Rt),Ht[Ut]=_.call(Ht,Ut)?C.combine(Ht[Ut],Rt):Rt}return Ht}(at,St):at,vt=St.plainObjects?Object.create(null):{},xt=Object.keys(Ht),Wt=0;Wt<xt.length;++Wt){var Jt=xt[Wt],Ct=B(Jt,Ht[Jt],St,"string"==typeof at);vt=C.merge(vt,Ct,St)}return!0===St.allowSparse?vt:C.compact(vt)}},21333:(U,$,m)=>{"use strict";var C=m(83030),_=m(7260),e=m(31365),t=Object.prototype.hasOwnProperty,n={brackets:function(xt){return xt+"[]"},comma:"comma",indices:function(xt,Wt){return xt+"["+Wt+"]"},repeat:function(xt){return xt}},r=Array.isArray,s=String.prototype.split,u=Array.prototype.push,y=function(vt,xt){u.apply(vt,r(xt)?xt:[xt])},x=Date.prototype.toISOString,B=e.default,Q={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:_.encode,encodeValuesOnly:!1,format:B,formatter:e.formatters[B],indices:!1,serializeDate:function(xt){return x.call(xt)},skipNulls:!1,strictNullHandling:!1},rt={},St=function vt(xt,Wt,Jt,Ct,yt,ot,mt,lt,Ut,Rt,Et,ht,nt,he,Mt){for(var Nt=xt,de=Mt,ve=0,ue=!1;void 0!==(de=de.get(rt))&&!ue;){var Be=de.get(xt);if(ve+=1,void 0!==Be){if(Be===ve)throw new RangeError("Cyclic object value");ue=!0}void 0===de.get(rt)&&(ve=0)}if("function"==typeof mt?Nt=mt(Wt,Nt):Nt instanceof Date?Nt=Rt(Nt):"comma"===Jt&&r(Nt)&&(Nt=_.maybeMap(Nt,function(ze){return ze instanceof Date?Rt(ze):ze})),null===Nt){if(Ct)return ot&&!nt?ot(Wt,Q.encoder,he,"key",Et):Wt;Nt=""}if(function(xt){return"string"==typeof xt||"number"==typeof xt||"boolean"==typeof xt||"symbol"==typeof xt||"bigint"==typeof xt}(Nt)||_.isBuffer(Nt)){if(ot){var Ne=nt?Wt:ot(Wt,Q.encoder,he,"key",Et);if("comma"===Jt&&nt){for(var Qe=s.call(String(Nt),","),Di="",Ze=0;Ze<Qe.length;++Ze)Di+=(0===Ze?"":",")+ht(ot(Qe[Ze],Q.encoder,he,"value",Et));return[ht(Ne)+"="+Di]}return[ht(Ne)+"="+ht(ot(Nt,Q.encoder,he,"value",Et))]}return[ht(Wt)+"="+ht(String(Nt))]}var gi,Le=[];if(void 0===Nt)return Le;if("comma"===Jt&&r(Nt))gi=[{value:Nt.length>0?Nt.join(",")||null:void 0}];else if(r(mt))gi=mt;else{var Bt=Object.keys(Nt);gi=lt?Bt.sort(lt):Bt}for(var Te=0;Te<gi.length;++Te){var $t=gi[Te],_e="object"==typeof $t&&void 0!==$t.value?$t.value:Nt[$t];if(!yt||null!==_e){var At=r(Nt)?"function"==typeof Jt?Jt(Wt,$t):Wt:Wt+(Ut?"."+$t:"["+$t+"]");Mt.set(xt,ve);var pe=C();pe.set(rt,Mt),y(Le,vt(_e,At,Jt,Ct,yt,ot,mt,lt,Ut,Rt,Et,ht,nt,he,pe))}}return Le};U.exports=function(vt,xt){var Ct,Wt=vt,Jt=function(xt){if(!xt)return Q;if(null!=xt.encoder&&"function"!=typeof xt.encoder)throw new TypeError("Encoder has to be a function.");var Wt=xt.charset||Q.charset;if(void 0!==xt.charset&&"utf-8"!==xt.charset&&"iso-8859-1"!==xt.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var Jt=e.default;if(void 0!==xt.format){if(!t.call(e.formatters,xt.format))throw new TypeError("Unknown format option provided.");Jt=xt.format}var Ct=e.formatters[Jt],yt=Q.filter;return("function"==typeof xt.filter||r(xt.filter))&&(yt=xt.filter),{addQueryPrefix:"boolean"==typeof xt.addQueryPrefix?xt.addQueryPrefix:Q.addQueryPrefix,allowDots:void 0===xt.allowDots?Q.allowDots:!!xt.allowDots,charset:Wt,charsetSentinel:"boolean"==typeof xt.charsetSentinel?xt.charsetSentinel:Q.charsetSentinel,delimiter:void 0===xt.delimiter?Q.delimiter:xt.delimiter,encode:"boolean"==typeof xt.encode?xt.encode:Q.encode,encoder:"function"==typeof xt.encoder?xt.encoder:Q.encoder,encodeValuesOnly:"boolean"==typeof xt.encodeValuesOnly?xt.encodeValuesOnly:Q.encodeValuesOnly,filter:yt,format:Jt,formatter:Ct,serializeDate:"function"==typeof xt.serializeDate?xt.serializeDate:Q.serializeDate,skipNulls:"boolean"==typeof xt.skipNulls?xt.skipNulls:Q.skipNulls,sort:"function"==typeof xt.sort?xt.sort:null,strictNullHandling:"boolean"==typeof xt.strictNullHandling?xt.strictNullHandling:Q.strictNullHandling}}(xt);"function"==typeof Jt.filter?Wt=(0,Jt.filter)("",Wt):r(Jt.filter)&&(Ct=Jt.filter);var ot=[];if("object"!=typeof Wt||null===Wt)return"";var lt=n[xt&&xt.arrayFormat in n?xt.arrayFormat:xt&&"indices"in xt?xt.indices?"indices":"repeat":"indices"];Ct||(Ct=Object.keys(Wt)),Jt.sort&&Ct.sort(Jt.sort);for(var Ut=C(),Rt=0;Rt<Ct.length;++Rt){var Et=Ct[Rt];Jt.skipNulls&&null===Wt[Et]||y(ot,St(Wt[Et],Et,lt,Jt.strictNullHandling,Jt.skipNulls,Jt.encode?Jt.encoder:null,Jt.filter,Jt.sort,Jt.allowDots,Jt.serializeDate,Jt.format,Jt.formatter,Jt.encodeValuesOnly,Jt.charset,Ut))}var ht=ot.join(Jt.delimiter),nt=!0===Jt.addQueryPrefix?"?":"";return Jt.charsetSentinel&&(nt+="iso-8859-1"===Jt.charset?"utf8=%26%2310003%3B&":"utf8=%E2%9C%93&"),ht.length>0?nt+ht:""}},7260:(U,$,m)=>{"use strict";var C=m(31365),_=Object.prototype.hasOwnProperty,e=Array.isArray,t=function(){for(var Ht=[],vt=0;vt<256;++vt)Ht.push("%"+((vt<16?"0":"")+vt.toString(16)).toUpperCase());return Ht}(),r=function(vt,xt){for(var Wt=xt&&xt.plainObjects?Object.create(null):{},Jt=0;Jt<vt.length;++Jt)void 0!==vt[Jt]&&(Wt[Jt]=vt[Jt]);return Wt};U.exports={arrayToObject:r,assign:function(vt,xt){return Object.keys(xt).reduce(function(Wt,Jt){return Wt[Jt]=xt[Jt],Wt},vt)},combine:function(vt,xt){return[].concat(vt,xt)},compact:function(vt){for(var xt=[{obj:{o:vt},prop:"o"}],Wt=[],Jt=0;Jt<xt.length;++Jt)for(var Ct=xt[Jt],yt=Ct.obj[Ct.prop],ot=Object.keys(yt),mt=0;mt<ot.length;++mt){var lt=ot[mt],Ut=yt[lt];"object"==typeof Ut&&null!==Ut&&-1===Wt.indexOf(Ut)&&(xt.push({obj:yt,prop:lt}),Wt.push(Ut))}return function(vt){for(;vt.length>1;){var xt=vt.pop(),Wt=xt.obj[xt.prop];if(e(Wt)){for(var Jt=[],Ct=0;Ct<Wt.length;++Ct)void 0!==Wt[Ct]&&Jt.push(Wt[Ct]);xt.obj[xt.prop]=Jt}}}(xt),vt},decode:function(Ht,vt,xt){var Wt=Ht.replace(/\+/g," ");if("iso-8859-1"===xt)return Wt.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(Wt)}catch(Jt){return Wt}},encode:function(vt,xt,Wt,Jt,Ct){if(0===vt.length)return vt;var yt=vt;if("symbol"==typeof vt?yt=Symbol.prototype.toString.call(vt):"string"!=typeof vt&&(yt=String(vt)),"iso-8859-1"===Wt)return escape(yt).replace(/%u[0-9a-f]{4}/gi,function(Ut){return"%26%23"+parseInt(Ut.slice(2),16)+"%3B"});for(var ot="",mt=0;mt<yt.length;++mt){var lt=yt.charCodeAt(mt);45===lt||46===lt||95===lt||126===lt||lt>=48&&lt<=57||lt>=65&&lt<=90||lt>=97&&lt<=122||Ct===C.RFC1738&&(40===lt||41===lt)?ot+=yt.charAt(mt):lt<128?ot+=t[lt]:lt<2048?ot+=t[192|lt>>6]+t[128|63&lt]:lt<55296||lt>=57344?ot+=t[224|lt>>12]+t[128|lt>>6&63]+t[128|63&lt]:(lt=65536+((1023&lt)<<10|1023&yt.charCodeAt(mt+=1)),ot+=t[240|lt>>18]+t[128|lt>>12&63]+t[128|lt>>6&63]+t[128|63&lt])}return ot},isBuffer:function(vt){return!(!vt||"object"!=typeof vt||!(vt.constructor&&vt.constructor.isBuffer&&vt.constructor.isBuffer(vt)))},isRegExp:function(vt){return"[object RegExp]"===Object.prototype.toString.call(vt)},maybeMap:function(vt,xt){if(e(vt)){for(var Wt=[],Jt=0;Jt<vt.length;Jt+=1)Wt.push(xt(vt[Jt]));return Wt}return xt(vt)},merge:function Ht(vt,xt,Wt){if(!xt)return vt;if("object"!=typeof xt){if(e(vt))vt.push(xt);else{if(!vt||"object"!=typeof vt)return[vt,xt];(Wt&&(Wt.plainObjects||Wt.allowPrototypes)||!_.call(Object.prototype,xt))&&(vt[xt]=!0)}return vt}if(!vt||"object"!=typeof vt)return[vt].concat(xt);var Jt=vt;return e(vt)&&!e(xt)&&(Jt=r(vt,Wt)),e(vt)&&e(xt)?(xt.forEach(function(Ct,yt){if(_.call(vt,yt)){var ot=vt[yt];ot&&"object"==typeof ot&&Ct&&"object"==typeof Ct?vt[yt]=Ht(ot,Ct,Wt):vt.push(Ct)}else vt[yt]=Ct}),vt):Object.keys(xt).reduce(function(Ct,yt){var ot=xt[yt];return Ct[yt]=_.call(Ct,yt)?Ht(Ct[yt],ot,Wt):ot,Ct},Jt)}}},3394:U=>{var $=U.exports=function(rt){return new m(rt)};function m(rt){this.value=rt}function C(rt,St,Ht){var vt=[],xt=[],Wt=!0;return function Jt(Ct){var yt=Ht?_(Ct):Ct,ot={},mt=!0,lt={node:yt,node_:Ct,path:[].concat(vt),parent:xt[xt.length-1],parents:xt,key:vt.slice(-1)[0],isRoot:0===vt.length,level:vt.length,circular:null,update:function(Et,ht){lt.isRoot||(lt.parent.node[lt.key]=Et),lt.node=Et,ht&&(mt=!1)},delete:function(Et){delete lt.parent.node[lt.key],Et&&(mt=!1)},remove:function(Et){B(lt.parent.node)?lt.parent.node.splice(lt.key,1):delete lt.parent.node[lt.key],Et&&(mt=!1)},keys:null,before:function(Et){ot.before=Et},after:function(Et){ot.after=Et},pre:function(Et){ot.pre=Et},post:function(Et){ot.post=Et},stop:function(){Wt=!1},block:function(){mt=!1}};if(!Wt)return lt;function Ut(){if("object"==typeof lt.node&&null!==lt.node){(!lt.keys||lt.node_!==lt.node)&&(lt.keys=e(lt.node)),lt.isLeaf=0==lt.keys.length;for(var Et=0;Et<xt.length;Et++)if(xt[Et].node_===Ct){lt.circular=xt[Et];break}}else lt.isLeaf=!0,lt.keys=null;lt.notLeaf=!lt.isLeaf,lt.notRoot=!lt.isRoot}Ut();var Rt=St.call(lt,lt.node);return void 0!==Rt&&lt.update&&lt.update(Rt),ot.before&&ot.before.call(lt,lt.node),mt&&("object"==typeof lt.node&&null!==lt.node&&!lt.circular&&(xt.push(lt),Ut(),Q(lt.keys,function(Et,ht){vt.push(Et),ot.pre&&ot.pre.call(lt,lt.node[Et],Et);var nt=Jt(lt.node[Et]);Ht&&at.call(lt.node,Et)&&(lt.node[Et]=nt.node),nt.isLast=ht==lt.keys.length-1,nt.isFirst=0==ht,ot.post&&ot.post.call(lt,nt),vt.pop()}),xt.pop()),ot.after&&ot.after.call(lt,lt.node)),lt}(rt).node}function _(rt){if("object"==typeof rt&&null!==rt){var St;if(B(rt))St=[];else if(function(rt){return"[object Date]"===t(rt)}(rt))St=new Date(rt.getTime?rt.getTime():rt);else if(function(rt){return"[object RegExp]"===t(rt)}(rt))St=new RegExp(rt);else if(function(rt){return"[object Error]"===t(rt)}(rt))St={message:rt.message};else if(function(rt){return"[object Boolean]"===t(rt)}(rt))St=new Boolean(rt);else if(function(rt){return"[object Number]"===t(rt)}(rt))St=new Number(rt);else if(function(rt){return"[object String]"===t(rt)}(rt))St=new String(rt);else if(Object.create&&Object.getPrototypeOf)St=Object.create(Object.getPrototypeOf(rt));else if(rt.constructor===Object)St={};else{var vt=function(){};vt.prototype=rt.constructor&&rt.constructor.prototype||rt.__proto__||{},St=new vt}return Q(e(rt),function(xt){St[xt]=rt[xt]}),St}return rt}m.prototype.get=function(rt){for(var St=this.value,Ht=0;Ht<rt.length;Ht++){var vt=rt[Ht];if(!St||!at.call(St,vt)){St=void 0;break}St=St[vt]}return St},m.prototype.has=function(rt){for(var St=this.value,Ht=0;Ht<rt.length;Ht++){var vt=rt[Ht];if(!St||!at.call(St,vt))return!1;St=St[vt]}return!0},m.prototype.set=function(rt,St){for(var Ht=this.value,vt=0;vt<rt.length-1;vt++){var xt=rt[vt];at.call(Ht,xt)||(Ht[xt]={}),Ht=Ht[xt]}return Ht[rt[vt]]=St,St},m.prototype.map=function(rt){return C(this.value,rt,!0)},m.prototype.forEach=function(rt){return this.value=C(this.value,rt,!1),this.value},m.prototype.reduce=function(rt,St){var Ht=1===arguments.length,vt=Ht?this.value:St;return this.forEach(function(xt){(!this.isRoot||!Ht)&&(vt=rt.call(this,vt,xt))}),vt},m.prototype.paths=function(){var rt=[];return this.forEach(function(St){rt.push(this.path)}),rt},m.prototype.nodes=function(){var rt=[];return this.forEach(function(St){rt.push(this.node)}),rt},m.prototype.clone=function(){var rt=[],St=[];return function Ht(vt){for(var xt=0;xt<rt.length;xt++)if(rt[xt]===vt)return St[xt];if("object"==typeof vt&&null!==vt){var Wt=_(vt);return rt.push(vt),St.push(Wt),Q(e(vt),function(Jt){Wt[Jt]=Ht(vt[Jt])}),rt.pop(),St.pop(),Wt}return vt}(this.value)};var e=Object.keys||function(St){var Ht=[];for(var vt in St)Ht.push(vt);return Ht};function t(rt){return Object.prototype.toString.call(rt)}var B=Array.isArray||function(St){return"[object Array]"===Object.prototype.toString.call(St)},Q=function(rt,St){if(rt.forEach)return rt.forEach(St);for(var Ht=0;Ht<rt.length;Ht++)St(rt[Ht],Ht,rt)};Q(e(m.prototype),function(rt){$[rt]=function(St){var Ht=[].slice.call(arguments,1),vt=new m(St);return vt[rt].apply(vt,Ht)}});var at=Object.hasOwnProperty||function(rt,St){return St in rt}},86370:function(U,$,m){var C;U=m.nmd(U),function(_){"object"==typeof global&&global;var r,s=2147483647,u=36,Ht=/^xn--/,vt=/[^\x20-\x7E]/,xt=/[\x2E\u3002\uFF0E\uFF61]/g,Wt={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},Ct=Math.floor,yt=String.fromCharCode;function mt(ue){throw RangeError(Wt[ue])}function lt(ue,Be){for(var Ne=ue.length,Qe=[];Ne--;)Qe[Ne]=Be(ue[Ne]);return Qe}function Ut(ue,Be){var Ne=ue.split("@"),Qe="";return Ne.length>1&&(Qe=Ne[0]+"@",ue=Ne[1]),Qe+lt((ue=ue.replace(xt,".")).split("."),Be).join(".")}function Rt(ue){for(var Di,Ze,Be=[],Ne=0,Qe=ue.length;Ne<Qe;)(Di=ue.charCodeAt(Ne++))>=55296&&Di<=56319&&Ne<Qe?56320==(64512&(Ze=ue.charCodeAt(Ne++)))?Be.push(((1023&Di)<<10)+(1023&Ze)+65536):(Be.push(Di),Ne--):Be.push(Di);return Be}function Et(ue){return lt(ue,function(Be){var Ne="";return Be>65535&&(Ne+=yt((Be-=65536)>>>10&1023|55296),Be=56320|1023&Be),Ne+yt(Be)}).join("")}function ht(ue){return ue-48<10?ue-22:ue-65<26?ue-65:ue-97<26?ue-97:u}function nt(ue,Be){return ue+22+75*(ue<26)-((0!=Be)<<5)}function he(ue,Be,Ne){var Qe=0;for(ue=Ne?Ct(ue/700):ue>>1,ue+=Ct(ue/Be);ue>455;Qe+=u)ue=Ct(ue/35);return Ct(Qe+36*ue/(ue+38))}function Mt(ue){var Qe,gi,Bt,Te,$t,_e,At,pe,ze,hi,Be=[],Ne=ue.length,Di=0,Ze=128,Le=72;for((gi=ue.lastIndexOf("-"))<0&&(gi=0),Bt=0;Bt<gi;++Bt)ue.charCodeAt(Bt)>=128&&mt("not-basic"),Be.push(ue.charCodeAt(Bt));for(Te=gi>0?gi+1:0;Te<Ne;){for($t=Di,_e=1,At=u;Te>=Ne&&mt("invalid-input"),((pe=ht(ue.charCodeAt(Te++)))>=u||pe>Ct((s-Di)/_e))&&mt("overflow"),Di+=pe*_e,!(pe<(ze=At<=Le?1:At>=Le+26?26:At-Le));At+=u)_e>Ct(s/(hi=u-ze))&&mt("overflow"),_e*=hi;Le=he(Di-$t,Qe=Be.length+1,0==$t),Ct(Di/Qe)>s-Ze&&mt("overflow"),Ze+=Ct(Di/Qe),Di%=Qe,Be.splice(Di++,0,Ze)}return Et(Be)}function Nt(ue){var Be,Ne,Qe,Di,Ze,Le,gi,Bt,Te,$t,_e,pe,ze,hi,Ie,At=[];for(pe=(ue=Rt(ue)).length,Be=128,Ne=0,Ze=72,Le=0;Le<pe;++Le)(_e=ue[Le])<128&&At.push(yt(_e));for(Qe=Di=At.length,Di&&At.push("-");Qe<pe;){for(gi=s,Le=0;Le<pe;++Le)(_e=ue[Le])>=Be&&_e<gi&&(gi=_e);for(gi-Be>Ct((s-Ne)/(ze=Qe+1))&&mt("overflow"),Ne+=(gi-Be)*ze,Be=gi,Le=0;Le<pe;++Le)if((_e=ue[Le])<Be&&++Ne>s&&mt("overflow"),_e==Be){for(Bt=Ne,Te=u;!(Bt<($t=Te<=Ze?1:Te>=Ze+26?26:Te-Ze));Te+=u)At.push(yt(nt($t+(Ie=Bt-$t)%(hi=u-$t),0))),Bt=Ct(Ie/hi);At.push(yt(nt(Bt,0))),Ze=he(Ne,ze,Qe==Di),Ne=0,++Qe}++Ne,++Be}return At.join("")}r={version:"1.3.2",ucs2:{decode:Rt,encode:Et},decode:Mt,encode:Nt,toASCII:function(ue){return Ut(ue,function(Be){return vt.test(Be)?"xn--"+Nt(Be):Be})},toUnicode:function(ue){return Ut(ue,function(Be){return Ht.test(Be)?Mt(Be.slice(4).toLowerCase()):Be})}},void 0!==(C=function(){return r}.call($,m,$,U))&&(U.exports=C)}()},20434:(U,$,m)=>{"use strict";var C=m(86370),_=m(16906);function e(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}$.parse=Wt,$.resolve=function(ot,mt){return Wt(ot,!1,!0).resolve(mt)},$.resolveObject=function(ot,mt){return ot?Wt(ot,!1,!0).resolveObject(mt):mt},$.format=function(ot){return _.isString(ot)&&(ot=Wt(ot)),ot instanceof e?ot.format():e.prototype.format.call(ot)},$.Url=e;var t=/^([a-z0-9.+-]+:)/i,n=/:[0-9]*$/,r=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,u=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),y=["'"].concat(u),x=["%","/","?",";","#"].concat(y),B=["/","?","#"],at=/^[+a-z0-9A-Z_-]{0,63}$/,rt=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,St={javascript:!0,"javascript:":!0},Ht={javascript:!0,"javascript:":!0},vt={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},xt=m(10569);function Wt(ot,mt,lt){if(ot&&_.isObject(ot)&&ot instanceof e)return ot;var Ut=new e;return Ut.parse(ot,mt,lt),Ut}e.prototype.parse=function(ot,mt,lt){if(!_.isString(ot))throw new TypeError("Parameter 'url' must be a string, not "+typeof ot);var Ut=ot.indexOf("?"),Rt=-1!==Ut&&Ut<ot.indexOf("#")?"?":"#",Et=ot.split(Rt);Et[0]=Et[0].replace(/\\/g,"/");var nt=ot=Et.join(Rt);if(nt=nt.trim(),!lt&&1===ot.split("#").length){var he=r.exec(nt);if(he)return this.path=nt,this.href=nt,this.pathname=he[1],he[2]?(this.search=he[2],this.query=mt?xt.parse(this.search.substr(1)):this.search.substr(1)):mt&&(this.search="",this.query={}),this}var Mt=t.exec(nt);if(Mt){var Nt=(Mt=Mt[0]).toLowerCase();this.protocol=Nt,nt=nt.substr(Mt.length)}if(lt||Mt||nt.match(/^\/\/[^@\/]+@[^@\/]+/)){var de="//"===nt.substr(0,2);de&&(!Mt||!Ht[Mt])&&(nt=nt.substr(2),this.slashes=!0)}if(!Ht[Mt]&&(de||Mt&&!vt[Mt])){for(var ve=-1,ue=0;ue<B.length;ue++)-1!==(Be=nt.indexOf(B[ue]))&&(-1===ve||Be<ve)&&(ve=Be);var Ne,Qe;for(-1!==(Qe=-1===ve?nt.lastIndexOf("@"):nt.lastIndexOf("@",ve))&&(Ne=nt.slice(0,Qe),nt=nt.slice(Qe+1),this.auth=decodeURIComponent(Ne)),ve=-1,ue=0;ue<x.length;ue++){var Be;-1!==(Be=nt.indexOf(x[ue]))&&(-1===ve||Be<ve)&&(ve=Be)}-1===ve&&(ve=nt.length),this.host=nt.slice(0,ve),nt=nt.slice(ve),this.parseHost(),this.hostname=this.hostname||"";var Di="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!Di)for(var Ze=this.hostname.split(/\./),Le=(ue=0,Ze.length);ue<Le;ue++){var gi=Ze[ue];if(gi&&!gi.match(at)){for(var Bt="",Te=0,$t=gi.length;Te<$t;Te++)gi.charCodeAt(Te)>127?Bt+="x":Bt+=gi[Te];if(!Bt.match(at)){var _e=Ze.slice(0,ue),At=Ze.slice(ue+1),pe=gi.match(rt);pe&&(_e.push(pe[1]),At.unshift(pe[2])),At.length&&(nt="/"+At.join(".")+nt),this.hostname=_e.join(".");break}}}this.hostname=this.hostname.length>255?"":this.hostname.toLowerCase(),Di||(this.hostname=C.toASCII(this.hostname)),this.host=(this.hostname||"")+(this.port?":"+this.port:""),this.href+=this.host,Di&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==nt[0]&&(nt="/"+nt))}if(!St[Nt])for(ue=0,Le=y.length;ue<Le;ue++){var Ie=y[ue];if(-1!==nt.indexOf(Ie)){var te=encodeURIComponent(Ie);te===Ie&&(te=escape(Ie)),nt=nt.split(Ie).join(te)}}var ee=nt.indexOf("#");-1!==ee&&(this.hash=nt.substr(ee),nt=nt.slice(0,ee));var ke=nt.indexOf("?");return-1!==ke?(this.search=nt.substr(ke),this.query=nt.substr(ke+1),mt&&(this.query=xt.parse(this.query)),nt=nt.slice(0,ke)):mt&&(this.search="",this.query={}),nt&&(this.pathname=nt),vt[Nt]&&this.hostname&&!this.pathname&&(this.pathname="/"),(this.pathname||this.search)&&(this.path=(this.pathname||"")+(this.search||"")),this.href=this.format(),this},e.prototype.format=function(){var ot=this.auth||"";ot&&(ot=(ot=encodeURIComponent(ot)).replace(/%3A/i,":"),ot+="@");var mt=this.protocol||"",lt=this.pathname||"",Ut=this.hash||"",Rt=!1,Et="";this.host?Rt=ot+this.host:this.hostname&&(Rt=ot+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(Rt+=":"+this.port)),this.query&&_.isObject(this.query)&&Object.keys(this.query).length&&(Et=xt.stringify(this.query));var ht=this.search||Et&&"?"+Et||"";return mt&&":"!==mt.substr(-1)&&(mt+=":"),this.slashes||(!mt||vt[mt])&&!1!==Rt?(Rt="//"+(Rt||""),lt&&"/"!==lt.charAt(0)&&(lt="/"+lt)):Rt||(Rt=""),Ut&&"#"!==Ut.charAt(0)&&(Ut="#"+Ut),ht&&"?"!==ht.charAt(0)&&(ht="?"+ht),mt+Rt+(lt=lt.replace(/[?#]/g,function(nt){return encodeURIComponent(nt)}))+(ht=ht.replace("#","%23"))+Ut},e.prototype.resolve=function(ot){return this.resolveObject(Wt(ot,!1,!0)).format()},e.prototype.resolveObject=function(ot){if(_.isString(ot)){var mt=new e;mt.parse(ot,!1,!0),ot=mt}for(var lt=new e,Ut=Object.keys(this),Rt=0;Rt<Ut.length;Rt++){var Et=Ut[Rt];lt[Et]=this[Et]}if(lt.hash=ot.hash,""===ot.href)return lt.href=lt.format(),lt;if(ot.slashes&&!ot.protocol){for(var ht=Object.keys(ot),nt=0;nt<ht.length;nt++){var he=ht[nt];"protocol"!==he&&(lt[he]=ot[he])}return vt[lt.protocol]&&lt.hostname&&!lt.pathname&&(lt.path=lt.pathname="/"),lt.href=lt.format(),lt}if(ot.protocol&&ot.protocol!==lt.protocol){if(!vt[ot.protocol]){for(var Mt=Object.keys(ot),Nt=0;Nt<Mt.length;Nt++){var de=Mt[Nt];lt[de]=ot[de]}return lt.href=lt.format(),lt}if(lt.protocol=ot.protocol,ot.host||Ht[ot.protocol])lt.pathname=ot.pathname;else{for(var Le=(ot.pathname||"").split("/");Le.length&&!(ot.host=Le.shift()););ot.host||(ot.host=""),ot.hostname||(ot.hostname=""),""!==Le[0]&&Le.unshift(""),Le.length<2&&Le.unshift(""),lt.pathname=Le.join("/")}return lt.search=ot.search,lt.query=ot.query,lt.host=ot.host||"",lt.auth=ot.auth,lt.hostname=ot.hostname||ot.host,lt.port=ot.port,(lt.pathname||lt.search)&&(lt.path=(lt.pathname||"")+(lt.search||"")),lt.slashes=lt.slashes||ot.slashes,lt.href=lt.format(),lt}var Be=lt.pathname&&"/"===lt.pathname.charAt(0),Ne=ot.host||ot.pathname&&"/"===ot.pathname.charAt(0),Qe=Ne||Be||lt.host&&ot.pathname,Di=Qe,Ze=lt.pathname&&lt.pathname.split("/")||[],gi=(Le=ot.pathname&&ot.pathname.split("/")||[],lt.protocol&&!vt[lt.protocol]);if(gi&&(lt.hostname="",lt.port=null,lt.host&&(""===Ze[0]?Ze[0]=lt.host:Ze.unshift(lt.host)),lt.host="",ot.protocol&&(ot.hostname=null,ot.port=null,ot.host&&(""===Le[0]?Le[0]=ot.host:Le.unshift(ot.host)),ot.host=null),Qe=Qe&&(""===Le[0]||""===Ze[0])),Ne)lt.host=ot.host||""===ot.host?ot.host:lt.host,lt.hostname=ot.hostname||""===ot.hostname?ot.hostname:lt.hostname,lt.search=ot.search,lt.query=ot.query,Ze=Le;else if(Le.length)Ze||(Ze=[]),Ze.pop(),Ze=Ze.concat(Le),lt.search=ot.search,lt.query=ot.query;else if(!_.isNullOrUndefined(ot.search))return gi&&(lt.hostname=lt.host=Ze.shift(),(Bt=!!(lt.host&&lt.host.indexOf("@")>0)&&lt.host.split("@"))&&(lt.auth=Bt.shift(),lt.host=lt.hostname=Bt.shift())),lt.search=ot.search,lt.query=ot.query,(!_.isNull(lt.pathname)||!_.isNull(lt.search))&&(lt.path=(lt.pathname?lt.pathname:"")+(lt.search?lt.search:"")),lt.href=lt.format(),lt;if(!Ze.length)return lt.pathname=null,lt.path=lt.search?"/"+lt.search:null,lt.href=lt.format(),lt;for(var Te=Ze.slice(-1)[0],$t=(lt.host||ot.host||Ze.length>1)&&("."===Te||".."===Te)||""===Te,_e=0,At=Ze.length;At>=0;At--)"."===(Te=Ze[At])?Ze.splice(At,1):".."===Te?(Ze.splice(At,1),_e++):_e&&(Ze.splice(At,1),_e--);if(!Qe&&!Di)for(;_e--;_e)Ze.unshift("..");Qe&&""!==Ze[0]&&(!Ze[0]||"/"!==Ze[0].charAt(0))&&Ze.unshift(""),$t&&"/"!==Ze.join("/").substr(-1)&&Ze.push("");var Bt,pe=""===Ze[0]||Ze[0]&&"/"===Ze[0].charAt(0);return gi&&(lt.hostname=lt.host=pe?"":Ze.length?Ze.shift():"",(Bt=!!(lt.host&&lt.host.indexOf("@")>0)&&lt.host.split("@"))&&(lt.auth=Bt.shift(),lt.host=lt.hostname=Bt.shift())),(Qe=Qe||lt.host&&Ze.length)&&!pe&&Ze.unshift(""),Ze.length?lt.pathname=Ze.join("/"):(lt.pathname=null,lt.path=null),(!_.isNull(lt.pathname)||!_.isNull(lt.search))&&(lt.path=(lt.pathname?lt.pathname:"")+(lt.search?lt.search:"")),lt.auth=ot.auth||lt.auth,lt.slashes=lt.slashes||ot.slashes,lt.href=lt.format(),lt},e.prototype.parseHost=function(){var ot=this.host,mt=n.exec(ot);mt&&(":"!==(mt=mt[0])&&(this.port=mt.substr(1)),ot=ot.substr(0,ot.length-mt.length)),ot&&(this.hostname=ot)}},16906:U=>{"use strict";U.exports={isString:function($){return"string"==typeof $},isObject:function($){return"object"==typeof $&&null!==$},isNull:function($){return null===$},isNullOrUndefined:function($){return null==$}}},35987:(U,$,m)=>{"use strict";function u(Rt,Et,ht,nt){return new(ht||(ht=Promise))(function(Mt,Nt){function de(Be){try{ue(nt.next(Be))}catch(Ne){Nt(Ne)}}function ve(Be){try{ue(nt.throw(Be))}catch(Ne){Nt(Ne)}}function ue(Be){Be.done?Mt(Be.value):function(Mt){return Mt instanceof ht?Mt:new ht(function(Nt){Nt(Mt)})}(Be.value).then(de,ve)}ue((nt=nt.apply(Rt,Et||[])).next())})}function vt(Rt){return this instanceof vt?(this.v=Rt,this):new vt(Rt)}function xt(Rt,Et,ht){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var he,nt=ht.apply(Rt,Et||[]),Mt=[];return he={},Nt("next"),Nt("throw"),Nt("return"),he[Symbol.asyncIterator]=function(){return this},he;function Nt(Qe){nt[Qe]&&(he[Qe]=function(Di){return new Promise(function(Ze,Le){Mt.push([Qe,Di,Ze,Le])>1||de(Qe,Di)})})}function de(Qe,Di){try{!function(Qe){Qe.value instanceof vt?Promise.resolve(Qe.value.v).then(ue,Be):Ne(Mt[0][2],Qe)}(nt[Qe](Di))}catch(Ze){Ne(Mt[0][3],Ze)}}function ue(Qe){de("next",Qe)}function Be(Qe){de("throw",Qe)}function Ne(Qe,Di){Qe(Di),Mt.shift(),Mt.length&&de(Mt[0][0],Mt[0][1])}}function Jt(Rt){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ht,Et=Rt[Symbol.asyncIterator];return Et?Et.call(Rt):(Rt=function(Rt){var Et="function"==typeof Symbol&&Symbol.iterator,ht=Et&&Rt[Et],nt=0;if(ht)return ht.call(Rt);if(Rt&&"number"==typeof Rt.length)return{next:function(){return Rt&&nt>=Rt.length&&(Rt=void 0),{value:Rt&&Rt[nt++],done:!Rt}}};throw new TypeError(Et?"Object is not iterable.":"Symbol.iterator is not defined.")}(Rt),ht={},nt("next"),nt("throw"),nt("return"),ht[Symbol.asyncIterator]=function(){return this},ht);function nt(Mt){ht[Mt]=Rt[Mt]&&function(Nt){return new Promise(function(de,ve){!function(Mt,Nt,de,ve){Promise.resolve(ve).then(function(ue){Mt({value:ue,done:de})},Nt)}(de,ve,(Nt=Rt[Mt](Nt)).done,Nt.value)})}}}m.d($,{mG:()=>u,qq:()=>vt,FC:()=>xt,KL:()=>Jt})},70433:(U,$,m)=>{U.exports=m(47471)},82476:(U,$,m)=>{U.exports=m(21049)},20036:(U,$,m)=>{U.exports=m(43175)},55672:(U,$,m)=>{U.exports=m(3352)},77464:(U,$,m)=>{U.exports=m(13566)},40750:(U,$,m)=>{U.exports=m(70201)},55742:(U,$,m)=>{U.exports=m(21570)},63759:(U,$,m)=>{U.exports=m(46726)},67489:(U,$,m)=>{U.exports=m(38366)},81836:(U,$,m)=>{U.exports=m(63317)},25710:(U,$,m)=>{U.exports=m(68687)},12782:(U,$,m)=>{U.exports=m(15256)},27733:(U,$,m)=>{U.exports=m(21929)},32472:(U,$,m)=>{U.exports=m(70977)},78927:(U,$,m)=>{U.exports=m(35019)},79921:(U,$,m)=>{U.exports=m(24733)},74580:(U,$,m)=>{U.exports=m(65623)},49067:(U,$,m)=>{U.exports=m(4517)},10278:(U,$,m)=>{U.exports=m(31584)},92909:(U,$,m)=>{U.exports=m(46025)},40715:(U,$,m)=>{U.exports=m(81613)},88577:(U,$,m)=>{U.exports=m(19775)},25918:(U,$,m)=>{U.exports=m(9483)},48735:(U,$,m)=>{U.exports=m(60061)},46188:(U,$,m)=>{U.exports=m(27254)},8797:(U,$,m)=>{U.exports=m(62691)},77901:(U,$,m)=>{U.exports=m(98244)},95942:(U,$,m)=>{U.exports=m(79668)},96915:(U,$,m)=>{U.exports=m(5797)},90986:(U,$,m)=>{U.exports=m(35248)},62917:(U,$,m)=>{U.exports=m(58316)},45698:(U,$,m)=>{U.exports=m(51479)},48972:(U,$,m)=>{U.exports=m(35392)},59680:(U,$,m)=>{U.exports=m(43510)},52175:()=>{},41777:(U,$,m)=>{"use strict";m.d($,{l3:()=>e,_j:()=>C,LC:()=>_,ZN:()=>xt,jt:()=>n,pV:()=>at,F4:()=>x,IO:()=>St,vP:()=>s,SB:()=>y,oB:()=>u,eR:()=>B,X$:()=>t,ZE:()=>Wt,k1:()=>Jt});class C{}class _{}const e="*";function t(Ct,yt){return{type:7,name:Ct,definitions:yt,options:{}}}function n(Ct,yt=null){return{type:4,styles:yt,timings:Ct}}function s(Ct,yt=null){return{type:2,steps:Ct,options:yt}}function u(Ct){return{type:6,styles:Ct,offset:null}}function y(Ct,yt,ot){return{type:0,name:Ct,styles:yt,options:ot}}function x(Ct){return{type:5,steps:Ct}}function B(Ct,yt,ot=null){return{type:1,expr:Ct,animation:yt,options:ot}}function at(Ct=null){return{type:9,options:Ct}}function St(Ct,yt,ot=null){return{type:11,selector:Ct,animation:yt,options:ot}}function vt(Ct){Promise.resolve(null).then(Ct)}class xt{constructor(yt=0,ot=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=yt+ot}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(yt=>yt()),this._onDoneFns=[])}onStart(yt){this._onStartFns.push(yt)}onDone(yt){this._onDoneFns.push(yt)}onDestroy(yt){this._onDestroyFns.push(yt)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){vt(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(yt=>yt()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(yt=>yt()),this._onDestroyFns=[])}reset(){this._started=!1}setPosition(yt){this._position=this.totalTime?yt*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(yt){const ot="start"==yt?this._onStartFns:this._onDoneFns;ot.forEach(mt=>mt()),ot.length=0}}class Wt{constructor(yt){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=yt;let ot=0,mt=0,lt=0;const Ut=this.players.length;0==Ut?vt(()=>this._onFinish()):this.players.forEach(Rt=>{Rt.onDone(()=>{++ot==Ut&&this._onFinish()}),Rt.onDestroy(()=>{++mt==Ut&&this._onDestroy()}),Rt.onStart(()=>{++lt==Ut&&this._onStart()})}),this.totalTime=this.players.reduce((Rt,Et)=>Math.max(Rt,Et.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(yt=>yt()),this._onDoneFns=[])}init(){this.players.forEach(yt=>yt.init())}onStart(yt){this._onStartFns.push(yt)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(yt=>yt()),this._onStartFns=[])}onDone(yt){this._onDoneFns.push(yt)}onDestroy(yt){this._onDestroyFns.push(yt)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(yt=>yt.play())}pause(){this.players.forEach(yt=>yt.pause())}restart(){this.players.forEach(yt=>yt.restart())}finish(){this._onFinish(),this.players.forEach(yt=>yt.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(yt=>yt.destroy()),this._onDestroyFns.forEach(yt=>yt()),this._onDestroyFns=[])}reset(){this.players.forEach(yt=>yt.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(yt){const ot=yt*this.totalTime;this.players.forEach(mt=>{const lt=mt.totalTime?Math.min(1,ot/mt.totalTime):1;mt.setPosition(lt)})}getPosition(){const yt=this.players.reduce((ot,mt)=>null===ot||mt.totalTime>ot.totalTime?mt:ot,null);return null!=yt?yt.getPosition():0}beforeDestroy(){this.players.forEach(yt=>{yt.beforeDestroy&&yt.beforeDestroy()})}triggerCallback(yt){const ot="start"==yt?this._onStartFns:this._onDoneFns;ot.forEach(mt=>mt()),ot.length=0}}const Jt="!"},15664:(U,$,m)=>{"use strict";m.d($,{rt:()=>fe,s1:()=>Nt,kH:()=>je,Em:()=>de,tE:()=>Ci,qV:()=>ze,qm:()=>$e,ic:()=>ue,Kd:()=>mi,X6:()=>me,yG:()=>ye});var C=m(69808),_=m(5e3),e=m(77579),t=m(50727),n=m(61135),r=m(39646),s=m(91159),u=m(18505),y=m(78372),x=m(39300),B=m(54004),Q=m(95698),at=m(35684),rt=m(71884),St=m(82722),Ht=m(63191),vt=m(70925),xt=m(17144);class Mt{constructor(ct){this._items=ct,this._activeItemIndex=-1,this._activeItem=null,this._wrap=!1,this._letterKeyStream=new e.x,this._typeaheadSubscription=t.w0.EMPTY,this._vertical=!0,this._allowedModifierKeys=[],this._homeAndEnd=!1,this._skipPredicateFn=Lt=>Lt.disabled,this._pressedLetters=[],this.tabOut=new e.x,this.change=new e.x,ct instanceof _.n_E&&ct.changes.subscribe(Lt=>{if(this._activeItem){const Ae=Lt.toArray().indexOf(this._activeItem);Ae>-1&&Ae!==this._activeItemIndex&&(this._activeItemIndex=Ae)}})}skipPredicate(ct){return this._skipPredicateFn=ct,this}withWrap(ct=!0){return this._wrap=ct,this}withVerticalOrientation(ct=!0){return this._vertical=ct,this}withHorizontalOrientation(ct){return this._horizontal=ct,this}withAllowedModifierKeys(ct){return this._allowedModifierKeys=ct,this}withTypeAhead(ct=200){return this._typeaheadSubscription.unsubscribe(),this._typeaheadSubscription=this._letterKeyStream.pipe((0,u.b)(Lt=>this._pressedLetters.push(Lt)),(0,y.b)(ct),(0,x.h)(()=>this._pressedLetters.length>0),(0,B.U)(()=>this._pressedLetters.join(""))).subscribe(Lt=>{const ae=this._getItemsArray();for(let Ae=1;Ae<ae.length+1;Ae++){const Wi=(this._activeItemIndex+Ae)%ae.length,Qi=ae[Wi];if(!this._skipPredicateFn(Qi)&&0===Qi.getLabel().toUpperCase().trim().indexOf(Lt)){this.setActiveItem(Wi);break}}this._pressedLetters=[]}),this}withHomeAndEnd(ct=!0){return this._homeAndEnd=ct,this}setActiveItem(ct){const Lt=this._activeItem;this.updateActiveItem(ct),this._activeItem!==Lt&&this.change.next(this._activeItemIndex)}onKeydown(ct){const Lt=ct.keyCode,Ae=["altKey","ctrlKey","metaKey","shiftKey"].every(Wi=>!ct[Wi]||this._allowedModifierKeys.indexOf(Wi)>-1);switch(Lt){case s.Mf:return void this.tabOut.next();case s.JH:if(this._vertical&&Ae){this.setNextItemActive();break}return;case s.LH:if(this._vertical&&Ae){this.setPreviousItemActive();break}return;case s.SV:if(this._horizontal&&Ae){"rtl"===this._horizontal?this.setPreviousItemActive():this.setNextItemActive();break}return;case s.oh:if(this._horizontal&&Ae){"rtl"===this._horizontal?this.setNextItemActive():this.setPreviousItemActive();break}return;case s.Sd:if(this._homeAndEnd&&Ae){this.setFirstItemActive();break}return;case s.uR:if(this._homeAndEnd&&Ae){this.setLastItemActive();break}return;default:return void((Ae||(0,s.Vb)(ct,"shiftKey"))&&(ct.key&&1===ct.key.length?this._letterKeyStream.next(ct.key.toLocaleUpperCase()):(Lt>=s.A&&Lt<=s.Z||Lt>=s.xE&&Lt<=s.aO)&&this._letterKeyStream.next(String.fromCharCode(Lt))))}this._pressedLetters=[],ct.preventDefault()}get activeItemIndex(){return this._activeItemIndex}get activeItem(){return this._activeItem}isTyping(){return this._pressedLetters.length>0}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._items.length-1,-1)}setNextItemActive(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(ct){const Lt=this._getItemsArray(),ae="number"==typeof ct?ct:Lt.indexOf(ct),Ae=Lt[ae];this._activeItem=null==Ae?null:Ae,this._activeItemIndex=ae}_setActiveItemByDelta(ct){this._wrap?this._setActiveInWrapMode(ct):this._setActiveInDefaultMode(ct)}_setActiveInWrapMode(ct){const Lt=this._getItemsArray();for(let ae=1;ae<=Lt.length;ae++){const Ae=(this._activeItemIndex+ct*ae+Lt.length)%Lt.length;if(!this._skipPredicateFn(Lt[Ae]))return void this.setActiveItem(Ae)}}_setActiveInDefaultMode(ct){this._setActiveItemByIndex(this._activeItemIndex+ct,ct)}_setActiveItemByIndex(ct,Lt){const ae=this._getItemsArray();if(ae[ct]){for(;this._skipPredicateFn(ae[ct]);)if(!ae[ct+=Lt])return;this.setActiveItem(ct)}}_getItemsArray(){return this._items instanceof _.n_E?this._items.toArray():this._items}}class Nt extends Mt{setActiveItem(ct){this.activeItem&&this.activeItem.setInactiveStyles(),super.setActiveItem(ct),this.activeItem&&this.activeItem.setActiveStyles()}}class de extends Mt{constructor(){super(...arguments),this._origin="program"}setFocusOrigin(ct){return this._origin=ct,this}setActiveItem(ct){super.setActiveItem(ct),this.activeItem&&this.activeItem.focus(this._origin)}}let ue=(()=>{class kt{constructor(Lt){this._platform=Lt}isDisabled(Lt){return Lt.hasAttribute("disabled")}isVisible(Lt){return function(kt){return!!(kt.offsetWidth||kt.offsetHeight||"function"==typeof kt.getClientRects&&kt.getClientRects().length)}(Lt)&&"visible"===getComputedStyle(Lt).visibility}isTabbable(Lt){if(!this._platform.isBrowser)return!1;const ae=function(kt){try{return kt.frameElement}catch(ct){return null}}(function(kt){return kt.ownerDocument&&kt.ownerDocument.defaultView||window}(Lt));if(ae&&(-1===Te(ae)||!this.isVisible(ae)))return!1;let Ae=Lt.nodeName.toLowerCase(),Wi=Te(Lt);return Lt.hasAttribute("contenteditable")?-1!==Wi:!("iframe"===Ae||"object"===Ae||this._platform.WEBKIT&&this._platform.IOS&&!function(kt){let ct=kt.nodeName.toLowerCase(),Lt="input"===ct&&kt.type;return"text"===Lt||"password"===Lt||"select"===ct||"textarea"===ct}(Lt))&&("audio"===Ae?!!Lt.hasAttribute("controls")&&-1!==Wi:"video"===Ae?-1!==Wi&&(null!==Wi||this._platform.FIREFOX||Lt.hasAttribute("controls")):Lt.tabIndex>=0)}isFocusable(Lt,ae){return function(kt){return!function(kt){return function(kt){return"input"==kt.nodeName.toLowerCase()}(kt)&&"hidden"==kt.type}(kt)&&(function(kt){let ct=kt.nodeName.toLowerCase();return"input"===ct||"select"===ct||"button"===ct||"textarea"===ct}(kt)||function(kt){return function(kt){return"a"==kt.nodeName.toLowerCase()}(kt)&&kt.hasAttribute("href")}(kt)||kt.hasAttribute("contenteditable")||Bt(kt))}(Lt)&&!this.isDisabled(Lt)&&((null==ae?void 0:ae.ignoreVisibility)||this.isVisible(Lt))}}return kt.\u0275fac=function(Lt){return new(Lt||kt)(_.LFG(vt.t4))},kt.\u0275prov=_.Yz7({token:kt,factory:kt.\u0275fac,providedIn:"root"}),kt})();function Bt(kt){if(!kt.hasAttribute("tabindex")||void 0===kt.tabIndex)return!1;let ct=kt.getAttribute("tabindex");return!(!ct||isNaN(parseInt(ct,10)))}function Te(kt){if(!Bt(kt))return null;const ct=parseInt(kt.getAttribute("tabindex")||"",10);return isNaN(ct)?-1:ct}class pe{constructor(ct,Lt,ae,Ae,Wi=!1){this._element=ct,this._checker=Lt,this._ngZone=ae,this._document=Ae,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,Wi||this.attachAnchors()}get enabled(){return this._enabled}set enabled(ct){this._enabled=ct,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(ct,this._startAnchor),this._toggleAnchorTabIndex(ct,this._endAnchor))}destroy(){const ct=this._startAnchor,Lt=this._endAnchor;ct&&(ct.removeEventListener("focus",this.startAnchorListener),ct.remove()),Lt&&(Lt.removeEventListener("focus",this.endAnchorListener),Lt.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(ct){return new Promise(Lt=>{this._executeOnStable(()=>Lt(this.focusInitialElement(ct)))})}focusFirstTabbableElementWhenReady(ct){return new Promise(Lt=>{this._executeOnStable(()=>Lt(this.focusFirstTabbableElement(ct)))})}focusLastTabbableElementWhenReady(ct){return new Promise(Lt=>{this._executeOnStable(()=>Lt(this.focusLastTabbableElement(ct)))})}_getRegionBoundary(ct){const Lt=this._element.querySelectorAll(`[cdk-focus-region-${ct}], [cdkFocusRegion${ct}], [cdk-focus-${ct}]`);return"start"==ct?Lt.length?Lt[0]:this._getFirstTabbableElement(this._element):Lt.length?Lt[Lt.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(ct){const Lt=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(Lt){if(!this._checker.isFocusable(Lt)){const ae=this._getFirstTabbableElement(Lt);return null==ae||ae.focus(ct),!!ae}return Lt.focus(ct),!0}return this.focusFirstTabbableElement(ct)}focusFirstTabbableElement(ct){const Lt=this._getRegionBoundary("start");return Lt&&Lt.focus(ct),!!Lt}focusLastTabbableElement(ct){const Lt=this._getRegionBoundary("end");return Lt&&Lt.focus(ct),!!Lt}hasAttached(){return this._hasAttached}_getFirstTabbableElement(ct){if(this._checker.isFocusable(ct)&&this._checker.isTabbable(ct))return ct;const Lt=ct.children;for(let ae=0;ae<Lt.length;ae++){const Ae=Lt[ae].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(Lt[ae]):null;if(Ae)return Ae}return null}_getLastTabbableElement(ct){if(this._checker.isFocusable(ct)&&this._checker.isTabbable(ct))return ct;const Lt=ct.children;for(let ae=Lt.length-1;ae>=0;ae--){const Ae=Lt[ae].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(Lt[ae]):null;if(Ae)return Ae}return null}_createAnchor(){const ct=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,ct),ct.classList.add("cdk-visually-hidden"),ct.classList.add("cdk-focus-trap-anchor"),ct.setAttribute("aria-hidden","true"),ct}_toggleAnchorTabIndex(ct,Lt){ct?Lt.setAttribute("tabindex","0"):Lt.removeAttribute("tabindex")}toggleAnchors(ct){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(ct,this._startAnchor),this._toggleAnchorTabIndex(ct,this._endAnchor))}_executeOnStable(ct){this._ngZone.isStable?ct():this._ngZone.onStable.pipe((0,Q.q)(1)).subscribe(ct)}}let ze=(()=>{class kt{constructor(Lt,ae,Ae){this._checker=Lt,this._ngZone=ae,this._document=Ae}create(Lt,ae=!1){return new pe(Lt,this._checker,this._ngZone,this._document,ae)}}return kt.\u0275fac=function(Lt){return new(Lt||kt)(_.LFG(ue),_.LFG(_.R0b),_.LFG(C.K0))},kt.\u0275prov=_.Yz7({token:kt,factory:kt.\u0275fac,providedIn:"root"}),kt})();function me(kt){return 0===kt.offsetX&&0===kt.offsetY}function ye(kt){const ct=kt.touches&&kt.touches[0]||kt.changedTouches&&kt.changedTouches[0];return!(!ct||-1!==ct.identifier||null!=ct.radiusX&&1!==ct.radiusX||null!=ct.radiusY&&1!==ct.radiusY)}const Zt=new _.OlP("cdk-input-modality-detector-options"),ce={ignoreKeys:[s.zL,s.jx,s.b2,s.MW,s.JU]},ni=(0,vt.i$)({passive:!0,capture:!0});let Fi=(()=>{class kt{constructor(Lt,ae,Ae,Wi){this._platform=Lt,this._mostRecentTarget=null,this._modality=new n.X(null),this._lastTouchMs=0,this._onKeydown=Qi=>{var yn,tr;(null===(tr=null===(yn=this._options)||void 0===yn?void 0:yn.ignoreKeys)||void 0===tr?void 0:tr.some(li=>li===Qi.keyCode))||(this._modality.next("keyboard"),this._mostRecentTarget=(0,vt.sA)(Qi))},this._onMousedown=Qi=>{Date.now()-this._lastTouchMs<650||(this._modality.next(me(Qi)?"keyboard":"mouse"),this._mostRecentTarget=(0,vt.sA)(Qi))},this._onTouchstart=Qi=>{ye(Qi)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=(0,vt.sA)(Qi))},this._options=Object.assign(Object.assign({},ce),Wi),this.modalityDetected=this._modality.pipe((0,at.T)(1)),this.modalityChanged=this.modalityDetected.pipe((0,rt.x)()),Lt.isBrowser&&ae.runOutsideAngular(()=>{Ae.addEventListener("keydown",this._onKeydown,ni),Ae.addEventListener("mousedown",this._onMousedown,ni),Ae.addEventListener("touchstart",this._onTouchstart,ni)})}get mostRecentModality(){return this._modality.value}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,ni),document.removeEventListener("mousedown",this._onMousedown,ni),document.removeEventListener("touchstart",this._onTouchstart,ni))}}return kt.\u0275fac=function(Lt){return new(Lt||kt)(_.LFG(vt.t4),_.LFG(_.R0b),_.LFG(C.K0),_.LFG(Zt,8))},kt.\u0275prov=_.Yz7({token:kt,factory:kt.\u0275fac,providedIn:"root"}),kt})();const wi=new _.OlP("liveAnnouncerElement",{providedIn:"root",factory:function(){return null}}),pn=new _.OlP("LIVE_ANNOUNCER_DEFAULT_OPTIONS");let mi=(()=>{class kt{constructor(Lt,ae,Ae,Wi){this._ngZone=ae,this._defaultOptions=Wi,this._document=Ae,this._liveElement=Lt||this._createLiveElement()}announce(Lt,...ae){const Ae=this._defaultOptions;let Wi,Qi;return 1===ae.length&&"number"==typeof ae[0]?Qi=ae[0]:[Wi,Qi]=ae,this.clear(),clearTimeout(this._previousTimeout),Wi||(Wi=Ae&&Ae.politeness?Ae.politeness:"polite"),null==Qi&&Ae&&(Qi=Ae.duration),this._liveElement.setAttribute("aria-live",Wi),this._ngZone.runOutsideAngular(()=>new Promise(yn=>{clearTimeout(this._previousTimeout),this._previousTimeout=setTimeout(()=>{this._liveElement.textContent=Lt,yn(),"number"==typeof Qi&&(this._previousTimeout=setTimeout(()=>this.clear(),Qi))},100)}))}clear(){this._liveElement&&(this._liveElement.textContent="")}ngOnDestroy(){var Lt;clearTimeout(this._previousTimeout),null===(Lt=this._liveElement)||void 0===Lt||Lt.remove(),this._liveElement=null}_createLiveElement(){const Lt="cdk-live-announcer-element",ae=this._document.getElementsByClassName(Lt),Ae=this._document.createElement("div");for(let Wi=0;Wi<ae.length;Wi++)ae[Wi].remove();return Ae.classList.add(Lt),Ae.classList.add("cdk-visually-hidden"),Ae.setAttribute("aria-atomic","true"),Ae.setAttribute("aria-live","polite"),this._document.body.appendChild(Ae),Ae}}return kt.\u0275fac=function(Lt){return new(Lt||kt)(_.LFG(wi,8),_.LFG(_.R0b),_.LFG(C.K0),_.LFG(pn,8))},kt.\u0275prov=_.Yz7({token:kt,factory:kt.\u0275fac,providedIn:"root"}),kt})();const Ce=new _.OlP("cdk-focus-monitor-default-options"),Oe=(0,vt.i$)({passive:!0,capture:!0});let Ci=(()=>{class kt{constructor(Lt,ae,Ae,Wi,Qi){this._ngZone=Lt,this._platform=ae,this._inputModalityDetector=Ae,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new e.x,this._rootNodeFocusAndBlurListener=yn=>{const tr=(0,vt.sA)(yn),li="focus"===yn.type?this._onFocus:this._onBlur;for(let Je=tr;Je;Je=Je.parentElement)li.call(this,yn,Je)},this._document=Wi,this._detectionMode=(null==Qi?void 0:Qi.detectionMode)||0}monitor(Lt,ae=!1){const Ae=(0,Ht.fI)(Lt);if(!this._platform.isBrowser||1!==Ae.nodeType)return(0,r.of)(null);const Wi=(0,vt.kV)(Ae)||this._getDocument(),Qi=this._elementInfo.get(Ae);if(Qi)return ae&&(Qi.checkChildren=!0),Qi.subject;const yn={checkChildren:ae,subject:new e.x,rootNode:Wi};return this._elementInfo.set(Ae,yn),this._registerGlobalListeners(yn),yn.subject}stopMonitoring(Lt){const ae=(0,Ht.fI)(Lt),Ae=this._elementInfo.get(ae);Ae&&(Ae.subject.complete(),this._setClasses(ae),this._elementInfo.delete(ae),this._removeGlobalListeners(Ae))}focusVia(Lt,ae,Ae){const Wi=(0,Ht.fI)(Lt);Wi===this._getDocument().activeElement?this._getClosestElementsInfo(Wi).forEach(([yn,tr])=>this._originChanged(yn,ae,tr)):(this._setOrigin(ae),"function"==typeof Wi.focus&&Wi.focus(Ae))}ngOnDestroy(){this._elementInfo.forEach((Lt,ae)=>this.stopMonitoring(ae))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(Lt){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(Lt)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:"program"}_shouldBeAttributedToTouch(Lt){return 1===this._detectionMode||!!(null==Lt?void 0:Lt.contains(this._inputModalityDetector._mostRecentTarget))}_setClasses(Lt,ae){Lt.classList.toggle("cdk-focused",!!ae),Lt.classList.toggle("cdk-touch-focused","touch"===ae),Lt.classList.toggle("cdk-keyboard-focused","keyboard"===ae),Lt.classList.toggle("cdk-mouse-focused","mouse"===ae),Lt.classList.toggle("cdk-program-focused","program"===ae)}_setOrigin(Lt,ae=!1){this._ngZone.runOutsideAngular(()=>{this._origin=Lt,this._originFromTouchInteraction="touch"===Lt&&ae,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(Lt,ae){const Ae=this._elementInfo.get(ae),Wi=(0,vt.sA)(Lt);!Ae||!Ae.checkChildren&&ae!==Wi||this._originChanged(ae,this._getFocusOrigin(Wi),Ae)}_onBlur(Lt,ae){const Ae=this._elementInfo.get(ae);!Ae||Ae.checkChildren&&Lt.relatedTarget instanceof Node&&ae.contains(Lt.relatedTarget)||(this._setClasses(ae),this._emitOrigin(Ae.subject,null))}_emitOrigin(Lt,ae){this._ngZone.run(()=>Lt.next(ae))}_registerGlobalListeners(Lt){if(!this._platform.isBrowser)return;const ae=Lt.rootNode,Ae=this._rootNodeFocusListenerCount.get(ae)||0;Ae||this._ngZone.runOutsideAngular(()=>{ae.addEventListener("focus",this._rootNodeFocusAndBlurListener,Oe),ae.addEventListener("blur",this._rootNodeFocusAndBlurListener,Oe)}),this._rootNodeFocusListenerCount.set(ae,Ae+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe((0,St.R)(this._stopInputModalityDetector)).subscribe(Wi=>{this._setOrigin(Wi,!0)}))}_removeGlobalListeners(Lt){const ae=Lt.rootNode;if(this._rootNodeFocusListenerCount.has(ae)){const Ae=this._rootNodeFocusListenerCount.get(ae);Ae>1?this._rootNodeFocusListenerCount.set(ae,Ae-1):(ae.removeEventListener("focus",this._rootNodeFocusAndBlurListener,Oe),ae.removeEventListener("blur",this._rootNodeFocusAndBlurListener,Oe),this._rootNodeFocusListenerCount.delete(ae))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(Lt,ae,Ae){this._setClasses(Lt,ae),this._emitOrigin(Ae.subject,ae),this._lastFocusOrigin=ae}_getClosestElementsInfo(Lt){const ae=[];return this._elementInfo.forEach((Ae,Wi)=>{(Wi===Lt||Ae.checkChildren&&Wi.contains(Lt))&&ae.push([Wi,Ae])}),ae}}return kt.\u0275fac=function(Lt){return new(Lt||kt)(_.LFG(_.R0b),_.LFG(vt.t4),_.LFG(Fi),_.LFG(C.K0,8),_.LFG(Ce,8))},kt.\u0275prov=_.Yz7({token:kt,factory:kt.\u0275fac,providedIn:"root"}),kt})(),je=(()=>{class kt{constructor(Lt,ae){this._elementRef=Lt,this._focusMonitor=ae,this.cdkFocusChange=new _.vpe}ngAfterViewInit(){const Lt=this._elementRef.nativeElement;this._monitorSubscription=this._focusMonitor.monitor(Lt,1===Lt.nodeType&&Lt.hasAttribute("cdkMonitorSubtreeFocus")).subscribe(ae=>this.cdkFocusChange.emit(ae))}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef),this._monitorSubscription&&this._monitorSubscription.unsubscribe()}}return kt.\u0275fac=function(Lt){return new(Lt||kt)(_.Y36(_.SBq),_.Y36(Ci))},kt.\u0275dir=_.lG2({type:kt,selectors:[["","cdkMonitorElementFocus",""],["","cdkMonitorSubtreeFocus",""]],outputs:{cdkFocusChange:"cdkFocusChange"}}),kt})();const Ii="cdk-high-contrast-black-on-white",_i="cdk-high-contrast-white-on-black",Ui="cdk-high-contrast-active";let $e=(()=>{class kt{constructor(Lt,ae){this._platform=Lt,this._document=ae}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const Lt=this._document.createElement("div");Lt.style.backgroundColor="rgb(1,2,3)",Lt.style.position="absolute",this._document.body.appendChild(Lt);const ae=this._document.defaultView||window,Ae=ae&&ae.getComputedStyle?ae.getComputedStyle(Lt):null,Wi=(Ae&&Ae.backgroundColor||"").replace(/ /g,"");switch(Lt.remove(),Wi){case"rgb(0,0,0)":return 2;case"rgb(255,255,255)":return 1}return 0}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const Lt=this._document.body.classList;Lt.remove(Ui),Lt.remove(Ii),Lt.remove(_i),this._hasCheckedHighContrastMode=!0;const ae=this.getHighContrastMode();1===ae?(Lt.add(Ui),Lt.add(Ii)):2===ae&&(Lt.add(Ui),Lt.add(_i))}}}return kt.\u0275fac=function(Lt){return new(Lt||kt)(_.LFG(vt.t4),_.LFG(C.K0))},kt.\u0275prov=_.Yz7({token:kt,factory:kt.\u0275fac,providedIn:"root"}),kt})(),fe=(()=>{class kt{constructor(Lt){Lt._applyBodyHighContrastModeCssClasses()}}return kt.\u0275fac=function(Lt){return new(Lt||kt)(_.LFG($e))},kt.\u0275mod=_.oAB({type:kt}),kt.\u0275inj=_.cJS({imports:[[vt.ud,xt.Q8]]}),kt})()},50226:(U,$,m)=>{"use strict";m.d($,{vT:()=>y,Is:()=>s});var C=m(5e3),_=m(69808);const e=new C.OlP("cdk-dir-doc",{providedIn:"root",factory:function(){return(0,C.f3M)(_.K0)}}),n=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let s=(()=>{class x{constructor(Q){if(this.value="ltr",this.change=new C.vpe,Q){const rt=Q.documentElement?Q.documentElement.dir:null;this.value=function(x){const B=(null==x?void 0:x.toLowerCase())||"";return"auto"===B&&"undefined"!=typeof navigator&&(null==navigator?void 0:navigator.language)?n.test(navigator.language)?"rtl":"ltr":"rtl"===B?"rtl":"ltr"}((Q.body?Q.body.dir:null)||rt||"ltr")}}ngOnDestroy(){this.change.complete()}}return x.\u0275fac=function(Q){return new(Q||x)(C.LFG(e,8))},x.\u0275prov=C.Yz7({token:x,factory:x.\u0275fac,providedIn:"root"}),x})(),y=(()=>{class x{}return x.\u0275fac=function(Q){return new(Q||x)},x.\u0275mod=C.oAB({type:x}),x.\u0275inj=C.cJS({}),x})()},63191:(U,$,m)=>{"use strict";m.d($,{Eq:()=>n,Ig:()=>_,HM:()=>r,fI:()=>s,su:()=>e,du:()=>u});var C=m(5e3);function _(y){return null!=y&&"false"!=`${y}`}function e(y,x=0){return function(y){return!isNaN(parseFloat(y))&&!isNaN(Number(y))}(y)?Number(y):x}function n(y){return Array.isArray(y)?y:[y]}function r(y){return null==y?"":"string"==typeof y?y:`${y}px`}function s(y){return y instanceof C.SBq?y.nativeElement:y}function u(y,x=/\s+/){const B=[];if(null!=y){const Q=Array.isArray(y)?y:`${y}`.split(x);for(const at of Q){const rt=`${at}`.trim();rt&&B.push(rt)}}return B}},91159:(U,$,m)=>{"use strict";m.d($,{A:()=>Qe,zL:()=>u,ZH:()=>_,jx:()=>s,yY:()=>mt,JH:()=>Jt,uR:()=>St,K5:()=>n,hY:()=>B,Sd:()=>Ht,oh:()=>vt,b2:()=>Kn,MW:()=>yi,aO:()=>de,VM:()=>rt,Ku:()=>at,SV:()=>Wt,JU:()=>r,L_:()=>Q,Mf:()=>e,LH:()=>xt,Z:()=>wi,xE:()=>lt,Vb:()=>zn});const _=8,e=9,n=13,r=16,s=17,u=18,B=27,Q=32,at=33,rt=34,St=35,Ht=36,vt=37,xt=38,Wt=39,Jt=40,mt=46,lt=48,de=57,Qe=65,wi=90,yi=91,Kn=224;function zn(nr,...Fn){return Fn.length?Fn.some(Ao=>nr[Ao]):nr.altKey||nr.shiftKey||nr.ctrlKey||nr.metaKey}},95113:(U,$,m)=>{"use strict";m.d($,{Yg:()=>Jt,u3:()=>yt});var C=m(5e3),_=m(63191),e=m(77579),t=m(39841),n=m(97272),r=m(68306),s=m(95698),u=m(35684),y=m(78372),x=m(54004),B=m(68675),Q=m(82722),at=m(70925);const St=new Set;let Ht,vt=(()=>{class ot{constructor(lt){this._platform=lt,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):Wt}matchMedia(lt){return(this._platform.WEBKIT||this._platform.BLINK)&&function(ot){if(!St.has(ot))try{Ht||(Ht=document.createElement("style"),Ht.setAttribute("type","text/css"),document.head.appendChild(Ht)),Ht.sheet&&(Ht.sheet.insertRule(`@media ${ot} {body{ }}`,0),St.add(ot))}catch(mt){console.error(mt)}}(lt),this._matchMedia(lt)}}return ot.\u0275fac=function(lt){return new(lt||ot)(C.LFG(at.t4))},ot.\u0275prov=C.Yz7({token:ot,factory:ot.\u0275fac,providedIn:"root"}),ot})();function Wt(ot){return{matches:"all"===ot||""===ot,media:ot,addListener:()=>{},removeListener:()=>{}}}let Jt=(()=>{class ot{constructor(lt,Ut){this._mediaMatcher=lt,this._zone=Ut,this._queries=new Map,this._destroySubject=new e.x}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(lt){return Ct((0,_.Eq)(lt)).some(Rt=>this._registerQuery(Rt).mql.matches)}observe(lt){const Rt=Ct((0,_.Eq)(lt)).map(ht=>this._registerQuery(ht).observable);let Et=(0,t.a)(Rt);return Et=(0,n.z)(Et.pipe((0,s.q)(1)),Et.pipe((0,u.T)(1),(0,y.b)(0))),Et.pipe((0,x.U)(ht=>{const nt={matches:!1,breakpoints:{}};return ht.forEach(({matches:he,query:Mt})=>{nt.matches=nt.matches||he,nt.breakpoints[Mt]=he}),nt}))}_registerQuery(lt){if(this._queries.has(lt))return this._queries.get(lt);const Ut=this._mediaMatcher.matchMedia(lt),Et={observable:new r.y(ht=>{const nt=he=>this._zone.run(()=>ht.next(he));return Ut.addListener(nt),()=>{Ut.removeListener(nt)}}).pipe((0,B.O)(Ut),(0,x.U)(({matches:ht})=>({query:lt,matches:ht})),(0,Q.R)(this._destroySubject)),mql:Ut};return this._queries.set(lt,Et),Et}}return ot.\u0275fac=function(lt){return new(lt||ot)(C.LFG(vt),C.LFG(C.R0b))},ot.\u0275prov=C.Yz7({token:ot,factory:ot.\u0275fac,providedIn:"root"}),ot})();function Ct(ot){return ot.map(mt=>mt.split(",")).reduce((mt,lt)=>mt.concat(lt)).map(mt=>mt.trim())}const yt={XSmall:"(max-width: 599.98px)",Small:"(min-width: 600px) and (max-width: 959.98px)",Medium:"(min-width: 960px) and (max-width: 1279.98px)",Large:"(min-width: 1280px) and (max-width: 1919.98px)",XLarge:"(min-width: 1920px)",Handset:"(max-width: 599.98px) and (orientation: portrait), (max-width: 959.98px) and (orientation: landscape)",Tablet:"(min-width: 600px) and (max-width: 839.98px) and (orientation: portrait), (min-width: 960px) and (max-width: 1279.98px) and (orientation: landscape)",Web:"(min-width: 840px) and (orientation: portrait), (min-width: 1280px) and (orientation: landscape)",HandsetPortrait:"(max-width: 599.98px) and (orientation: portrait)",TabletPortrait:"(min-width: 600px) and (max-width: 839.98px) and (orientation: portrait)",WebPortrait:"(min-width: 840px) and (orientation: portrait)",HandsetLandscape:"(max-width: 959.98px) and (orientation: landscape)",TabletLandscape:"(min-width: 960px) and (max-width: 1279.98px) and (orientation: landscape)",WebLandscape:"(min-width: 1280px) and (orientation: landscape)"}},17144:(U,$,m)=>{"use strict";m.d($,{wD:()=>u,Q8:()=>y});var C=m(63191),_=m(5e3),e=m(68306),t=m(77579),n=m(78372);let r=(()=>{class x{create(Q){return"undefined"==typeof MutationObserver?null:new MutationObserver(Q)}}return x.\u0275fac=function(Q){return new(Q||x)},x.\u0275prov=_.Yz7({token:x,factory:x.\u0275fac,providedIn:"root"}),x})(),s=(()=>{class x{constructor(Q){this._mutationObserverFactory=Q,this._observedElements=new Map}ngOnDestroy(){this._observedElements.forEach((Q,at)=>this._cleanupObserver(at))}observe(Q){const at=(0,C.fI)(Q);return new e.y(rt=>{const Ht=this._observeElement(at).subscribe(rt);return()=>{Ht.unsubscribe(),this._unobserveElement(at)}})}_observeElement(Q){if(this._observedElements.has(Q))this._observedElements.get(Q).count++;else{const at=new t.x,rt=this._mutationObserverFactory.create(St=>at.next(St));rt&&rt.observe(Q,{characterData:!0,childList:!0,subtree:!0}),this._observedElements.set(Q,{observer:rt,stream:at,count:1})}return this._observedElements.get(Q).stream}_unobserveElement(Q){this._observedElements.has(Q)&&(this._observedElements.get(Q).count--,this._observedElements.get(Q).count||this._cleanupObserver(Q))}_cleanupObserver(Q){if(this._observedElements.has(Q)){const{observer:at,stream:rt}=this._observedElements.get(Q);at&&at.disconnect(),rt.complete(),this._observedElements.delete(Q)}}}return x.\u0275fac=function(Q){return new(Q||x)(_.LFG(r))},x.\u0275prov=_.Yz7({token:x,factory:x.\u0275fac,providedIn:"root"}),x})(),u=(()=>{class x{constructor(Q,at,rt){this._contentObserver=Q,this._elementRef=at,this._ngZone=rt,this.event=new _.vpe,this._disabled=!1,this._currentSubscription=null}get disabled(){return this._disabled}set disabled(Q){this._disabled=(0,C.Ig)(Q),this._disabled?this._unsubscribe():this._subscribe()}get debounce(){return this._debounce}set debounce(Q){this._debounce=(0,C.su)(Q),this._subscribe()}ngAfterContentInit(){!this._currentSubscription&&!this.disabled&&this._subscribe()}ngOnDestroy(){this._unsubscribe()}_subscribe(){this._unsubscribe();const Q=this._contentObserver.observe(this._elementRef);this._ngZone.runOutsideAngular(()=>{this._currentSubscription=(this.debounce?Q.pipe((0,n.b)(this.debounce)):Q).subscribe(this.event)})}_unsubscribe(){var Q;null===(Q=this._currentSubscription)||void 0===Q||Q.unsubscribe()}}return x.\u0275fac=function(Q){return new(Q||x)(_.Y36(s),_.Y36(_.SBq),_.Y36(_.R0b))},x.\u0275dir=_.lG2({type:x,selectors:[["","cdkObserveContent",""]],inputs:{disabled:["cdkObserveContentDisabled","disabled"],debounce:"debounce"},outputs:{event:"cdkObserveContent"},exportAs:["cdkObserveContent"]}),x})(),y=(()=>{class x{}return x.\u0275fac=function(Q){return new(Q||x)},x.\u0275mod=_.oAB({type:x}),x.\u0275inj=_.cJS({providers:[r]}),x})()},91314:(U,$,m)=>{"use strict";m.d($,{aV:()=>gi,X_:()=>yt,Xj:()=>ht,U8:()=>ze});var C=m(30495),_=m(69808),e=m(5e3),t=m(63191),n=m(70925),r=m(50226),s=m(47429),u=m(77579),y=m(50727),x=m(56451),B=m(95698),Q=m(82722);const at=(0,n.Mq)();class rt{constructor(te,ee){this._viewportRuler=te,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=ee}attach(){}enable(){if(this._canBeEnabled()){const te=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=te.style.left||"",this._previousHTMLStyles.top=te.style.top||"",te.style.left=(0,t.HM)(-this._previousScrollPosition.left),te.style.top=(0,t.HM)(-this._previousScrollPosition.top),te.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const te=this._document.documentElement,ke=te.style,ne=this._document.body.style,me=ke.scrollBehavior||"",ye=ne.scrollBehavior||"";this._isEnabled=!1,ke.left=this._previousHTMLStyles.left,ke.top=this._previousHTMLStyles.top,te.classList.remove("cdk-global-scrollblock"),at&&(ke.scrollBehavior=ne.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),at&&(ke.scrollBehavior=me,ne.scrollBehavior=ye)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const ee=this._document.body,ke=this._viewportRuler.getViewportSize();return ee.scrollHeight>ke.height||ee.scrollWidth>ke.width}}class Ht{constructor(te,ee,ke,ne){this._scrollDispatcher=te,this._ngZone=ee,this._viewportRuler=ke,this._config=ne,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(te){this._overlayRef=te}enable(){if(this._scrollSubscription)return;const te=this._scrollDispatcher.scrolled(0);this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=te.subscribe(()=>{const ee=this._viewportRuler.getViewportScrollPosition().top;Math.abs(ee-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=te.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class vt{enable(){}disable(){}attach(){}}function xt(Ie,te){return te.some(ee=>Ie.bottom<ee.top||Ie.top>ee.bottom||Ie.right<ee.left||Ie.left>ee.right)}function Wt(Ie,te){return te.some(ee=>Ie.top<ee.top||Ie.bottom>ee.bottom||Ie.left<ee.left||Ie.right>ee.right)}class Jt{constructor(te,ee,ke,ne){this._scrollDispatcher=te,this._viewportRuler=ee,this._ngZone=ke,this._config=ne,this._scrollSubscription=null}attach(te){this._overlayRef=te}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const ee=this._overlayRef.overlayElement.getBoundingClientRect(),{width:ke,height:ne}=this._viewportRuler.getViewportSize();xt(ee,[{width:ke,height:ne,bottom:ne,right:ke,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let Ct=(()=>{class Ie{constructor(ee,ke,ne,me){this._scrollDispatcher=ee,this._viewportRuler=ke,this._ngZone=ne,this.noop=()=>new vt,this.close=ye=>new Ht(this._scrollDispatcher,this._ngZone,this._viewportRuler,ye),this.block=()=>new rt(this._viewportRuler,this._document),this.reposition=ye=>new Jt(this._scrollDispatcher,this._viewportRuler,this._ngZone,ye),this._document=me}}return Ie.\u0275fac=function(ee){return new(ee||Ie)(e.LFG(C.mF),e.LFG(C.rL),e.LFG(e.R0b),e.LFG(_.K0))},Ie.\u0275prov=e.Yz7({token:Ie,factory:Ie.\u0275fac,providedIn:"root"}),Ie})();class yt{constructor(te){if(this.scrollStrategy=new vt,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,te){const ee=Object.keys(te);for(const ke of ee)void 0!==te[ke]&&(this[ke]=te[ke])}}}class lt{constructor(te,ee){this.connectionPair=te,this.scrollableViewProperties=ee}}class Et{constructor(te,ee,ke,ne,me,ye,Zt,ce,ei){this._portalOutlet=te,this._host=ee,this._pane=ke,this._config=ne,this._ngZone=me,this._keyboardDispatcher=ye,this._document=Zt,this._location=ce,this._outsideClickDispatcher=ei,this._backdropElement=null,this._backdropClick=new u.x,this._attachments=new u.x,this._detachments=new u.x,this._locationChanges=y.w0.EMPTY,this._backdropClickHandler=ni=>this._backdropClick.next(ni),this._keydownEvents=new u.x,this._outsidePointerEvents=new u.x,ne.scrollStrategy&&(this._scrollStrategy=ne.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=ne.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(te){let ee=this._portalOutlet.attach(te);return!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host),this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe((0,B.q)(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),ee}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const te=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),te}dispose(){var te;const ee=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),null===(te=this._host)||void 0===te||te.remove(),this._previousHostParent=this._pane=this._host=null,ee&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(te){te!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=te,this.hasAttached()&&(te.attach(this),this.updatePosition()))}updateSize(te){this._config=Object.assign(Object.assign({},this._config),te),this._updateElementSize()}setDirection(te){this._config=Object.assign(Object.assign({},this._config),{direction:te}),this._updateElementDirection()}addPanelClass(te){this._pane&&this._toggleClasses(this._pane,te,!0)}removePanelClass(te){this._pane&&this._toggleClasses(this._pane,te,!1)}getDirection(){const te=this._config.direction;return te?"string"==typeof te?te:te.value:"ltr"}updateScrollStrategy(te){te!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=te,this.hasAttached()&&(te.attach(this),te.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const te=this._pane.style;te.width=(0,t.HM)(this._config.width),te.height=(0,t.HM)(this._config.height),te.minWidth=(0,t.HM)(this._config.minWidth),te.minHeight=(0,t.HM)(this._config.minHeight),te.maxWidth=(0,t.HM)(this._config.maxWidth),te.maxHeight=(0,t.HM)(this._config.maxHeight)}_togglePointerEvents(te){this._pane.style.pointerEvents=te?"":"none"}_attachBackdrop(){const te="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),"undefined"!=typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(te)})}):this._backdropElement.classList.add(te)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const te=this._backdropElement;if(!te)return;let ee;const ke=()=>{te&&(te.removeEventListener("click",this._backdropClickHandler),te.removeEventListener("transitionend",ke),this._disposeBackdrop(te)),this._config.backdropClass&&this._toggleClasses(te,this._config.backdropClass,!1),clearTimeout(ee)};te.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{te.addEventListener("transitionend",ke)}),te.style.pointerEvents="none",ee=this._ngZone.runOutsideAngular(()=>setTimeout(ke,500))}_toggleClasses(te,ee,ke){const ne=(0,t.Eq)(ee||[]).filter(me=>!!me);ne.length&&(ke?te.classList.add(...ne):te.classList.remove(...ne))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const te=this._ngZone.onStable.pipe((0,Q.R)((0,x.T)(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),te.unsubscribe())})})}_disposeScrollStrategy(){const te=this._scrollStrategy;te&&(te.disable(),te.detach&&te.detach())}_disposeBackdrop(te){te&&(te.remove(),this._backdropElement===te&&(this._backdropElement=null))}}let ht=(()=>{class Ie{constructor(ee,ke){this._platform=ke,this._document=ee}ngOnDestroy(){var ee;null===(ee=this._containerElement)||void 0===ee||ee.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const ee="cdk-overlay-container";if(this._platform.isBrowser||(0,n.Oy)()){const ne=this._document.querySelectorAll(`.${ee}[platform="server"], .${ee}[platform="test"]`);for(let me=0;me<ne.length;me++)ne[me].remove()}const ke=this._document.createElement("div");ke.classList.add(ee),(0,n.Oy)()?ke.setAttribute("platform","test"):this._platform.isBrowser||ke.setAttribute("platform","server"),this._document.body.appendChild(ke),this._containerElement=ke}}return Ie.\u0275fac=function(ee){return new(ee||Ie)(e.LFG(_.K0),e.LFG(n.t4))},Ie.\u0275prov=e.Yz7({token:Ie,factory:Ie.\u0275fac,providedIn:"root"}),Ie})();const nt="cdk-overlay-connected-position-bounding-box",he=/([A-Za-z%]+)$/;class Mt{constructor(te,ee,ke,ne,me){this._viewportRuler=ee,this._document=ke,this._platform=ne,this._overlayContainer=me,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new u.x,this._resizeSubscription=y.w0.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(te)}get positions(){return this._preferredPositions}attach(te){this._validatePositions(),te.hostElement.classList.add(nt),this._overlayRef=te,this._boundingBox=te.hostElement,this._pane=te.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect();const te=this._originRect,ee=this._overlayRect,ke=this._viewportRect,ne=[];let me;for(let ye of this._preferredPositions){let Zt=this._getOriginPoint(te,ye),ce=this._getOverlayPoint(Zt,ee,ye),ei=this._getOverlayFit(ce,ee,ke,ye);if(ei.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(ye,Zt);this._canFitWithFlexibleDimensions(ei,ce,ke)?ne.push({position:ye,origin:Zt,overlayRect:ee,boundingBoxRect:this._calculateBoundingBoxRect(Zt,ye)}):(!me||me.overlayFit.visibleArea<ei.visibleArea)&&(me={overlayFit:ei,overlayPoint:ce,originPoint:Zt,position:ye,overlayRect:ee})}if(ne.length){let ye=null,Zt=-1;for(const ce of ne){const ei=ce.boundingBoxRect.width*ce.boundingBoxRect.height*(ce.position.weight||1);ei>Zt&&(Zt=ei,ye=ce)}return this._isPushed=!1,void this._applyPosition(ye.position,ye.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(me.position,me.originPoint);this._applyPosition(me.position,me.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&Nt(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(nt),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(!this._isDisposed&&(!this._platform||this._platform.isBrowser)){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect();const te=this._lastPosition||this._preferredPositions[0],ee=this._getOriginPoint(this._originRect,te);this._applyPosition(te,ee)}}withScrollableContainers(te){return this._scrollables=te,this}withPositions(te){return this._preferredPositions=te,-1===te.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(te){return this._viewportMargin=te,this}withFlexibleDimensions(te=!0){return this._hasFlexibleDimensions=te,this}withGrowAfterOpen(te=!0){return this._growAfterOpen=te,this}withPush(te=!0){return this._canPush=te,this}withLockedPosition(te=!0){return this._positionLocked=te,this}setOrigin(te){return this._origin=te,this}withDefaultOffsetX(te){return this._offsetX=te,this}withDefaultOffsetY(te){return this._offsetY=te,this}withTransformOriginOn(te){return this._transformOriginSelector=te,this}_getOriginPoint(te,ee){let ke,ne;if("center"==ee.originX)ke=te.left+te.width/2;else{const me=this._isRtl()?te.right:te.left,ye=this._isRtl()?te.left:te.right;ke="start"==ee.originX?me:ye}return ne="center"==ee.originY?te.top+te.height/2:"top"==ee.originY?te.top:te.bottom,{x:ke,y:ne}}_getOverlayPoint(te,ee,ke){let ne,me;return ne="center"==ke.overlayX?-ee.width/2:"start"===ke.overlayX?this._isRtl()?-ee.width:0:this._isRtl()?0:-ee.width,me="center"==ke.overlayY?-ee.height/2:"top"==ke.overlayY?0:-ee.height,{x:te.x+ne,y:te.y+me}}_getOverlayFit(te,ee,ke,ne){const me=ve(ee);let{x:ye,y:Zt}=te,ce=this._getOffset(ne,"x"),ei=this._getOffset(ne,"y");ce&&(ye+=ce),ei&&(Zt+=ei);let wi=0-Zt,yi=Zt+me.height-ke.height,pn=this._subtractOverflows(me.width,0-ye,ye+me.width-ke.width),mi=this._subtractOverflows(me.height,wi,yi),Zi=pn*mi;return{visibleArea:Zi,isCompletelyWithinViewport:me.width*me.height===Zi,fitsInViewportVertically:mi===me.height,fitsInViewportHorizontally:pn==me.width}}_canFitWithFlexibleDimensions(te,ee,ke){if(this._hasFlexibleDimensions){const ne=ke.bottom-ee.y,me=ke.right-ee.x,ye=de(this._overlayRef.getConfig().minHeight),Zt=de(this._overlayRef.getConfig().minWidth),ei=te.fitsInViewportHorizontally||null!=Zt&&Zt<=me;return(te.fitsInViewportVertically||null!=ye&&ye<=ne)&&ei}return!1}_pushOverlayOnScreen(te,ee,ke){if(this._previousPushAmount&&this._positionLocked)return{x:te.x+this._previousPushAmount.x,y:te.y+this._previousPushAmount.y};const ne=ve(ee),me=this._viewportRect,ye=Math.max(te.x+ne.width-me.width,0),Zt=Math.max(te.y+ne.height-me.height,0),ce=Math.max(me.top-ke.top-te.y,0),ei=Math.max(me.left-ke.left-te.x,0);let ni=0,Fi=0;return ni=ne.width<=me.width?ei||-ye:te.x<this._viewportMargin?me.left-ke.left-te.x:0,Fi=ne.height<=me.height?ce||-Zt:te.y<this._viewportMargin?me.top-ke.top-te.y:0,this._previousPushAmount={x:ni,y:Fi},{x:te.x+ni,y:te.y+Fi}}_applyPosition(te,ee){if(this._setTransformOrigin(te),this._setOverlayElementStyles(ee,te),this._setBoundingBoxStyles(ee,te),te.panelClass&&this._addPanelClasses(te.panelClass),this._lastPosition=te,this._positionChanges.observers.length){const ke=this._getScrollVisibility(),ne=new lt(te,ke);this._positionChanges.next(ne)}this._isInitialRender=!1}_setTransformOrigin(te){if(!this._transformOriginSelector)return;const ee=this._boundingBox.querySelectorAll(this._transformOriginSelector);let ke,ne=te.overlayY;ke="center"===te.overlayX?"center":this._isRtl()?"start"===te.overlayX?"right":"left":"start"===te.overlayX?"left":"right";for(let me=0;me<ee.length;me++)ee[me].style.transformOrigin=`${ke} ${ne}`}_calculateBoundingBoxRect(te,ee){const ke=this._viewportRect,ne=this._isRtl();let me,ye,Zt,ni,Fi,wi;if("top"===ee.overlayY)ye=te.y,me=ke.height-ye+this._viewportMargin;else if("bottom"===ee.overlayY)Zt=ke.height-te.y+2*this._viewportMargin,me=ke.height-Zt+this._viewportMargin;else{const yi=Math.min(ke.bottom-te.y+ke.top,te.y),pn=this._lastBoundingBoxSize.height;me=2*yi,ye=te.y-yi,me>pn&&!this._isInitialRender&&!this._growAfterOpen&&(ye=te.y-pn/2)}if("end"===ee.overlayX&&!ne||"start"===ee.overlayX&&ne)wi=ke.width-te.x+this._viewportMargin,ni=te.x-this._viewportMargin;else if("start"===ee.overlayX&&!ne||"end"===ee.overlayX&&ne)Fi=te.x,ni=ke.right-te.x;else{const yi=Math.min(ke.right-te.x+ke.left,te.x),pn=this._lastBoundingBoxSize.width;ni=2*yi,Fi=te.x-yi,ni>pn&&!this._isInitialRender&&!this._growAfterOpen&&(Fi=te.x-pn/2)}return{top:ye,left:Fi,bottom:Zt,right:wi,width:ni,height:me}}_setBoundingBoxStyles(te,ee){const ke=this._calculateBoundingBoxRect(te,ee);!this._isInitialRender&&!this._growAfterOpen&&(ke.height=Math.min(ke.height,this._lastBoundingBoxSize.height),ke.width=Math.min(ke.width,this._lastBoundingBoxSize.width));const ne={};if(this._hasExactPosition())ne.top=ne.left="0",ne.bottom=ne.right=ne.maxHeight=ne.maxWidth="",ne.width=ne.height="100%";else{const me=this._overlayRef.getConfig().maxHeight,ye=this._overlayRef.getConfig().maxWidth;ne.height=(0,t.HM)(ke.height),ne.top=(0,t.HM)(ke.top),ne.bottom=(0,t.HM)(ke.bottom),ne.width=(0,t.HM)(ke.width),ne.left=(0,t.HM)(ke.left),ne.right=(0,t.HM)(ke.right),ne.alignItems="center"===ee.overlayX?"center":"end"===ee.overlayX?"flex-end":"flex-start",ne.justifyContent="center"===ee.overlayY?"center":"bottom"===ee.overlayY?"flex-end":"flex-start",me&&(ne.maxHeight=(0,t.HM)(me)),ye&&(ne.maxWidth=(0,t.HM)(ye))}this._lastBoundingBoxSize=ke,Nt(this._boundingBox.style,ne)}_resetBoundingBoxStyles(){Nt(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){Nt(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(te,ee){const ke={},ne=this._hasExactPosition(),me=this._hasFlexibleDimensions,ye=this._overlayRef.getConfig();if(ne){const ni=this._viewportRuler.getViewportScrollPosition();Nt(ke,this._getExactOverlayY(ee,te,ni)),Nt(ke,this._getExactOverlayX(ee,te,ni))}else ke.position="static";let Zt="",ce=this._getOffset(ee,"x"),ei=this._getOffset(ee,"y");ce&&(Zt+=`translateX(${ce}px) `),ei&&(Zt+=`translateY(${ei}px)`),ke.transform=Zt.trim(),ye.maxHeight&&(ne?ke.maxHeight=(0,t.HM)(ye.maxHeight):me&&(ke.maxHeight="")),ye.maxWidth&&(ne?ke.maxWidth=(0,t.HM)(ye.maxWidth):me&&(ke.maxWidth="")),Nt(this._pane.style,ke)}_getExactOverlayY(te,ee,ke){let ne={top:"",bottom:""},me=this._getOverlayPoint(ee,this._overlayRect,te);this._isPushed&&(me=this._pushOverlayOnScreen(me,this._overlayRect,ke));let ye=this._overlayContainer.getContainerElement().getBoundingClientRect().top;return me.y-=ye,"bottom"===te.overlayY?ne.bottom=this._document.documentElement.clientHeight-(me.y+this._overlayRect.height)+"px":ne.top=(0,t.HM)(me.y),ne}_getExactOverlayX(te,ee,ke){let ye,ne={left:"",right:""},me=this._getOverlayPoint(ee,this._overlayRect,te);return this._isPushed&&(me=this._pushOverlayOnScreen(me,this._overlayRect,ke)),ye=this._isRtl()?"end"===te.overlayX?"left":"right":"end"===te.overlayX?"right":"left","right"===ye?ne.right=this._document.documentElement.clientWidth-(me.x+this._overlayRect.width)+"px":ne.left=(0,t.HM)(me.x),ne}_getScrollVisibility(){const te=this._getOriginRect(),ee=this._pane.getBoundingClientRect(),ke=this._scrollables.map(ne=>ne.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:Wt(te,ke),isOriginOutsideView:xt(te,ke),isOverlayClipped:Wt(ee,ke),isOverlayOutsideView:xt(ee,ke)}}_subtractOverflows(te,...ee){return ee.reduce((ke,ne)=>ke-Math.max(ne,0),te)}_getNarrowedViewportRect(){const te=this._document.documentElement.clientWidth,ee=this._document.documentElement.clientHeight,ke=this._viewportRuler.getViewportScrollPosition();return{top:ke.top+this._viewportMargin,left:ke.left+this._viewportMargin,right:ke.left+te-this._viewportMargin,bottom:ke.top+ee-this._viewportMargin,width:te-2*this._viewportMargin,height:ee-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(te,ee){return"x"===ee?null==te.offsetX?this._offsetX:te.offsetX:null==te.offsetY?this._offsetY:te.offsetY}_validatePositions(){}_addPanelClasses(te){this._pane&&(0,t.Eq)(te).forEach(ee=>{""!==ee&&-1===this._appliedPanelClasses.indexOf(ee)&&(this._appliedPanelClasses.push(ee),this._pane.classList.add(ee))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(te=>{this._pane.classList.remove(te)}),this._appliedPanelClasses=[])}_getOriginRect(){const te=this._origin;if(te instanceof e.SBq)return te.nativeElement.getBoundingClientRect();if(te instanceof Element)return te.getBoundingClientRect();const ee=te.width||0,ke=te.height||0;return{top:te.y,bottom:te.y+ke,left:te.x,right:te.x+ee,height:ke,width:ee}}}function Nt(Ie,te){for(let ee in te)te.hasOwnProperty(ee)&&(Ie[ee]=te[ee]);return Ie}function de(Ie){if("number"!=typeof Ie&&null!=Ie){const[te,ee]=Ie.split(he);return ee&&"px"!==ee?null:parseFloat(te)}return Ie||null}function ve(Ie){return{top:Math.floor(Ie.top),right:Math.floor(Ie.right),bottom:Math.floor(Ie.bottom),left:Math.floor(Ie.left),width:Math.floor(Ie.width),height:Math.floor(Ie.height)}}const ue="cdk-global-overlay-wrapper";class Be{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._leftOffset="",this._rightOffset="",this._alignItems="",this._justifyContent="",this._width="",this._height=""}attach(te){const ee=te.getConfig();this._overlayRef=te,this._width&&!ee.width&&te.updateSize({width:this._width}),this._height&&!ee.height&&te.updateSize({height:this._height}),te.hostElement.classList.add(ue),this._isDisposed=!1}top(te=""){return this._bottomOffset="",this._topOffset=te,this._alignItems="flex-start",this}left(te=""){return this._rightOffset="",this._leftOffset=te,this._justifyContent="flex-start",this}bottom(te=""){return this._topOffset="",this._bottomOffset=te,this._alignItems="flex-end",this}right(te=""){return this._leftOffset="",this._rightOffset=te,this._justifyContent="flex-end",this}width(te=""){return this._overlayRef?this._overlayRef.updateSize({width:te}):this._width=te,this}height(te=""){return this._overlayRef?this._overlayRef.updateSize({height:te}):this._height=te,this}centerHorizontally(te=""){return this.left(te),this._justifyContent="center",this}centerVertically(te=""){return this.top(te),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const te=this._overlayRef.overlayElement.style,ee=this._overlayRef.hostElement.style,ke=this._overlayRef.getConfig(),{width:ne,height:me,maxWidth:ye,maxHeight:Zt}=ke,ce=!("100%"!==ne&&"100vw"!==ne||ye&&"100%"!==ye&&"100vw"!==ye),ei=!("100%"!==me&&"100vh"!==me||Zt&&"100%"!==Zt&&"100vh"!==Zt);te.position=this._cssPosition,te.marginLeft=ce?"0":this._leftOffset,te.marginTop=ei?"0":this._topOffset,te.marginBottom=this._bottomOffset,te.marginRight=this._rightOffset,ce?ee.justifyContent="flex-start":"center"===this._justifyContent?ee.justifyContent="center":"rtl"===this._overlayRef.getConfig().direction?"flex-start"===this._justifyContent?ee.justifyContent="flex-end":"flex-end"===this._justifyContent&&(ee.justifyContent="flex-start"):ee.justifyContent=this._justifyContent,ee.alignItems=ei?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const te=this._overlayRef.overlayElement.style,ee=this._overlayRef.hostElement,ke=ee.style;ee.classList.remove(ue),ke.justifyContent=ke.alignItems=te.marginTop=te.marginBottom=te.marginLeft=te.marginRight=te.position="",this._overlayRef=null,this._isDisposed=!0}}let Ne=(()=>{class Ie{constructor(ee,ke,ne,me){this._viewportRuler=ee,this._document=ke,this._platform=ne,this._overlayContainer=me}global(){return new Be}flexibleConnectedTo(ee){return new Mt(ee,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}return Ie.\u0275fac=function(ee){return new(ee||Ie)(e.LFG(C.rL),e.LFG(_.K0),e.LFG(n.t4),e.LFG(ht))},Ie.\u0275prov=e.Yz7({token:Ie,factory:Ie.\u0275fac,providedIn:"root"}),Ie})(),Qe=(()=>{class Ie{constructor(ee){this._attachedOverlays=[],this._document=ee}ngOnDestroy(){this.detach()}add(ee){this.remove(ee),this._attachedOverlays.push(ee)}remove(ee){const ke=this._attachedOverlays.indexOf(ee);ke>-1&&this._attachedOverlays.splice(ke,1),0===this._attachedOverlays.length&&this.detach()}}return Ie.\u0275fac=function(ee){return new(ee||Ie)(e.LFG(_.K0))},Ie.\u0275prov=e.Yz7({token:Ie,factory:Ie.\u0275fac,providedIn:"root"}),Ie})(),Di=(()=>{class Ie extends Qe{constructor(ee){super(ee),this._keydownListener=ke=>{const ne=this._attachedOverlays;for(let me=ne.length-1;me>-1;me--)if(ne[me]._keydownEvents.observers.length>0){ne[me]._keydownEvents.next(ke);break}}}add(ee){super.add(ee),this._isAttached||(this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}return Ie.\u0275fac=function(ee){return new(ee||Ie)(e.LFG(_.K0))},Ie.\u0275prov=e.Yz7({token:Ie,factory:Ie.\u0275fac,providedIn:"root"}),Ie})(),Ze=(()=>{class Ie extends Qe{constructor(ee,ke){super(ee),this._platform=ke,this._cursorStyleIsSet=!1,this._pointerDownListener=ne=>{this._pointerDownEventTarget=(0,n.sA)(ne)},this._clickListener=ne=>{const me=(0,n.sA)(ne),ye="click"===ne.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:me;this._pointerDownEventTarget=null;const Zt=this._attachedOverlays.slice();for(let ce=Zt.length-1;ce>-1;ce--){const ei=Zt[ce];if(!(ei._outsidePointerEvents.observers.length<1)&&ei.hasAttached()){if(ei.overlayElement.contains(me)||ei.overlayElement.contains(ye))break;ei._outsidePointerEvents.next(ne)}}}}add(ee){if(super.add(ee),!this._isAttached){const ke=this._document.body;ke.addEventListener("pointerdown",this._pointerDownListener,!0),ke.addEventListener("click",this._clickListener,!0),ke.addEventListener("auxclick",this._clickListener,!0),ke.addEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=ke.style.cursor,ke.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const ee=this._document.body;ee.removeEventListener("pointerdown",this._pointerDownListener,!0),ee.removeEventListener("click",this._clickListener,!0),ee.removeEventListener("auxclick",this._clickListener,!0),ee.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(ee.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}}return Ie.\u0275fac=function(ee){return new(ee||Ie)(e.LFG(_.K0),e.LFG(n.t4))},Ie.\u0275prov=e.Yz7({token:Ie,factory:Ie.\u0275fac,providedIn:"root"}),Ie})(),Le=0,gi=(()=>{class Ie{constructor(ee,ke,ne,me,ye,Zt,ce,ei,ni,Fi,wi){this.scrollStrategies=ee,this._overlayContainer=ke,this._componentFactoryResolver=ne,this._positionBuilder=me,this._keyboardDispatcher=ye,this._injector=Zt,this._ngZone=ce,this._document=ei,this._directionality=ni,this._location=Fi,this._outsideClickDispatcher=wi}create(ee){const ke=this._createHostElement(),ne=this._createPaneElement(ke),me=this._createPortalOutlet(ne),ye=new yt(ee);return ye.direction=ye.direction||this._directionality.value,new Et(me,ke,ne,ye,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher)}position(){return this._positionBuilder}_createPaneElement(ee){const ke=this._document.createElement("div");return ke.id="cdk-overlay-"+Le++,ke.classList.add("cdk-overlay-pane"),ee.appendChild(ke),ke}_createHostElement(){const ee=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(ee),ee}_createPortalOutlet(ee){return this._appRef||(this._appRef=this._injector.get(e.z2F)),new s.u0(ee,this._componentFactoryResolver,this._appRef,this._injector,this._document)}}return Ie.\u0275fac=function(ee){return new(ee||Ie)(e.LFG(Ct),e.LFG(ht),e.LFG(e._Vd),e.LFG(Ne),e.LFG(Di),e.LFG(e.zs3),e.LFG(e.R0b),e.LFG(_.K0),e.LFG(r.Is),e.LFG(_.Ye),e.LFG(Ze))},Ie.\u0275prov=e.Yz7({token:Ie,factory:Ie.\u0275fac}),Ie})();const pe={provide:new e.OlP("cdk-connected-overlay-scroll-strategy"),deps:[gi],useFactory:function(Ie){return()=>Ie.scrollStrategies.reposition()}};let ze=(()=>{class Ie{}return Ie.\u0275fac=function(ee){return new(ee||Ie)},Ie.\u0275mod=e.oAB({type:Ie}),Ie.\u0275inj=e.cJS({providers:[gi,pe],imports:[[r.vT,s.eL,C.Cl],C.Cl]}),Ie})()},70925:(U,$,m)=>{"use strict";m.d($,{t4:()=>t,ud:()=>n,sA:()=>Jt,ht:()=>Wt,kV:()=>xt,Oy:()=>Ct,_i:()=>St,qK:()=>u,i$:()=>B,Mq:()=>rt});var C=m(5e3),_=m(69808);let e;try{e="undefined"!=typeof Intl&&Intl.v8BreakIterator}catch(yt){e=!1}let r,t=(()=>{class yt{constructor(mt){this._platformId=mt,this.isBrowser=this._platformId?(0,_.NF)(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!e)&&"undefined"!=typeof CSS&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return yt.\u0275fac=function(mt){return new(mt||yt)(C.LFG(C.Lbi))},yt.\u0275prov=C.Yz7({token:yt,factory:yt.\u0275fac,providedIn:"root"}),yt})(),n=(()=>{class yt{}return yt.\u0275fac=function(mt){return new(mt||yt)},yt.\u0275mod=C.oAB({type:yt}),yt.\u0275inj=C.cJS({}),yt})();const s=["color","button","checkbox","date","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","time","url","week"];function u(){if(r)return r;if("object"!=typeof document||!document)return r=new Set(s),r;let yt=document.createElement("input");return r=new Set(s.filter(ot=>(yt.setAttribute("type",ot),yt.type===ot))),r}let y,Q,at,Ht;function B(yt){return function(){if(null==y&&"undefined"!=typeof window)try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>y=!0}))}finally{y=y||!1}return y}()?yt:!!yt.capture}function rt(){if(null==at){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return at=!1,at;if("scrollBehavior"in document.documentElement.style)at=!0;else{const yt=Element.prototype.scrollTo;at=!!yt&&!/\{\s*\[native code\]\s*\}/.test(yt.toString())}}return at}function St(){if("object"!=typeof document||!document)return 0;if(null==Q){const yt=document.createElement("div"),ot=yt.style;yt.dir="rtl",ot.width="1px",ot.overflow="auto",ot.visibility="hidden",ot.pointerEvents="none",ot.position="absolute";const mt=document.createElement("div"),lt=mt.style;lt.width="2px",lt.height="1px",yt.appendChild(mt),document.body.appendChild(yt),Q=0,0===yt.scrollLeft&&(yt.scrollLeft=1,Q=0===yt.scrollLeft?1:2),yt.remove()}return Q}function xt(yt){if(function(){if(null==Ht){const yt="undefined"!=typeof document?document.head:null;Ht=!(!yt||!yt.createShadowRoot&&!yt.attachShadow)}return Ht}()){const ot=yt.getRootNode?yt.getRootNode():null;if("undefined"!=typeof ShadowRoot&&ShadowRoot&&ot instanceof ShadowRoot)return ot}return null}function Wt(){let yt="undefined"!=typeof document&&document?document.activeElement:null;for(;yt&&yt.shadowRoot;){const ot=yt.shadowRoot.activeElement;if(ot===yt)break;yt=ot}return yt}function Jt(yt){return yt.composedPath?yt.composedPath()[0]:yt.target}function Ct(){return"undefined"!=typeof __karma__&&!!__karma__||"undefined"!=typeof jasmine&&!!jasmine||"undefined"!=typeof jest&&!!jest||"undefined"!=typeof Mocha&&!!Mocha}},47429:(U,$,m)=>{"use strict";m.d($,{en:()=>at,ig:()=>vt,Pl:()=>Wt,C5:()=>x,u0:()=>St,eL:()=>Ct,UE:()=>B});var C=m(5e3),_=m(69808);class y{attach(mt){return this._attachedHost=mt,mt.attach(this)}detach(){let mt=this._attachedHost;null!=mt&&(this._attachedHost=null,mt.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(mt){this._attachedHost=mt}}class x extends y{constructor(mt,lt,Ut,Rt){super(),this.component=mt,this.viewContainerRef=lt,this.injector=Ut,this.componentFactoryResolver=Rt}}class B extends y{constructor(mt,lt,Ut){super(),this.templateRef=mt,this.viewContainerRef=lt,this.context=Ut}get origin(){return this.templateRef.elementRef}attach(mt,lt=this.context){return this.context=lt,super.attach(mt)}detach(){return this.context=void 0,super.detach()}}class Q extends y{constructor(mt){super(),this.element=mt instanceof C.SBq?mt.nativeElement:mt}}class at{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(mt){return mt instanceof x?(this._attachedPortal=mt,this.attachComponentPortal(mt)):mt instanceof B?(this._attachedPortal=mt,this.attachTemplatePortal(mt)):this.attachDomPortal&&mt instanceof Q?(this._attachedPortal=mt,this.attachDomPortal(mt)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(mt){this._disposeFn=mt}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class St extends at{constructor(mt,lt,Ut,Rt,Et){super(),this.outletElement=mt,this._componentFactoryResolver=lt,this._appRef=Ut,this._defaultInjector=Rt,this.attachDomPortal=ht=>{const nt=ht.element,he=this._document.createComment("dom-portal");nt.parentNode.insertBefore(he,nt),this.outletElement.appendChild(nt),this._attachedPortal=ht,super.setDisposeFn(()=>{he.parentNode&&he.parentNode.replaceChild(nt,he)})},this._document=Et}attachComponentPortal(mt){const Ut=(mt.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(mt.component);let Rt;return mt.viewContainerRef?(Rt=mt.viewContainerRef.createComponent(Ut,mt.viewContainerRef.length,mt.injector||mt.viewContainerRef.injector),this.setDisposeFn(()=>Rt.destroy())):(Rt=Ut.create(mt.injector||this._defaultInjector),this._appRef.attachView(Rt.hostView),this.setDisposeFn(()=>{this._appRef.detachView(Rt.hostView),Rt.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(Rt)),this._attachedPortal=mt,Rt}attachTemplatePortal(mt){let lt=mt.viewContainerRef,Ut=lt.createEmbeddedView(mt.templateRef,mt.context);return Ut.rootNodes.forEach(Rt=>this.outletElement.appendChild(Rt)),Ut.detectChanges(),this.setDisposeFn(()=>{let Rt=lt.indexOf(Ut);-1!==Rt&&lt.remove(Rt)}),this._attachedPortal=mt,Ut}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(mt){return mt.hostView.rootNodes[0]}}let vt=(()=>{class ot extends B{constructor(lt,Ut){super(lt,Ut)}}return ot.\u0275fac=function(lt){return new(lt||ot)(C.Y36(C.Rgc),C.Y36(C.s_b))},ot.\u0275dir=C.lG2({type:ot,selectors:[["","cdkPortal",""]],exportAs:["cdkPortal"],features:[C.qOj]}),ot})(),Wt=(()=>{class ot extends at{constructor(lt,Ut,Rt){super(),this._componentFactoryResolver=lt,this._viewContainerRef=Ut,this._isInitialized=!1,this.attached=new C.vpe,this.attachDomPortal=Et=>{const ht=Et.element,nt=this._document.createComment("dom-portal");Et.setAttachedHost(this),ht.parentNode.insertBefore(nt,ht),this._getRootNode().appendChild(ht),this._attachedPortal=Et,super.setDisposeFn(()=>{nt.parentNode&&nt.parentNode.replaceChild(ht,nt)})},this._document=Rt}get portal(){return this._attachedPortal}set portal(lt){this.hasAttached()&&!lt&&!this._isInitialized||(this.hasAttached()&&super.detach(),lt&&super.attach(lt),this._attachedPortal=lt||null)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedPortal=null,this._attachedRef=null}attachComponentPortal(lt){lt.setAttachedHost(this);const Ut=null!=lt.viewContainerRef?lt.viewContainerRef:this._viewContainerRef,Et=(lt.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(lt.component),ht=Ut.createComponent(Et,Ut.length,lt.injector||Ut.injector);return Ut!==this._viewContainerRef&&this._getRootNode().appendChild(ht.hostView.rootNodes[0]),super.setDisposeFn(()=>ht.destroy()),this._attachedPortal=lt,this._attachedRef=ht,this.attached.emit(ht),ht}attachTemplatePortal(lt){lt.setAttachedHost(this);const Ut=this._viewContainerRef.createEmbeddedView(lt.templateRef,lt.context);return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=lt,this._attachedRef=Ut,this.attached.emit(Ut),Ut}_getRootNode(){const lt=this._viewContainerRef.element.nativeElement;return lt.nodeType===lt.ELEMENT_NODE?lt:lt.parentNode}}return ot.\u0275fac=function(lt){return new(lt||ot)(C.Y36(C._Vd),C.Y36(C.s_b),C.Y36(_.K0))},ot.\u0275dir=C.lG2({type:ot,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:["cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[C.qOj]}),ot})(),Ct=(()=>{class ot{}return ot.\u0275fac=function(lt){return new(lt||ot)},ot.\u0275mod=C.oAB({type:ot}),ot.\u0275inj=C.cJS({}),ot})()},30495:(U,$,m)=>{"use strict";m.d($,{PQ:()=>ue,ZD:()=>Bt,mF:()=>ve,Cl:()=>Te,rL:()=>Ne});var C=m(63191),_=m(5e3),e=m(84408),t=m(50727);const n={schedule($t){let _e=requestAnimationFrame,At=cancelAnimationFrame;const{delegate:pe}=n;pe&&(_e=pe.requestAnimationFrame,At=pe.cancelAnimationFrame);const ze=_e(hi=>{At=void 0,$t(hi)});return new t.w0(()=>null==At?void 0:At(ze))},requestAnimationFrame(...$t){const{delegate:_e}=n;return((null==_e?void 0:_e.requestAnimationFrame)||requestAnimationFrame)(...$t)},cancelAnimationFrame(...$t){const{delegate:_e}=n;return((null==_e?void 0:_e.cancelAnimationFrame)||cancelAnimationFrame)(...$t)},delegate:void 0};var s=m(97565);new class extends s.v{flush(_e){this._active=!0,this._scheduled=void 0;const{actions:At}=this;let pe,ze=-1;_e=_e||At.shift();const hi=At.length;do{if(pe=_e.execute(_e.state,_e.delay))break}while(++ze<hi&&(_e=At.shift()));if(this._active=!1,pe){for(;++ze<hi&&(_e=At.shift());)_e.unsubscribe();throw pe}}}(class extends e.o{constructor(_e,At){super(_e,At),this.scheduler=_e,this.work=At}requestAsyncId(_e,At,pe=0){return null!==pe&&pe>0?super.requestAsyncId(_e,At,pe):(_e.actions.push(this),_e._scheduled||(_e._scheduled=n.requestAnimationFrame(()=>_e.flush(void 0))))}recycleAsyncId(_e,At,pe=0){if(null!=pe&&pe>0||null==pe&&this.delay>0)return super.recycleAsyncId(_e,At,pe);0===_e.actions.length&&(n.cancelAnimationFrame(At),_e._scheduled=void 0)}});var B=m(77579),Q=m(39646),at=m(68306),rt=m(54968),Ht=(m(53101),m(34986)),vt=m(54482),xt=m(38421),Wt=m(25403),Ct=m(5963);function yt($t,_e=Ht.P){return function($t){return(0,vt.e)((_e,At)=>{let pe=!1,ze=null,hi=null,Ie=!1;const te=()=>{if(null==hi||hi.unsubscribe(),hi=null,pe){pe=!1;const ke=ze;ze=null,At.next(ke)}Ie&&At.complete()},ee=()=>{hi=null,Ie&&At.complete()};_e.subscribe(new Wt.Q(At,ke=>{pe=!0,ze=ke,hi||(0,xt.Xf)($t()).subscribe(hi=new Wt.Q(At,te,ee))},()=>{Ie=!0,(!pe||!hi||hi.closed)&&At.complete()}))})}(()=>(0,Ct.H)($t,_e))}var ot=m(39300),mt=m(82722),lt=m(69808),Ut=m(70925),Rt=m(50226);let ve=(()=>{class $t{constructor(At,pe,ze){this._ngZone=At,this._platform=pe,this._scrolled=new B.x,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=ze}register(At){this.scrollContainers.has(At)||this.scrollContainers.set(At,At.elementScrolled().subscribe(()=>this._scrolled.next(At)))}deregister(At){const pe=this.scrollContainers.get(At);pe&&(pe.unsubscribe(),this.scrollContainers.delete(At))}scrolled(At=20){return this._platform.isBrowser?new at.y(pe=>{this._globalSubscription||this._addGlobalListener();const ze=At>0?this._scrolled.pipe(yt(At)).subscribe(pe):this._scrolled.subscribe(pe);return this._scrolledCount++,()=>{ze.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):(0,Q.of)()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((At,pe)=>this.deregister(pe)),this._scrolled.complete()}ancestorScrolled(At,pe){const ze=this.getAncestorScrollContainers(At);return this.scrolled(pe).pipe((0,ot.h)(hi=>!hi||ze.indexOf(hi)>-1))}getAncestorScrollContainers(At){const pe=[];return this.scrollContainers.forEach((ze,hi)=>{this._scrollableContainsElement(hi,At)&&pe.push(hi)}),pe}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(At,pe){let ze=(0,C.fI)(pe),hi=At.getElementRef().nativeElement;do{if(ze==hi)return!0}while(ze=ze.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>{const At=this._getWindow();return(0,rt.R)(At.document,"scroll").subscribe(()=>this._scrolled.next())})}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return $t.\u0275fac=function(At){return new(At||$t)(_.LFG(_.R0b),_.LFG(Ut.t4),_.LFG(lt.K0,8))},$t.\u0275prov=_.Yz7({token:$t,factory:$t.\u0275fac,providedIn:"root"}),$t})(),ue=(()=>{class $t{constructor(At,pe,ze,hi){this.elementRef=At,this.scrollDispatcher=pe,this.ngZone=ze,this.dir=hi,this._destroyed=new B.x,this._elementScrolled=new at.y(Ie=>this.ngZone.runOutsideAngular(()=>(0,rt.R)(this.elementRef.nativeElement,"scroll").pipe((0,mt.R)(this._destroyed)).subscribe(Ie)))}ngOnInit(){this.scrollDispatcher.register(this)}ngOnDestroy(){this.scrollDispatcher.deregister(this),this._destroyed.next(),this._destroyed.complete()}elementScrolled(){return this._elementScrolled}getElementRef(){return this.elementRef}scrollTo(At){const pe=this.elementRef.nativeElement,ze=this.dir&&"rtl"==this.dir.value;null==At.left&&(At.left=ze?At.end:At.start),null==At.right&&(At.right=ze?At.start:At.end),null!=At.bottom&&(At.top=pe.scrollHeight-pe.clientHeight-At.bottom),ze&&0!=(0,Ut._i)()?(null!=At.left&&(At.right=pe.scrollWidth-pe.clientWidth-At.left),2==(0,Ut._i)()?At.left=At.right:1==(0,Ut._i)()&&(At.left=At.right?-At.right:At.right)):null!=At.right&&(At.left=pe.scrollWidth-pe.clientWidth-At.right),this._applyScrollToOptions(At)}_applyScrollToOptions(At){const pe=this.elementRef.nativeElement;(0,Ut.Mq)()?pe.scrollTo(At):(null!=At.top&&(pe.scrollTop=At.top),null!=At.left&&(pe.scrollLeft=At.left))}measureScrollOffset(At){const pe="left",hi=this.elementRef.nativeElement;if("top"==At)return hi.scrollTop;if("bottom"==At)return hi.scrollHeight-hi.clientHeight-hi.scrollTop;const Ie=this.dir&&"rtl"==this.dir.value;return"start"==At?At=Ie?"right":pe:"end"==At&&(At=Ie?pe:"right"),Ie&&2==(0,Ut._i)()?At==pe?hi.scrollWidth-hi.clientWidth-hi.scrollLeft:hi.scrollLeft:Ie&&1==(0,Ut._i)()?At==pe?hi.scrollLeft+hi.scrollWidth-hi.clientWidth:-hi.scrollLeft:At==pe?hi.scrollLeft:hi.scrollWidth-hi.clientWidth-hi.scrollLeft}}return $t.\u0275fac=function(At){return new(At||$t)(_.Y36(_.SBq),_.Y36(ve),_.Y36(_.R0b),_.Y36(Rt.Is,8))},$t.\u0275dir=_.lG2({type:$t,selectors:[["","cdk-scrollable",""],["","cdkScrollable",""]]}),$t})(),Ne=(()=>{class $t{constructor(At,pe,ze){this._platform=At,this._change=new B.x,this._changeListener=hi=>{this._change.next(hi)},this._document=ze,pe.runOutsideAngular(()=>{if(At.isBrowser){const hi=this._getWindow();hi.addEventListener("resize",this._changeListener),hi.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const At=this._getWindow();At.removeEventListener("resize",this._changeListener),At.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const At={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),At}getViewportRect(){const At=this.getViewportScrollPosition(),{width:pe,height:ze}=this.getViewportSize();return{top:At.top,left:At.left,bottom:At.top+ze,right:At.left+pe,height:ze,width:pe}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const At=this._document,pe=this._getWindow(),ze=At.documentElement,hi=ze.getBoundingClientRect();return{top:-hi.top||At.body.scrollTop||pe.scrollY||ze.scrollTop||0,left:-hi.left||At.body.scrollLeft||pe.scrollX||ze.scrollLeft||0}}change(At=20){return At>0?this._change.pipe(yt(At)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const At=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:At.innerWidth,height:At.innerHeight}:{width:0,height:0}}}return $t.\u0275fac=function(At){return new(At||$t)(_.LFG(Ut.t4),_.LFG(_.R0b),_.LFG(lt.K0,8))},$t.\u0275prov=_.Yz7({token:$t,factory:$t.\u0275fac,providedIn:"root"}),$t})(),Bt=(()=>{class $t{}return $t.\u0275fac=function(At){return new(At||$t)},$t.\u0275mod=_.oAB({type:$t}),$t.\u0275inj=_.cJS({}),$t})(),Te=(()=>{class $t{}return $t.\u0275fac=function(At){return new(At||$t)},$t.\u0275mod=_.oAB({type:$t}),$t.\u0275inj=_.cJS({imports:[[Rt.vT,Ut.ud,Bt],Rt.vT,Bt]}),$t})()},69808:(U,$,m)=>{"use strict";m.d($,{mr:()=>Wt,Ov:()=>Xa,ez:()=>Eo,K0:()=>s,Do:()=>Ct,V_:()=>x,Ye:()=>yt,S$:()=>vt,mk:()=>oe,sg:()=>Ji,O5:()=>zn,PC:()=>Jr,RF:()=>jo,n9:()=>ro,b0:()=>Jt,lw:()=>u,EM:()=>Ko,JF:()=>_a,NF:()=>aa,w_:()=>r,bD:()=>Ds,q:()=>e,Mx:()=>Gn,HT:()=>n});var C=m(5e3);let _=null;function e(){return _}function n(Ot){_||(_=Ot)}class r{}const s=new C.OlP("DocumentToken");let u=(()=>{class Ot{historyGo(V){throw new Error("Not implemented")}}return Ot.\u0275fac=function(V){return new(V||Ot)},Ot.\u0275prov=C.Yz7({token:Ot,factory:function(){return(0,C.LFG)(B)},providedIn:"platform"}),Ot})();const x=new C.OlP("Location Initialized");let B=(()=>{class Ot extends u{constructor(V){super(),this._doc=V,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return e().getBaseHref(this._doc)}onPopState(V){const z=e().getGlobalEventTarget(this._doc,"window");return z.addEventListener("popstate",V,!1),()=>z.removeEventListener("popstate",V)}onHashChange(V){const z=e().getGlobalEventTarget(this._doc,"window");return z.addEventListener("hashchange",V,!1),()=>z.removeEventListener("hashchange",V)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(V){this.location.pathname=V}pushState(V,z,It){Q()?this._history.pushState(V,z,It):this.location.hash=It}replaceState(V,z,It){Q()?this._history.replaceState(V,z,It):this.location.hash=It}forward(){this._history.forward()}back(){this._history.back()}historyGo(V=0){this._history.go(V)}getState(){return this._history.state}}return Ot.\u0275fac=function(V){return new(V||Ot)(C.LFG(s))},Ot.\u0275prov=C.Yz7({token:Ot,factory:function(){return new B((0,C.LFG)(s))},providedIn:"platform"}),Ot})();function Q(){return!!window.history.pushState}function rt(Ot,Z){if(0==Ot.length)return Z;if(0==Z.length)return Ot;let V=0;return Ot.endsWith("/")&&V++,Z.startsWith("/")&&V++,2==V?Ot+Z.substring(1):1==V?Ot+Z:Ot+"/"+Z}function St(Ot){const Z=Ot.match(/#|\?|$/),V=Z&&Z.index||Ot.length;return Ot.slice(0,V-("/"===Ot[V-1]?1:0))+Ot.slice(V)}function Ht(Ot){return Ot&&"?"!==Ot[0]?"?"+Ot:Ot}let vt=(()=>{class Ot{historyGo(V){throw new Error("Not implemented")}}return Ot.\u0275fac=function(V){return new(V||Ot)},Ot.\u0275prov=C.Yz7({token:Ot,factory:function(){return function(Ot){const Z=(0,C.LFG)(s).location;return new Jt((0,C.LFG)(u),Z&&Z.origin||"")}()},providedIn:"root"}),Ot})();const Wt=new C.OlP("appBaseHref");let Jt=(()=>{class Ot extends vt{constructor(V,z){if(super(),this._platformLocation=V,this._removeListenerFns=[],null==z&&(z=this._platformLocation.getBaseHrefFromDOM()),null==z)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=z}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(V){this._removeListenerFns.push(this._platformLocation.onPopState(V),this._platformLocation.onHashChange(V))}getBaseHref(){return this._baseHref}prepareExternalUrl(V){return rt(this._baseHref,V)}path(V=!1){const z=this._platformLocation.pathname+Ht(this._platformLocation.search),It=this._platformLocation.hash;return It&&V?`${z}${It}`:z}pushState(V,z,It,Fe){const bi=this.prepareExternalUrl(It+Ht(Fe));this._platformLocation.pushState(V,z,bi)}replaceState(V,z,It,Fe){const bi=this.prepareExternalUrl(It+Ht(Fe));this._platformLocation.replaceState(V,z,bi)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(V=0){var z,It;null===(It=(z=this._platformLocation).historyGo)||void 0===It||It.call(z,V)}}return Ot.\u0275fac=function(V){return new(V||Ot)(C.LFG(u),C.LFG(Wt,8))},Ot.\u0275prov=C.Yz7({token:Ot,factory:Ot.\u0275fac}),Ot})(),Ct=(()=>{class Ot extends vt{constructor(V,z){super(),this._platformLocation=V,this._baseHref="",this._removeListenerFns=[],null!=z&&(this._baseHref=z)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(V){this._removeListenerFns.push(this._platformLocation.onPopState(V),this._platformLocation.onHashChange(V))}getBaseHref(){return this._baseHref}path(V=!1){let z=this._platformLocation.hash;return null==z&&(z="#"),z.length>0?z.substring(1):z}prepareExternalUrl(V){const z=rt(this._baseHref,V);return z.length>0?"#"+z:z}pushState(V,z,It,Fe){let bi=this.prepareExternalUrl(It+Ht(Fe));0==bi.length&&(bi=this._platformLocation.pathname),this._platformLocation.pushState(V,z,bi)}replaceState(V,z,It,Fe){let bi=this.prepareExternalUrl(It+Ht(Fe));0==bi.length&&(bi=this._platformLocation.pathname),this._platformLocation.replaceState(V,z,bi)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(V=0){var z,It;null===(It=(z=this._platformLocation).historyGo)||void 0===It||It.call(z,V)}}return Ot.\u0275fac=function(V){return new(V||Ot)(C.LFG(u),C.LFG(Wt,8))},Ot.\u0275prov=C.Yz7({token:Ot,factory:Ot.\u0275fac}),Ot})(),yt=(()=>{class Ot{constructor(V,z){this._subject=new C.vpe,this._urlChangeListeners=[],this._platformStrategy=V;const It=this._platformStrategy.getBaseHref();this._platformLocation=z,this._baseHref=St(lt(It)),this._platformStrategy.onPopState(Fe=>{this._subject.emit({url:this.path(!0),pop:!0,state:Fe.state,type:Fe.type})})}path(V=!1){return this.normalize(this._platformStrategy.path(V))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(V,z=""){return this.path()==this.normalize(V+Ht(z))}normalize(V){return Ot.stripTrailingSlash(function(Ot,Z){return Ot&&Z.startsWith(Ot)?Z.substring(Ot.length):Z}(this._baseHref,lt(V)))}prepareExternalUrl(V){return V&&"/"!==V[0]&&(V="/"+V),this._platformStrategy.prepareExternalUrl(V)}go(V,z="",It=null){this._platformStrategy.pushState(It,"",V,z),this._notifyUrlChangeListeners(this.prepareExternalUrl(V+Ht(z)),It)}replaceState(V,z="",It=null){this._platformStrategy.replaceState(It,"",V,z),this._notifyUrlChangeListeners(this.prepareExternalUrl(V+Ht(z)),It)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(V=0){var z,It;null===(It=(z=this._platformStrategy).historyGo)||void 0===It||It.call(z,V)}onUrlChange(V){this._urlChangeListeners.push(V),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(z=>{this._notifyUrlChangeListeners(z.url,z.state)}))}_notifyUrlChangeListeners(V="",z){this._urlChangeListeners.forEach(It=>It(V,z))}subscribe(V,z,It){return this._subject.subscribe({next:V,error:z,complete:It})}}return Ot.normalizeQueryParams=Ht,Ot.joinWithSlash=rt,Ot.stripTrailingSlash=St,Ot.\u0275fac=function(V){return new(V||Ot)(C.LFG(vt),C.LFG(u))},Ot.\u0275prov=C.Yz7({token:Ot,factory:function(){return new yt((0,C.LFG)(vt),(0,C.LFG)(u))},providedIn:"root"}),Ot})();function lt(Ot){return Ot.replace(/\/index.html$/,"")}var Et=(()=>((Et=Et||{})[Et.Zero=0]="Zero",Et[Et.One=1]="One",Et[Et.Two=2]="Two",Et[Et.Few=3]="Few",Et[Et.Many=4]="Many",Et[Et.Other=5]="Other",Et))();const ze=C.kL8;class Qr{}let Vi=(()=>{class Ot extends Qr{constructor(V){super(),this.locale=V}getPluralCategory(V,z){switch(ze(z||this.locale)(V)){case Et.Zero:return"zero";case Et.One:return"one";case Et.Two:return"two";case Et.Few:return"few";case Et.Many:return"many";default:return"other"}}}return Ot.\u0275fac=function(V){return new(V||Ot)(C.LFG(C.soG))},Ot.\u0275prov=C.Yz7({token:Ot,factory:Ot.\u0275fac}),Ot})();function Gn(Ot,Z){Z=encodeURIComponent(Z);for(const V of Ot.split(";")){const z=V.indexOf("="),[It,Fe]=-1==z?[V,""]:[V.slice(0,z),V.slice(z+1)];if(It.trim()===Z)return decodeURIComponent(Fe)}return null}let oe=(()=>{class Ot{constructor(V,z,It,Fe){this._iterableDiffers=V,this._keyValueDiffers=z,this._ngEl=It,this._renderer=Fe,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(V){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof V?V.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(V){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof V?V.split(/\s+/):V,this._rawClass&&((0,C.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const V=this._iterableDiffer.diff(this._rawClass);V&&this._applyIterableChanges(V)}else if(this._keyValueDiffer){const V=this._keyValueDiffer.diff(this._rawClass);V&&this._applyKeyValueChanges(V)}}_applyKeyValueChanges(V){V.forEachAddedItem(z=>this._toggleClass(z.key,z.currentValue)),V.forEachChangedItem(z=>this._toggleClass(z.key,z.currentValue)),V.forEachRemovedItem(z=>{z.previousValue&&this._toggleClass(z.key,!1)})}_applyIterableChanges(V){V.forEachAddedItem(z=>{if("string"!=typeof z.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,C.AaK)(z.item)}`);this._toggleClass(z.item,!0)}),V.forEachRemovedItem(z=>this._toggleClass(z.item,!1))}_applyClasses(V){V&&(Array.isArray(V)||V instanceof Set?V.forEach(z=>this._toggleClass(z,!0)):Object.keys(V).forEach(z=>this._toggleClass(z,!!V[z])))}_removeClasses(V){V&&(Array.isArray(V)||V instanceof Set?V.forEach(z=>this._toggleClass(z,!1)):Object.keys(V).forEach(z=>this._toggleClass(z,!1)))}_toggleClass(V,z){(V=V.trim())&&V.split(/\s+/g).forEach(It=>{z?this._renderer.addClass(this._ngEl.nativeElement,It):this._renderer.removeClass(this._ngEl.nativeElement,It)})}}return Ot.\u0275fac=function(V){return new(V||Ot)(C.Y36(C.ZZ4),C.Y36(C.aQg),C.Y36(C.SBq),C.Y36(C.Qsj))},Ot.\u0275dir=C.lG2({type:Ot,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),Ot})();class Oi{constructor(Z,V,z,It){this.$implicit=Z,this.ngForOf=V,this.index=z,this.count=It}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Ji=(()=>{class Ot{constructor(V,z,It){this._viewContainer=V,this._template=z,this._differs=It,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(V){this._ngForOf=V,this._ngForOfDirty=!0}set ngForTrackBy(V){this._trackByFn=V}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(V){V&&(this._template=V)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const V=this._ngForOf;!this._differ&&V&&(this._differ=this._differs.find(V).create(this.ngForTrackBy))}if(this._differ){const V=this._differ.diff(this._ngForOf);V&&this._applyChanges(V)}}_applyChanges(V){const z=this._viewContainer;V.forEachOperation((It,Fe,bi)=>{if(null==It.previousIndex)z.createEmbeddedView(this._template,new Oi(It.item,this._ngForOf,-1,-1),null===bi?void 0:bi);else if(null==bi)z.remove(null===Fe?void 0:Fe);else if(null!==Fe){const cn=z.get(Fe);z.move(cn,bi),Yi(cn,It)}});for(let It=0,Fe=z.length;It<Fe;It++){const cn=z.get(It).context;cn.index=It,cn.count=Fe,cn.ngForOf=this._ngForOf}V.forEachIdentityChange(It=>{Yi(z.get(It.currentIndex),It)})}static ngTemplateContextGuard(V,z){return!0}}return Ot.\u0275fac=function(V){return new(V||Ot)(C.Y36(C.s_b),C.Y36(C.Rgc),C.Y36(C.ZZ4))},Ot.\u0275dir=C.lG2({type:Ot,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),Ot})();function Yi(Ot,Z){Ot.context.$implicit=Z.item}let zn=(()=>{class Ot{constructor(V,z){this._viewContainer=V,this._context=new nr,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=z}set ngIf(V){this._context.$implicit=this._context.ngIf=V,this._updateView()}set ngIfThen(V){Fn("ngIfThen",V),this._thenTemplateRef=V,this._thenViewRef=null,this._updateView()}set ngIfElse(V){Fn("ngIfElse",V),this._elseTemplateRef=V,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(V,z){return!0}}return Ot.\u0275fac=function(V){return new(V||Ot)(C.Y36(C.s_b),C.Y36(C.Rgc))},Ot.\u0275dir=C.lG2({type:Ot,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),Ot})();class nr{constructor(){this.$implicit=null,this.ngIf=null}}function Fn(Ot,Z){if(Z&&!Z.createEmbeddedView)throw new Error(`${Ot} must be a TemplateRef, but received '${(0,C.AaK)(Z)}'.`)}class Ao{constructor(Z,V){this._viewContainerRef=Z,this._templateRef=V,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(Z){Z&&!this._created?this.create():!Z&&this._created&&this.destroy()}}let jo=(()=>{class Ot{constructor(){this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(V){this._ngSwitch=V,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(V){this._defaultViews||(this._defaultViews=[]),this._defaultViews.push(V)}_matchCase(V){const z=V==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||z,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),z}_updateDefaultCases(V){if(this._defaultViews&&V!==this._defaultUsed){this._defaultUsed=V;for(let z=0;z<this._defaultViews.length;z++)this._defaultViews[z].enforceState(V)}}}return Ot.\u0275fac=function(V){return new(V||Ot)},Ot.\u0275dir=C.lG2({type:Ot,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"}}),Ot})(),ro=(()=>{class Ot{constructor(V,z,It){this.ngSwitch=It,It._addCase(),this._view=new Ao(V,z)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return Ot.\u0275fac=function(V){return new(V||Ot)(C.Y36(C.s_b),C.Y36(C.Rgc),C.Y36(jo,9))},Ot.\u0275dir=C.lG2({type:Ot,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"}}),Ot})(),Jr=(()=>{class Ot{constructor(V,z,It){this._ngEl=V,this._differs=z,this._renderer=It,this._ngStyle=null,this._differ=null}set ngStyle(V){this._ngStyle=V,!this._differ&&V&&(this._differ=this._differs.find(V).create())}ngDoCheck(){if(this._differ){const V=this._differ.diff(this._ngStyle);V&&this._applyChanges(V)}}_setStyle(V,z){const[It,Fe]=V.split(".");null!=(z=null!=z&&Fe?`${z}${Fe}`:z)?this._renderer.setStyle(this._ngEl.nativeElement,It,z):this._renderer.removeStyle(this._ngEl.nativeElement,It)}_applyChanges(V){V.forEachRemovedItem(z=>this._setStyle(z.key,null)),V.forEachAddedItem(z=>this._setStyle(z.key,z.currentValue)),V.forEachChangedItem(z=>this._setStyle(z.key,z.currentValue))}}return Ot.\u0275fac=function(V){return new(V||Ot)(C.Y36(C.SBq),C.Y36(C.aQg),C.Y36(C.Qsj))},Ot.\u0275dir=C.lG2({type:Ot,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"}}),Ot})();class Ro{createSubscription(Z,V){return Z.subscribe({next:V,error:z=>{throw z}})}dispose(Z){Z.unsubscribe()}onDestroy(Z){Z.unsubscribe()}}class ns{createSubscription(Z,V){return Z.then(V,z=>{throw z})}dispose(Z){}onDestroy(Z){}}const Ho=new ns,Ya=new Ro;let Xa=(()=>{class Ot{constructor(V){this._ref=V,this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null}ngOnDestroy(){this._subscription&&this._dispose()}transform(V){return this._obj?V!==this._obj?(this._dispose(),this.transform(V)):this._latestValue:(V&&this._subscribe(V),this._latestValue)}_subscribe(V){this._obj=V,this._strategy=this._selectStrategy(V),this._subscription=this._strategy.createSubscription(V,z=>this._updateLatestValue(V,z))}_selectStrategy(V){if((0,C.QGY)(V))return Ho;if((0,C.F4k)(V))return Ya;throw function(Ot,Z){return Error(`InvalidPipeArgument: '${Z}' for pipe '${(0,C.AaK)(Ot)}'`)}(Ot,V)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(V,z){V===this._obj&&(this._latestValue=z,this._ref.markForCheck())}}return Ot.\u0275fac=function(V){return new(V||Ot)(C.Y36(C.sBO,16))},Ot.\u0275pipe=C.Yjl({name:"async",type:Ot,pure:!1}),Ot})(),Eo=(()=>{class Ot{}return Ot.\u0275fac=function(V){return new(V||Ot)},Ot.\u0275mod=C.oAB({type:Ot}),Ot.\u0275inj=C.cJS({providers:[{provide:Qr,useClass:Vi}]}),Ot})();const Ds="browser";function aa(Ot){return Ot===Ds}let Ko=(()=>{class Ot{}return Ot.\u0275prov=(0,C.Yz7)({token:Ot,providedIn:"root",factory:()=>new ms((0,C.LFG)(s),window)}),Ot})();class ms{constructor(Z,V){this.document=Z,this.window=V,this.offset=()=>[0,0]}setOffset(Z){this.offset=Array.isArray(Z)?()=>Z:Z}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(Z){this.supportsScrolling()&&this.window.scrollTo(Z[0],Z[1])}scrollToAnchor(Z){if(!this.supportsScrolling())return;const V=function(Ot,Z){const V=Ot.getElementById(Z)||Ot.getElementsByName(Z)[0];if(V)return V;if("function"==typeof Ot.createTreeWalker&&Ot.body&&(Ot.body.createShadowRoot||Ot.body.attachShadow)){const z=Ot.createTreeWalker(Ot.body,NodeFilter.SHOW_ELEMENT);let It=z.currentNode;for(;It;){const Fe=It.shadowRoot;if(Fe){const bi=Fe.getElementById(Z)||Fe.querySelector(`[name="${Z}"]`);if(bi)return bi}It=z.nextNode()}}return null}(this.document,Z);V&&(this.scrollToElement(V),this.attemptFocus(V))}setHistoryScrollRestoration(Z){if(this.supportScrollRestoration()){const V=this.window.history;V&&V.scrollRestoration&&(V.scrollRestoration=Z)}}scrollToElement(Z){const V=Z.getBoundingClientRect(),z=V.left+this.window.pageXOffset,It=V.top+this.window.pageYOffset,Fe=this.offset();this.window.scrollTo(z-Fe[0],It-Fe[1])}attemptFocus(Z){return Z.focus(),this.document.activeElement===Z}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const Z=bl(this.window.history)||bl(Object.getPrototypeOf(this.window.history));return!(!Z||!Z.writable&&!Z.set)}catch(Z){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(Z){return!1}}}function bl(Ot){return Object.getOwnPropertyDescriptor(Ot,"scrollRestoration")}class _a{}},40520:(U,$,m)=>{"use strict";m.d($,{eN:()=>Mt,JF:()=>ke});var C=m(69808),_=m(5e3),e=m(39646),t=m(68306),n=m(24351),r=m(39300),s=m(54004);class u{}class y{}class x{constructor(Zt){this.normalizedNames=new Map,this.lazyUpdate=null,Zt?this.lazyInit="string"==typeof Zt?()=>{this.headers=new Map,Zt.split("\n").forEach(ce=>{const ei=ce.indexOf(":");if(ei>0){const ni=ce.slice(0,ei),Fi=ni.toLowerCase(),wi=ce.slice(ei+1).trim();this.maybeSetNormalizedName(ni,Fi),this.headers.has(Fi)?this.headers.get(Fi).push(wi):this.headers.set(Fi,[wi])}})}:()=>{this.headers=new Map,Object.keys(Zt).forEach(ce=>{let ei=Zt[ce];const ni=ce.toLowerCase();"string"==typeof ei&&(ei=[ei]),ei.length>0&&(this.headers.set(ni,ei),this.maybeSetNormalizedName(ce,ni))})}:this.headers=new Map}has(Zt){return this.init(),this.headers.has(Zt.toLowerCase())}get(Zt){this.init();const ce=this.headers.get(Zt.toLowerCase());return ce&&ce.length>0?ce[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(Zt){return this.init(),this.headers.get(Zt.toLowerCase())||null}append(Zt,ce){return this.clone({name:Zt,value:ce,op:"a"})}set(Zt,ce){return this.clone({name:Zt,value:ce,op:"s"})}delete(Zt,ce){return this.clone({name:Zt,value:ce,op:"d"})}maybeSetNormalizedName(Zt,ce){this.normalizedNames.has(ce)||this.normalizedNames.set(ce,Zt)}init(){this.lazyInit&&(this.lazyInit instanceof x?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(Zt=>this.applyUpdate(Zt)),this.lazyUpdate=null))}copyFrom(Zt){Zt.init(),Array.from(Zt.headers.keys()).forEach(ce=>{this.headers.set(ce,Zt.headers.get(ce)),this.normalizedNames.set(ce,Zt.normalizedNames.get(ce))})}clone(Zt){const ce=new x;return ce.lazyInit=this.lazyInit&&this.lazyInit instanceof x?this.lazyInit:this,ce.lazyUpdate=(this.lazyUpdate||[]).concat([Zt]),ce}applyUpdate(Zt){const ce=Zt.name.toLowerCase();switch(Zt.op){case"a":case"s":let ei=Zt.value;if("string"==typeof ei&&(ei=[ei]),0===ei.length)return;this.maybeSetNormalizedName(Zt.name,ce);const ni=("a"===Zt.op?this.headers.get(ce):void 0)||[];ni.push(...ei),this.headers.set(ce,ni);break;case"d":const Fi=Zt.value;if(Fi){let wi=this.headers.get(ce);if(!wi)return;wi=wi.filter(yi=>-1===Fi.indexOf(yi)),0===wi.length?(this.headers.delete(ce),this.normalizedNames.delete(ce)):this.headers.set(ce,wi)}else this.headers.delete(ce),this.normalizedNames.delete(ce)}}forEach(Zt){this.init(),Array.from(this.normalizedNames.keys()).forEach(ce=>Zt(this.normalizedNames.get(ce),this.headers.get(ce)))}}class B{encodeKey(Zt){return St(Zt)}encodeValue(Zt){return St(Zt)}decodeKey(Zt){return decodeURIComponent(Zt)}decodeValue(Zt){return decodeURIComponent(Zt)}}const at=/%(\d[a-f0-9])/gi,rt={40:"@","3A":":",24:"$","2C":",","3B":";","2B":"+","3D":"=","3F":"?","2F":"/"};function St(ye){return encodeURIComponent(ye).replace(at,(Zt,ce)=>{var ei;return null!==(ei=rt[ce])&&void 0!==ei?ei:Zt})}function Ht(ye){return`${ye}`}class vt{constructor(Zt={}){if(this.updates=null,this.cloneFrom=null,this.encoder=Zt.encoder||new B,Zt.fromString){if(Zt.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function(ye,Zt){const ce=new Map;return ye.length>0&&ye.replace(/^\?/,"").split("&").forEach(ni=>{const Fi=ni.indexOf("="),[wi,yi]=-1==Fi?[Zt.decodeKey(ni),""]:[Zt.decodeKey(ni.slice(0,Fi)),Zt.decodeValue(ni.slice(Fi+1))],pn=ce.get(wi)||[];pn.push(yi),ce.set(wi,pn)}),ce}(Zt.fromString,this.encoder)}else Zt.fromObject?(this.map=new Map,Object.keys(Zt.fromObject).forEach(ce=>{const ei=Zt.fromObject[ce];this.map.set(ce,Array.isArray(ei)?ei:[ei])})):this.map=null}has(Zt){return this.init(),this.map.has(Zt)}get(Zt){this.init();const ce=this.map.get(Zt);return ce?ce[0]:null}getAll(Zt){return this.init(),this.map.get(Zt)||null}keys(){return this.init(),Array.from(this.map.keys())}append(Zt,ce){return this.clone({param:Zt,value:ce,op:"a"})}appendAll(Zt){const ce=[];return Object.keys(Zt).forEach(ei=>{const ni=Zt[ei];Array.isArray(ni)?ni.forEach(Fi=>{ce.push({param:ei,value:Fi,op:"a"})}):ce.push({param:ei,value:ni,op:"a"})}),this.clone(ce)}set(Zt,ce){return this.clone({param:Zt,value:ce,op:"s"})}delete(Zt,ce){return this.clone({param:Zt,value:ce,op:"d"})}toString(){return this.init(),this.keys().map(Zt=>{const ce=this.encoder.encodeKey(Zt);return this.map.get(Zt).map(ei=>ce+"="+this.encoder.encodeValue(ei)).join("&")}).filter(Zt=>""!==Zt).join("&")}clone(Zt){const ce=new vt({encoder:this.encoder});return ce.cloneFrom=this.cloneFrom||this,ce.updates=(this.updates||[]).concat(Zt),ce}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(Zt=>this.map.set(Zt,this.cloneFrom.map.get(Zt))),this.updates.forEach(Zt=>{switch(Zt.op){case"a":case"s":const ce=("a"===Zt.op?this.map.get(Zt.param):void 0)||[];ce.push(Ht(Zt.value)),this.map.set(Zt.param,ce);break;case"d":if(void 0===Zt.value){this.map.delete(Zt.param);break}{let ei=this.map.get(Zt.param)||[];const ni=ei.indexOf(Ht(Zt.value));-1!==ni&&ei.splice(ni,1),ei.length>0?this.map.set(Zt.param,ei):this.map.delete(Zt.param)}}}),this.cloneFrom=this.updates=null)}}class Wt{constructor(){this.map=new Map}set(Zt,ce){return this.map.set(Zt,ce),this}get(Zt){return this.map.has(Zt)||this.map.set(Zt,Zt.defaultValue()),this.map.get(Zt)}delete(Zt){return this.map.delete(Zt),this}has(Zt){return this.map.has(Zt)}keys(){return this.map.keys()}}function Ct(ye){return"undefined"!=typeof ArrayBuffer&&ye instanceof ArrayBuffer}function yt(ye){return"undefined"!=typeof Blob&&ye instanceof Blob}function ot(ye){return"undefined"!=typeof FormData&&ye instanceof FormData}class lt{constructor(Zt,ce,ei,ni){let Fi;if(this.url=ce,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=Zt.toUpperCase(),function(ye){switch(ye){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||ni?(this.body=void 0!==ei?ei:null,Fi=ni):Fi=ei,Fi&&(this.reportProgress=!!Fi.reportProgress,this.withCredentials=!!Fi.withCredentials,Fi.responseType&&(this.responseType=Fi.responseType),Fi.headers&&(this.headers=Fi.headers),Fi.context&&(this.context=Fi.context),Fi.params&&(this.params=Fi.params)),this.headers||(this.headers=new x),this.context||(this.context=new Wt),this.params){const wi=this.params.toString();if(0===wi.length)this.urlWithParams=ce;else{const yi=ce.indexOf("?");this.urlWithParams=ce+(-1===yi?"?":yi<ce.length-1?"&":"")+wi}}else this.params=new vt,this.urlWithParams=ce}serializeBody(){return null===this.body?null:Ct(this.body)||yt(this.body)||ot(this.body)||"undefined"!=typeof URLSearchParams&&this.body instanceof URLSearchParams||"string"==typeof this.body?this.body:this.body instanceof vt?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||ot(this.body)?null:yt(this.body)?this.body.type||null:Ct(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof vt?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(Zt={}){var ce;const ei=Zt.method||this.method,ni=Zt.url||this.url,Fi=Zt.responseType||this.responseType,wi=void 0!==Zt.body?Zt.body:this.body,yi=void 0!==Zt.withCredentials?Zt.withCredentials:this.withCredentials,pn=void 0!==Zt.reportProgress?Zt.reportProgress:this.reportProgress;let mi=Zt.headers||this.headers,Zi=Zt.params||this.params;const Ce=null!==(ce=Zt.context)&&void 0!==ce?ce:this.context;return void 0!==Zt.setHeaders&&(mi=Object.keys(Zt.setHeaders).reduce((Oe,Ci)=>Oe.set(Ci,Zt.setHeaders[Ci]),mi)),Zt.setParams&&(Zi=Object.keys(Zt.setParams).reduce((Oe,Ci)=>Oe.set(Ci,Zt.setParams[Ci]),Zi)),new lt(ei,ni,wi,{params:Zi,headers:mi,context:Ce,reportProgress:pn,responseType:Fi,withCredentials:yi})}}var Ut=(()=>((Ut=Ut||{})[Ut.Sent=0]="Sent",Ut[Ut.UploadProgress=1]="UploadProgress",Ut[Ut.ResponseHeader=2]="ResponseHeader",Ut[Ut.DownloadProgress=3]="DownloadProgress",Ut[Ut.Response=4]="Response",Ut[Ut.User=5]="User",Ut))();class Rt{constructor(Zt,ce=200,ei="OK"){this.headers=Zt.headers||new x,this.status=void 0!==Zt.status?Zt.status:ce,this.statusText=Zt.statusText||ei,this.url=Zt.url||null,this.ok=this.status>=200&&this.status<300}}class Et extends Rt{constructor(Zt={}){super(Zt),this.type=Ut.ResponseHeader}clone(Zt={}){return new Et({headers:Zt.headers||this.headers,status:void 0!==Zt.status?Zt.status:this.status,statusText:Zt.statusText||this.statusText,url:Zt.url||this.url||void 0})}}class ht extends Rt{constructor(Zt={}){super(Zt),this.type=Ut.Response,this.body=void 0!==Zt.body?Zt.body:null}clone(Zt={}){return new ht({body:void 0!==Zt.body?Zt.body:this.body,headers:Zt.headers||this.headers,status:void 0!==Zt.status?Zt.status:this.status,statusText:Zt.statusText||this.statusText,url:Zt.url||this.url||void 0})}}class nt extends Rt{constructor(Zt){super(Zt,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${Zt.url||"(unknown url)"}`:`Http failure response for ${Zt.url||"(unknown url)"}: ${Zt.status} ${Zt.statusText}`,this.error=Zt.error||null}}function he(ye,Zt){return{body:Zt,headers:ye.headers,context:ye.context,observe:ye.observe,params:ye.params,reportProgress:ye.reportProgress,responseType:ye.responseType,withCredentials:ye.withCredentials}}let Mt=(()=>{class ye{constructor(ce){this.handler=ce}request(ce,ei,ni={}){let Fi;if(ce instanceof lt)Fi=ce;else{let pn,mi;pn=ni.headers instanceof x?ni.headers:new x(ni.headers),ni.params&&(mi=ni.params instanceof vt?ni.params:new vt({fromObject:ni.params})),Fi=new lt(ce,ei,void 0!==ni.body?ni.body:null,{headers:pn,context:ni.context,params:mi,reportProgress:ni.reportProgress,responseType:ni.responseType||"json",withCredentials:ni.withCredentials})}const wi=(0,e.of)(Fi).pipe((0,n.b)(pn=>this.handler.handle(pn)));if(ce instanceof lt||"events"===ni.observe)return wi;const yi=wi.pipe((0,r.h)(pn=>pn instanceof ht));switch(ni.observe||"body"){case"body":switch(Fi.responseType){case"arraybuffer":return yi.pipe((0,s.U)(pn=>{if(null!==pn.body&&!(pn.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return pn.body}));case"blob":return yi.pipe((0,s.U)(pn=>{if(null!==pn.body&&!(pn.body instanceof Blob))throw new Error("Response is not a Blob.");return pn.body}));case"text":return yi.pipe((0,s.U)(pn=>{if(null!==pn.body&&"string"!=typeof pn.body)throw new Error("Response is not a string.");return pn.body}));default:return yi.pipe((0,s.U)(pn=>pn.body))}case"response":return yi;default:throw new Error(`Unreachable: unhandled observe type ${ni.observe}}`)}}delete(ce,ei={}){return this.request("DELETE",ce,ei)}get(ce,ei={}){return this.request("GET",ce,ei)}head(ce,ei={}){return this.request("HEAD",ce,ei)}jsonp(ce,ei){return this.request("JSONP",ce,{params:(new vt).append(ei,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(ce,ei={}){return this.request("OPTIONS",ce,ei)}patch(ce,ei,ni={}){return this.request("PATCH",ce,he(ni,ei))}post(ce,ei,ni={}){return this.request("POST",ce,he(ni,ei))}put(ce,ei,ni={}){return this.request("PUT",ce,he(ni,ei))}}return ye.\u0275fac=function(ce){return new(ce||ye)(_.LFG(u))},ye.\u0275prov=_.Yz7({token:ye,factory:ye.\u0275fac}),ye})();class Nt{constructor(Zt,ce){this.next=Zt,this.interceptor=ce}handle(Zt){return this.interceptor.intercept(Zt,this.next)}}const de=new _.OlP("HTTP_INTERCEPTORS");let ve=(()=>{class ye{intercept(ce,ei){return ei.handle(ce)}}return ye.\u0275fac=function(ce){return new(ce||ye)},ye.\u0275prov=_.Yz7({token:ye,factory:ye.\u0275fac}),ye})();const gi=/^\)\]\}',?\n/;let Te=(()=>{class ye{constructor(ce){this.xhrFactory=ce}handle(ce){if("JSONP"===ce.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new t.y(ei=>{const ni=this.xhrFactory.build();if(ni.open(ce.method,ce.urlWithParams),ce.withCredentials&&(ni.withCredentials=!0),ce.headers.forEach((Ci,je)=>ni.setRequestHeader(Ci,je.join(","))),ce.headers.has("Accept")||ni.setRequestHeader("Accept","application/json, text/plain, */*"),!ce.headers.has("Content-Type")){const Ci=ce.detectContentTypeHeader();null!==Ci&&ni.setRequestHeader("Content-Type",Ci)}if(ce.responseType){const Ci=ce.responseType.toLowerCase();ni.responseType="json"!==Ci?Ci:"text"}const Fi=ce.serializeBody();let wi=null;const yi=()=>{if(null!==wi)return wi;const Ci=1223===ni.status?204:ni.status,je=ni.statusText||"OK",Ii=new x(ni.getAllResponseHeaders()),_i=function(ye){return"responseURL"in ye&&ye.responseURL?ye.responseURL:/^X-Request-URL:/m.test(ye.getAllResponseHeaders())?ye.getResponseHeader("X-Request-URL"):null}(ni)||ce.url;return wi=new Et({headers:Ii,status:Ci,statusText:je,url:_i}),wi},pn=()=>{let{headers:Ci,status:je,statusText:Ii,url:_i}=yi(),Ui=null;204!==je&&(Ui=void 0===ni.response?ni.responseText:ni.response),0===je&&(je=Ui?200:0);let $e=je>=200&&je<300;if("json"===ce.responseType&&"string"==typeof Ui){const fe=Ui;Ui=Ui.replace(gi,"");try{Ui=""!==Ui?JSON.parse(Ui):null}catch(kt){Ui=fe,$e&&($e=!1,Ui={error:kt,text:Ui})}}$e?(ei.next(new ht({body:Ui,headers:Ci,status:je,statusText:Ii,url:_i||void 0})),ei.complete()):ei.error(new nt({error:Ui,headers:Ci,status:je,statusText:Ii,url:_i||void 0}))},mi=Ci=>{const{url:je}=yi(),Ii=new nt({error:Ci,status:ni.status||0,statusText:ni.statusText||"Unknown Error",url:je||void 0});ei.error(Ii)};let Zi=!1;const Ce=Ci=>{Zi||(ei.next(yi()),Zi=!0);let je={type:Ut.DownloadProgress,loaded:Ci.loaded};Ci.lengthComputable&&(je.total=Ci.total),"text"===ce.responseType&&!!ni.responseText&&(je.partialText=ni.responseText),ei.next(je)},Oe=Ci=>{let je={type:Ut.UploadProgress,loaded:Ci.loaded};Ci.lengthComputable&&(je.total=Ci.total),ei.next(je)};return ni.addEventListener("load",pn),ni.addEventListener("error",mi),ni.addEventListener("timeout",mi),ni.addEventListener("abort",mi),ce.reportProgress&&(ni.addEventListener("progress",Ce),null!==Fi&&ni.upload&&ni.upload.addEventListener("progress",Oe)),ni.send(Fi),ei.next({type:Ut.Sent}),()=>{ni.removeEventListener("error",mi),ni.removeEventListener("abort",mi),ni.removeEventListener("load",pn),ni.removeEventListener("timeout",mi),ce.reportProgress&&(ni.removeEventListener("progress",Ce),null!==Fi&&ni.upload&&ni.upload.removeEventListener("progress",Oe)),ni.readyState!==ni.DONE&&ni.abort()}})}}return ye.\u0275fac=function(ce){return new(ce||ye)(_.LFG(C.JF))},ye.\u0275prov=_.Yz7({token:ye,factory:ye.\u0275fac}),ye})();const $t=new _.OlP("XSRF_COOKIE_NAME"),_e=new _.OlP("XSRF_HEADER_NAME");class At{}let pe=(()=>{class ye{constructor(ce,ei,ni){this.doc=ce,this.platform=ei,this.cookieName=ni,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const ce=this.doc.cookie||"";return ce!==this.lastCookieString&&(this.parseCount++,this.lastToken=(0,C.Mx)(ce,this.cookieName),this.lastCookieString=ce),this.lastToken}}return ye.\u0275fac=function(ce){return new(ce||ye)(_.LFG(C.K0),_.LFG(_.Lbi),_.LFG($t))},ye.\u0275prov=_.Yz7({token:ye,factory:ye.\u0275fac}),ye})(),ze=(()=>{class ye{constructor(ce,ei){this.tokenService=ce,this.headerName=ei}intercept(ce,ei){const ni=ce.url.toLowerCase();if("GET"===ce.method||"HEAD"===ce.method||ni.startsWith("http://")||ni.startsWith("https://"))return ei.handle(ce);const Fi=this.tokenService.getToken();return null!==Fi&&!ce.headers.has(this.headerName)&&(ce=ce.clone({headers:ce.headers.set(this.headerName,Fi)})),ei.handle(ce)}}return ye.\u0275fac=function(ce){return new(ce||ye)(_.LFG(At),_.LFG(_e))},ye.\u0275prov=_.Yz7({token:ye,factory:ye.\u0275fac}),ye})(),hi=(()=>{class ye{constructor(ce,ei){this.backend=ce,this.injector=ei,this.chain=null}handle(ce){if(null===this.chain){const ei=this.injector.get(de,[]);this.chain=ei.reduceRight((ni,Fi)=>new Nt(ni,Fi),this.backend)}return this.chain.handle(ce)}}return ye.\u0275fac=function(ce){return new(ce||ye)(_.LFG(y),_.LFG(_.zs3))},ye.\u0275prov=_.Yz7({token:ye,factory:ye.\u0275fac}),ye})(),ee=(()=>{class ye{static disable(){return{ngModule:ye,providers:[{provide:ze,useClass:ve}]}}static withOptions(ce={}){return{ngModule:ye,providers:[ce.cookieName?{provide:$t,useValue:ce.cookieName}:[],ce.headerName?{provide:_e,useValue:ce.headerName}:[]]}}}return ye.\u0275fac=function(ce){return new(ce||ye)},ye.\u0275mod=_.oAB({type:ye}),ye.\u0275inj=_.cJS({providers:[ze,{provide:de,useExisting:ze,multi:!0},{provide:At,useClass:pe},{provide:$t,useValue:"XSRF-TOKEN"},{provide:_e,useValue:"X-XSRF-TOKEN"}]}),ye})(),ke=(()=>{class ye{}return ye.\u0275fac=function(ce){return new(ce||ye)},ye.\u0275mod=_.oAB({type:ye}),ye.\u0275inj=_.cJS({providers:[Mt,{provide:u,useClass:hi},Te,{provide:y,useExisting:Te}],imports:[[ee.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),ye})()},5e3:(U,$,m)=>{"use strict";m.d($,{deG:()=>Uc,tb:()=>Sb,AFp:()=>Eb,ip1:()=>mm,CZH:()=>Zd,hGG:()=>eS,z2F:()=>xp,sBO:()=>AC,Sil:()=>vm,_Vd:()=>wp,EJc:()=>Rb,SBq:()=>Rp,qLn:()=>Jl,vpe:()=>Eh,tBr:()=>Fl,XFs:()=>ee,OlP:()=>Vo,zs3:()=>qc,ZZ4:()=>Ff,aQg:()=>Bf,soG:()=>Nf,YKP:()=>xv,h0i:()=>Kd,PXZ:()=>CC,R0b:()=>yu,FiY:()=>jl,Lbi:()=>Cb,g9A:()=>Tb,n_E:()=>Mf,Qsj:()=>sT,FYo:()=>Iv,JOm:()=>Tt,q3G:()=>Zo,tp0:()=>da,Rgc:()=>Ap,dDg:()=>Mb,GfV:()=>Mv,s_b:()=>Of,ifc:()=>wi,eFA:()=>xb,G48:()=>MC,Gpc:()=>B,f3M:()=>el,_c5:()=>KC,VLi:()=>bC,c2e:()=>wb,zSh:()=>nf,wAp:()=>Sr,vHH:()=>St,EiD:()=>ku,mCW:()=>ho,qzn:()=>we,JVY:()=>di,pB0:()=>xi,eBb:()=>si,L6k:()=>qe,LAX:()=>Li,cg1:()=>Kg,kL8:()=>Q_,yhl:()=>Ue,dqk:()=>Ce,sIi:()=>dt,CqO:()=>l_,QGY:()=>Lg,F4k:()=>a_,RDi:()=>Ko,AaK:()=>u,z3N:()=>ie,qOj:()=>vp,TTD:()=>Rs,_Bn:()=>wv,xp6:()=>xh,uIk:()=>Xi,Gre:()=>G_,ekj:()=>Vg,Suo:()=>qv,Xpm:()=>ae,lG2:()=>xe,Yz7:()=>Le,cJS:()=>Bt,oAB:()=>tr,Yjl:()=>ui,Y36:()=>bp,_UZ:()=>r_,GkF:()=>o_,BQk:()=>kg,ynx:()=>xg,qZA:()=>Og,TgZ:()=>Ag,EpF:()=>s_,n5z:()=>ya,Ikx:()=>Yg,LFG:()=>Jo,$8M:()=>Tu,$Z:()=>n_,NdJ:()=>Ng,CRH:()=>tb,kcU:()=>yl,O4$:()=>ta,oxw:()=>h_,ALo:()=>zv,lcZ:()=>jv,Hsn:()=>p_,F$t:()=>d_,Q6J:()=>Ig,s9C:()=>Bg,DdM:()=>Pv,VKq:()=>Fv,WLB:()=>Bv,iGM:()=>Zv,MAs:()=>Sd,CHM:()=>K,LSH:()=>Xc,Udp:()=>Ug,WFA:()=>Pg,d8E:()=>Xg,YNc:()=>ih,W1O:()=>rb,_uU:()=>N_,Oqu:()=>Wg,hij:()=>Tf,AsE:()=>zg,lnq:()=>jg,Gf:()=>Qv});var C=m(77579),_=m(50727),e=m(68306),t=m(56451),n=m(13099);function r(h){for(let d in h)if(h[d]===r)return d;throw Error("Could not find renamed property on target object.")}function s(h,d){for(const v in d)d.hasOwnProperty(v)&&!h.hasOwnProperty(v)&&(h[v]=d[v])}function u(h){if("string"==typeof h)return h;if(Array.isArray(h))return"["+h.map(u).join(", ")+"]";if(null==h)return""+h;if(h.overriddenName)return`${h.overriddenName}`;if(h.name)return`${h.name}`;const d=h.toString();if(null==d)return""+d;const v=d.indexOf("\n");return-1===v?d:d.substring(0,v)}function y(h,d){return null==h||""===h?null===d?"":d:null==d||""===d?h:h+" "+d}const x=r({__forward_ref__:r});function B(h){return h.__forward_ref__=B,h.toString=function(){return u(this())},h}function Q(h){return at(h)?h():h}function at(h){return"function"==typeof h&&h.hasOwnProperty(x)&&h.__forward_ref__===B}class St extends Error{constructor(d,v){super(function(h,d){return`${h?`NG0${h}: `:""}${d}`}(d,v)),this.code=d}}function xt(h){return"string"==typeof h?h:null==h?"":String(h)}function Wt(h){return"function"==typeof h?h.name||h.toString():"object"==typeof h&&null!=h&&"function"==typeof h.type?h.type.name||h.type.toString():xt(h)}function ot(h,d){const v=d?` in ${d}`:"";throw new St("201",`No provider for ${Wt(h)} found${v}`)}function Be(h,d){null==h&&function(h,d,v,w){throw new Error(`ASSERTION ERROR: ${h}`+(null==w?"":` [Expected=> ${v} ${w} ${d} <=Actual]`))}(d,h,null,"!=")}function Le(h){return{token:h.token,providedIn:h.providedIn||null,factory:h.factory,value:void 0}}function Bt(h){return{providers:h.providers||[],imports:h.imports||[]}}function Te(h){return $t(h,ze)||$t(h,Ie)}function $t(h,d){return h.hasOwnProperty(d)?h[d]:null}function pe(h){return h&&(h.hasOwnProperty(hi)||h.hasOwnProperty(te))?h[hi]:null}const ze=r({\u0275prov:r}),hi=r({\u0275inj:r}),Ie=r({ngInjectableDef:r}),te=r({ngInjectorDef:r});var ee=(()=>((ee=ee||{})[ee.Default=0]="Default",ee[ee.Host=1]="Host",ee[ee.Self=2]="Self",ee[ee.SkipSelf=4]="SkipSelf",ee[ee.Optional=8]="Optional",ee))();let ke;function me(h){const d=ke;return ke=h,d}function ye(h,d,v){const w=Te(h);return w&&"root"==w.providedIn?void 0===w.value?w.value=w.factory():w.value:v&ee.Optional?null:void 0!==d?d:void ot(u(h),"Injector")}function ce(h){return{toString:h}.toString()}var ei=(()=>((ei=ei||{})[ei.OnPush=0]="OnPush",ei[ei.Default=1]="Default",ei))(),wi=(()=>{return(h=wi||(wi={}))[h.Emulated=0]="Emulated",h[h.None=2]="None",h[h.ShadowDom=3]="ShadowDom",wi;var h})();const yi="undefined"!=typeof globalThis&&globalThis,pn="undefined"!=typeof window&&window,mi="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Ce=yi||"undefined"!=typeof global&&global||pn||mi,je={},Ii=[],_i=r({\u0275cmp:r}),Ui=r({\u0275dir:r}),$e=r({\u0275pipe:r}),fe=r({\u0275mod:r}),kt=r({\u0275fac:r}),ct=r({__NG_ELEMENT_ID__:r});let Lt=0;function ae(h){return ce(()=>{const v={},w={type:h.type,providersResolver:null,decls:h.decls,vars:h.vars,factory:null,template:h.template||null,consts:h.consts||null,ngContentSelectors:h.ngContentSelectors,hostBindings:h.hostBindings||null,hostVars:h.hostVars||0,hostAttrs:h.hostAttrs||null,contentQueries:h.contentQueries||null,declaredInputs:v,inputs:null,outputs:null,exportAs:h.exportAs||null,onPush:h.changeDetection===ei.OnPush,directiveDefs:null,pipeDefs:null,selectors:h.selectors||Ii,viewQuery:h.viewQuery||null,features:h.features||null,data:h.data||{},encapsulation:h.encapsulation||wi.Emulated,id:"c",styles:h.styles||Ii,_:null,setInput:null,schemas:h.schemas||null,tView:null},M=h.directives,P=h.features,X=h.pipes;return w.id+=Lt++,w.inputs=Je(h.inputs,v),w.outputs=Je(h.outputs),P&&P.forEach(st=>st(w)),w.directiveDefs=M?()=>("function"==typeof M?M():M).map(Wi):null,w.pipeDefs=X?()=>("function"==typeof X?X():X).map(Qi):null,w})}function Wi(h){return ki(h)||function(h){return h[Ui]||null}(h)}function Qi(h){return function(h){return h[$e]||null}(h)}const yn={};function tr(h){return ce(()=>{const d={type:h.type,bootstrap:h.bootstrap||Ii,declarations:h.declarations||Ii,imports:h.imports||Ii,exports:h.exports||Ii,transitiveCompileScopes:null,schemas:h.schemas||null,id:h.id||null};return null!=h.id&&(yn[h.id]=h.type),d})}function Je(h,d){if(null==h)return je;const v={};for(const w in h)if(h.hasOwnProperty(w)){let M=h[w],P=M;Array.isArray(M)&&(P=M[1],M=M[0]),v[M]=w,d&&(d[M]=P)}return v}const xe=ae;function ui(h){return{type:h.type,name:h.name,factory:null,pure:!1!==h.pure,onDestroy:h.type.prototype.ngOnDestroy||null}}function ki(h){return h[_i]||null}function ar(h,d){const v=h[fe]||null;if(!v&&!0===d)throw new Error(`Type ${u(h)} does not have '\u0275mod' property.`);return v}function ro(h){return Array.isArray(h)&&"object"==typeof h[1]}function _o(h){return Array.isArray(h)&&!0===h[1]}function Zs(h){return 0!=(8&h.flags)}function lr(h){return 2==(2&h.flags)}function Yo(h){return 1==(1&h.flags)}function Jr(h){return null!==h.template}function Ss(h){return 0!=(512&h[2])}function Hs(h,d){return h.hasOwnProperty(kt)?h[kt]:null}class Xo{constructor(d,v,w){this.previousValue=d,this.currentValue=v,this.firstChange=w}isFirstChange(){return this.firstChange}}function Rs(){return zo}function zo(h){return h.type.prototype.ngOnChanges&&(h.setInput=Eo),xo}function xo(){const h=lo(this),d=null==h?void 0:h.current;if(d){const v=h.previous;if(v===je)h.previous=d;else for(let w in d)v[w]=d[w];h.current=null,this.ngOnChanges(d)}}function Eo(h,d,v,w){const M=lo(h)||function(h,d){return h[Ds]=d}(h,{previous:je,current:null}),P=M.current||(M.current={}),X=M.previous,st=this.declaredInputs[v],bt=X[st];P[st]=new Xo(bt&&bt.currentValue,d,X===je),h[w]=d}Rs.ngInherit=!0;const Ds="__ngSimpleChanges__";function lo(h){return h[Ds]||null}const la="http://www.w3.org/2000/svg";let us;function Ko(h){us=h}function Nr(h){return!!h.listen}const xn={createRenderer:(h,d)=>void 0!==us?us:"undefined"!=typeof document?document:void 0};function Ot(h){for(;Array.isArray(h);)h=h[0];return h}function z(h,d){return Ot(d[h])}function It(h,d){return Ot(d[h.index])}function bi(h,d){return h.data[d]}function cn(h,d){return h[d]}function jn(h,d){const v=d[h];return ro(v)?v:v[0]}function Cr(h){return 4==(4&h[2])}function Hr(h){return 128==(128&h[2])}function io(h,d){return null==d?null:h[d]}function hr(h){h[18]=0}function qo(h,d){h[5]+=d;let v=h,w=h[3];for(;null!==w&&(1===d&&1===v[5]||-1===d&&0===v[5]);)w[5]+=d,v=w,w=w[3]}const Hn={lFrame:co(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Vs(){return Hn.bindingsEnabled}function Gt(){return Hn.lFrame.lView}function W(){return Hn.lFrame.tView}function K(h){return Hn.lFrame.contextLView=h,h[8]}function gt(){let h=Qt();for(;null!==h&&64===h.type;)h=h.parent;return h}function Qt(){return Hn.lFrame.currentTNode}function Ye(h,d){const v=Hn.lFrame;v.currentTNode=h,v.isParent=d}function ti(){return Hn.lFrame.isParent}function vi(){Hn.lFrame.isParent=!1}function En(){return Hn.isInCheckNoChangesMode}function Zn(h){Hn.isInCheckNoChangesMode=h}function Qn(){const h=Hn.lFrame;let d=h.bindingRootIndex;return-1===d&&(d=h.bindingRootIndex=h.tView.bindingStartIndex),d}function Ln(){return Hn.lFrame.bindingIndex}function rr(){return Hn.lFrame.bindingIndex++}function wr(h){const d=Hn.lFrame,v=d.bindingIndex;return d.bindingIndex=d.bindingIndex+h,v}function ko(h,d){const v=Hn.lFrame;v.bindingIndex=v.bindingRootIndex=h,Gs(d)}function Gs(h){Hn.lFrame.currentDirectiveIndex=h}function To(h){const d=Hn.lFrame.currentDirectiveIndex;return-1===d?null:h[d]}function Is(){return Hn.lFrame.currentQueryIndex}function rs(h){Hn.lFrame.currentQueryIndex=h}function Ms(h){const d=h[1];return 2===d.type?d.declTNode:1===d.type?h[6]:null}function cl(h,d,v){if(v&ee.SkipSelf){let M=d,P=h;for(;!(M=M.parent,null!==M||v&ee.Host||(M=Ms(P),null===M||(P=P[15],10&M.type))););if(null===M)return!1;d=M,h=P}const w=Hn.lFrame=Ws();return w.currentTNode=d,w.lView=h,!0}function Da(h){const d=Ws(),v=h[1];Hn.lFrame=d,d.currentTNode=v.firstChild,d.lView=h,d.tView=v,d.contextLView=h,d.bindingIndex=v.bindingStartIndex,d.inI18n=!1}function Ws(){const h=Hn.lFrame,d=null===h?null:h.child;return null===d?co(h):d}function co(h){const d={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:h,child:null,inI18n:!1};return null!==h&&(h.child=d),d}function Ja(){const h=Hn.lFrame;return Hn.lFrame=h.parent,h.currentTNode=null,h.lView=null,h}const Dn=Ja;function On(){const h=Ja();h.isParent=!0,h.tView=null,h.selectedIndex=-1,h.contextLView=null,h.elementDepthCount=0,h.currentDirectiveIndex=-1,h.currentNamespace=null,h.bindingRootIndex=-1,h.bindingIndex=-1,h.currentQueryIndex=0}function Er(){return Hn.lFrame.selectedIndex}function es(h){Hn.lFrame.selectedIndex=h}function Mr(){const h=Hn.lFrame;return bi(h.tView,h.selectedIndex)}function ta(){Hn.lFrame.currentNamespace=la}function yl(){Hn.lFrame.currentNamespace=null}function _s(h,d){for(let v=d.directiveStart,w=d.directiveEnd;v<w;v++){const P=h.data[v].type.prototype,{ngAfterContentInit:X,ngAfterContentChecked:st,ngAfterViewInit:bt,ngAfterViewChecked:Xt,ngOnDestroy:le}=P;X&&(h.contentHooks||(h.contentHooks=[])).push(-v,X),st&&((h.contentHooks||(h.contentHooks=[])).push(v,st),(h.contentCheckHooks||(h.contentCheckHooks=[])).push(v,st)),bt&&(h.viewHooks||(h.viewHooks=[])).push(-v,bt),Xt&&((h.viewHooks||(h.viewHooks=[])).push(v,Xt),(h.viewCheckHooks||(h.viewCheckHooks=[])).push(v,Xt)),null!=le&&(h.destroyHooks||(h.destroyHooks=[])).push(v,le)}}function zs(h,d,v){Al(h,d,3,v)}function As(h,d,v,w){(3&h[2])===v&&Al(h,d,v,w)}function va(h,d){let v=h[2];(3&v)===d&&(v&=2047,v+=1,h[2]=v)}function Al(h,d,v,w){const P=null!=w?w:-1,X=d.length-1;let st=0;for(let bt=void 0!==w?65535&h[18]:0;bt<X;bt++)if("number"==typeof d[bt+1]){if(st=d[bt],null!=w&&st>=w)break}else d[bt]<0&&(h[18]+=65536),(st<P||-1==P)&&(ul(h,v,d,bt),h[18]=(4294901760&h[18])+bt+2),bt++}function ul(h,d,v,w){const M=v[w]<0,P=v[w+1],st=h[M?-v[w]:v[w]];if(M){if(h[2]>>11<h[18]>>16&&(3&h[2])===d){h[2]+=2048;try{P.call(st)}finally{}}}else try{P.call(st)}finally{}}class is{constructor(d,v,w){this.factory=d,this.resolving=!1,this.canSeeViewProviders=v,this.injectImpl=w}}function Qa(h,d,v){const w=Nr(h);let M=0;for(;M<v.length;){const P=v[M];if("number"==typeof P){if(0!==P)break;M++;const X=v[M++],st=v[M++],bt=v[M++];w?h.setAttribute(d,st,bt,X):d.setAttributeNS(X,st,bt)}else{const X=P,st=v[++M];Wl(X)?w&&h.setProperty(d,X,st):w?h.setAttribute(d,X,st):d.setAttribute(X,st),M++}}return M}function mc(h){return 3===h||4===h||6===h}function Wl(h){return 64===h.charCodeAt(0)}function ua(h,d){if(null!==d&&0!==d.length)if(null===h||0===h.length)h=d.slice();else{let v=-1;for(let w=0;w<d.length;w++){const M=d[w];"number"==typeof M?v=M:0===v||Ua(h,v,M,null,-1===v||2===v?d[++w]:null)}}return h}function Ua(h,d,v,w,M){let P=0,X=h.length;if(-1===d)X=-1;else for(;P<h.length;){const st=h[P++];if("number"==typeof st){if(st===d){X=-1;break}if(st>d){X=P-1;break}}}for(;P<h.length;){const st=h[P];if("number"==typeof st)break;if(st===v){if(null===w)return void(null!==M&&(h[P+1]=M));if(w===h[P+1])return void(h[P+2]=M)}P++,null!==w&&P++,null!==M&&P++}-1!==X&&(h.splice(X,0,d),P=X+1),h.splice(P++,0,v),null!==w&&h.splice(P++,0,w),null!==M&&h.splice(P++,0,M)}function js(h){return-1!==h}function Aa(h){return 32767&h}function Oa(h,d){let v=function(h){return h>>16}(h),w=d;for(;v>0;)w=w[15],v--;return w}let El=!0;function Ql(h){const d=El;return El=h,d}let pt=0;function q(h,d){const v=zt(h,d);if(-1!==v)return v;const w=d[1];w.firstCreatePass&&(h.injectorIndex=d.length,Dt(w.data,h),Dt(d,null),Dt(w.blueprint,null));const M=ge(h,d),P=h.injectorIndex;if(js(M)){const X=Aa(M),st=Oa(M,d),bt=st[1].data;for(let Xt=0;Xt<8;Xt++)d[P+Xt]=st[X+Xt]|bt[X+Xt]}return d[P+8]=M,P}function Dt(h,d){h.push(0,0,0,0,0,0,0,0,d)}function zt(h,d){return-1===h.injectorIndex||h.parent&&h.parent.injectorIndex===h.injectorIndex||null===d[h.injectorIndex+8]?-1:h.injectorIndex}function ge(h,d){if(h.parent&&-1!==h.parent.injectorIndex)return h.parent.injectorIndex;let v=0,w=null,M=d;for(;null!==M;){const P=M[1],X=P.type;if(w=2===X?P.declTNode:1===X?M[6]:null,null===w)return-1;if(v++,M=M[15],-1!==w.injectorIndex)return w.injectorIndex|v<<16}return-1}function Ve(h,d,v){!function(h,d,v){let w;"string"==typeof v?w=v.charCodeAt(0)||0:v.hasOwnProperty(ct)&&(w=v[ct]),null==w&&(w=v[ct]=pt++);const M=255&w;d.data[h+(M>>5)]|=1<<M}(h,d,v)}function Ni(h,d,v){if(v&ee.Optional)return h;ot(d,"NodeInjector")}function Tn(h,d,v,w){if(v&ee.Optional&&void 0===w&&(w=null),0==(v&(ee.Self|ee.Host))){const M=h[9],P=me(void 0);try{return M?M.get(d,w,v&ee.Optional):ye(d,w,v&ee.Optional)}finally{me(P)}}return Ni(w,d,v)}function _r(h,d,v,w=ee.Default,M){if(null!==h){const P=function(h){if("string"==typeof h)return h.charCodeAt(0)||0;const d=h.hasOwnProperty(ct)?h[ct]:void 0;return"number"==typeof d?d>=0?255&d:$r:d}(v);if("function"==typeof P){if(!cl(d,h,w))return w&ee.Host?Ni(M,v,w):Tn(d,v,w,M);try{const X=P(w);if(null!=X||w&ee.Optional)return X;ot(v)}finally{Dn()}}else if("number"==typeof P){let X=null,st=zt(h,d),bt=-1,Xt=w&ee.Host?d[16][6]:null;for((-1===st||w&ee.SkipSelf)&&(bt=-1===st?ge(h,d):d[st+8],-1!==bt&&qa(w,!1)?(X=d[1],st=Aa(bt),d=Oa(bt,d)):st=-1);-1!==st;){const le=d[1];if(Uo(P,st,le.data)){const Pe=uo(st,d,v,X,w,Xt);if(Pe!==Wn)return Pe}bt=d[st+8],-1!==bt&&qa(w,d[1].data[st+8]===Xt)&&Uo(P,st,d)?(X=le,st=Aa(bt),d=Oa(bt,d)):st=-1}}}return Tn(d,v,w,M)}const Wn={};function $r(){return new Xs(gt(),Gt())}function uo(h,d,v,w,M,P){const X=d[1],st=X.data[h+8],le=Tl(st,X,v,null==w?lr(st)&&El:w!=X&&0!=(3&st.type),M&ee.Host&&P===st);return null!==le?Ys(d,X,le,st):Wn}function Tl(h,d,v,w,M){const P=h.providerIndexes,X=d.data,st=1048575&P,bt=h.directiveStart,le=P>>20,oi=M?st+le:h.directiveEnd;for(let Ti=w?st:st+le;Ti<oi;Ti++){const $i=X[Ti];if(Ti<bt&&v===$i||Ti>=bt&&$i.type===v)return Ti}if(M){const Ti=X[bt];if(Ti&&Jr(Ti)&&Ti.type===v)return bt}return null}function Ys(h,d,v,w){let M=h[v];const P=d.data;if(function(h){return h instanceof is}(M)){const X=M;X.resolving&&function(h,d){throw new St("200",`Circular dependency in DI detected for ${h}`)}(Wt(P[v]));const st=Ql(X.canSeeViewProviders);X.resolving=!0;const bt=X.injectImpl?me(X.injectImpl):null;cl(h,w,ee.Default);try{M=h[v]=X.factory(void 0,P,h,w),d.firstCreatePass&&v>=w.directiveStart&&function(h,d,v){const{ngOnChanges:w,ngOnInit:M,ngDoCheck:P}=d.type.prototype;if(w){const X=zo(d);(v.preOrderHooks||(v.preOrderHooks=[])).push(h,X),(v.preOrderCheckHooks||(v.preOrderCheckHooks=[])).push(h,X)}M&&(v.preOrderHooks||(v.preOrderHooks=[])).push(0-h,M),P&&((v.preOrderHooks||(v.preOrderHooks=[])).push(h,P),(v.preOrderCheckHooks||(v.preOrderCheckHooks=[])).push(h,P))}(v,P[v],d)}finally{null!==bt&&me(bt),Ql(st),X.resolving=!1,Dn()}}return M}function Uo(h,d,v){return!!(v[d+(h>>5)]&1<<h)}function qa(h,d){return!(h&ee.Self||h&ee.Host&&d)}class Xs{constructor(d,v){this._tNode=d,this._lView=v}get(d,v,w){return _r(this._tNode,this._lView,d,w,v)}}function ya(h){return ce(()=>{const d=h.prototype.constructor,v=d[kt]||Va(d),w=Object.prototype;let M=Object.getPrototypeOf(h.prototype).constructor;for(;M&&M!==w;){const P=M[kt]||Va(M);if(P&&P!==v)return P;M=Object.getPrototypeOf(M)}return P=>new P})}function Va(h){return at(h)?()=>{const d=Va(Q(h));return d&&d()}:Hs(h)}function Tu(h){return function(h,d){if("class"===d)return h.classes;if("style"===d)return h.styles;const v=h.attrs;if(v){const w=v.length;let M=0;for(;M<w;){const P=v[M];if(mc(P))break;if(0===P)M+=2;else if("number"==typeof P)for(M++;M<w&&"string"==typeof v[M];)M++;else{if(P===d)return v[M+1];M+=2}}}return null}(gt(),h)}const ql="__parameters__";function qr(h,d,v){return ce(()=>{const w=function(h){return function(...v){if(h){const w=h(...v);for(const M in w)this[M]=w[M]}}}(d);function M(...P){if(this instanceof M)return w.apply(this,P),this;const X=new M(...P);return st.annotation=X,st;function st(bt,Xt,le){const Pe=bt.hasOwnProperty(ql)?bt[ql]:Object.defineProperty(bt,ql,{value:[]})[ql];for(;Pe.length<=le;)Pe.push(null);return(Pe[le]=Pe[le]||[]).push(X),bt}}return v&&(M.prototype=Object.create(v.prototype)),M.prototype.ngMetadataName=h,M.annotationCls=M,M})}class Vo{constructor(d,v){this._desc=d,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof v?this.__NG_ELEMENT_ID__=v:void 0!==v&&(this.\u0275prov=Le({token:this,providedIn:v.providedIn||"root",factory:v.factory}))}toString(){return`InjectionToken ${this._desc}`}}const Uc=new Vo("AnalyzeForEntryComponents");function ha(h,d){void 0===d&&(d=h);for(let v=0;v<h.length;v++){let w=h[v];Array.isArray(w)?(d===h&&(d=h.slice(0,v)),ha(w,d)):d!==h&&d.push(w)}return d}function So(h,d){h.forEach(v=>Array.isArray(v)?So(v,d):d(v))}function xa(h,d,v){d>=h.length?h.push(v):h.splice(d,0,v)}function Ga(h,d){return d>=h.length-1?h.pop():h.splice(d,1)[0]}function Ll(h,d){const v=[];for(let w=0;w<h;w++)v.push(d);return v}function bs(h,d,v){let w=rc(h,d);return w>=0?h[1|w]=v:(w=~w,function(h,d,v,w){let M=h.length;if(M==d)h.push(v,w);else if(1===M)h.push(w,h[0]),h[0]=v;else{for(M--,h.push(h[M-1],h[M]);M>d;)h[M]=h[M-2],M--;h[d]=v,h[d+1]=w}}(h,w,d,v)),w}function tl(h,d){const v=rc(h,d);if(v>=0)return h[1|v]}function rc(h,d){return function(h,d,v){let w=0,M=h.length>>v;for(;M!==w;){const P=w+(M-w>>1),X=h[P<<v];if(d===X)return P<<v;X>d?M=P:w=P+1}return~(M<<v)}(h,d,1)}const na={},Ec="__NG_DI_FLAG__",Po="ngTempTokenPath",lc=/\n/gm,cc="__source",Wa=r({provide:String,useValue:r});let Js;function uc(h){const d=Js;return Js=h,d}function dl(h,d=ee.Default){if(void 0===Js)throw new Error("inject() must be called from an injection context");return null===Js?ye(h,void 0,d):Js.get(h,d&ee.Optional?null:void 0,d)}function Jo(h,d=ee.Default){return(ke||dl)(Q(h),d)}const el=Jo;function hc(h){const d=[];for(let v=0;v<h.length;v++){const w=Q(h[v]);if(Array.isArray(w)){if(0===w.length)throw new Error("Arguments array must have arguments.");let M,P=ee.Default;for(let X=0;X<w.length;X++){const st=w[X],bt=Gc(st);"number"==typeof bt?-1===bt?M=st.token:P|=bt:M=st}d.push(Jo(M,P))}else d.push(Jo(w))}return d}function Cc(h,d){return h[Ec]=d,h.prototype[Ec]=d,h}function Gc(h){return h[Ec]}const Fl=Cc(qr("Inject",h=>({token:h})),-1),jl=Cc(qr("Optional"),8),da=Cc(qr("SkipSelf"),4);let Cl;function wl(h){var d;return(null===(d=function(){if(void 0===Cl&&(Cl=null,Ce.trustedTypes))try{Cl=Ce.trustedTypes.createPolicy("angular",{createHTML:h=>h,createScript:h=>h,createScriptURL:h=>h})}catch(h){}return Cl}())||void 0===d?void 0:d.createHTML(h))||h}class Hl{constructor(d){this.changingThisBreaksApplicationSecurity=d}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class lh extends Hl{getTypeName(){return"HTML"}}class ss extends Hl{getTypeName(){return"Style"}}class Dc extends Hl{getTypeName(){return"Script"}}class _t extends Hl{getTypeName(){return"URL"}}class wt extends Hl{getTypeName(){return"ResourceURL"}}function ie(h){return h instanceof Hl?h.changingThisBreaksApplicationSecurity:h}function we(h,d){const v=Ue(h);if(null!=v&&v!==d){if("ResourceURL"===v&&"URL"===d)return!0;throw new Error(`Required a safe ${d}, got a ${v} (see https://g.co/ng/security#xss)`)}return v===d}function Ue(h){return h instanceof Hl&&h.getTypeName()||null}function di(h){return new lh(h)}function qe(h){return new ss(h)}function si(h){return new Dc(h)}function Li(h){return new _t(h)}function xi(h){return new wt(h)}class Jn{constructor(d){this.inertDocumentHelper=d}getInertBodyElement(d){d="<body><remove></remove>"+d;try{const v=(new window.DOMParser).parseFromString(wl(d),"text/html").body;return null===v?this.inertDocumentHelper.getInertBodyElement(d):(v.removeChild(v.firstChild),v)}catch(v){return null}}}class Un{constructor(d){if(this.defaultDoc=d,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const v=this.inertDocument.createElement("html");this.inertDocument.appendChild(v);const w=this.inertDocument.createElement("body");v.appendChild(w)}}getInertBodyElement(d){const v=this.inertDocument.createElement("template");if("content"in v)return v.innerHTML=wl(d),v;const w=this.inertDocument.createElement("body");return w.innerHTML=wl(d),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(w),w}stripCustomNsAttrs(d){const v=d.attributes;for(let M=v.length-1;0<M;M--){const X=v.item(M).name;("xmlns:ns1"===X||0===X.indexOf("ns1:"))&&d.removeAttribute(X)}let w=d.firstChild;for(;w;)w.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(w),w=w.nextSibling}}const $o=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Zr=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function ho(h){return(h=String(h)).match($o)||h.match(Zr)?h:"unsafe:"+h}function po(h){const d={};for(const v of h.split(","))d[v]=!0;return d}function oa(...h){const d={};for(const v of h)for(const w in v)v.hasOwnProperty(w)&&(d[w]=!0);return d}const ys=po("area,br,col,hr,img,wbr"),ds=po("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),gl=po("rp,rt"),Au=oa(ys,oa(ds,po("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),oa(gl,po("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),oa(gl,ds)),uh=po("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Ic=po("srcset"),ju=oa(uh,Ic,po("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),po("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),xu=po("script,style,template");class Yu{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(d){let v=d.firstChild,w=!0;for(;v;)if(v.nodeType===Node.ELEMENT_NODE?w=this.startElement(v):v.nodeType===Node.TEXT_NODE?this.chars(v.nodeValue):this.sanitizedSomething=!0,w&&v.firstChild)v=v.firstChild;else for(;v;){v.nodeType===Node.ELEMENT_NODE&&this.endElement(v);let M=this.checkClobberedElement(v,v.nextSibling);if(M){v=M;break}v=this.checkClobberedElement(v,v.parentNode)}return this.buf.join("")}startElement(d){const v=d.nodeName.toLowerCase();if(!Au.hasOwnProperty(v))return this.sanitizedSomething=!0,!xu.hasOwnProperty(v);this.buf.push("<"),this.buf.push(v);const w=d.attributes;for(let M=0;M<w.length;M++){const P=w.item(M),X=P.name,st=X.toLowerCase();if(!ju.hasOwnProperty(st)){this.sanitizedSomething=!0;continue}let bt=P.value;uh[st]&&(bt=ho(bt)),Ic[st]&&(h=bt,bt=(h=String(h)).split(",").map(d=>ho(d.trim())).join(", ")),this.buf.push(" ",X,'="',au(bt),'"')}var h;return this.buf.push(">"),!0}endElement(d){const v=d.nodeName.toLowerCase();Au.hasOwnProperty(v)&&!ys.hasOwnProperty(v)&&(this.buf.push("</"),this.buf.push(v),this.buf.push(">"))}chars(d){this.buf.push(au(d))}checkClobberedElement(d,v){if(v&&(d.compareDocumentPosition(v)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${d.outerHTML}`);return v}}const fc=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,hh=/([^\#-~ |!])/g;function au(h){return h.replace(/&/g,"&amp;").replace(fc,function(d){return"&#"+(1024*(d.charCodeAt(0)-55296)+(d.charCodeAt(1)-56320)+65536)+";"}).replace(hh,function(d){return"&#"+d.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Yc;function ku(h,d){let v=null;try{Yc=Yc||function(h){const d=new Un(h);return function(){try{return!!(new window.DOMParser).parseFromString(wl(""),"text/html")}catch(h){return!1}}()?new Jn(d):d}(h);let w=d?String(d):"";v=Yc.getInertBodyElement(w);let M=5,P=w;do{if(0===M)throw new Error("Failed to sanitize html because the input is unstable");M--,w=P,P=v.innerHTML,v=Yc.getInertBodyElement(w)}while(w!==P);return wl((new Yu).sanitizeChildren(Xu(v)||v))}finally{if(v){const w=Xu(v)||v;for(;w.firstChild;)w.removeChild(w.firstChild)}}}function Xu(h){return"content"in h&&function(h){return h.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===h.nodeName}(h)?h.content:null}var Zo=(()=>((Zo=Zo||{})[Zo.NONE=0]="NONE",Zo[Zo.HTML=1]="HTML",Zo[Zo.STYLE=2]="STYLE",Zo[Zo.SCRIPT=3]="SCRIPT",Zo[Zo.URL=4]="URL",Zo[Zo.RESOURCE_URL=5]="RESOURCE_URL",Zo))();function Xc(h){const d=function(){const h=Gt();return h&&h[12]}();return d?d.sanitize(Zo.URL,h)||"":we(h,"URL")?ie(h):ho(xt(h))}const $u="__ngContext__";function sa(h,d){h[$u]=d}function cu(h){const d=function(h){return h[$u]||null}(h);return d?Array.isArray(d)?d:d.lView:null}function pu(h){return h.ngOriginalError}function Ih(h,...d){h.error(...d)}class Jl{constructor(){this._console=console}handleError(d){const v=this._findOriginalError(d),w=(h=d)&&h.ngErrorLogger||Ih;var h;w(this._console,"ERROR",d),v&&w(this._console,"ORIGINAL ERROR",v)}_findOriginalError(d){let v=d&&pu(d);for(;v&&pu(v);)v=pu(v);return v||null}}const mh=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Ce))();function I(h){return h instanceof Function?h():h}var Tt=(()=>((Tt=Tt||{})[Tt.Important=1]="Important",Tt[Tt.DashCase=2]="DashCase",Tt))();function Kt(h,d){return undefined(h,d)}function fi(h){const d=h[3];return _o(d)?d[3]:d}function Ki(h){return mn(h[13])}function an(h){return mn(h[4])}function mn(h){for(;null!==h&&!_o(h);)h=h[4];return h}function dn(h,d,v,w,M){if(null!=w){let P,X=!1;_o(w)?P=w:ro(w)&&(X=!0,w=w[0]);const st=Ot(w);0===h&&null!==v?null==M?jt(d,v,st):Yt(d,v,st,M||null,!0):1===h&&null!==v?Yt(d,v,st,M||null,!0):2===h?function(h,d,v){const w=Re(h,d);w&&function(h,d,v,w){Nr(h)?h.removeChild(d,v,w):d.removeChild(v)}(h,w,d,v)}(d,st,X):3===h&&d.destroyNode(st),null!=P&&function(h,d,v,w,M){const P=v[7];P!==Ot(v)&&dn(d,h,w,P,M);for(let st=10;st<v.length;st++){const bt=v[st];go(bt[1],bt,h,d,w,P)}}(d,h,P,v,M)}}function mr(h,d,v){return Nr(h)?h.createElement(d,v):null===v?h.createElement(d):h.createElementNS(v,d)}function Xr(h,d){const v=h[9],w=v.indexOf(d),M=d[3];1024&d[2]&&(d[2]&=-1025,qo(M,-1)),v.splice(w,1)}function ks(h,d){if(h.length<=10)return;const v=10+d,w=h[v];if(w){const M=w[17];null!==M&&M!==h&&Xr(M,w),d>0&&(h[v-1][4]=w[4]);const P=Ga(h,10+d);!function(h,d){go(h,d,d[11],2,null,null),d[0]=null,d[6]=null}(w[1],w);const X=P[19];null!==X&&X.detachView(P[1]),w[3]=null,w[4]=null,w[2]&=-129}return w}function as(h,d){if(!(256&d[2])){const v=d[11];Nr(v)&&v.destroyNode&&go(h,d,v,3,null,null),function(h){let d=h[13];if(!d)return S(h[1],h);for(;d;){let v=null;if(ro(d))v=d[13];else{const w=d[10];w&&(v=w)}if(!v){for(;d&&!d[4]&&d!==h;)ro(d)&&S(d[1],d),d=d[3];null===d&&(d=h),ro(d)&&S(d[1],d),v=d&&d[4]}d=v}}(d)}}function S(h,d){if(!(256&d[2])){d[2]&=-129,d[2]|=256,function(h,d){let v;if(null!=h&&null!=(v=h.destroyHooks))for(let w=0;w<v.length;w+=2){const M=d[v[w]];if(!(M instanceof is)){const P=v[w+1];if(Array.isArray(P))for(let X=0;X<P.length;X+=2){const st=M[P[X]],bt=P[X+1];try{bt.call(st)}finally{}}else try{P.call(M)}finally{}}}}(h,d),function(h,d){const v=h.cleanup,w=d[7];let M=-1;if(null!==v)for(let P=0;P<v.length-1;P+=2)if("string"==typeof v[P]){const X=v[P+1],st="function"==typeof X?X(d):Ot(d[X]),bt=w[M=v[P+2]],Xt=v[P+3];"boolean"==typeof Xt?st.removeEventListener(v[P],bt,Xt):Xt>=0?w[M=Xt]():w[M=-Xt].unsubscribe(),P+=2}else{const X=w[M=v[P+1]];v[P].call(X)}if(null!==w){for(let P=M+1;P<w.length;P++)w[P]();d[7]=null}}(h,d),1===d[1].type&&Nr(d[11])&&d[11].destroy();const v=d[17];if(null!==v&&_o(d[3])){v!==d[3]&&Xr(v,d);const w=d[19];null!==w&&w.detachView(h)}}}function et(h,d,v){return function(h,d,v){let w=d;for(;null!==w&&40&w.type;)w=(d=w).parent;if(null===w)return v[0];if(2&w.flags){const M=h.data[w.directiveStart].encapsulation;if(M===wi.None||M===wi.Emulated)return null}return It(w,v)}(h,d.parent,v)}function Yt(h,d,v,w,M){Nr(h)?h.insertBefore(d,v,w,M):d.insertBefore(v,w,M)}function jt(h,d,v){Nr(h)?h.appendChild(d,v):d.appendChild(v)}function re(h,d,v,w,M){null!==w?Yt(h,d,v,w,M):jt(h,d,v)}function Re(h,d){return Nr(h)?h.parentNode(d):d.parentNode}function ai(h,d,v){return Ri(h,d,v)}let Ri=function(h,d,v){return 40&h.type?It(h,v):null};function rn(h,d,v,w){const M=et(h,w,d),P=d[11],st=ai(w.parent||d[6],w,d);if(null!=M)if(Array.isArray(v))for(let bt=0;bt<v.length;bt++)re(P,M,v[bt],st,!1);else re(P,M,v,st,!1)}function Mn(h,d){if(null!==d){const v=d.type;if(3&v)return It(d,h);if(4&v)return Or(-1,h[d.index]);if(8&v){const w=d.child;if(null!==w)return Mn(h,w);{const M=h[d.index];return _o(M)?Or(-1,M):Ot(M)}}if(32&v)return Kt(d,h)()||Ot(h[d.index]);{const w=on(h,d);return null!==w?Array.isArray(w)?w[0]:Mn(fi(h[16]),w):Mn(h,d.next)}}return null}function on(h,d){return null!==d?h[16][6].projection[d.projection]:null}function Or(h,d){const v=10+h+1;if(v<d.length){const w=d[v],M=w[1].firstChild;if(null!==M)return Mn(w,M)}return d[7]}function ls(h,d,v,w,M,P,X){for(;null!=v;){const st=w[v.index],bt=v.type;if(X&&0===d&&(st&&sa(Ot(st),w),v.flags|=4),64!=(64&v.flags))if(8&bt)ls(h,d,v.child,w,M,P,!1),dn(d,h,M,st,P);else if(32&bt){const Xt=Kt(v,w);let le;for(;le=Xt();)dn(d,h,M,le,P);dn(d,h,M,st,P)}else 16&bt?Fo(h,d,w,v,M,P):dn(d,h,M,st,P);v=X?v.projectionNext:v.next}}function go(h,d,v,w,M,P){ls(v,w,h.firstChild,d,M,P,!1)}function Fo(h,d,v,w,M,P){const X=v[16],bt=X[6].projection[w.projection];if(Array.isArray(bt))for(let Xt=0;Xt<bt.length;Xt++)dn(d,h,M,bt[Xt],P);else ls(h,d,bt,X[3],M,P,!0)}function se(h,d,v){Nr(h)?h.setAttribute(d,"style",v):d.style.cssText=v}function Fr(h,d,v){Nr(h)?""===v?h.removeAttribute(d,"class"):h.setAttribute(d,"class",v):d.className=v}function Ns(h,d,v){let w=h.length;for(;;){const M=h.indexOf(d,v);if(-1===M)return M;if(0===M||h.charCodeAt(M-1)<=32){const P=d.length;if(M+P===w||h.charCodeAt(M+P)<=32)return M}v=M+1}}const xc="ng-template";function kc(h,d,v){let w=0;for(;w<h.length;){let M=h[w++];if(v&&"class"===M){if(M=h[w],-1!==Ns(M.toLowerCase(),d,0))return!0}else if(1===M){for(;w<h.length&&"string"==typeof(M=h[w++]);)if(M.toLowerCase()===d)return!0;return!1}}return!1}function Hu(h){return 4===h.type&&h.value!==xc}function Qu(h,d,v){return d===(4!==h.type||v?h.value:xc)}function Ah(h,d,v){let w=4;const M=h.attrs||[],P=function(h){for(let d=0;d<h.length;d++)if(mc(h[d]))return d;return h.length}(M);let X=!1;for(let st=0;st<d.length;st++){const bt=d[st];if("number"!=typeof bt){if(!X)if(4&w){if(w=2|1&w,""!==bt&&!Qu(h,bt,v)||""===bt&&1===d.length){if(Il(w))return!1;X=!0}}else{const Xt=8&w?bt:d[++st];if(8&w&&null!==h.attrs){if(!kc(h.attrs,Xt,v)){if(Il(w))return!1;X=!0}continue}const Pe=od(8&w?"class":bt,M,Hu(h),v);if(-1===Pe){if(Il(w))return!1;X=!0;continue}if(""!==Xt){let oi;oi=Pe>P?"":M[Pe+1].toLowerCase();const Ti=8&w?oi:null;if(Ti&&-1!==Ns(Ti,Xt,0)||2&w&&Xt!==oi){if(Il(w))return!1;X=!0}}}}else{if(!X&&!Il(w)&&!Il(bt))return!1;if(X&&Il(bt))continue;X=!1,w=bt|1&w}}return Il(w)||X}function Il(h){return 0==(1&h)}function od(h,d,v,w){if(null===d)return-1;let M=0;if(w||!v){let P=!1;for(;M<d.length;){const X=d[M];if(X===h)return M;if(3===X||6===X)P=!0;else{if(1===X||2===X){let st=d[++M];for(;"string"==typeof st;)st=d[++M];continue}if(4===X)break;if(0===X){M+=4;continue}}M+=P?1:2}return-1}return function(h,d){let v=h.indexOf(4);if(v>-1)for(v++;v<h.length;){const w=h[v];if("number"==typeof w)return-1;if(w===d)return v;v++}return-1}(d,h)}function Id(h,d,v=!1){for(let w=0;w<d.length;w++)if(Ah(h,d[w],v))return!0;return!1}function Yh(h,d){t:for(let v=0;v<d.length;v++){const w=d[v];if(h.length===w.length){for(let M=0;M<h.length;M++)if(h[M]!==w[M])continue t;return!0}}return!1}function Oh(h,d){return h?":not("+d.trim()+")":d}function Xh(h){let d=h[0],v=1,w=2,M="",P=!1;for(;v<h.length;){let X=h[v];if("string"==typeof X)if(2&w){const st=h[++v];M+="["+X+(st.length>0?'="'+st+'"':"")+"]"}else 8&w?M+="."+X:4&w&&(M+=" "+X);else""!==M&&!Il(X)&&(d+=Oh(P,M),M=""),w=X,P=P||!Il(w);v++}return""!==M&&(d+=Oh(P,M)),d}const Rr={};function xh(h){sd(W(),Gt(),Er()+h,En())}function sd(h,d,v,w){if(!w)if(3==(3&d[2])){const P=h.preOrderCheckHooks;null!==P&&zs(d,P,v)}else{const P=h.preOrderHooks;null!==P&&As(d,P,0,v)}es(v)}function Kh(h,d){return h<<17|d<<2}function Lc(h){return h>>17&32767}function ad(h){return 2|h}function mu(h){return(131068&h)>>2}function ld(h,d){return-131069&h|d<<2}function Jh(h){return 1|h}function vd(h,d){const v=h.contentQueries;if(null!==v)for(let w=0;w<v.length;w+=2){const M=v[w],P=v[w+1];if(-1!==P){const X=h.data[P];rs(M),X.contentQueries(2,d[P],P)}}}function Ph(h,d,v,w,M,P,X,st,bt,Xt){const le=d.blueprint.slice();return le[0]=M,le[2]=140|w,hr(le),le[3]=le[15]=h,le[8]=v,le[10]=X||h&&h[10],le[11]=st||h&&h[11],le[12]=bt||h&&h[12]||null,le[9]=Xt||h&&h[9]||null,le[6]=P,le[16]=2==d.type?h[16]:le,le}function Fh(h,d,v,w,M){let P=h.data[d];if(null===P)P=function(h,d,v,w,M){const P=Qt(),X=ti(),bt=h.data[d]=function(h,d,v,w,M,P){return{type:v,index:w,insertBeforeIndex:null,injectorIndex:d?d.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:M,attrs:P,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:d,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,X?P:P&&P.parent,v,d,w,M);return null===h.firstChild&&(h.firstChild=bt),null!==P&&(X?null==P.child&&null!==bt.parent&&(P.child=bt):null===P.next&&(P.next=bt)),bt}(h,d,v,w,M),Hn.lFrame.inI18n&&(P.flags|=64);else if(64&P.type){P.type=v,P.value=w,P.attrs=M;const X=function(){const h=Hn.lFrame,d=h.currentTNode;return h.isParent?d:d.parent}();P.injectorIndex=null===X?-1:X.injectorIndex}return Ye(P,!0),P}function Bh(h,d,v,w){if(0===v)return-1;const M=d.length;for(let P=0;P<v;P++)d.push(w),h.blueprint.push(w),h.data.push(null);return M}function td(h,d,v){Da(d);try{const w=h.viewQuery;null!==w&&pp(1,w,v);const M=h.template;null!==M&&Ld(h,d,M,1,v),h.firstCreatePass&&(h.firstCreatePass=!1),h.staticContentQueries&&vd(h,d),h.staticViewQueries&&pp(2,h.viewQuery,v);const P=h.components;null!==P&&function(h,d){for(let v=0;v<d.length;v++)tg(h,d[v])}(d,P)}catch(w){throw h.firstCreatePass&&(h.incompleteFirstPass=!0,h.firstCreatePass=!1),w}finally{d[2]&=-5,On()}}function Hh(h,d,v,w){const M=d[2];if(256==(256&M))return;Da(d);const P=En();try{hr(d),function(h){Hn.lFrame.bindingIndex=h}(h.bindingStartIndex),null!==v&&Ld(h,d,v,2,w);const X=3==(3&M);if(!P)if(X){const Xt=h.preOrderCheckHooks;null!==Xt&&zs(d,Xt,null)}else{const Xt=h.preOrderHooks;null!==Xt&&As(d,Xt,0,null),va(d,0)}if(function(h){for(let d=Ki(h);null!==d;d=an(d)){if(!d[2])continue;const v=d[9];for(let w=0;w<v.length;w++){const M=v[w],P=M[3];0==(1024&M[2])&&qo(P,1),M[2]|=1024}}}(d),function(h){for(let d=Ki(h);null!==d;d=an(d))for(let v=10;v<d.length;v++){const w=d[v],M=w[1];Hr(w)&&Hh(M,w,M.template,w[8])}}(d),null!==h.contentQueries&&vd(h,d),!P)if(X){const Xt=h.contentCheckHooks;null!==Xt&&zs(d,Xt)}else{const Xt=h.contentHooks;null!==Xt&&As(d,Xt,1),va(d,1)}!function(h,d){const v=h.hostBindingOpCodes;if(null!==v)try{for(let w=0;w<v.length;w++){const M=v[w];if(M<0)es(~M);else{const P=M,X=v[++w],st=v[++w];ko(X,P),st(2,d[P])}}}finally{es(-1)}}(h,d);const st=h.components;null!==st&&function(h,d){for(let v=0;v<d.length;v++)qf(h,d[v])}(d,st);const bt=h.viewQuery;if(null!==bt&&pp(2,bt,w),!P)if(X){const Xt=h.viewCheckHooks;null!==Xt&&zs(d,Xt)}else{const Xt=h.viewHooks;null!==Xt&&As(d,Xt,2),va(d,2)}!0===h.firstUpdatePass&&(h.firstUpdatePass=!1),P||(d[2]&=-73),1024&d[2]&&(d[2]&=-1025,qo(d[3],-1))}finally{On()}}function lp(h,d,v,w){const M=d[10],P=!En(),X=Cr(d);try{P&&!X&&M.begin&&M.begin(),X&&td(h,d,w),Hh(h,d,v,w)}finally{P&&!X&&M.end&&M.end()}}function Ld(h,d,v,w,M){const P=Er(),X=2&w;try{es(-1),X&&d.length>20&&sd(h,d,20,En()),v(w,M)}finally{es(P)}}function Nd(h,d,v){if(Zs(d)){const M=d.directiveEnd;for(let P=d.directiveStart;P<M;P++){const X=h.data[P];X.contentQueries&&X.contentQueries(1,v[P],P)}}}function Pd(h,d,v){!Vs()||(function(h,d,v,w){const M=v.directiveStart,P=v.directiveEnd;h.firstCreatePass||q(v,d),sa(w,d);const X=v.initialInputs;for(let st=M;st<P;st++){const bt=h.data[st],Xt=Jr(bt);Xt&&Kf(d,v,bt);const le=Ys(d,h,st,v);sa(le,d),null!==X&&Jf(0,st-M,le,bt,0,X),Xt&&(jn(v.index,d)[8]=le)}}(h,d,v,It(v,d)),128==(128&v.flags)&&function(h,d,v){const w=v.directiveStart,M=v.directiveEnd,X=v.index,st=Hn.lFrame.currentDirectiveIndex;try{es(X);for(let bt=w;bt<M;bt++){const Xt=h.data[bt],le=d[bt];Gs(bt),(null!==Xt.hostBindings||0!==Xt.hostVars||null!==Xt.hostAttrs)&&zp(Xt,le)}}finally{es(-1),Gs(st)}}(h,d,v))}function L(h,d,v=It){const w=d.localNames;if(null!==w){let M=d.index+1;for(let P=0;P<w.length;P+=2){const X=w[P+1],st=-1===X?v(d,h):h[X];h[M++]=st}}}function G(h){const d=h.tView;return null===d||d.incompleteFirstPass?h.tView=b(1,null,h.template,h.decls,h.vars,h.directiveDefs,h.pipeDefs,h.viewQuery,h.schemas,h.consts):d}function b(h,d,v,w,M,P,X,st,bt,Xt){const le=20+w,Pe=le+M,oi=function(h,d){const v=[];for(let w=0;w<d;w++)v.push(w<h?null:Rr);return v}(le,Pe),Ti="function"==typeof Xt?Xt():Xt;return oi[1]={type:h,blueprint:oi,template:v,queries:null,viewQuery:st,declTNode:d,data:oi.slice().fill(null,le),bindingStartIndex:le,expandoStartIndex:Pe,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof P?P():P,pipeRegistry:"function"==typeof X?X():X,firstChild:null,schemas:bt,consts:Ti,incompleteFirstPass:!1}}function Mi(h,d,v,w){const M=Zp(d);null===v?M.push(w):(M.push(v),h.firstCreatePass&&Qp(h).push(w,M.length-1))}function Nn(h,d,v){for(let w in h)if(h.hasOwnProperty(w)){const M=h[w];(v=null===v?{}:v).hasOwnProperty(w)?v[w].push(d,M):v[w]=[d,M]}return v}function yr(h,d,v,w,M,P,X,st){const bt=It(d,v);let le,Xt=d.inputs;!st&&null!=Xt&&(le=Xt[w])?(tf(h,v,le,w,M),lr(d)&&function(h,d){const v=jn(d,h);16&v[2]||(v[2]|=64)}(v,d.index)):3&d.type&&(w=function(h){return"class"===h?"className":"for"===h?"htmlFor":"formaction"===h?"formAction":"innerHtml"===h?"innerHTML":"readonly"===h?"readOnly":"tabindex"===h?"tabIndex":h}(w),M=null!=X?X(M,d.value||"",w):M,Nr(P)?P.setProperty(bt,w,M):Wl(w)||(bt.setProperty?bt.setProperty(w,M):bt[w]=M))}function Ed(h,d,v,w){let M=!1;if(Vs()){const P=function(h,d,v){const w=h.directiveRegistry;let M=null;if(w)for(let P=0;P<w.length;P++){const X=w[P];Id(v,X.selectors,!1)&&(M||(M=[]),Ve(q(v,d),h,X.type),Jr(X)?(Yp(h,v),M.unshift(X)):M.push(X))}return M}(h,d,v),X=null===w?null:{"":-1};if(null!==P){M=!0,Vh(v,h.data.length,P.length);for(let le=0;le<P.length;le++){const Pe=P[le];Pe.providersResolver&&Pe.providersResolver(Pe)}let st=!1,bt=!1,Xt=Bh(h,d,P.length,null);for(let le=0;le<P.length;le++){const Pe=P[le];v.mergedAttrs=ua(v.mergedAttrs,Pe.hostAttrs),Xp(h,v,d,Xt,Pe),Xf(Xt,Pe,X),null!==Pe.contentQueries&&(v.flags|=8),(null!==Pe.hostBindings||null!==Pe.hostAttrs||0!==Pe.hostVars)&&(v.flags|=128);const oi=Pe.type.prototype;!st&&(oi.ngOnChanges||oi.ngOnInit||oi.ngDoCheck)&&((h.preOrderHooks||(h.preOrderHooks=[])).push(v.index),st=!0),!bt&&(oi.ngOnChanges||oi.ngDoCheck)&&((h.preOrderCheckHooks||(h.preOrderCheckHooks=[])).push(v.index),bt=!0),Xt++}!function(h,d){const w=d.directiveEnd,M=h.data,P=d.attrs,X=[];let st=null,bt=null;for(let Xt=d.directiveStart;Xt<w;Xt++){const le=M[Xt],Pe=le.inputs,oi=null===P||Hu(d)?null:$f(Pe,P);X.push(oi),st=Nn(Pe,Xt,st),bt=Nn(le.outputs,Xt,bt)}null!==st&&(st.hasOwnProperty("class")&&(d.flags|=16),st.hasOwnProperty("style")&&(d.flags|=32)),d.initialInputs=X,d.inputs=st,d.outputs=bt}(h,v)}X&&function(h,d,v){if(d){const w=h.localNames=[];for(let M=0;M<d.length;M+=2){const P=v[d[M+1]];if(null==P)throw new St("301",`Export of name '${d[M+1]}' not found!`);w.push(d[M],P)}}}(v,w,X)}return v.mergedAttrs=ua(v.mergedAttrs,v.attrs),M}function Wp(h,d,v,w,M,P){const X=P.hostBindings;if(X){let st=h.hostBindingOpCodes;null===st&&(st=h.hostBindingOpCodes=[]);const bt=~d.index;(function(h){let d=h.length;for(;d>0;){const v=h[--d];if("number"==typeof v&&v<0)return v}return 0})(st)!=bt&&st.push(bt),st.push(w,M,X)}}function zp(h,d){null!==h.hostBindings&&h.hostBindings(1,d)}function Yp(h,d){d.flags|=2,(h.components||(h.components=[])).push(d.index)}function Xf(h,d,v){if(v){if(d.exportAs)for(let w=0;w<d.exportAs.length;w++)v[d.exportAs[w]]=h;Jr(d)&&(v[""]=h)}}function Vh(h,d,v){h.flags|=1,h.directiveStart=d,h.directiveEnd=d+v,h.providerIndexes=d}function Xp(h,d,v,w,M){h.data[w]=M;const P=M.factory||(M.factory=Hs(M.type)),X=new is(P,Jr(M),null);h.blueprint[w]=X,v[w]=X,Wp(h,d,0,w,Bh(h,v,M.hostVars,Rr),M)}function Kf(h,d,v){const w=It(d,h),M=G(v),P=h[10],X=Fd(h,Ph(h,M,null,v.onPush?64:16,w,d,P,P.createRenderer(w,v),null,null));h[d.index]=X}function Vu(h,d,v,w,M,P){const X=It(h,d);!function(h,d,v,w,M,P,X){if(null==P)Nr(h)?h.removeAttribute(d,M,v):d.removeAttribute(M);else{const st=null==X?xt(P):X(P,w||"",M);Nr(h)?h.setAttribute(d,M,st,v):v?d.setAttributeNS(v,M,st):d.setAttribute(M,st)}}(d[11],X,P,h.value,v,w,M)}function Jf(h,d,v,w,M,P){const X=P[d];if(null!==X){const st=w.setInput;for(let bt=0;bt<X.length;){const Xt=X[bt++],le=X[bt++],Pe=X[bt++];null!==st?w.setInput(v,Pe,Xt,le):v[le]=Pe}}}function $f(h,d){let v=null,w=0;for(;w<d.length;){const M=d[w];if(0!==M)if(5!==M){if("number"==typeof M)break;h.hasOwnProperty(M)&&(null===v&&(v=[]),v.push(M,h[M],d[w+1])),w+=2}else w+=2;else w+=4}return v}function Kp(h,d,v,w){return new Array(h,!0,!1,d,null,0,w,v,null,null)}function qf(h,d){const v=jn(d,h);if(Hr(v)){const w=v[1];80&v[2]?Hh(w,v,w.template,v[8]):v[5]>0&&id(v)}}function id(h){for(let w=Ki(h);null!==w;w=an(w))for(let M=10;M<w.length;M++){const P=w[M];if(1024&P[2]){const X=P[1];Hh(X,P,X.template,P[8])}else P[5]>0&&id(P)}const v=h[1].components;if(null!==v)for(let w=0;w<v.length;w++){const M=jn(v[w],h);Hr(M)&&M[5]>0&&id(M)}}function tg(h,d){const v=jn(d,h),w=v[1];(function(h,d){for(let v=d.length;v<h.blueprint.length;v++)d.push(h.blueprint[v])})(w,v),td(w,v,v[8])}function Fd(h,d){return h[13]?h[14][4]=d:h[13]=d,h[14]=d,d}function up(h){for(;h;){h[2]|=64;const d=fi(h);if(Ss(h)&&!d)return h;h=d}return null}function dp(h,d,v){const w=d[10];w.begin&&w.begin();try{Hh(h,d,h.template,v)}catch(M){throw qp(d,M),M}finally{w.end&&w.end()}}function Jp(h){!function(h){for(let d=0;d<h.components.length;d++){const v=h.components[d],w=cu(v),M=w[1];lp(M,w,M.template,v)}}(h[8])}function pp(h,d,v){rs(0),d(h,v)}const $p=(()=>Promise.resolve(null))();function Zp(h){return h[7]||(h[7]=[])}function Qp(h){return h.cleanup||(h.cleanup=[])}function Bd(h,d,v){return(null===h||Jr(h))&&(v=function(h){for(;Array.isArray(h);){if("object"==typeof h[1])return h;h=h[0]}return null}(v[d.index])),v[11]}function qp(h,d){const v=h[9],w=v?v.get(Jl,null):null;w&&w.handleError(d)}function tf(h,d,v,w,M){for(let P=0;P<v.length;){const X=v[P++],st=v[P++],bt=d[X],Xt=h.data[X];null!==Xt.setInput?Xt.setInput(bt,M,w,st):bt[st]=M}}function eh(h,d,v){const w=z(d,h);!function(h,d,v){Nr(h)?h.setValue(d,v):d.textContent=v}(h[11],w,v)}function Hd(h,d,v){let w=v?h.styles:null,M=v?h.classes:null,P=0;if(null!==d)for(let X=0;X<d.length;X++){const st=d[X];"number"==typeof st?P=st:1==P?M=y(M,st):2==P&&(w=y(w,st+": "+d[++X]+";"))}v?h.styles=w:h.stylesWithoutHost=w,v?h.classes=M:h.classesWithoutHost=M}const fp=new Vo("INJECTOR",-1);class ef{get(d,v=na){if(v===na){const w=new Error(`NullInjectorError: No provider for ${u(d)}!`);throw w.name="NullInjectorError",w}return v}}const nf=new Vo("Set Injector scope."),Td={},ag={};let Ud;function Cd(){return void 0===Ud&&(Ud=new ef),Ud}function rf(h,d=null,v=null,w){const M=sf(h,d,v,w);return M._resolveInjectorDefTypes(),M}function sf(h,d=null,v=null,w){return new lg(h,v,d||Cd(),w)}class lg{constructor(d,v,w,M=null){this.parent=w,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const P=[];v&&So(v,st=>this.processProvider(st,d,v)),So([d],st=>this.processInjectorType(st,[],P)),this.records.set(fp,nd(void 0,this));const X=this.records.get(nf);this.scope=null!=X?X.value:null,this.source=M||("object"==typeof d?null:u(d))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(d=>d.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(d,v=na,w=ee.Default){this.assertNotDestroyed();const M=uc(this),P=me(void 0);try{if(!(w&ee.SkipSelf)){let st=this.records.get(d);if(void 0===st){const bt=("function"==typeof(h=d)||"object"==typeof h&&h instanceof Vo)&&Te(d);st=bt&&this.injectableDefInScope(bt)?nd(gp(d),Td):null,this.records.set(d,st)}if(null!=st)return this.hydrate(d,st)}return(w&ee.Self?Cd():this.parent).get(d,v=w&ee.Optional&&v===na?null:v)}catch(X){if("NullInjectorError"===X.name){if((X[Po]=X[Po]||[]).unshift(u(d)),M)throw X;return function(h,d,v,w){const M=h[Po];throw d[cc]&&M.unshift(d[cc]),h.message=function(h,d,v,w=null){h=h&&"\n"===h.charAt(0)&&"\u0275"==h.charAt(1)?h.substr(2):h;let M=u(d);if(Array.isArray(d))M=d.map(u).join(" -> ");else if("object"==typeof d){let P=[];for(let X in d)if(d.hasOwnProperty(X)){let st=d[X];P.push(X+":"+("string"==typeof st?JSON.stringify(st):u(st)))}M=`{${P.join(", ")}}`}return`${v}${w?"("+w+")":""}[${M}]: ${h.replace(lc,"\n  ")}`}("\n"+h.message,M,v,w),h.ngTokenPath=M,h[Po]=null,h}(X,d,"R3InjectorError",this.source)}throw X}finally{me(P),uc(M)}var h}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(d=>this.get(d))}toString(){const d=[];return this.records.forEach((w,M)=>d.push(u(M))),`R3Injector[${d.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(d,v,w){if(!(d=Q(d)))return!1;let M=pe(d);const P=null==M&&d.ngModule||void 0,X=void 0===P?d:P,st=-1!==w.indexOf(X);if(void 0!==P&&(M=pe(P)),null==M)return!1;if(null!=M.imports&&!st){let le;w.push(X);try{So(M.imports,Pe=>{this.processInjectorType(Pe,v,w)&&(void 0===le&&(le=[]),le.push(Pe))})}finally{}if(void 0!==le)for(let Pe=0;Pe<le.length;Pe++){const{ngModule:oi,providers:Ti}=le[Pe];So(Ti,$i=>this.processProvider($i,oi,Ti||Ii))}}this.injectorDefTypes.add(X);const bt=Hs(X)||(()=>new X);this.records.set(X,nd(bt,Td));const Xt=M.providers;if(null!=Xt&&!st){const le=d;So(Xt,Pe=>this.processProvider(Pe,le,Xt))}return void 0!==P&&void 0!==d.providers}processProvider(d,v,w){let M=rd(d=Q(d))?d:Q(d&&d.provide);const P=(h=d,lf(h)?nd(void 0,h.useValue):nd(af(h),Td));var h;if(rd(d)||!0!==d.multi)this.records.get(M);else{let X=this.records.get(M);X||(X=nd(void 0,Td,!0),X.factory=()=>hc(X.multi),this.records.set(M,X)),M=d,X.multi.push(d)}this.records.set(M,P)}hydrate(d,v){return v.value===Td&&(v.value=ag,v.value=v.factory()),"object"==typeof v.value&&v.value&&null!==(h=v.value)&&"object"==typeof h&&"function"==typeof h.ngOnDestroy&&this.onDestroy.add(v.value),v.value;var h}injectableDefInScope(d){if(!d.providedIn)return!1;const v=Q(d.providedIn);return"string"==typeof v?"any"===v||v===this.scope:this.injectorDefTypes.has(v)}}function gp(h){const d=Te(h),v=null!==d?d.factory:Hs(h);if(null!==v)return v;if(h instanceof Vo)throw new Error(`Token ${u(h)} is missing a \u0275prov definition.`);if(h instanceof Function)return function(h){const d=h.length;if(d>0){const w=Ll(d,"?");throw new Error(`Can't resolve all parameters for ${u(h)}: (${w.join(", ")}).`)}const v=function(h){const d=h&&(h[ze]||h[Ie]);if(d){const v=function(h){if(h.hasOwnProperty("name"))return h.name;const d=(""+h).match(/^function\s*([^\s(]+)/);return null===d?"":d[1]}(h);return console.warn(`DEPRECATED: DI is instantiating a token "${v}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${v}" class.`),d}return null}(h);return null!==v?()=>v.factory(h):()=>new h}(h);throw new Error("unreachable")}function af(h,d,v){let w;if(rd(h)){const M=Q(h);return Hs(M)||gp(M)}if(lf(h))w=()=>Q(h.useValue);else if(function(h){return!(!h||!h.useFactory)}(h))w=()=>h.useFactory(...hc(h.deps||[]));else if(function(h){return!(!h||!h.useExisting)}(h))w=()=>Jo(Q(h.useExisting));else{const M=Q(h&&(h.useClass||h.provide));if(!function(h){return!!h.deps}(h))return Hs(M)||gp(M);w=()=>new M(...hc(h.deps))}return w}function nd(h,d,v=!1){return{factory:h,value:d,multi:v?[]:void 0}}function lf(h){return null!==h&&"object"==typeof h&&Wa in h}function rd(h){return"function"==typeof h}let qc=(()=>{class h{static create(v,w){var M;if(Array.isArray(v))return rf({name:""},w,v,"");{const P=null!==(M=v.name)&&void 0!==M?M:"";return rf({name:P},v.parent,v.providers,P)}}}return h.THROW_IF_NOT_FOUND=na,h.NULL=new ef,h.\u0275prov=Le({token:h,providedIn:"any",factory:()=>Jo(fp)}),h.__NG_ELEMENT_ID__=-1,h})();function Tg(h,d){_s(cu(h)[1],gt())}function vp(h){let d=function(h){return Object.getPrototypeOf(h.prototype).constructor}(h.type),v=!0;const w=[h];for(;d;){let M;if(Jr(h))M=d.\u0275cmp||d.\u0275dir;else{if(d.\u0275cmp)throw new Error("Directives cannot inherit Components");M=d.\u0275dir}if(M){if(v){w.push(M);const X=h;X.inputs=l(h.inputs),X.declaredInputs=l(h.declaredInputs),X.outputs=l(h.outputs);const st=M.hostBindings;st&&c(h,st);const bt=M.viewQuery,Xt=M.contentQueries;if(bt&&o(h,bt),Xt&&a(h,Xt),s(h.inputs,M.inputs),s(h.declaredInputs,M.declaredInputs),s(h.outputs,M.outputs),Jr(M)&&M.data.animation){const le=h.data;le.animation=(le.animation||[]).concat(M.data.animation)}}const P=M.features;if(P)for(let X=0;X<P.length;X++){const st=P[X];st&&st.ngInherit&&st(h),st===vp&&(v=!1)}}d=Object.getPrototypeOf(d)}!function(h){let d=0,v=null;for(let w=h.length-1;w>=0;w--){const M=h[w];M.hostVars=d+=M.hostVars,M.hostAttrs=ua(M.hostAttrs,v=ua(v,M.hostAttrs))}}(w)}function l(h){return h===je?{}:h===Ii?[]:h}function o(h,d){const v=h.viewQuery;h.viewQuery=v?(w,M)=>{d(w,M),v(w,M)}:d}function a(h,d){const v=h.contentQueries;h.contentQueries=v?(w,M,P)=>{d(w,M,P),v(w,M,P)}:d}function c(h,d){const v=h.hostBindings;h.hostBindings=v?(w,M)=>{d(w,M),v(w,M)}:d}let O=null;function F(){if(!O){const h=Ce.Symbol;if(h&&h.iterator)O=h.iterator;else{const d=Object.getOwnPropertyNames(Map.prototype);for(let v=0;v<d.length;++v){const w=d[v];"entries"!==w&&"size"!==w&&Map.prototype[w]===Map.prototype.entries&&(O=w)}}}return O}function dt(h){return!!Ee(h)&&(Array.isArray(h)||!(h instanceof Map)&&F()in h)}function Ee(h){return null!==h&&("function"==typeof h||"object"==typeof h)}function De(h,d,v){return h[d]=v}function We(h,d,v){return!Object.is(h[d],v)&&(h[d]=v,!0)}function Si(h,d,v,w){const M=We(h,d,v);return We(h,d+1,w)||M}function Xi(h,d,v,w){const M=Gt();return We(M,rr(),d)&&(W(),Vu(Mr(),M,h,d,v,w)),Xi}function _n(h,d,v,w){return We(h,rr(),v)?d+xt(v)+w:Rr}function Pn(h,d,v,w,M,P,X,st){const Xt=function(h,d,v,w,M){const P=Si(h,d,v,w);return We(h,d+2,M)||P}(h,Ln(),v,M,X);return wr(3),Xt?d+xt(v)+w+xt(M)+P+xt(X)+st:Rr}function ih(h,d,v,w,M,P,X,st){const bt=Gt(),Xt=W(),le=h+20,Pe=Xt.firstCreatePass?function(h,d,v,w,M,P,X,st,bt){const Xt=d.consts,le=Fh(d,h,4,X||null,io(Xt,st));Ed(d,v,le,io(Xt,bt)),_s(d,le);const Pe=le.tViews=b(2,le,w,M,P,d.directiveRegistry,d.pipeRegistry,null,d.schemas,Xt);return null!==d.queries&&(d.queries.template(d,le),Pe.queries=d.queries.embeddedTView(le)),le}(le,Xt,bt,d,v,w,M,P,X):Xt.data[le];Ye(Pe,!1);const oi=bt[11].createComment("");rn(Xt,bt,oi,Pe),sa(oi,bt),Fd(bt,bt[le]=Kp(oi,bt,oi,Pe)),Yo(Pe)&&Pd(Xt,bt,Pe),null!=X&&L(bt,Pe,st)}function Sd(h){return cn(Hn.lFrame.contextLView,20+h)}function bp(h,d=ee.Default){const v=Gt();return null===v?Jo(h,d):_r(gt(),v,Q(h),d)}function n_(){throw new Error("invalid")}function Ig(h,d,v){const w=Gt();return We(w,rr(),d)&&yr(W(),Mr(),w,h,d,w[11],v,!1),Ig}function Mg(h,d,v,w,M){const X=M?"class":"style";tf(h,v,d.inputs[X],X,w)}function Ag(h,d,v,w){const M=Gt(),P=W(),X=20+h,st=M[11],bt=M[X]=mr(st,d,Hn.lFrame.currentNamespace),Xt=P.firstCreatePass?function(h,d,v,w,M,P,X){const st=d.consts,Xt=Fh(d,h,2,M,io(st,P));return Ed(d,v,Xt,io(st,X)),null!==Xt.attrs&&Hd(Xt,Xt.attrs,!1),null!==Xt.mergedAttrs&&Hd(Xt,Xt.mergedAttrs,!0),null!==d.queries&&d.queries.elementStart(d,Xt),Xt}(X,P,M,0,d,v,w):P.data[X];Ye(Xt,!0);const le=Xt.mergedAttrs;null!==le&&Qa(st,bt,le);const Pe=Xt.classes;null!==Pe&&Fr(st,bt,Pe);const oi=Xt.styles;null!==oi&&se(st,bt,oi),64!=(64&Xt.flags)&&rn(P,M,bt,Xt),0===Hn.lFrame.elementDepthCount&&sa(bt,M),Hn.lFrame.elementDepthCount++,Yo(Xt)&&(Pd(P,M,Xt),Nd(P,Xt,M)),null!==w&&L(M,Xt)}function Og(){let h=gt();ti()?vi():(h=h.parent,Ye(h,!1));const d=h;Hn.lFrame.elementDepthCount--;const v=W();v.firstCreatePass&&(_s(v,h),Zs(h)&&v.queries.elementEnd(h)),null!=d.classesWithoutHost&&function(h){return 0!=(16&h.flags)}(d)&&Mg(v,d,Gt(),d.classesWithoutHost,!0),null!=d.stylesWithoutHost&&function(h){return 0!=(32&h.flags)}(d)&&Mg(v,d,Gt(),d.stylesWithoutHost,!1)}function r_(h,d,v,w){Ag(h,d,v,w),Og()}function xg(h,d,v){const w=Gt(),M=W(),P=h+20,X=M.firstCreatePass?function(h,d,v,w,M){const P=d.consts,X=io(P,w),st=Fh(d,h,8,"ng-container",X);return null!==X&&Hd(st,X,!0),Ed(d,v,st,io(P,M)),null!==d.queries&&d.queries.elementStart(d,st),st}(P,M,w,d,v):M.data[P];Ye(X,!0);const st=w[P]=w[11].createComment("");rn(M,w,st,X),sa(st,w),Yo(X)&&(Pd(M,w,X),Nd(M,X,w)),null!=v&&L(w,X)}function kg(){let h=gt();const d=W();ti()?vi():(h=h.parent,Ye(h,!1)),d.firstCreatePass&&(_s(d,h),Zs(h)&&d.queries.elementEnd(h))}function o_(h,d,v){xg(h,d,v),kg()}function s_(){return Gt()}function Lg(h){return!!h&&"function"==typeof h.then}function a_(h){return!!h&&"function"==typeof h.subscribe}const l_=a_;function Ng(h,d,v,w){const M=Gt(),P=W(),X=gt();return c_(P,M,M[11],X,h,d,!!v,w),Ng}function Pg(h,d){const v=gt(),w=Gt(),M=W();return c_(M,w,Bd(To(M.data),v,w),v,h,d,!1),Pg}function c_(h,d,v,w,M,P,X,st){const bt=Yo(w),le=h.firstCreatePass&&Qp(h),Pe=d[8],oi=Zp(d);let Ti=!0;if(3&w.type||st){const kn=It(w,d),$n=st?st(kn):kn,sn=oi.length,br=st?Io=>st(Ot(Io[w.index])):w.index;if(Nr(v)){let Io=null;if(!st&&bt&&(Io=function(h,d,v,w){const M=h.cleanup;if(null!=M)for(let P=0;P<M.length-1;P+=2){const X=M[P];if(X===v&&M[P+1]===w){const st=d[7],bt=M[P+2];return st.length>bt?st[bt]:null}"string"==typeof X&&(P+=2)}return null}(h,d,M,w.index)),null!==Io)(Io.__ngLastListenerFn__||Io).__ngNextListenerFn__=P,Io.__ngLastListenerFn__=P,Ti=!1;else{P=Fg(w,d,Pe,P,!1);const ps=v.listen($n,M,P);oi.push(P,ps),le&&le.push(M,br,sn,sn+1)}}else P=Fg(w,d,Pe,P,!0),$n.addEventListener(M,P,X),oi.push(P),le&&le.push(M,br,sn,X)}else P=Fg(w,d,Pe,P,!1);const $i=w.outputs;let vn;if(Ti&&null!==$i&&(vn=$i[M])){const kn=vn.length;if(kn)for(let $n=0;$n<kn;$n+=2){const Eu=d[vn[$n]][vn[$n+1]].subscribe(P),Dd=oi.length;oi.push(P,Eu),le&&le.push(M,w.index,Dd,-(Dd+1))}}}function u_(h,d,v,w){try{return!1!==v(w)}catch(M){return qp(h,M),!1}}function Fg(h,d,v,w,M){return function P(X){if(X===Function)return w;const st=2&h.flags?jn(h.index,d):d;0==(32&d[2])&&up(st);let bt=u_(d,0,w,X),Xt=P.__ngNextListenerFn__;for(;Xt;)bt=u_(d,0,Xt,X)&&bt,Xt=Xt.__ngNextListenerFn__;return M&&!1===bt&&(X.preventDefault(),X.returnValue=!1),bt}}function h_(h=1){return function(h){return(Hn.lFrame.contextLView=function(h,d){for(;h>0;)d=d[15],h--;return d}(h,Hn.lFrame.contextLView))[8]}(h)}function vy(h,d){let v=null;const w=function(h){const d=h.attrs;if(null!=d){const v=d.indexOf(5);if(0==(1&v))return d[v+1]}return null}(h);for(let M=0;M<d.length;M++){const P=d[M];if("*"!==P){if(null===w?Id(h,P,!0):Yh(w,P))return M}else v=M}return v}function d_(h){const d=Gt()[16][6];if(!d.projection){const w=d.projection=Ll(h?h.length:1,null),M=w.slice();let P=d.child;for(;null!==P;){const X=h?vy(P,h):0;null!==X&&(M[X]?M[X].projectionNext=P:w[X]=P,M[X]=P),P=P.next}}}function p_(h,d=0,v){const w=Gt(),M=W(),P=Fh(M,20+h,16,null,v||null);null===P.projection&&(P.projection=d),vi(),64!=(64&P.flags)&&function(h,d,v){Fo(d[11],0,d,v,et(h,v,d),ai(v.parent||d[6],v,d))}(M,w,P)}function Bg(h,d,v){return Hg(h,"",d,"",v),Bg}function Hg(h,d,v,w,M){const P=Gt(),X=_n(P,d,v,w);return X!==Rr&&yr(W(),Mr(),P,h,X,P[11],M,!1),Hg}function T_(h,d,v,w,M){const P=h[v+1],X=null===d;let st=w?Lc(P):mu(P),bt=!1;for(;0!==st&&(!1===bt||X);){const le=h[st+1];Ey(h[st],d)&&(bt=!0,h[st+1]=w?Jh(le):ad(le)),st=w?Lc(le):mu(le)}bt&&(h[v+1]=w?ad(P):Jh(P))}function Ey(h,d){return null===h||null==d||(Array.isArray(h)?h[1]:h)===d||!(!Array.isArray(h)||"string"!=typeof d)&&rc(h,d)>=0}const Ml={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function C_(h){return h.substring(Ml.key,Ml.keyEnd)}function S_(h,d){const v=Ml.textEnd;return v===d?-1:(d=Ml.keyEnd=function(h,d,v){for(;d<v&&h.charCodeAt(d)>32;)d++;return d}(h,Ml.key=d,v),zd(h,d,v))}function zd(h,d,v){for(;d<v&&h.charCodeAt(d)<=32;)d++;return d}function Ug(h,d,v){return nh(h,d,v,!1),Ug}function Vg(h,d){return nh(h,d,null,!0),Vg}function yh(h,d){for(let v=function(h){return function(h){Ml.key=0,Ml.keyEnd=0,Ml.value=0,Ml.valueEnd=0,Ml.textEnd=h.length}(h),S_(h,zd(h,0,Ml.textEnd))}(d);v>=0;v=S_(d,v))bs(h,C_(d),!0)}function nh(h,d,v,w){const M=Gt(),P=W(),X=wr(2);P.firstUpdatePass&&A_(P,h,X,w),d!==Rr&&We(M,X,d)&&x_(P,P.data[Er()],M,M[11],h,M[X+1]=function(h,d){return null==h||("string"==typeof d?h+=d:"object"==typeof h&&(h=u(ie(h)))),h}(d,v),w,X)}function M_(h,d){return d>=h.expandoStartIndex}function A_(h,d,v,w){const M=h.data;if(null===M[v+1]){const P=M[Er()],X=M_(h,v);L_(P,w)&&null===d&&!X&&(d=!1),d=function(h,d,v,w){const M=To(h);let P=w?d.residualClasses:d.residualStyles;if(null===M)0===(w?d.classBindings:d.styleBindings)&&(v=yp(v=Gg(null,h,d,v,w),d.attrs,w),P=null);else{const X=d.directiveStylingLast;if(-1===X||h[X]!==M)if(v=Gg(M,h,d,v,w),null===P){let bt=function(h,d,v){const w=v?d.classBindings:d.styleBindings;if(0!==mu(w))return h[Lc(w)]}(h,d,w);void 0!==bt&&Array.isArray(bt)&&(bt=Gg(null,h,d,bt[1],w),bt=yp(bt,d.attrs,w),function(h,d,v,w){h[Lc(v?d.classBindings:d.styleBindings)]=w}(h,d,w,bt))}else P=function(h,d,v){let w;const M=d.directiveEnd;for(let P=1+d.directiveStylingLast;P<M;P++)w=yp(w,h[P].hostAttrs,v);return yp(w,d.attrs,v)}(h,d,w)}return void 0!==P&&(w?d.residualClasses=P:d.residualStyles=P),v}(M,P,d,w),function(h,d,v,w,M,P){let X=P?d.classBindings:d.styleBindings,st=Lc(X),bt=mu(X);h[w]=v;let le,Xt=!1;if(Array.isArray(v)){const Pe=v;le=Pe[1],(null===le||rc(Pe,le)>0)&&(Xt=!0)}else le=v;if(M)if(0!==bt){const oi=Lc(h[st+1]);h[w+1]=Kh(oi,st),0!==oi&&(h[oi+1]=ld(h[oi+1],w)),h[st+1]=function(h,d){return 131071&h|d<<17}(h[st+1],w)}else h[w+1]=Kh(st,0),0!==st&&(h[st+1]=ld(h[st+1],w)),st=w;else h[w+1]=Kh(bt,0),0===st?st=w:h[bt+1]=ld(h[bt+1],w),bt=w;Xt&&(h[w+1]=ad(h[w+1])),T_(h,le,w,!0),T_(h,le,w,!1),function(h,d,v,w,M){const P=M?h.residualClasses:h.residualStyles;null!=P&&"string"==typeof d&&rc(P,d)>=0&&(v[w+1]=Jh(v[w+1]))}(d,le,h,w,P),X=Kh(st,bt),P?d.classBindings=X:d.styleBindings=X}(M,P,d,v,X,w)}}function Gg(h,d,v,w,M){let P=null;const X=v.directiveEnd;let st=v.directiveStylingLast;for(-1===st?st=v.directiveStart:st++;st<X&&(P=d[st],w=yp(w,P.hostAttrs,M),P!==h);)st++;return null!==h&&(v.directiveStylingLast=st),w}function yp(h,d,v){const w=v?1:2;let M=-1;if(null!==d)for(let P=0;P<d.length;P++){const X=d[P];"number"==typeof X?M=X:M===w&&(Array.isArray(h)||(h=void 0===h?[]:["",h]),bs(h,X,!!v||d[++P]))}return void 0===h?null:h}function x_(h,d,v,w,M,P,X,st){if(!(3&d.type))return;const bt=h.data,Xt=bt[st+1];Ef(function(h){return 1==(1&h)}(Xt)?k_(bt,d,v,M,mu(Xt),X):void 0)||(Ef(P)||function(h){return 2==(2&h)}(Xt)&&(P=k_(bt,null,v,M,st,X)),function(h,d,v,w,M){const P=Nr(h);if(d)M?P?h.addClass(v,w):v.classList.add(w):P?h.removeClass(v,w):v.classList.remove(w);else{let X=-1===w.indexOf("-")?void 0:Tt.DashCase;if(null==M)P?h.removeStyle(v,w,X):v.style.removeProperty(w);else{const st="string"==typeof M&&M.endsWith("!important");st&&(M=M.slice(0,-10),X|=Tt.Important),P?h.setStyle(v,w,M,X):v.style.setProperty(w,M,st?"important":"")}}}(w,X,z(Er(),v),M,P))}function k_(h,d,v,w,M,P){const X=null===d;let st;for(;M>0;){const bt=h[M],Xt=Array.isArray(bt),le=Xt?bt[1]:bt,Pe=null===le;let oi=v[M+1];oi===Rr&&(oi=Pe?Ii:void 0);let Ti=Pe?tl(oi,w):le===w?oi:void 0;if(Xt&&!Ef(Ti)&&(Ti=tl(bt,w)),Ef(Ti)&&(st=Ti,X))return st;const $i=h[M+1];M=X?Lc($i):mu($i)}if(null!==d){let bt=P?d.residualClasses:d.residualStyles;null!=bt&&(st=tl(bt,w))}return st}function Ef(h){return void 0!==h}function L_(h,d){return 0!=(h.flags&(d?16:32))}function N_(h,d=""){const v=Gt(),w=W(),M=h+20,P=w.firstCreatePass?Fh(w,M,1,d,null):w.data[M],X=v[M]=function(h,d){return Nr(h)?h.createText(d):h.createTextNode(d)}(v[11],d);rn(w,v,X,P),Ye(P,!1)}function Wg(h){return Tf("",h,""),Wg}function Tf(h,d,v){const w=Gt(),M=_n(w,h,d,v);return M!==Rr&&eh(w,Er(),M),Tf}function zg(h,d,v,w,M){const P=Gt(),X=function(h,d,v,w,M,P){const st=Si(h,Ln(),v,M);return wr(2),st?d+xt(v)+w+xt(M)+P:Rr}(P,h,d,v,w,M);return X!==Rr&&eh(P,Er(),X),zg}function jg(h,d,v,w,M,P,X){const st=Gt(),bt=Pn(st,h,d,v,w,M,P,X);return bt!==Rr&&eh(st,Er(),bt),jg}function G_(h,d,v){!function(h,d,v,w){const M=W(),P=wr(2);M.firstUpdatePass&&A_(M,null,P,w);const X=Gt();if(v!==Rr&&We(X,P,v)){const st=M.data[Er()];if(L_(st,w)&&!M_(M,P)){let bt=w?st.classesWithoutHost:st.stylesWithoutHost;null!==bt&&(v=y(bt,v||"")),Mg(M,st,X,v,w)}else!function(h,d,v,w,M,P,X,st){M===Rr&&(M=Ii);let bt=0,Xt=0,le=0<M.length?M[0]:null,Pe=0<P.length?P[0]:null;for(;null!==le||null!==Pe;){const oi=bt<M.length?M[bt+1]:void 0,Ti=Xt<P.length?P[Xt+1]:void 0;let vn,$i=null;le===Pe?(bt+=2,Xt+=2,oi!==Ti&&($i=Pe,vn=Ti)):null===Pe||null!==le&&le<Pe?(bt+=2,$i=le):(Xt+=2,$i=Pe,vn=Ti),null!==$i&&x_(h,d,v,w,$i,vn,X,st),le=bt<M.length?M[bt]:null,Pe=Xt<P.length?P[Xt]:null}}(M,st,X,X[11],X[P+1],X[P+1]=function(h,d,v){if(null==v||""===v)return Ii;const w=[],M=ie(v);if(Array.isArray(M))for(let P=0;P<M.length;P++)h(w,M[P],!0);else if("object"==typeof M)for(const P in M)M.hasOwnProperty(P)&&h(w,P,M[P]);else"string"==typeof M&&d(w,M);return w}(h,d,v),w,P)}}(bs,yh,_n(Gt(),h,d,v),!0)}function Yg(h,d,v){const w=Gt();return We(w,rr(),d)&&yr(W(),Mr(),w,h,d,w[11],v,!0),Yg}function Xg(h,d,v){const w=Gt();if(We(w,rr(),d)){const P=W(),X=Mr();yr(P,X,w,h,d,Bd(To(P.data),X,w),v,!0)}return Xg}const wd=void 0;var eE=["en",[["a","p"],["AM","PM"],wd],[["AM","PM"],wd,wd],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],wd,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],wd,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",wd,"{1} 'at' {0}",wd],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(h){const v=Math.floor(Math.abs(h)),w=h.toString().replace(/^[^.]*\.?/,"").length;return 1===v&&0===w?1:5}];let jd={};function Kg(h){const d=function(h){return h.toLowerCase().replace(/_/g,"-")}(h);let v=q_(d);if(v)return v;const w=d.split("-")[0];if(v=q_(w),v)return v;if("en"===w)return eE;throw new Error(`Missing locale data for the locale "${h}".`)}function Q_(h){return Kg(h)[Sr.PluralCase]}function q_(h){return h in jd||(jd[h]=Ce.ng&&Ce.ng.common&&Ce.ng.common.locales&&Ce.ng.common.locales[h]),jd[h]}var Sr=(()=>((Sr=Sr||{})[Sr.LocaleId=0]="LocaleId",Sr[Sr.DayPeriodsFormat=1]="DayPeriodsFormat",Sr[Sr.DayPeriodsStandalone=2]="DayPeriodsStandalone",Sr[Sr.DaysFormat=3]="DaysFormat",Sr[Sr.DaysStandalone=4]="DaysStandalone",Sr[Sr.MonthsFormat=5]="MonthsFormat",Sr[Sr.MonthsStandalone=6]="MonthsStandalone",Sr[Sr.Eras=7]="Eras",Sr[Sr.FirstDayOfWeek=8]="FirstDayOfWeek",Sr[Sr.WeekendRange=9]="WeekendRange",Sr[Sr.DateFormat=10]="DateFormat",Sr[Sr.TimeFormat=11]="TimeFormat",Sr[Sr.DateTimeFormat=12]="DateTimeFormat",Sr[Sr.NumberSymbols=13]="NumberSymbols",Sr[Sr.NumberFormats=14]="NumberFormats",Sr[Sr.CurrencyCode=15]="CurrencyCode",Sr[Sr.CurrencySymbol=16]="CurrencySymbol",Sr[Sr.CurrencyName=17]="CurrencyName",Sr[Sr.Currencies=18]="Currencies",Sr[Sr.Directionality=19]="Directionality",Sr[Sr.PluralCase=20]="PluralCase",Sr[Sr.ExtraData=21]="ExtraData",Sr))();const Cf="en-US";let tv=Cf;function Zg(h,d,v,w,M){if(h=Q(h),Array.isArray(h))for(let P=0;P<h.length;P++)Zg(h[P],d,v,w,M);else{const P=W(),X=Gt();let st=rd(h)?h:Q(h.provide),bt=af(h);const Xt=gt(),le=1048575&Xt.providerIndexes,Pe=Xt.directiveStart,oi=Xt.providerIndexes>>20;if(rd(h)||!h.multi){const Ti=new is(bt,M,bp),$i=qg(st,d,M?le:le+oi,Pe);-1===$i?(Ve(q(Xt,X),P,st),Qg(P,h,d.length),d.push(st),Xt.directiveStart++,Xt.directiveEnd++,M&&(Xt.providerIndexes+=1048576),v.push(Ti),X.push(Ti)):(v[$i]=Ti,X[$i]=Ti)}else{const Ti=qg(st,d,le+oi,Pe),$i=qg(st,d,le,le+oi),vn=Ti>=0&&v[Ti],kn=$i>=0&&v[$i];if(M&&!kn||!M&&!vn){Ve(q(Xt,X),P,st);const $n=function(h,d,v,w,M){const P=new is(h,v,bp);return P.multi=[],P.index=d,P.componentProviders=0,Sv(P,M,w&&!v),P}(M?qE:QE,v.length,M,w,bt);!M&&kn&&(v[$i].providerFactory=$n),Qg(P,h,d.length,0),d.push(st),Xt.directiveStart++,Xt.directiveEnd++,M&&(Xt.providerIndexes+=1048576),v.push($n),X.push($n)}else Qg(P,h,Ti>-1?Ti:$i,Sv(v[M?$i:Ti],bt,!M&&w));!M&&w&&kn&&v[$i].componentProviders++}}}function Qg(h,d,v,w){const M=rd(d),P=function(h){return!!h.useClass}(d);if(M||P){const bt=(P?Q(d.useClass):d).prototype.ngOnDestroy;if(bt){const Xt=h.destroyHooks||(h.destroyHooks=[]);if(!M&&d.multi){const le=Xt.indexOf(v);-1===le?Xt.push(v,[w,bt]):Xt[le+1].push(w,bt)}else Xt.push(v,bt)}}}function Sv(h,d,v){return v&&h.componentProviders++,h.multi.push(d)-1}function qg(h,d,v,w){for(let M=v;M<w;M++)if(d[M]===h)return M;return-1}function QE(h,d,v,w){return tm(this.multi,[])}function qE(h,d,v,w){const M=this.multi;let P;if(this.providerFactory){const X=this.providerFactory.componentProviders,st=Ys(v,v[1],this.providerFactory.index,w);P=st.slice(0,X),tm(M,P);for(let bt=X;bt<st.length;bt++)P.push(st[bt])}else P=[],tm(M,P);return P}function tm(h,d){for(let v=0;v<h.length;v++)d.push((0,h[v])());return d}function wv(h,d=[]){return v=>{v.providersResolver=(w,M)=>function(h,d,v){const w=W();if(w.firstCreatePass){const M=Jr(h);Zg(v,w.data,w.blueprint,M,!0),Zg(d,w.data,w.blueprint,M,!1)}}(w,M?M(h):h,d)}}class Rv{}class nT{resolveComponentFactory(d){throw function(h){const d=Error(`No component factory found for ${u(h)}. Did you add it to @NgModule.entryComponents?`);return d.ngComponent=h,d}(d)}}let wp=(()=>{class h{}return h.NULL=new nT,h})();function rT(){return Xd(gt(),Gt())}function Xd(h,d){return new Rp(It(h,d))}let Rp=(()=>{class h{constructor(v){this.nativeElement=v}}return h.__NG_ELEMENT_ID__=rT,h})();function oT(h){return h instanceof Rp?h.nativeElement:h}class Iv{}let sT=(()=>{class h{}return h.__NG_ELEMENT_ID__=()=>function(){const h=Gt(),v=jn(gt().index,h);return function(h){return h[11]}(ro(v)?v:h)}(),h})(),cT=(()=>{class h{}return h.\u0275prov=Le({token:h,providedIn:"root",factory:()=>null}),h})();class Mv{constructor(d){this.full=d,this.major=d.split(".")[0],this.minor=d.split(".")[1],this.patch=d.split(".").slice(2).join(".")}}const uT=new Mv("13.1.1"),em={};function If(h,d,v,w,M=!1){for(;null!==v;){const P=d[v.index];if(null!==P&&w.push(Ot(P)),_o(P))for(let st=10;st<P.length;st++){const bt=P[st],Xt=bt[1].firstChild;null!==Xt&&If(bt[1],bt,Xt,w)}const X=v.type;if(8&X)If(h,d,v.child,w);else if(32&X){const st=Kt(v,d);let bt;for(;bt=st();)w.push(bt)}else if(16&X){const st=on(d,v);if(Array.isArray(st))w.push(...st);else{const bt=fi(d[16]);If(bt[1],bt,st,w,!0)}}v=M?v.projectionNext:v.next}return w}class Dp{constructor(d,v){this._lView=d,this._cdRefInjectingView=v,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const d=this._lView,v=d[1];return If(v,d,v.firstChild,[])}get context(){return this._lView[8]}set context(d){this._lView[8]=d}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const d=this._lView[3];if(_o(d)){const v=d[8],w=v?v.indexOf(this):-1;w>-1&&(ks(d,w),Ga(v,w))}this._attachedToViewContainer=!1}as(this._lView[1],this._lView)}onDestroy(d){Mi(this._lView[1],this._lView,null,d)}markForCheck(){up(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){dp(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(h,d,v){Zn(!0);try{dp(h,d,v)}finally{Zn(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var d;this._appRef=null,go(this._lView[1],d=this._lView,d[11],2,null,null)}attachToAppRef(d){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=d}}class hT extends Dp{constructor(d){super(d),this._view=d}detectChanges(){Jp(this._view)}checkNoChanges(){!function(h){Zn(!0);try{Jp(h)}finally{Zn(!1)}}(this._view)}get context(){return null}}class Av extends wp{constructor(d){super(),this.ngModule=d}resolveComponentFactory(d){const v=ki(d);return new im(v,this.ngModule)}}function Ov(h){const d=[];for(let v in h)h.hasOwnProperty(v)&&d.push({propName:h[v],templateName:v});return d}const pT=new Vo("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>mh});class im extends Rv{constructor(d,v){super(),this.componentDef=d,this.ngModule=v,this.componentType=d.type,this.selector=d.selectors.map(Xh).join(","),this.ngContentSelectors=d.ngContentSelectors?d.ngContentSelectors:[],this.isBoundToModule=!!v}get inputs(){return Ov(this.componentDef.inputs)}get outputs(){return Ov(this.componentDef.outputs)}create(d,v,w,M){const P=(M=M||this.ngModule)?function(h,d){return{get:(v,w,M)=>{const P=h.get(v,em,M);return P!==em||w===em?P:d.get(v,w,M)}}}(d,M.injector):d,X=P.get(Iv,xn),st=P.get(cT,null),bt=X.createRenderer(null,this.componentDef),Xt=this.componentDef.selectors[0][0]||"div",le=w?function(h,d,v){if(Nr(h))return h.selectRootElement(d,v===wi.ShadowDom);let w="string"==typeof d?h.querySelector(d):d;return w.textContent="",w}(bt,w,this.componentDef.encapsulation):mr(X.createRenderer(null,this.componentDef),Xt,function(h){const d=h.toLowerCase();return"svg"===d?la:"math"===d?"http://www.w3.org/1998/MathML/":null}(Xt)),Pe=this.componentDef.onPush?576:528,oi=function(h,d){return{components:[],scheduler:h||mh,clean:$p,playerHandler:d||null,flags:0}}(),Ti=b(0,null,null,1,0,null,null,null,null,null),$i=Ph(null,Ti,oi,Pe,null,null,X,bt,st,P);let vn,kn;Da($i);try{const $n=function(h,d,v,w,M,P){const X=v[1];v[20]=h;const bt=Fh(X,20,2,"#host",null),Xt=bt.mergedAttrs=d.hostAttrs;null!==Xt&&(Hd(bt,Xt,!0),null!==h&&(Qa(M,h,Xt),null!==bt.classes&&Fr(M,h,bt.classes),null!==bt.styles&&se(M,h,bt.styles)));const le=w.createRenderer(h,d),Pe=Ph(v,G(d),null,d.onPush?64:16,v[20],bt,w,le,P||null,null);return X.firstCreatePass&&(Ve(q(bt,v),X,d.type),Yp(X,bt),Vh(bt,v.length,1)),Fd(v,Pe),v[20]=Pe}(le,this.componentDef,$i,X,bt);if(le)if(w)Qa(bt,le,["ng-version",uT.full]);else{const{attrs:sn,classes:br}=function(h){const d=[],v=[];let w=1,M=2;for(;w<h.length;){let P=h[w];if("string"==typeof P)2===M?""!==P&&d.push(P,h[++w]):8===M&&v.push(P);else{if(!Il(M))break;M=P}w++}return{attrs:d,classes:v}}(this.componentDef.selectors[0]);sn&&Qa(bt,le,sn),br&&br.length>0&&Fr(bt,le,br.join(" "))}if(kn=bi(Ti,20),void 0!==v){const sn=kn.projection=[];for(let br=0;br<this.ngContentSelectors.length;br++){const Io=v[br];sn.push(null!=Io?Array.from(Io):null)}}vn=function(h,d,v,w,M){const P=v[1],X=function(h,d,v){const w=gt();h.firstCreatePass&&(v.providersResolver&&v.providersResolver(v),Xp(h,w,d,Bh(h,d,1,null),v));const M=Ys(d,h,w.directiveStart,w);sa(M,d);const P=It(w,d);return P&&sa(P,d),M}(P,v,d);if(w.components.push(X),h[8]=X,M&&M.forEach(bt=>bt(X,d)),d.contentQueries){const bt=gt();d.contentQueries(1,X,bt.directiveStart)}const st=gt();return!P.firstCreatePass||null===d.hostBindings&&null===d.hostAttrs||(es(st.index),Wp(v[1],st,0,st.directiveStart,st.directiveEnd,d),zp(d,X)),X}($n,this.componentDef,$i,oi,[Tg]),td(Ti,$i,null)}finally{On()}return new mT(this.componentType,vn,Xd(kn,$i),$i,kn)}}class mT extends class{}{constructor(d,v,w,M,P){super(),this.location=w,this._rootLView=M,this._tNode=P,this.instance=v,this.hostView=this.changeDetectorRef=new hT(M),this.componentType=d}get injector(){return new Xs(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(d){this.hostView.onDestroy(d)}}class Kd{}class xv{}const Jd=new Map;class Nv extends Kd{constructor(d,v){super(),this._parent=v,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new Av(this);const w=ar(d);this._bootstrapComponents=I(w.bootstrap),this._r3Injector=sf(d,v,[{provide:Kd,useValue:this},{provide:wp,useValue:this.componentFactoryResolver}],u(d)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(d)}get(d,v=qc.THROW_IF_NOT_FOUND,w=ee.Default){return d===qc||d===Kd||d===fp?this:this._r3Injector.get(d,v,w)}destroy(){const d=this._r3Injector;!d.destroyed&&d.destroy(),this.destroyCbs.forEach(v=>v()),this.destroyCbs=null}onDestroy(d){this.destroyCbs.push(d)}}class nm extends xv{constructor(d){super(),this.moduleType=d,null!==ar(d)&&function(h){const d=new Set;!function v(w){const M=ar(w,!0),P=M.id;null!==P&&(function(h,d,v){if(d&&d!==v)throw new Error(`Duplicate module registered for ${h} - ${u(d)} vs ${u(d.name)}`)}(P,Jd.get(P),w),Jd.set(P,w));const X=I(M.imports);for(const st of X)d.has(st)||(d.add(st),v(st))}(h)}(d)}create(d){return new Nv(this.moduleType,d)}}function Pv(h,d,v){const w=Qn()+h,M=Gt();return M[w]===Rr?De(M,w,v?d.call(v):d()):function(h,d){return h[d]}(M,w)}function Fv(h,d,v,w){return Hv(Gt(),Qn(),h,d,v,w)}function Bv(h,d,v,w,M){return function(h,d,v,w,M,P,X){const st=d+v;return Si(h,st,M,P)?De(h,st+2,X?w.call(X,M,P):w(M,P)):Ip(h,st+2)}(Gt(),Qn(),h,d,v,w,M)}function Ip(h,d){const v=h[d];return v===Rr?void 0:v}function Hv(h,d,v,w,M,P){const X=d+v;return We(h,X,M)?De(h,X+1,P?w.call(P,M):w(M)):Ip(h,X+1)}function zv(h,d){const v=W();let w;const M=h+20;v.firstCreatePass?(w=function(h,d){if(d)for(let v=d.length-1;v>=0;v--){const w=d[v];if(h===w.name)return w}}(d,v.pipeRegistry),v.data[M]=w,w.onDestroy&&(v.destroyHooks||(v.destroyHooks=[])).push(M,w.onDestroy)):w=v.data[M];const P=w.factory||(w.factory=Hs(w.type)),X=me(bp);try{const st=Ql(!1),bt=P();return Ql(st),function(h,d,v,w){v>=h.data.length&&(h.data[v]=null,h.blueprint[v]=null),d[v]=w}(v,Gt(),M,bt),bt}finally{me(X)}}function jv(h,d,v){const w=h+20,M=Gt(),P=cn(M,w);return function(h,d){return h[1].data[d].pure}(M,w)?Hv(M,Qn(),d,P.transform,v,P):P.transform(v)}function rm(h){return d=>{setTimeout(h,void 0,d)}}const Eh=class extends C.x{constructor(d=!1){super(),this.__isAsync=d}emit(d){super.next(d)}subscribe(d,v,w){var M,P,X;let st=d,bt=v||(()=>null),Xt=w;if(d&&"object"==typeof d){const Pe=d;st=null===(M=Pe.next)||void 0===M?void 0:M.bind(Pe),bt=null===(P=Pe.error)||void 0===P?void 0:P.bind(Pe),Xt=null===(X=Pe.complete)||void 0===X?void 0:X.bind(Pe)}this.__isAsync&&(bt=rm(bt),st&&(st=rm(st)),Xt&&(Xt=rm(Xt)));const le=super.subscribe({next:st,error:bt,complete:Xt});return d instanceof _.w0&&d.add(le),le}};function xT(){return this._results[F()]()}class Mf{constructor(d=!1){this._emitDistinctChangesOnly=d,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const v=F(),w=Mf.prototype;w[v]||(w[v]=xT)}get changes(){return this._changes||(this._changes=new Eh)}get(d){return this._results[d]}map(d){return this._results.map(d)}filter(d){return this._results.filter(d)}find(d){return this._results.find(d)}reduce(d,v){return this._results.reduce(d,v)}forEach(d){this._results.forEach(d)}some(d){return this._results.some(d)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(d,v){const w=this;w.dirty=!1;const M=ha(d);(this._changesDetected=!function(h,d,v){if(h.length!==d.length)return!1;for(let w=0;w<h.length;w++){let M=h[w],P=d[w];if(v&&(M=v(M),P=v(P)),P!==M)return!1}return!0}(w._results,M,v))&&(w._results=M,w.length=M.length,w.last=M[this.length-1],w.first=M[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let Ap=(()=>{class h{}return h.__NG_ELEMENT_ID__=NT,h})();const kT=Ap,LT=class extends kT{constructor(d,v,w){super(),this._declarationLView=d,this._declarationTContainer=v,this.elementRef=w}createEmbeddedView(d){const v=this._declarationTContainer.tViews,w=Ph(this._declarationLView,v,d,16,null,v.declTNode,null,null,null,null);w[17]=this._declarationLView[this._declarationTContainer.index];const P=this._declarationLView[19];return null!==P&&(w[19]=P.createEmbeddedView(v)),td(v,w,d),new Dp(w)}};function NT(){return Af(gt(),Gt())}function Af(h,d){return 4&h.type?new LT(d,h,Xd(h,d)):null}let Of=(()=>{class h{}return h.__NG_ELEMENT_ID__=PT,h})();function PT(){return Kv(gt(),Gt())}const FT=Of,Yv=class extends FT{constructor(d,v,w){super(),this._lContainer=d,this._hostTNode=v,this._hostLView=w}get element(){return Xd(this._hostTNode,this._hostLView)}get injector(){return new Xs(this._hostTNode,this._hostLView)}get parentInjector(){const d=ge(this._hostTNode,this._hostLView);if(js(d)){const v=Oa(d,this._hostLView),w=Aa(d);return new Xs(v[1].data[w+8],v)}return new Xs(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(d){const v=Xv(this._lContainer);return null!==v&&v[d]||null}get length(){return this._lContainer.length-10}createEmbeddedView(d,v,w){const M=d.createEmbeddedView(v||{});return this.insert(M,w),M}createComponent(d,v,w,M,P){const X=d&&!("function"==typeof d);let st;if(X)st=v;else{const Pe=v||{};st=Pe.index,w=Pe.injector,M=Pe.projectableNodes,P=Pe.ngModuleRef}const bt=X?d:new im(ki(d)),Xt=w||this.parentInjector;if(!P&&null==bt.ngModule&&Xt){const Pe=Xt.get(Kd,null);Pe&&(P=Pe)}const le=bt.create(Xt,M,void 0,P);return this.insert(le.hostView,st),le}insert(d,v){const w=d._lView,M=w[1];if(_o(w[3])){const le=this.indexOf(d);if(-1!==le)this.detach(le);else{const Pe=w[3],oi=new Yv(Pe,Pe[6],Pe[3]);oi.detach(oi.indexOf(d))}}const P=this._adjustIndex(v),X=this._lContainer;!function(h,d,v,w){const M=10+w,P=v.length;w>0&&(v[M-1][4]=d),w<P-10?(d[4]=v[M],xa(v,10+w,d)):(v.push(d),d[4]=null),d[3]=v;const X=d[17];null!==X&&v!==X&&function(h,d){const v=h[9];d[16]!==d[3][3][16]&&(h[2]=!0),null===v?h[9]=[d]:v.push(d)}(X,d);const st=d[19];null!==st&&st.insertView(h),d[2]|=128}(M,w,X,P);const st=Or(P,X),bt=w[11],Xt=Re(bt,X[7]);return null!==Xt&&function(h,d,v,w,M,P){w[0]=M,w[6]=d,go(h,w,v,1,M,P)}(M,X[6],bt,w,Xt,st),d.attachToViewContainerRef(),xa(om(X),P,d),d}move(d,v){return this.insert(d,v)}indexOf(d){const v=Xv(this._lContainer);return null!==v?v.indexOf(d):-1}remove(d){const v=this._adjustIndex(d,-1),w=ks(this._lContainer,v);w&&(Ga(om(this._lContainer),v),as(w[1],w))}detach(d){const v=this._adjustIndex(d,-1),w=ks(this._lContainer,v);return w&&null!=Ga(om(this._lContainer),v)?new Dp(w):null}_adjustIndex(d,v=0){return null==d?this.length+v:d}};function Xv(h){return h[8]}function om(h){return h[8]||(h[8]=[])}function Kv(h,d){let v;const w=d[h.index];if(_o(w))v=w;else{let M;if(8&h.type)M=Ot(w);else{const P=d[11];M=P.createComment("");const X=It(h,d);Yt(P,Re(P,X),M,function(h,d){return Nr(h)?h.nextSibling(d):d.nextSibling}(P,X),!1)}d[h.index]=v=Kp(w,d,M,h),Fd(d,v)}return new Yv(v,h,d)}class sm{constructor(d){this.queryList=d,this.matches=null}clone(){return new sm(this.queryList)}setDirty(){this.queryList.setDirty()}}class am{constructor(d=[]){this.queries=d}createEmbeddedView(d){const v=d.queries;if(null!==v){const w=null!==d.contentQueries?d.contentQueries[0]:v.length,M=[];for(let P=0;P<w;P++){const X=v.getByIndex(P);M.push(this.queries[X.indexInDeclarationView].clone())}return new am(M)}return null}insertView(d){this.dirtyQueriesWithMatches(d)}detachView(d){this.dirtyQueriesWithMatches(d)}dirtyQueriesWithMatches(d){for(let v=0;v<this.queries.length;v++)null!==nb(d,v).matches&&this.queries[v].setDirty()}}class Jv{constructor(d,v,w=null){this.predicate=d,this.flags=v,this.read=w}}class lm{constructor(d=[]){this.queries=d}elementStart(d,v){for(let w=0;w<this.queries.length;w++)this.queries[w].elementStart(d,v)}elementEnd(d){for(let v=0;v<this.queries.length;v++)this.queries[v].elementEnd(d)}embeddedTView(d){let v=null;for(let w=0;w<this.length;w++){const M=null!==v?v.length:0,P=this.getByIndex(w).embeddedTView(d,M);P&&(P.indexInDeclarationView=w,null!==v?v.push(P):v=[P])}return null!==v?new lm(v):null}template(d,v){for(let w=0;w<this.queries.length;w++)this.queries[w].template(d,v)}getByIndex(d){return this.queries[d]}get length(){return this.queries.length}track(d){this.queries.push(d)}}class cm{constructor(d,v=-1){this.metadata=d,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=v}elementStart(d,v){this.isApplyingToNode(v)&&this.matchTNode(d,v)}elementEnd(d){this._declarationNodeIndex===d.index&&(this._appliesToNextNode=!1)}template(d,v){this.elementStart(d,v)}embeddedTView(d,v){return this.isApplyingToNode(d)?(this.crossesNgTemplate=!0,this.addMatch(-d.index,v),new cm(this.metadata)):null}isApplyingToNode(d){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const v=this._declarationNodeIndex;let w=d.parent;for(;null!==w&&8&w.type&&w.index!==v;)w=w.parent;return v===(null!==w?w.index:-1)}return this._appliesToNextNode}matchTNode(d,v){const w=this.metadata.predicate;if(Array.isArray(w))for(let M=0;M<w.length;M++){const P=w[M];this.matchTNodeWithReadOption(d,v,UT(v,P)),this.matchTNodeWithReadOption(d,v,Tl(v,d,P,!1,!1))}else w===Ap?4&v.type&&this.matchTNodeWithReadOption(d,v,-1):this.matchTNodeWithReadOption(d,v,Tl(v,d,w,!1,!1))}matchTNodeWithReadOption(d,v,w){if(null!==w){const M=this.metadata.read;if(null!==M)if(M===Rp||M===Of||M===Ap&&4&v.type)this.addMatch(v.index,-2);else{const P=Tl(v,d,M,!1,!1);null!==P&&this.addMatch(v.index,P)}else this.addMatch(v.index,w)}}addMatch(d,v){null===this.matches?this.matches=[d,v]:this.matches.push(d,v)}}function UT(h,d){const v=h.localNames;if(null!==v)for(let w=0;w<v.length;w+=2)if(v[w]===d)return v[w+1];return null}function GT(h,d,v,w){return-1===v?function(h,d){return 11&h.type?Xd(h,d):4&h.type?Af(h,d):null}(d,h):-2===v?function(h,d,v){return v===Rp?Xd(d,h):v===Ap?Af(d,h):v===Of?Kv(d,h):void 0}(h,d,w):Ys(h,h[1],v,d)}function $v(h,d,v,w){const M=d[19].queries[w];if(null===M.matches){const P=h.data,X=v.matches,st=[];for(let bt=0;bt<X.length;bt+=2){const Xt=X[bt];st.push(Xt<0?null:GT(d,P[Xt],X[bt+1],v.metadata.read))}M.matches=st}return M.matches}function um(h,d,v,w){const M=h.queries.getByIndex(v),P=M.matches;if(null!==P){const X=$v(h,d,M,v);for(let st=0;st<P.length;st+=2){const bt=P[st];if(bt>0)w.push(X[st/2]);else{const Xt=P[st+1],le=d[-bt];for(let Pe=10;Pe<le.length;Pe++){const oi=le[Pe];oi[17]===oi[3]&&um(oi[1],oi,Xt,w)}if(null!==le[9]){const Pe=le[9];for(let oi=0;oi<Pe.length;oi++){const Ti=Pe[oi];um(Ti[1],Ti,Xt,w)}}}}}return w}function Zv(h){const d=Gt(),v=W(),w=Is();rs(w+1);const M=nb(v,w);if(h.dirty&&Cr(d)===(2==(2&M.metadata.flags))){if(null===M.matches)h.reset([]);else{const P=M.crossesNgTemplate?um(v,d,w,[]):$v(v,d,M,w);h.reset(P,oT),h.notifyOnChanges()}return!0}return!1}function Qv(h,d,v){const w=W();w.firstCreatePass&&(ib(w,new Jv(h,d,v),-1),2==(2&d)&&(w.staticViewQueries=!0)),eb(w,Gt(),d)}function qv(h,d,v,w){const M=W();if(M.firstCreatePass){const P=gt();ib(M,new Jv(d,v,w),P.index),function(h,d){const v=h.contentQueries||(h.contentQueries=[]);d!==(v.length?v[v.length-1]:-1)&&v.push(h.queries.length-1,d)}(M,h),2==(2&v)&&(M.staticContentQueries=!0)}eb(M,Gt(),v)}function tb(){return h=Gt(),d=Is(),h[19].queries[d].queryList;var h,d}function eb(h,d,v){const w=new Mf(4==(4&v));Mi(h,d,w,w.destroy),null===d[19]&&(d[19]=new am),d[19].queries.push(new sm(w))}function ib(h,d,v){null===h.queries&&(h.queries=new lm),h.queries.track(new cm(d,v))}function nb(h,d){return h.queries.getByIndex(d)}function rb(h,d){return Af(h,d)}function Lf(...h){}const mm=new Vo("Application Initializer");let Zd=(()=>{class h{constructor(v){this.appInits=v,this.resolve=Lf,this.reject=Lf,this.initialized=!1,this.done=!1,this.donePromise=new Promise((w,M)=>{this.resolve=w,this.reject=M})}runInitializers(){if(this.initialized)return;const v=[],w=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let M=0;M<this.appInits.length;M++){const P=this.appInits[M]();if(Lg(P))v.push(P);else if(l_(P)){const X=new Promise((st,bt)=>{P.subscribe({complete:st,error:bt})});v.push(X)}}Promise.all(v).then(()=>{w()}).catch(M=>{this.reject(M)}),0===v.length&&w(),this.initialized=!0}}return h.\u0275fac=function(v){return new(v||h)(Jo(mm,8))},h.\u0275prov=Le({token:h,factory:h.\u0275fac}),h})();const Eb=new Vo("AppId"),cC={provide:Eb,useFactory:function(){return`${_m()}${_m()}${_m()}`},deps:[]};function _m(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Tb=new Vo("Platform Initializer"),Cb=new Vo("Platform ID"),Sb=new Vo("appBootstrapListener");let wb=(()=>{class h{log(v){console.log(v)}warn(v){console.warn(v)}}return h.\u0275fac=function(v){return new(v||h)},h.\u0275prov=Le({token:h,factory:h.\u0275fac}),h})();const Nf=new Vo("LocaleId"),Rb=new Vo("DefaultCurrencyCode");class uC{constructor(d,v){this.ngModuleFactory=d,this.componentFactories=v}}let vm=(()=>{class h{compileModuleSync(v){return new nm(v)}compileModuleAsync(v){return Promise.resolve(this.compileModuleSync(v))}compileModuleAndAllComponentsSync(v){const w=this.compileModuleSync(v),P=I(ar(v).declarations).reduce((X,st)=>{const bt=ki(st);return bt&&X.push(new im(bt)),X},[]);return new uC(w,P)}compileModuleAndAllComponentsAsync(v){return Promise.resolve(this.compileModuleAndAllComponentsSync(v))}clearCache(){}clearCacheFor(v){}getModuleId(v){}}return h.\u0275fac=function(v){return new(v||h)},h.\u0275prov=Le({token:h,factory:h.\u0275fac}),h})();const dC=(()=>Promise.resolve(0))();function bm(h){"undefined"==typeof Zone?dC.then(()=>{h&&h.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",h)}class yu{constructor({enableLongStackTrace:d=!1,shouldCoalesceEventChangeDetection:v=!1,shouldCoalesceRunChangeDetection:w=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Eh(!1),this.onMicrotaskEmpty=new Eh(!1),this.onStable=new Eh(!1),this.onError=new Eh(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const M=this;M._nesting=0,M._outer=M._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(M._inner=M._inner.fork(new Zone.TaskTrackingZoneSpec)),d&&Zone.longStackTraceZoneSpec&&(M._inner=M._inner.fork(Zone.longStackTraceZoneSpec)),M.shouldCoalesceEventChangeDetection=!w&&v,M.shouldCoalesceRunChangeDetection=w,M.lastRequestAnimationFrameId=-1,M.nativeRequestAnimationFrame=function(){let h=Ce.requestAnimationFrame,d=Ce.cancelAnimationFrame;if("undefined"!=typeof Zone&&h&&d){const v=h[Zone.__symbol__("OriginalDelegate")];v&&(h=v);const w=d[Zone.__symbol__("OriginalDelegate")];w&&(d=w)}return{nativeRequestAnimationFrame:h,nativeCancelAnimationFrame:d}}().nativeRequestAnimationFrame,function(h){const d=()=>{!function(h){h.isCheckStableRunning||-1!==h.lastRequestAnimationFrameId||(h.lastRequestAnimationFrameId=h.nativeRequestAnimationFrame.call(Ce,()=>{h.fakeTopEventTask||(h.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{h.lastRequestAnimationFrameId=-1,Em(h),h.isCheckStableRunning=!0,ym(h),h.isCheckStableRunning=!1},void 0,()=>{},()=>{})),h.fakeTopEventTask.invoke()}),Em(h))}(h)};h._inner=h._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(v,w,M,P,X,st)=>{try{return Db(h),v.invokeTask(M,P,X,st)}finally{(h.shouldCoalesceEventChangeDetection&&"eventTask"===P.type||h.shouldCoalesceRunChangeDetection)&&d(),Ib(h)}},onInvoke:(v,w,M,P,X,st,bt)=>{try{return Db(h),v.invoke(M,P,X,st,bt)}finally{h.shouldCoalesceRunChangeDetection&&d(),Ib(h)}},onHasTask:(v,w,M,P)=>{v.hasTask(M,P),w===M&&("microTask"==P.change?(h._hasPendingMicrotasks=P.microTask,Em(h),ym(h)):"macroTask"==P.change&&(h.hasPendingMacrotasks=P.macroTask))},onHandleError:(v,w,M,P)=>(v.handleError(M,P),h.runOutsideAngular(()=>h.onError.emit(P)),!1)})}(M)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!yu.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(yu.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(d,v,w){return this._inner.run(d,v,w)}runTask(d,v,w,M){const P=this._inner,X=P.scheduleEventTask("NgZoneEvent: "+M,d,fC,Lf,Lf);try{return P.runTask(X,v,w)}finally{P.cancelTask(X)}}runGuarded(d,v,w){return this._inner.runGuarded(d,v,w)}runOutsideAngular(d){return this._outer.run(d)}}const fC={};function ym(h){if(0==h._nesting&&!h.hasPendingMicrotasks&&!h.isStable)try{h._nesting++,h.onMicrotaskEmpty.emit(null)}finally{if(h._nesting--,!h.hasPendingMicrotasks)try{h.runOutsideAngular(()=>h.onStable.emit(null))}finally{h.isStable=!0}}}function Em(h){h.hasPendingMicrotasks=!!(h._hasPendingMicrotasks||(h.shouldCoalesceEventChangeDetection||h.shouldCoalesceRunChangeDetection)&&-1!==h.lastRequestAnimationFrameId)}function Db(h){h._nesting++,h.isStable&&(h.isStable=!1,h.onUnstable.emit(null))}function Ib(h){h._nesting--,ym(h)}class _C{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Eh,this.onMicrotaskEmpty=new Eh,this.onStable=new Eh,this.onError=new Eh}run(d,v,w){return d.apply(v,w)}runGuarded(d,v,w){return d.apply(v,w)}runOutsideAngular(d){return d()}runTask(d,v,w,M){return d.apply(v,w)}}let Mb=(()=>{class h{constructor(v){this._ngZone=v,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),v.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{yu.assertNotInAngularZone(),bm(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())bm(()=>{for(;0!==this._callbacks.length;){let v=this._callbacks.pop();clearTimeout(v.timeoutId),v.doneCb(this._didWork)}this._didWork=!1});else{let v=this.getPendingTasks();this._callbacks=this._callbacks.filter(w=>!w.updateCb||!w.updateCb(v)||(clearTimeout(w.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(v=>({source:v.source,creationLocation:v.creationLocation,data:v.data})):[]}addCallback(v,w,M){let P=-1;w&&w>0&&(P=setTimeout(()=>{this._callbacks=this._callbacks.filter(X=>X.timeoutId!==P),v(this._didWork,this.getPendingTasks())},w)),this._callbacks.push({doneCb:v,timeoutId:P,updateCb:M})}whenStable(v,w,M){if(M&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(v,w,M),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(v,w,M){return[]}}return h.\u0275fac=function(v){return new(v||h)(Jo(yu))},h.\u0275prov=Le({token:h,factory:h.\u0275fac}),h})(),Ab=(()=>{class h{constructor(){this._applications=new Map,Tm.addToWindow(this)}registerApplication(v,w){this._applications.set(v,w)}unregisterApplication(v){this._applications.delete(v)}unregisterAllApplications(){this._applications.clear()}getTestability(v){return this._applications.get(v)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(v,w=!0){return Tm.findTestabilityInTree(this,v,w)}}return h.\u0275fac=function(v){return new(v||h)},h.\u0275prov=Le({token:h,factory:h.\u0275fac}),h})();class vC{addToWindow(d){}findTestabilityInTree(d,v,w){return null}}function bC(h){Tm=h}let oh,Tm=new vC;const Ob=new Vo("AllowMultipleToken");class CC{constructor(d,v){this.name=d,this.token=v}}function xb(h,d,v=[]){const w=`Platform: ${d}`,M=new Vo(w);return(P=[])=>{let X=kb();if(!X||X.injector.get(Ob,!1))if(h)h(v.concat(P).concat({provide:M,useValue:!0}));else{const st=v.concat(P).concat({provide:M,useValue:!0},{provide:nf,useValue:"platform"});!function(h){if(oh&&!oh.destroyed&&!oh.injector.get(Ob,!1))throw new St("400","");oh=h.get(Lb);const d=h.get(Tb,null);d&&d.forEach(v=>v())}(qc.create({providers:st,name:w}))}return function(h){const d=kb();if(!d)throw new St("401","");return d}()}}function kb(){return oh&&!oh.destroyed?oh:null}let Lb=(()=>{class h{constructor(v){this._injector=v,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(v,w){const st=function(h,d){let v;return v="noop"===h?new _C:("zone.js"===h?void 0:h)||new yu({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==d?void 0:d.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==d?void 0:d.ngZoneRunCoalescing)}),v}(w?w.ngZone:void 0,{ngZoneEventCoalescing:w&&w.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:w&&w.ngZoneRunCoalescing||!1}),bt=[{provide:yu,useValue:st}];return st.run(()=>{const Xt=qc.create({providers:bt,parent:this.injector,name:v.moduleType.name}),le=v.create(Xt),Pe=le.injector.get(Jl,null);if(!Pe)throw new St("402","");return st.runOutsideAngular(()=>{const oi=st.onError.subscribe({next:Ti=>{Pe.handleError(Ti)}});le.onDestroy(()=>{Cm(this._modules,le),oi.unsubscribe()})}),function(h,d,v){try{const w=v();return Lg(w)?w.catch(M=>{throw d.runOutsideAngular(()=>h.handleError(M)),M}):w}catch(w){throw d.runOutsideAngular(()=>h.handleError(w)),w}}(Pe,st,()=>{const oi=le.injector.get(Zd);return oi.runInitializers(),oi.donePromise.then(()=>(function(h){Be(h,"Expected localeId to be defined"),"string"==typeof h&&(tv=h.toLowerCase().replace(/_/g,"-"))}(le.injector.get(Nf,Cf)||Cf),this._moduleDoBootstrap(le),le))})})}bootstrapModule(v,w=[]){const M=Nb({},w);return function(h,d,v){const w=new nm(v);return Promise.resolve(w)}(0,0,v).then(P=>this.bootstrapModuleFactory(P,M))}_moduleDoBootstrap(v){const w=v.injector.get(xp);if(v._bootstrapComponents.length>0)v._bootstrapComponents.forEach(M=>w.bootstrap(M));else{if(!v.instance.ngDoBootstrap)throw new St("403","");v.instance.ngDoBootstrap(w)}this._modules.push(v)}onDestroy(v){this._destroyListeners.push(v)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new St("404","");this._modules.slice().forEach(v=>v.destroy()),this._destroyListeners.forEach(v=>v()),this._destroyed=!0}get destroyed(){return this._destroyed}}return h.\u0275fac=function(v){return new(v||h)(Jo(qc))},h.\u0275prov=Le({token:h,factory:h.\u0275fac}),h})();function Nb(h,d){return Array.isArray(d)?d.reduce(Nb,h):Object.assign(Object.assign({},h),d)}let xp=(()=>{class h{constructor(v,w,M,P,X){this._zone=v,this._injector=w,this._exceptionHandler=M,this._componentFactoryResolver=P,this._initStatus=X,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const st=new e.y(Xt=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{Xt.next(this._stable),Xt.complete()})}),bt=new e.y(Xt=>{let le;this._zone.runOutsideAngular(()=>{le=this._zone.onStable.subscribe(()=>{yu.assertNotInAngularZone(),bm(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,Xt.next(!0))})})});const Pe=this._zone.onUnstable.subscribe(()=>{yu.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{Xt.next(!1)}))});return()=>{le.unsubscribe(),Pe.unsubscribe()}});this.isStable=(0,t.T)(st,bt.pipe((0,n.B)()))}bootstrap(v,w){if(!this._initStatus.done)throw new St("405","");let M;M=v instanceof Rv?v:this._componentFactoryResolver.resolveComponentFactory(v),this.componentTypes.push(M.componentType);const P=function(h){return h.isBoundToModule}(M)?void 0:this._injector.get(Kd),st=M.create(qc.NULL,[],w||M.selector,P),bt=st.location.nativeElement,Xt=st.injector.get(Mb,null),le=Xt&&st.injector.get(Ab);return Xt&&le&&le.registerApplication(bt,Xt),st.onDestroy(()=>{this.detachView(st.hostView),Cm(this.components,st),le&&le.unregisterApplication(bt)}),this._loadComponent(st),st}tick(){if(this._runningTick)throw new St("101","");try{this._runningTick=!0;for(let v of this._views)v.detectChanges()}catch(v){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(v))}finally{this._runningTick=!1}}attachView(v){const w=v;this._views.push(w),w.attachToAppRef(this)}detachView(v){const w=v;Cm(this._views,w),w.detachFromAppRef()}_loadComponent(v){this.attachView(v.hostView),this.tick(),this.components.push(v),this._injector.get(Sb,[]).concat(this._bootstrapListeners).forEach(M=>M(v))}ngOnDestroy(){this._views.slice().forEach(v=>v.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return h.\u0275fac=function(v){return new(v||h)(Jo(yu),Jo(qc),Jo(Jl),Jo(wp),Jo(Zd))},h.\u0275prov=Le({token:h,factory:h.\u0275fac}),h})();function Cm(h,d){const v=h.indexOf(d);v>-1&&h.splice(v,1)}let Fb=!0;function MC(){Fb=!1}let AC=(()=>{class h{}return h.__NG_ELEMENT_ID__=OC,h})();function OC(h){return function(h,d,v){if(lr(h)&&!v){const w=jn(h.index,d);return new Dp(w,w)}return 47&h.type?new Dp(d[16],d):null}(gt(),Gt(),16==(16&h))}class zb{constructor(){}supports(d){return dt(d)}create(d){return new BC(d)}}const FC=(h,d)=>d;class BC{constructor(d){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=d||FC}forEachItem(d){let v;for(v=this._itHead;null!==v;v=v._next)d(v)}forEachOperation(d){let v=this._itHead,w=this._removalsHead,M=0,P=null;for(;v||w;){const X=!w||v&&v.currentIndex<Yb(w,M,P)?v:w,st=Yb(X,M,P),bt=X.currentIndex;if(X===w)M--,w=w._nextRemoved;else if(v=v._next,null==X.previousIndex)M++;else{P||(P=[]);const Xt=st-M,le=bt-M;if(Xt!=le){for(let oi=0;oi<Xt;oi++){const Ti=oi<P.length?P[oi]:P[oi]=0,$i=Ti+oi;le<=$i&&$i<Xt&&(P[oi]=Ti+1)}P[X.previousIndex]=le-Xt}}st!==bt&&d(X,st,bt)}}forEachPreviousItem(d){let v;for(v=this._previousItHead;null!==v;v=v._nextPrevious)d(v)}forEachAddedItem(d){let v;for(v=this._additionsHead;null!==v;v=v._nextAdded)d(v)}forEachMovedItem(d){let v;for(v=this._movesHead;null!==v;v=v._nextMoved)d(v)}forEachRemovedItem(d){let v;for(v=this._removalsHead;null!==v;v=v._nextRemoved)d(v)}forEachIdentityChange(d){let v;for(v=this._identityChangesHead;null!==v;v=v._nextIdentityChange)d(v)}diff(d){if(null==d&&(d=[]),!dt(d))throw new Error(`Error trying to diff '${u(d)}'. Only arrays and iterables are allowed`);return this.check(d)?this:null}onDestroy(){}check(d){this._reset();let M,P,X,v=this._itHead,w=!1;if(Array.isArray(d)){this.length=d.length;for(let st=0;st<this.length;st++)P=d[st],X=this._trackByFn(st,P),null!==v&&Object.is(v.trackById,X)?(w&&(v=this._verifyReinsertion(v,P,X,st)),Object.is(v.item,P)||this._addIdentityChange(v,P)):(v=this._mismatch(v,P,X,st),w=!0),v=v._next}else M=0,function(h,d){if(Array.isArray(h))for(let v=0;v<h.length;v++)d(h[v]);else{const v=h[F()]();let w;for(;!(w=v.next()).done;)d(w.value)}}(d,st=>{X=this._trackByFn(M,st),null!==v&&Object.is(v.trackById,X)?(w&&(v=this._verifyReinsertion(v,st,X,M)),Object.is(v.item,st)||this._addIdentityChange(v,st)):(v=this._mismatch(v,st,X,M),w=!0),v=v._next,M++}),this.length=M;return this._truncate(v),this.collection=d,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let d;for(d=this._previousItHead=this._itHead;null!==d;d=d._next)d._nextPrevious=d._next;for(d=this._additionsHead;null!==d;d=d._nextAdded)d.previousIndex=d.currentIndex;for(this._additionsHead=this._additionsTail=null,d=this._movesHead;null!==d;d=d._nextMoved)d.previousIndex=d.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(d,v,w,M){let P;return null===d?P=this._itTail:(P=d._prev,this._remove(d)),null!==(d=null===this._unlinkedRecords?null:this._unlinkedRecords.get(w,null))?(Object.is(d.item,v)||this._addIdentityChange(d,v),this._reinsertAfter(d,P,M)):null!==(d=null===this._linkedRecords?null:this._linkedRecords.get(w,M))?(Object.is(d.item,v)||this._addIdentityChange(d,v),this._moveAfter(d,P,M)):d=this._addAfter(new HC(v,w),P,M),d}_verifyReinsertion(d,v,w,M){let P=null===this._unlinkedRecords?null:this._unlinkedRecords.get(w,null);return null!==P?d=this._reinsertAfter(P,d._prev,M):d.currentIndex!=M&&(d.currentIndex=M,this._addToMoves(d,M)),d}_truncate(d){for(;null!==d;){const v=d._next;this._addToRemovals(this._unlink(d)),d=v}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(d,v,w){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(d);const M=d._prevRemoved,P=d._nextRemoved;return null===M?this._removalsHead=P:M._nextRemoved=P,null===P?this._removalsTail=M:P._prevRemoved=M,this._insertAfter(d,v,w),this._addToMoves(d,w),d}_moveAfter(d,v,w){return this._unlink(d),this._insertAfter(d,v,w),this._addToMoves(d,w),d}_addAfter(d,v,w){return this._insertAfter(d,v,w),this._additionsTail=null===this._additionsTail?this._additionsHead=d:this._additionsTail._nextAdded=d,d}_insertAfter(d,v,w){const M=null===v?this._itHead:v._next;return d._next=M,d._prev=v,null===M?this._itTail=d:M._prev=d,null===v?this._itHead=d:v._next=d,null===this._linkedRecords&&(this._linkedRecords=new jb),this._linkedRecords.put(d),d.currentIndex=w,d}_remove(d){return this._addToRemovals(this._unlink(d))}_unlink(d){null!==this._linkedRecords&&this._linkedRecords.remove(d);const v=d._prev,w=d._next;return null===v?this._itHead=w:v._next=w,null===w?this._itTail=v:w._prev=v,d}_addToMoves(d,v){return d.previousIndex===v||(this._movesTail=null===this._movesTail?this._movesHead=d:this._movesTail._nextMoved=d),d}_addToRemovals(d){return null===this._unlinkedRecords&&(this._unlinkedRecords=new jb),this._unlinkedRecords.put(d),d.currentIndex=null,d._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=d,d._prevRemoved=null):(d._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=d),d}_addIdentityChange(d,v){return d.item=v,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=d:this._identityChangesTail._nextIdentityChange=d,d}}class HC{constructor(d,v){this.item=d,this.trackById=v,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class UC{constructor(){this._head=null,this._tail=null}add(d){null===this._head?(this._head=this._tail=d,d._nextDup=null,d._prevDup=null):(this._tail._nextDup=d,d._prevDup=this._tail,d._nextDup=null,this._tail=d)}get(d,v){let w;for(w=this._head;null!==w;w=w._nextDup)if((null===v||v<=w.currentIndex)&&Object.is(w.trackById,d))return w;return null}remove(d){const v=d._prevDup,w=d._nextDup;return null===v?this._head=w:v._nextDup=w,null===w?this._tail=v:w._prevDup=v,null===this._head}}class jb{constructor(){this.map=new Map}put(d){const v=d.trackById;let w=this.map.get(v);w||(w=new UC,this.map.set(v,w)),w.add(d)}get(d,v){const M=this.map.get(d);return M?M.get(d,v):null}remove(d){const v=d.trackById;return this.map.get(v).remove(d)&&this.map.delete(v),d}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Yb(h,d,v){const w=h.previousIndex;if(null===w)return w;let M=0;return v&&w<v.length&&(M=v[w]),w+d+M}class Xb{constructor(){}supports(d){return d instanceof Map||Ee(d)}create(){return new VC}}class VC{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(d){let v;for(v=this._mapHead;null!==v;v=v._next)d(v)}forEachPreviousItem(d){let v;for(v=this._previousMapHead;null!==v;v=v._nextPrevious)d(v)}forEachChangedItem(d){let v;for(v=this._changesHead;null!==v;v=v._nextChanged)d(v)}forEachAddedItem(d){let v;for(v=this._additionsHead;null!==v;v=v._nextAdded)d(v)}forEachRemovedItem(d){let v;for(v=this._removalsHead;null!==v;v=v._nextRemoved)d(v)}diff(d){if(d){if(!(d instanceof Map||Ee(d)))throw new Error(`Error trying to diff '${u(d)}'. Only maps and objects are allowed`)}else d=new Map;return this.check(d)?this:null}onDestroy(){}check(d){this._reset();let v=this._mapHead;if(this._appendAfter=null,this._forEach(d,(w,M)=>{if(v&&v.key===M)this._maybeAddToChanges(v,w),this._appendAfter=v,v=v._next;else{const P=this._getOrCreateRecordForKey(M,w);v=this._insertBeforeOrAppend(v,P)}}),v){v._prev&&(v._prev._next=null),this._removalsHead=v;for(let w=v;null!==w;w=w._nextRemoved)w===this._mapHead&&(this._mapHead=null),this._records.delete(w.key),w._nextRemoved=w._next,w.previousValue=w.currentValue,w.currentValue=null,w._prev=null,w._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(d,v){if(d){const w=d._prev;return v._next=d,v._prev=w,d._prev=v,w&&(w._next=v),d===this._mapHead&&(this._mapHead=v),this._appendAfter=d,d}return this._appendAfter?(this._appendAfter._next=v,v._prev=this._appendAfter):this._mapHead=v,this._appendAfter=v,null}_getOrCreateRecordForKey(d,v){if(this._records.has(d)){const M=this._records.get(d);this._maybeAddToChanges(M,v);const P=M._prev,X=M._next;return P&&(P._next=X),X&&(X._prev=P),M._next=null,M._prev=null,M}const w=new GC(d);return this._records.set(d,w),w.currentValue=v,this._addToAdditions(w),w}_reset(){if(this.isDirty){let d;for(this._previousMapHead=this._mapHead,d=this._previousMapHead;null!==d;d=d._next)d._nextPrevious=d._next;for(d=this._changesHead;null!==d;d=d._nextChanged)d.previousValue=d.currentValue;for(d=this._additionsHead;null!=d;d=d._nextAdded)d.previousValue=d.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(d,v){Object.is(v,d.currentValue)||(d.previousValue=d.currentValue,d.currentValue=v,this._addToChanges(d))}_addToAdditions(d){null===this._additionsHead?this._additionsHead=this._additionsTail=d:(this._additionsTail._nextAdded=d,this._additionsTail=d)}_addToChanges(d){null===this._changesHead?this._changesHead=this._changesTail=d:(this._changesTail._nextChanged=d,this._changesTail=d)}_forEach(d,v){d instanceof Map?d.forEach(v):Object.keys(d).forEach(w=>v(d[w],w))}}class GC{constructor(d){this.key=d,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Kb(){return new Ff([new zb])}let Ff=(()=>{class h{constructor(v){this.factories=v}static create(v,w){if(null!=w){const M=w.factories.slice();v=v.concat(M)}return new h(v)}static extend(v){return{provide:h,useFactory:w=>h.create(v,w||Kb()),deps:[[h,new da,new jl]]}}find(v){const w=this.factories.find(M=>M.supports(v));if(null!=w)return w;throw new Error(`Cannot find a differ supporting object '${v}' of type '${function(h){return h.name||typeof h}(v)}'`)}}return h.\u0275prov=Le({token:h,providedIn:"root",factory:Kb}),h})();function Jb(){return new Bf([new Xb])}let Bf=(()=>{class h{constructor(v){this.factories=v}static create(v,w){if(w){const M=w.factories.slice();v=v.concat(M)}return new h(v)}static extend(v){return{provide:h,useFactory:w=>h.create(v,w||Jb()),deps:[[h,new da,new jl]]}}find(v){const w=this.factories.find(M=>M.supports(v));if(w)return w;throw new Error(`Cannot find a differ supporting object '${v}'`)}}return h.\u0275prov=Le({token:h,providedIn:"root",factory:Jb}),h})();const zC=[new Xb],YC=new Ff([new zb]),XC=new Bf(zC),KC=xb(null,"core",[{provide:Cb,useValue:"unknown"},{provide:Lb,deps:[qc]},{provide:Ab,deps:[]},{provide:wb,deps:[]}]),qC=[{provide:xp,useClass:xp,deps:[yu,qc,Jl,wp,Zd]},{provide:pT,deps:[yu],useFactory:function(h){let d=[];return h.onStable.subscribe(()=>{for(;d.length;)d.pop()()}),function(v){d.push(v)}}},{provide:Zd,useClass:Zd,deps:[[new jl,mm]]},{provide:vm,useClass:vm,deps:[]},cC,{provide:Ff,useFactory:function(){return YC},deps:[]},{provide:Bf,useFactory:function(){return XC},deps:[]},{provide:Nf,useFactory:function(h){return h||"undefined"!=typeof $localize&&$localize.locale||Cf},deps:[[new Fl(Nf),new jl,new da]]},{provide:Rb,useValue:"USD"}];let eS=(()=>{class h{constructor(v){}}return h.\u0275fac=function(v){return new(v||h)(Jo(xp))},h.\u0275mod=tr({type:h}),h.\u0275inj=Bt({providers:qC}),h})()},93075:(U,$,m)=>{"use strict";m.d($,{Zs:()=>xo,Fj:()=>rt,NI:()=>kr,oH:()=>Zs,sg:()=>Yo,u5:()=>bl,Cf:()=>vt,JU:()=>u,a5:()=>At,JJ:()=>te,JL:()=>ee,F:()=>Vn,On:()=>oe,UX:()=>Nr,kI:()=>Jt,_Y:()=>He});var C=m(5e3),_=m(69808),e=m(32076),t=m(4128),n=m(54004);let r=(()=>{class Z{constructor(z,It){this._renderer=z,this._elementRef=It,this.onChange=Fe=>{},this.onTouched=()=>{}}setProperty(z,It){this._renderer.setProperty(this._elementRef.nativeElement,z,It)}registerOnTouched(z){this.onTouched=z}registerOnChange(z){this.onChange=z}setDisabledState(z){this.setProperty("disabled",z)}}return Z.\u0275fac=function(z){return new(z||Z)(C.Y36(C.Qsj),C.Y36(C.SBq))},Z.\u0275dir=C.lG2({type:Z}),Z})(),s=(()=>{class Z extends r{}return Z.\u0275fac=function(){let V;return function(It){return(V||(V=C.n5z(Z)))(It||Z)}}(),Z.\u0275dir=C.lG2({type:Z,features:[C.qOj]}),Z})();const u=new C.OlP("NgValueAccessor"),B={provide:u,useExisting:(0,C.Gpc)(()=>rt),multi:!0},at=new C.OlP("CompositionEventMode");let rt=(()=>{class Z extends r{constructor(z,It,Fe){super(z,It),this._compositionMode=Fe,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const Z=(0,_.q)()?(0,_.q)().getUserAgent():"";return/android (\d+)/.test(Z.toLowerCase())}())}writeValue(z){this.setProperty("value",null==z?"":z)}_handleInput(z){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(z)}_compositionStart(){this._composing=!0}_compositionEnd(z){this._composing=!1,this._compositionMode&&this.onChange(z)}}return Z.\u0275fac=function(z){return new(z||Z)(C.Y36(C.Qsj),C.Y36(C.SBq),C.Y36(at,8))},Z.\u0275dir=C.lG2({type:Z,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(z,It){1&z&&C.NdJ("input",function(bi){return It._handleInput(bi.target.value)})("blur",function(){return It.onTouched()})("compositionstart",function(){return It._compositionStart()})("compositionend",function(bi){return It._compositionEnd(bi.target.value)})},features:[C._Bn([B]),C.qOj]}),Z})();function St(Z){return null==Z||0===Z.length}function Ht(Z){return null!=Z&&"number"==typeof Z.length}const vt=new C.OlP("NgValidators"),xt=new C.OlP("NgAsyncValidators"),Wt=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class Jt{static min(V){return Z=V,V=>{if(St(V.value)||St(Z))return null;const z=parseFloat(V.value);return!isNaN(z)&&z<Z?{min:{min:Z,actual:V.value}}:null};var Z}static max(V){return Z=V,V=>{if(St(V.value)||St(Z))return null;const z=parseFloat(V.value);return!isNaN(z)&&z>Z?{max:{max:Z,actual:V.value}}:null};var Z}static required(V){return ot(V)}static requiredTrue(V){return mt(V)}static email(V){return St((Z=V).value)||Wt.test(Z.value)?null:{email:!0};var Z}static minLength(V){return Z=V,V=>St(V.value)||!Ht(V.value)?null:V.value.length<Z?{minlength:{requiredLength:Z,actualLength:V.value.length}}:null;var Z}static maxLength(V){return Z=V,V=>Ht(V.value)&&V.value.length>Z?{maxlength:{requiredLength:Z,actualLength:V.value.length}}:null;var Z}static pattern(V){return function(Z){if(!Z)return ht;let V,z;return"string"==typeof Z?(z="","^"!==Z.charAt(0)&&(z+="^"),z+=Z,"$"!==Z.charAt(Z.length-1)&&(z+="$"),V=new RegExp(z)):(z=Z.toString(),V=Z),It=>{if(St(It.value))return null;const Fe=It.value;return V.test(Fe)?null:{pattern:{requiredPattern:z,actualValue:Fe}}}}(V)}static nullValidator(V){return null}static compose(V){return ue(V)}static composeAsync(V){return Ne(V)}}function ot(Z){return St(Z.value)?{required:!0}:null}function mt(Z){return!0===Z.value?null:{required:!0}}function ht(Z){return null}function nt(Z){return null!=Z}function he(Z){const V=(0,C.QGY)(Z)?(0,e.D)(Z):Z;return(0,C.CqO)(V),V}function Mt(Z){let V={};return Z.forEach(z=>{V=null!=z?Object.assign(Object.assign({},V),z):V}),0===Object.keys(V).length?null:V}function Nt(Z,V){return V.map(z=>z(Z))}function ve(Z){return Z.map(V=>function(Z){return!Z.validate}(V)?V:z=>V.validate(z))}function ue(Z){if(!Z)return null;const V=Z.filter(nt);return 0==V.length?null:function(z){return Mt(Nt(z,V))}}function Be(Z){return null!=Z?ue(ve(Z)):null}function Ne(Z){if(!Z)return null;const V=Z.filter(nt);return 0==V.length?null:function(z){const It=Nt(z,V).map(he);return(0,t.D)(It).pipe((0,n.U)(Mt))}}function Qe(Z){return null!=Z?Ne(ve(Z)):null}function Di(Z,V){return null===Z?[V]:Array.isArray(Z)?[...Z,V]:[Z,V]}function Ze(Z){return Z._rawValidators}function Le(Z){return Z._rawAsyncValidators}function gi(Z){return Z?Array.isArray(Z)?Z:[Z]:[]}function Bt(Z,V){return Array.isArray(Z)?Z.includes(V):Z===V}function Te(Z,V){const z=gi(V);return gi(Z).forEach(Fe=>{Bt(z,Fe)||z.push(Fe)}),z}function $t(Z,V){return gi(V).filter(z=>!Bt(Z,z))}class _e{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(V){this._rawValidators=V||[],this._composedValidatorFn=Be(this._rawValidators)}_setAsyncValidators(V){this._rawAsyncValidators=V||[],this._composedAsyncValidatorFn=Qe(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(V){this._onDestroyCallbacks.push(V)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(V=>V()),this._onDestroyCallbacks=[]}reset(V){this.control&&this.control.reset(V)}hasError(V,z){return!!this.control&&this.control.hasError(V,z)}getError(V,z){return this.control?this.control.getError(V,z):null}}class At extends _e{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class pe extends _e{get formDirective(){return null}get path(){return null}}class ze{constructor(V){this._cd=V}is(V){var z,It,Fe;return"submitted"===V?!!(null===(z=this._cd)||void 0===z?void 0:z.submitted):!!(null===(Fe=null===(It=this._cd)||void 0===It?void 0:It.control)||void 0===Fe?void 0:Fe[V])}}let te=(()=>{class Z extends ze{constructor(z){super(z)}}return Z.\u0275fac=function(z){return new(z||Z)(C.Y36(At,2))},Z.\u0275dir=C.lG2({type:Z,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(z,It){2&z&&C.ekj("ng-untouched",It.is("untouched"))("ng-touched",It.is("touched"))("ng-pristine",It.is("pristine"))("ng-dirty",It.is("dirty"))("ng-valid",It.is("valid"))("ng-invalid",It.is("invalid"))("ng-pending",It.is("pending"))},features:[C.qOj]}),Z})(),ee=(()=>{class Z extends ze{constructor(z){super(z)}}return Z.\u0275fac=function(z){return new(z||Z)(C.Y36(pe,10))},Z.\u0275dir=C.lG2({type:Z,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(z,It){2&z&&C.ekj("ng-untouched",It.is("untouched"))("ng-touched",It.is("touched"))("ng-pristine",It.is("pristine"))("ng-dirty",It.is("dirty"))("ng-valid",It.is("valid"))("ng-invalid",It.is("invalid"))("ng-pending",It.is("pending"))("ng-submitted",It.is("submitted"))},features:[C.qOj]}),Z})();function Zi(Z,V){je(Z,V),V.valueAccessor.writeValue(Z.value),function(Z,V){V.valueAccessor.registerOnChange(z=>{Z._pendingValue=z,Z._pendingChange=!0,Z._pendingDirty=!0,"change"===Z.updateOn&&$e(Z,V)})}(Z,V),function(Z,V){const z=(It,Fe)=>{V.valueAccessor.writeValue(It),Fe&&V.viewToModelUpdate(It)};Z.registerOnChange(z),V._registerOnDestroy(()=>{Z._unregisterOnChange(z)})}(Z,V),function(Z,V){V.valueAccessor.registerOnTouched(()=>{Z._pendingTouched=!0,"blur"===Z.updateOn&&Z._pendingChange&&$e(Z,V),"submit"!==Z.updateOn&&Z.markAsTouched()})}(Z,V),function(Z,V){if(V.valueAccessor.setDisabledState){const z=It=>{V.valueAccessor.setDisabledState(It)};Z.registerOnDisabledChange(z),V._registerOnDestroy(()=>{Z._unregisterOnDisabledChange(z)})}}(Z,V)}function Ce(Z,V,z=!0){const It=()=>{};V.valueAccessor&&(V.valueAccessor.registerOnChange(It),V.valueAccessor.registerOnTouched(It)),Ii(Z,V),Z&&(V._invokeOnDestroyCallbacks(),Z._registerOnCollectionChange(()=>{}))}function Oe(Z,V){Z.forEach(z=>{z.registerOnValidatorChange&&z.registerOnValidatorChange(V)})}function je(Z,V){const z=Ze(Z);null!==V.validator?Z.setValidators(Di(z,V.validator)):"function"==typeof z&&Z.setValidators([z]);const It=Le(Z);null!==V.asyncValidator?Z.setAsyncValidators(Di(It,V.asyncValidator)):"function"==typeof It&&Z.setAsyncValidators([It]);const Fe=()=>Z.updateValueAndValidity();Oe(V._rawValidators,Fe),Oe(V._rawAsyncValidators,Fe)}function Ii(Z,V){let z=!1;if(null!==Z){if(null!==V.validator){const Fe=Ze(Z);if(Array.isArray(Fe)&&Fe.length>0){const bi=Fe.filter(cn=>cn!==V.validator);bi.length!==Fe.length&&(z=!0,Z.setValidators(bi))}}if(null!==V.asyncValidator){const Fe=Le(Z);if(Array.isArray(Fe)&&Fe.length>0){const bi=Fe.filter(cn=>cn!==V.asyncValidator);bi.length!==Fe.length&&(z=!0,Z.setAsyncValidators(bi))}}}const It=()=>{};return Oe(V._rawValidators,It),Oe(V._rawAsyncValidators,It),z}function $e(Z,V){Z._pendingDirty&&Z.markAsDirty(),Z.setValue(Z._pendingValue,{emitModelToViewChange:!1}),V.viewToModelUpdate(Z._pendingValue),Z._pendingChange=!1}function kt(Z,V){je(Z,V)}function Ae(Z,V){if(!Z.hasOwnProperty("model"))return!1;const z=Z.model;return!!z.isFirstChange()||!Object.is(V,z.currentValue)}function Qi(Z,V){Z._syncPendingControls(),V.forEach(z=>{const It=z.control;"submit"===It.updateOn&&It._pendingChange&&(z.viewToModelUpdate(It._pendingValue),It._pendingChange=!1)})}function yn(Z,V){if(!V)return null;let z,It,Fe;return Array.isArray(V),V.forEach(bi=>{bi.constructor===rt?z=bi:function(Z){return Object.getPrototypeOf(Z.constructor)===s}(bi)?It=bi:Fe=bi}),Fe||It||z||null}function tr(Z,V){const z=Z.indexOf(V);z>-1&&Z.splice(z,1)}const Je="VALID",xe="INVALID",ui="PENDING",ki="DISABLED";function An(Z){return(no(Z)?Z.validators:Z)||null}function ar(Z){return Array.isArray(Z)?Be(Z):Z||null}function Tr(Z,V){return(no(V)?V.asyncValidators:Z)||null}function eo(Z){return Array.isArray(Z)?Qe(Z):Z||null}function no(Z){return null!=Z&&!Array.isArray(Z)&&"object"==typeof Z}class mo{constructor(V,z){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=V,this._rawAsyncValidators=z,this._composedValidatorFn=ar(this._rawValidators),this._composedAsyncValidatorFn=eo(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(V){this._rawValidators=this._composedValidatorFn=V}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(V){this._rawAsyncValidators=this._composedAsyncValidatorFn=V}get parent(){return this._parent}get valid(){return this.status===Je}get invalid(){return this.status===xe}get pending(){return this.status==ui}get disabled(){return this.status===ki}get enabled(){return this.status!==ki}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(V){this._rawValidators=V,this._composedValidatorFn=ar(V)}setAsyncValidators(V){this._rawAsyncValidators=V,this._composedAsyncValidatorFn=eo(V)}addValidators(V){this.setValidators(Te(V,this._rawValidators))}addAsyncValidators(V){this.setAsyncValidators(Te(V,this._rawAsyncValidators))}removeValidators(V){this.setValidators($t(V,this._rawValidators))}removeAsyncValidators(V){this.setAsyncValidators($t(V,this._rawAsyncValidators))}hasValidator(V){return Bt(this._rawValidators,V)}hasAsyncValidator(V){return Bt(this._rawAsyncValidators,V)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(V={}){this.touched=!0,this._parent&&!V.onlySelf&&this._parent.markAsTouched(V)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(V=>V.markAllAsTouched())}markAsUntouched(V={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(z=>{z.markAsUntouched({onlySelf:!0})}),this._parent&&!V.onlySelf&&this._parent._updateTouched(V)}markAsDirty(V={}){this.pristine=!1,this._parent&&!V.onlySelf&&this._parent.markAsDirty(V)}markAsPristine(V={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(z=>{z.markAsPristine({onlySelf:!0})}),this._parent&&!V.onlySelf&&this._parent._updatePristine(V)}markAsPending(V={}){this.status=ui,!1!==V.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!V.onlySelf&&this._parent.markAsPending(V)}disable(V={}){const z=this._parentMarkedDirty(V.onlySelf);this.status=ki,this.errors=null,this._forEachChild(It=>{It.disable(Object.assign(Object.assign({},V),{onlySelf:!0}))}),this._updateValue(),!1!==V.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},V),{skipPristineCheck:z})),this._onDisabledChange.forEach(It=>It(!0))}enable(V={}){const z=this._parentMarkedDirty(V.onlySelf);this.status=Je,this._forEachChild(It=>{It.enable(Object.assign(Object.assign({},V),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:V.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},V),{skipPristineCheck:z})),this._onDisabledChange.forEach(It=>It(!1))}_updateAncestors(V){this._parent&&!V.onlySelf&&(this._parent.updateValueAndValidity(V),V.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(V){this._parent=V}updateValueAndValidity(V={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Je||this.status===ui)&&this._runAsyncValidator(V.emitEvent)),!1!==V.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!V.onlySelf&&this._parent.updateValueAndValidity(V)}_updateTreeValidity(V={emitEvent:!0}){this._forEachChild(z=>z._updateTreeValidity(V)),this.updateValueAndValidity({onlySelf:!0,emitEvent:V.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?ki:Je}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(V){if(this.asyncValidator){this.status=ui,this._hasOwnPendingAsyncValidator=!0;const z=he(this.asyncValidator(this));this._asyncValidationSubscription=z.subscribe(It=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(It,{emitEvent:V})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(V,z={}){this.errors=V,this._updateControlsErrors(!1!==z.emitEvent)}get(V){return function(Z,V,z){if(null==V||(Array.isArray(V)||(V=V.split(".")),Array.isArray(V)&&0===V.length))return null;let It=Z;return V.forEach(Fe=>{It=It instanceof ur?It.controls.hasOwnProperty(Fe)?It.controls[Fe]:null:It instanceof Mo&&It.at(Fe)||null}),It}(this,V)}getError(V,z){const It=z?this.get(z):this;return It&&It.errors?It.errors[V]:null}hasError(V,z){return!!this.getError(V,z)}get root(){let V=this;for(;V._parent;)V=V._parent;return V}_updateControlsErrors(V){this.status=this._calculateStatus(),V&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(V)}_initObservables(){this.valueChanges=new C.vpe,this.statusChanges=new C.vpe}_calculateStatus(){return this._allControlsDisabled()?ki:this.errors?xe:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(ui)?ui:this._anyControlsHaveStatus(xe)?xe:Je}_anyControlsHaveStatus(V){return this._anyControls(z=>z.status===V)}_anyControlsDirty(){return this._anyControls(V=>V.dirty)}_anyControlsTouched(){return this._anyControls(V=>V.touched)}_updatePristine(V={}){this.pristine=!this._anyControlsDirty(),this._parent&&!V.onlySelf&&this._parent._updatePristine(V)}_updateTouched(V={}){this.touched=this._anyControlsTouched(),this._parent&&!V.onlySelf&&this._parent._updateTouched(V)}_isBoxedValue(V){return"object"==typeof V&&null!==V&&2===Object.keys(V).length&&"value"in V&&"disabled"in V}_registerOnCollectionChange(V){this._onCollectionChange=V}_setUpdateStrategy(V){no(V)&&null!=V.updateOn&&(this._updateOn=V.updateOn)}_parentMarkedDirty(V){return!V&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class kr extends mo{constructor(V=null,z,It){super(An(z),Tr(It,z)),this._onChange=[],this._pendingChange=!1,this._applyFormState(V),this._setUpdateStrategy(z),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}setValue(V,z={}){this.value=this._pendingValue=V,this._onChange.length&&!1!==z.emitModelToViewChange&&this._onChange.forEach(It=>It(this.value,!1!==z.emitViewToModelChange)),this.updateValueAndValidity(z)}patchValue(V,z={}){this.setValue(V,z)}reset(V=null,z={}){this._applyFormState(V),this.markAsPristine(z),this.markAsUntouched(z),this.setValue(this.value,z),this._pendingChange=!1}_updateValue(){}_anyControls(V){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(V){this._onChange.push(V)}_unregisterOnChange(V){tr(this._onChange,V)}registerOnDisabledChange(V){this._onDisabledChange.push(V)}_unregisterOnDisabledChange(V){tr(this._onDisabledChange,V)}_forEachChild(V){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(V){this._isBoxedValue(V)?(this.value=this._pendingValue=V.value,V.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=V}}class ur extends mo{constructor(V,z,It){super(An(z),Tr(It,z)),this.controls=V,this._initObservables(),this._setUpdateStrategy(z),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(V,z){return this.controls[V]?this.controls[V]:(this.controls[V]=z,z.setParent(this),z._registerOnCollectionChange(this._onCollectionChange),z)}addControl(V,z,It={}){this.registerControl(V,z),this.updateValueAndValidity({emitEvent:It.emitEvent}),this._onCollectionChange()}removeControl(V,z={}){this.controls[V]&&this.controls[V]._registerOnCollectionChange(()=>{}),delete this.controls[V],this.updateValueAndValidity({emitEvent:z.emitEvent}),this._onCollectionChange()}setControl(V,z,It={}){this.controls[V]&&this.controls[V]._registerOnCollectionChange(()=>{}),delete this.controls[V],z&&this.registerControl(V,z),this.updateValueAndValidity({emitEvent:It.emitEvent}),this._onCollectionChange()}contains(V){return this.controls.hasOwnProperty(V)&&this.controls[V].enabled}setValue(V,z={}){this._checkAllValuesPresent(V),Object.keys(V).forEach(It=>{this._throwIfControlMissing(It),this.controls[It].setValue(V[It],{onlySelf:!0,emitEvent:z.emitEvent})}),this.updateValueAndValidity(z)}patchValue(V,z={}){null!=V&&(Object.keys(V).forEach(It=>{this.controls[It]&&this.controls[It].patchValue(V[It],{onlySelf:!0,emitEvent:z.emitEvent})}),this.updateValueAndValidity(z))}reset(V={},z={}){this._forEachChild((It,Fe)=>{It.reset(V[Fe],{onlySelf:!0,emitEvent:z.emitEvent})}),this._updatePristine(z),this._updateTouched(z),this.updateValueAndValidity(z)}getRawValue(){return this._reduceChildren({},(V,z,It)=>(V[It]=z instanceof kr?z.value:z.getRawValue(),V))}_syncPendingControls(){let V=this._reduceChildren(!1,(z,It)=>!!It._syncPendingControls()||z);return V&&this.updateValueAndValidity({onlySelf:!0}),V}_throwIfControlMissing(V){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[V])throw new Error(`Cannot find form control with name: ${V}.`)}_forEachChild(V){Object.keys(this.controls).forEach(z=>{const It=this.controls[z];It&&V(It,z)})}_setUpControls(){this._forEachChild(V=>{V.setParent(this),V._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(V){for(const z of Object.keys(this.controls)){const It=this.controls[z];if(this.contains(z)&&V(It))return!0}return!1}_reduceValue(){return this._reduceChildren({},(V,z,It)=>((z.enabled||this.disabled)&&(V[It]=z.value),V))}_reduceChildren(V,z){let It=V;return this._forEachChild((Fe,bi)=>{It=z(It,Fe,bi)}),It}_allControlsDisabled(){for(const V of Object.keys(this.controls))if(this.controls[V].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(V){this._forEachChild((z,It)=>{if(void 0===V[It])throw new Error(`Must supply a value for form control with name: '${It}'.`)})}}class Mo extends mo{constructor(V,z,It){super(An(z),Tr(It,z)),this.controls=V,this._initObservables(),this._setUpdateStrategy(z),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(V){return this.controls[V]}push(V,z={}){this.controls.push(V),this._registerControl(V),this.updateValueAndValidity({emitEvent:z.emitEvent}),this._onCollectionChange()}insert(V,z,It={}){this.controls.splice(V,0,z),this._registerControl(z),this.updateValueAndValidity({emitEvent:It.emitEvent})}removeAt(V,z={}){this.controls[V]&&this.controls[V]._registerOnCollectionChange(()=>{}),this.controls.splice(V,1),this.updateValueAndValidity({emitEvent:z.emitEvent})}setControl(V,z,It={}){this.controls[V]&&this.controls[V]._registerOnCollectionChange(()=>{}),this.controls.splice(V,1),z&&(this.controls.splice(V,0,z),this._registerControl(z)),this.updateValueAndValidity({emitEvent:It.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(V,z={}){this._checkAllValuesPresent(V),V.forEach((It,Fe)=>{this._throwIfControlMissing(Fe),this.at(Fe).setValue(It,{onlySelf:!0,emitEvent:z.emitEvent})}),this.updateValueAndValidity(z)}patchValue(V,z={}){null!=V&&(V.forEach((It,Fe)=>{this.at(Fe)&&this.at(Fe).patchValue(It,{onlySelf:!0,emitEvent:z.emitEvent})}),this.updateValueAndValidity(z))}reset(V=[],z={}){this._forEachChild((It,Fe)=>{It.reset(V[Fe],{onlySelf:!0,emitEvent:z.emitEvent})}),this._updatePristine(z),this._updateTouched(z),this.updateValueAndValidity(z)}getRawValue(){return this.controls.map(V=>V instanceof kr?V.value:V.getRawValue())}clear(V={}){this.controls.length<1||(this._forEachChild(z=>z._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:V.emitEvent}))}_syncPendingControls(){let V=this.controls.reduce((z,It)=>!!It._syncPendingControls()||z,!1);return V&&this.updateValueAndValidity({onlySelf:!0}),V}_throwIfControlMissing(V){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(V))throw new Error(`Cannot find form control at index ${V}`)}_forEachChild(V){this.controls.forEach((z,It)=>{V(z,It)})}_updateValue(){this.value=this.controls.filter(V=>V.enabled||this.disabled).map(V=>V.value)}_anyControls(V){return this.controls.some(z=>z.enabled&&V(z))}_setUpControls(){this._forEachChild(V=>this._registerControl(V))}_checkAllValuesPresent(V){this._forEachChild((z,It)=>{if(void 0===V[It])throw new Error(`Must supply a value for form control at index: ${It}.`)})}_allControlsDisabled(){for(const V of this.controls)if(V.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(V){V.setParent(this),V._registerOnCollectionChange(this._onCollectionChange)}}const sr={provide:pe,useExisting:(0,C.Gpc)(()=>Vn)},Ai=(()=>Promise.resolve(null))();let Vn=(()=>{class Z extends pe{constructor(z,It){super(),this.submitted=!1,this._directives=[],this.ngSubmit=new C.vpe,this.form=new ur({},Be(z),Qe(It))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(z){Ai.then(()=>{const It=this._findContainer(z.path);z.control=It.registerControl(z.name,z.control),Zi(z.control,z),z.control.updateValueAndValidity({emitEvent:!1}),this._directives.push(z)})}getControl(z){return this.form.get(z.path)}removeControl(z){Ai.then(()=>{const It=this._findContainer(z.path);It&&It.removeControl(z.name),tr(this._directives,z)})}addFormGroup(z){Ai.then(()=>{const It=this._findContainer(z.path),Fe=new ur({});kt(Fe,z),It.registerControl(z.name,Fe),Fe.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(z){Ai.then(()=>{const It=this._findContainer(z.path);It&&It.removeControl(z.name)})}getFormGroup(z){return this.form.get(z.path)}updateModel(z,It){Ai.then(()=>{this.form.get(z.path).setValue(It)})}setValue(z){this.control.setValue(z)}onSubmit(z){return this.submitted=!0,Qi(this.form,this._directives),this.ngSubmit.emit(z),!1}onReset(){this.resetForm()}resetForm(z){this.form.reset(z),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(z){return z.pop(),z.length?this.form.get(z):this.form}}return Z.\u0275fac=function(z){return new(z||Z)(C.Y36(vt,10),C.Y36(xt,10))},Z.\u0275dir=C.lG2({type:Z,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(z,It){1&z&&C.NdJ("submit",function(bi){return It.onSubmit(bi)})("reset",function(){return It.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[C._Bn([sr]),C.qOj]}),Z})();const Sn={provide:At,useExisting:(0,C.Gpc)(()=>oe)},Gn=(()=>Promise.resolve(null))();let oe=(()=>{class Z extends At{constructor(z,It,Fe,bi){super(),this.control=new kr,this._registered=!1,this.update=new C.vpe,this._parent=z,this._setValidators(It),this._setAsyncValidators(Fe),this.valueAccessor=yn(0,bi)}ngOnChanges(z){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in z&&this._updateDisabled(z),Ae(z,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._parent?function(Z,V){return[...V.path,Z]}(this.name,this._parent):[this.name]}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(z){this.viewModel=z,this.update.emit(z)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Zi(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(z){Gn.then(()=>{this.control.setValue(z,{emitViewToModelChange:!1})})}_updateDisabled(z){const It=z.isDisabled.currentValue,Fe=""===It||It&&"false"!==It;Gn.then(()=>{Fe&&!this.control.disabled?this.control.disable():!Fe&&this.control.disabled&&this.control.enable()})}}return Z.\u0275fac=function(z){return new(z||Z)(C.Y36(pe,9),C.Y36(vt,10),C.Y36(xt,10),C.Y36(u,10))},Z.\u0275dir=C.lG2({type:Z,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[C._Bn([Sn]),C.qOj,C.TTD]}),Z})(),He=(()=>{class Z{}return Z.\u0275fac=function(z){return new(z||Z)},Z.\u0275dir=C.lG2({type:Z,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),Z})(),zn=(()=>{class Z{}return Z.\u0275fac=function(z){return new(z||Z)},Z.\u0275mod=C.oAB({type:Z}),Z.\u0275inj=C.cJS({}),Z})();const ro=new C.OlP("NgModelWithFormControlWarning"),_o={provide:At,useExisting:(0,C.Gpc)(()=>Zs)};let Zs=(()=>{class Z extends At{constructor(z,It,Fe,bi){super(),this._ngModelWarningConfig=bi,this.update=new C.vpe,this._ngModelWarningSent=!1,this._setValidators(z),this._setAsyncValidators(It),this.valueAccessor=yn(0,Fe)}set isDisabled(z){}ngOnChanges(z){if(this._isControlChanged(z)){const It=z.form.previousValue;It&&Ce(It,this,!1),Zi(this.form,this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this.form.updateValueAndValidity({emitEvent:!1})}Ae(z,this.viewModel)&&(this.form.setValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.form&&Ce(this.form,this,!1)}get path(){return[]}get control(){return this.form}viewToModelUpdate(z){this.viewModel=z,this.update.emit(z)}_isControlChanged(z){return z.hasOwnProperty("form")}}return Z._ngModelWarningSentOnce=!1,Z.\u0275fac=function(z){return new(z||Z)(C.Y36(vt,10),C.Y36(xt,10),C.Y36(u,10),C.Y36(ro,8))},Z.\u0275dir=C.lG2({type:Z,selectors:[["","formControl",""]],inputs:{form:["formControl","form"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},exportAs:["ngForm"],features:[C._Bn([_o]),C.qOj,C.TTD]}),Z})();const lr={provide:pe,useExisting:(0,C.Gpc)(()=>Yo)};let Yo=(()=>{class Z extends pe{constructor(z,It){super(),this.validators=z,this.asyncValidators=It,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new C.vpe,this._setValidators(z),this._setAsyncValidators(It)}ngOnChanges(z){this._checkFormPresent(),z.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Ii(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(z){const It=this.form.get(z.path);return Zi(It,z),It.updateValueAndValidity({emitEvent:!1}),this.directives.push(z),It}getControl(z){return this.form.get(z.path)}removeControl(z){Ce(z.control||null,z,!1),tr(this.directives,z)}addFormGroup(z){this._setUpFormContainer(z)}removeFormGroup(z){this._cleanUpFormContainer(z)}getFormGroup(z){return this.form.get(z.path)}addFormArray(z){this._setUpFormContainer(z)}removeFormArray(z){this._cleanUpFormContainer(z)}getFormArray(z){return this.form.get(z.path)}updateModel(z,It){this.form.get(z.path).setValue(It)}onSubmit(z){return this.submitted=!0,Qi(this.form,this.directives),this.ngSubmit.emit(z),!1}onReset(){this.resetForm()}resetForm(z){this.form.reset(z),this.submitted=!1}_updateDomValue(){this.directives.forEach(z=>{const It=z.control,Fe=this.form.get(z.path);It!==Fe&&(Ce(It||null,z),Fe instanceof kr&&(Zi(Fe,z),z.control=Fe))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(z){const It=this.form.get(z.path);kt(It,z),It.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(z){if(this.form){const It=this.form.get(z.path);It&&function(Z,V){return Ii(Z,V)}(It,z)&&It.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){je(this.form,this),this._oldForm&&Ii(this._oldForm,this)}_checkFormPresent(){}}return Z.\u0275fac=function(z){return new(z||Z)(C.Y36(vt,10),C.Y36(xt,10))},Z.\u0275dir=C.lG2({type:Z,selectors:[["","formGroup",""]],hostBindings:function(z,It){1&z&&C.NdJ("submit",function(bi){return It.onSubmit(bi)})("reset",function(){return It.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[C._Bn([lr]),C.qOj,C.TTD]}),Z})();const Xo={provide:vt,useExisting:(0,C.Gpc)(()=>zo),multi:!0},Rs={provide:vt,useExisting:(0,C.Gpc)(()=>xo),multi:!0};let zo=(()=>{class Z{constructor(){this._required=!1}get required(){return this._required}set required(z){this._required=null!=z&&!1!==z&&"false"!=`${z}`,this._onChange&&this._onChange()}validate(z){return this.required?ot(z):null}registerOnValidatorChange(z){this._onChange=z}}return Z.\u0275fac=function(z){return new(z||Z)},Z.\u0275dir=C.lG2({type:Z,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(z,It){2&z&&C.uIk("required",It.required?"":null)},inputs:{required:"required"},features:[C._Bn([Xo])]}),Z})(),xo=(()=>{class Z extends zo{validate(z){return this.required?mt(z):null}}return Z.\u0275fac=function(){let V;return function(It){return(V||(V=C.n5z(Z)))(It||Z)}}(),Z.\u0275dir=C.lG2({type:Z,selectors:[["input","type","checkbox","required","","formControlName",""],["input","type","checkbox","required","","formControl",""],["input","type","checkbox","required","","ngModel",""]],hostVars:1,hostBindings:function(z,It){2&z&&C.uIk("required",It.required?"":null)},features:[C._Bn([Rs]),C.qOj]}),Z})(),ms=(()=>{class Z{}return Z.\u0275fac=function(z){return new(z||Z)},Z.\u0275mod=C.oAB({type:Z}),Z.\u0275inj=C.cJS({imports:[[zn]]}),Z})(),bl=(()=>{class Z{}return Z.\u0275fac=function(z){return new(z||Z)},Z.\u0275mod=C.oAB({type:Z}),Z.\u0275inj=C.cJS({imports:[ms]}),Z})(),Nr=(()=>{class Z{static withConfig(z){return{ngModule:Z,providers:[{provide:ro,useValue:z.warnOnNgModelWithFormControl}]}}}return Z.\u0275fac=function(z){return new(z||Z)},Z.\u0275mod=C.oAB({type:Z}),Z.\u0275inj=C.cJS({imports:[ms]}),Z})()},91079:(U,$,m)=>{"use strict";m.d($,{XC:()=>ve,Bb:()=>Te,ZL:()=>Le});var C=m(15664),_=m(63191),e=m(5e3),t=m(90508),n=m(50727),r=m(77579),s=m(49770),u=m(56451),y=m(39646),x=m(54968),B=m(70925),Q=m(69808),at=m(91314),rt=m(30495),St=m(91159),Ht=m(47429),vt=m(93075),xt=m(67322),Wt=m(95698),Jt=m(63900),Ct=m(39300),yt=m(54004),ot=m(18505),mt=m(91005),lt=m(50226);const Ut=["panel"];function Rt($t,_e){if(1&$t&&(e.TgZ(0,"div",0,1),e.Hsn(2),e.qZA()),2&$t){const At=_e.id,pe=e.oxw();e.Q6J("id",pe.id)("ngClass",pe._classList),e.uIk("aria-label",pe.ariaLabel||null)("aria-labelledby",pe._getPanelAriaLabelledby(At))}}const Et=["*"];let ht=0;class nt{constructor(_e,At){this.source=_e,this.option=At}}const he=(0,t.Kr)(class{}),Mt=new e.OlP("mat-autocomplete-default-options",{providedIn:"root",factory:function(){return{autoActiveFirstOption:!1}}});let de=(()=>{class $t extends he{constructor(At,pe,ze,hi){super(),this._changeDetectorRef=At,this._elementRef=pe,this._activeOptionChanges=n.w0.EMPTY,this.showPanel=!1,this._isOpen=!1,this.displayWith=null,this.optionSelected=new e.vpe,this.opened=new e.vpe,this.closed=new e.vpe,this.optionActivated=new e.vpe,this._classList={},this.id="mat-autocomplete-"+ht++,this.inertGroups=(null==hi?void 0:hi.SAFARI)||!1,this._autoActiveFirstOption=!!ze.autoActiveFirstOption}get isOpen(){return this._isOpen&&this.showPanel}get autoActiveFirstOption(){return this._autoActiveFirstOption}set autoActiveFirstOption(At){this._autoActiveFirstOption=(0,_.Ig)(At)}set classList(At){this._classList=At&&At.length?(0,_.du)(At).reduce((pe,ze)=>(pe[ze]=!0,pe),{}):{},this._setVisibilityClasses(this._classList),this._elementRef.nativeElement.className=""}ngAfterContentInit(){this._keyManager=new C.s1(this.options).withWrap(),this._activeOptionChanges=this._keyManager.change.subscribe(At=>{this.isOpen&&this.optionActivated.emit({source:this,option:this.options.toArray()[At]||null})}),this._setVisibility()}ngOnDestroy(){this._activeOptionChanges.unsubscribe()}_setScrollTop(At){this.panel&&(this.panel.nativeElement.scrollTop=At)}_getScrollTop(){return this.panel?this.panel.nativeElement.scrollTop:0}_setVisibility(){this.showPanel=!!this.options.length,this._setVisibilityClasses(this._classList),this._changeDetectorRef.markForCheck()}_emitSelectEvent(At){const pe=new nt(this,At);this.optionSelected.emit(pe)}_getPanelAriaLabelledby(At){return this.ariaLabel?null:this.ariaLabelledby?(At?At+" ":"")+this.ariaLabelledby:At}_setVisibilityClasses(At){At[this._visibleClass]=this.showPanel,At[this._hiddenClass]=!this.showPanel}}return $t.\u0275fac=function(At){return new(At||$t)(e.Y36(e.sBO),e.Y36(e.SBq),e.Y36(Mt),e.Y36(B.t4))},$t.\u0275dir=e.lG2({type:$t,viewQuery:function(At,pe){if(1&At&&(e.Gf(e.Rgc,7),e.Gf(Ut,5)),2&At){let ze;e.iGM(ze=e.CRH())&&(pe.template=ze.first),e.iGM(ze=e.CRH())&&(pe.panel=ze.first)}},inputs:{ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],displayWith:"displayWith",autoActiveFirstOption:"autoActiveFirstOption",panelWidth:"panelWidth",classList:["class","classList"]},outputs:{optionSelected:"optionSelected",opened:"opened",closed:"closed",optionActivated:"optionActivated"},features:[e.qOj]}),$t})(),ve=(()=>{class $t extends de{constructor(){super(...arguments),this._visibleClass="mat-autocomplete-visible",this._hiddenClass="mat-autocomplete-hidden"}}return $t.\u0275fac=function(){let _e;return function(pe){return(_e||(_e=e.n5z($t)))(pe||$t)}}(),$t.\u0275cmp=e.Xpm({type:$t,selectors:[["mat-autocomplete"]],contentQueries:function(At,pe,ze){if(1&At&&(e.Suo(ze,t.K7,5),e.Suo(ze,t.ey,5)),2&At){let hi;e.iGM(hi=e.CRH())&&(pe.optionGroups=hi),e.iGM(hi=e.CRH())&&(pe.options=hi)}},hostAttrs:[1,"mat-autocomplete"],inputs:{disableRipple:"disableRipple"},exportAs:["matAutocomplete"],features:[e._Bn([{provide:t.HF,useExisting:$t}]),e.qOj],ngContentSelectors:Et,decls:1,vars:0,consts:[["role","listbox",1,"mat-autocomplete-panel",3,"id","ngClass"],["panel",""]],template:function(At,pe){1&At&&(e.F$t(),e.YNc(0,Rt,3,4,"ng-template"))},directives:[Q.mk],styles:[".mat-autocomplete-panel{min-width:112px;max-width:280px;overflow:auto;-webkit-overflow-scrolling:touch;visibility:hidden;max-width:none;max-height:256px;position:relative;width:100%;border-bottom-left-radius:4px;border-bottom-right-radius:4px}.mat-autocomplete-panel.mat-autocomplete-visible{visibility:visible}.mat-autocomplete-panel.mat-autocomplete-hidden{visibility:hidden}.mat-autocomplete-panel-above .mat-autocomplete-panel{border-radius:0;border-top-left-radius:4px;border-top-right-radius:4px}.mat-autocomplete-panel .mat-divider-horizontal{margin-top:-1px}.cdk-high-contrast-active .mat-autocomplete-panel{outline:solid 1px}mat-autocomplete{display:none}\n"],encapsulation:2,changeDetection:0}),$t})();const ue=new e.OlP("mat-autocomplete-scroll-strategy"),Ne={provide:ue,deps:[at.aV],useFactory:function($t){return()=>$t.scrollStrategies.reposition()}},Qe={provide:vt.JU,useExisting:(0,e.Gpc)(()=>Le),multi:!0};let Ze=(()=>{class $t{constructor(At,pe,ze,hi,Ie,te,ee,ke,ne,me,ye){this._element=At,this._overlay=pe,this._viewContainerRef=ze,this._zone=hi,this._changeDetectorRef=Ie,this._dir=ee,this._formField=ke,this._document=ne,this._viewportRuler=me,this._defaults=ye,this._componentDestroyed=!1,this._autocompleteDisabled=!1,this._manuallyFloatingLabel=!1,this._viewportSubscription=n.w0.EMPTY,this._canOpenOnNextFocus=!0,this._closeKeyEventStream=new r.x,this._windowBlurHandler=()=>{this._canOpenOnNextFocus=this._document.activeElement!==this._element.nativeElement||this.panelOpen},this._onChange=()=>{},this._onTouched=()=>{},this.position="auto",this.autocompleteAttribute="off",this._overlayAttached=!1,this.optionSelections=(0,s.P)(()=>this.autocomplete&&this.autocomplete.options?(0,u.T)(...this.autocomplete.options.map(Zt=>Zt.onSelectionChange)):this._zone.onStable.pipe((0,Wt.q)(1),(0,Jt.w)(()=>this.optionSelections))),this._scrollStrategy=te}get autocompleteDisabled(){return this._autocompleteDisabled}set autocompleteDisabled(At){this._autocompleteDisabled=(0,_.Ig)(At)}ngAfterViewInit(){const At=this._getWindow();void 0!==At&&this._zone.runOutsideAngular(()=>At.addEventListener("blur",this._windowBlurHandler))}ngOnChanges(At){At.position&&this._positionStrategy&&(this._setStrategyPositions(this._positionStrategy),this.panelOpen&&this._overlayRef.updatePosition())}ngOnDestroy(){const At=this._getWindow();void 0!==At&&At.removeEventListener("blur",this._windowBlurHandler),this._viewportSubscription.unsubscribe(),this._componentDestroyed=!0,this._destroyPanel(),this._closeKeyEventStream.complete()}get panelOpen(){return this._overlayAttached&&this.autocomplete.showPanel}openPanel(){this._attachOverlay(),this._floatLabel()}closePanel(){this._resetLabel(),this._overlayAttached&&(this.panelOpen&&this.autocomplete.closed.emit(),this.autocomplete._isOpen=this._overlayAttached=!1,this._overlayRef&&this._overlayRef.hasAttached()&&(this._overlayRef.detach(),this._closingActionsSubscription.unsubscribe()),this._componentDestroyed||this._changeDetectorRef.detectChanges())}updatePosition(){this._overlayAttached&&this._overlayRef.updatePosition()}get panelClosingActions(){return(0,u.T)(this.optionSelections,this.autocomplete._keyManager.tabOut.pipe((0,Ct.h)(()=>this._overlayAttached)),this._closeKeyEventStream,this._getOutsideClickStream(),this._overlayRef?this._overlayRef.detachments().pipe((0,Ct.h)(()=>this._overlayAttached)):(0,y.of)()).pipe((0,yt.U)(At=>At instanceof t.rN?At:null))}get activeOption(){return this.autocomplete&&this.autocomplete._keyManager?this.autocomplete._keyManager.activeItem:null}_getOutsideClickStream(){return(0,u.T)((0,x.R)(this._document,"click"),(0,x.R)(this._document,"auxclick"),(0,x.R)(this._document,"touchend")).pipe((0,Ct.h)(At=>{const pe=(0,B.sA)(At),ze=this._formField?this._formField._elementRef.nativeElement:null,hi=this.connectedTo?this.connectedTo.elementRef.nativeElement:null;return this._overlayAttached&&pe!==this._element.nativeElement&&(!ze||!ze.contains(pe))&&(!hi||!hi.contains(pe))&&!!this._overlayRef&&!this._overlayRef.overlayElement.contains(pe)}))}writeValue(At){Promise.resolve(null).then(()=>this._setTriggerValue(At))}registerOnChange(At){this._onChange=At}registerOnTouched(At){this._onTouched=At}setDisabledState(At){this._element.nativeElement.disabled=At}_handleKeydown(At){const pe=At.keyCode;if(pe===St.hY&&!(0,St.Vb)(At)&&At.preventDefault(),this.activeOption&&pe===St.K5&&this.panelOpen)this.activeOption._selectViaInteraction(),this._resetActiveItem(),At.preventDefault();else if(this.autocomplete){const ze=this.autocomplete._keyManager.activeItem,hi=pe===St.LH||pe===St.JH;this.panelOpen||pe===St.Mf?this.autocomplete._keyManager.onKeydown(At):hi&&this._canOpen()&&this.openPanel(),(hi||this.autocomplete._keyManager.activeItem!==ze)&&this._scrollToOption(this.autocomplete._keyManager.activeItemIndex||0)}}_handleInput(At){let pe=At.target,ze=pe.value;"number"===pe.type&&(ze=""==ze?null:parseFloat(ze)),this._previousValue!==ze&&(this._previousValue=ze,this._onChange(ze),this._canOpen()&&this._document.activeElement===At.target&&this.openPanel())}_handleFocus(){this._canOpenOnNextFocus?this._canOpen()&&(this._previousValue=this._element.nativeElement.value,this._attachOverlay(),this._floatLabel(!0)):this._canOpenOnNextFocus=!0}_floatLabel(At=!1){this._formField&&"auto"===this._formField.floatLabel&&(At?this._formField._animateAndLockLabel():this._formField.floatLabel="always",this._manuallyFloatingLabel=!0)}_resetLabel(){this._manuallyFloatingLabel&&(this._formField.floatLabel="auto",this._manuallyFloatingLabel=!1)}_subscribeToClosingActions(){const At=this._zone.onStable.pipe((0,Wt.q)(1)),pe=this.autocomplete.options.changes.pipe((0,ot.b)(()=>this._positionStrategy.reapplyLastPosition()),(0,mt.g)(0));return(0,u.T)(At,pe).pipe((0,Jt.w)(()=>{const ze=this.panelOpen;return this._resetActiveItem(),this.autocomplete._setVisibility(),this.panelOpen&&(this._overlayRef.updatePosition(),ze!==this.panelOpen&&this.autocomplete.opened.emit()),this.panelClosingActions}),(0,Wt.q)(1)).subscribe(ze=>this._setValueAndClose(ze))}_destroyPanel(){this._overlayRef&&(this.closePanel(),this._overlayRef.dispose(),this._overlayRef=null)}_setTriggerValue(At){const pe=this.autocomplete&&this.autocomplete.displayWith?this.autocomplete.displayWith(At):At,ze=null!=pe?pe:"";this._formField?this._formField._control.value=ze:this._element.nativeElement.value=ze,this._previousValue=ze}_setValueAndClose(At){At&&At.source&&(this._clearPreviousSelectedOption(At.source),this._setTriggerValue(At.source.value),this._onChange(At.source.value),this._element.nativeElement.focus(),this.autocomplete._emitSelectEvent(At.source)),this.closePanel()}_clearPreviousSelectedOption(At){this.autocomplete.options.forEach(pe=>{pe!==At&&pe.selected&&pe.deselect()})}_attachOverlay(){var At;let pe=this._overlayRef;pe?(this._positionStrategy.setOrigin(this._getConnectedElement()),pe.updateSize({width:this._getPanelWidth()})):(this._portal=new Ht.UE(this.autocomplete.template,this._viewContainerRef,{id:null===(At=this._formField)||void 0===At?void 0:At.getLabelId()}),pe=this._overlay.create(this._getOverlayConfig()),this._overlayRef=pe,pe.keydownEvents().subscribe(hi=>{(hi.keyCode===St.hY&&!(0,St.Vb)(hi)||hi.keyCode===St.LH&&(0,St.Vb)(hi,"altKey"))&&(this._closeKeyEventStream.next(),this._resetActiveItem(),hi.stopPropagation(),hi.preventDefault())}),this._viewportSubscription=this._viewportRuler.change().subscribe(()=>{this.panelOpen&&pe&&pe.updateSize({width:this._getPanelWidth()})})),pe&&!pe.hasAttached()&&(pe.attach(this._portal),this._closingActionsSubscription=this._subscribeToClosingActions());const ze=this.panelOpen;this.autocomplete._setVisibility(),this.autocomplete._isOpen=this._overlayAttached=!0,this.panelOpen&&ze!==this.panelOpen&&this.autocomplete.opened.emit()}_getOverlayConfig(){var At;return new at.X_({positionStrategy:this._getOverlayPosition(),scrollStrategy:this._scrollStrategy(),width:this._getPanelWidth(),direction:this._dir,panelClass:null===(At=this._defaults)||void 0===At?void 0:At.overlayPanelClass})}_getOverlayPosition(){const At=this._overlay.position().flexibleConnectedTo(this._getConnectedElement()).withFlexibleDimensions(!1).withPush(!1);return this._setStrategyPositions(At),this._positionStrategy=At,At}_setStrategyPositions(At){const pe=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"}],ze=this._aboveClass,hi=[{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom",panelClass:ze},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom",panelClass:ze}];let Ie;Ie="above"===this.position?hi:"below"===this.position?pe:[...pe,...hi],At.withPositions(Ie)}_getConnectedElement(){return this.connectedTo?this.connectedTo.elementRef:this._formField?this._formField.getConnectedOverlayOrigin():this._element}_getPanelWidth(){return this.autocomplete.panelWidth||this._getHostWidth()}_getHostWidth(){return this._getConnectedElement().nativeElement.getBoundingClientRect().width}_resetActiveItem(){const At=this.autocomplete;At.autoActiveFirstOption?At._keyManager.setFirstItemActive():At._keyManager.setActiveItem(-1)}_canOpen(){const At=this._element.nativeElement;return!At.readOnly&&!At.disabled&&!this._autocompleteDisabled}_getWindow(){var At;return(null===(At=this._document)||void 0===At?void 0:At.defaultView)||window}_scrollToOption(At){const pe=this.autocomplete,ze=(0,t.CB)(At,pe.options,pe.optionGroups);if(0===At&&1===ze)pe._setScrollTop(0);else if(pe.panel){const hi=pe.options.toArray()[At];if(hi){const Ie=hi._getHostElement(),te=(0,t.jH)(Ie.offsetTop,Ie.offsetHeight,pe._getScrollTop(),pe.panel.nativeElement.offsetHeight);pe._setScrollTop(te)}}}}return $t.\u0275fac=function(At){return new(At||$t)(e.Y36(e.SBq),e.Y36(at.aV),e.Y36(e.s_b),e.Y36(e.R0b),e.Y36(e.sBO),e.Y36(ue),e.Y36(lt.Is,8),e.Y36(xt.G_,9),e.Y36(Q.K0,8),e.Y36(rt.rL),e.Y36(Mt,8))},$t.\u0275dir=e.lG2({type:$t,inputs:{autocomplete:["matAutocomplete","autocomplete"],position:["matAutocompletePosition","position"],connectedTo:["matAutocompleteConnectedTo","connectedTo"],autocompleteAttribute:["autocomplete","autocompleteAttribute"],autocompleteDisabled:["matAutocompleteDisabled","autocompleteDisabled"]},features:[e.TTD]}),$t})(),Le=(()=>{class $t extends Ze{constructor(){super(...arguments),this._aboveClass="mat-autocomplete-panel-above"}}return $t.\u0275fac=function(){let _e;return function(pe){return(_e||(_e=e.n5z($t)))(pe||$t)}}(),$t.\u0275dir=e.lG2({type:$t,selectors:[["input","matAutocomplete",""],["textarea","matAutocomplete",""]],hostAttrs:[1,"mat-autocomplete-trigger"],hostVars:7,hostBindings:function(At,pe){1&At&&e.NdJ("focusin",function(){return pe._handleFocus()})("blur",function(){return pe._onTouched()})("input",function(hi){return pe._handleInput(hi)})("keydown",function(hi){return pe._handleKeydown(hi)}),2&At&&e.uIk("autocomplete",pe.autocompleteAttribute)("role",pe.autocompleteDisabled?null:"combobox")("aria-autocomplete",pe.autocompleteDisabled?null:"list")("aria-activedescendant",pe.panelOpen&&pe.activeOption?pe.activeOption.id:null)("aria-expanded",pe.autocompleteDisabled?null:pe.panelOpen.toString())("aria-owns",pe.autocompleteDisabled||!pe.panelOpen||null==pe.autocomplete?null:pe.autocomplete.id)("aria-haspopup",!pe.autocompleteDisabled)},exportAs:["matAutocompleteTrigger"],features:[e._Bn([Qe]),e.qOj]}),$t})(),Te=(()=>{class $t{}return $t.\u0275fac=function(At){return new(At||$t)},$t.\u0275mod=e.oAB({type:$t}),$t.\u0275inj=e.cJS({providers:[Ne],imports:[[at.U8,t.Ng,t.BQ,Q.ez],rt.ZD,t.Ng,t.BQ]}),$t})()},47423:(U,$,m)=>{"use strict";m.d($,{zs:()=>Q,lW:()=>B,ot:()=>at});var C=m(5e3),_=m(90508),e=m(76360),t=m(15664);const n=["mat-button",""],r=["*"],y=["mat-button","mat-flat-button","mat-icon-button","mat-raised-button","mat-stroked-button","mat-mini-fab","mat-fab"],x=(0,_.pj)((0,_.Id)((0,_.Kr)(class{constructor(rt){this._elementRef=rt}})));let B=(()=>{class rt extends x{constructor(Ht,vt,xt){super(Ht),this._focusMonitor=vt,this._animationMode=xt,this.isRoundButton=this._hasHostAttributes("mat-fab","mat-mini-fab"),this.isIconButton=this._hasHostAttributes("mat-icon-button");for(const Wt of y)this._hasHostAttributes(Wt)&&this._getHostElement().classList.add(Wt);Ht.nativeElement.classList.add("mat-button-base"),this.isRoundButton&&(this.color="accent")}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}focus(Ht,vt){Ht?this._focusMonitor.focusVia(this._getHostElement(),Ht,vt):this._getHostElement().focus(vt)}_getHostElement(){return this._elementRef.nativeElement}_isRippleDisabled(){return this.disableRipple||this.disabled}_hasHostAttributes(...Ht){return Ht.some(vt=>this._getHostElement().hasAttribute(vt))}}return rt.\u0275fac=function(Ht){return new(Ht||rt)(C.Y36(C.SBq),C.Y36(t.tE),C.Y36(e.Qb,8))},rt.\u0275cmp=C.Xpm({type:rt,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-icon-button",""],["button","mat-fab",""],["button","mat-mini-fab",""],["button","mat-stroked-button",""],["button","mat-flat-button",""]],viewQuery:function(Ht,vt){if(1&Ht&&C.Gf(_.wG,5),2&Ht){let xt;C.iGM(xt=C.CRH())&&(vt.ripple=xt.first)}},hostAttrs:[1,"mat-focus-indicator"],hostVars:5,hostBindings:function(Ht,vt){2&Ht&&(C.uIk("disabled",vt.disabled||null),C.ekj("_mat-animation-noopable","NoopAnimations"===vt._animationMode)("mat-button-disabled",vt.disabled))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[C.qOj],attrs:n,ngContentSelectors:r,decls:4,vars:5,consts:[[1,"mat-button-wrapper"],["matRipple","",1,"mat-button-ripple",3,"matRippleDisabled","matRippleCentered","matRippleTrigger"],[1,"mat-button-focus-overlay"]],template:function(Ht,vt){1&Ht&&(C.F$t(),C.TgZ(0,"span",0),C.Hsn(1),C.qZA(),C._UZ(2,"span",1),C._UZ(3,"span",2)),2&Ht&&(C.xp6(2),C.ekj("mat-button-ripple-round",vt.isRoundButton||vt.isIconButton),C.Q6J("matRippleDisabled",vt._isRippleDisabled())("matRippleCentered",vt.isIconButton)("matRippleTrigger",vt._getHostElement()))},directives:[_.wG],styles:[".mat-button .mat-button-focus-overlay,.mat-icon-button .mat-button-focus-overlay{opacity:0}.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:.04}@media(hover: none){.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:0}}.mat-button,.mat-icon-button,.mat-stroked-button,.mat-flat-button{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-button.mat-button-disabled,.mat-icon-button.mat-button-disabled,.mat-stroked-button.mat-button-disabled,.mat-flat-button.mat-button-disabled{cursor:default}.mat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-button.cdk-program-focused .mat-button-focus-overlay,.mat-icon-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-icon-button.cdk-program-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-program-focused .mat-button-focus-overlay,.mat-flat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-flat-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-raised-button{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button.mat-button-disabled{cursor:default}.mat-raised-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-raised-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-raised-button::-moz-focus-inner{border:0}._mat-animation-noopable.mat-raised-button{transition:none;animation:none}.mat-stroked-button{border:1px solid currentColor;padding:0 15px;line-height:34px}.mat-stroked-button .mat-button-ripple.mat-ripple,.mat-stroked-button .mat-button-focus-overlay{top:-1px;left:-1px;right:-1px;bottom:-1px}.mat-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:56px;height:56px;padding:0;flex-shrink:0}.mat-fab::-moz-focus-inner{border:0}.mat-fab.mat-button-disabled{cursor:default}.mat-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-fab{transition:none;animation:none}.mat-fab .mat-button-wrapper{padding:16px 0;display:inline-block;line-height:24px}.mat-mini-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:40px;height:40px;padding:0;flex-shrink:0}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab.mat-button-disabled{cursor:default}.mat-mini-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-mini-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-mini-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-mini-fab{transition:none;animation:none}.mat-mini-fab .mat-button-wrapper{padding:8px 0;display:inline-block;line-height:24px}.mat-icon-button{padding:0;min-width:0;width:40px;height:40px;flex-shrink:0;line-height:40px;border-radius:50%}.mat-icon-button i,.mat-icon-button .mat-icon{line-height:24px}.mat-button-ripple.mat-ripple,.mat-button-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-button-ripple.mat-ripple:not(:empty){transform:translateZ(0)}.mat-button-focus-overlay{opacity:0;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1),background-color 200ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable .mat-button-focus-overlay{transition:none}.mat-button-ripple-round{border-radius:50%;z-index:1}.mat-button .mat-button-wrapper>*,.mat-flat-button .mat-button-wrapper>*,.mat-stroked-button .mat-button-wrapper>*,.mat-raised-button .mat-button-wrapper>*,.mat-icon-button .mat-button-wrapper>*,.mat-fab .mat-button-wrapper>*,.mat-mini-fab .mat-button-wrapper>*{vertical-align:middle}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button{display:inline-flex;justify-content:center;align-items:center;font-size:inherit;width:2.5em;height:2.5em}.cdk-high-contrast-active .mat-button,.cdk-high-contrast-active .mat-flat-button,.cdk-high-contrast-active .mat-raised-button,.cdk-high-contrast-active .mat-icon-button,.cdk-high-contrast-active .mat-fab,.cdk-high-contrast-active .mat-mini-fab{outline:solid 1px}.cdk-high-contrast-active .mat-button-base.cdk-keyboard-focused,.cdk-high-contrast-active .mat-button-base.cdk-program-focused{outline:solid 3px}\n"],encapsulation:2,changeDetection:0}),rt})(),Q=(()=>{class rt extends B{constructor(Ht,vt,xt){super(vt,Ht,xt)}_haltDisabledEvents(Ht){this.disabled&&(Ht.preventDefault(),Ht.stopImmediatePropagation())}}return rt.\u0275fac=function(Ht){return new(Ht||rt)(C.Y36(t.tE),C.Y36(C.SBq),C.Y36(e.Qb,8))},rt.\u0275cmp=C.Xpm({type:rt,selectors:[["a","mat-button",""],["a","mat-raised-button",""],["a","mat-icon-button",""],["a","mat-fab",""],["a","mat-mini-fab",""],["a","mat-stroked-button",""],["a","mat-flat-button",""]],hostAttrs:[1,"mat-focus-indicator"],hostVars:7,hostBindings:function(Ht,vt){1&Ht&&C.NdJ("click",function(Wt){return vt._haltDisabledEvents(Wt)}),2&Ht&&(C.uIk("tabindex",vt.disabled?-1:vt.tabIndex||0)("disabled",vt.disabled||null)("aria-disabled",vt.disabled.toString()),C.ekj("_mat-animation-noopable","NoopAnimations"===vt._animationMode)("mat-button-disabled",vt.disabled))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color",tabIndex:"tabIndex"},exportAs:["matButton","matAnchor"],features:[C.qOj],attrs:n,ngContentSelectors:r,decls:4,vars:5,consts:[[1,"mat-button-wrapper"],["matRipple","",1,"mat-button-ripple",3,"matRippleDisabled","matRippleCentered","matRippleTrigger"],[1,"mat-button-focus-overlay"]],template:function(Ht,vt){1&Ht&&(C.F$t(),C.TgZ(0,"span",0),C.Hsn(1),C.qZA(),C._UZ(2,"span",1),C._UZ(3,"span",2)),2&Ht&&(C.xp6(2),C.ekj("mat-button-ripple-round",vt.isRoundButton||vt.isIconButton),C.Q6J("matRippleDisabled",vt._isRippleDisabled())("matRippleCentered",vt.isIconButton)("matRippleTrigger",vt._getHostElement()))},directives:[_.wG],styles:[".mat-button .mat-button-focus-overlay,.mat-icon-button .mat-button-focus-overlay{opacity:0}.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:.04}@media(hover: none){.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:0}}.mat-button,.mat-icon-button,.mat-stroked-button,.mat-flat-button{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-button.mat-button-disabled,.mat-icon-button.mat-button-disabled,.mat-stroked-button.mat-button-disabled,.mat-flat-button.mat-button-disabled{cursor:default}.mat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-button.cdk-program-focused .mat-button-focus-overlay,.mat-icon-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-icon-button.cdk-program-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-program-focused .mat-button-focus-overlay,.mat-flat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-flat-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-raised-button{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button.mat-button-disabled{cursor:default}.mat-raised-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-raised-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-raised-button::-moz-focus-inner{border:0}._mat-animation-noopable.mat-raised-button{transition:none;animation:none}.mat-stroked-button{border:1px solid currentColor;padding:0 15px;line-height:34px}.mat-stroked-button .mat-button-ripple.mat-ripple,.mat-stroked-button .mat-button-focus-overlay{top:-1px;left:-1px;right:-1px;bottom:-1px}.mat-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:56px;height:56px;padding:0;flex-shrink:0}.mat-fab::-moz-focus-inner{border:0}.mat-fab.mat-button-disabled{cursor:default}.mat-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-fab{transition:none;animation:none}.mat-fab .mat-button-wrapper{padding:16px 0;display:inline-block;line-height:24px}.mat-mini-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:40px;height:40px;padding:0;flex-shrink:0}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab.mat-button-disabled{cursor:default}.mat-mini-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-mini-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-mini-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-mini-fab{transition:none;animation:none}.mat-mini-fab .mat-button-wrapper{padding:8px 0;display:inline-block;line-height:24px}.mat-icon-button{padding:0;min-width:0;width:40px;height:40px;flex-shrink:0;line-height:40px;border-radius:50%}.mat-icon-button i,.mat-icon-button .mat-icon{line-height:24px}.mat-button-ripple.mat-ripple,.mat-button-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-button-ripple.mat-ripple:not(:empty){transform:translateZ(0)}.mat-button-focus-overlay{opacity:0;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1),background-color 200ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable .mat-button-focus-overlay{transition:none}.mat-button-ripple-round{border-radius:50%;z-index:1}.mat-button .mat-button-wrapper>*,.mat-flat-button .mat-button-wrapper>*,.mat-stroked-button .mat-button-wrapper>*,.mat-raised-button .mat-button-wrapper>*,.mat-icon-button .mat-button-wrapper>*,.mat-fab .mat-button-wrapper>*,.mat-mini-fab .mat-button-wrapper>*{vertical-align:middle}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button{display:inline-flex;justify-content:center;align-items:center;font-size:inherit;width:2.5em;height:2.5em}.cdk-high-contrast-active .mat-button,.cdk-high-contrast-active .mat-flat-button,.cdk-high-contrast-active .mat-raised-button,.cdk-high-contrast-active .mat-icon-button,.cdk-high-contrast-active .mat-fab,.cdk-high-contrast-active .mat-mini-fab{outline:solid 1px}.cdk-high-contrast-active .mat-button-base.cdk-keyboard-focused,.cdk-high-contrast-active .mat-button-base.cdk-program-focused{outline:solid 3px}\n"],encapsulation:2,changeDetection:0}),rt})(),at=(()=>{class rt{}return rt.\u0275fac=function(Ht){return new(Ht||rt)},rt.\u0275mod=C.oAB({type:rt}),rt.\u0275inj=C.cJS({imports:[[_.si,_.BQ],_.BQ]}),rt})()},90508:(U,$,m)=>{"use strict";m.d($,{yN:()=>xt,mZ:()=>Wt,_A:()=>ve,rD:()=>Bt,sG:()=>ue,K7:()=>mi,HF:()=>Fi,Y2:()=>ye,BQ:()=>ot,X2:()=>Te,uc:()=>At,XK:()=>Le,ey:()=>je,Ng:()=>Ui,rN:()=>Oe,nP:()=>ei,us:()=>ni,wG:()=>Zt,si:()=>ce,IR:()=>ke,CB:()=>Ii,jH:()=>_i,pj:()=>Et,Kr:()=>ht,Id:()=>Rt,FD:()=>he,sb:()=>nt,E0:()=>$t});var C=m(5e3),_=m(50226),t=m(69808),n=m(70925),r=m(15664),s=m(63191),u=m(77579),y=m(68675),x=m(76360),B=m(91159);function rt($e,fe){if(1&$e&&C._UZ(0,"mat-pseudo-checkbox",4),2&$e){const kt=C.oxw();C.Q6J("state",kt.selected?"checked":"unchecked")("disabled",kt.disabled)}}function St($e,fe){if(1&$e&&(C.TgZ(0,"span",5),C._uU(1),C.qZA()),2&$e){const kt=C.oxw();C.xp6(1),C.hij("(",kt.group.label,")")}}const Ht=["*"];let xt=(()=>{class $e{}return $e.STANDARD_CURVE="cubic-bezier(0.4,0.0,0.2,1)",$e.DECELERATION_CURVE="cubic-bezier(0.0,0.0,0.2,1)",$e.ACCELERATION_CURVE="cubic-bezier(0.4,0.0,1,1)",$e.SHARP_CURVE="cubic-bezier(0.4,0.0,0.6,1)",$e})(),Wt=(()=>{class $e{}return $e.COMPLEX="375ms",$e.ENTERING="225ms",$e.EXITING="195ms",$e})();const yt=new C.OlP("mat-sanity-checks",{providedIn:"root",factory:function(){return!0}});let ot=(()=>{class $e{constructor(kt,ct,Lt){this._sanityChecks=ct,this._document=Lt,this._hasDoneGlobalChecks=!1,kt._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(kt){return!(0,n.Oy)()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[kt])}}return $e.\u0275fac=function(kt){return new(kt||$e)(C.LFG(r.qm),C.LFG(yt,8),C.LFG(t.K0))},$e.\u0275mod=C.oAB({type:$e}),$e.\u0275inj=C.cJS({imports:[[_.vT],_.vT]}),$e})();function Rt($e){return class extends $e{constructor(...fe){super(...fe),this._disabled=!1}get disabled(){return this._disabled}set disabled(fe){this._disabled=(0,s.Ig)(fe)}}}function Et($e,fe){return class extends $e{constructor(...kt){super(...kt),this.defaultColor=fe,this.color=fe}get color(){return this._color}set color(kt){const ct=kt||this.defaultColor;ct!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),ct&&this._elementRef.nativeElement.classList.add(`mat-${ct}`),this._color=ct)}}}function ht($e){return class extends $e{constructor(...fe){super(...fe),this._disableRipple=!1}get disableRipple(){return this._disableRipple}set disableRipple(fe){this._disableRipple=(0,s.Ig)(fe)}}}function nt($e,fe=0){return class extends $e{constructor(...kt){super(...kt),this._tabIndex=fe,this.defaultTabIndex=fe}get tabIndex(){return this.disabled?-1:this._tabIndex}set tabIndex(kt){this._tabIndex=null!=kt?(0,s.su)(kt):this.defaultTabIndex}}}function he($e){return class extends $e{constructor(...fe){super(...fe),this.stateChanges=new u.x,this.errorState=!1}updateErrorState(){const fe=this.errorState,ae=(this.errorStateMatcher||this._defaultErrorStateMatcher).isErrorState(this.ngControl?this.ngControl.control:null,this._parentFormGroup||this._parentForm);ae!==fe&&(this.errorState=ae,this.stateChanges.next())}}}const Nt=new C.OlP("MAT_DATE_LOCALE",{providedIn:"root",factory:function(){return(0,C.f3M)(C.soG)}});class ve{constructor(){this._localeChanges=new u.x,this.localeChanges=this._localeChanges}getValidDateOrNull(fe){return this.isDateInstance(fe)&&this.isValid(fe)?fe:null}deserialize(fe){return null==fe||this.isDateInstance(fe)&&this.isValid(fe)?fe:this.invalid()}setLocale(fe){this.locale=fe,this._localeChanges.next()}compareDate(fe,kt){return this.getYear(fe)-this.getYear(kt)||this.getMonth(fe)-this.getMonth(kt)||this.getDate(fe)-this.getDate(kt)}sameDate(fe,kt){if(fe&&kt){let ct=this.isValid(fe),Lt=this.isValid(kt);return ct&&Lt?!this.compareDate(fe,kt):ct==Lt}return fe==kt}clampDate(fe,kt,ct){return kt&&this.compareDate(fe,kt)<0?kt:ct&&this.compareDate(fe,ct)>0?ct:fe}}const ue=new C.OlP("mat-date-formats"),Be=/^\d{4}-\d{2}-\d{2}(?:T\d{2}:\d{2}:\d{2}(?:\.\d+)?(?:Z|(?:(?:\+|-)\d{2}:\d{2}))?)?$/;function Ne($e,fe){const kt=Array($e);for(let ct=0;ct<$e;ct++)kt[ct]=fe(ct);return kt}let Qe=(()=>{class $e extends ve{constructor(kt,ct){super(),this.useUtcForDisplay=!1,super.setLocale(kt)}getYear(kt){return kt.getFullYear()}getMonth(kt){return kt.getMonth()}getDate(kt){return kt.getDate()}getDayOfWeek(kt){return kt.getDay()}getMonthNames(kt){const ct=new Intl.DateTimeFormat(this.locale,{month:kt,timeZone:"utc"});return Ne(12,Lt=>this._format(ct,new Date(2017,Lt,1)))}getDateNames(){const kt=new Intl.DateTimeFormat(this.locale,{day:"numeric",timeZone:"utc"});return Ne(31,ct=>this._format(kt,new Date(2017,0,ct+1)))}getDayOfWeekNames(kt){const ct=new Intl.DateTimeFormat(this.locale,{weekday:kt,timeZone:"utc"});return Ne(7,Lt=>this._format(ct,new Date(2017,0,Lt+1)))}getYearName(kt){const ct=new Intl.DateTimeFormat(this.locale,{year:"numeric",timeZone:"utc"});return this._format(ct,kt)}getFirstDayOfWeek(){return 0}getNumDaysInMonth(kt){return this.getDate(this._createDateWithOverflow(this.getYear(kt),this.getMonth(kt)+1,0))}clone(kt){return new Date(kt.getTime())}createDate(kt,ct,Lt){let ae=this._createDateWithOverflow(kt,ct,Lt);return ae.getMonth(),ae}today(){return new Date}parse(kt){return"number"==typeof kt?new Date(kt):kt?new Date(Date.parse(kt)):null}format(kt,ct){if(!this.isValid(kt))throw Error("NativeDateAdapter: Cannot format invalid date.");const Lt=new Intl.DateTimeFormat(this.locale,Object.assign(Object.assign({},ct),{timeZone:"utc"}));return this._format(Lt,kt)}addCalendarYears(kt,ct){return this.addCalendarMonths(kt,12*ct)}addCalendarMonths(kt,ct){let Lt=this._createDateWithOverflow(this.getYear(kt),this.getMonth(kt)+ct,this.getDate(kt));return this.getMonth(Lt)!=((this.getMonth(kt)+ct)%12+12)%12&&(Lt=this._createDateWithOverflow(this.getYear(Lt),this.getMonth(Lt),0)),Lt}addCalendarDays(kt,ct){return this._createDateWithOverflow(this.getYear(kt),this.getMonth(kt),this.getDate(kt)+ct)}toIso8601(kt){return[kt.getUTCFullYear(),this._2digit(kt.getUTCMonth()+1),this._2digit(kt.getUTCDate())].join("-")}deserialize(kt){if("string"==typeof kt){if(!kt)return null;if(Be.test(kt)){let ct=new Date(kt);if(this.isValid(ct))return ct}}return super.deserialize(kt)}isDateInstance(kt){return kt instanceof Date}isValid(kt){return!isNaN(kt.getTime())}invalid(){return new Date(NaN)}_createDateWithOverflow(kt,ct,Lt){const ae=new Date;return ae.setFullYear(kt,ct,Lt),ae.setHours(0,0,0,0),ae}_2digit(kt){return("00"+kt).slice(-2)}_format(kt,ct){const Lt=new Date;return Lt.setUTCFullYear(ct.getFullYear(),ct.getMonth(),ct.getDate()),Lt.setUTCHours(ct.getHours(),ct.getMinutes(),ct.getSeconds(),ct.getMilliseconds()),kt.format(Lt)}}return $e.\u0275fac=function(kt){return new(kt||$e)(C.LFG(Nt,8),C.LFG(n.t4))},$e.\u0275prov=C.Yz7({token:$e,factory:$e.\u0275fac}),$e})();const Di={parse:{dateInput:null},display:{dateInput:{year:"numeric",month:"numeric",day:"numeric"},monthYearLabel:{year:"numeric",month:"short"},dateA11yLabel:{year:"numeric",month:"long",day:"numeric"},monthYearA11yLabel:{year:"numeric",month:"long"}}};let Ze=(()=>{class $e{}return $e.\u0275fac=function(kt){return new(kt||$e)},$e.\u0275mod=C.oAB({type:$e}),$e.\u0275inj=C.cJS({providers:[{provide:ve,useClass:Qe}],imports:[[n.ud]]}),$e})(),Le=(()=>{class $e{}return $e.\u0275fac=function(kt){return new(kt||$e)},$e.\u0275mod=C.oAB({type:$e}),$e.\u0275inj=C.cJS({providers:[{provide:ue,useValue:Di}],imports:[[Ze]]}),$e})(),Bt=(()=>{class $e{isErrorState(kt,ct){return!!(kt&&kt.invalid&&(kt.touched||ct&&ct.submitted))}}return $e.\u0275fac=function(kt){return new(kt||$e)},$e.\u0275prov=C.Yz7({token:$e,factory:$e.\u0275fac,providedIn:"root"}),$e})(),Te=(()=>{class $e{}return $e.\u0275fac=function(kt){return new(kt||$e)},$e.\u0275dir=C.lG2({type:$e,selectors:[["","mat-line",""],["","matLine",""]],hostAttrs:[1,"mat-line"]}),$e})();function $t($e,fe,kt="mat"){$e.changes.pipe((0,y.O)($e)).subscribe(({length:ct})=>{_e(fe,`${kt}-2-line`,!1),_e(fe,`${kt}-3-line`,!1),_e(fe,`${kt}-multi-line`,!1),2===ct||3===ct?_e(fe,`${kt}-${ct}-line`,!0):ct>3&&_e(fe,`${kt}-multi-line`,!0)})}function _e($e,fe,kt){$e.nativeElement.classList.toggle(fe,kt)}let At=(()=>{class $e{}return $e.\u0275fac=function(kt){return new(kt||$e)},$e.\u0275mod=C.oAB({type:$e}),$e.\u0275inj=C.cJS({imports:[[ot],ot]}),$e})();class pe{constructor(fe,kt,ct){this._renderer=fe,this.element=kt,this.config=ct,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const ze={enterDuration:225,exitDuration:150},Ie=(0,n.i$)({passive:!0}),te=["mousedown","touchstart"],ee=["mouseup","mouseleave","touchend","touchcancel"];class ke{constructor(fe,kt,ct,Lt){this._target=fe,this._ngZone=kt,this._isPointerDown=!1,this._activeRipples=new Set,this._pointerUpEventsRegistered=!1,Lt.isBrowser&&(this._containerElement=(0,s.fI)(ct))}fadeInRipple(fe,kt,ct={}){const Lt=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),ae=Object.assign(Object.assign({},ze),ct.animation);ct.centered&&(fe=Lt.left+Lt.width/2,kt=Lt.top+Lt.height/2);const Ae=ct.radius||function($e,fe,kt){const ct=Math.max(Math.abs($e-kt.left),Math.abs($e-kt.right)),Lt=Math.max(Math.abs(fe-kt.top),Math.abs(fe-kt.bottom));return Math.sqrt(ct*ct+Lt*Lt)}(fe,kt,Lt),Wi=fe-Lt.left,Qi=kt-Lt.top,yn=ae.enterDuration,tr=document.createElement("div");tr.classList.add("mat-ripple-element"),tr.style.left=Wi-Ae+"px",tr.style.top=Qi-Ae+"px",tr.style.height=2*Ae+"px",tr.style.width=2*Ae+"px",null!=ct.color&&(tr.style.backgroundColor=ct.color),tr.style.transitionDuration=`${yn}ms`,this._containerElement.appendChild(tr),window.getComputedStyle(tr).getPropertyValue("opacity"),tr.style.transform="scale(1)";const li=new pe(this,tr,ct);return li.state=0,this._activeRipples.add(li),ct.persistent||(this._mostRecentTransientRipple=li),this._runTimeoutOutsideZone(()=>{const Je=li===this._mostRecentTransientRipple;li.state=1,!ct.persistent&&(!Je||!this._isPointerDown)&&li.fadeOut()},yn),li}fadeOutRipple(fe){const kt=this._activeRipples.delete(fe);if(fe===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),this._activeRipples.size||(this._containerRect=null),!kt)return;const ct=fe.element,Lt=Object.assign(Object.assign({},ze),fe.config.animation);ct.style.transitionDuration=`${Lt.exitDuration}ms`,ct.style.opacity="0",fe.state=2,this._runTimeoutOutsideZone(()=>{fe.state=3,ct.remove()},Lt.exitDuration)}fadeOutAll(){this._activeRipples.forEach(fe=>fe.fadeOut())}fadeOutAllNonPersistent(){this._activeRipples.forEach(fe=>{fe.config.persistent||fe.fadeOut()})}setupTriggerEvents(fe){const kt=(0,s.fI)(fe);!kt||kt===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=kt,this._registerEvents(te))}handleEvent(fe){"mousedown"===fe.type?this._onMousedown(fe):"touchstart"===fe.type?this._onTouchStart(fe):this._onPointerUp(),this._pointerUpEventsRegistered||(this._registerEvents(ee),this._pointerUpEventsRegistered=!0)}_onMousedown(fe){const kt=(0,r.X6)(fe),ct=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!kt&&!ct&&(this._isPointerDown=!0,this.fadeInRipple(fe.clientX,fe.clientY,this._target.rippleConfig))}_onTouchStart(fe){if(!this._target.rippleDisabled&&!(0,r.yG)(fe)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const kt=fe.changedTouches;for(let ct=0;ct<kt.length;ct++)this.fadeInRipple(kt[ct].clientX,kt[ct].clientY,this._target.rippleConfig)}}_onPointerUp(){!this._isPointerDown||(this._isPointerDown=!1,this._activeRipples.forEach(fe=>{!fe.config.persistent&&(1===fe.state||fe.config.terminateOnPointerUp&&0===fe.state)&&fe.fadeOut()}))}_runTimeoutOutsideZone(fe,kt=0){this._ngZone.runOutsideAngular(()=>setTimeout(fe,kt))}_registerEvents(fe){this._ngZone.runOutsideAngular(()=>{fe.forEach(kt=>{this._triggerElement.addEventListener(kt,this,Ie)})})}_removeTriggerEvents(){this._triggerElement&&(te.forEach(fe=>{this._triggerElement.removeEventListener(fe,this,Ie)}),this._pointerUpEventsRegistered&&ee.forEach(fe=>{this._triggerElement.removeEventListener(fe,this,Ie)}))}}const ye=new C.OlP("mat-ripple-global-options");let Zt=(()=>{class $e{constructor(kt,ct,Lt,ae,Ae){this._elementRef=kt,this._animationMode=Ae,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=ae||{},this._rippleRenderer=new ke(this,ct,kt,Lt)}get disabled(){return this._disabled}set disabled(kt){kt&&this.fadeOutAllNonPersistent(),this._disabled=kt,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(kt){this._trigger=kt,this._setupTriggerEventsIfEnabled()}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:Object.assign(Object.assign(Object.assign({},this._globalOptions.animation),"NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{}),this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(kt,ct=0,Lt){return"number"==typeof kt?this._rippleRenderer.fadeInRipple(kt,ct,Object.assign(Object.assign({},this.rippleConfig),Lt)):this._rippleRenderer.fadeInRipple(0,0,Object.assign(Object.assign({},this.rippleConfig),kt))}}return $e.\u0275fac=function(kt){return new(kt||$e)(C.Y36(C.SBq),C.Y36(C.R0b),C.Y36(n.t4),C.Y36(ye,8),C.Y36(x.Qb,8))},$e.\u0275dir=C.lG2({type:$e,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(kt,ct){2&kt&&C.ekj("mat-ripple-unbounded",ct.unbounded)},inputs:{color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],radius:["matRippleRadius","radius"],animation:["matRippleAnimation","animation"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"]},exportAs:["matRipple"]}),$e})(),ce=(()=>{class $e{}return $e.\u0275fac=function(kt){return new(kt||$e)},$e.\u0275mod=C.oAB({type:$e}),$e.\u0275inj=C.cJS({imports:[[ot,n.ud],ot]}),$e})(),ei=(()=>{class $e{constructor(kt){this._animationMode=kt,this.state="unchecked",this.disabled=!1}}return $e.\u0275fac=function(kt){return new(kt||$e)(C.Y36(x.Qb,8))},$e.\u0275cmp=C.Xpm({type:$e,selectors:[["mat-pseudo-checkbox"]],hostAttrs:[1,"mat-pseudo-checkbox"],hostVars:8,hostBindings:function(kt,ct){2&kt&&C.ekj("mat-pseudo-checkbox-indeterminate","indeterminate"===ct.state)("mat-pseudo-checkbox-checked","checked"===ct.state)("mat-pseudo-checkbox-disabled",ct.disabled)("_mat-animation-noopable","NoopAnimations"===ct._animationMode)},inputs:{state:"state",disabled:"disabled"},decls:0,vars:0,template:function(kt,ct){},styles:['.mat-pseudo-checkbox{width:16px;height:16px;border:2px solid;border-radius:2px;cursor:pointer;display:inline-block;vertical-align:middle;box-sizing:border-box;position:relative;flex-shrink:0;transition:border-color 90ms cubic-bezier(0, 0, 0.2, 0.1),background-color 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox::after{position:absolute;opacity:0;content:"";border-bottom:2px solid currentColor;transition:opacity 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox.mat-pseudo-checkbox-checked,.mat-pseudo-checkbox.mat-pseudo-checkbox-indeterminate{border-color:transparent}._mat-animation-noopable.mat-pseudo-checkbox{transition:none;animation:none}._mat-animation-noopable.mat-pseudo-checkbox::after{transition:none}.mat-pseudo-checkbox-disabled{cursor:default}.mat-pseudo-checkbox-indeterminate::after{top:5px;left:1px;width:10px;opacity:1;border-radius:2px}.mat-pseudo-checkbox-checked::after{top:2.4px;left:1px;width:8px;height:3px;border-left:2px solid currentColor;transform:rotate(-45deg);opacity:1;box-sizing:content-box}\n'],encapsulation:2,changeDetection:0}),$e})(),ni=(()=>{class $e{}return $e.\u0275fac=function(kt){return new(kt||$e)},$e.\u0275mod=C.oAB({type:$e}),$e.\u0275inj=C.cJS({imports:[[ot]]}),$e})();const Fi=new C.OlP("MAT_OPTION_PARENT_COMPONENT"),mi=new C.OlP("MatOptgroup");let Ce=0;class Oe{constructor(fe,kt=!1){this.source=fe,this.isUserInput=kt}}let Ci=(()=>{class $e{constructor(kt,ct,Lt,ae){this._element=kt,this._changeDetectorRef=ct,this._parent=Lt,this.group=ae,this._selected=!1,this._active=!1,this._disabled=!1,this._mostRecentViewValue="",this.id="mat-option-"+Ce++,this.onSelectionChange=new C.vpe,this._stateChanges=new u.x}get multiple(){return this._parent&&this._parent.multiple}get selected(){return this._selected}get disabled(){return this.group&&this.group.disabled||this._disabled}set disabled(kt){this._disabled=(0,s.Ig)(kt)}get disableRipple(){return!(!this._parent||!this._parent.disableRipple)}get active(){return this._active}get viewValue(){return(this._getHostElement().textContent||"").trim()}select(){this._selected||(this._selected=!0,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent())}deselect(){this._selected&&(this._selected=!1,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent())}focus(kt,ct){const Lt=this._getHostElement();"function"==typeof Lt.focus&&Lt.focus(ct)}setActiveStyles(){this._active||(this._active=!0,this._changeDetectorRef.markForCheck())}setInactiveStyles(){this._active&&(this._active=!1,this._changeDetectorRef.markForCheck())}getLabel(){return this.viewValue}_handleKeydown(kt){(kt.keyCode===B.K5||kt.keyCode===B.L_)&&!(0,B.Vb)(kt)&&(this._selectViaInteraction(),kt.preventDefault())}_selectViaInteraction(){this.disabled||(this._selected=!this.multiple||!this._selected,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent(!0))}_getAriaSelected(){return this.selected||!this.multiple&&null}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._element.nativeElement}ngAfterViewChecked(){if(this._selected){const kt=this.viewValue;kt!==this._mostRecentViewValue&&(this._mostRecentViewValue=kt,this._stateChanges.next())}}ngOnDestroy(){this._stateChanges.complete()}_emitSelectionChangeEvent(kt=!1){this.onSelectionChange.emit(new Oe(this,kt))}}return $e.\u0275fac=function(kt){C.$Z()},$e.\u0275dir=C.lG2({type:$e,inputs:{value:"value",id:"id",disabled:"disabled"},outputs:{onSelectionChange:"onSelectionChange"}}),$e})(),je=(()=>{class $e extends Ci{constructor(kt,ct,Lt,ae){super(kt,ct,Lt,ae)}}return $e.\u0275fac=function(kt){return new(kt||$e)(C.Y36(C.SBq),C.Y36(C.sBO),C.Y36(Fi,8),C.Y36(mi,8))},$e.\u0275cmp=C.Xpm({type:$e,selectors:[["mat-option"]],hostAttrs:["role","option",1,"mat-option","mat-focus-indicator"],hostVars:12,hostBindings:function(kt,ct){1&kt&&C.NdJ("click",function(){return ct._selectViaInteraction()})("keydown",function(ae){return ct._handleKeydown(ae)}),2&kt&&(C.Ikx("id",ct.id),C.uIk("tabindex",ct._getTabIndex())("aria-selected",ct._getAriaSelected())("aria-disabled",ct.disabled.toString()),C.ekj("mat-selected",ct.selected)("mat-option-multiple",ct.multiple)("mat-active",ct.active)("mat-option-disabled",ct.disabled))},exportAs:["matOption"],features:[C.qOj],ngContentSelectors:Ht,decls:5,vars:4,consts:[["class","mat-option-pseudo-checkbox",3,"state","disabled",4,"ngIf"],[1,"mat-option-text"],["class","cdk-visually-hidden",4,"ngIf"],["mat-ripple","",1,"mat-option-ripple",3,"matRippleTrigger","matRippleDisabled"],[1,"mat-option-pseudo-checkbox",3,"state","disabled"],[1,"cdk-visually-hidden"]],template:function(kt,ct){1&kt&&(C.F$t(),C.YNc(0,rt,1,2,"mat-pseudo-checkbox",0),C.TgZ(1,"span",1),C.Hsn(2),C.qZA(),C.YNc(3,St,2,1,"span",2),C._UZ(4,"div",3)),2&kt&&(C.Q6J("ngIf",ct.multiple),C.xp6(3),C.Q6J("ngIf",ct.group&&ct.group._inert),C.xp6(1),C.Q6J("matRippleTrigger",ct._getHostElement())("matRippleDisabled",ct.disabled||ct.disableRipple))},directives:[t.O5,Zt,ei],styles:[".mat-option{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;line-height:48px;height:48px;padding:0 16px;text-align:left;text-decoration:none;max-width:100%;position:relative;cursor:pointer;outline:none;display:flex;flex-direction:row;max-width:100%;box-sizing:border-box;align-items:center;-webkit-tap-highlight-color:transparent}.mat-option[disabled]{cursor:default}[dir=rtl] .mat-option{text-align:right}.mat-option .mat-icon{margin-right:16px;vertical-align:middle}.mat-option .mat-icon svg{vertical-align:top}[dir=rtl] .mat-option .mat-icon{margin-left:16px;margin-right:0}.mat-option[aria-disabled=true]{-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:default}.mat-optgroup .mat-option:not(.mat-option-multiple){padding-left:32px}[dir=rtl] .mat-optgroup .mat-option:not(.mat-option-multiple){padding-left:16px;padding-right:32px}.cdk-high-contrast-active .mat-option{margin:0 1px}.cdk-high-contrast-active .mat-option.mat-active{border:solid 1px currentColor;margin:0}.cdk-high-contrast-active .mat-option[aria-disabled=true]{opacity:.5}.mat-option-text{display:inline-block;flex-grow:1;overflow:hidden;text-overflow:ellipsis}.mat-option .mat-option-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-option-pseudo-checkbox{margin-right:8px}[dir=rtl] .mat-option-pseudo-checkbox{margin-left:8px;margin-right:0}\n"],encapsulation:2,changeDetection:0}),$e})();function Ii($e,fe,kt){if(kt.length){let ct=fe.toArray(),Lt=kt.toArray(),ae=0;for(let Ae=0;Ae<$e+1;Ae++)ct[Ae].group&&ct[Ae].group===Lt[ae]&&ae++;return ae}return 0}function _i($e,fe,kt,ct){return $e<kt?$e:$e+fe>kt+ct?Math.max(0,$e-ct+fe):kt}let Ui=(()=>{class $e{}return $e.\u0275fac=function(kt){return new(kt||$e)},$e.\u0275mod=C.oAB({type:$e}),$e.\u0275inj=C.cJS({imports:[[ce,t.ez,ot,ni]]}),$e})()},48966:(U,$,m)=>{"use strict";m.d($,{uw:()=>ve,Is:()=>gi,so:()=>Ut});var C=m(91314),_=m(47429),e=m(5e3),t=m(90508),n=m(50226),r=m(77579),s=m(49770),u=m(50727),y=m(39646),x=m(39300),B=m(95698),Q=m(68675),at=m(70925),rt=m(69808),St=m(41777),Ht=m(15664),vt=m(91159),xt=m(76360);function Wt(Bt,Te){}class Jt{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.maxWidth="80vw",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.closeOnNavigation=!0}}const Ct={dialogContainer:(0,St.X$)("dialogContainer",[(0,St.SB)("void, exit",(0,St.oB)({opacity:0,transform:"scale(0.7)"})),(0,St.SB)("enter",(0,St.oB)({transform:"none"})),(0,St.eR)("* => enter",(0,St.jt)("150ms cubic-bezier(0, 0, 0.2, 1)",(0,St.oB)({transform:"none",opacity:1}))),(0,St.eR)("* => void, * => exit",(0,St.jt)("75ms cubic-bezier(0.4, 0.0, 0.2, 1)",(0,St.oB)({opacity:0})))])};let ot=(()=>{class Bt extends _.en{constructor($t,_e,At,pe,ze,hi,Ie,te){super(),this._elementRef=$t,this._focusTrapFactory=_e,this._changeDetectorRef=At,this._config=ze,this._interactivityChecker=hi,this._ngZone=Ie,this._focusMonitor=te,this._animationStateChanged=new e.vpe,this._elementFocusedBeforeDialogWasOpened=null,this._closeInteractionType=null,this.attachDomPortal=ee=>(this._portalOutlet.hasAttached(),this._portalOutlet.attachDomPortal(ee)),this._ariaLabelledBy=ze.ariaLabelledBy||null,this._document=pe}_initializeWithAttachedContent(){this._setupFocusTrap(),this._capturePreviouslyFocusedElement()}attachComponentPortal($t){return this._portalOutlet.hasAttached(),this._portalOutlet.attachComponentPortal($t)}attachTemplatePortal($t){return this._portalOutlet.hasAttached(),this._portalOutlet.attachTemplatePortal($t)}_recaptureFocus(){this._containsFocus()||this._trapFocus()}_forceFocus($t,_e){this._interactivityChecker.isFocusable($t)||($t.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{$t.addEventListener("blur",()=>$t.removeAttribute("tabindex")),$t.addEventListener("mousedown",()=>$t.removeAttribute("tabindex"))})),$t.focus(_e)}_focusByCssSelector($t,_e){let At=this._elementRef.nativeElement.querySelector($t);At&&this._forceFocus(At,_e)}_trapFocus(){const $t=this._elementRef.nativeElement;switch(this._config.autoFocus){case!1:case"dialog":this._containsFocus()||$t.focus();break;case!0:case"first-tabbable":this._focusTrap.focusInitialElementWhenReady().then(_e=>{_e||this._focusDialogContainer()});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this._config.autoFocus)}}_restoreFocus(){const $t=this._elementFocusedBeforeDialogWasOpened;if(this._config.restoreFocus&&$t&&"function"==typeof $t.focus){const _e=(0,at.ht)(),At=this._elementRef.nativeElement;(!_e||_e===this._document.body||_e===At||At.contains(_e))&&(this._focusMonitor?(this._focusMonitor.focusVia($t,this._closeInteractionType),this._closeInteractionType=null):$t.focus())}this._focusTrap&&this._focusTrap.destroy()}_setupFocusTrap(){this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement)}_capturePreviouslyFocusedElement(){this._document&&(this._elementFocusedBeforeDialogWasOpened=(0,at.ht)())}_focusDialogContainer(){this._elementRef.nativeElement.focus&&this._elementRef.nativeElement.focus()}_containsFocus(){const $t=this._elementRef.nativeElement,_e=(0,at.ht)();return $t===_e||$t.contains(_e)}}return Bt.\u0275fac=function($t){return new($t||Bt)(e.Y36(e.SBq),e.Y36(Ht.qV),e.Y36(e.sBO),e.Y36(rt.K0,8),e.Y36(Jt),e.Y36(Ht.ic),e.Y36(e.R0b),e.Y36(Ht.tE))},Bt.\u0275dir=e.lG2({type:Bt,viewQuery:function($t,_e){if(1&$t&&e.Gf(_.Pl,7),2&$t){let At;e.iGM(At=e.CRH())&&(_e._portalOutlet=At.first)}},features:[e.qOj]}),Bt})(),mt=(()=>{class Bt extends ot{constructor(){super(...arguments),this._state="enter"}_onAnimationDone({toState:$t,totalTime:_e}){"enter"===$t?(this._trapFocus(),this._animationStateChanged.next({state:"opened",totalTime:_e})):"exit"===$t&&(this._restoreFocus(),this._animationStateChanged.next({state:"closed",totalTime:_e}))}_onAnimationStart({toState:$t,totalTime:_e}){"enter"===$t?this._animationStateChanged.next({state:"opening",totalTime:_e}):("exit"===$t||"void"===$t)&&this._animationStateChanged.next({state:"closing",totalTime:_e})}_startExitAnimation(){this._state="exit",this._changeDetectorRef.markForCheck()}}return Bt.\u0275fac=function(){let Te;return function(_e){return(Te||(Te=e.n5z(Bt)))(_e||Bt)}}(),Bt.\u0275cmp=e.Xpm({type:Bt,selectors:[["mat-dialog-container"]],hostAttrs:["tabindex","-1","aria-modal","true",1,"mat-dialog-container"],hostVars:6,hostBindings:function($t,_e){1&$t&&e.WFA("@dialogContainer.start",function(pe){return _e._onAnimationStart(pe)})("@dialogContainer.done",function(pe){return _e._onAnimationDone(pe)}),2&$t&&(e.Ikx("id",_e._id),e.uIk("role",_e._config.role)("aria-labelledby",_e._config.ariaLabel?null:_e._ariaLabelledBy)("aria-label",_e._config.ariaLabel)("aria-describedby",_e._config.ariaDescribedBy||null),e.d8E("@dialogContainer",_e._state))},features:[e.qOj],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function($t,_e){1&$t&&e.YNc(0,Wt,0,0,"ng-template",0)},directives:[_.Pl],styles:[".mat-dialog-container{display:block;padding:24px;border-radius:4px;box-sizing:border-box;overflow:auto;outline:0;width:100%;height:100%;min-height:inherit;max-height:inherit}.cdk-high-contrast-active .mat-dialog-container{outline:solid 1px}.mat-dialog-content{display:block;margin:0 -24px;padding:0 24px;max-height:65vh;overflow:auto;-webkit-overflow-scrolling:touch}.mat-dialog-title{margin:0 0 20px;display:block}.mat-dialog-actions{padding:8px 0;display:flex;flex-wrap:wrap;min-height:52px;align-items:center;box-sizing:content-box;margin-bottom:-24px}.mat-dialog-actions[align=end]{justify-content:flex-end}.mat-dialog-actions[align=center]{justify-content:center}.mat-dialog-actions .mat-button-base+.mat-button-base,.mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}\n"],encapsulation:2,data:{animation:[Ct.dialogContainer]}}),Bt})(),lt=0;class Ut{constructor(Te,$t,_e="mat-dialog-"+lt++){this._overlayRef=Te,this._containerInstance=$t,this.id=_e,this.disableClose=this._containerInstance._config.disableClose,this._afterOpened=new r.x,this._afterClosed=new r.x,this._beforeClosed=new r.x,this._state=0,$t._id=_e,$t._animationStateChanged.pipe((0,x.h)(At=>"opened"===At.state),(0,B.q)(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),$t._animationStateChanged.pipe((0,x.h)(At=>"closed"===At.state),(0,B.q)(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._finishDialogClose()}),Te.detachments().subscribe(()=>{this._beforeClosed.next(this._result),this._beforeClosed.complete(),this._afterClosed.next(this._result),this._afterClosed.complete(),this.componentInstance=null,this._overlayRef.dispose()}),Te.keydownEvents().pipe((0,x.h)(At=>At.keyCode===vt.hY&&!this.disableClose&&!(0,vt.Vb)(At))).subscribe(At=>{At.preventDefault(),Rt(this,"keyboard")}),Te.backdropClick().subscribe(()=>{this.disableClose?this._containerInstance._recaptureFocus():Rt(this,"mouse")})}close(Te){this._result=Te,this._containerInstance._animationStateChanged.pipe((0,x.h)($t=>"closing"===$t.state),(0,B.q)(1)).subscribe($t=>{this._beforeClosed.next(Te),this._beforeClosed.complete(),this._overlayRef.detachBackdrop(),this._closeFallbackTimeout=setTimeout(()=>this._finishDialogClose(),$t.totalTime+100)}),this._state=1,this._containerInstance._startExitAnimation()}afterOpened(){return this._afterOpened}afterClosed(){return this._afterClosed}beforeClosed(){return this._beforeClosed}backdropClick(){return this._overlayRef.backdropClick()}keydownEvents(){return this._overlayRef.keydownEvents()}updatePosition(Te){let $t=this._getPositionStrategy();return Te&&(Te.left||Te.right)?Te.left?$t.left(Te.left):$t.right(Te.right):$t.centerHorizontally(),Te&&(Te.top||Te.bottom)?Te.top?$t.top(Te.top):$t.bottom(Te.bottom):$t.centerVertically(),this._overlayRef.updatePosition(),this}updateSize(Te="",$t=""){return this._overlayRef.updateSize({width:Te,height:$t}),this._overlayRef.updatePosition(),this}addPanelClass(Te){return this._overlayRef.addPanelClass(Te),this}removePanelClass(Te){return this._overlayRef.removePanelClass(Te),this}getState(){return this._state}_finishDialogClose(){this._state=2,this._overlayRef.dispose()}_getPositionStrategy(){return this._overlayRef.getConfig().positionStrategy}}function Rt(Bt,Te,$t){return void 0!==Bt._containerInstance&&(Bt._containerInstance._closeInteractionType=Te),Bt.close($t)}const Et=new e.OlP("MatDialogData"),ht=new e.OlP("mat-dialog-default-options"),nt=new e.OlP("mat-dialog-scroll-strategy"),Nt={provide:nt,deps:[C.aV],useFactory:function(Bt){return()=>Bt.scrollStrategies.block()}};let de=(()=>{class Bt{constructor($t,_e,At,pe,ze,hi,Ie,te,ee,ke){this._overlay=$t,this._injector=_e,this._defaultOptions=At,this._parentDialog=pe,this._overlayContainer=ze,this._dialogRefConstructor=Ie,this._dialogContainerType=te,this._dialogDataToken=ee,this._animationMode=ke,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new r.x,this._afterOpenedAtThisLevel=new r.x,this._ariaHiddenElements=new Map,this._dialogAnimatingOpen=!1,this.afterAllClosed=(0,s.P)(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe((0,Q.O)(void 0))),this._scrollStrategy=hi}get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}_getAfterAllClosed(){const $t=this._parentDialog;return $t?$t._getAfterAllClosed():this._afterAllClosedAtThisLevel}open($t,_e){if(_e=function(Bt,Te){return Object.assign(Object.assign({},Te),Bt)}(_e,this._defaultOptions||new Jt),_e.id&&this.getDialogById(_e.id),this._dialogAnimatingOpen)return this._lastDialogRef;const At=this._createOverlay(_e),pe=this._attachDialogContainer(At,_e);if("NoopAnimations"!==this._animationMode){const hi=pe._animationStateChanged.subscribe(Ie=>{"opening"===Ie.state&&(this._dialogAnimatingOpen=!0),"opened"===Ie.state&&(this._dialogAnimatingOpen=!1,hi.unsubscribe())});this._animationStateSubscriptions||(this._animationStateSubscriptions=new u.w0),this._animationStateSubscriptions.add(hi)}const ze=this._attachDialogContent($t,pe,At,_e);return this._lastDialogRef=ze,this.openDialogs.length||this._hideNonDialogContentFromAssistiveTechnology(),this.openDialogs.push(ze),ze.afterClosed().subscribe(()=>this._removeOpenDialog(ze)),this.afterOpened.next(ze),pe._initializeWithAttachedContent(),ze}closeAll(){this._closeDialogs(this.openDialogs)}getDialogById($t){return this.openDialogs.find(_e=>_e.id===$t)}ngOnDestroy(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete(),this._animationStateSubscriptions&&this._animationStateSubscriptions.unsubscribe()}_createOverlay($t){const _e=this._getOverlayConfig($t);return this._overlay.create(_e)}_getOverlayConfig($t){const _e=new C.X_({positionStrategy:this._overlay.position().global(),scrollStrategy:$t.scrollStrategy||this._scrollStrategy(),panelClass:$t.panelClass,hasBackdrop:$t.hasBackdrop,direction:$t.direction,minWidth:$t.minWidth,minHeight:$t.minHeight,maxWidth:$t.maxWidth,maxHeight:$t.maxHeight,disposeOnNavigation:$t.closeOnNavigation});return $t.backdropClass&&(_e.backdropClass=$t.backdropClass),_e}_attachDialogContainer($t,_e){const pe=e.zs3.create({parent:_e&&_e.viewContainerRef&&_e.viewContainerRef.injector||this._injector,providers:[{provide:Jt,useValue:_e}]}),ze=new _.C5(this._dialogContainerType,_e.viewContainerRef,pe,_e.componentFactoryResolver);return $t.attach(ze).instance}_attachDialogContent($t,_e,At,pe){const ze=new this._dialogRefConstructor(At,_e,pe.id);if($t instanceof e.Rgc)_e.attachTemplatePortal(new _.UE($t,null,{$implicit:pe.data,dialogRef:ze}));else{const hi=this._createInjector(pe,ze,_e),Ie=_e.attachComponentPortal(new _.C5($t,pe.viewContainerRef,hi));ze.componentInstance=Ie.instance}return ze.updateSize(pe.width,pe.height).updatePosition(pe.position),ze}_createInjector($t,_e,At){const pe=$t&&$t.viewContainerRef&&$t.viewContainerRef.injector,ze=[{provide:this._dialogContainerType,useValue:At},{provide:this._dialogDataToken,useValue:$t.data},{provide:this._dialogRefConstructor,useValue:_e}];return $t.direction&&(!pe||!pe.get(n.Is,null,e.XFs.Optional))&&ze.push({provide:n.Is,useValue:{value:$t.direction,change:(0,y.of)()}}),e.zs3.create({parent:pe||this._injector,providers:ze})}_removeOpenDialog($t){const _e=this.openDialogs.indexOf($t);_e>-1&&(this.openDialogs.splice(_e,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((At,pe)=>{At?pe.setAttribute("aria-hidden",At):pe.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(){const $t=this._overlayContainer.getContainerElement();if($t.parentElement){const _e=$t.parentElement.children;for(let At=_e.length-1;At>-1;At--){let pe=_e[At];pe!==$t&&"SCRIPT"!==pe.nodeName&&"STYLE"!==pe.nodeName&&!pe.hasAttribute("aria-live")&&(this._ariaHiddenElements.set(pe,pe.getAttribute("aria-hidden")),pe.setAttribute("aria-hidden","true"))}}}_closeDialogs($t){let _e=$t.length;for(;_e--;)$t[_e].close()}}return Bt.\u0275fac=function($t){e.$Z()},Bt.\u0275dir=e.lG2({type:Bt}),Bt})(),ve=(()=>{class Bt extends de{constructor($t,_e,At,pe,ze,hi,Ie,te){super($t,_e,pe,hi,Ie,ze,Ut,mt,Et,te)}}return Bt.\u0275fac=function($t){return new($t||Bt)(e.LFG(C.aV),e.LFG(e.zs3),e.LFG(rt.Ye,8),e.LFG(ht,8),e.LFG(nt),e.LFG(Bt,12),e.LFG(C.Xj),e.LFG(xt.Qb,8))},Bt.\u0275prov=e.Yz7({token:Bt,factory:Bt.\u0275fac}),Bt})(),gi=(()=>{class Bt{}return Bt.\u0275fac=function($t){return new($t||Bt)},Bt.\u0275mod=e.oAB({type:Bt}),Bt.\u0275inj=e.cJS({providers:[ve,Nt],imports:[[C.U8,_.eL,t.BQ],t.BQ]}),Bt})()},4834:(U,$,m)=>{"use strict";m.d($,{d:()=>t,t:()=>n});var C=m(5e3),_=m(63191),e=m(90508);let t=(()=>{class r{constructor(){this._vertical=!1,this._inset=!1}get vertical(){return this._vertical}set vertical(u){this._vertical=(0,_.Ig)(u)}get inset(){return this._inset}set inset(u){this._inset=(0,_.Ig)(u)}}return r.\u0275fac=function(u){return new(u||r)},r.\u0275cmp=C.Xpm({type:r,selectors:[["mat-divider"]],hostAttrs:["role","separator",1,"mat-divider"],hostVars:7,hostBindings:function(u,y){2&u&&(C.uIk("aria-orientation",y.vertical?"vertical":"horizontal"),C.ekj("mat-divider-vertical",y.vertical)("mat-divider-horizontal",!y.vertical)("mat-divider-inset",y.inset))},inputs:{vertical:"vertical",inset:"inset"},decls:0,vars:0,template:function(u,y){},styles:[".mat-divider{display:block;margin:0;border-top-width:1px;border-top-style:solid}.mat-divider.mat-divider-vertical{border-top:0;border-right-width:1px;border-right-style:solid}.mat-divider.mat-divider-inset{margin-left:80px}[dir=rtl] .mat-divider.mat-divider-inset{margin-left:auto;margin-right:80px}\n"],encapsulation:2,changeDetection:0}),r})(),n=(()=>{class r{}return r.\u0275fac=function(u){return new(u||r)},r.\u0275mod=C.oAB({type:r}),r.\u0275inj=C.cJS({imports:[[e.BQ],e.BQ]}),r})()},67322:(U,$,m)=>{"use strict";m.d($,{G_:()=>ee,KE:()=>ke,Eo:()=>ue,lN:()=>ne,hX:()=>gi});var C=m(17144),_=m(69808),e=m(5e3),t=m(90508),n=m(63191),r=m(77579),s=m(56451),u=m(54968),y=m(68675),x=m(82722),B=m(95698),Q=m(41777),at=m(76360),rt=m(50226),St=m(70925);const Ht=["connectionContainer"],vt=["inputContainer"],xt=["label"];function Wt(me,ye){1&me&&(e.ynx(0),e.TgZ(1,"div",14),e._UZ(2,"div",15),e._UZ(3,"div",16),e._UZ(4,"div",17),e.qZA(),e.TgZ(5,"div",18),e._UZ(6,"div",15),e._UZ(7,"div",16),e._UZ(8,"div",17),e.qZA(),e.BQk())}function Jt(me,ye){if(1&me){const Zt=e.EpF();e.TgZ(0,"div",19),e.NdJ("cdkObserveContent",function(){return e.CHM(Zt),e.oxw().updateOutlineGap()}),e.Hsn(1,1),e.qZA()}if(2&me){const Zt=e.oxw();e.Q6J("cdkObserveContentDisabled","outline"!=Zt.appearance)}}function Ct(me,ye){if(1&me&&(e.ynx(0),e.Hsn(1,2),e.TgZ(2,"span"),e._uU(3),e.qZA(),e.BQk()),2&me){const Zt=e.oxw(2);e.xp6(3),e.Oqu(Zt._control.placeholder)}}function yt(me,ye){1&me&&e.Hsn(0,3,["*ngSwitchCase","true"])}function ot(me,ye){1&me&&(e.TgZ(0,"span",23),e._uU(1," *"),e.qZA())}function mt(me,ye){if(1&me){const Zt=e.EpF();e.TgZ(0,"label",20,21),e.NdJ("cdkObserveContent",function(){return e.CHM(Zt),e.oxw().updateOutlineGap()}),e.YNc(2,Ct,4,1,"ng-container",12),e.YNc(3,yt,1,0,"ng-content",12),e.YNc(4,ot,2,0,"span",22),e.qZA()}if(2&me){const Zt=e.oxw();e.ekj("mat-empty",Zt._control.empty&&!Zt._shouldAlwaysFloat())("mat-form-field-empty",Zt._control.empty&&!Zt._shouldAlwaysFloat())("mat-accent","accent"==Zt.color)("mat-warn","warn"==Zt.color),e.Q6J("cdkObserveContentDisabled","outline"!=Zt.appearance)("id",Zt._labelId)("ngSwitch",Zt._hasLabel()),e.uIk("for",Zt._control.id)("aria-owns",Zt._control.id),e.xp6(2),e.Q6J("ngSwitchCase",!1),e.xp6(1),e.Q6J("ngSwitchCase",!0),e.xp6(1),e.Q6J("ngIf",!Zt.hideRequiredMarker&&Zt._control.required&&!Zt._control.disabled)}}function lt(me,ye){1&me&&(e.TgZ(0,"div",24),e.Hsn(1,4),e.qZA())}function Ut(me,ye){if(1&me&&(e.TgZ(0,"div",25),e._UZ(1,"span",26),e.qZA()),2&me){const Zt=e.oxw();e.xp6(1),e.ekj("mat-accent","accent"==Zt.color)("mat-warn","warn"==Zt.color)}}function Rt(me,ye){if(1&me&&(e.TgZ(0,"div"),e.Hsn(1,5),e.qZA()),2&me){const Zt=e.oxw();e.Q6J("@transitionMessages",Zt._subscriptAnimationState)}}function Et(me,ye){if(1&me&&(e.TgZ(0,"div",30),e._uU(1),e.qZA()),2&me){const Zt=e.oxw(2);e.Q6J("id",Zt._hintLabelId),e.xp6(1),e.Oqu(Zt.hintLabel)}}function ht(me,ye){if(1&me&&(e.TgZ(0,"div",27),e.YNc(1,Et,2,2,"div",28),e.Hsn(2,6),e._UZ(3,"div",29),e.Hsn(4,7),e.qZA()),2&me){const Zt=e.oxw();e.Q6J("@transitionMessages",Zt._subscriptAnimationState),e.xp6(1),e.Q6J("ngIf",Zt.hintLabel)}}const nt=["*",[["","matPrefix",""]],[["mat-placeholder"]],[["mat-label"]],[["","matSuffix",""]],[["mat-error"]],[["mat-hint",3,"align","end"]],[["mat-hint","align","end"]]],he=["*","[matPrefix]","mat-placeholder","mat-label","[matSuffix]","mat-error","mat-hint:not([align='end'])","mat-hint[align='end']"],Nt=new e.OlP("MatError"),ve={transitionMessages:(0,Q.X$)("transitionMessages",[(0,Q.SB)("enter",(0,Q.oB)({opacity:1,transform:"translateY(0%)"})),(0,Q.eR)("void => enter",[(0,Q.oB)({opacity:0,transform:"translateY(-5px)"}),(0,Q.jt)("300ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])};let ue=(()=>{class me{}return me.\u0275fac=function(Zt){return new(Zt||me)},me.\u0275dir=e.lG2({type:me}),me})();const Ze=new e.OlP("MatHint");let gi=(()=>{class me{}return me.\u0275fac=function(Zt){return new(Zt||me)},me.\u0275dir=e.lG2({type:me,selectors:[["mat-label"]]}),me})(),Bt=(()=>{class me{}return me.\u0275fac=function(Zt){return new(Zt||me)},me.\u0275dir=e.lG2({type:me,selectors:[["mat-placeholder"]]}),me})();const Te=new e.OlP("MatPrefix"),_e=new e.OlP("MatSuffix");let pe=0;const Ie=(0,t.pj)(class{constructor(me){this._elementRef=me}},"primary"),te=new e.OlP("MAT_FORM_FIELD_DEFAULT_OPTIONS"),ee=new e.OlP("MatFormField");let ke=(()=>{class me extends Ie{constructor(Zt,ce,ei,ni,Fi,wi,yi){super(Zt),this._changeDetectorRef=ce,this._dir=ei,this._defaults=ni,this._platform=Fi,this._ngZone=wi,this._outlineGapCalculationNeededImmediately=!1,this._outlineGapCalculationNeededOnStable=!1,this._destroyed=new r.x,this._showAlwaysAnimate=!1,this._subscriptAnimationState="",this._hintLabel="",this._hintLabelId="mat-hint-"+pe++,this._labelId="mat-form-field-label-"+pe++,this.floatLabel=this._getDefaultFloatLabelState(),this._animationsEnabled="NoopAnimations"!==yi,this.appearance=ni&&ni.appearance?ni.appearance:"legacy",this._hideRequiredMarker=!(!ni||null==ni.hideRequiredMarker)&&ni.hideRequiredMarker}get appearance(){return this._appearance}set appearance(Zt){const ce=this._appearance;this._appearance=Zt||this._defaults&&this._defaults.appearance||"legacy","outline"===this._appearance&&ce!==Zt&&(this._outlineGapCalculationNeededOnStable=!0)}get hideRequiredMarker(){return this._hideRequiredMarker}set hideRequiredMarker(Zt){this._hideRequiredMarker=(0,n.Ig)(Zt)}_shouldAlwaysFloat(){return"always"===this.floatLabel&&!this._showAlwaysAnimate}_canLabelFloat(){return"never"!==this.floatLabel}get hintLabel(){return this._hintLabel}set hintLabel(Zt){this._hintLabel=Zt,this._processHints()}get floatLabel(){return"legacy"!==this.appearance&&"never"===this._floatLabel?"auto":this._floatLabel}set floatLabel(Zt){Zt!==this._floatLabel&&(this._floatLabel=Zt||this._getDefaultFloatLabelState(),this._changeDetectorRef.markForCheck())}get _control(){return this._explicitFormFieldControl||this._controlNonStatic||this._controlStatic}set _control(Zt){this._explicitFormFieldControl=Zt}getLabelId(){return this._hasFloatingLabel()?this._labelId:null}getConnectedOverlayOrigin(){return this._connectionContainerRef||this._elementRef}ngAfterContentInit(){this._validateControlChild();const Zt=this._control;Zt.controlType&&this._elementRef.nativeElement.classList.add(`mat-form-field-type-${Zt.controlType}`),Zt.stateChanges.pipe((0,y.O)(null)).subscribe(()=>{this._validatePlaceholders(),this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),Zt.ngControl&&Zt.ngControl.valueChanges&&Zt.ngControl.valueChanges.pipe((0,x.R)(this._destroyed)).subscribe(()=>this._changeDetectorRef.markForCheck()),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe((0,x.R)(this._destroyed)).subscribe(()=>{this._outlineGapCalculationNeededOnStable&&this.updateOutlineGap()})}),(0,s.T)(this._prefixChildren.changes,this._suffixChildren.changes).subscribe(()=>{this._outlineGapCalculationNeededOnStable=!0,this._changeDetectorRef.markForCheck()}),this._hintChildren.changes.pipe((0,y.O)(null)).subscribe(()=>{this._processHints(),this._changeDetectorRef.markForCheck()}),this._errorChildren.changes.pipe((0,y.O)(null)).subscribe(()=>{this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),this._dir&&this._dir.change.pipe((0,x.R)(this._destroyed)).subscribe(()=>{"function"==typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>this.updateOutlineGap())}):this.updateOutlineGap()})}ngAfterContentChecked(){this._validateControlChild(),this._outlineGapCalculationNeededImmediately&&this.updateOutlineGap()}ngAfterViewInit(){this._subscriptAnimationState="enter",this._changeDetectorRef.detectChanges()}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_shouldForward(Zt){const ce=this._control?this._control.ngControl:null;return ce&&ce[Zt]}_hasPlaceholder(){return!!(this._control&&this._control.placeholder||this._placeholderChild)}_hasLabel(){return!(!this._labelChildNonStatic&&!this._labelChildStatic)}_shouldLabelFloat(){return this._canLabelFloat()&&(this._control&&this._control.shouldLabelFloat||this._shouldAlwaysFloat())}_hideControlPlaceholder(){return"legacy"===this.appearance&&!this._hasLabel()||this._hasLabel()&&!this._shouldLabelFloat()}_hasFloatingLabel(){return this._hasLabel()||"legacy"===this.appearance&&this._hasPlaceholder()}_getDisplayedMessages(){return this._errorChildren&&this._errorChildren.length>0&&this._control.errorState?"error":"hint"}_animateAndLockLabel(){this._hasFloatingLabel()&&this._canLabelFloat()&&(this._animationsEnabled&&this._label&&(this._showAlwaysAnimate=!0,(0,u.R)(this._label.nativeElement,"transitionend").pipe((0,B.q)(1)).subscribe(()=>{this._showAlwaysAnimate=!1})),this.floatLabel="always",this._changeDetectorRef.markForCheck())}_validatePlaceholders(){}_processHints(){this._validateHints(),this._syncDescribedByIds()}_validateHints(){}_getDefaultFloatLabelState(){return this._defaults&&this._defaults.floatLabel||"auto"}_syncDescribedByIds(){if(this._control){let Zt=[];if(this._control.userAriaDescribedBy&&"string"==typeof this._control.userAriaDescribedBy&&Zt.push(...this._control.userAriaDescribedBy.split(" ")),"hint"===this._getDisplayedMessages()){const ce=this._hintChildren?this._hintChildren.find(ni=>"start"===ni.align):null,ei=this._hintChildren?this._hintChildren.find(ni=>"end"===ni.align):null;ce?Zt.push(ce.id):this._hintLabel&&Zt.push(this._hintLabelId),ei&&Zt.push(ei.id)}else this._errorChildren&&Zt.push(...this._errorChildren.map(ce=>ce.id));this._control.setDescribedByIds(Zt)}}_validateControlChild(){}updateOutlineGap(){const Zt=this._label?this._label.nativeElement:null;if(!("outline"===this.appearance&&Zt&&Zt.children.length&&Zt.textContent.trim()&&this._platform.isBrowser))return;if(!this._isAttachedToDOM())return void(this._outlineGapCalculationNeededImmediately=!0);let ce=0,ei=0;const ni=this._connectionContainerRef.nativeElement,Fi=ni.querySelectorAll(".mat-form-field-outline-start"),wi=ni.querySelectorAll(".mat-form-field-outline-gap");if(this._label&&this._label.nativeElement.children.length){const yi=ni.getBoundingClientRect();if(0===yi.width&&0===yi.height)return this._outlineGapCalculationNeededOnStable=!0,void(this._outlineGapCalculationNeededImmediately=!1);const pn=this._getStartEnd(yi),mi=Zt.children,Zi=this._getStartEnd(mi[0].getBoundingClientRect());let Ce=0;for(let Oe=0;Oe<mi.length;Oe++)Ce+=mi[Oe].offsetWidth;ce=Math.abs(Zi-pn)-5,ei=Ce>0?.75*Ce+10:0}for(let yi=0;yi<Fi.length;yi++)Fi[yi].style.width=`${ce}px`;for(let yi=0;yi<wi.length;yi++)wi[yi].style.width=`${ei}px`;this._outlineGapCalculationNeededOnStable=this._outlineGapCalculationNeededImmediately=!1}_getStartEnd(Zt){return this._dir&&"rtl"===this._dir.value?Zt.right:Zt.left}_isAttachedToDOM(){const Zt=this._elementRef.nativeElement;if(Zt.getRootNode){const ce=Zt.getRootNode();return ce&&ce!==Zt}return document.documentElement.contains(Zt)}}return me.\u0275fac=function(Zt){return new(Zt||me)(e.Y36(e.SBq),e.Y36(e.sBO),e.Y36(rt.Is,8),e.Y36(te,8),e.Y36(St.t4),e.Y36(e.R0b),e.Y36(at.Qb,8))},me.\u0275cmp=e.Xpm({type:me,selectors:[["mat-form-field"]],contentQueries:function(Zt,ce,ei){if(1&Zt&&(e.Suo(ei,ue,5),e.Suo(ei,ue,7),e.Suo(ei,gi,5),e.Suo(ei,gi,7),e.Suo(ei,Bt,5),e.Suo(ei,Nt,5),e.Suo(ei,Ze,5),e.Suo(ei,Te,5),e.Suo(ei,_e,5)),2&Zt){let ni;e.iGM(ni=e.CRH())&&(ce._controlNonStatic=ni.first),e.iGM(ni=e.CRH())&&(ce._controlStatic=ni.first),e.iGM(ni=e.CRH())&&(ce._labelChildNonStatic=ni.first),e.iGM(ni=e.CRH())&&(ce._labelChildStatic=ni.first),e.iGM(ni=e.CRH())&&(ce._placeholderChild=ni.first),e.iGM(ni=e.CRH())&&(ce._errorChildren=ni),e.iGM(ni=e.CRH())&&(ce._hintChildren=ni),e.iGM(ni=e.CRH())&&(ce._prefixChildren=ni),e.iGM(ni=e.CRH())&&(ce._suffixChildren=ni)}},viewQuery:function(Zt,ce){if(1&Zt&&(e.Gf(Ht,7),e.Gf(vt,5),e.Gf(xt,5)),2&Zt){let ei;e.iGM(ei=e.CRH())&&(ce._connectionContainerRef=ei.first),e.iGM(ei=e.CRH())&&(ce._inputContainerRef=ei.first),e.iGM(ei=e.CRH())&&(ce._label=ei.first)}},hostAttrs:[1,"mat-form-field"],hostVars:40,hostBindings:function(Zt,ce){2&Zt&&e.ekj("mat-form-field-appearance-standard","standard"==ce.appearance)("mat-form-field-appearance-fill","fill"==ce.appearance)("mat-form-field-appearance-outline","outline"==ce.appearance)("mat-form-field-appearance-legacy","legacy"==ce.appearance)("mat-form-field-invalid",ce._control.errorState)("mat-form-field-can-float",ce._canLabelFloat())("mat-form-field-should-float",ce._shouldLabelFloat())("mat-form-field-has-label",ce._hasFloatingLabel())("mat-form-field-hide-placeholder",ce._hideControlPlaceholder())("mat-form-field-disabled",ce._control.disabled)("mat-form-field-autofilled",ce._control.autofilled)("mat-focused",ce._control.focused)("ng-untouched",ce._shouldForward("untouched"))("ng-touched",ce._shouldForward("touched"))("ng-pristine",ce._shouldForward("pristine"))("ng-dirty",ce._shouldForward("dirty"))("ng-valid",ce._shouldForward("valid"))("ng-invalid",ce._shouldForward("invalid"))("ng-pending",ce._shouldForward("pending"))("_mat-animation-noopable",!ce._animationsEnabled)},inputs:{color:"color",appearance:"appearance",hideRequiredMarker:"hideRequiredMarker",hintLabel:"hintLabel",floatLabel:"floatLabel"},exportAs:["matFormField"],features:[e._Bn([{provide:ee,useExisting:me}]),e.qOj],ngContentSelectors:he,decls:15,vars:8,consts:[[1,"mat-form-field-wrapper"],[1,"mat-form-field-flex",3,"click"],["connectionContainer",""],[4,"ngIf"],["class","mat-form-field-prefix",3,"cdkObserveContentDisabled","cdkObserveContent",4,"ngIf"],[1,"mat-form-field-infix"],["inputContainer",""],[1,"mat-form-field-label-wrapper"],["class","mat-form-field-label",3,"cdkObserveContentDisabled","id","mat-empty","mat-form-field-empty","mat-accent","mat-warn","ngSwitch","cdkObserveContent",4,"ngIf"],["class","mat-form-field-suffix",4,"ngIf"],["class","mat-form-field-underline",4,"ngIf"],[1,"mat-form-field-subscript-wrapper",3,"ngSwitch"],[4,"ngSwitchCase"],["class","mat-form-field-hint-wrapper",4,"ngSwitchCase"],[1,"mat-form-field-outline"],[1,"mat-form-field-outline-start"],[1,"mat-form-field-outline-gap"],[1,"mat-form-field-outline-end"],[1,"mat-form-field-outline","mat-form-field-outline-thick"],[1,"mat-form-field-prefix",3,"cdkObserveContentDisabled","cdkObserveContent"],[1,"mat-form-field-label",3,"cdkObserveContentDisabled","id","ngSwitch","cdkObserveContent"],["label",""],["class","mat-placeholder-required mat-form-field-required-marker","aria-hidden","true",4,"ngIf"],["aria-hidden","true",1,"mat-placeholder-required","mat-form-field-required-marker"],[1,"mat-form-field-suffix"],[1,"mat-form-field-underline"],[1,"mat-form-field-ripple"],[1,"mat-form-field-hint-wrapper"],["class","mat-hint",3,"id",4,"ngIf"],[1,"mat-form-field-hint-spacer"],[1,"mat-hint",3,"id"]],template:function(Zt,ce){1&Zt&&(e.F$t(nt),e.TgZ(0,"div",0),e.TgZ(1,"div",1,2),e.NdJ("click",function(ni){return ce._control.onContainerClick&&ce._control.onContainerClick(ni)}),e.YNc(3,Wt,9,0,"ng-container",3),e.YNc(4,Jt,2,1,"div",4),e.TgZ(5,"div",5,6),e.Hsn(7),e.TgZ(8,"span",7),e.YNc(9,mt,5,16,"label",8),e.qZA(),e.qZA(),e.YNc(10,lt,2,0,"div",9),e.qZA(),e.YNc(11,Ut,2,4,"div",10),e.TgZ(12,"div",11),e.YNc(13,Rt,2,1,"div",12),e.YNc(14,ht,5,2,"div",13),e.qZA(),e.qZA()),2&Zt&&(e.xp6(3),e.Q6J("ngIf","outline"==ce.appearance),e.xp6(1),e.Q6J("ngIf",ce._prefixChildren.length),e.xp6(5),e.Q6J("ngIf",ce._hasFloatingLabel()),e.xp6(1),e.Q6J("ngIf",ce._suffixChildren.length),e.xp6(1),e.Q6J("ngIf","outline"!=ce.appearance),e.xp6(1),e.Q6J("ngSwitch",ce._getDisplayedMessages()),e.xp6(1),e.Q6J("ngSwitchCase","error"),e.xp6(1),e.Q6J("ngSwitchCase","hint"))},directives:[_.O5,_.RF,_.n9,C.wD],styles:[".mat-form-field{display:inline-block;position:relative;text-align:left}[dir=rtl] .mat-form-field{text-align:right}.mat-form-field-wrapper{position:relative}.mat-form-field-flex{display:inline-flex;align-items:baseline;box-sizing:border-box;width:100%}.mat-form-field-prefix,.mat-form-field-suffix{white-space:nowrap;flex:none;position:relative}.mat-form-field-infix{display:block;position:relative;flex:auto;min-width:0;width:180px}.cdk-high-contrast-active .mat-form-field-infix{border-image:linear-gradient(transparent, transparent)}.mat-form-field-label-wrapper{position:absolute;left:0;box-sizing:content-box;width:100%;height:100%;overflow:hidden;pointer-events:none}[dir=rtl] .mat-form-field-label-wrapper{left:auto;right:0}.mat-form-field-label{position:absolute;left:0;font:inherit;pointer-events:none;width:100%;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;transform-origin:0 0;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),color 400ms cubic-bezier(0.25, 0.8, 0.25, 1),width 400ms cubic-bezier(0.25, 0.8, 0.25, 1);display:none}[dir=rtl] .mat-form-field-label{transform-origin:100% 0;left:auto;right:0}.mat-form-field-empty.mat-form-field-label,.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-label{display:block}.mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:block;transition:none}.mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-form-field-can-float .mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:block}.mat-form-field-label:not(.mat-form-field-empty){transition:none}.mat-form-field-underline{position:absolute;width:100%;pointer-events:none;transform:scale3d(1, 1.0001, 1)}.mat-form-field-ripple{position:absolute;left:0;width:100%;transform-origin:50%;transform:scaleX(0.5);opacity:0;transition:background-color 300ms cubic-bezier(0.55, 0, 0.55, 0.2)}.mat-form-field.mat-focused .mat-form-field-ripple,.mat-form-field.mat-form-field-invalid .mat-form-field-ripple{opacity:1;transform:none;transition:transform 300ms cubic-bezier(0.25, 0.8, 0.25, 1),opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 300ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-subscript-wrapper{position:absolute;box-sizing:border-box;width:100%;overflow:hidden}.mat-form-field-subscript-wrapper .mat-icon,.mat-form-field-label-wrapper .mat-icon{width:1em;height:1em;font-size:inherit;vertical-align:baseline}.mat-form-field-hint-wrapper{display:flex}.mat-form-field-hint-spacer{flex:1 0 1em}.mat-error{display:block}.mat-form-field-control-wrapper{position:relative}.mat-form-field-hint-end{order:1}.mat-form-field._mat-animation-noopable .mat-form-field-label,.mat-form-field._mat-animation-noopable .mat-form-field-ripple{transition:none}\n",'.mat-form-field-appearance-fill .mat-form-field-flex{border-radius:4px 4px 0 0;padding:.75em .75em 0 .75em}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-flex{outline:solid 1px}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-focused .mat-form-field-flex{outline:dashed 3px}.mat-form-field-appearance-fill .mat-form-field-underline::before{content:"";display:block;position:absolute;bottom:0;height:1px;width:100%}.mat-form-field-appearance-fill .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-ripple{height:0}.mat-form-field-appearance-fill:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-fill._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}.mat-form-field-appearance-fill .mat-form-field-subscript-wrapper{padding:0 1em}\n','.mat-input-element{font:inherit;background:transparent;color:currentColor;border:none;outline:none;padding:0;margin:0;width:100%;max-width:100%;vertical-align:bottom;text-align:inherit;box-sizing:content-box}.mat-input-element:-moz-ui-invalid{box-shadow:none}.mat-input-element,.mat-input-element::-webkit-search-cancel-button,.mat-input-element::-webkit-search-decoration,.mat-input-element::-webkit-search-results-button,.mat-input-element::-webkit-search-results-decoration{-webkit-appearance:none}.mat-input-element::-webkit-contacts-auto-fill-button,.mat-input-element::-webkit-caps-lock-indicator,.mat-input-element:not([type=password])::-webkit-credentials-auto-fill-button{visibility:hidden}.mat-input-element[type=date],.mat-input-element[type=datetime],.mat-input-element[type=datetime-local],.mat-input-element[type=month],.mat-input-element[type=week],.mat-input-element[type=time]{line-height:1}.mat-input-element[type=date]::after,.mat-input-element[type=datetime]::after,.mat-input-element[type=datetime-local]::after,.mat-input-element[type=month]::after,.mat-input-element[type=week]::after,.mat-input-element[type=time]::after{content:" ";white-space:pre;width:1px}.mat-input-element::-webkit-inner-spin-button,.mat-input-element::-webkit-calendar-picker-indicator,.mat-input-element::-webkit-clear-button{font-size:.75em}.mat-input-element::placeholder{-webkit-user-select:none;-moz-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-moz-placeholder{-webkit-user-select:none;-moz-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-webkit-input-placeholder{-webkit-user-select:none;-moz-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element:-ms-input-placeholder{-webkit-user-select:none;-moz-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-hide-placeholder .mat-input-element::placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{opacity:0}textarea.mat-input-element{resize:vertical;overflow:auto}textarea.mat-input-element.cdk-textarea-autosize{resize:none}textarea.mat-input-element{padding:2px 0;margin:-2px 0}select.mat-input-element{-moz-appearance:none;-webkit-appearance:none;position:relative;background-color:transparent;display:inline-flex;box-sizing:border-box;padding-top:1em;top:-1em;margin-bottom:-1em}select.mat-input-element::-moz-focus-inner{border:0}select.mat-input-element:not(:disabled){cursor:pointer}.mat-form-field-type-mat-native-select .mat-form-field-infix::after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid;position:absolute;top:50%;right:0;margin-top:-2.5px;pointer-events:none}[dir=rtl] .mat-form-field-type-mat-native-select .mat-form-field-infix::after{right:auto;left:0}.mat-form-field-type-mat-native-select .mat-input-element{padding-right:15px}[dir=rtl] .mat-form-field-type-mat-native-select .mat-input-element{padding-right:0;padding-left:15px}.mat-form-field-type-mat-native-select .mat-form-field-label-wrapper{max-width:calc(100% - 10px)}.mat-form-field-type-mat-native-select.mat-form-field-appearance-outline .mat-form-field-infix::after{margin-top:-5px}.mat-form-field-type-mat-native-select.mat-form-field-appearance-fill .mat-form-field-infix::after{margin-top:-10px}\n',".mat-form-field-appearance-legacy .mat-form-field-label{transform:perspective(100px)}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon{width:1em}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button{font:inherit;vertical-align:baseline}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button .mat-icon{font-size:inherit}.mat-form-field-appearance-legacy .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-legacy .mat-form-field-ripple{top:0;height:2px;overflow:hidden}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:transparent}.cdk-high-contrast-active .mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px}.mat-form-field-appearance-legacy.mat-form-field-invalid:not(.mat-focused) .mat-form-field-ripple{height:1px}\n",".mat-form-field-appearance-outline .mat-form-field-wrapper{margin:.25em 0}.mat-form-field-appearance-outline .mat-form-field-flex{padding:0 .75em 0 .75em;margin-top:-0.25em;position:relative}.mat-form-field-appearance-outline .mat-form-field-prefix,.mat-form-field-appearance-outline .mat-form-field-suffix{top:.25em}.mat-form-field-appearance-outline .mat-form-field-outline{display:flex;position:absolute;top:.25em;left:0;right:0;bottom:0;pointer-events:none}.mat-form-field-appearance-outline .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-end{border:1px solid currentColor;min-width:5px}.mat-form-field-appearance-outline .mat-form-field-outline-start{border-radius:5px 0 0 5px;border-right-style:none}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-start{border-right-style:solid;border-left-style:none;border-radius:0 5px 5px 0}.mat-form-field-appearance-outline .mat-form-field-outline-end{border-radius:0 5px 5px 0;border-left-style:none;flex-grow:1}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-end{border-left-style:solid;border-right-style:none;border-radius:5px 0 0 5px}.mat-form-field-appearance-outline .mat-form-field-outline-gap{border-radius:.000001px;border:1px solid currentColor;border-left-style:none;border-right-style:none}.mat-form-field-appearance-outline.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-outline-gap{border-top-color:transparent}.mat-form-field-appearance-outline .mat-form-field-outline-thick{opacity:0}.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-end,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-gap{border-width:2px}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline{opacity:0;transition:opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline-thick{opacity:1}.cdk-high-contrast-active .mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick{border:3px dashed}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline{opacity:0;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline-thick{opacity:1}.mat-form-field-appearance-outline .mat-form-field-subscript-wrapper{padding:0 1em}.mat-form-field-appearance-outline._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-start,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-end,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-gap{transition:none}\n",".mat-form-field-appearance-standard .mat-form-field-flex{padding-top:.75em}.mat-form-field-appearance-standard .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-standard .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:transparent}.cdk-high-contrast-active .mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px}.mat-form-field-appearance-standard:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-standard._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}\n"],encapsulation:2,data:{animation:[ve.transitionMessages]},changeDetection:0}),me})(),ne=(()=>{class me{}return me.\u0275fac=function(Zt){return new(Zt||me)},me.\u0275mod=e.oAB({type:me}),me.\u0275inj=e.cJS({imports:[[_.ez,t.BQ,C.Q8],t.BQ]}),me})()},43954:(U,$,m)=>{"use strict";m.d($,{Il:()=>lt,N6:()=>Ut,DX:()=>Q,jo:()=>St,$H:()=>at});var C=m(5e3),_=m(90508),e=m(63191),t=m(50226);const n=["*"],r=[[["","mat-grid-avatar",""],["","matGridAvatar",""]],[["","mat-line",""],["","matLine",""]],"*"],s=["[mat-grid-avatar], [matGridAvatar]","[mat-line], [matLine]","*"];class y{constructor(){this.columnIndex=0,this.rowIndex=0}get rowCount(){return this.rowIndex+1}get rowspan(){const ht=Math.max(...this.tracker);return ht>1?this.rowCount+ht-1:this.rowCount}update(ht,nt){this.columnIndex=0,this.rowIndex=0,this.tracker=new Array(ht),this.tracker.fill(0,0,this.tracker.length),this.positions=nt.map(he=>this._trackTile(he))}_trackTile(ht){const nt=this._findMatchingGap(ht.colspan);return this._markTilePosition(nt,ht),this.columnIndex=nt+ht.colspan,new x(this.rowIndex,nt)}_findMatchingGap(ht){let nt=-1,he=-1;do{this.columnIndex+ht>this.tracker.length?(this._nextRow(),nt=this.tracker.indexOf(0,this.columnIndex),he=this._findGapEndIndex(nt)):(nt=this.tracker.indexOf(0,this.columnIndex),-1!=nt?(he=this._findGapEndIndex(nt),this.columnIndex=nt+1):(this._nextRow(),nt=this.tracker.indexOf(0,this.columnIndex),he=this._findGapEndIndex(nt)))}while(he-nt<ht||0==he);return Math.max(nt,0)}_nextRow(){this.columnIndex=0,this.rowIndex++;for(let ht=0;ht<this.tracker.length;ht++)this.tracker[ht]=Math.max(0,this.tracker[ht]-1)}_findGapEndIndex(ht){for(let nt=ht+1;nt<this.tracker.length;nt++)if(0!=this.tracker[nt])return nt;return this.tracker.length}_markTilePosition(ht,nt){for(let he=0;he<nt.colspan;he++)this.tracker[ht+he]=nt.rowspan}}class x{constructor(ht,nt){this.row=ht,this.col=nt}}const B=new C.OlP("MAT_GRID_LIST");let Q=(()=>{class Et{constructor(nt,he){this._element=nt,this._gridList=he,this._rowspan=1,this._colspan=1}get rowspan(){return this._rowspan}set rowspan(nt){this._rowspan=Math.round((0,e.su)(nt))}get colspan(){return this._colspan}set colspan(nt){this._colspan=Math.round((0,e.su)(nt))}_setStyle(nt,he){this._element.nativeElement.style[nt]=he}}return Et.\u0275fac=function(nt){return new(nt||Et)(C.Y36(C.SBq),C.Y36(B,8))},Et.\u0275cmp=C.Xpm({type:Et,selectors:[["mat-grid-tile"]],hostAttrs:[1,"mat-grid-tile"],hostVars:2,hostBindings:function(nt,he){2&nt&&C.uIk("rowspan",he.rowspan)("colspan",he.colspan)},inputs:{rowspan:"rowspan",colspan:"colspan"},exportAs:["matGridTile"],ngContentSelectors:n,decls:2,vars:0,consts:[[1,"mat-grid-tile-content"]],template:function(nt,he){1&nt&&(C.F$t(),C.TgZ(0,"div",0),C.Hsn(1),C.qZA())},styles:[".mat-grid-list{display:block;position:relative}.mat-grid-tile{display:block;position:absolute;overflow:hidden}.mat-grid-tile .mat-grid-tile-header,.mat-grid-tile .mat-grid-tile-footer{display:flex;align-items:center;height:48px;color:#fff;background:rgba(0,0,0,.38);overflow:hidden;padding:0 16px;position:absolute;left:0;right:0}.mat-grid-tile .mat-grid-tile-header>*,.mat-grid-tile .mat-grid-tile-footer>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-grid-tile .mat-grid-tile-header.mat-2-line,.mat-grid-tile .mat-grid-tile-footer.mat-2-line{height:68px}.mat-grid-tile .mat-grid-list-text{display:flex;flex-direction:column;flex:auto;box-sizing:border-box;overflow:hidden}.mat-grid-tile .mat-grid-list-text>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-grid-tile .mat-grid-list-text:empty{display:none}.mat-grid-tile .mat-grid-tile-header{top:0}.mat-grid-tile .mat-grid-tile-footer{bottom:0}.mat-grid-tile .mat-grid-avatar{padding-right:16px}[dir=rtl] .mat-grid-tile .mat-grid-avatar{padding-right:0;padding-left:16px}.mat-grid-tile .mat-grid-avatar:empty{display:none}.mat-grid-tile-content{top:0;left:0;right:0;bottom:0;position:absolute;display:flex;align-items:center;justify-content:center;height:100%;padding:0;margin:0}\n"],encapsulation:2,changeDetection:0}),Et})(),at=(()=>{class Et{constructor(nt){this._element=nt}ngAfterContentInit(){(0,_.E0)(this._lines,this._element)}}return Et.\u0275fac=function(nt){return new(nt||Et)(C.Y36(C.SBq))},Et.\u0275cmp=C.Xpm({type:Et,selectors:[["mat-grid-tile-header"],["mat-grid-tile-footer"]],contentQueries:function(nt,he,Mt){if(1&nt&&C.Suo(Mt,_.X2,5),2&nt){let Nt;C.iGM(Nt=C.CRH())&&(he._lines=Nt)}},ngContentSelectors:s,decls:4,vars:0,consts:[[1,"mat-grid-list-text"]],template:function(nt,he){1&nt&&(C.F$t(r),C.Hsn(0),C.TgZ(1,"div",0),C.Hsn(2,1),C.qZA(),C.Hsn(3,2))},encapsulation:2,changeDetection:0}),Et})(),St=(()=>{class Et{}return Et.\u0275fac=function(nt){return new(nt||Et)},Et.\u0275dir=C.lG2({type:Et,selectors:[["mat-grid-tile-header"]],hostAttrs:[1,"mat-grid-tile-header"]}),Et})();const vt=/^-?\d+((\.\d+)?[A-Za-z%$]?)+$/;class xt{constructor(){this._rows=0,this._rowspan=0}init(ht,nt,he,Mt){this._gutterSize=ot(ht),this._rows=nt.rowCount,this._rowspan=nt.rowspan,this._cols=he,this._direction=Mt}getBaseTileSize(ht,nt){return`(${ht}% - (${this._gutterSize} * ${nt}))`}getTilePosition(ht,nt){return 0===nt?"0":yt(`(${ht} + ${this._gutterSize}) * ${nt}`)}getTileSize(ht,nt){return`(${ht} * ${nt}) + (${nt-1} * ${this._gutterSize})`}setStyle(ht,nt,he){let Mt=100/this._cols,Nt=(this._cols-1)/this._cols;this.setColStyles(ht,he,Mt,Nt),this.setRowStyles(ht,nt,Mt,Nt)}setColStyles(ht,nt,he,Mt){let Nt=this.getBaseTileSize(he,Mt);ht._setStyle("rtl"===this._direction?"right":"left",this.getTilePosition(Nt,nt)),ht._setStyle("width",yt(this.getTileSize(Nt,ht.colspan)))}getGutterSpan(){return`${this._gutterSize} * (${this._rowspan} - 1)`}getTileSpan(ht){return`${this._rowspan} * ${this.getTileSize(ht,1)}`}getComputedHeight(){return null}}class Wt extends xt{constructor(ht){super(),this.fixedRowHeight=ht}init(ht,nt,he,Mt){super.init(ht,nt,he,Mt),this.fixedRowHeight=ot(this.fixedRowHeight),vt.test(this.fixedRowHeight)}setRowStyles(ht,nt){ht._setStyle("top",this.getTilePosition(this.fixedRowHeight,nt)),ht._setStyle("height",yt(this.getTileSize(this.fixedRowHeight,ht.rowspan)))}getComputedHeight(){return["height",yt(`${this.getTileSpan(this.fixedRowHeight)} + ${this.getGutterSpan()}`)]}reset(ht){ht._setListStyle(["height",null]),ht._tiles&&ht._tiles.forEach(nt=>{nt._setStyle("top",null),nt._setStyle("height",null)})}}class Jt extends xt{constructor(ht){super(),this._parseRatio(ht)}setRowStyles(ht,nt,he,Mt){this.baseTileHeight=this.getBaseTileSize(he/this.rowHeightRatio,Mt),ht._setStyle("marginTop",this.getTilePosition(this.baseTileHeight,nt)),ht._setStyle("paddingTop",yt(this.getTileSize(this.baseTileHeight,ht.rowspan)))}getComputedHeight(){return["paddingBottom",yt(`${this.getTileSpan(this.baseTileHeight)} + ${this.getGutterSpan()}`)]}reset(ht){ht._setListStyle(["paddingBottom",null]),ht._tiles.forEach(nt=>{nt._setStyle("marginTop",null),nt._setStyle("paddingTop",null)})}_parseRatio(ht){const nt=ht.split(":");this.rowHeightRatio=parseFloat(nt[0])/parseFloat(nt[1])}}class Ct extends xt{setRowStyles(ht,nt){let Nt=this.getBaseTileSize(100/this._rowspan,(this._rows-1)/this._rows);ht._setStyle("top",this.getTilePosition(Nt,nt)),ht._setStyle("height",yt(this.getTileSize(Nt,ht.rowspan)))}reset(ht){ht._tiles&&ht._tiles.forEach(nt=>{nt._setStyle("top",null),nt._setStyle("height",null)})}}function yt(Et){return`calc(${Et})`}function ot(Et){return Et.match(/([A-Za-z%]+)$/)?Et:`${Et}px`}let lt=(()=>{class Et{constructor(nt,he){this._element=nt,this._dir=he,this._gutter="1px"}get cols(){return this._cols}set cols(nt){this._cols=Math.max(1,Math.round((0,e.su)(nt)))}get gutterSize(){return this._gutter}set gutterSize(nt){this._gutter=`${null==nt?"":nt}`}get rowHeight(){return this._rowHeight}set rowHeight(nt){const he=`${null==nt?"":nt}`;he!==this._rowHeight&&(this._rowHeight=he,this._setTileStyler(this._rowHeight))}ngOnInit(){this._checkCols(),this._checkRowHeight()}ngAfterContentChecked(){this._layoutTiles()}_checkCols(){}_checkRowHeight(){this._rowHeight||this._setTileStyler("1:1")}_setTileStyler(nt){this._tileStyler&&this._tileStyler.reset(this),this._tileStyler="fit"===nt?new Ct:nt&&nt.indexOf(":")>-1?new Jt(nt):new Wt(nt)}_layoutTiles(){this._tileCoordinator||(this._tileCoordinator=new y);const nt=this._tileCoordinator,he=this._tiles.filter(Nt=>!Nt._gridList||Nt._gridList===this),Mt=this._dir?this._dir.value:"ltr";this._tileCoordinator.update(this.cols,he),this._tileStyler.init(this.gutterSize,nt,this.cols,Mt),he.forEach((Nt,de)=>{const ve=nt.positions[de];this._tileStyler.setStyle(Nt,ve.row,ve.col)}),this._setListStyle(this._tileStyler.getComputedHeight())}_setListStyle(nt){nt&&(this._element.nativeElement.style[nt[0]]=nt[1])}}return Et.\u0275fac=function(nt){return new(nt||Et)(C.Y36(C.SBq),C.Y36(t.Is,8))},Et.\u0275cmp=C.Xpm({type:Et,selectors:[["mat-grid-list"]],contentQueries:function(nt,he,Mt){if(1&nt&&C.Suo(Mt,Q,5),2&nt){let Nt;C.iGM(Nt=C.CRH())&&(he._tiles=Nt)}},hostAttrs:[1,"mat-grid-list"],hostVars:1,hostBindings:function(nt,he){2&nt&&C.uIk("cols",he.cols)},inputs:{cols:"cols",gutterSize:"gutterSize",rowHeight:"rowHeight"},exportAs:["matGridList"],features:[C._Bn([{provide:B,useExisting:Et}])],ngContentSelectors:n,decls:2,vars:0,template:function(nt,he){1&nt&&(C.F$t(),C.TgZ(0,"div"),C.Hsn(1),C.qZA())},styles:[".mat-grid-list{display:block;position:relative}.mat-grid-tile{display:block;position:absolute;overflow:hidden}.mat-grid-tile .mat-grid-tile-header,.mat-grid-tile .mat-grid-tile-footer{display:flex;align-items:center;height:48px;color:#fff;background:rgba(0,0,0,.38);overflow:hidden;padding:0 16px;position:absolute;left:0;right:0}.mat-grid-tile .mat-grid-tile-header>*,.mat-grid-tile .mat-grid-tile-footer>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-grid-tile .mat-grid-tile-header.mat-2-line,.mat-grid-tile .mat-grid-tile-footer.mat-2-line{height:68px}.mat-grid-tile .mat-grid-list-text{display:flex;flex-direction:column;flex:auto;box-sizing:border-box;overflow:hidden}.mat-grid-tile .mat-grid-list-text>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-grid-tile .mat-grid-list-text:empty{display:none}.mat-grid-tile .mat-grid-tile-header{top:0}.mat-grid-tile .mat-grid-tile-footer{bottom:0}.mat-grid-tile .mat-grid-avatar{padding-right:16px}[dir=rtl] .mat-grid-tile .mat-grid-avatar{padding-right:0;padding-left:16px}.mat-grid-tile .mat-grid-avatar:empty{display:none}.mat-grid-tile-content{top:0;left:0;right:0;bottom:0;position:absolute;display:flex;align-items:center;justify-content:center;height:100%;padding:0;margin:0}\n"],encapsulation:2,changeDetection:0}),Et})(),Ut=(()=>{class Et{}return Et.\u0275fac=function(nt){return new(nt||Et)},Et.\u0275mod=C.oAB({type:Et}),Et.\u0275inj=C.cJS({imports:[[_.uc,_.BQ],_.uc,_.BQ]}),Et})()},63874:(U,$,m)=>{"use strict";m.d($,{Hw:()=>Di,Ps:()=>Ze});var C=m(5e3),_=m(90508),e=m(63191),t=m(69808),n=m(68306),r=m(30576),u=m(39646),y=m(4128),x=m(50727),B=m(18505),Q=m(54004),at=m(70262),rt=m(28746),St=m(13099),Ht=m(95698),vt=m(40520),xt=m(22313);const Wt=["*"];let Jt;function yt(Le){var gi;return(null===(gi=function(){if(void 0===Jt&&(Jt=null,"undefined"!=typeof window)){const Le=window;void 0!==Le.trustedTypes&&(Jt=Le.trustedTypes.createPolicy("angular#components",{createHTML:gi=>gi}))}return Jt}())||void 0===gi?void 0:gi.createHTML(Le))||Le}function ot(Le){return Error(`Unable to find icon with the name "${Le}"`)}function lt(Le){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${Le}".`)}function Ut(Le){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${Le}".`)}class Rt{constructor(gi,Bt,Te){this.url=gi,this.svgText=Bt,this.options=Te}}let Et=(()=>{class Le{constructor(Bt,Te,$t,_e){this._httpClient=Bt,this._sanitizer=Te,this._errorHandler=_e,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass="material-icons",this._document=$t}addSvgIcon(Bt,Te,$t){return this.addSvgIconInNamespace("",Bt,Te,$t)}addSvgIconLiteral(Bt,Te,$t){return this.addSvgIconLiteralInNamespace("",Bt,Te,$t)}addSvgIconInNamespace(Bt,Te,$t,_e){return this._addSvgIconConfig(Bt,Te,new Rt($t,null,_e))}addSvgIconResolver(Bt){return this._resolvers.push(Bt),this}addSvgIconLiteralInNamespace(Bt,Te,$t,_e){const At=this._sanitizer.sanitize(C.q3G.HTML,$t);if(!At)throw Ut($t);const pe=yt(At);return this._addSvgIconConfig(Bt,Te,new Rt("",pe,_e))}addSvgIconSet(Bt,Te){return this.addSvgIconSetInNamespace("",Bt,Te)}addSvgIconSetLiteral(Bt,Te){return this.addSvgIconSetLiteralInNamespace("",Bt,Te)}addSvgIconSetInNamespace(Bt,Te,$t){return this._addSvgIconSetConfig(Bt,new Rt(Te,null,$t))}addSvgIconSetLiteralInNamespace(Bt,Te,$t){const _e=this._sanitizer.sanitize(C.q3G.HTML,Te);if(!_e)throw Ut(Te);const At=yt(_e);return this._addSvgIconSetConfig(Bt,new Rt("",At,$t))}registerFontClassAlias(Bt,Te=Bt){return this._fontCssClassesByAlias.set(Bt,Te),this}classNameForFontAlias(Bt){return this._fontCssClassesByAlias.get(Bt)||Bt}setDefaultFontSetClass(Bt){return this._defaultFontSetClass=Bt,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(Bt){const Te=this._sanitizer.sanitize(C.q3G.RESOURCE_URL,Bt);if(!Te)throw lt(Bt);const $t=this._cachedIconsByUrl.get(Te);return $t?(0,u.of)(he($t)):this._loadSvgIconFromConfig(new Rt(Bt,null)).pipe((0,B.b)(_e=>this._cachedIconsByUrl.set(Te,_e)),(0,Q.U)(_e=>he(_e)))}getNamedSvgIcon(Bt,Te=""){const $t=Mt(Te,Bt);let _e=this._svgIconConfigs.get($t);if(_e)return this._getSvgFromConfig(_e);if(_e=this._getIconConfigFromResolvers(Te,Bt),_e)return this._svgIconConfigs.set($t,_e),this._getSvgFromConfig(_e);const At=this._iconSetConfigs.get(Te);return At?this._getSvgFromIconSetConfigs(Bt,At):function(Le,gi){const Bt=(0,r.m)(Le)?Le:()=>Le,Te=$t=>$t.error(Bt());return new n.y(Te)}(ot($t))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(Bt){return Bt.svgText?(0,u.of)(he(this._svgElementFromConfig(Bt))):this._loadSvgIconFromConfig(Bt).pipe((0,Q.U)(Te=>he(Te)))}_getSvgFromIconSetConfigs(Bt,Te){const $t=this._extractIconWithNameFromAnySet(Bt,Te);if($t)return(0,u.of)($t);const _e=Te.filter(At=>!At.svgText).map(At=>this._loadSvgIconSetFromConfig(At).pipe((0,at.K)(pe=>{const hi=`Loading icon set URL: ${this._sanitizer.sanitize(C.q3G.RESOURCE_URL,At.url)} failed: ${pe.message}`;return this._errorHandler.handleError(new Error(hi)),(0,u.of)(null)})));return(0,y.D)(_e).pipe((0,Q.U)(()=>{const At=this._extractIconWithNameFromAnySet(Bt,Te);if(!At)throw ot(Bt);return At}))}_extractIconWithNameFromAnySet(Bt,Te){for(let $t=Te.length-1;$t>=0;$t--){const _e=Te[$t];if(_e.svgText&&_e.svgText.toString().indexOf(Bt)>-1){const At=this._svgElementFromConfig(_e),pe=this._extractSvgIconFromSet(At,Bt,_e.options);if(pe)return pe}}return null}_loadSvgIconFromConfig(Bt){return this._fetchIcon(Bt).pipe((0,B.b)(Te=>Bt.svgText=Te),(0,Q.U)(()=>this._svgElementFromConfig(Bt)))}_loadSvgIconSetFromConfig(Bt){return Bt.svgText?(0,u.of)(null):this._fetchIcon(Bt).pipe((0,B.b)(Te=>Bt.svgText=Te))}_extractSvgIconFromSet(Bt,Te,$t){const _e=Bt.querySelector(`[id="${Te}"]`);if(!_e)return null;const At=_e.cloneNode(!0);if(At.removeAttribute("id"),"svg"===At.nodeName.toLowerCase())return this._setSvgAttributes(At,$t);if("symbol"===At.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(At),$t);const pe=this._svgElementFromString(yt("<svg></svg>"));return pe.appendChild(At),this._setSvgAttributes(pe,$t)}_svgElementFromString(Bt){const Te=this._document.createElement("DIV");Te.innerHTML=Bt;const $t=Te.querySelector("svg");if(!$t)throw Error("<svg> tag not found");return $t}_toSvgElement(Bt){const Te=this._svgElementFromString(yt("<svg></svg>")),$t=Bt.attributes;for(let _e=0;_e<$t.length;_e++){const{name:At,value:pe}=$t[_e];"id"!==At&&Te.setAttribute(At,pe)}for(let _e=0;_e<Bt.childNodes.length;_e++)Bt.childNodes[_e].nodeType===this._document.ELEMENT_NODE&&Te.appendChild(Bt.childNodes[_e].cloneNode(!0));return Te}_setSvgAttributes(Bt,Te){return Bt.setAttribute("fit",""),Bt.setAttribute("height","100%"),Bt.setAttribute("width","100%"),Bt.setAttribute("preserveAspectRatio","xMidYMid meet"),Bt.setAttribute("focusable","false"),Te&&Te.viewBox&&Bt.setAttribute("viewBox",Te.viewBox),Bt}_fetchIcon(Bt){var Te;const{url:$t,options:_e}=Bt,At=null!==(Te=null==_e?void 0:_e.withCredentials)&&void 0!==Te&&Te;if(!this._httpClient)throw Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.");if(null==$t)throw Error(`Cannot fetch icon from URL "${$t}".`);const pe=this._sanitizer.sanitize(C.q3G.RESOURCE_URL,$t);if(!pe)throw lt($t);const ze=this._inProgressUrlFetches.get(pe);if(ze)return ze;const hi=this._httpClient.get(pe,{responseType:"text",withCredentials:At}).pipe((0,Q.U)(Ie=>yt(Ie)),(0,rt.x)(()=>this._inProgressUrlFetches.delete(pe)),(0,St.B)());return this._inProgressUrlFetches.set(pe,hi),hi}_addSvgIconConfig(Bt,Te,$t){return this._svgIconConfigs.set(Mt(Bt,Te),$t),this}_addSvgIconSetConfig(Bt,Te){const $t=this._iconSetConfigs.get(Bt);return $t?$t.push(Te):this._iconSetConfigs.set(Bt,[Te]),this}_svgElementFromConfig(Bt){if(!Bt.svgElement){const Te=this._svgElementFromString(Bt.svgText);this._setSvgAttributes(Te,Bt.options),Bt.svgElement=Te}return Bt.svgElement}_getIconConfigFromResolvers(Bt,Te){for(let $t=0;$t<this._resolvers.length;$t++){const _e=this._resolvers[$t](Te,Bt);if(_e)return Nt(_e)?new Rt(_e.url,null,_e.options):new Rt(_e,null)}}}return Le.\u0275fac=function(Bt){return new(Bt||Le)(C.LFG(vt.eN,8),C.LFG(xt.H7),C.LFG(t.K0,8),C.LFG(C.qLn))},Le.\u0275prov=C.Yz7({token:Le,factory:Le.\u0275fac,providedIn:"root"}),Le})();function he(Le){return Le.cloneNode(!0)}function Mt(Le,gi){return Le+":"+gi}function Nt(Le){return!(!Le.url||!Le.options)}const de=(0,_.pj)(class{constructor(Le){this._elementRef=Le}}),ve=new C.OlP("mat-icon-location",{providedIn:"root",factory:function(){const Le=(0,C.f3M)(t.K0),gi=Le?Le.location:null;return{getPathname:()=>gi?gi.pathname+gi.search:""}}}),Be=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],Ne=Be.map(Le=>`[${Le}]`).join(", "),Qe=/^url\(['"]?#(.*?)['"]?\)$/;let Di=(()=>{class Le extends de{constructor(Bt,Te,$t,_e,At){super(Bt),this._iconRegistry=Te,this._location=_e,this._errorHandler=At,this._inline=!1,this._currentIconFetch=x.w0.EMPTY,$t||Bt.nativeElement.setAttribute("aria-hidden","true")}get inline(){return this._inline}set inline(Bt){this._inline=(0,e.Ig)(Bt)}get svgIcon(){return this._svgIcon}set svgIcon(Bt){Bt!==this._svgIcon&&(Bt?this._updateSvgIcon(Bt):this._svgIcon&&this._clearSvgElement(),this._svgIcon=Bt)}get fontSet(){return this._fontSet}set fontSet(Bt){const Te=this._cleanupFontValue(Bt);Te!==this._fontSet&&(this._fontSet=Te,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(Bt){const Te=this._cleanupFontValue(Bt);Te!==this._fontIcon&&(this._fontIcon=Te,this._updateFontIconClasses())}_splitIconName(Bt){if(!Bt)return["",""];const Te=Bt.split(":");switch(Te.length){case 1:return["",Te[0]];case 2:return Te;default:throw Error(`Invalid icon name: "${Bt}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){const Bt=this._elementsWithExternalReferences;if(Bt&&Bt.size){const Te=this._location.getPathname();Te!==this._previousPath&&(this._previousPath=Te,this._prependPathToReferences(Te))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(Bt){this._clearSvgElement();const Te=Bt.querySelectorAll("style");for(let _e=0;_e<Te.length;_e++)Te[_e].textContent+=" ";const $t=this._location.getPathname();this._previousPath=$t,this._cacheChildrenWithExternalReferences(Bt),this._prependPathToReferences($t),this._elementRef.nativeElement.appendChild(Bt)}_clearSvgElement(){const Bt=this._elementRef.nativeElement;let Te=Bt.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();Te--;){const $t=Bt.childNodes[Te];(1!==$t.nodeType||"svg"===$t.nodeName.toLowerCase())&&$t.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;const Bt=this._elementRef.nativeElement,Te=this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet):this._iconRegistry.getDefaultFontSetClass();Te!=this._previousFontSetClass&&(this._previousFontSetClass&&Bt.classList.remove(this._previousFontSetClass),Te&&Bt.classList.add(Te),this._previousFontSetClass=Te),this.fontIcon!=this._previousFontIconClass&&(this._previousFontIconClass&&Bt.classList.remove(this._previousFontIconClass),this.fontIcon&&Bt.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(Bt){return"string"==typeof Bt?Bt.trim().split(" ")[0]:Bt}_prependPathToReferences(Bt){const Te=this._elementsWithExternalReferences;Te&&Te.forEach(($t,_e)=>{$t.forEach(At=>{_e.setAttribute(At.name,`url('${Bt}#${At.value}')`)})})}_cacheChildrenWithExternalReferences(Bt){const Te=Bt.querySelectorAll(Ne),$t=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let _e=0;_e<Te.length;_e++)Be.forEach(At=>{const pe=Te[_e],ze=pe.getAttribute(At),hi=ze?ze.match(Qe):null;if(hi){let Ie=$t.get(pe);Ie||(Ie=[],$t.set(pe,Ie)),Ie.push({name:At,value:hi[1]})}})}_updateSvgIcon(Bt){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),Bt){const[Te,$t]=this._splitIconName(Bt);Te&&(this._svgNamespace=Te),$t&&(this._svgName=$t),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon($t,Te).pipe((0,Ht.q)(1)).subscribe(_e=>this._setSvgElement(_e),_e=>{this._errorHandler.handleError(new Error(`Error retrieving icon ${Te}:${$t}! ${_e.message}`))})}}}return Le.\u0275fac=function(Bt){return new(Bt||Le)(C.Y36(C.SBq),C.Y36(Et),C.$8M("aria-hidden"),C.Y36(ve),C.Y36(C.qLn))},Le.\u0275cmp=C.Xpm({type:Le,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:7,hostBindings:function(Bt,Te){2&Bt&&(C.uIk("data-mat-icon-type",Te._usingFontIcon()?"font":"svg")("data-mat-icon-name",Te._svgName||Te.fontIcon)("data-mat-icon-namespace",Te._svgNamespace||Te.fontSet),C.ekj("mat-icon-inline",Te.inline)("mat-icon-no-color","primary"!==Te.color&&"accent"!==Te.color&&"warn"!==Te.color))},inputs:{color:"color",inline:"inline",svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],features:[C.qOj],ngContentSelectors:Wt,decls:1,vars:0,template:function(Bt,Te){1&Bt&&(C.F$t(),C.Hsn(0))},styles:[".mat-icon{-webkit-user-select:none;-moz-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}\n"],encapsulation:2,changeDetection:0}),Le})(),Ze=(()=>{class Le{}return Le.\u0275fac=function(Bt){return new(Bt||Le)},Le.\u0275mod=C.oAB({type:Le}),Le.\u0275inj=C.cJS({imports:[[_.BQ],_.BQ]}),Le})()},77531:(U,$,m)=>{"use strict";m.d($,{Jk:()=>St,Nt:()=>Wt,c:()=>Jt});var C=m(63191),_=m(70925),e=m(5e3),t=m(93075),n=m(90508),r=m(67322),s=m(77579),u=m(60515);const y=(0,_.i$)({passive:!0});let x=(()=>{class Ct{constructor(ot,mt){this._platform=ot,this._ngZone=mt,this._monitoredElements=new Map}monitor(ot){if(!this._platform.isBrowser)return u.E;const mt=(0,C.fI)(ot),lt=this._monitoredElements.get(mt);if(lt)return lt.subject;const Ut=new s.x,Rt="cdk-text-field-autofilled",Et=ht=>{"cdk-text-field-autofill-start"!==ht.animationName||mt.classList.contains(Rt)?"cdk-text-field-autofill-end"===ht.animationName&&mt.classList.contains(Rt)&&(mt.classList.remove(Rt),this._ngZone.run(()=>Ut.next({target:ht.target,isAutofilled:!1}))):(mt.classList.add(Rt),this._ngZone.run(()=>Ut.next({target:ht.target,isAutofilled:!0})))};return this._ngZone.runOutsideAngular(()=>{mt.addEventListener("animationstart",Et,y),mt.classList.add("cdk-text-field-autofill-monitored")}),this._monitoredElements.set(mt,{subject:Ut,unlisten:()=>{mt.removeEventListener("animationstart",Et,y)}}),Ut}stopMonitoring(ot){const mt=(0,C.fI)(ot),lt=this._monitoredElements.get(mt);lt&&(lt.unlisten(),lt.subject.complete(),mt.classList.remove("cdk-text-field-autofill-monitored"),mt.classList.remove("cdk-text-field-autofilled"),this._monitoredElements.delete(mt))}ngOnDestroy(){this._monitoredElements.forEach((ot,mt)=>this.stopMonitoring(mt))}}return Ct.\u0275fac=function(ot){return new(ot||Ct)(e.LFG(_.t4),e.LFG(e.R0b))},Ct.\u0275prov=e.Yz7({token:Ct,factory:Ct.\u0275fac,providedIn:"root"}),Ct})(),at=(()=>{class Ct{}return Ct.\u0275fac=function(ot){return new(ot||Ct)},Ct.\u0275mod=e.oAB({type:Ct}),Ct.\u0275inj=e.cJS({imports:[[_.ud]]}),Ct})();const St=new e.OlP("MAT_INPUT_VALUE_ACCESSOR"),Ht=["button","checkbox","file","hidden","image","radio","range","reset","submit"];let vt=0;const xt=(0,n.FD)(class{constructor(Ct,yt,ot,mt){this._defaultErrorStateMatcher=Ct,this._parentForm=yt,this._parentFormGroup=ot,this.ngControl=mt}});let Wt=(()=>{class Ct extends xt{constructor(ot,mt,lt,Ut,Rt,Et,ht,nt,he,Mt){super(Et,Ut,Rt,lt),this._elementRef=ot,this._platform=mt,this._autofillMonitor=nt,this._formField=Mt,this._uid="mat-input-"+vt++,this.focused=!1,this.stateChanges=new s.x,this.controlType="mat-input",this.autofilled=!1,this._disabled=!1,this._type="text",this._readonly=!1,this._neverEmptyInputTypes=["date","datetime","datetime-local","month","time","week"].filter(ve=>(0,_.qK)().has(ve));const Nt=this._elementRef.nativeElement,de=Nt.nodeName.toLowerCase();this._inputValueAccessor=ht||Nt,this._previousNativeValue=this.value,this.id=this.id,mt.IOS&&he.runOutsideAngular(()=>{ot.nativeElement.addEventListener("keyup",ve=>{const ue=ve.target;!ue.value&&0===ue.selectionStart&&0===ue.selectionEnd&&(ue.setSelectionRange(1,1),ue.setSelectionRange(0,0))})}),this._isServer=!this._platform.isBrowser,this._isNativeSelect="select"===de,this._isTextarea="textarea"===de,this._isInFormField=!!Mt,this._isNativeSelect&&(this.controlType=Nt.multiple?"mat-native-select-multiple":"mat-native-select")}get disabled(){return this.ngControl&&null!==this.ngControl.disabled?this.ngControl.disabled:this._disabled}set disabled(ot){this._disabled=(0,C.Ig)(ot),this.focused&&(this.focused=!1,this.stateChanges.next())}get id(){return this._id}set id(ot){this._id=ot||this._uid}get required(){var ot,mt,lt,Ut;return null!==(Ut=null!==(ot=this._required)&&void 0!==ot?ot:null===(lt=null===(mt=this.ngControl)||void 0===mt?void 0:mt.control)||void 0===lt?void 0:lt.hasValidator(t.kI.required))&&void 0!==Ut&&Ut}set required(ot){this._required=(0,C.Ig)(ot)}get type(){return this._type}set type(ot){this._type=ot||"text",this._validateType(),!this._isTextarea&&(0,_.qK)().has(this._type)&&(this._elementRef.nativeElement.type=this._type)}get value(){return this._inputValueAccessor.value}set value(ot){ot!==this.value&&(this._inputValueAccessor.value=ot,this.stateChanges.next())}get readonly(){return this._readonly}set readonly(ot){this._readonly=(0,C.Ig)(ot)}ngAfterViewInit(){this._platform.isBrowser&&this._autofillMonitor.monitor(this._elementRef.nativeElement).subscribe(ot=>{this.autofilled=ot.isAutofilled,this.stateChanges.next()})}ngOnChanges(){this.stateChanges.next()}ngOnDestroy(){this.stateChanges.complete(),this._platform.isBrowser&&this._autofillMonitor.stopMonitoring(this._elementRef.nativeElement)}ngDoCheck(){this.ngControl&&this.updateErrorState(),this._dirtyCheckNativeValue(),this._dirtyCheckPlaceholder()}focus(ot){this._elementRef.nativeElement.focus(ot)}_focusChanged(ot){ot!==this.focused&&(this.focused=ot,this.stateChanges.next())}_onInput(){}_dirtyCheckPlaceholder(){var ot,mt;const lt=(null===(mt=null===(ot=this._formField)||void 0===ot?void 0:ot._hideControlPlaceholder)||void 0===mt?void 0:mt.call(ot))?null:this.placeholder;if(lt!==this._previousPlaceholder){const Ut=this._elementRef.nativeElement;this._previousPlaceholder=lt,lt?Ut.setAttribute("placeholder",lt):Ut.removeAttribute("placeholder")}}_dirtyCheckNativeValue(){const ot=this._elementRef.nativeElement.value;this._previousNativeValue!==ot&&(this._previousNativeValue=ot,this.stateChanges.next())}_validateType(){Ht.indexOf(this._type)}_isNeverEmpty(){return this._neverEmptyInputTypes.indexOf(this._type)>-1}_isBadInput(){let ot=this._elementRef.nativeElement.validity;return ot&&ot.badInput}get empty(){return!(this._isNeverEmpty()||this._elementRef.nativeElement.value||this._isBadInput()||this.autofilled)}get shouldLabelFloat(){if(this._isNativeSelect){const ot=this._elementRef.nativeElement,mt=ot.options[0];return this.focused||ot.multiple||!this.empty||!!(ot.selectedIndex>-1&&mt&&mt.label)}return this.focused||!this.empty}setDescribedByIds(ot){ot.length?this._elementRef.nativeElement.setAttribute("aria-describedby",ot.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}onContainerClick(){this.focused||this.focus()}_isInlineSelect(){const ot=this._elementRef.nativeElement;return this._isNativeSelect&&(ot.multiple||ot.size>1)}}return Ct.\u0275fac=function(ot){return new(ot||Ct)(e.Y36(e.SBq),e.Y36(_.t4),e.Y36(t.a5,10),e.Y36(t.F,8),e.Y36(t.sg,8),e.Y36(n.rD),e.Y36(St,10),e.Y36(x),e.Y36(e.R0b),e.Y36(r.G_,8))},Ct.\u0275dir=e.lG2({type:Ct,selectors:[["input","matInput",""],["textarea","matInput",""],["select","matNativeControl",""],["input","matNativeControl",""],["textarea","matNativeControl",""]],hostAttrs:[1,"mat-input-element","mat-form-field-autofill-control"],hostVars:11,hostBindings:function(ot,mt){1&ot&&e.NdJ("focus",function(){return mt._focusChanged(!0)})("blur",function(){return mt._focusChanged(!1)})("input",function(){return mt._onInput()}),2&ot&&(e.Ikx("disabled",mt.disabled)("required",mt.required),e.uIk("id",mt.id)("data-placeholder",mt.placeholder)("readonly",mt.readonly&&!mt._isNativeSelect||null)("aria-invalid",mt.empty&&mt.required?null:mt.errorState)("aria-required",mt.required),e.ekj("mat-input-server",mt._isServer)("mat-native-select-inline",mt._isInlineSelect()))},inputs:{disabled:"disabled",id:"id",placeholder:"placeholder",required:"required",type:"type",errorStateMatcher:"errorStateMatcher",userAriaDescribedBy:["aria-describedby","userAriaDescribedBy"],value:"value",readonly:"readonly"},exportAs:["matInput"],features:[e._Bn([{provide:r.Eo,useExisting:Ct}]),e.qOj,e.TTD]}),Ct})(),Jt=(()=>{class Ct{}return Ct.\u0275fac=function(ot){return new(ot||Ct)},Ct.\u0275mod=e.oAB({type:Ct}),Ct.\u0275inj=e.cJS({providers:[n.rD],imports:[[at,r.lN,n.BQ],at,r.lN]}),Ct})()},92181:(U,$,m)=>{"use strict";m.d($,{VK:()=>Te,Tx:()=>te,p6:()=>Ie});var C=m(15664),_=m(63191),e=m(91159),t=m(5e3),n=m(77579),r=m(50727),s=m(56451),u=m(39646),y=m(53101),x=m(68675),B=m(63900),Q=m(95698),at=m(39300),rt=m(82722),St=m(91005),Ht=m(41777),vt=m(47429),xt=m(69808),Wt=m(90508),Jt=m(91314),Ct=m(70925),yt=m(50226),ot=m(30495);const mt=["mat-menu-item",""];function lt(ee,ke){1&ee&&(t.O4$(),t.TgZ(0,"svg",2),t._UZ(1,"polygon",3),t.qZA())}const Ut=["*"];function Rt(ee,ke){if(1&ee){const ne=t.EpF();t.TgZ(0,"div",0),t.NdJ("keydown",function(ye){return t.CHM(ne),t.oxw()._handleKeydown(ye)})("click",function(){return t.CHM(ne),t.oxw().closed.emit("click")})("@transformMenu.start",function(ye){return t.CHM(ne),t.oxw()._onAnimationStart(ye)})("@transformMenu.done",function(ye){return t.CHM(ne),t.oxw()._onAnimationDone(ye)}),t.TgZ(1,"div",1),t.Hsn(2),t.qZA(),t.qZA()}if(2&ee){const ne=t.oxw();t.Q6J("id",ne.panelId)("ngClass",ne._classList)("@transformMenu",ne._panelAnimationState),t.uIk("aria-label",ne.ariaLabel||null)("aria-labelledby",ne.ariaLabelledby||null)("aria-describedby",ne.ariaDescribedby||null)}}const Et={transformMenu:(0,Ht.X$)("transformMenu",[(0,Ht.SB)("void",(0,Ht.oB)({opacity:0,transform:"scale(0.8)"})),(0,Ht.eR)("void => enter",(0,Ht.jt)("120ms cubic-bezier(0, 0, 0.2, 1)",(0,Ht.oB)({opacity:1,transform:"scale(1)"}))),(0,Ht.eR)("* => void",(0,Ht.jt)("100ms 25ms linear",(0,Ht.oB)({opacity:0})))]),fadeInItems:(0,Ht.X$)("fadeInItems",[(0,Ht.SB)("showing",(0,Ht.oB)({opacity:1})),(0,Ht.eR)("void => *",[(0,Ht.oB)({opacity:0}),(0,Ht.jt)("400ms 100ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])},he=new t.OlP("MatMenuContent"),Ne=new t.OlP("MAT_MENU_PANEL"),Qe=(0,Wt.Kr)((0,Wt.Id)(class{}));let Di=(()=>{class ee extends Qe{constructor(ne,me,ye,Zt,ce){super(),this._elementRef=ne,this._focusMonitor=ye,this._parentMenu=Zt,this._changeDetectorRef=ce,this.role="menuitem",this._hovered=new n.x,this._focused=new n.x,this._highlighted=!1,this._triggersSubmenu=!1,Zt&&Zt.addItem&&Zt.addItem(this)}focus(ne,me){this._focusMonitor&&ne?this._focusMonitor.focusVia(this._getHostElement(),ne,me):this._getHostElement().focus(me),this._focused.next(this)}ngAfterViewInit(){this._focusMonitor&&this._focusMonitor.monitor(this._elementRef,!1)}ngOnDestroy(){this._focusMonitor&&this._focusMonitor.stopMonitoring(this._elementRef),this._parentMenu&&this._parentMenu.removeItem&&this._parentMenu.removeItem(this),this._hovered.complete(),this._focused.complete()}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._elementRef.nativeElement}_checkDisabled(ne){this.disabled&&(ne.preventDefault(),ne.stopPropagation())}_handleMouseEnter(){this._hovered.next(this)}getLabel(){var ne;const me=this._elementRef.nativeElement.cloneNode(!0),ye=me.querySelectorAll("mat-icon, .material-icons");for(let Zt=0;Zt<ye.length;Zt++)ye[Zt].remove();return(null===(ne=me.textContent)||void 0===ne?void 0:ne.trim())||""}_setHighlighted(ne){var me;this._highlighted=ne,null===(me=this._changeDetectorRef)||void 0===me||me.markForCheck()}}return ee.\u0275fac=function(ne){return new(ne||ee)(t.Y36(t.SBq),t.Y36(xt.K0),t.Y36(C.tE),t.Y36(Ne,8),t.Y36(t.sBO))},ee.\u0275cmp=t.Xpm({type:ee,selectors:[["","mat-menu-item",""]],hostAttrs:[1,"mat-focus-indicator"],hostVars:10,hostBindings:function(ne,me){1&ne&&t.NdJ("click",function(Zt){return me._checkDisabled(Zt)})("mouseenter",function(){return me._handleMouseEnter()}),2&ne&&(t.uIk("role",me.role)("tabindex",me._getTabIndex())("aria-disabled",me.disabled.toString())("disabled",me.disabled||null),t.ekj("mat-menu-item",!0)("mat-menu-item-highlighted",me._highlighted)("mat-menu-item-submenu-trigger",me._triggersSubmenu))},inputs:{disabled:"disabled",disableRipple:"disableRipple",role:"role"},exportAs:["matMenuItem"],features:[t.qOj],attrs:mt,ngContentSelectors:Ut,decls:3,vars:3,consts:[["matRipple","",1,"mat-menu-ripple",3,"matRippleDisabled","matRippleTrigger"],["class","mat-menu-submenu-icon","viewBox","0 0 5 10","focusable","false",4,"ngIf"],["viewBox","0 0 5 10","focusable","false",1,"mat-menu-submenu-icon"],["points","0,0 5,5 0,10"]],template:function(ne,me){1&ne&&(t.F$t(),t.Hsn(0),t._UZ(1,"div",0),t.YNc(2,lt,2,0,"svg",1)),2&ne&&(t.xp6(1),t.Q6J("matRippleDisabled",me.disableRipple||me.disabled)("matRippleTrigger",me._getHostElement()),t.xp6(1),t.Q6J("ngIf",me._triggersSubmenu))},directives:[Wt.wG,xt.O5],encapsulation:2,changeDetection:0}),ee})();const Ze=new t.OlP("mat-menu-default-options",{providedIn:"root",factory:function(){return{overlapTrigger:!1,xPosition:"after",yPosition:"below",backdropClass:"cdk-overlay-transparent-backdrop"}}});let gi=0,Bt=(()=>{class ee{constructor(ne,me,ye){this._elementRef=ne,this._ngZone=me,this._defaultOptions=ye,this._xPosition=this._defaultOptions.xPosition,this._yPosition=this._defaultOptions.yPosition,this._directDescendantItems=new t.n_E,this._tabSubscription=r.w0.EMPTY,this._classList={},this._panelAnimationState="void",this._animationDone=new n.x,this.overlayPanelClass=this._defaultOptions.overlayPanelClass||"",this.backdropClass=this._defaultOptions.backdropClass,this._overlapTrigger=this._defaultOptions.overlapTrigger,this._hasBackdrop=this._defaultOptions.hasBackdrop,this.closed=new t.vpe,this.close=this.closed,this.panelId="mat-menu-panel-"+gi++}get xPosition(){return this._xPosition}set xPosition(ne){this._xPosition=ne,this.setPositionClasses()}get yPosition(){return this._yPosition}set yPosition(ne){this._yPosition=ne,this.setPositionClasses()}get overlapTrigger(){return this._overlapTrigger}set overlapTrigger(ne){this._overlapTrigger=(0,_.Ig)(ne)}get hasBackdrop(){return this._hasBackdrop}set hasBackdrop(ne){this._hasBackdrop=(0,_.Ig)(ne)}set panelClass(ne){const me=this._previousPanelClass;me&&me.length&&me.split(" ").forEach(ye=>{this._classList[ye]=!1}),this._previousPanelClass=ne,ne&&ne.length&&(ne.split(" ").forEach(ye=>{this._classList[ye]=!0}),this._elementRef.nativeElement.className="")}get classList(){return this.panelClass}set classList(ne){this.panelClass=ne}ngOnInit(){this.setPositionClasses()}ngAfterContentInit(){this._updateDirectDescendants(),this._keyManager=new C.Em(this._directDescendantItems).withWrap().withTypeAhead().withHomeAndEnd(),this._tabSubscription=this._keyManager.tabOut.subscribe(()=>this.closed.emit("tab")),this._directDescendantItems.changes.pipe((0,x.O)(this._directDescendantItems),(0,B.w)(ne=>(0,s.T)(...ne.map(me=>me._focused)))).subscribe(ne=>this._keyManager.updateActiveItem(ne))}ngOnDestroy(){this._directDescendantItems.destroy(),this._tabSubscription.unsubscribe(),this.closed.complete()}_hovered(){return this._directDescendantItems.changes.pipe((0,x.O)(this._directDescendantItems),(0,B.w)(me=>(0,s.T)(...me.map(ye=>ye._hovered))))}addItem(ne){}removeItem(ne){}_handleKeydown(ne){const me=ne.keyCode,ye=this._keyManager;switch(me){case e.hY:(0,e.Vb)(ne)||(ne.preventDefault(),this.closed.emit("keydown"));break;case e.oh:this.parentMenu&&"ltr"===this.direction&&this.closed.emit("keydown");break;case e.SV:this.parentMenu&&"rtl"===this.direction&&this.closed.emit("keydown");break;default:(me===e.LH||me===e.JH)&&ye.setFocusOrigin("keyboard"),ye.onKeydown(ne)}}focusFirstItem(ne="program"){this.lazyContent?this._ngZone.onStable.pipe((0,Q.q)(1)).subscribe(()=>this._focusFirstItem(ne)):this._focusFirstItem(ne)}_focusFirstItem(ne){const me=this._keyManager;if(me.setFocusOrigin(ne).setFirstItemActive(),!me.activeItem&&this._directDescendantItems.length){let ye=this._directDescendantItems.first._getHostElement().parentElement;for(;ye;){if("menu"===ye.getAttribute("role")){ye.focus();break}ye=ye.parentElement}}}resetActiveItem(){this._keyManager.setActiveItem(-1)}setElevation(ne){const me=Math.min(this._baseElevation+ne,24),ye=`${this._elevationPrefix}${me}`,Zt=Object.keys(this._classList).find(ce=>ce.startsWith(this._elevationPrefix));(!Zt||Zt===this._previousElevation)&&(this._previousElevation&&(this._classList[this._previousElevation]=!1),this._classList[ye]=!0,this._previousElevation=ye)}setPositionClasses(ne=this.xPosition,me=this.yPosition){const ye=this._classList;ye["mat-menu-before"]="before"===ne,ye["mat-menu-after"]="after"===ne,ye["mat-menu-above"]="above"===me,ye["mat-menu-below"]="below"===me}_startAnimation(){this._panelAnimationState="enter"}_resetAnimation(){this._panelAnimationState="void"}_onAnimationDone(ne){this._animationDone.next(ne),this._isAnimating=!1}_onAnimationStart(ne){this._isAnimating=!0,"enter"===ne.toState&&0===this._keyManager.activeItemIndex&&(ne.element.scrollTop=0)}_updateDirectDescendants(){this._allItems.changes.pipe((0,x.O)(this._allItems)).subscribe(ne=>{this._directDescendantItems.reset(ne.filter(me=>me._parentMenu===this)),this._directDescendantItems.notifyOnChanges()})}}return ee.\u0275fac=function(ne){return new(ne||ee)(t.Y36(t.SBq),t.Y36(t.R0b),t.Y36(Ze))},ee.\u0275dir=t.lG2({type:ee,contentQueries:function(ne,me,ye){if(1&ne&&(t.Suo(ye,he,5),t.Suo(ye,Di,5),t.Suo(ye,Di,4)),2&ne){let Zt;t.iGM(Zt=t.CRH())&&(me.lazyContent=Zt.first),t.iGM(Zt=t.CRH())&&(me._allItems=Zt),t.iGM(Zt=t.CRH())&&(me.items=Zt)}},viewQuery:function(ne,me){if(1&ne&&t.Gf(t.Rgc,5),2&ne){let ye;t.iGM(ye=t.CRH())&&(me.templateRef=ye.first)}},inputs:{backdropClass:"backdropClass",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],ariaDescribedby:["aria-describedby","ariaDescribedby"],xPosition:"xPosition",yPosition:"yPosition",overlapTrigger:"overlapTrigger",hasBackdrop:"hasBackdrop",panelClass:["class","panelClass"],classList:"classList"},outputs:{closed:"closed",close:"close"}}),ee})(),Te=(()=>{class ee extends Bt{constructor(ne,me,ye){super(ne,me,ye),this._elevationPrefix="mat-elevation-z",this._baseElevation=4}}return ee.\u0275fac=function(ne){return new(ne||ee)(t.Y36(t.SBq),t.Y36(t.R0b),t.Y36(Ze))},ee.\u0275cmp=t.Xpm({type:ee,selectors:[["mat-menu"]],hostVars:3,hostBindings:function(ne,me){2&ne&&t.uIk("aria-label",null)("aria-labelledby",null)("aria-describedby",null)},exportAs:["matMenu"],features:[t._Bn([{provide:Ne,useExisting:ee}]),t.qOj],ngContentSelectors:Ut,decls:1,vars:0,consts:[["tabindex","-1","role","menu",1,"mat-menu-panel",3,"id","ngClass","keydown","click"],[1,"mat-menu-content"]],template:function(ne,me){1&ne&&(t.F$t(),t.YNc(0,Rt,3,6,"ng-template"))},directives:[xt.mk],styles:["mat-menu{display:none}.mat-menu-panel{min-width:112px;max-width:280px;overflow:auto;-webkit-overflow-scrolling:touch;max-height:calc(100vh - 48px);border-radius:4px;outline:0;min-height:64px}.mat-menu-panel.ng-animating{pointer-events:none}.cdk-high-contrast-active .mat-menu-panel{outline:solid 1px}.mat-menu-content:not(:empty){padding-top:8px;padding-bottom:8px}.mat-menu-item{-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;line-height:48px;height:48px;padding:0 16px;text-align:left;text-decoration:none;max-width:100%;position:relative}.mat-menu-item::-moz-focus-inner{border:0}.mat-menu-item[disabled]{cursor:default}[dir=rtl] .mat-menu-item{text-align:right}.mat-menu-item .mat-icon{margin-right:16px;vertical-align:middle}.mat-menu-item .mat-icon svg{vertical-align:top}[dir=rtl] .mat-menu-item .mat-icon{margin-left:16px;margin-right:0}.mat-menu-item[disabled]{pointer-events:none}.cdk-high-contrast-active .mat-menu-item{margin-top:1px}.cdk-high-contrast-active .mat-menu-item.cdk-program-focused,.cdk-high-contrast-active .mat-menu-item.cdk-keyboard-focused,.cdk-high-contrast-active .mat-menu-item-highlighted{outline:dotted 1px}.mat-menu-item-submenu-trigger{padding-right:32px}[dir=rtl] .mat-menu-item-submenu-trigger{padding-right:16px;padding-left:32px}.mat-menu-submenu-icon{position:absolute;top:50%;right:16px;transform:translateY(-50%);width:5px;height:10px;fill:currentColor}[dir=rtl] .mat-menu-submenu-icon{right:auto;left:16px;transform:translateY(-50%) scaleX(-1)}.cdk-high-contrast-active .mat-menu-submenu-icon{fill:CanvasText}button.mat-menu-item{width:100%}.mat-menu-item .mat-menu-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}\n"],encapsulation:2,data:{animation:[Et.transformMenu,Et.fadeInItems]},changeDetection:0}),ee})();const $t=new t.OlP("mat-menu-scroll-strategy"),At={provide:$t,deps:[Jt.aV],useFactory:function(ee){return()=>ee.scrollStrategies.reposition()}},ze=(0,Ct.i$)({passive:!0});let hi=(()=>{class ee{constructor(ne,me,ye,Zt,ce,ei,ni,Fi){this._overlay=ne,this._element=me,this._viewContainerRef=ye,this._menuItemInstance=ei,this._dir=ni,this._focusMonitor=Fi,this._overlayRef=null,this._menuOpen=!1,this._closingActionsSubscription=r.w0.EMPTY,this._hoverSubscription=r.w0.EMPTY,this._menuCloseSubscription=r.w0.EMPTY,this._handleTouchStart=wi=>{(0,C.yG)(wi)||(this._openedBy="touch")},this._openedBy=void 0,this.restoreFocus=!0,this.menuOpened=new t.vpe,this.onMenuOpen=this.menuOpened,this.menuClosed=new t.vpe,this.onMenuClose=this.menuClosed,this._scrollStrategy=Zt,this._parentMaterialMenu=ce instanceof Bt?ce:void 0,me.nativeElement.addEventListener("touchstart",this._handleTouchStart,ze),ei&&(ei._triggersSubmenu=this.triggersSubmenu())}get _deprecatedMatMenuTriggerFor(){return this.menu}set _deprecatedMatMenuTriggerFor(ne){this.menu=ne}get menu(){return this._menu}set menu(ne){ne!==this._menu&&(this._menu=ne,this._menuCloseSubscription.unsubscribe(),ne&&(this._menuCloseSubscription=ne.close.subscribe(me=>{this._destroyMenu(me),("click"===me||"tab"===me)&&this._parentMaterialMenu&&this._parentMaterialMenu.closed.emit(me)})))}ngAfterContentInit(){this._checkMenu(),this._handleHover()}ngOnDestroy(){this._overlayRef&&(this._overlayRef.dispose(),this._overlayRef=null),this._element.nativeElement.removeEventListener("touchstart",this._handleTouchStart,ze),this._menuCloseSubscription.unsubscribe(),this._closingActionsSubscription.unsubscribe(),this._hoverSubscription.unsubscribe()}get menuOpen(){return this._menuOpen}get dir(){return this._dir&&"rtl"===this._dir.value?"rtl":"ltr"}triggersSubmenu(){return!(!this._menuItemInstance||!this._parentMaterialMenu)}toggleMenu(){return this._menuOpen?this.closeMenu():this.openMenu()}openMenu(){if(this._menuOpen)return;this._checkMenu();const ne=this._createOverlay(),me=ne.getConfig();this._setPosition(me.positionStrategy),me.hasBackdrop=null==this.menu.hasBackdrop?!this.triggersSubmenu():this.menu.hasBackdrop,ne.attach(this._getPortal()),this.menu.lazyContent&&this.menu.lazyContent.attach(this.menuData),this._closingActionsSubscription=this._menuClosingActions().subscribe(()=>this.closeMenu()),this._initMenu(),this.menu instanceof Bt&&this.menu._startAnimation()}closeMenu(){this.menu.close.emit()}focus(ne,me){this._focusMonitor&&ne?this._focusMonitor.focusVia(this._element,ne,me):this._element.nativeElement.focus(me)}updatePosition(){var ne;null===(ne=this._overlayRef)||void 0===ne||ne.updatePosition()}_destroyMenu(ne){if(!this._overlayRef||!this.menuOpen)return;const me=this.menu;this._closingActionsSubscription.unsubscribe(),this._overlayRef.detach(),this.restoreFocus&&("keydown"===ne||!this._openedBy||!this.triggersSubmenu())&&this.focus(this._openedBy),this._openedBy=void 0,me instanceof Bt?(me._resetAnimation(),me.lazyContent?me._animationDone.pipe((0,at.h)(ye=>"void"===ye.toState),(0,Q.q)(1),(0,rt.R)(me.lazyContent._attached)).subscribe({next:()=>me.lazyContent.detach(),complete:()=>this._setIsMenuOpen(!1)}):this._setIsMenuOpen(!1)):(this._setIsMenuOpen(!1),me.lazyContent&&me.lazyContent.detach())}_initMenu(){this.menu.parentMenu=this.triggersSubmenu()?this._parentMaterialMenu:void 0,this.menu.direction=this.dir,this._setMenuElevation(),this.menu.focusFirstItem(this._openedBy||"program"),this._setIsMenuOpen(!0)}_setMenuElevation(){if(this.menu.setElevation){let ne=0,me=this.menu.parentMenu;for(;me;)ne++,me=me.parentMenu;this.menu.setElevation(ne)}}_setIsMenuOpen(ne){this._menuOpen=ne,this._menuOpen?this.menuOpened.emit():this.menuClosed.emit(),this.triggersSubmenu()&&this._menuItemInstance._setHighlighted(ne)}_checkMenu(){}_createOverlay(){if(!this._overlayRef){const ne=this._getOverlayConfig();this._subscribeToPositions(ne.positionStrategy),this._overlayRef=this._overlay.create(ne),this._overlayRef.keydownEvents().subscribe()}return this._overlayRef}_getOverlayConfig(){return new Jt.X_({positionStrategy:this._overlay.position().flexibleConnectedTo(this._element).withLockedPosition().withGrowAfterOpen().withTransformOriginOn(".mat-menu-panel, .mat-mdc-menu-panel"),backdropClass:this.menu.backdropClass||"cdk-overlay-transparent-backdrop",panelClass:this.menu.overlayPanelClass,scrollStrategy:this._scrollStrategy(),direction:this._dir})}_subscribeToPositions(ne){this.menu.setPositionClasses&&ne.positionChanges.subscribe(me=>{this.menu.setPositionClasses("start"===me.connectionPair.overlayX?"after":"before","top"===me.connectionPair.overlayY?"below":"above")})}_setPosition(ne){let[me,ye]="before"===this.menu.xPosition?["end","start"]:["start","end"],[Zt,ce]="above"===this.menu.yPosition?["bottom","top"]:["top","bottom"],[ei,ni]=[Zt,ce],[Fi,wi]=[me,ye],yi=0;this.triggersSubmenu()?(wi=me="before"===this.menu.xPosition?"start":"end",ye=Fi="end"===me?"start":"end",yi="bottom"===Zt?8:-8):this.menu.overlapTrigger||(ei="top"===Zt?"bottom":"top",ni="top"===ce?"bottom":"top"),ne.withPositions([{originX:me,originY:ei,overlayX:Fi,overlayY:Zt,offsetY:yi},{originX:ye,originY:ei,overlayX:wi,overlayY:Zt,offsetY:yi},{originX:me,originY:ni,overlayX:Fi,overlayY:ce,offsetY:-yi},{originX:ye,originY:ni,overlayX:wi,overlayY:ce,offsetY:-yi}])}_menuClosingActions(){const ne=this._overlayRef.backdropClick(),me=this._overlayRef.detachments(),ye=this._parentMaterialMenu?this._parentMaterialMenu.closed:(0,u.of)(),Zt=this._parentMaterialMenu?this._parentMaterialMenu._hovered().pipe((0,at.h)(ce=>ce!==this._menuItemInstance),(0,at.h)(()=>this._menuOpen)):(0,u.of)();return(0,s.T)(ne,ye,Zt,me)}_handleMousedown(ne){(0,C.X6)(ne)||(this._openedBy=0===ne.button?"mouse":void 0,this.triggersSubmenu()&&ne.preventDefault())}_handleKeydown(ne){const me=ne.keyCode;(me===e.K5||me===e.L_)&&(this._openedBy="keyboard"),this.triggersSubmenu()&&(me===e.SV&&"ltr"===this.dir||me===e.oh&&"rtl"===this.dir)&&(this._openedBy="keyboard",this.openMenu())}_handleClick(ne){this.triggersSubmenu()?(ne.stopPropagation(),this.openMenu()):this.toggleMenu()}_handleHover(){!this.triggersSubmenu()||!this._parentMaterialMenu||(this._hoverSubscription=this._parentMaterialMenu._hovered().pipe((0,at.h)(ne=>ne===this._menuItemInstance&&!ne.disabled),(0,St.g)(0,y.E)).subscribe(()=>{this._openedBy="mouse",this.menu instanceof Bt&&this.menu._isAnimating?this.menu._animationDone.pipe((0,Q.q)(1),(0,St.g)(0,y.E),(0,rt.R)(this._parentMaterialMenu._hovered())).subscribe(()=>this.openMenu()):this.openMenu()}))}_getPortal(){return(!this._portal||this._portal.templateRef!==this.menu.templateRef)&&(this._portal=new vt.UE(this.menu.templateRef,this._viewContainerRef)),this._portal}}return ee.\u0275fac=function(ne){return new(ne||ee)(t.Y36(Jt.aV),t.Y36(t.SBq),t.Y36(t.s_b),t.Y36($t),t.Y36(Ne,8),t.Y36(Di,10),t.Y36(yt.Is,8),t.Y36(C.tE))},ee.\u0275dir=t.lG2({type:ee,hostAttrs:["aria-haspopup","true"],hostVars:2,hostBindings:function(ne,me){1&ne&&t.NdJ("click",function(Zt){return me._handleClick(Zt)})("mousedown",function(Zt){return me._handleMousedown(Zt)})("keydown",function(Zt){return me._handleKeydown(Zt)}),2&ne&&t.uIk("aria-expanded",me.menuOpen||null)("aria-controls",me.menuOpen?me.menu.panelId:null)},inputs:{_deprecatedMatMenuTriggerFor:["mat-menu-trigger-for","_deprecatedMatMenuTriggerFor"],menu:["matMenuTriggerFor","menu"],menuData:["matMenuTriggerData","menuData"],restoreFocus:["matMenuTriggerRestoreFocus","restoreFocus"]},outputs:{menuOpened:"menuOpened",onMenuOpen:"onMenuOpen",menuClosed:"menuClosed",onMenuClose:"onMenuClose"}}),ee})(),Ie=(()=>{class ee extends hi{}return ee.\u0275fac=function(){let ke;return function(me){return(ke||(ke=t.n5z(ee)))(me||ee)}}(),ee.\u0275dir=t.lG2({type:ee,selectors:[["","mat-menu-trigger-for",""],["","matMenuTriggerFor",""]],hostAttrs:[1,"mat-menu-trigger"],exportAs:["matMenuTrigger"],features:[t.qOj]}),ee})(),te=(()=>{class ee{}return ee.\u0275fac=function(ne){return new(ne||ee)},ee.\u0275mod=t.oAB({type:ee}),ee.\u0275inj=t.cJS({providers:[At],imports:[[xt.ez,Wt.BQ,Wt.si,Jt.U8],ot.ZD,Wt.BQ]}),ee})()},20773:(U,$,m)=>{"use strict";m.d($,{Cq:()=>Jt,$g:()=>Wt});var C=m(5e3),_=m(69808),e=m(90508),t=m(63191),n=m(70925),r=m(76360);function s(Ct,yt){if(1&Ct&&(C.O4$(),C._UZ(0,"circle",3)),2&Ct){const ot=C.oxw();C.Udp("animation-name","mat-progress-spinner-stroke-rotate-"+ot._spinnerAnimationLabel)("stroke-dashoffset",ot._getStrokeDashOffset(),"px")("stroke-dasharray",ot._getStrokeCircumference(),"px")("stroke-width",ot._getCircleStrokeWidth(),"%"),C.uIk("r",ot._getCircleRadius())}}function u(Ct,yt){if(1&Ct&&(C.O4$(),C._UZ(0,"circle",3)),2&Ct){const ot=C.oxw();C.Udp("stroke-dashoffset",ot._getStrokeDashOffset(),"px")("stroke-dasharray",ot._getStrokeCircumference(),"px")("stroke-width",ot._getCircleStrokeWidth(),"%"),C.uIk("r",ot._getCircleRadius())}}function y(Ct,yt){if(1&Ct&&(C.O4$(),C._UZ(0,"circle",3)),2&Ct){const ot=C.oxw();C.Udp("animation-name","mat-progress-spinner-stroke-rotate-"+ot._spinnerAnimationLabel)("stroke-dashoffset",ot._getStrokeDashOffset(),"px")("stroke-dasharray",ot._getStrokeCircumference(),"px")("stroke-width",ot._getCircleStrokeWidth(),"%"),C.uIk("r",ot._getCircleRadius())}}function x(Ct,yt){if(1&Ct&&(C.O4$(),C._UZ(0,"circle",3)),2&Ct){const ot=C.oxw();C.Udp("stroke-dashoffset",ot._getStrokeDashOffset(),"px")("stroke-dasharray",ot._getStrokeCircumference(),"px")("stroke-width",ot._getCircleStrokeWidth(),"%"),C.uIk("r",ot._getCircleRadius())}}const rt=(0,e.pj)(class{constructor(Ct){this._elementRef=Ct}},"primary"),St=new C.OlP("mat-progress-spinner-default-options",{providedIn:"root",factory:function(){return{diameter:100}}});class xt extends rt{constructor(yt,ot,mt,lt,Ut){super(yt),this._document=mt,this._diameter=100,this._value=0,this.mode="determinate";const Rt=xt._diameters;this._spinnerAnimationLabel=this._getSpinnerAnimationLabel(),Rt.has(mt.head)||Rt.set(mt.head,new Set([100])),this._noopAnimations="NoopAnimations"===lt&&!!Ut&&!Ut._forceAnimations,Ut&&(Ut.diameter&&(this.diameter=Ut.diameter),Ut.strokeWidth&&(this.strokeWidth=Ut.strokeWidth))}get diameter(){return this._diameter}set diameter(yt){this._diameter=(0,t.su)(yt),this._spinnerAnimationLabel=this._getSpinnerAnimationLabel(),this._styleRoot&&this._attachStyleNode()}get strokeWidth(){return this._strokeWidth||this.diameter/10}set strokeWidth(yt){this._strokeWidth=(0,t.su)(yt)}get value(){return"determinate"===this.mode?this._value:0}set value(yt){this._value=Math.max(0,Math.min(100,(0,t.su)(yt)))}ngOnInit(){const yt=this._elementRef.nativeElement;this._styleRoot=(0,n.kV)(yt)||this._document.head,this._attachStyleNode(),yt.classList.add("mat-progress-spinner-indeterminate-animation")}_getCircleRadius(){return(this.diameter-10)/2}_getViewBox(){const yt=2*this._getCircleRadius()+this.strokeWidth;return`0 0 ${yt} ${yt}`}_getStrokeCircumference(){return 2*Math.PI*this._getCircleRadius()}_getStrokeDashOffset(){return"determinate"===this.mode?this._getStrokeCircumference()*(100-this._value)/100:null}_getCircleStrokeWidth(){return this.strokeWidth/this.diameter*100}_attachStyleNode(){const yt=this._styleRoot,ot=this._diameter,mt=xt._diameters;let lt=mt.get(yt);if(!lt||!lt.has(ot)){const Ut=this._document.createElement("style");Ut.setAttribute("mat-spinner-animation",this._spinnerAnimationLabel),Ut.textContent=this._getAnimationText(),yt.appendChild(Ut),lt||(lt=new Set,mt.set(yt,lt)),lt.add(ot)}}_getAnimationText(){const yt=this._getStrokeCircumference();return"\n @keyframes mat-progress-spinner-stroke-rotate-DIAMETER {\n    0%      { stroke-dashoffset: START_VALUE;  transform: rotate(0); }\n    12.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(0); }\n    12.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(72.5deg); }\n    25%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(72.5deg); }\n\n    25.0001%   { stroke-dashoffset: START_VALUE;  transform: rotate(270deg); }\n    37.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(270deg); }\n    37.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(161.5deg); }\n    50%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(161.5deg); }\n\n    50.0001%  { stroke-dashoffset: START_VALUE;  transform: rotate(180deg); }\n    62.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(180deg); }\n    62.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(251.5deg); }\n    75%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(251.5deg); }\n\n    75.0001%  { stroke-dashoffset: START_VALUE;  transform: rotate(90deg); }\n    87.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(90deg); }\n    87.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(341.5deg); }\n    100%    { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(341.5deg); }\n  }\n".replace(/START_VALUE/g,""+.95*yt).replace(/END_VALUE/g,""+.2*yt).replace(/DIAMETER/g,`${this._spinnerAnimationLabel}`)}_getSpinnerAnimationLabel(){return this.diameter.toString().replace(".","_")}}xt._diameters=new WeakMap,xt.\u0275fac=function(yt){return new(yt||xt)(C.Y36(C.SBq),C.Y36(n.t4),C.Y36(_.K0,8),C.Y36(r.Qb,8),C.Y36(St))},xt.\u0275cmp=C.Xpm({type:xt,selectors:[["mat-progress-spinner"]],hostAttrs:["role","progressbar","tabindex","-1",1,"mat-progress-spinner"],hostVars:10,hostBindings:function(yt,ot){2&yt&&(C.uIk("aria-valuemin","determinate"===ot.mode?0:null)("aria-valuemax","determinate"===ot.mode?100:null)("aria-valuenow","determinate"===ot.mode?ot.value:null)("mode",ot.mode),C.Udp("width",ot.diameter,"px")("height",ot.diameter,"px"),C.ekj("_mat-animation-noopable",ot._noopAnimations))},inputs:{color:"color",diameter:"diameter",strokeWidth:"strokeWidth",mode:"mode",value:"value"},exportAs:["matProgressSpinner"],features:[C.qOj],decls:3,vars:8,consts:[["preserveAspectRatio","xMidYMid meet","focusable","false","aria-hidden","true",3,"ngSwitch"],["cx","50%","cy","50%",3,"animation-name","stroke-dashoffset","stroke-dasharray","stroke-width",4,"ngSwitchCase"],["cx","50%","cy","50%",3,"stroke-dashoffset","stroke-dasharray","stroke-width",4,"ngSwitchCase"],["cx","50%","cy","50%"]],template:function(yt,ot){1&yt&&(C.O4$(),C.TgZ(0,"svg",0),C.YNc(1,s,1,9,"circle",1),C.YNc(2,u,1,7,"circle",2),C.qZA()),2&yt&&(C.Udp("width",ot.diameter,"px")("height",ot.diameter,"px"),C.Q6J("ngSwitch","indeterminate"===ot.mode),C.uIk("viewBox",ot._getViewBox()),C.xp6(1),C.Q6J("ngSwitchCase",!0),C.xp6(1),C.Q6J("ngSwitchCase",!1))},directives:[_.RF,_.n9],styles:[".mat-progress-spinner{display:block;position:relative;overflow:hidden}.mat-progress-spinner svg{position:absolute;transform:rotate(-90deg);top:0;left:0;transform-origin:center;overflow:visible}.mat-progress-spinner circle{fill:transparent;transform-origin:center;transition:stroke-dashoffset 225ms linear}._mat-animation-noopable.mat-progress-spinner circle{transition:none;animation:none}.cdk-high-contrast-active .mat-progress-spinner circle{stroke:CanvasText}.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] svg{animation:mat-progress-spinner-linear-rotate 2000ms linear infinite}._mat-animation-noopable.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] svg{transition:none;animation:none}.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] circle{transition-property:stroke;animation-duration:4000ms;animation-timing-function:cubic-bezier(0.35, 0, 0.25, 1);animation-iteration-count:infinite}._mat-animation-noopable.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] circle{transition:none;animation:none}@keyframes mat-progress-spinner-linear-rotate{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes mat-progress-spinner-stroke-rotate-100{0%{stroke-dashoffset:268.606171575px;transform:rotate(0)}12.5%{stroke-dashoffset:56.5486677px;transform:rotate(0)}12.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(72.5deg)}25%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(72.5deg)}25.0001%{stroke-dashoffset:268.606171575px;transform:rotate(270deg)}37.5%{stroke-dashoffset:56.5486677px;transform:rotate(270deg)}37.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(161.5deg)}50%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(161.5deg)}50.0001%{stroke-dashoffset:268.606171575px;transform:rotate(180deg)}62.5%{stroke-dashoffset:56.5486677px;transform:rotate(180deg)}62.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(251.5deg)}75%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(251.5deg)}75.0001%{stroke-dashoffset:268.606171575px;transform:rotate(90deg)}87.5%{stroke-dashoffset:56.5486677px;transform:rotate(90deg)}87.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(341.5deg)}100%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(341.5deg)}}\n"],encapsulation:2,changeDetection:0});let Wt=(()=>{class Ct extends xt{constructor(ot,mt,lt,Ut,Rt){super(ot,mt,lt,Ut,Rt),this.mode="indeterminate"}}return Ct.\u0275fac=function(ot){return new(ot||Ct)(C.Y36(C.SBq),C.Y36(n.t4),C.Y36(_.K0,8),C.Y36(r.Qb,8),C.Y36(St))},Ct.\u0275cmp=C.Xpm({type:Ct,selectors:[["mat-spinner"]],hostAttrs:["role","progressbar","mode","indeterminate",1,"mat-spinner","mat-progress-spinner"],hostVars:6,hostBindings:function(ot,mt){2&ot&&(C.Udp("width",mt.diameter,"px")("height",mt.diameter,"px"),C.ekj("_mat-animation-noopable",mt._noopAnimations))},inputs:{color:"color"},features:[C.qOj],decls:3,vars:8,consts:[["preserveAspectRatio","xMidYMid meet","focusable","false","aria-hidden","true",3,"ngSwitch"],["cx","50%","cy","50%",3,"animation-name","stroke-dashoffset","stroke-dasharray","stroke-width",4,"ngSwitchCase"],["cx","50%","cy","50%",3,"stroke-dashoffset","stroke-dasharray","stroke-width",4,"ngSwitchCase"],["cx","50%","cy","50%"]],template:function(ot,mt){1&ot&&(C.O4$(),C.TgZ(0,"svg",0),C.YNc(1,y,1,9,"circle",1),C.YNc(2,x,1,7,"circle",2),C.qZA()),2&ot&&(C.Udp("width",mt.diameter,"px")("height",mt.diameter,"px"),C.Q6J("ngSwitch","indeterminate"===mt.mode),C.uIk("viewBox",mt._getViewBox()),C.xp6(1),C.Q6J("ngSwitchCase",!0),C.xp6(1),C.Q6J("ngSwitchCase",!1))},directives:[_.RF,_.n9],styles:[".mat-progress-spinner{display:block;position:relative;overflow:hidden}.mat-progress-spinner svg{position:absolute;transform:rotate(-90deg);top:0;left:0;transform-origin:center;overflow:visible}.mat-progress-spinner circle{fill:transparent;transform-origin:center;transition:stroke-dashoffset 225ms linear}._mat-animation-noopable.mat-progress-spinner circle{transition:none;animation:none}.cdk-high-contrast-active .mat-progress-spinner circle{stroke:CanvasText}.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] svg{animation:mat-progress-spinner-linear-rotate 2000ms linear infinite}._mat-animation-noopable.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] svg{transition:none;animation:none}.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] circle{transition-property:stroke;animation-duration:4000ms;animation-timing-function:cubic-bezier(0.35, 0, 0.25, 1);animation-iteration-count:infinite}._mat-animation-noopable.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] circle{transition:none;animation:none}@keyframes mat-progress-spinner-linear-rotate{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes mat-progress-spinner-stroke-rotate-100{0%{stroke-dashoffset:268.606171575px;transform:rotate(0)}12.5%{stroke-dashoffset:56.5486677px;transform:rotate(0)}12.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(72.5deg)}25%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(72.5deg)}25.0001%{stroke-dashoffset:268.606171575px;transform:rotate(270deg)}37.5%{stroke-dashoffset:56.5486677px;transform:rotate(270deg)}37.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(161.5deg)}50%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(161.5deg)}50.0001%{stroke-dashoffset:268.606171575px;transform:rotate(180deg)}62.5%{stroke-dashoffset:56.5486677px;transform:rotate(180deg)}62.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(251.5deg)}75%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(251.5deg)}75.0001%{stroke-dashoffset:268.606171575px;transform:rotate(90deg)}87.5%{stroke-dashoffset:56.5486677px;transform:rotate(90deg)}87.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(341.5deg)}100%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(341.5deg)}}\n"],encapsulation:2,changeDetection:0}),Ct})(),Jt=(()=>{class Ct{}return Ct.\u0275fac=function(ot){return new(ot||Ct)},Ct.\u0275mod=C.oAB({type:Ct}),Ct.\u0275inj=C.cJS({imports:[[e.BQ,_.ez],e.BQ]}),Ct})()},57261:(U,$,m)=>{"use strict";m.d($,{ux:()=>Ut,ZX:()=>ot});var C=m(91314),_=m(47429),e=m(69808),t=m(5e3),n=m(90508),r=m(47423),s=m(77579),u=m(95698),y=m(82722),x=m(41777),B=m(70925),Q=m(95113),at=m(15664);function rt(Rt,Et){if(1&Rt){const ht=t.EpF();t.TgZ(0,"div",1),t.TgZ(1,"button",2),t.NdJ("click",function(){return t.CHM(ht),t.oxw().action()}),t._uU(2),t.qZA(),t.qZA()}if(2&Rt){const ht=t.oxw();t.xp6(2),t.Oqu(ht.data.action)}}function St(Rt,Et){}const Ht=new t.OlP("MatSnackBarData");class vt{constructor(){this.politeness="assertive",this.announcementMessage="",this.duration=0,this.data=null,this.horizontalPosition="center",this.verticalPosition="bottom"}}const xt=Math.pow(2,31)-1;class Wt{constructor(Et,ht){this._overlayRef=ht,this._afterDismissed=new s.x,this._afterOpened=new s.x,this._onAction=new s.x,this._dismissedByAction=!1,this.containerInstance=Et,this.onAction().subscribe(()=>this.dismiss()),Et._onExit.subscribe(()=>this._finishDismiss())}dismiss(){this._afterDismissed.closed||this.containerInstance.exit(),clearTimeout(this._durationTimeoutId)}dismissWithAction(){this._onAction.closed||(this._dismissedByAction=!0,this._onAction.next(),this._onAction.complete()),clearTimeout(this._durationTimeoutId)}closeWithAction(){this.dismissWithAction()}_dismissAfter(Et){this._durationTimeoutId=setTimeout(()=>this.dismiss(),Math.min(Et,xt))}_open(){this._afterOpened.closed||(this._afterOpened.next(),this._afterOpened.complete())}_finishDismiss(){this._overlayRef.dispose(),this._onAction.closed||this._onAction.complete(),this._afterDismissed.next({dismissedByAction:this._dismissedByAction}),this._afterDismissed.complete(),this._dismissedByAction=!1}afterDismissed(){return this._afterDismissed}afterOpened(){return this.containerInstance._onEnter}onAction(){return this._onAction}}let Jt=(()=>{class Rt{constructor(ht,nt){this.snackBarRef=ht,this.data=nt}action(){this.snackBarRef.dismissWithAction()}get hasAction(){return!!this.data.action}}return Rt.\u0275fac=function(ht){return new(ht||Rt)(t.Y36(Wt),t.Y36(Ht))},Rt.\u0275cmp=t.Xpm({type:Rt,selectors:[["simple-snack-bar"]],hostAttrs:[1,"mat-simple-snackbar"],decls:3,vars:2,consts:[["class","mat-simple-snackbar-action",4,"ngIf"],[1,"mat-simple-snackbar-action"],["mat-button","",3,"click"]],template:function(ht,nt){1&ht&&(t.TgZ(0,"span"),t._uU(1),t.qZA(),t.YNc(2,rt,3,1,"div",0)),2&ht&&(t.xp6(1),t.Oqu(nt.data.message),t.xp6(1),t.Q6J("ngIf",nt.hasAction))},directives:[e.O5,r.lW],styles:[".mat-simple-snackbar{display:flex;justify-content:space-between;align-items:center;line-height:20px;opacity:1}.mat-simple-snackbar-action{flex-shrink:0;margin:-8px -8px -8px 8px}.mat-simple-snackbar-action button{max-height:36px;min-width:0}[dir=rtl] .mat-simple-snackbar-action{margin-left:-8px;margin-right:8px}\n"],encapsulation:2,changeDetection:0}),Rt})();const Ct={snackBarState:(0,x.X$)("state",[(0,x.SB)("void, hidden",(0,x.oB)({transform:"scale(0.8)",opacity:0})),(0,x.SB)("visible",(0,x.oB)({transform:"scale(1)",opacity:1})),(0,x.eR)("* => visible",(0,x.jt)("150ms cubic-bezier(0, 0, 0.2, 1)")),(0,x.eR)("* => void, * => hidden",(0,x.jt)("75ms cubic-bezier(0.4, 0.0, 1, 1)",(0,x.oB)({opacity:0})))])};let yt=(()=>{class Rt extends _.en{constructor(ht,nt,he,Mt,Nt){super(),this._ngZone=ht,this._elementRef=nt,this._changeDetectorRef=he,this._platform=Mt,this.snackBarConfig=Nt,this._announceDelay=150,this._destroyed=!1,this._onAnnounce=new s.x,this._onExit=new s.x,this._onEnter=new s.x,this._animationState="void",this.attachDomPortal=de=>(this._assertNotAttached(),this._applySnackBarClasses(),this._portalOutlet.attachDomPortal(de)),this._live="assertive"!==Nt.politeness||Nt.announcementMessage?"off"===Nt.politeness?"off":"polite":"assertive",this._platform.FIREFOX&&("polite"===this._live&&(this._role="status"),"assertive"===this._live&&(this._role="alert"))}attachComponentPortal(ht){return this._assertNotAttached(),this._applySnackBarClasses(),this._portalOutlet.attachComponentPortal(ht)}attachTemplatePortal(ht){return this._assertNotAttached(),this._applySnackBarClasses(),this._portalOutlet.attachTemplatePortal(ht)}onAnimationEnd(ht){const{fromState:nt,toState:he}=ht;if(("void"===he&&"void"!==nt||"hidden"===he)&&this._completeExit(),"visible"===he){const Mt=this._onEnter;this._ngZone.run(()=>{Mt.next(),Mt.complete()})}}enter(){this._destroyed||(this._animationState="visible",this._changeDetectorRef.detectChanges(),this._screenReaderAnnounce())}exit(){return this._animationState="hidden",this._elementRef.nativeElement.setAttribute("mat-exit",""),clearTimeout(this._announceTimeoutId),this._onExit}ngOnDestroy(){this._destroyed=!0,this._completeExit()}_completeExit(){this._ngZone.onMicrotaskEmpty.pipe((0,u.q)(1)).subscribe(()=>{this._onExit.next(),this._onExit.complete()})}_applySnackBarClasses(){const ht=this._elementRef.nativeElement,nt=this.snackBarConfig.panelClass;nt&&(Array.isArray(nt)?nt.forEach(he=>ht.classList.add(he)):ht.classList.add(nt)),"center"===this.snackBarConfig.horizontalPosition&&ht.classList.add("mat-snack-bar-center"),"top"===this.snackBarConfig.verticalPosition&&ht.classList.add("mat-snack-bar-top")}_assertNotAttached(){this._portalOutlet.hasAttached()}_screenReaderAnnounce(){this._announceTimeoutId||this._ngZone.runOutsideAngular(()=>{this._announceTimeoutId=setTimeout(()=>{const ht=this._elementRef.nativeElement.querySelector("[aria-hidden]"),nt=this._elementRef.nativeElement.querySelector("[aria-live]");if(ht&&nt){let he=null;this._platform.isBrowser&&document.activeElement instanceof HTMLElement&&ht.contains(document.activeElement)&&(he=document.activeElement),ht.removeAttribute("aria-hidden"),nt.appendChild(ht),null==he||he.focus(),this._onAnnounce.next(),this._onAnnounce.complete()}},this._announceDelay)})}}return Rt.\u0275fac=function(ht){return new(ht||Rt)(t.Y36(t.R0b),t.Y36(t.SBq),t.Y36(t.sBO),t.Y36(B.t4),t.Y36(vt))},Rt.\u0275cmp=t.Xpm({type:Rt,selectors:[["snack-bar-container"]],viewQuery:function(ht,nt){if(1&ht&&t.Gf(_.Pl,7),2&ht){let he;t.iGM(he=t.CRH())&&(nt._portalOutlet=he.first)}},hostAttrs:[1,"mat-snack-bar-container"],hostVars:1,hostBindings:function(ht,nt){1&ht&&t.WFA("@state.done",function(Mt){return nt.onAnimationEnd(Mt)}),2&ht&&t.d8E("@state",nt._animationState)},features:[t.qOj],decls:3,vars:2,consts:[["aria-hidden","true"],["cdkPortalOutlet",""]],template:function(ht,nt){1&ht&&(t.TgZ(0,"div",0),t.YNc(1,St,0,0,"ng-template",1),t.qZA(),t._UZ(2,"div")),2&ht&&(t.xp6(2),t.uIk("aria-live",nt._live)("role",nt._role))},directives:[_.Pl],styles:[".mat-snack-bar-container{border-radius:4px;box-sizing:border-box;display:block;margin:24px;max-width:33vw;min-width:344px;padding:14px 16px;min-height:48px;transform-origin:center}.cdk-high-contrast-active .mat-snack-bar-container{border:solid 1px}.mat-snack-bar-handset{width:100%}.mat-snack-bar-handset .mat-snack-bar-container{margin:8px;max-width:100%;min-width:0;width:100%}\n"],encapsulation:2,data:{animation:[Ct.snackBarState]}}),Rt})(),ot=(()=>{class Rt{}return Rt.\u0275fac=function(ht){return new(ht||Rt)},Rt.\u0275mod=t.oAB({type:Rt}),Rt.\u0275inj=t.cJS({imports:[[C.U8,_.eL,e.ez,r.ot,n.BQ],n.BQ]}),Rt})();const mt=new t.OlP("mat-snack-bar-default-options",{providedIn:"root",factory:function(){return new vt}});let Ut=(()=>{class Rt{constructor(ht,nt,he,Mt,Nt,de){this._overlay=ht,this._live=nt,this._injector=he,this._breakpointObserver=Mt,this._parentSnackBar=Nt,this._defaultConfig=de,this._snackBarRefAtThisLevel=null,this.simpleSnackBarComponent=Jt,this.snackBarContainerComponent=yt,this.handsetCssClass="mat-snack-bar-handset"}get _openedSnackBarRef(){const ht=this._parentSnackBar;return ht?ht._openedSnackBarRef:this._snackBarRefAtThisLevel}set _openedSnackBarRef(ht){this._parentSnackBar?this._parentSnackBar._openedSnackBarRef=ht:this._snackBarRefAtThisLevel=ht}openFromComponent(ht,nt){return this._attach(ht,nt)}openFromTemplate(ht,nt){return this._attach(ht,nt)}open(ht,nt="",he){const Mt=Object.assign(Object.assign({},this._defaultConfig),he);return Mt.data={message:ht,action:nt},Mt.announcementMessage===ht&&(Mt.announcementMessage=void 0),this.openFromComponent(this.simpleSnackBarComponent,Mt)}dismiss(){this._openedSnackBarRef&&this._openedSnackBarRef.dismiss()}ngOnDestroy(){this._snackBarRefAtThisLevel&&this._snackBarRefAtThisLevel.dismiss()}_attachSnackBarContainer(ht,nt){const Mt=t.zs3.create({parent:nt&&nt.viewContainerRef&&nt.viewContainerRef.injector||this._injector,providers:[{provide:vt,useValue:nt}]}),Nt=new _.C5(this.snackBarContainerComponent,nt.viewContainerRef,Mt),de=ht.attach(Nt);return de.instance.snackBarConfig=nt,de.instance}_attach(ht,nt){const he=Object.assign(Object.assign(Object.assign({},new vt),this._defaultConfig),nt),Mt=this._createOverlay(he),Nt=this._attachSnackBarContainer(Mt,he),de=new Wt(Nt,Mt);if(ht instanceof t.Rgc){const ve=new _.UE(ht,null,{$implicit:he.data,snackBarRef:de});de.instance=Nt.attachTemplatePortal(ve)}else{const ve=this._createInjector(he,de),ue=new _.C5(ht,void 0,ve),Be=Nt.attachComponentPortal(ue);de.instance=Be.instance}return this._breakpointObserver.observe(Q.u3.HandsetPortrait).pipe((0,y.R)(Mt.detachments())).subscribe(ve=>{Mt.overlayElement.classList.toggle(this.handsetCssClass,ve.matches)}),he.announcementMessage&&Nt._onAnnounce.subscribe(()=>{this._live.announce(he.announcementMessage,he.politeness)}),this._animateSnackBar(de,he),this._openedSnackBarRef=de,this._openedSnackBarRef}_animateSnackBar(ht,nt){ht.afterDismissed().subscribe(()=>{this._openedSnackBarRef==ht&&(this._openedSnackBarRef=null),nt.announcementMessage&&this._live.clear()}),this._openedSnackBarRef?(this._openedSnackBarRef.afterDismissed().subscribe(()=>{ht.containerInstance.enter()}),this._openedSnackBarRef.dismiss()):ht.containerInstance.enter(),nt.duration&&nt.duration>0&&ht.afterOpened().subscribe(()=>ht._dismissAfter(nt.duration))}_createOverlay(ht){const nt=new C.X_;nt.direction=ht.direction;let he=this._overlay.position().global();const Mt="rtl"===ht.direction,Nt="left"===ht.horizontalPosition||"start"===ht.horizontalPosition&&!Mt||"end"===ht.horizontalPosition&&Mt,de=!Nt&&"center"!==ht.horizontalPosition;return Nt?he.left("0"):de?he.right("0"):he.centerHorizontally(),"top"===ht.verticalPosition?he.top("0"):he.bottom("0"),nt.positionStrategy=he,this._overlay.create(nt)}_createInjector(ht,nt){return t.zs3.create({parent:ht&&ht.viewContainerRef&&ht.viewContainerRef.injector||this._injector,providers:[{provide:Wt,useValue:nt},{provide:Ht,useValue:ht.data}]})}}return Rt.\u0275fac=function(ht){return new(ht||Rt)(t.LFG(C.aV),t.LFG(at.Kd),t.LFG(t.zs3),t.LFG(Q.Yg),t.LFG(Rt,12),t.LFG(mt))},Rt.\u0275prov=t.Yz7({token:Rt,factory:Rt.\u0275fac,providedIn:ot}),Rt})()},53251:(U,$,m)=>{"use strict";m.d($,{uX:()=>hi,SP:()=>Oe,uD:()=>At,Nh:()=>$e});var C=m(15664),_=m(17144),e=m(47429),t=m(69808),n=m(5e3),r=m(90508),s=m(76360),u=m(77579),y=m(50727),x=m(54968),B=m(39646),Q=m(56451),at=m(5963),rt=m(41777),St=m(68675),Ht=m(71884),vt=m(82722),xt=m(50226),Wt=m(63191),Jt=m(91159),Ct=m(70925),yt=m(30495);function ot(fe,kt){1&fe&&n.Hsn(0)}const mt=["*"];function lt(fe,kt){}const Ut=function(fe){return{animationDuration:fe}},Rt=function(fe,kt){return{value:fe,params:kt}},Et=["tabListContainer"],ht=["tabList"],nt=["tabListInner"],he=["nextPaginator"],Mt=["previousPaginator"],Nt=["tabBodyWrapper"],de=["tabHeader"];function ve(fe,kt){}function ue(fe,kt){if(1&fe&&n.YNc(0,ve,0,0,"ng-template",9),2&fe){const ct=n.oxw().$implicit;n.Q6J("cdkPortalOutlet",ct.templateLabel)}}function Be(fe,kt){if(1&fe&&n._uU(0),2&fe){const ct=n.oxw().$implicit;n.Oqu(ct.textLabel)}}function Ne(fe,kt){if(1&fe){const ct=n.EpF();n.TgZ(0,"div",6),n.NdJ("click",function(){const ae=n.CHM(ct),Ae=ae.$implicit,Wi=ae.index,Qi=n.oxw(),yn=n.MAs(1);return Qi._handleClick(Ae,yn,Wi)})("cdkFocusChange",function(ae){const Wi=n.CHM(ct).index;return n.oxw()._tabFocusChanged(ae,Wi)}),n.TgZ(1,"div",7),n.YNc(2,ue,1,1,"ng-template",8),n.YNc(3,Be,1,1,"ng-template",8),n.qZA(),n.qZA()}if(2&fe){const ct=kt.$implicit,Lt=kt.index,ae=n.oxw();n.ekj("mat-tab-label-active",ae.selectedIndex==Lt),n.Q6J("id",ae._getTabLabelId(Lt))("disabled",ct.disabled)("matRippleDisabled",ct.disabled||ae.disableRipple),n.uIk("tabIndex",ae._getTabIndex(ct,Lt))("aria-posinset",Lt+1)("aria-setsize",ae._tabs.length)("aria-controls",ae._getTabContentId(Lt))("aria-selected",ae.selectedIndex==Lt)("aria-label",ct.ariaLabel||null)("aria-labelledby",!ct.ariaLabel&&ct.ariaLabelledby?ct.ariaLabelledby:null),n.xp6(2),n.Q6J("ngIf",ct.templateLabel),n.xp6(1),n.Q6J("ngIf",!ct.templateLabel)}}function Qe(fe,kt){if(1&fe){const ct=n.EpF();n.TgZ(0,"mat-tab-body",10),n.NdJ("_onCentered",function(){return n.CHM(ct),n.oxw()._removeTabBodyWrapperHeight()})("_onCentering",function(ae){return n.CHM(ct),n.oxw()._setTabBodyWrapperHeight(ae)}),n.qZA()}if(2&fe){const ct=kt.$implicit,Lt=kt.index,ae=n.oxw();n.ekj("mat-tab-body-active",ae.selectedIndex===Lt),n.Q6J("id",ae._getTabContentId(Lt))("content",ct.content)("position",ct.position)("origin",ct.origin)("animationDuration",ae.animationDuration),n.uIk("tabindex",null!=ae.contentTabIndex&&ae.selectedIndex===Lt?ae.contentTabIndex:null)("aria-labelledby",ae._getTabLabelId(Lt))}}const Ze=new n.OlP("MatInkBarPositioner",{providedIn:"root",factory:function(){return kt=>({left:kt?(kt.offsetLeft||0)+"px":"0",width:kt?(kt.offsetWidth||0)+"px":"0"})}});let gi=(()=>{class fe{constructor(ct,Lt,ae,Ae){this._elementRef=ct,this._ngZone=Lt,this._inkBarPositioner=ae,this._animationMode=Ae}alignToElement(ct){this.show(),"undefined"!=typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>this._setStyles(ct))}):this._setStyles(ct)}show(){this._elementRef.nativeElement.style.visibility="visible"}hide(){this._elementRef.nativeElement.style.visibility="hidden"}_setStyles(ct){const Lt=this._inkBarPositioner(ct),ae=this._elementRef.nativeElement;ae.style.left=Lt.left,ae.style.width=Lt.width}}return fe.\u0275fac=function(ct){return new(ct||fe)(n.Y36(n.SBq),n.Y36(n.R0b),n.Y36(Ze),n.Y36(s.Qb,8))},fe.\u0275dir=n.lG2({type:fe,selectors:[["mat-ink-bar"]],hostAttrs:[1,"mat-ink-bar"],hostVars:2,hostBindings:function(ct,Lt){2&ct&&n.ekj("_mat-animation-noopable","NoopAnimations"===Lt._animationMode)}}),fe})();const Bt=new n.OlP("MatTabContent"),$t=new n.OlP("MatTabLabel"),_e=new n.OlP("MAT_TAB");let At=(()=>{class fe extends e.ig{constructor(ct,Lt,ae){super(ct,Lt),this._closestTab=ae}}return fe.\u0275fac=function(ct){return new(ct||fe)(n.Y36(n.Rgc),n.Y36(n.s_b),n.Y36(_e,8))},fe.\u0275dir=n.lG2({type:fe,selectors:[["","mat-tab-label",""],["","matTabLabel",""]],features:[n._Bn([{provide:$t,useExisting:fe}]),n.qOj]}),fe})();const pe=(0,r.Id)(class{}),ze=new n.OlP("MAT_TAB_GROUP");let hi=(()=>{class fe extends pe{constructor(ct,Lt){super(),this._viewContainerRef=ct,this._closestTabGroup=Lt,this.textLabel="",this._contentPortal=null,this._stateChanges=new u.x,this.position=null,this.origin=null,this.isActive=!1}get templateLabel(){return this._templateLabel}set templateLabel(ct){this._setTemplateLabelInput(ct)}get content(){return this._contentPortal}ngOnChanges(ct){(ct.hasOwnProperty("textLabel")||ct.hasOwnProperty("disabled"))&&this._stateChanges.next()}ngOnDestroy(){this._stateChanges.complete()}ngOnInit(){this._contentPortal=new e.UE(this._explicitContent||this._implicitContent,this._viewContainerRef)}_setTemplateLabelInput(ct){ct&&ct._closestTab===this&&(this._templateLabel=ct)}}return fe.\u0275fac=function(ct){return new(ct||fe)(n.Y36(n.s_b),n.Y36(ze,8))},fe.\u0275cmp=n.Xpm({type:fe,selectors:[["mat-tab"]],contentQueries:function(ct,Lt,ae){if(1&ct&&(n.Suo(ae,$t,5),n.Suo(ae,Bt,7,n.Rgc)),2&ct){let Ae;n.iGM(Ae=n.CRH())&&(Lt.templateLabel=Ae.first),n.iGM(Ae=n.CRH())&&(Lt._explicitContent=Ae.first)}},viewQuery:function(ct,Lt){if(1&ct&&n.Gf(n.Rgc,7),2&ct){let ae;n.iGM(ae=n.CRH())&&(Lt._implicitContent=ae.first)}},inputs:{disabled:"disabled",textLabel:["label","textLabel"],ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"]},exportAs:["matTab"],features:[n._Bn([{provide:_e,useExisting:fe}]),n.qOj,n.TTD],ngContentSelectors:mt,decls:1,vars:0,template:function(ct,Lt){1&ct&&(n.F$t(),n.YNc(0,ot,1,0,"ng-template"))},encapsulation:2}),fe})();const Ie={translateTab:(0,rt.X$)("translateTab",[(0,rt.SB)("center, void, left-origin-center, right-origin-center",(0,rt.oB)({transform:"none"})),(0,rt.SB)("left",(0,rt.oB)({transform:"translate3d(-100%, 0, 0)",minHeight:"1px"})),(0,rt.SB)("right",(0,rt.oB)({transform:"translate3d(100%, 0, 0)",minHeight:"1px"})),(0,rt.eR)("* => left, * => right, left => center, right => center",(0,rt.jt)("{{animationDuration}} cubic-bezier(0.35, 0, 0.25, 1)")),(0,rt.eR)("void => left-origin-center",[(0,rt.oB)({transform:"translate3d(-100%, 0, 0)"}),(0,rt.jt)("{{animationDuration}} cubic-bezier(0.35, 0, 0.25, 1)")]),(0,rt.eR)("void => right-origin-center",[(0,rt.oB)({transform:"translate3d(100%, 0, 0)"}),(0,rt.jt)("{{animationDuration}} cubic-bezier(0.35, 0, 0.25, 1)")])])};let te=(()=>{class fe extends e.Pl{constructor(ct,Lt,ae,Ae){super(ct,Lt,Ae),this._host=ae,this._centeringSub=y.w0.EMPTY,this._leavingSub=y.w0.EMPTY}ngOnInit(){super.ngOnInit(),this._centeringSub=this._host._beforeCentering.pipe((0,St.O)(this._host._isCenterPosition(this._host._position))).subscribe(ct=>{ct&&!this.hasAttached()&&this.attach(this._host._content)}),this._leavingSub=this._host._afterLeavingCenter.subscribe(()=>{this.detach()})}ngOnDestroy(){super.ngOnDestroy(),this._centeringSub.unsubscribe(),this._leavingSub.unsubscribe()}}return fe.\u0275fac=function(ct){return new(ct||fe)(n.Y36(n._Vd),n.Y36(n.s_b),n.Y36((0,n.Gpc)(()=>ke)),n.Y36(t.K0))},fe.\u0275dir=n.lG2({type:fe,selectors:[["","matTabBodyHost",""]],features:[n.qOj]}),fe})(),ee=(()=>{class fe{constructor(ct,Lt,ae){this._elementRef=ct,this._dir=Lt,this._dirChangeSubscription=y.w0.EMPTY,this._translateTabComplete=new u.x,this._onCentering=new n.vpe,this._beforeCentering=new n.vpe,this._afterLeavingCenter=new n.vpe,this._onCentered=new n.vpe(!0),this.animationDuration="500ms",Lt&&(this._dirChangeSubscription=Lt.change.subscribe(Ae=>{this._computePositionAnimationState(Ae),ae.markForCheck()})),this._translateTabComplete.pipe((0,Ht.x)((Ae,Wi)=>Ae.fromState===Wi.fromState&&Ae.toState===Wi.toState)).subscribe(Ae=>{this._isCenterPosition(Ae.toState)&&this._isCenterPosition(this._position)&&this._onCentered.emit(),this._isCenterPosition(Ae.fromState)&&!this._isCenterPosition(this._position)&&this._afterLeavingCenter.emit()})}set position(ct){this._positionIndex=ct,this._computePositionAnimationState()}ngOnInit(){"center"==this._position&&null!=this.origin&&(this._position=this._computePositionFromOrigin(this.origin))}ngOnDestroy(){this._dirChangeSubscription.unsubscribe(),this._translateTabComplete.complete()}_onTranslateTabStarted(ct){const Lt=this._isCenterPosition(ct.toState);this._beforeCentering.emit(Lt),Lt&&this._onCentering.emit(this._elementRef.nativeElement.clientHeight)}_getLayoutDirection(){return this._dir&&"rtl"===this._dir.value?"rtl":"ltr"}_isCenterPosition(ct){return"center"==ct||"left-origin-center"==ct||"right-origin-center"==ct}_computePositionAnimationState(ct=this._getLayoutDirection()){this._position=this._positionIndex<0?"ltr"==ct?"left":"right":this._positionIndex>0?"ltr"==ct?"right":"left":"center"}_computePositionFromOrigin(ct){const Lt=this._getLayoutDirection();return"ltr"==Lt&&ct<=0||"rtl"==Lt&&ct>0?"left-origin-center":"right-origin-center"}}return fe.\u0275fac=function(ct){return new(ct||fe)(n.Y36(n.SBq),n.Y36(xt.Is,8),n.Y36(n.sBO))},fe.\u0275dir=n.lG2({type:fe,inputs:{_content:["content","_content"],origin:"origin",animationDuration:"animationDuration",position:"position"},outputs:{_onCentering:"_onCentering",_beforeCentering:"_beforeCentering",_afterLeavingCenter:"_afterLeavingCenter",_onCentered:"_onCentered"}}),fe})(),ke=(()=>{class fe extends ee{constructor(ct,Lt,ae){super(ct,Lt,ae)}}return fe.\u0275fac=function(ct){return new(ct||fe)(n.Y36(n.SBq),n.Y36(xt.Is,8),n.Y36(n.sBO))},fe.\u0275cmp=n.Xpm({type:fe,selectors:[["mat-tab-body"]],viewQuery:function(ct,Lt){if(1&ct&&n.Gf(e.Pl,5),2&ct){let ae;n.iGM(ae=n.CRH())&&(Lt._portalHost=ae.first)}},hostAttrs:[1,"mat-tab-body"],features:[n.qOj],decls:3,vars:6,consts:[["cdkScrollable","",1,"mat-tab-body-content"],["content",""],["matTabBodyHost",""]],template:function(ct,Lt){1&ct&&(n.TgZ(0,"div",0,1),n.NdJ("@translateTab.start",function(Ae){return Lt._onTranslateTabStarted(Ae)})("@translateTab.done",function(Ae){return Lt._translateTabComplete.next(Ae)}),n.YNc(2,lt,0,0,"ng-template",2),n.qZA()),2&ct&&n.Q6J("@translateTab",n.WLB(3,Rt,Lt._position,n.VKq(1,Ut,Lt.animationDuration)))},directives:[te],styles:[".mat-tab-body-content{height:100%;overflow:auto}.mat-tab-group-dynamic-height .mat-tab-body-content{overflow:hidden}\n"],encapsulation:2,data:{animation:[Ie.translateTab]}}),fe})();const ne=new n.OlP("MAT_TABS_CONFIG"),me=(0,r.Id)(class{});let ye=(()=>{class fe extends me{constructor(ct){super(),this.elementRef=ct}focus(){this.elementRef.nativeElement.focus()}getOffsetLeft(){return this.elementRef.nativeElement.offsetLeft}getOffsetWidth(){return this.elementRef.nativeElement.offsetWidth}}return fe.\u0275fac=function(ct){return new(ct||fe)(n.Y36(n.SBq))},fe.\u0275dir=n.lG2({type:fe,selectors:[["","matTabLabelWrapper",""]],hostVars:3,hostBindings:function(ct,Lt){2&ct&&(n.uIk("aria-disabled",!!Lt.disabled),n.ekj("mat-tab-disabled",Lt.disabled))},inputs:{disabled:"disabled"},features:[n.qOj]}),fe})();const Zt=(0,Ct.i$)({passive:!0});let Fi=(()=>{class fe{constructor(ct,Lt,ae,Ae,Wi,Qi,yn){this._elementRef=ct,this._changeDetectorRef=Lt,this._viewportRuler=ae,this._dir=Ae,this._ngZone=Wi,this._platform=Qi,this._animationMode=yn,this._scrollDistance=0,this._selectedIndexChanged=!1,this._destroyed=new u.x,this._showPaginationControls=!1,this._disableScrollAfter=!0,this._disableScrollBefore=!0,this._stopScrolling=new u.x,this.disablePagination=!1,this._selectedIndex=0,this.selectFocusedIndex=new n.vpe,this.indexFocused=new n.vpe,Wi.runOutsideAngular(()=>{(0,x.R)(ct.nativeElement,"mouseleave").pipe((0,vt.R)(this._destroyed)).subscribe(()=>{this._stopInterval()})})}get selectedIndex(){return this._selectedIndex}set selectedIndex(ct){ct=(0,Wt.su)(ct),this._selectedIndex!=ct&&(this._selectedIndexChanged=!0,this._selectedIndex=ct,this._keyManager&&this._keyManager.updateActiveItem(ct))}ngAfterViewInit(){(0,x.R)(this._previousPaginator.nativeElement,"touchstart",Zt).pipe((0,vt.R)(this._destroyed)).subscribe(()=>{this._handlePaginatorPress("before")}),(0,x.R)(this._nextPaginator.nativeElement,"touchstart",Zt).pipe((0,vt.R)(this._destroyed)).subscribe(()=>{this._handlePaginatorPress("after")})}ngAfterContentInit(){const ct=this._dir?this._dir.change:(0,B.of)("ltr"),Lt=this._viewportRuler.change(150),ae=()=>{this.updatePagination(),this._alignInkBarToSelectedTab()};this._keyManager=new C.Em(this._items).withHorizontalOrientation(this._getLayoutDirection()).withHomeAndEnd().withWrap(),this._keyManager.updateActiveItem(this._selectedIndex),"undefined"!=typeof requestAnimationFrame?requestAnimationFrame(ae):ae(),(0,Q.T)(ct,Lt,this._items.changes).pipe((0,vt.R)(this._destroyed)).subscribe(()=>{this._ngZone.run(()=>Promise.resolve().then(ae)),this._keyManager.withHorizontalOrientation(this._getLayoutDirection())}),this._keyManager.change.pipe((0,vt.R)(this._destroyed)).subscribe(Ae=>{this.indexFocused.emit(Ae),this._setTabFocus(Ae)})}ngAfterContentChecked(){this._tabLabelCount!=this._items.length&&(this.updatePagination(),this._tabLabelCount=this._items.length,this._changeDetectorRef.markForCheck()),this._selectedIndexChanged&&(this._scrollToLabel(this._selectedIndex),this._checkScrollingControls(),this._alignInkBarToSelectedTab(),this._selectedIndexChanged=!1,this._changeDetectorRef.markForCheck()),this._scrollDistanceChanged&&(this._updateTabScrollPosition(),this._scrollDistanceChanged=!1,this._changeDetectorRef.markForCheck())}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete(),this._stopScrolling.complete()}_handleKeydown(ct){if(!(0,Jt.Vb)(ct))switch(ct.keyCode){case Jt.K5:case Jt.L_:this.focusIndex!==this.selectedIndex&&(this.selectFocusedIndex.emit(this.focusIndex),this._itemSelected(ct));break;default:this._keyManager.onKeydown(ct)}}_onContentChanges(){const ct=this._elementRef.nativeElement.textContent;ct!==this._currentTextContent&&(this._currentTextContent=ct||"",this._ngZone.run(()=>{this.updatePagination(),this._alignInkBarToSelectedTab(),this._changeDetectorRef.markForCheck()}))}updatePagination(){this._checkPaginationEnabled(),this._checkScrollingControls(),this._updateTabScrollPosition()}get focusIndex(){return this._keyManager?this._keyManager.activeItemIndex:0}set focusIndex(ct){!this._isValidIndex(ct)||this.focusIndex===ct||!this._keyManager||this._keyManager.setActiveItem(ct)}_isValidIndex(ct){if(!this._items)return!0;const Lt=this._items?this._items.toArray()[ct]:null;return!!Lt&&!Lt.disabled}_setTabFocus(ct){if(this._showPaginationControls&&this._scrollToLabel(ct),this._items&&this._items.length){this._items.toArray()[ct].focus();const Lt=this._tabListContainer.nativeElement;Lt.scrollLeft="ltr"==this._getLayoutDirection()?0:Lt.scrollWidth-Lt.offsetWidth}}_getLayoutDirection(){return this._dir&&"rtl"===this._dir.value?"rtl":"ltr"}_updateTabScrollPosition(){if(this.disablePagination)return;const ct=this.scrollDistance,Lt="ltr"===this._getLayoutDirection()?-ct:ct;this._tabList.nativeElement.style.transform=`translateX(${Math.round(Lt)}px)`,(this._platform.TRIDENT||this._platform.EDGE)&&(this._tabListContainer.nativeElement.scrollLeft=0)}get scrollDistance(){return this._scrollDistance}set scrollDistance(ct){this._scrollTo(ct)}_scrollHeader(ct){return this._scrollTo(this._scrollDistance+("before"==ct?-1:1)*this._tabListContainer.nativeElement.offsetWidth/3)}_handlePaginatorClick(ct){this._stopInterval(),this._scrollHeader(ct)}_scrollToLabel(ct){if(this.disablePagination)return;const Lt=this._items?this._items.toArray()[ct]:null;if(!Lt)return;const ae=this._tabListContainer.nativeElement.offsetWidth,{offsetLeft:Ae,offsetWidth:Wi}=Lt.elementRef.nativeElement;let Qi,yn;"ltr"==this._getLayoutDirection()?(Qi=Ae,yn=Qi+Wi):(yn=this._tabListInner.nativeElement.offsetWidth-Ae,Qi=yn-Wi);const tr=this.scrollDistance,li=this.scrollDistance+ae;Qi<tr?this.scrollDistance-=tr-Qi+60:yn>li&&(this.scrollDistance+=yn-li+60)}_checkPaginationEnabled(){if(this.disablePagination)this._showPaginationControls=!1;else{const ct=this._tabListInner.nativeElement.scrollWidth>this._elementRef.nativeElement.offsetWidth;ct||(this.scrollDistance=0),ct!==this._showPaginationControls&&this._changeDetectorRef.markForCheck(),this._showPaginationControls=ct}}_checkScrollingControls(){this.disablePagination?this._disableScrollAfter=this._disableScrollBefore=!0:(this._disableScrollBefore=0==this.scrollDistance,this._disableScrollAfter=this.scrollDistance==this._getMaxScrollDistance(),this._changeDetectorRef.markForCheck())}_getMaxScrollDistance(){return this._tabListInner.nativeElement.scrollWidth-this._tabListContainer.nativeElement.offsetWidth||0}_alignInkBarToSelectedTab(){const ct=this._items&&this._items.length?this._items.toArray()[this.selectedIndex]:null,Lt=ct?ct.elementRef.nativeElement:null;Lt?this._inkBar.alignToElement(Lt):this._inkBar.hide()}_stopInterval(){this._stopScrolling.next()}_handlePaginatorPress(ct,Lt){Lt&&null!=Lt.button&&0!==Lt.button||(this._stopInterval(),(0,at.H)(650,100).pipe((0,vt.R)((0,Q.T)(this._stopScrolling,this._destroyed))).subscribe(()=>{const{maxScrollDistance:ae,distance:Ae}=this._scrollHeader(ct);(0===Ae||Ae>=ae)&&this._stopInterval()}))}_scrollTo(ct){if(this.disablePagination)return{maxScrollDistance:0,distance:0};const Lt=this._getMaxScrollDistance();return this._scrollDistance=Math.max(0,Math.min(Lt,ct)),this._scrollDistanceChanged=!0,this._checkScrollingControls(),{maxScrollDistance:Lt,distance:this._scrollDistance}}}return fe.\u0275fac=function(ct){return new(ct||fe)(n.Y36(n.SBq),n.Y36(n.sBO),n.Y36(yt.rL),n.Y36(xt.Is,8),n.Y36(n.R0b),n.Y36(Ct.t4),n.Y36(s.Qb,8))},fe.\u0275dir=n.lG2({type:fe,inputs:{disablePagination:"disablePagination"}}),fe})(),wi=(()=>{class fe extends Fi{constructor(ct,Lt,ae,Ae,Wi,Qi,yn){super(ct,Lt,ae,Ae,Wi,Qi,yn),this._disableRipple=!1}get disableRipple(){return this._disableRipple}set disableRipple(ct){this._disableRipple=(0,Wt.Ig)(ct)}_itemSelected(ct){ct.preventDefault()}}return fe.\u0275fac=function(ct){return new(ct||fe)(n.Y36(n.SBq),n.Y36(n.sBO),n.Y36(yt.rL),n.Y36(xt.Is,8),n.Y36(n.R0b),n.Y36(Ct.t4),n.Y36(s.Qb,8))},fe.\u0275dir=n.lG2({type:fe,inputs:{disableRipple:"disableRipple"},features:[n.qOj]}),fe})(),yi=(()=>{class fe extends wi{constructor(ct,Lt,ae,Ae,Wi,Qi,yn){super(ct,Lt,ae,Ae,Wi,Qi,yn)}}return fe.\u0275fac=function(ct){return new(ct||fe)(n.Y36(n.SBq),n.Y36(n.sBO),n.Y36(yt.rL),n.Y36(xt.Is,8),n.Y36(n.R0b),n.Y36(Ct.t4),n.Y36(s.Qb,8))},fe.\u0275cmp=n.Xpm({type:fe,selectors:[["mat-tab-header"]],contentQueries:function(ct,Lt,ae){if(1&ct&&n.Suo(ae,ye,4),2&ct){let Ae;n.iGM(Ae=n.CRH())&&(Lt._items=Ae)}},viewQuery:function(ct,Lt){if(1&ct&&(n.Gf(gi,7),n.Gf(Et,7),n.Gf(ht,7),n.Gf(nt,7),n.Gf(he,5),n.Gf(Mt,5)),2&ct){let ae;n.iGM(ae=n.CRH())&&(Lt._inkBar=ae.first),n.iGM(ae=n.CRH())&&(Lt._tabListContainer=ae.first),n.iGM(ae=n.CRH())&&(Lt._tabList=ae.first),n.iGM(ae=n.CRH())&&(Lt._tabListInner=ae.first),n.iGM(ae=n.CRH())&&(Lt._nextPaginator=ae.first),n.iGM(ae=n.CRH())&&(Lt._previousPaginator=ae.first)}},hostAttrs:[1,"mat-tab-header"],hostVars:4,hostBindings:function(ct,Lt){2&ct&&n.ekj("mat-tab-header-pagination-controls-enabled",Lt._showPaginationControls)("mat-tab-header-rtl","rtl"==Lt._getLayoutDirection())},inputs:{selectedIndex:"selectedIndex"},outputs:{selectFocusedIndex:"selectFocusedIndex",indexFocused:"indexFocused"},features:[n.qOj],ngContentSelectors:mt,decls:14,vars:8,consts:[["aria-hidden","true","mat-ripple","",1,"mat-tab-header-pagination","mat-tab-header-pagination-before","mat-elevation-z4",3,"matRippleDisabled","click","mousedown","touchend"],["previousPaginator",""],[1,"mat-tab-header-pagination-chevron"],[1,"mat-tab-label-container",3,"keydown"],["tabListContainer",""],["role","tablist",1,"mat-tab-list",3,"cdkObserveContent"],["tabList",""],[1,"mat-tab-labels"],["tabListInner",""],["aria-hidden","true","mat-ripple","",1,"mat-tab-header-pagination","mat-tab-header-pagination-after","mat-elevation-z4",3,"matRippleDisabled","mousedown","click","touchend"],["nextPaginator",""]],template:function(ct,Lt){1&ct&&(n.F$t(),n.TgZ(0,"div",0,1),n.NdJ("click",function(){return Lt._handlePaginatorClick("before")})("mousedown",function(Ae){return Lt._handlePaginatorPress("before",Ae)})("touchend",function(){return Lt._stopInterval()}),n._UZ(2,"div",2),n.qZA(),n.TgZ(3,"div",3,4),n.NdJ("keydown",function(Ae){return Lt._handleKeydown(Ae)}),n.TgZ(5,"div",5,6),n.NdJ("cdkObserveContent",function(){return Lt._onContentChanges()}),n.TgZ(7,"div",7,8),n.Hsn(9),n.qZA(),n._UZ(10,"mat-ink-bar"),n.qZA(),n.qZA(),n.TgZ(11,"div",9,10),n.NdJ("mousedown",function(Ae){return Lt._handlePaginatorPress("after",Ae)})("click",function(){return Lt._handlePaginatorClick("after")})("touchend",function(){return Lt._stopInterval()}),n._UZ(13,"div",2),n.qZA()),2&ct&&(n.ekj("mat-tab-header-pagination-disabled",Lt._disableScrollBefore),n.Q6J("matRippleDisabled",Lt._disableScrollBefore||Lt.disableRipple),n.xp6(5),n.ekj("_mat-animation-noopable","NoopAnimations"===Lt._animationMode),n.xp6(6),n.ekj("mat-tab-header-pagination-disabled",Lt._disableScrollAfter),n.Q6J("matRippleDisabled",Lt._disableScrollAfter||Lt.disableRipple))},directives:[r.wG,_.wD,gi],styles:[".mat-tab-header{display:flex;overflow:hidden;position:relative;flex-shrink:0}.mat-tab-header-pagination{-webkit-user-select:none;-moz-user-select:none;user-select:none;position:relative;display:none;justify-content:center;align-items:center;min-width:32px;cursor:pointer;z-index:2;-webkit-tap-highlight-color:transparent;touch-action:none}.mat-tab-header-pagination-controls-enabled .mat-tab-header-pagination{display:flex}.mat-tab-header-pagination-before,.mat-tab-header-rtl .mat-tab-header-pagination-after{padding-left:4px}.mat-tab-header-pagination-before .mat-tab-header-pagination-chevron,.mat-tab-header-rtl .mat-tab-header-pagination-after .mat-tab-header-pagination-chevron{transform:rotate(-135deg)}.mat-tab-header-rtl .mat-tab-header-pagination-before,.mat-tab-header-pagination-after{padding-right:4px}.mat-tab-header-rtl .mat-tab-header-pagination-before .mat-tab-header-pagination-chevron,.mat-tab-header-pagination-after .mat-tab-header-pagination-chevron{transform:rotate(45deg)}.mat-tab-header-pagination-chevron{border-style:solid;border-width:2px 2px 0 0;height:8px;width:8px}.mat-tab-header-pagination-disabled{box-shadow:none;cursor:default}.mat-tab-list{flex-grow:1;position:relative;transition:transform 500ms cubic-bezier(0.35, 0, 0.25, 1)}.mat-ink-bar{position:absolute;bottom:0;height:2px;transition:500ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable.mat-ink-bar{transition:none;animation:none}.mat-tab-group-inverted-header .mat-ink-bar{bottom:auto;top:0}.cdk-high-contrast-active .mat-ink-bar{outline:solid 2px;height:0}.mat-tab-labels{display:flex}[mat-align-tabs=center]>.mat-tab-header .mat-tab-labels{justify-content:center}[mat-align-tabs=end]>.mat-tab-header .mat-tab-labels{justify-content:flex-end}.mat-tab-label-container{display:flex;flex-grow:1;overflow:hidden;z-index:1}._mat-animation-noopable.mat-tab-list{transition:none;animation:none}.mat-tab-label{height:48px;padding:0 24px;cursor:pointer;box-sizing:border-box;opacity:.6;min-width:160px;text-align:center;display:inline-flex;justify-content:center;align-items:center;white-space:nowrap;position:relative}.mat-tab-label:focus{outline:none}.mat-tab-label:focus:not(.mat-tab-disabled){opacity:1}.cdk-high-contrast-active .mat-tab-label:focus{outline:dotted 2px;outline-offset:-2px}.mat-tab-label.mat-tab-disabled{cursor:default}.cdk-high-contrast-active .mat-tab-label.mat-tab-disabled{opacity:.5}.mat-tab-label .mat-tab-label-content{display:inline-flex;justify-content:center;align-items:center;white-space:nowrap}.cdk-high-contrast-active .mat-tab-label{opacity:1}@media(max-width: 599px){.mat-tab-label{min-width:72px}}\n"],encapsulation:2}),fe})(),pn=0;class mi{}const Zi=(0,r.pj)((0,r.Kr)(class{constructor(fe){this._elementRef=fe}}),"primary");let Ce=(()=>{class fe extends Zi{constructor(ct,Lt,ae,Ae){var Wi;super(ct),this._changeDetectorRef=Lt,this._animationMode=Ae,this._tabs=new n.n_E,this._indexToSelect=0,this._tabBodyWrapperHeight=0,this._tabsSubscription=y.w0.EMPTY,this._tabLabelSubscription=y.w0.EMPTY,this._selectedIndex=null,this.headerPosition="above",this.selectedIndexChange=new n.vpe,this.focusChange=new n.vpe,this.animationDone=new n.vpe,this.selectedTabChange=new n.vpe(!0),this._groupId=pn++,this.animationDuration=ae&&ae.animationDuration?ae.animationDuration:"500ms",this.disablePagination=!(!ae||null==ae.disablePagination)&&ae.disablePagination,this.dynamicHeight=!(!ae||null==ae.dynamicHeight)&&ae.dynamicHeight,this.contentTabIndex=null!==(Wi=null==ae?void 0:ae.contentTabIndex)&&void 0!==Wi?Wi:null}get dynamicHeight(){return this._dynamicHeight}set dynamicHeight(ct){this._dynamicHeight=(0,Wt.Ig)(ct)}get selectedIndex(){return this._selectedIndex}set selectedIndex(ct){this._indexToSelect=(0,Wt.su)(ct,null)}get animationDuration(){return this._animationDuration}set animationDuration(ct){this._animationDuration=/^\d+$/.test(ct+"")?ct+"ms":ct}get contentTabIndex(){return this._contentTabIndex}set contentTabIndex(ct){this._contentTabIndex=(0,Wt.su)(ct,null)}get backgroundColor(){return this._backgroundColor}set backgroundColor(ct){const Lt=this._elementRef.nativeElement;Lt.classList.remove(`mat-background-${this.backgroundColor}`),ct&&Lt.classList.add(`mat-background-${ct}`),this._backgroundColor=ct}ngAfterContentChecked(){const ct=this._indexToSelect=this._clampTabIndex(this._indexToSelect);if(this._selectedIndex!=ct){const Lt=null==this._selectedIndex;if(!Lt){this.selectedTabChange.emit(this._createChangeEvent(ct));const ae=this._tabBodyWrapper.nativeElement;ae.style.minHeight=ae.clientHeight+"px"}Promise.resolve().then(()=>{this._tabs.forEach((ae,Ae)=>ae.isActive=Ae===ct),Lt||(this.selectedIndexChange.emit(ct),this._tabBodyWrapper.nativeElement.style.minHeight="")})}this._tabs.forEach((Lt,ae)=>{Lt.position=ae-ct,null!=this._selectedIndex&&0==Lt.position&&!Lt.origin&&(Lt.origin=ct-this._selectedIndex)}),this._selectedIndex!==ct&&(this._selectedIndex=ct,this._changeDetectorRef.markForCheck())}ngAfterContentInit(){this._subscribeToAllTabChanges(),this._subscribeToTabLabels(),this._tabsSubscription=this._tabs.changes.subscribe(()=>{if(this._clampTabIndex(this._indexToSelect)===this._selectedIndex){const Lt=this._tabs.toArray();for(let ae=0;ae<Lt.length;ae++)if(Lt[ae].isActive){this._indexToSelect=this._selectedIndex=ae;break}}this._changeDetectorRef.markForCheck()})}_subscribeToAllTabChanges(){this._allTabs.changes.pipe((0,St.O)(this._allTabs)).subscribe(ct=>{this._tabs.reset(ct.filter(Lt=>Lt._closestTabGroup===this||!Lt._closestTabGroup)),this._tabs.notifyOnChanges()})}ngOnDestroy(){this._tabs.destroy(),this._tabsSubscription.unsubscribe(),this._tabLabelSubscription.unsubscribe()}realignInkBar(){this._tabHeader&&this._tabHeader._alignInkBarToSelectedTab()}focusTab(ct){const Lt=this._tabHeader;Lt&&(Lt.focusIndex=ct)}_focusChanged(ct){this.focusChange.emit(this._createChangeEvent(ct))}_createChangeEvent(ct){const Lt=new mi;return Lt.index=ct,this._tabs&&this._tabs.length&&(Lt.tab=this._tabs.toArray()[ct]),Lt}_subscribeToTabLabels(){this._tabLabelSubscription&&this._tabLabelSubscription.unsubscribe(),this._tabLabelSubscription=(0,Q.T)(...this._tabs.map(ct=>ct._stateChanges)).subscribe(()=>this._changeDetectorRef.markForCheck())}_clampTabIndex(ct){return Math.min(this._tabs.length-1,Math.max(ct||0,0))}_getTabLabelId(ct){return`mat-tab-label-${this._groupId}-${ct}`}_getTabContentId(ct){return`mat-tab-content-${this._groupId}-${ct}`}_setTabBodyWrapperHeight(ct){if(!this._dynamicHeight||!this._tabBodyWrapperHeight)return;const Lt=this._tabBodyWrapper.nativeElement;Lt.style.height=this._tabBodyWrapperHeight+"px",this._tabBodyWrapper.nativeElement.offsetHeight&&(Lt.style.height=ct+"px")}_removeTabBodyWrapperHeight(){const ct=this._tabBodyWrapper.nativeElement;this._tabBodyWrapperHeight=ct.clientHeight,ct.style.height="",this.animationDone.emit()}_handleClick(ct,Lt,ae){ct.disabled||(this.selectedIndex=Lt.focusIndex=ae)}_getTabIndex(ct,Lt){return ct.disabled?null:this.selectedIndex===Lt?0:-1}_tabFocusChanged(ct,Lt){ct&&"mouse"!==ct&&"touch"!==ct&&(this._tabHeader.focusIndex=Lt)}}return fe.\u0275fac=function(ct){return new(ct||fe)(n.Y36(n.SBq),n.Y36(n.sBO),n.Y36(ne,8),n.Y36(s.Qb,8))},fe.\u0275dir=n.lG2({type:fe,inputs:{dynamicHeight:"dynamicHeight",selectedIndex:"selectedIndex",headerPosition:"headerPosition",animationDuration:"animationDuration",contentTabIndex:"contentTabIndex",disablePagination:"disablePagination",backgroundColor:"backgroundColor"},outputs:{selectedIndexChange:"selectedIndexChange",focusChange:"focusChange",animationDone:"animationDone",selectedTabChange:"selectedTabChange"},features:[n.qOj]}),fe})(),Oe=(()=>{class fe extends Ce{constructor(ct,Lt,ae,Ae){super(ct,Lt,ae,Ae)}}return fe.\u0275fac=function(ct){return new(ct||fe)(n.Y36(n.SBq),n.Y36(n.sBO),n.Y36(ne,8),n.Y36(s.Qb,8))},fe.\u0275cmp=n.Xpm({type:fe,selectors:[["mat-tab-group"]],contentQueries:function(ct,Lt,ae){if(1&ct&&n.Suo(ae,hi,5),2&ct){let Ae;n.iGM(Ae=n.CRH())&&(Lt._allTabs=Ae)}},viewQuery:function(ct,Lt){if(1&ct&&(n.Gf(Nt,5),n.Gf(de,5)),2&ct){let ae;n.iGM(ae=n.CRH())&&(Lt._tabBodyWrapper=ae.first),n.iGM(ae=n.CRH())&&(Lt._tabHeader=ae.first)}},hostAttrs:[1,"mat-tab-group"],hostVars:4,hostBindings:function(ct,Lt){2&ct&&n.ekj("mat-tab-group-dynamic-height",Lt.dynamicHeight)("mat-tab-group-inverted-header","below"===Lt.headerPosition)},inputs:{color:"color",disableRipple:"disableRipple"},exportAs:["matTabGroup"],features:[n._Bn([{provide:ze,useExisting:fe}]),n.qOj],decls:6,vars:7,consts:[[3,"selectedIndex","disableRipple","disablePagination","indexFocused","selectFocusedIndex"],["tabHeader",""],["class","mat-tab-label mat-focus-indicator","role","tab","matTabLabelWrapper","","mat-ripple","","cdkMonitorElementFocus","",3,"id","mat-tab-label-active","disabled","matRippleDisabled","click","cdkFocusChange",4,"ngFor","ngForOf"],[1,"mat-tab-body-wrapper"],["tabBodyWrapper",""],["role","tabpanel",3,"id","mat-tab-body-active","content","position","origin","animationDuration","_onCentered","_onCentering",4,"ngFor","ngForOf"],["role","tab","matTabLabelWrapper","","mat-ripple","","cdkMonitorElementFocus","",1,"mat-tab-label","mat-focus-indicator",3,"id","disabled","matRippleDisabled","click","cdkFocusChange"],[1,"mat-tab-label-content"],[3,"ngIf"],[3,"cdkPortalOutlet"],["role","tabpanel",3,"id","content","position","origin","animationDuration","_onCentered","_onCentering"]],template:function(ct,Lt){1&ct&&(n.TgZ(0,"mat-tab-header",0,1),n.NdJ("indexFocused",function(Ae){return Lt._focusChanged(Ae)})("selectFocusedIndex",function(Ae){return Lt.selectedIndex=Ae}),n.YNc(2,Ne,4,14,"div",2),n.qZA(),n.TgZ(3,"div",3,4),n.YNc(5,Qe,1,9,"mat-tab-body",5),n.qZA()),2&ct&&(n.Q6J("selectedIndex",Lt.selectedIndex||0)("disableRipple",Lt.disableRipple)("disablePagination",Lt.disablePagination),n.xp6(2),n.Q6J("ngForOf",Lt._tabs),n.xp6(1),n.ekj("_mat-animation-noopable","NoopAnimations"===Lt._animationMode),n.xp6(2),n.Q6J("ngForOf",Lt._tabs))},directives:[yi,t.sg,ye,r.wG,C.kH,t.O5,e.Pl,ke],styles:[".mat-tab-group{display:flex;flex-direction:column;max-width:100%}.mat-tab-group.mat-tab-group-inverted-header{flex-direction:column-reverse}.mat-tab-label{height:48px;padding:0 24px;cursor:pointer;box-sizing:border-box;opacity:.6;min-width:160px;text-align:center;display:inline-flex;justify-content:center;align-items:center;white-space:nowrap;position:relative}.mat-tab-label:focus{outline:none}.mat-tab-label:focus:not(.mat-tab-disabled){opacity:1}.cdk-high-contrast-active .mat-tab-label:focus{outline:dotted 2px;outline-offset:-2px}.mat-tab-label.mat-tab-disabled{cursor:default}.cdk-high-contrast-active .mat-tab-label.mat-tab-disabled{opacity:.5}.mat-tab-label .mat-tab-label-content{display:inline-flex;justify-content:center;align-items:center;white-space:nowrap}.cdk-high-contrast-active .mat-tab-label{opacity:1}@media(max-width: 599px){.mat-tab-label{padding:0 12px}}@media(max-width: 959px){.mat-tab-label{padding:0 12px}}.mat-tab-group[mat-stretch-tabs]>.mat-tab-header .mat-tab-label{flex-basis:0;flex-grow:1}.mat-tab-body-wrapper{position:relative;overflow:hidden;display:flex;transition:height 500ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable.mat-tab-body-wrapper{transition:none;animation:none}.mat-tab-body{top:0;left:0;right:0;bottom:0;position:absolute;display:block;overflow:hidden;outline:0;flex-basis:100%}.mat-tab-body.mat-tab-body-active{position:relative;overflow-x:hidden;overflow-y:auto;z-index:1;flex-grow:1}.mat-tab-group.mat-tab-group-dynamic-height .mat-tab-body.mat-tab-body-active{overflow-y:hidden}\n"],encapsulation:2}),fe})(),$e=(()=>{class fe{}return fe.\u0275fac=function(ct){return new(ct||fe)},fe.\u0275mod=n.oAB({type:fe}),fe.\u0275inj=n.cJS({imports:[[t.ez,r.BQ,e.eL,r.si,_.Q8,C.rt],r.BQ]}),fe})()},76360:(U,$,m)=>{"use strict";m.d($,{Qb:()=>Fa,PW:()=>qs});var C=m(5e3),_=m(22313),e=m(41777);function t(){return"undefined"!=typeof window&&void 0!==window.document}function n(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function r(Gt){switch(Gt.length){case 0:return new e.ZN;case 1:return Gt[0];default:return new e.ZE(Gt)}}function s(Gt,W,K,gt,Qt={},be={}){const Ye=[],ti=[];let vi=-1,Bi=null;if(gt.forEach(un=>{const En=un.offset,Zn=En==vi,Qn=Zn&&Bi||{};Object.keys(un).forEach(Ln=>{let er=Ln,rr=un[Ln];if("offset"!==Ln)switch(er=W.normalizePropertyName(er,Ye),rr){case e.k1:rr=Qt[Ln];break;case e.l3:rr=be[Ln];break;default:rr=W.normalizeStyleValue(Ln,er,rr,Ye)}Qn[er]=rr}),Zn||ti.push(Qn),Bi=Qn,vi=En}),Ye.length){const un="\n - ";throw new Error(`Unable to animate due to the following errors:${un}${Ye.join(un)}`)}return ti}function u(Gt,W,K,gt){switch(W){case"start":Gt.onStart(()=>gt(K&&y(K,"start",Gt)));break;case"done":Gt.onDone(()=>gt(K&&y(K,"done",Gt)));break;case"destroy":Gt.onDestroy(()=>gt(K&&y(K,"destroy",Gt)))}}function y(Gt,W,K){const gt=K.totalTime,be=x(Gt.element,Gt.triggerName,Gt.fromState,Gt.toState,W||Gt.phaseName,null==gt?Gt.totalTime:gt,!!K.disabled),Ye=Gt._data;return null!=Ye&&(be._data=Ye),be}function x(Gt,W,K,gt,Qt="",be=0,Ye){return{element:Gt,triggerName:W,fromState:K,toState:gt,phaseName:Qt,totalTime:be,disabled:!!Ye}}function B(Gt,W,K){let gt;return Gt instanceof Map?(gt=Gt.get(W),gt||Gt.set(W,gt=K)):(gt=Gt[W],gt||(gt=Gt[W]=K)),gt}function Q(Gt){const W=Gt.indexOf(":");return[Gt.substring(1,W),Gt.substr(W+1)]}let at=(Gt,W)=>!1,rt=(Gt,W,K)=>[];(n()||"undefined"!=typeof Element)&&(at=t()?(Gt,W)=>{for(;W&&W!==document.documentElement;){if(W===Gt)return!0;W=W.parentNode||W.host}return!1}:(Gt,W)=>Gt.contains(W),rt=(Gt,W,K)=>{let gt=[];if(K){const Qt=Gt.querySelectorAll(W);for(let be=0;be<Qt.length;be++)gt.push(Qt[be])}else{const Qt=Gt.querySelector(W);Qt&&gt.push(Qt)}return gt});let vt=null,xt=!1;function Wt(Gt){vt||(vt=("undefined"!=typeof document?document.body:null)||{},xt=!!vt.style&&"WebkitAppearance"in vt.style);let W=!0;return vt.style&&!function(Gt){return"ebkit"==Gt.substring(1,6)}(Gt)&&(W=Gt in vt.style,!W&&xt&&(W="Webkit"+Gt.charAt(0).toUpperCase()+Gt.substr(1)in vt.style)),W}const Ct=at,yt=rt;function ot(Gt){const W={};return Object.keys(Gt).forEach(K=>{const gt=K.replace(/([a-z])([A-Z])/g,"$1-$2");W[gt]=Gt[K]}),W}let mt=(()=>{class Gt{validateStyleProperty(K){return Wt(K)}matchesElement(K,gt){return!1}containsElement(K,gt){return Ct(K,gt)}query(K,gt,Qt){return yt(K,gt,Qt)}computeStyle(K,gt,Qt){return Qt||""}animate(K,gt,Qt,be,Ye,ti=[],vi){return new e.ZN(Qt,be)}}return Gt.\u0275fac=function(K){return new(K||Gt)},Gt.\u0275prov=C.Yz7({token:Gt,factory:Gt.\u0275fac}),Gt})(),lt=(()=>{class Gt{}return Gt.NOOP=new mt,Gt})();const ht="ng-enter",nt="ng-leave",he="ng-trigger",Mt=".ng-trigger",Nt="ng-animating",de=".ng-animating";function ve(Gt){if("number"==typeof Gt)return Gt;const W=Gt.match(/^(-?[\.\d]+)(m?s)/);return!W||W.length<2?0:ue(parseFloat(W[1]),W[2])}function ue(Gt,W){return"s"===W?1e3*Gt:Gt}function Be(Gt,W,K){return Gt.hasOwnProperty("duration")?Gt:function(Gt,W,K){let Qt,be=0,Ye="";if("string"==typeof Gt){const ti=Gt.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===ti)return W.push(`The provided timing value "${Gt}" is invalid.`),{duration:0,delay:0,easing:""};Qt=ue(parseFloat(ti[1]),ti[2]);const vi=ti[3];null!=vi&&(be=ue(parseFloat(vi),ti[4]));const Bi=ti[5];Bi&&(Ye=Bi)}else Qt=Gt;if(!K){let ti=!1,vi=W.length;Qt<0&&(W.push("Duration values below 0 are not allowed for this animation step."),ti=!0),be<0&&(W.push("Delay values below 0 are not allowed for this animation step."),ti=!0),ti&&W.splice(vi,0,`The provided timing value "${Gt}" is invalid.`)}return{duration:Qt,delay:be,easing:Ye}}(Gt,W,K)}function Qe(Gt,W={}){return Object.keys(Gt).forEach(K=>{W[K]=Gt[K]}),W}function Ze(Gt,W,K={}){if(W)for(let gt in Gt)K[gt]=Gt[gt];else Qe(Gt,K);return K}function Le(Gt,W,K){return K?W+":"+K+";":""}function gi(Gt){let W="";for(let K=0;K<Gt.style.length;K++){const gt=Gt.style.item(K);W+=Le(0,gt,Gt.style.getPropertyValue(gt))}for(const K in Gt.style)Gt.style.hasOwnProperty(K)&&!K.startsWith("_")&&(W+=Le(0,ee(K),Gt.style[K]));Gt.setAttribute("style",W)}function Bt(Gt,W,K){Gt.style&&(Object.keys(W).forEach(gt=>{const Qt=te(gt);K&&!K.hasOwnProperty(gt)&&(K[gt]=Gt.style[Qt]),Gt.style[Qt]=W[gt]}),n()&&gi(Gt))}function Te(Gt,W){Gt.style&&(Object.keys(W).forEach(K=>{const gt=te(K);Gt.style[gt]=""}),n()&&gi(Gt))}function $t(Gt){return Array.isArray(Gt)?1==Gt.length?Gt[0]:(0,e.vP)(Gt):Gt}const At=new RegExp("{{\\s*(.+?)\\s*}}","g");function pe(Gt){let W=[];if("string"==typeof Gt){let K;for(;K=At.exec(Gt);)W.push(K[1]);At.lastIndex=0}return W}function ze(Gt,W,K){const gt=Gt.toString(),Qt=gt.replace(At,(be,Ye)=>{let ti=W[Ye];return W.hasOwnProperty(Ye)||(K.push(`Please provide a value for the animation param ${Ye}`),ti=""),ti.toString()});return Qt==gt?Gt:Qt}function hi(Gt){const W=[];let K=Gt.next();for(;!K.done;)W.push(K.value),K=Gt.next();return W}const Ie=/-+([a-z0-9])/g;function te(Gt){return Gt.replace(Ie,(...W)=>W[1].toUpperCase())}function ee(Gt){return Gt.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function ke(Gt,W){return 0===Gt||0===W}function ne(Gt,W,K){const gt=Object.keys(K);if(gt.length&&W.length){let be=W[0],Ye=[];if(gt.forEach(ti=>{be.hasOwnProperty(ti)||Ye.push(ti),be[ti]=K[ti]}),Ye.length)for(var Qt=1;Qt<W.length;Qt++){let ti=W[Qt];Ye.forEach(function(vi){ti[vi]=ye(Gt,vi)})}}return W}function me(Gt,W,K){switch(W.type){case 7:return Gt.visitTrigger(W,K);case 0:return Gt.visitState(W,K);case 1:return Gt.visitTransition(W,K);case 2:return Gt.visitSequence(W,K);case 3:return Gt.visitGroup(W,K);case 4:return Gt.visitAnimate(W,K);case 5:return Gt.visitKeyframes(W,K);case 6:return Gt.visitStyle(W,K);case 8:return Gt.visitReference(W,K);case 9:return Gt.visitAnimateChild(W,K);case 10:return Gt.visitAnimateRef(W,K);case 11:return Gt.visitQuery(W,K);case 12:return Gt.visitStagger(W,K);default:throw new Error(`Unable to resolve animation metadata node #${W.type}`)}}function ye(Gt,W){return window.getComputedStyle(Gt)[W]}function ce(Gt,W){const K=[];return"string"==typeof Gt?Gt.split(/\s*,\s*/).forEach(gt=>function(Gt,W,K){if(":"==Gt[0]){const vi=function(Gt,W){switch(Gt){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(K,gt)=>parseFloat(gt)>parseFloat(K);case":decrement":return(K,gt)=>parseFloat(gt)<parseFloat(K);default:return W.push(`The transition alias value "${Gt}" is not supported`),"* => *"}}(Gt,K);if("function"==typeof vi)return void W.push(vi);Gt=vi}const gt=Gt.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==gt||gt.length<4)return K.push(`The provided transition expression "${Gt}" is not supported`),W;const Qt=gt[1],be=gt[2],Ye=gt[3];W.push(yi(Qt,Ye));"<"==be[0]&&!("*"==Qt&&"*"==Ye)&&W.push(yi(Ye,Qt))}(gt,K,W)):K.push(Gt),K}const Fi=new Set(["true","1"]),wi=new Set(["false","0"]);function yi(Gt,W){const K=Fi.has(Gt)||wi.has(Gt),gt=Fi.has(W)||wi.has(W);return(Qt,be)=>{let Ye="*"==Gt||Gt==Qt,ti="*"==W||W==be;return!Ye&&K&&"boolean"==typeof Qt&&(Ye=Qt?Fi.has(Gt):wi.has(Gt)),!ti&&gt&&"boolean"==typeof be&&(ti=be?Fi.has(W):wi.has(W)),Ye&&ti}}const mi=new RegExp("s*:selfs*,?","g");function Zi(Gt,W,K){return new Oe(Gt).build(W,K)}class Oe{constructor(W){this._driver=W}build(W,K){const gt=new Ii(K);return this._resetContextStyleTimingState(gt),me(this,$t(W),gt)}_resetContextStyleTimingState(W){W.currentQuerySelector="",W.collectedStyles={},W.collectedStyles[""]={},W.currentTime=0}visitTrigger(W,K){let gt=K.queryCount=0,Qt=K.depCount=0;const be=[],Ye=[];return"@"==W.name.charAt(0)&&K.errors.push("animation triggers cannot be prefixed with an `@` sign (e.g. trigger('@foo', [...]))"),W.definitions.forEach(ti=>{if(this._resetContextStyleTimingState(K),0==ti.type){const vi=ti,Bi=vi.name;Bi.toString().split(/\s*,\s*/).forEach(un=>{vi.name=un,be.push(this.visitState(vi,K))}),vi.name=Bi}else if(1==ti.type){const vi=this.visitTransition(ti,K);gt+=vi.queryCount,Qt+=vi.depCount,Ye.push(vi)}else K.errors.push("only state() and transition() definitions can sit inside of a trigger()")}),{type:7,name:W.name,states:be,transitions:Ye,queryCount:gt,depCount:Qt,options:null}}visitState(W,K){const gt=this.visitStyle(W.styles,K),Qt=W.options&&W.options.params||null;if(gt.containsDynamicStyles){const be=new Set,Ye=Qt||{};if(gt.styles.forEach(ti=>{if(Ui(ti)){const vi=ti;Object.keys(vi).forEach(Bi=>{pe(vi[Bi]).forEach(un=>{Ye.hasOwnProperty(un)||be.add(un)})})}}),be.size){const ti=hi(be.values());K.errors.push(`state("${W.name}", ...) must define default values for all the following style substitutions: ${ti.join(", ")}`)}}return{type:0,name:W.name,style:gt,options:Qt?{params:Qt}:null}}visitTransition(W,K){K.queryCount=0,K.depCount=0;const gt=me(this,$t(W.animation),K);return{type:1,matchers:ce(W.expr,K.errors),animation:gt,queryCount:K.queryCount,depCount:K.depCount,options:fe(W.options)}}visitSequence(W,K){return{type:2,steps:W.steps.map(gt=>me(this,gt,K)),options:fe(W.options)}}visitGroup(W,K){const gt=K.currentTime;let Qt=0;const be=W.steps.map(Ye=>{K.currentTime=gt;const ti=me(this,Ye,K);return Qt=Math.max(Qt,K.currentTime),ti});return K.currentTime=Qt,{type:3,steps:be,options:fe(W.options)}}visitAnimate(W,K){const gt=function(Gt,W){let K=null;if(Gt.hasOwnProperty("duration"))K=Gt;else if("number"==typeof Gt)return kt(Be(Gt,W).duration,0,"");const gt=Gt;if(gt.split(/\s+/).some(be=>"{"==be.charAt(0)&&"{"==be.charAt(1))){const be=kt(0,0,"");return be.dynamic=!0,be.strValue=gt,be}return K=K||Be(gt,W),kt(K.duration,K.delay,K.easing)}(W.timings,K.errors);K.currentAnimateTimings=gt;let Qt,be=W.styles?W.styles:(0,e.oB)({});if(5==be.type)Qt=this.visitKeyframes(be,K);else{let Ye=W.styles,ti=!1;if(!Ye){ti=!0;const Bi={};gt.easing&&(Bi.easing=gt.easing),Ye=(0,e.oB)(Bi)}K.currentTime+=gt.duration+gt.delay;const vi=this.visitStyle(Ye,K);vi.isEmptyStep=ti,Qt=vi}return K.currentAnimateTimings=null,{type:4,timings:gt,style:Qt,options:null}}visitStyle(W,K){const gt=this._makeStyleAst(W,K);return this._validateStyleAst(gt,K),gt}_makeStyleAst(W,K){const gt=[];Array.isArray(W.styles)?W.styles.forEach(Ye=>{"string"==typeof Ye?Ye==e.l3?gt.push(Ye):K.errors.push(`The provided style string value ${Ye} is not allowed.`):gt.push(Ye)}):gt.push(W.styles);let Qt=!1,be=null;return gt.forEach(Ye=>{if(Ui(Ye)){const ti=Ye,vi=ti.easing;if(vi&&(be=vi,delete ti.easing),!Qt)for(let Bi in ti)if(ti[Bi].toString().indexOf("{{")>=0){Qt=!0;break}}}),{type:6,styles:gt,easing:be,offset:W.offset,containsDynamicStyles:Qt,options:null}}_validateStyleAst(W,K){const gt=K.currentAnimateTimings;let Qt=K.currentTime,be=K.currentTime;gt&&be>0&&(be-=gt.duration+gt.delay),W.styles.forEach(Ye=>{"string"!=typeof Ye&&Object.keys(Ye).forEach(ti=>{if(!this._driver.validateStyleProperty(ti))return void K.errors.push(`The provided animation property "${ti}" is not a supported CSS property for animations`);const vi=K.collectedStyles[K.currentQuerySelector],Bi=vi[ti];let un=!0;Bi&&(be!=Qt&&be>=Bi.startTime&&Qt<=Bi.endTime&&(K.errors.push(`The CSS property "${ti}" that exists between the times of "${Bi.startTime}ms" and "${Bi.endTime}ms" is also being animated in a parallel animation between the times of "${be}ms" and "${Qt}ms"`),un=!1),be=Bi.startTime),un&&(vi[ti]={startTime:be,endTime:Qt}),K.options&&function(Gt,W,K){const gt=W.params||{},Qt=pe(Gt);Qt.length&&Qt.forEach(be=>{gt.hasOwnProperty(be)||K.push(`Unable to resolve the local animation param ${be} in the given list of values`)})}(Ye[ti],K.options,K.errors)})})}visitKeyframes(W,K){const gt={type:5,styles:[],options:null};if(!K.currentAnimateTimings)return K.errors.push("keyframes() must be placed inside of a call to animate()"),gt;let be=0;const Ye=[];let ti=!1,vi=!1,Bi=0;const un=W.steps.map(wr=>{const Yr=this._makeStyleAst(wr,K);let oo=null!=Yr.offset?Yr.offset:function(Gt){if("string"==typeof Gt)return null;let W=null;if(Array.isArray(Gt))Gt.forEach(K=>{if(Ui(K)&&K.hasOwnProperty("offset")){const gt=K;W=parseFloat(gt.offset),delete gt.offset}});else if(Ui(Gt)&&Gt.hasOwnProperty("offset")){const K=Gt;W=parseFloat(K.offset),delete K.offset}return W}(Yr.styles),ko=0;return null!=oo&&(be++,ko=Yr.offset=oo),vi=vi||ko<0||ko>1,ti=ti||ko<Bi,Bi=ko,Ye.push(ko),Yr});vi&&K.errors.push("Please ensure that all keyframe offsets are between 0 and 1"),ti&&K.errors.push("Please ensure that all keyframe offsets are in order");const En=W.steps.length;let Zn=0;be>0&&be<En?K.errors.push("Not all style() steps within the declared keyframes() contain offsets"):0==be&&(Zn=1/(En-1));const Qn=En-1,Ln=K.currentTime,er=K.currentAnimateTimings,rr=er.duration;return un.forEach((wr,Yr)=>{const oo=Zn>0?Yr==Qn?1:Zn*Yr:Ye[Yr],ko=oo*rr;K.currentTime=Ln+er.delay+ko,er.duration=ko,this._validateStyleAst(wr,K),wr.offset=oo,gt.styles.push(wr)}),gt}visitReference(W,K){return{type:8,animation:me(this,$t(W.animation),K),options:fe(W.options)}}visitAnimateChild(W,K){return K.depCount++,{type:9,options:fe(W.options)}}visitAnimateRef(W,K){return{type:10,animation:this.visitReference(W.animation,K),options:fe(W.options)}}visitQuery(W,K){const gt=K.currentQuerySelector,Qt=W.options||{};K.queryCount++,K.currentQuery=W;const[be,Ye]=function(Gt){const W=!!Gt.split(/\s*,\s*/).find(K=>":self"==K);return W&&(Gt=Gt.replace(mi,"")),Gt=Gt.replace(/@\*/g,Mt).replace(/@\w+/g,K=>Mt+"-"+K.substr(1)).replace(/:animating/g,de),[Gt,W]}(W.selector);K.currentQuerySelector=gt.length?gt+" "+be:be,B(K.collectedStyles,K.currentQuerySelector,{});const ti=me(this,$t(W.animation),K);return K.currentQuery=null,K.currentQuerySelector=gt,{type:11,selector:be,limit:Qt.limit||0,optional:!!Qt.optional,includeSelf:Ye,animation:ti,originalSelector:W.selector,options:fe(W.options)}}visitStagger(W,K){K.currentQuery||K.errors.push("stagger() can only be used inside of query()");const gt="full"===W.timings?{duration:0,delay:0,easing:"full"}:Be(W.timings,K.errors,!0);return{type:12,animation:me(this,$t(W.animation),K),timings:gt,options:null}}}class Ii{constructor(W){this.errors=W,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null}}function Ui(Gt){return!Array.isArray(Gt)&&"object"==typeof Gt}function fe(Gt){return Gt?(Gt=Qe(Gt)).params&&(Gt.params=function(Gt){return Gt?Qe(Gt):null}(Gt.params)):Gt={},Gt}function kt(Gt,W,K){return{duration:Gt,delay:W,easing:K}}function ct(Gt,W,K,gt,Qt,be,Ye=null,ti=!1){return{type:1,element:Gt,keyframes:W,preStyleProps:K,postStyleProps:gt,duration:Qt,delay:be,totalTime:Qt+be,easing:Ye,subTimeline:ti}}class Lt{constructor(){this._map=new Map}get(W){return this._map.get(W)||[]}append(W,K){let gt=this._map.get(W);gt||this._map.set(W,gt=[]),gt.push(...K)}has(W){return this._map.has(W)}clear(){this._map.clear()}}const Wi=new RegExp(":enter","g"),yn=new RegExp(":leave","g");function tr(Gt,W,K,gt,Qt,be={},Ye={},ti,vi,Bi=[]){return(new li).buildKeyframes(Gt,W,K,gt,Qt,be,Ye,ti,vi,Bi)}class li{buildKeyframes(W,K,gt,Qt,be,Ye,ti,vi,Bi,un=[]){Bi=Bi||new Lt;const En=new xe(W,K,Bi,Qt,be,un,[]);En.options=vi,En.currentTimeline.setStyles([Ye],null,En.errors,vi),me(this,gt,En);const Zn=En.timelines.filter(Qn=>Qn.containsAnimation());if(Zn.length&&Object.keys(ti).length){const Qn=Zn[Zn.length-1];Qn.allowOnlyTimelineStyles()||Qn.setStyles([ti],null,En.errors,vi)}return Zn.length?Zn.map(Qn=>Qn.buildKeyframes()):[ct(K,[],[],[],0,0,"",!1)]}visitTrigger(W,K){}visitState(W,K){}visitTransition(W,K){}visitAnimateChild(W,K){const gt=K.subInstructions.get(K.element);if(gt){const Qt=K.createSubContext(W.options),be=K.currentTimeline.currentTime,Ye=this._visitSubInstructions(gt,Qt,Qt.options);be!=Ye&&K.transformIntoNewTimeline(Ye)}K.previousNode=W}visitAnimateRef(W,K){const gt=K.createSubContext(W.options);gt.transformIntoNewTimeline(),this.visitReference(W.animation,gt),K.transformIntoNewTimeline(gt.currentTimeline.currentTime),K.previousNode=W}_visitSubInstructions(W,K,gt){let be=K.currentTimeline.currentTime;const Ye=null!=gt.duration?ve(gt.duration):null,ti=null!=gt.delay?ve(gt.delay):null;return 0!==Ye&&W.forEach(vi=>{const Bi=K.appendInstructionToTimeline(vi,Ye,ti);be=Math.max(be,Bi.duration+Bi.delay)}),be}visitReference(W,K){K.updateOptions(W.options,!0),me(this,W.animation,K),K.previousNode=W}visitSequence(W,K){const gt=K.subContextCount;let Qt=K;const be=W.options;if(be&&(be.params||be.delay)&&(Qt=K.createSubContext(be),Qt.transformIntoNewTimeline(),null!=be.delay)){6==Qt.previousNode.type&&(Qt.currentTimeline.snapshotCurrentStyles(),Qt.previousNode=Je);const Ye=ve(be.delay);Qt.delayNextStep(Ye)}W.steps.length&&(W.steps.forEach(Ye=>me(this,Ye,Qt)),Qt.currentTimeline.applyStylesToKeyframe(),Qt.subContextCount>gt&&Qt.transformIntoNewTimeline()),K.previousNode=W}visitGroup(W,K){const gt=[];let Qt=K.currentTimeline.currentTime;const be=W.options&&W.options.delay?ve(W.options.delay):0;W.steps.forEach(Ye=>{const ti=K.createSubContext(W.options);be&&ti.delayNextStep(be),me(this,Ye,ti),Qt=Math.max(Qt,ti.currentTimeline.currentTime),gt.push(ti.currentTimeline)}),gt.forEach(Ye=>K.currentTimeline.mergeTimelineCollectedStyles(Ye)),K.transformIntoNewTimeline(Qt),K.previousNode=W}_visitTiming(W,K){if(W.dynamic){const gt=W.strValue;return Be(K.params?ze(gt,K.params,K.errors):gt,K.errors)}return{duration:W.duration,delay:W.delay,easing:W.easing}}visitAnimate(W,K){const gt=K.currentAnimateTimings=this._visitTiming(W.timings,K),Qt=K.currentTimeline;gt.delay&&(K.incrementTime(gt.delay),Qt.snapshotCurrentStyles());const be=W.style;5==be.type?this.visitKeyframes(be,K):(K.incrementTime(gt.duration),this.visitStyle(be,K),Qt.applyStylesToKeyframe()),K.currentAnimateTimings=null,K.previousNode=W}visitStyle(W,K){const gt=K.currentTimeline,Qt=K.currentAnimateTimings;!Qt&&gt.getCurrentStyleProperties().length&&gt.forwardFrame();const be=Qt&&Qt.easing||W.easing;W.isEmptyStep?gt.applyEmptyStep(be):gt.setStyles(W.styles,be,K.errors,K.options),K.previousNode=W}visitKeyframes(W,K){const gt=K.currentAnimateTimings,Qt=K.currentTimeline.duration,be=gt.duration,ti=K.createSubContext().currentTimeline;ti.easing=gt.easing,W.styles.forEach(vi=>{ti.forwardTime((vi.offset||0)*be),ti.setStyles(vi.styles,vi.easing,K.errors,K.options),ti.applyStylesToKeyframe()}),K.currentTimeline.mergeTimelineCollectedStyles(ti),K.transformIntoNewTimeline(Qt+be),K.previousNode=W}visitQuery(W,K){const gt=K.currentTimeline.currentTime,Qt=W.options||{},be=Qt.delay?ve(Qt.delay):0;be&&(6===K.previousNode.type||0==gt&&K.currentTimeline.getCurrentStyleProperties().length)&&(K.currentTimeline.snapshotCurrentStyles(),K.previousNode=Je);let Ye=gt;const ti=K.invokeQuery(W.selector,W.originalSelector,W.limit,W.includeSelf,!!Qt.optional,K.errors);K.currentQueryTotal=ti.length;let vi=null;ti.forEach((Bi,un)=>{K.currentQueryIndex=un;const En=K.createSubContext(W.options,Bi);be&&En.delayNextStep(be),Bi===K.element&&(vi=En.currentTimeline),me(this,W.animation,En),En.currentTimeline.applyStylesToKeyframe(),Ye=Math.max(Ye,En.currentTimeline.currentTime)}),K.currentQueryIndex=0,K.currentQueryTotal=0,K.transformIntoNewTimeline(Ye),vi&&(K.currentTimeline.mergeTimelineCollectedStyles(vi),K.currentTimeline.snapshotCurrentStyles()),K.previousNode=W}visitStagger(W,K){const gt=K.parentContext,Qt=K.currentTimeline,be=W.timings,Ye=Math.abs(be.duration),ti=Ye*(K.currentQueryTotal-1);let vi=Ye*K.currentQueryIndex;switch(be.duration<0?"reverse":be.easing){case"reverse":vi=ti-vi;break;case"full":vi=gt.currentStaggerTime}const un=K.currentTimeline;vi&&un.delayNextStep(vi);const En=un.currentTime;me(this,W.animation,K),K.previousNode=W,gt.currentStaggerTime=Qt.currentTime-En+(Qt.startTime-gt.currentTimeline.startTime)}}const Je={};class xe{constructor(W,K,gt,Qt,be,Ye,ti,vi){this._driver=W,this.element=K,this.subInstructions=gt,this._enterClassName=Qt,this._leaveClassName=be,this.errors=Ye,this.timelines=ti,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=Je,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=vi||new ui(this._driver,K,0),ti.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(W,K){if(!W)return;const gt=W;let Qt=this.options;null!=gt.duration&&(Qt.duration=ve(gt.duration)),null!=gt.delay&&(Qt.delay=ve(gt.delay));const be=gt.params;if(be){let Ye=Qt.params;Ye||(Ye=this.options.params={}),Object.keys(be).forEach(ti=>{(!K||!Ye.hasOwnProperty(ti))&&(Ye[ti]=ze(be[ti],Ye,this.errors))})}}_copyOptions(){const W={};if(this.options){const K=this.options.params;if(K){const gt=W.params={};Object.keys(K).forEach(Qt=>{gt[Qt]=K[Qt]})}}return W}createSubContext(W=null,K,gt){const Qt=K||this.element,be=new xe(this._driver,Qt,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(Qt,gt||0));return be.previousNode=this.previousNode,be.currentAnimateTimings=this.currentAnimateTimings,be.options=this._copyOptions(),be.updateOptions(W),be.currentQueryIndex=this.currentQueryIndex,be.currentQueryTotal=this.currentQueryTotal,be.parentContext=this,this.subContextCount++,be}transformIntoNewTimeline(W){return this.previousNode=Je,this.currentTimeline=this.currentTimeline.fork(this.element,W),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(W,K,gt){const Qt={duration:null!=K?K:W.duration,delay:this.currentTimeline.currentTime+(null!=gt?gt:0)+W.delay,easing:""},be=new ki(this._driver,W.element,W.keyframes,W.preStyleProps,W.postStyleProps,Qt,W.stretchStartingKeyframe);return this.timelines.push(be),Qt}incrementTime(W){this.currentTimeline.forwardTime(this.currentTimeline.duration+W)}delayNextStep(W){W>0&&this.currentTimeline.delayNextStep(W)}invokeQuery(W,K,gt,Qt,be,Ye){let ti=[];if(Qt&&ti.push(this.element),W.length>0){W=(W=W.replace(Wi,"."+this._enterClassName)).replace(yn,"."+this._leaveClassName);let Bi=this._driver.query(this.element,W,1!=gt);0!==gt&&(Bi=gt<0?Bi.slice(Bi.length+gt,Bi.length):Bi.slice(0,gt)),ti.push(...Bi)}return!be&&0==ti.length&&Ye.push(`\`query("${K}")\` returned zero elements. (Use \`query("${K}", { optional: true })\` if you wish to allow this.)`),ti}}class ui{constructor(W,K,gt,Qt){this._driver=W,this.element=K,this.startTime=gt,this._elementTimelineStylesLookup=Qt,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(K),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(K,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(W){const K=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||K?(this.forwardTime(this.currentTime+W),K&&this.snapshotCurrentStyles()):this.startTime+=W}fork(W,K){return this.applyStylesToKeyframe(),new ui(this._driver,W,K||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(W){this.applyStylesToKeyframe(),this.duration=W,this._loadKeyframe()}_updateStyle(W,K){this._localTimelineStyles[W]=K,this._globalTimelineStyles[W]=K,this._styleSummary[W]={time:this.currentTime,value:K}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(W){W&&(this._previousKeyframe.easing=W),Object.keys(this._globalTimelineStyles).forEach(K=>{this._backFill[K]=this._globalTimelineStyles[K]||e.l3,this._currentKeyframe[K]=e.l3}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(W,K,gt,Qt){K&&(this._previousKeyframe.easing=K);const be=Qt&&Qt.params||{},Ye=function(Gt,W){const K={};let gt;return Gt.forEach(Qt=>{"*"===Qt?(gt=gt||Object.keys(W),gt.forEach(be=>{K[be]=e.l3})):Ze(Qt,!1,K)}),K}(W,this._globalTimelineStyles);Object.keys(Ye).forEach(ti=>{const vi=ze(Ye[ti],be,gt);this._pendingStyles[ti]=vi,this._localTimelineStyles.hasOwnProperty(ti)||(this._backFill[ti]=this._globalTimelineStyles.hasOwnProperty(ti)?this._globalTimelineStyles[ti]:e.l3),this._updateStyle(ti,vi)})}applyStylesToKeyframe(){const W=this._pendingStyles,K=Object.keys(W);0!=K.length&&(this._pendingStyles={},K.forEach(gt=>{this._currentKeyframe[gt]=W[gt]}),Object.keys(this._localTimelineStyles).forEach(gt=>{this._currentKeyframe.hasOwnProperty(gt)||(this._currentKeyframe[gt]=this._localTimelineStyles[gt])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(W=>{const K=this._localTimelineStyles[W];this._pendingStyles[W]=K,this._updateStyle(W,K)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const W=[];for(let K in this._currentKeyframe)W.push(K);return W}mergeTimelineCollectedStyles(W){Object.keys(W._styleSummary).forEach(K=>{const gt=this._styleSummary[K],Qt=W._styleSummary[K];(!gt||Qt.time>gt.time)&&this._updateStyle(K,Qt.value)})}buildKeyframes(){this.applyStylesToKeyframe();const W=new Set,K=new Set,gt=1===this._keyframes.size&&0===this.duration;let Qt=[];this._keyframes.forEach((ti,vi)=>{const Bi=Ze(ti,!0);Object.keys(Bi).forEach(un=>{const En=Bi[un];En==e.k1?W.add(un):En==e.l3&&K.add(un)}),gt||(Bi.offset=vi/this.duration),Qt.push(Bi)});const be=W.size?hi(W.values()):[],Ye=K.size?hi(K.values()):[];if(gt){const ti=Qt[0],vi=Qe(ti);ti.offset=0,vi.offset=1,Qt=[ti,vi]}return ct(this.element,Qt,be,Ye,this.duration,this.startTime,this.easing,!1)}}class ki extends ui{constructor(W,K,gt,Qt,be,Ye,ti=!1){super(W,K,Ye.delay),this.keyframes=gt,this.preStyleProps=Qt,this.postStyleProps=be,this._stretchStartingKeyframe=ti,this.timings={duration:Ye.duration,delay:Ye.delay,easing:Ye.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let W=this.keyframes,{delay:K,duration:gt,easing:Qt}=this.timings;if(this._stretchStartingKeyframe&&K){const be=[],Ye=gt+K,ti=K/Ye,vi=Ze(W[0],!1);vi.offset=0,be.push(vi);const Bi=Ze(W[0],!1);Bi.offset=fn(ti),be.push(Bi);const un=W.length-1;for(let En=1;En<=un;En++){let Zn=Ze(W[En],!1);Zn.offset=fn((K+Zn.offset*gt)/Ye),be.push(Zn)}gt=Ye,K=0,Qt="",W=be}return ct(this.element,W,this.preStyleProps,this.postStyleProps,gt,K,Qt,!0)}}function fn(Gt,W=3){const K=Math.pow(10,W-1);return Math.round(Gt*K)/K}class Tr{}class no extends Tr{normalizePropertyName(W,K){return te(W)}normalizeStyleValue(W,K,gt,Qt){let be="";const Ye=gt.toString().trim();if(mo[K]&&0!==gt&&"0"!==gt)if("number"==typeof gt)be="px";else{const ti=gt.match(/^[+-]?[\d\.]+([a-z]*)$/);ti&&0==ti[1].length&&Qt.push(`Please provide a CSS unit value for ${W}:${gt}`)}return Ye+be}}const mo=(()=>function(Gt){const W={};return Gt.forEach(K=>W[K]=!0),W}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function ur(Gt,W,K,gt,Qt,be,Ye,ti,vi,Bi,un,En,Zn){return{type:0,element:Gt,triggerName:W,isRemovalTransition:Qt,fromState:K,fromStyles:be,toState:gt,toStyles:Ye,timelines:ti,queriedElements:vi,preStyleProps:Bi,postStyleProps:un,totalTime:En,errors:Zn}}const Mo={};class sr{constructor(W,K,gt){this._triggerName=W,this.ast=K,this._stateStyles=gt}match(W,K,gt,Qt){return function(Gt,W,K,gt,Qt){return Gt.some(be=>be(W,K,gt,Qt))}(this.ast.matchers,W,K,gt,Qt)}buildStyles(W,K,gt){const Qt=this._stateStyles["*"],be=this._stateStyles[W],Ye=Qt?Qt.buildStyles(K,gt):{};return be?be.buildStyles(K,gt):Ye}build(W,K,gt,Qt,be,Ye,ti,vi,Bi,un){const En=[],Zn=this.ast.options&&this.ast.options.params||Mo,Ln=this.buildStyles(gt,ti&&ti.params||Mo,En),er=vi&&vi.params||Mo,rr=this.buildStyles(Qt,er,En),wr=new Set,Yr=new Map,oo=new Map,ko="void"===Qt,Ba={params:Object.assign(Object.assign({},Zn),er)},Gs=un?[]:tr(W,K,this.ast.animation,be,Ye,Ln,rr,Ba,Bi,En);let To=0;if(Gs.forEach(rs=>{To=Math.max(rs.duration+rs.delay,To)}),En.length)return ur(K,this._triggerName,gt,Qt,ko,Ln,rr,[],[],Yr,oo,To,En);Gs.forEach(rs=>{const Ms=rs.element,cl=B(Yr,Ms,{});rs.preStyleProps.forEach(Ws=>cl[Ws]=!0);const Da=B(oo,Ms,{});rs.postStyleProps.forEach(Ws=>Da[Ws]=!0),Ms!==K&&wr.add(Ms)});const Is=hi(wr.values());return ur(K,this._triggerName,gt,Qt,ko,Ln,rr,Gs,Is,Yr,oo,To)}}class Vn{constructor(W,K,gt){this.styles=W,this.defaultParams=K,this.normalizer=gt}buildStyles(W,K){const gt={},Qt=Qe(this.defaultParams);return Object.keys(W).forEach(be=>{const Ye=W[be];null!=Ye&&(Qt[be]=Ye)}),this.styles.styles.forEach(be=>{if("string"!=typeof be){const Ye=be;Object.keys(Ye).forEach(ti=>{let vi=Ye[ti];vi.length>1&&(vi=ze(vi,Qt,K));const Bi=this.normalizer.normalizePropertyName(ti,K);vi=this.normalizer.normalizeStyleValue(ti,Bi,vi,K),gt[Bi]=vi})}}),gt}}class Br{constructor(W,K,gt){this.name=W,this.ast=K,this._normalizer=gt,this.transitionFactories=[],this.states={},K.states.forEach(Qt=>{this.states[Qt.name]=new Vn(Qt.style,Qt.options&&Qt.options.params||{},gt)}),Dr(this.states,"true","1"),Dr(this.states,"false","0"),K.transitions.forEach(Qt=>{this.transitionFactories.push(new sr(W,Qt,this.states))}),this.fallbackTransition=function(Gt,W,K){return new sr(Gt,{type:1,animation:{type:2,steps:[],options:null},matchers:[(Ye,ti)=>!0],options:null,queryCount:0,depCount:0},W)}(W,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(W,K,gt,Qt){return this.transitionFactories.find(Ye=>Ye.match(W,K,gt,Qt))||null}matchStyles(W,K,gt){return this.fallbackTransition.buildStyles(W,K,gt)}}function Dr(Gt,W,K){Gt.hasOwnProperty(W)?Gt.hasOwnProperty(K)||(Gt[K]=Gt[W]):Gt.hasOwnProperty(K)&&(Gt[W]=Gt[K])}const Qr=new Lt;class Ir{constructor(W,K,gt){this.bodyNode=W,this._driver=K,this._normalizer=gt,this._animations={},this._playersById={},this.players=[]}register(W,K){const gt=[],Qt=Zi(this._driver,K,gt);if(gt.length)throw new Error(`Unable to build the animation due to the following errors: ${gt.join("\n")}`);this._animations[W]=Qt}_buildPlayer(W,K,gt){const Qt=W.element,be=s(0,this._normalizer,0,W.keyframes,K,gt);return this._driver.animate(Qt,be,W.duration,W.delay,W.easing,[],!0)}create(W,K,gt={}){const Qt=[],be=this._animations[W];let Ye;const ti=new Map;if(be?(Ye=tr(this._driver,K,be,ht,nt,{},{},gt,Qr,Qt),Ye.forEach(un=>{const En=B(ti,un.element,{});un.postStyleProps.forEach(Zn=>En[Zn]=null)})):(Qt.push("The requested animation doesn't exist or has already been destroyed"),Ye=[]),Qt.length)throw new Error(`Unable to create the animation due to the following errors: ${Qt.join("\n")}`);ti.forEach((un,En)=>{Object.keys(un).forEach(Zn=>{un[Zn]=this._driver.computeStyle(En,Zn,e.l3)})});const Bi=r(Ye.map(un=>{const En=ti.get(un.element);return this._buildPlayer(un,{},En)}));return this._playersById[W]=Bi,Bi.onDestroy(()=>this.destroy(W)),this.players.push(Bi),Bi}destroy(W){const K=this._getPlayer(W);K.destroy(),delete this._playersById[W];const gt=this.players.indexOf(K);gt>=0&&this.players.splice(gt,1)}_getPlayer(W){const K=this._playersById[W];if(!K)throw new Error(`Unable to find the timeline player referenced by ${W}`);return K}listen(W,K,gt,Qt){const be=x(K,"","","");return u(this._getPlayer(W),gt,be,Qt),()=>{}}command(W,K,gt,Qt){if("register"==gt)return void this.register(W,Qt[0]);if("create"==gt)return void this.create(W,K,Qt[0]||{});const be=this._getPlayer(W);switch(gt){case"play":be.play();break;case"pause":be.pause();break;case"reset":be.reset();break;case"restart":be.restart();break;case"finish":be.finish();break;case"init":be.init();break;case"setPosition":be.setPosition(parseFloat(Qt[0]));break;case"destroy":this.destroy(W)}}}const Vi="ng-animate-queued",Gn="ng-animate-disabled",Ji=[],Yi={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},Kn={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},zn="__ng_removed";class nr{constructor(W,K=""){this.namespaceId=K;const gt=W&&W.hasOwnProperty("value");if(this.value=null!=(Gt=gt?W.value:W)?Gt:null,gt){const be=Qe(W);delete be.value,this.options=be}else this.options={};var Gt;this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(W){const K=W.params;if(K){const gt=this.options.params;Object.keys(K).forEach(Qt=>{null==gt[Qt]&&(gt[Qt]=K[Qt])})}}}const Fn="void",Ao=new nr(Fn);class jo{constructor(W,K,gt){this.id=W,this.hostElement=K,this._engine=gt,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+W,Ro(K,this._hostClassName)}listen(W,K,gt,Qt){if(!this._triggers.hasOwnProperty(K))throw new Error(`Unable to listen on the animation trigger event "${gt}" because the animation trigger "${K}" doesn't exist!`);if(null==gt||0==gt.length)throw new Error(`Unable to listen on the animation trigger "${K}" because the provided event is undefined!`);if("start"!=(Gt=gt)&&"done"!=Gt)throw new Error(`The provided animation trigger event "${gt}" for the animation trigger "${K}" is not supported!`);var Gt;const be=B(this._elementListeners,W,[]),Ye={name:K,phase:gt,callback:Qt};be.push(Ye);const ti=B(this._engine.statesByElement,W,{});return ti.hasOwnProperty(K)||(Ro(W,he),Ro(W,he+"-"+K),ti[K]=Ao),()=>{this._engine.afterFlush(()=>{const vi=be.indexOf(Ye);vi>=0&&be.splice(vi,1),this._triggers[K]||delete ti[K]})}}register(W,K){return!this._triggers[W]&&(this._triggers[W]=K,!0)}_getTrigger(W){const K=this._triggers[W];if(!K)throw new Error(`The provided animation trigger "${W}" has not been registered!`);return K}trigger(W,K,gt,Qt=!0){const be=this._getTrigger(K),Ye=new _o(this.id,K,W);let ti=this._engine.statesByElement.get(W);ti||(Ro(W,he),Ro(W,he+"-"+K),this._engine.statesByElement.set(W,ti={}));let vi=ti[K];const Bi=new nr(gt,this.id);if(!(gt&&gt.hasOwnProperty("value"))&&vi&&Bi.absorbOptions(vi.options),ti[K]=Bi,vi||(vi=Ao),Bi.value!==Fn&&vi.value===Bi.value){if(!function(Gt,W){const K=Object.keys(Gt),gt=Object.keys(W);if(K.length!=gt.length)return!1;for(let Qt=0;Qt<K.length;Qt++){const be=K[Qt];if(!W.hasOwnProperty(be)||Gt[be]!==W[be])return!1}return!0}(vi.params,Bi.params)){const er=[],rr=be.matchStyles(vi.value,vi.params,er),wr=be.matchStyles(Bi.value,Bi.params,er);er.length?this._engine.reportError(er):this._engine.afterFlush(()=>{Te(W,rr),Bt(W,wr)})}return}const Zn=B(this._engine.playersByElement,W,[]);Zn.forEach(er=>{er.namespaceId==this.id&&er.triggerName==K&&er.queued&&er.destroy()});let Qn=be.matchTransition(vi.value,Bi.value,W,Bi.params),Ln=!1;if(!Qn){if(!Qt)return;Qn=be.fallbackTransition,Ln=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:W,triggerName:K,transition:Qn,fromState:vi,toState:Bi,player:Ye,isFallbackTransition:Ln}),Ln||(Ro(W,Vi),Ye.onStart(()=>{ns(W,Vi)})),Ye.onDone(()=>{let er=this.players.indexOf(Ye);er>=0&&this.players.splice(er,1);const rr=this._engine.playersByElement.get(W);if(rr){let wr=rr.indexOf(Ye);wr>=0&&rr.splice(wr,1)}}),this.players.push(Ye),Zn.push(Ye),Ye}deregister(W){delete this._triggers[W],this._engine.statesByElement.forEach((K,gt)=>{delete K[W]}),this._elementListeners.forEach((K,gt)=>{this._elementListeners.set(gt,K.filter(Qt=>Qt.name!=W))})}clearElementCache(W){this._engine.statesByElement.delete(W),this._elementListeners.delete(W);const K=this._engine.playersByElement.get(W);K&&(K.forEach(gt=>gt.destroy()),this._engine.playersByElement.delete(W))}_signalRemovalForInnerTriggers(W,K){const gt=this._engine.driver.query(W,Mt,!0);gt.forEach(Qt=>{if(Qt[zn])return;const be=this._engine.fetchNamespacesByElement(Qt);be.size?be.forEach(Ye=>Ye.triggerLeaveAnimation(Qt,K,!1,!0)):this.clearElementCache(Qt)}),this._engine.afterFlushAnimationsDone(()=>gt.forEach(Qt=>this.clearElementCache(Qt)))}triggerLeaveAnimation(W,K,gt,Qt){const be=this._engine.statesByElement.get(W);if(be){const Ye=[];if(Object.keys(be).forEach(ti=>{if(this._triggers[ti]){const vi=this.trigger(W,ti,Fn,Qt);vi&&Ye.push(vi)}}),Ye.length)return this._engine.markElementAsRemoved(this.id,W,!0,K),gt&&r(Ye).onDone(()=>this._engine.processLeaveNode(W)),!0}return!1}prepareLeaveAnimationListeners(W){const K=this._elementListeners.get(W),gt=this._engine.statesByElement.get(W);if(K&&gt){const Qt=new Set;K.forEach(be=>{const Ye=be.name;if(Qt.has(Ye))return;Qt.add(Ye);const vi=this._triggers[Ye].fallbackTransition,Bi=gt[Ye]||Ao,un=new nr(Fn),En=new _o(this.id,Ye,W);this._engine.totalQueuedPlayers++,this._queue.push({element:W,triggerName:Ye,transition:vi,fromState:Bi,toState:un,player:En,isFallbackTransition:!0})})}}removeNode(W,K){const gt=this._engine;if(W.childElementCount&&this._signalRemovalForInnerTriggers(W,K),this.triggerLeaveAnimation(W,K,!0))return;let Qt=!1;if(gt.totalAnimations){const be=gt.players.length?gt.playersByQueriedElement.get(W):[];if(be&&be.length)Qt=!0;else{let Ye=W;for(;Ye=Ye.parentNode;)if(gt.statesByElement.get(Ye)){Qt=!0;break}}}if(this.prepareLeaveAnimationListeners(W),Qt)gt.markElementAsRemoved(this.id,W,!1,K);else{const be=W[zn];(!be||be===Yi)&&(gt.afterFlush(()=>this.clearElementCache(W)),gt.destroyInnerAnimations(W),gt._onRemovalComplete(W,K))}}insertNode(W,K){Ro(W,this._hostClassName)}drainQueuedTransitions(W){const K=[];return this._queue.forEach(gt=>{const Qt=gt.player;if(Qt.destroyed)return;const be=gt.element,Ye=this._elementListeners.get(be);Ye&&Ye.forEach(ti=>{if(ti.name==gt.triggerName){const vi=x(be,gt.triggerName,gt.fromState.value,gt.toState.value);vi._data=W,u(gt.player,ti.phase,vi,ti.callback)}}),Qt.markedForDestroy?this._engine.afterFlush(()=>{Qt.destroy()}):K.push(gt)}),this._queue=[],K.sort((gt,Qt)=>{const be=gt.transition.ast.depCount,Ye=Qt.transition.ast.depCount;return 0==be||0==Ye?be-Ye:this._engine.driver.containsElement(gt.element,Qt.element)?1:-1})}destroy(W){this.players.forEach(K=>K.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,W)}elementContainsData(W){let K=!1;return this._elementListeners.has(W)&&(K=!0),K=!!this._queue.find(gt=>gt.element===W)||K,K}}class ro{constructor(W,K,gt){this.bodyNode=W,this.driver=K,this._normalizer=gt,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(Qt,be)=>{}}_onRemovalComplete(W,K){this.onRemovalComplete(W,K)}get queuedPlayers(){const W=[];return this._namespaceList.forEach(K=>{K.players.forEach(gt=>{gt.queued&&W.push(gt)})}),W}createNamespace(W,K){const gt=new jo(W,K,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,K)?this._balanceNamespaceList(gt,K):(this.newHostElements.set(K,gt),this.collectEnterElement(K)),this._namespaceLookup[W]=gt}_balanceNamespaceList(W,K){const gt=this._namespaceList.length-1;if(gt>=0){let Qt=!1;for(let be=gt;be>=0;be--)if(this.driver.containsElement(this._namespaceList[be].hostElement,K)){this._namespaceList.splice(be+1,0,W),Qt=!0;break}Qt||this._namespaceList.splice(0,0,W)}else this._namespaceList.push(W);return this.namespacesByHostElement.set(K,W),W}register(W,K){let gt=this._namespaceLookup[W];return gt||(gt=this.createNamespace(W,K)),gt}registerTrigger(W,K,gt){let Qt=this._namespaceLookup[W];Qt&&Qt.register(K,gt)&&this.totalAnimations++}destroy(W,K){if(!W)return;const gt=this._fetchNamespace(W);this.afterFlush(()=>{this.namespacesByHostElement.delete(gt.hostElement),delete this._namespaceLookup[W];const Qt=this._namespaceList.indexOf(gt);Qt>=0&&this._namespaceList.splice(Qt,1)}),this.afterFlushAnimationsDone(()=>gt.destroy(K))}_fetchNamespace(W){return this._namespaceLookup[W]}fetchNamespacesByElement(W){const K=new Set,gt=this.statesByElement.get(W);if(gt){const Qt=Object.keys(gt);for(let be=0;be<Qt.length;be++){const Ye=gt[Qt[be]].namespaceId;if(Ye){const ti=this._fetchNamespace(Ye);ti&&K.add(ti)}}}return K}trigger(W,K,gt,Qt){if(Yo(K)){const be=this._fetchNamespace(W);if(be)return be.trigger(K,gt,Qt),!0}return!1}insertNode(W,K,gt,Qt){if(!Yo(K))return;const be=K[zn];if(be&&be.setForRemoval){be.setForRemoval=!1,be.setForMove=!0;const Ye=this.collectedLeaveElements.indexOf(K);Ye>=0&&this.collectedLeaveElements.splice(Ye,1)}if(W){const Ye=this._fetchNamespace(W);Ye&&Ye.insertNode(K,gt)}Qt&&this.collectEnterElement(K)}collectEnterElement(W){this.collectedEnterElements.push(W)}markElementAsDisabled(W,K){K?this.disabledNodes.has(W)||(this.disabledNodes.add(W),Ro(W,Gn)):this.disabledNodes.has(W)&&(this.disabledNodes.delete(W),ns(W,Gn))}removeNode(W,K,gt,Qt){if(Yo(K)){const be=W?this._fetchNamespace(W):null;if(be?be.removeNode(K,Qt):this.markElementAsRemoved(W,K,!1,Qt),gt){const Ye=this.namespacesByHostElement.get(K);Ye&&Ye.id!==W&&Ye.removeNode(K,Qt)}}else this._onRemovalComplete(K,Qt)}markElementAsRemoved(W,K,gt,Qt){this.collectedLeaveElements.push(K),K[zn]={namespaceId:W,setForRemoval:Qt,hasAnimation:gt,removedBeforeQueried:!1}}listen(W,K,gt,Qt,be){return Yo(K)?this._fetchNamespace(W).listen(K,gt,Qt,be):()=>{}}_buildInstruction(W,K,gt,Qt,be){return W.transition.build(this.driver,W.element,W.fromState.value,W.toState.value,gt,Qt,W.fromState.options,W.toState.options,K,be)}destroyInnerAnimations(W){let K=this.driver.query(W,Mt,!0);K.forEach(gt=>this.destroyActiveAnimationsForElement(gt)),0!=this.playersByQueriedElement.size&&(K=this.driver.query(W,de,!0),K.forEach(gt=>this.finishActiveQueriedAnimationOnElement(gt)))}destroyActiveAnimationsForElement(W){const K=this.playersByElement.get(W);K&&K.forEach(gt=>{gt.queued?gt.markedForDestroy=!0:gt.destroy()})}finishActiveQueriedAnimationOnElement(W){const K=this.playersByQueriedElement.get(W);K&&K.forEach(gt=>gt.finish())}whenRenderingDone(){return new Promise(W=>{if(this.players.length)return r(this.players).onDone(()=>W());W()})}processLeaveNode(W){var K;const gt=W[zn];if(gt&&gt.setForRemoval){if(W[zn]=Yi,gt.namespaceId){this.destroyInnerAnimations(W);const Qt=this._fetchNamespace(gt.namespaceId);Qt&&Qt.clearElementCache(W)}this._onRemovalComplete(W,gt.setForRemoval)}(null===(K=W.classList)||void 0===K?void 0:K.contains(Gn))&&this.markElementAsDisabled(W,!1),this.driver.query(W,".ng-animate-disabled",!0).forEach(Qt=>{this.markElementAsDisabled(Qt,!1)})}flush(W=-1){let K=[];if(this.newHostElements.size&&(this.newHostElements.forEach((gt,Qt)=>this._balanceNamespaceList(gt,Qt)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let gt=0;gt<this.collectedEnterElements.length;gt++)Ro(this.collectedEnterElements[gt],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const gt=[];try{K=this._flushAnimations(gt,W)}finally{for(let Qt=0;Qt<gt.length;Qt++)gt[Qt]()}}else for(let gt=0;gt<this.collectedLeaveElements.length;gt++)this.processLeaveNode(this.collectedLeaveElements[gt]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(gt=>gt()),this._flushFns=[],this._whenQuietFns.length){const gt=this._whenQuietFns;this._whenQuietFns=[],K.length?r(K).onDone(()=>{gt.forEach(Qt=>Qt())}):gt.forEach(Qt=>Qt())}}reportError(W){throw new Error(`Unable to process animations due to the following failed trigger transitions\n ${W.join("\n")}`)}_flushAnimations(W,K){const gt=new Lt,Qt=[],be=new Map,Ye=[],ti=new Map,vi=new Map,Bi=new Map,un=new Set;this.disabledNodes.forEach(Dn=>{un.add(Dn);const On=this.driver.query(Dn,".ng-animate-queued",!0);for(let or=0;or<On.length;or++)un.add(On[or])});const En=this.bodyNode,Zn=Array.from(this.statesByElement.keys()),Qn=Bo(Zn,this.collectedEnterElements),Ln=new Map;let er=0;Qn.forEach((Dn,On)=>{const or=ht+er++;Ln.set(On,or),Dn.forEach(cr=>Ro(cr,or))});const rr=[],wr=new Set,Yr=new Set;for(let Dn=0;Dn<this.collectedLeaveElements.length;Dn++){const On=this.collectedLeaveElements[Dn],or=On[zn];or&&or.setForRemoval&&(rr.push(On),wr.add(On),or.hasAnimation?this.driver.query(On,".ng-star-inserted",!0).forEach(cr=>wr.add(cr)):Yr.add(On))}const oo=new Map,ko=Bo(Zn,Array.from(wr));ko.forEach((Dn,On)=>{const or=nt+er++;oo.set(On,or),Dn.forEach(cr=>Ro(cr,or))}),W.push(()=>{Qn.forEach((Dn,On)=>{const or=Ln.get(On);Dn.forEach(cr=>ns(cr,or))}),ko.forEach((Dn,On)=>{const or=oo.get(On);Dn.forEach(cr=>ns(cr,or))}),rr.forEach(Dn=>{this.processLeaveNode(Dn)})});const Ba=[],Gs=[];for(let Dn=this._namespaceList.length-1;Dn>=0;Dn--)this._namespaceList[Dn].drainQueuedTransitions(K).forEach(or=>{const cr=or.player,Er=or.element;if(Ba.push(cr),this.collectedEnterElements.length){const Ur=Er[zn];if(Ur&&Ur.setForMove)return void cr.destroy()}const es=!En||!this.driver.containsElement(En,Er),Mr=oo.get(Er),ta=Ln.get(Er),Co=this._buildInstruction(or,gt,ta,Mr,es);if(Co.errors&&Co.errors.length)return void Gs.push(Co);if(es)return cr.onStart(()=>Te(Er,Co.fromStyles)),cr.onDestroy(()=>Bt(Er,Co.toStyles)),void Qt.push(cr);if(or.isFallbackTransition)return cr.onStart(()=>Te(Er,Co.fromStyles)),cr.onDestroy(()=>Bt(Er,Co.toStyles)),void Qt.push(cr);const yl=[];Co.timelines.forEach(Ur=>{Ur.stretchStartingKeyframe=!0,this.disabledNodes.has(Ur.element)||yl.push(Ur)}),Co.timelines=yl,gt.append(Er,Co.timelines),Ye.push({instruction:Co,player:cr,element:Er}),Co.queriedElements.forEach(Ur=>B(ti,Ur,[]).push(cr)),Co.preStyleProps.forEach((Ur,ca)=>{const _s=Object.keys(Ur);if(_s.length){let zs=vi.get(ca);zs||vi.set(ca,zs=new Set),_s.forEach(As=>zs.add(As))}}),Co.postStyleProps.forEach((Ur,ca)=>{const _s=Object.keys(Ur);let zs=Bi.get(ca);zs||Bi.set(ca,zs=new Set),_s.forEach(As=>zs.add(As))})});if(Gs.length){const Dn=[];Gs.forEach(On=>{Dn.push(`@${On.triggerName} has failed due to:\n`),On.errors.forEach(or=>Dn.push(`- ${or}\n`))}),Ba.forEach(On=>On.destroy()),this.reportError(Dn)}const To=new Map,Is=new Map;Ye.forEach(Dn=>{const On=Dn.element;gt.has(On)&&(Is.set(On,On),this._beforeAnimationBuild(Dn.player.namespaceId,Dn.instruction,To))}),Qt.forEach(Dn=>{const On=Dn.element;this._getPreviousPlayers(On,!1,Dn.namespaceId,Dn.triggerName,null).forEach(cr=>{B(To,On,[]).push(cr),cr.destroy()})});const rs=rr.filter(Dn=>Qo(Dn,vi,Bi)),Ms=new Map;ws(Ms,this.driver,Yr,Bi,e.l3).forEach(Dn=>{Qo(Dn,vi,Bi)&&rs.push(Dn)});const Da=new Map;Qn.forEach((Dn,On)=>{ws(Da,this.driver,new Set(Dn),vi,e.k1)}),rs.forEach(Dn=>{const On=Ms.get(Dn),or=Da.get(Dn);Ms.set(Dn,Object.assign(Object.assign({},On),or))});const Ws=[],co=[],Ja={};Ye.forEach(Dn=>{const{element:On,player:or,instruction:cr}=Dn;if(gt.has(On)){if(un.has(On))return or.onDestroy(()=>Bt(On,cr.toStyles)),or.disabled=!0,or.overrideTotalTime(cr.totalTime),void Qt.push(or);let Er=Ja;if(Is.size>1){let Mr=On;const ta=[];for(;Mr=Mr.parentNode;){const Co=Is.get(Mr);if(Co){Er=Co;break}ta.push(Mr)}ta.forEach(Co=>Is.set(Co,Er))}const es=this._buildAnimation(or.namespaceId,cr,To,be,Da,Ms);if(or.setRealPlayer(es),Er===Ja)Ws.push(or);else{const Mr=this.playersByElement.get(Er);Mr&&Mr.length&&(or.parentPlayer=r(Mr)),Qt.push(or)}}else Te(On,cr.fromStyles),or.onDestroy(()=>Bt(On,cr.toStyles)),co.push(or),un.has(On)&&Qt.push(or)}),co.forEach(Dn=>{const On=be.get(Dn.element);if(On&&On.length){const or=r(On);Dn.setRealPlayer(or)}}),Qt.forEach(Dn=>{Dn.parentPlayer?Dn.syncPlayerEvents(Dn.parentPlayer):Dn.destroy()});for(let Dn=0;Dn<rr.length;Dn++){const On=rr[Dn],or=On[zn];if(ns(On,nt),or&&or.hasAnimation)continue;let cr=[];if(ti.size){let es=ti.get(On);es&&es.length&&cr.push(...es);let Mr=this.driver.query(On,de,!0);for(let ta=0;ta<Mr.length;ta++){let Co=ti.get(Mr[ta]);Co&&Co.length&&cr.push(...Co)}}const Er=cr.filter(es=>!es.destroyed);Er.length?Ho(this,On,Er):this.processLeaveNode(On)}return rr.length=0,Ws.forEach(Dn=>{this.players.push(Dn),Dn.onDone(()=>{Dn.destroy();const On=this.players.indexOf(Dn);this.players.splice(On,1)}),Dn.play()}),Ws}elementContainsData(W,K){let gt=!1;const Qt=K[zn];return Qt&&Qt.setForRemoval&&(gt=!0),this.playersByElement.has(K)&&(gt=!0),this.playersByQueriedElement.has(K)&&(gt=!0),this.statesByElement.has(K)&&(gt=!0),this._fetchNamespace(W).elementContainsData(K)||gt}afterFlush(W){this._flushFns.push(W)}afterFlushAnimationsDone(W){this._whenQuietFns.push(W)}_getPreviousPlayers(W,K,gt,Qt,be){let Ye=[];if(K){const ti=this.playersByQueriedElement.get(W);ti&&(Ye=ti)}else{const ti=this.playersByElement.get(W);if(ti){const vi=!be||be==Fn;ti.forEach(Bi=>{Bi.queued||!vi&&Bi.triggerName!=Qt||Ye.push(Bi)})}}return(gt||Qt)&&(Ye=Ye.filter(ti=>!(gt&&gt!=ti.namespaceId||Qt&&Qt!=ti.triggerName))),Ye}_beforeAnimationBuild(W,K,gt){const be=K.element,Ye=K.isRemovalTransition?void 0:W,ti=K.isRemovalTransition?void 0:K.triggerName;for(const vi of K.timelines){const Bi=vi.element,un=Bi!==be,En=B(gt,Bi,[]);this._getPreviousPlayers(Bi,un,Ye,ti,K.toState).forEach(Qn=>{const Ln=Qn.getRealPlayer();Ln.beforeDestroy&&Ln.beforeDestroy(),Qn.destroy(),En.push(Qn)})}Te(be,K.fromStyles)}_buildAnimation(W,K,gt,Qt,be,Ye){const ti=K.triggerName,vi=K.element,Bi=[],un=new Set,En=new Set,Zn=K.timelines.map(Ln=>{const er=Ln.element;un.add(er);const rr=er[zn];if(rr&&rr.removedBeforeQueried)return new e.ZN(Ln.duration,Ln.delay);const wr=er!==vi,Yr=function(Gt){const W=[];return Xa(Gt,W),W}((gt.get(er)||Ji).map(To=>To.getRealPlayer())).filter(To=>!!To.element&&To.element===er),oo=be.get(er),ko=Ye.get(er),Ba=s(0,this._normalizer,0,Ln.keyframes,oo,ko),Gs=this._buildPlayer(Ln,Ba,Yr);if(Ln.subTimeline&&Qt&&En.add(er),wr){const To=new _o(W,ti,er);To.setRealPlayer(Gs),Bi.push(To)}return Gs});Bi.forEach(Ln=>{B(this.playersByQueriedElement,Ln.element,[]).push(Ln),Ln.onDone(()=>function(Gt,W,K){let gt;if(Gt instanceof Map){if(gt=Gt.get(W),gt){if(gt.length){const Qt=gt.indexOf(K);gt.splice(Qt,1)}0==gt.length&&Gt.delete(W)}}else if(gt=Gt[W],gt){if(gt.length){const Qt=gt.indexOf(K);gt.splice(Qt,1)}0==gt.length&&delete Gt[W]}return gt}(this.playersByQueriedElement,Ln.element,Ln))}),un.forEach(Ln=>Ro(Ln,Nt));const Qn=r(Zn);return Qn.onDestroy(()=>{un.forEach(Ln=>ns(Ln,Nt)),Bt(vi,K.toStyles)}),En.forEach(Ln=>{B(Qt,Ln,[]).push(Qn)}),Qn}_buildPlayer(W,K,gt){return K.length>0?this.driver.animate(W.element,K,W.duration,W.delay,W.easing,gt):new e.ZN(W.duration,W.delay)}}class _o{constructor(W,K,gt){this.namespaceId=W,this.triggerName=K,this.element=gt,this._player=new e.ZN,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(W){this._containsRealPlayer||(this._player=W,Object.keys(this._queuedCallbacks).forEach(K=>{this._queuedCallbacks[K].forEach(gt=>u(W,K,void 0,gt))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(W.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(W){this.totalTime=W}syncPlayerEvents(W){const K=this._player;K.triggerCallback&&W.onStart(()=>K.triggerCallback("start")),W.onDone(()=>this.finish()),W.onDestroy(()=>this.destroy())}_queueEvent(W,K){B(this._queuedCallbacks,W,[]).push(K)}onDone(W){this.queued&&this._queueEvent("done",W),this._player.onDone(W)}onStart(W){this.queued&&this._queueEvent("start",W),this._player.onStart(W)}onDestroy(W){this.queued&&this._queueEvent("destroy",W),this._player.onDestroy(W)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(W){this.queued||this._player.setPosition(W)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(W){const K=this._player;K.triggerCallback&&K.triggerCallback(W)}}function Yo(Gt){return Gt&&1===Gt.nodeType}function Ss(Gt,W){const K=Gt.style.display;return Gt.style.display=null!=W?W:"none",K}function ws(Gt,W,K,gt,Qt){const be=[];K.forEach(vi=>be.push(Ss(vi)));const Ye=[];gt.forEach((vi,Bi)=>{const un={};vi.forEach(En=>{const Zn=un[En]=W.computeStyle(Bi,En,Qt);(!Zn||0==Zn.length)&&(Bi[zn]=Kn,Ye.push(Bi))}),Gt.set(Bi,un)});let ti=0;return K.forEach(vi=>Ss(vi,be[ti++])),Ye}function Bo(Gt,W){const K=new Map;if(Gt.forEach(ti=>K.set(ti,[])),0==W.length)return K;const Qt=new Set(W),be=new Map;function Ye(ti){if(!ti)return 1;let vi=be.get(ti);if(vi)return vi;const Bi=ti.parentNode;return vi=K.has(Bi)?Bi:Qt.has(Bi)?1:Ye(Bi),be.set(ti,vi),vi}return W.forEach(ti=>{const vi=Ye(ti);1!==vi&&K.get(vi).push(ti)}),K}function Ro(Gt,W){var K;null===(K=Gt.classList)||void 0===K||K.add(W)}function ns(Gt,W){var K;null===(K=Gt.classList)||void 0===K||K.remove(W)}function Ho(Gt,W,K){r(K).onDone(()=>Gt.processLeaveNode(W))}function Xa(Gt,W){for(let K=0;K<Gt.length;K++){const gt=Gt[K];gt instanceof e.ZE?Xa(gt.players,W):W.push(gt)}}function Qo(Gt,W,K){const gt=K.get(Gt);if(!gt)return!1;let Qt=W.get(Gt);return Qt?gt.forEach(be=>Qt.add(be)):W.set(Gt,gt),K.delete(Gt),!0}class ga{constructor(W,K,gt){this.bodyNode=W,this._driver=K,this._normalizer=gt,this._triggerCache={},this.onRemovalComplete=(Qt,be)=>{},this._transitionEngine=new ro(W,K,gt),this._timelineEngine=new Ir(W,K,gt),this._transitionEngine.onRemovalComplete=(Qt,be)=>this.onRemovalComplete(Qt,be)}registerTrigger(W,K,gt,Qt,be){const Ye=W+"-"+Qt;let ti=this._triggerCache[Ye];if(!ti){const vi=[],Bi=Zi(this._driver,be,vi);if(vi.length)throw new Error(`The animation trigger "${Qt}" has failed to build due to the following errors:\n - ${vi.join("\n - ")}`);ti=function(Gt,W,K){return new Br(Gt,W,K)}(Qt,Bi,this._normalizer),this._triggerCache[Ye]=ti}this._transitionEngine.registerTrigger(K,Qt,ti)}register(W,K){this._transitionEngine.register(W,K)}destroy(W,K){this._transitionEngine.destroy(W,K)}onInsert(W,K,gt,Qt){this._transitionEngine.insertNode(W,K,gt,Qt)}onRemove(W,K,gt,Qt){this._transitionEngine.removeNode(W,K,Qt||!1,gt)}disableAnimations(W,K){this._transitionEngine.markElementAsDisabled(W,K)}process(W,K,gt,Qt){if("@"==gt.charAt(0)){const[be,Ye]=Q(gt);this._timelineEngine.command(be,K,Ye,Qt)}else this._transitionEngine.trigger(W,K,gt,Qt)}listen(W,K,gt,Qt,be){if("@"==gt.charAt(0)){const[Ye,ti]=Q(gt);return this._timelineEngine.listen(Ye,K,ti,be)}return this._transitionEngine.listen(W,K,gt,Qt,be)}flush(W=-1){this._transitionEngine.flush(W)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}function _l(Gt,W){let K=null,gt=null;return Array.isArray(W)&&W.length?(K=Pa(W[0]),W.length>1&&(gt=Pa(W[W.length-1]))):W&&(K=Pa(W)),K||gt?new Fs(Gt,K,gt):null}let Fs=(()=>{class Gt{constructor(K,gt,Qt){this._element=K,this._startStyles=gt,this._endStyles=Qt,this._state=0;let be=Gt.initialStylesByElement.get(K);be||Gt.initialStylesByElement.set(K,be={}),this._initialStyles=be}start(){this._state<1&&(this._startStyles&&Bt(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Bt(this._element,this._initialStyles),this._endStyles&&(Bt(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(Gt.initialStylesByElement.delete(this._element),this._startStyles&&(Te(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Te(this._element,this._endStyles),this._endStyles=null),Bt(this._element,this._initialStyles),this._state=3)}}return Gt.initialStylesByElement=new WeakMap,Gt})();function Pa(Gt){let W=null;const K=Object.keys(Gt);for(let gt=0;gt<K.length;gt++){const Qt=K[gt];Bs(Qt)&&(W=W||{},W[Qt]=Gt[Qt])}return W}function Bs(Gt){return"display"===Gt||"position"===Gt}const al="animation",ma="animationend";class Oo{constructor(W,K,gt,Qt,be,Ye,ti){this._element=W,this._name=K,this._duration=gt,this._delay=Qt,this._easing=be,this._fillMode=Ye,this._onDoneFn=ti,this._finished=!1,this._destroyed=!1,this._startTime=0,this._position=0,this._eventFn=vi=>this._handleCallback(vi)}apply(){(function(Gt,W){const K=xo(Gt,"").trim();let gt=0;K.length&&(function(Gt,W){let K=0;for(let gt=0;gt<Gt.length;gt++)","===Gt.charAt(gt)&&K++;return K}(K)+1,W=`${K}, ${W}`),zo(Gt,"",W)})(this._element,`${this._duration}ms ${this._easing} ${this._delay}ms 1 normal ${this._fillMode} ${this._name}`),Rs(this._element,this._eventFn,!1),this._startTime=Date.now()}pause(){zr(this._element,this._name,"paused")}resume(){zr(this._element,this._name,"running")}setPosition(W){const K=Hs(this._element,this._name);this._position=W*this._duration,zo(this._element,"Delay",`-${this._position}ms`,K)}getPosition(){return this._position}_handleCallback(W){const K=W._ngTestManualTimestamp||Date.now(),gt=1e3*parseFloat(W.elapsedTime.toFixed(3));W.animationName==this._name&&Math.max(K-this._startTime,0)>=this._delay&&gt>=this._duration&&this.finish()}finish(){this._finished||(this._finished=!0,this._onDoneFn(),Rs(this._element,this._eventFn,!0))}destroy(){this._destroyed||(this._destroyed=!0,this.finish(),function(Gt,W){const gt=xo(Gt,"").split(","),Qt=Xo(gt,W);Qt>=0&&(gt.splice(Qt,1),zo(Gt,"",gt.join(",")))}(this._element,this._name))}}function zr(Gt,W,K){zo(Gt,"PlayState",K,Hs(Gt,W))}function Hs(Gt,W){const K=xo(Gt,"");return K.indexOf(",")>0?Xo(K.split(","),W):Xo([K],W)}function Xo(Gt,W){for(let K=0;K<Gt.length;K++)if(Gt[K].indexOf(W)>=0)return K;return-1}function Rs(Gt,W,K){K?Gt.removeEventListener(ma,W):Gt.addEventListener(ma,W)}function zo(Gt,W,K,gt){const Qt=al+W;if(null!=gt){const be=Gt.style[Qt];if(be.length){const Ye=be.split(",");Ye[gt]=K,K=Ye.join(",")}}Gt.style[Qt]=K}function xo(Gt,W){return Gt.style[al+W]||""}class gs{constructor(W,K,gt,Qt,be,Ye,ti,vi){this.element=W,this.keyframes=K,this.animationName=gt,this._duration=Qt,this._delay=be,this._finalStyles=ti,this._specialStyles=vi,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this.currentSnapshot={},this._state=0,this.easing=Ye||"linear",this.totalTime=Qt+be,this._buildStyler()}onStart(W){this._onStartFns.push(W)}onDone(W){this._onDoneFns.push(W)}onDestroy(W){this._onDestroyFns.push(W)}destroy(){this.init(),!(this._state>=4)&&(this._state=4,this._styler.destroy(),this._flushStartFns(),this._flushDoneFns(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(W=>W()),this._onDestroyFns=[])}_flushDoneFns(){this._onDoneFns.forEach(W=>W()),this._onDoneFns=[]}_flushStartFns(){this._onStartFns.forEach(W=>W()),this._onStartFns=[]}finish(){this.init(),!(this._state>=3)&&(this._state=3,this._styler.finish(),this._flushStartFns(),this._specialStyles&&this._specialStyles.finish(),this._flushDoneFns())}setPosition(W){this._styler.setPosition(W)}getPosition(){return this._styler.getPosition()}hasStarted(){return this._state>=2}init(){this._state>=1||(this._state=1,this._styler.apply(),this._delay&&this._styler.pause())}play(){this.init(),this.hasStarted()||(this._flushStartFns(),this._state=2,this._specialStyles&&this._specialStyles.start()),this._styler.resume()}pause(){this.init(),this._styler.pause()}restart(){this.reset(),this.play()}reset(){this._state=0,this._styler.destroy(),this._buildStyler(),this._styler.apply()}_buildStyler(){this._styler=new Oo(this.element,this.animationName,this._duration,this._delay,this.easing,"forwards",()=>this.finish())}triggerCallback(W){const K="start"==W?this._onStartFns:this._onDoneFns;K.forEach(gt=>gt()),K.length=0}beforeDestroy(){this.init();const W={};if(this.hasStarted()){const K=this._state>=3;Object.keys(this._finalStyles).forEach(gt=>{"offset"!=gt&&(W[gt]=K?this._finalStyles[gt]:ye(this.element,gt))})}this.currentSnapshot=W}}class Lr extends e.ZN{constructor(W,K){super(),this.element=W,this._startingStyles={},this.__initialized=!1,this._styles=ot(K)}init(){this.__initialized||!this._startingStyles||(this.__initialized=!0,Object.keys(this._styles).forEach(W=>{this._startingStyles[W]=this.element.style[W]}),super.init())}play(){!this._startingStyles||(this.init(),Object.keys(this._styles).forEach(W=>this.element.style.setProperty(W,this._styles[W])),super.play())}destroy(){!this._startingStyles||(Object.keys(this._startingStyles).forEach(W=>{const K=this._startingStyles[W];K?this.element.style.setProperty(W,K):this.element.style.removeProperty(W)}),this._startingStyles=null,super.destroy())}}class la{constructor(){this._count=0}validateStyleProperty(W){return Wt(W)}matchesElement(W,K){return!1}containsElement(W,K){return Ct(W,K)}query(W,K,gt){return yt(W,K,gt)}computeStyle(W,K,gt){return window.getComputedStyle(W)[K]}buildKeyframeElement(W,K,gt){gt=gt.map(ti=>ot(ti));let Qt=`@keyframes ${K} {\n`,be="";gt.forEach(ti=>{be=" ";const vi=parseFloat(ti.offset);Qt+=`${be}${100*vi}% {\n`,be+=" ",Object.keys(ti).forEach(Bi=>{const un=ti[Bi];switch(Bi){case"offset":return;case"easing":return void(un&&(Qt+=`${be}animation-timing-function: ${un};\n`));default:return void(Qt+=`${be}${Bi}: ${un};\n`)}}),Qt+=`${be}}\n`}),Qt+="}\n";const Ye=document.createElement("style");return Ye.textContent=Qt,Ye}animate(W,K,gt,Qt,be,Ye=[],ti){const vi=Ye.filter(rr=>rr instanceof gs),Bi={};ke(gt,Qt)&&vi.forEach(rr=>{let wr=rr.currentSnapshot;Object.keys(wr).forEach(Yr=>Bi[Yr]=wr[Yr])});const un=function(Gt){let W={};return Gt&&(Array.isArray(Gt)?Gt:[Gt]).forEach(gt=>{Object.keys(gt).forEach(Qt=>{"offset"==Qt||"easing"==Qt||(W[Qt]=gt[Qt])})}),W}(K=ne(W,K,Bi));if(0==gt)return new Lr(W,un);const En="gen_css_kf_"+this._count++,Zn=this.buildKeyframeElement(W,En,K);(function(Gt){var W;const K=null===(W=Gt.getRootNode)||void 0===W?void 0:W.call(Gt);return"undefined"!=typeof ShadowRoot&&K instanceof ShadowRoot?K:document.head})(W).appendChild(Zn);const Ln=_l(W,K),er=new gs(W,K,En,gt,Qt,be,un,Ln);return er.onDestroy(()=>{var Gt;(Gt=Zn).parentNode.removeChild(Gt)}),er}}class Nr{constructor(W,K,gt,Qt){this.element=W,this.keyframes=K,this.options=gt,this._specialStyles=Qt,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=gt.duration,this._delay=gt.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(W=>W()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const W=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,W,this.options),this._finalKeyframe=W.length?W[W.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(W,K,gt){return W.animate(K,gt)}onStart(W){this._onStartFns.push(W)}onDone(W){this._onDoneFns.push(W)}onDestroy(W){this._onDestroyFns.push(W)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(W=>W()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(W=>W()),this._onDestroyFns=[])}setPosition(W){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=W*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const W={};if(this.hasStarted()){const K=this._finalKeyframe;Object.keys(K).forEach(gt=>{"offset"!=gt&&(W[gt]=this._finished?K[gt]:ye(this.element,gt))})}this.currentSnapshot=W}triggerCallback(W){const K="start"==W?this._onStartFns:this._onDoneFns;K.forEach(gt=>gt()),K.length=0}}class xn{constructor(){this._isNativeImpl=/\{\s*\[native\s+code\]\s*\}/.test(Ot().toString()),this._cssKeyframesDriver=new la}validateStyleProperty(W){return Wt(W)}matchesElement(W,K){return!1}containsElement(W,K){return Ct(W,K)}query(W,K,gt){return yt(W,K,gt)}computeStyle(W,K,gt){return window.getComputedStyle(W)[K]}overrideWebAnimationsSupport(W){this._isNativeImpl=W}animate(W,K,gt,Qt,be,Ye=[],ti){if(!ti&&!this._isNativeImpl)return this._cssKeyframesDriver.animate(W,K,gt,Qt,be,Ye);const un={duration:gt,delay:Qt,fill:0==Qt?"both":"forwards"};be&&(un.easing=be);const En={},Zn=Ye.filter(Ln=>Ln instanceof Nr);ke(gt,Qt)&&Zn.forEach(Ln=>{let er=Ln.currentSnapshot;Object.keys(er).forEach(rr=>En[rr]=er[rr])});const Qn=_l(W,K=ne(W,K=K.map(Ln=>Ze(Ln,!1)),En));return new Nr(W,K,un,Qn)}}function Ot(){return t()&&Element.prototype.animate||{}}var Z=m(69808);let V=(()=>{class Gt extends e._j{constructor(K,gt){super(),this._nextAnimationId=0,this._renderer=K.createRenderer(gt.body,{id:"0",encapsulation:C.ifc.None,styles:[],data:{animation:[]}})}build(K){const gt=this._nextAnimationId.toString();this._nextAnimationId++;const Qt=Array.isArray(K)?(0,e.vP)(K):K;return Fe(this._renderer,null,gt,"register",[Qt]),new z(gt,this._renderer)}}return Gt.\u0275fac=function(K){return new(K||Gt)(C.LFG(C.FYo),C.LFG(Z.K0))},Gt.\u0275prov=C.Yz7({token:Gt,factory:Gt.\u0275fac}),Gt})();class z extends e.LC{constructor(W,K){super(),this._id=W,this._renderer=K}create(W,K){return new It(this._id,W,K||{},this._renderer)}}class It{constructor(W,K,gt,Qt){this.id=W,this.element=K,this._renderer=Qt,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",gt)}_listen(W,K){return this._renderer.listen(this.element,`@@${this.id}:${W}`,K)}_command(W,...K){return Fe(this._renderer,this.element,this.id,W,K)}onDone(W){this._listen("done",W)}onStart(W){this._listen("start",W)}onDestroy(W){this._listen("destroy",W)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(W){this._command("setPosition",W)}getPosition(){var W,K;return null!==(K=null===(W=this._renderer.engine.players[+this.id])||void 0===W?void 0:W.getPosition())&&void 0!==K?K:0}}function Fe(Gt,W,K,gt,Qt){return Gt.setProperty(W,`@@${K}:${gt}`,Qt)}const cn="@.disabled";let jn=(()=>{class Gt{constructor(K,gt,Qt){this.delegate=K,this.engine=gt,this._zone=Qt,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),gt.onRemovalComplete=(be,Ye)=>{const ti=null==Ye?void 0:Ye.parentNode(be);ti&&Ye.removeChild(ti,be)}}createRenderer(K,gt){const be=this.delegate.createRenderer(K,gt);if(!(K&&gt&&gt.data&&gt.data.animation)){let un=this._rendererCache.get(be);return un||(un=new Cr("",be,this.engine),this._rendererCache.set(be,un)),un}const Ye=gt.id,ti=gt.id+"-"+this._currentId;this._currentId++,this.engine.register(ti,K);const vi=un=>{Array.isArray(un)?un.forEach(vi):this.engine.registerTrigger(Ye,ti,K,un.name,un)};return gt.data.animation.forEach(vi),new Hr(this,ti,be,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(K,gt,Qt){K>=0&&K<this._microtaskId?this._zone.run(()=>gt(Qt)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(be=>{const[Ye,ti]=be;Ye(ti)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([gt,Qt]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return Gt.\u0275fac=function(K){return new(K||Gt)(C.LFG(C.FYo),C.LFG(ga),C.LFG(C.R0b))},Gt.\u0275prov=C.Yz7({token:Gt,factory:Gt.\u0275fac}),Gt})();class Cr{constructor(W,K,gt){this.namespaceId=W,this.delegate=K,this.engine=gt,this.destroyNode=this.delegate.destroyNode?Qt=>K.destroyNode(Qt):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(W,K){return this.delegate.createElement(W,K)}createComment(W){return this.delegate.createComment(W)}createText(W){return this.delegate.createText(W)}appendChild(W,K){this.delegate.appendChild(W,K),this.engine.onInsert(this.namespaceId,K,W,!1)}insertBefore(W,K,gt,Qt=!0){this.delegate.insertBefore(W,K,gt),this.engine.onInsert(this.namespaceId,K,W,Qt)}removeChild(W,K,gt){this.engine.onRemove(this.namespaceId,K,this.delegate,gt)}selectRootElement(W,K){return this.delegate.selectRootElement(W,K)}parentNode(W){return this.delegate.parentNode(W)}nextSibling(W){return this.delegate.nextSibling(W)}setAttribute(W,K,gt,Qt){this.delegate.setAttribute(W,K,gt,Qt)}removeAttribute(W,K,gt){this.delegate.removeAttribute(W,K,gt)}addClass(W,K){this.delegate.addClass(W,K)}removeClass(W,K){this.delegate.removeClass(W,K)}setStyle(W,K,gt,Qt){this.delegate.setStyle(W,K,gt,Qt)}removeStyle(W,K,gt){this.delegate.removeStyle(W,K,gt)}setProperty(W,K,gt){"@"==K.charAt(0)&&K==cn?this.disableAnimations(W,!!gt):this.delegate.setProperty(W,K,gt)}setValue(W,K){this.delegate.setValue(W,K)}listen(W,K,gt){return this.delegate.listen(W,K,gt)}disableAnimations(W,K){this.engine.disableAnimations(W,K)}}class Hr extends Cr{constructor(W,K,gt,Qt){super(K,gt,Qt),this.factory=W,this.namespaceId=K}setProperty(W,K,gt){"@"==K.charAt(0)?"."==K.charAt(1)&&K==cn?this.disableAnimations(W,gt=void 0===gt||!!gt):this.engine.process(this.namespaceId,W,K.substr(1),gt):this.delegate.setProperty(W,K,gt)}listen(W,K,gt){if("@"==K.charAt(0)){const Qt=function(Gt){switch(Gt){case"body":return document.body;case"document":return document;case"window":return window;default:return Gt}}(W);let be=K.substr(1),Ye="";return"@"!=be.charAt(0)&&([be,Ye]=function(Gt){const W=Gt.indexOf(".");return[Gt.substring(0,W),Gt.substr(W+1)]}(be)),this.engine.listen(this.namespaceId,Qt,be,Ye,ti=>{this.factory.scheduleListenerCallback(ti._data||-1,gt,ti)})}return this.delegate.listen(W,K,gt)}}let hr=(()=>{class Gt extends ga{constructor(K,gt,Qt){super(K.body,gt,Qt)}ngOnDestroy(){this.flush()}}return Gt.\u0275fac=function(K){return new(K||Gt)(C.LFG(Z.K0),C.LFG(lt),C.LFG(Tr))},Gt.\u0275prov=C.Yz7({token:Gt,factory:Gt.\u0275fac}),Gt})();const Fa=new C.OlP("AnimationModuleType"),ts=[{provide:e._j,useClass:V},{provide:Tr,useFactory:function(){return new no}},{provide:ga,useClass:hr},{provide:C.FYo,useFactory:function(Gt,W,K){return new jn(Gt,W,K)},deps:[_.se,ga,C.R0b]}],ll=[{provide:lt,useFactory:function(){return"function"==typeof Ot()?new xn:new la}},{provide:Fa,useValue:"BrowserAnimations"},...ts],Vs=[{provide:lt,useClass:mt},{provide:Fa,useValue:"NoopAnimations"},...ts];let qs=(()=>{class Gt{static withConfig(K){return{ngModule:Gt,providers:K.disableAnimations?Vs:ll}}}return Gt.\u0275fac=function(K){return new(K||Gt)},Gt.\u0275mod=C.oAB({type:Gt}),Gt.\u0275inj=C.cJS({providers:ll,imports:[_.b2]}),Gt})()},22313:(U,$,m)=>{"use strict";m.d($,{b2:()=>hi,H7:()=>Wi,Dx:()=>ne,q6:()=>pe,se:()=>he});var C=m(69808),_=m(5e3);class e extends C.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class t extends e{static makeCurrent(){(0,C.HT)(new t)}onAndCancel(Je,xe,ui){return Je.addEventListener(xe,ui,!1),()=>{Je.removeEventListener(xe,ui,!1)}}dispatchEvent(Je,xe){Je.dispatchEvent(xe)}remove(Je){Je.parentNode&&Je.parentNode.removeChild(Je)}createElement(Je,xe){return(xe=xe||this.getDefaultDocument()).createElement(Je)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(Je){return Je.nodeType===Node.ELEMENT_NODE}isShadowRoot(Je){return Je instanceof DocumentFragment}getGlobalEventTarget(Je,xe){return"window"===xe?window:"document"===xe?Je:"body"===xe?Je.body:null}getBaseHref(Je){const xe=(n=n||document.querySelector("base"),n?n.getAttribute("href"):null);return null==xe?null:function(li){s=s||document.createElement("a"),s.setAttribute("href",li);const Je=s.pathname;return"/"===Je.charAt(0)?Je:`/${Je}`}(xe)}resetBaseElement(){n=null}getUserAgent(){return window.navigator.userAgent}getCookie(Je){return(0,C.Mx)(document.cookie,Je)}}let s,n=null;const y=new _.OlP("TRANSITION_ID"),B=[{provide:_.ip1,useFactory:function(li,Je,xe){return()=>{xe.get(_.CZH).donePromise.then(()=>{const ui=(0,C.q)(),ki=Je.querySelectorAll(`style[ng-transition="${li}"]`);for(let fn=0;fn<ki.length;fn++)ui.remove(ki[fn])})}},deps:[y,C.K0,_.zs3],multi:!0}];class Q{static init(){(0,_.VLi)(new Q)}addToWindow(Je){_.dqk.getAngularTestability=(ui,ki=!0)=>{const fn=Je.findTestabilityInTree(ui,ki);if(null==fn)throw new Error("Could not find testability for element.");return fn},_.dqk.getAllAngularTestabilities=()=>Je.getAllTestabilities(),_.dqk.getAllAngularRootElements=()=>Je.getAllRootElements(),_.dqk.frameworkStabilizers||(_.dqk.frameworkStabilizers=[]),_.dqk.frameworkStabilizers.push(ui=>{const ki=_.dqk.getAllAngularTestabilities();let fn=ki.length,An=!1;const ar=function(Tr){An=An||Tr,fn--,0==fn&&ui(An)};ki.forEach(function(Tr){Tr.whenStable(ar)})})}findTestabilityInTree(Je,xe,ui){if(null==xe)return null;const ki=Je.getTestability(xe);return null!=ki?ki:ui?(0,C.q)().isShadowRoot(xe)?this.findTestabilityInTree(Je,xe.host,!0):this.findTestabilityInTree(Je,xe.parentElement,!0):null}}let at=(()=>{class li{build(){return new XMLHttpRequest}}return li.\u0275fac=function(xe){return new(xe||li)},li.\u0275prov=_.Yz7({token:li,factory:li.\u0275fac}),li})();const rt=new _.OlP("EventManagerPlugins");let St=(()=>{class li{constructor(xe,ui){this._zone=ui,this._eventNameToPlugin=new Map,xe.forEach(ki=>ki.manager=this),this._plugins=xe.slice().reverse()}addEventListener(xe,ui,ki){return this._findPluginFor(ui).addEventListener(xe,ui,ki)}addGlobalEventListener(xe,ui,ki){return this._findPluginFor(ui).addGlobalEventListener(xe,ui,ki)}getZone(){return this._zone}_findPluginFor(xe){const ui=this._eventNameToPlugin.get(xe);if(ui)return ui;const ki=this._plugins;for(let fn=0;fn<ki.length;fn++){const An=ki[fn];if(An.supports(xe))return this._eventNameToPlugin.set(xe,An),An}throw new Error(`No event manager plugin found for event ${xe}`)}}return li.\u0275fac=function(xe){return new(xe||li)(_.LFG(rt),_.LFG(_.R0b))},li.\u0275prov=_.Yz7({token:li,factory:li.\u0275fac}),li})();class Ht{constructor(Je){this._doc=Je}addGlobalEventListener(Je,xe,ui){const ki=(0,C.q)().getGlobalEventTarget(this._doc,Je);if(!ki)throw new Error(`Unsupported event target ${ki} for event ${xe}`);return this.addEventListener(ki,xe,ui)}}let vt=(()=>{class li{constructor(){this._stylesSet=new Set}addStyles(xe){const ui=new Set;xe.forEach(ki=>{this._stylesSet.has(ki)||(this._stylesSet.add(ki),ui.add(ki))}),this.onStylesAdded(ui)}onStylesAdded(xe){}getAllStyles(){return Array.from(this._stylesSet)}}return li.\u0275fac=function(xe){return new(xe||li)},li.\u0275prov=_.Yz7({token:li,factory:li.\u0275fac}),li})(),xt=(()=>{class li extends vt{constructor(xe){super(),this._doc=xe,this._hostNodes=new Map,this._hostNodes.set(xe.head,[])}_addStylesToHost(xe,ui,ki){xe.forEach(fn=>{const An=this._doc.createElement("style");An.textContent=fn,ki.push(ui.appendChild(An))})}addHost(xe){const ui=[];this._addStylesToHost(this._stylesSet,xe,ui),this._hostNodes.set(xe,ui)}removeHost(xe){const ui=this._hostNodes.get(xe);ui&&ui.forEach(Wt),this._hostNodes.delete(xe)}onStylesAdded(xe){this._hostNodes.forEach((ui,ki)=>{this._addStylesToHost(xe,ki,ui)})}ngOnDestroy(){this._hostNodes.forEach(xe=>xe.forEach(Wt))}}return li.\u0275fac=function(xe){return new(xe||li)(_.LFG(C.K0))},li.\u0275prov=_.Yz7({token:li,factory:li.\u0275fac}),li})();function Wt(li){(0,C.q)().remove(li)}const Jt={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},Ct=/%COMP%/g;function Et(li,Je,xe){for(let ui=0;ui<Je.length;ui++){let ki=Je[ui];Array.isArray(ki)?Et(li,ki,xe):(ki=ki.replace(Ct,li),xe.push(ki))}return xe}function ht(li){return Je=>{if("__ngUnwrap__"===Je)return li;!1===li(Je)&&(Je.preventDefault(),Je.returnValue=!1)}}let he=(()=>{class li{constructor(xe,ui,ki){this.eventManager=xe,this.sharedStylesHost=ui,this.appId=ki,this.rendererByCompId=new Map,this.defaultRenderer=new Mt(xe)}createRenderer(xe,ui){if(!xe||!ui)return this.defaultRenderer;switch(ui.encapsulation){case _.ifc.Emulated:{let ki=this.rendererByCompId.get(ui.id);return ki||(ki=new ve(this.eventManager,this.sharedStylesHost,ui,this.appId),this.rendererByCompId.set(ui.id,ki)),ki.applyToHost(xe),ki}case 1:case _.ifc.ShadowDom:return new ue(this.eventManager,this.sharedStylesHost,xe,ui);default:if(!this.rendererByCompId.has(ui.id)){const ki=Et(ui.id,ui.styles,[]);this.sharedStylesHost.addStyles(ki),this.rendererByCompId.set(ui.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return li.\u0275fac=function(xe){return new(xe||li)(_.LFG(St),_.LFG(xt),_.LFG(_.AFp))},li.\u0275prov=_.Yz7({token:li,factory:li.\u0275fac}),li})();class Mt{constructor(Je){this.eventManager=Je,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(Je,xe){return xe?document.createElementNS(Jt[xe]||xe,Je):document.createElement(Je)}createComment(Je){return document.createComment(Je)}createText(Je){return document.createTextNode(Je)}appendChild(Je,xe){Je.appendChild(xe)}insertBefore(Je,xe,ui){Je&&Je.insertBefore(xe,ui)}removeChild(Je,xe){Je&&Je.removeChild(xe)}selectRootElement(Je,xe){let ui="string"==typeof Je?document.querySelector(Je):Je;if(!ui)throw new Error(`The selector "${Je}" did not match any elements`);return xe||(ui.textContent=""),ui}parentNode(Je){return Je.parentNode}nextSibling(Je){return Je.nextSibling}setAttribute(Je,xe,ui,ki){if(ki){xe=ki+":"+xe;const fn=Jt[ki];fn?Je.setAttributeNS(fn,xe,ui):Je.setAttribute(xe,ui)}else Je.setAttribute(xe,ui)}removeAttribute(Je,xe,ui){if(ui){const ki=Jt[ui];ki?Je.removeAttributeNS(ki,xe):Je.removeAttribute(`${ui}:${xe}`)}else Je.removeAttribute(xe)}addClass(Je,xe){Je.classList.add(xe)}removeClass(Je,xe){Je.classList.remove(xe)}setStyle(Je,xe,ui,ki){ki&(_.JOm.DashCase|_.JOm.Important)?Je.style.setProperty(xe,ui,ki&_.JOm.Important?"important":""):Je.style[xe]=ui}removeStyle(Je,xe,ui){ui&_.JOm.DashCase?Je.style.removeProperty(xe):Je.style[xe]=""}setProperty(Je,xe,ui){Je[xe]=ui}setValue(Je,xe){Je.nodeValue=xe}listen(Je,xe,ui){return"string"==typeof Je?this.eventManager.addGlobalEventListener(Je,xe,ht(ui)):this.eventManager.addEventListener(Je,xe,ht(ui))}}class ve extends Mt{constructor(Je,xe,ui,ki){super(Je),this.component=ui;const fn=Et(ki+"-"+ui.id,ui.styles,[]);xe.addStyles(fn),this.contentAttr="_ngcontent-%COMP%".replace(Ct,ki+"-"+ui.id),this.hostAttr="_nghost-%COMP%".replace(Ct,ki+"-"+ui.id)}applyToHost(Je){super.setAttribute(Je,this.hostAttr,"")}createElement(Je,xe){const ui=super.createElement(Je,xe);return super.setAttribute(ui,this.contentAttr,""),ui}}class ue extends Mt{constructor(Je,xe,ui,ki){super(Je),this.sharedStylesHost=xe,this.hostEl=ui,this.shadowRoot=ui.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const fn=Et(ki.id,ki.styles,[]);for(let An=0;An<fn.length;An++){const ar=document.createElement("style");ar.textContent=fn[An],this.shadowRoot.appendChild(ar)}}nodeOrShadowRoot(Je){return Je===this.hostEl?this.shadowRoot:Je}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(Je,xe){return super.appendChild(this.nodeOrShadowRoot(Je),xe)}insertBefore(Je,xe,ui){return super.insertBefore(this.nodeOrShadowRoot(Je),xe,ui)}removeChild(Je,xe){return super.removeChild(this.nodeOrShadowRoot(Je),xe)}parentNode(Je){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(Je)))}}let Be=(()=>{class li extends Ht{constructor(xe){super(xe)}supports(xe){return!0}addEventListener(xe,ui,ki){return xe.addEventListener(ui,ki,!1),()=>this.removeEventListener(xe,ui,ki)}removeEventListener(xe,ui,ki){return xe.removeEventListener(ui,ki)}}return li.\u0275fac=function(xe){return new(xe||li)(_.LFG(C.K0))},li.\u0275prov=_.Yz7({token:li,factory:li.\u0275fac}),li})();const Ne=["alt","control","meta","shift"],Di={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Ze={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Le={alt:li=>li.altKey,control:li=>li.ctrlKey,meta:li=>li.metaKey,shift:li=>li.shiftKey};let gi=(()=>{class li extends Ht{constructor(xe){super(xe)}supports(xe){return null!=li.parseEventName(xe)}addEventListener(xe,ui,ki){const fn=li.parseEventName(ui),An=li.eventCallback(fn.fullKey,ki,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,C.q)().onAndCancel(xe,fn.domEventName,An))}static parseEventName(xe){const ui=xe.toLowerCase().split("."),ki=ui.shift();if(0===ui.length||"keydown"!==ki&&"keyup"!==ki)return null;const fn=li._normalizeKey(ui.pop());let An="";if(Ne.forEach(Tr=>{const eo=ui.indexOf(Tr);eo>-1&&(ui.splice(eo,1),An+=Tr+".")}),An+=fn,0!=ui.length||0===fn.length)return null;const ar={};return ar.domEventName=ki,ar.fullKey=An,ar}static getEventFullKey(xe){let ui="",ki=function(li){let Je=li.key;if(null==Je){if(Je=li.keyIdentifier,null==Je)return"Unidentified";Je.startsWith("U+")&&(Je=String.fromCharCode(parseInt(Je.substring(2),16)),3===li.location&&Ze.hasOwnProperty(Je)&&(Je=Ze[Je]))}return Di[Je]||Je}(xe);return ki=ki.toLowerCase()," "===ki?ki="space":"."===ki&&(ki="dot"),Ne.forEach(fn=>{fn!=ki&&Le[fn](xe)&&(ui+=fn+".")}),ui+=ki,ui}static eventCallback(xe,ui,ki){return fn=>{li.getEventFullKey(fn)===xe&&ki.runGuarded(()=>ui(fn))}}static _normalizeKey(xe){return"esc"===xe?"escape":xe}}return li.\u0275fac=function(xe){return new(xe||li)(_.LFG(C.K0))},li.\u0275prov=_.Yz7({token:li,factory:li.\u0275fac}),li})();const pe=(0,_.eFA)(_._c5,"browser",[{provide:_.Lbi,useValue:C.bD},{provide:_.g9A,useValue:function(){t.makeCurrent(),Q.init()},multi:!0},{provide:C.K0,useFactory:function(){return(0,_.RDi)(document),document},deps:[]}]),ze=[{provide:_.zSh,useValue:"root"},{provide:_.qLn,useFactory:function(){return new _.qLn},deps:[]},{provide:rt,useClass:Be,multi:!0,deps:[C.K0,_.R0b,_.Lbi]},{provide:rt,useClass:gi,multi:!0,deps:[C.K0]},{provide:he,useClass:he,deps:[St,xt,_.AFp]},{provide:_.FYo,useExisting:he},{provide:vt,useExisting:xt},{provide:xt,useClass:xt,deps:[C.K0]},{provide:_.dDg,useClass:_.dDg,deps:[_.R0b]},{provide:St,useClass:St,deps:[rt,_.R0b]},{provide:C.JF,useClass:at,deps:[]}];let hi=(()=>{class li{constructor(xe){if(xe)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(xe){return{ngModule:li,providers:[{provide:_.AFp,useValue:xe.appId},{provide:y,useExisting:_.AFp},B]}}}return li.\u0275fac=function(xe){return new(xe||li)(_.LFG(li,12))},li.\u0275mod=_.oAB({type:li}),li.\u0275inj=_.cJS({providers:ze,imports:[C.ez,_.hGG]}),li})(),ne=(()=>{class li{constructor(xe){this._doc=xe}getTitle(){return this._doc.title}setTitle(xe){this._doc.title=xe||""}}return li.\u0275fac=function(xe){return new(xe||li)(_.LFG(C.K0))},li.\u0275prov=_.Yz7({token:li,factory:function(xe){let ui=null;return ui=xe?new xe:new ne((0,_.LFG)(C.K0)),ui},providedIn:"root"}),li})();"undefined"!=typeof window&&window;let Wi=(()=>{class li{}return li.\u0275fac=function(xe){return new(xe||li)},li.\u0275prov=_.Yz7({token:li,factory:function(xe){let ui=null;return ui=xe?new(xe||li):_.LFG(yn),ui},providedIn:"root"}),li})(),yn=(()=>{class li extends Wi{constructor(xe){super(),this._doc=xe}sanitize(xe,ui){if(null==ui)return null;switch(xe){case _.q3G.NONE:return ui;case _.q3G.HTML:return(0,_.qzn)(ui,"HTML")?(0,_.z3N)(ui):(0,_.EiD)(this._doc,String(ui)).toString();case _.q3G.STYLE:return(0,_.qzn)(ui,"Style")?(0,_.z3N)(ui):ui;case _.q3G.SCRIPT:if((0,_.qzn)(ui,"Script"))return(0,_.z3N)(ui);throw new Error("unsafe value used in a script context");case _.q3G.URL:return(0,_.yhl)(ui),(0,_.qzn)(ui,"URL")?(0,_.z3N)(ui):(0,_.mCW)(String(ui));case _.q3G.RESOURCE_URL:if((0,_.qzn)(ui,"ResourceURL"))return(0,_.z3N)(ui);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${xe} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(xe){return(0,_.JVY)(xe)}bypassSecurityTrustStyle(xe){return(0,_.L6k)(xe)}bypassSecurityTrustScript(xe){return(0,_.eBb)(xe)}bypassSecurityTrustUrl(xe){return(0,_.LAX)(xe)}bypassSecurityTrustResourceUrl(xe){return(0,_.pB0)(xe)}}return li.\u0275fac=function(xe){return new(xe||li)(_.LFG(C.K0))},li.\u0275prov=_.Yz7({token:li,factory:function(xe){let ui=null;return ui=xe?new xe:function(li){return new yn(li.get(C.K0))}(_.LFG(_.zs3)),ui},providedIn:"root"}),li})()},91083:(U,$,m)=>{"use strict";m.d($,{gz:()=>Oi,yS:()=>As,Bz:()=>Qa,lC:()=>gs});var C=m(5e3);const e=(0,m(83888).d)(pt=>function(){pt(this),this.name="EmptyError",this.message="no elements in sequence"});var t=m(68306),n=m(50727),r=m(54482),s=m(25403);function u(){return(0,r.e)((pt,it)=>{let q=null;pt._refCount++;const Dt=new s.Q(it,void 0,void 0,void 0,()=>{if(!pt||pt._refCount<=0||0<--pt._refCount)return void(q=null);const zt=pt._connection,ge=q;q=null,zt&&(!ge||zt===ge)&&zt.unsubscribe(),it.unsubscribe()});pt.subscribe(Dt),Dt.closed||(q=pt.connect())})}class y extends t.y{constructor(it,q){super(),this.source=it,this.subjectFactory=q,this._subject=null,this._refCount=0,this._connection=null,(0,r.A)(it)&&(this.lift=it.lift)}_subscribe(it){return this.getSubject().subscribe(it)}getSubject(){const it=this._subject;return(!it||it.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:it}=this;this._subject=this._connection=null,null==it||it.unsubscribe()}connect(){let it=this._connection;if(!it){it=this._connection=new n.w0;const q=this.getSubject();it.add(this.source.subscribe(new s.Q(q,void 0,()=>{this._teardown(),q.complete()},Dt=>{this._teardown(),q.error(Dt)},()=>this._teardown()))),it.closed&&(this._connection=null,it=n.w0.EMPTY)}return it}refCount(){return u()(this)}}var x=m(32076),B=m(39646),Q=m(61135),at=m(39841),rt=m(97272),St=m(49770),Ht=m(60515),vt=m(77579);function xt(pt,it,q,Dt,zt){return(ge,Ve)=>{let ii=q,Ni=it,Tn=0;ge.subscribe(new s.Q(Ve,_r=>{const Wn=Tn++;Ni=ii?pt(Ni,_r,Wn):(ii=!0,_r),Dt&&Ve.next(Ni)},zt&&(()=>{ii&&Ve.next(Ni),Ve.complete()})))}}function Wt(pt,it){return(0,r.e)(xt(pt,it,arguments.length>=2,!0))}var Jt=m(39300);function Ct(pt){return pt<=0?()=>Ht.E:(0,r.e)((it,q)=>{let Dt=[];it.subscribe(new s.Q(q,zt=>{Dt.push(zt),pt<Dt.length&&Dt.shift()},()=>{for(const zt of Dt)q.next(zt);q.complete()},void 0,()=>{Dt=null}))})}function yt(pt=ot){return(0,r.e)((it,q)=>{let Dt=!1;it.subscribe(new s.Q(q,zt=>{Dt=!0,q.next(zt)},()=>Dt?q.complete():q.error(pt())))})}function ot(){return new e}function mt(pt){return(0,r.e)((it,q)=>{let Dt=!1;it.subscribe(new s.Q(q,zt=>{Dt=!0,q.next(zt)},()=>{Dt||q.next(pt),q.complete()}))})}var lt=m(44671),Rt=m(95698);function Et(pt,it){const q=arguments.length>=2;return Dt=>Dt.pipe(pt?(0,Jt.h)((zt,ge)=>pt(zt,ge,Dt)):lt.y,(0,Rt.q)(1),q?mt(it):yt(()=>new e))}var ht=m(54004),nt=m(63900),he=m(68675),Mt=m(70262),Nt=m(24351),de=m(95577),ve=m(18505),ue=m(28746),Be=m(8189),Ne=m(69808);class Qe{constructor(it,q){this.id=it,this.url=q}}class Di extends Qe{constructor(it,q,Dt="imperative",zt=null){super(it,q),this.navigationTrigger=Dt,this.restoredState=zt}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Ze extends Qe{constructor(it,q,Dt){super(it,q),this.urlAfterRedirects=Dt}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Le extends Qe{constructor(it,q,Dt){super(it,q),this.reason=Dt}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class gi extends Qe{constructor(it,q,Dt){super(it,q),this.error=Dt}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Bt extends Qe{constructor(it,q,Dt,zt){super(it,q),this.urlAfterRedirects=Dt,this.state=zt}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Te extends Qe{constructor(it,q,Dt,zt){super(it,q),this.urlAfterRedirects=Dt,this.state=zt}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class $t extends Qe{constructor(it,q,Dt,zt,ge){super(it,q),this.urlAfterRedirects=Dt,this.state=zt,this.shouldActivate=ge}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class _e extends Qe{constructor(it,q,Dt,zt){super(it,q),this.urlAfterRedirects=Dt,this.state=zt}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class At extends Qe{constructor(it,q,Dt,zt){super(it,q),this.urlAfterRedirects=Dt,this.state=zt}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class pe{constructor(it){this.route=it}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class ze{constructor(it){this.route=it}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class hi{constructor(it){this.snapshot=it}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ie{constructor(it){this.snapshot=it}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class te{constructor(it){this.snapshot=it}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ee{constructor(it){this.snapshot=it}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ke{constructor(it,q,Dt){this.routerEvent=it,this.position=q,this.anchor=Dt}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const ne="primary";class me{constructor(it){this.params=it||{}}has(it){return Object.prototype.hasOwnProperty.call(this.params,it)}get(it){if(this.has(it)){const q=this.params[it];return Array.isArray(q)?q[0]:q}return null}getAll(it){if(this.has(it)){const q=this.params[it];return Array.isArray(q)?q:[q]}return[]}get keys(){return Object.keys(this.params)}}function ye(pt){return new me(pt)}const Zt="ngNavigationCancelingError";function ce(pt){const it=Error("NavigationCancelingError: "+pt);return it[Zt]=!0,it}function ni(pt,it,q){const Dt=q.path.split("/");if(Dt.length>pt.length||"full"===q.pathMatch&&(it.hasChildren()||Dt.length<pt.length))return null;const zt={};for(let ge=0;ge<Dt.length;ge++){const Ve=Dt[ge],ii=pt[ge];if(Ve.startsWith(":"))zt[Ve.substring(1)]=ii;else if(Ve!==ii.path)return null}return{consumed:pt.slice(0,Dt.length),posParams:zt}}function wi(pt,it){const q=pt?Object.keys(pt):void 0,Dt=it?Object.keys(it):void 0;if(!q||!Dt||q.length!=Dt.length)return!1;let zt;for(let ge=0;ge<q.length;ge++)if(zt=q[ge],!yi(pt[zt],it[zt]))return!1;return!0}function yi(pt,it){if(Array.isArray(pt)&&Array.isArray(it)){if(pt.length!==it.length)return!1;const q=[...pt].sort(),Dt=[...it].sort();return q.every((zt,ge)=>Dt[ge]===zt)}return pt===it}function pn(pt){return Array.prototype.concat.apply([],pt)}function mi(pt){return pt.length>0?pt[pt.length-1]:null}function Ce(pt,it){for(const q in pt)pt.hasOwnProperty(q)&&it(pt[q],q)}function Oe(pt){return(0,C.CqO)(pt)?pt:(0,C.QGY)(pt)?(0,x.D)(Promise.resolve(pt)):(0,B.of)(pt)}const je={exact:function $e(pt,it,q){if(!yn(pt.segments,it.segments)||!Lt(pt.segments,it.segments,q)||pt.numberOfChildren!==it.numberOfChildren)return!1;for(const Dt in it.children)if(!pt.children[Dt]||!$e(pt.children[Dt],it.children[Dt],q))return!1;return!0},subset:kt},Ii={exact:function(pt,it){return wi(pt,it)},subset:function(pt,it){return Object.keys(it).length<=Object.keys(pt).length&&Object.keys(it).every(q=>yi(pt[q],it[q]))},ignored:()=>!0};function _i(pt,it,q){return je[q.paths](pt.root,it.root,q.matrixParams)&&Ii[q.queryParams](pt.queryParams,it.queryParams)&&!("exact"===q.fragment&&pt.fragment!==it.fragment)}function kt(pt,it,q){return ct(pt,it,it.segments,q)}function ct(pt,it,q,Dt){if(pt.segments.length>q.length){const zt=pt.segments.slice(0,q.length);return!(!yn(zt,q)||it.hasChildren()||!Lt(zt,q,Dt))}if(pt.segments.length===q.length){if(!yn(pt.segments,q)||!Lt(pt.segments,q,Dt))return!1;for(const zt in it.children)if(!pt.children[zt]||!kt(pt.children[zt],it.children[zt],Dt))return!1;return!0}{const zt=q.slice(0,pt.segments.length),ge=q.slice(pt.segments.length);return!!(yn(pt.segments,zt)&&Lt(pt.segments,zt,Dt)&&pt.children[ne])&&ct(pt.children[ne],it,ge,Dt)}}function Lt(pt,it,q){return it.every((Dt,zt)=>Ii[q](pt[zt].parameters,Dt.parameters))}class ae{constructor(it,q,Dt){this.root=it,this.queryParams=q,this.fragment=Dt}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ye(this.queryParams)),this._queryParamMap}toString(){return xe.serialize(this)}}class Ae{constructor(it,q){this.segments=it,this.children=q,this.parent=null,Ce(q,(Dt,zt)=>Dt.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return ui(this)}}class Wi{constructor(it,q){this.path=it,this.parameters=q}get parameterMap(){return this._parameterMap||(this._parameterMap=ye(this.parameters)),this._parameterMap}toString(){return mo(this)}}function yn(pt,it){return pt.length===it.length&&pt.every((q,Dt)=>q.path===it[Dt].path)}class li{}class Je{parse(it){const q=new pr(it);return new ae(q.parseRootSegment(),q.parseQueryParams(),q.parseFragment())}serialize(it){const q=`/${ki(it.root,!0)}`,Dt=function(pt){const it=Object.keys(pt).map(q=>{const Dt=pt[q];return Array.isArray(Dt)?Dt.map(zt=>`${An(q)}=${An(zt)}`).join("&"):`${An(q)}=${An(Dt)}`}).filter(q=>!!q);return it.length?`?${it.join("&")}`:""}(it.queryParams);var pt;return`${q}${Dt}${"string"==typeof it.fragment?`#${pt=it.fragment,encodeURI(pt)}`:""}`}}const xe=new Je;function ui(pt){return pt.segments.map(it=>mo(it)).join("/")}function ki(pt,it){if(!pt.hasChildren())return ui(pt);if(it){const q=pt.children[ne]?ki(pt.children[ne],!1):"",Dt=[];return Ce(pt.children,(zt,ge)=>{ge!==ne&&Dt.push(`${ge}:${ki(zt,!1)}`)}),Dt.length>0?`${q}(${Dt.join("//")})`:q}{const q=function(pt,it){let q=[];return Ce(pt.children,(Dt,zt)=>{zt===ne&&(q=q.concat(it(Dt,zt)))}),Ce(pt.children,(Dt,zt)=>{zt!==ne&&(q=q.concat(it(Dt,zt)))}),q}(pt,(Dt,zt)=>zt===ne?[ki(pt.children[ne],!1)]:[`${zt}:${ki(Dt,!1)}`]);return 1===Object.keys(pt.children).length&&null!=pt.children[ne]?`${ui(pt)}/${q[0]}`:`${ui(pt)}/(${q.join("//")})`}}function fn(pt){return encodeURIComponent(pt).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function An(pt){return fn(pt).replace(/%3B/gi,";")}function Tr(pt){return fn(pt).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function eo(pt){return decodeURIComponent(pt)}function no(pt){return eo(pt.replace(/\+/g,"%20"))}function mo(pt){return`${Tr(pt.path)}${function(pt){return Object.keys(pt).map(it=>`;${Tr(it)}=${Tr(pt[it])}`).join("")}(pt.parameters)}`}const Mo=/^[^\/()?;=#]+/;function sr(pt){const it=pt.match(Mo);return it?it[0]:""}const Ai=/^[^=?&#]+/,gr=/^[^&#]+/;class pr{constructor(it){this.url=it,this.remaining=it}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Ae([],{}):new Ae([],this.parseChildren())}parseQueryParams(){const it={};if(this.consumeOptional("?"))do{this.parseQueryParam(it)}while(this.consumeOptional("&"));return it}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const it=[];for(this.peekStartsWith("(")||it.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),it.push(this.parseSegment());let q={};this.peekStartsWith("/(")&&(this.capture("/"),q=this.parseParens(!0));let Dt={};return this.peekStartsWith("(")&&(Dt=this.parseParens(!1)),(it.length>0||Object.keys(q).length>0)&&(Dt[ne]=new Ae(it,q)),Dt}parseSegment(){const it=sr(this.remaining);if(""===it&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(it),new Wi(eo(it),this.parseMatrixParams())}parseMatrixParams(){const it={};for(;this.consumeOptional(";");)this.parseParam(it);return it}parseParam(it){const q=sr(this.remaining);if(!q)return;this.capture(q);let Dt="";if(this.consumeOptional("=")){const zt=sr(this.remaining);zt&&(Dt=zt,this.capture(Dt))}it[eo(q)]=eo(Dt)}parseQueryParam(it){const q=function(pt){const it=pt.match(Ai);return it?it[0]:""}(this.remaining);if(!q)return;this.capture(q);let Dt="";if(this.consumeOptional("=")){const Ve=function(pt){const it=pt.match(gr);return it?it[0]:""}(this.remaining);Ve&&(Dt=Ve,this.capture(Dt))}const zt=no(q),ge=no(Dt);if(it.hasOwnProperty(zt)){let Ve=it[zt];Array.isArray(Ve)||(Ve=[Ve],it[zt]=Ve),Ve.push(ge)}else it[zt]=ge}parseParens(it){const q={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const Dt=sr(this.remaining),zt=this.remaining[Dt.length];if("/"!==zt&&")"!==zt&&";"!==zt)throw new Error(`Cannot parse url '${this.url}'`);let ge;Dt.indexOf(":")>-1?(ge=Dt.substr(0,Dt.indexOf(":")),this.capture(ge),this.capture(":")):it&&(ge=ne);const Ve=this.parseChildren();q[ge]=1===Object.keys(Ve).length?Ve[ne]:new Ae([],Ve),this.consumeOptional("//")}return q}peekStartsWith(it){return this.remaining.startsWith(it)}consumeOptional(it){return!!this.peekStartsWith(it)&&(this.remaining=this.remaining.substring(it.length),!0)}capture(it){if(!this.consumeOptional(it))throw new Error(`Expected "${it}".`)}}class Dr{constructor(it){this._root=it}get root(){return this._root.value}parent(it){const q=this.pathFromRoot(it);return q.length>1?q[q.length-2]:null}children(it){const q=Qr(it,this._root);return q?q.children.map(Dt=>Dt.value):[]}firstChild(it){const q=Qr(it,this._root);return q&&q.children.length>0?q.children[0].value:null}siblings(it){const q=Ir(it,this._root);return q.length<2?[]:q[q.length-2].children.map(zt=>zt.value).filter(zt=>zt!==it)}pathFromRoot(it){return Ir(it,this._root).map(q=>q.value)}}function Qr(pt,it){if(pt===it.value)return it;for(const q of it.children){const Dt=Qr(pt,q);if(Dt)return Dt}return null}function Ir(pt,it){if(pt===it.value)return[it];for(const q of it.children){const Dt=Ir(pt,q);if(Dt.length)return Dt.unshift(it),Dt}return[]}class Vi{constructor(it,q){this.value=it,this.children=q}toString(){return`TreeNode(${this.value})`}}function Sn(pt){const it={};return pt&&pt.children.forEach(q=>it[q.value.outlet]=q),it}class Gn extends Dr{constructor(it,q){super(it),this.snapshot=q,nr(this,it)}toString(){return this.snapshot.toString()}}function oe(pt,it){const q=function(pt,it){const Ve=new Kn([],{},{},"",{},ne,it,null,pt.root,-1,{});return new zn("",new Vi(Ve,[]))}(pt,it),Dt=new Q.X([new Wi("",{})]),zt=new Q.X({}),ge=new Q.X({}),Ve=new Q.X({}),ii=new Q.X(""),Ni=new Oi(Dt,zt,Ve,ii,ge,ne,it,q.root);return Ni.snapshot=q.root,new Gn(new Vi(Ni,[]),q)}class Oi{constructor(it,q,Dt,zt,ge,Ve,ii,Ni){this.url=it,this.params=q,this.queryParams=Dt,this.fragment=zt,this.data=ge,this.outlet=Ve,this.component=ii,this._futureSnapshot=Ni}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,ht.U)(it=>ye(it)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,ht.U)(it=>ye(it)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Ji(pt,it="emptyOnly"){const q=pt.pathFromRoot;let Dt=0;if("always"!==it)for(Dt=q.length-1;Dt>=1;){const zt=q[Dt],ge=q[Dt-1];if(zt.routeConfig&&""===zt.routeConfig.path)Dt--;else{if(ge.component)break;Dt--}}return function(pt){return pt.reduce((it,q)=>({params:Object.assign(Object.assign({},it.params),q.params),data:Object.assign(Object.assign({},it.data),q.data),resolve:Object.assign(Object.assign({},it.resolve),q._resolvedData)}),{params:{},data:{},resolve:{}})}(q.slice(Dt))}class Kn{constructor(it,q,Dt,zt,ge,Ve,ii,Ni,Tn,_r,Wn){this.url=it,this.params=q,this.queryParams=Dt,this.fragment=zt,this.data=ge,this.outlet=Ve,this.component=ii,this.routeConfig=Ni,this._urlSegment=Tn,this._lastPathIndex=_r,this._resolve=Wn}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=ye(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ye(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(Dt=>Dt.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class zn extends Dr{constructor(it,q){super(q),this.url=it,nr(this,q)}toString(){return Fn(this._root)}}function nr(pt,it){it.value._routerState=pt,it.children.forEach(q=>nr(pt,q))}function Fn(pt){const it=pt.children.length>0?` { ${pt.children.map(Fn).join(", ")} } `:"";return`${pt.value}${it}`}function Ao(pt){if(pt.snapshot){const it=pt.snapshot,q=pt._futureSnapshot;pt.snapshot=q,wi(it.queryParams,q.queryParams)||pt.queryParams.next(q.queryParams),it.fragment!==q.fragment&&pt.fragment.next(q.fragment),wi(it.params,q.params)||pt.params.next(q.params),function(pt,it){if(pt.length!==it.length)return!1;for(let q=0;q<pt.length;++q)if(!wi(pt[q],it[q]))return!1;return!0}(it.url,q.url)||pt.url.next(q.url),wi(it.data,q.data)||pt.data.next(q.data)}else pt.snapshot=pt._futureSnapshot,pt.data.next(pt._futureSnapshot.data)}function jo(pt,it){const q=wi(pt.params,it.params)&&function(pt,it){return yn(pt,it)&&pt.every((q,Dt)=>wi(q.parameters,it[Dt].parameters))}(pt.url,it.url);return q&&!(!pt.parent!=!it.parent)&&(!pt.parent||jo(pt.parent,it.parent))}function _o(pt,it,q){if(q&&pt.shouldReuseRoute(it.value,q.value.snapshot)){const Dt=q.value;Dt._futureSnapshot=it.value;const zt=function(pt,it,q){return it.children.map(Dt=>{for(const zt of q.children)if(pt.shouldReuseRoute(Dt.value,zt.value.snapshot))return _o(pt,Dt,zt);return _o(pt,Dt)})}(pt,it,q);return new Vi(Dt,zt)}{if(pt.shouldAttach(it.value)){const ge=pt.retrieve(it.value);if(null!==ge){const Ve=ge.route;return Ve.value._futureSnapshot=it.value,Ve.children=it.children.map(ii=>_o(pt,ii)),Ve}}const Dt=function(pt){return new Oi(new Q.X(pt.url),new Q.X(pt.params),new Q.X(pt.queryParams),new Q.X(pt.fragment),new Q.X(pt.data),pt.outlet,pt.component,pt)}(it.value),zt=it.children.map(ge=>_o(pt,ge));return new Vi(Dt,zt)}}function Jr(pt){return"object"==typeof pt&&null!=pt&&!pt.outlets&&!pt.segmentPath}function Ss(pt){return"object"==typeof pt&&null!=pt&&pt.outlets}function ws(pt,it,q,Dt,zt){let ge={};return Dt&&Ce(Dt,(Ve,ii)=>{ge[ii]=Array.isArray(Ve)?Ve.map(Ni=>`${Ni}`):`${Ve}`}),new ae(q.root===pt?it:Bo(q.root,pt,it),ge,zt)}function Bo(pt,it,q){const Dt={};return Ce(pt.children,(zt,ge)=>{Dt[ge]=zt===it?q:Bo(zt,it,q)}),new Ae(pt.segments,Dt)}class Ro{constructor(it,q,Dt){if(this.isAbsolute=it,this.numberOfDoubleDots=q,this.commands=Dt,it&&Dt.length>0&&Jr(Dt[0]))throw new Error("Root segment cannot have matrix parameters");const zt=Dt.find(Ss);if(zt&&zt!==mi(Dt))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Ho{constructor(it,q,Dt){this.segmentGroup=it,this.processChildren=q,this.index=Dt}}function Qo(pt,it,q){if(pt||(pt=new Ae([],{})),0===pt.segments.length&&pt.hasChildren())return ga(pt,it,q);const Dt=function(pt,it,q){let Dt=0,zt=it;const ge={match:!1,pathIndex:0,commandIndex:0};for(;zt<pt.segments.length;){if(Dt>=q.length)return ge;const Ve=pt.segments[zt],ii=q[Dt];if(Ss(ii))break;const Ni=`${ii}`,Tn=Dt<q.length-1?q[Dt+1]:null;if(zt>0&&void 0===Ni)break;if(Ni&&Tn&&"object"==typeof Tn&&void 0===Tn.outlets){if(!fs(Ni,Tn,Ve))return ge;Dt+=2}else{if(!fs(Ni,{},Ve))return ge;Dt++}zt++}return{match:!0,pathIndex:zt,commandIndex:Dt}}(pt,it,q),zt=q.slice(Dt.commandIndex);if(Dt.match&&Dt.pathIndex<pt.segments.length){const ge=new Ae(pt.segments.slice(0,Dt.pathIndex),{});return ge.children[ne]=new Ae(pt.segments.slice(Dt.pathIndex),pt.children),ga(ge,0,zt)}return Dt.match&&0===zt.length?new Ae(pt.segments,{}):Dt.match&&!pt.hasChildren()?Fs(pt,it,q):Dt.match?ga(pt,0,zt):Fs(pt,it,q)}function ga(pt,it,q){if(0===q.length)return new Ae(pt.segments,{});{const Dt=function(pt){return Ss(pt[0])?pt[0].outlets:{[ne]:pt}}(q),zt={};return Ce(Dt,(ge,Ve)=>{"string"==typeof ge&&(ge=[ge]),null!==ge&&(zt[Ve]=Qo(pt.children[Ve],it,ge))}),Ce(pt.children,(ge,Ve)=>{void 0===Dt[Ve]&&(zt[Ve]=ge)}),new Ae(pt.segments,zt)}}function Fs(pt,it,q){const Dt=pt.segments.slice(0,it);let zt=0;for(;zt<q.length;){const ge=q[zt];if(Ss(ge)){const Ni=Pa(ge.outlets);return new Ae(Dt,Ni)}if(0===zt&&Jr(q[0])){Dt.push(new Wi(pt.segments[it].path,Bs(q[0]))),zt++;continue}const Ve=Ss(ge)?ge.outlets[ne]:`${ge}`,ii=zt<q.length-1?q[zt+1]:null;Ve&&ii&&Jr(ii)?(Dt.push(new Wi(Ve,Bs(ii))),zt+=2):(Dt.push(new Wi(Ve,{})),zt++)}return new Ae(Dt,{})}function Pa(pt){const it={};return Ce(pt,(q,Dt)=>{"string"==typeof q&&(q=[q]),null!==q&&(it[Dt]=Fs(new Ae([],{}),0,q))}),it}function Bs(pt){const it={};return Ce(pt,(q,Dt)=>it[Dt]=`${q}`),it}function fs(pt,it,q){return pt==q.path&&wi(it,q.parameters)}class ma{constructor(it,q,Dt,zt){this.routeReuseStrategy=it,this.futureState=q,this.currState=Dt,this.forwardEvent=zt}activate(it){const q=this.futureState._root,Dt=this.currState?this.currState._root:null;this.deactivateChildRoutes(q,Dt,it),Ao(this.futureState.root),this.activateChildRoutes(q,Dt,it)}deactivateChildRoutes(it,q,Dt){const zt=Sn(q);it.children.forEach(ge=>{const Ve=ge.value.outlet;this.deactivateRoutes(ge,zt[Ve],Dt),delete zt[Ve]}),Ce(zt,(ge,Ve)=>{this.deactivateRouteAndItsChildren(ge,Dt)})}deactivateRoutes(it,q,Dt){const zt=it.value,ge=q?q.value:null;if(zt===ge)if(zt.component){const Ve=Dt.getContext(zt.outlet);Ve&&this.deactivateChildRoutes(it,q,Ve.children)}else this.deactivateChildRoutes(it,q,Dt);else ge&&this.deactivateRouteAndItsChildren(q,Dt)}deactivateRouteAndItsChildren(it,q){it.value.component&&this.routeReuseStrategy.shouldDetach(it.value.snapshot)?this.detachAndStoreRouteSubtree(it,q):this.deactivateRouteAndOutlet(it,q)}detachAndStoreRouteSubtree(it,q){const Dt=q.getContext(it.value.outlet),zt=Dt&&it.value.component?Dt.children:q,ge=Sn(it);for(const Ve of Object.keys(ge))this.deactivateRouteAndItsChildren(ge[Ve],zt);if(Dt&&Dt.outlet){const Ve=Dt.outlet.detach(),ii=Dt.children.onOutletDeactivated();this.routeReuseStrategy.store(it.value.snapshot,{componentRef:Ve,route:it,contexts:ii})}}deactivateRouteAndOutlet(it,q){const Dt=q.getContext(it.value.outlet),zt=Dt&&it.value.component?Dt.children:q,ge=Sn(it);for(const Ve of Object.keys(ge))this.deactivateRouteAndItsChildren(ge[Ve],zt);Dt&&Dt.outlet&&(Dt.outlet.deactivate(),Dt.children.onOutletDeactivated(),Dt.attachRef=null,Dt.resolver=null,Dt.route=null)}activateChildRoutes(it,q,Dt){const zt=Sn(q);it.children.forEach(ge=>{this.activateRoutes(ge,zt[ge.value.outlet],Dt),this.forwardEvent(new ee(ge.value.snapshot))}),it.children.length&&this.forwardEvent(new Ie(it.value.snapshot))}activateRoutes(it,q,Dt){const zt=it.value,ge=q?q.value:null;if(Ao(zt),zt===ge)if(zt.component){const Ve=Dt.getOrCreateContext(zt.outlet);this.activateChildRoutes(it,q,Ve.children)}else this.activateChildRoutes(it,q,Dt);else if(zt.component){const Ve=Dt.getOrCreateContext(zt.outlet);if(this.routeReuseStrategy.shouldAttach(zt.snapshot)){const ii=this.routeReuseStrategy.retrieve(zt.snapshot);this.routeReuseStrategy.store(zt.snapshot,null),Ve.children.onOutletReAttached(ii.contexts),Ve.attachRef=ii.componentRef,Ve.route=ii.route.value,Ve.outlet&&Ve.outlet.attach(ii.componentRef,ii.route.value),Ao(ii.route.value),this.activateChildRoutes(it,null,Ve.children)}else{const ii=function(pt){for(let it=pt.parent;it;it=it.parent){const q=it.routeConfig;if(q&&q._loadedConfig)return q._loadedConfig;if(q&&q.component)return null}return null}(zt.snapshot),Ni=ii?ii.module.componentFactoryResolver:null;Ve.attachRef=null,Ve.route=zt,Ve.resolver=Ni,Ve.outlet&&Ve.outlet.activateWith(zt,Ni),this.activateChildRoutes(it,null,Ve.children)}}else this.activateChildRoutes(it,null,Dt)}}class Oo{constructor(it,q){this.routes=it,this.module=q}}function zr(pt){return"function"==typeof pt}function yo(pt){return pt instanceof ae}const xo=Symbol("INITIAL_VALUE");function Eo(){return(0,nt.w)(pt=>(0,at.a)(pt.map(it=>it.pipe((0,Rt.q)(1),(0,he.O)(xo)))).pipe(Wt((it,q)=>{let Dt=!1;return q.reduce((zt,ge,Ve)=>zt!==xo?zt:(ge===xo&&(Dt=!0),Dt||!1!==ge&&Ve!==q.length-1&&!yo(ge)?zt:ge),it)},xo),(0,Jt.h)(it=>it!==xo),(0,ht.U)(it=>yo(it)?it:!0===it),(0,Rt.q)(1)))}class Ds{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new lo,this.attachRef=null}}class lo{constructor(){this.contexts=new Map}onChildOutletCreated(it,q){const Dt=this.getOrCreateContext(it);Dt.outlet=q,this.contexts.set(it,Dt)}onChildOutletDestroyed(it){const q=this.getContext(it);q&&(q.outlet=null,q.attachRef=null)}onOutletDeactivated(){const it=this.contexts;return this.contexts=new Map,it}onOutletReAttached(it){this.contexts=it}getOrCreateContext(it){let q=this.getContext(it);return q||(q=new Ds,this.contexts.set(it,q)),q}getContext(it){return this.contexts.get(it)||null}}let gs=(()=>{class pt{constructor(q,Dt,zt,ge,Ve){this.parentContexts=q,this.location=Dt,this.resolver=zt,this.changeDetector=Ve,this.activated=null,this._activatedRoute=null,this.activateEvents=new C.vpe,this.deactivateEvents=new C.vpe,this.attachEvents=new C.vpe,this.detachEvents=new C.vpe,this.name=ge||ne,q.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const q=this.parentContexts.getContext(this.name);q&&q.route&&(q.attachRef?this.attach(q.attachRef,q.route):this.activateWith(q.route,q.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const q=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(q.instance),q}attach(q,Dt){this.activated=q,this._activatedRoute=Dt,this.location.insert(q.hostView),this.attachEvents.emit(q.instance)}deactivate(){if(this.activated){const q=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(q)}}activateWith(q,Dt){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=q;const Ve=(Dt=Dt||this.resolver).resolveComponentFactory(q._futureSnapshot.routeConfig.component),ii=this.parentContexts.getOrCreateContext(this.name).children,Ni=new Lr(q,ii,this.location.injector);this.activated=this.location.createComponent(Ve,this.location.length,Ni),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return pt.\u0275fac=function(q){return new(q||pt)(C.Y36(lo),C.Y36(C.s_b),C.Y36(C._Vd),C.$8M("name"),C.Y36(C.sBO))},pt.\u0275dir=C.lG2({type:pt,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),pt})();class Lr{constructor(it,q,Dt){this.route=it,this.childContexts=q,this.parent=Dt}get(it,q){return it===Oi?this.route:it===lo?this.childContexts:this.parent.get(it,q)}}let aa=(()=>{class pt{}return pt.\u0275fac=function(q){return new(q||pt)},pt.\u0275cmp=C.Xpm({type:pt,selectors:[["ng-component"]],decls:1,vars:0,template:function(q,Dt){1&q&&C._UZ(0,"router-outlet")},directives:[gs],encapsulation:2}),pt})();function jr(pt,it=""){for(let q=0;q<pt.length;q++){const Dt=pt[q];la(Dt,vl(it,Dt))}}function la(pt,it){pt.children&&jr(pt.children,it)}function vl(pt,it){return it?pt||it.path?pt&&!it.path?`${pt}/`:!pt&&it.path?it.path:`${pt}/${it.path}`:"":pt}function us(pt){const it=pt.children&&pt.children.map(us),q=it?Object.assign(Object.assign({},pt),{children:it}):Object.assign({},pt);return!q.component&&(it||q.loadChildren)&&q.outlet&&q.outlet!==ne&&(q.component=aa),q}function Ko(pt){return pt.outlet||ne}function ms(pt,it){const q=pt.filter(Dt=>Ko(Dt)===it);return q.push(...pt.filter(Dt=>Ko(Dt)!==it)),q}const bl={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function Nr(pt,it,q){var Dt;if(""===it.path)return"full"===it.pathMatch&&(pt.hasChildren()||q.length>0)?Object.assign({},bl):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const ge=(it.matcher||ni)(q,pt,it);if(!ge)return Object.assign({},bl);const Ve={};Ce(ge.posParams,(Ni,Tn)=>{Ve[Tn]=Ni.path});const ii=ge.consumed.length>0?Object.assign(Object.assign({},Ve),ge.consumed[ge.consumed.length-1].parameters):Ve;return{matched:!0,consumedSegments:ge.consumed,lastChild:ge.consumed.length,parameters:ii,positionalParamSegments:null!==(Dt=ge.posParams)&&void 0!==Dt?Dt:{}}}function xn(pt,it,q,Dt,zt="corrected"){if(q.length>0&&function(pt,it,q){return q.some(Dt=>z(pt,it,Dt)&&Ko(Dt)!==ne)}(pt,q,Dt)){const Ve=new Ae(it,function(pt,it,q,Dt){const zt={};zt[ne]=Dt,Dt._sourceSegment=pt,Dt._segmentIndexShift=it.length;for(const ge of q)if(""===ge.path&&Ko(ge)!==ne){const Ve=new Ae([],{});Ve._sourceSegment=pt,Ve._segmentIndexShift=it.length,zt[Ko(ge)]=Ve}return zt}(pt,it,Dt,new Ae(q,pt.children)));return Ve._sourceSegment=pt,Ve._segmentIndexShift=it.length,{segmentGroup:Ve,slicedSegments:[]}}if(0===q.length&&function(pt,it,q){return q.some(Dt=>z(pt,it,Dt))}(pt,q,Dt)){const Ve=new Ae(pt.segments,function(pt,it,q,Dt,zt,ge){const Ve={};for(const ii of Dt)if(z(pt,q,ii)&&!zt[Ko(ii)]){const Ni=new Ae([],{});Ni._sourceSegment=pt,Ni._segmentIndexShift="legacy"===ge?pt.segments.length:it.length,Ve[Ko(ii)]=Ni}return Object.assign(Object.assign({},zt),Ve)}(pt,it,q,Dt,pt.children,zt));return Ve._sourceSegment=pt,Ve._segmentIndexShift=it.length,{segmentGroup:Ve,slicedSegments:q}}const ge=new Ae(pt.segments,pt.children);return ge._sourceSegment=pt,ge._segmentIndexShift=it.length,{segmentGroup:ge,slicedSegments:q}}function z(pt,it,q){return(!(pt.hasChildren()||it.length>0)||"full"!==q.pathMatch)&&""===q.path}function It(pt,it,q,Dt){return!!(Ko(pt)===Dt||Dt!==ne&&z(it,q,pt))&&("**"===pt.path||Nr(it,pt,q).matched)}function Fe(pt,it,q){return 0===it.length&&!pt.children[q]}class bi{constructor(it){this.segmentGroup=it||null}}class cn{constructor(it){this.urlTree=it}}function jn(pt){return new t.y(it=>it.error(new bi(pt)))}function Cr(pt){return new t.y(it=>it.error(new cn(pt)))}function Hr(pt){return new t.y(it=>it.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${pt}'`)))}class hr{constructor(it,q,Dt,zt,ge){this.configLoader=q,this.urlSerializer=Dt,this.urlTree=zt,this.config=ge,this.allowRedirects=!0,this.ngModule=it.get(C.h0i)}apply(){const it=xn(this.urlTree.root,[],[],this.config).segmentGroup,q=new Ae(it.segments,it.children);return this.expandSegmentGroup(this.ngModule,this.config,q,ne).pipe((0,ht.U)(ge=>this.createUrlTree(Hn(ge),this.urlTree.queryParams,this.urlTree.fragment))).pipe((0,Mt.K)(ge=>{if(ge instanceof cn)return this.allowRedirects=!1,this.match(ge.urlTree);throw ge instanceof bi?this.noMatchError(ge):ge}))}match(it){return this.expandSegmentGroup(this.ngModule,this.config,it.root,ne).pipe((0,ht.U)(zt=>this.createUrlTree(Hn(zt),it.queryParams,it.fragment))).pipe((0,Mt.K)(zt=>{throw zt instanceof bi?this.noMatchError(zt):zt}))}noMatchError(it){return new Error(`Cannot match any routes. URL Segment: '${it.segmentGroup}'`)}createUrlTree(it,q,Dt){const zt=it.segments.length>0?new Ae([],{[ne]:it}):it;return new ae(zt,q,Dt)}expandSegmentGroup(it,q,Dt,zt){return 0===Dt.segments.length&&Dt.hasChildren()?this.expandChildren(it,q,Dt).pipe((0,ht.U)(ge=>new Ae([],ge))):this.expandSegment(it,Dt,q,Dt.segments,zt,!0)}expandChildren(it,q,Dt){const zt=[];for(const ge of Object.keys(Dt.children))"primary"===ge?zt.unshift(ge):zt.push(ge);return(0,x.D)(zt).pipe((0,Nt.b)(ge=>{const Ve=Dt.children[ge],ii=ms(q,ge);return this.expandSegmentGroup(it,ii,Ve,ge).pipe((0,ht.U)(Ni=>({segment:Ni,outlet:ge})))}),Wt((ge,Ve)=>(ge[Ve.outlet]=Ve.segment,ge),{}),function(pt,it){const q=arguments.length>=2;return Dt=>Dt.pipe(pt?(0,Jt.h)((zt,ge)=>pt(zt,ge,Dt)):lt.y,Ct(1),q?mt(it):yt(()=>new e))}())}expandSegment(it,q,Dt,zt,ge,Ve){return(0,x.D)(Dt).pipe((0,Nt.b)(ii=>this.expandSegmentAgainstRoute(it,q,Dt,ii,zt,ge,Ve).pipe((0,Mt.K)(Tn=>{if(Tn instanceof bi)return(0,B.of)(null);throw Tn}))),Et(ii=>!!ii),(0,Mt.K)((ii,Ni)=>{if(ii instanceof e||"EmptyError"===ii.name){if(Fe(q,zt,ge))return(0,B.of)(new Ae([],{}));throw new bi(q)}throw ii}))}expandSegmentAgainstRoute(it,q,Dt,zt,ge,Ve,ii){return It(zt,q,ge,Ve)?void 0===zt.redirectTo?this.matchSegmentAgainstRoute(it,q,zt,ge,Ve):ii&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(it,q,Dt,zt,ge,Ve):jn(q):jn(q)}expandSegmentAgainstRouteUsingRedirect(it,q,Dt,zt,ge,Ve){return"**"===zt.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(it,Dt,zt,Ve):this.expandRegularSegmentAgainstRouteUsingRedirect(it,q,Dt,zt,ge,Ve)}expandWildCardWithParamsAgainstRouteUsingRedirect(it,q,Dt,zt){const ge=this.applyRedirectCommands([],Dt.redirectTo,{});return Dt.redirectTo.startsWith("/")?Cr(ge):this.lineralizeSegments(Dt,ge).pipe((0,de.z)(Ve=>{const ii=new Ae(Ve,{});return this.expandSegment(it,ii,q,Ve,zt,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(it,q,Dt,zt,ge,Ve){const{matched:ii,consumedSegments:Ni,lastChild:Tn,positionalParamSegments:_r}=Nr(q,zt,ge);if(!ii)return jn(q);const Wn=this.applyRedirectCommands(Ni,zt.redirectTo,_r);return zt.redirectTo.startsWith("/")?Cr(Wn):this.lineralizeSegments(zt,Wn).pipe((0,de.z)($r=>this.expandSegment(it,q,Dt,$r.concat(ge.slice(Tn)),Ve,!1)))}matchSegmentAgainstRoute(it,q,Dt,zt,ge){if("**"===Dt.path)return Dt.loadChildren?(Dt._loadedConfig?(0,B.of)(Dt._loadedConfig):this.configLoader.load(it.injector,Dt)).pipe((0,ht.U)($r=>(Dt._loadedConfig=$r,new Ae(zt,{})))):(0,B.of)(new Ae(zt,{}));const{matched:Ve,consumedSegments:ii,lastChild:Ni}=Nr(q,Dt,zt);if(!Ve)return jn(q);const Tn=zt.slice(Ni);return this.getChildConfig(it,Dt,zt).pipe((0,de.z)(Wn=>{const $r=Wn.module,uo=Wn.routes,{segmentGroup:Tl,slicedSegments:Ys}=xn(q,ii,Tn,uo),ba=new Ae(Tl.segments,Tl.children);if(0===Ys.length&&ba.hasChildren())return this.expandChildren($r,uo,ba).pipe((0,ht.U)(ya=>new Ae(ii,ya)));if(0===uo.length&&0===Ys.length)return(0,B.of)(new Ae(ii,{}));const Uo=Ko(Dt)===ge;return this.expandSegment($r,ba,uo,Ys,Uo?ne:ge,!0).pipe((0,ht.U)(Xs=>new Ae(ii.concat(Xs.segments),Xs.children)))}))}getChildConfig(it,q,Dt){return q.children?(0,B.of)(new Oo(q.children,it)):q.loadChildren?void 0!==q._loadedConfig?(0,B.of)(q._loadedConfig):this.runCanLoadGuards(it.injector,q,Dt).pipe((0,de.z)(zt=>{return zt?this.configLoader.load(it.injector,q).pipe((0,ht.U)(ge=>(q._loadedConfig=ge,ge))):(pt=q,new t.y(it=>it.error(ce(`Cannot load children because the guard of the route "path: '${pt.path}'" returned false`))));var pt})):(0,B.of)(new Oo([],it))}runCanLoadGuards(it,q,Dt){const zt=q.canLoad;if(!zt||0===zt.length)return(0,B.of)(!0);const ge=zt.map(Ve=>{const ii=it.get(Ve);let Ni;if((pt=ii)&&zr(pt.canLoad))Ni=ii.canLoad(q,Dt);else{if(!zr(ii))throw new Error("Invalid CanLoad guard");Ni=ii(q,Dt)}var pt;return Oe(Ni)});return(0,B.of)(ge).pipe(Eo(),(0,ve.b)(Ve=>{if(!yo(Ve))return;const ii=ce(`Redirecting to "${this.urlSerializer.serialize(Ve)}"`);throw ii.url=Ve,ii}),(0,ht.U)(Ve=>!0===Ve))}lineralizeSegments(it,q){let Dt=[],zt=q.root;for(;;){if(Dt=Dt.concat(zt.segments),0===zt.numberOfChildren)return(0,B.of)(Dt);if(zt.numberOfChildren>1||!zt.children[ne])return Hr(it.redirectTo);zt=zt.children[ne]}}applyRedirectCommands(it,q,Dt){return this.applyRedirectCreatreUrlTree(q,this.urlSerializer.parse(q),it,Dt)}applyRedirectCreatreUrlTree(it,q,Dt,zt){const ge=this.createSegmentGroup(it,q.root,Dt,zt);return new ae(ge,this.createQueryParams(q.queryParams,this.urlTree.queryParams),q.fragment)}createQueryParams(it,q){const Dt={};return Ce(it,(zt,ge)=>{if("string"==typeof zt&&zt.startsWith(":")){const ii=zt.substring(1);Dt[ge]=q[ii]}else Dt[ge]=zt}),Dt}createSegmentGroup(it,q,Dt,zt){const ge=this.createSegments(it,q.segments,Dt,zt);let Ve={};return Ce(q.children,(ii,Ni)=>{Ve[Ni]=this.createSegmentGroup(it,ii,Dt,zt)}),new Ae(ge,Ve)}createSegments(it,q,Dt,zt){return q.map(ge=>ge.path.startsWith(":")?this.findPosParam(it,ge,zt):this.findOrReturn(ge,Dt))}findPosParam(it,q,Dt){const zt=Dt[q.path.substring(1)];if(!zt)throw new Error(`Cannot redirect to '${it}'. Cannot find '${q.path}'.`);return zt}findOrReturn(it,q){let Dt=0;for(const zt of q){if(zt.path===it.path)return q.splice(Dt),zt;Dt++}return it}}function Hn(pt){const it={};for(const Dt of Object.keys(pt.children)){const ge=Hn(pt.children[Dt]);(ge.segments.length>0||ge.hasChildren())&&(it[Dt]=ge)}return function(pt){if(1===pt.numberOfChildren&&pt.children[ne]){const it=pt.children[ne];return new Ae(pt.segments.concat(it.segments),it.children)}return pt}(new Ae(pt.segments,it))}class Fa{constructor(it){this.path=it,this.route=this.path[this.path.length-1]}}class ts{constructor(it,q){this.component=it,this.route=q}}function ll(pt,it,q){const Dt=pt._root;return Gt(Dt,it?it._root:null,q,[Dt.value])}function qs(pt,it,q){const Dt=function(pt){if(!pt)return null;for(let it=pt.parent;it;it=it.parent){const q=it.routeConfig;if(q&&q._loadedConfig)return q._loadedConfig}return null}(it);return(Dt?Dt.module.injector:q).get(pt)}function Gt(pt,it,q,Dt,zt={canDeactivateChecks:[],canActivateChecks:[]}){const ge=Sn(it);return pt.children.forEach(Ve=>{(function(pt,it,q,Dt,zt={canDeactivateChecks:[],canActivateChecks:[]}){const ge=pt.value,Ve=it?it.value:null,ii=q?q.getContext(pt.value.outlet):null;if(Ve&&ge.routeConfig===Ve.routeConfig){const Ni=function(pt,it,q){if("function"==typeof q)return q(pt,it);switch(q){case"pathParamsChange":return!yn(pt.url,it.url);case"pathParamsOrQueryParamsChange":return!yn(pt.url,it.url)||!wi(pt.queryParams,it.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!jo(pt,it)||!wi(pt.queryParams,it.queryParams);default:return!jo(pt,it)}}(Ve,ge,ge.routeConfig.runGuardsAndResolvers);Ni?zt.canActivateChecks.push(new Fa(Dt)):(ge.data=Ve.data,ge._resolvedData=Ve._resolvedData),Gt(pt,it,ge.component?ii?ii.children:null:q,Dt,zt),Ni&&ii&&ii.outlet&&ii.outlet.isActivated&&zt.canDeactivateChecks.push(new ts(ii.outlet.component,Ve))}else Ve&&gt(it,ii,zt),zt.canActivateChecks.push(new Fa(Dt)),Gt(pt,null,ge.component?ii?ii.children:null:q,Dt,zt)})(Ve,ge[Ve.value.outlet],q,Dt.concat([Ve.value]),zt),delete ge[Ve.value.outlet]}),Ce(ge,(Ve,ii)=>gt(Ve,q.getContext(ii),zt)),zt}function gt(pt,it,q){const Dt=Sn(pt),zt=pt.value;Ce(Dt,(ge,Ve)=>{gt(ge,zt.component?it?it.children.getContext(Ve):null:it,q)}),q.canDeactivateChecks.push(new ts(zt.component&&it&&it.outlet&&it.outlet.isActivated?it.outlet.component:null,zt))}class Zn{}function Qn(pt){return new t.y(it=>it.error(pt))}class er{constructor(it,q,Dt,zt,ge,Ve){this.rootComponentType=it,this.config=q,this.urlTree=Dt,this.url=zt,this.paramsInheritanceStrategy=ge,this.relativeLinkResolution=Ve}recognize(){const it=xn(this.urlTree.root,[],[],this.config.filter(Ve=>void 0===Ve.redirectTo),this.relativeLinkResolution).segmentGroup,q=this.processSegmentGroup(this.config,it,ne);if(null===q)return null;const Dt=new Kn([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},ne,this.rootComponentType,null,this.urlTree.root,-1,{}),zt=new Vi(Dt,q),ge=new zn(this.url,zt);return this.inheritParamsAndData(ge._root),ge}inheritParamsAndData(it){const q=it.value,Dt=Ji(q,this.paramsInheritanceStrategy);q.params=Object.freeze(Dt.params),q.data=Object.freeze(Dt.data),it.children.forEach(zt=>this.inheritParamsAndData(zt))}processSegmentGroup(it,q,Dt){return 0===q.segments.length&&q.hasChildren()?this.processChildren(it,q):this.processSegment(it,q,q.segments,Dt)}processChildren(it,q){const Dt=[];for(const ge of Object.keys(q.children)){const Ve=q.children[ge],ii=ms(it,ge),Ni=this.processSegmentGroup(ii,Ve,ge);if(null===Ni)return null;Dt.push(...Ni)}const zt=oo(Dt);return zt.sort((it,q)=>it.value.outlet===ne?-1:q.value.outlet===ne?1:it.value.outlet.localeCompare(q.value.outlet)),zt}processSegment(it,q,Dt,zt){for(const ge of it){const Ve=this.processSegmentAgainstRoute(ge,q,Dt,zt);if(null!==Ve)return Ve}return Fe(q,Dt,zt)?[]:null}processSegmentAgainstRoute(it,q,Dt,zt){if(it.redirectTo||!It(it,q,Dt,zt))return null;let ge,Ve=[],ii=[];if("**"===it.path){const uo=Dt.length>0?mi(Dt).parameters:{};ge=new Kn(Dt,uo,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,To(it),Ko(it),it.component,it,Ba(q),Gs(q)+Dt.length,Is(it))}else{const uo=Nr(q,it,Dt);if(!uo.matched)return null;Ve=uo.consumedSegments,ii=Dt.slice(uo.lastChild),ge=new Kn(Ve,uo.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,To(it),Ko(it),it.component,it,Ba(q),Gs(q)+Ve.length,Is(it))}const Ni=(pt=it).children?pt.children:pt.loadChildren?pt._loadedConfig.routes:[],{segmentGroup:Tn,slicedSegments:_r}=xn(q,Ve,ii,Ni.filter(uo=>void 0===uo.redirectTo),this.relativeLinkResolution);var pt;if(0===_r.length&&Tn.hasChildren()){const uo=this.processChildren(Ni,Tn);return null===uo?null:[new Vi(ge,uo)]}if(0===Ni.length&&0===_r.length)return[new Vi(ge,[])];const Wn=Ko(it)===zt,$r=this.processSegment(Ni,Tn,_r,Wn?ne:zt);return null===$r?null:[new Vi(ge,$r)]}}function Yr(pt){const it=pt.value.routeConfig;return it&&""===it.path&&void 0===it.redirectTo}function oo(pt){const it=[],q=new Set;for(const Dt of pt){if(!Yr(Dt)){it.push(Dt);continue}const zt=it.find(ge=>Dt.value.routeConfig===ge.value.routeConfig);void 0!==zt?(zt.children.push(...Dt.children),q.add(zt)):it.push(Dt)}for(const Dt of q){const zt=oo(Dt.children);it.push(new Vi(Dt.value,zt))}return it.filter(Dt=>!q.has(Dt))}function Ba(pt){let it=pt;for(;it._sourceSegment;)it=it._sourceSegment;return it}function Gs(pt){let it=pt,q=it._segmentIndexShift?it._segmentIndexShift:0;for(;it._sourceSegment;)it=it._sourceSegment,q+=it._segmentIndexShift?it._segmentIndexShift:0;return q-1}function To(pt){return pt.data||{}}function Is(pt){return pt.resolve||{}}function co(pt){return(0,nt.w)(it=>{const q=pt(it);return q?(0,x.D)(q).pipe((0,ht.U)(()=>it)):(0,B.of)(it)})}class On extends class{shouldDetach(it){return!1}store(it,q){}shouldAttach(it){return!1}retrieve(it){return null}shouldReuseRoute(it,q){return it.routeConfig===q.routeConfig}}{}const or=new C.OlP("ROUTES");class cr{constructor(it,q,Dt,zt){this.injector=it,this.compiler=q,this.onLoadStartListener=Dt,this.onLoadEndListener=zt}load(it,q){if(q._loader$)return q._loader$;this.onLoadStartListener&&this.onLoadStartListener(q);const zt=this.loadModuleFactory(q.loadChildren).pipe((0,ht.U)(ge=>{this.onLoadEndListener&&this.onLoadEndListener(q);const Ve=ge.create(it);return new Oo(pn(Ve.injector.get(or,void 0,C.XFs.Self|C.XFs.Optional)).map(us),Ve)}),(0,Mt.K)(ge=>{throw q._loader$=void 0,ge}));return q._loader$=new y(zt,()=>new vt.x).pipe(u()),q._loader$}loadModuleFactory(it){return Oe(it()).pipe((0,de.z)(q=>q instanceof C.YKP?(0,B.of)(q):(0,x.D)(this.compiler.compileModuleAsync(q))))}}class es{shouldProcessUrl(it){return!0}extract(it){return it}merge(it,q){return it}}function Mr(pt){throw pt}function ta(pt,it,q){return it.parse("/")}function Co(pt,it){return(0,B.of)(null)}const yl={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},$a={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Ur=(()=>{class pt{constructor(q,Dt,zt,ge,Ve,ii,Ni){this.rootComponentType=q,this.urlSerializer=Dt,this.rootContexts=zt,this.location=ge,this.config=Ni,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new vt.x,this.errorHandler=Mr,this.malformedUriErrorHandler=ta,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:Co,afterPreactivation:Co},this.urlHandlingStrategy=new es,this.routeReuseStrategy=new On,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=Ve.get(C.h0i),this.console=Ve.get(C.c2e);const Wn=Ve.get(C.R0b);this.isNgZoneEnabled=Wn instanceof C.R0b&&C.R0b.isInAngularZone(),this.resetConfig(Ni),this.currentUrlTree=new ae(new Ae([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new cr(Ve,ii,$r=>this.triggerEvent(new pe($r)),$r=>this.triggerEvent(new ze($r))),this.routerState=oe(this.currentUrlTree,this.rootComponentType),this.transitions=new Q.X({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var q;return null===(q=this.location.getState())||void 0===q?void 0:q.\u0275routerPageId}setupNavigations(q){const Dt=this.events;return q.pipe((0,Jt.h)(zt=>0!==zt.id),(0,ht.U)(zt=>Object.assign(Object.assign({},zt),{extractedUrl:this.urlHandlingStrategy.extract(zt.rawUrl)})),(0,nt.w)(zt=>{let ge=!1,Ve=!1;return(0,B.of)(zt).pipe((0,ve.b)(ii=>{this.currentNavigation={id:ii.id,initialUrl:ii.currentRawUrl,extractedUrl:ii.extractedUrl,trigger:ii.source,extras:ii.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),(0,nt.w)(ii=>{const Ni=this.browserUrlTree.toString(),Tn=!this.navigated||ii.extractedUrl.toString()!==Ni||Ni!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||Tn)&&this.urlHandlingStrategy.shouldProcessUrl(ii.rawUrl))return _s(ii.source)&&(this.browserUrlTree=ii.extractedUrl),(0,B.of)(ii).pipe((0,nt.w)(Wn=>{const $r=this.transitions.getValue();return Dt.next(new Di(Wn.id,this.serializeUrl(Wn.extractedUrl),Wn.source,Wn.restoredState)),$r!==this.transitions.getValue()?Ht.E:Promise.resolve(Wn)}),function(pt,it,q,Dt){return(0,nt.w)(zt=>function(pt,it,q,Dt,zt){return new hr(pt,it,q,Dt,zt).apply()}(pt,it,q,zt.extractedUrl,Dt).pipe((0,ht.U)(ge=>Object.assign(Object.assign({},zt),{urlAfterRedirects:ge}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,ve.b)(Wn=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:Wn.urlAfterRedirects})}),function(pt,it,q,Dt,zt){return(0,de.z)(ge=>function(pt,it,q,Dt,zt="emptyOnly",ge="legacy"){try{const Ve=new er(pt,it,q,Dt,zt,ge).recognize();return null===Ve?Qn(new Zn):(0,B.of)(Ve)}catch(Ve){return Qn(Ve)}}(pt,it,ge.urlAfterRedirects,q(ge.urlAfterRedirects),Dt,zt).pipe((0,ht.U)(Ve=>Object.assign(Object.assign({},ge),{targetSnapshot:Ve}))))}(this.rootComponentType,this.config,Wn=>this.serializeUrl(Wn),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,ve.b)(Wn=>{if("eager"===this.urlUpdateStrategy){if(!Wn.extras.skipLocationChange){const uo=this.urlHandlingStrategy.merge(Wn.urlAfterRedirects,Wn.rawUrl);this.setBrowserUrl(uo,Wn)}this.browserUrlTree=Wn.urlAfterRedirects}const $r=new Bt(Wn.id,this.serializeUrl(Wn.extractedUrl),this.serializeUrl(Wn.urlAfterRedirects),Wn.targetSnapshot);Dt.next($r)}));if(Tn&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:$r,extractedUrl:uo,source:Tl,restoredState:Ys,extras:ba}=ii,Uo=new Di($r,this.serializeUrl(uo),Tl,Ys);Dt.next(Uo);const qa=oe(uo,this.rootComponentType).snapshot;return(0,B.of)(Object.assign(Object.assign({},ii),{targetSnapshot:qa,urlAfterRedirects:uo,extras:Object.assign(Object.assign({},ba),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=ii.rawUrl,ii.resolve(null),Ht.E}),co(ii=>{const{targetSnapshot:Ni,id:Tn,extractedUrl:_r,rawUrl:Wn,extras:{skipLocationChange:$r,replaceUrl:uo}}=ii;return this.hooks.beforePreactivation(Ni,{navigationId:Tn,appliedUrlTree:_r,rawUrlTree:Wn,skipLocationChange:!!$r,replaceUrl:!!uo})}),(0,ve.b)(ii=>{const Ni=new Te(ii.id,this.serializeUrl(ii.extractedUrl),this.serializeUrl(ii.urlAfterRedirects),ii.targetSnapshot);this.triggerEvent(Ni)}),(0,ht.U)(ii=>Object.assign(Object.assign({},ii),{guards:ll(ii.targetSnapshot,ii.currentSnapshot,this.rootContexts)})),function(pt,it){return(0,de.z)(q=>{const{targetSnapshot:Dt,currentSnapshot:zt,guards:{canActivateChecks:ge,canDeactivateChecks:Ve}}=q;return 0===Ve.length&&0===ge.length?(0,B.of)(Object.assign(Object.assign({},q),{guardsResult:!0})):function(pt,it,q,Dt){return(0,x.D)(pt).pipe((0,de.z)(zt=>function(pt,it,q,Dt,zt){const ge=it&&it.routeConfig?it.routeConfig.canDeactivate:null;if(!ge||0===ge.length)return(0,B.of)(!0);const Ve=ge.map(ii=>{const Ni=qs(ii,it,zt);let Tn;if(function(pt){return pt&&zr(pt.canDeactivate)}(Ni))Tn=Oe(Ni.canDeactivate(pt,it,q,Dt));else{if(!zr(Ni))throw new Error("Invalid CanDeactivate guard");Tn=Oe(Ni(pt,it,q,Dt))}return Tn.pipe(Et())});return(0,B.of)(Ve).pipe(Eo())}(zt.component,zt.route,q,it,Dt)),Et(zt=>!0!==zt,!0))}(Ve,Dt,zt,pt).pipe((0,de.z)(ii=>ii&&function(pt){return"boolean"==typeof pt}(ii)?function(pt,it,q,Dt){return(0,x.D)(it).pipe((0,Nt.b)(zt=>(0,rt.z)(function(pt,it){return null!==pt&&it&&it(new hi(pt)),(0,B.of)(!0)}(zt.route.parent,Dt),function(pt,it){return null!==pt&&it&&it(new te(pt)),(0,B.of)(!0)}(zt.route,Dt),function(pt,it,q){const Dt=it[it.length-1],ge=it.slice(0,it.length-1).reverse().map(Ve=>function(pt){const it=pt.routeConfig?pt.routeConfig.canActivateChild:null;return it&&0!==it.length?{node:pt,guards:it}:null}(Ve)).filter(Ve=>null!==Ve).map(Ve=>(0,St.P)(()=>{const ii=Ve.guards.map(Ni=>{const Tn=qs(Ni,Ve.node,q);let _r;if(function(pt){return pt&&zr(pt.canActivateChild)}(Tn))_r=Oe(Tn.canActivateChild(Dt,pt));else{if(!zr(Tn))throw new Error("Invalid CanActivateChild guard");_r=Oe(Tn(Dt,pt))}return _r.pipe(Et())});return(0,B.of)(ii).pipe(Eo())}));return(0,B.of)(ge).pipe(Eo())}(pt,zt.path,q),function(pt,it,q){const Dt=it.routeConfig?it.routeConfig.canActivate:null;if(!Dt||0===Dt.length)return(0,B.of)(!0);const zt=Dt.map(ge=>(0,St.P)(()=>{const Ve=qs(ge,it,q);let ii;if(function(pt){return pt&&zr(pt.canActivate)}(Ve))ii=Oe(Ve.canActivate(it,pt));else{if(!zr(Ve))throw new Error("Invalid CanActivate guard");ii=Oe(Ve(it,pt))}return ii.pipe(Et())}));return(0,B.of)(zt).pipe(Eo())}(pt,zt.route,q))),Et(zt=>!0!==zt,!0))}(Dt,ge,pt,it):(0,B.of)(ii)),(0,ht.U)(ii=>Object.assign(Object.assign({},q),{guardsResult:ii})))})}(this.ngModule.injector,ii=>this.triggerEvent(ii)),(0,ve.b)(ii=>{if(yo(ii.guardsResult)){const Tn=ce(`Redirecting to "${this.serializeUrl(ii.guardsResult)}"`);throw Tn.url=ii.guardsResult,Tn}const Ni=new $t(ii.id,this.serializeUrl(ii.extractedUrl),this.serializeUrl(ii.urlAfterRedirects),ii.targetSnapshot,!!ii.guardsResult);this.triggerEvent(Ni)}),(0,Jt.h)(ii=>!!ii.guardsResult||(this.restoreHistory(ii),this.cancelNavigationTransition(ii,""),!1)),co(ii=>{if(ii.guards.canActivateChecks.length)return(0,B.of)(ii).pipe((0,ve.b)(Ni=>{const Tn=new _e(Ni.id,this.serializeUrl(Ni.extractedUrl),this.serializeUrl(Ni.urlAfterRedirects),Ni.targetSnapshot);this.triggerEvent(Tn)}),(0,nt.w)(Ni=>{let Tn=!1;return(0,B.of)(Ni).pipe(function(pt,it){return(0,de.z)(q=>{const{targetSnapshot:Dt,guards:{canActivateChecks:zt}}=q;if(!zt.length)return(0,B.of)(q);let ge=0;return(0,x.D)(zt).pipe((0,Nt.b)(Ve=>function(pt,it,q,Dt){return function(pt,it,q,Dt){const zt=Object.keys(pt);if(0===zt.length)return(0,B.of)({});const ge={};return(0,x.D)(zt).pipe((0,de.z)(Ve=>function(pt,it,q,Dt){const zt=qs(pt,it,Dt);return Oe(zt.resolve?zt.resolve(it,q):zt(it,q))}(pt[Ve],it,q,Dt).pipe((0,ve.b)(ii=>{ge[Ve]=ii}))),Ct(1),(0,de.z)(()=>Object.keys(ge).length===zt.length?(0,B.of)(ge):Ht.E))}(pt._resolve,pt,it,Dt).pipe((0,ht.U)(ge=>(pt._resolvedData=ge,pt.data=Object.assign(Object.assign({},pt.data),Ji(pt,q).resolve),null)))}(Ve.route,Dt,pt,it)),(0,ve.b)(()=>ge++),Ct(1),(0,de.z)(Ve=>ge===zt.length?(0,B.of)(q):Ht.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,ve.b)({next:()=>Tn=!0,complete:()=>{Tn||(this.restoreHistory(Ni),this.cancelNavigationTransition(Ni,"At least one route resolver didn't emit any value."))}}))}),(0,ve.b)(Ni=>{const Tn=new At(Ni.id,this.serializeUrl(Ni.extractedUrl),this.serializeUrl(Ni.urlAfterRedirects),Ni.targetSnapshot);this.triggerEvent(Tn)}))}),co(ii=>{const{targetSnapshot:Ni,id:Tn,extractedUrl:_r,rawUrl:Wn,extras:{skipLocationChange:$r,replaceUrl:uo}}=ii;return this.hooks.afterPreactivation(Ni,{navigationId:Tn,appliedUrlTree:_r,rawUrlTree:Wn,skipLocationChange:!!$r,replaceUrl:!!uo})}),(0,ht.U)(ii=>{const Ni=function(pt,it,q){const Dt=_o(pt,it._root,q?q._root:void 0);return new Gn(Dt,it)}(this.routeReuseStrategy,ii.targetSnapshot,ii.currentRouterState);return Object.assign(Object.assign({},ii),{targetRouterState:Ni})}),(0,ve.b)(ii=>{this.currentUrlTree=ii.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(ii.urlAfterRedirects,ii.rawUrl),this.routerState=ii.targetRouterState,"deferred"===this.urlUpdateStrategy&&(ii.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,ii),this.browserUrlTree=ii.urlAfterRedirects)}),((pt,it,q)=>(0,ht.U)(Dt=>(new ma(it,Dt.targetRouterState,Dt.currentRouterState,q).activate(pt),Dt)))(this.rootContexts,this.routeReuseStrategy,ii=>this.triggerEvent(ii)),(0,ve.b)({next(){ge=!0},complete(){ge=!0}}),(0,ue.x)(()=>{var ii;ge||Ve||this.cancelNavigationTransition(zt,`Navigation ID ${zt.id} is not equal to the current navigation id ${this.navigationId}`),(null===(ii=this.currentNavigation)||void 0===ii?void 0:ii.id)===zt.id&&(this.currentNavigation=null)}),(0,Mt.K)(ii=>{if(Ve=!0,function(pt){return pt&&pt[Zt]}(ii)){const Ni=yo(ii.url);Ni||(this.navigated=!0,this.restoreHistory(zt,!0));const Tn=new Le(zt.id,this.serializeUrl(zt.extractedUrl),ii.message);Dt.next(Tn),Ni?setTimeout(()=>{const _r=this.urlHandlingStrategy.merge(ii.url,this.rawUrlTree),Wn={skipLocationChange:zt.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||_s(zt.source)};this.scheduleNavigation(_r,"imperative",null,Wn,{resolve:zt.resolve,reject:zt.reject,promise:zt.promise})},0):zt.resolve(!1)}else{this.restoreHistory(zt,!0);const Ni=new gi(zt.id,this.serializeUrl(zt.extractedUrl),ii);Dt.next(Ni);try{zt.resolve(this.errorHandler(ii))}catch(Tn){zt.reject(Tn)}}return Ht.E}))}))}resetRootComponentType(q){this.rootComponentType=q,this.routerState.root.component=this.rootComponentType}setTransition(q){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),q))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(q=>{const Dt="popstate"===q.type?"popstate":"hashchange";"popstate"===Dt&&setTimeout(()=>{var zt;const ge={replaceUrl:!0},Ve=(null===(zt=q.state)||void 0===zt?void 0:zt.navigationId)?q.state:null;if(Ve){const Ni=Object.assign({},Ve);delete Ni.navigationId,delete Ni.\u0275routerPageId,0!==Object.keys(Ni).length&&(ge.state=Ni)}const ii=this.parseUrl(q.url);this.scheduleNavigation(ii,Dt,Ve,ge)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(q){this.events.next(q)}resetConfig(q){jr(q),this.config=q.map(us),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(q,Dt={}){const{relativeTo:zt,queryParams:ge,fragment:Ve,queryParamsHandling:ii,preserveFragment:Ni}=Dt,Tn=zt||this.routerState.root,_r=Ni?this.currentUrlTree.fragment:Ve;let Wn=null;switch(ii){case"merge":Wn=Object.assign(Object.assign({},this.currentUrlTree.queryParams),ge);break;case"preserve":Wn=this.currentUrlTree.queryParams;break;default:Wn=ge||null}return null!==Wn&&(Wn=this.removeEmptyProps(Wn)),function(pt,it,q,Dt,zt){if(0===q.length)return ws(it.root,it.root,it,Dt,zt);const ge=function(pt){if("string"==typeof pt[0]&&1===pt.length&&"/"===pt[0])return new Ro(!0,0,pt);let it=0,q=!1;const Dt=pt.reduce((zt,ge,Ve)=>{if("object"==typeof ge&&null!=ge){if(ge.outlets){const ii={};return Ce(ge.outlets,(Ni,Tn)=>{ii[Tn]="string"==typeof Ni?Ni.split("/"):Ni}),[...zt,{outlets:ii}]}if(ge.segmentPath)return[...zt,ge.segmentPath]}return"string"!=typeof ge?[...zt,ge]:0===Ve?(ge.split("/").forEach((ii,Ni)=>{0==Ni&&"."===ii||(0==Ni&&""===ii?q=!0:".."===ii?it++:""!=ii&&zt.push(ii))}),zt):[...zt,ge]},[]);return new Ro(q,it,Dt)}(q);if(ge.toRoot())return ws(it.root,new Ae([],{}),it,Dt,zt);const Ve=function(pt,it,q){if(pt.isAbsolute)return new Ho(it.root,!0,0);if(-1===q.snapshot._lastPathIndex){const ge=q.snapshot._urlSegment;return new Ho(ge,ge===it.root,0)}const Dt=Jr(pt.commands[0])?0:1;return function(pt,it,q){let Dt=pt,zt=it,ge=q;for(;ge>zt;){if(ge-=zt,Dt=Dt.parent,!Dt)throw new Error("Invalid number of '../'");zt=Dt.segments.length}return new Ho(Dt,!1,zt-ge)}(q.snapshot._urlSegment,q.snapshot._lastPathIndex+Dt,pt.numberOfDoubleDots)}(ge,it,pt),ii=Ve.processChildren?ga(Ve.segmentGroup,Ve.index,ge.commands):Qo(Ve.segmentGroup,Ve.index,ge.commands);return ws(Ve.segmentGroup,ii,it,Dt,zt)}(Tn,this.currentUrlTree,q,Wn,null!=_r?_r:null)}navigateByUrl(q,Dt={skipLocationChange:!1}){const zt=yo(q)?q:this.parseUrl(q),ge=this.urlHandlingStrategy.merge(zt,this.rawUrlTree);return this.scheduleNavigation(ge,"imperative",null,Dt)}navigate(q,Dt={skipLocationChange:!1}){return function(pt){for(let it=0;it<pt.length;it++){const q=pt[it];if(null==q)throw new Error(`The requested path contains ${q} segment at index ${it}`)}}(q),this.navigateByUrl(this.createUrlTree(q,Dt),Dt)}serializeUrl(q){return this.urlSerializer.serialize(q)}parseUrl(q){let Dt;try{Dt=this.urlSerializer.parse(q)}catch(zt){Dt=this.malformedUriErrorHandler(zt,this.urlSerializer,q)}return Dt}isActive(q,Dt){let zt;if(zt=!0===Dt?Object.assign({},yl):!1===Dt?Object.assign({},$a):Dt,yo(q))return _i(this.currentUrlTree,q,zt);const ge=this.parseUrl(q);return _i(this.currentUrlTree,ge,zt)}removeEmptyProps(q){return Object.keys(q).reduce((Dt,zt)=>{const ge=q[zt];return null!=ge&&(Dt[zt]=ge),Dt},{})}processNavigations(){this.navigations.subscribe(q=>{this.navigated=!0,this.lastSuccessfulId=q.id,this.currentPageId=q.targetPageId,this.events.next(new Ze(q.id,this.serializeUrl(q.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,q.resolve(!0)},q=>{this.console.warn(`Unhandled Navigation Error: ${q}`)})}scheduleNavigation(q,Dt,zt,ge,Ve){var ii,Ni,Tn;if(this.disposed)return Promise.resolve(!1);const _r=this.transitions.value,Wn=_s(Dt)&&_r&&!_s(_r.source),$r=_r.rawUrl.toString()===q.toString(),uo=_r.id===(null===(ii=this.currentNavigation)||void 0===ii?void 0:ii.id);if(Wn&&$r&&uo)return Promise.resolve(!0);let Ys,ba,Uo;Ve?(Ys=Ve.resolve,ba=Ve.reject,Uo=Ve.promise):Uo=new Promise((ya,Va)=>{Ys=ya,ba=Va});const qa=++this.navigationId;let Xs;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(zt=this.location.getState()),Xs=zt&&zt.\u0275routerPageId?zt.\u0275routerPageId:ge.replaceUrl||ge.skipLocationChange?null!==(Ni=this.browserPageId)&&void 0!==Ni?Ni:0:(null!==(Tn=this.browserPageId)&&void 0!==Tn?Tn:0)+1):Xs=0,this.setTransition({id:qa,targetPageId:Xs,source:Dt,restoredState:zt,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:q,extras:ge,resolve:Ys,reject:ba,promise:Uo,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),Uo.catch(ya=>Promise.reject(ya))}setBrowserUrl(q,Dt){const zt=this.urlSerializer.serialize(q),ge=Object.assign(Object.assign({},Dt.extras.state),this.generateNgRouterState(Dt.id,Dt.targetPageId));this.location.isCurrentPathEqualTo(zt)||Dt.extras.replaceUrl?this.location.replaceState(zt,"",ge):this.location.go(zt,"",ge)}restoreHistory(q,Dt=!1){var zt,ge;if("computed"===this.canceledNavigationResolution){const Ve=this.currentPageId-q.targetPageId;"popstate"!==q.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(zt=this.currentNavigation)||void 0===zt?void 0:zt.finalUrl)||0===Ve?this.currentUrlTree===(null===(ge=this.currentNavigation)||void 0===ge?void 0:ge.finalUrl)&&0===Ve&&(this.resetState(q),this.browserUrlTree=q.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(Ve)}else"replace"===this.canceledNavigationResolution&&(Dt&&this.resetState(q),this.resetUrlToCurrentUrlTree())}resetState(q){this.routerState=q.currentRouterState,this.currentUrlTree=q.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,q.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(q,Dt){const zt=new Le(q.id,this.serializeUrl(q.extractedUrl),Dt);this.triggerEvent(zt),q.resolve(!1)}generateNgRouterState(q,Dt){return"computed"===this.canceledNavigationResolution?{navigationId:q,\u0275routerPageId:Dt}:{navigationId:q}}}return pt.\u0275fac=function(q){C.$Z()},pt.\u0275prov=C.Yz7({token:pt,factory:pt.\u0275fac}),pt})();function _s(pt){return"imperative"!==pt}let As=(()=>{class pt{constructor(q,Dt,zt){this.router=q,this.route=Dt,this.locationStrategy=zt,this.commands=null,this.href=null,this.onChanges=new vt.x,this.subscription=q.events.subscribe(ge=>{ge instanceof Ze&&this.updateTargetUrlAndHref()})}set routerLink(q){this.commands=null!=q?Array.isArray(q)?q:[q]:null}ngOnChanges(q){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(q,Dt,zt,ge,Ve){if(0!==q||Dt||zt||ge||Ve||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)return!0;const ii={skipLocationChange:va(this.skipLocationChange),replaceUrl:va(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,ii),!1}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:va(this.preserveFragment)})}}return pt.\u0275fac=function(q){return new(q||pt)(C.Y36(Ur),C.Y36(Oi),C.Y36(Ne.S$))},pt.\u0275dir=C.lG2({type:pt,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(q,Dt){1&q&&C.NdJ("click",function(ge){return Dt.onClick(ge.button,ge.ctrlKey,ge.shiftKey,ge.altKey,ge.metaKey)}),2&q&&C.uIk("target",Dt.target)("href",Dt.href,C.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[C.TTD]}),pt})();function va(pt){return""===pt||!!pt}class vs{}class ea{preload(it,q){return(0,B.of)(null)}}let Za=(()=>{class pt{constructor(q,Dt,zt,ge){this.router=q,this.injector=zt,this.preloadingStrategy=ge,this.loader=new cr(zt,Dt,Ni=>q.triggerEvent(new pe(Ni)),Ni=>q.triggerEvent(new ze(Ni)))}setUpPreloading(){this.subscription=this.router.events.pipe((0,Jt.h)(q=>q instanceof Ze),(0,Nt.b)(()=>this.preload())).subscribe(()=>{})}preload(){const q=this.injector.get(C.h0i);return this.processRoutes(q,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(q,Dt){const zt=[];for(const ge of Dt)if(ge.loadChildren&&!ge.canLoad&&ge._loadedConfig){const Ve=ge._loadedConfig;zt.push(this.processRoutes(Ve.module,Ve.routes))}else ge.loadChildren&&!ge.canLoad?zt.push(this.preloadConfig(q,ge)):ge.children&&zt.push(this.processRoutes(q,ge.children));return(0,x.D)(zt).pipe((0,Be.J)(),(0,ht.U)(ge=>{}))}preloadConfig(q,Dt){return this.preloadingStrategy.preload(Dt,()=>(Dt._loadedConfig?(0,B.of)(Dt._loadedConfig):this.loader.load(q.injector,Dt)).pipe((0,de.z)(ge=>(Dt._loadedConfig=ge,this.processRoutes(ge.module,ge.routes)))))}}return pt.\u0275fac=function(q){return new(q||pt)(C.LFG(Ur),C.LFG(C.Sil),C.LFG(C.zs3),C.LFG(vs))},pt.\u0275prov=C.Yz7({token:pt,factory:pt.\u0275fac}),pt})(),Ia=(()=>{class pt{constructor(q,Dt,zt={}){this.router=q,this.viewportScroller=Dt,this.options=zt,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},zt.scrollPositionRestoration=zt.scrollPositionRestoration||"disabled",zt.anchorScrolling=zt.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(q=>{q instanceof Di?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=q.navigationTrigger,this.restoredId=q.restoredState?q.restoredState.navigationId:0):q instanceof Ze&&(this.lastId=q.id,this.scheduleScrollEvent(q,this.router.parseUrl(q.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(q=>{q instanceof ke&&(q.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(q.position):q.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(q.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(q,Dt){this.router.triggerEvent(new ke(q,"popstate"===this.lastSource?this.store[this.restoredId]:null,Dt))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return pt.\u0275fac=function(q){C.$Z()},pt.\u0275prov=C.Yz7({token:pt,factory:pt.\u0275fac}),pt})();const Ma=new C.OlP("ROUTER_CONFIGURATION"),Ol=new C.OlP("ROUTER_FORROOT_GUARD"),Gl=[Ne.Ye,{provide:li,useClass:Je},{provide:Ur,useFactory:function(pt,it,q,Dt,zt,ge,Ve={},ii,Ni){const Tn=new Ur(null,pt,it,q,Dt,zt,pn(ge));return ii&&(Tn.urlHandlingStrategy=ii),Ni&&(Tn.routeReuseStrategy=Ni),function(pt,it){pt.errorHandler&&(it.errorHandler=pt.errorHandler),pt.malformedUriErrorHandler&&(it.malformedUriErrorHandler=pt.malformedUriErrorHandler),pt.onSameUrlNavigation&&(it.onSameUrlNavigation=pt.onSameUrlNavigation),pt.paramsInheritanceStrategy&&(it.paramsInheritanceStrategy=pt.paramsInheritanceStrategy),pt.relativeLinkResolution&&(it.relativeLinkResolution=pt.relativeLinkResolution),pt.urlUpdateStrategy&&(it.urlUpdateStrategy=pt.urlUpdateStrategy),pt.canceledNavigationResolution&&(it.canceledNavigationResolution=pt.canceledNavigationResolution)}(Ve,Tn),Ve.enableTracing&&Tn.events.subscribe(_r=>{var Wn,$r;null===(Wn=console.group)||void 0===Wn||Wn.call(console,`Router Event: ${_r.constructor.name}`),console.log(_r.toString()),console.log(_r),null===($r=console.groupEnd)||void 0===$r||$r.call(console)}),Tn},deps:[li,lo,Ne.Ye,C.zs3,C.Sil,or,Ma,[class{},new C.FiY],[class{},new C.FiY]]},lo,{provide:Oi,useFactory:function(pt){return pt.routerState.root},deps:[Ur]},Za,ea,class{preload(it,q){return q().pipe((0,Mt.K)(()=>(0,B.of)(null)))}},{provide:Ma,useValue:{enableTracing:!1}}];function Ha(){return new C.PXZ("Router",Ur)}let Qa=(()=>{class pt{constructor(q,Dt){}static forRoot(q,Dt){return{ngModule:pt,providers:[Gl,Ua(q),{provide:Ol,useFactory:ua,deps:[[Ur,new C.FiY,new C.tp0]]},{provide:Ma,useValue:Dt||{}},{provide:Ne.S$,useFactory:Wl,deps:[Ne.lw,[new C.tBr(Ne.mr),new C.FiY],Ma]},{provide:Ia,useFactory:mc,deps:[Ur,Ne.EM,Ma]},{provide:vs,useExisting:Dt&&Dt.preloadingStrategy?Dt.preloadingStrategy:ea},{provide:C.PXZ,multi:!0,useFactory:Ha},[Oa,{provide:C.ip1,multi:!0,useFactory:El,deps:[Oa]},{provide:xl,useFactory:Ql,deps:[Oa]},{provide:C.tb,multi:!0,useExisting:xl}]]}}static forChild(q){return{ngModule:pt,providers:[Ua(q)]}}}return pt.\u0275fac=function(q){return new(q||pt)(C.LFG(Ol,8),C.LFG(Ur,8))},pt.\u0275mod=C.oAB({type:pt}),pt.\u0275inj=C.cJS({}),pt})();function mc(pt,it,q){return q.scrollOffset&&it.setOffset(q.scrollOffset),new Ia(pt,it,q)}function Wl(pt,it,q={}){return q.useHash?new Ne.Do(pt,it):new Ne.b0(pt,it)}function ua(pt){return"guarded"}function Ua(pt){return[{provide:C.deG,multi:!0,useValue:pt},{provide:or,multi:!0,useValue:pt}]}let Oa=(()=>{class pt{constructor(q){this.injector=q,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new vt.x}appInitializer(){return this.injector.get(Ne.V_,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let Dt=null;const zt=new Promise(ii=>Dt=ii),ge=this.injector.get(Ur),Ve=this.injector.get(Ma);return"disabled"===Ve.initialNavigation?(ge.setUpLocationChangeListener(),Dt(!0)):"enabled"===Ve.initialNavigation||"enabledBlocking"===Ve.initialNavigation?(ge.hooks.afterPreactivation=()=>this.initNavigation?(0,B.of)(null):(this.initNavigation=!0,Dt(!0),this.resultOfPreactivationDone),ge.initialNavigation()):Dt(!0),zt})}bootstrapListener(q){const Dt=this.injector.get(Ma),zt=this.injector.get(Za),ge=this.injector.get(Ia),Ve=this.injector.get(Ur),ii=this.injector.get(C.z2F);q===ii.components[0]&&(("enabledNonBlocking"===Dt.initialNavigation||void 0===Dt.initialNavigation)&&Ve.initialNavigation(),zt.setUpPreloading(),ge.init(),Ve.resetRootComponentType(ii.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return pt.\u0275fac=function(q){return new(q||pt)(C.LFG(C.zs3))},pt.\u0275prov=C.Yz7({token:pt,factory:pt.\u0275fac}),pt})();function El(pt){return pt.appInitializer.bind(pt)}function Ql(pt){return pt.bootstrapListener.bind(pt)}const xl=new C.OlP("Router Initializer")},33:(U,$,m)=>{"use strict";m.d($,{C:()=>he,k:()=>Mt});var Rt=m(5e3),Et=m(93075);const ht=["ref"];function nt(Nt){return Nt&&Nt.replace(/\r\n|\r/g,"\n")}let he=(()=>{class Nt{constructor(ve,ue){this._differs=ve,this._ngZone=ue,this.className="",this.name="codemirror",this.autoFocus=!1,this.preserveScrollPosition=!1,this.cursorActivity=new Rt.vpe,this.focusChange=new Rt.vpe,this.scroll=new Rt.vpe,this.drop=new Rt.vpe,this.value="",this.disabled=!1,this.isFocused=!1,this.onChange=Be=>{},this.onTouched=()=>{}}set options(ve){this._options=ve,!this._differ&&ve&&(this._differ=this._differs.find(ve).create())}get codeMirrorGlobal(){return this._codeMirror||(this._codeMirror="undefined"!=typeof CodeMirror?CodeMirror:Promise.resolve().then(m.t.bind(m,68266,19))),this._codeMirror}ngAfterViewInit(){this._ngZone.runOutsideAngular(()=>function(Nt,de,ve,ue){return new(ve||(ve=Promise))(function(Ne,Qe){function Di(gi){try{Le(ue.next(gi))}catch(Bt){Qe(Bt)}}function Ze(gi){try{Le(ue.throw(gi))}catch(Bt){Qe(Bt)}}function Le(gi){gi.done?Ne(gi.value):function(Ne){return Ne instanceof ve?Ne:new ve(function(Qe){Qe(Ne)})}(gi.value).then(Di,Ze)}Le((ue=ue.apply(Nt,de||[])).next())})}(this,void 0,void 0,function*(){const ve=yield this.codeMirrorGlobal;this.codeMirror=((null==ve?void 0:ve.default)?ve.default:ve).fromTextArea(this.ref.nativeElement,this._options),this.codeMirror.on("cursorActivity",Be=>this._ngZone.run(()=>this.cursorActive(Be))),this.codeMirror.on("scroll",this.scrollChanged.bind(this)),this.codeMirror.on("blur",()=>this._ngZone.run(()=>this.focusChanged(!1))),this.codeMirror.on("focus",()=>this._ngZone.run(()=>this.focusChanged(!0))),this.codeMirror.on("change",(Be,Ne)=>this._ngZone.run(()=>this.codemirrorValueChanged(Be,Ne))),this.codeMirror.on("drop",(Be,Ne)=>{this._ngZone.run(()=>this.dropFiles(Be,Ne))}),this.codeMirror.setValue(this.value)}))}ngDoCheck(){if(!this._differ)return;const ve=this._differ.diff(this._options);ve&&(ve.forEachChangedItem(ue=>this.setOptionIfChanged(ue.key,ue.currentValue)),ve.forEachAddedItem(ue=>this.setOptionIfChanged(ue.key,ue.currentValue)),ve.forEachRemovedItem(ue=>this.setOptionIfChanged(ue.key,ue.currentValue)))}ngOnDestroy(){this.codeMirror&&this.codeMirror.toTextArea()}codemirrorValueChanged(ve,ue){const Be=ve.getValue();this.value!==Be&&(this.value=Be,this.onChange(this.value))}setOptionIfChanged(ve,ue){!this.codeMirror||this.codeMirror.setOption(ve,ue)}focusChanged(ve){this.onTouched(),this.isFocused=ve,this.focusChange.emit(ve)}scrollChanged(ve){this.scroll.emit(ve.getScrollInfo())}cursorActive(ve){this.cursorActivity.emit(ve)}dropFiles(ve,ue){this.drop.emit([ve,ue])}writeValue(ve){if(null==ve)return;if(!this.codeMirror)return void(this.value=ve);const ue=this.codeMirror.getValue();if(ve!==ue&&nt(ue)!==nt(ve))if(this.value=ve,this.preserveScrollPosition){const Be=this.codeMirror.getScrollInfo();this.codeMirror.setValue(this.value),this.codeMirror.scrollTo(Be.left,Be.top)}else this.codeMirror.setValue(this.value)}registerOnChange(ve){this.onChange=ve}registerOnTouched(ve){this.onTouched=ve}setDisabledState(ve){this.disabled=ve,this.setOptionIfChanged("readOnly",this.disabled)}}return Nt.\u0275fac=function(ve){return new(ve||Nt)(Rt.Y36(Rt.aQg),Rt.Y36(Rt.R0b))},Nt.\u0275cmp=Rt.Xpm({type:Nt,selectors:[["ngx-codemirror"]],viewQuery:function(ve,ue){if(1&ve&&Rt.Gf(ht,5),2&ve){let Be;Rt.iGM(Be=Rt.CRH())&&(ue.ref=Be.first)}},inputs:{className:"className",name:"name",autoFocus:"autoFocus",options:"options",preserveScrollPosition:"preserveScrollPosition"},outputs:{cursorActivity:"cursorActivity",focusChange:"focusChange",scroll:"scroll",drop:"drop"},features:[Rt._Bn([{provide:Et.JU,useExisting:(0,Rt.Gpc)(()=>Nt),multi:!0}])],decls:3,vars:7,consts:[["autocomplete","off",3,"name","autofocus"],["ref",""]],template:function(ve,ue){1&ve&&(Rt.TgZ(0,"textarea",0,1),Rt._uU(2,"    "),Rt.qZA()),2&ve&&(Rt.Gre("ngx-codemirror ",ue.className,""),Rt.ekj("ngx-codemirror--focused",ue.isFocused),Rt.Q6J("name",ue.name)("autofocus",ue.autoFocus))},encapsulation:2,changeDetection:0}),Nt})(),Mt=(()=>{class Nt{}return Nt.\u0275fac=function(ve){return new(ve||Nt)},Nt.\u0275mod=Rt.oAB({type:Nt}),Nt.\u0275inj=Rt.cJS({}),Nt})()},15861:(U,$,m)=>{"use strict";function C(e,t,n,r,s,u,y){try{var x=e[u](y),B=x.value}catch(Q){return void n(Q)}x.done?t(B):Promise.resolve(B).then(r,s)}function _(e){return function(){var t=this,n=arguments;return new Promise(function(r,s){var u=e.apply(t,n);function y(B){C(u,r,s,y,x,"next",B)}function x(B){C(u,r,s,y,x,"throw",B)}y(void 0)})}}m.d($,{Z:()=>_})}},U=>{U(U.s=20468)}]);